# Comparing `tmp/ccxt-3.0.95.tar.gz` & `tmp/ccxt-3.0.96.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "dist/ccxt-3.0.95.tar", last modified: Sat May  6 00:35:33 2023, max compression
+gzip compressed data, was "dist/ccxt-3.0.96.tar", last modified: Sat May  6 14:21:54 2023, max compression
```

## Comparing `ccxt-3.0.95.tar` & `ccxt-3.0.96.tar`

### file list

```diff
@@ -1,487 +1,487 @@
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 00:35:33.817483 ccxt-3.0.95/
--rw-rw-r--   0 travis    (2000) travis    (2000)     1068 2023-05-06 00:35:18.000000 ccxt-3.0.95/LICENSE.txt
--rw-rw-r--   0 travis    (2000) travis    (2000)      100 2023-05-06 00:09:53.000000 ccxt-3.0.95/MANIFEST.in
--rw-rw-r--   0 travis    (2000) travis    (2000)   113274 2023-05-06 00:35:33.821483 ccxt-3.0.95/PKG-INFO
--rw-rw-r--   0 travis    (2000) travis    (2000)   102253 2023-05-06 00:09:53.000000 ccxt-3.0.95/README.rst
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 00:35:33.665467 ccxt-3.0.95/ccxt/
--rw-rw-r--   0 travis    (2000) travis    (2000)    15626 2023-05-06 00:35:17.000000 ccxt-3.0.95/ccxt/__init__.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 00:35:33.693470 ccxt-3.0.95/ccxt/abstract/
--rw-rw-r--   0 travis    (2000) travis    (2000)        0 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/abstract/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1448 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/ace.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1861 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/alpaca.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    11071 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/ascendex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     8376 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/bequant.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2347 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/bigone.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    62883 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/binance.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    62883 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/binancecoinm.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    62883 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/binanceus.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    62883 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/binanceusdm.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2830 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/bit2c.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1989 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/bitbank.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5482 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/bitbay.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4082 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/bitbns.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     8376 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/bitcoincom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     7605 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/bitfinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    19171 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/bitfinex2.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3576 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/bitflyer.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2443 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/bitforex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    17077 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/bitget.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2659 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/bithumb.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     8966 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/bitmart.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     8653 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/bitmex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2919 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/bitopro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3859 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/bitpanda.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3648 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/bitrue.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4025 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/bitso.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22372 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/bitstamp.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1987 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/bitstamp1.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     9337 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/bittrex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2357 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/bitvavo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     7439 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/bkex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2024 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/bl3p.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2638 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/blockchaincom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1380 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/btcalpha.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      849 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/btcbox.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5594 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/btcex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3690 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/btcmarkets.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1407 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/btctradeua.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1403 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/btcturk.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    71684 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/bybit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3311 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/cex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     9017 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/coinbase.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6952 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/coinbaseprime.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6952 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/coinbasepro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3417 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/coincheck.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    14759 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/coinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2182 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/coinfalcon.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5354 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/coinmate.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2504 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/coinone.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3736 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/coinsph.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2707 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/coinspot.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    21126 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/cryptocom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     7452 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/currencycom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3128 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/delta.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    15499 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/deribit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     9386 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/digifinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6177 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/exmo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     8376 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/fmfwio.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    27864 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/gate.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    27864 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/gateio.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6840 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/gemini.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     8376 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/hitbtc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    10949 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/hitbtc3.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2596 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/hollaex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    95821 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/huobi.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    14331 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/huobijp.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    95821 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/huobipro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2129 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/idex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4165 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/independentreserve.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2266 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/indodax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4979 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/kraken.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2867 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/krakenfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    20600 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/kucoin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    20893 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/kucoinfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    19005 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/kuna.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     7168 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/latoken.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1474 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/lbank.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6930 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/lbank2.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3566 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/luno.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2960 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/lykke.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2357 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/mercado.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    23203 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/mexc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    23203 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/mexc3.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    11878 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/ndax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2565 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/novadax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1721 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/oceanex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    25825 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/okcoin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    29716 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/okex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    29716 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/okex5.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    29716 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/okx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2752 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/paymium.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    12172 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/phemex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6301 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/poloniex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4575 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/poloniexfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1849 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/probit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    10639 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/stex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1953 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/tidex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5875 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/timex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4094 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/tokocrypto.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3463 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/upbit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    18450 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/wavesexchange.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2130 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/wazirx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     7934 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/whitebit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     7689 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/woo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    25850 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/xt.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1339 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/yobit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3935 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/zaif.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5482 2023-05-06 00:13:54.000000 ccxt-3.0.95/ccxt/abstract/zonda.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    41329 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/ace.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    33161 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/alpaca.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   127668 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/ascendex.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 00:35:33.741475 ccxt-3.0.95/ccxt/async_support/
--rw-rw-r--   0 travis    (2000) travis    (2000)    15429 2023-05-06 00:35:17.000000 ccxt-3.0.95/ccxt/async_support/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    41553 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/ace.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    33307 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/alpaca.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   128282 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/ascendex.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 00:35:33.741475 ccxt-3.0.95/ccxt/async_support/base/
--rw-rw-r--   0 travis    (2000) travis    (2000)       67 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/base/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   128268 2023-05-06 00:35:17.000000 ccxt-3.0.95/ccxt/async_support/base/exchange.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1847 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/base/throttler.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 00:35:33.745475 ccxt-3.0.95/ccxt/async_support/base/ws/
--rw-rw-r--   0 travis    (2000) travis    (2000)     1791 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/base/ws/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4999 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/base/ws/aiohttp_client.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6085 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/base/ws/cache.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     7289 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/base/ws/client.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3733 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/base/ws/fast_client.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1495 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/base/ws/functions.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      249 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/base/ws/future.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2894 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/base/ws/order_book.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6079 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/base/ws/order_book_side.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1150 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/bequant.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    62726 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/bigone.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   374663 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/binance.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1683 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/binancecoinm.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2165 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/binanceus.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2518 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/binanceusdm.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35688 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/bit2c.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    39268 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/bitbank.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      462 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/bitbay.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    46227 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/bitbns.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      481 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/bitcoincom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    69752 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/bitfinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   111979 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/bitfinex2.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    38049 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/bitflyer.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    28522 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/bitforex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   204759 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/bitget.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    42790 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/bithumb.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   131902 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/bitmart.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   120028 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/bitmex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    63629 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/bitopro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    87760 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/bitpanda.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    88471 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/bitrue.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    68835 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/bitso.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    82612 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/bitstamp.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    17931 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/bitstamp1.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    93903 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/bittrex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    77171 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/bitvavo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    74597 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/bkex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    16351 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/bl3p.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    47523 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/blockchaincom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35438 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/btcalpha.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22683 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/btcbox.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   111410 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/btcex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    48897 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/btcmarkets.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22323 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/btctradeua.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35602 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/btcturk.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    45959 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/buda.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   394329 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/bybit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    65248 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/cex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   125230 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/coinbase.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1233 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/coinbaseprime.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    74293 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/coinbasepro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    34414 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/coincheck.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   191811 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/coinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    39252 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/coinfalcon.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    39813 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/coinmate.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    34679 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/coinone.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    81496 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/coinsph.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    18912 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/coinspot.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   108492 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/cryptocom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    80021 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/currencycom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    84440 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/delta.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   119560 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/deribit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   152866 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/digifinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    89266 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/exmo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1183 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/flowbtc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1252 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/fmfwio.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   221908 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/gate.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      459 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/gateio.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    69449 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/gemini.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    62675 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/hitbtc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   117197 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/hitbtc3.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    69616 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/hollaex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   357192 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/huobi.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    87087 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/huobijp.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      586 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/huobipro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    67772 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/idex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    30046 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/independentreserve.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    42709 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/indodax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35208 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/itbit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   101946 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/kraken.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    82058 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/krakenfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   160977 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/kucoin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    98228 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/kucoinfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    37998 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/kuna.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    70399 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/latoken.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    33953 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/lbank.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    98405 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/lbank2.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    40781 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/luno.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    48763 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/lykke.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    34881 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/mercado.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   210181 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/mexc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      455 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/mexc3.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   106630 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/ndax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    62006 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/novadax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    37393 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/oceanex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   178258 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/okcoin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      448 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/okex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      455 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/okex5.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   265343 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/okx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22933 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/paymium.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   192396 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/phemex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    88811 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/poloniex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    75472 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/poloniexfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    68946 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/probit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    47585 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/ripio.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   118368 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/stex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    42655 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/tidex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    65784 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/timex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   119594 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/tokocrypto.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    75965 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/upbit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   103947 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/wavesexchange.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35792 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/wazirx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    92591 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/whitebit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    95037 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/woo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   188868 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/xt.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    51652 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/yobit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    28959 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/zaif.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   184533 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/zb.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    74326 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/async_support/zonda.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 00:35:33.745475 ccxt-3.0.95/ccxt/base/
--rw-rw-r--   0 travis    (2000) travis    (2000)     1320 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/base/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6634 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/base/decimal_to_precision.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3401 2023-05-06 00:21:39.000000 ccxt-3.0.95/ccxt/base/errors.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   169537 2023-05-06 00:35:17.000000 ccxt-3.0.95/ccxt/base/exchange.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     8565 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/base/precise.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1071 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/base/types.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1136 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/bequant.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    62340 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/bigone.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   373477 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/binance.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1645 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/binancecoinm.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2151 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/binanceus.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2480 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/binanceusdm.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35482 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/bit2c.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    39008 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/bitbank.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      448 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/bitbay.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    45973 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/bitbns.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      467 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/bitcoincom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    69312 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/bitfinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   111509 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/bitfinex2.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    37741 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/bitflyer.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    28316 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/bitforex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   203909 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/bitget.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    42572 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/bithumb.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   131264 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/bitmart.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   119564 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/bitmex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    63261 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/bitopro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    87308 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/bitpanda.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    88097 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/bitrue.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    68449 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/bitso.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    82190 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/bitstamp.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    17785 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/bitstamp1.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    93397 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/bittrex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    76761 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/bitvavo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    74167 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/bkex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    16241 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/bl3p.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    47095 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/blockchaincom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35160 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/btcalpha.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22489 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/btcbox.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   110784 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/btcex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    48547 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/btcmarkets.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22177 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/btctradeua.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35384 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/btcturk.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    45591 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/buda.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   392459 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/bybit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    64922 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/cex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   124586 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/coinbase.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1219 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/coinbaseprime.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    73787 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/coinbasepro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    34208 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/coincheck.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   190913 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/coinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    38956 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/coinfalcon.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    39565 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/coinmate.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    34455 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/coinone.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    81092 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/coinsph.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    18778 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/coinspot.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   107966 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/cryptocom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    79629 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/currencycom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    84060 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/delta.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   119018 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/deribit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   152160 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/digifinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    88724 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/exmo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1169 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/flowbtc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1238 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/fmfwio.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   221082 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/gate.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      445 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/gateio.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    69001 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/gemini.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    62241 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/hitbtc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   116511 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/hitbtc3.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    69194 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/hollaex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   355886 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/huobi.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    86605 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/huobijp.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      572 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/huobipro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    67332 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/idex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    29810 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/independentreserve.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    42437 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/indodax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    34960 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/itbit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   101404 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/kraken.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    81756 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/krakenfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   160363 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/kucoin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    97782 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/kucoinfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    37750 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/kuna.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    70007 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/latoken.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    33717 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/lbank.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    97857 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/lbank2.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    40473 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/luno.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    48461 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/lykke.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    34639 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/mercado.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   209135 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/mexc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      441 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/mexc3.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   106106 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/ndax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    61638 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/novadax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    37055 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/oceanex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   177794 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/okcoin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      434 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/okex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      441 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/okex5.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   264325 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/okx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22745 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/paymium.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   191812 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/phemex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    88311 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/poloniex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    75104 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/poloniexfutures.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 00:35:33.789480 ccxt-3.0.95/ccxt/pro/
--rw-rw-r--   0 travis    (2000) travis    (2000)     6039 2023-05-06 00:35:17.000000 ccxt-3.0.95/ccxt/pro/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    26668 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/alpaca.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    34553 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/ascendex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1081 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/bequant.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    77193 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/binance.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      724 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/binancecoinm.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2016 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/binanceus.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1357 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/binanceusdm.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      914 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/bitcoincom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    24762 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/bitfinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    41903 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/bitfinex2.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    44698 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/bitget.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    24486 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/bitmart.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    55606 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/bitmex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    12557 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/bitopro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    16235 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/bitrue.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    20784 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/bitstamp.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    36705 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/bittrex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    26009 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/bitvavo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    31132 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/btcex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    60648 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/bybit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    44892 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/cex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1121 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/coinbaseprime.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    29075 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/coinbasepro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    40578 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/coinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22975 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/cryptocom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22087 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/currencycom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    33925 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/deribit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    24397 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/exmo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    41718 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/gate.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      391 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/gateio.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    25142 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/gemini.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    15160 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/hitbtc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    21786 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/hollaex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    85533 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/huobi.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    23052 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/huobijp.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      400 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/huobipro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    28068 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/idex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    11059 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/independentreserve.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    44317 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/kraken.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    52058 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/krakenfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    34128 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/kucoin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    27781 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/kucoinfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    12175 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/luno.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    41886 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/mexc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      388 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/mexc3.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22655 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/ndax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    30234 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/okcoin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      382 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/okex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35657 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/okx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    59743 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/phemex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22635 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/probit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    12104 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/ripio.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     9473 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/upbit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    29862 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/wazirx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    34279 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/whitebit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    25030 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/woo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    21557 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/pro/zb.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    68596 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/probit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    47325 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/ripio.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 00:35:33.789480 ccxt-3.0.95/ccxt/static_dependencies/
--rw-rw-r--   0 travis    (2000) travis    (2000)       30 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/static_dependencies/__init__.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 00:35:33.789480 ccxt-3.0.95/ccxt/static_dependencies/ecdsa/
--rw-rw-r--   0 travis    (2000) travis    (2000)      594 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/static_dependencies/ecdsa/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    18461 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/static_dependencies/ecdsa/_version.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1886 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/static_dependencies/ecdsa/curves.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6942 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/static_dependencies/ecdsa/der.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    11336 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/static_dependencies/ecdsa/ecdsa.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5517 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/static_dependencies/ecdsa/ellipticcurve.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    14201 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/static_dependencies/ecdsa/keys.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    13468 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/static_dependencies/ecdsa/numbertheory.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2572 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/static_dependencies/ecdsa/rfc6979.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    10037 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/static_dependencies/ecdsa/util.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 00:35:33.805481 ccxt-3.0.95/ccxt/static_dependencies/keccak/
--rw-rw-r--   0 travis    (2000) travis    (2000)       45 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/static_dependencies/keccak/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6934 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/static_dependencies/keccak/keccak.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   117868 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/stex.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 00:35:33.805481 ccxt-3.0.95/ccxt/test/
--rw-rw-r--   0 travis    (2000) travis    (2000)      141 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/test/__init__.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 00:35:33.817483 ccxt-3.0.95/ccxt/test/base/
--rw-rw-r--   0 travis    (2000) travis    (2000)     1745 2023-05-06 00:21:44.000000 ccxt-3.0.95/ccxt/test/base/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      922 2023-05-06 00:22:51.000000 ccxt-3.0.95/ccxt/test/base/test_account.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2110 2023-05-06 00:22:51.000000 ccxt-3.0.95/ccxt/test/base/test_balance.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1705 2023-05-06 00:22:51.000000 ccxt-3.0.95/ccxt/test/base/test_borrow_interest.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1362 2023-05-06 00:22:51.000000 ccxt-3.0.95/ccxt/test/base/test_borrow_rate.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1177 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/test/base/test_calculate_fee.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     7702 2023-05-06 00:21:42.000000 ccxt-3.0.95/ccxt/test/base/test_crypto.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2145 2023-05-06 00:22:51.000000 ccxt-3.0.95/ccxt/test/base/test_currency.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5234 2023-05-06 00:21:41.000000 ccxt-3.0.95/ccxt/test/base/test_datetime.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    20934 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/test/base/test_decimal_to_precision.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1402 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/test/base/test_deep_extend.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1957 2023-05-06 00:22:51.000000 ccxt-3.0.95/ccxt/test/base/test_deposit_withdrawal.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3592 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/test/base/test_exchange_datetime_functions.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1140 2023-05-06 00:22:52.000000 ccxt-3.0.95/ccxt/test/base/test_funding_rate_history.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2155 2023-05-06 00:22:52.000000 ccxt-3.0.95/ccxt/test/base/test_ledger_entry.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2154 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/test/base/test_ledger_item.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1525 2023-05-06 00:22:52.000000 ccxt-3.0.95/ccxt/test/base/test_leverage_tier.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1551 2023-05-06 00:22:52.000000 ccxt-3.0.95/ccxt/test/base/test_margin_modification.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5671 2023-05-06 00:22:52.000000 ccxt-3.0.95/ccxt/test/base/test_market.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22034 2023-05-06 00:21:41.000000 ccxt-3.0.95/ccxt/test/base/test_number.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2025 2023-05-06 00:22:52.000000 ccxt-3.0.95/ccxt/test/base/test_ohlcv.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1327 2023-05-06 00:22:52.000000 ccxt-3.0.95/ccxt/test/base/test_open_interest.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3392 2023-05-06 00:22:52.000000 ccxt-3.0.95/ccxt/test/base/test_order.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2983 2023-05-06 00:22:52.000000 ccxt-3.0.95/ccxt/test/base/test_order_book.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3526 2023-05-06 00:22:52.000000 ccxt-3.0.95/ccxt/test/base/test_position.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    10987 2023-05-06 00:22:52.000000 ccxt-3.0.95/ccxt/test/base/test_shared_methods.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1226 2023-05-06 00:22:52.000000 ccxt-3.0.95/ccxt/test/base/test_status.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3123 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/test/base/test_throttle.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4935 2023-05-06 00:22:52.000000 ccxt-3.0.95/ccxt/test/base/test_ticker.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1850 2023-05-06 00:22:52.000000 ccxt-3.0.95/ccxt/test/base/test_trade.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1081 2023-05-06 00:22:52.000000 ccxt-3.0.95/ccxt/test/base/test_trading_fee.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1434 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/test/base/test_transaction.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    26500 2023-05-06 00:21:43.000000 ccxt-3.0.95/ccxt/test/test_async.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    26096 2023-05-06 00:21:43.000000 ccxt-3.0.95/ccxt/test/test_sync.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    42407 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/tidex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    65452 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/timex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   119250 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/tokocrypto.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    75531 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/upbit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   103453 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/wavesexchange.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35544 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/wazirx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    92139 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/whitebit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    94453 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/woo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   187767 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/xt.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    51368 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/yobit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    28777 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/zaif.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   183857 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/zb.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    74036 2023-05-06 00:09:53.000000 ccxt-3.0.95/ccxt/zonda.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 00:35:33.665467 ccxt-3.0.95/ccxt.egg-info/
--rw-rw-r--   0 travis    (2000) travis    (2000)   113274 2023-05-06 00:35:33.000000 ccxt-3.0.95/ccxt.egg-info/PKG-INFO
--rw-rw-r--   0 travis    (2000) travis    (2000)    11640 2023-05-06 00:35:33.000000 ccxt-3.0.95/ccxt.egg-info/SOURCES.txt
--rw-rw-r--   0 travis    (2000) travis    (2000)        1 2023-05-06 00:35:33.000000 ccxt-3.0.95/ccxt.egg-info/dependency_links.txt
--rw-rw-r--   0 travis    (2000) travis    (2000)      162 2023-05-06 00:35:33.000000 ccxt-3.0.95/ccxt.egg-info/requires.txt
--rw-rw-r--   0 travis    (2000) travis    (2000)        5 2023-05-06 00:35:33.000000 ccxt-3.0.95/ccxt.egg-info/top_level.txt
--rw-rw-r--   0 travis    (2000) travis    (2000)     8459 2023-05-06 00:35:18.000000 ccxt-3.0.95/package.json
--rw-rw-r--   0 travis    (2000) travis    (2000)      205 2023-05-06 00:35:33.821483 ccxt-3.0.95/setup.cfg
--rwxrwxr-x   0 travis    (2000) travis    (2000)     2891 2023-05-06 00:09:53.000000 ccxt-3.0.95/setup.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 14:21:54.049611 ccxt-3.0.96/
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1068 2023-05-06 14:21:34.000000 ccxt-3.0.96/LICENSE.txt
+-rw-rw-r--   0 travis    (2000) travis    (2000)      100 2023-05-06 14:06:54.000000 ccxt-3.0.96/MANIFEST.in
+-rw-rw-r--   0 travis    (2000) travis    (2000)   113274 2023-05-06 14:21:54.053611 ccxt-3.0.96/PKG-INFO
+-rw-rw-r--   0 travis    (2000) travis    (2000)   102253 2023-05-06 14:06:54.000000 ccxt-3.0.96/README.rst
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 14:21:53.769582 ccxt-3.0.96/ccxt/
+-rw-rw-r--   0 travis    (2000) travis    (2000)    15626 2023-05-06 14:21:33.000000 ccxt-3.0.96/ccxt/__init__.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 14:21:53.825588 ccxt-3.0.96/ccxt/abstract/
+-rw-rw-r--   0 travis    (2000) travis    (2000)        0 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/abstract/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1448 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/ace.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1861 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/alpaca.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    11071 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/ascendex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     8376 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/bequant.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2347 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/bigone.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    62883 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/binance.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    62883 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/binancecoinm.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    62883 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/binanceus.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    62883 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/binanceusdm.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2830 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/bit2c.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1989 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/bitbank.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5482 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/bitbay.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4082 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/bitbns.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     8376 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/bitcoincom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     7605 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/bitfinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    19171 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/bitfinex2.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3576 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/bitflyer.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2443 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/bitforex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    17077 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/bitget.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2659 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/bithumb.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     8966 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/bitmart.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     8653 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/bitmex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2919 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/bitopro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3859 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/bitpanda.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3648 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/bitrue.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4025 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/bitso.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22372 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/bitstamp.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1987 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/bitstamp1.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     9337 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/bittrex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2357 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/bitvavo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     7439 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/bkex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2024 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/bl3p.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2638 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/blockchaincom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1380 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/btcalpha.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      849 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/btcbox.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5594 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/btcex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3690 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/btcmarkets.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1407 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/btctradeua.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1403 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/btcturk.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    71684 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/bybit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3311 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/cex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     9017 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/coinbase.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6952 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/coinbaseprime.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6952 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/coinbasepro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3417 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/coincheck.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    14759 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/coinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2182 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/coinfalcon.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5354 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/coinmate.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2504 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/coinone.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3736 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/coinsph.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2707 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/coinspot.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    21126 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/cryptocom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     7452 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/currencycom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3128 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/delta.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    15499 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/deribit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     9386 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/digifinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6177 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/exmo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     8376 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/fmfwio.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    27864 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/gate.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    27864 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/gateio.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6840 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/gemini.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     8376 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/hitbtc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    10949 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/hitbtc3.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2596 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/hollaex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    95821 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/huobi.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    14331 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/huobijp.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    95821 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/huobipro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2129 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/idex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4165 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/independentreserve.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2266 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/indodax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4979 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/kraken.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2867 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/krakenfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    20600 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/kucoin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    20893 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/kucoinfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    19005 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/kuna.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     7168 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/latoken.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1474 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/lbank.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6930 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/lbank2.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3566 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/luno.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2960 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/lykke.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2357 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/mercado.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    23203 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/mexc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    23203 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/mexc3.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    11878 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/ndax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2565 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/novadax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1721 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/oceanex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    25825 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/okcoin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    29716 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/okex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    29716 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/okex5.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    29716 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/okx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2752 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/paymium.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    12172 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/phemex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6301 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/poloniex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4575 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/poloniexfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1849 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/probit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    10639 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/stex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1953 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/tidex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5875 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/timex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4094 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/tokocrypto.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3463 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/upbit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    18450 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/wavesexchange.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2130 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/wazirx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     7934 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/whitebit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     7689 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/woo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    25850 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/xt.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1339 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/yobit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3935 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/zaif.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5482 2023-05-06 14:10:47.000000 ccxt-3.0.96/ccxt/abstract/zonda.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    41329 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/ace.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    33161 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/alpaca.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   127668 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/ascendex.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 14:21:53.929598 ccxt-3.0.96/ccxt/async_support/
+-rw-rw-r--   0 travis    (2000) travis    (2000)    15429 2023-05-06 14:21:33.000000 ccxt-3.0.96/ccxt/async_support/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    41553 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/ace.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    33307 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/alpaca.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   128282 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/ascendex.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 14:21:53.933599 ccxt-3.0.96/ccxt/async_support/base/
+-rw-rw-r--   0 travis    (2000) travis    (2000)       67 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/base/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   128268 2023-05-06 14:21:33.000000 ccxt-3.0.96/ccxt/async_support/base/exchange.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1847 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/base/throttler.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 14:21:53.945600 ccxt-3.0.96/ccxt/async_support/base/ws/
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1791 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/base/ws/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4999 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/base/ws/aiohttp_client.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6085 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/base/ws/cache.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     7289 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/base/ws/client.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3733 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/base/ws/fast_client.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1495 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/base/ws/functions.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      249 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/base/ws/future.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2894 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/base/ws/order_book.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6079 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/base/ws/order_book_side.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1150 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/bequant.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    62726 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/bigone.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   374663 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/binance.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1683 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/binancecoinm.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2165 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/binanceus.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2518 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/binanceusdm.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35688 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/bit2c.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    39268 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/bitbank.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      462 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/bitbay.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    46227 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/bitbns.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      481 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/bitcoincom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    69752 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/bitfinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   111979 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/bitfinex2.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    38049 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/bitflyer.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    28522 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/bitforex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   204762 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/bitget.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    42790 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/bithumb.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   132014 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/bitmart.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   120028 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/bitmex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    63629 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/bitopro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    87760 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/bitpanda.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    88471 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/bitrue.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    68835 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/bitso.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    82612 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/bitstamp.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    17931 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/bitstamp1.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    93903 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/bittrex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    77171 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/bitvavo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    74597 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/bkex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    16351 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/bl3p.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    47523 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/blockchaincom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35438 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/btcalpha.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22683 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/btcbox.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   111410 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/btcex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    48897 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/btcmarkets.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22323 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/btctradeua.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35602 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/btcturk.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    45959 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/buda.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   395491 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/bybit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    65248 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/cex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   125230 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/coinbase.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1233 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/coinbaseprime.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    74293 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/coinbasepro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    34414 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/coincheck.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   191811 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/coinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    39252 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/coinfalcon.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    39813 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/coinmate.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    34679 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/coinone.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    81496 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/coinsph.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    18912 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/coinspot.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   108492 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/cryptocom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    80003 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/currencycom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    84440 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/delta.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   119560 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/deribit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   152866 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/digifinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    89266 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/exmo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1183 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/flowbtc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1252 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/fmfwio.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   221908 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/gate.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      459 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/gateio.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    69449 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/gemini.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    62675 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/hitbtc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   117197 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/hitbtc3.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    69616 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/hollaex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   357192 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/huobi.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    87087 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/huobijp.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      586 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/huobipro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    67772 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/idex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    30046 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/independentreserve.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    42709 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/indodax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35208 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/itbit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   101946 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/kraken.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    82058 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/krakenfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   160977 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/kucoin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    98228 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/kucoinfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    37998 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/kuna.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    70399 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/latoken.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    33953 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/lbank.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    98405 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/lbank2.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    40781 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/luno.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    48763 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/lykke.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    34881 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/mercado.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   210181 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/mexc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      455 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/mexc3.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   106630 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/ndax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    62006 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/novadax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    37393 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/oceanex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   178258 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/okcoin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      448 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/okex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      455 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/okex5.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   265343 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/okx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22933 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/paymium.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   192396 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/phemex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    88811 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/poloniex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    75472 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/poloniexfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    70102 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/probit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    47585 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/ripio.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   118368 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/stex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    42655 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/tidex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    65784 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/timex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   119594 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/tokocrypto.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    75965 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/upbit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   103947 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/wavesexchange.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35792 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/wazirx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    92591 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/whitebit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    95037 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/woo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   188868 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/xt.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    51652 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/yobit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    28959 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/zaif.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   184533 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/zb.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    74326 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/async_support/zonda.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 14:21:53.953601 ccxt-3.0.96/ccxt/base/
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1320 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/base/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6634 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/base/decimal_to_precision.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3401 2023-05-06 14:18:33.000000 ccxt-3.0.96/ccxt/base/errors.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   169537 2023-05-06 14:21:33.000000 ccxt-3.0.96/ccxt/base/exchange.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     8565 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/base/precise.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1071 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/base/types.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1136 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/bequant.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    62340 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/bigone.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   373477 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/binance.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1645 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/binancecoinm.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2151 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/binanceus.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2480 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/binanceusdm.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35482 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/bit2c.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    39008 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/bitbank.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      448 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/bitbay.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    45973 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/bitbns.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      467 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/bitcoincom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    69312 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/bitfinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   111509 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/bitfinex2.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    37741 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/bitflyer.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    28316 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/bitforex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   203912 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/bitget.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    42572 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/bithumb.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   131376 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/bitmart.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   119564 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/bitmex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    63261 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/bitopro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    87308 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/bitpanda.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    88097 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/bitrue.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    68449 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/bitso.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    82190 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/bitstamp.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    17785 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/bitstamp1.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    93397 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/bittrex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    76761 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/bitvavo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    74167 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/bkex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    16241 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/bl3p.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    47095 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/blockchaincom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35160 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/btcalpha.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22489 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/btcbox.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   110784 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/btcex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    48547 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/btcmarkets.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22177 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/btctradeua.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35384 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/btcturk.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    45591 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/buda.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   393615 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/bybit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    64922 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/cex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   124586 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/coinbase.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1219 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/coinbaseprime.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    73787 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/coinbasepro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    34208 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/coincheck.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   190913 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/coinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    38956 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/coinfalcon.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    39565 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/coinmate.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    34455 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/coinone.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    81092 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/coinsph.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    18778 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/coinspot.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   107966 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/cryptocom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    79611 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/currencycom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    84060 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/delta.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   119018 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/deribit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   152160 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/digifinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    88724 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/exmo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1169 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/flowbtc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1238 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/fmfwio.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   221082 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/gate.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      445 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/gateio.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    69001 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/gemini.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    62241 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/hitbtc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   116511 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/hitbtc3.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    69194 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/hollaex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   355886 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/huobi.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    86605 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/huobijp.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      572 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/huobipro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    67332 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/idex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    29810 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/independentreserve.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    42437 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/indodax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    34960 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/itbit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   101404 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/kraken.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    81756 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/krakenfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   160363 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/kucoin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    97782 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/kucoinfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    37750 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/kuna.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    70007 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/latoken.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    33717 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/lbank.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    97857 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/lbank2.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    40473 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/luno.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    48461 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/lykke.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    34639 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/mercado.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   209135 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/mexc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      441 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/mexc3.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   106106 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/ndax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    61638 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/novadax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    37055 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/oceanex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   177794 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/okcoin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      434 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/okex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      441 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/okex5.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   264325 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/okx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22745 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/paymium.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   191812 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/phemex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    88311 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/poloniex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    75104 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/poloniexfutures.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 14:21:54.005606 ccxt-3.0.96/ccxt/pro/
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6039 2023-05-06 14:21:33.000000 ccxt-3.0.96/ccxt/pro/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    26668 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/alpaca.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    34553 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/ascendex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1081 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/bequant.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    77193 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/binance.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      724 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/binancecoinm.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2016 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/binanceus.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1357 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/binanceusdm.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      914 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/bitcoincom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    24762 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/bitfinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    41903 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/bitfinex2.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    44698 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/bitget.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    24486 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/bitmart.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    55606 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/bitmex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    12557 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/bitopro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    16235 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/bitrue.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    20784 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/bitstamp.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    36705 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/bittrex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    26009 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/bitvavo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    31132 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/btcex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    60648 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/bybit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    44892 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/cex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1121 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/coinbaseprime.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    29075 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/coinbasepro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    40578 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/coinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22975 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/cryptocom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22087 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/currencycom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    33925 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/deribit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    24397 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/exmo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    41718 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/gate.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      391 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/gateio.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    25142 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/gemini.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    15160 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/hitbtc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    21786 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/hollaex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    85533 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/huobi.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    23052 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/huobijp.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      400 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/huobipro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    28068 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/idex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    11059 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/independentreserve.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    44317 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/kraken.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    52058 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/krakenfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    34128 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/kucoin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    27781 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/kucoinfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    12175 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/luno.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    41886 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/mexc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      388 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/mexc3.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22655 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/ndax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    30234 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/okcoin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      382 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/okex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35657 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/okx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    59743 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/phemex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22635 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/probit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    12104 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/ripio.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     9473 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/upbit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    29862 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/wazirx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    34279 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/whitebit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    25030 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/woo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    21557 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/pro/zb.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    69752 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/probit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    47325 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/ripio.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 14:21:54.009606 ccxt-3.0.96/ccxt/static_dependencies/
+-rw-rw-r--   0 travis    (2000) travis    (2000)       30 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/static_dependencies/__init__.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 14:21:54.017607 ccxt-3.0.96/ccxt/static_dependencies/ecdsa/
+-rw-rw-r--   0 travis    (2000) travis    (2000)      594 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/static_dependencies/ecdsa/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    18461 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/static_dependencies/ecdsa/_version.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1886 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/static_dependencies/ecdsa/curves.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6942 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/static_dependencies/ecdsa/der.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    11336 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/static_dependencies/ecdsa/ecdsa.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5517 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/static_dependencies/ecdsa/ellipticcurve.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    14201 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/static_dependencies/ecdsa/keys.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    13468 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/static_dependencies/ecdsa/numbertheory.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2572 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/static_dependencies/ecdsa/rfc6979.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    10037 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/static_dependencies/ecdsa/util.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 14:21:54.021608 ccxt-3.0.96/ccxt/static_dependencies/keccak/
+-rw-rw-r--   0 travis    (2000) travis    (2000)       45 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/static_dependencies/keccak/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6934 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/static_dependencies/keccak/keccak.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   117868 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/stex.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 14:21:54.025608 ccxt-3.0.96/ccxt/test/
+-rw-rw-r--   0 travis    (2000) travis    (2000)      141 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/test/__init__.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 14:21:54.049611 ccxt-3.0.96/ccxt/test/base/
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1745 2023-05-06 14:18:37.000000 ccxt-3.0.96/ccxt/test/base/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      922 2023-05-06 14:19:45.000000 ccxt-3.0.96/ccxt/test/base/test_account.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2110 2023-05-06 14:19:45.000000 ccxt-3.0.96/ccxt/test/base/test_balance.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1705 2023-05-06 14:19:45.000000 ccxt-3.0.96/ccxt/test/base/test_borrow_interest.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1362 2023-05-06 14:19:45.000000 ccxt-3.0.96/ccxt/test/base/test_borrow_rate.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1177 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/test/base/test_calculate_fee.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     7702 2023-05-06 14:18:36.000000 ccxt-3.0.96/ccxt/test/base/test_crypto.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2145 2023-05-06 14:19:45.000000 ccxt-3.0.96/ccxt/test/base/test_currency.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5234 2023-05-06 14:18:35.000000 ccxt-3.0.96/ccxt/test/base/test_datetime.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    20934 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/test/base/test_decimal_to_precision.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1402 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/test/base/test_deep_extend.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1957 2023-05-06 14:19:45.000000 ccxt-3.0.96/ccxt/test/base/test_deposit_withdrawal.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3592 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/test/base/test_exchange_datetime_functions.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1140 2023-05-06 14:19:45.000000 ccxt-3.0.96/ccxt/test/base/test_funding_rate_history.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2155 2023-05-06 14:19:45.000000 ccxt-3.0.96/ccxt/test/base/test_ledger_entry.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2154 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/test/base/test_ledger_item.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1525 2023-05-06 14:19:45.000000 ccxt-3.0.96/ccxt/test/base/test_leverage_tier.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1551 2023-05-06 14:19:45.000000 ccxt-3.0.96/ccxt/test/base/test_margin_modification.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5671 2023-05-06 14:19:45.000000 ccxt-3.0.96/ccxt/test/base/test_market.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22034 2023-05-06 14:18:34.000000 ccxt-3.0.96/ccxt/test/base/test_number.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2025 2023-05-06 14:19:45.000000 ccxt-3.0.96/ccxt/test/base/test_ohlcv.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1327 2023-05-06 14:19:45.000000 ccxt-3.0.96/ccxt/test/base/test_open_interest.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3392 2023-05-06 14:19:45.000000 ccxt-3.0.96/ccxt/test/base/test_order.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2983 2023-05-06 14:19:45.000000 ccxt-3.0.96/ccxt/test/base/test_order_book.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3526 2023-05-06 14:19:45.000000 ccxt-3.0.96/ccxt/test/base/test_position.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    10987 2023-05-06 14:19:45.000000 ccxt-3.0.96/ccxt/test/base/test_shared_methods.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1226 2023-05-06 14:19:45.000000 ccxt-3.0.96/ccxt/test/base/test_status.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3123 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/test/base/test_throttle.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4935 2023-05-06 14:19:45.000000 ccxt-3.0.96/ccxt/test/base/test_ticker.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1850 2023-05-06 14:19:45.000000 ccxt-3.0.96/ccxt/test/base/test_trade.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1081 2023-05-06 14:19:45.000000 ccxt-3.0.96/ccxt/test/base/test_trading_fee.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1434 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/test/base/test_transaction.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    26500 2023-05-06 14:18:37.000000 ccxt-3.0.96/ccxt/test/test_async.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    26096 2023-05-06 14:18:37.000000 ccxt-3.0.96/ccxt/test/test_sync.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    42407 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/tidex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    65452 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/timex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   119250 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/tokocrypto.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    75531 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/upbit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   103453 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/wavesexchange.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35544 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/wazirx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    92139 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/whitebit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    94453 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/woo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   187767 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/xt.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    51368 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/yobit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    28777 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/zaif.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   183857 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/zb.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    74036 2023-05-06 14:06:54.000000 ccxt-3.0.96/ccxt/zonda.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2023-05-06 14:21:53.769582 ccxt-3.0.96/ccxt.egg-info/
+-rw-rw-r--   0 travis    (2000) travis    (2000)   113274 2023-05-06 14:21:53.000000 ccxt-3.0.96/ccxt.egg-info/PKG-INFO
+-rw-rw-r--   0 travis    (2000) travis    (2000)    11640 2023-05-06 14:21:53.000000 ccxt-3.0.96/ccxt.egg-info/SOURCES.txt
+-rw-rw-r--   0 travis    (2000) travis    (2000)        1 2023-05-06 14:21:53.000000 ccxt-3.0.96/ccxt.egg-info/dependency_links.txt
+-rw-rw-r--   0 travis    (2000) travis    (2000)      162 2023-05-06 14:21:53.000000 ccxt-3.0.96/ccxt.egg-info/requires.txt
+-rw-rw-r--   0 travis    (2000) travis    (2000)        5 2023-05-06 14:21:53.000000 ccxt-3.0.96/ccxt.egg-info/top_level.txt
+-rw-rw-r--   0 travis    (2000) travis    (2000)     8459 2023-05-06 14:21:33.000000 ccxt-3.0.96/package.json
+-rw-rw-r--   0 travis    (2000) travis    (2000)      205 2023-05-06 14:21:54.053611 ccxt-3.0.96/setup.cfg
+-rwxrwxr-x   0 travis    (2000) travis    (2000)     2891 2023-05-06 14:06:54.000000 ccxt-3.0.96/setup.py
```

### Comparing `ccxt-3.0.95/LICENSE.txt` & `ccxt-3.0.96/LICENSE.txt`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/PKG-INFO` & `ccxt-3.0.96/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: ccxt
-Version: 3.0.95
+Version: 3.0.96
 Summary: A JavaScript / Python / PHP cryptocurrency trading library with support for 130+ exchanges
 Home-page: https://ccxt.com
 Author: Igor Kroitor
 Author-email: igor.kroitor@gmail.com
 License: MIT
 Project-URL: Homepage, https://ccxt.com
 Project-URL: Documentation, https://docs.ccxt.com
@@ -227,21 +227,21 @@
         console.log(version, Object.keys(exchanges));
         ```
         
         ### JavaScript (for use with the `<script>` tag):
         
         All-in-one browser bundle (dependencies included), served from a CDN of your choice:
         
-        * jsDelivr: https://cdn.jsdelivr.net/npm/ccxt@3.0.95/dist/ccxt.browser.js
-        * unpkg: https://unpkg.com/ccxt@3.0.95/dist/ccxt.browser.js
+        * jsDelivr: https://cdn.jsdelivr.net/npm/ccxt@3.0.96/dist/ccxt.browser.js
+        * unpkg: https://unpkg.com/ccxt@3.0.96/dist/ccxt.browser.js
         
         CDNs are not updated in real-time and may have delays. Defaulting to the most recent version without specifying the version number is not recommended. Please, keep in mind that we are not responsible for the correct operation of those CDN servers.
         
         ```HTML
-        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/ccxt@3.0.95/dist/ccxt.browser.js"></script>
+        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/ccxt@3.0.96/dist/ccxt.browser.js"></script>
         ```
         
         Creates a global `ccxt` object:
         
         ```JavaScript
         console.log (ccxt.exchanges) // print all available exchanges
         ```
```

### Comparing `ccxt-3.0.95/README.rst` & `ccxt-3.0.96/README.rst`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/__init__.py` & `ccxt-3.0.96/ccxt/__init__.py`

 * *Files 0% similar despite different names*

```diff
@@ -18,15 +18,15 @@
 # AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 # LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 # OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 # SOFTWARE.
 
 # ----------------------------------------------------------------------------
 
-__version__ = '3.0.95'
+__version__ = '3.0.96'
 
 # ----------------------------------------------------------------------------
 
 from ccxt.base.exchange import Exchange                     # noqa: F401
 from ccxt.base.precise import Precise                       # noqa: F401
 
 from ccxt.base.decimal_to_precision import decimal_to_precision  # noqa: F401
```

### Comparing `ccxt-3.0.95/ccxt/abstract/ace.py` & `ccxt-3.0.96/ccxt/abstract/ace.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/alpaca.py` & `ccxt-3.0.96/ccxt/abstract/alpaca.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/ascendex.py` & `ccxt-3.0.96/ccxt/abstract/ascendex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/bequant.py` & `ccxt-3.0.96/ccxt/abstract/bequant.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/bigone.py` & `ccxt-3.0.96/ccxt/abstract/bigone.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/binance.py` & `ccxt-3.0.96/ccxt/abstract/binance.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/binancecoinm.py` & `ccxt-3.0.96/ccxt/abstract/binancecoinm.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/binanceus.py` & `ccxt-3.0.96/ccxt/abstract/binanceus.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/binanceusdm.py` & `ccxt-3.0.96/ccxt/abstract/binanceusdm.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/bit2c.py` & `ccxt-3.0.96/ccxt/abstract/bit2c.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/bitbank.py` & `ccxt-3.0.96/ccxt/abstract/bitbank.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/bitbay.py` & `ccxt-3.0.96/ccxt/abstract/bitbay.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/bitbns.py` & `ccxt-3.0.96/ccxt/abstract/bitbns.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/bitcoincom.py` & `ccxt-3.0.96/ccxt/abstract/bitcoincom.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/bitfinex.py` & `ccxt-3.0.96/ccxt/abstract/bitfinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/bitfinex2.py` & `ccxt-3.0.96/ccxt/abstract/bitfinex2.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/bitflyer.py` & `ccxt-3.0.96/ccxt/abstract/bitflyer.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/bitforex.py` & `ccxt-3.0.96/ccxt/abstract/bitforex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/bitget.py` & `ccxt-3.0.96/ccxt/abstract/bitget.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/bithumb.py` & `ccxt-3.0.96/ccxt/abstract/bithumb.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/bitmart.py` & `ccxt-3.0.96/ccxt/abstract/bitmart.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/bitmex.py` & `ccxt-3.0.96/ccxt/abstract/bitmex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/bitopro.py` & `ccxt-3.0.96/ccxt/abstract/bitopro.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/bitpanda.py` & `ccxt-3.0.96/ccxt/abstract/bitpanda.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/bitrue.py` & `ccxt-3.0.96/ccxt/abstract/bitrue.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/bitso.py` & `ccxt-3.0.96/ccxt/abstract/bitso.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/bitstamp.py` & `ccxt-3.0.96/ccxt/abstract/bitstamp.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/bitstamp1.py` & `ccxt-3.0.96/ccxt/abstract/bitstamp1.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/bittrex.py` & `ccxt-3.0.96/ccxt/abstract/bittrex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/bitvavo.py` & `ccxt-3.0.96/ccxt/abstract/bitvavo.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/bkex.py` & `ccxt-3.0.96/ccxt/abstract/bkex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/bl3p.py` & `ccxt-3.0.96/ccxt/abstract/bl3p.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/blockchaincom.py` & `ccxt-3.0.96/ccxt/abstract/blockchaincom.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/btcalpha.py` & `ccxt-3.0.96/ccxt/abstract/btcalpha.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/btcbox.py` & `ccxt-3.0.96/ccxt/abstract/btcbox.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/btcex.py` & `ccxt-3.0.96/ccxt/abstract/btcex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/btcmarkets.py` & `ccxt-3.0.96/ccxt/abstract/btcmarkets.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/btctradeua.py` & `ccxt-3.0.96/ccxt/abstract/btctradeua.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/btcturk.py` & `ccxt-3.0.96/ccxt/abstract/btcturk.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/bybit.py` & `ccxt-3.0.96/ccxt/abstract/bybit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/cex.py` & `ccxt-3.0.96/ccxt/abstract/cex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/coinbase.py` & `ccxt-3.0.96/ccxt/abstract/coinbase.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/coinbaseprime.py` & `ccxt-3.0.96/ccxt/abstract/coinbaseprime.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/coinbasepro.py` & `ccxt-3.0.96/ccxt/abstract/coinbasepro.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/coincheck.py` & `ccxt-3.0.96/ccxt/abstract/coincheck.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/coinex.py` & `ccxt-3.0.96/ccxt/abstract/coinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/coinfalcon.py` & `ccxt-3.0.96/ccxt/abstract/coinfalcon.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/coinmate.py` & `ccxt-3.0.96/ccxt/abstract/coinmate.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/coinone.py` & `ccxt-3.0.96/ccxt/abstract/coinone.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/coinsph.py` & `ccxt-3.0.96/ccxt/abstract/coinsph.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/coinspot.py` & `ccxt-3.0.96/ccxt/abstract/coinspot.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/cryptocom.py` & `ccxt-3.0.96/ccxt/abstract/cryptocom.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/currencycom.py` & `ccxt-3.0.96/ccxt/abstract/currencycom.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/delta.py` & `ccxt-3.0.96/ccxt/abstract/delta.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/deribit.py` & `ccxt-3.0.96/ccxt/abstract/deribit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/digifinex.py` & `ccxt-3.0.96/ccxt/abstract/digifinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/exmo.py` & `ccxt-3.0.96/ccxt/abstract/exmo.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/fmfwio.py` & `ccxt-3.0.96/ccxt/abstract/fmfwio.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/gate.py` & `ccxt-3.0.96/ccxt/abstract/gate.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/gateio.py` & `ccxt-3.0.96/ccxt/abstract/gateio.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/gemini.py` & `ccxt-3.0.96/ccxt/abstract/gemini.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/hitbtc.py` & `ccxt-3.0.96/ccxt/abstract/hitbtc.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/hitbtc3.py` & `ccxt-3.0.96/ccxt/abstract/hitbtc3.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/hollaex.py` & `ccxt-3.0.96/ccxt/abstract/hollaex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/huobi.py` & `ccxt-3.0.96/ccxt/abstract/huobi.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/huobijp.py` & `ccxt-3.0.96/ccxt/abstract/huobijp.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/huobipro.py` & `ccxt-3.0.96/ccxt/abstract/huobipro.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/idex.py` & `ccxt-3.0.96/ccxt/abstract/idex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/independentreserve.py` & `ccxt-3.0.96/ccxt/abstract/independentreserve.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/indodax.py` & `ccxt-3.0.96/ccxt/abstract/indodax.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/kraken.py` & `ccxt-3.0.96/ccxt/abstract/kraken.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/krakenfutures.py` & `ccxt-3.0.96/ccxt/abstract/krakenfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/kucoin.py` & `ccxt-3.0.96/ccxt/abstract/kucoin.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/kucoinfutures.py` & `ccxt-3.0.96/ccxt/abstract/kucoinfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/kuna.py` & `ccxt-3.0.96/ccxt/abstract/kuna.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/latoken.py` & `ccxt-3.0.96/ccxt/abstract/latoken.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/lbank.py` & `ccxt-3.0.96/ccxt/abstract/lbank.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/lbank2.py` & `ccxt-3.0.96/ccxt/abstract/lbank2.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/luno.py` & `ccxt-3.0.96/ccxt/abstract/luno.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/lykke.py` & `ccxt-3.0.96/ccxt/abstract/lykke.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/mercado.py` & `ccxt-3.0.96/ccxt/abstract/mercado.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/mexc.py` & `ccxt-3.0.96/ccxt/abstract/mexc.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/mexc3.py` & `ccxt-3.0.96/ccxt/abstract/mexc3.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/ndax.py` & `ccxt-3.0.96/ccxt/abstract/ndax.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/novadax.py` & `ccxt-3.0.96/ccxt/abstract/novadax.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/oceanex.py` & `ccxt-3.0.96/ccxt/abstract/oceanex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/okcoin.py` & `ccxt-3.0.96/ccxt/abstract/okcoin.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/okex.py` & `ccxt-3.0.96/ccxt/abstract/okex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/okex5.py` & `ccxt-3.0.96/ccxt/abstract/okex5.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/okx.py` & `ccxt-3.0.96/ccxt/abstract/okx.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/paymium.py` & `ccxt-3.0.96/ccxt/abstract/paymium.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/phemex.py` & `ccxt-3.0.96/ccxt/abstract/phemex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/poloniex.py` & `ccxt-3.0.96/ccxt/abstract/poloniex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/poloniexfutures.py` & `ccxt-3.0.96/ccxt/abstract/poloniexfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/probit.py` & `ccxt-3.0.96/ccxt/abstract/probit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/stex.py` & `ccxt-3.0.96/ccxt/abstract/stex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/tidex.py` & `ccxt-3.0.96/ccxt/abstract/tidex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/timex.py` & `ccxt-3.0.96/ccxt/abstract/timex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/tokocrypto.py` & `ccxt-3.0.96/ccxt/abstract/tokocrypto.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/upbit.py` & `ccxt-3.0.96/ccxt/abstract/upbit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/wavesexchange.py` & `ccxt-3.0.96/ccxt/abstract/wavesexchange.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/wazirx.py` & `ccxt-3.0.96/ccxt/abstract/wazirx.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/whitebit.py` & `ccxt-3.0.96/ccxt/abstract/whitebit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/woo.py` & `ccxt-3.0.96/ccxt/abstract/woo.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/xt.py` & `ccxt-3.0.96/ccxt/abstract/xt.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/yobit.py` & `ccxt-3.0.96/ccxt/abstract/yobit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/zaif.py` & `ccxt-3.0.96/ccxt/abstract/zaif.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/abstract/zonda.py` & `ccxt-3.0.96/ccxt/abstract/zonda.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/ace.py` & `ccxt-3.0.96/ccxt/ace.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/alpaca.py` & `ccxt-3.0.96/ccxt/alpaca.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/ascendex.py` & `ccxt-3.0.96/ccxt/ascendex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/__init__.py` & `ccxt-3.0.96/ccxt/async_support/__init__.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 # -*- coding: utf-8 -*-
 
 """CCXT: CryptoCurrency eXchange Trading Library (Async)"""
 
 # -----------------------------------------------------------------------------
 
-__version__ = '3.0.95'
+__version__ = '3.0.96'
 
 # -----------------------------------------------------------------------------
 
 from ccxt.async_support.base.exchange import Exchange                   # noqa: F401
 
 from ccxt.base.decimal_to_precision import decimal_to_precision  # noqa: F401
 from ccxt.base.decimal_to_precision import TRUNCATE              # noqa: F401
```

### Comparing `ccxt-3.0.95/ccxt/async_support/ace.py` & `ccxt-3.0.96/ccxt/async_support/ace.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/alpaca.py` & `ccxt-3.0.96/ccxt/async_support/alpaca.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/ascendex.py` & `ccxt-3.0.96/ccxt/async_support/ascendex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/base/exchange.py` & `ccxt-3.0.96/ccxt/async_support/base/exchange.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,12 +1,12 @@
 # -*- coding: utf-8 -*-
 
 # -----------------------------------------------------------------------------
 
-__version__ = '3.0.95'
+__version__ = '3.0.96'
 
 # -----------------------------------------------------------------------------
 
 import asyncio
 import concurrent.futures
 import socket
 import certifi
```

### Comparing `ccxt-3.0.95/ccxt/async_support/base/throttler.py` & `ccxt-3.0.96/ccxt/async_support/base/throttler.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/base/ws/__init__.py` & `ccxt-3.0.96/ccxt/async_support/base/ws/__init__.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/base/ws/aiohttp_client.py` & `ccxt-3.0.96/ccxt/async_support/base/ws/aiohttp_client.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/base/ws/cache.py` & `ccxt-3.0.96/ccxt/async_support/base/ws/cache.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/base/ws/client.py` & `ccxt-3.0.96/ccxt/async_support/base/ws/client.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/base/ws/fast_client.py` & `ccxt-3.0.96/ccxt/async_support/base/ws/fast_client.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/base/ws/functions.py` & `ccxt-3.0.96/ccxt/async_support/base/ws/functions.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/base/ws/order_book.py` & `ccxt-3.0.96/ccxt/async_support/base/ws/order_book.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/base/ws/order_book_side.py` & `ccxt-3.0.96/ccxt/async_support/base/ws/order_book_side.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/bequant.py` & `ccxt-3.0.96/ccxt/async_support/bequant.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/bigone.py` & `ccxt-3.0.96/ccxt/async_support/bigone.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/binance.py` & `ccxt-3.0.96/ccxt/async_support/binance.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/binancecoinm.py` & `ccxt-3.0.96/ccxt/async_support/binancecoinm.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/binanceus.py` & `ccxt-3.0.96/ccxt/async_support/binanceus.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/binanceusdm.py` & `ccxt-3.0.96/ccxt/async_support/binanceusdm.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/bit2c.py` & `ccxt-3.0.96/ccxt/async_support/bit2c.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/bitbank.py` & `ccxt-3.0.96/ccxt/async_support/bitbank.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/bitbns.py` & `ccxt-3.0.96/ccxt/async_support/bitbns.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/bitfinex.py` & `ccxt-3.0.96/ccxt/async_support/bitfinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/bitfinex2.py` & `ccxt-3.0.96/ccxt/async_support/bitfinex2.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/bitflyer.py` & `ccxt-3.0.96/ccxt/async_support/bitflyer.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/bitforex.py` & `ccxt-3.0.96/ccxt/async_support/bitforex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/bitget.py` & `ccxt-3.0.96/ccxt/async_support/bitget.py`

 * *Files 0% similar despite different names*

```diff
@@ -1018,15 +1018,15 @@
             amountPrecision = self.parse_number(self.parse_precision(self.safe_string(market, 'quantityScale')))
         else:
             expiryString = self.safe_string(parts, 2)
             if expiryString is not None:
                 year = '20' + expiryString[0:2]
                 month = expiryString[2:4]
                 day = expiryString[4:6]
-                expiryDatetime = year + '-' + month + '-' + day + 'T00:00:000Z'
+                expiryDatetime = year + '-' + month + '-' + day + 'T00:00:00.000Z'
                 expiry = self.parse8601(expiryDatetime)
                 type = 'future'
                 future = True
                 symbol = symbol + ':' + settle + '-' + expiryString
             else:
                 type = 'swap'
                 swap = True
```

### Comparing `ccxt-3.0.95/ccxt/async_support/bithumb.py` & `ccxt-3.0.96/ccxt/async_support/bithumb.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/bitmart.py` & `ccxt-3.0.96/ccxt/async_support/bitmart.py`

 * *Files 0% similar despite different names*

```diff
@@ -626,30 +626,33 @@
             quoteId = self.safe_string(market, 'quote_currency')
             base = self.safe_currency_code(baseId)
             quote = self.safe_currency_code(quoteId)
             settleId = 'USDT'  # self is bitmart's ID for usdt
             settle = self.safe_currency_code(settleId)
             symbol = base + '/' + quote + ':' + settle
             productType = self.safe_number(market, 'product_type')
+            isFutures = (productType == 2)
             expiry = self.safe_integer(market, 'expire_timestamp')
+            if not isFutures and (expiry == 0):
+                expiry = None
             result.append({
                 'id': id,
                 'numericId': None,
                 'symbol': symbol,
                 'base': base,
                 'quote': quote,
                 'settle': settle,
                 'baseId': baseId,
                 'quoteId': quoteId,
                 'settleId': settleId,
                 'type': 'swap',
                 'spot': False,
                 'margin': False,
                 'swap': (productType == 1),
-                'future': (productType == 2),
+                'future': isFutures,
                 'option': False,
                 'active': True,
                 'contract': True,
                 'linear': True,
                 'inverse': False,
                 'contractSize': self.safe_number(market, 'contract_size'),
                 'expiry': expiry,
```

### Comparing `ccxt-3.0.95/ccxt/async_support/bitmex.py` & `ccxt-3.0.96/ccxt/async_support/bitmex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/bitopro.py` & `ccxt-3.0.96/ccxt/async_support/bitopro.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/bitpanda.py` & `ccxt-3.0.96/ccxt/async_support/bitpanda.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/bitrue.py` & `ccxt-3.0.96/ccxt/async_support/bitrue.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/bitso.py` & `ccxt-3.0.96/ccxt/async_support/bitso.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/bitstamp.py` & `ccxt-3.0.96/ccxt/async_support/bitstamp.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/bitstamp1.py` & `ccxt-3.0.96/ccxt/async_support/bitstamp1.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/bittrex.py` & `ccxt-3.0.96/ccxt/async_support/bittrex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/bitvavo.py` & `ccxt-3.0.96/ccxt/async_support/bitvavo.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/bkex.py` & `ccxt-3.0.96/ccxt/async_support/bkex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/bl3p.py` & `ccxt-3.0.96/ccxt/async_support/bl3p.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/blockchaincom.py` & `ccxt-3.0.96/ccxt/async_support/blockchaincom.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/btcalpha.py` & `ccxt-3.0.96/ccxt/async_support/btcalpha.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/btcbox.py` & `ccxt-3.0.96/ccxt/async_support/btcbox.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/btcex.py` & `ccxt-3.0.96/ccxt/async_support/btcex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/btcmarkets.py` & `ccxt-3.0.96/ccxt/async_support/btcmarkets.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/btctradeua.py` & `ccxt-3.0.96/ccxt/async_support/btctradeua.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/btcturk.py` & `ccxt-3.0.96/ccxt/async_support/btcturk.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/buda.py` & `ccxt-3.0.96/ccxt/async_support/buda.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/bybit.py` & `ccxt-3.0.96/ccxt/async_support/bybit.py`

 * *Files 1% similar despite different names*

```diff
@@ -10382,14265 +10382,14338 @@
 000288d0: 223a 2054 7275 652c 0a20 2020 2020 2020  ": True,.       
 000288e0: 2023 2020 2020 2020 2020 2022 7472 6967   #         "trig
 000288f0: 6765 7244 6972 6563 7469 6f6e 223a 2030  gerDirection": 0
 00028900: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
 00028910: 2020 2020 2270 6f73 6974 696f 6e49 6478      "positionIdx
 00028920: 223a 2032 0a20 2020 2020 2020 2023 2020  ": 2.        #  
 00028930: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
-00028940: 2020 2020 2020 206d 6172 6b65 7449 6420         marketId 
-00028950: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-00028960: 6e67 286f 7264 6572 2c20 2773 796d 626f  ng(order, 'symbo
-00028970: 6c27 290a 2020 2020 2020 2020 6d61 726b  l').        mark
-00028980: 6574 5479 7065 203d 2027 636f 6e74 7261  etType = 'contra
-00028990: 6374 270a 2020 2020 2020 2020 6966 206d  ct'.        if m
-000289a0: 6172 6b65 7420 6973 206e 6f74 204e 6f6e  arket is not Non
-000289b0: 653a 0a20 2020 2020 2020 2020 2020 206d  e:.            m
-000289c0: 6172 6b65 7454 7970 6520 3d20 6d61 726b  arketType = mark
-000289d0: 6574 5b27 7479 7065 275d 0a20 2020 2020  et['type'].     
-000289e0: 2020 2063 6174 6567 6f72 7920 3d20 7365     category = se
-000289f0: 6c66 2e73 6166 655f 7374 7269 6e67 286f  lf.safe_string(o
-00028a00: 7264 6572 2c20 2763 6174 6567 6f72 7927  rder, 'category'
-00028a10: 290a 2020 2020 2020 2020 6966 2063 6174  ).        if cat
-00028a20: 6567 6f72 7920 6973 206e 6f74 204e 6f6e  egory is not Non
-00028a30: 653a 0a20 2020 2020 2020 2020 2020 2069  e:.            i
-00028a40: 6620 6361 7465 676f 7279 203d 3d20 2773  f category == 's
-00028a50: 706f 7427 3a0a 2020 2020 2020 2020 2020  pot':.          
-00028a60: 2020 2020 2020 6d61 726b 6574 5479 7065        marketType
-00028a70: 203d 2027 7370 6f74 270a 2020 2020 2020   = 'spot'.      
-00028a80: 2020 6d61 726b 6574 203d 2073 656c 662e    market = self.
-00028a90: 7361 6665 5f6d 6172 6b65 7428 6d61 726b  safe_market(mark
-00028aa0: 6574 4964 2c20 6d61 726b 6574 2c20 4e6f  etId, market, No
-00028ab0: 6e65 2c20 6d61 726b 6574 5479 7065 290a  ne, marketType).
-00028ac0: 2020 2020 2020 2020 7379 6d62 6f6c 203d          symbol =
-00028ad0: 206d 6172 6b65 745b 2773 796d 626f 6c27   market['symbol'
-00028ae0: 5d0a 2020 2020 2020 2020 7469 6d65 7374  ].        timest
-00028af0: 616d 7020 3d20 7365 6c66 2e73 6166 655f  amp = self.safe_
-00028b00: 696e 7465 6765 7228 6f72 6465 722c 2027  integer(order, '
-00028b10: 6372 6561 7465 6454 696d 6527 290a 2020  createdTime').  
-00028b20: 2020 2020 2020 6964 203d 2073 656c 662e        id = self.
-00028b30: 7361 6665 5f73 7472 696e 6728 6f72 6465  safe_string(orde
-00028b40: 722c 2027 6f72 6465 7249 6427 290a 2020  r, 'orderId').  
-00028b50: 2020 2020 2020 7479 7065 203d 2073 656c        type = sel
-00028b60: 662e 7361 6665 5f73 7472 696e 675f 6c6f  f.safe_string_lo
-00028b70: 7765 7228 6f72 6465 722c 2027 6f72 6465  wer(order, 'orde
-00028b80: 7254 7970 6527 290a 2020 2020 2020 2020  rType').        
-00028b90: 7072 6963 6520 3d20 7365 6c66 2e73 6166  price = self.saf
-00028ba0: 655f 7374 7269 6e67 286f 7264 6572 2c20  e_string(order, 
-00028bb0: 2770 7269 6365 2729 0a20 2020 2020 2020  'price').       
-00028bc0: 2061 6d6f 756e 7420 3d20 7365 6c66 2e73   amount = self.s
-00028bd0: 6166 655f 7374 7269 6e67 286f 7264 6572  afe_string(order
-00028be0: 2c20 2771 7479 2729 0a20 2020 2020 2020  , 'qty').       
-00028bf0: 2063 6f73 7420 3d20 7365 6c66 2e73 6166   cost = self.saf
-00028c00: 655f 7374 7269 6e67 286f 7264 6572 2c20  e_string(order, 
-00028c10: 2763 756d 4578 6563 5661 6c75 6527 290a  'cumExecValue').
-00028c20: 2020 2020 2020 2020 6669 6c6c 6564 203d          filled =
-00028c30: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-00028c40: 6728 6f72 6465 722c 2027 6375 6d45 7865  g(order, 'cumExe
-00028c50: 6351 7479 2729 0a20 2020 2020 2020 2072  cQty').        r
-00028c60: 656d 6169 6e69 6e67 203d 2073 656c 662e  emaining = self.
-00028c70: 7361 6665 5f73 7472 696e 6728 6f72 6465  safe_string(orde
-00028c80: 722c 2027 6c65 6176 6573 5174 7927 290a  r, 'leavesQty').
-00028c90: 2020 2020 2020 2020 6c61 7374 5472 6164          lastTrad
-00028ca0: 6554 696d 6573 7461 6d70 203d 2073 656c  eTimestamp = sel
-00028cb0: 662e 7361 6665 5f69 6e74 6567 6572 286f  f.safe_integer(o
-00028cc0: 7264 6572 2c20 2775 7064 6174 6564 5469  rder, 'updatedTi
-00028cd0: 6d65 2729 0a20 2020 2020 2020 2072 6177  me').        raw
-00028ce0: 5374 6174 7573 203d 2073 656c 662e 7361  Status = self.sa
-00028cf0: 6665 5f73 7472 696e 6728 6f72 6465 722c  fe_string(order,
-00028d00: 2027 6f72 6465 7253 7461 7475 7327 290a   'orderStatus').
-00028d10: 2020 2020 2020 2020 7374 6174 7573 203d          status =
-00028d20: 2073 656c 662e 7061 7273 655f 6f72 6465   self.parse_orde
-00028d30: 725f 7374 6174 7573 2872 6177 5374 6174  r_status(rawStat
-00028d40: 7573 290a 2020 2020 2020 2020 7369 6465  us).        side
-00028d50: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-00028d60: 696e 675f 6c6f 7765 7228 6f72 6465 722c  ing_lower(order,
-00028d70: 2027 7369 6465 2729 0a20 2020 2020 2020   'side').       
-00028d80: 2066 6565 203d 204e 6f6e 650a 2020 2020   fee = None.    
-00028d90: 2020 2020 6665 6543 6f73 7453 7472 696e      feeCostStrin
-00028da0: 6720 3d20 7365 6c66 2e73 6166 655f 7374  g = self.safe_st
-00028db0: 7269 6e67 286f 7264 6572 2c20 2763 756d  ring(order, 'cum
-00028dc0: 4578 6563 4665 6527 290a 2020 2020 2020  ExecFee').      
-00028dd0: 2020 6966 2066 6565 436f 7374 5374 7269    if feeCostStri
-00028de0: 6e67 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ng is not None:.
-00028df0: 2020 2020 2020 2020 2020 2020 6665 6520              fee 
-00028e00: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-00028e10: 2020 2020 2763 6f73 7427 3a20 6665 6543      'cost': feeC
-00028e20: 6f73 7453 7472 696e 672c 0a20 2020 2020  ostString,.     
-00028e30: 2020 2020 2020 2020 2020 2027 6375 7272             'curr
-00028e40: 656e 6379 273a 206d 6172 6b65 745b 2773  ency': market['s
-00028e50: 6574 746c 6527 5d2c 0a20 2020 2020 2020  ettle'],.       
-00028e60: 2020 2020 207d 0a20 2020 2020 2020 2063       }.        c
-00028e70: 6c69 656e 744f 7264 6572 4964 203d 2073  lientOrderId = s
-00028e80: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
-00028e90: 6f72 6465 722c 2027 6f72 6465 724c 696e  order, 'orderLin
-00028ea0: 6b49 6427 290a 2020 2020 2020 2020 6966  kId').        if
-00028eb0: 2028 636c 6965 6e74 4f72 6465 7249 6420   (clientOrderId 
-00028ec0: 6973 206e 6f74 204e 6f6e 6529 2061 6e64  is not None) and
-00028ed0: 2028 6c65 6e28 636c 6965 6e74 4f72 6465   (len(clientOrde
-00028ee0: 7249 6429 203c 2031 293a 0a20 2020 2020  rId) < 1):.     
-00028ef0: 2020 2020 2020 2063 6c69 656e 744f 7264         clientOrd
-00028f00: 6572 4964 203d 204e 6f6e 650a 2020 2020  erId = None.    
-00028f10: 2020 2020 7261 7754 696d 6549 6e46 6f72      rawTimeInFor
-00028f20: 6365 203d 2073 656c 662e 7361 6665 5f73  ce = self.safe_s
-00028f30: 7472 696e 6728 6f72 6465 722c 2027 7469  tring(order, 'ti
-00028f40: 6d65 496e 466f 7263 6527 290a 2020 2020  meInForce').    
-00028f50: 2020 2020 7469 6d65 496e 466f 7263 6520      timeInForce 
-00028f60: 3d20 7365 6c66 2e70 6172 7365 5f74 696d  = self.parse_tim
-00028f70: 655f 696e 5f66 6f72 6365 2872 6177 5469  e_in_force(rawTi
-00028f80: 6d65 496e 466f 7263 6529 0a20 2020 2020  meInForce).     
-00028f90: 2020 2073 746f 7050 7269 6365 203d 2073     stopPrice = s
-00028fa0: 656c 662e 6f6d 6974 5f7a 6572 6f28 7365  elf.omit_zero(se
-00028fb0: 6c66 2e73 6166 655f 7374 7269 6e67 286f  lf.safe_string(o
-00028fc0: 7264 6572 2c20 2774 7269 6767 6572 5072  rder, 'triggerPr
-00028fd0: 6963 6527 2929 0a20 2020 2020 2020 2072  ice')).        r
-00028fe0: 6574 7572 6e20 7365 6c66 2e73 6166 655f  eturn self.safe_
-00028ff0: 6f72 6465 7228 7b0a 2020 2020 2020 2020  order({.        
-00029000: 2020 2020 2769 6e66 6f27 3a20 6f72 6465      'info': orde
-00029010: 722c 0a20 2020 2020 2020 2020 2020 2027  r,.            '
-00029020: 6964 273a 2069 642c 0a20 2020 2020 2020  id': id,.       
-00029030: 2020 2020 2027 636c 6965 6e74 4f72 6465       'clientOrde
-00029040: 7249 6427 3a20 636c 6965 6e74 4f72 6465  rId': clientOrde
-00029050: 7249 642c 0a20 2020 2020 2020 2020 2020  rId,.           
-00029060: 2027 7469 6d65 7374 616d 7027 3a20 7469   'timestamp': ti
-00029070: 6d65 7374 616d 702c 0a20 2020 2020 2020  mestamp,.       
-00029080: 2020 2020 2027 6461 7465 7469 6d65 273a       'datetime':
-00029090: 2073 656c 662e 6973 6f38 3630 3128 7469   self.iso8601(ti
-000290a0: 6d65 7374 616d 7029 2c0a 2020 2020 2020  mestamp),.      
-000290b0: 2020 2020 2020 276c 6173 7454 7261 6465        'lastTrade
-000290c0: 5469 6d65 7374 616d 7027 3a20 6c61 7374  Timestamp': last
-000290d0: 5472 6164 6554 696d 6573 7461 6d70 2c0a  TradeTimestamp,.
-000290e0: 2020 2020 2020 2020 2020 2020 2773 796d              'sym
-000290f0: 626f 6c27 3a20 7379 6d62 6f6c 2c0a 2020  bol': symbol,.  
-00029100: 2020 2020 2020 2020 2020 2774 7970 6527            'type'
-00029110: 3a20 7479 7065 2c0a 2020 2020 2020 2020  : type,.        
-00029120: 2020 2020 2774 696d 6549 6e46 6f72 6365      'timeInForce
-00029130: 273a 2074 696d 6549 6e46 6f72 6365 2c0a  ': timeInForce,.
-00029140: 2020 2020 2020 2020 2020 2020 2770 6f73              'pos
-00029150: 744f 6e6c 7927 3a20 4e6f 6e65 2c0a 2020  tOnly': None,.  
-00029160: 2020 2020 2020 2020 2020 2772 6564 7563            'reduc
-00029170: 654f 6e6c 7927 3a20 7365 6c66 2e73 6166  eOnly': self.saf
-00029180: 655f 7661 6c75 6528 6f72 6465 722c 2027  e_value(order, '
-00029190: 7265 6475 6365 4f6e 6c79 2729 2c0a 2020  reduceOnly'),.  
-000291a0: 2020 2020 2020 2020 2020 2773 6964 6527            'side'
-000291b0: 3a20 7369 6465 2c0a 2020 2020 2020 2020  : side,.        
-000291c0: 2020 2020 2770 7269 6365 273a 2070 7269      'price': pri
-000291d0: 6365 2c0a 2020 2020 2020 2020 2020 2020  ce,.            
-000291e0: 2773 746f 7050 7269 6365 273a 2073 746f  'stopPrice': sto
-000291f0: 7050 7269 6365 2c0a 2020 2020 2020 2020  pPrice,.        
-00029200: 2020 2020 2774 7269 6767 6572 5072 6963      'triggerPric
-00029210: 6527 3a20 7374 6f70 5072 6963 652c 0a20  e': stopPrice,. 
-00029220: 2020 2020 2020 2020 2020 2027 616d 6f75             'amou
-00029230: 6e74 273a 2061 6d6f 756e 742c 0a20 2020  nt': amount,.   
-00029240: 2020 2020 2020 2020 2027 636f 7374 273a           'cost':
-00029250: 2063 6f73 742c 0a20 2020 2020 2020 2020   cost,.         
-00029260: 2020 2027 6176 6572 6167 6527 3a20 4e6f     'average': No
-00029270: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-00029280: 2766 696c 6c65 6427 3a20 6669 6c6c 6564  'filled': filled
-00029290: 2c0a 2020 2020 2020 2020 2020 2020 2772  ,.            'r
-000292a0: 656d 6169 6e69 6e67 273a 2072 656d 6169  emaining': remai
-000292b0: 6e69 6e67 2c0a 2020 2020 2020 2020 2020  ning,.          
-000292c0: 2020 2773 7461 7475 7327 3a20 7374 6174    'status': stat
-000292d0: 7573 2c0a 2020 2020 2020 2020 2020 2020  us,.            
-000292e0: 2766 6565 273a 2066 6565 2c0a 2020 2020  'fee': fee,.    
-000292f0: 2020 2020 2020 2020 2774 7261 6465 7327          'trades'
-00029300: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
-00029310: 7d2c 206d 6172 6b65 7429 0a0a 2020 2020  }, market)..    
-00029320: 6465 6620 7061 7273 655f 7370 6f74 5f6f  def parse_spot_o
-00029330: 7264 6572 2873 656c 662c 206f 7264 6572  rder(self, order
-00029340: 2c20 6d61 726b 6574 3d4e 6f6e 6529 3a0a  , market=None):.
-00029350: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-00029360: 2020 2320 2063 7265 6174 654f 7264 6572    #  createOrder
-00029370: 2c20 6361 6e63 656c 4f72 6572 0a20 2020  , cancelOrer.   
-00029380: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-00029390: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
-000293a0: 2020 2020 2020 2020 2022 6f72 6465 7249           "orderI
-000293b0: 6422 3a20 2231 3237 3437 3534 3931 3632  d": "12747549162
-000293c0: 3837 3334 3632 3830 222c 0a20 2020 2020  87346280",.     
-000293d0: 2020 2023 2020 2020 2020 2020 2022 6f72     #         "or
-000293e0: 6465 724c 696e 6b49 6422 3a20 2231 3636  derLinkId": "166
-000293f0: 3637 3938 3632 3730 3135 3733 3022 2c0a  6798627015730",.
-00029400: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00029410: 2020 2273 796d 626f 6c22 3a20 2241 4156    "symbol": "AAV
-00029420: 4555 5344 5422 2c0a 2020 2020 2020 2020  EUSDT",.        
-00029430: 2320 2020 2020 2020 2020 2263 7265 6174  #         "creat
-00029440: 6554 696d 6522 3a20 2231 3636 3636 3938  eTime": "1666698
-00029450: 3632 3938 3231 222c 0a20 2020 2020 2020  629821",.       
-00029460: 2023 2020 2020 2020 2020 2022 6f72 6465   #         "orde
-00029470: 7250 7269 6365 223a 2022 3830 222c 0a20  rPrice": "80",. 
-00029480: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00029490: 2022 6f72 6465 7251 7479 223a 2022 302e   "orderQty": "0.
-000294a0: 3131 222c 0a20 2020 2020 2020 2023 2020  11",.        #  
-000294b0: 2020 2020 2020 2022 6f72 6465 7254 7970         "orderTyp
-000294c0: 6522 3a20 224c 494d 4954 222c 0a20 2020  e": "LIMIT",.   
-000294d0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-000294e0: 7369 6465 223a 2022 4255 5922 2c0a 2020  side": "BUY",.  
-000294f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00029500: 2273 7461 7475 7322 3a20 224e 4557 222c  "status": "NEW",
-00029510: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00029520: 2020 2022 7469 6d65 496e 466f 7263 6522     "timeInForce"
-00029530: 3a20 2247 5443 222c 0a20 2020 2020 2020  : "GTC",.       
-00029540: 2023 2020 2020 2020 2020 2022 6163 636f   #         "acco
-00029550: 756e 7449 6422 3a20 2231 3333 3830 3433  untId": "1338043
-00029560: 3422 2c0a 2020 2020 2020 2020 2320 2020  4",.        #   
-00029570: 2020 2020 2020 2265 7865 6351 7479 223a        "execQty":
-00029580: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
-00029590: 2020 2020 2020 2020 226f 7264 6572 4361          "orderCa
-000295a0: 7465 676f 7279 223a 2022 3022 0a20 2020  tegory": "0".   
-000295b0: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
-000295c0: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-000295d0: 2020 2020 2066 6574 6368 4f72 6465 722c       fetchOrder,
-000295e0: 2066 6574 6368 4f70 656e 4f72 6465 7273   fetchOpenOrders
-000295f0: 2c20 6665 7463 6843 6c6f 7365 644f 7264  , fetchClosedOrd
-00029600: 6572 7328 616e 6420 616c 736f 2066 6f72  ers(and also for
-00029610: 2063 6f6e 6469 7469 6f6e 616c 206f 7264   conditional ord
-00029620: 6572 7329 2074 6865 7265 2061 7265 2061  ers) there are a
-00029630: 6c73 6f20 7072 6573 656e 7420 7468 6573  lso present thes
-00029640: 6520 6164 6469 7469 6f6e 616c 2066 6965  e additional fie
-00029650: 6c64 733a 0a20 2020 2020 2020 2023 2020  lds:.        #  
-00029660: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-00029670: 2020 2020 2020 2022 6375 6d6d 756c 6174         "cummulat
-00029680: 6976 6551 756f 7465 5174 7922 3a20 2230  iveQuoteQty": "0
-00029690: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-000296a0: 2020 2020 2022 6176 6750 7269 6365 223a       "avgPrice":
-000296b0: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
-000296c0: 2020 2020 2020 2020 2273 746f 7050 7269          "stopPri
-000296d0: 6365 223a 2022 302e 3022 2c0a 2020 2020  ce": "0.0",.    
-000296e0: 2020 2020 2320 2020 2020 2020 2020 2269      #         "i
-000296f0: 6365 6265 7267 5174 7922 3a20 2230 2e30  cebergQty": "0.0
-00029700: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00029710: 2020 2020 2022 7570 6461 7465 5469 6d65       "updateTime
-00029720: 223a 2022 3136 3636 3733 3333 3537 3434  ": "166673335744
-00029730: 3422 2c0a 2020 2020 2020 2020 2320 2020  4",.        #   
-00029740: 2020 2020 2020 2269 7357 6f72 6b69 6e67        "isWorking
-00029750: 223a 2022 3122 2c0a 2020 2020 2020 2020  ": "1",.        
-00029760: 2320 2020 2020 2020 2020 226c 6f63 6b65  #         "locke
-00029770: 6422 3a20 2238 2e38 222c 0a20 2020 2020  d": "8.8",.     
-00029780: 2020 2023 2020 2020 2020 2020 2022 6578     #         "ex
-00029790: 6563 7574 6564 4f72 6465 7249 6422 3a20  ecutedOrderId": 
-000297a0: 2231 3237 3930 3934 3033 3735 3433 3936  "127909403754396
-000297b0: 3231 3133 222c 2020 2320 696e 2063 6f6e  2113",  # in con
-000297c0: 6469 7469 6f6e 616c 206f 7264 6572 0a20  ditional order. 
-000297d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000297e0: 2022 7472 6967 6765 7250 7269 6365 223a   "triggerPrice":
-000297f0: 2022 302e 3939 222c 2020 2320 696e 2063   "0.99",  # in c
-00029800: 6f6e 6469 7469 6f6e 616c 206f 7264 6572  onditional order
-00029810: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
-00029820: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00029830: 2020 206d 6172 6b65 7449 6420 3d20 7365     marketId = se
-00029840: 6c66 2e73 6166 655f 7374 7269 6e67 286f  lf.safe_string(o
-00029850: 7264 6572 2c20 2773 796d 626f 6c27 290a  rder, 'symbol').
-00029860: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
-00029870: 2073 656c 662e 7361 6665 5f6d 6172 6b65   self.safe_marke
-00029880: 7428 6d61 726b 6574 4964 2c20 6d61 726b  t(marketId, mark
-00029890: 6574 2c20 4e6f 6e65 2c20 2773 706f 7427  et, None, 'spot'
-000298a0: 290a 2020 2020 2020 2020 7469 6d65 7374  ).        timest
-000298b0: 616d 7020 3d20 7365 6c66 2e73 6166 655f  amp = self.safe_
-000298c0: 696e 7465 6765 7228 6f72 6465 722c 2027  integer(order, '
-000298d0: 6372 6561 7465 5469 6d65 2729 0a20 2020  createTime').   
-000298e0: 2020 2020 2074 7970 6520 3d20 7365 6c66       type = self
-000298f0: 2e73 6166 655f 7374 7269 6e67 5f6c 6f77  .safe_string_low
-00029900: 6572 286f 7264 6572 2c20 276f 7264 6572  er(order, 'order
-00029910: 5479 7065 2729 0a20 2020 2020 2020 2070  Type').        p
-00029920: 7269 6365 203d 2073 656c 662e 7361 6665  rice = self.safe
-00029930: 5f73 7472 696e 6728 6f72 6465 722c 2027  _string(order, '
-00029940: 6f72 6465 7250 7269 6365 2729 0a20 2020  orderPrice').   
-00029950: 2020 2020 2069 6620 7072 6963 6520 3d3d       if price ==
-00029960: 2027 3027 2061 6e64 2074 7970 6520 3d3d   '0' and type ==
-00029970: 2027 6d61 726b 6574 273a 0a20 2020 2020   'market':.     
-00029980: 2020 2020 2020 2070 7269 6365 203d 204e         price = N
-00029990: 6f6e 650a 2020 2020 2020 2020 6669 6c6c  one.        fill
-000299a0: 6564 203d 2073 656c 662e 7361 6665 5f73  ed = self.safe_s
-000299b0: 7472 696e 6728 6f72 6465 722c 2027 6578  tring(order, 'ex
-000299c0: 6563 5174 7927 290a 2020 2020 2020 2020  ecQty').        
-000299d0: 7369 6465 203d 2073 656c 662e 7361 6665  side = self.safe
-000299e0: 5f73 7472 696e 675f 6c6f 7765 7228 6f72  _string_lower(or
-000299f0: 6465 722c 2027 7369 6465 2729 0a20 2020  der, 'side').   
-00029a00: 2020 2020 2074 696d 6549 6e46 6f72 6365       timeInForce
-00029a10: 203d 2073 656c 662e 7061 7273 655f 7469   = self.parse_ti
-00029a20: 6d65 5f69 6e5f 666f 7263 6528 7365 6c66  me_in_force(self
-00029a30: 2e73 6166 655f 7374 7269 6e67 286f 7264  .safe_string(ord
-00029a40: 6572 2c20 2774 696d 6549 6e46 6f72 6365  er, 'timeInForce
-00029a50: 2729 290a 2020 2020 2020 2020 7472 6967  ')).        trig
-00029a60: 6765 7250 7269 6365 203d 2073 656c 662e  gerPrice = self.
-00029a70: 7361 6665 5f73 7472 696e 6728 6f72 6465  safe_string(orde
-00029a80: 722c 2027 7472 6967 6765 7250 7269 6365  r, 'triggerPrice
-00029a90: 2729 0a20 2020 2020 2020 2070 6f73 744f  ').        postO
-00029aa0: 6e6c 7920 3d20 2874 696d 6549 6e46 6f72  nly = (timeInFor
-00029ab0: 6365 203d 3d20 2750 4f27 290a 2020 2020  ce == 'PO').    
-00029ac0: 2020 2020 616d 6f75 6e74 203d 204e 6f6e      amount = Non
-00029ad0: 650a 2020 2020 2020 2020 6966 206d 6172  e.        if mar
-00029ae0: 6b65 745b 2773 706f 7427 5d20 616e 6420  ket['spot'] and 
-00029af0: 7479 7065 203d 3d20 276d 6172 6b65 7427  type == 'market'
-00029b00: 2061 6e64 2073 6964 6520 3d3d 2027 6275   and side == 'bu
-00029b10: 7927 3a0a 2020 2020 2020 2020 2020 2020  y':.            
-00029b20: 616d 6f75 6e74 203d 2066 696c 6c65 640a  amount = filled.
-00029b30: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00029b40: 2020 2020 2020 2020 2020 616d 6f75 6e74            amount
-00029b50: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-00029b60: 696e 6728 6f72 6465 722c 2027 6f72 6465  ing(order, 'orde
-00029b70: 7251 7479 2729 0a20 2020 2020 2020 2072  rQty').        r
-00029b80: 6574 7572 6e20 7365 6c66 2e73 6166 655f  eturn self.safe_
-00029b90: 6f72 6465 7228 7b0a 2020 2020 2020 2020  order({.        
-00029ba0: 2020 2020 2769 6427 3a20 7365 6c66 2e73      'id': self.s
-00029bb0: 6166 655f 7374 7269 6e67 286f 7264 6572  afe_string(order
-00029bc0: 2c20 276f 7264 6572 4964 2729 2c0a 2020  , 'orderId'),.  
-00029bd0: 2020 2020 2020 2020 2020 2763 6c69 656e            'clien
-00029be0: 744f 7264 6572 4964 273a 2073 656c 662e  tOrderId': self.
-00029bf0: 7361 6665 5f73 7472 696e 6728 6f72 6465  safe_string(orde
-00029c00: 722c 2027 6f72 6465 724c 696e 6b49 6427  r, 'orderLinkId'
-00029c10: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
-00029c20: 7469 6d65 7374 616d 7027 3a20 7469 6d65  timestamp': time
-00029c30: 7374 616d 702c 0a20 2020 2020 2020 2020  stamp,.         
-00029c40: 2020 2027 6461 7465 7469 6d65 273a 2073     'datetime': s
-00029c50: 656c 662e 6973 6f38 3630 3128 7469 6d65  elf.iso8601(time
-00029c60: 7374 616d 7029 2c0a 2020 2020 2020 2020  stamp),.        
-00029c70: 2020 2020 276c 6173 7454 7261 6465 5469      'lastTradeTi
-00029c80: 6d65 7374 616d 7027 3a20 7365 6c66 2e73  mestamp': self.s
-00029c90: 6166 655f 696e 7465 6765 7228 6f72 6465  afe_integer(orde
-00029ca0: 722c 2027 7570 6461 7465 5469 6d65 2729  r, 'updateTime')
-00029cb0: 2c0a 2020 2020 2020 2020 2020 2020 2773  ,.            's
-00029cc0: 796d 626f 6c27 3a20 6d61 726b 6574 5b27  ymbol': market['
-00029cd0: 7379 6d62 6f6c 275d 2c0a 2020 2020 2020  symbol'],.      
-00029ce0: 2020 2020 2020 2774 7970 6527 3a20 7479        'type': ty
-00029cf0: 7065 2c0a 2020 2020 2020 2020 2020 2020  pe,.            
-00029d00: 2774 696d 6549 6e46 6f72 6365 273a 2074  'timeInForce': t
-00029d10: 696d 6549 6e46 6f72 6365 2c0a 2020 2020  imeInForce,.    
-00029d20: 2020 2020 2020 2020 2770 6f73 744f 6e6c          'postOnl
-00029d30: 7927 3a20 706f 7374 4f6e 6c79 2c0a 2020  y': postOnly,.  
-00029d40: 2020 2020 2020 2020 2020 2773 6964 6527            'side'
-00029d50: 3a20 7369 6465 2c0a 2020 2020 2020 2020  : side,.        
-00029d60: 2020 2020 2770 7269 6365 273a 2070 7269      'price': pri
-00029d70: 6365 2c0a 2020 2020 2020 2020 2020 2020  ce,.            
-00029d80: 2774 7269 6767 6572 5072 6963 6527 3a20  'triggerPrice': 
-00029d90: 7472 6967 6765 7250 7269 6365 2c0a 2020  triggerPrice,.  
-00029da0: 2020 2020 2020 2020 2020 2773 746f 7050            'stopP
-00029db0: 7269 6365 273a 2074 7269 6767 6572 5072  rice': triggerPr
-00029dc0: 6963 652c 2020 2320 6465 7072 6563 6174  ice,  # deprecat
-00029dd0: 6564 2066 6965 6c64 0a20 2020 2020 2020  ed field.       
-00029de0: 2020 2020 2027 616d 6f75 6e74 273a 2061       'amount': a
-00029df0: 6d6f 756e 742c 0a20 2020 2020 2020 2020  mount,.         
-00029e00: 2020 2027 636f 7374 273a 2073 656c 662e     'cost': self.
-00029e10: 7361 6665 5f73 7472 696e 6728 6f72 6465  safe_string(orde
-00029e20: 722c 2027 6375 6d6d 756c 6174 6976 6551  r, 'cummulativeQ
-00029e30: 756f 7465 5174 7927 292c 0a20 2020 2020  uoteQty'),.     
-00029e40: 2020 2020 2020 2027 6176 6572 6167 6527         'average'
-00029e50: 3a20 7365 6c66 2e73 6166 655f 7374 7269  : self.safe_stri
-00029e60: 6e67 286f 7264 6572 2c20 2761 7667 5072  ng(order, 'avgPr
-00029e70: 6963 6527 292c 0a20 2020 2020 2020 2020  ice'),.         
-00029e80: 2020 2027 6669 6c6c 6564 273a 2066 696c     'filled': fil
-00029e90: 6c65 642c 0a20 2020 2020 2020 2020 2020  led,.           
-00029ea0: 2027 7265 6d61 696e 696e 6727 3a20 4e6f   'remaining': No
-00029eb0: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-00029ec0: 2773 7461 7475 7327 3a20 7365 6c66 2e70  'status': self.p
-00029ed0: 6172 7365 5f6f 7264 6572 5f73 7461 7475  arse_order_statu
-00029ee0: 7328 7365 6c66 2e73 6166 655f 7374 7269  s(self.safe_stri
-00029ef0: 6e67 286f 7264 6572 2c20 2773 7461 7475  ng(order, 'statu
-00029f00: 7327 2929 2c0a 2020 2020 2020 2020 2020  s')),.          
-00029f10: 2020 2766 6565 273a 204e 6f6e 652c 0a20    'fee': None,. 
-00029f20: 2020 2020 2020 2020 2020 2027 7472 6164             'trad
-00029f30: 6573 273a 204e 6f6e 652c 0a20 2020 2020  es': None,.     
-00029f40: 2020 2020 2020 2027 696e 666f 273a 206f         'info': o
-00029f50: 7264 6572 2c0a 2020 2020 2020 2020 7d2c  rder,.        },
-00029f60: 206d 6172 6b65 7429 0a0a 2020 2020 6173   market)..    as
-00029f70: 796e 6320 6465 6620 6665 7463 685f 6f72  ync def fetch_or
-00029f80: 6465 7228 7365 6c66 2c20 6964 3a20 7374  der(self, id: st
-00029f90: 722c 2073 796d 626f 6c3a 204f 7074 696f  r, symbol: Optio
-00029fa0: 6e61 6c5b 7374 725d 203d 204e 6f6e 652c  nal[str] = None,
-00029fb0: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
-00029fc0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00029fd0: 2066 6574 6368 6573 2069 6e66 6f72 6d61   fetches informa
-00029fe0: 7469 6f6e 206f 6e20 616e 206f 7264 6572  tion on an order
-00029ff0: 206d 6164 6520 6279 2074 6865 2075 7365   made by the use
-0002a000: 720a 2020 2020 2020 2020 3a70 6172 616d  r.        :param
-0002a010: 2073 7472 7c4e 6f6e 6520 7379 6d62 6f6c   str|None symbol
-0002a020: 3a20 756e 6966 6965 6420 7379 6d62 6f6c  : unified symbol
-0002a030: 206f 6620 7468 6520 6d61 726b 6574 2074   of the market t
-0002a040: 6865 206f 7264 6572 2077 6173 206d 6164  he order was mad
-0002a050: 6520 696e 0a20 2020 2020 2020 203a 7061  e in.        :pa
-0002a060: 7261 6d20 6469 6374 2070 6172 616d 733a  ram dict params:
-0002a070: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
-0002a080: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
-0002a090: 6520 6279 6269 7420 6170 6920 656e 6470  e bybit api endp
-0002a0a0: 6f69 6e74 0a20 2020 2020 2020 203a 7265  oint.        :re
-0002a0b0: 7475 726e 7320 6469 6374 3a20 416e 2060  turns dict: An `
-0002a0c0: 6f72 6465 7220 7374 7275 6374 7572 6520  order structure 
-0002a0d0: 3c68 7474 7073 3a2f 2f64 6f63 732e 6363  <https://docs.cc
-0002a0e0: 7874 2e63 6f6d 2f23 2f3f 6964 3d6f 7264  xt.com/#/?id=ord
-0002a0f0: 6572 2d73 7472 7563 7475 7265 3e60 0a20  er-structure>`. 
-0002a100: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-0002a110: 2020 2061 7761 6974 2073 656c 662e 6c6f     await self.lo
-0002a120: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
-0002a130: 2020 2020 206d 6172 6b65 7420 3d20 4e6f       market = No
-0002a140: 6e65 0a20 2020 2020 2020 2069 6620 7379  ne.        if sy
-0002a150: 6d62 6f6c 2069 7320 6e6f 7420 4e6f 6e65  mbol is not None
-0002a160: 3a0a 2020 2020 2020 2020 2020 2020 6d61  :.            ma
-0002a170: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
-0002a180: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
-0002a190: 2020 2074 7970 6520 3d20 4e6f 6e65 0a20     type = None. 
-0002a1a0: 2020 2020 2020 2074 7970 652c 2070 6172         type, par
-0002a1b0: 616d 7320 3d20 7365 6c66 2e68 616e 646c  ams = self.handl
-0002a1c0: 655f 6d61 726b 6574 5f74 7970 655f 616e  e_market_type_an
-0002a1d0: 645f 7061 7261 6d73 2827 6665 7463 684f  d_params('fetchO
-0002a1e0: 7264 6572 272c 206d 6172 6b65 742c 2070  rder', market, p
-0002a1f0: 6172 616d 7329 0a20 2020 2020 2020 2061  arams).        a
-0002a200: 6363 6f75 6e74 7320 3d20 6177 6169 7420  ccounts = await 
-0002a210: 7365 6c66 2e69 735f 756e 6966 6965 645f  self.is_unified_
-0002a220: 656e 6162 6c65 6428 290a 2020 2020 2020  enabled().      
-0002a230: 2020 6973 556e 6966 6965 6441 6363 6f75    isUnifiedAccou
-0002a240: 6e74 203d 2073 656c 662e 7361 6665 5f76  nt = self.safe_v
-0002a250: 616c 7565 2861 6363 6f75 6e74 732c 2031  alue(accounts, 1
-0002a260: 2c20 4661 6c73 6529 0a20 2020 2020 2020  , False).       
-0002a270: 2069 6620 6973 556e 6966 6965 6441 6363   if isUnifiedAcc
-0002a280: 6f75 6e74 3a0a 2020 2020 2020 2020 2020  ount:.          
-0002a290: 2020 7261 6973 6520 4e6f 7453 7570 706f    raise NotSuppo
-0002a2a0: 7274 6564 2873 656c 662e 6964 202b 2027  rted(self.id + '
-0002a2b0: 2066 6574 6368 4f72 6465 7228 2920 646f   fetchOrder() do
-0002a2c0: 6573 206e 6f74 2073 7570 706f 7274 2075  es not support u
-0002a2d0: 6e69 6669 6564 2061 6363 6f75 6e74 2e20  nified account. 
-0002a2e0: 506c 6561 7365 2063 6f6e 7369 6465 7220  Please consider 
-0002a2f0: 7573 696e 6720 6665 7463 684f 7065 6e4f  using fetchOpenO
-0002a300: 7264 6572 7328 2920 6f72 2066 6574 6368  rders() or fetch
-0002a310: 436c 6f73 6564 4f72 6465 7273 2829 2729  ClosedOrders()')
-0002a320: 0a20 2020 2020 2020 2069 6620 7479 7065  .        if type
-0002a330: 203d 3d20 2773 706f 7427 3a0a 2020 2020   == 'spot':.    
-0002a340: 2020 2020 2020 2020 2320 6f6e 6c79 2073          # only s
-0002a350: 706f 7420 6d61 726b 6574 7320 6861 7665  pot markets have
-0002a360: 2061 2064 6564 6963 6174 6564 2065 6e64   a dedicated end
-0002a370: 706f 696e 7420 666f 7220 6665 7463 6869  point for fetchi
-0002a380: 6e67 2061 206f 7264 6572 0a20 2020 2020  ng a order.     
-0002a390: 2020 2020 2020 2072 6571 7565 7374 203d         request =
-0002a3a0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
-0002a3b0: 2020 2027 6f72 6465 7249 6427 3a20 6964     'orderId': id
-0002a3c0: 2c0a 2020 2020 2020 2020 2020 2020 7d0a  ,.            }.
-0002a3d0: 2020 2020 2020 2020 2020 2020 7265 7370              resp
-0002a3e0: 6f6e 7365 203d 2061 7761 6974 2073 656c  onse = await sel
-0002a3f0: 662e 7072 6976 6174 6547 6574 5370 6f74  f.privateGetSpot
-0002a400: 5633 5072 6976 6174 654f 7264 6572 2873  V3PrivateOrder(s
-0002a410: 656c 662e 6578 7465 6e64 2870 6172 616d  elf.extend(param
-0002a420: 732c 2072 6571 7565 7374 2929 0a20 2020  s, request)).   
-0002a430: 2020 2020 2020 2020 2023 0a20 2020 2020           #.     
-0002a440: 2020 2020 2020 2023 2020 2020 7b0a 2020         #    {.  
-0002a450: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-0002a460: 2020 2022 7265 7443 6f64 6522 3a20 2230     "retCode": "0
-0002a470: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
-0002a480: 2020 2020 2020 2020 2272 6574 4d73 6722          "retMsg"
-0002a490: 3a20 224f 4b22 2c0a 2020 2020 2020 2020  : "OK",.        
-0002a4a0: 2020 2020 2320 2020 2020 2020 2022 7265      #        "re
-0002a4b0: 7375 6c74 223a 207b 0a20 2020 2020 2020  sult": {.       
-0002a4c0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0002a4d0: 2020 2261 6363 6f75 6e74 4964 223a 2022    "accountId": "
-0002a4e0: 3133 3338 3034 3334 222c 0a20 2020 2020  13380434",.     
-0002a4f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0002a500: 2020 2020 2273 796d 626f 6c22 3a20 2241      "symbol": "A
-0002a510: 4156 4555 5344 5422 2c0a 2020 2020 2020  AVEUSDT",.      
-0002a520: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0002a530: 2020 2022 6f72 6465 724c 696e 6b49 6422     "orderLinkId"
-0002a540: 3a20 2231 3636 3637 3333 3335 3734 3334  : "1666733357434
-0002a550: 3631 3722 2c0a 2020 2020 2020 2020 2020  617",.          
-0002a560: 2020 2320 2020 2020 2020 2020 2020 2022    #            "
-0002a570: 6f72 6465 7249 6422 3a20 2231 3237 3530  orderId": "12750
-0002a580: 3436 3234 3835 3835 3431 3431 3434 222c  46248585414144",
-0002a590: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-0002a5a0: 2020 2020 2020 2020 2020 226f 7264 6572            "order
-0002a5b0: 5072 6963 6522 3a20 2238 3022 2c0a 2020  Price": "80",.  
-0002a5c0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-0002a5d0: 2020 2020 2020 2022 6f72 6465 7251 7479         "orderQty
-0002a5e0: 223a 2022 302e 3131 222c 0a20 2020 2020  ": "0.11",.     
-0002a5f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0002a600: 2020 2020 2265 7865 6351 7479 223a 2022      "execQty": "
-0002a610: 3022 2c0a 2020 2020 2020 2020 2020 2020  0",.            
-0002a620: 2320 2020 2020 2020 2020 2020 2022 6375  #            "cu
-0002a630: 6d6d 756c 6174 6976 6551 756f 7465 5174  mmulativeQuoteQt
-0002a640: 7922 3a20 2230 222c 0a20 2020 2020 2020  y": "0",.       
-0002a650: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0002a660: 2020 2261 7667 5072 6963 6522 3a20 2230    "avgPrice": "0
-0002a670: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
-0002a680: 2020 2020 2020 2020 2020 2020 2273 7461              "sta
-0002a690: 7475 7322 3a20 224e 4557 222c 0a20 2020  tus": "NEW",.   
-0002a6a0: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-0002a6b0: 2020 2020 2020 2274 696d 6549 6e46 6f72        "timeInFor
-0002a6c0: 6365 223a 2022 4754 4322 2c0a 2020 2020  ce": "GTC",.    
-0002a6d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0002a6e0: 2020 2020 2022 6f72 6465 7254 7970 6522       "orderType"
-0002a6f0: 3a20 224c 494d 4954 222c 0a20 2020 2020  : "LIMIT",.     
-0002a700: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0002a710: 2020 2020 2273 6964 6522 3a20 2242 5559      "side": "BUY
-0002a720: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
-0002a730: 2020 2020 2020 2020 2020 2020 2273 746f              "sto
-0002a740: 7050 7269 6365 223a 2022 302e 3022 2c0a  pPrice": "0.0",.
-0002a750: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-0002a760: 2020 2020 2020 2020 2022 6963 6562 6572           "iceber
-0002a770: 6751 7479 223a 2022 302e 3022 2c0a 2020  gQty": "0.0",.  
-0002a780: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-0002a790: 2020 2020 2020 2022 6372 6561 7465 5469         "createTi
-0002a7a0: 6d65 223a 2022 3136 3636 3733 3333 3537  me": "1666733357
-0002a7b0: 3433 3822 2c0a 2020 2020 2020 2020 2020  438",.          
-0002a7c0: 2020 2320 2020 2020 2020 2020 2020 2022    #            "
-0002a7d0: 7570 6461 7465 5469 6d65 223a 2022 3136  updateTime": "16
-0002a7e0: 3636 3733 3333 3537 3434 3422 2c0a 2020  66733357444",.  
-0002a7f0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-0002a800: 2020 2020 2020 2022 6973 576f 726b 696e         "isWorkin
-0002a810: 6722 3a20 2231 222c 0a20 2020 2020 2020  g": "1",.       
-0002a820: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0002a830: 2020 226c 6f63 6b65 6422 3a20 2238 2e38    "locked": "8.8
-0002a840: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
-0002a850: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
-0002a860: 6572 4361 7465 676f 7279 223a 2022 3022  erCategory": "0"
-0002a870: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-0002a880: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
-0002a890: 2020 2020 2023 2020 2020 2020 2020 2272       #        "r
-0002a8a0: 6574 4578 744d 6170 223a 207b 7d2c 0a20  etExtMap": {},. 
-0002a8b0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-0002a8c0: 2020 2020 2272 6574 4578 7449 6e66 6f22      "retExtInfo"
-0002a8d0: 3a20 6e75 6c6c 2c0a 2020 2020 2020 2020  : null,.        
-0002a8e0: 2020 2020 2320 2020 2020 2020 2022 7469      #        "ti
-0002a8f0: 6d65 223a 2022 3136 3636 3733 3333 3537  me": "1666733357
-0002a900: 3734 3422 0a20 2020 2020 2020 2020 2020  744".           
-0002a910: 2023 2020 2020 7d0a 2020 2020 2020 2020   #    }.        
-0002a920: 2020 2020 230a 2020 2020 2020 2020 2020      #.          
-0002a930: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
-0002a940: 7361 6665 5f76 616c 7565 2872 6573 706f  safe_value(respo
-0002a950: 6e73 652c 2027 7265 7375 6c74 272c 207b  nse, 'result', {
-0002a960: 7d29 0a20 2020 2020 2020 2020 2020 2072  }).            r
-0002a970: 6574 7572 6e20 7365 6c66 2e70 6172 7365  eturn self.parse
-0002a980: 5f6f 7264 6572 2872 6573 756c 742c 206d  _order(result, m
-0002a990: 6172 6b65 7429 0a20 2020 2020 2020 2065  arket).        e
-0002a9a0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0002a9b0: 2073 656c 662e 6368 6563 6b5f 7265 7175   self.check_requ
-0002a9c0: 6972 6564 5f73 796d 626f 6c28 2766 6574  ired_symbol('fet
-0002a9d0: 6368 4f72 6465 7227 2c20 7379 6d62 6f6c  chOrder', symbol
-0002a9e0: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
-0002a9f0: 7175 6573 7420 3d20 7b0a 2020 2020 2020  quest = {.      
-0002aa00: 2020 2020 2020 2020 2020 276f 7264 6572            'order
-0002aa10: 4964 273a 2069 642c 0a20 2020 2020 2020  Id': id,.       
-0002aa20: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
-0002aa30: 2020 2072 6573 756c 7420 3d20 6177 6169     result = awai
-0002aa40: 7420 7365 6c66 2e66 6574 6368 5f6f 7264  t self.fetch_ord
-0002aa50: 6572 7328 7379 6d62 6f6c 2c20 4e6f 6e65  ers(symbol, None
-0002aa60: 2c20 4e6f 6e65 2c20 7365 6c66 2e65 7874  , None, self.ext
-0002aa70: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
-0002aa80: 616d 7329 290a 2020 2020 2020 2020 2020  ams)).          
-0002aa90: 2020 6c65 6e67 7468 203d 206c 656e 2872    length = len(r
-0002aaa0: 6573 756c 7429 0a20 2020 2020 2020 2020  esult).         
-0002aab0: 2020 2069 6620 6c65 6e67 7468 203d 3d20     if length == 
-0002aac0: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
-0002aad0: 2020 2072 6169 7365 204f 7264 6572 4e6f     raise OrderNo
-0002aae0: 7446 6f75 6e64 2827 4f72 6465 7220 2720  tFound('Order ' 
-0002aaf0: 2b20 6964 202b 2027 2064 6f65 7320 6e6f  + id + ' does no
-0002ab00: 7420 6578 6973 742e 2729 0a20 2020 2020  t exist.').     
-0002ab10: 2020 2020 2020 2069 6620 6c65 6e67 7468         if length
-0002ab20: 203e 2031 3a0a 2020 2020 2020 2020 2020   > 1:.          
-0002ab30: 2020 2020 2020 7261 6973 6520 496e 7661        raise Inva
-0002ab40: 6c69 644f 7264 6572 2873 656c 662e 6964  lidOrder(self.id
-0002ab50: 202b 2027 2072 6574 7572 6e65 6420 6d6f   + ' returned mo
-0002ab60: 7265 2074 6861 6e20 6f6e 6520 6f72 6465  re than one orde
-0002ab70: 7227 290a 2020 2020 2020 2020 2020 2020  r').            
-0002ab80: 7265 7475 726e 2073 656c 662e 7361 6665  return self.safe
-0002ab90: 5f76 616c 7565 2872 6573 756c 742c 2030  _value(result, 0
-0002aba0: 290a 0a20 2020 2061 7379 6e63 2064 6566  )..    async def
-0002abb0: 2063 7265 6174 655f 6f72 6465 7228 7365   create_order(se
-0002abc0: 6c66 2c20 7379 6d62 6f6c 3a20 7374 722c  lf, symbol: str,
-0002abd0: 2074 7970 652c 2073 6964 653a 204f 7264   type, side: Ord
-0002abe0: 6572 5369 6465 2c20 616d 6f75 6e74 2c20  erSide, amount, 
-0002abf0: 7072 6963 653d 4e6f 6e65 2c20 7061 7261  price=None, para
-0002ac00: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
-0002ac10: 2222 220a 2020 2020 2020 2020 6372 6561  """.        crea
-0002ac20: 7465 2061 2074 7261 6465 206f 7264 6572  te a trade order
-0002ac30: 0a20 2020 2020 2020 2073 6565 2068 7474  .        see htt
-0002ac40: 7073 3a2f 2f62 7962 6974 2d65 7863 6861  ps://bybit-excha
-0002ac50: 6e67 652e 6769 7468 7562 2e69 6f2f 646f  nge.github.io/do
-0002ac60: 6373 2f76 352f 6f72 6465 722f 6372 6561  cs/v5/order/crea
-0002ac70: 7465 2d6f 7264 6572 0a20 2020 2020 2020  te-order.       
-0002ac80: 2073 6565 2068 7474 7073 3a2f 2f62 7962   see https://byb
-0002ac90: 6974 2d65 7863 6861 6e67 652e 6769 7468  it-exchange.gith
-0002aca0: 7562 2e69 6f2f 646f 6373 2f73 706f 742f  ub.io/docs/spot/
-0002acb0: 7472 6164 652f 706c 6163 652d 6f72 6465  trade/place-orde
-0002acc0: 720a 2020 2020 2020 2020 7365 6520 6874  r.        see ht
-0002acd0: 7470 733a 2f2f 6279 6269 742d 6578 6368  tps://bybit-exch
-0002ace0: 616e 6765 2e67 6974 6875 622e 696f 2f64  ange.github.io/d
-0002acf0: 6f63 732f 6465 7269 7661 7469 7665 732f  ocs/derivatives/
-0002ad00: 756e 6966 6965 642f 706c 6163 652d 6f72  unified/place-or
-0002ad10: 6465 720a 2020 2020 2020 2020 7365 6520  der.        see 
-0002ad20: 6874 7470 733a 2f2f 6279 6269 742d 6578  https://bybit-ex
-0002ad30: 6368 616e 6765 2e67 6974 6875 622e 696f  change.github.io
-0002ad40: 2f64 6f63 732f 6465 7269 7661 7469 7665  /docs/derivative
-0002ad50: 732f 636f 6e74 7261 6374 2f70 6c61 6365  s/contract/place
-0002ad60: 2d6f 7264 6572 0a20 2020 2020 2020 203a  -order.        :
-0002ad70: 7061 7261 6d20 7374 7220 7379 6d62 6f6c  param str symbol
-0002ad80: 3a20 756e 6966 6965 6420 7379 6d62 6f6c  : unified symbol
-0002ad90: 206f 6620 7468 6520 6d61 726b 6574 2074   of the market t
-0002ada0: 6f20 6372 6561 7465 2061 6e20 6f72 6465  o create an orde
-0002adb0: 7220 696e 0a20 2020 2020 2020 203a 7061  r in.        :pa
-0002adc0: 7261 6d20 7374 7220 7479 7065 3a20 276d  ram str type: 'm
-0002add0: 6172 6b65 7427 206f 7220 276c 696d 6974  arket' or 'limit
-0002ade0: 270a 2020 2020 2020 2020 3a70 6172 616d  '.        :param
-0002adf0: 2073 7472 2073 6964 653a 2027 6275 7927   str side: 'buy'
-0002ae00: 206f 7220 2773 656c 6c27 0a20 2020 2020   or 'sell'.     
-0002ae10: 2020 203a 7061 7261 6d20 666c 6f61 7420     :param float 
-0002ae20: 616d 6f75 6e74 3a20 686f 7720 6d75 6368  amount: how much
-0002ae30: 206f 6620 6375 7272 656e 6379 2079 6f75   of currency you
-0002ae40: 2077 616e 7420 746f 2074 7261 6465 2069   want to trade i
-0002ae50: 6e20 756e 6974 7320 6f66 2062 6173 6520  n units of base 
-0002ae60: 6375 7272 656e 6379 0a20 2020 2020 2020  currency.       
-0002ae70: 203a 7061 7261 6d20 666c 6f61 747c 4e6f   :param float|No
-0002ae80: 6e65 2070 7269 6365 3a20 7468 6520 7072  ne price: the pr
-0002ae90: 6963 6520 6174 2077 6869 6368 2074 6865  ice at which the
-0002aea0: 206f 7264 6572 2069 7320 746f 2062 6520   order is to be 
-0002aeb0: 6675 6c6c 6669 6c6c 6564 2c20 696e 2075  fullfilled, in u
-0002aec0: 6e69 7473 206f 6620 7468 6520 7175 6f74  nits of the quot
-0002aed0: 6520 6375 7272 656e 6379 2c20 6967 6e6f  e currency, igno
-0002aee0: 7265 6420 696e 206d 6172 6b65 7420 6f72  red in market or
-0002aef0: 6465 7273 0a20 2020 2020 2020 203a 7061  ders.        :pa
-0002af00: 7261 6d20 6469 6374 2070 6172 616d 733a  ram dict params:
-0002af10: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
-0002af20: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
-0002af30: 6520 6279 6269 7420 6170 6920 656e 6470  e bybit api endp
-0002af40: 6f69 6e74 0a20 2020 2020 2020 203a 7265  oint.        :re
-0002af50: 7475 726e 7320 6469 6374 3a20 616e 2060  turns dict: an `
-0002af60: 6f72 6465 7220 7374 7275 6374 7572 6520  order structure 
-0002af70: 3c68 7474 7073 3a2f 2f64 6f63 732e 6363  <https://docs.cc
-0002af80: 7874 2e63 6f6d 2f23 2f3f 6964 3d6f 7264  xt.com/#/?id=ord
-0002af90: 6572 2d73 7472 7563 7475 7265 3e60 0a20  er-structure>`. 
-0002afa0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-0002afb0: 2020 2061 7761 6974 2073 656c 662e 6c6f     await self.lo
-0002afc0: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
-0002afd0: 2020 2020 2073 656c 662e 6368 6563 6b5f       self.check_
-0002afe0: 7265 7175 6972 6564 5f73 796d 626f 6c28  required_symbol(
-0002aff0: 2763 7265 6174 654f 7264 6572 272c 2073  'createOrder', s
-0002b000: 796d 626f 6c29 0a20 2020 2020 2020 206d  ymbol).        m
-0002b010: 6172 6b65 7420 3d20 7365 6c66 2e6d 6172  arket = self.mar
-0002b020: 6b65 7428 7379 6d62 6f6c 290a 2020 2020  ket(symbol).    
-0002b030: 2020 2020 7379 6d62 6f6c 203d 206d 6172      symbol = mar
-0002b040: 6b65 745b 2773 796d 626f 6c27 5d0a 2020  ket['symbol'].  
-0002b050: 2020 2020 2020 656e 6162 6c65 556e 6966        enableUnif
-0002b060: 6965 644d 6172 6769 6e2c 2065 6e61 626c  iedMargin, enabl
-0002b070: 6555 6e69 6669 6564 4163 636f 756e 7420  eUnifiedAccount 
-0002b080: 3d20 6177 6169 7420 7365 6c66 2e69 735f  = await self.is_
-0002b090: 756e 6966 6965 645f 656e 6162 6c65 6428  unified_enabled(
-0002b0a0: 290a 2020 2020 2020 2020 6973 5553 4443  ).        isUSDC
-0002b0b0: 5365 7474 6c65 6420 3d20 6d61 726b 6574  Settled = market
-0002b0c0: 5b27 7365 7474 6c65 275d 203d 3d20 2755  ['settle'] == 'U
-0002b0d0: 5344 4327 0a20 2020 2020 2020 2069 6620  SDC'.        if 
-0002b0e0: 656e 6162 6c65 556e 6966 6965 6441 6363  enableUnifiedAcc
-0002b0f0: 6f75 6e74 2061 6e64 206e 6f74 206d 6172  ount and not mar
-0002b100: 6b65 745b 2769 6e76 6572 7365 275d 3a0a  ket['inverse']:.
-0002b110: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0002b120: 726e 2061 7761 6974 2073 656c 662e 6372  rn await self.cr
-0002b130: 6561 7465 5f75 6e69 6669 6564 5f61 6363  eate_unified_acc
-0002b140: 6f75 6e74 5f6f 7264 6572 2873 796d 626f  ount_order(symbo
-0002b150: 6c2c 2074 7970 652c 2073 6964 652c 2061  l, type, side, a
-0002b160: 6d6f 756e 742c 2070 7269 6365 2c20 7061  mount, price, pa
-0002b170: 7261 6d73 290a 2020 2020 2020 2020 656c  rams).        el
-0002b180: 6966 206d 6172 6b65 745b 2773 706f 7427  if market['spot'
-0002b190: 5d3a 0a20 2020 2020 2020 2020 2020 2072  ]:.            r
-0002b1a0: 6574 7572 6e20 6177 6169 7420 7365 6c66  eturn await self
-0002b1b0: 2e63 7265 6174 655f 7370 6f74 5f6f 7264  .create_spot_ord
-0002b1c0: 6572 2873 796d 626f 6c2c 2074 7970 652c  er(symbol, type,
-0002b1d0: 2073 6964 652c 2061 6d6f 756e 742c 2070   side, amount, p
-0002b1e0: 7269 6365 2c20 7061 7261 6d73 290a 2020  rice, params).  
-0002b1f0: 2020 2020 2020 656c 6966 2065 6e61 626c        elif enabl
-0002b200: 6555 6e69 6669 6564 4d61 7267 696e 2061  eUnifiedMargin a
-0002b210: 6e64 206e 6f74 206d 6172 6b65 745b 2769  nd not market['i
-0002b220: 6e76 6572 7365 275d 3a0a 2020 2020 2020  nverse']:.      
-0002b230: 2020 2020 2020 7265 7475 726e 2061 7761        return awa
-0002b240: 6974 2073 656c 662e 6372 6561 7465 5f75  it self.create_u
-0002b250: 6e69 6669 6564 5f6d 6172 6769 6e5f 6f72  nified_margin_or
-0002b260: 6465 7228 7379 6d62 6f6c 2c20 7479 7065  der(symbol, type
-0002b270: 2c20 7369 6465 2c20 616d 6f75 6e74 2c20  , side, amount, 
-0002b280: 7072 6963 652c 2070 6172 616d 7329 0a20  price, params). 
-0002b290: 2020 2020 2020 2065 6c69 6620 6973 5553         elif isUS
-0002b2a0: 4443 5365 7474 6c65 643a 0a20 2020 2020  DCSettled:.     
-0002b2b0: 2020 2020 2020 2072 6574 7572 6e20 6177         return aw
-0002b2c0: 6169 7420 7365 6c66 2e63 7265 6174 655f  ait self.create_
-0002b2d0: 7573 6463 5f6f 7264 6572 2873 796d 626f  usdc_order(symbo
-0002b2e0: 6c2c 2074 7970 652c 2073 6964 652c 2061  l, type, side, a
-0002b2f0: 6d6f 756e 742c 2070 7269 6365 2c20 7061  mount, price, pa
-0002b300: 7261 6d73 290a 2020 2020 2020 2020 656c  rams).        el
-0002b310: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0002b320: 7265 7475 726e 2061 7761 6974 2073 656c  return await sel
-0002b330: 662e 6372 6561 7465 5f63 6f6e 7472 6163  f.create_contrac
-0002b340: 745f 7633 5f6f 7264 6572 2873 796d 626f  t_v3_order(symbo
-0002b350: 6c2c 2074 7970 652c 2073 6964 652c 2061  l, type, side, a
-0002b360: 6d6f 756e 742c 2070 7269 6365 2c20 7061  mount, price, pa
-0002b370: 7261 6d73 290a 0a20 2020 2061 7379 6e63  rams)..    async
-0002b380: 2064 6566 2063 7265 6174 655f 756e 6966   def create_unif
-0002b390: 6965 645f 6163 636f 756e 745f 6f72 6465  ied_account_orde
-0002b3a0: 7228 7365 6c66 2c20 7379 6d62 6f6c 3a20  r(self, symbol: 
-0002b3b0: 7374 722c 2074 7970 652c 2073 6964 652c  str, type, side,
-0002b3c0: 2061 6d6f 756e 742c 2070 7269 6365 3d4e   amount, price=N
-0002b3d0: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
-0002b3e0: 0a20 2020 2020 2020 2061 7761 6974 2073  .        await s
-0002b3f0: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
-0002b400: 2829 0a20 2020 2020 2020 206d 6172 6b65  ().        marke
-0002b410: 7420 3d20 7365 6c66 2e6d 6172 6b65 7428  t = self.market(
-0002b420: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
-0002b430: 6c6f 7765 7243 6173 6554 7970 6520 3d20  lowerCaseType = 
-0002b440: 7479 7065 2e6c 6f77 6572 2829 0a20 2020  type.lower().   
-0002b450: 2020 2020 2069 6620 2870 7269 6365 2069       if (price i
-0002b460: 7320 4e6f 6e65 2920 616e 6420 286c 6f77  s None) and (low
-0002b470: 6572 4361 7365 5479 7065 203d 3d20 276c  erCaseType == 'l
-0002b480: 696d 6974 2729 3a0a 2020 2020 2020 2020  imit'):.        
-0002b490: 2020 2020 7261 6973 6520 4172 6775 6d65      raise Argume
-0002b4a0: 6e74 7352 6571 7569 7265 6428 7365 6c66  ntsRequired(self
-0002b4b0: 2e69 6420 2b20 2720 6372 6561 7465 4f72  .id + ' createOr
-0002b4c0: 6465 7220 7265 7175 6972 6573 2061 2070  der requires a p
-0002b4d0: 7269 6365 2061 7267 756d 656e 7420 666f  rice argument fo
-0002b4e0: 7220 6c69 6d69 7420 6f72 6465 7273 2729  r limit orders')
-0002b4f0: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
-0002b500: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-0002b510: 2027 7379 6d62 6f6c 273a 206d 6172 6b65   'symbol': marke
-0002b520: 745b 2769 6427 5d2c 0a20 2020 2020 2020  t['id'],.       
-0002b530: 2020 2020 2027 7369 6465 273a 2073 656c       'side': sel
-0002b540: 662e 6361 7069 7461 6c69 7a65 2873 6964  f.capitalize(sid
-0002b550: 6529 2c0a 2020 2020 2020 2020 2020 2020  e),.            
-0002b560: 276f 7264 6572 5479 7065 273a 2073 656c  'orderType': sel
-0002b570: 662e 6361 7069 7461 6c69 7a65 286c 6f77  f.capitalize(low
-0002b580: 6572 4361 7365 5479 7065 292c 2020 2320  erCaseType),  # 
-0002b590: 6c69 6d69 7420 6f72 206d 6172 6b65 740a  limit or market.
-0002b5a0: 2020 2020 2020 2020 2020 2020 2320 2774              # 't
-0002b5b0: 696d 6549 6e46 6f72 6365 273a 2027 4754  imeInForce': 'GT
-0002b5c0: 4327 2c20 2023 2049 4f43 2c20 464f 4b2c  C',  # IOC, FOK,
-0002b5d0: 2050 6f73 744f 6e6c 790a 2020 2020 2020   PostOnly.      
-0002b5e0: 2020 2020 2020 2320 2774 616b 6550 726f        # 'takePro
-0002b5f0: 6669 7427 3a20 3132 332e 3435 2c20 2023  fit': 123.45,  #
-0002b600: 2074 616b 6520 7072 6f66 6974 2070 7269   take profit pri
-0002b610: 6365 2c20 6f6e 6c79 2074 616b 6520 6566  ce, only take ef
-0002b620: 6665 6374 2075 706f 6e20 6f70 656e 696e  fect upon openin
-0002b630: 6720 7468 6520 706f 7369 7469 6f6e 0a20  g the position. 
-0002b640: 2020 2020 2020 2020 2020 2023 2027 7374             # 'st
-0002b650: 6f70 4c6f 7373 273a 2031 3233 2e34 352c  opLoss': 123.45,
-0002b660: 2020 2320 7374 6f70 206c 6f73 7320 7072    # stop loss pr
-0002b670: 6963 652c 206f 6e6c 7920 7461 6b65 2065  ice, only take e
-0002b680: 6666 6563 7420 7570 6f6e 206f 7065 6e69  ffect upon openi
-0002b690: 6e67 2074 6865 2070 6f73 6974 696f 6e0a  ng the position.
-0002b6a0: 2020 2020 2020 2020 2020 2020 2320 2772              # 'r
-0002b6b0: 6564 7563 654f 6e6c 7927 3a20 4661 6c73  educeOnly': Fals
-0002b6c0: 652c 2020 2320 7265 6475 6365 206f 6e6c  e,  # reduce onl
-0002b6d0: 792c 2072 6571 7569 7265 6420 666f 7220  y, required for 
-0002b6e0: 6c69 6e65 6172 206f 7264 6572 730a 2020  linear orders.  
-0002b6f0: 2020 2020 2020 2020 2020 2320 7768 656e            # when
-0002b700: 2063 7265 6174 696e 6720 6120 636c 6f73   creating a clos
-0002b710: 696e 6720 6f72 6465 722c 2062 7962 6974  ing order, bybit
-0002b720: 2072 6563 6f6d 6d65 6e64 7320 6120 5472   recommends a Tr
-0002b730: 7565 2076 616c 7565 2066 6f72 0a20 2020  ue value for.   
-0002b740: 2020 2020 2020 2020 2023 2020 636c 6f73           #  clos
-0002b750: 654f 6e54 7269 6767 6572 2074 6f20 6176  eOnTrigger to av
-0002b760: 6f69 6420 6661 696c 696e 6720 6475 6520  oid failing due 
-0002b770: 746f 2069 6e73 7566 6669 6369 656e 7420  to insufficient 
-0002b780: 6176 6169 6c61 626c 6520 6d61 7267 696e  available margin
-0002b790: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
-0002b7a0: 636c 6f73 654f 6e54 7269 6767 6572 273a  closeOnTrigger':
-0002b7b0: 2046 616c 7365 2c20 7265 7175 6972 6564   False, required
-0002b7c0: 2066 6f72 206c 696e 6561 7220 6f72 6465   for linear orde
-0002b7d0: 7273 0a20 2020 2020 2020 2020 2020 2023  rs.            #
-0002b7e0: 2027 6f72 6465 724c 696e 6b49 6427 3a20   'orderLinkId': 
-0002b7f0: 2773 7472 696e 6727 2c20 2023 2075 6e69  'string',  # uni
-0002b800: 7175 6520 636c 6965 6e74 206f 7264 6572  que client order
-0002b810: 2069 642c 206d 6178 2033 3620 6368 6172   id, max 36 char
-0002b820: 6163 7465 7273 0a20 2020 2020 2020 2020  acters.         
-0002b830: 2020 2023 2027 7472 6967 6765 7250 7269     # 'triggerPri
-0002b840: 6365 273a 2031 3233 2e34 352c 2020 2320  ce': 123.45,  # 
-0002b850: 7472 6967 6765 7220 7072 6963 652c 2072  trigger price, r
-0002b860: 6571 7569 7265 6420 666f 7220 636f 6e64  equired for cond
-0002b870: 6974 696f 6e61 6c20 6f72 6465 7273 0a20  itional orders. 
-0002b880: 2020 2020 2020 2020 2020 2023 2027 7472             # 'tr
-0002b890: 6967 6765 7242 7927 3a20 274d 6172 6b50  iggerBy': 'MarkP
-0002b8a0: 7269 6365 272c 2020 2320 496e 6465 7850  rice',  # IndexP
-0002b8b0: 7269 6365 2c20 4d61 726b 5072 6963 652c  rice, MarkPrice,
-0002b8c0: 204c 6173 7450 7269 6365 0a20 2020 2020   LastPrice.     
-0002b8d0: 2020 2020 2020 2023 2027 7470 5472 6967         # 'tpTrig
-0002b8e0: 6765 7262 7927 3a20 274d 6172 6b50 7269  gerby': 'MarkPri
-0002b8f0: 6365 272c 2020 2320 496e 6465 7850 7269  ce',  # IndexPri
-0002b900: 6365 2c20 4d61 726b 5072 6963 652c 204c  ce, MarkPrice, L
-0002b910: 6173 7450 7269 6365 0a20 2020 2020 2020  astPrice.       
-0002b920: 2020 2020 2023 2027 736c 5472 6967 6765       # 'slTrigge
-0002b930: 7242 7927 3a20 274d 6172 6b50 7269 6365  rBy': 'MarkPrice
-0002b940: 272c 2020 2320 496e 6465 7850 7269 6365  ',  # IndexPrice
-0002b950: 2c20 4d61 726b 5072 6963 652c 204c 6173  , MarkPrice, Las
-0002b960: 7450 7269 6365 0a20 2020 2020 2020 2020  tPrice.         
-0002b970: 2020 2023 2027 6d6d 7027 3a20 4661 6c73     # 'mmp': Fals
-0002b980: 6520 2023 206d 6172 6b65 7420 6d61 6b65  e  # market make
-0002b990: 7220 7072 6f74 6563 7469 6f6e 0a20 2020  r protection.   
-0002b9a0: 2020 2020 2020 2020 2023 2027 706f 7369           # 'posi
-0002b9b0: 7469 6f6e 4964 7827 3a20 302c 2020 2320  tionIdx': 0,  # 
-0002b9c0: 506f 7369 7469 6f6e 206d 6f64 652e 2055  Position mode. U
-0002b9d0: 6e69 6669 6564 2061 6363 6f75 6e74 2068  nified account h
-0002b9e0: 6173 206f 6e65 2d77 6179 206d 6f64 6520  as one-way mode 
-0002b9f0: 6f6e 6c79 2830 290a 2020 2020 2020 2020  only(0).        
-0002ba00: 2020 2020 2320 2774 7269 6767 6572 4469      # 'triggerDi
-0002ba10: 7265 6374 696f 6e27 3a20 312c 2020 2320  rection': 1,  # 
-0002ba20: 436f 6e64 6974 696f 6e61 6c20 6f72 6465  Conditional orde
-0002ba30: 7220 7061 7261 6d2e 2055 7365 6420 746f  r param. Used to
-0002ba40: 2069 6465 6e74 6966 7920 7468 6520 6578   identify the ex
-0002ba50: 7065 6374 6564 2064 6972 6563 7469 6f6e  pected direction
-0002ba60: 206f 6620 7468 6520 636f 6e64 6974 696f   of the conditio
-0002ba70: 6e61 6c20 6f72 6465 722e 2031 3a20 7472  nal order. 1: tr
-0002ba80: 6967 6765 7265 6420 7768 656e 206d 6172  iggered when mar
-0002ba90: 6b65 7420 7072 6963 6520 7269 7365 7320  ket price rises 
-0002baa0: 746f 2074 7269 6767 6572 5072 6963 6520  to triggerPrice 
-0002bab0: 323a 2074 7269 6767 6572 6564 2077 6865  2: triggered whe
-0002bac0: 6e20 6d61 726b 6574 2070 7269 6365 2066  n market price f
-0002bad0: 616c 6c73 2074 6f20 7472 6967 6765 7250  alls to triggerP
-0002bae0: 7269 6365 0a20 2020 2020 2020 2020 2020  rice.           
-0002baf0: 2023 2056 616c 6964 2066 6f72 2073 706f   # Valid for spo
-0002bb00: 7420 6f6e 6c79 2e0a 2020 2020 2020 2020  t only..        
-0002bb10: 2020 2020 2320 2769 734c 6576 6572 6167      # 'isLeverag
-0002bb20: 6527 3a20 302c 2020 2320 5768 6574 6865  e': 0,  # Whethe
-0002bb30: 7220 746f 2062 6f72 726f 772e 2030 2864  r to borrow. 0(d
-0002bb40: 6566 6175 6c74 293a 2046 616c 7365 2c20  efault): False, 
-0002bb50: 313a 2054 7275 650a 2020 2020 2020 2020  1: True.        
-0002bb60: 2020 2020 2320 276f 7264 6572 4669 6c74      # 'orderFilt
-0002bb70: 6572 273a 2027 4f72 6465 7227 2020 2320  er': 'Order'  # 
-0002bb80: 4f72 6465 722c 7470 736c 4f72 6465 722e  Order,tpslOrder.
-0002bb90: 2049 6620 6e6f 7420 7061 7373 6564 2c20   If not passed, 
-0002bba0: 4f72 6465 7220 6279 2064 6566 6175 6c74  Order by default
-0002bbb0: 0a20 2020 2020 2020 2020 2020 2023 2056  .            # V
-0002bbc0: 616c 6964 2066 6f72 206f 7074 696f 6e20  alid for option 
-0002bbd0: 6f6e 6c79 2e0a 2020 2020 2020 2020 2020  only..          
-0002bbe0: 2020 2320 276f 7264 6572 4976 273a 2027    # 'orderIv': '
-0002bbf0: 3027 2c20 2023 2049 6d70 6c69 6564 2076  0',  # Implied v
-0002bc00: 6f6c 6174 696c 6974 793b 2070 6172 616d  olatility; param
-0002bc10: 6574 6572 7320 6172 6520 7061 7373 6564  eters are passed
-0002bc20: 2061 6363 6f72 6469 6e67 2074 6f20 7468   according to th
-0002bc30: 6520 7265 616c 2076 616c 7565 3b20 666f  e real value; fo
-0002bc40: 7220 6578 616d 706c 652c 2066 6f72 2031  r example, for 1
-0002bc50: 3025 2c20 302e 3120 6973 2070 6173 7365  0%, 0.1 is passe
-0002bc60: 640a 2020 2020 2020 2020 7d0a 2020 2020  d.        }.    
-0002bc70: 2020 2020 6966 206d 6172 6b65 745b 2773      if market['s
-0002bc80: 706f 7427 5d3a 0a20 2020 2020 2020 2020  pot']:.         
-0002bc90: 2020 2072 6571 7565 7374 5b27 6361 7465     request['cate
-0002bca0: 676f 7279 275d 203d 2027 7370 6f74 270a  gory'] = 'spot'.
-0002bcb0: 2020 2020 2020 2020 656c 6966 206d 6172          elif mar
-0002bcc0: 6b65 745b 276c 696e 6561 7227 5d3a 0a20  ket['linear']:. 
-0002bcd0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-0002bce0: 7374 5b27 6361 7465 676f 7279 275d 203d  st['category'] =
-0002bcf0: 2027 6c69 6e65 6172 270a 2020 2020 2020   'linear'.      
-0002bd00: 2020 656c 6966 206d 6172 6b65 745b 276f    elif market['o
-0002bd10: 7074 696f 6e27 5d3a 0a20 2020 2020 2020  ption']:.       
-0002bd20: 2020 2020 2072 6571 7565 7374 5b27 6361       request['ca
-0002bd30: 7465 676f 7279 275d 203d 2027 6f70 7469  tegory'] = 'opti
-0002bd40: 6f6e 270a 2020 2020 2020 2020 656c 7365  on'.        else
-0002bd50: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-0002bd60: 6973 6520 4e6f 7453 7570 706f 7274 6564  ise NotSupported
-0002bd70: 2873 656c 662e 6964 202b 2027 2063 7265  (self.id + ' cre
-0002bd80: 6174 654f 7264 6572 2064 6f65 7320 6e6f  ateOrder does no
-0002bd90: 7420 616c 6c6f 7720 696e 7665 7273 6520  t allow inverse 
-0002bda0: 6d61 726b 6574 206f 7264 6572 7320 666f  market orders fo
-0002bdb0: 7220 2720 2b20 7379 6d62 6f6c 202b 2027  r ' + symbol + '
-0002bdc0: 206d 6172 6b65 7473 2729 0a20 2020 2020   markets').     
-0002bdd0: 2020 2069 6620 6d61 726b 6574 5b27 7370     if market['sp
-0002bde0: 6f74 275d 2061 6e64 2028 7479 7065 203d  ot'] and (type =
-0002bdf0: 3d20 276d 6172 6b65 7427 2920 616e 6420  = 'market') and 
-0002be00: 2873 6964 6520 3d3d 2027 6275 7927 293a  (side == 'buy'):
-0002be10: 0a20 2020 2020 2020 2020 2020 2023 2066  .            # f
-0002be20: 6f72 206d 6172 6b65 7420 6275 7920 6974  or market buy it
-0002be30: 2072 6571 7569 7265 7320 7468 6520 616d   requires the am
-0002be40: 6f75 6e74 206f 6620 7175 6f74 6520 6375  ount of quote cu
-0002be50: 7272 656e 6379 2074 6f20 7370 656e 640a  rrency to spend.
-0002be60: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-0002be70: 656c 662e 6f70 7469 6f6e 735b 2763 7265  elf.options['cre
-0002be80: 6174 654d 6172 6b65 7442 7579 4f72 6465  ateMarketBuyOrde
-0002be90: 7252 6571 7569 7265 7350 7269 6365 275d  rRequiresPrice']
-0002bea0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0002beb0: 2020 636f 7374 203d 2073 656c 662e 7361    cost = self.sa
-0002bec0: 6665 5f6e 756d 6265 7228 7061 7261 6d73  fe_number(params
-0002bed0: 2c20 2763 6f73 7427 290a 2020 2020 2020  , 'cost').      
-0002bee0: 2020 2020 2020 2020 2020 7061 7261 6d73            params
-0002bef0: 203d 2073 656c 662e 6f6d 6974 2870 6172   = self.omit(par
-0002bf00: 616d 732c 2027 636f 7374 2729 0a20 2020  ams, 'cost').   
-0002bf10: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0002bf20: 7072 6963 6520 6973 204e 6f6e 6520 616e  price is None an
-0002bf30: 6420 636f 7374 2069 7320 4e6f 6e65 3a0a  d cost is None:.
-0002bf40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bf50: 2020 2020 7261 6973 6520 496e 7661 6c69      raise Invali
-0002bf60: 644f 7264 6572 2873 656c 662e 6964 202b  dOrder(self.id +
-0002bf70: 2022 2063 7265 6174 654f 7264 6572 2829   " createOrder()
-0002bf80: 2072 6571 7569 7265 7320 7468 6520 7072   requires the pr
-0002bf90: 6963 6520 6172 6775 6d65 6e74 2077 6974  ice argument wit
-0002bfa0: 6820 6d61 726b 6574 2062 7579 206f 7264  h market buy ord
-0002bfb0: 6572 7320 746f 2063 616c 6375 6c61 7465  ers to calculate
-0002bfc0: 2074 6f74 616c 206f 7264 6572 2063 6f73   total order cos
-0002bfd0: 7428 616d 6f75 6e74 2074 6f20 7370 656e  t(amount to spen
-0002bfe0: 6429 2c20 7768 6572 6520 636f 7374 203d  d), where cost =
-0002bff0: 2061 6d6f 756e 7420 2a20 7072 6963 652e   amount * price.
-0002c000: 2053 7570 706c 7920 6120 7072 6963 6520   Supply a price 
-0002c010: 6172 6775 6d65 6e74 2074 6f20 6372 6561  argument to crea
-0002c020: 7465 4f72 6465 7228 2920 6361 6c6c 2069  teOrder() call i
-0002c030: 6620 796f 7520 7761 6e74 2074 6865 2063  f you want the c
-0002c040: 6f73 7420 746f 2062 6520 6361 6c63 756c  ost to be calcul
-0002c050: 6174 6564 2066 6f72 2079 6f75 2066 726f  ated for you fro
-0002c060: 6d20 7072 6963 6520 616e 6420 616d 6f75  m price and amou
-0002c070: 6e74 2c20 6f72 2c20 616c 7465 726e 6174  nt, or, alternat
-0002c080: 6976 656c 792c 2061 6464 202e 6f70 7469  ively, add .opti
-0002c090: 6f6e 735b 2763 7265 6174 654d 6172 6b65  ons['createMarke
-0002c0a0: 7442 7579 4f72 6465 7252 6571 7569 7265  tBuyOrderRequire
-0002c0b0: 7350 7269 6365 275d 203d 2046 616c 7365  sPrice'] = False
-0002c0c0: 2074 6f20 7375 7070 6c79 2074 6865 2063   to supply the c
-0002c0d0: 6f73 7420 696e 2074 6865 2061 6d6f 756e  ost in the amoun
-0002c0e0: 7420 6172 6775 6d65 6e74 2874 6865 2065  t argument(the e
-0002c0f0: 7863 6861 6e67 652d 7370 6563 6966 6963  xchange-specific
-0002c100: 2062 6568 6176 696f 7572 2922 290a 2020   behaviour)").  
-0002c110: 2020 2020 2020 2020 2020 2020 2020 656c                el
-0002c120: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0002c130: 2020 2020 2020 2020 616d 6f75 6e74 5374          amountSt
-0002c140: 7269 6e67 203d 2073 656c 662e 6e75 6d62  ring = self.numb
-0002c150: 6572 5f74 6f5f 7374 7269 6e67 2861 6d6f  er_to_string(amo
-0002c160: 756e 7429 0a20 2020 2020 2020 2020 2020  unt).           
-0002c170: 2020 2020 2020 2020 2070 7269 6365 5374           priceSt
-0002c180: 7269 6e67 203d 2073 656c 662e 6e75 6d62  ring = self.numb
-0002c190: 6572 5f74 6f5f 7374 7269 6e67 2870 7269  er_to_string(pri
-0002c1a0: 6365 290a 2020 2020 2020 2020 2020 2020  ce).            
-0002c1b0: 2020 2020 2020 2020 7175 6f74 6541 6d6f          quoteAmo
-0002c1c0: 756e 7420 3d20 5072 6563 6973 652e 7374  unt = Precise.st
-0002c1d0: 7269 6e67 5f6d 756c 2861 6d6f 756e 7453  ring_mul(amountS
-0002c1e0: 7472 696e 672c 2070 7269 6365 5374 7269  tring, priceStri
-0002c1f0: 6e67 290a 2020 2020 2020 2020 2020 2020  ng).            
-0002c200: 2020 2020 2020 2020 616d 6f75 6e74 203d          amount =
-0002c210: 2063 6f73 7420 6966 2028 636f 7374 2069   cost if (cost i
-0002c220: 7320 6e6f 7420 4e6f 6e65 2920 656c 7365  s not None) else
-0002c230: 2073 656c 662e 7061 7273 655f 6e75 6d62   self.parse_numb
-0002c240: 6572 2871 756f 7465 416d 6f75 6e74 290a  er(quoteAmount).
-0002c250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c260: 2020 2020 7265 7175 6573 745b 2771 7479      request['qty
-0002c270: 275d 203d 2073 656c 662e 636f 7374 5f74  '] = self.cost_t
-0002c280: 6f5f 7072 6563 6973 696f 6e28 7379 6d62  o_precision(symb
-0002c290: 6f6c 2c20 616d 6f75 6e74 290a 2020 2020  ol, amount).    
-0002c2a0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0002c2b0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0002c2c0: 7175 6573 745b 2771 7479 275d 203d 2073  quest['qty'] = s
-0002c2d0: 656c 662e 636f 7374 5f74 6f5f 7072 6563  elf.cost_to_prec
-0002c2e0: 6973 696f 6e28 7379 6d62 6f6c 2c20 616d  ision(symbol, am
-0002c2f0: 6f75 6e74 290a 2020 2020 2020 2020 656c  ount).        el
-0002c300: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0002c310: 7265 7175 6573 745b 2771 7479 275d 203d  request['qty'] =
-0002c320: 2073 656c 662e 616d 6f75 6e74 5f74 6f5f   self.amount_to_
-0002c330: 7072 6563 6973 696f 6e28 7379 6d62 6f6c  precision(symbol
-0002c340: 2c20 616d 6f75 6e74 290a 2020 2020 2020  , amount).      
-0002c350: 2020 6973 4d61 726b 6574 203d 206c 6f77    isMarket = low
-0002c360: 6572 4361 7365 5479 7065 203d 3d20 276d  erCaseType == 'm
-0002c370: 6172 6b65 7427 0a20 2020 2020 2020 2069  arket'.        i
-0002c380: 734c 696d 6974 203d 206c 6f77 6572 4361  sLimit = lowerCa
-0002c390: 7365 5479 7065 203d 3d20 276c 696d 6974  seType == 'limit
-0002c3a0: 270a 2020 2020 2020 2020 6966 2069 734c  '.        if isL
-0002c3b0: 696d 6974 3a0a 2020 2020 2020 2020 2020  imit:.          
-0002c3c0: 2020 7265 7175 6573 745b 2770 7269 6365    request['price
-0002c3d0: 275d 203d 2073 656c 662e 7072 6963 655f  '] = self.price_
-0002c3e0: 746f 5f70 7265 6369 7369 6f6e 2873 796d  to_precision(sym
-0002c3f0: 626f 6c2c 2070 7269 6365 290a 2020 2020  bol, price).    
-0002c400: 2020 2020 7469 6d65 496e 466f 7263 6520      timeInForce 
-0002c410: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-0002c420: 6e67 5f6c 6f77 6572 2870 6172 616d 732c  ng_lower(params,
-0002c430: 2027 7469 6d65 496e 466f 7263 6527 2920   'timeInForce') 
-0002c440: 2023 2073 656c 6620 6973 2073 616d 6520   # self is same 
-0002c450: 7370 6563 6966 6963 2070 6172 616d 0a20  specific param. 
-0002c460: 2020 2020 2020 2070 6f73 744f 6e6c 7920         postOnly 
-0002c470: 3d20 4e6f 6e65 0a20 2020 2020 2020 2070  = None.        p
-0002c480: 6f73 744f 6e6c 792c 2070 6172 616d 7320  ostOnly, params 
-0002c490: 3d20 7365 6c66 2e68 616e 646c 655f 706f  = self.handle_po
-0002c4a0: 7374 5f6f 6e6c 7928 6973 4d61 726b 6574  st_only(isMarket
-0002c4b0: 2c20 7469 6d65 496e 466f 7263 6520 3d3d  , timeInForce ==
-0002c4c0: 2027 506f 7374 4f6e 6c79 272c 2070 6172   'PostOnly', par
-0002c4d0: 616d 7329 0a20 2020 2020 2020 2069 6620  ams).        if 
-0002c4e0: 706f 7374 4f6e 6c79 3a0a 2020 2020 2020  postOnly:.      
-0002c4f0: 2020 2020 2020 7265 7175 6573 745b 2774        request['t
-0002c500: 696d 6549 6e46 6f72 6365 275d 203d 2027  imeInForce'] = '
-0002c510: 506f 7374 4f6e 6c79 270a 2020 2020 2020  PostOnly'.      
-0002c520: 2020 656c 6966 2074 696d 6549 6e46 6f72    elif timeInFor
-0002c530: 6365 203d 3d20 2767 7463 273a 0a20 2020  ce == 'gtc':.   
-0002c540: 2020 2020 2020 2020 2072 6571 7565 7374           request
-0002c550: 5b27 7469 6d65 496e 466f 7263 6527 5d20  ['timeInForce'] 
-0002c560: 3d20 2747 5443 270a 2020 2020 2020 2020  = 'GTC'.        
-0002c570: 656c 6966 2074 696d 6549 6e46 6f72 6365  elif timeInForce
-0002c580: 203d 3d20 2766 6f6b 273a 0a20 2020 2020   == 'fok':.     
-0002c590: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-0002c5a0: 7469 6d65 496e 466f 7263 6527 5d20 3d20  timeInForce'] = 
-0002c5b0: 2746 4f4b 270a 2020 2020 2020 2020 656c  'FOK'.        el
-0002c5c0: 6966 2074 696d 6549 6e46 6f72 6365 203d  if timeInForce =
-0002c5d0: 3d20 2769 6f63 273a 0a20 2020 2020 2020  = 'ioc':.       
-0002c5e0: 2020 2020 2072 6571 7565 7374 5b27 7469       request['ti
-0002c5f0: 6d65 496e 466f 7263 6527 5d20 3d20 2749  meInForce'] = 'I
-0002c600: 4f43 270a 2020 2020 2020 2020 7472 6967  OC'.        trig
-0002c610: 6765 7250 7269 6365 203d 2073 656c 662e  gerPrice = self.
-0002c620: 7361 6665 5f6e 756d 6265 725f 3228 7061  safe_number_2(pa
-0002c630: 7261 6d73 2c20 2774 7269 6767 6572 5072  rams, 'triggerPr
-0002c640: 6963 6527 2c20 2773 746f 7050 7269 6365  ice', 'stopPrice
-0002c650: 2729 0a20 2020 2020 2020 2073 746f 704c  ').        stopL
-0002c660: 6f73 7354 7269 6767 6572 5072 6963 6520  ossTriggerPrice 
-0002c670: 3d20 7365 6c66 2e73 6166 655f 6e75 6d62  = self.safe_numb
-0002c680: 6572 2870 6172 616d 732c 2027 7374 6f70  er(params, 'stop
-0002c690: 4c6f 7373 5072 6963 6527 290a 2020 2020  LossPrice').    
-0002c6a0: 2020 2020 7461 6b65 5072 6f66 6974 5472      takeProfitTr
-0002c6b0: 6967 6765 7250 7269 6365 203d 2073 656c  iggerPrice = sel
-0002c6c0: 662e 7361 6665 5f6e 756d 6265 7228 7061  f.safe_number(pa
-0002c6d0: 7261 6d73 2c20 2774 616b 6550 726f 6669  rams, 'takeProfi
-0002c6e0: 7450 7269 6365 2729 0a20 2020 2020 2020  tPrice').       
-0002c6f0: 2073 746f 704c 6f73 7320 3d20 7365 6c66   stopLoss = self
-0002c700: 2e73 6166 655f 6e75 6d62 6572 2870 6172  .safe_number(par
-0002c710: 616d 732c 2027 7374 6f70 4c6f 7373 2729  ams, 'stopLoss')
-0002c720: 0a20 2020 2020 2020 2074 616b 6550 726f  .        takePro
-0002c730: 6669 7420 3d20 7365 6c66 2e73 6166 655f  fit = self.safe_
-0002c740: 6e75 6d62 6572 2870 6172 616d 732c 2027  number(params, '
-0002c750: 7461 6b65 5072 6f66 6974 2729 0a20 2020  takeProfit').   
-0002c760: 2020 2020 2069 7353 746f 704c 6f73 7354       isStopLossT
-0002c770: 7269 6767 6572 4f72 6465 7220 3d20 7374  riggerOrder = st
-0002c780: 6f70 4c6f 7373 5472 6967 6765 7250 7269  opLossTriggerPri
-0002c790: 6365 2069 7320 6e6f 7420 4e6f 6e65 0a20  ce is not None. 
-0002c7a0: 2020 2020 2020 2069 7354 616b 6550 726f         isTakePro
-0002c7b0: 6669 7454 7269 6767 6572 4f72 6465 7220  fitTriggerOrder 
-0002c7c0: 3d20 7461 6b65 5072 6f66 6974 5472 6967  = takeProfitTrig
-0002c7d0: 6765 7250 7269 6365 2069 7320 6e6f 7420  gerPrice is not 
-0002c7e0: 4e6f 6e65 0a20 2020 2020 2020 2069 7353  None.        isS
-0002c7f0: 746f 704c 6f73 7320 3d20 7374 6f70 4c6f  topLoss = stopLo
-0002c800: 7373 2069 7320 6e6f 7420 4e6f 6e65 0a20  ss is not None. 
-0002c810: 2020 2020 2020 2069 7354 616b 6550 726f         isTakePro
-0002c820: 6669 7420 3d20 7461 6b65 5072 6f66 6974  fit = takeProfit
-0002c830: 2069 7320 6e6f 7420 4e6f 6e65 0a20 2020   is not None.   
-0002c840: 2020 2020 2069 7342 7579 203d 2073 6964       isBuy = sid
-0002c850: 6520 3d3d 2027 6275 7927 0a20 2020 2020  e == 'buy'.     
-0002c860: 2020 2061 7363 656e 6469 6e67 203d 206e     ascending = n
-0002c870: 6f74 2069 7342 7579 2069 6620 7374 6f70  ot isBuy if stop
-0002c880: 4c6f 7373 5472 6967 6765 7250 7269 6365  LossTriggerPrice
-0002c890: 2065 6c73 6520 6973 4275 790a 2020 2020   else isBuy.    
-0002c8a0: 2020 2020 6966 2074 7269 6767 6572 5072      if triggerPr
-0002c8b0: 6963 6520 6973 206e 6f74 204e 6f6e 653a  ice is not None:
-0002c8c0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-0002c8d0: 7565 7374 5b27 7472 6967 6765 7244 6972  uest['triggerDir
-0002c8e0: 6563 7469 6f6e 275d 203d 2032 2069 6620  ection'] = 2 if 
-0002c8f0: 6173 6365 6e64 696e 6720 656c 7365 2031  ascending else 1
-0002c900: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-0002c910: 7565 7374 5b27 7472 6967 6765 7250 7269  uest['triggerPri
-0002c920: 6365 275d 203d 2073 656c 662e 7072 6963  ce'] = self.pric
-0002c930: 655f 746f 5f70 7265 6369 7369 6f6e 2873  e_to_precision(s
-0002c940: 796d 626f 6c2c 2074 7269 6767 6572 5072  ymbol, triggerPr
-0002c950: 6963 6529 0a20 2020 2020 2020 2065 6c69  ice).        eli
-0002c960: 6620 6973 5374 6f70 4c6f 7373 5472 6967  f isStopLossTrig
-0002c970: 6765 724f 7264 6572 206f 7220 6973 5461  gerOrder or isTa
-0002c980: 6b65 5072 6f66 6974 5472 6967 6765 724f  keProfitTriggerO
-0002c990: 7264 6572 3a0a 2020 2020 2020 2020 2020  rder:.          
-0002c9a0: 2020 7265 7175 6573 745b 2774 7269 6767    request['trigg
-0002c9b0: 6572 4469 7265 6374 696f 6e27 5d20 3d20  erDirection'] = 
-0002c9c0: 3220 6966 2061 7363 656e 6469 6e67 2065  2 if ascending e
-0002c9d0: 6c73 6520 310a 2020 2020 2020 2020 2020  lse 1.          
-0002c9e0: 2020 7472 6967 6765 7250 7269 6365 203d    triggerPrice =
-0002c9f0: 2073 746f 704c 6f73 7354 7269 6767 6572   stopLossTrigger
-0002ca00: 5072 6963 6520 6966 2069 7353 746f 704c  Price if isStopL
-0002ca10: 6f73 7354 7269 6767 6572 4f72 6465 7220  ossTriggerOrder 
-0002ca20: 656c 7365 2074 616b 6550 726f 6669 7454  else takeProfitT
-0002ca30: 7269 6767 6572 5072 6963 650a 2020 2020  riggerPrice.    
-0002ca40: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0002ca50: 2774 7269 6767 6572 5072 6963 6527 5d20  'triggerPrice'] 
-0002ca60: 3d20 7365 6c66 2e70 7269 6365 5f74 6f5f  = self.price_to_
-0002ca70: 7072 6563 6973 696f 6e28 7379 6d62 6f6c  precision(symbol
-0002ca80: 2c20 7472 6967 6765 7250 7269 6365 290a  , triggerPrice).
-0002ca90: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-0002caa0: 6573 745b 2772 6564 7563 654f 6e6c 7927  est['reduceOnly'
-0002cab0: 5d20 3d20 5472 7565 0a20 2020 2020 2020  ] = True.       
-0002cac0: 2065 6c69 6620 6973 5374 6f70 4c6f 7373   elif isStopLoss
-0002cad0: 206f 7220 6973 5461 6b65 5072 6f66 6974   or isTakeProfit
-0002cae0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-0002caf0: 2069 7353 746f 704c 6f73 733a 0a20 2020   isStopLoss:.   
-0002cb00: 2020 2020 2020 2020 2020 2020 2072 6571               req
-0002cb10: 7565 7374 5b27 7374 6f70 4c6f 7373 275d  uest['stopLoss']
-0002cb20: 203d 2073 656c 662e 7072 6963 655f 746f   = self.price_to
-0002cb30: 5f70 7265 6369 7369 6f6e 2873 796d 626f  _precision(symbo
-0002cb40: 6c2c 2073 746f 704c 6f73 7329 0a20 2020  l, stopLoss).   
-0002cb50: 2020 2020 2020 2020 2069 6620 6973 5461           if isTa
-0002cb60: 6b65 5072 6f66 6974 3a0a 2020 2020 2020  keProfit:.      
-0002cb70: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-0002cb80: 745b 2774 616b 6550 726f 6669 7427 5d20  t['takeProfit'] 
-0002cb90: 3d20 7365 6c66 2e70 7269 6365 5f74 6f5f  = self.price_to_
-0002cba0: 7072 6563 6973 696f 6e28 7379 6d62 6f6c  precision(symbol
-0002cbb0: 2c20 7461 6b65 5072 6f66 6974 290a 2020  , takeProfit).  
-0002cbc0: 2020 2020 2020 6966 206d 6172 6b65 745b        if market[
-0002cbd0: 2773 706f 7427 5d3a 0a20 2020 2020 2020  'spot']:.       
-0002cbe0: 2020 2020 2023 206f 6e6c 7920 776f 726b       # only work
-0002cbf0: 7320 666f 7220 7370 6f74 206d 6172 6b65  s for spot marke
-0002cc00: 740a 2020 2020 2020 2020 2020 2020 6966  t.            if
-0002cc10: 2074 7269 6767 6572 5072 6963 6520 6973   triggerPrice is
-0002cc20: 206e 6f74 204e 6f6e 6520 6f72 2073 746f   not None or sto
-0002cc30: 704c 6f73 7354 7269 6767 6572 5072 6963  pLossTriggerPric
-0002cc40: 6520 6973 206e 6f74 204e 6f6e 6520 6f72  e is not None or
-0002cc50: 2074 616b 6550 726f 6669 7454 7269 6767   takeProfitTrigg
-0002cc60: 6572 5072 6963 6520 6973 206e 6f74 204e  erPrice is not N
-0002cc70: 6f6e 6520 6f72 2069 7353 746f 704c 6f73  one or isStopLos
-0002cc80: 7320 6f72 2069 7354 616b 6550 726f 6669  s or isTakeProfi
-0002cc90: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-0002cca0: 2020 2072 6571 7565 7374 5b27 6f72 6465     request['orde
-0002ccb0: 7246 696c 7465 7227 5d20 3d20 2774 7073  rFilter'] = 'tps
-0002ccc0: 6c4f 7264 6572 270a 2020 2020 2020 2020  lOrder'.        
-0002ccd0: 636c 6965 6e74 4f72 6465 7249 6420 3d20  clientOrderId = 
-0002cce0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0002ccf0: 2870 6172 616d 732c 2027 636c 6965 6e74  (params, 'client
-0002cd00: 4f72 6465 7249 6427 290a 2020 2020 2020  OrderId').      
-0002cd10: 2020 6966 2063 6c69 656e 744f 7264 6572    if clientOrder
-0002cd20: 4964 2069 7320 6e6f 7420 4e6f 6e65 3a0a  Id is not None:.
-0002cd30: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-0002cd40: 6573 745b 276f 7264 6572 4c69 6e6b 4964  est['orderLinkId
-0002cd50: 275d 203d 2063 6c69 656e 744f 7264 6572  '] = clientOrder
-0002cd60: 4964 0a20 2020 2020 2020 2065 6c69 6620  Id.        elif 
-0002cd70: 6d61 726b 6574 5b27 6f70 7469 6f6e 275d  market['option']
-0002cd80: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
-0002cd90: 6d61 6e64 6174 6f72 7920 6669 656c 6420  mandatory field 
-0002cda0: 666f 7220 6f70 7469 6f6e 730a 2020 2020  for options.    
-0002cdb0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0002cdc0: 276f 7264 6572 4c69 6e6b 4964 275d 203d  'orderLinkId'] =
-0002cdd0: 2073 656c 662e 7575 6964 3136 2829 0a20   self.uuid16(). 
-0002cde0: 2020 2020 2020 2070 6172 616d 7320 3d20         params = 
-0002cdf0: 7365 6c66 2e6f 6d69 7428 7061 7261 6d73  self.omit(params
-0002ce00: 2c20 5b27 7374 6f70 5072 6963 6527 2c20  , ['stopPrice', 
-0002ce10: 2774 696d 6549 6e46 6f72 6365 272c 2027  'timeInForce', '
-0002ce20: 7374 6f70 4c6f 7373 5072 6963 6527 2c20  stopLossPrice', 
-0002ce30: 2774 616b 6550 726f 6669 7450 7269 6365  'takeProfitPrice
-0002ce40: 272c 2027 706f 7374 4f6e 6c79 272c 2027  ', 'postOnly', '
-0002ce50: 636c 6965 6e74 4f72 6465 7249 6427 2c20  clientOrderId', 
-0002ce60: 2774 7269 6767 6572 5072 6963 6527 2c20  'triggerPrice', 
-0002ce70: 2773 746f 704c 6f73 7327 2c20 2774 616b  'stopLoss', 'tak
-0002ce80: 6550 726f 6669 7427 5d29 0a20 2020 2020  eProfit']).     
-0002ce90: 2020 2072 6573 706f 6e73 6520 3d20 6177     response = aw
-0002cea0: 6169 7420 7365 6c66 2e70 7269 7661 7465  ait self.private
-0002ceb0: 506f 7374 5635 4f72 6465 7243 7265 6174  PostV5OrderCreat
-0002cec0: 6528 7365 6c66 2e65 7874 656e 6428 7265  e(self.extend(re
-0002ced0: 7175 6573 742c 2070 6172 616d 7329 290a  quest, params)).
-0002cee0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0002cef0: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
-0002cf00: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
-0002cf10: 436f 6465 223a 2030 2c0a 2020 2020 2020  Code": 0,.      
-0002cf20: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
-0002cf30: 4d73 6722 3a20 224f 4b22 2c0a 2020 2020  Msg": "OK",.    
-0002cf40: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-0002cf50: 6573 756c 7422 3a20 7b0a 2020 2020 2020  esult": {.      
-0002cf60: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0002cf70: 226f 7264 6572 4964 223a 2022 3133 3231  "orderId": "1321
-0002cf80: 3030 3337 3439 3338 3633 3237 3535 3222  003749386327552"
-0002cf90: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0002cfa0: 2020 2020 2020 2020 226f 7264 6572 4c69          "orderLi
-0002cfb0: 6e6b 4964 223a 2022 7370 6f74 2d74 6573  nkId": "spot-tes
-0002cfc0: 742d 706f 7374 6f6e 6c79 220a 2020 2020  t-postonly".    
-0002cfd0: 2020 2020 2320 2020 2020 2020 2020 7d2c      #         },
-0002cfe0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0002cff0: 2020 2022 7265 7445 7874 496e 666f 223a     "retExtInfo":
-0002d000: 207b 7d2c 0a20 2020 2020 2020 2023 2020   {},.        #  
-0002d010: 2020 2020 2020 2022 7469 6d65 223a 2031         "time": 1
-0002d020: 3637 3232 3131 3931 3834 3731 0a20 2020  672211918471.   
-0002d030: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
-0002d040: 2020 2020 2023 0a20 2020 2020 2020 206f       #.        o
-0002d050: 7264 6572 203d 2073 656c 662e 7361 6665  rder = self.safe
-0002d060: 5f76 616c 7565 2872 6573 706f 6e73 652c  _value(response,
-0002d070: 2027 7265 7375 6c74 272c 207b 7d29 0a20   'result', {}). 
-0002d080: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-0002d090: 6c66 2e70 6172 7365 5f6f 7264 6572 286f  lf.parse_order(o
-0002d0a0: 7264 6572 290a 0a20 2020 2061 7379 6e63  rder)..    async
-0002d0b0: 2064 6566 2063 7265 6174 655f 7370 6f74   def create_spot
-0002d0c0: 5f6f 7264 6572 2873 656c 662c 2073 796d  _order(self, sym
-0002d0d0: 626f 6c3a 2073 7472 2c20 7479 7065 2c20  bol: str, type, 
-0002d0e0: 7369 6465 2c20 616d 6f75 6e74 2c20 7072  side, amount, pr
-0002d0f0: 6963 653d 4e6f 6e65 2c20 7061 7261 6d73  ice=None, params
-0002d100: 3d7b 7d29 3a0a 2020 2020 2020 2020 6177  ={}):.        aw
-0002d110: 6169 7420 7365 6c66 2e6c 6f61 645f 6d61  ait self.load_ma
-0002d120: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
-0002d130: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
-0002d140: 726b 6574 2873 796d 626f 6c29 0a20 2020  rket(symbol).   
-0002d150: 2020 2020 2075 7070 6572 4361 7365 5479       upperCaseTy
-0002d160: 7065 203d 2074 7970 652e 7570 7065 7228  pe = type.upper(
-0002d170: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
-0002d180: 7420 3d20 7b0a 2020 2020 2020 2020 2020  t = {.          
-0002d190: 2020 2773 796d 626f 6c27 3a20 6d61 726b    'symbol': mark
-0002d1a0: 6574 5b27 6964 275d 2c0a 2020 2020 2020  et['id'],.      
-0002d1b0: 2020 2020 2020 2773 6964 6527 3a20 7365        'side': se
-0002d1c0: 6c66 2e63 6170 6974 616c 697a 6528 7369  lf.capitalize(si
-0002d1d0: 6465 292c 0a20 2020 2020 2020 2020 2020  de),.           
-0002d1e0: 2027 6f72 6465 7254 7970 6527 3a20 7570   'orderType': up
-0002d1f0: 7065 7243 6173 6554 7970 652c 2020 2320  perCaseType,  # 
-0002d200: 6c69 6d69 742c 206d 6172 6b65 7420 6f72  limit, market or
-0002d210: 206c 696d 6974 5f6d 616b 6572 0a20 2020   limit_maker.   
-0002d220: 2020 2020 2020 2020 2027 7469 6d65 496e           'timeIn
-0002d230: 466f 7263 6527 3a20 2747 5443 272c 2020  Force': 'GTC',  
-0002d240: 2320 464f 4b2c 2049 4f43 0a20 2020 2020  # FOK, IOC.     
-0002d250: 2020 2020 2020 2023 2027 6f72 6465 724c         # 'orderL
-0002d260: 696e 6b49 6427 3a20 2773 7472 696e 6727  inkId': 'string'
-0002d270: 2c20 2023 2075 6e69 7175 6520 636c 6965  ,  # unique clie
-0002d280: 6e74 206f 7264 6572 2069 642c 206d 6178  nt order id, max
-0002d290: 2033 3620 6368 6172 6163 7465 7273 0a20   36 characters. 
-0002d2a0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-0002d2b0: 2069 6620 2874 7970 6520 3d3d 2027 6d61   if (type == 'ma
-0002d2c0: 726b 6574 2729 2061 6e64 2028 7369 6465  rket') and (side
-0002d2d0: 203d 3d20 2762 7579 2729 3a0a 2020 2020   == 'buy'):.    
-0002d2e0: 2020 2020 2020 2020 2320 666f 7220 6d61          # for ma
-0002d2f0: 726b 6574 2062 7579 2069 7420 7265 7175  rket buy it requ
-0002d300: 6972 6573 2074 6865 2061 6d6f 756e 7420  ires the amount 
-0002d310: 6f66 2071 756f 7465 2063 7572 7265 6e63  of quote currenc
-0002d320: 7920 746f 2073 7065 6e64 0a20 2020 2020  y to spend.     
-0002d330: 2020 2020 2020 2069 6620 7365 6c66 2e6f         if self.o
-0002d340: 7074 696f 6e73 5b27 6372 6561 7465 4d61  ptions['createMa
-0002d350: 726b 6574 4275 794f 7264 6572 5265 7175  rketBuyOrderRequ
-0002d360: 6972 6573 5072 6963 6527 5d3a 0a20 2020  iresPrice']:.   
-0002d370: 2020 2020 2020 2020 2020 2020 2063 6f73               cos
-0002d380: 7420 3d20 7365 6c66 2e73 6166 655f 6e75  t = self.safe_nu
-0002d390: 6d62 6572 2870 6172 616d 732c 2027 636f  mber(params, 'co
-0002d3a0: 7374 2729 0a20 2020 2020 2020 2020 2020  st').           
-0002d3b0: 2020 2020 2070 6172 616d 7320 3d20 7365       params = se
-0002d3c0: 6c66 2e6f 6d69 7428 7061 7261 6d73 2c20  lf.omit(params, 
-0002d3d0: 2763 6f73 7427 290a 2020 2020 2020 2020  'cost').        
-0002d3e0: 2020 2020 2020 2020 6966 2070 7269 6365          if price
-0002d3f0: 2069 7320 4e6f 6e65 2061 6e64 2063 6f73   is None and cos
-0002d400: 7420 6973 204e 6f6e 653a 0a20 2020 2020  t is None:.     
-0002d410: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0002d420: 6169 7365 2049 6e76 616c 6964 4f72 6465  aise InvalidOrde
-0002d430: 7228 7365 6c66 2e69 6420 2b20 2220 6372  r(self.id + " cr
-0002d440: 6561 7465 4f72 6465 7228 2920 7265 7175  eateOrder() requ
-0002d450: 6972 6573 2074 6865 2070 7269 6365 2061  ires the price a
-0002d460: 7267 756d 656e 7420 7769 7468 206d 6172  rgument with mar
-0002d470: 6b65 7420 6275 7920 6f72 6465 7273 2074  ket buy orders t
-0002d480: 6f20 6361 6c63 756c 6174 6520 746f 7461  o calculate tota
-0002d490: 6c20 6f72 6465 7220 636f 7374 2861 6d6f  l order cost(amo
-0002d4a0: 756e 7420 746f 2073 7065 6e64 292c 2077  unt to spend), w
-0002d4b0: 6865 7265 2063 6f73 7420 3d20 616d 6f75  here cost = amou
-0002d4c0: 6e74 202a 2070 7269 6365 2e20 5375 7070  nt * price. Supp
-0002d4d0: 6c79 2061 2070 7269 6365 2061 7267 756d  ly a price argum
-0002d4e0: 656e 7420 746f 2063 7265 6174 654f 7264  ent to createOrd
-0002d4f0: 6572 2829 2063 616c 6c20 6966 2079 6f75  er() call if you
-0002d500: 2077 616e 7420 7468 6520 636f 7374 2074   want the cost t
-0002d510: 6f20 6265 2063 616c 6375 6c61 7465 6420  o be calculated 
-0002d520: 666f 7220 796f 7520 6672 6f6d 2070 7269  for you from pri
-0002d530: 6365 2061 6e64 2061 6d6f 756e 742c 206f  ce and amount, o
-0002d540: 722c 2061 6c74 6572 6e61 7469 7665 6c79  r, alternatively
-0002d550: 2c20 6164 6420 2e6f 7074 696f 6e73 5b27  , add .options['
-0002d560: 6372 6561 7465 4d61 726b 6574 4275 794f  createMarketBuyO
-0002d570: 7264 6572 5265 7175 6972 6573 5072 6963  rderRequiresPric
-0002d580: 6527 5d20 3d20 4661 6c73 6520 746f 2073  e'] = False to s
-0002d590: 7570 706c 7920 7468 6520 636f 7374 2069  upply the cost i
-0002d5a0: 6e20 7468 6520 616d 6f75 6e74 2061 7267  n the amount arg
-0002d5b0: 756d 656e 7428 7468 6520 6578 6368 616e  ument(the exchan
-0002d5c0: 6765 2d73 7065 6369 6669 6320 6265 6861  ge-specific beha
-0002d5d0: 7669 6f75 7229 2229 0a20 2020 2020 2020  viour)").       
-0002d5e0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-0002d5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d600: 2020 2061 6d6f 756e 7453 7472 696e 6720     amountString 
-0002d610: 3d20 7365 6c66 2e6e 756d 6265 725f 746f  = self.number_to
-0002d620: 5f73 7472 696e 6728 616d 6f75 6e74 290a  _string(amount).
-0002d630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d640: 2020 2020 7072 6963 6553 7472 696e 6720      priceString 
-0002d650: 3d20 7365 6c66 2e6e 756d 6265 725f 746f  = self.number_to
-0002d660: 5f73 7472 696e 6728 7072 6963 6529 0a20  _string(price). 
-0002d670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d680: 2020 2071 756f 7465 416d 6f75 6e74 203d     quoteAmount =
-0002d690: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
-0002d6a0: 6d75 6c28 616d 6f75 6e74 5374 7269 6e67  mul(amountString
-0002d6b0: 2c20 7072 6963 6553 7472 696e 6729 0a20  , priceString). 
-0002d6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d6d0: 2020 2061 6d6f 756e 7420 3d20 636f 7374     amount = cost
-0002d6e0: 2069 6620 2863 6f73 7420 6973 206e 6f74   if (cost is not
-0002d6f0: 204e 6f6e 6529 2065 6c73 6520 7365 6c66   None) else self
-0002d700: 2e70 6172 7365 5f6e 756d 6265 7228 7175  .parse_number(qu
-0002d710: 6f74 6541 6d6f 756e 7429 0a20 2020 2020  oteAmount).     
-0002d720: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0002d730: 6571 7565 7374 5b27 6f72 6465 7251 7479  equest['orderQty
-0002d740: 275d 203d 2073 656c 662e 636f 7374 5f74  '] = self.cost_t
-0002d750: 6f5f 7072 6563 6973 696f 6e28 7379 6d62  o_precision(symb
-0002d760: 6f6c 2c20 616d 6f75 6e74 290a 2020 2020  ol, amount).    
-0002d770: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0002d780: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0002d790: 7175 6573 745b 276f 7264 6572 5174 7927  quest['orderQty'
-0002d7a0: 5d20 3d20 7365 6c66 2e63 6f73 745f 746f  ] = self.cost_to
-0002d7b0: 5f70 7265 6369 7369 6f6e 2873 796d 626f  _precision(symbo
-0002d7c0: 6c2c 2061 6d6f 756e 7429 0a20 2020 2020  l, amount).     
-0002d7d0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0002d7e0: 2020 2020 2072 6571 7565 7374 5b27 6f72       request['or
-0002d7f0: 6465 7251 7479 275d 203d 2073 656c 662e  derQty'] = self.
-0002d800: 616d 6f75 6e74 5f74 6f5f 7072 6563 6973  amount_to_precis
-0002d810: 696f 6e28 7379 6d62 6f6c 2c20 616d 6f75  ion(symbol, amou
-0002d820: 6e74 290a 2020 2020 2020 2020 6966 2028  nt).        if (
-0002d830: 7570 7065 7243 6173 6554 7970 6520 3d3d  upperCaseType ==
-0002d840: 2027 4c49 4d49 5427 2920 6f72 2028 7570   'LIMIT') or (up
-0002d850: 7065 7243 6173 6554 7970 6520 3d3d 2027  perCaseType == '
-0002d860: 4c49 4d49 545f 4d41 4b45 5227 293a 0a20  LIMIT_MAKER'):. 
-0002d870: 2020 2020 2020 2020 2020 2069 6620 7072             if pr
-0002d880: 6963 6520 6973 204e 6f6e 653a 0a20 2020  ice is None:.   
-0002d890: 2020 2020 2020 2020 2020 2020 2072 6169               rai
-0002d8a0: 7365 2049 6e76 616c 6964 4f72 6465 7228  se InvalidOrder(
-0002d8b0: 7365 6c66 2e69 6420 2b20 2720 6372 6561  self.id + ' crea
-0002d8c0: 7465 4f72 6465 7220 7265 7175 6972 6573  teOrder requires
-0002d8d0: 2061 2070 7269 6365 2061 7267 756d 656e   a price argumen
-0002d8e0: 7420 666f 7220 6120 2720 2b20 7479 7065  t for a ' + type
-0002d8f0: 202b 2027 206f 7264 6572 2729 0a20 2020   + ' order').   
-0002d900: 2020 2020 2020 2020 2072 6571 7565 7374           request
-0002d910: 5b27 6f72 6465 7250 7269 6365 275d 203d  ['orderPrice'] =
-0002d920: 2073 656c 662e 7072 6963 655f 746f 5f70   self.price_to_p
-0002d930: 7265 6369 7369 6f6e 2873 796d 626f 6c2c  recision(symbol,
-0002d940: 2070 7269 6365 290a 2020 2020 2020 2020   price).        
-0002d950: 6973 4d61 726b 6574 203d 2028 7570 7065  isMarket = (uppe
-0002d960: 7243 6173 6554 7970 6520 3d3d 2027 4d41  rCaseType == 'MA
-0002d970: 524b 4554 2729 0a20 2020 2020 2020 2070  RKET').        p
-0002d980: 6f73 744f 6e6c 7920 3d20 4e6f 6e65 0a20  ostOnly = None. 
-0002d990: 2020 2020 2020 2070 6f73 744f 6e6c 792c         postOnly,
-0002d9a0: 2070 6172 616d 7320 3d20 7365 6c66 2e68   params = self.h
-0002d9b0: 616e 646c 655f 706f 7374 5f6f 6e6c 7928  andle_post_only(
-0002d9c0: 6973 4d61 726b 6574 2c20 7479 7065 203d  isMarket, type =
-0002d9d0: 3d20 274c 494d 4954 5f4d 414b 4552 272c  = 'LIMIT_MAKER',
-0002d9e0: 2070 6172 616d 7329 0a20 2020 2020 2020   params).       
-0002d9f0: 2069 6620 706f 7374 4f6e 6c79 3a0a 2020   if postOnly:.  
-0002da00: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-0002da10: 745b 276f 7264 6572 5479 7065 275d 203d  t['orderType'] =
-0002da20: 2027 4c49 4d49 545f 4d41 4b45 5227 0a20   'LIMIT_MAKER'. 
-0002da30: 2020 2020 2020 2063 6c69 656e 744f 7264         clientOrd
-0002da40: 6572 4964 203d 2073 656c 662e 7361 6665  erId = self.safe
-0002da50: 5f73 7472 696e 675f 3228 7061 7261 6d73  _string_2(params
-0002da60: 2c20 2763 6c69 656e 744f 7264 6572 4964  , 'clientOrderId
-0002da70: 272c 2027 6f72 6465 724c 696e 6b49 6427  ', 'orderLinkId'
-0002da80: 290a 2020 2020 2020 2020 6966 2063 6c69  ).        if cli
-0002da90: 656e 744f 7264 6572 4964 2069 7320 6e6f  entOrderId is no
-0002daa0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0002dab0: 2020 2020 7265 7175 6573 745b 276f 7264      request['ord
-0002dac0: 6572 4c69 6e6b 4964 275d 203d 2063 6c69  erLinkId'] = cli
-0002dad0: 656e 744f 7264 6572 4964 0a20 2020 2020  entOrderId.     
-0002dae0: 2020 2070 6172 616d 7320 3d20 7365 6c66     params = self
-0002daf0: 2e6f 6d69 7428 7061 7261 6d73 2c20 5b27  .omit(params, ['
-0002db00: 636c 6965 6e74 4f72 6465 7249 6427 2c20  clientOrderId', 
-0002db10: 276f 7264 6572 4c69 6e6b 4964 272c 2027  'orderLinkId', '
-0002db20: 706f 7374 4f6e 6c79 275d 290a 2020 2020  postOnly']).    
-0002db30: 2020 2020 6272 6f6b 6572 4964 203d 2073      brokerId = s
-0002db40: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
-0002db50: 7365 6c66 2e6f 7074 696f 6e73 2c20 2762  self.options, 'b
-0002db60: 726f 6b65 7249 6427 290a 2020 2020 2020  rokerId').      
-0002db70: 2020 6966 2062 726f 6b65 7249 6420 6973    if brokerId is
-0002db80: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-0002db90: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-0002dba0: 6167 656e 7453 6f75 7263 6527 5d20 3d20  agentSource'] = 
-0002dbb0: 6272 6f6b 6572 4964 0a20 2020 2020 2020  brokerId.       
-0002dbc0: 2074 7269 6767 6572 5072 6963 6520 3d20   triggerPrice = 
-0002dbd0: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
-0002dbe0: 5f32 2870 6172 616d 732c 2027 7472 6967  _2(params, 'trig
-0002dbf0: 6765 7250 7269 6365 272c 2027 7374 6f70  gerPrice', 'stop
-0002dc00: 5072 6963 6527 290a 2020 2020 2020 2020  Price').        
-0002dc10: 6966 2074 7269 6767 6572 5072 6963 6520  if triggerPrice 
-0002dc20: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0002dc30: 2020 2020 2020 2020 2072 6571 7565 7374           request
-0002dc40: 5b27 7472 6967 6765 7250 7269 6365 275d  ['triggerPrice']
-0002dc50: 203d 2073 656c 662e 7072 6963 655f 746f   = self.price_to
-0002dc60: 5f70 7265 6369 7369 6f6e 2873 796d 626f  _precision(symbo
-0002dc70: 6c2c 2074 7269 6767 6572 5072 6963 6529  l, triggerPrice)
-0002dc80: 0a20 2020 2020 2020 2070 6172 616d 7320  .        params 
-0002dc90: 3d20 7365 6c66 2e6f 6d69 7428 7061 7261  = self.omit(para
-0002dca0: 6d73 2c20 2773 746f 7050 7269 6365 2729  ms, 'stopPrice')
-0002dcb0: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
-0002dcc0: 6520 3d20 6177 6169 7420 7365 6c66 2e70  e = await self.p
-0002dcd0: 7269 7661 7465 506f 7374 5370 6f74 5633  rivatePostSpotV3
-0002dce0: 5072 6976 6174 654f 7264 6572 2873 656c  PrivateOrder(sel
-0002dcf0: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
-0002dd00: 2c20 7061 7261 6d73 2929 0a20 2020 2020  , params)).     
-0002dd10: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
-0002dd20: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-0002dd30: 2020 2020 2022 7265 7443 6f64 6522 3a20       "retCode": 
-0002dd40: 2230 222c 0a20 2020 2020 2020 2023 2020  "0",.        #  
-0002dd50: 2020 2020 2020 2272 6574 4d73 6722 3a20        "retMsg": 
-0002dd60: 224f 4b22 2c0a 2020 2020 2020 2020 2320  "OK",.        # 
-0002dd70: 2020 2020 2020 2022 7265 7375 6c74 223a         "result":
-0002dd80: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-0002dd90: 2020 2020 2020 2020 226f 7264 6572 4964          "orderId
-0002dda0: 223a 2022 3132 3734 3735 3439 3136 3238  ": "127475491628
-0002ddb0: 3733 3436 3238 3022 2c0a 2020 2020 2020  7346280",.      
-0002ddc0: 2020 2320 2020 2020 2020 2020 2020 2022    #            "
-0002ddd0: 6f72 6465 724c 696e 6b49 6422 3a20 2231  orderLinkId": "1
-0002dde0: 3636 3637 3938 3632 3730 3135 3733 3022  666798627015730"
-0002ddf0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0002de00: 2020 2020 2020 2022 7379 6d62 6f6c 223a         "symbol":
-0002de10: 2022 4141 5645 5553 4454 222c 0a20 2020   "AAVEUSDT",.   
-0002de20: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0002de30: 2020 2263 7265 6174 6554 696d 6522 3a20    "createTime": 
-0002de40: 2231 3636 3636 3938 3632 3938 3231 222c  "1666698629821",
-0002de50: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0002de60: 2020 2020 2020 226f 7264 6572 5072 6963        "orderPric
-0002de70: 6522 3a20 2238 3022 2c0a 2020 2020 2020  e": "80",.      
-0002de80: 2020 2320 2020 2020 2020 2020 2020 2022    #            "
-0002de90: 6f72 6465 7251 7479 223a 2022 302e 3131  orderQty": "0.11
-0002dea0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0002deb0: 2020 2020 2020 2020 226f 7264 6572 5479          "orderTy
-0002dec0: 7065 223a 2022 4c49 4d49 5422 2c0a 2020  pe": "LIMIT",.  
-0002ded0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0002dee0: 2020 2022 7369 6465 223a 2022 4255 5922     "side": "BUY"
-0002def0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0002df00: 2020 2020 2020 2022 7374 6174 7573 223a         "status":
-0002df10: 2022 4e45 5722 2c0a 2020 2020 2020 2020   "NEW",.        
-0002df20: 2320 2020 2020 2020 2020 2020 2022 7469  #            "ti
-0002df30: 6d65 496e 466f 7263 6522 3a20 2247 5443  meInForce": "GTC
-0002df40: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0002df50: 2020 2020 2020 2020 2261 6363 6f75 6e74          "account
-0002df60: 4964 223a 2022 3133 3338 3034 3334 222c  Id": "13380434",
-0002df70: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0002df80: 2020 2020 2020 2265 7865 6351 7479 223a        "execQty":
-0002df90: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
-0002dfa0: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
-0002dfb0: 7243 6174 6567 6f72 7922 3a20 2230 220a  rCategory": "0".
-0002dfc0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0002dfd0: 207d 2c0a 2020 2020 2020 2020 2320 2020   },.        #   
-0002dfe0: 2020 2020 2022 7265 7445 7874 4d61 7022       "retExtMap"
-0002dff0: 3a20 7b7d 2c0a 2020 2020 2020 2020 2320  : {},.        # 
-0002e000: 2020 2020 2020 2022 7265 7445 7874 496e         "retExtIn
-0002e010: 666f 223a 206e 756c 6c2c 0a20 2020 2020  fo": null,.     
-0002e020: 2020 2023 2020 2020 2020 2020 2274 696d     #        "tim
-0002e030: 6522 3a20 2231 3636 3636 3938 3632 3739  e": "16666986279
-0002e040: 3236 220a 2020 2020 2020 2020 2320 2020  26".        #   
-0002e050: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
-0002e060: 2020 2020 206f 7264 6572 203d 2073 656c       order = sel
-0002e070: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
-0002e080: 706f 6e73 652c 2027 7265 7375 6c74 272c  ponse, 'result',
-0002e090: 207b 7d29 0a20 2020 2020 2020 2072 6574   {}).        ret
-0002e0a0: 7572 6e20 7365 6c66 2e70 6172 7365 5f6f  urn self.parse_o
-0002e0b0: 7264 6572 286f 7264 6572 290a 0a20 2020  rder(order)..   
-0002e0c0: 2061 7379 6e63 2064 6566 2063 7265 6174   async def creat
-0002e0d0: 655f 756e 6966 6965 645f 6d61 7267 696e  e_unified_margin
-0002e0e0: 5f6f 7264 6572 2873 656c 662c 2073 796d  _order(self, sym
-0002e0f0: 626f 6c3a 2073 7472 2c20 7479 7065 2c20  bol: str, type, 
-0002e100: 7369 6465 2c20 616d 6f75 6e74 2c20 7072  side, amount, pr
-0002e110: 6963 653d 4e6f 6e65 2c20 7061 7261 6d73  ice=None, params
-0002e120: 3d7b 7d29 3a0a 2020 2020 2020 2020 6177  ={}):.        aw
-0002e130: 6169 7420 7365 6c66 2e6c 6f61 645f 6d61  ait self.load_ma
-0002e140: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
-0002e150: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
-0002e160: 726b 6574 2873 796d 626f 6c29 0a20 2020  rket(symbol).   
-0002e170: 2020 2020 2069 6620 6e6f 7420 6d61 726b       if not mark
-0002e180: 6574 5b27 6c69 6e65 6172 275d 2061 6e64  et['linear'] and
-0002e190: 206e 6f74 206d 6172 6b65 745b 276f 7074   not market['opt
-0002e1a0: 696f 6e27 5d3a 0a20 2020 2020 2020 2020  ion']:.         
-0002e1b0: 2020 2072 6169 7365 204e 6f74 5375 7070     raise NotSupp
-0002e1c0: 6f72 7465 6428 7365 6c66 2e69 6420 2b20  orted(self.id + 
-0002e1d0: 2720 6372 6561 7465 4f72 6465 7220 646f  ' createOrder do
-0002e1e0: 6573 206e 6f74 2061 6c6c 6f77 2069 6e76  es not allow inv
-0002e1f0: 6572 7365 206d 6172 6b65 7420 6f72 6465  erse market orde
-0002e200: 7273 2066 6f72 2027 202b 2073 796d 626f  rs for ' + symbo
-0002e210: 6c20 2b20 2720 6d61 726b 6574 7327 290a  l + ' markets').
-0002e220: 2020 2020 2020 2020 6c6f 7765 7243 6173          lowerCas
-0002e230: 6554 7970 6520 3d20 7479 7065 2e6c 6f77  eType = type.low
-0002e240: 6572 2829 0a20 2020 2020 2020 2069 6620  er().        if 
-0002e250: 2870 7269 6365 2069 7320 4e6f 6e65 2920  (price is None) 
-0002e260: 616e 6420 286c 6f77 6572 4361 7365 5479  and (lowerCaseTy
-0002e270: 7065 203d 3d20 276c 696d 6974 2729 3a0a  pe == 'limit'):.
-0002e280: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-0002e290: 6520 4172 6775 6d65 6e74 7352 6571 7569  e ArgumentsRequi
-0002e2a0: 7265 6428 7365 6c66 2e69 6420 2b20 2720  red(self.id + ' 
-0002e2b0: 6372 6561 7465 4f72 6465 7220 7265 7175  createOrder requ
-0002e2c0: 6972 6573 2061 2070 7269 6365 2061 7267  ires a price arg
-0002e2d0: 756d 656e 7420 666f 7220 6c69 6d69 7420  ument for limit 
-0002e2e0: 6f72 6465 7273 2729 0a20 2020 2020 2020  orders').       
-0002e2f0: 2072 6571 7565 7374 203d 207b 0a20 2020   request = {.   
-0002e300: 2020 2020 2020 2020 2027 7379 6d62 6f6c           'symbol
-0002e310: 273a 206d 6172 6b65 745b 2769 6427 5d2c  ': market['id'],
-0002e320: 0a20 2020 2020 2020 2020 2020 2027 7369  .            'si
-0002e330: 6465 273a 2073 656c 662e 6361 7069 7461  de': self.capita
-0002e340: 6c69 7a65 2873 6964 6529 2c0a 2020 2020  lize(side),.    
-0002e350: 2020 2020 2020 2020 276f 7264 6572 5479          'orderTy
-0002e360: 7065 273a 2073 656c 662e 6361 7069 7461  pe': self.capita
-0002e370: 6c69 7a65 286c 6f77 6572 4361 7365 5479  lize(lowerCaseTy
-0002e380: 7065 292c 2020 2320 6c69 6d69 7420 6f72  pe),  # limit or
-0002e390: 206d 6172 6b65 740a 2020 2020 2020 2020   market.        
-0002e3a0: 2020 2020 2774 696d 6549 6e46 6f72 6365      'timeInForce
-0002e3b0: 273a 2027 476f 6f64 5469 6c6c 4361 6e63  ': 'GoodTillCanc
-0002e3c0: 656c 272c 2020 2320 496d 6d65 6469 6174  el',  # Immediat
-0002e3d0: 654f 7243 616e 6365 6c2c 2046 696c 6c4f  eOrCancel, FillO
-0002e3e0: 724b 696c 6c2c 2050 6f73 744f 6e6c 790a  rKill, PostOnly.
-0002e3f0: 2020 2020 2020 2020 2020 2020 2771 7479              'qty
-0002e400: 273a 2073 656c 662e 616d 6f75 6e74 5f74  ': self.amount_t
-0002e410: 6f5f 7072 6563 6973 696f 6e28 7379 6d62  o_precision(symb
-0002e420: 6f6c 2c20 616d 6f75 6e74 292c 0a20 2020  ol, amount),.   
-0002e430: 2020 2020 2020 2020 2023 2027 7461 6b65           # 'take
-0002e440: 5072 6f66 6974 273a 2031 3233 2e34 352c  Profit': 123.45,
-0002e450: 2020 2320 7461 6b65 2070 726f 6669 7420    # take profit 
-0002e460: 7072 6963 652c 206f 6e6c 7920 7461 6b65  price, only take
-0002e470: 2065 6666 6563 7420 7570 6f6e 206f 7065   effect upon ope
-0002e480: 6e69 6e67 2074 6865 2070 6f73 6974 696f  ning the positio
-0002e490: 6e0a 2020 2020 2020 2020 2020 2020 2320  n.            # 
-0002e4a0: 2773 746f 704c 6f73 7327 3a20 3132 332e  'stopLoss': 123.
-0002e4b0: 3435 2c20 2023 2073 746f 7020 6c6f 7373  45,  # stop loss
-0002e4c0: 2070 7269 6365 2c20 6f6e 6c79 2074 616b   price, only tak
-0002e4d0: 6520 6566 6665 6374 2075 706f 6e20 6f70  e effect upon op
-0002e4e0: 656e 696e 6720 7468 6520 706f 7369 7469  ening the positi
-0002e4f0: 6f6e 0a20 2020 2020 2020 2020 2020 2023  on.            #
-0002e500: 2027 7265 6475 6365 4f6e 6c79 273a 2046   'reduceOnly': F
-0002e510: 616c 7365 2c20 2023 2072 6564 7563 6520  alse,  # reduce 
-0002e520: 6f6e 6c79 2c20 7265 7175 6972 6564 2066  only, required f
-0002e530: 6f72 206c 696e 6561 7220 6f72 6465 7273  or linear orders
-0002e540: 0a20 2020 2020 2020 2020 2020 2023 2077  .            # w
-0002e550: 6865 6e20 6372 6561 7469 6e67 2061 2063  hen creating a c
-0002e560: 6c6f 7369 6e67 206f 7264 6572 2c20 6279  losing order, by
-0002e570: 6269 7420 7265 636f 6d6d 656e 6473 2061  bit recommends a
-0002e580: 2054 7275 6520 7661 6c75 6520 666f 720a   True value for.
-0002e590: 2020 2020 2020 2020 2020 2020 2320 2063              #  c
-0002e5a0: 6c6f 7365 4f6e 5472 6967 6765 7220 746f  loseOnTrigger to
-0002e5b0: 2061 766f 6964 2066 6169 6c69 6e67 2064   avoid failing d
-0002e5c0: 7565 2074 6f20 696e 7375 6666 6963 6965  ue to insufficie
-0002e5d0: 6e74 2061 7661 696c 6162 6c65 206d 6172  nt available mar
-0002e5e0: 6769 6e0a 2020 2020 2020 2020 2020 2020  gin.            
-0002e5f0: 2320 2763 6c6f 7365 4f6e 5472 6967 6765  # 'closeOnTrigge
-0002e600: 7227 3a20 4661 6c73 652c 2072 6571 7569  r': False, requi
-0002e610: 7265 6420 666f 7220 6c69 6e65 6172 206f  red for linear o
-0002e620: 7264 6572 730a 2020 2020 2020 2020 2020  rders.          
-0002e630: 2020 2320 276f 7264 6572 4c69 6e6b 4964    # 'orderLinkId
-0002e640: 273a 2027 7374 7269 6e67 272c 2020 2320  ': 'string',  # 
-0002e650: 756e 6971 7565 2063 6c69 656e 7420 6f72  unique client or
-0002e660: 6465 7220 6964 2c20 6d61 7820 3336 2063  der id, max 36 c
-0002e670: 6861 7261 6374 6572 730a 2020 2020 2020  haracters.      
-0002e680: 2020 2020 2020 2320 2774 7269 6767 6572        # 'trigger
-0002e690: 5072 6963 6527 3a20 3132 332e 3435 2c20  Price': 123.45, 
-0002e6a0: 2023 2074 7269 6767 6572 2070 7269 6365   # trigger price
-0002e6b0: 2c20 7265 7175 6972 6564 2066 6f72 2063  , required for c
-0002e6c0: 6f6e 6469 7469 6f6e 616c 206f 7264 6572  onditional order
-0002e6d0: 730a 2020 2020 2020 2020 2020 2020 2320  s.            # 
-0002e6e0: 2774 7269 6767 6572 4279 273a 2027 4d61  'triggerBy': 'Ma
-0002e6f0: 726b 5072 6963 6527 2c20 2023 2049 6e64  rkPrice',  # Ind
-0002e700: 6578 5072 6963 652c 204d 6172 6b50 7269  exPrice, MarkPri
-0002e710: 6365 0a20 2020 2020 2020 2020 2020 2023  ce.            #
-0002e720: 2027 7470 7472 6967 6765 7262 7927 3a20   'tptriggerby': 
-0002e730: 274d 6172 6b50 7269 6365 272c 2020 2320  'MarkPrice',  # 
-0002e740: 496e 6465 7850 7269 6365 2c20 4d61 726b  IndexPrice, Mark
-0002e750: 5072 6963 650a 2020 2020 2020 2020 2020  Price.          
-0002e760: 2020 2320 2773 6c54 7269 6767 6572 4279    # 'slTriggerBy
-0002e770: 273a 2027 4d61 726b 5072 6963 6527 2c20  ': 'MarkPrice', 
-0002e780: 2023 2049 6e64 6578 5072 6963 652c 204d   # IndexPrice, M
-0002e790: 6172 6b50 7269 6365 0a20 2020 2020 2020  arkPrice.       
-0002e7a0: 2020 2020 2023 2027 6d6d 7027 3a20 4661       # 'mmp': Fa
-0002e7b0: 6c73 6520 2023 206d 6172 6b65 7420 6d61  lse  # market ma
-0002e7c0: 6b65 7220 7072 6f74 6563 7469 6f6e 0a20  ker protection. 
-0002e7d0: 2020 2020 2020 2020 2020 2023 2027 706f             # 'po
-0002e7e0: 7369 7469 6f6e 4964 7827 3a20 302c 2020  sitionIdx': 0,  
-0002e7f0: 2320 506f 7369 7469 6f6e 206d 6f64 652e  # Position mode.
-0002e800: 2075 6e69 6669 6564 206d 6172 6769 6e20   unified margin 
-0002e810: 6163 636f 756e 7420 6973 206f 6e6c 7920  account is only 
-0002e820: 6176 6169 6c61 626c 6520 696e 204f 6e65  available in One
-0002e830: 2d57 6179 206d 6f64 652c 2077 6869 6368  -Way mode, which
-0002e840: 2069 7320 300a 2020 2020 2020 2020 2020   is 0.          
-0002e850: 2020 2320 2762 6173 6550 7269 6365 273a    # 'basePrice':
-0002e860: 2027 3027 2c20 2023 2049 7420 7769 6c6c   '0',  # It will
-0002e870: 2062 6520 7573 6564 2074 6f20 636f 6d70   be used to comp
-0002e880: 6172 6520 7769 7468 2074 6865 2076 616c  are with the val
-0002e890: 7565 206f 6620 7472 6967 6765 7250 7269  ue of triggerPri
-0002e8a0: 6365 2c20 746f 2064 6563 6964 6520 7768  ce, to decide wh
-0002e8b0: 6574 6865 7220 796f 7572 2063 6f6e 6469  ether your condi
-0002e8c0: 7469 6f6e 616c 206f 7264 6572 2077 696c  tional order wil
-0002e8d0: 6c20 6265 2074 7269 6767 6572 6564 2062  l be triggered b
-0002e8e0: 7920 6372 6f73 7369 6e67 2074 7269 6767  y crossing trigg
-0002e8f0: 6572 2070 7269 6365 2066 726f 6d20 7570  er price from up
-0002e900: 7065 7220 7369 6465 206f 7220 6c6f 7765  per side or lowe
-0002e910: 7220 7369 6465 2e20 4d61 696e 6c79 2075  r side. Mainly u
-0002e920: 7365 6420 746f 2069 6465 6e74 6966 7920  sed to identify 
-0002e930: 7468 6520 6578 7065 6374 6564 2064 6972  the expected dir
-0002e940: 6563 7469 6f6e 206f 6620 7468 6520 6375  ection of the cu
-0002e950: 7272 656e 7420 636f 6e64 6974 696f 6e61  rrent conditiona
-0002e960: 6c20 6f72 6465 722e 0a20 2020 2020 2020  l order..       
-0002e970: 2020 2020 2023 2027 6976 273a 2027 3027       # 'iv': '0'
-0002e980: 2c20 2023 2049 6d70 6c69 6564 2076 6f6c  ,  # Implied vol
-0002e990: 6174 696c 6974 792c 2066 6f72 206f 7074  atility, for opt
-0002e9a0: 696f 6e73 206f 6e6c 793b 2070 6172 616d  ions only; param
-0002e9b0: 6574 6572 7320 6172 6520 7061 7373 6564  eters are passed
-0002e9c0: 2061 6363 6f72 6469 6e67 2074 6f20 7468   according to th
-0002e9d0: 6520 7265 616c 2076 616c 7565 3b20 666f  e real value; fo
-0002e9e0: 7220 6578 616d 706c 652c 2066 6f72 2031  r example, for 1
-0002e9f0: 3025 2c20 302e 3120 6973 2070 6173 7365  0%, 0.1 is passe
-0002ea00: 640a 2020 2020 2020 2020 7d0a 2020 2020  d.        }.    
-0002ea10: 2020 2020 6966 206d 6172 6b65 745b 276c      if market['l
-0002ea20: 696e 6561 7227 5d3a 0a20 2020 2020 2020  inear']:.       
-0002ea30: 2020 2020 2072 6571 7565 7374 5b27 6361       request['ca
-0002ea40: 7465 676f 7279 275d 203d 2027 6c69 6e65  tegory'] = 'line
-0002ea50: 6172 270a 2020 2020 2020 2020 656c 7365  ar'.        else
-0002ea60: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0002ea70: 7175 6573 745b 2763 6174 6567 6f72 7927  quest['category'
-0002ea80: 5d20 3d20 276f 7074 696f 6e27 0a20 2020  ] = 'option'.   
-0002ea90: 2020 2020 2069 734d 6172 6b65 7420 3d20       isMarket = 
-0002eaa0: 6c6f 7765 7243 6173 6554 7970 6520 3d3d  lowerCaseType ==
-0002eab0: 2027 6d61 726b 6574 270a 2020 2020 2020   'market'.      
-0002eac0: 2020 6973 4c69 6d69 7420 3d20 6c6f 7765    isLimit = lowe
-0002ead0: 7243 6173 6554 7970 6520 3d3d 2027 6c69  rCaseType == 'li
-0002eae0: 6d69 7427 0a20 2020 2020 2020 2069 6620  mit'.        if 
-0002eaf0: 6973 4c69 6d69 743a 0a20 2020 2020 2020  isLimit:.       
-0002eb00: 2020 2020 2072 6571 7565 7374 5b27 7072       request['pr
-0002eb10: 6963 6527 5d20 3d20 7365 6c66 2e70 7269  ice'] = self.pri
-0002eb20: 6365 5f74 6f5f 7072 6563 6973 696f 6e28  ce_to_precision(
-0002eb30: 7379 6d62 6f6c 2c20 7072 6963 6529 0a20  symbol, price). 
-0002eb40: 2020 2020 2020 2065 7863 6861 6e67 6553         exchangeS
-0002eb50: 7065 6369 6669 6350 6172 616d 203d 2073  pecificParam = s
-0002eb60: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
-0002eb70: 7061 7261 6d73 2c20 2774 696d 655f 696e  params, 'time_in
-0002eb80: 5f66 6f72 6365 2729 0a20 2020 2020 2020  _force').       
-0002eb90: 2074 696d 6549 6e46 6f72 6365 203d 2073   timeInForce = s
-0002eba0: 656c 662e 7361 6665 5f73 7472 696e 675f  elf.safe_string_
-0002ebb0: 6c6f 7765 7228 7061 7261 6d73 2c20 2774  lower(params, 't
-0002ebc0: 696d 6549 6e46 6f72 6365 2729 0a20 2020  imeInForce').   
-0002ebd0: 2020 2020 2070 6f73 744f 6e6c 7920 3d20       postOnly = 
-0002ebe0: 4e6f 6e65 0a20 2020 2020 2020 2070 6f73  None.        pos
-0002ebf0: 744f 6e6c 792c 2070 6172 616d 7320 3d20  tOnly, params = 
-0002ec00: 7365 6c66 2e68 616e 646c 655f 706f 7374  self.handle_post
-0002ec10: 5f6f 6e6c 7928 6973 4d61 726b 6574 2c20  _only(isMarket, 
-0002ec20: 6578 6368 616e 6765 5370 6563 6966 6963  exchangeSpecific
-0002ec30: 5061 7261 6d20 3d3d 2027 506f 7374 4f6e  Param == 'PostOn
-0002ec40: 6c79 272c 2070 6172 616d 7329 0a20 2020  ly', params).   
-0002ec50: 2020 2020 2069 6620 706f 7374 4f6e 6c79       if postOnly
-0002ec60: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0002ec70: 7175 6573 745b 2774 696d 6549 6e46 6f72  quest['timeInFor
-0002ec80: 6365 275d 203d 2027 506f 7374 4f6e 6c79  ce'] = 'PostOnly
-0002ec90: 270a 2020 2020 2020 2020 656c 6966 2074  '.        elif t
-0002eca0: 696d 6549 6e46 6f72 6365 203d 3d20 2767  imeInForce == 'g
-0002ecb0: 7463 273a 0a20 2020 2020 2020 2020 2020  tc':.           
-0002ecc0: 2072 6571 7565 7374 5b27 7469 6d65 496e   request['timeIn
-0002ecd0: 466f 7263 6527 5d20 3d20 2747 6f6f 6454  Force'] = 'GoodT
-0002ece0: 696c 6c43 616e 6365 6c27 0a20 2020 2020  illCancel'.     
-0002ecf0: 2020 2065 6c69 6620 7469 6d65 496e 466f     elif timeInFo
-0002ed00: 7263 6520 3d3d 2027 666f 6b27 3a0a 2020  rce == 'fok':.  
-0002ed10: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-0002ed20: 745b 2774 696d 6549 6e46 6f72 6365 275d  t['timeInForce']
-0002ed30: 203d 2027 4669 6c6c 4f72 4b69 6c6c 270a   = 'FillOrKill'.
-0002ed40: 2020 2020 2020 2020 656c 6966 2074 696d          elif tim
-0002ed50: 6549 6e46 6f72 6365 203d 3d20 2769 6f63  eInForce == 'ioc
-0002ed60: 273a 0a20 2020 2020 2020 2020 2020 2072  ':.            r
-0002ed70: 6571 7565 7374 5b27 7469 6d65 496e 466f  equest['timeInFo
-0002ed80: 7263 6527 5d20 3d20 2749 6d6d 6564 6961  rce'] = 'Immedia
-0002ed90: 7465 4f72 4361 6e63 656c 270a 2020 2020  teOrCancel'.    
-0002eda0: 2020 2020 7472 6967 6765 7250 7269 6365      triggerPrice
-0002edb0: 203d 2073 656c 662e 7361 6665 5f6e 756d   = self.safe_num
-0002edc0: 6265 725f 3228 7061 7261 6d73 2c20 2773  ber_2(params, 's
-0002edd0: 746f 7050 7269 6365 272c 2027 7472 6967  topPrice', 'trig
-0002ede0: 6765 7250 7269 6365 2729 0a20 2020 2020  gerPrice').     
-0002edf0: 2020 2073 746f 704c 6f73 7354 7269 6767     stopLossTrigg
-0002ee00: 6572 5072 6963 6520 3d20 7365 6c66 2e73  erPrice = self.s
-0002ee10: 6166 655f 6e75 6d62 6572 2870 6172 616d  afe_number(param
-0002ee20: 732c 2027 7374 6f70 4c6f 7373 5072 6963  s, 'stopLossPric
-0002ee30: 6527 2c20 7472 6967 6765 7250 7269 6365  e', triggerPrice
-0002ee40: 290a 2020 2020 2020 2020 7461 6b65 5072  ).        takePr
-0002ee50: 6f66 6974 5472 6967 6765 7250 7269 6365  ofitTriggerPrice
-0002ee60: 203d 2073 656c 662e 7361 6665 5f6e 756d   = self.safe_num
-0002ee70: 6265 7228 7061 7261 6d73 2c20 2774 616b  ber(params, 'tak
-0002ee80: 6550 726f 6669 7450 7269 6365 2729 0a20  eProfitPrice'). 
-0002ee90: 2020 2020 2020 2073 746f 704c 6f73 7320         stopLoss 
-0002eea0: 3d20 7365 6c66 2e73 6166 655f 6e75 6d62  = self.safe_numb
-0002eeb0: 6572 2870 6172 616d 732c 2027 7374 6f70  er(params, 'stop
-0002eec0: 4c6f 7373 2729 0a20 2020 2020 2020 2074  Loss').        t
-0002eed0: 616b 6550 726f 6669 7420 3d20 7365 6c66  akeProfit = self
-0002eee0: 2e73 6166 655f 6e75 6d62 6572 2870 6172  .safe_number(par
-0002eef0: 616d 732c 2027 7461 6b65 5072 6f66 6974  ams, 'takeProfit
-0002ef00: 2729 0a20 2020 2020 2020 2069 7353 746f  ').        isSto
-0002ef10: 704c 6f73 7354 7269 6767 6572 4f72 6465  pLossTriggerOrde
-0002ef20: 7220 3d20 7374 6f70 4c6f 7373 5472 6967  r = stopLossTrig
-0002ef30: 6765 7250 7269 6365 2069 7320 6e6f 7420  gerPrice is not 
-0002ef40: 4e6f 6e65 0a20 2020 2020 2020 2069 7354  None.        isT
-0002ef50: 616b 6550 726f 6669 7454 7269 6767 6572  akeProfitTrigger
-0002ef60: 4f72 6465 7220 3d20 7461 6b65 5072 6f66  Order = takeProf
-0002ef70: 6974 5472 6967 6765 7250 7269 6365 2069  itTriggerPrice i
-0002ef80: 7320 6e6f 7420 4e6f 6e65 0a20 2020 2020  s not None.     
-0002ef90: 2020 2069 7353 746f 704c 6f73 7320 3d20     isStopLoss = 
-0002efa0: 7374 6f70 4c6f 7373 2069 7320 6e6f 7420  stopLoss is not 
-0002efb0: 4e6f 6e65 0a20 2020 2020 2020 2069 7354  None.        isT
-0002efc0: 616b 6550 726f 6669 7420 3d20 7461 6b65  akeProfit = take
-0002efd0: 5072 6f66 6974 2069 7320 6e6f 7420 4e6f  Profit is not No
-0002efe0: 6e65 0a20 2020 2020 2020 2069 6620 6973  ne.        if is
-0002eff0: 5374 6f70 4c6f 7373 5472 6967 6765 724f  StopLossTriggerO
-0002f000: 7264 6572 206f 7220 6973 5461 6b65 5072  rder or isTakePr
-0002f010: 6f66 6974 5472 6967 6765 724f 7264 6572  ofitTriggerOrder
-0002f020: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0002f030: 7175 6573 745b 2774 7269 6767 6572 4279  quest['triggerBy
-0002f040: 275d 203d 2027 4c61 7374 5072 6963 6527  '] = 'LastPrice'
-0002f050: 0a20 2020 2020 2020 2020 2020 2074 7269  .            tri
-0002f060: 6767 6572 4174 203d 2073 746f 704c 6f73  ggerAt = stopLos
-0002f070: 7354 7269 6767 6572 5072 6963 6520 6966  sTriggerPrice if
-0002f080: 2069 7353 746f 704c 6f73 7354 7269 6767   isStopLossTrigg
-0002f090: 6572 4f72 6465 7220 656c 7365 2074 616b  erOrder else tak
-0002f0a0: 6550 726f 6669 7454 7269 6767 6572 5072  eProfitTriggerPr
-0002f0b0: 6963 650a 2020 2020 2020 2020 2020 2020  ice.            
-0002f0c0: 7072 6563 6973 6554 7269 6767 6572 5072  preciseTriggerPr
-0002f0d0: 6963 6520 3d20 7365 6c66 2e70 7269 6365  ice = self.price
-0002f0e0: 5f74 6f5f 7072 6563 6973 696f 6e28 7379  _to_precision(sy
-0002f0f0: 6d62 6f6c 2c20 7472 6967 6765 7241 7429  mbol, triggerAt)
-0002f100: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-0002f110: 7565 7374 5b27 7472 6967 6765 7250 7269  uest['triggerPri
-0002f120: 6365 275d 203d 2070 7265 6369 7365 5472  ce'] = preciseTr
-0002f130: 6967 6765 7250 7269 6365 0a20 2020 2020  iggerPrice.     
-0002f140: 2020 2020 2020 2069 7342 7579 203d 2073         isBuy = s
-0002f150: 6964 6520 3d3d 2027 6275 7927 0a20 2020  ide == 'buy'.   
-0002f160: 2020 2020 2020 2020 2023 206c 6f67 6963           # logic
-0002f170: 616c 2078 6f72 0a20 2020 2020 2020 2020  al xor.         
-0002f180: 2020 2061 7363 656e 6469 6e67 203d 206e     ascending = n
-0002f190: 6f74 2069 7342 7579 2069 6620 7374 6f70  ot isBuy if stop
-0002f1a0: 4c6f 7373 5472 6967 6765 7250 7269 6365  LossTriggerPrice
-0002f1b0: 2065 6c73 6520 6973 4275 790a 2020 2020   else isBuy.    
-0002f1c0: 2020 2020 2020 2020 6465 6c74 6120 3d20          delta = 
-0002f1d0: 7365 6c66 2e6e 756d 6265 725f 746f 5f73  self.number_to_s
-0002f1e0: 7472 696e 6728 6d61 726b 6574 5b27 7072  tring(market['pr
-0002f1f0: 6563 6973 696f 6e27 5d5b 2770 7269 6365  ecision']['price
-0002f200: 275d 290a 2020 2020 2020 2020 2020 2020  ']).            
-0002f210: 7265 7175 6573 745b 2762 6173 6550 7269  request['basePri
-0002f220: 6365 275d 203d 2050 7265 6369 7365 2e73  ce'] = Precise.s
-0002f230: 7472 696e 675f 6164 6428 7072 6563 6973  tring_add(precis
-0002f240: 6554 7269 6767 6572 5072 6963 652c 2064  eTriggerPrice, d
-0002f250: 656c 7461 2920 6966 2061 7363 656e 6469  elta) if ascendi
-0002f260: 6e67 2065 6c73 6520 5072 6563 6973 652e  ng else Precise.
-0002f270: 7374 7269 6e67 5f73 7562 2870 7265 6369  string_sub(preci
-0002f280: 7365 5472 6967 6765 7250 7269 6365 2c20  seTriggerPrice, 
-0002f290: 6465 6c74 6129 0a20 2020 2020 2020 2065  delta).        e
-0002f2a0: 6c69 6620 6973 5374 6f70 4c6f 7373 206f  lif isStopLoss o
-0002f2b0: 7220 6973 5461 6b65 5072 6f66 6974 3a0a  r isTakeProfit:.
-0002f2c0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-0002f2d0: 7353 746f 704c 6f73 733a 0a20 2020 2020  sStopLoss:.     
-0002f2e0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-0002f2f0: 7374 5b27 7374 6f70 4c6f 7373 275d 203d  st['stopLoss'] =
-0002f300: 2073 656c 662e 7072 6963 655f 746f 5f70   self.price_to_p
-0002f310: 7265 6369 7369 6f6e 2873 796d 626f 6c2c  recision(symbol,
-0002f320: 2073 746f 704c 6f73 7329 0a20 2020 2020   stopLoss).     
-0002f330: 2020 2020 2020 2069 6620 6973 5461 6b65         if isTake
-0002f340: 5072 6f66 6974 3a0a 2020 2020 2020 2020  Profit:.        
-0002f350: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0002f360: 2774 616b 6550 726f 6669 7427 5d20 3d20  'takeProfit'] = 
-0002f370: 7365 6c66 2e70 7269 6365 5f74 6f5f 7072  self.price_to_pr
-0002f380: 6563 6973 696f 6e28 7379 6d62 6f6c 2c20  ecision(symbol, 
-0002f390: 7461 6b65 5072 6f66 6974 290a 2020 2020  takeProfit).    
-0002f3a0: 2020 2020 636c 6965 6e74 4f72 6465 7249      clientOrderI
-0002f3b0: 6420 3d20 7365 6c66 2e73 6166 655f 7374  d = self.safe_st
-0002f3c0: 7269 6e67 2870 6172 616d 732c 2027 636c  ring(params, 'cl
-0002f3d0: 6965 6e74 4f72 6465 7249 6427 290a 2020  ientOrderId').  
-0002f3e0: 2020 2020 2020 6966 2063 6c69 656e 744f        if clientO
-0002f3f0: 7264 6572 4964 2069 7320 6e6f 7420 4e6f  rderId is not No
-0002f400: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-0002f410: 7265 7175 6573 745b 276f 7264 6572 4c69  request['orderLi
-0002f420: 6e6b 4964 275d 203d 2063 6c69 656e 744f  nkId'] = clientO
-0002f430: 7264 6572 4964 0a20 2020 2020 2020 2065  rderId.        e
-0002f440: 6c69 6620 6d61 726b 6574 5b27 6f70 7469  lif market['opti
-0002f450: 6f6e 275d 3a0a 2020 2020 2020 2020 2020  on']:.          
-0002f460: 2020 2320 6d61 6e64 6174 6f72 7920 6669    # mandatory fi
-0002f470: 656c 6420 666f 7220 6f70 7469 6f6e 730a  eld for options.
-0002f480: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-0002f490: 6573 745b 276f 7264 6572 4c69 6e6b 4964  est['orderLinkId
-0002f4a0: 275d 203d 2073 656c 662e 7575 6964 3136  '] = self.uuid16
-0002f4b0: 2829 0a20 2020 2020 2020 2070 6172 616d  ().        param
-0002f4c0: 7320 3d20 7365 6c66 2e6f 6d69 7428 7061  s = self.omit(pa
-0002f4d0: 7261 6d73 2c20 5b27 7374 6f70 5072 6963  rams, ['stopPric
-0002f4e0: 6527 2c20 2774 696d 6549 6e46 6f72 6365  e', 'timeInForce
-0002f4f0: 272c 2027 7472 6967 6765 7250 7269 6365  ', 'triggerPrice
-0002f500: 272c 2027 7374 6f70 4c6f 7373 5072 6963  ', 'stopLossPric
-0002f510: 6527 2c20 2774 616b 6550 726f 6669 7450  e', 'takeProfitP
-0002f520: 7269 6365 272c 2027 706f 7374 4f6e 6c79  rice', 'postOnly
-0002f530: 272c 2027 636c 6965 6e74 4f72 6465 7249  ', 'clientOrderI
-0002f540: 6427 2c20 2773 746f 704c 6f73 7327 2c20  d', 'stopLoss', 
-0002f550: 2774 616b 6550 726f 6669 7427 5d29 0a20  'takeProfit']). 
-0002f560: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
-0002f570: 3d20 6177 6169 7420 7365 6c66 2e70 7269  = await self.pri
-0002f580: 7661 7465 506f 7374 556e 6966 6965 6456  vatePostUnifiedV
-0002f590: 3350 7269 7661 7465 4f72 6465 7243 7265  3PrivateOrderCre
-0002f5a0: 6174 6528 7365 6c66 2e65 7874 656e 6428  ate(self.extend(
-0002f5b0: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
-0002f5c0: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
-0002f5d0: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-0002f5e0: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-0002f5f0: 6574 436f 6465 223a 2030 2c0a 2020 2020  etCode": 0,.    
-0002f600: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-0002f610: 6574 4d73 6722 3a20 224f 4b22 2c0a 2020  etMsg": "OK",.  
-0002f620: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0002f630: 2272 6573 756c 7422 3a20 7b0a 2020 2020  "result": {.    
-0002f640: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0002f650: 2020 226f 7264 6572 4964 223a 2022 6531    "orderId": "e1
-0002f660: 3062 3037 3136 2d37 6339 312d 3430 3931  0b0716-7c91-4091
-0002f670: 2d62 3938 612d 3166 6130 6634 3031 6337  -b98a-1fa0f401c7
-0002f680: 6435 222c 0a20 2020 2020 2020 2023 2020  d5",.        #  
-0002f690: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
-0002f6a0: 724c 696e 6b49 6422 3a20 2274 6573 7430  rLinkId": "test0
-0002f6b0: 3030 3030 3033 220a 2020 2020 2020 2020  000003".        
-0002f6c0: 2320 2020 2020 2020 2020 7d2c 0a20 2020  #         },.   
-0002f6d0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0002f6e0: 7265 7445 7874 496e 666f 223a 206e 756c  retExtInfo": nul
-0002f6f0: 6c2c 0a20 2020 2020 2020 2023 2020 2020  l,.        #    
-0002f700: 2020 2020 2022 7469 6d65 223a 2031 3636       "time": 166
-0002f710: 3434 3431 3334 3432 3338 0a20 2020 2020  4441344238.     
-0002f720: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
-0002f730: 2020 2023 0a20 2020 2020 2020 206f 7264     #.        ord
-0002f740: 6572 203d 2073 656c 662e 7361 6665 5f76  er = self.safe_v
-0002f750: 616c 7565 2872 6573 706f 6e73 652c 2027  alue(response, '
-0002f760: 7265 7375 6c74 272c 207b 7d29 0a20 2020  result', {}).   
-0002f770: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-0002f780: 2e70 6172 7365 5f6f 7264 6572 286f 7264  .parse_order(ord
-0002f790: 6572 290a 0a20 2020 2061 7379 6e63 2064  er)..    async d
-0002f7a0: 6566 2063 7265 6174 655f 636f 6e74 7261  ef create_contra
-0002f7b0: 6374 5f76 335f 6f72 6465 7228 7365 6c66  ct_v3_order(self
-0002f7c0: 2c20 7379 6d62 6f6c 3a20 7374 722c 2074  , symbol: str, t
-0002f7d0: 7970 652c 2073 6964 652c 2061 6d6f 756e  ype, side, amoun
-0002f7e0: 742c 2070 7269 6365 3d4e 6f6e 652c 2070  t, price=None, p
-0002f7f0: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
-0002f800: 2020 2061 7761 6974 2073 656c 662e 6c6f     await self.lo
-0002f810: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
-0002f820: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
-0002f830: 6c66 2e6d 6172 6b65 7428 7379 6d62 6f6c  lf.market(symbol
-0002f840: 290a 2020 2020 2020 2020 6c6f 7765 7243  ).        lowerC
-0002f850: 6173 6554 7970 6520 3d20 7479 7065 2e6c  aseType = type.l
-0002f860: 6f77 6572 2829 0a20 2020 2020 2020 2069  ower().        i
-0002f870: 6620 2870 7269 6365 2069 7320 4e6f 6e65  f (price is None
-0002f880: 2920 616e 6420 286c 6f77 6572 4361 7365  ) and (lowerCase
-0002f890: 5479 7065 203d 3d20 276c 696d 6974 2729  Type == 'limit')
-0002f8a0: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-0002f8b0: 6973 6520 4172 6775 6d65 6e74 7352 6571  ise ArgumentsReq
-0002f8c0: 7569 7265 6428 7365 6c66 2e69 6420 2b20  uired(self.id + 
-0002f8d0: 2720 6372 6561 7465 436f 6e74 7261 6374  ' createContract
-0002f8e0: 5633 4f72 6465 7220 7265 7175 6972 6573  V3Order requires
-0002f8f0: 2061 2070 7269 6365 2061 7267 756d 656e   a price argumen
-0002f900: 7420 666f 7220 6c69 6d69 7420 6f72 6465  t for limit orde
-0002f910: 7273 2729 0a20 2020 2020 2020 2072 6571  rs').        req
-0002f920: 7565 7374 203d 207b 0a20 2020 2020 2020  uest = {.       
-0002f930: 2020 2020 2027 7379 6d62 6f6c 273a 206d       'symbol': m
-0002f940: 6172 6b65 745b 2769 6427 5d2c 0a20 2020  arket['id'],.   
-0002f950: 2020 2020 2020 2020 2027 7369 6465 273a           'side':
-0002f960: 2073 656c 662e 6361 7069 7461 6c69 7a65   self.capitalize
-0002f970: 2873 6964 6529 2c0a 2020 2020 2020 2020  (side),.        
-0002f980: 2020 2020 276f 7264 6572 5479 7065 273a      'orderType':
-0002f990: 2073 656c 662e 6361 7069 7461 6c69 7a65   self.capitalize
-0002f9a0: 286c 6f77 6572 4361 7365 5479 7065 292c  (lowerCaseType),
-0002f9b0: 2020 2320 6c69 6d69 7420 6f72 206d 6172    # limit or mar
-0002f9c0: 6b65 740a 2020 2020 2020 2020 2020 2020  ket.            
-0002f9d0: 2774 696d 6549 6e46 6f72 6365 273a 2027  'timeInForce': '
-0002f9e0: 476f 6f64 5469 6c6c 4361 6e63 656c 272c  GoodTillCancel',
-0002f9f0: 2020 2320 496d 6d65 6469 6174 654f 7243    # ImmediateOrC
-0002fa00: 616e 6365 6c2c 2046 696c 6c4f 724b 696c  ancel, FillOrKil
-0002fa10: 6c2c 2050 6f73 744f 6e6c 790a 2020 2020  l, PostOnly.    
-0002fa20: 2020 2020 2020 2020 2771 7479 273a 2073          'qty': s
-0002fa30: 656c 662e 616d 6f75 6e74 5f74 6f5f 7072  elf.amount_to_pr
-0002fa40: 6563 6973 696f 6e28 7379 6d62 6f6c 2c20  ecision(symbol, 
-0002fa50: 616d 6f75 6e74 292c 0a20 2020 2020 2020  amount),.       
-0002fa60: 2020 2020 2023 2027 7461 6b65 5072 6f66       # 'takeProf
-0002fa70: 6974 273a 2031 3233 2e34 352c 2020 2320  it': 123.45,  # 
-0002fa80: 7461 6b65 2070 726f 6669 7420 7072 6963  take profit pric
-0002fa90: 652c 206f 6e6c 7920 7461 6b65 2065 6666  e, only take eff
-0002faa0: 6563 7420 7570 6f6e 206f 7065 6e69 6e67  ect upon opening
-0002fab0: 2074 6865 2070 6f73 6974 696f 6e0a 2020   the position.  
-0002fac0: 2020 2020 2020 2020 2020 2320 2773 746f            # 'sto
-0002fad0: 704c 6f73 7327 3a20 3132 332e 3435 2c20  pLoss': 123.45, 
-0002fae0: 2023 2073 746f 7020 6c6f 7373 2070 7269   # stop loss pri
-0002faf0: 6365 2c20 6f6e 6c79 2074 616b 6520 6566  ce, only take ef
-0002fb00: 6665 6374 2075 706f 6e20 6f70 656e 696e  fect upon openin
-0002fb10: 6720 7468 6520 706f 7369 7469 6f6e 0a20  g the position. 
-0002fb20: 2020 2020 2020 2020 2020 2023 2027 7265             # 're
-0002fb30: 6475 6365 4f6e 6c79 273a 2046 616c 7365  duceOnly': False
-0002fb40: 2c20 2023 2072 6564 7563 6520 6f6e 6c79  ,  # reduce only
-0002fb50: 2c20 7265 7175 6972 6564 2066 6f72 206c  , required for l
-0002fb60: 696e 6561 7220 6f72 6465 7273 0a20 2020  inear orders.   
-0002fb70: 2020 2020 2020 2020 2023 2077 6865 6e20           # when 
-0002fb80: 6372 6561 7469 6e67 2061 2063 6c6f 7369  creating a closi
-0002fb90: 6e67 206f 7264 6572 2c20 6279 6269 7420  ng order, bybit 
-0002fba0: 7265 636f 6d6d 656e 6473 2061 2054 7275  recommends a Tru
-0002fbb0: 6520 7661 6c75 6520 666f 720a 2020 2020  e value for.    
-0002fbc0: 2020 2020 2020 2020 2320 2063 6c6f 7365          #  close
-0002fbd0: 4f6e 5472 6967 6765 7220 746f 2061 766f  OnTrigger to avo
-0002fbe0: 6964 2066 6169 6c69 6e67 2064 7565 2074  id failing due t
-0002fbf0: 6f20 696e 7375 6666 6963 6965 6e74 2061  o insufficient a
-0002fc00: 7661 696c 6162 6c65 206d 6172 6769 6e0a  vailable margin.
-0002fc10: 2020 2020 2020 2020 2020 2020 2320 2763              # 'c
-0002fc20: 6c6f 7365 4f6e 5472 6967 6765 7227 3a20  loseOnTrigger': 
-0002fc30: 4661 6c73 652c 2072 6571 7569 7265 6420  False, required 
-0002fc40: 666f 7220 6c69 6e65 6172 206f 7264 6572  for linear order
-0002fc50: 730a 2020 2020 2020 2020 2020 2020 2320  s.            # 
-0002fc60: 276f 7264 6572 4c69 6e6b 4964 273a 2027  'orderLinkId': '
-0002fc70: 7374 7269 6e67 272c 2020 2320 756e 6971  string',  # uniq
-0002fc80: 7565 2063 6c69 656e 7420 6f72 6465 7220  ue client order 
-0002fc90: 6964 2c20 6d61 7820 3336 2063 6861 7261  id, max 36 chara
-0002fca0: 6374 6572 730a 2020 2020 2020 2020 2020  cters.          
-0002fcb0: 2020 2320 2774 7269 6767 6572 5072 6963    # 'triggerPric
-0002fcc0: 6527 3a20 3132 332e 3435 2c20 2023 2074  e': 123.45,  # t
-0002fcd0: 7269 6767 6572 2070 7269 6365 2c20 7265  rigger price, re
-0002fce0: 7175 6972 6564 2066 6f72 2063 6f6e 6469  quired for condi
-0002fcf0: 7469 6f6e 616c 206f 7264 6572 730a 2020  tional orders.  
-0002fd00: 2020 2020 2020 2020 2020 2320 2774 7269            # 'tri
-0002fd10: 6767 6572 4279 273a 2027 4d61 726b 5072  ggerBy': 'MarkPr
-0002fd20: 6963 6527 2c20 2023 2049 6e64 6578 5072  ice',  # IndexPr
-0002fd30: 6963 652c 204d 6172 6b50 7269 6365 0a20  ice, MarkPrice. 
-0002fd40: 2020 2020 2020 2020 2020 2023 2027 7470             # 'tp
-0002fd50: 7472 6967 6765 7262 7927 3a20 274d 6172  triggerby': 'Mar
-0002fd60: 6b50 7269 6365 272c 2020 2320 496e 6465  kPrice',  # Inde
-0002fd70: 7850 7269 6365 2c20 4d61 726b 5072 6963  xPrice, MarkPric
-0002fd80: 650a 2020 2020 2020 2020 2020 2020 2320  e.            # 
-0002fd90: 2773 6c54 7269 6767 6572 4279 273a 2027  'slTriggerBy': '
-0002fda0: 4d61 726b 5072 6963 6527 2c20 2023 2049  MarkPrice',  # I
-0002fdb0: 6e64 6578 5072 6963 652c 204d 6172 6b50  ndexPrice, MarkP
-0002fdc0: 7269 6365 0a20 2020 2020 2020 2020 2020  rice.           
-0002fdd0: 2023 2027 706f 7369 7469 6f6e 4964 7827   # 'positionIdx'
-0002fde0: 3a20 302c 2020 2320 506f 7369 7469 6f6e  : 0,  # Position
-0002fdf0: 206d 6f64 652e 2075 6e69 6669 6564 206d   mode. unified m
-0002fe00: 6172 6769 6e20 6163 636f 756e 7420 6973  argin account is
-0002fe10: 206f 6e6c 7920 6176 6169 6c61 626c 6520   only available 
-0002fe20: 696e 204f 6e65 2d57 6179 206d 6f64 652c  in One-Way mode,
-0002fe30: 2077 6869 6368 2069 7320 300a 2020 2020   which is 0.    
-0002fe40: 2020 2020 2020 2020 2320 2774 7269 6767          # 'trigg
-0002fe50: 6572 4469 7265 6374 696f 6e27 3a20 312c  erDirection': 1,
-0002fe60: 2020 2320 5472 6967 6765 7220 6469 7265    # Trigger dire
-0002fe70: 6374 696f 6e2e 204d 6169 6e6c 7920 7573  ction. Mainly us
-0002fe80: 6564 2069 6e20 636f 6e64 6974 696f 6e61  ed in conditiona
-0002fe90: 6c20 6f72 6465 722e 2054 7269 6767 6572  l order. Trigger
-0002fea0: 2074 6865 206f 7264 6572 2077 6865 6e20   the order when 
-0002feb0: 6d61 726b 6574 2070 7269 6365 2072 6973  market price ris
-0002fec0: 6573 2074 6f20 7472 6967 6765 7250 7269  es to triggerPri
-0002fed0: 6365 206f 7220 6661 6c6c 7320 746f 2074  ce or falls to t
-0002fee0: 7269 6767 6572 5072 6963 652e 2031 3a20  riggerPrice. 1: 
-0002fef0: 7269 7365 3b20 323a 2066 616c 6c0a 2020  rise; 2: fall.  
-0002ff00: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-0002ff10: 6966 206d 6172 6b65 745b 2766 7574 7572  if market['futur
-0002ff20: 6527 5d3a 0a20 2020 2020 2020 2020 2020  e']:.           
-0002ff30: 2070 6f73 6974 696f 6e49 6478 203d 2073   positionIdx = s
-0002ff40: 656c 662e 7361 6665 5f69 6e74 6567 6572  elf.safe_integer
-0002ff50: 2870 6172 616d 732c 2027 706f 7369 7469  (params, 'positi
-0002ff60: 6f6e 5f69 6478 272c 2030 2920 2023 2030  on_idx', 0)  # 0
-0002ff70: 204f 6e65 2d57 6179 204d 6f64 652c 2031   One-Way Mode, 1
-0002ff80: 2042 7579 2d73 6964 652c 2032 2053 656c   Buy-side, 2 Sel
-0002ff90: 6c2d 7369 6465 0a20 2020 2020 2020 2020  l-side.         
-0002ffa0: 2020 2072 6571 7565 7374 5b27 706f 7369     request['posi
-0002ffb0: 7469 6f6e 5f69 6478 275d 203d 2070 6f73  tion_idx'] = pos
-0002ffc0: 6974 696f 6e49 6478 0a20 2020 2020 2020  itionIdx.       
-0002ffd0: 2020 2020 2070 6172 616d 7320 3d20 7365       params = se
-0002ffe0: 6c66 2e6f 6d69 7428 7061 7261 6d73 2c20  lf.omit(params, 
-0002fff0: 2770 6f73 6974 696f 6e5f 6964 7827 290a  'position_idx').
-00030000: 2020 2020 2020 2020 6973 4d61 726b 6574          isMarket
-00030010: 203d 206c 6f77 6572 4361 7365 5479 7065   = lowerCaseType
-00030020: 203d 3d20 276d 6172 6b65 7427 0a20 2020   == 'market'.   
-00030030: 2020 2020 2069 734c 696d 6974 203d 206c       isLimit = l
-00030040: 6f77 6572 4361 7365 5479 7065 203d 3d20  owerCaseType == 
-00030050: 276c 696d 6974 270a 2020 2020 2020 2020  'limit'.        
-00030060: 6966 2069 734c 696d 6974 3a0a 2020 2020  if isLimit:.    
-00030070: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-00030080: 2770 7269 6365 275d 203d 2073 656c 662e  'price'] = self.
-00030090: 7072 6963 655f 746f 5f70 7265 6369 7369  price_to_precisi
-000300a0: 6f6e 2873 796d 626f 6c2c 2070 7269 6365  on(symbol, price
-000300b0: 290a 2020 2020 2020 2020 7469 6d65 496e  ).        timeIn
-000300c0: 466f 7263 6520 3d20 7365 6c66 2e73 6166  Force = self.saf
-000300d0: 655f 7374 7269 6e67 5f6c 6f77 6572 2870  e_string_lower(p
-000300e0: 6172 616d 732c 2027 7469 6d65 496e 466f  arams, 'timeInFo
-000300f0: 7263 6527 2920 2023 2073 616d 6520 7370  rce')  # same sp
-00030100: 6563 6966 6963 2070 6172 616d 0a20 2020  ecific param.   
-00030110: 2020 2020 2070 6f73 744f 6e6c 7920 3d20       postOnly = 
-00030120: 4e6f 6e65 0a20 2020 2020 2020 2070 6f73  None.        pos
-00030130: 744f 6e6c 792c 2070 6172 616d 7320 3d20  tOnly, params = 
-00030140: 7365 6c66 2e68 616e 646c 655f 706f 7374  self.handle_post
-00030150: 5f6f 6e6c 7928 6973 4d61 726b 6574 2c20  _only(isMarket, 
-00030160: 7469 6d65 496e 466f 7263 6520 3d3d 2027  timeInForce == '
-00030170: 506f 7374 4f6e 6c79 272c 2070 6172 616d  PostOnly', param
-00030180: 7329 0a20 2020 2020 2020 2069 6620 706f  s).        if po
-00030190: 7374 4f6e 6c79 3a0a 2020 2020 2020 2020  stOnly:.        
-000301a0: 2020 2020 7265 7175 6573 745b 2774 696d      request['tim
-000301b0: 6549 6e46 6f72 6365 275d 203d 2027 506f  eInForce'] = 'Po
-000301c0: 7374 4f6e 6c79 270a 2020 2020 2020 2020  stOnly'.        
-000301d0: 656c 6966 2074 696d 6549 6e46 6f72 6365  elif timeInForce
-000301e0: 203d 3d20 2767 7463 273a 0a20 2020 2020   == 'gtc':.     
-000301f0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-00030200: 7469 6d65 496e 466f 7263 6527 5d20 3d20  timeInForce'] = 
-00030210: 2747 6f6f 6454 696c 6c43 616e 6365 6c27  'GoodTillCancel'
-00030220: 0a20 2020 2020 2020 2065 6c69 6620 7469  .        elif ti
-00030230: 6d65 496e 466f 7263 6520 3d3d 2027 666f  meInForce == 'fo
-00030240: 6b27 3a0a 2020 2020 2020 2020 2020 2020  k':.            
-00030250: 7265 7175 6573 745b 2774 696d 6549 6e46  request['timeInF
-00030260: 6f72 6365 275d 203d 2027 4669 6c6c 4f72  orce'] = 'FillOr
-00030270: 4b69 6c6c 270a 2020 2020 2020 2020 656c  Kill'.        el
-00030280: 6966 2074 696d 6549 6e46 6f72 6365 203d  if timeInForce =
-00030290: 3d20 2769 6f63 273a 0a20 2020 2020 2020  = 'ioc':.       
-000302a0: 2020 2020 2072 6571 7565 7374 5b27 7469       request['ti
-000302b0: 6d65 496e 466f 7263 6527 5d20 3d20 2749  meInForce'] = 'I
-000302c0: 6d6d 6564 6961 7465 4f72 4361 6e63 656c  mmediateOrCancel
-000302d0: 270a 2020 2020 2020 2020 7472 6967 6765  '.        trigge
-000302e0: 7250 7269 6365 203d 2073 656c 662e 7361  rPrice = self.sa
-000302f0: 6665 5f6e 756d 6265 725f 3228 7061 7261  fe_number_2(para
-00030300: 6d73 2c20 2774 7269 6767 6572 5072 6963  ms, 'triggerPric
-00030310: 6527 2c20 2773 746f 7050 7269 6365 2729  e', 'stopPrice')
-00030320: 0a20 2020 2020 2020 2073 746f 704c 6f73  .        stopLos
-00030330: 7354 7269 6767 6572 5072 6963 6520 3d20  sTriggerPrice = 
-00030340: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
-00030350: 2870 6172 616d 732c 2027 7374 6f70 4c6f  (params, 'stopLo
-00030360: 7373 5072 6963 6527 2c20 7472 6967 6765  ssPrice', trigge
-00030370: 7250 7269 6365 290a 2020 2020 2020 2020  rPrice).        
-00030380: 7461 6b65 5072 6f66 6974 5472 6967 6765  takeProfitTrigge
-00030390: 7250 7269 6365 203d 2073 656c 662e 7361  rPrice = self.sa
-000303a0: 6665 5f6e 756d 6265 7228 7061 7261 6d73  fe_number(params
-000303b0: 2c20 2774 616b 6550 726f 6669 7450 7269  , 'takeProfitPri
-000303c0: 6365 2729 0a20 2020 2020 2020 2073 746f  ce').        sto
-000303d0: 704c 6f73 7320 3d20 7365 6c66 2e73 6166  pLoss = self.saf
-000303e0: 655f 6e75 6d62 6572 2870 6172 616d 732c  e_number(params,
-000303f0: 2027 7374 6f70 4c6f 7373 2729 0a20 2020   'stopLoss').   
-00030400: 2020 2020 2074 616b 6550 726f 6669 7420       takeProfit 
-00030410: 3d20 7365 6c66 2e73 6166 655f 6e75 6d62  = self.safe_numb
-00030420: 6572 2870 6172 616d 732c 2027 7461 6b65  er(params, 'take
-00030430: 5072 6f66 6974 2729 0a20 2020 2020 2020  Profit').       
-00030440: 2069 7353 746f 704c 6f73 7354 7269 6767   isStopLossTrigg
-00030450: 6572 4f72 6465 7220 3d20 7374 6f70 4c6f  erOrder = stopLo
-00030460: 7373 5472 6967 6765 7250 7269 6365 2069  ssTriggerPrice i
-00030470: 7320 6e6f 7420 4e6f 6e65 0a20 2020 2020  s not None.     
-00030480: 2020 2069 7354 616b 6550 726f 6669 7454     isTakeProfitT
-00030490: 7269 6767 6572 4f72 6465 7220 3d20 7461  riggerOrder = ta
-000304a0: 6b65 5072 6f66 6974 5472 6967 6765 7250  keProfitTriggerP
-000304b0: 7269 6365 2069 7320 6e6f 7420 4e6f 6e65  rice is not None
-000304c0: 0a20 2020 2020 2020 2069 7353 746f 704c  .        isStopL
-000304d0: 6f73 7320 3d20 7374 6f70 4c6f 7373 2069  oss = stopLoss i
-000304e0: 7320 6e6f 7420 4e6f 6e65 0a20 2020 2020  s not None.     
-000304f0: 2020 2069 7354 616b 6550 726f 6669 7420     isTakeProfit 
-00030500: 3d20 7461 6b65 5072 6f66 6974 2069 7320  = takeProfit is 
-00030510: 6e6f 7420 4e6f 6e65 0a20 2020 2020 2020  not None.       
-00030520: 2069 7342 7579 203d 2073 6964 6520 3d3d   isBuy = side ==
-00030530: 2027 6275 7927 0a20 2020 2020 2020 2061   'buy'.        a
-00030540: 7363 656e 6469 6e67 203d 206e 6f74 2069  scending = not i
-00030550: 7342 7579 2069 6620 7374 6f70 4c6f 7373  sBuy if stopLoss
-00030560: 5472 6967 6765 7250 7269 6365 2065 6c73  TriggerPrice els
-00030570: 6520 6973 4275 790a 2020 2020 2020 2020  e isBuy.        
-00030580: 6966 2074 7269 6767 6572 5072 6963 6520  if triggerPrice 
-00030590: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-000305a0: 2020 2020 2020 2020 2072 6571 7565 7374           request
-000305b0: 5b27 7472 6967 6765 7244 6972 6563 7469  ['triggerDirecti
-000305c0: 6f6e 275d 203d 2032 2069 6620 6173 6365  on'] = 2 if asce
-000305d0: 6e64 696e 6720 656c 7365 2031 0a20 2020  nding else 1.   
-000305e0: 2020 2020 2020 2020 2072 6571 7565 7374           request
-000305f0: 5b27 7472 6967 6765 7250 7269 6365 275d  ['triggerPrice']
-00030600: 203d 2073 656c 662e 7072 6963 655f 746f   = self.price_to
-00030610: 5f70 7265 6369 7369 6f6e 2873 796d 626f  _precision(symbo
-00030620: 6c2c 2074 7269 6767 6572 5072 6963 6529  l, triggerPrice)
-00030630: 0a20 2020 2020 2020 2065 6c69 6620 6973  .        elif is
-00030640: 5374 6f70 4c6f 7373 5472 6967 6765 724f  StopLossTriggerO
-00030650: 7264 6572 206f 7220 6973 5461 6b65 5072  rder or isTakePr
-00030660: 6f66 6974 5472 6967 6765 724f 7264 6572  ofitTriggerOrder
-00030670: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00030680: 7175 6573 745b 2774 7269 6767 6572 4469  quest['triggerDi
-00030690: 7265 6374 696f 6e27 5d20 3d20 3220 6966  rection'] = 2 if
-000306a0: 2061 7363 656e 6469 6e67 2065 6c73 6520   ascending else 
-000306b0: 310a 2020 2020 2020 2020 2020 2020 7472  1.            tr
-000306c0: 6967 6765 7250 7269 6365 203d 2073 746f  iggerPrice = sto
-000306d0: 704c 6f73 7354 7269 6767 6572 5072 6963  pLossTriggerPric
-000306e0: 6520 6966 2069 7353 746f 704c 6f73 7354  e if isStopLossT
-000306f0: 7269 6767 6572 4f72 6465 7220 656c 7365  riggerOrder else
-00030700: 2074 616b 6550 726f 6669 7454 7269 6767   takeProfitTrigg
-00030710: 6572 5072 6963 650a 2020 2020 2020 2020  erPrice.        
-00030720: 2020 2020 7265 7175 6573 745b 2774 7269      request['tri
-00030730: 6767 6572 5072 6963 6527 5d20 3d20 7365  ggerPrice'] = se
-00030740: 6c66 2e70 7269 6365 5f74 6f5f 7072 6563  lf.price_to_prec
-00030750: 6973 696f 6e28 7379 6d62 6f6c 2c20 7472  ision(symbol, tr
-00030760: 6967 6765 7250 7269 6365 290a 2020 2020  iggerPrice).    
-00030770: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-00030780: 2772 6564 7563 654f 6e6c 7927 5d20 3d20  'reduceOnly'] = 
-00030790: 5472 7565 0a20 2020 2020 2020 2065 6c69  True.        eli
-000307a0: 6620 6973 5374 6f70 4c6f 7373 206f 7220  f isStopLoss or 
-000307b0: 6973 5461 6b65 5072 6f66 6974 3a0a 2020  isTakeProfit:.  
-000307c0: 2020 2020 2020 2020 2020 6966 2069 7353            if isS
-000307d0: 746f 704c 6f73 733a 0a20 2020 2020 2020  topLoss:.       
-000307e0: 2020 2020 2020 2020 2072 6571 7565 7374           request
-000307f0: 5b27 7374 6f70 4c6f 7373 275d 203d 2073  ['stopLoss'] = s
-00030800: 656c 662e 7072 6963 655f 746f 5f70 7265  elf.price_to_pre
-00030810: 6369 7369 6f6e 2873 796d 626f 6c2c 2073  cision(symbol, s
-00030820: 746f 704c 6f73 7329 0a20 2020 2020 2020  topLoss).       
-00030830: 2020 2020 2069 6620 6973 5461 6b65 5072       if isTakePr
-00030840: 6f66 6974 3a0a 2020 2020 2020 2020 2020  ofit:.          
-00030850: 2020 2020 2020 7265 7175 6573 745b 2774        request['t
-00030860: 616b 6550 726f 6669 7427 5d20 3d20 7365  akeProfit'] = se
-00030870: 6c66 2e70 7269 6365 5f74 6f5f 7072 6563  lf.price_to_prec
-00030880: 6973 696f 6e28 7379 6d62 6f6c 2c20 7461  ision(symbol, ta
-00030890: 6b65 5072 6f66 6974 290a 2020 2020 2020  keProfit).      
-000308a0: 2020 636c 6965 6e74 4f72 6465 7249 6420    clientOrderId 
-000308b0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-000308c0: 6e67 2870 6172 616d 732c 2027 636c 6965  ng(params, 'clie
-000308d0: 6e74 4f72 6465 7249 6427 290a 2020 2020  ntOrderId').    
-000308e0: 2020 2020 6966 2063 6c69 656e 744f 7264      if clientOrd
-000308f0: 6572 4964 2069 7320 6e6f 7420 4e6f 6e65  erId is not None
-00030900: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00030910: 7175 6573 745b 276f 7264 6572 4c69 6e6b  quest['orderLink
-00030920: 4964 275d 203d 2063 6c69 656e 744f 7264  Id'] = clientOrd
-00030930: 6572 4964 0a20 2020 2020 2020 2065 6c69  erId.        eli
-00030940: 6620 6d61 726b 6574 5b27 6f70 7469 6f6e  f market['option
-00030950: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
-00030960: 2320 6d61 6e64 6174 6f72 7920 6669 656c  # mandatory fiel
-00030970: 6420 666f 7220 6f70 7469 6f6e 730a 2020  d for options.  
-00030980: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-00030990: 745b 276f 7264 6572 4c69 6e6b 4964 275d  t['orderLinkId']
-000309a0: 203d 2073 656c 662e 7575 6964 3136 2829   = self.uuid16()
-000309b0: 0a20 2020 2020 2020 2070 6172 616d 7320  .        params 
-000309c0: 3d20 7365 6c66 2e6f 6d69 7428 7061 7261  = self.omit(para
-000309d0: 6d73 2c20 5b27 7374 6f70 5072 6963 6527  ms, ['stopPrice'
-000309e0: 2c20 2774 696d 6549 6e46 6f72 6365 272c  , 'timeInForce',
-000309f0: 2027 7374 6f70 4c6f 7373 5072 6963 6527   'stopLossPrice'
-00030a00: 2c20 2774 616b 6550 726f 6669 7450 7269  , 'takeProfitPri
-00030a10: 6365 272c 2027 706f 7374 4f6e 6c79 272c  ce', 'postOnly',
-00030a20: 2027 636c 6965 6e74 4f72 6465 7249 6427   'clientOrderId'
-00030a30: 2c20 2774 7269 6767 6572 5072 6963 6527  , 'triggerPrice'
-00030a40: 2c20 2773 746f 704c 6f73 7327 2c20 2774  , 'stopLoss', 't
-00030a50: 616b 6550 726f 6669 7427 5d29 0a20 2020  akeProfit']).   
-00030a60: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
-00030a70: 6177 6169 7420 7365 6c66 2e70 7269 7661  await self.priva
-00030a80: 7465 506f 7374 436f 6e74 7261 6374 5633  tePostContractV3
-00030a90: 5072 6976 6174 654f 7264 6572 4372 6561  PrivateOrderCrea
-00030aa0: 7465 2873 656c 662e 6578 7465 6e64 2872  te(self.extend(r
-00030ab0: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
-00030ac0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00030ad0: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
-00030ae0: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-00030af0: 7443 6f64 6522 3a20 302c 0a20 2020 2020  tCode": 0,.     
-00030b00: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-00030b10: 744d 7367 223a 2022 4f4b 222c 0a20 2020  tMsg": "OK",.   
-00030b20: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00030b30: 7265 7375 6c74 223a 207b 0a20 2020 2020  result": {.     
-00030b40: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00030b50: 2022 6f72 6465 7249 6422 3a20 2265 3130   "orderId": "e10
-00030b60: 6230 3731 362d 3763 3931 2d34 3039 312d  b0716-7c91-4091-
-00030b70: 6239 3861 2d31 6661 3066 3430 3163 3764  b98a-1fa0f401c7d
-00030b80: 3522 2c0a 2020 2020 2020 2020 2320 2020  5",.        #   
-00030b90: 2020 2020 2020 2020 2020 226f 7264 6572            "order
-00030ba0: 4c69 6e6b 4964 223a 2022 7465 7374 3030  LinkId": "test00
-00030bb0: 3030 3030 3322 0a20 2020 2020 2020 2023  00003".        #
-00030bc0: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
-00030bd0: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-00030be0: 6574 4578 7449 6e66 6f22 3a20 6e75 6c6c  etExtInfo": null
-00030bf0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00030c00: 2020 2020 2274 696d 6522 3a20 3136 3634      "time": 1664
-00030c10: 3434 3133 3434 3233 380a 2020 2020 2020  441344238.      
-00030c20: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
-00030c30: 2020 230a 2020 2020 2020 2020 6f72 6465    #.        orde
-00030c40: 7220 3d20 7365 6c66 2e73 6166 655f 7661  r = self.safe_va
-00030c50: 6c75 6528 7265 7370 6f6e 7365 2c20 2772  lue(response, 'r
-00030c60: 6573 756c 7427 2c20 7b7d 290a 2020 2020  esult', {}).    
-00030c70: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00030c80: 7061 7273 655f 6f72 6465 7228 6f72 6465  parse_order(orde
-00030c90: 7229 0a0a 2020 2020 6173 796e 6320 6465  r)..    async de
-00030ca0: 6620 6372 6561 7465 5f75 7364 635f 6f72  f create_usdc_or
-00030cb0: 6465 7228 7365 6c66 2c20 7379 6d62 6f6c  der(self, symbol
-00030cc0: 3a20 7374 722c 2074 7970 652c 2073 6964  : str, type, sid
-00030cd0: 652c 2061 6d6f 756e 742c 2070 7269 6365  e, amount, price
-00030ce0: 3d4e 6f6e 652c 2070 6172 616d 733d 7b7d  =None, params={}
-00030cf0: 293a 0a20 2020 2020 2020 2061 7761 6974  ):.        await
-00030d00: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
-00030d10: 7473 2829 0a20 2020 2020 2020 206d 6172  ts().        mar
-00030d20: 6b65 7420 3d20 7365 6c66 2e6d 6172 6b65  ket = self.marke
-00030d30: 7428 7379 6d62 6f6c 290a 2020 2020 2020  t(symbol).      
-00030d40: 2020 6966 2074 7970 6520 3d3d 2027 6d61    if type == 'ma
-00030d50: 726b 6574 273a 0a20 2020 2020 2020 2020  rket':.         
-00030d60: 2020 2072 6169 7365 204e 6f74 5375 7070     raise NotSupp
-00030d70: 6f72 7465 6428 7365 6c66 2e69 6420 2b20  orted(self.id + 
-00030d80: 2763 7265 6174 654f 7264 6572 2064 6f65  'createOrder doe
-00030d90: 7320 6e6f 7420 616c 6c6f 7720 6d61 726b  s not allow mark
-00030da0: 6574 206f 7264 6572 7320 666f 7220 2720  et orders for ' 
-00030db0: 2b20 7379 6d62 6f6c 202b 2027 206d 6172  + symbol + ' mar
-00030dc0: 6b65 7473 2729 0a20 2020 2020 2020 206c  kets').        l
-00030dd0: 6f77 6572 4361 7365 5479 7065 203d 2074  owerCaseType = t
-00030de0: 7970 652e 6c6f 7765 7228 290a 2020 2020  ype.lower().    
-00030df0: 2020 2020 6966 2028 7072 6963 6520 6973      if (price is
-00030e00: 204e 6f6e 6529 2061 6e64 2028 6c6f 7765   None) and (lowe
-00030e10: 7243 6173 6554 7970 6520 3d3d 2027 6c69  rCaseType == 'li
-00030e20: 6d69 7427 293a 0a20 2020 2020 2020 2020  mit'):.         
-00030e30: 2020 2072 6169 7365 2041 7267 756d 656e     raise Argumen
-00030e40: 7473 5265 7175 6972 6564 2873 656c 662e  tsRequired(self.
-00030e50: 6964 202b 2027 2063 7265 6174 654f 7264  id + ' createOrd
-00030e60: 6572 2072 6571 7569 7265 7320 6120 7072  er requires a pr
-00030e70: 6963 6520 6172 6775 6d65 6e74 2066 6f72  ice argument for
-00030e80: 206c 696d 6974 206f 7264 6572 7327 290a   limit orders').
-00030e90: 2020 2020 2020 2020 7265 7175 6573 7420          request 
-00030ea0: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-00030eb0: 2773 796d 626f 6c27 3a20 6d61 726b 6574  'symbol': market
-00030ec0: 5b27 6964 275d 2c0a 2020 2020 2020 2020  ['id'],.        
-00030ed0: 2020 2020 2773 6964 6527 3a20 7365 6c66      'side': self
-00030ee0: 2e63 6170 6974 616c 697a 6528 7369 6465  .capitalize(side
-00030ef0: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
-00030f00: 6f72 6465 7254 7970 6527 3a20 7365 6c66  orderType': self
-00030f10: 2e63 6170 6974 616c 697a 6528 6c6f 7765  .capitalize(lowe
-00030f20: 7243 6173 6554 7970 6529 2c20 2023 206c  rCaseType),  # l
-00030f30: 696d 6974 206f 7220 6d61 726b 6574 0a20  imit or market. 
-00030f40: 2020 2020 2020 2020 2020 2027 7469 6d65             'time
-00030f50: 496e 466f 7263 6527 3a20 2747 6f6f 6454  InForce': 'GoodT
-00030f60: 696c 6c43 616e 6365 6c27 2c20 2023 2049  illCancel',  # I
-00030f70: 6d6d 6564 6961 7465 4f72 4361 6e63 656c  mmediateOrCancel
-00030f80: 2c20 4669 6c6c 4f72 4b69 6c6c 2c20 506f  , FillOrKill, Po
-00030f90: 7374 4f6e 6c79 0a20 2020 2020 2020 2020  stOnly.         
-00030fa0: 2020 2027 6f72 6465 7251 7479 273a 2073     'orderQty': s
-00030fb0: 656c 662e 616d 6f75 6e74 5f74 6f5f 7072  elf.amount_to_pr
-00030fc0: 6563 6973 696f 6e28 7379 6d62 6f6c 2c20  ecision(symbol, 
-00030fd0: 616d 6f75 6e74 292c 0a20 2020 2020 2020  amount),.       
-00030fe0: 2020 2020 2023 2027 7461 6b65 5072 6f66       # 'takeProf
-00030ff0: 6974 273a 2031 3233 2e34 352c 2020 2320  it': 123.45,  # 
-00031000: 7461 6b65 2070 726f 6669 7420 7072 6963  take profit pric
-00031010: 652c 206f 6e6c 7920 7461 6b65 2065 6666  e, only take eff
-00031020: 6563 7420 7570 6f6e 206f 7065 6e69 6e67  ect upon opening
-00031030: 2074 6865 2070 6f73 6974 696f 6e0a 2020   the position.  
-00031040: 2020 2020 2020 2020 2020 2320 2773 746f            # 'sto
-00031050: 704c 6f73 7327 3a20 3132 332e 3435 2c20  pLoss': 123.45, 
-00031060: 2023 2073 746f 7020 6c6f 7373 2070 7269   # stop loss pri
-00031070: 6365 2c20 6f6e 6c79 2074 616b 6520 6566  ce, only take ef
-00031080: 6665 6374 2075 706f 6e20 6f70 656e 696e  fect upon openin
-00031090: 6720 7468 6520 706f 7369 7469 6f6e 0a20  g the position. 
-000310a0: 2020 2020 2020 2020 2020 2023 2027 7265             # 're
-000310b0: 6475 6365 4f6e 6c79 273a 2046 616c 7365  duceOnly': False
-000310c0: 2c20 2023 2072 6564 7563 6520 6f6e 6c79  ,  # reduce only
-000310d0: 2c20 7265 7175 6972 6564 2066 6f72 206c  , required for l
-000310e0: 696e 6561 7220 6f72 6465 7273 0a20 2020  inear orders.   
-000310f0: 2020 2020 2020 2020 2023 2077 6865 6e20           # when 
-00031100: 6372 6561 7469 6e67 2061 2063 6c6f 7369  creating a closi
-00031110: 6e67 206f 7264 6572 2c20 6279 6269 7420  ng order, bybit 
-00031120: 7265 636f 6d6d 656e 6473 2061 2054 7275  recommends a Tru
-00031130: 6520 7661 6c75 6520 666f 720a 2020 2020  e value for.    
-00031140: 2020 2020 2020 2020 2320 2063 6c6f 7365          #  close
-00031150: 4f6e 5472 6967 6765 7220 746f 2061 766f  OnTrigger to avo
-00031160: 6964 2066 6169 6c69 6e67 2064 7565 2074  id failing due t
-00031170: 6f20 696e 7375 6666 6963 6965 6e74 2061  o insufficient a
-00031180: 7661 696c 6162 6c65 206d 6172 6769 6e0a  vailable margin.
-00031190: 2020 2020 2020 2020 2020 2020 2320 2763              # 'c
-000311a0: 6c6f 7365 4f6e 5472 6967 6765 7227 3a20  loseOnTrigger': 
-000311b0: 4661 6c73 652c 2072 6571 7569 7265 6420  False, required 
-000311c0: 666f 7220 6c69 6e65 6172 206f 7264 6572  for linear order
-000311d0: 730a 2020 2020 2020 2020 2020 2020 2320  s.            # 
-000311e0: 276f 7264 6572 4c69 6e6b 4964 273a 2027  'orderLinkId': '
-000311f0: 7374 7269 6e67 272c 2020 2320 756e 6971  string',  # uniq
-00031200: 7565 2063 6c69 656e 7420 6f72 6465 7220  ue client order 
-00031210: 6964 2c20 6d61 7820 3336 2063 6861 7261  id, max 36 chara
-00031220: 6374 6572 730a 2020 2020 2020 2020 2020  cters.          
-00031230: 2020 2320 2774 7269 6767 6572 5072 6963    # 'triggerPric
-00031240: 6527 3a20 3132 332e 3435 2c20 2023 2074  e': 123.45,  # t
-00031250: 7269 6767 6572 2070 7269 6365 2c20 7265  rigger price, re
-00031260: 7175 6972 6564 2066 6f72 2063 6f6e 6469  quired for condi
-00031270: 7469 6f6e 616c 206f 7264 6572 730a 2020  tional orders.  
-00031280: 2020 2020 2020 2020 2020 2320 2774 7269            # 'tri
-00031290: 6767 6572 5f62 7927 3a20 274d 6172 6b50  gger_by': 'MarkP
-000312a0: 7269 6365 272c 2020 2320 496e 6465 7850  rice',  # IndexP
-000312b0: 7269 6365 2c20 4d61 726b 5072 6963 650a  rice, MarkPrice.
-000312c0: 2020 2020 2020 2020 2020 2020 2320 2774              # 't
-000312d0: 7074 7269 6767 6572 6279 273a 2027 4d61  ptriggerby': 'Ma
-000312e0: 726b 5072 6963 6527 2c20 2023 2049 6e64  rkPrice',  # Ind
-000312f0: 6578 5072 6963 652c 204d 6172 6b50 7269  exPrice, MarkPri
-00031300: 6365 0a20 2020 2020 2020 2020 2020 2023  ce.            #
-00031310: 2027 736c 5472 6967 6765 7242 7927 3a20   'slTriggerBy': 
-00031320: 274d 6172 6b50 7269 6365 272c 2020 2320  'MarkPrice',  # 
-00031330: 496e 6465 7850 7269 6365 2c20 4d61 726b  IndexPrice, Mark
-00031340: 5072 6963 650a 2020 2020 2020 2020 2020  Price.          
-00031350: 2020 2320 276f 7264 6572 4669 6c74 6572    # 'orderFilter
-00031360: 273a 2027 4f72 6465 7227 206f 7220 2753  ': 'Order' or 'S
-00031370: 746f 704f 7264 6572 270a 2020 2020 2020  topOrder'.      
-00031380: 2020 2020 2020 2320 276d 6d70 273a 2046        # 'mmp': F
-00031390: 616c 7365 2020 2320 6d61 726b 6574 206d  alse  # market m
-000313a0: 616b 6572 2070 726f 7465 6374 696f 6e0a  aker protection.
-000313b0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-000313c0: 2020 6973 4d61 726b 6574 203d 206c 6f77    isMarket = low
-000313d0: 6572 4361 7365 5479 7065 203d 3d20 276d  erCaseType == 'm
-000313e0: 6172 6b65 7427 0a20 2020 2020 2020 2069  arket'.        i
-000313f0: 734c 696d 6974 203d 206c 6f77 6572 4361  sLimit = lowerCa
-00031400: 7365 5479 7065 203d 3d20 276c 696d 6974  seType == 'limit
-00031410: 270a 2020 2020 2020 2020 6966 2069 734c  '.        if isL
-00031420: 696d 6974 2069 7320 6e6f 7420 4e6f 6e65  imit is not None
-00031430: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00031440: 7175 6573 745b 276f 7264 6572 5072 6963  quest['orderPric
-00031450: 6527 5d20 3d20 7365 6c66 2e70 7269 6365  e'] = self.price
-00031460: 5f74 6f5f 7072 6563 6973 696f 6e28 7379  _to_precision(sy
-00031470: 6d62 6f6c 2c20 7072 6963 6529 0a20 2020  mbol, price).   
-00031480: 2020 2020 2065 7863 6861 6e67 6553 7065       exchangeSpe
-00031490: 6369 6669 6350 6172 616d 203d 2073 656c  cificParam = sel
-000314a0: 662e 7361 6665 5f73 7472 696e 6728 7061  f.safe_string(pa
-000314b0: 7261 6d73 2c20 2774 696d 655f 696e 5f66  rams, 'time_in_f
-000314c0: 6f72 6365 2729 0a20 2020 2020 2020 2074  orce').        t
-000314d0: 696d 6549 6e46 6f72 6365 203d 2073 656c  imeInForce = sel
-000314e0: 662e 7361 6665 5f73 7472 696e 675f 6c6f  f.safe_string_lo
-000314f0: 7765 7228 7061 7261 6d73 2c20 2774 696d  wer(params, 'tim
-00031500: 6549 6e46 6f72 6365 2729 0a20 2020 2020  eInForce').     
-00031510: 2020 2070 6f73 744f 6e6c 7920 3d20 4e6f     postOnly = No
-00031520: 6e65 0a20 2020 2020 2020 2070 6f73 744f  ne.        postO
-00031530: 6e6c 792c 2070 6172 616d 7320 3d20 7365  nly, params = se
-00031540: 6c66 2e68 616e 646c 655f 706f 7374 5f6f  lf.handle_post_o
-00031550: 6e6c 7928 6973 4d61 726b 6574 2c20 6578  nly(isMarket, ex
-00031560: 6368 616e 6765 5370 6563 6966 6963 5061  changeSpecificPa
-00031570: 7261 6d20 3d3d 2027 506f 7374 4f6e 6c79  ram == 'PostOnly
-00031580: 272c 2070 6172 616d 7329 0a20 2020 2020  ', params).     
-00031590: 2020 2069 6620 706f 7374 4f6e 6c79 3a0a     if postOnly:.
-000315a0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-000315b0: 6573 745b 2774 696d 655f 696e 5f66 6f72  est['time_in_for
-000315c0: 6365 275d 203d 2027 506f 7374 4f6e 6c79  ce'] = 'PostOnly
-000315d0: 270a 2020 2020 2020 2020 656c 6966 2074  '.        elif t
-000315e0: 696d 6549 6e46 6f72 6365 203d 3d20 2767  imeInForce == 'g
-000315f0: 7463 273a 0a20 2020 2020 2020 2020 2020  tc':.           
-00031600: 2072 6571 7565 7374 5b27 7469 6d65 5f69   request['time_i
-00031610: 6e5f 666f 7263 6527 5d20 3d20 2747 6f6f  n_force'] = 'Goo
-00031620: 6454 696c 6c43 616e 6365 6c27 0a20 2020  dTillCancel'.   
-00031630: 2020 2020 2065 6c69 6620 7469 6d65 496e       elif timeIn
-00031640: 466f 7263 6520 3d3d 2027 666f 6b27 3a0a  Force == 'fok':.
-00031650: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00031660: 6573 745b 2774 696d 655f 696e 5f66 6f72  est['time_in_for
-00031670: 6365 275d 203d 2027 4669 6c6c 4f72 4b69  ce'] = 'FillOrKi
-00031680: 6c6c 270a 2020 2020 2020 2020 656c 6966  ll'.        elif
-00031690: 2074 696d 6549 6e46 6f72 6365 203d 3d20   timeInForce == 
-000316a0: 2769 6f63 273a 0a20 2020 2020 2020 2020  'ioc':.         
-000316b0: 2020 2072 6571 7565 7374 5b27 7469 6d65     request['time
-000316c0: 5f69 6e5f 666f 7263 6527 5d20 3d20 2749  _in_force'] = 'I
-000316d0: 6d6d 6564 6961 7465 4f72 4361 6e63 656c  mmediateOrCancel
-000316e0: 270a 2020 2020 2020 2020 6966 206d 6172  '.        if mar
-000316f0: 6b65 745b 2773 7761 7027 5d3a 0a20 2020  ket['swap']:.   
-00031700: 2020 2020 2020 2020 2074 7269 6767 6572           trigger
-00031710: 5072 6963 6520 3d20 7365 6c66 2e73 6166  Price = self.saf
-00031720: 655f 6e75 6d62 6572 5f32 2870 6172 616d  e_number_2(param
-00031730: 732c 2027 7374 6f70 5072 6963 6527 2c20  s, 'stopPrice', 
-00031740: 2774 7269 6767 6572 5072 6963 6527 290a  'triggerPrice').
-00031750: 2020 2020 2020 2020 2020 2020 7374 6f70              stop
-00031760: 4c6f 7373 5472 6967 6765 7250 7269 6365  LossTriggerPrice
-00031770: 203d 2073 656c 662e 7361 6665 5f6e 756d   = self.safe_num
-00031780: 6265 7228 7061 7261 6d73 2c20 2773 746f  ber(params, 'sto
-00031790: 704c 6f73 7350 7269 6365 272c 2074 7269  pLossPrice', tri
-000317a0: 6767 6572 5072 6963 6529 0a20 2020 2020  ggerPrice).     
-000317b0: 2020 2020 2020 2074 616b 6550 726f 6669         takeProfi
-000317c0: 7454 7269 6767 6572 5072 6963 6520 3d20  tTriggerPrice = 
-000317d0: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
-000317e0: 2870 6172 616d 732c 2027 7461 6b65 5072  (params, 'takePr
-000317f0: 6f66 6974 5072 6963 6527 290a 2020 2020  ofitPrice').    
-00031800: 2020 2020 2020 2020 7374 6f70 4c6f 7373          stopLoss
-00031810: 203d 2073 656c 662e 7361 6665 5f6e 756d   = self.safe_num
-00031820: 6265 7228 7061 7261 6d73 2c20 2773 746f  ber(params, 'sto
-00031830: 704c 6f73 7327 290a 2020 2020 2020 2020  pLoss').        
-00031840: 2020 2020 7461 6b65 5072 6f66 6974 203d      takeProfit =
-00031850: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
-00031860: 7228 7061 7261 6d73 2c20 2774 616b 6550  r(params, 'takeP
-00031870: 726f 6669 7427 290a 2020 2020 2020 2020  rofit').        
-00031880: 2020 2020 6973 5374 6f70 4c6f 7373 5472      isStopLossTr
-00031890: 6967 6765 724f 7264 6572 203d 2073 746f  iggerOrder = sto
-000318a0: 704c 6f73 7354 7269 6767 6572 5072 6963  pLossTriggerPric
-000318b0: 6520 6973 206e 6f74 204e 6f6e 650a 2020  e is not None.  
-000318c0: 2020 2020 2020 2020 2020 6973 5461 6b65            isTake
-000318d0: 5072 6f66 6974 5472 6967 6765 724f 7264  ProfitTriggerOrd
-000318e0: 6572 203d 2074 616b 6550 726f 6669 7454  er = takeProfitT
-000318f0: 7269 6767 6572 5072 6963 6520 6973 206e  riggerPrice is n
-00031900: 6f74 204e 6f6e 650a 2020 2020 2020 2020  ot None.        
-00031910: 2020 2020 6973 5374 6f70 4c6f 7373 203d      isStopLoss =
-00031920: 2073 746f 704c 6f73 7320 6973 206e 6f74   stopLoss is not
-00031930: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
-00031940: 2020 6973 5461 6b65 5072 6f66 6974 203d    isTakeProfit =
-00031950: 2074 616b 6550 726f 6669 7420 6973 206e   takeProfit is n
-00031960: 6f74 204e 6f6e 650a 2020 2020 2020 2020  ot None.        
-00031970: 2020 2020 6973 5374 6f70 4f72 6465 7220      isStopOrder 
-00031980: 3d20 6973 5374 6f70 4c6f 7373 5472 6967  = isStopLossTrig
-00031990: 6765 724f 7264 6572 206f 7220 6973 5461  gerOrder or isTa
-000319a0: 6b65 5072 6f66 6974 5472 6967 6765 724f  keProfitTriggerO
-000319b0: 7264 6572 0a20 2020 2020 2020 2020 2020  rder.           
-000319c0: 2069 6620 6973 5374 6f70 4f72 6465 723a   if isStopOrder:
-000319d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000319e0: 2072 6571 7565 7374 5b27 6f72 6465 7246   request['orderF
-000319f0: 696c 7465 7227 5d20 3d20 2753 746f 704f  ilter'] = 'StopO
-00031a00: 7264 6572 270a 2020 2020 2020 2020 2020  rder'.          
-00031a10: 2020 2020 2020 7265 7175 6573 745b 2774        request['t
-00031a20: 7269 6767 6572 5f62 7927 5d20 3d20 274c  rigger_by'] = 'L
-00031a30: 6173 7450 7269 6365 270a 2020 2020 2020  astPrice'.      
-00031a40: 2020 2020 2020 2020 2020 7374 6f70 5078            stopPx
-00031a50: 203d 2073 746f 704c 6f73 7354 7269 6767   = stopLossTrigg
-00031a60: 6572 5072 6963 6520 6966 2069 7353 746f  erPrice if isSto
-00031a70: 704c 6f73 7354 7269 6767 6572 4f72 6465  pLossTriggerOrde
-00031a80: 7220 656c 7365 2074 616b 6550 726f 6669  r else takeProfi
-00031a90: 7454 7269 6767 6572 5072 6963 650a 2020  tTriggerPrice.  
-00031aa0: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-00031ab0: 6563 6973 6553 746f 7050 7269 6365 203d  eciseStopPrice =
-00031ac0: 2073 656c 662e 7072 6963 655f 746f 5f70   self.price_to_p
-00031ad0: 7265 6369 7369 6f6e 2873 796d 626f 6c2c  recision(symbol,
-00031ae0: 2073 746f 7050 7829 0a20 2020 2020 2020   stopPx).       
-00031af0: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00031b00: 5b27 7472 6967 6765 7250 7269 6365 275d  ['triggerPrice']
-00031b10: 203d 2070 7265 6369 7365 5374 6f70 5072   = preciseStopPr
-00031b20: 6963 650a 2020 2020 2020 2020 2020 2020  ice.            
-00031b30: 2020 2020 6465 6c74 6120 3d20 7365 6c66      delta = self
-00031b40: 2e6e 756d 6265 725f 746f 5f73 7472 696e  .number_to_strin
-00031b50: 6728 6d61 726b 6574 5b27 7072 6563 6973  g(market['precis
-00031b60: 696f 6e27 5d5b 2770 7269 6365 275d 290a  ion']['price']).
-00031b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031b80: 7265 7175 6573 745b 2762 6173 6550 7269  request['basePri
-00031b90: 6365 275d 203d 2050 7265 6369 7365 2e73  ce'] = Precise.s
-00031ba0: 7472 696e 675f 7375 6228 7072 6563 6973  tring_sub(precis
-00031bb0: 6553 746f 7050 7269 6365 2c20 6465 6c74  eStopPrice, delt
-00031bc0: 6129 2069 6620 6973 5374 6f70 4c6f 7373  a) if isStopLoss
-00031bd0: 5472 6967 6765 724f 7264 6572 2065 6c73  TriggerOrder els
-00031be0: 6520 5072 6563 6973 652e 7374 7269 6e67  e Precise.string
-00031bf0: 5f61 6464 2870 7265 6369 7365 5374 6f70  _add(preciseStop
-00031c00: 5072 6963 652c 2064 656c 7461 290a 2020  Price, delta).  
-00031c10: 2020 2020 2020 2020 2020 656c 6966 2069            elif i
-00031c20: 7353 746f 704c 6f73 7320 6f72 2069 7354  sStopLoss or isT
-00031c30: 616b 6550 726f 6669 743a 0a20 2020 2020  akeProfit:.     
-00031c40: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-00031c50: 5374 6f70 4c6f 7373 3a0a 2020 2020 2020  StopLoss:.      
-00031c60: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00031c70: 7175 6573 745b 2773 746f 704c 6f73 7327  quest['stopLoss'
-00031c80: 5d20 3d20 7365 6c66 2e70 7269 6365 5f74  ] = self.price_t
-00031c90: 6f5f 7072 6563 6973 696f 6e28 7379 6d62  o_precision(symb
-00031ca0: 6f6c 2c20 7374 6f70 4c6f 7373 290a 2020  ol, stopLoss).  
-00031cb0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00031cc0: 2069 7354 616b 6550 726f 6669 743a 0a20   isTakeProfit:. 
-00031cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031ce0: 2020 2072 6571 7565 7374 5b27 7461 6b65     request['take
-00031cf0: 5072 6f66 6974 275d 203d 2073 656c 662e  Profit'] = self.
-00031d00: 7072 6963 655f 746f 5f70 7265 6369 7369  price_to_precisi
-00031d10: 6f6e 2873 796d 626f 6c2c 2074 616b 6550  on(symbol, takeP
-00031d20: 726f 6669 7429 0a20 2020 2020 2020 2020  rofit).         
-00031d30: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00031d40: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00031d50: 5b27 6f72 6465 7246 696c 7465 7227 5d20  ['orderFilter'] 
-00031d60: 3d20 274f 7264 6572 270a 2020 2020 2020  = 'Order'.      
-00031d70: 2020 636c 6965 6e74 4f72 6465 7249 6420    clientOrderId 
-00031d80: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-00031d90: 6e67 2870 6172 616d 732c 2027 636c 6965  ng(params, 'clie
-00031da0: 6e74 4f72 6465 7249 6427 290a 2020 2020  ntOrderId').    
-00031db0: 2020 2020 6966 2063 6c69 656e 744f 7264      if clientOrd
-00031dc0: 6572 4964 2069 7320 6e6f 7420 4e6f 6e65  erId is not None
-00031dd0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00031de0: 7175 6573 745b 276f 7264 6572 4c69 6e6b  quest['orderLink
-00031df0: 4964 275d 203d 2063 6c69 656e 744f 7264  Id'] = clientOrd
-00031e00: 6572 4964 0a20 2020 2020 2020 2065 6c69  erId.        eli
-00031e10: 6620 6d61 726b 6574 5b27 6f70 7469 6f6e  f market['option
-00031e20: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
-00031e30: 2320 6d61 6e64 6174 6f72 7920 6669 656c  # mandatory fiel
-00031e40: 6420 666f 7220 6f70 7469 6f6e 730a 2020  d for options.  
-00031e50: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-00031e60: 745b 276f 7264 6572 4c69 6e6b 4964 275d  t['orderLinkId']
-00031e70: 203d 2073 656c 662e 7575 6964 3136 2829   = self.uuid16()
-00031e80: 0a20 2020 2020 2020 2070 6172 616d 7320  .        params 
-00031e90: 3d20 7365 6c66 2e6f 6d69 7428 7061 7261  = self.omit(para
-00031ea0: 6d73 2c20 5b27 7374 6f70 5072 6963 6527  ms, ['stopPrice'
-00031eb0: 2c20 2774 696d 6549 6e46 6f72 6365 272c  , 'timeInForce',
-00031ec0: 2027 7472 6967 6765 7250 7269 6365 272c   'triggerPrice',
-00031ed0: 2027 7374 6f70 4c6f 7373 5072 6963 6527   'stopLossPrice'
-00031ee0: 2c20 2774 616b 6550 726f 6669 7450 7269  , 'takeProfitPri
-00031ef0: 6365 272c 2027 706f 7374 4f6e 6c79 272c  ce', 'postOnly',
-00031f00: 2027 636c 6965 6e74 4f72 6465 7249 6427   'clientOrderId'
-00031f10: 2c20 2773 746f 704c 6f73 7327 2c20 2774  , 'stopLoss', 't
-00031f20: 616b 6550 726f 6669 7427 5d29 0a20 2020  akeProfit']).   
-00031f30: 2020 2020 206d 6574 686f 6420 3d20 2770       method = 'p
-00031f40: 7269 7661 7465 506f 7374 4f70 7469 6f6e  rivatePostOption
-00031f50: 5573 6463 4f70 656e 6170 6950 7269 7661  UsdcOpenapiPriva
-00031f60: 7465 5631 506c 6163 654f 7264 6572 2720  teV1PlaceOrder' 
-00031f70: 6966 206d 6172 6b65 745b 276f 7074 696f  if market['optio
-00031f80: 6e27 5d20 656c 7365 2027 7072 6976 6174  n'] else 'privat
-00031f90: 6550 6f73 7450 6572 7065 7475 616c 5573  ePostPerpetualUs
-00031fa0: 6463 4f70 656e 6170 6950 7269 7661 7465  dcOpenapiPrivate
-00031fb0: 5631 506c 6163 654f 7264 6572 270a 2020  V1PlaceOrder'.  
-00031fc0: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
-00031fd0: 2061 7761 6974 2067 6574 6174 7472 2873   await getattr(s
-00031fe0: 656c 662c 206d 6574 686f 6429 2873 656c  elf, method)(sel
-00031ff0: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
-00032000: 2c20 7061 7261 6d73 2929 0a20 2020 2020  , params)).     
-00032010: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
-00032020: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-00032030: 2020 2020 2020 2022 7265 7443 6f64 6522         "retCode"
-00032040: 3a30 2c0a 2020 2020 2020 2020 2320 2020  :0,.        #   
-00032050: 2020 2020 2020 2272 6574 4d73 6722 3a22        "retMsg":"
-00032060: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00032070: 2020 2020 2022 7265 7375 6c74 223a 7b0a       "result":{.
-00032080: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00032090: 2020 2020 2022 6f72 6465 7249 6422 3a22       "orderId":"
-000320a0: 3334 3435 3061 3539 2d33 3235 652d 3432  34450a59-325e-42
-000320b0: 3936 2d38 6166 302d 3633 6337 6335 3234  96-8af0-63c7c524
-000320c0: 6165 3333 222c 0a20 2020 2020 2020 2023  ae33",.        #
-000320d0: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
-000320e0: 6572 4c69 6e6b 4964 223a 2222 2c0a 2020  erLinkId":"",.  
-000320f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00032100: 2020 2022 6d6d 7022 3a66 616c 7365 2c0a     "mmp":false,.
-00032110: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00032120: 2020 2020 2022 7379 6d62 6f6c 223a 2242       "symbol":"B
-00032130: 5443 5045 5250 222c 0a20 2020 2020 2020  TCPERP",.       
-00032140: 2023 2020 2020 2020 2020 2020 2020 226f   #            "o
-00032150: 7264 6572 5479 7065 223a 224c 696d 6974  rderType":"Limit
-00032160: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00032170: 2020 2020 2020 2020 2273 6964 6522 3a22          "side":"
-00032180: 4275 7922 2c0a 2020 2020 2020 2020 2320  Buy",.        # 
-00032190: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
-000321a0: 7251 7479 223a 2230 2e30 3031 3030 3030  rQty":"0.0010000
-000321b0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-000321c0: 2020 2020 2020 2020 2022 6f72 6465 7250           "orderP
-000321d0: 7269 6365 223a 2232 3030 3030 2e30 3022  rice":"20000.00"
-000321e0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-000321f0: 2020 2020 2020 2022 6976 223a 2230 222c         "iv":"0",
-00032200: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00032210: 2020 2020 2020 2274 696d 6549 6e46 6f72        "timeInFor
-00032220: 6365 223a 2247 6f6f 6454 696c 6c43 616e  ce":"GoodTillCan
-00032230: 6365 6c22 2c0a 2020 2020 2020 2020 2320  cel",.        # 
-00032240: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
-00032250: 7253 7461 7475 7322 3a22 4372 6561 7465  rStatus":"Create
-00032260: 6422 2c0a 2020 2020 2020 2020 2320 2020  d",.        #   
-00032270: 2020 2020 2020 2020 2022 6372 6561 7465           "create
-00032280: 6441 7422 3a22 3136 3532 3236 3137 3436  dAt":"1652261746
-00032290: 3030 3738 3733 222c 0a20 2020 2020 2020  007873",.       
-000322a0: 2023 2020 2020 2020 2020 2020 2020 2262   #            "b
-000322b0: 6173 6550 7269 6365 223a 2230 2e30 3022  asePrice":"0.00"
-000322c0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-000322d0: 2020 2020 2020 2022 7472 6967 6765 7250         "triggerP
-000322e0: 7269 6365 223a 2230 2e30 3022 2c0a 2020  rice":"0.00",.  
-000322f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00032300: 2020 2022 7461 6b65 5072 6f66 6974 223a     "takeProfit":
-00032310: 2230 2e30 3022 2c0a 2020 2020 2020 2020  "0.00",.        
-00032320: 2320 2020 2020 2020 2020 2020 2022 7374  #            "st
-00032330: 6f70 4c6f 7373 223a 2230 2e30 3022 2c0a  opLoss":"0.00",.
-00032340: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00032350: 2020 2020 2022 736c 5472 6967 6765 7242       "slTriggerB
-00032360: 7922 3a22 554e 4b4e 4f57 4e22 2c0a 2020  y":"UNKNOWN",.  
-00032370: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00032380: 2020 2022 7470 5472 6967 6765 7242 7922     "tpTriggerBy"
-00032390: 3a22 554e 4b4e 4f57 4e22 0a20 2020 2020  :"UNKNOWN".     
-000323a0: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
-000323b0: 2020 2023 0a20 2020 2020 2020 206f 7264     #.        ord
-000323c0: 6572 203d 2073 656c 662e 7361 6665 5f76  er = self.safe_v
-000323d0: 616c 7565 2872 6573 706f 6e73 652c 2027  alue(response, '
-000323e0: 7265 7375 6c74 272c 207b 7d29 0a20 2020  result', {}).   
-000323f0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00032400: 2e70 6172 7365 5f6f 7264 6572 286f 7264  .parse_order(ord
-00032410: 6572 290a 0a20 2020 2061 7379 6e63 2064  er)..    async d
-00032420: 6566 2065 6469 745f 756e 6966 6965 645f  ef edit_unified_
-00032430: 6163 636f 756e 745f 6f72 6465 7228 7365  account_order(se
-00032440: 6c66 2c20 6964 3a20 7374 722c 2073 796d  lf, id: str, sym
-00032450: 626f 6c2c 2074 7970 652c 2073 6964 652c  bol, type, side,
-00032460: 2061 6d6f 756e 743d 4e6f 6e65 2c20 7072   amount=None, pr
-00032470: 6963 653d 4e6f 6e65 2c20 7061 7261 6d73  ice=None, params
-00032480: 3d7b 7d29 3a0a 2020 2020 2020 2020 6177  ={}):.        aw
-00032490: 6169 7420 7365 6c66 2e6c 6f61 645f 6d61  ait self.load_ma
-000324a0: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
-000324b0: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
-000324c0: 726b 6574 2873 796d 626f 6c29 0a20 2020  rket(symbol).   
-000324d0: 2020 2020 2069 6620 6e6f 7420 6d61 726b       if not mark
-000324e0: 6574 5b27 6c69 6e65 6172 275d 2061 6e64  et['linear'] and
-000324f0: 206e 6f74 206d 6172 6b65 745b 276f 7074   not market['opt
-00032500: 696f 6e27 5d3a 0a20 2020 2020 2020 2020  ion']:.         
-00032510: 2020 2072 6169 7365 204e 6f74 5375 7070     raise NotSupp
-00032520: 6f72 7465 6428 7365 6c66 2e69 6420 2b20  orted(self.id + 
-00032530: 2720 6564 6974 4f72 6465 7220 646f 6573  ' editOrder does
-00032540: 206e 6f74 2061 6c6c 6f77 2069 6e76 6572   not allow inver
-00032550: 7365 206d 6172 6b65 7420 6f72 6465 7273  se market orders
-00032560: 2066 6f72 2027 202b 2073 796d 626f 6c20   for ' + symbol 
-00032570: 2b20 2720 6d61 726b 6574 7327 290a 2020  + ' markets').  
-00032580: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-00032590: 7b0a 2020 2020 2020 2020 2020 2020 2773  {.            's
-000325a0: 796d 626f 6c27 3a20 6d61 726b 6574 5b27  ymbol': market['
-000325b0: 6964 275d 2c0a 2020 2020 2020 2020 2020  id'],.          
-000325c0: 2020 276f 7264 6572 4964 273a 2069 642c    'orderId': id,
-000325d0: 0a20 2020 2020 2020 2020 2020 2027 7174  .            'qt
-000325e0: 7927 3a20 7365 6c66 2e61 6d6f 756e 745f  y': self.amount_
-000325f0: 746f 5f70 7265 6369 7369 6f6e 2873 796d  to_precision(sym
-00032600: 626f 6c2c 2061 6d6f 756e 7429 2c0a 2020  bol, amount),.  
-00032610: 2020 2020 2020 2020 2020 2320 276f 7264            # 'ord
-00032620: 6572 4c69 6e6b 4964 273a 2027 7374 7269  erLinkId': 'stri
-00032630: 6e67 272c 2020 2320 756e 6971 7565 2063  ng',  # unique c
-00032640: 6c69 656e 7420 6f72 6465 7220 6964 2c20  lient order id, 
-00032650: 6d61 7820 3336 2063 6861 7261 6374 6572  max 36 character
-00032660: 730a 2020 2020 2020 2020 2020 2020 2320  s.            # 
-00032670: 2774 616b 6550 726f 6669 7427 3a20 3132  'takeProfit': 12
-00032680: 332e 3435 2c20 2023 2074 616b 6520 7072  3.45,  # take pr
-00032690: 6f66 6974 2070 7269 6365 2c20 6f6e 6c79  ofit price, only
-000326a0: 2074 616b 6520 6566 6665 6374 2075 706f   take effect upo
-000326b0: 6e20 6f70 656e 696e 6720 7468 6520 706f  n opening the po
-000326c0: 7369 7469 6f6e 0a20 2020 2020 2020 2020  sition.         
-000326d0: 2020 2023 2027 7374 6f70 4c6f 7373 273a     # 'stopLoss':
-000326e0: 2031 3233 2e34 352c 2020 2320 7374 6f70   123.45,  # stop
-000326f0: 206c 6f73 7320 7072 6963 652c 206f 6e6c   loss price, onl
-00032700: 7920 7461 6b65 2065 6666 6563 7420 7570  y take effect up
-00032710: 6f6e 206f 7065 6e69 6e67 2074 6865 2070  on opening the p
-00032720: 6f73 6974 696f 6e0a 2020 2020 2020 2020  osition.        
-00032730: 2020 2020 2320 2774 7269 6767 6572 5072      # 'triggerPr
-00032740: 6963 6527 3a20 3132 332e 3435 2c20 2023  ice': 123.45,  #
-00032750: 2074 7269 6767 6572 2070 7269 6365 2c20   trigger price, 
-00032760: 7265 7175 6972 6564 2066 6f72 2063 6f6e  required for con
-00032770: 6469 7469 6f6e 616c 206f 7264 6572 730a  ditional orders.
-00032780: 2020 2020 2020 2020 2020 2020 2320 2774              # 't
-00032790: 7269 6767 6572 4279 273a 2027 4d61 726b  riggerBy': 'Mark
-000327a0: 5072 6963 6527 2c20 2023 2049 6e64 6578  Price',  # Index
-000327b0: 5072 6963 652c 204d 6172 6b50 7269 6365  Price, MarkPrice
-000327c0: 2c20 4c61 7374 5072 6963 650a 2020 2020  , LastPrice.    
-000327d0: 2020 2020 2020 2020 2320 2774 7054 7269          # 'tpTri
-000327e0: 6767 6572 6279 273a 2027 4d61 726b 5072  ggerby': 'MarkPr
-000327f0: 6963 6527 2c20 2023 2049 6e64 6578 5072  ice',  # IndexPr
-00032800: 6963 652c 204d 6172 6b50 7269 6365 2c20  ice, MarkPrice, 
-00032810: 4c61 7374 5072 6963 650a 2020 2020 2020  LastPrice.      
-00032820: 2020 2020 2020 2320 2773 6c54 7269 6767        # 'slTrigg
-00032830: 6572 4279 273a 2027 4d61 726b 5072 6963  erBy': 'MarkPric
-00032840: 6527 2c20 2023 2049 6e64 6578 5072 6963  e',  # IndexPric
-00032850: 652c 204d 6172 6b50 7269 6365 2c20 4c61  e, MarkPrice, La
-00032860: 7374 5072 6963 650a 2020 2020 2020 2020  stPrice.        
-00032870: 2020 2020 2320 5661 6c69 6420 666f 7220      # Valid for 
-00032880: 6f70 7469 6f6e 206f 6e6c 792e 0a20 2020  option only..   
-00032890: 2020 2020 2020 2020 2023 2027 6f72 6465           # 'orde
-000328a0: 7249 7627 3a20 2730 272c 2020 2320 496d  rIv': '0',  # Im
-000328b0: 706c 6965 6420 766f 6c61 7469 6c69 7479  plied volatility
-000328c0: 3b20 7061 7261 6d65 7465 7273 2061 7265  ; parameters are
-000328d0: 2070 6173 7365 6420 6163 636f 7264 696e   passed accordin
-000328e0: 6720 746f 2074 6865 2072 6561 6c20 7661  g to the real va
-000328f0: 6c75 653b 2066 6f72 2065 7861 6d70 6c65  lue; for example
-00032900: 2c20 666f 7220 3130 252c 2030 2e31 2069  , for 10%, 0.1 i
-00032910: 7320 7061 7373 6564 0a20 2020 2020 2020  s passed.       
-00032920: 207d 0a20 2020 2020 2020 2069 6620 6d61   }.        if ma
-00032930: 726b 6574 5b27 6c69 6e65 6172 275d 3a0a  rket['linear']:.
-00032940: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00032950: 6573 745b 2763 6174 6567 6f72 7927 5d20  est['category'] 
-00032960: 3d20 276c 696e 6561 7227 0a20 2020 2020  = 'linear'.     
-00032970: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00032980: 2020 2020 2072 6571 7565 7374 5b27 6361       request['ca
-00032990: 7465 676f 7279 275d 203d 2027 6f70 7469  tegory'] = 'opti
-000329a0: 6f6e 270a 2020 2020 2020 2020 6966 2070  on'.        if p
-000329b0: 7269 6365 2069 7320 6e6f 7420 4e6f 6e65  rice is not None
-000329c0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-000329d0: 7175 6573 745b 2770 7269 6365 275d 203d  quest['price'] =
-000329e0: 2073 656c 662e 7072 6963 655f 746f 5f70   self.price_to_p
-000329f0: 7265 6369 7369 6f6e 2873 796d 626f 6c2c  recision(symbol,
-00032a00: 2070 7269 6365 290a 2020 2020 2020 2020   price).        
-00032a10: 7472 6967 6765 7250 7269 6365 203d 2073  triggerPrice = s
-00032a20: 656c 662e 7361 6665 5f6e 756d 6265 725f  elf.safe_number_
-00032a30: 3228 7061 7261 6d73 2c20 2774 7269 6767  2(params, 'trigg
-00032a40: 6572 5072 6963 6527 2c20 2773 746f 7050  erPrice', 'stopP
-00032a50: 7269 6365 2729 0a20 2020 2020 2020 2073  rice').        s
-00032a60: 746f 704c 6f73 7354 7269 6767 6572 5072  topLossTriggerPr
-00032a70: 6963 6520 3d20 7365 6c66 2e73 6166 655f  ice = self.safe_
-00032a80: 6e75 6d62 6572 2870 6172 616d 732c 2027  number(params, '
-00032a90: 7374 6f70 4c6f 7373 5072 6963 6527 290a  stopLossPrice').
-00032aa0: 2020 2020 2020 2020 7461 6b65 5072 6f66          takeProf
-00032ab0: 6974 5472 6967 6765 7250 7269 6365 203d  itTriggerPrice =
-00032ac0: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
-00032ad0: 7228 7061 7261 6d73 2c20 2774 616b 6550  r(params, 'takeP
-00032ae0: 726f 6669 7450 7269 6365 2729 0a20 2020  rofitPrice').   
-00032af0: 2020 2020 2073 746f 704c 6f73 7320 3d20       stopLoss = 
-00032b00: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
-00032b10: 2870 6172 616d 732c 2027 7374 6f70 4c6f  (params, 'stopLo
-00032b20: 7373 2729 0a20 2020 2020 2020 2074 616b  ss').        tak
-00032b30: 6550 726f 6669 7420 3d20 7365 6c66 2e73  eProfit = self.s
-00032b40: 6166 655f 6e75 6d62 6572 2870 6172 616d  afe_number(param
-00032b50: 732c 2027 7461 6b65 5072 6f66 6974 2729  s, 'takeProfit')
-00032b60: 0a20 2020 2020 2020 2069 7353 746f 704c  .        isStopL
-00032b70: 6f73 7354 7269 6767 6572 4f72 6465 7220  ossTriggerOrder 
-00032b80: 3d20 7374 6f70 4c6f 7373 5472 6967 6765  = stopLossTrigge
-00032b90: 7250 7269 6365 2069 7320 6e6f 7420 4e6f  rPrice is not No
-00032ba0: 6e65 0a20 2020 2020 2020 2069 7354 616b  ne.        isTak
-00032bb0: 6550 726f 6669 7454 7269 6767 6572 4f72  eProfitTriggerOr
-00032bc0: 6465 7220 3d20 7461 6b65 5072 6f66 6974  der = takeProfit
-00032bd0: 5472 6967 6765 7250 7269 6365 2069 7320  TriggerPrice is 
-00032be0: 6e6f 7420 4e6f 6e65 0a20 2020 2020 2020  not None.       
-00032bf0: 2069 7353 746f 704c 6f73 7320 3d20 7374   isStopLoss = st
-00032c00: 6f70 4c6f 7373 2069 7320 6e6f 7420 4e6f  opLoss is not No
-00032c10: 6e65 0a20 2020 2020 2020 2069 7354 616b  ne.        isTak
-00032c20: 6550 726f 6669 7420 3d20 7461 6b65 5072  eProfit = takePr
-00032c30: 6f66 6974 2069 7320 6e6f 7420 4e6f 6e65  ofit is not None
-00032c40: 0a20 2020 2020 2020 2069 6620 6973 5374  .        if isSt
-00032c50: 6f70 4c6f 7373 5472 6967 6765 724f 7264  opLossTriggerOrd
-00032c60: 6572 206f 7220 6973 5461 6b65 5072 6f66  er or isTakeProf
-00032c70: 6974 5472 6967 6765 724f 7264 6572 3a0a  itTriggerOrder:.
-00032c80: 2020 2020 2020 2020 2020 2020 7472 6967              trig
-00032c90: 6765 7250 7269 6365 203d 2073 746f 704c  gerPrice = stopL
-00032ca0: 6f73 7354 7269 6767 6572 5072 6963 6520  ossTriggerPrice 
-00032cb0: 6966 2069 7353 746f 704c 6f73 7354 7269  if isStopLossTri
-00032cc0: 6767 6572 4f72 6465 7220 656c 7365 2074  ggerOrder else t
-00032cd0: 616b 6550 726f 6669 7454 7269 6767 6572  akeProfitTrigger
-00032ce0: 5072 6963 650a 2020 2020 2020 2020 6966  Price.        if
-00032cf0: 2074 7269 6767 6572 5072 6963 6520 6973   triggerPrice is
-00032d00: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00032d10: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-00032d20: 7472 6967 6765 7250 7269 6365 275d 203d  triggerPrice'] =
-00032d30: 2073 656c 662e 7072 6963 655f 746f 5f70   self.price_to_p
-00032d40: 7265 6369 7369 6f6e 2873 796d 626f 6c2c  recision(symbol,
-00032d50: 2074 7269 6767 6572 5072 6963 6529 0a20   triggerPrice). 
-00032d60: 2020 2020 2020 2069 6620 6973 5374 6f70         if isStop
-00032d70: 4c6f 7373 206f 7220 6973 5461 6b65 5072  Loss or isTakePr
-00032d80: 6f66 6974 3a0a 2020 2020 2020 2020 2020  ofit:.          
-00032d90: 2020 6966 2069 7353 746f 704c 6f73 733a    if isStopLoss:
-00032da0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00032db0: 2072 6571 7565 7374 5b27 7374 6f70 4c6f   request['stopLo
-00032dc0: 7373 275d 203d 2073 656c 662e 7072 6963  ss'] = self.pric
-00032dd0: 655f 746f 5f70 7265 6369 7369 6f6e 2873  e_to_precision(s
-00032de0: 796d 626f 6c2c 2073 746f 704c 6f73 7329  ymbol, stopLoss)
-00032df0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00032e00: 6973 5461 6b65 5072 6f66 6974 3a0a 2020  isTakeProfit:.  
-00032e10: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00032e20: 7175 6573 745b 2774 616b 6550 726f 6669  quest['takeProfi
-00032e30: 7427 5d20 3d20 7365 6c66 2e70 7269 6365  t'] = self.price
-00032e40: 5f74 6f5f 7072 6563 6973 696f 6e28 7379  _to_precision(sy
-00032e50: 6d62 6f6c 2c20 7461 6b65 5072 6f66 6974  mbol, takeProfit
-00032e60: 290a 2020 2020 2020 2020 636c 6965 6e74  ).        client
-00032e70: 4f72 6465 7249 6420 3d20 7365 6c66 2e73  OrderId = self.s
-00032e80: 6166 655f 7374 7269 6e67 2870 6172 616d  afe_string(param
-00032e90: 732c 2027 636c 6965 6e74 4f72 6465 7249  s, 'clientOrderI
-00032ea0: 6427 290a 2020 2020 2020 2020 6966 2063  d').        if c
-00032eb0: 6c69 656e 744f 7264 6572 4964 2069 7320  lientOrderId is 
-00032ec0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00032ed0: 2020 2020 2020 7265 7175 6573 745b 276f        request['o
-00032ee0: 7264 6572 4c69 6e6b 4964 275d 203d 2063  rderLinkId'] = c
-00032ef0: 6c69 656e 744f 7264 6572 4964 0a20 2020  lientOrderId.   
-00032f00: 2020 2020 2070 6172 616d 7320 3d20 7365       params = se
-00032f10: 6c66 2e6f 6d69 7428 7061 7261 6d73 2c20  lf.omit(params, 
-00032f20: 5b27 7374 6f70 5072 6963 6527 2c20 2773  ['stopPrice', 's
-00032f30: 746f 704c 6f73 7350 7269 6365 272c 2027  topLossPrice', '
-00032f40: 7461 6b65 5072 6f66 6974 5072 6963 6527  takeProfitPrice'
-00032f50: 2c20 2774 7269 6767 6572 5072 6963 6527  , 'triggerPrice'
-00032f60: 2c20 2763 6c69 656e 744f 7264 6572 4964  , 'clientOrderId
-00032f70: 272c 2027 7374 6f70 4c6f 7373 272c 2027  ', 'stopLoss', '
-00032f80: 7461 6b65 5072 6f66 6974 275d 290a 2020  takeProfit']).  
-00032f90: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
-00032fa0: 2061 7761 6974 2073 656c 662e 7072 6976   await self.priv
-00032fb0: 6174 6550 6f73 7456 354f 7264 6572 416d  atePostV5OrderAm
-00032fc0: 656e 6428 7365 6c66 2e65 7874 656e 6428  end(self.extend(
-00032fd0: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
-00032fe0: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
-00032ff0: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-00033000: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-00033010: 6574 436f 6465 223a 2030 2c0a 2020 2020  etCode": 0,.    
-00033020: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-00033030: 6574 4d73 6722 3a20 224f 4b22 2c0a 2020  etMsg": "OK",.  
-00033040: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00033050: 2272 6573 756c 7422 3a20 7b0a 2020 2020  "result": {.    
-00033060: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00033070: 2020 226f 7264 6572 4964 223a 2022 6336    "orderId": "c6
-00033080: 6630 3535 6439 2d37 6632 312d 3430 3739  f055d9-7f21-4079
-00033090: 2d39 3133 642d 6536 3532 3361 3963 6666  -913d-e6523a9cff
-000330a0: 6661 222c 0a20 2020 2020 2020 2023 2020  fa",.        #  
-000330b0: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
-000330c0: 724c 696e 6b49 6422 3a20 226c 696e 6561  rLinkId": "linea
-000330d0: 722d 3030 3422 0a20 2020 2020 2020 2023  r-004".        #
-000330e0: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
-000330f0: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-00033100: 6574 4578 7449 6e66 6f22 3a20 7b7d 2c0a  etExtInfo": {},.
-00033110: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00033120: 2020 2274 696d 6522 3a20 3136 3732 3231    "time": 167221
-00033130: 3730 3933 3436 310a 2020 2020 2020 2020  7093461.        
-00033140: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
-00033150: 230a 2020 2020 2020 2020 7265 7375 6c74  #.        result
-00033160: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
-00033170: 7565 2872 6573 706f 6e73 652c 2027 7265  ue(response, 're
-00033180: 7375 6c74 272c 207b 7d29 0a20 2020 2020  sult', {}).     
-00033190: 2020 2072 6574 7572 6e20 7b0a 2020 2020     return {.    
-000331a0: 2020 2020 2020 2020 2769 6e66 6f27 3a20          'info': 
-000331b0: 7265 7370 6f6e 7365 2c0a 2020 2020 2020  response,.      
-000331c0: 2020 2020 2020 2769 6427 3a20 7365 6c66        'id': self
-000331d0: 2e73 6166 655f 7374 7269 6e67 2872 6573  .safe_string(res
-000331e0: 756c 742c 2027 6f72 6465 7249 6427 292c  ult, 'orderId'),
-000331f0: 0a20 2020 2020 2020 207d 0a0a 2020 2020  .        }..    
-00033200: 6173 796e 6320 6465 6620 6564 6974 5f75  async def edit_u
-00033210: 6e69 6669 6564 5f6d 6172 6769 6e5f 6f72  nified_margin_or
-00033220: 6465 7228 7365 6c66 2c20 6964 3a20 7374  der(self, id: st
-00033230: 722c 2073 796d 626f 6c2c 2074 7970 652c  r, symbol, type,
-00033240: 2073 6964 652c 2061 6d6f 756e 742c 2070   side, amount, p
-00033250: 7269 6365 3d4e 6f6e 652c 2070 6172 616d  rice=None, param
-00033260: 733d 7b7d 293a 0a20 2020 2020 2020 2061  s={}):.        a
-00033270: 7761 6974 2073 656c 662e 6c6f 6164 5f6d  wait self.load_m
-00033280: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
-00033290: 206d 6172 6b65 7420 3d20 7365 6c66 2e6d   market = self.m
-000332a0: 6172 6b65 7428 7379 6d62 6f6c 290a 2020  arket(symbol).  
-000332b0: 2020 2020 2020 6966 206e 6f74 206d 6172        if not mar
-000332c0: 6b65 745b 276c 696e 6561 7227 5d20 616e  ket['linear'] an
-000332d0: 6420 6e6f 7420 6d61 726b 6574 5b27 6f70  d not market['op
-000332e0: 7469 6f6e 275d 3a0a 2020 2020 2020 2020  tion']:.        
-000332f0: 2020 2020 7261 6973 6520 4e6f 7453 7570      raise NotSup
-00033300: 706f 7274 6564 2873 656c 662e 6964 202b  ported(self.id +
-00033310: 2027 2065 6469 744f 7264 6572 2064 6f65   ' editOrder doe
-00033320: 7320 6e6f 7420 616c 6c6f 7720 696e 7665  s not allow inve
-00033330: 7273 6520 6d61 726b 6574 206f 7264 6572  rse market order
-00033340: 7320 666f 7220 2720 2b20 7379 6d62 6f6c  s for ' + symbol
-00033350: 202b 2027 206d 6172 6b65 7473 2729 0a20   + ' markets'). 
-00033360: 2020 2020 2020 206c 6f77 6572 4361 7365         lowerCase
-00033370: 5479 7065 203d 2074 7970 652e 6c6f 7765  Type = type.lowe
-00033380: 7228 290a 2020 2020 2020 2020 6966 2028  r().        if (
-00033390: 7072 6963 6520 6973 204e 6f6e 6529 2061  price is None) a
-000333a0: 6e64 2028 6c6f 7765 7243 6173 6554 7970  nd (lowerCaseTyp
-000333b0: 6520 3d3d 2027 6c69 6d69 7427 293a 0a20  e == 'limit'):. 
-000333c0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-000333d0: 2041 7267 756d 656e 7473 5265 7175 6972   ArgumentsRequir
-000333e0: 6564 2873 656c 662e 6964 202b 2027 2065  ed(self.id + ' e
-000333f0: 6469 744f 7264 6572 2072 6571 7569 7265  ditOrder require
-00033400: 7320 6120 7072 6963 6520 6172 6775 6d65  s a price argume
-00033410: 6e74 2066 6f72 206c 696d 6974 206f 7264  nt for limit ord
-00033420: 6572 7327 290a 2020 2020 2020 2020 7265  ers').        re
-00033430: 7175 6573 7420 3d20 7b0a 2020 2020 2020  quest = {.      
-00033440: 2020 2020 2020 276f 7264 6572 4964 273a        'orderId':
-00033450: 2069 642c 0a20 2020 2020 2020 2020 2020   id,.           
-00033460: 2027 7379 6d62 6f6c 273a 206d 6172 6b65   'symbol': marke
-00033470: 745b 2769 6427 5d2c 0a20 2020 2020 2020  t['id'],.       
-00033480: 2020 2020 2027 7369 6465 273a 2073 656c       'side': sel
-00033490: 662e 6361 7069 7461 6c69 7a65 2873 6964  f.capitalize(sid
-000334a0: 6529 2c0a 2020 2020 2020 2020 2020 2020  e),.            
-000334b0: 276f 7264 6572 5479 7065 273a 2073 656c  'orderType': sel
-000334c0: 662e 6361 7069 7461 6c69 7a65 286c 6f77  f.capitalize(low
-000334d0: 6572 4361 7365 5479 7065 292c 2020 2320  erCaseType),  # 
-000334e0: 6c69 6d69 7420 6f72 206d 6172 6b65 740a  limit or market.
-000334f0: 2020 2020 2020 2020 2020 2020 2774 696d              'tim
-00033500: 6549 6e46 6f72 6365 273a 2027 476f 6f64  eInForce': 'Good
-00033510: 5469 6c6c 4361 6e63 656c 272c 2020 2320  TillCancel',  # 
-00033520: 496d 6d65 6469 6174 654f 7243 616e 6365  ImmediateOrCance
-00033530: 6c2c 2046 696c 6c4f 724b 696c 6c2c 2050  l, FillOrKill, P
-00033540: 6f73 744f 6e6c 790a 2020 2020 2020 2020  ostOnly.        
-00033550: 2020 2020 2771 7479 273a 2073 656c 662e      'qty': self.
-00033560: 616d 6f75 6e74 5f74 6f5f 7072 6563 6973  amount_to_precis
-00033570: 696f 6e28 7379 6d62 6f6c 2c20 616d 6f75  ion(symbol, amou
-00033580: 6e74 292c 0a20 2020 2020 2020 2020 2020  nt),.           
-00033590: 2023 2027 7461 6b65 5072 6f66 6974 273a   # 'takeProfit':
-000335a0: 2031 3233 2e34 352c 2020 2320 7461 6b65   123.45,  # take
-000335b0: 2070 726f 6669 7420 7072 6963 652c 206f   profit price, o
-000335c0: 6e6c 7920 7461 6b65 2065 6666 6563 7420  nly take effect 
-000335d0: 7570 6f6e 206f 7065 6e69 6e67 2074 6865  upon opening the
-000335e0: 2070 6f73 6974 696f 6e0a 2020 2020 2020   position.      
-000335f0: 2020 2020 2020 2320 2773 746f 704c 6f73        # 'stopLos
-00033600: 7327 3a20 3132 332e 3435 2c20 2023 2073  s': 123.45,  # s
-00033610: 746f 7020 6c6f 7373 2070 7269 6365 2c20  top loss price, 
-00033620: 6f6e 6c79 2074 616b 6520 6566 6665 6374  only take effect
-00033630: 2075 706f 6e20 6f70 656e 696e 6720 7468   upon opening th
-00033640: 6520 706f 7369 7469 6f6e 0a20 2020 2020  e position.     
-00033650: 2020 2020 2020 2023 2027 6f72 6465 724c         # 'orderL
-00033660: 696e 6b49 6427 3a20 2773 7472 696e 6727  inkId': 'string'
-00033670: 2c20 2023 2075 6e69 7175 6520 636c 6965  ,  # unique clie
-00033680: 6e74 206f 7264 6572 2069 642c 206d 6178  nt order id, max
-00033690: 2033 3620 6368 6172 6163 7465 7273 0a20   36 characters. 
-000336a0: 2020 2020 2020 2020 2020 2023 2027 7472             # 'tr
-000336b0: 6967 6765 7250 7269 6365 273a 2031 3233  iggerPrice': 123
-000336c0: 2e34 352c 2020 2320 7472 6967 6765 7220  .45,  # trigger 
-000336d0: 7072 6963 652c 2072 6571 7569 7265 6420  price, required 
-000336e0: 666f 7220 636f 6e64 6974 696f 6e61 6c20  for conditional 
-000336f0: 6f72 6465 7273 0a20 2020 2020 2020 2020  orders.         
-00033700: 2020 2023 2027 7472 6967 6765 7242 7927     # 'triggerBy'
-00033710: 3a20 274d 6172 6b50 7269 6365 272c 2020  : 'MarkPrice',  
-00033720: 2320 496e 6465 7850 7269 6365 2c20 4d61  # IndexPrice, Ma
-00033730: 726b 5072 6963 650a 2020 2020 2020 2020  rkPrice.        
-00033740: 2020 2020 2320 2774 7074 7269 6767 6572      # 'tptrigger
-00033750: 6279 273a 2027 4d61 726b 5072 6963 6527  by': 'MarkPrice'
-00033760: 2c20 2023 2049 6e64 6578 5072 6963 652c  ,  # IndexPrice,
-00033770: 204d 6172 6b50 7269 6365 0a20 2020 2020   MarkPrice.     
-00033780: 2020 2020 2020 2023 2027 736c 5472 6967         # 'slTrig
-00033790: 6765 7242 7927 3a20 274d 6172 6b50 7269  gerBy': 'MarkPri
-000337a0: 6365 272c 2020 2320 496e 6465 7850 7269  ce',  # IndexPri
-000337b0: 6365 2c20 4d61 726b 5072 6963 650a 2020  ce, MarkPrice.  
-000337c0: 2020 2020 2020 2020 2020 2320 2769 7627            # 'iv'
-000337d0: 3a20 2730 272c 2020 2320 496d 706c 6965  : '0',  # Implie
-000337e0: 6420 766f 6c61 7469 6c69 7479 2c20 666f  d volatility, fo
-000337f0: 7220 6f70 7469 6f6e 7320 6f6e 6c79 3b20  r options only; 
-00033800: 7061 7261 6d65 7465 7273 2061 7265 2070  parameters are p
-00033810: 6173 7365 6420 6163 636f 7264 696e 6720  assed according 
-00033820: 746f 2074 6865 2072 6561 6c20 7661 6c75  to the real valu
-00033830: 653b 2066 6f72 2065 7861 6d70 6c65 2c20  e; for example, 
-00033840: 666f 7220 3130 252c 2030 2e31 2069 7320  for 10%, 0.1 is 
-00033850: 7061 7373 6564 0a20 2020 2020 2020 207d  passed.        }
-00033860: 0a20 2020 2020 2020 2069 6620 6d61 726b  .        if mark
-00033870: 6574 5b27 6c69 6e65 6172 275d 3a0a 2020  et['linear']:.  
-00033880: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-00033890: 745b 2763 6174 6567 6f72 7927 5d20 3d20  t['category'] = 
-000338a0: 276c 696e 6561 7227 0a20 2020 2020 2020  'linear'.       
-000338b0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-000338c0: 2020 2072 6571 7565 7374 5b27 6361 7465     request['cate
-000338d0: 676f 7279 275d 203d 2027 6f70 7469 6f6e  gory'] = 'option
-000338e0: 270a 2020 2020 2020 2020 6973 4d61 726b  '.        isMark
-000338f0: 6574 203d 206c 6f77 6572 4361 7365 5479  et = lowerCaseTy
-00033900: 7065 203d 3d20 276d 6172 6b65 7427 0a20  pe == 'market'. 
-00033910: 2020 2020 2020 2069 734c 696d 6974 203d         isLimit =
-00033920: 206c 6f77 6572 4361 7365 5479 7065 203d   lowerCaseType =
-00033930: 3d20 276c 696d 6974 270a 2020 2020 2020  = 'limit'.      
-00033940: 2020 6966 2069 734c 696d 6974 3a0a 2020    if isLimit:.  
-00033950: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-00033960: 745b 2770 7269 6365 275d 203d 2073 656c  t['price'] = sel
-00033970: 662e 7072 6963 655f 746f 5f70 7265 6369  f.price_to_preci
-00033980: 7369 6f6e 2873 796d 626f 6c2c 2070 7269  sion(symbol, pri
-00033990: 6365 290a 2020 2020 2020 2020 6578 6368  ce).        exch
-000339a0: 616e 6765 5370 6563 6966 6963 5061 7261  angeSpecificPara
-000339b0: 6d20 3d20 7365 6c66 2e73 6166 655f 7374  m = self.safe_st
-000339c0: 7269 6e67 2870 6172 616d 732c 2027 7469  ring(params, 'ti
-000339d0: 6d65 5f69 6e5f 666f 7263 6527 290a 2020  me_in_force').  
-000339e0: 2020 2020 2020 7469 6d65 496e 466f 7263        timeInForc
-000339f0: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
-00033a00: 7269 6e67 5f6c 6f77 6572 2870 6172 616d  ring_lower(param
-00033a10: 732c 2027 7469 6d65 496e 466f 7263 6527  s, 'timeInForce'
-00033a20: 290a 2020 2020 2020 2020 706f 7374 4f6e  ).        postOn
-00033a30: 6c79 203d 2073 656c 662e 6973 5f70 6f73  ly = self.is_pos
-00033a40: 745f 6f6e 6c79 2869 734d 6172 6b65 742c  t_only(isMarket,
-00033a50: 2065 7863 6861 6e67 6553 7065 6369 6669   exchangeSpecifi
-00033a60: 6350 6172 616d 203d 3d20 2750 6f73 744f  cParam == 'PostO
-00033a70: 6e6c 7927 2c20 7061 7261 6d73 290a 2020  nly', params).  
-00033a80: 2020 2020 2020 6966 2070 6f73 744f 6e6c        if postOnl
-00033a90: 793a 0a20 2020 2020 2020 2020 2020 2072  y:.            r
-00033aa0: 6571 7565 7374 5b27 7469 6d65 496e 466f  equest['timeInFo
-00033ab0: 7263 6527 5d20 3d20 2750 6f73 744f 6e6c  rce'] = 'PostOnl
-00033ac0: 7927 0a20 2020 2020 2020 2065 6c69 6620  y'.        elif 
-00033ad0: 7469 6d65 496e 466f 7263 6520 3d3d 2027  timeInForce == '
-00033ae0: 6774 6327 3a0a 2020 2020 2020 2020 2020  gtc':.          
-00033af0: 2020 7265 7175 6573 745b 2774 696d 6549    request['timeI
-00033b00: 6e46 6f72 6365 275d 203d 2027 476f 6f64  nForce'] = 'Good
-00033b10: 5469 6c6c 4361 6e63 656c 270a 2020 2020  TillCancel'.    
-00033b20: 2020 2020 656c 6966 2074 696d 6549 6e46      elif timeInF
-00033b30: 6f72 6365 203d 3d20 2766 6f6b 273a 0a20  orce == 'fok':. 
-00033b40: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-00033b50: 7374 5b27 7469 6d65 496e 466f 7263 6527  st['timeInForce'
-00033b60: 5d20 3d20 2746 696c 6c4f 724b 696c 6c27  ] = 'FillOrKill'
-00033b70: 0a20 2020 2020 2020 2065 6c69 6620 7469  .        elif ti
-00033b80: 6d65 496e 466f 7263 6520 3d3d 2027 696f  meInForce == 'io
-00033b90: 6327 3a0a 2020 2020 2020 2020 2020 2020  c':.            
-00033ba0: 7265 7175 6573 745b 2774 696d 6549 6e46  request['timeInF
-00033bb0: 6f72 6365 275d 203d 2027 496d 6d65 6469  orce'] = 'Immedi
-00033bc0: 6174 654f 7243 616e 6365 6c27 0a20 2020  ateOrCancel'.   
-00033bd0: 2020 2020 2074 7269 6767 6572 5072 6963       triggerPric
-00033be0: 6520 3d20 7365 6c66 2e73 6166 655f 6e75  e = self.safe_nu
-00033bf0: 6d62 6572 5f32 2870 6172 616d 732c 2027  mber_2(params, '
-00033c00: 7472 6967 6765 7250 7269 6365 272c 2027  triggerPrice', '
-00033c10: 7374 6f70 5072 6963 6527 290a 2020 2020  stopPrice').    
-00033c20: 2020 2020 7374 6f70 4c6f 7373 5472 6967      stopLossTrig
-00033c30: 6765 7250 7269 6365 203d 2073 656c 662e  gerPrice = self.
-00033c40: 7361 6665 5f6e 756d 6265 7228 7061 7261  safe_number(para
-00033c50: 6d73 2c20 2773 746f 704c 6f73 7350 7269  ms, 'stopLossPri
-00033c60: 6365 2729 0a20 2020 2020 2020 2074 616b  ce').        tak
-00033c70: 6550 726f 6669 7454 7269 6767 6572 5072  eProfitTriggerPr
-00033c80: 6963 6520 3d20 7365 6c66 2e73 6166 655f  ice = self.safe_
-00033c90: 6e75 6d62 6572 2870 6172 616d 732c 2027  number(params, '
-00033ca0: 7461 6b65 5072 6f66 6974 5072 6963 6527  takeProfitPrice'
-00033cb0: 290a 2020 2020 2020 2020 7374 6f70 4c6f  ).        stopLo
-00033cc0: 7373 203d 2073 656c 662e 7361 6665 5f6e  ss = self.safe_n
-00033cd0: 756d 6265 7228 7061 7261 6d73 2c20 2773  umber(params, 's
-00033ce0: 746f 704c 6f73 7327 290a 2020 2020 2020  topLoss').      
-00033cf0: 2020 7461 6b65 5072 6f66 6974 203d 2073    takeProfit = s
-00033d00: 656c 662e 7361 6665 5f6e 756d 6265 7228  elf.safe_number(
-00033d10: 7061 7261 6d73 2c20 2774 616b 6550 726f  params, 'takePro
-00033d20: 6669 7427 290a 2020 2020 2020 2020 6973  fit').        is
-00033d30: 5374 6f70 4c6f 7373 5472 6967 6765 724f  StopLossTriggerO
-00033d40: 7264 6572 203d 2073 746f 704c 6f73 7354  rder = stopLossT
-00033d50: 7269 6767 6572 5072 6963 6520 6973 206e  riggerPrice is n
-00033d60: 6f74 204e 6f6e 650a 2020 2020 2020 2020  ot None.        
-00033d70: 6973 5461 6b65 5072 6f66 6974 5472 6967  isTakeProfitTrig
-00033d80: 6765 724f 7264 6572 203d 2074 616b 6550  gerOrder = takeP
-00033d90: 726f 6669 7454 7269 6767 6572 5072 6963  rofitTriggerPric
-00033da0: 6520 6973 206e 6f74 204e 6f6e 650a 2020  e is not None.  
-00033db0: 2020 2020 2020 6973 5374 6f70 4c6f 7373        isStopLoss
-00033dc0: 203d 2073 746f 704c 6f73 7320 6973 206e   = stopLoss is n
-00033dd0: 6f74 204e 6f6e 650a 2020 2020 2020 2020  ot None.        
-00033de0: 6973 5461 6b65 5072 6f66 6974 203d 2074  isTakeProfit = t
-00033df0: 616b 6550 726f 6669 7420 6973 206e 6f74  akeProfit is not
-00033e00: 204e 6f6e 650a 2020 2020 2020 2020 6966   None.        if
-00033e10: 2069 7353 746f 704c 6f73 7354 7269 6767   isStopLossTrigg
-00033e20: 6572 4f72 6465 7220 6f72 2069 7354 616b  erOrder or isTak
-00033e30: 6550 726f 6669 7454 7269 6767 6572 4f72  eProfitTriggerOr
-00033e40: 6465 723a 0a20 2020 2020 2020 2020 2020  der:.           
-00033e50: 2074 7269 6767 6572 5072 6963 6520 3d20   triggerPrice = 
-00033e60: 7374 6f70 4c6f 7373 5472 6967 6765 7250  stopLossTriggerP
-00033e70: 7269 6365 2069 6620 6973 5374 6f70 4c6f  rice if isStopLo
-00033e80: 7373 5472 6967 6765 724f 7264 6572 2065  ssTriggerOrder e
-00033e90: 6c73 6520 7461 6b65 5072 6f66 6974 5472  lse takeProfitTr
-00033ea0: 6967 6765 7250 7269 6365 0a20 2020 2020  iggerPrice.     
-00033eb0: 2020 2069 6620 7472 6967 6765 7250 7269     if triggerPri
-00033ec0: 6365 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ce is not None:.
-00033ed0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00033ee0: 6573 745b 2774 7269 6767 6572 5072 6963  est['triggerPric
-00033ef0: 6527 5d20 3d20 7365 6c66 2e70 7269 6365  e'] = self.price
-00033f00: 5f74 6f5f 7072 6563 6973 696f 6e28 7379  _to_precision(sy
-00033f10: 6d62 6f6c 2c20 7472 6967 6765 7250 7269  mbol, triggerPri
-00033f20: 6365 290a 2020 2020 2020 2020 6966 2069  ce).        if i
-00033f30: 7353 746f 704c 6f73 7320 6f72 2069 7354  sStopLoss or isT
-00033f40: 616b 6550 726f 6669 743a 0a20 2020 2020  akeProfit:.     
-00033f50: 2020 2020 2020 2069 6620 6973 5374 6f70         if isStop
-00033f60: 4c6f 7373 3a0a 2020 2020 2020 2020 2020  Loss:.          
-00033f70: 2020 2020 2020 7265 7175 6573 745b 2773        request['s
-00033f80: 746f 704c 6f73 7327 5d20 3d20 7365 6c66  topLoss'] = self
-00033f90: 2e70 7269 6365 5f74 6f5f 7072 6563 6973  .price_to_precis
-00033fa0: 696f 6e28 7379 6d62 6f6c 2c20 7374 6f70  ion(symbol, stop
-00033fb0: 4c6f 7373 290a 2020 2020 2020 2020 2020  Loss).          
-00033fc0: 2020 6966 2069 7354 616b 6550 726f 6669    if isTakeProfi
-00033fd0: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-00033fe0: 2020 2072 6571 7565 7374 5b27 7461 6b65     request['take
-00033ff0: 5072 6f66 6974 275d 203d 2073 656c 662e  Profit'] = self.
-00034000: 7072 6963 655f 746f 5f70 7265 6369 7369  price_to_precisi
-00034010: 6f6e 2873 796d 626f 6c2c 2074 616b 6550  on(symbol, takeP
-00034020: 726f 6669 7429 0a20 2020 2020 2020 2063  rofit).        c
-00034030: 6c69 656e 744f 7264 6572 4964 203d 2073  lientOrderId = s
-00034040: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
-00034050: 7061 7261 6d73 2c20 2763 6c69 656e 744f  params, 'clientO
-00034060: 7264 6572 4964 2729 0a20 2020 2020 2020  rderId').       
-00034070: 2069 6620 636c 6965 6e74 4f72 6465 7249   if clientOrderI
-00034080: 6420 6973 206e 6f74 204e 6f6e 653a 0a20  d is not None:. 
-00034090: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-000340a0: 7374 5b27 6f72 6465 724c 696e 6b49 6427  st['orderLinkId'
-000340b0: 5d20 3d20 636c 6965 6e74 4f72 6465 7249  ] = clientOrderI
-000340c0: 640a 2020 2020 2020 2020 7061 7261 6d73  d.        params
-000340d0: 203d 2073 656c 662e 6f6d 6974 2870 6172   = self.omit(par
-000340e0: 616d 732c 205b 2773 746f 7050 7269 6365  ams, ['stopPrice
-000340f0: 272c 2027 7469 6d65 496e 466f 7263 6527  ', 'timeInForce'
-00034100: 2c20 2774 7269 6767 6572 5072 6963 6527  , 'triggerPrice'
-00034110: 2c20 2773 746f 704c 6f73 7350 7269 6365  , 'stopLossPrice
-00034120: 272c 2027 7461 6b65 5072 6f66 6974 5072  ', 'takeProfitPr
-00034130: 6963 6527 2c20 2770 6f73 744f 6e6c 7927  ice', 'postOnly'
-00034140: 2c20 2763 6c69 656e 744f 7264 6572 4964  , 'clientOrderId
-00034150: 272c 2027 7374 6f70 4c6f 7373 272c 2027  ', 'stopLoss', '
-00034160: 7461 6b65 5072 6f66 6974 275d 290a 2020  takeProfit']).  
-00034170: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
-00034180: 2061 7761 6974 2073 656c 662e 7072 6976   await self.priv
-00034190: 6174 6550 6f73 7455 6e69 6669 6564 5633  atePostUnifiedV3
-000341a0: 5072 6976 6174 654f 7264 6572 5265 706c  PrivateOrderRepl
-000341b0: 6163 6528 7365 6c66 2e65 7874 656e 6428  ace(self.extend(
-000341c0: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
-000341d0: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
-000341e0: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-000341f0: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-00034200: 6574 436f 6465 223a 2030 2c0a 2020 2020  etCode": 0,.    
-00034210: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-00034220: 6574 4d73 6722 3a20 224f 4b22 2c0a 2020  etMsg": "OK",.  
-00034230: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00034240: 2272 6573 756c 7422 3a20 7b0a 2020 2020  "result": {.    
-00034250: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00034260: 2020 226f 7264 6572 4964 223a 2022 3432    "orderId": "42
-00034270: 6338 3664 3636 3333 3165 3431 3939 3864  c86d66331e41998d
-00034280: 3132 6332 3434 3063 6539 3063 3161 222c  12c2440ce90c1a",
-00034290: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000342a0: 2020 2020 2020 2022 6f72 6465 724c 696e         "orderLin
-000342b0: 6b49 6422 3a20 2265 3830 6435 3538 652d  kId": "e80d558e-
-000342c0: 6564 220a 2020 2020 2020 2020 2320 2020  ed".        #   
-000342d0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-000342e0: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
-000342f0: 230a 2020 2020 2020 2020 6f72 6465 7220  #.        order 
-00034300: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-00034310: 6528 7265 7370 6f6e 7365 2c20 2772 6573  e(response, 'res
-00034320: 756c 7427 2c20 7b7d 290a 2020 2020 2020  ult', {}).      
-00034330: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
-00034340: 7273 655f 6f72 6465 7228 6f72 6465 7229  rse_order(order)
-00034350: 0a0a 2020 2020 6173 796e 6320 6465 6620  ..    async def 
-00034360: 6564 6974 5f63 6f6e 7472 6163 745f 7633  edit_contract_v3
-00034370: 5f6f 7264 6572 2873 656c 662c 2069 643a  _order(self, id:
-00034380: 2073 7472 2c20 7379 6d62 6f6c 2c20 7479   str, symbol, ty
-00034390: 7065 2c20 7369 6465 2c20 616d 6f75 6e74  pe, side, amount
-000343a0: 3d4e 6f6e 652c 2070 7269 6365 3d4e 6f6e  =None, price=Non
-000343b0: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
-000343c0: 2020 2020 2020 2061 7761 6974 2073 656c         await sel
-000343d0: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
-000343e0: 0a20 2020 2020 2020 206d 6172 6b65 7420  .        market 
-000343f0: 3d20 7365 6c66 2e6d 6172 6b65 7428 7379  = self.market(sy
-00034400: 6d62 6f6c 290a 2020 2020 2020 2020 7265  mbol).        re
-00034410: 7175 6573 7420 3d20 7b0a 2020 2020 2020  quest = {.      
-00034420: 2020 2020 2020 2773 796d 626f 6c27 3a20        'symbol': 
-00034430: 6d61 726b 6574 5b27 6964 275d 2c0a 2020  market['id'],.  
-00034440: 2020 2020 2020 2020 2020 276f 7264 6572            'order
-00034450: 4964 273a 2069 642c 0a20 2020 2020 2020  Id': id,.       
-00034460: 2020 2020 2027 7174 7927 3a20 7365 6c66       'qty': self
-00034470: 2e61 6d6f 756e 745f 746f 5f70 7265 6369  .amount_to_preci
-00034480: 7369 6f6e 2873 796d 626f 6c2c 2061 6d6f  sion(symbol, amo
-00034490: 756e 7429 2c0a 2020 2020 2020 2020 2020  unt),.          
-000344a0: 2020 2320 276f 7264 6572 4c69 6e6b 4964    # 'orderLinkId
-000344b0: 273a 2027 272c 2020 2320 5573 6572 2063  ': '',  # User c
-000344c0: 7573 746f 6d69 7365 6420 6f72 6465 7220  ustomised order 
-000344d0: 6964 2e20 4569 7468 6572 206f 7264 6572  id. Either order
-000344e0: 4964 206f 7220 6f72 6465 724c 696e 6b49  Id or orderLinkI
-000344f0: 6420 6973 2072 6571 7569 7265 640a 2020  d is required.  
-00034500: 2020 2020 2020 2020 2020 2320 2774 7269            # 'tri
-00034510: 6767 6572 5072 6963 6527 3a20 2727 2c20  ggerPrice': '', 
-00034520: 2023 2054 7269 6767 6572 2070 7269 6365   # Trigger price
-00034530: 2e20 446f 6e27 7420 7061 7373 2069 7420  . Don't pass it 
-00034540: 6966 206e 6f74 206d 6f64 6966 7920 7468  if not modify th
-00034550: 6520 7174 790a 2020 2020 2020 2020 2020  e qty.          
-00034560: 2020 2320 2774 616b 6550 726f 6669 7427    # 'takeProfit'
-00034570: 3a20 2727 2c20 2023 2054 616b 6520 7072  : '',  # Take pr
-00034580: 6f66 6974 2070 7269 6365 2061 6674 6572  ofit price after
-00034590: 206d 6f64 6966 6963 6174 696f 6e2e 2044   modification. D
-000345a0: 6f6e 2774 2070 6173 7320 6974 2069 6620  on't pass it if 
-000345b0: 6e6f 7420 6d6f 6469 6679 2074 6865 2074  not modify the t
-000345c0: 616b 6520 7072 6f66 6974 0a20 2020 2020  ake profit.     
-000345d0: 2020 2020 2020 2023 2027 7374 6f70 4c6f         # 'stopLo
-000345e0: 7373 273a 2027 272c 2020 2320 5374 6f70  ss': '',  # Stop
-000345f0: 206c 6f73 7320 7072 6963 6520 6166 7465   loss price afte
-00034600: 7220 6d6f 6469 6669 6361 7469 6f6e 2e20  r modification. 
-00034610: 446f 6e27 7420 7061 7373 2069 7420 6966  Don't pass it if
-00034620: 206e 6f74 206d 6f64 6966 7920 7468 6520   not modify the 
-00034630: 5374 6f70 206c 6f73 730a 2020 2020 2020  Stop loss.      
-00034640: 2020 2020 2020 2320 2774 7054 7269 6767        # 'tpTrigg
-00034650: 6572 4279 273a 2027 272c 2020 2320 5468  erBy': '',  # Th
-00034660: 6520 7072 6963 6520 7479 7065 2074 6f20  e price type to 
-00034670: 7472 6967 6765 7220 7461 6b65 2070 726f  trigger take pro
-00034680: 6669 742e 2057 6865 6e20 7365 7420 6120  fit. When set a 
-00034690: 7461 6b65 2070 726f 6669 742c 2073 656c  take profit, sel
-000346a0: 6620 7061 7261 6d20 6973 2072 6571 7569  f param is requi
-000346b0: 7265 6420 6966 206e 6f20 696e 6974 6961  red if no initia
-000346c0: 6c20 7661 6c75 6520 666f 7220 7468 6520  l value for the 
-000346d0: 6f72 6465 720a 2020 2020 2020 2020 2020  order.          
-000346e0: 2020 2320 2773 6c54 7269 6767 6572 4279    # 'slTriggerBy
-000346f0: 273a 2027 272c 2020 2320 5468 6520 7072  ': '',  # The pr
-00034700: 6963 6520 7479 7065 2074 6f20 7472 6967  ice type to trig
-00034710: 6765 7220 7374 6f70 206c 6f73 732e 2057  ger stop loss. W
-00034720: 6865 6e20 7365 7420 6120 7374 6f70 206c  hen set a stop l
-00034730: 6f73 732c 2073 656c 6620 7061 7261 6d20  oss, self param 
-00034740: 6973 2072 6571 7569 7265 6420 6966 206e  is required if n
-00034750: 6f20 696e 6974 6961 6c20 7661 6c75 6520  o initial value 
-00034760: 666f 7220 7468 6520 6f72 6465 720a 2020  for the order.  
-00034770: 2020 2020 2020 2020 2020 2320 2774 7269            # 'tri
-00034780: 6767 6572 4279 273a 2027 272c 2020 2320  ggerBy': '',  # 
-00034790: 5472 6967 6765 7220 7072 6963 6520 7479  Trigger price ty
-000347a0: 7065 2e20 4c61 7374 5072 6963 652c 2049  pe. LastPrice, I
-000347b0: 6e64 6578 5072 6963 652c 204d 6172 6b50  ndexPrice, MarkP
-000347c0: 7269 6365 2c20 4c61 7374 5072 6963 650a  rice, LastPrice.
-000347d0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-000347e0: 2020 6966 2070 7269 6365 2069 7320 6e6f    if price is no
-000347f0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00034800: 2020 2020 7265 7175 6573 745b 2770 7269      request['pri
-00034810: 6365 275d 203d 2073 656c 662e 7072 6963  ce'] = self.pric
-00034820: 655f 746f 5f70 7265 6369 7369 6f6e 2873  e_to_precision(s
-00034830: 796d 626f 6c2c 2070 7269 6365 290a 2020  ymbol, price).  
-00034840: 2020 2020 2020 7472 6967 6765 7250 7269        triggerPri
-00034850: 6365 203d 2073 656c 662e 7361 6665 5f6e  ce = self.safe_n
-00034860: 756d 6265 725f 3228 7061 7261 6d73 2c20  umber_2(params, 
-00034870: 2774 7269 6767 6572 5072 6963 6527 2c20  'triggerPrice', 
-00034880: 2773 746f 7050 7269 6365 2729 0a20 2020  'stopPrice').   
-00034890: 2020 2020 2073 746f 704c 6f73 7354 7269       stopLossTri
-000348a0: 6767 6572 5072 6963 6520 3d20 7365 6c66  ggerPrice = self
-000348b0: 2e73 6166 655f 6e75 6d62 6572 2870 6172  .safe_number(par
-000348c0: 616d 732c 2027 7374 6f70 4c6f 7373 5072  ams, 'stopLossPr
-000348d0: 6963 6527 290a 2020 2020 2020 2020 7461  ice').        ta
-000348e0: 6b65 5072 6f66 6974 5472 6967 6765 7250  keProfitTriggerP
-000348f0: 7269 6365 203d 2073 656c 662e 7361 6665  rice = self.safe
-00034900: 5f6e 756d 6265 7228 7061 7261 6d73 2c20  _number(params, 
-00034910: 2774 616b 6550 726f 6669 7450 7269 6365  'takeProfitPrice
-00034920: 2729 0a20 2020 2020 2020 2073 746f 704c  ').        stopL
-00034930: 6f73 7320 3d20 7365 6c66 2e73 6166 655f  oss = self.safe_
-00034940: 6e75 6d62 6572 2870 6172 616d 732c 2027  number(params, '
-00034950: 7374 6f70 4c6f 7373 2729 0a20 2020 2020  stopLoss').     
-00034960: 2020 2074 616b 6550 726f 6669 7420 3d20     takeProfit = 
-00034970: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
-00034980: 2870 6172 616d 732c 2027 7461 6b65 5072  (params, 'takePr
-00034990: 6f66 6974 2729 0a20 2020 2020 2020 2069  ofit').        i
-000349a0: 7353 746f 704c 6f73 7354 7269 6767 6572  sStopLossTrigger
-000349b0: 4f72 6465 7220 3d20 7374 6f70 4c6f 7373  Order = stopLoss
-000349c0: 5472 6967 6765 7250 7269 6365 2069 7320  TriggerPrice is 
-000349d0: 6e6f 7420 4e6f 6e65 0a20 2020 2020 2020  not None.       
-000349e0: 2069 7354 616b 6550 726f 6669 7454 7269   isTakeProfitTri
-000349f0: 6767 6572 4f72 6465 7220 3d20 7461 6b65  ggerOrder = take
-00034a00: 5072 6f66 6974 5472 6967 6765 7250 7269  ProfitTriggerPri
-00034a10: 6365 2069 7320 6e6f 7420 4e6f 6e65 0a20  ce is not None. 
-00034a20: 2020 2020 2020 2069 7353 746f 704c 6f73         isStopLos
-00034a30: 7320 3d20 7374 6f70 4c6f 7373 2069 7320  s = stopLoss is 
-00034a40: 6e6f 7420 4e6f 6e65 0a20 2020 2020 2020  not None.       
-00034a50: 2069 7354 616b 6550 726f 6669 7420 3d20   isTakeProfit = 
-00034a60: 7461 6b65 5072 6f66 6974 2069 7320 6e6f  takeProfit is no
-00034a70: 7420 4e6f 6e65 0a20 2020 2020 2020 2069  t None.        i
-00034a80: 6620 6973 5374 6f70 4c6f 7373 5472 6967  f isStopLossTrig
-00034a90: 6765 724f 7264 6572 206f 7220 6973 5461  gerOrder or isTa
-00034aa0: 6b65 5072 6f66 6974 5472 6967 6765 724f  keProfitTriggerO
-00034ab0: 7264 6572 3a0a 2020 2020 2020 2020 2020  rder:.          
-00034ac0: 2020 7472 6967 6765 7250 7269 6365 203d    triggerPrice =
-00034ad0: 2073 746f 704c 6f73 7354 7269 6767 6572   stopLossTrigger
-00034ae0: 5072 6963 6520 6966 2069 7353 746f 704c  Price if isStopL
-00034af0: 6f73 7354 7269 6767 6572 4f72 6465 7220  ossTriggerOrder 
-00034b00: 656c 7365 2074 616b 6550 726f 6669 7454  else takeProfitT
-00034b10: 7269 6767 6572 5072 6963 650a 2020 2020  riggerPrice.    
-00034b20: 2020 2020 6966 2074 7269 6767 6572 5072      if triggerPr
-00034b30: 6963 6520 6973 206e 6f74 204e 6f6e 653a  ice is not None:
-00034b40: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-00034b50: 7565 7374 5b27 7472 6967 6765 7250 7269  uest['triggerPri
-00034b60: 6365 275d 203d 2073 656c 662e 7072 6963  ce'] = self.pric
-00034b70: 655f 746f 5f70 7265 6369 7369 6f6e 2873  e_to_precision(s
-00034b80: 796d 626f 6c2c 2074 7269 6767 6572 5072  ymbol, triggerPr
-00034b90: 6963 6529 0a20 2020 2020 2020 2069 6620  ice).        if 
-00034ba0: 6973 5374 6f70 4c6f 7373 206f 7220 6973  isStopLoss or is
-00034bb0: 5461 6b65 5072 6f66 6974 3a0a 2020 2020  TakeProfit:.    
-00034bc0: 2020 2020 2020 2020 6966 2069 7353 746f          if isSto
-00034bd0: 704c 6f73 733a 0a20 2020 2020 2020 2020  pLoss:.         
-00034be0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-00034bf0: 7374 6f70 4c6f 7373 275d 203d 2073 656c  stopLoss'] = sel
-00034c00: 662e 7072 6963 655f 746f 5f70 7265 6369  f.price_to_preci
-00034c10: 7369 6f6e 2873 796d 626f 6c2c 2073 746f  sion(symbol, sto
-00034c20: 704c 6f73 7329 0a20 2020 2020 2020 2020  pLoss).         
-00034c30: 2020 2069 6620 6973 5461 6b65 5072 6f66     if isTakeProf
-00034c40: 6974 3a0a 2020 2020 2020 2020 2020 2020  it:.            
-00034c50: 2020 2020 7265 7175 6573 745b 2774 616b      request['tak
-00034c60: 6550 726f 6669 7427 5d20 3d20 7365 6c66  eProfit'] = self
-00034c70: 2e70 7269 6365 5f74 6f5f 7072 6563 6973  .price_to_precis
-00034c80: 696f 6e28 7379 6d62 6f6c 2c20 7461 6b65  ion(symbol, take
-00034c90: 5072 6f66 6974 290a 2020 2020 2020 2020  Profit).        
-00034ca0: 636c 6965 6e74 4f72 6465 7249 6420 3d20  clientOrderId = 
-00034cb0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-00034cc0: 2870 6172 616d 732c 2027 636c 6965 6e74  (params, 'client
-00034cd0: 4f72 6465 7249 6427 290a 2020 2020 2020  OrderId').      
-00034ce0: 2020 6966 2063 6c69 656e 744f 7264 6572    if clientOrder
-00034cf0: 4964 2069 7320 6e6f 7420 4e6f 6e65 3a0a  Id is not None:.
-00034d00: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00034d10: 6573 745b 276f 7264 6572 4c69 6e6b 4964  est['orderLinkId
-00034d20: 275d 203d 2063 6c69 656e 744f 7264 6572  '] = clientOrder
-00034d30: 4964 0a20 2020 2020 2020 2070 6172 616d  Id.        param
-00034d40: 7320 3d20 7365 6c66 2e6f 6d69 7428 7061  s = self.omit(pa
-00034d50: 7261 6d73 2c20 5b27 7374 6f70 5072 6963  rams, ['stopPric
-00034d60: 6527 2c20 2773 746f 704c 6f73 7350 7269  e', 'stopLossPri
-00034d70: 6365 272c 2027 7461 6b65 5072 6f66 6974  ce', 'takeProfit
-00034d80: 5072 6963 6527 2c20 2774 7269 6767 6572  Price', 'trigger
-00034d90: 5072 6963 6527 2c20 2763 6c69 656e 744f  Price', 'clientO
-00034da0: 7264 6572 4964 272c 2027 7374 6f70 4c6f  rderId', 'stopLo
-00034db0: 7373 272c 2027 7461 6b65 5072 6f66 6974  ss', 'takeProfit
-00034dc0: 275d 290a 2020 2020 2020 2020 7265 7370  ']).        resp
-00034dd0: 6f6e 7365 203d 2061 7761 6974 2073 656c  onse = await sel
-00034de0: 662e 7072 6976 6174 6550 6f73 7443 6f6e  f.privatePostCon
-00034df0: 7472 6163 7456 3350 7269 7661 7465 4f72  tractV3PrivateOr
-00034e00: 6465 7252 6570 6c61 6365 2873 656c 662e  derReplace(self.
-00034e10: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
-00034e20: 7061 7261 6d73 2929 0a20 2020 2020 2020  params)).       
-00034e30: 2023 0a20 2020 2020 2020 2023 2063 6f6e   #.        # con
-00034e40: 7472 6163 7420 7633 0a20 2020 2020 2020  tract v3.       
-00034e50: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
-00034e60: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-00034e70: 2020 2020 2022 7265 7443 6f64 6522 3a20       "retCode": 
-00034e80: 302c 0a20 2020 2020 2020 2023 2020 2020  0,.        #    
-00034e90: 2020 2020 2022 7265 744d 7367 223a 2022       "retMsg": "
-00034ea0: 4f4b 222c 0a20 2020 2020 2020 2023 2020  OK",.        #  
-00034eb0: 2020 2020 2020 2022 7265 7375 6c74 223a         "result":
-00034ec0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-00034ed0: 2020 2020 2020 2020 2022 6f72 6465 7249           "orderI
-00034ee0: 6422 3a20 2264 6238 6237 3462 332d 3732  d": "db8b74b3-72
-00034ef0: 6433 2d34 3236 342d 6266 3366 2d35 3264  d3-4264-bf3f-52d
-00034f00: 3339 6234 3139 3536 6522 2c0a 2020 2020  39b41956e",.    
-00034f10: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00034f20: 2020 226f 7264 6572 4c69 6e6b 4964 223a    "orderLinkId":
-00034f30: 2022 7830 3032 220a 2020 2020 2020 2020   "x002".        
-00034f40: 2320 2020 2020 2020 2020 7d2c 0a20 2020  #         },.   
-00034f50: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00034f60: 7265 7445 7874 496e 666f 223a 207b 7d2c  retExtInfo": {},
-00034f70: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00034f80: 2020 2022 7469 6d65 223a 2031 3635 3839     "time": 16589
-00034f90: 3032 3631 3037 3439 0a20 2020 2020 2020  02610749.       
-00034fa0: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
-00034fb0: 2023 0a20 2020 2020 2020 2072 6573 756c   #.        resul
-00034fc0: 7420 3d20 7365 6c66 2e73 6166 655f 7661  t = self.safe_va
-00034fd0: 6c75 6528 7265 7370 6f6e 7365 2c20 2772  lue(response, 'r
-00034fe0: 6573 756c 7427 2c20 7b7d 290a 2020 2020  esult', {}).    
-00034ff0: 2020 2020 7265 7475 726e 207b 0a20 2020      return {.   
-00035000: 2020 2020 2020 2020 2027 696e 666f 273a           'info':
-00035010: 2072 6573 706f 6e73 652c 0a20 2020 2020   response,.     
-00035020: 2020 2020 2020 2027 6964 273a 2073 656c         'id': sel
-00035030: 662e 7361 6665 5f73 7472 696e 6728 7265  f.safe_string(re
-00035040: 7375 6c74 2c20 276f 7264 6572 4964 2729  sult, 'orderId')
-00035050: 2c0a 2020 2020 2020 2020 7d0a 0a20 2020  ,.        }..   
-00035060: 2061 7379 6e63 2064 6566 2065 6469 745f   async def edit_
-00035070: 6f72 6465 7228 7365 6c66 2c20 6964 3a20  order(self, id: 
-00035080: 7374 722c 2073 796d 626f 6c2c 2074 7970  str, symbol, typ
-00035090: 652c 2073 6964 652c 2061 6d6f 756e 743d  e, side, amount=
-000350a0: 4e6f 6e65 2c20 7072 6963 653d 4e6f 6e65  None, price=None
-000350b0: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
-000350c0: 2020 2020 2020 6966 2073 796d 626f 6c20        if symbol 
-000350d0: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-000350e0: 2020 2020 2072 6169 7365 2041 7267 756d       raise Argum
-000350f0: 656e 7473 5265 7175 6972 6564 2873 656c  entsRequired(sel
-00035100: 662e 6964 202b 2027 2065 6469 744f 7264  f.id + ' editOrd
-00035110: 6572 2829 2072 6571 7569 7265 7320 616e  er() requires an
-00035120: 2073 796d 626f 6c20 6172 6775 6d65 6e74   symbol argument
-00035130: 2729 0a20 2020 2020 2020 2061 7761 6974  ').        await
-00035140: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
-00035150: 7473 2829 0a20 2020 2020 2020 206d 6172  ts().        mar
-00035160: 6b65 7420 3d20 7365 6c66 2e6d 6172 6b65  ket = self.marke
-00035170: 7428 7379 6d62 6f6c 290a 2020 2020 2020  t(symbol).      
-00035180: 2020 656e 6162 6c65 556e 6966 6965 644d    enableUnifiedM
-00035190: 6172 6769 6e2c 2065 6e61 626c 6555 6e69  argin, enableUni
-000351a0: 6669 6564 4163 636f 756e 7420 3d20 6177  fiedAccount = aw
-000351b0: 6169 7420 7365 6c66 2e69 735f 756e 6966  ait self.is_unif
-000351c0: 6965 645f 656e 6162 6c65 6428 290a 2020  ied_enabled().  
-000351d0: 2020 2020 2020 6966 2065 6e61 626c 6555        if enableU
-000351e0: 6e69 6669 6564 4163 636f 756e 743a 0a20  nifiedAccount:. 
-000351f0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00035200: 6e20 6177 6169 7420 7365 6c66 2e65 6469  n await self.edi
-00035210: 745f 756e 6966 6965 645f 6163 636f 756e  t_unified_accoun
-00035220: 745f 6f72 6465 7228 6964 2c20 7379 6d62  t_order(id, symb
-00035230: 6f6c 2c20 7479 7065 2c20 7369 6465 2c20  ol, type, side, 
-00035240: 616d 6f75 6e74 2c20 7072 6963 652c 2070  amount, price, p
-00035250: 6172 616d 7329 0a20 2020 2020 2020 2065  arams).        e
-00035260: 6c69 6620 6d61 726b 6574 5b27 7370 6f74  lif market['spot
-00035270: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
-00035280: 7261 6973 6520 4e6f 7453 7570 706f 7274  raise NotSupport
-00035290: 6564 2873 656c 662e 6964 202b 2027 2065  ed(self.id + ' e
-000352a0: 6469 744f 7264 6572 2829 2064 6f65 7320  ditOrder() does 
-000352b0: 6e6f 7420 7375 7070 6f72 7420 7370 6f74  not support spot
-000352c0: 206d 6172 6b65 7473 2729 0a20 2020 2020   markets').     
-000352d0: 2020 2065 6c69 6620 656e 6162 6c65 556e     elif enableUn
-000352e0: 6966 6965 644d 6172 6769 6e20 616e 6420  ifiedMargin and 
-000352f0: 6e6f 7420 6d61 726b 6574 5b27 696e 7665  not market['inve
-00035300: 7273 6527 5d3a 0a20 2020 2020 2020 2020  rse']:.         
-00035310: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
-00035320: 7365 6c66 2e65 6469 745f 756e 6966 6965  self.edit_unifie
-00035330: 645f 6d61 7267 696e 5f6f 7264 6572 2869  d_margin_order(i
-00035340: 642c 2073 796d 626f 6c2c 2074 7970 652c  d, symbol, type,
-00035350: 2073 6964 652c 2061 6d6f 756e 742c 2070   side, amount, p
-00035360: 7269 6365 2c20 7061 7261 6d73 290a 2020  rice, params).  
-00035370: 2020 2020 2020 7265 7475 726e 2061 7761        return awa
-00035380: 6974 2073 656c 662e 6564 6974 5f63 6f6e  it self.edit_con
-00035390: 7472 6163 745f 7633 5f6f 7264 6572 2869  tract_v3_order(i
-000353a0: 642c 2073 796d 626f 6c2c 2074 7970 652c  d, symbol, type,
-000353b0: 2073 6964 652c 2061 6d6f 756e 742c 2070   side, amount, p
-000353c0: 7269 6365 2c20 7061 7261 6d73 290a 0a20  rice, params).. 
-000353d0: 2020 2061 7379 6e63 2064 6566 2063 616e     async def can
-000353e0: 6365 6c5f 756e 6966 6965 645f 6163 636f  cel_unified_acco
-000353f0: 756e 745f 6f72 6465 7228 7365 6c66 2c20  unt_order(self, 
-00035400: 6964 3a20 7374 722c 2073 796d 626f 6c3a  id: str, symbol:
-00035410: 204f 7074 696f 6e61 6c5b 7374 725d 203d   Optional[str] =
-00035420: 204e 6f6e 652c 2070 6172 616d 733d 7b7d   None, params={}
-00035430: 293a 0a20 2020 2020 2020 2069 6620 7379  ):.        if sy
-00035440: 6d62 6f6c 2069 7320 4e6f 6e65 3a0a 2020  mbol is None:.  
-00035450: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00035460: 4172 6775 6d65 6e74 7352 6571 7569 7265  ArgumentsRequire
-00035470: 6428 7365 6c66 2e69 6420 2b20 2720 6361  d(self.id + ' ca
-00035480: 6e63 656c 4f72 6465 7228 2920 7265 7175  ncelOrder() requ
-00035490: 6972 6573 2061 2073 796d 626f 6c20 6172  ires a symbol ar
-000354a0: 6775 6d65 6e74 2729 0a20 2020 2020 2020  gument').       
-000354b0: 2061 7761 6974 2073 656c 662e 6c6f 6164   await self.load
-000354c0: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
-000354d0: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
-000354e0: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
-000354f0: 2020 2020 2020 2020 7265 7175 6573 7420          request 
-00035500: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-00035510: 2773 796d 626f 6c27 3a20 6d61 726b 6574  'symbol': market
-00035520: 5b27 6964 275d 2c0a 2020 2020 2020 2020  ['id'],.        
-00035530: 2020 2020 2320 276f 7264 6572 4c69 6e6b      # 'orderLink
-00035540: 4964 273a 2027 7374 7269 6e67 272c 0a20  Id': 'string',. 
-00035550: 2020 2020 2020 2020 2020 2023 2027 6f72             # 'or
-00035560: 6465 7249 6427 3a20 6964 2c0a 2020 2020  derId': id,.    
-00035570: 2020 2020 2020 2020 2320 636f 6e64 6974          # condit
-00035580: 696f 6e61 6c20 6f72 6465 7273 0a20 2020  ional orders.   
-00035590: 2020 2020 2020 2020 2023 2027 6f72 6465           # 'orde
-000355a0: 7246 696c 7465 7227 3a20 2727 2c20 2023  rFilter': '',  #
-000355b0: 2056 616c 6964 2066 6f72 2073 706f 7420   Valid for spot 
-000355c0: 6f6e 6c79 2e20 4f72 6465 722c 7470 736c  only. Order,tpsl
-000355d0: 4f72 6465 722e 2049 6620 6e6f 7420 7061  Order. If not pa
-000355e0: 7373 6564 2c20 4f72 6465 7220 6279 2064  ssed, Order by d
-000355f0: 6566 6175 6c74 0a20 2020 2020 2020 207d  efault.        }
-00035600: 0a20 2020 2020 2020 2069 6620 6d61 726b  .        if mark
-00035610: 6574 5b27 7370 6f74 275d 3a0a 2020 2020  et['spot']:.    
-00035620: 2020 2020 2020 2020 2320 6f6e 6c79 2077          # only w
-00035630: 6f72 6b73 2066 6f72 2073 706f 7420 6d61  orks for spot ma
-00035640: 726b 6574 0a20 2020 2020 2020 2020 2020  rket.           
-00035650: 2069 7353 746f 7020 3d20 7365 6c66 2e73   isStop = self.s
-00035660: 6166 655f 7661 6c75 6528 7061 7261 6d73  afe_value(params
-00035670: 2c20 2773 746f 7027 2c20 4661 6c73 6529  , 'stop', False)
-00035680: 0a20 2020 2020 2020 2020 2020 2070 6172  .            par
-00035690: 616d 7320 3d20 7365 6c66 2e6f 6d69 7428  ams = self.omit(
-000356a0: 7061 7261 6d73 2c20 5b27 7374 6f70 275d  params, ['stop']
-000356b0: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
-000356c0: 7175 6573 745b 276f 7264 6572 4669 6c74  quest['orderFilt
-000356d0: 6572 275d 203d 2027 7470 736c 4f72 6465  er'] = 'tpslOrde
-000356e0: 7227 2069 6620 6973 5374 6f70 2065 6c73  r' if isStop els
-000356f0: 6520 274f 7264 6572 270a 2020 2020 2020  e 'Order'.      
-00035700: 2020 6966 2069 6420 6973 206e 6f74 204e    if id is not N
-00035710: 6f6e 653a 2020 2320 5468 6520 7573 6572  one:  # The user
-00035720: 2063 616e 2061 6c73 6f20 7573 6520 6172   can also use ar
-00035730: 6775 6d65 6e74 2070 6172 616d 735b 226f  gument params["o
-00035740: 7264 6572 4c69 6e6b 4964 225d 0a20 2020  rderLinkId"].   
-00035750: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00035760: 5b27 6f72 6465 7249 6427 5d20 3d20 6964  ['orderId'] = id
-00035770: 0a20 2020 2020 2020 2069 6620 6d61 726b  .        if mark
-00035780: 6574 5b27 7370 6f74 275d 3a0a 2020 2020  et['spot']:.    
-00035790: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-000357a0: 2763 6174 6567 6f72 7927 5d20 3d20 2773  'category'] = 's
-000357b0: 706f 7427 0a20 2020 2020 2020 2065 6c69  pot'.        eli
-000357c0: 6620 6d61 726b 6574 5b27 6f70 7469 6f6e  f market['option
-000357d0: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
-000357e0: 7265 7175 6573 745b 2763 6174 6567 6f72  request['categor
-000357f0: 7927 5d20 3d20 276f 7074 696f 6e27 0a20  y'] = 'option'. 
-00035800: 2020 2020 2020 2065 6c69 6620 6d61 726b         elif mark
-00035810: 6574 5b27 6c69 6e65 6172 275d 3a0a 2020  et['linear']:.  
-00035820: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-00035830: 745b 2763 6174 6567 6f72 7927 5d20 3d20  t['category'] = 
-00035840: 276c 696e 6561 7227 0a20 2020 2020 2020  'linear'.       
-00035850: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00035860: 2020 2072 6169 7365 204e 6f74 5375 7070     raise NotSupp
-00035870: 6f72 7465 6428 7365 6c66 2e69 6420 2b20  orted(self.id + 
-00035880: 2720 6361 6e63 656c 4f72 6465 7228 2920  ' cancelOrder() 
-00035890: 646f 6573 206e 6f74 2061 6c6c 6f77 2069  does not allow i
-000358a0: 6e76 6572 7365 206d 6172 6b65 7420 6f72  nverse market or
-000358b0: 6465 7273 2066 6f72 2027 202b 2073 796d  ders for ' + sym
-000358c0: 626f 6c20 2b20 2720 6d61 726b 6574 7327  bol + ' markets'
-000358d0: 290a 2020 2020 2020 2020 7265 7370 6f6e  ).        respon
-000358e0: 7365 203d 2061 7761 6974 2073 656c 662e  se = await self.
-000358f0: 7072 6976 6174 6550 6f73 7456 354f 7264  privatePostV5Ord
-00035900: 6572 4361 6e63 656c 2873 656c 662e 6578  erCancel(self.ex
-00035910: 7465 6e64 2872 6571 7565 7374 2c20 7061  tend(request, pa
-00035920: 7261 6d73 2929 0a20 2020 2020 2020 2023  rams)).        #
-00035930: 0a20 2020 2020 2020 2023 2020 2020 207b  .        #     {
-00035940: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00035950: 2020 2022 7265 7443 6f64 6522 3a20 302c     "retCode": 0,
-00035960: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00035970: 2020 2022 7265 744d 7367 223a 2022 4f4b     "retMsg": "OK
-00035980: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00035990: 2020 2020 2022 7265 7375 6c74 223a 207b       "result": {
-000359a0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000359b0: 2020 2020 2020 2022 6f72 6465 7249 6422         "orderId"
-000359c0: 3a20 2263 3666 3035 3564 392d 3766 3231  : "c6f055d9-7f21
-000359d0: 2d34 3037 392d 3931 3364 2d65 3635 3233  -4079-913d-e6523
-000359e0: 6139 6366 6666 6122 2c0a 2020 2020 2020  a9cfffa",.      
-000359f0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00035a00: 226f 7264 6572 4c69 6e6b 4964 223a 2022  "orderLinkId": "
-00035a10: 6c69 6e65 6172 2d30 3034 220a 2020 2020  linear-004".    
-00035a20: 2020 2020 2320 2020 2020 2020 2020 7d2c      #         },
-00035a30: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00035a40: 2020 2022 7265 7445 7874 496e 666f 223a     "retExtInfo":
-00035a50: 207b 7d2c 0a20 2020 2020 2020 2023 2020   {},.        #  
-00035a60: 2020 2020 2020 2022 7469 6d65 223a 2031         "time": 1
-00035a70: 3637 3232 3137 3337 3731 3634 0a20 2020  672217377164.   
-00035a80: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
-00035a90: 2020 2020 2023 0a20 2020 2020 2020 2072       #.        r
-00035aa0: 6573 756c 7420 3d20 7365 6c66 2e73 6166  esult = self.saf
-00035ab0: 655f 7661 6c75 6528 7265 7370 6f6e 7365  e_value(response
-00035ac0: 2c20 2772 6573 756c 7427 2c20 7b7d 290a  , 'result', {}).
-00035ad0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00035ae0: 656c 662e 7061 7273 655f 6f72 6465 7228  elf.parse_order(
-00035af0: 7265 7375 6c74 2c20 6d61 726b 6574 290a  result, market).
-00035b00: 0a20 2020 2061 7379 6e63 2064 6566 2063  .    async def c
-00035b10: 616e 6365 6c5f 7370 6f74 5f6f 7264 6572  ancel_spot_order
-00035b20: 2873 656c 662c 2069 643a 2073 7472 2c20  (self, id: str, 
-00035b30: 7379 6d62 6f6c 3a20 4f70 7469 6f6e 616c  symbol: Optional
-00035b40: 5b73 7472 5d20 3d20 4e6f 6e65 2c20 7061  [str] = None, pa
-00035b50: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
-00035b60: 2020 6177 6169 7420 7365 6c66 2e6c 6f61    await self.loa
-00035b70: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
-00035b80: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
-00035b90: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
-00035ba0: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
-00035bb0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-00035bc0: 2023 2027 6f72 6465 725f 6c69 6e6b 5f69   # 'order_link_i
-00035bd0: 6427 3a20 2773 7472 696e 6727 2c20 2023  d': 'string',  #
-00035be0: 206f 6e65 206f 6620 6f72 6465 725f 6964   one of order_id
-00035bf0: 2c20 7374 6f70 5f6f 7264 6572 5f69 6420  , stop_order_id 
-00035c00: 6f72 206f 7264 6572 5f6c 696e 6b5f 6964  or order_link_id
-00035c10: 2069 7320 7265 7175 6972 6564 0a20 2020   is required.   
-00035c20: 2020 2020 2020 2020 2023 2027 6f72 6465           # 'orde
-00035c30: 7249 6427 3a20 6964 0a20 2020 2020 2020  rId': id.       
-00035c40: 207d 0a20 2020 2020 2020 2069 6620 6964   }.        if id
-00035c50: 2069 7320 6e6f 7420 4e6f 6e65 3a20 2023   is not None:  #
-00035c60: 2054 6865 2075 7365 7220 6361 6e20 616c   The user can al
-00035c70: 736f 2075 7365 2061 7267 756d 656e 7420  so use argument 
-00035c80: 7061 7261 6d73 5b22 6f72 6465 725f 6c69  params["order_li
-00035c90: 6e6b 5f69 6422 5d0a 2020 2020 2020 2020  nk_id"].        
-00035ca0: 2020 2020 7265 7175 6573 745b 276f 7264      request['ord
-00035cb0: 6572 4964 275d 203d 2069 640a 2020 2020  erId'] = id.    
-00035cc0: 2020 2020 7265 7370 6f6e 7365 203d 2061      response = a
-00035cd0: 7761 6974 2073 656c 662e 7072 6976 6174  wait self.privat
-00035ce0: 6550 6f73 7453 706f 7456 3350 7269 7661  ePostSpotV3Priva
-00035cf0: 7465 4361 6e63 656c 4f72 6465 7228 7365  teCancelOrder(se
-00035d00: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
-00035d10: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
-00035d20: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-00035d30: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-00035d40: 2020 2020 2020 2020 2272 6574 436f 6465          "retCode
-00035d50: 223a 2022 3022 2c0a 2020 2020 2020 2020  ": "0",.        
-00035d60: 2320 2020 2020 2020 2020 2272 6574 4d73  #         "retMs
-00035d70: 6722 3a20 224f 4b22 2c0a 2020 2020 2020  g": "OK",.      
-00035d80: 2020 2320 2020 2020 2020 2020 2272 6573    #         "res
-00035d90: 756c 7422 3a20 7b0a 2020 2020 2020 2020  ult": {.        
-00035da0: 2320 2020 2020 2020 2020 2020 2020 226f  #             "o
-00035db0: 7264 6572 4964 223a 2022 3132 3735 3034  rderId": "127504
-00035dc0: 3632 3438 3538 3534 3134 3134 3422 2c0a  6248585414144",.
-00035dd0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00035de0: 2020 2020 2020 226f 7264 6572 4c69 6e6b        "orderLink
-00035df0: 4964 223a 2022 3136 3636 3733 3333 3537  Id": "1666733357
-00035e00: 3433 3436 3137 222c 0a20 2020 2020 2020  434617",.       
-00035e10: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-00035e20: 7379 6d62 6f6c 223a 2022 4141 5645 5553  symbol": "AAVEUS
-00035e30: 4454 222c 0a20 2020 2020 2020 2023 2020  DT",.        #  
-00035e40: 2020 2020 2020 2020 2020 2022 7374 6174             "stat
-00035e50: 7573 223a 2022 4e45 5722 2c0a 2020 2020  us": "NEW",.    
-00035e60: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00035e70: 2020 2261 6363 6f75 6e74 4964 223a 2022    "accountId": "
-00035e80: 3133 3338 3034 3334 222c 0a20 2020 2020  13380434",.     
-00035e90: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00035ea0: 2022 6372 6561 7465 5469 6d65 223a 2022   "createTime": "
-00035eb0: 3136 3636 3733 3333 3537 3433 3822 2c0a  1666733357438",.
-00035ec0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00035ed0: 2020 2020 2020 226f 7264 6572 5072 6963        "orderPric
-00035ee0: 6522 3a20 2238 3022 2c0a 2020 2020 2020  e": "80",.      
-00035ef0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00035f00: 226f 7264 6572 5174 7922 3a20 2230 2e31  "orderQty": "0.1
-00035f10: 3122 2c0a 2020 2020 2020 2020 2320 2020  1",.        #   
-00035f20: 2020 2020 2020 2020 2020 2265 7865 6351            "execQ
-00035f30: 7479 223a 2022 3022 2c0a 2020 2020 2020  ty": "0",.      
-00035f40: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00035f50: 2274 696d 6549 6e46 6f72 6365 223a 2022  "timeInForce": "
-00035f60: 4754 4322 2c0a 2020 2020 2020 2020 2320  GTC",.        # 
-00035f70: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
-00035f80: 6572 5479 7065 223a 2022 4c49 4d49 5422  erType": "LIMIT"
-00035f90: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00035fa0: 2020 2020 2020 2020 2273 6964 6522 3a20          "side": 
-00035fb0: 2242 5559 222c 0a20 2020 2020 2020 2023  "BUY",.        #
-00035fc0: 2020 2020 2020 2020 2020 2020 2022 6f72               "or
-00035fd0: 6465 7243 6174 6567 6f72 7922 3a20 2230  derCategory": "0
-00035fe0: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
-00035ff0: 2020 2020 7d2c 0a20 2020 2020 2020 2023      },.        #
-00036000: 2020 2020 2020 2020 2022 7265 7445 7874           "retExt
-00036010: 4d61 7022 3a20 7b7d 2c0a 2020 2020 2020  Map": {},.      
-00036020: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
-00036030: 4578 7449 6e66 6f22 3a20 6e75 6c6c 2c0a  ExtInfo": null,.
-00036040: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00036050: 2020 2274 696d 6522 3a20 2231 3636 3637    "time": "16667
-00036060: 3333 3833 3934 3933 220a 2020 2020 2020  33839493".      
-00036070: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
-00036080: 2020 230a 2020 2020 2020 2020 7265 7375    #.        resu
-00036090: 6c74 203d 2073 656c 662e 7361 6665 5f76  lt = self.safe_v
-000360a0: 616c 7565 2872 6573 706f 6e73 652c 2027  alue(response, '
-000360b0: 7265 7375 6c74 272c 207b 7d29 0a20 2020  result', {}).   
-000360c0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-000360d0: 2e70 6172 7365 5f6f 7264 6572 2872 6573  .parse_order(res
-000360e0: 756c 742c 206d 6172 6b65 7429 0a0a 2020  ult, market)..  
-000360f0: 2020 6173 796e 6320 6465 6620 6361 6e63    async def canc
-00036100: 656c 5f75 6e69 6669 6564 5f6d 6172 6769  el_unified_margi
-00036110: 6e5f 6f72 6465 7228 7365 6c66 2c20 6964  n_order(self, id
-00036120: 3a20 7374 722c 2073 796d 626f 6c3a 204f  : str, symbol: O
-00036130: 7074 696f 6e61 6c5b 7374 725d 203d 204e  ptional[str] = N
-00036140: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
-00036150: 0a20 2020 2020 2020 2069 6620 7379 6d62  .        if symb
-00036160: 6f6c 2069 7320 4e6f 6e65 3a0a 2020 2020  ol is None:.    
-00036170: 2020 2020 2020 2020 7261 6973 6520 4172          raise Ar
-00036180: 6775 6d65 6e74 7352 6571 7569 7265 6428  gumentsRequired(
-00036190: 7365 6c66 2e69 6420 2b20 2720 6361 6e63  self.id + ' canc
-000361a0: 656c 556e 6966 6965 644d 6172 6769 6e4f  elUnifiedMarginO
-000361b0: 7264 6572 2829 2072 6571 7569 7265 7320  rder() requires 
-000361c0: 6120 7379 6d62 6f6c 2061 7267 756d 656e  a symbol argumen
-000361d0: 7427 290a 2020 2020 2020 2020 6177 6169  t').        awai
-000361e0: 7420 7365 6c66 2e6c 6f61 645f 6d61 726b  t self.load_mark
-000361f0: 6574 7328 290a 2020 2020 2020 2020 6d61  ets().        ma
-00036200: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
-00036210: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
-00036220: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
-00036230: 2020 2020 2020 2020 2020 2027 7379 6d62             'symb
-00036240: 6f6c 273a 206d 6172 6b65 745b 2769 6427  ol': market['id'
-00036250: 5d2c 0a20 2020 2020 2020 2020 2020 2023  ],.            #
-00036260: 2027 6f72 6465 724c 696e 6b49 6427 3a20   'orderLinkId': 
-00036270: 2773 7472 696e 6727 2c0a 2020 2020 2020  'string',.      
-00036280: 2020 2020 2020 2320 276f 7264 6572 4964        # 'orderId
-00036290: 273a 2069 642c 0a20 2020 2020 2020 2020  ': id,.         
-000362a0: 2020 2023 2063 6f6e 6469 7469 6f6e 616c     # conditional
-000362b0: 206f 7264 6572 730a 2020 2020 2020 2020   orders.        
-000362c0: 2020 2020 2320 276f 7264 6572 4669 6c74      # 'orderFilt
-000362d0: 6572 273a 2027 272c 0a20 2020 2020 2020  er': '',.       
-000362e0: 2020 2020 2023 2027 6361 7465 676f 7279       # 'category
-000362f0: 273a 2027 272c 0a20 2020 2020 2020 207d  ': '',.        }
-00036300: 0a20 2020 2020 2020 2069 7353 746f 7020  .        isStop 
-00036310: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-00036320: 6528 7061 7261 6d73 2c20 2773 746f 7027  e(params, 'stop'
-00036330: 2c20 4661 6c73 6529 0a20 2020 2020 2020  , False).       
-00036340: 2070 6172 616d 7320 3d20 7365 6c66 2e6f   params = self.o
-00036350: 6d69 7428 7061 7261 6d73 2c20 5b27 7374  mit(params, ['st
-00036360: 6f70 275d 290a 2020 2020 2020 2020 7265  op']).        re
-00036370: 7175 6573 745b 276f 7264 6572 4669 6c74  quest['orderFilt
-00036380: 6572 275d 203d 2027 5374 6f70 4f72 6465  er'] = 'StopOrde
-00036390: 7227 2069 6620 6973 5374 6f70 2065 6c73  r' if isStop els
-000363a0: 6520 274f 7264 6572 270a 2020 2020 2020  e 'Order'.      
-000363b0: 2020 6966 2069 6420 6973 206e 6f74 204e    if id is not N
-000363c0: 6f6e 653a 2020 2320 5468 6520 7573 6572  one:  # The user
-000363d0: 2063 616e 2061 6c73 6f20 7573 6520 6172   can also use ar
-000363e0: 6775 6d65 6e74 2070 6172 616d 735b 226f  gument params["o
-000363f0: 7264 6572 4c69 6e6b 4964 225d 0a20 2020  rderLinkId"].   
-00036400: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00036410: 5b27 6f72 6465 7249 6427 5d20 3d20 6964  ['orderId'] = id
-00036420: 0a20 2020 2020 2020 2069 6620 6d61 726b  .        if mark
-00036430: 6574 5b27 6f70 7469 6f6e 275d 3a0a 2020  et['option']:.  
-00036440: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-00036450: 745b 2763 6174 6567 6f72 7927 5d20 3d20  t['category'] = 
-00036460: 276f 7074 696f 6e27 0a20 2020 2020 2020  'option'.       
-00036470: 2065 6c69 6620 6d61 726b 6574 5b27 6c69   elif market['li
-00036480: 6e65 6172 275d 3a0a 2020 2020 2020 2020  near']:.        
-00036490: 2020 2020 7265 7175 6573 745b 2763 6174      request['cat
-000364a0: 6567 6f72 7927 5d20 3d20 276c 696e 6561  egory'] = 'linea
-000364b0: 7227 0a20 2020 2020 2020 2065 6c73 653a  r'.        else:
-000364c0: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-000364d0: 7365 204e 6f74 5375 7070 6f72 7465 6428  se NotSupported(
-000364e0: 7365 6c66 2e69 6420 2b20 2720 6361 6e63  self.id + ' canc
-000364f0: 656c 556e 6966 6965 644d 6172 6769 6e4f  elUnifiedMarginO
-00036500: 7264 6572 2829 2064 6f65 7320 6e6f 7420  rder() does not 
-00036510: 616c 6c6f 7720 696e 7665 7273 6520 6d61  allow inverse ma
-00036520: 726b 6574 206f 7264 6572 7320 666f 7220  rket orders for 
-00036530: 2720 2b20 7379 6d62 6f6c 202b 2027 206d  ' + symbol + ' m
-00036540: 6172 6b65 7473 2729 0a20 2020 2020 2020  arkets').       
-00036550: 2072 6573 706f 6e73 6520 3d20 6177 6169   response = awai
-00036560: 7420 7365 6c66 2e70 7269 7661 7465 506f  t self.privatePo
-00036570: 7374 556e 6966 6965 6456 3350 7269 7661  stUnifiedV3Priva
-00036580: 7465 4f72 6465 7243 616e 6365 6c28 7365  teOrderCancel(se
-00036590: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
-000365a0: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
-000365b0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-000365c0: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-000365d0: 2020 2020 2020 2020 2272 6574 436f 6465          "retCode
-000365e0: 223a 2030 2c0a 2020 2020 2020 2020 2320  ": 0,.        # 
-000365f0: 2020 2020 2020 2020 2272 6574 4d73 6722          "retMsg"
-00036600: 3a20 224f 4b22 2c0a 2020 2020 2020 2020  : "OK",.        
-00036610: 2320 2020 2020 2020 2020 2272 6573 756c  #         "resul
-00036620: 7422 3a20 7b0a 2020 2020 2020 2020 2320  t": {.        # 
-00036630: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
-00036640: 6572 4964 223a 2022 3432 6338 3664 3636  erId": "42c86d66
-00036650: 3333 3165 3431 3939 3864 3132 6332 3434  331e41998d12c244
-00036660: 3063 6539 3063 3161 222c 0a20 2020 2020  0ce90c1a",.     
-00036670: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00036680: 2022 6f72 6465 724c 696e 6b49 6422 3a20   "orderLinkId": 
-00036690: 2265 3830 6435 3538 652d 6564 220a 2020  "e80d558e-ed".  
-000366a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000366b0: 7d0a 2020 2020 2020 2020 2320 2020 2020  }.        #     
-000366c0: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
-000366d0: 2020 2020 7265 7375 6c74 203d 2073 656c      result = sel
-000366e0: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
-000366f0: 706f 6e73 652c 2027 7265 7375 6c74 272c  ponse, 'result',
-00036700: 207b 7d29 0a20 2020 2020 2020 2072 6574   {}).        ret
-00036710: 7572 6e20 7365 6c66 2e70 6172 7365 5f6f  urn self.parse_o
-00036720: 7264 6572 2872 6573 756c 742c 206d 6172  rder(result, mar
-00036730: 6b65 7429 0a0a 2020 2020 6173 796e 6320  ket)..    async 
-00036740: 6465 6620 6361 6e63 656c 5f75 7364 635f  def cancel_usdc_
-00036750: 6f72 6465 7228 7365 6c66 2c20 6964 3a20  order(self, id: 
-00036760: 7374 722c 2073 796d 626f 6c3a 204f 7074  str, symbol: Opt
-00036770: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
-00036780: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
-00036790: 2020 2020 2020 2069 6620 7379 6d62 6f6c         if symbol
-000367a0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-000367b0: 2020 2020 2020 7261 6973 6520 4172 6775        raise Argu
-000367c0: 6d65 6e74 7352 6571 7569 7265 6428 7365  mentsRequired(se
-000367d0: 6c66 2e69 6420 2b20 2720 6361 6e63 656c  lf.id + ' cancel
-000367e0: 5553 4443 4f72 6465 7228 2920 7265 7175  USDCOrder() requ
-000367f0: 6972 6573 2061 2073 796d 626f 6c20 6172  ires a symbol ar
-00036800: 6775 6d65 6e74 2729 0a20 2020 2020 2020  gument').       
-00036810: 2061 7761 6974 2073 656c 662e 6c6f 6164   await self.load
-00036820: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
-00036830: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
-00036840: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
-00036850: 2020 2020 2020 2020 7265 7175 6573 7420          request 
-00036860: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-00036870: 2773 796d 626f 6c27 3a20 6d61 726b 6574  'symbol': market
-00036880: 5b27 6964 275d 2c0a 2020 2020 2020 2020  ['id'],.        
-00036890: 2020 2020 2320 276f 7264 6572 4c69 6e6b      # 'orderLink
-000368a0: 4964 273a 2027 7374 7269 6e67 272c 2020  Id': 'string',  
-000368b0: 2320 6f6e 6520 6f66 206f 7264 6572 5f69  # one of order_i
-000368c0: 642c 2073 746f 705f 6f72 6465 725f 6964  d, stop_order_id
-000368d0: 206f 7220 6f72 6465 725f 6c69 6e6b 5f69   or order_link_i
-000368e0: 6420 6973 2072 6571 7569 7265 640a 2020  d is required.  
-000368f0: 2020 2020 2020 2020 2020 2320 276f 7264            # 'ord
-00036900: 6572 4964 273a 2069 642c 0a20 2020 2020  erId': id,.     
-00036910: 2020 207d 0a20 2020 2020 2020 2069 7353     }.        isS
-00036920: 746f 7020 3d20 7365 6c66 2e73 6166 655f  top = self.safe_
-00036930: 7661 6c75 6528 7061 7261 6d73 2c20 2773  value(params, 's
-00036940: 746f 7027 2c20 4661 6c73 6529 0a20 2020  top', False).   
-00036950: 2020 2020 2070 6172 616d 7320 3d20 7365       params = se
-00036960: 6c66 2e6f 6d69 7428 7061 7261 6d73 2c20  lf.omit(params, 
-00036970: 5b27 7374 6f70 275d 290a 2020 2020 2020  ['stop']).      
-00036980: 2020 6d65 7468 6f64 203d 204e 6f6e 650a    method = None.
-00036990: 2020 2020 2020 2020 6966 2069 6420 6973          if id is
-000369a0: 206e 6f74 204e 6f6e 653a 2020 2320 5468   not None:  # Th
-000369b0: 6520 7573 6572 2063 616e 2061 6c73 6f20  e user can also 
-000369c0: 7573 6520 6172 6775 6d65 6e74 2070 6172  use argument par
-000369d0: 616d 735b 226f 7264 6572 5f6c 696e 6b5f  ams["order_link_
-000369e0: 6964 225d 0a20 2020 2020 2020 2020 2020  id"].           
-000369f0: 2072 6571 7565 7374 5b27 6f72 6465 7249   request['orderI
-00036a00: 6427 5d20 3d20 6964 0a20 2020 2020 2020  d'] = id.       
-00036a10: 2069 6620 6d61 726b 6574 5b27 6f70 7469   if market['opti
-00036a20: 6f6e 275d 3a0a 2020 2020 2020 2020 2020  on']:.          
-00036a30: 2020 6d65 7468 6f64 203d 2027 7072 6976    method = 'priv
-00036a40: 6174 6550 6f73 744f 7074 696f 6e55 7364  atePostOptionUsd
-00036a50: 634f 7065 6e61 7069 5072 6976 6174 6556  cOpenapiPrivateV
-00036a60: 3143 616e 6365 6c4f 7264 6572 270a 2020  1CancelOrder'.  
-00036a70: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00036a80: 2020 2020 2020 2020 6d65 7468 6f64 203d          method =
-00036a90: 2027 7072 6976 6174 6550 6f73 7450 6572   'privatePostPer
-00036aa0: 7065 7475 616c 5573 6463 4f70 656e 6170  petualUsdcOpenap
-00036ab0: 6950 7269 7661 7465 5631 4361 6e63 656c  iPrivateV1Cancel
-00036ac0: 4f72 6465 7227 0a20 2020 2020 2020 2020  Order'.         
-00036ad0: 2020 2072 6571 7565 7374 5b27 6f72 6465     request['orde
-00036ae0: 7246 696c 7465 7227 5d20 3d20 2753 746f  rFilter'] = 'Sto
-00036af0: 704f 7264 6572 2720 6966 2069 7353 746f  pOrder' if isSto
-00036b00: 7020 656c 7365 2027 4f72 6465 7227 0a20  p else 'Order'. 
-00036b10: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
-00036b20: 3d20 6177 6169 7420 6765 7461 7474 7228  = await getattr(
-00036b30: 7365 6c66 2c20 6d65 7468 6f64 2928 7365  self, method)(se
-00036b40: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
-00036b50: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
-00036b60: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-00036b70: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-00036b80: 2020 2020 2020 2020 2272 6574 436f 6465          "retCode
-00036b90: 223a 2030 2c0a 2020 2020 2020 2020 2320  ": 0,.        # 
-00036ba0: 2020 2020 2020 2020 2272 6574 4d73 6722          "retMsg"
-00036bb0: 3a20 224f 4b22 2c0a 2020 2020 2020 2020  : "OK",.        
-00036bc0: 2320 2020 2020 2020 2020 2272 6573 756c  #         "resul
-00036bd0: 7422 3a20 7b0a 2020 2020 2020 2020 2320  t": {.        # 
-00036be0: 2020 2020 2020 2020 2020 2020 226f 7574              "out
-00036bf0: 5265 7175 6573 7449 6422 3a20 2222 2c0a  RequestId": "",.
-00036c00: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00036c10: 2020 2020 2020 2273 796d 626f 6c22 3a20        "symbol": 
-00036c20: 2242 5443 2d31 334d 4159 3232 2d34 3030  "BTC-13MAY22-400
-00036c30: 3030 2d43 222c 0a20 2020 2020 2020 2023  00-C",.        #
-00036c40: 2020 2020 2020 2020 2020 2020 2022 6f72               "or
-00036c50: 6465 7249 6422 3a20 2238 6336 3564 6639  derId": "8c65df9
-00036c60: 312d 3931 6663 2d34 3631 642d 3962 3134  1-91fc-461d-9b14
-00036c70: 2d37 3836 3337 3965 6631 3338 6322 2c0a  -786379ef138c",.
-00036c80: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00036c90: 2020 2020 2020 226f 7264 6572 4c69 6e6b        "orderLink
-00036ca0: 4964 223a 2022 220a 2020 2020 2020 2020  Id": "".        
-00036cb0: 2320 2020 2020 2020 2020 7d2c 0a20 2020  #         },.   
-00036cc0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00036cd0: 7265 7445 7874 4d61 7022 3a20 7b7d 0a20  retExtMap": {}. 
-00036ce0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
-00036cf0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-00036d00: 2072 6573 756c 7420 3d20 7365 6c66 2e73   result = self.s
-00036d10: 6166 655f 7661 6c75 6528 7265 7370 6f6e  afe_value(respon
-00036d20: 7365 2c20 2772 6573 756c 7427 2c20 7b7d  se, 'result', {}
-00036d30: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00036d40: 2073 656c 662e 7061 7273 655f 6f72 6465   self.parse_orde
-00036d50: 7228 7265 7375 6c74 2c20 6d61 726b 6574  r(result, market
-00036d60: 290a 0a20 2020 2061 7379 6e63 2064 6566  )..    async def
-00036d70: 2063 616e 6365 6c5f 6465 7269 7661 7469   cancel_derivati
-00036d80: 7665 735f 6f72 6465 7228 7365 6c66 2c20  ves_order(self, 
-00036d90: 6964 3a20 7374 722c 2073 796d 626f 6c3a  id: str, symbol:
-00036da0: 204f 7074 696f 6e61 6c5b 7374 725d 203d   Optional[str] =
-00036db0: 204e 6f6e 652c 2070 6172 616d 733d 7b7d   None, params={}
-00036dc0: 293a 0a20 2020 2020 2020 2069 6620 7379  ):.        if sy
-00036dd0: 6d62 6f6c 2069 7320 4e6f 6e65 3a0a 2020  mbol is None:.  
-00036de0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00036df0: 4172 6775 6d65 6e74 7352 6571 7569 7265  ArgumentsRequire
-00036e00: 6428 7365 6c66 2e69 6420 2b20 2720 6361  d(self.id + ' ca
-00036e10: 6e63 656c 4465 7269 7661 7469 7665 734f  ncelDerivativesO
-00036e20: 7264 6572 2829 2072 6571 7569 7265 7320  rder() requires 
-00036e30: 6120 7379 6d62 6f6c 2061 7267 756d 656e  a symbol argumen
-00036e40: 7427 290a 2020 2020 2020 2020 6177 6169  t').        awai
-00036e50: 7420 7365 6c66 2e6c 6f61 645f 6d61 726b  t self.load_mark
-00036e60: 6574 7328 290a 2020 2020 2020 2020 6d61  ets().        ma
-00036e70: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
-00036e80: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
-00036e90: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
-00036ea0: 2020 2020 2020 2020 2020 2027 7379 6d62             'symb
-00036eb0: 6f6c 273a 206d 6172 6b65 745b 2769 6427  ol': market['id'
-00036ec0: 5d2c 0a20 2020 2020 2020 2020 2020 2027  ],.            '
-00036ed0: 6f72 6465 7249 6427 3a20 6964 2c0a 2020  orderId': id,.  
-00036ee0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-00036ef0: 7265 7370 6f6e 7365 203d 2061 7761 6974  response = await
-00036f00: 2073 656c 662e 7072 6976 6174 6550 6f73   self.privatePos
-00036f10: 7443 6f6e 7472 6163 7456 3350 7269 7661  tContractV3Priva
-00036f20: 7465 4f72 6465 7243 616e 6365 6c28 7365  teOrderCancel(se
-00036f30: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
-00036f40: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
-00036f50: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-00036f60: 636f 6e74 7261 6374 2076 330a 2020 2020  contract v3.    
-00036f70: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-00036f80: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-00036f90: 2020 2020 2020 2020 2272 6574 436f 6465          "retCode
-00036fa0: 223a 302c 0a20 2020 2020 2020 2023 2020  ":0,.        #  
-00036fb0: 2020 2020 2020 2022 7265 744d 7367 223a         "retMsg":
-00036fc0: 224f 4b22 2c0a 2020 2020 2020 2020 2320  "OK",.        # 
-00036fd0: 2020 2020 2020 2020 2272 6573 756c 7422          "result"
-00036fe0: 3a7b 0a20 2020 2020 2020 2023 2020 2020  :{.        #    
-00036ff0: 2020 2020 2020 2020 2022 6f72 6465 7249           "orderI
-00037000: 6422 3a20 2234 3033 3034 3330 642d 3164  d": "4030430d-1d
-00037010: 6261 2d34 3133 342d 6163 3737 2d33 6438  ba-4134-ac77-3d8
-00037020: 3163 3134 6161 6130 3022 2c0a 2020 2020  1c14aaa00",.    
-00037030: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00037040: 2020 226f 7264 6572 4c69 6e6b 4964 223a    "orderLinkId":
-00037050: 2022 220a 2020 2020 2020 2020 2320 2020   "".        #   
-00037060: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
-00037070: 2023 2020 2020 2020 2020 2022 7265 7445   #         "retE
-00037080: 7874 496e 666f 223a 6e75 6c6c 2c0a 2020  xtInfo":null,.  
-00037090: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000370a0: 2274 696d 6522 3a31 3635 3838 3530 3332  "time":165885032
-000370b0: 3138 3631 0a20 2020 2020 2020 2023 2020  1861.        #  
-000370c0: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
-000370d0: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
-000370e0: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
-000370f0: 7265 7370 6f6e 7365 2c20 2772 6573 756c  response, 'resul
-00037100: 7427 2c20 7b7d 290a 2020 2020 2020 2020  t', {}).        
-00037110: 7265 7475 726e 2073 656c 662e 7061 7273  return self.pars
-00037120: 655f 6f72 6465 7228 7265 7375 6c74 2c20  e_order(result, 
-00037130: 6d61 726b 6574 290a 0a20 2020 2061 7379  market)..    asy
-00037140: 6e63 2064 6566 2063 616e 6365 6c5f 6f72  nc def cancel_or
-00037150: 6465 7228 7365 6c66 2c20 6964 3a20 7374  der(self, id: st
-00037160: 722c 2073 796d 626f 6c3a 204f 7074 696f  r, symbol: Optio
-00037170: 6e61 6c5b 7374 725d 203d 204e 6f6e 652c  nal[str] = None,
-00037180: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
-00037190: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-000371a0: 2063 616e 6365 6c73 2061 6e20 6f70 656e   cancels an open
-000371b0: 206f 7264 6572 0a20 2020 2020 2020 203a   order.        :
-000371c0: 7061 7261 6d20 7374 7220 6964 3a20 6f72  param str id: or
-000371d0: 6465 7220 6964 0a20 2020 2020 2020 203a  der id.        :
-000371e0: 7061 7261 6d20 7374 7220 7379 6d62 6f6c  param str symbol
-000371f0: 3a20 756e 6966 6965 6420 7379 6d62 6f6c  : unified symbol
-00037200: 206f 6620 7468 6520 6d61 726b 6574 2074   of the market t
-00037210: 6865 206f 7264 6572 2077 6173 206d 6164  he order was mad
-00037220: 6520 696e 0a20 2020 2020 2020 203a 7061  e in.        :pa
-00037230: 7261 6d20 6469 6374 2070 6172 616d 733a  ram dict params:
-00037240: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
-00037250: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
-00037260: 6520 6279 6269 7420 6170 6920 656e 6470  e bybit api endp
-00037270: 6f69 6e74 0a20 2020 2020 2020 203a 7265  oint.        :re
-00037280: 7475 726e 7320 6469 6374 3a20 416e 2060  turns dict: An `
-00037290: 6f72 6465 7220 7374 7275 6374 7572 6520  order structure 
-000372a0: 3c68 7474 7073 3a2f 2f64 6f63 732e 6363  <https://docs.cc
-000372b0: 7874 2e63 6f6d 2f23 2f3f 6964 3d6f 7264  xt.com/#/?id=ord
-000372c0: 6572 2d73 7472 7563 7475 7265 3e60 0a20  er-structure>`. 
-000372d0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-000372e0: 2020 2069 6620 7379 6d62 6f6c 2069 7320     if symbol is 
-000372f0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-00037300: 2020 7261 6973 6520 4172 6775 6d65 6e74    raise Argument
-00037310: 7352 6571 7569 7265 6428 7365 6c66 2e69  sRequired(self.i
-00037320: 6420 2b20 2720 6361 6e63 656c 4f72 6465  d + ' cancelOrde
-00037330: 7228 2920 7265 7175 6972 6573 2061 2073  r() requires a s
-00037340: 796d 626f 6c20 6172 6775 6d65 6e74 2729  ymbol argument')
-00037350: 0a20 2020 2020 2020 2061 7761 6974 2073  .        await s
-00037360: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
-00037370: 2829 0a20 2020 2020 2020 206d 6172 6b65  ().        marke
-00037380: 7420 3d20 7365 6c66 2e6d 6172 6b65 7428  t = self.market(
-00037390: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
-000373a0: 656e 6162 6c65 556e 6966 6965 644d 6172  enableUnifiedMar
-000373b0: 6769 6e2c 2065 6e61 626c 6555 6e69 6669  gin, enableUnifi
-000373c0: 6564 4163 636f 756e 7420 3d20 6177 6169  edAccount = awai
-000373d0: 7420 7365 6c66 2e69 735f 756e 6966 6965  t self.is_unifie
-000373e0: 645f 656e 6162 6c65 6428 290a 2020 2020  d_enabled().    
-000373f0: 2020 2020 6973 5573 6463 5365 7474 6c65      isUsdcSettle
-00037400: 6420 3d20 6d61 726b 6574 5b27 7365 7474  d = market['sett
-00037410: 6c65 275d 203d 3d20 2755 5344 4327 0a20  le'] == 'USDC'. 
-00037420: 2020 2020 2020 2069 6620 656e 6162 6c65         if enable
-00037430: 556e 6966 6965 6441 6363 6f75 6e74 3a0a  UnifiedAccount:.
-00037440: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00037450: 726e 2061 7761 6974 2073 656c 662e 6361  rn await self.ca
-00037460: 6e63 656c 5f75 6e69 6669 6564 5f61 6363  ncel_unified_acc
-00037470: 6f75 6e74 5f6f 7264 6572 2869 642c 2073  ount_order(id, s
-00037480: 796d 626f 6c2c 2070 6172 616d 7329 0a20  ymbol, params). 
-00037490: 2020 2020 2020 2065 6c69 6620 6d61 726b         elif mark
-000374a0: 6574 5b27 7370 6f74 275d 3a0a 2020 2020  et['spot']:.    
-000374b0: 2020 2020 2020 2020 7265 7475 726e 2061          return a
-000374c0: 7761 6974 2073 656c 662e 6361 6e63 656c  wait self.cancel
-000374d0: 5f73 706f 745f 6f72 6465 7228 6964 2c20  _spot_order(id, 
-000374e0: 7379 6d62 6f6c 2c20 7061 7261 6d73 290a  symbol, params).
-000374f0: 2020 2020 2020 2020 656c 6966 2065 6e61          elif ena
-00037500: 626c 6555 6e69 6669 6564 4d61 7267 696e  bleUnifiedMargin
-00037510: 2061 6e64 206e 6f74 206d 6172 6b65 745b   and not market[
-00037520: 2769 6e76 6572 7365 275d 3a0a 2020 2020  'inverse']:.    
-00037530: 2020 2020 2020 2020 7265 7475 726e 2061          return a
-00037540: 7761 6974 2073 656c 662e 6361 6e63 656c  wait self.cancel
-00037550: 5f75 6e69 6669 6564 5f6d 6172 6769 6e5f  _unified_margin_
-00037560: 6f72 6465 7228 6964 2c20 7379 6d62 6f6c  order(id, symbol
-00037570: 2c20 7061 7261 6d73 290a 2020 2020 2020  , params).      
-00037580: 2020 656c 6966 2069 7355 7364 6353 6574    elif isUsdcSet
-00037590: 746c 6564 3a0a 2020 2020 2020 2020 2020  tled:.          
-000375a0: 2020 7265 7475 726e 2061 7761 6974 2073    return await s
-000375b0: 656c 662e 6361 6e63 656c 5f75 7364 635f  elf.cancel_usdc_
-000375c0: 6f72 6465 7228 6964 2c20 7379 6d62 6f6c  order(id, symbol
-000375d0: 2c20 7061 7261 6d73 290a 2020 2020 2020  , params).      
-000375e0: 2020 7265 7475 726e 2061 7761 6974 2073    return await s
-000375f0: 656c 662e 6361 6e63 656c 5f64 6572 6976  elf.cancel_deriv
-00037600: 6174 6976 6573 5f6f 7264 6572 2869 642c  atives_order(id,
-00037610: 2073 796d 626f 6c2c 2070 6172 616d 7329   symbol, params)
-00037620: 0a0a 2020 2020 6173 796e 6320 6465 6620  ..    async def 
-00037630: 6361 6e63 656c 5f61 6c6c 5f75 6e69 6669  cancel_all_unifi
-00037640: 6564 5f61 6363 6f75 6e74 5f6f 7264 6572  ed_account_order
-00037650: 7328 7365 6c66 2c20 7379 6d62 6f6c 3a20  s(self, symbol: 
-00037660: 4f70 7469 6f6e 616c 5b73 7472 5d20 3d20  Optional[str] = 
-00037670: 4e6f 6e65 2c20 7061 7261 6d73 3d7b 7d29  None, params={})
-00037680: 3a0a 2020 2020 2020 2020 6177 6169 7420  :.        await 
-00037690: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
-000376a0: 7328 290a 2020 2020 2020 2020 6d61 726b  s().        mark
-000376b0: 6574 203d 204e 6f6e 650a 2020 2020 2020  et = None.      
-000376c0: 2020 7365 7474 6c65 203d 204e 6f6e 650a    settle = None.
-000376d0: 2020 2020 2020 2020 7479 7065 203d 204e          type = N
-000376e0: 6f6e 650a 2020 2020 2020 2020 7375 6254  one.        subT
-000376f0: 7970 6520 3d20 4e6f 6e65 0a20 2020 2020  ype = None.     
-00037700: 2020 2072 6571 7565 7374 203d 207b 7d0a     request = {}.
-00037710: 2020 2020 2020 2020 6966 2073 796d 626f          if symbo
-00037720: 6c20 6973 206e 6f74 204e 6f6e 653a 0a20  l is not None:. 
-00037730: 2020 2020 2020 2020 2020 206d 6172 6b65             marke
-00037740: 7420 3d20 7365 6c66 2e6d 6172 6b65 7428  t = self.market(
-00037750: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
-00037760: 2020 2020 7365 7474 6c65 203d 206d 6172      settle = mar
-00037770: 6b65 745b 2773 6574 746c 6527 5d0a 2020  ket['settle'].  
-00037780: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-00037790: 745b 2773 796d 626f 6c27 5d20 3d20 6d61  t['symbol'] = ma
-000377a0: 726b 6574 5b27 6964 275d 0a20 2020 2020  rket['id'].     
-000377b0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000377c0: 2020 2020 2073 6574 746c 652c 2070 6172       settle, par
-000377d0: 616d 7320 3d20 7365 6c66 2e68 616e 646c  ams = self.handl
-000377e0: 655f 6f70 7469 6f6e 5f61 6e64 5f70 6172  e_option_and_par
-000377f0: 616d 7328 7061 7261 6d73 2c20 2763 616e  ams(params, 'can
-00037800: 6365 6c41 6c6c 4f72 6465 7273 272c 2027  celAllOrders', '
-00037810: 7365 7474 6c65 272c 2027 5553 4454 2729  settle', 'USDT')
-00037820: 0a20 2020 2020 2020 2074 7970 652c 2070  .        type, p
-00037830: 6172 616d 7320 3d20 7365 6c66 2e68 616e  arams = self.han
-00037840: 646c 655f 6d61 726b 6574 5f74 7970 655f  dle_market_type_
-00037850: 616e 645f 7061 7261 6d73 2827 6361 6e63  and_params('canc
-00037860: 656c 416c 6c4f 7264 6572 7327 2c20 6d61  elAllOrders', ma
-00037870: 726b 6574 2c20 7061 7261 6d73 290a 2020  rket, params).  
-00037880: 2020 2020 2020 7375 6254 7970 652c 2070        subType, p
-00037890: 6172 616d 7320 3d20 7365 6c66 2e68 616e  arams = self.han
-000378a0: 646c 655f 7375 625f 7479 7065 5f61 6e64  dle_sub_type_and
-000378b0: 5f70 6172 616d 7328 2763 616e 6365 6c41  _params('cancelA
-000378c0: 6c6c 4f72 6465 7273 272c 206d 6172 6b65  llOrders', marke
-000378d0: 742c 2070 6172 616d 732c 2027 6c69 6e65  t, params, 'line
-000378e0: 6172 2729 0a20 2020 2020 2020 2069 6620  ar').        if 
-000378f0: 7479 7065 203d 3d20 2773 706f 7427 3a0a  type == 'spot':.
-00037900: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00037910: 6573 745b 2763 6174 6567 6f72 7927 5d20  est['category'] 
-00037920: 3d20 2773 706f 7427 0a20 2020 2020 2020  = 'spot'.       
-00037930: 2065 6c69 6620 7479 7065 203d 3d20 276f   elif type == 'o
-00037940: 7074 696f 6e27 3a0a 2020 2020 2020 2020  ption':.        
-00037950: 2020 2020 7265 7175 6573 745b 2763 6174      request['cat
-00037960: 6567 6f72 7927 5d20 3d20 276f 7074 696f  egory'] = 'optio
-00037970: 6e27 0a20 2020 2020 2020 2065 6c69 6620  n'.        elif 
-00037980: 7375 6254 7970 6520 3d3d 2027 6c69 6e65  subType == 'line
-00037990: 6172 273a 0a20 2020 2020 2020 2020 2020  ar':.           
-000379a0: 2072 6571 7565 7374 5b27 6361 7465 676f   request['catego
-000379b0: 7279 275d 203d 2027 6c69 6e65 6172 270a  ry'] = 'linear'.
-000379c0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-000379d0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-000379e0: 4e6f 7453 7570 706f 7274 6564 2873 656c  NotSupported(sel
-000379f0: 662e 6964 202b 2027 2063 616e 6365 6c41  f.id + ' cancelA
-00037a00: 6c6c 4f72 6465 7273 2829 2064 6f65 7320  llOrders() does 
-00037a10: 6e6f 7420 616c 6c6f 7720 696e 7665 7273  not allow invers
-00037a20: 6520 6d61 726b 6574 206f 7264 6572 7320  e market orders 
-00037a30: 666f 7220 2720 2b20 7479 7065 202b 2027  for ' + type + '
-00037a40: 206d 6172 6b65 7473 2729 0a20 2020 2020   markets').     
-00037a50: 2020 2072 6571 7565 7374 5b27 7365 7474     request['sett
-00037a60: 6c65 436f 696e 275d 203d 2073 6574 746c  leCoin'] = settl
-00037a70: 650a 2020 2020 2020 2020 6973 5374 6f70  e.        isStop
-00037a80: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
-00037a90: 7565 2870 6172 616d 732c 2027 7374 6f70  ue(params, 'stop
-00037aa0: 272c 2046 616c 7365 290a 2020 2020 2020  ', False).      
-00037ab0: 2020 7061 7261 6d73 203d 2073 656c 662e    params = self.
-00037ac0: 6f6d 6974 2870 6172 616d 732c 205b 2773  omit(params, ['s
-00037ad0: 746f 7027 5d29 0a20 2020 2020 2020 2069  top']).        i
-00037ae0: 6620 6973 5374 6f70 3a0a 2020 2020 2020  f isStop:.      
-00037af0: 2020 2020 2020 7265 7175 6573 745b 276f        request['o
-00037b00: 7264 6572 4669 6c74 6572 275d 203d 2027  rderFilter'] = '
-00037b10: 7470 736c 4f72 6465 7227 0a20 2020 2020  tpslOrder'.     
-00037b20: 2020 2072 6573 706f 6e73 6520 3d20 6177     response = aw
-00037b30: 6169 7420 7365 6c66 2e70 7269 7661 7465  ait self.private
-00037b40: 506f 7374 5635 4f72 6465 7243 616e 6365  PostV5OrderCance
-00037b50: 6c41 6c6c 2873 656c 662e 6578 7465 6e64  lAll(self.extend
-00037b60: 2872 6571 7565 7374 2c20 7061 7261 6d73  (request, params
-00037b70: 2929 0a20 2020 2020 2020 2023 0a20 2020  )).        #.   
-00037b80: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
-00037b90: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00037ba0: 7265 7443 6f64 6522 3a20 302c 0a20 2020  retCode": 0,.   
-00037bb0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00037bc0: 7265 744d 7367 223a 2022 4f4b 222c 0a20  retMsg": "OK",. 
-00037bd0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00037be0: 2022 7265 7375 6c74 223a 207b 0a20 2020   "result": {.   
-00037bf0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00037c00: 2020 2022 6c69 7374 223a 205b 0a20 2020     "list": [.   
-00037c10: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00037c20: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
-00037c30: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00037c40: 2020 2020 2020 2022 6f72 6465 7249 6422         "orderId"
-00037c50: 3a20 2266 3661 3733 6531 662d 3339 6235  : "f6a73e1f-39b5
-00037c60: 2d34 6465 652d 6166 3231 2d31 3436 3062  -4dee-af21-1460b
-00037c70: 3265 3362 3237 6322 2c0a 2020 2020 2020  2e3b27c",.      
-00037c80: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00037c90: 2020 2020 2020 2020 226f 7264 6572 4c69          "orderLi
-00037ca0: 6e6b 4964 223a 2022 6130 3031 220a 2020  nkId": "a001".  
-00037cb0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00037cc0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-00037cd0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00037ce0: 5d0a 2020 2020 2020 2020 2320 2020 2020  ].        #     
-00037cf0: 2020 2020 7d2c 0a20 2020 2020 2020 2023      },.        #
-00037d00: 2020 2020 2020 2020 2022 7265 7445 7874           "retExt
-00037d10: 496e 666f 223a 207b 7d2c 0a20 2020 2020  Info": {},.     
-00037d20: 2020 2023 2020 2020 2020 2020 2022 7469     #         "ti
-00037d30: 6d65 223a 2031 3637 3232 3139 3738 3034  me": 16722197804
-00037d40: 3633 0a20 2020 2020 2020 2023 2020 2020  63.        #    
-00037d50: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
-00037d60: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
-00037d70: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
-00037d80: 7370 6f6e 7365 2c20 2772 6573 756c 7427  sponse, 'result'
-00037d90: 2c20 5b5d 290a 2020 2020 2020 2020 6f72  , []).        or
-00037da0: 6465 7273 203d 2073 656c 662e 7361 6665  ders = self.safe
-00037db0: 5f76 616c 7565 2872 6573 756c 742c 2027  _value(result, '
-00037dc0: 6c69 7374 2729 0a20 2020 2020 2020 2069  list').        i
-00037dd0: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
-00037de0: 286f 7264 6572 732c 206c 6973 7429 3a0a  (orders, list):.
-00037df0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00037e00: 726e 2072 6573 706f 6e73 650a 2020 2020  rn response.    
-00037e10: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00037e20: 7061 7273 655f 6f72 6465 7273 286f 7264  parse_orders(ord
-00037e30: 6572 732c 206d 6172 6b65 7429 0a0a 2020  ers, market)..  
-00037e40: 2020 6173 796e 6320 6465 6620 6361 6e63    async def canc
-00037e50: 656c 5f61 6c6c 5f73 706f 745f 6f72 6465  el_all_spot_orde
-00037e60: 7273 2873 656c 662c 2073 796d 626f 6c3a  rs(self, symbol:
-00037e70: 204f 7074 696f 6e61 6c5b 7374 725d 203d   Optional[str] =
-00037e80: 204e 6f6e 652c 2070 6172 616d 733d 7b7d   None, params={}
-00037e90: 293a 0a20 2020 2020 2020 2069 6620 7379  ):.        if sy
-00037ea0: 6d62 6f6c 2069 7320 4e6f 6e65 3a0a 2020  mbol is None:.  
-00037eb0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00037ec0: 4172 6775 6d65 6e74 7352 6571 7569 7265  ArgumentsRequire
-00037ed0: 6428 7365 6c66 2e69 6420 2b20 2720 6361  d(self.id + ' ca
-00037ee0: 6e63 656c 416c 6c53 706f 744f 7264 6572  ncelAllSpotOrder
-00037ef0: 7328 2920 7265 7175 6972 6573 2061 2073  s() requires a s
-00037f00: 796d 626f 6c20 6172 6775 6d65 6e74 2729  ymbol argument')
-00037f10: 0a20 2020 2020 2020 2061 7761 6974 2073  .        await s
-00037f20: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
-00037f30: 2829 0a20 2020 2020 2020 206d 6172 6b65  ().        marke
-00037f40: 7420 3d20 7365 6c66 2e6d 6172 6b65 7428  t = self.market(
-00037f50: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
-00037f60: 7265 7175 6573 7420 3d20 7b0a 2020 2020  request = {.    
-00037f70: 2020 2020 2020 2020 2773 796d 626f 6c27          'symbol'
-00037f80: 3a20 6d61 726b 6574 5b27 6964 275d 2c0a  : market['id'],.
-00037f90: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-00037fa0: 2020 7265 7370 6f6e 7365 203d 2061 7761    response = awa
-00037fb0: 6974 2073 656c 662e 7072 6976 6174 6544  it self.privateD
-00037fc0: 656c 6574 6553 706f 744f 7264 6572 4261  eleteSpotOrderBa
-00037fd0: 7463 6843 616e 6365 6c28 7365 6c66 2e65  tchCancel(self.e
-00037fe0: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
-00037ff0: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
-00038000: 230a 2020 2020 2020 2020 2320 2020 207b  #.        #    {
-00038010: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00038020: 2020 2272 6574 5f63 6f64 6522 3a20 302c    "ret_code": 0,
-00038030: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00038040: 2020 2272 6574 5f6d 7367 223a 2022 222c    "ret_msg": "",
-00038050: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00038060: 2020 2265 7874 5f63 6f64 6522 3a20 6e75    "ext_code": nu
-00038070: 6c6c 2c0a 2020 2020 2020 2020 2320 2020  ll,.        #   
-00038080: 2020 2020 2022 6578 745f 696e 666f 223a       "ext_info":
-00038090: 206e 756c 6c2c 0a20 2020 2020 2020 2023   null,.        #
-000380a0: 2020 2020 2020 2020 2272 6573 756c 7422          "result"
-000380b0: 3a20 7b0a 2020 2020 2020 2020 2320 2020  : {.        #   
-000380c0: 2020 2020 2020 2020 2022 7375 6363 6573           "succes
-000380d0: 7322 3a20 5472 7565 0a20 2020 2020 2020  s": True.       
-000380e0: 2023 2020 2020 2020 2020 7d0a 2020 2020   #        }.    
-000380f0: 2020 2020 2320 2020 207d 0a20 2020 2020      #    }.     
-00038100: 2020 2023 0a20 2020 2020 2020 2072 6573     #.        res
-00038110: 756c 7420 3d20 7365 6c66 2e73 6166 655f  ult = self.safe_
-00038120: 7661 6c75 6528 7265 7370 6f6e 7365 2c20  value(response, 
-00038130: 2772 6573 756c 7427 2c20 5b5d 290a 2020  'result', []).  
-00038140: 2020 2020 2020 6966 206e 6f74 2069 7369        if not isi
-00038150: 6e73 7461 6e63 6528 7265 7375 6c74 2c20  nstance(result, 
-00038160: 6c69 7374 293a 0a20 2020 2020 2020 2020  list):.         
-00038170: 2020 2072 6574 7572 6e20 7265 7370 6f6e     return respon
-00038180: 7365 0a20 2020 2020 2020 2072 6574 7572  se.        retur
-00038190: 6e20 7365 6c66 2e70 6172 7365 5f6f 7264  n self.parse_ord
-000381a0: 6572 7328 7265 7375 6c74 2c20 6d61 726b  ers(result, mark
-000381b0: 6574 290a 0a20 2020 2061 7379 6e63 2064  et)..    async d
-000381c0: 6566 2063 616e 6365 6c5f 616c 6c5f 756e  ef cancel_all_un
-000381d0: 6966 6965 645f 6d61 7267 696e 5f6f 7264  ified_margin_ord
-000381e0: 6572 7328 7365 6c66 2c20 7379 6d62 6f6c  ers(self, symbol
-000381f0: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
-00038200: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
-00038210: 7d29 3a0a 2020 2020 2020 2020 6177 6169  }):.        awai
-00038220: 7420 7365 6c66 2e6c 6f61 645f 6d61 726b  t self.load_mark
-00038230: 6574 7328 290a 2020 2020 2020 2020 6d61  ets().        ma
-00038240: 726b 6574 203d 204e 6f6e 650a 2020 2020  rket = None.    
-00038250: 2020 2020 7365 7474 6c65 203d 204e 6f6e      settle = Non
-00038260: 650a 2020 2020 2020 2020 7265 7175 6573  e.        reques
-00038270: 7420 3d20 7b7d 0a20 2020 2020 2020 2069  t = {}.        i
-00038280: 6620 7379 6d62 6f6c 2069 7320 6e6f 7420  f symbol is not 
-00038290: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-000382a0: 2020 6d61 726b 6574 203d 2073 656c 662e    market = self.
-000382b0: 6d61 726b 6574 2873 796d 626f 6c29 0a20  market(symbol). 
-000382c0: 2020 2020 2020 2020 2020 2073 6574 746c             settl
-000382d0: 6520 3d20 6d61 726b 6574 5b27 7365 7474  e = market['sett
-000382e0: 6c65 275d 0a20 2020 2020 2020 2020 2020  le'].           
-000382f0: 2072 6571 7565 7374 5b27 7379 6d62 6f6c   request['symbol
-00038300: 275d 203d 206d 6172 6b65 745b 2769 6427  '] = market['id'
-00038310: 5d0a 2020 2020 2020 2020 7375 6254 7970  ].        subTyp
-00038320: 6520 3d20 4e6f 6e65 0a20 2020 2020 2020  e = None.       
-00038330: 2073 7562 5479 7065 2c20 7061 7261 6d73   subType, params
-00038340: 203d 2073 656c 662e 6861 6e64 6c65 5f73   = self.handle_s
-00038350: 7562 5f74 7970 655f 616e 645f 7061 7261  ub_type_and_para
-00038360: 6d73 2827 6361 6e63 656c 416c 6c4f 7264  ms('cancelAllOrd
-00038370: 6572 7327 2c20 6d61 726b 6574 2c20 7061  ers', market, pa
-00038380: 7261 6d73 2c20 276c 696e 6561 7227 290a  rams, 'linear').
-00038390: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-000383a0: 2763 6174 6567 6f72 7927 5d20 3d20 7375  'category'] = su
-000383b0: 6254 7970 650a 2020 2020 2020 2020 7365  bType.        se
-000383c0: 7474 6c65 2c20 7061 7261 6d73 203d 2073  ttle, params = s
-000383d0: 656c 662e 6861 6e64 6c65 5f6f 7074 696f  elf.handle_optio
-000383e0: 6e5f 616e 645f 7061 7261 6d73 2870 6172  n_and_params(par
-000383f0: 616d 732c 2027 6361 6e63 656c 416c 6c4f  ams, 'cancelAllO
-00038400: 7264 6572 7327 2c20 2773 6574 746c 6527  rders', 'settle'
-00038410: 2c20 7365 7474 6c65 290a 2020 2020 2020  , settle).      
-00038420: 2020 6966 2073 6574 746c 6520 6973 206e    if settle is n
-00038430: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00038440: 2020 2020 2072 6571 7565 7374 5b27 7365       request['se
-00038450: 7474 6c65 436f 696e 275d 203d 2073 6574  ttleCoin'] = set
-00038460: 746c 650a 2020 2020 2020 2020 6973 5374  tle.        isSt
-00038470: 6f70 203d 2073 656c 662e 7361 6665 5f76  op = self.safe_v
-00038480: 616c 7565 2870 6172 616d 732c 2027 7374  alue(params, 'st
-00038490: 6f70 272c 2046 616c 7365 290a 2020 2020  op', False).    
-000384a0: 2020 2020 7061 7261 6d73 203d 2073 656c      params = sel
-000384b0: 662e 6f6d 6974 2870 6172 616d 732c 205b  f.omit(params, [
-000384c0: 2773 746f 7027 5d29 0a20 2020 2020 2020  'stop']).       
-000384d0: 2069 6620 6973 5374 6f70 3a0a 2020 2020   if isStop:.    
-000384e0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-000384f0: 276f 7264 6572 4669 6c74 6572 275d 203d  'orderFilter'] =
-00038500: 2027 5374 6f70 4f72 6465 7227 0a20 2020   'StopOrder'.   
-00038510: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
-00038520: 6177 6169 7420 7365 6c66 2e70 7269 7661  await self.priva
-00038530: 7465 506f 7374 556e 6966 6965 6456 3350  tePostUnifiedV3P
-00038540: 7269 7661 7465 4f72 6465 7243 616e 6365  rivateOrderCance
-00038550: 6c41 6c6c 2873 656c 662e 6578 7465 6e64  lAll(self.extend
-00038560: 2872 6571 7565 7374 2c20 7061 7261 6d73  (request, params
-00038570: 2929 0a20 2020 2020 2020 2023 0a20 2020  )).        #.   
-00038580: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
-00038590: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-000385a0: 7265 7443 6f64 6522 3a20 302c 0a20 2020  retCode": 0,.   
-000385b0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-000385c0: 7265 744d 7367 223a 2022 4f4b 222c 0a20  retMsg": "OK",. 
-000385d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000385e0: 2022 7265 7375 6c74 223a 207b 0a20 2020   "result": {.   
-000385f0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00038600: 2020 2022 6c69 7374 223a 205b 7b0a 2020     "list": [{.  
-00038610: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00038620: 2020 2020 2020 2020 2020 2020 2263 6174              "cat
-00038630: 6567 6f72 7922 3a20 226f 7074 696f 6e22  egory": "option"
-00038640: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00038650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038660: 2273 796d 626f 6c22 3a20 2242 5443 2d32  "symbol": "BTC-2
-00038670: 344a 554e 3232 2d34 3530 3030 2d50 222c  4JUN22-45000-P",
-00038680: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00038690: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000386a0: 6f72 6465 7249 6422 3a20 2262 6435 6633  orderId": "bd5f3
-000386b0: 6233 342d 6436 3464 2d34 6236 302d 3831  b34-d64d-4b60-81
-000386c0: 3838 2d34 3338 6662 6561 3463 3535 3222  88-438fbea4c552"
-000386d0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-000386e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000386f0: 226f 7264 6572 4c69 6e6b 4964 223a 2022  "orderLinkId": "
-00038700: 6163 3465 3362 3334 2d64 3634 642d 3462  ac4e3b34-d64d-4b
-00038710: 3630 2d38 3138 382d 3433 3866 6265 6134  60-8188-438fbea4
-00038720: 6335 3532 222c 0a20 2020 2020 2020 2023  c552",.        #
-00038730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038740: 207d 2c20 7b0a 2020 2020 2020 2020 2320   }, {.        # 
-00038750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038760: 2020 2020 2263 6174 6567 6f72 7922 3a20      "category": 
-00038770: 226f 7074 696f 6e22 2c0a 2020 2020 2020  "option",.      
-00038780: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00038790: 2020 2020 2020 2020 2273 796d 626f 6c22          "symbol"
-000387a0: 3a20 2242 5443 2d32 344a 554e 3232 2d34  : "BTC-24JUN22-4
-000387b0: 3530 3030 2d50 222c 0a20 2020 2020 2020  5000-P",.       
-000387c0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-000387d0: 2020 2020 2020 2022 6f72 6465 7249 6422         "orderId"
-000387e0: 3a20 2234 6464 6437 3237 612d 3261 6638  : "4ddd727a-2af8
-000387f0: 2d34 3330 652d 6132 3933 2d34 3238 3935  -430e-a293-42895
-00038800: 6535 3934 6431 3822 2c0a 2020 2020 2020  e594d18",.      
-00038810: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00038820: 2020 2020 2020 2020 226f 7264 6572 4c69          "orderLi
-00038830: 6e6b 4964 223a 2022 3563 6565 3732 3761  nkId": "5cee727a
-00038840: 2d32 6166 382d 3433 3065 2d61 3239 332d  -2af8-430e-a293-
-00038850: 3432 3839 3565 3539 3464 3138 222c 0a20  42895e594d18",. 
-00038860: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00038870: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
-00038880: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00038890: 205d 0a20 2020 2020 2020 2023 2020 2020   ].        #    
-000388a0: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
-000388b0: 2320 2020 2020 2020 2020 2272 6574 4578  #         "retEx
-000388c0: 7449 6e66 6f22 3a20 7b0a 2020 2020 2020  tInfo": {.      
-000388d0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000388e0: 226c 6973 7422 3a20 5b7b 0a20 2020 2020  "list": [{.     
-000388f0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00038900: 2020 2020 2022 636f 6465 223a 2030 2c0a       "code": 0,.
-00038910: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00038920: 2020 2020 2020 2020 2020 226d 7367 223a            "msg":
-00038930: 2022 4f4b 220a 2020 2020 2020 2020 2320   "OK".        # 
-00038940: 2020 2020 2020 2020 2020 2020 7d2c 207b              }, {
-00038950: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00038960: 2020 2020 2020 2020 2020 2022 636f 6465             "code
-00038970: 223a 2030 2c0a 2020 2020 2020 2020 2320  ": 0,.        # 
-00038980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038990: 226d 7367 223a 2022 4f4b 220a 2020 2020  "msg": "OK".    
-000389a0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000389b0: 2020 7d5d 0a20 2020 2020 2020 2023 2020    }].        #  
-000389c0: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
-000389d0: 2020 2320 2020 2020 2020 2020 2274 696d    #         "tim
-000389e0: 6522 3a20 3136 3537 3230 3037 3336 3537  e": 165720073657
-000389f0: 300a 2020 2020 2020 2020 2320 2020 2020  0.        #     
-00038a00: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
-00038a10: 2020 2020 7265 7375 6c74 203d 2073 656c      result = sel
-00038a20: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
-00038a30: 706f 6e73 652c 2027 7265 7375 6c74 272c  ponse, 'result',
-00038a40: 205b 5d29 0a20 2020 2020 2020 206f 7264   []).        ord
-00038a50: 6572 7320 3d20 7365 6c66 2e73 6166 655f  ers = self.safe_
-00038a60: 7661 6c75 6528 7265 7375 6c74 2c20 276c  value(result, 'l
-00038a70: 6973 7427 290a 2020 2020 2020 2020 6966  ist').        if
-00038a80: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
-00038a90: 6f72 6465 7273 2c20 6c69 7374 293a 0a20  orders, list):. 
-00038aa0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00038ab0: 6e20 7265 7370 6f6e 7365 0a20 2020 2020  n response.     
-00038ac0: 2020 2072 6574 7572 6e20 7365 6c66 2e70     return self.p
-00038ad0: 6172 7365 5f6f 7264 6572 7328 6f72 6465  arse_orders(orde
-00038ae0: 7273 2c20 6d61 726b 6574 290a 0a20 2020  rs, market)..   
-00038af0: 2061 7379 6e63 2064 6566 2063 616e 6365   async def cance
-00038b00: 6c5f 616c 6c5f 7573 6463 5f6f 7264 6572  l_all_usdc_order
-00038b10: 7328 7365 6c66 2c20 7379 6d62 6f6c 3a20  s(self, symbol: 
-00038b20: 4f70 7469 6f6e 616c 5b73 7472 5d20 3d20  Optional[str] = 
-00038b30: 4e6f 6e65 2c20 7061 7261 6d73 3d7b 7d29  None, params={})
-00038b40: 3a0a 2020 2020 2020 2020 6966 2073 796d  :.        if sym
-00038b50: 626f 6c20 6973 204e 6f6e 653a 0a20 2020  bol is None:.   
-00038b60: 2020 2020 2020 2020 2072 6169 7365 2041           raise A
-00038b70: 7267 756d 656e 7473 5265 7175 6972 6564  rgumentsRequired
-00038b80: 2873 656c 662e 6964 202b 2027 2063 616e  (self.id + ' can
-00038b90: 6365 6c41 6c6c 5553 4443 4f72 6465 7273  celAllUSDCOrders
-00038ba0: 2829 2072 6571 7569 7265 7320 6120 7379  () requires a sy
-00038bb0: 6d62 6f6c 2061 7267 756d 656e 7427 290a  mbol argument').
-00038bc0: 2020 2020 2020 2020 6177 6169 7420 7365          await se
-00038bd0: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
-00038be0: 290a 2020 2020 2020 2020 6d61 726b 6574  ).        market
-00038bf0: 203d 2073 656c 662e 6d61 726b 6574 2873   = self.market(s
-00038c00: 796d 626f 6c29 0a20 2020 2020 2020 206d  ymbol).        m
-00038c10: 6574 686f 6420 3d20 4e6f 6e65 0a20 2020  ethod = None.   
-00038c20: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
-00038c30: 0a20 2020 2020 2020 2020 2020 2027 7379  .            'sy
-00038c40: 6d62 6f6c 273a 206d 6172 6b65 745b 2769  mbol': market['i
-00038c50: 6427 5d2c 0a20 2020 2020 2020 207d 0a20  d'],.        }. 
-00038c60: 2020 2020 2020 2069 6620 6d61 726b 6574         if market
-00038c70: 5b27 6f70 7469 6f6e 275d 3a0a 2020 2020  ['option']:.    
-00038c80: 2020 2020 2020 2020 6d65 7468 6f64 203d          method =
-00038c90: 2027 7072 6976 6174 6550 6f73 744f 7074   'privatePostOpt
-00038ca0: 696f 6e55 7364 634f 7065 6e61 7069 5072  ionUsdcOpenapiPr
-00038cb0: 6976 6174 6556 3143 616e 6365 6c41 6c6c  ivateV1CancelAll
-00038cc0: 270a 2020 2020 2020 2020 656c 7365 3a0a  '.        else:.
-00038cd0: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
-00038ce0: 6f64 203d 2027 7072 6976 6174 6550 6f73  od = 'privatePos
-00038cf0: 7450 6572 7065 7475 616c 5573 6463 4f70  tPerpetualUsdcOp
-00038d00: 656e 6170 6950 7269 7661 7465 5631 4361  enapiPrivateV1Ca
-00038d10: 6e63 656c 416c 6c27 0a20 2020 2020 2020  ncelAll'.       
-00038d20: 2020 2020 2069 7353 746f 7020 3d20 7365       isStop = se
-00038d30: 6c66 2e73 6166 655f 7661 6c75 6528 7061  lf.safe_value(pa
-00038d40: 7261 6d73 2c20 2773 746f 7027 2c20 4661  rams, 'stop', Fa
-00038d50: 6c73 6529 0a20 2020 2020 2020 2020 2020  lse).           
-00038d60: 2069 6620 6973 5374 6f70 3a0a 2020 2020   if isStop:.    
-00038d70: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00038d80: 6573 745b 276f 7264 6572 4669 6c74 6572  est['orderFilter
-00038d90: 275d 203d 2027 5374 6f70 4f72 6465 7227  '] = 'StopOrder'
-00038da0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-00038db0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00038dc0: 2020 2072 6571 7565 7374 5b27 6f72 6465     request['orde
-00038dd0: 7246 696c 7465 7227 5d20 3d20 274f 7264  rFilter'] = 'Ord
-00038de0: 6572 270a 2020 2020 2020 2020 2020 2020  er'.            
-00038df0: 7061 7261 6d73 203d 2073 656c 662e 6f6d  params = self.om
-00038e00: 6974 2870 6172 616d 732c 205b 2773 746f  it(params, ['sto
-00038e10: 7027 5d29 0a20 2020 2020 2020 2072 6573  p']).        res
-00038e20: 706f 6e73 6520 3d20 6177 6169 7420 6765  ponse = await ge
-00038e30: 7461 7474 7228 7365 6c66 2c20 6d65 7468  tattr(self, meth
-00038e40: 6f64 2928 7365 6c66 2e65 7874 656e 6428  od)(self.extend(
-00038e50: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
-00038e60: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
-00038e70: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-00038e80: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-00038e90: 6574 436f 6465 223a 2030 2c0a 2020 2020  etCode": 0,.    
-00038ea0: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-00038eb0: 6574 4d73 6722 3a20 224f 4b22 2c0a 2020  etMsg": "OK",.  
-00038ec0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00038ed0: 2272 6574 4578 744d 6170 223a 207b 7d2c  "retExtMap": {},
-00038ee0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00038ef0: 2020 2022 7265 7375 6c74 223a 205b 0a20     "result": [. 
-00038f00: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00038f10: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
-00038f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038f30: 2022 6f75 7452 6571 7565 7374 4964 223a   "outRequestId":
-00038f40: 2022 6361 6e63 656c 416c 6c2d 3239 3031   "cancelAll-2901
-00038f50: 3139 2d31 3635 3231 3736 3434 3331 3134  19-1652176443114
-00038f60: 2d30 222c 0a20 2020 2020 2020 2023 2020  -0",.        #  
-00038f70: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00038f80: 7379 6d62 6f6c 223a 2022 4254 432d 3133  symbol": "BTC-13
-00038f90: 4d41 5932 322d 3430 3030 302d 4322 2c0a  MAY22-40000-C",.
-00038fa0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00038fb0: 2020 2020 2020 2020 2020 226f 7264 6572            "order
-00038fc0: 4964 223a 2022 6661 3663 6437 3430 2d35  Id": "fa6cd740-5
-00038fd0: 3665 642d 3437 3764 2d39 3338 352d 3930  6ed-477d-9385-90
-00038fe0: 6363 6266 6565 3439 6361 222c 0a20 2020  ccbfee49ca",.   
-00038ff0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00039000: 2020 2020 2020 2022 6f72 6465 724c 696e         "orderLin
-00039010: 6b49 6422 3a20 2222 2c0a 2020 2020 2020  kId": "",.      
-00039020: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00039030: 2020 2020 2265 7272 6f72 436f 6465 223a      "errorCode":
-00039040: 2030 2c0a 2020 2020 2020 2020 2320 2020   0,.        #   
-00039050: 2020 2020 2020 2020 2020 2020 2020 2265                "e
-00039060: 7272 6f72 4465 7363 223a 2022 220a 2020  rrorDesc": "".  
-00039070: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00039080: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
-00039090: 2020 2020 2020 2020 5d0a 2020 2020 2020          ].      
-000390a0: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
-000390b0: 2020 230a 2020 2020 2020 2020 7265 7375    #.        resu
-000390c0: 6c74 203d 2073 656c 662e 7361 6665 5f76  lt = self.safe_v
-000390d0: 616c 7565 2872 6573 706f 6e73 652c 2027  alue(response, '
-000390e0: 7265 7375 6c74 272c 205b 5d29 0a20 2020  result', []).   
-000390f0: 2020 2020 2069 6620 6e6f 7420 6973 696e       if not isin
-00039100: 7374 616e 6365 2872 6573 756c 742c 206c  stance(result, l
-00039110: 6973 7429 3a0a 2020 2020 2020 2020 2020  ist):.          
-00039120: 2020 7265 7475 726e 2072 6573 706f 6e73    return respons
-00039130: 650a 2020 2020 2020 2020 7265 7475 726e  e.        return
-00039140: 2073 656c 662e 7061 7273 655f 6f72 6465   self.parse_orde
-00039150: 7273 2872 6573 756c 742c 206d 6172 6b65  rs(result, marke
-00039160: 7429 0a0a 2020 2020 6173 796e 6320 6465  t)..    async de
-00039170: 6620 6361 6e63 656c 5f61 6c6c 5f64 6572  f cancel_all_der
-00039180: 6976 6174 6976 6573 5f6f 7264 6572 7328  ivatives_orders(
-00039190: 7365 6c66 2c20 7379 6d62 6f6c 3a20 4f70  self, symbol: Op
-000391a0: 7469 6f6e 616c 5b73 7472 5d20 3d20 4e6f  tional[str] = No
-000391b0: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
-000391c0: 2020 2020 2020 2020 6177 6169 7420 7365          await se
-000391d0: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
-000391e0: 290a 2020 2020 2020 2020 6d61 726b 6574  ).        market
-000391f0: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-00039200: 7365 7474 6c65 203d 204e 6f6e 650a 2020  settle = None.  
-00039210: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-00039220: 7b7d 0a20 2020 2020 2020 2069 6620 7379  {}.        if sy
-00039230: 6d62 6f6c 2069 7320 6e6f 7420 4e6f 6e65  mbol is not None
-00039240: 3a0a 2020 2020 2020 2020 2020 2020 6d61  :.            ma
-00039250: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
-00039260: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
-00039270: 2020 2020 2020 2073 6574 746c 6520 3d20         settle = 
-00039280: 6d61 726b 6574 5b27 7365 7474 6c65 275d  market['settle']
-00039290: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-000392a0: 7565 7374 5b27 7379 6d62 6f6c 275d 203d  uest['symbol'] =
-000392b0: 206d 6172 6b65 745b 2769 6427 5d0a 2020   market['id'].  
-000392c0: 2020 2020 2020 7365 7474 6c65 2c20 7061        settle, pa
-000392d0: 7261 6d73 203d 2073 656c 662e 6861 6e64  rams = self.hand
-000392e0: 6c65 5f6f 7074 696f 6e5f 616e 645f 7061  le_option_and_pa
-000392f0: 7261 6d73 2870 6172 616d 732c 2027 6361  rams(params, 'ca
-00039300: 6e63 656c 416c 6c4f 7264 6572 7327 2c20  ncelAllOrders', 
-00039310: 2773 6574 746c 6527 2c20 7365 7474 6c65  'settle', settle
-00039320: 290a 2020 2020 2020 2020 6966 2073 6574  ).        if set
-00039330: 746c 6520 6973 206e 6f74 204e 6f6e 653a  tle is not None:
-00039340: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-00039350: 7565 7374 5b27 7365 7474 6c65 436f 696e  uest['settleCoin
-00039360: 275d 203d 2073 6574 746c 650a 2020 2020  '] = settle.    
-00039370: 2020 2020 7265 7370 6f6e 7365 203d 2061      response = a
-00039380: 7761 6974 2073 656c 662e 7072 6976 6174  wait self.privat
-00039390: 6550 6f73 7443 6f6e 7472 6163 7456 3350  ePostContractV3P
-000393a0: 7269 7661 7465 4f72 6465 7243 616e 6365  rivateOrderCance
-000393b0: 6c41 6c6c 2873 656c 662e 6578 7465 6e64  lAll(self.extend
-000393c0: 2872 6571 7565 7374 2c20 7061 7261 6d73  (request, params
-000393d0: 2929 0a20 2020 2020 2020 2023 0a20 2020  )).        #.   
-000393e0: 2020 2020 2023 2063 6f6e 7472 6163 7420       # contract 
-000393f0: 7633 0a20 2020 2020 2020 2023 0a20 2020  v3.        #.   
-00039400: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
-00039410: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00039420: 7265 7443 6f64 6522 3a20 302c 0a20 2020  retCode": 0,.   
-00039430: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00039440: 7265 744d 7367 223a 2022 4f4b 222c 0a20  retMsg": "OK",. 
-00039450: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00039460: 2022 7265 7375 6c74 223a 207b 0a20 2020   "result": {.   
-00039470: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00039480: 2020 2022 6c69 7374 223a 205b 0a20 2020     "list": [.   
-00039490: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000394a0: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
-000394b0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-000394c0: 2020 2020 2020 2022 6f72 6465 7249 6422         "orderId"
-000394d0: 3a20 2234 3033 3034 3330 642d 3164 6261  : "4030430d-1dba
-000394e0: 2d34 3133 342d 6163 3737 2d33 6438 3163  -4134-ac77-3d81c
-000394f0: 3134 6161 6130 3022 2c0a 2020 2020 2020  14aaa00",.      
-00039500: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00039510: 2020 2020 2020 2020 226f 7264 6572 4c69          "orderLi
-00039520: 6e6b 4964 223a 2022 7830 3031 220a 2020  nkId": "x001".  
-00039530: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00039540: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-00039550: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00039560: 5d0a 2020 2020 2020 2020 2320 2020 2020  ].        #     
-00039570: 2020 2020 7d2c 0a20 2020 2020 2020 2023      },.        #
-00039580: 2020 2020 2020 2020 2022 7265 7445 7874           "retExt
-00039590: 496e 666f 223a 207b 7d2c 0a20 2020 2020  Info": {},.     
-000395a0: 2020 2023 2020 2020 2020 2020 2022 7469     #         "ti
-000395b0: 6d65 223a 2031 3635 3839 3031 3335 3932  me": 16589013592
-000395c0: 3235 0a20 2020 2020 2020 2023 2020 2020  25.        #    
-000395d0: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
-000395e0: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
-000395f0: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
-00039600: 7370 6f6e 7365 2c20 2772 6573 756c 7427  sponse, 'result'
-00039610: 2c20 5b5d 290a 2020 2020 2020 2020 6f72  , []).        or
-00039620: 6465 7273 203d 2073 656c 662e 7361 6665  ders = self.safe
-00039630: 5f76 616c 7565 2872 6573 756c 742c 2027  _value(result, '
-00039640: 6c69 7374 272c 205b 5d29 0a20 2020 2020  list', []).     
-00039650: 2020 2072 6574 7572 6e20 7365 6c66 2e70     return self.p
-00039660: 6172 7365 5f6f 7264 6572 7328 6f72 6465  arse_orders(orde
-00039670: 7273 2c20 6d61 726b 6574 290a 0a20 2020  rs, market)..   
-00039680: 2061 7379 6e63 2064 6566 2063 616e 6365   async def cance
-00039690: 6c5f 616c 6c5f 6f72 6465 7273 2873 656c  l_all_orders(sel
-000396a0: 662c 2073 796d 626f 6c3a 204f 7074 696f  f, symbol: Optio
-000396b0: 6e61 6c5b 7374 725d 203d 204e 6f6e 652c  nal[str] = None,
-000396c0: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
-000396d0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-000396e0: 2063 616e 6365 6c20 616c 6c20 6f70 656e   cancel all open
-000396f0: 206f 7264 6572 730a 2020 2020 2020 2020   orders.        
-00039700: 3a70 6172 616d 2073 7472 7c4e 6f6e 6520  :param str|None 
-00039710: 7379 6d62 6f6c 3a20 756e 6966 6965 6420  symbol: unified 
-00039720: 6d61 726b 6574 2073 796d 626f 6c2c 206f  market symbol, o
-00039730: 6e6c 7920 6f72 6465 7273 2069 6e20 7468  nly orders in th
-00039740: 6520 6d61 726b 6574 206f 6620 7365 6c66  e market of self
-00039750: 2073 796d 626f 6c20 6172 6520 6361 6e63   symbol are canc
-00039760: 656c 6c65 6420 7768 656e 2073 796d 626f  elled when symbo
-00039770: 6c20 6973 206e 6f74 204e 6f6e 650a 2020  l is not None.  
-00039780: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
-00039790: 7420 7061 7261 6d73 3a20 6578 7472 6120  t params: extra 
-000397a0: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
-000397b0: 6669 6320 746f 2074 6865 2062 7962 6974  fic to the bybit
-000397c0: 2061 7069 2065 6e64 706f 696e 740a 2020   api endpoint.  
-000397d0: 2020 2020 2020 3a72 6574 7572 6e73 205b        :returns [
-000397e0: 6469 6374 5d3a 2061 206c 6973 7420 6f66  dict]: a list of
-000397f0: 2060 6f72 6465 7220 7374 7275 6374 7572   `order structur
-00039800: 6573 203c 6874 7470 733a 2f2f 646f 6373  es <https://docs
-00039810: 2e63 6378 742e 636f 6d2f 232f 3f69 643d  .ccxt.com/#/?id=
-00039820: 6f72 6465 722d 7374 7275 6374 7572 653e  order-structure>
-00039830: 600a 2020 2020 2020 2020 2222 220a 2020  `.        """.  
-00039840: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
-00039850: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
-00039860: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
-00039870: 204e 6f6e 650a 2020 2020 2020 2020 7365   None.        se
-00039880: 7474 6c65 203d 2073 656c 662e 7361 6665  ttle = self.safe
-00039890: 5f73 7472 696e 6728 7061 7261 6d73 2c20  _string(params, 
-000398a0: 2773 6574 746c 6543 6f69 6e27 290a 2020  'settleCoin').  
-000398b0: 2020 2020 2020 6966 2073 6574 746c 6520        if settle 
-000398c0: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-000398d0: 2020 2020 2073 6574 746c 652c 2070 6172       settle, par
-000398e0: 616d 7320 3d20 7365 6c66 2e68 616e 646c  ams = self.handl
-000398f0: 655f 6f70 7469 6f6e 5f61 6e64 5f70 6172  e_option_and_par
-00039900: 616d 7328 7061 7261 6d73 2c20 2763 616e  ams(params, 'can
-00039910: 6365 6c41 6c6c 4f72 6465 7273 272c 2027  celAllOrders', '
-00039920: 7365 7474 6c65 272c 2073 6574 746c 6529  settle', settle)
-00039930: 0a20 2020 2020 2020 2069 6620 7379 6d62  .        if symb
-00039940: 6f6c 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ol is not None:.
-00039950: 2020 2020 2020 2020 2020 2020 6d61 726b              mark
-00039960: 6574 203d 2073 656c 662e 6d61 726b 6574  et = self.market
-00039970: 2873 796d 626f 6c29 0a20 2020 2020 2020  (symbol).       
-00039980: 2020 2020 2073 6574 746c 6520 3d20 6d61       settle = ma
-00039990: 726b 6574 5b27 7365 7474 6c65 275d 0a20  rket['settle']. 
-000399a0: 2020 2020 2020 2073 7562 5479 7065 203d         subType =
-000399b0: 204e 6f6e 650a 2020 2020 2020 2020 7375   None.        su
-000399c0: 6254 7970 652c 2070 6172 616d 7320 3d20  bType, params = 
-000399d0: 7365 6c66 2e68 616e 646c 655f 7375 625f  self.handle_sub_
-000399e0: 7479 7065 5f61 6e64 5f70 6172 616d 7328  type_and_params(
-000399f0: 2763 616e 6365 6c41 6c6c 4f72 6465 7273  'cancelAllOrders
-00039a00: 272c 206d 6172 6b65 742c 2070 6172 616d  ', market, param
-00039a10: 7329 0a20 2020 2020 2020 2069 7355 7364  s).        isUsd
-00039a20: 6353 6574 746c 6564 203d 2073 6574 746c  cSettled = settl
-00039a30: 6520 3d3d 2027 5553 4443 270a 2020 2020  e == 'USDC'.    
-00039a40: 2020 2020 6973 496e 7665 7273 6520 3d20      isInverse = 
-00039a50: 7375 6254 7970 6520 3d3d 2027 696e 7665  subType == 'inve
-00039a60: 7273 6527 0a20 2020 2020 2020 2069 734c  rse'.        isL
-00039a70: 696e 6561 7253 6574 746c 6520 3d20 6973  inearSettle = is
-00039a80: 5573 6463 5365 7474 6c65 6420 6f72 2028  UsdcSettled or (
-00039a90: 7365 7474 6c65 203d 3d20 2755 5344 5427  settle == 'USDT'
-00039aa0: 290a 2020 2020 2020 2020 6966 2069 7349  ).        if isI
-00039ab0: 6e76 6572 7365 2061 6e64 2069 734c 696e  nverse and isLin
-00039ac0: 6561 7253 6574 746c 653a 0a20 2020 2020  earSettle:.     
-00039ad0: 2020 2020 2020 2072 6169 7365 2041 7267         raise Arg
-00039ae0: 756d 656e 7473 5265 7175 6972 6564 2873  umentsRequired(s
-00039af0: 656c 662e 6964 202b 2027 2063 616e 6365  elf.id + ' cance
-00039b00: 6c41 6c6c 4f72 6465 7273 2077 6974 6820  lAllOrders with 
-00039b10: 696e 7665 7273 6520 7375 6254 7970 6520  inverse subType 
-00039b20: 7265 7175 6972 6573 2073 6574 746c 6520  requires settle 
-00039b30: 746f 206e 6f74 2062 6520 5553 4454 206f  to not be USDT o
-00039b40: 7220 5553 4443 2729 0a20 2020 2020 2020  r USDC').       
-00039b50: 2074 7970 652c 2071 7565 7279 203d 2073   type, query = s
-00039b60: 656c 662e 6861 6e64 6c65 5f6d 6172 6b65  elf.handle_marke
-00039b70: 745f 7479 7065 5f61 6e64 5f70 6172 616d  t_type_and_param
-00039b80: 7328 2763 616e 6365 6c41 6c6c 4f72 6465  s('cancelAllOrde
-00039b90: 7273 272c 206d 6172 6b65 742c 2070 6172  rs', market, par
-00039ba0: 616d 7329 0a20 2020 2020 2020 2065 6e61  ams).        ena
-00039bb0: 626c 6555 6e69 6669 6564 4d61 7267 696e  bleUnifiedMargin
-00039bc0: 2c20 656e 6162 6c65 556e 6966 6965 6441  , enableUnifiedA
-00039bd0: 6363 6f75 6e74 203d 2061 7761 6974 2073  ccount = await s
-00039be0: 656c 662e 6973 5f75 6e69 6669 6564 5f65  elf.is_unified_e
-00039bf0: 6e61 626c 6564 2829 0a20 2020 2020 2020  nabled().       
-00039c00: 2069 6620 656e 6162 6c65 556e 6966 6965   if enableUnifie
-00039c10: 6441 6363 6f75 6e74 3a0a 2020 2020 2020  dAccount:.      
-00039c20: 2020 2020 2020 7265 7475 726e 2061 7761        return awa
-00039c30: 6974 2073 656c 662e 6361 6e63 656c 5f61  it self.cancel_a
-00039c40: 6c6c 5f75 6e69 6669 6564 5f61 6363 6f75  ll_unified_accou
-00039c50: 6e74 5f6f 7264 6572 7328 7379 6d62 6f6c  nt_orders(symbol
-00039c60: 2c20 7175 6572 7929 0a20 2020 2020 2020  , query).       
-00039c70: 2065 6c69 6620 7479 7065 203d 3d20 2773   elif type == 's
-00039c80: 706f 7427 3a0a 2020 2020 2020 2020 2020  pot':.          
-00039c90: 2020 7265 7475 726e 2061 7761 6974 2073    return await s
-00039ca0: 656c 662e 6361 6e63 656c 5f61 6c6c 5f73  elf.cancel_all_s
-00039cb0: 706f 745f 6f72 6465 7273 2873 796d 626f  pot_orders(symbo
-00039cc0: 6c2c 2071 7565 7279 290a 2020 2020 2020  l, query).      
-00039cd0: 2020 656c 6966 2065 6e61 626c 6555 6e69    elif enableUni
-00039ce0: 6669 6564 4d61 7267 696e 2061 6e64 206e  fiedMargin and n
-00039cf0: 6f74 2069 7349 6e76 6572 7365 3a0a 2020  ot isInverse:.  
-00039d00: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00039d10: 2061 7761 6974 2073 656c 662e 6361 6e63   await self.canc
-00039d20: 656c 5f61 6c6c 5f75 6e69 6669 6564 5f6d  el_all_unified_m
-00039d30: 6172 6769 6e5f 6f72 6465 7273 2873 796d  argin_orders(sym
-00039d40: 626f 6c2c 2071 7565 7279 290a 2020 2020  bol, query).    
-00039d50: 2020 2020 656c 6966 2069 7355 7364 6353      elif isUsdcS
-00039d60: 6574 746c 6564 3a0a 2020 2020 2020 2020  ettled:.        
-00039d70: 2020 2020 7265 7475 726e 2061 7761 6974      return await
-00039d80: 2073 656c 662e 6361 6e63 656c 5f61 6c6c   self.cancel_all
-00039d90: 5f75 7364 635f 6f72 6465 7273 2873 796d  _usdc_orders(sym
-00039da0: 626f 6c2c 2071 7565 7279 290a 2020 2020  bol, query).    
-00039db0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00039dc0: 2020 2020 2020 7265 7475 726e 2061 7761        return awa
-00039dd0: 6974 2073 656c 662e 6361 6e63 656c 5f61  it self.cancel_a
-00039de0: 6c6c 5f64 6572 6976 6174 6976 6573 5f6f  ll_derivatives_o
-00039df0: 7264 6572 7328 7379 6d62 6f6c 2c20 7175  rders(symbol, qu
-00039e00: 6572 7929 0a0a 2020 2020 6173 796e 6320  ery)..    async 
-00039e10: 6465 6620 6665 7463 685f 756e 6966 6965  def fetch_unifie
-00039e20: 645f 6163 636f 756e 745f 6f72 6465 7273  d_account_orders
-00039e30: 2873 656c 662c 2073 796d 626f 6c3a 204f  (self, symbol: O
-00039e40: 7074 696f 6e61 6c5b 7374 725d 203d 204e  ptional[str] = N
-00039e50: 6f6e 652c 2073 696e 6365 3a20 4f70 7469  one, since: Opti
-00039e60: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
-00039e70: 2c20 6c69 6d69 743a 204f 7074 696f 6e61  , limit: Optiona
-00039e80: 6c5b 696e 745d 203d 204e 6f6e 652c 2070  l[int] = None, p
-00039e90: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
-00039ea0: 2020 2061 7761 6974 2073 656c 662e 6c6f     await self.lo
-00039eb0: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
-00039ec0: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
-00039ed0: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
-00039ee0: 7379 6d62 6f6c 273a 206d 6172 6b65 745b  symbol': market[
-00039ef0: 2769 6427 5d2c 0a20 2020 2020 2020 2020  'id'],.         
-00039f00: 2020 2023 2027 6361 7465 676f 7279 272c     # 'category',
-00039f10: 2054 7970 6520 6f66 2064 6572 6976 6174   Type of derivat
-00039f20: 6976 6573 2070 726f 6475 6374 3a20 7370  ives product: sp
-00039f30: 6f74 2c20 6c69 6e65 6172 206f 7220 6f70  ot, linear or op
-00039f40: 7469 6f6e 2e0a 2020 2020 2020 2020 2020  tion..          
-00039f50: 2020 2320 2762 6173 6543 6f69 6e27 2c20    # 'baseCoin', 
-00039f60: 4261 7365 2063 6f69 6e2e 2057 6865 6e20  Base coin. When 
-00039f70: 6361 7465 676f 7279 3d6f 7074 696f 6e2e  category=option.
-00039f80: 2049 6620 6e6f 7420 7061 7373 6564 2c20   If not passed, 
-00039f90: 4254 4320 6279 2064 6566 6175 6c74 3b20  BTC by default; 
-00039fa0: 7768 656e 2063 6174 6567 6f72 793d 6c69  when category=li
-00039fb0: 6e65 6172 2c20 6966 2042 5443 2070 6173  near, if BTC pas
-00039fc0: 7365 642c 2042 5443 5045 5250 2026 2042  sed, BTCPERP & B
-00039fd0: 5443 5553 4454 2072 6574 7572 6e65 642e  TCUSDT returned.
-00039fe0: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
-00039ff0: 6f72 6465 7249 6427 2c20 4f72 6465 7220  orderId', Order 
-0003a000: 4944 0a20 2020 2020 2020 2020 2020 2023  ID.            #
-0003a010: 2027 6f72 6465 724c 696e 6b49 6427 2c20   'orderLinkId', 
-0003a020: 556e 6971 7565 2075 7365 722d 7365 7420  Unique user-set 
-0003a030: 6f72 6465 7220 4944 0a20 2020 2020 2020  order ID.       
-0003a040: 2020 2020 2023 2027 6f72 6465 7253 7461       # 'orderSta
-0003a050: 7475 7327 2c20 2023 2052 6574 7572 6e20  tus',  # Return 
-0003a060: 616c 6c20 7374 6174 7573 206f 7264 6572  all status order
-0003a070: 7320 6966 206e 6f74 2070 6173 7365 640a  s if not passed.
-0003a080: 2020 2020 2020 2020 2020 2020 2320 276f              # 'o
-0003a090: 7264 6572 4669 6c74 6572 272c 2043 6f6e  rderFilter', Con
-0003a0a0: 6469 7469 6f6e 616c 206f 7264 6572 206f  ditional order o
-0003a0b0: 7220 6163 7469 7665 206f 7264 6572 0a20  r active order. 
-0003a0c0: 2020 2020 2020 2020 2020 2023 2027 6c69             # 'li
-0003a0d0: 6d69 7427 3a20 6e75 6d62 6572 2c20 4461  mit': number, Da
-0003a0e0: 7461 2071 7561 6e74 6974 7920 7065 7220  ta quantity per 
-0003a0f0: 7061 6765 3a20 4d61 7820 6461 7461 2076  page: Max data v
-0003a100: 616c 7565 2070 6572 2070 6167 6520 6973  alue per page is
-0003a110: 2035 302c 2061 6e64 2064 6566 6175 6c74   50, and default
-0003a120: 2076 616c 7565 2061 7420 3230 2e0a 2020   value at 20..  
-0003a130: 2020 2020 2020 2020 2020 2320 2763 7572            # 'cur
-0003a140: 736f 7227 2c20 4150 4920 7061 7373 2d74  sor', API pass-t
-0003a150: 6872 6f75 6768 2e20 6163 636f 756e 7454  hrough. accountT
-0003a160: 7970 6520 2b20 6361 7465 676f 7279 202b  ype + category +
-0003a170: 2063 7572 736f 7220 2b2e 2049 6620 696e   cursor +. If in
-0003a180: 636f 6e73 6973 7465 6e74 2c20 7468 6520  consistent, the 
-0003a190: 666f 6c6c 6f77 696e 6720 7368 6f75 6c64  following should
-0003a1a0: 2062 6520 7265 7475 726e 6564 3a20 5468   be returned: Th
-0003a1b0: 6520 6163 636f 756e 7420 7479 7065 2064  e account type d
-0003a1c0: 6f65 7320 6e6f 7420 6d61 7463 6820 7468  oes not match th
-0003a1d0: 6520 7365 7276 6963 6520 696e 7175 6972  e service inquir
-0003a1e0: 792e 0a20 2020 2020 2020 2020 2020 2023  y..            #
-0003a1f0: 2027 7374 6172 7454 696d 6527 3a20 302c   'startTime': 0,
-0003a200: 2020 2320 5468 6520 7374 6172 7420 7469    # The start ti
-0003a210: 6d65 7374 616d 7028 6d73 2920 5375 7070  mestamp(ms) Supp
-0003a220: 6f72 7420 5554 4120 6f6e 6c79 2074 656d  ort UTA only tem
-0003a230: 706f 7261 7269 6c79 2073 7461 7274 5469  porarily startTi
-0003a240: 6d65 2061 6e64 2065 6e64 5469 6d65 206d  me and endTime m
-0003a250: 7573 7420 6265 2070 6173 7365 6420 746f  ust be passed to
-0003a260: 6765 7468 6572 2049 6620 6e6f 7420 7061  gether If not pa
-0003a270: 7373 6564 2c20 7175 6572 7920 7468 6520  ssed, query the 
-0003a280: 7061 7374 2037 2064 6179 7320 6461 7461  past 7 days data
-0003a290: 2062 7920 6465 6661 756c 740a 2020 2020   by default.    
-0003a2a0: 2020 2020 2020 2020 2320 2765 6e64 5469          # 'endTi
-0003a2b0: 6d65 273a 2030 2c20 2023 2054 6865 2065  me': 0,  # The e
-0003a2c0: 6e64 2074 696d 6573 7461 6d70 286d 7329  nd timestamp(ms)
-0003a2d0: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
-0003a2e0: 2020 206d 6172 6b65 7420 3d20 4e6f 6e65     market = None
-0003a2f0: 0a20 2020 2020 2020 2069 6620 7379 6d62  .        if symb
-0003a300: 6f6c 2069 7320 4e6f 6e65 3a0a 2020 2020  ol is None:.    
-0003a310: 2020 2020 2020 2020 7479 7065 203d 204e          type = N
-0003a320: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
-0003a330: 7479 7065 2c20 7061 7261 6d73 203d 2073  type, params = s
-0003a340: 656c 662e 6861 6e64 6c65 5f6d 6172 6b65  elf.handle_marke
-0003a350: 745f 7479 7065 5f61 6e64 5f70 6172 616d  t_type_and_param
-0003a360: 7328 2766 6574 6368 4f72 6465 7273 272c  s('fetchOrders',
-0003a370: 206d 6172 6b65 742c 2070 6172 616d 7329   market, params)
-0003a380: 0a20 2020 2020 2020 2020 2020 2023 206f  .            # o
-0003a390: 7074 696f 6e2c 2073 706f 740a 2020 2020  ption, spot.    
-0003a3a0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0003a3b0: 2763 6174 6567 6f72 7927 5d20 3d20 7479  'category'] = ty
-0003a3c0: 7065 0a20 2020 2020 2020 2020 2020 2069  pe.            i
-0003a3d0: 6620 7479 7065 203d 3d20 2773 7761 7027  f type == 'swap'
-0003a3e0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0003a3f0: 2020 7375 6254 7970 6520 3d20 4e6f 6e65    subType = None
-0003a400: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003a410: 2073 7562 5479 7065 2c20 7061 7261 6d73   subType, params
-0003a420: 203d 2073 656c 662e 6861 6e64 6c65 5f73   = self.handle_s
-0003a430: 7562 5f74 7970 655f 616e 645f 7061 7261  ub_type_and_para
-0003a440: 6d73 2827 6665 7463 684f 7264 6572 7327  ms('fetchOrders'
-0003a450: 2c20 6d61 726b 6574 2c20 7061 7261 6d73  , market, params
-0003a460: 2c20 276c 696e 6561 7227 290a 2020 2020  , 'linear').    
-0003a470: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-0003a480: 6573 745b 2763 6174 6567 6f72 7927 5d20  est['category'] 
-0003a490: 3d20 7375 6254 7970 650a 2020 2020 2020  = subType.      
-0003a4a0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0003a4b0: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
-0003a4c0: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
-0003a4d0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-0003a4e0: 7565 7374 5b27 7379 6d62 6f6c 275d 203d  uest['symbol'] =
-0003a4f0: 206d 6172 6b65 745b 2769 6427 5d0a 2020   market['id'].  
-0003a500: 2020 2020 2020 2020 2020 6966 206d 6172            if mar
-0003a510: 6b65 745b 2773 706f 7427 5d3a 0a20 2020  ket['spot']:.   
-0003a520: 2020 2020 2020 2020 2020 2020 2072 6571               req
-0003a530: 7565 7374 5b27 6361 7465 676f 7279 275d  uest['category']
-0003a540: 203d 2027 7370 6f74 270a 2020 2020 2020   = 'spot'.      
-0003a550: 2020 2020 2020 656c 6966 206d 6172 6b65        elif marke
-0003a560: 745b 276f 7074 696f 6e27 5d3a 0a20 2020  t['option']:.   
-0003a570: 2020 2020 2020 2020 2020 2020 2072 6571               req
-0003a580: 7565 7374 5b27 6361 7465 676f 7279 275d  uest['category']
-0003a590: 203d 2027 6f70 7469 6f6e 270a 2020 2020   = 'option'.    
-0003a5a0: 2020 2020 2020 2020 656c 6966 206d 6172          elif mar
-0003a5b0: 6b65 745b 276c 696e 6561 7227 5d3a 0a20  ket['linear']:. 
-0003a5c0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0003a5d0: 6571 7565 7374 5b27 6361 7465 676f 7279  equest['category
-0003a5e0: 275d 203d 2027 6c69 6e65 6172 270a 2020  '] = 'linear'.  
-0003a5f0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-0003a600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003a610: 7261 6973 6520 4e6f 7453 7570 706f 7274  raise NotSupport
-0003a620: 6564 2873 656c 662e 6964 202b 2027 2066  ed(self.id + ' f
-0003a630: 6574 6368 4f72 6465 7273 2829 2064 6f65  etchOrders() doe
-0003a640: 7320 6e6f 7420 616c 6c6f 7720 696e 7665  s not allow inve
-0003a650: 7273 6520 6d61 726b 6574 206f 7264 6572  rse market order
-0003a660: 7320 666f 7220 2720 2b20 7379 6d62 6f6c  s for ' + symbol
-0003a670: 202b 2027 206d 6172 6b65 7473 2729 0a20   + ' markets'). 
-0003a680: 2020 2020 2020 2069 7353 746f 7020 3d20         isStop = 
-0003a690: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
-0003a6a0: 7061 7261 6d73 2c20 2773 746f 7027 2c20  params, 'stop', 
-0003a6b0: 4661 6c73 6529 0a20 2020 2020 2020 2070  False).        p
-0003a6c0: 6172 616d 7320 3d20 7365 6c66 2e6f 6d69  arams = self.omi
-0003a6d0: 7428 7061 7261 6d73 2c20 5b27 7374 6f70  t(params, ['stop
-0003a6e0: 275d 290a 2020 2020 2020 2020 6966 2069  ']).        if i
-0003a6f0: 7353 746f 703a 0a20 2020 2020 2020 2020  sStop:.         
-0003a700: 2020 2069 6620 6d61 726b 6574 5b27 7370     if market['sp
-0003a710: 6f74 275d 3a0a 2020 2020 2020 2020 2020  ot']:.          
-0003a720: 2020 2020 2020 7265 7175 6573 745b 276f        request['o
-0003a730: 7264 6572 4669 6c74 6572 275d 203d 2027  rderFilter'] = '
-0003a740: 7470 736c 4f72 6465 7227 0a20 2020 2020  tpslOrder'.     
-0003a750: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0003a760: 2020 2020 2020 2020 2020 2020 2072 6571               req
-0003a770: 7565 7374 5b27 6f72 6465 7246 696c 7465  uest['orderFilte
-0003a780: 7227 5d20 3d20 2753 746f 704f 7264 6572  r'] = 'StopOrder
-0003a790: 270a 2020 2020 2020 2020 6966 206c 696d  '.        if lim
-0003a7a0: 6974 2069 7320 6e6f 7420 4e6f 6e65 3a0a  it is not None:.
-0003a7b0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-0003a7c0: 6573 745b 276c 696d 6974 275d 203d 206c  est['limit'] = l
-0003a7d0: 696d 6974 0a20 2020 2020 2020 2069 6620  imit.        if 
-0003a7e0: 7369 6e63 6520 6973 206e 6f74 204e 6f6e  since is not Non
-0003a7f0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-0003a800: 6571 7565 7374 5b27 7374 6172 7454 696d  equest['startTim
-0003a810: 6527 5d20 3d20 7369 6e63 650a 2020 2020  e'] = since.    
-0003a820: 2020 2020 756e 7469 6c20 3d20 7365 6c66      until = self
-0003a830: 2e73 6166 655f 696e 7465 6765 725f 3228  .safe_integer_2(
-0003a840: 7061 7261 6d73 2c20 2775 6e74 696c 272c  params, 'until',
-0003a850: 2027 7469 6c6c 2729 2020 2320 756e 6966   'till')  # unif
-0003a860: 6965 6420 696e 206d 696c 6c69 7365 636f  ied in milliseco
-0003a870: 6e64 730a 2020 2020 2020 2020 656e 6454  nds.        endT
-0003a880: 696d 6520 3d20 7365 6c66 2e73 6166 655f  ime = self.safe_
-0003a890: 696e 7465 6765 7228 7061 7261 6d73 2c20  integer(params, 
-0003a8a0: 2765 6e64 5469 6d65 272c 2075 6e74 696c  'endTime', until
-0003a8b0: 2920 2023 2065 7863 6861 6e67 652d 7370  )  # exchange-sp
-0003a8c0: 6563 6966 6963 2069 6e20 6d69 6c6c 6973  ecific in millis
-0003a8d0: 6563 6f6e 6473 0a20 2020 2020 2020 2070  econds.        p
-0003a8e0: 6172 616d 7320 3d20 7365 6c66 2e6f 6d69  arams = self.omi
-0003a8f0: 7428 7061 7261 6d73 2c20 5b27 656e 6454  t(params, ['endT
-0003a900: 696d 6527 2c20 2774 696c 6c27 2c20 2775  ime', 'till', 'u
-0003a910: 6e74 696c 275d 290a 2020 2020 2020 2020  ntil']).        
-0003a920: 6966 2065 6e64 5469 6d65 2069 7320 6e6f  if endTime is no
-0003a930: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0003a940: 2020 2020 7265 7175 6573 745b 2765 6e64      request['end
-0003a950: 5469 6d65 275d 203d 2065 6e64 5469 6d65  Time'] = endTime
-0003a960: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-0003a970: 2020 2020 2020 2020 2020 2069 6620 7369             if si
-0003a980: 6e63 6520 6973 206e 6f74 204e 6f6e 653a  nce is not None:
-0003a990: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003a9a0: 2072 6169 7365 2042 6164 5265 7175 6573   raise BadReques
-0003a9b0: 7428 7365 6c66 2e69 6420 2b20 2720 6665  t(self.id + ' fe
-0003a9c0: 7463 684f 7264 6572 7328 2920 7265 7175  tchOrders() requ
-0003a9d0: 6972 6573 2075 6e74 696c 2f65 6e64 5469  ires until/endTi
-0003a9e0: 6d65 2077 6865 6e20 7369 6e63 6520 6973  me when since is
-0003a9f0: 2070 726f 7669 6465 642e 2729 0a20 2020   provided.').   
-0003aa00: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
-0003aa10: 6177 6169 7420 7365 6c66 2e70 7269 7661  await self.priva
-0003aa20: 7465 4765 7456 354f 7264 6572 4869 7374  teGetV5OrderHist
-0003aa30: 6f72 7928 7365 6c66 2e65 7874 656e 6428  ory(self.extend(
-0003aa40: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
-0003aa50: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
-0003aa60: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-0003aa70: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-0003aa80: 6574 436f 6465 223a 2030 2c0a 2020 2020  etCode": 0,.    
-0003aa90: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-0003aaa0: 6574 4d73 6722 3a20 224f 4b22 2c0a 2020  etMsg": "OK",.  
-0003aab0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003aac0: 2272 6573 756c 7422 3a20 7b0a 2020 2020  "result": {.    
-0003aad0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003aae0: 2020 226e 6578 7450 6167 6543 7572 736f    "nextPageCurso
-0003aaf0: 7222 3a20 2230 3332 3334 6465 392d 3133  r": "03234de9-13
-0003ab00: 3332 2d34 3165 622d 6238 3035 2d34 6139  32-41eb-b805-4a9
-0003ab10: 6634 3263 3133 3661 3325 3341 3136 3732  f42c136a3%3A1672
-0003ab20: 3232 3031 3039 3338 3725 3243 3033 3233  220109387%2C0323
-0003ab30: 3464 6539 2d31 3333 322d 3431 6562 2d62  4de9-1332-41eb-b
-0003ab40: 3830 352d 3461 3966 3432 6331 3336 6133  805-4a9f42c136a3
-0003ab50: 2533 4131 3637 3232 3230 3130 3933 3837  %3A1672220109387
-0003ab60: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0003ab70: 2020 2020 2020 2020 2022 6361 7465 676f           "catego
-0003ab80: 7279 223a 2022 6c69 6e65 6172 222c 0a20  ry": "linear",. 
-0003ab90: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003aba0: 2020 2020 2022 6c69 7374 223a 205b 0a20       "list": [. 
-0003abb0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003abc0: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-0003abd0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0003abe0: 2020 2020 2020 2020 2022 7379 6d62 6f6c           "symbol
-0003abf0: 223a 2022 4254 4355 5344 5422 2c0a 2020  ": "BTCUSDT",.  
-0003ac00: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003ac10: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
-0003ac20: 6572 5479 7065 223a 2022 4c69 6d69 7422  erType": "Limit"
-0003ac30: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0003ac40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003ac50: 226f 7264 6572 4c69 6e6b 4964 223a 2022  "orderLinkId": "
-0003ac60: 7465 7374 2d30 3031 222c 0a20 2020 2020  test-001",.     
-0003ac70: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0003ac80: 2020 2020 2020 2020 2022 6f72 6465 7249           "orderI
-0003ac90: 6422 3a20 2230 3332 3334 6465 392d 3133  d": "03234de9-13
-0003aca0: 3332 2d34 3165 622d 6238 3035 2d34 6139  32-41eb-b805-4a9
-0003acb0: 6634 3263 3133 3661 3322 2c0a 2020 2020  f42c136a3",.    
-0003acc0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003acd0: 2020 2020 2020 2020 2020 2263 616e 6365            "cance
-0003ace0: 6c54 7970 6522 3a20 2243 616e 6365 6c42  lType": "CancelB
-0003acf0: 7955 7365 7222 2c0a 2020 2020 2020 2020  yUser",.        
-0003ad00: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0003ad10: 2020 2020 2020 2261 7667 5072 6963 6522        "avgPrice"
-0003ad20: 3a20 2230 222c 0a20 2020 2020 2020 2023  : "0",.        #
-0003ad30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003ad40: 2020 2020 2022 7374 6f70 4f72 6465 7254       "stopOrderT
-0003ad50: 7970 6522 3a20 2255 4e4b 4e4f 574e 222c  ype": "UNKNOWN",
-0003ad60: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0003ad70: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0003ad80: 6c61 7374 5072 6963 654f 6e43 7265 6174  lastPriceOnCreat
-0003ad90: 6564 223a 2022 3136 3635 362e 3522 2c0a  ed": "16656.5",.
-0003ada0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003adb0: 2020 2020 2020 2020 2020 2020 2020 226f                "o
-0003adc0: 7264 6572 5374 6174 7573 223a 2022 4361  rderStatus": "Ca
-0003add0: 6e63 656c 6c65 6422 2c0a 2020 2020 2020  ncelled",.      
-0003ade0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0003adf0: 2020 2020 2020 2020 2274 616b 6550 726f          "takePro
-0003ae00: 6669 7422 3a20 2222 2c0a 2020 2020 2020  fit": "",.      
-0003ae10: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0003ae20: 2020 2020 2020 2020 2263 756d 4578 6563          "cumExec
-0003ae30: 5661 6c75 6522 3a20 2230 222c 0a20 2020  Value": "0",.   
-0003ae40: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0003ae50: 2020 2020 2020 2020 2020 2022 7472 6967             "trig
-0003ae60: 6765 7244 6972 6563 7469 6f6e 223a 2030  gerDirection": 0
-0003ae70: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0003ae80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003ae90: 2262 6c6f 636b 5472 6164 6549 6422 3a20  "blockTradeId": 
-0003aea0: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
-0003aeb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003aec0: 2020 2272 656a 6563 7452 6561 736f 6e22    "rejectReason"
-0003aed0: 3a20 2245 435f 5065 7243 616e 6365 6c52  : "EC_PerCancelR
-0003aee0: 6571 7565 7374 222c 0a20 2020 2020 2020  equest",.       
-0003aef0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0003af00: 2020 2020 2020 2022 6973 4c65 7665 7261         "isLevera
-0003af10: 6765 223a 2022 222c 0a20 2020 2020 2020  ge": "",.       
-0003af20: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0003af30: 2020 2020 2020 2022 7072 6963 6522 3a20         "price": 
-0003af40: 2231 3830 3030 222c 0a20 2020 2020 2020  "18000",.       
-0003af50: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0003af60: 2020 2020 2020 2022 6f72 6465 7249 7622         "orderIv"
-0003af70: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
-0003af80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003af90: 2020 2020 2263 7265 6174 6564 5469 6d65      "createdTime
-0003afa0: 223a 2022 3136 3732 3232 3031 3039 3338  ": "167222010938
-0003afb0: 3722 2c0a 2020 2020 2020 2020 2320 2020  7",.        #   
-0003afc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003afd0: 2020 2274 7054 7269 6767 6572 4279 223a    "tpTriggerBy":
-0003afe0: 2022 554e 4b4e 4f57 4e22 2c0a 2020 2020   "UNKNOWN",.    
-0003aff0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003b000: 2020 2020 2020 2020 2020 2270 6f73 6974            "posit
-0003b010: 696f 6e49 6478 223a 2030 2c0a 2020 2020  ionIdx": 0,.    
-0003b020: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003b030: 2020 2020 2020 2020 2020 2274 696d 6549            "timeI
-0003b040: 6e46 6f72 6365 223a 2022 476f 6f64 5469  nForce": "GoodTi
-0003b050: 6c6c 4361 6e63 656c 222c 0a20 2020 2020  llCancel",.     
-0003b060: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0003b070: 2020 2020 2020 2020 2022 6c65 6176 6573           "leaves
-0003b080: 5661 6c75 6522 3a20 2230 222c 0a20 2020  Value": "0",.   
-0003b090: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0003b0a0: 2020 2020 2020 2020 2020 2022 7570 6461             "upda
-0003b0b0: 7465 6454 696d 6522 3a20 2231 3637 3232  tedTime": "16722
-0003b0c0: 3230 3131 3431 3233 222c 0a20 2020 2020  20114123",.     
-0003b0d0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0003b0e0: 2020 2020 2020 2020 2022 7369 6465 223a           "side":
-0003b0f0: 2022 5365 6c6c 222c 0a20 2020 2020 2020   "Sell",.       
-0003b100: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0003b110: 2020 2020 2020 2022 7472 6967 6765 7250         "triggerP
-0003b120: 7269 6365 223a 2022 222c 0a20 2020 2020  rice": "",.     
-0003b130: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0003b140: 2020 2020 2020 2020 2022 6375 6d45 7865           "cumExe
-0003b150: 6346 6565 223a 2022 3022 2c0a 2020 2020  cFee": "0",.    
-0003b160: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003b170: 2020 2020 2020 2020 2020 2273 6c54 7269            "slTri
-0003b180: 6767 6572 4279 223a 2022 554e 4b4e 4f57  ggerBy": "UNKNOW
-0003b190: 4e22 2c0a 2020 2020 2020 2020 2320 2020  N",.        #   
-0003b1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003b1b0: 2020 226c 6561 7665 7351 7479 223a 2022    "leavesQty": "
-0003b1c0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-0003b1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003b1e0: 2020 2263 6c6f 7365 4f6e 5472 6967 6765    "closeOnTrigge
-0003b1f0: 7222 3a20 4661 6c73 652c 0a20 2020 2020  r": False,.     
-0003b200: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0003b210: 2020 2020 2020 2020 2022 6375 6d45 7865           "cumExe
-0003b220: 6351 7479 223a 2022 3022 2c0a 2020 2020  cQty": "0",.    
-0003b230: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003b240: 2020 2020 2020 2020 2020 2272 6564 7563            "reduc
-0003b250: 654f 6e6c 7922 3a20 4661 6c73 652c 0a20  eOnly": False,. 
-0003b260: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003b270: 2020 2020 2020 2020 2020 2020 2022 7174               "qt
-0003b280: 7922 3a20 2230 2e31 222c 0a20 2020 2020  y": "0.1",.     
-0003b290: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0003b2a0: 2020 2020 2020 2020 2022 7374 6f70 4c6f           "stopLo
-0003b2b0: 7373 223a 2022 222c 0a20 2020 2020 2020  ss": "",.       
-0003b2c0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0003b2d0: 2020 2020 2020 2022 7472 6967 6765 7242         "triggerB
-0003b2e0: 7922 3a20 2255 4e4b 4e4f 574e 220a 2020  y": "UNKNOWN".  
-0003b2f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003b300: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-0003b310: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0003b320: 5d0a 2020 2020 2020 2020 2320 2020 2020  ].        #     
-0003b330: 2020 2020 7d2c 0a20 2020 2020 2020 2023      },.        #
-0003b340: 2020 2020 2020 2020 2022 7265 7445 7874           "retExt
-0003b350: 496e 666f 223a 207b 7d2c 0a20 2020 2020  Info": {},.     
-0003b360: 2020 2023 2020 2020 2020 2020 2022 7469     #         "ti
-0003b370: 6d65 223a 2031 3637 3232 3231 3236 3338  me": 16722212638
-0003b380: 3632 0a20 2020 2020 2020 2023 2020 2020  62.        #    
-0003b390: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
-0003b3a0: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
-0003b3b0: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
-0003b3c0: 7370 6f6e 7365 2c20 2772 6573 756c 7427  sponse, 'result'
-0003b3d0: 2c20 7b7d 290a 2020 2020 2020 2020 6461  , {}).        da
-0003b3e0: 7461 203d 2073 656c 662e 7361 6665 5f76  ta = self.safe_v
-0003b3f0: 616c 7565 2872 6573 756c 742c 2027 6c69  alue(result, 'li
-0003b400: 7374 272c 205b 5d29 0a20 2020 2020 2020  st', []).       
-0003b410: 2072 6574 7572 6e20 7365 6c66 2e70 6172   return self.par
-0003b420: 7365 5f6f 7264 6572 7328 6461 7461 2c20  se_orders(data, 
-0003b430: 6d61 726b 6574 2c20 7369 6e63 652c 206c  market, since, l
-0003b440: 696d 6974 290a 0a20 2020 2061 7379 6e63  imit)..    async
-0003b450: 2064 6566 2066 6574 6368 5f75 6e69 6669   def fetch_unifi
-0003b460: 6564 5f6d 6172 6769 6e5f 6f72 6465 7273  ed_margin_orders
-0003b470: 2873 656c 662c 2073 796d 626f 6c3a 204f  (self, symbol: O
-0003b480: 7074 696f 6e61 6c5b 7374 725d 203d 204e  ptional[str] = N
-0003b490: 6f6e 652c 2073 696e 6365 3a20 4f70 7469  one, since: Opti
-0003b4a0: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
-0003b4b0: 2c20 6c69 6d69 743a 204f 7074 696f 6e61  , limit: Optiona
-0003b4c0: 6c5b 696e 745d 203d 204e 6f6e 652c 2070  l[int] = None, p
-0003b4d0: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
-0003b4e0: 2020 2061 7761 6974 2073 656c 662e 6c6f     await self.lo
-0003b4f0: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
-0003b500: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
-0003b510: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
-0003b520: 7379 6d62 6f6c 273a 206d 6172 6b65 745b  symbol': market[
-0003b530: 2769 6427 5d2c 0a20 2020 2020 2020 2020  'id'],.         
-0003b540: 2020 2023 2027 6361 7465 676f 7279 272c     # 'category',
-0003b550: 2054 7970 6520 6f66 2064 6572 6976 6174   Type of derivat
-0003b560: 6976 6573 2070 726f 6475 6374 3a20 6c69  ives product: li
-0003b570: 6e65 6172 206f 7220 6f70 7469 6f6e 2e0a  near or option..
-0003b580: 2020 2020 2020 2020 2020 2020 2320 2762              # 'b
-0003b590: 6173 6543 6f69 6e27 2c20 4261 7365 2063  aseCoin', Base c
-0003b5a0: 6f69 6e2e 2057 6865 6e20 6361 7465 676f  oin. When catego
-0003b5b0: 7279 3d6f 7074 696f 6e2e 2049 6620 6e6f  ry=option. If no
-0003b5c0: 7420 7061 7373 6564 2c20 4254 4320 6279  t passed, BTC by
-0003b5d0: 2064 6566 6175 6c74 3b20 7768 656e 2063   default; when c
-0003b5e0: 6174 6567 6f72 793d 6c69 6e65 6172 2c20  ategory=linear, 
-0003b5f0: 6966 2042 5443 2070 6173 7365 642c 2042  if BTC passed, B
-0003b600: 5443 5045 5250 2026 2042 5443 5553 4454  TCPERP & BTCUSDT
-0003b610: 2072 6574 7572 6e65 642e 0a20 2020 2020   returned..     
-0003b620: 2020 2020 2020 2023 2027 6f72 6465 7249         # 'orderI
-0003b630: 6427 2c20 4f72 6465 7220 4944 0a20 2020  d', Order ID.   
-0003b640: 2020 2020 2020 2020 2023 2027 6f72 6465           # 'orde
-0003b650: 724c 696e 6b49 6427 2c20 556e 6971 7565  rLinkId', Unique
-0003b660: 2075 7365 722d 7365 7420 6f72 6465 7220   user-set order 
-0003b670: 4944 0a20 2020 2020 2020 2020 2020 2023  ID.            #
-0003b680: 2027 6f72 6465 7253 7461 7475 7327 2c20   'orderStatus', 
-0003b690: 5175 6572 7920 6c69 7374 206f 6620 6f72  Query list of or
-0003b6a0: 6465 7273 2069 6e20 6465 7369 676e 6174  ders in designat
-0003b6b0: 6564 2073 7461 7465 732e 2049 6620 7365  ed states. If se
-0003b6c0: 6c66 2070 6172 616d 6574 6572 2069 7320  lf parameter is 
-0003b6d0: 6e6f 7420 7061 7373 6564 2c20 7468 6520  not passed, the 
-0003b6e0: 6f72 6465 7273 2069 6e20 616c 6c20 7374  orders in all st
-0003b6f0: 6174 6573 2073 6861 6c6c 2062 6520 656e  ates shall be en
-0003b700: 7175 6972 6564 2062 7920 6465 6661 756c  quired by defaul
-0003b710: 742e 2054 6869 7320 7061 7261 6d65 7465  t. This paramete
-0003b720: 7220 7375 7070 6f72 7473 206d 756c 7469  r supports multi
-0003b730: 2d73 7461 7465 2069 6e71 7569 7279 2e20  -state inquiry. 
-0003b740: 5374 6174 6573 2073 686f 756c 6420 6265  States should be
-0003b750: 2073 6570 6172 6174 6564 2077 6974 6820   separated with 
-0003b760: 456e 676c 6973 6820 636f 6d6d 6173 2e0a  English commas..
-0003b770: 2020 2020 2020 2020 2020 2020 2320 276f              # 'o
-0003b780: 7264 6572 4669 6c74 6572 272c 2043 6f6e  rderFilter', Con
-0003b790: 6469 7469 6f6e 616c 206f 7264 6572 206f  ditional order o
-0003b7a0: 7220 6163 7469 7665 206f 7264 6572 0a20  r active order. 
-0003b7b0: 2020 2020 2020 2020 2020 2023 2027 6469             # 'di
-0003b7c0: 7265 6374 696f 6e27 2c20 7072 6576 3a20  rection', prev: 
-0003b7d0: 7072 6576 2c20 6e65 7874 3a20 6e65 7874  prev, next: next
-0003b7e0: 2e0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-0003b7f0: 276c 696d 6974 273a 206e 756d 6265 722c  'limit': number,
-0003b800: 2044 6174 6120 7175 616e 7469 7479 2070   Data quantity p
-0003b810: 6572 2070 6167 653a 204d 6178 2064 6174  er page: Max dat
-0003b820: 6120 7661 6c75 6520 7065 7220 7061 6765  a value per page
-0003b830: 2069 7320 3530 2c20 616e 6420 6465 6661   is 50, and defa
-0003b840: 756c 7420 7661 6c75 6520 6174 2032 302e  ult value at 20.
-0003b850: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
-0003b860: 6375 7273 6f72 272c 2041 5049 2070 6173  cursor', API pas
-0003b870: 732d 7468 726f 7567 682e 2061 6363 6f75  s-through. accou
-0003b880: 6e74 5479 7065 202b 2063 6174 6567 6f72  ntType + categor
-0003b890: 7920 2b20 6375 7273 6f72 202b 2e20 4966  y + cursor +. If
-0003b8a0: 2069 6e63 6f6e 7369 7374 656e 742c 2074   inconsistent, t
-0003b8b0: 6865 2066 6f6c 6c6f 7769 6e67 2073 686f  he following sho
-0003b8c0: 756c 6420 6265 2072 6574 7572 6e65 643a  uld be returned:
-0003b8d0: 2054 6865 2061 6363 6f75 6e74 2074 7970   The account typ
-0003b8e0: 6520 646f 6573 206e 6f74 206d 6174 6368  e does not match
-0003b8f0: 2074 6865 2073 6572 7669 6365 2069 6e71   the service inq
-0003b900: 7569 7279 2e0a 2020 2020 2020 2020 7d0a  uiry..        }.
-0003b910: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
-0003b920: 204e 6f6e 650a 2020 2020 2020 2020 6966   None.        if
-0003b930: 2073 796d 626f 6c20 6973 204e 6f6e 653a   symbol is None:
-0003b940: 0a20 2020 2020 2020 2020 2020 2073 7562  .            sub
-0003b950: 5479 7065 203d 204e 6f6e 650a 2020 2020  Type = None.    
-0003b960: 2020 2020 2020 2020 7375 6254 7970 652c          subType,
-0003b970: 2070 6172 616d 7320 3d20 7365 6c66 2e68   params = self.h
-0003b980: 616e 646c 655f 7375 625f 7479 7065 5f61  andle_sub_type_a
-0003b990: 6e64 5f70 6172 616d 7328 2766 6574 6368  nd_params('fetch
-0003b9a0: 556e 6966 6965 644d 6172 6769 6e4f 7264  UnifiedMarginOrd
-0003b9b0: 6572 7327 2c20 6d61 726b 6574 2c20 7061  ers', market, pa
-0003b9c0: 7261 6d73 2c20 276c 696e 6561 7227 290a  rams, 'linear').
-0003b9d0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-0003b9e0: 6573 745b 2763 6174 6567 6f72 7927 5d20  est['category'] 
-0003b9f0: 3d20 7375 6254 7970 650a 2020 2020 2020  = subType.      
-0003ba00: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0003ba10: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
-0003ba20: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
-0003ba30: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-0003ba40: 7565 7374 5b27 7379 6d62 6f6c 275d 203d  uest['symbol'] =
-0003ba50: 206d 6172 6b65 745b 2769 6427 5d0a 2020   market['id'].  
-0003ba60: 2020 2020 2020 2020 2020 6966 206d 6172            if mar
-0003ba70: 6b65 745b 276f 7074 696f 6e27 5d3a 0a20  ket['option']:. 
-0003ba80: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0003ba90: 6571 7565 7374 5b27 6361 7465 676f 7279  equest['category
-0003baa0: 275d 203d 2027 6f70 7469 6f6e 270a 2020  '] = 'option'.  
-0003bab0: 2020 2020 2020 2020 2020 656c 6966 206d            elif m
-0003bac0: 6172 6b65 745b 276c 696e 6561 7227 5d3a  arket['linear']:
-0003bad0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003bae0: 2072 6571 7565 7374 5b27 6361 7465 676f   request['catego
-0003baf0: 7279 275d 203d 2027 6c69 6e65 6172 270a  ry'] = 'linear'.
-0003bb00: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0003bb10: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0003bb20: 2020 7261 6973 6520 4e6f 7453 7570 706f    raise NotSuppo
-0003bb30: 7274 6564 2873 656c 662e 6964 202b 2027  rted(self.id + '
-0003bb40: 2066 6574 6368 556e 6966 6965 644d 6172   fetchUnifiedMar
-0003bb50: 6769 6e4f 7264 6572 7328 2920 646f 6573  ginOrders() does
-0003bb60: 206e 6f74 2061 6c6c 6f77 2069 6e76 6572   not allow inver
-0003bb70: 7365 206d 6172 6b65 7420 6f72 6465 7273  se market orders
-0003bb80: 2066 6f72 2027 202b 2073 796d 626f 6c20   for ' + symbol 
-0003bb90: 2b20 2720 6d61 726b 6574 7327 290a 2020  + ' markets').  
-0003bba0: 2020 2020 2020 6973 5374 6f70 203d 2073        isStop = s
-0003bbb0: 656c 662e 7361 6665 5f76 616c 7565 2870  elf.safe_value(p
-0003bbc0: 6172 616d 732c 2027 7374 6f70 272c 2046  arams, 'stop', F
-0003bbd0: 616c 7365 290a 2020 2020 2020 2020 7061  alse).        pa
-0003bbe0: 7261 6d73 203d 2073 656c 662e 6f6d 6974  rams = self.omit
-0003bbf0: 2870 6172 616d 732c 205b 2773 746f 7027  (params, ['stop'
-0003bc00: 5d29 0a20 2020 2020 2020 2069 6620 6973  ]).        if is
-0003bc10: 5374 6f70 3a0a 2020 2020 2020 2020 2020  Stop:.          
-0003bc20: 2020 7265 7175 6573 745b 276f 7264 6572    request['order
-0003bc30: 4669 6c74 6572 275d 203d 2027 5374 6f70  Filter'] = 'Stop
-0003bc40: 4f72 6465 7227 0a20 2020 2020 2020 2069  Order'.        i
-0003bc50: 6620 6c69 6d69 7420 6973 206e 6f74 204e  f limit is not N
-0003bc60: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-0003bc70: 2072 6571 7565 7374 5b27 6c69 6d69 7427   request['limit'
-0003bc80: 5d20 3d20 6c69 6d69 740a 2020 2020 2020  ] = limit.      
-0003bc90: 2020 7265 7370 6f6e 7365 203d 2061 7761    response = awa
-0003bca0: 6974 2073 656c 662e 7072 6976 6174 6547  it self.privateG
-0003bcb0: 6574 556e 6966 6965 6456 3350 7269 7661  etUnifiedV3Priva
-0003bcc0: 7465 4f72 6465 724c 6973 7428 7365 6c66  teOrderList(self
-0003bcd0: 2e65 7874 656e 6428 7265 7175 6573 742c  .extend(request,
-0003bce0: 2070 6172 616d 7329 290a 2020 2020 2020   params)).      
-0003bcf0: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
-0003bd00: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-0003bd10: 2020 2020 2020 2272 6574 436f 6465 223a        "retCode":
-0003bd20: 2030 2c0a 2020 2020 2020 2020 2320 2020   0,.        #   
-0003bd30: 2020 2020 2020 2272 6574 4d73 6722 3a20        "retMsg": 
-0003bd40: 2253 7563 6365 7373 222c 0a20 2020 2020  "Success",.     
-0003bd50: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-0003bd60: 7375 6c74 223a 207b 0a20 2020 2020 2020  sult": {.       
-0003bd70: 2023 2020 2020 2020 2020 2022 6e65 7874   #         "next
-0003bd80: 5061 6765 4375 7273 6f72 223a 2022 3764  PageCursor": "7d
-0003bd90: 3137 6433 3539 2d34 6533 382d 3464 3361  17d359-4e38-4d3a
-0003bda0: 2d39 6133 312d 3239 3739 3165 6632 6466  -9a31-29791ef2df
-0003bdb0: 6437 2533 4131 3635 3737 3131 3934 3939  d7%3A16577119499
-0003bdc0: 3238 2532 4337 6431 3764 3335 392d 3465  28%2C7d17d359-4e
-0003bdd0: 3338 2d34 6433 612d 3961 3331 2d32 3937  38-4d3a-9a31-297
-0003bde0: 3931 6566 3264 6664 3725 3341 3136 3537  91ef2dfd7%3A1657
-0003bdf0: 3731 3139 3439 3932 3822 2c0a 2020 2020  711949928",.    
-0003be00: 2020 2020 2320 2020 2020 2020 2020 2263      #         "c
-0003be10: 6174 6567 6f72 7922 3a20 226c 696e 6561  ategory": "linea
-0003be20: 7222 2c0a 2020 2020 2020 2020 2320 2020  r",.        #   
-0003be30: 2020 2020 2020 226c 6973 7422 3a20 5b0a        "list": [.
-0003be40: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003be50: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
-0003be60: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0003be70: 2020 2273 796d 626f 6c22 3a20 2245 5448    "symbol": "ETH
-0003be80: 5553 4454 222c 0a20 2020 2020 2020 2023  USDT",.        #
-0003be90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003bea0: 2022 6f72 6465 7254 7970 6522 3a20 224d   "orderType": "M
-0003beb0: 6172 6b65 7422 2c0a 2020 2020 2020 2020  arket",.        
-0003bec0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0003bed0: 2020 226f 7264 6572 4c69 6e6b 4964 223a    "orderLinkId":
-0003bee0: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
-0003bef0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0003bf00: 6f72 6465 7249 6422 3a20 2237 6431 3764  orderId": "7d17d
-0003bf10: 3335 392d 3465 3338 2d34 6433 612d 3961  359-4e38-4d3a-9a
-0003bf20: 3331 2d32 3937 3931 6566 3264 6664 3722  31-29791ef2dfd7"
-0003bf30: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0003bf40: 2020 2020 2020 2020 2020 2020 2273 746f              "sto
-0003bf50: 704f 7264 6572 5479 7065 223a 2022 554e  pOrderType": "UN
-0003bf60: 4b4e 4f57 4e22 2c0a 2020 2020 2020 2020  KNOWN",.        
-0003bf70: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0003bf80: 2020 226f 7264 6572 5374 6174 7573 223a    "orderStatus":
-0003bf90: 2022 4669 6c6c 6564 222c 0a20 2020 2020   "Filled",.     
-0003bfa0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0003bfb0: 2020 2020 2022 7461 6b65 5072 6f66 6974       "takeProfit
-0003bfc0: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
-0003bfd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003bfe0: 2022 6375 6d45 7865 6356 616c 7565 223a   "cumExecValue":
-0003bff0: 2022 3533 362e 3932 3530 3030 3030 222c   "536.92500000",
-0003c000: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0003c010: 2020 2020 2020 2020 2020 2022 626c 6f63             "bloc
-0003c020: 6b54 7261 6465 4964 223a 2022 222c 0a20  kTradeId": "",. 
-0003c030: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003c040: 2020 2020 2020 2020 2022 7265 6a65 6374           "reject
-0003c050: 5265 6173 6f6e 223a 2022 4543 5f4e 6f45  Reason": "EC_NoE
-0003c060: 7272 6f72 222c 0a20 2020 2020 2020 2023  rror",.        #
-0003c070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c080: 2022 7072 6963 6522 3a20 2231 3132 372e   "price": "1127.
-0003c090: 3130 3030 3030 3030 222c 0a20 2020 2020  10000000",.     
-0003c0a0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0003c0b0: 2020 2020 2022 6372 6561 7465 6454 696d       "createdTim
-0003c0c0: 6522 3a20 3136 3537 3731 3139 3439 3932  e": 165771194992
-0003c0d0: 382c 0a20 2020 2020 2020 2023 2020 2020  8,.        #    
-0003c0e0: 2020 2020 2020 2020 2020 2020 2022 7470               "tp
-0003c0f0: 5472 6967 6765 7242 7922 3a20 2255 4e4b  TriggerBy": "UNK
-0003c100: 4e4f 574e 222c 0a20 2020 2020 2020 2023  NOWN",.        #
-0003c110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c120: 2022 7469 6d65 496e 466f 7263 6522 3a20   "timeInForce": 
-0003c130: 2249 6d6d 6564 6961 7465 4f72 4361 6e63  "ImmediateOrCanc
-0003c140: 656c 222c 0a20 2020 2020 2020 2023 2020  el",.        #  
-0003c150: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0003c160: 6261 7365 5072 6963 6522 3a20 2222 2c0a  basePrice": "",.
-0003c170: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003c180: 2020 2020 2020 2020 2020 226c 6561 7665            "leave
-0003c190: 7356 616c 7565 223a 2022 302e 3030 3030  sValue": "0.0000
-0003c1a0: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
-0003c1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c1c0: 2022 7570 6461 7465 6454 696d 6522 3a20   "updatedTime": 
-0003c1d0: 3136 3537 3731 3139 3439 3934 352c 0a20  1657711949945,. 
-0003c1e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003c1f0: 2020 2020 2020 2020 2022 7369 6465 223a           "side":
-0003c200: 2022 4275 7922 2c0a 2020 2020 2020 2020   "Buy",.        
-0003c210: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0003c220: 2020 2274 7269 6767 6572 5072 6963 6522    "triggerPrice"
-0003c230: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
-0003c240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c250: 2263 756d 4578 6563 4665 6522 3a20 2230  "cumExecFee": "0
-0003c260: 2e33 3232 3135 3530 3022 2c0a 2020 2020  .32215500",.    
-0003c270: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003c280: 2020 2020 2020 2273 6c54 7269 6767 6572        "slTrigger
-0003c290: 4279 223a 2022 554e 4b4e 4f57 4e22 2c0a  By": "UNKNOWN",.
-0003c2a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003c2b0: 2020 2020 2020 2020 2020 226c 6561 7665            "leave
-0003c2c0: 7351 7479 223a 2022 302e 3030 3030 222c  sQty": "0.0000",
-0003c2d0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0003c2e0: 2020 2020 2020 2020 2020 2022 636c 6f73             "clos
-0003c2f0: 654f 6e54 7269 6767 6572 223a 2046 616c  eOnTrigger": Fal
-0003c300: 7365 2c0a 2020 2020 2020 2020 2320 2020  se,.        #   
-0003c310: 2020 2020 2020 2020 2020 2020 2020 2263                "c
-0003c320: 756d 4578 6563 5174 7922 3a20 2230 2e35  umExecQty": "0.5
-0003c330: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
-0003c340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c350: 2272 6564 7563 654f 6e6c 7922 3a20 4661  "reduceOnly": Fa
-0003c360: 6c73 652c 0a20 2020 2020 2020 2023 2020  lse,.        #  
-0003c370: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0003c380: 7174 7922 3a20 2230 2e35 3030 3022 2c0a  qty": "0.5000",.
-0003c390: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003c3a0: 2020 2020 2020 2020 2020 2273 746f 704c            "stopL
-0003c3b0: 6f73 7322 3a20 2222 2c0a 2020 2020 2020  oss": "",.      
-0003c3c0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0003c3d0: 2020 2020 2274 7269 6767 6572 4279 223a      "triggerBy":
-0003c3e0: 2022 554e 4b4e 4f57 4e22 2c0a 2020 2020   "UNKNOWN",.    
-0003c3f0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003c400: 2020 2020 2020 226f 7264 6572 494d 223a        "orderIM":
-0003c410: 2022 220a 2020 2020 2020 2020 2320 2020   "".        #   
-0003c420: 2020 2020 2020 2020 2020 7d5d 0a20 2020            }].   
-0003c430: 2020 2020 2023 2020 2020 2020 2020 207d       #         }
-0003c440: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0003c450: 2020 2020 2274 696d 6522 3a20 3136 3537      "time": 1657
-0003c460: 3731 3334 3531 3734 310a 2020 2020 2020  713451741.      
-0003c470: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
-0003c480: 2020 230a 2020 2020 2020 2020 7265 7375    #.        resu
-0003c490: 6c74 203d 2073 656c 662e 7361 6665 5f76  lt = self.safe_v
-0003c4a0: 616c 7565 2872 6573 706f 6e73 652c 2027  alue(response, '
-0003c4b0: 7265 7375 6c74 272c 207b 7d29 0a20 2020  result', {}).   
-0003c4c0: 2020 2020 2064 6174 6120 3d20 7365 6c66       data = self
-0003c4d0: 2e73 6166 655f 7661 6c75 6528 7265 7375  .safe_value(resu
-0003c4e0: 6c74 2c20 276c 6973 7427 2c20 5b5d 290a  lt, 'list', []).
-0003c4f0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0003c500: 656c 662e 7061 7273 655f 6f72 6465 7273  elf.parse_orders
-0003c510: 2864 6174 612c 206d 6172 6b65 742c 2073  (data, market, s
-0003c520: 696e 6365 2c20 6c69 6d69 7429 0a0a 2020  ince, limit)..  
-0003c530: 2020 6173 796e 6320 6465 6620 6665 7463    async def fetc
-0003c540: 685f 6465 7269 7661 7469 7665 735f 6f72  h_derivatives_or
-0003c550: 6465 7273 2873 656c 662c 2073 796d 626f  ders(self, symbo
-0003c560: 6c3a 204f 7074 696f 6e61 6c5b 7374 725d  l: Optional[str]
-0003c570: 203d 204e 6f6e 652c 2073 696e 6365 3a20   = None, since: 
-0003c580: 4f70 7469 6f6e 616c 5b69 6e74 5d20 3d20  Optional[int] = 
-0003c590: 4e6f 6e65 2c20 6c69 6d69 743a 204f 7074  None, limit: Opt
-0003c5a0: 696f 6e61 6c5b 696e 745d 203d 204e 6f6e  ional[int] = Non
-0003c5b0: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
-0003c5c0: 2020 2020 2020 2061 7761 6974 2073 656c         await sel
-0003c5d0: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
-0003c5e0: 0a20 2020 2020 2020 206d 6172 6b65 7420  .        market 
-0003c5f0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2072  = None.        r
-0003c600: 6571 7565 7374 203d 207b 0a20 2020 2020  equest = {.     
-0003c610: 2020 2020 2020 2023 2027 7379 6d62 6f6c         # 'symbol
-0003c620: 273a 206d 6172 6b65 745b 2769 6427 5d2c  ': market['id'],
-0003c630: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
-0003c640: 6361 7465 676f 7279 272c 2054 7970 6520  category', Type 
-0003c650: 6f66 2064 6572 6976 6174 6976 6573 2070  of derivatives p
-0003c660: 726f 6475 6374 3a20 7370 6f74 2c20 6c69  roduct: spot, li
-0003c670: 6e65 6172 206f 7220 6f70 7469 6f6e 2e0a  near or option..
-0003c680: 2020 2020 2020 2020 2020 2020 2320 2762              # 'b
-0003c690: 6173 6543 6f69 6e27 2c20 4261 7365 2063  aseCoin', Base c
-0003c6a0: 6f69 6e2e 2057 6865 6e20 6361 7465 676f  oin. When catego
-0003c6b0: 7279 3d6f 7074 696f 6e2e 2049 6620 6e6f  ry=option. If no
-0003c6c0: 7420 7061 7373 6564 2c20 4254 4320 6279  t passed, BTC by
-0003c6d0: 2064 6566 6175 6c74 3b20 7768 656e 2063   default; when c
-0003c6e0: 6174 6567 6f72 793d 6c69 6e65 6172 2c20  ategory=linear, 
-0003c6f0: 6966 2042 5443 2070 6173 7365 642c 2042  if BTC passed, B
-0003c700: 5443 5045 5250 2026 2042 5443 5553 4454  TCPERP & BTCUSDT
-0003c710: 2072 6574 7572 6e65 642e 0a20 2020 2020   returned..     
-0003c720: 2020 2020 2020 2023 2027 6f72 6465 7249         # 'orderI
-0003c730: 6427 2c20 4f72 6465 7220 4944 0a20 2020  d', Order ID.   
-0003c740: 2020 2020 2020 2020 2023 2027 6f72 6465           # 'orde
-0003c750: 724c 696e 6b49 6427 2c20 556e 6971 7565  rLinkId', Unique
-0003c760: 2075 7365 722d 7365 7420 6f72 6465 7220   user-set order 
-0003c770: 4944 0a20 2020 2020 2020 2020 2020 2023  ID.            #
-0003c780: 2027 6f72 6465 7253 7461 7475 7327 2c20   'orderStatus', 
-0003c790: 2023 2052 6574 7572 6e20 616c 6c20 7374   # Return all st
-0003c7a0: 6174 7573 206f 7264 6572 7320 6966 206e  atus orders if n
-0003c7b0: 6f74 2070 6173 7365 640a 2020 2020 2020  ot passed.      
-0003c7c0: 2020 2020 2020 2320 276f 7264 6572 4669        # 'orderFi
-0003c7d0: 6c74 6572 272c 2043 6f6e 6469 7469 6f6e  lter', Condition
-0003c7e0: 616c 206f 7264 6572 206f 7220 6163 7469  al order or acti
-0003c7f0: 7665 206f 7264 6572 0a20 2020 2020 2020  ve order.       
-0003c800: 2020 2020 2023 2027 6c69 6d69 7427 3a20       # 'limit': 
-0003c810: 6e75 6d62 6572 2c20 4461 7461 2071 7561  number, Data qua
-0003c820: 6e74 6974 7920 7065 7220 7061 6765 3a20  ntity per page: 
-0003c830: 4d61 7820 6461 7461 2076 616c 7565 2070  Max data value p
-0003c840: 6572 2070 6167 6520 6973 2035 302c 2061  er page is 50, a
-0003c850: 6e64 2064 6566 6175 6c74 2076 616c 7565  nd default value
-0003c860: 2061 7420 3230 2e0a 2020 2020 2020 2020   at 20..        
-0003c870: 2020 2020 2320 2763 7572 736f 7227 2c20      # 'cursor', 
-0003c880: 4150 4920 7061 7373 2d74 6872 6f75 6768  API pass-through
-0003c890: 2e20 6163 636f 756e 7454 7970 6520 2b20  . accountType + 
-0003c8a0: 6361 7465 676f 7279 202b 2063 7572 736f  category + curso
-0003c8b0: 7220 2b2e 2049 6620 696e 636f 6e73 6973  r +. If inconsis
-0003c8c0: 7465 6e74 2c20 7468 6520 666f 6c6c 6f77  tent, the follow
-0003c8d0: 696e 6720 7368 6f75 6c64 2062 6520 7265  ing should be re
-0003c8e0: 7475 726e 6564 3a20 5468 6520 6163 636f  turned: The acco
-0003c8f0: 756e 7420 7479 7065 2064 6f65 7320 6e6f  unt type does no
-0003c900: 7420 6d61 7463 6820 7468 6520 7365 7276  t match the serv
-0003c910: 6963 6520 696e 7175 6972 792e 0a20 2020  ice inquiry..   
-0003c920: 2020 2020 207d 0a20 2020 2020 2020 2069       }.        i
-0003c930: 6620 7379 6d62 6f6c 2069 7320 4e6f 6e65  f symbol is None
-0003c940: 3a0a 2020 2020 2020 2020 2020 2020 7479  :.            ty
-0003c950: 7065 203d 204e 6f6e 650a 2020 2020 2020  pe = None.      
-0003c960: 2020 2020 2020 7479 7065 2c20 7061 7261        type, para
-0003c970: 6d73 203d 2073 656c 662e 6861 6e64 6c65  ms = self.handle
-0003c980: 5f6d 6172 6b65 745f 7479 7065 5f61 6e64  _market_type_and
-0003c990: 5f70 6172 616d 7328 2766 6574 6368 4f72  _params('fetchOr
-0003c9a0: 6465 7273 272c 206d 6172 6b65 742c 2070  ders', market, p
-0003c9b0: 6172 616d 7329 0a20 2020 2020 2020 2020  arams).         
-0003c9c0: 2020 2072 6571 7565 7374 5b27 6361 7465     request['cate
-0003c9d0: 676f 7279 275d 203d 2074 7970 650a 2020  gory'] = type.  
-0003c9e0: 2020 2020 2020 2020 2020 6966 2074 7970            if typ
-0003c9f0: 6520 3d3d 2027 7377 6170 273a 0a20 2020  e == 'swap':.   
-0003ca00: 2020 2020 2020 2020 2020 2020 2073 7562               sub
-0003ca10: 5479 7065 203d 204e 6f6e 650a 2020 2020  Type = None.    
-0003ca20: 2020 2020 2020 2020 2020 2020 7375 6254              subT
-0003ca30: 7970 652c 2070 6172 616d 7320 3d20 7365  ype, params = se
-0003ca40: 6c66 2e68 616e 646c 655f 7375 625f 7479  lf.handle_sub_ty
-0003ca50: 7065 5f61 6e64 5f70 6172 616d 7328 2766  pe_and_params('f
-0003ca60: 6574 6368 4f72 6465 7273 272c 206d 6172  etchOrders', mar
-0003ca70: 6b65 742c 2070 6172 616d 732c 2027 6c69  ket, params, 'li
-0003ca80: 6e65 6172 2729 0a20 2020 2020 2020 2020  near').         
-0003ca90: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-0003caa0: 6361 7465 676f 7279 275d 203d 2073 7562  category'] = sub
-0003cab0: 5479 7065 0a20 2020 2020 2020 2065 6c73  Type.        els
-0003cac0: 653a 0a20 2020 2020 2020 2020 2020 206d  e:.            m
-0003cad0: 6172 6b65 7420 3d20 7365 6c66 2e6d 6172  arket = self.mar
-0003cae0: 6b65 7428 7379 6d62 6f6c 290a 2020 2020  ket(symbol).    
-0003caf0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0003cb00: 2773 796d 626f 6c27 5d20 3d20 6d61 726b  'symbol'] = mark
-0003cb10: 6574 5b27 6964 275d 0a20 2020 2020 2020  et['id'].       
-0003cb20: 2020 2020 2069 6620 6d61 726b 6574 5b27       if market['
-0003cb30: 6c69 6e65 6172 275d 3a0a 2020 2020 2020  linear']:.      
-0003cb40: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-0003cb50: 745b 2763 6174 6567 6f72 7927 5d20 3d20  t['category'] = 
-0003cb60: 276c 696e 6561 7227 0a20 2020 2020 2020  'linear'.       
-0003cb70: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0003cb80: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-0003cb90: 7374 5b27 6361 7465 676f 7279 275d 203d  st['category'] =
-0003cba0: 2027 696e 7665 7273 6527 0a20 2020 2020   'inverse'.     
-0003cbb0: 2020 2069 7353 746f 7020 3d20 7365 6c66     isStop = self
-0003cbc0: 2e73 6166 655f 7661 6c75 6528 7061 7261  .safe_value(para
-0003cbd0: 6d73 2c20 2773 746f 7027 2c20 4661 6c73  ms, 'stop', Fals
-0003cbe0: 6529 0a20 2020 2020 2020 2070 6172 616d  e).        param
-0003cbf0: 7320 3d20 7365 6c66 2e6f 6d69 7428 7061  s = self.omit(pa
-0003cc00: 7261 6d73 2c20 5b27 7374 6f70 275d 290a  rams, ['stop']).
-0003cc10: 2020 2020 2020 2020 6966 2069 7353 746f          if isSto
-0003cc20: 703a 0a20 2020 2020 2020 2020 2020 2072  p:.            r
-0003cc30: 6571 7565 7374 5b27 6f72 6465 7246 696c  equest['orderFil
-0003cc40: 7465 7227 5d20 3d20 2753 746f 704f 7264  ter'] = 'StopOrd
-0003cc50: 6572 270a 2020 2020 2020 2020 6966 206c  er'.        if l
-0003cc60: 696d 6974 2069 7320 6e6f 7420 4e6f 6e65  imit is not None
-0003cc70: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0003cc80: 7175 6573 745b 276c 696d 6974 275d 203d  quest['limit'] =
-0003cc90: 206c 696d 6974 0a20 2020 2020 2020 2072   limit.        r
-0003cca0: 6573 706f 6e73 6520 3d20 6177 6169 7420  esponse = await 
-0003ccb0: 7365 6c66 2e70 7269 7661 7465 4765 7456  self.privateGetV
-0003ccc0: 354f 7264 6572 4869 7374 6f72 7928 7365  5OrderHistory(se
-0003ccd0: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
-0003cce0: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
-0003ccf0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-0003cd00: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-0003cd10: 2020 2020 2020 2020 2272 6574 436f 6465          "retCode
-0003cd20: 223a 2030 2c0a 2020 2020 2020 2020 2320  ": 0,.        # 
-0003cd30: 2020 2020 2020 2020 2272 6574 4d73 6722          "retMsg"
-0003cd40: 3a20 224f 4b22 2c0a 2020 2020 2020 2020  : "OK",.        
-0003cd50: 2320 2020 2020 2020 2020 2272 6573 756c  #         "resul
-0003cd60: 7422 3a20 7b0a 2020 2020 2020 2020 2320  t": {.        # 
-0003cd70: 2020 2020 2020 2020 2020 2020 226e 6578              "nex
-0003cd80: 7450 6167 6543 7572 736f 7222 3a20 2230  tPageCursor": "0
-0003cd90: 3332 3334 6465 392d 3133 3332 2d34 3165  3234de9-1332-41e
-0003cda0: 622d 6238 3035 2d34 6139 6634 3263 3133  b-b805-4a9f42c13
-0003cdb0: 3661 3325 3341 3136 3732 3232 3031 3039  6a3%3A1672220109
-0003cdc0: 3338 3725 3243 3033 3233 3464 6539 2d31  387%2C03234de9-1
-0003cdd0: 3333 322d 3431 6562 2d62 3830 352d 3461  332-41eb-b805-4a
-0003cde0: 3966 3432 6331 3336 6133 2533 4131 3637  9f42c136a3%3A167
-0003cdf0: 3232 3230 3130 3933 3837 222c 0a20 2020  2220109387",.   
-0003ce00: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0003ce10: 2020 2022 6361 7465 676f 7279 223a 2022     "category": "
-0003ce20: 6c69 6e65 6172 222c 0a20 2020 2020 2020  linear",.       
-0003ce30: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-0003ce40: 6c69 7374 223a 205b 0a20 2020 2020 2020  list": [.       
-0003ce50: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0003ce60: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-0003ce70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003ce80: 2020 2022 7379 6d62 6f6c 223a 2022 4254     "symbol": "BT
-0003ce90: 4355 5344 5422 2c0a 2020 2020 2020 2020  CUSDT",.        
-0003cea0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0003ceb0: 2020 2020 2020 226f 7264 6572 5479 7065        "orderType
-0003cec0: 223a 2022 4c69 6d69 7422 2c0a 2020 2020  ": "Limit",.    
-0003ced0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003cee0: 2020 2020 2020 2020 2020 226f 7264 6572            "order
-0003cef0: 4c69 6e6b 4964 223a 2022 7465 7374 2d30  LinkId": "test-0
-0003cf00: 3031 222c 0a20 2020 2020 2020 2023 2020  01",.        #  
-0003cf10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003cf20: 2020 2022 6f72 6465 7249 6422 3a20 2230     "orderId": "0
-0003cf30: 3332 3334 6465 392d 3133 3332 2d34 3165  3234de9-1332-41e
-0003cf40: 622d 6238 3035 2d34 6139 6634 3263 3133  b-b805-4a9f42c13
-0003cf50: 3661 3322 2c0a 2020 2020 2020 2020 2320  6a3",.        # 
-0003cf60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003cf70: 2020 2020 2263 616e 6365 6c54 7970 6522      "cancelType"
-0003cf80: 3a20 2243 616e 6365 6c42 7955 7365 7222  : "CancelByUser"
-0003cf90: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0003cfa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003cfb0: 2261 7667 5072 6963 6522 3a20 2230 222c  "avgPrice": "0",
-0003cfc0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0003cfd0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0003cfe0: 7374 6f70 4f72 6465 7254 7970 6522 3a20  stopOrderType": 
-0003cff0: 2255 4e4b 4e4f 574e 222c 0a20 2020 2020  "UNKNOWN",.     
-0003d000: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0003d010: 2020 2020 2020 2020 2022 6c61 7374 5072           "lastPr
-0003d020: 6963 654f 6e43 7265 6174 6564 223a 2022  iceOnCreated": "
-0003d030: 3136 3635 362e 3522 2c0a 2020 2020 2020  16656.5",.      
-0003d040: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0003d050: 2020 2020 2020 2020 226f 7264 6572 5374          "orderSt
-0003d060: 6174 7573 223a 2022 4361 6e63 656c 6c65  atus": "Cancelle
-0003d070: 6422 2c0a 2020 2020 2020 2020 2320 2020  d",.        #   
-0003d080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d090: 2020 2274 616b 6550 726f 6669 7422 3a20    "takeProfit": 
-0003d0a0: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
-0003d0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d0c0: 2020 2263 756d 4578 6563 5661 6c75 6522    "cumExecValue"
-0003d0d0: 3a20 2230 222c 0a20 2020 2020 2020 2023  : "0",.        #
-0003d0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d0f0: 2020 2020 2022 7472 6967 6765 7244 6972       "triggerDir
-0003d100: 6563 7469 6f6e 223a 2030 2c0a 2020 2020  ection": 0,.    
-0003d110: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003d120: 2020 2020 2020 2020 2020 2262 6c6f 636b            "block
-0003d130: 5472 6164 6549 6422 3a20 2222 2c0a 2020  TradeId": "",.  
-0003d140: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003d150: 2020 2020 2020 2020 2020 2020 2272 656a              "rej
-0003d160: 6563 7452 6561 736f 6e22 3a20 2245 435f  ectReason": "EC_
-0003d170: 5065 7243 616e 6365 6c52 6571 7565 7374  PerCancelRequest
-0003d180: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0003d190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d1a0: 2022 6973 4c65 7665 7261 6765 223a 2022   "isLeverage": "
-0003d1b0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0003d1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d1d0: 2022 7072 6963 6522 3a20 2231 3830 3030   "price": "18000
-0003d1e0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0003d1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d200: 2022 6f72 6465 7249 7622 3a20 2222 2c0a   "orderIv": "",.
-0003d210: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003d220: 2020 2020 2020 2020 2020 2020 2020 2263                "c
-0003d230: 7265 6174 6564 5469 6d65 223a 2022 3136  reatedTime": "16
-0003d240: 3732 3232 3031 3039 3338 3722 2c0a 2020  72220109387",.  
-0003d250: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003d260: 2020 2020 2020 2020 2020 2020 2274 7054              "tpT
-0003d270: 7269 6767 6572 4279 223a 2022 554e 4b4e  riggerBy": "UNKN
-0003d280: 4f57 4e22 2c0a 2020 2020 2020 2020 2320  OWN",.        # 
-0003d290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d2a0: 2020 2020 2270 6f73 6974 696f 6e49 6478      "positionIdx
-0003d2b0: 223a 2030 2c0a 2020 2020 2020 2020 2320  ": 0,.        # 
-0003d2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d2d0: 2020 2020 2274 696d 6549 6e46 6f72 6365      "timeInForce
-0003d2e0: 223a 2022 476f 6f64 5469 6c6c 4361 6e63  ": "GoodTillCanc
-0003d2f0: 656c 222c 0a20 2020 2020 2020 2023 2020  el",.        #  
-0003d300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d310: 2020 2022 6c65 6176 6573 5661 6c75 6522     "leavesValue"
-0003d320: 3a20 2230 222c 0a20 2020 2020 2020 2023  : "0",.        #
+00028940: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
+00028950: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00028960: 2022 6f72 6465 7249 6422 3a22 3062 3334   "orderId":"0b34
+00028970: 3939 6134 2d39 3639 312d 3430 6563 2d62  99a4-9691-40ec-b
+00028980: 3262 392d 3764 3934 6565 3031 3635 6666  2b9-7d94ee0165ff
+00028990: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+000289a0: 2020 2020 2022 6f72 6465 724c 696e 6b49       "orderLinkI
+000289b0: 6422 3a22 222c 0a20 2020 2020 2020 2023  d":"",.        #
+000289c0: 2020 2020 2020 2020 2022 6d6d 7022 3a66           "mmp":f
+000289d0: 616c 7365 2c0a 2020 2020 2020 2020 2320  alse,.        # 
+000289e0: 2020 2020 2020 2020 2273 796d 626f 6c22          "symbol"
+000289f0: 3a22 534f 4c50 4552 5022 2c0a 2020 2020  :"SOLPERP",.    
+00028a00: 2020 2020 2320 2020 2020 2020 2020 226f      #         "o
+00028a10: 7264 6572 5479 7065 223a 224d 6172 6b65  rderType":"Marke
+00028a20: 7422 2c0a 2020 2020 2020 2020 2320 2020  t",.        #   
+00028a30: 2020 2020 2020 2273 6964 6522 3a22 4275        "side":"Bu
+00028a40: 7922 2c0a 2020 2020 2020 2020 2320 2020  y",.        #   
+00028a50: 2020 2020 2020 226f 7264 6572 5174 7922        "orderQty"
+00028a60: 3a22 302e 3130 3030 3030 3030 222c 0a20  :"0.10000000",. 
+00028a70: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00028a80: 2022 6f72 6465 7250 7269 6365 223a 2232   "orderPrice":"2
+00028a90: 332e 3033 3022 2c0a 2020 2020 2020 2020  3.030",.        
+00028aa0: 2320 2020 2020 2020 2020 2269 7622 3a22  #         "iv":"
+00028ab0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00028ac0: 2020 2020 2020 2274 696d 6549 6e46 6f72        "timeInFor
+00028ad0: 6365 223a 2249 6d6d 6564 6961 7465 4f72  ce":"ImmediateOr
+00028ae0: 4361 6e63 656c 222c 0a20 2020 2020 2020  Cancel",.       
+00028af0: 2023 2020 2020 2020 2020 2022 6f72 6465   #         "orde
+00028b00: 7253 7461 7475 7322 3a22 4372 6561 7465  rStatus":"Create
+00028b10: 6422 2c0a 2020 2020 2020 2020 2320 2020  d",.        #   
+00028b20: 2020 2020 2020 2263 7265 6174 6564 4174        "createdAt
+00028b30: 223a 2231 3638 3333 3830 3735 3231 3436  ":"1683380752146
+00028b40: 3536 3822 2c0a 2020 2020 2020 2020 2320  568",.        # 
+00028b50: 2020 2020 2020 2020 2262 6173 6550 7269          "basePri
+00028b60: 6365 223a 2230 2e30 3030 222c 0a20 2020  ce":"0.000",.   
+00028b70: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00028b80: 7472 6967 6765 7250 7269 6365 223a 2230  triggerPrice":"0
+00028b90: 2e30 3030 222c 0a20 2020 2020 2020 2023  .000",.        #
+00028ba0: 2020 2020 2020 2020 2022 7461 6b65 5072           "takePr
+00028bb0: 6f66 6974 223a 2230 2e30 3030 222c 0a20  ofit":"0.000",. 
+00028bc0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00028bd0: 2022 7374 6f70 4c6f 7373 223a 2230 2e30   "stopLoss":"0.0
+00028be0: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+00028bf0: 2020 2020 2020 2022 736c 5472 6967 6765         "slTrigge
+00028c00: 7242 7922 3a22 554e 4b4e 4f57 4e22 2c0a  rBy":"UNKNOWN",.
+00028c10: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00028c20: 2020 2274 7054 7269 6767 6572 4279 223a    "tpTriggerBy":
+00028c30: 2255 4e4b 4e4f 574e 220a 2020 2020 2020  "UNKNOWN".      
+00028c40: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
+00028c50: 2020 230a 2020 2020 2020 2020 6d61 726b    #.        mark
+00028c60: 6574 4964 203d 2073 656c 662e 7361 6665  etId = self.safe
+00028c70: 5f73 7472 696e 6728 6f72 6465 722c 2027  _string(order, '
+00028c80: 7379 6d62 6f6c 2729 0a20 2020 2020 2020  symbol').       
+00028c90: 206d 6172 6b65 7454 7970 6520 3d20 2763   marketType = 'c
+00028ca0: 6f6e 7472 6163 7427 0a20 2020 2020 2020  ontract'.       
+00028cb0: 2069 6620 6d61 726b 6574 2069 7320 6e6f   if market is no
+00028cc0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00028cd0: 2020 2020 6d61 726b 6574 5479 7065 203d      marketType =
+00028ce0: 206d 6172 6b65 745b 2774 7970 6527 5d0a   market['type'].
+00028cf0: 2020 2020 2020 2020 6361 7465 676f 7279          category
+00028d00: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+00028d10: 696e 6728 6f72 6465 722c 2027 6361 7465  ing(order, 'cate
+00028d20: 676f 7279 2729 0a20 2020 2020 2020 2069  gory').        i
+00028d30: 6620 6361 7465 676f 7279 2069 7320 6e6f  f category is no
+00028d40: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00028d50: 2020 2020 6966 2063 6174 6567 6f72 7920      if category 
+00028d60: 3d3d 2027 7370 6f74 273a 0a20 2020 2020  == 'spot':.     
+00028d70: 2020 2020 2020 2020 2020 206d 6172 6b65             marke
+00028d80: 7454 7970 6520 3d20 2773 706f 7427 0a20  tType = 'spot'. 
+00028d90: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
+00028da0: 7365 6c66 2e73 6166 655f 6d61 726b 6574  self.safe_market
+00028db0: 286d 6172 6b65 7449 642c 206d 6172 6b65  (marketId, marke
+00028dc0: 742c 204e 6f6e 652c 206d 6172 6b65 7454  t, None, marketT
+00028dd0: 7970 6529 0a20 2020 2020 2020 2073 796d  ype).        sym
+00028de0: 626f 6c20 3d20 6d61 726b 6574 5b27 7379  bol = market['sy
+00028df0: 6d62 6f6c 275d 0a20 2020 2020 2020 2074  mbol'].        t
+00028e00: 696d 6573 7461 6d70 203d 204e 6f6e 650a  imestamp = None.
+00028e10: 2020 2020 2020 2020 6966 2027 6372 6561          if 'crea
+00028e20: 7465 6454 696d 6527 2069 6e20 6f72 6465  tedTime' in orde
+00028e30: 723a 0a20 2020 2020 2020 2020 2020 2074  r:.            t
+00028e40: 696d 6573 7461 6d70 203d 2073 656c 662e  imestamp = self.
+00028e50: 7361 6665 5f69 6e74 6567 6572 286f 7264  safe_integer(ord
+00028e60: 6572 2c20 2763 7265 6174 6564 5469 6d65  er, 'createdTime
+00028e70: 2729 0a20 2020 2020 2020 2065 6c69 6620  ').        elif 
+00028e80: 2763 7265 6174 6564 4174 2720 696e 206f  'createdAt' in o
+00028e90: 7264 6572 3a0a 2020 2020 2020 2020 2020  rder:.          
+00028ea0: 2020 7469 6d65 7374 616d 7020 3d20 7365    timestamp = se
+00028eb0: 6c66 2e73 6166 655f 696e 7465 6765 725f  lf.safe_integer_
+00028ec0: 7072 6f64 7563 7428 6f72 6465 722c 2027  product(order, '
+00028ed0: 6372 6561 7465 6441 7427 2c20 302e 3030  createdAt', 0.00
+00028ee0: 3129 0a20 2020 2020 2020 2069 6420 3d20  1).        id = 
+00028ef0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+00028f00: 286f 7264 6572 2c20 276f 7264 6572 4964  (order, 'orderId
+00028f10: 2729 0a20 2020 2020 2020 2074 7970 6520  ').        type 
+00028f20: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+00028f30: 6e67 5f6c 6f77 6572 286f 7264 6572 2c20  ng_lower(order, 
+00028f40: 276f 7264 6572 5479 7065 2729 0a20 2020  'orderType').   
+00028f50: 2020 2020 2070 7269 6365 203d 2073 656c       price = sel
+00028f60: 662e 7361 6665 5f73 7472 696e 675f 3228  f.safe_string_2(
+00028f70: 6f72 6465 722c 2027 7072 6963 6527 2c20  order, 'price', 
+00028f80: 276f 7264 6572 5072 6963 6527 290a 2020  'orderPrice').  
+00028f90: 2020 2020 2020 616d 6f75 6e74 203d 2073        amount = s
+00028fa0: 656c 662e 7361 6665 5f73 7472 696e 675f  elf.safe_string_
+00028fb0: 3228 6f72 6465 722c 2027 7174 7927 2c20  2(order, 'qty', 
+00028fc0: 276f 7264 6572 5174 7927 290a 2020 2020  'orderQty').    
+00028fd0: 2020 2020 636f 7374 203d 2073 656c 662e      cost = self.
+00028fe0: 7361 6665 5f73 7472 696e 6728 6f72 6465  safe_string(orde
+00028ff0: 722c 2027 6375 6d45 7865 6356 616c 7565  r, 'cumExecValue
+00029000: 2729 0a20 2020 2020 2020 2066 696c 6c65  ').        fille
+00029010: 6420 3d20 7365 6c66 2e73 6166 655f 7374  d = self.safe_st
+00029020: 7269 6e67 286f 7264 6572 2c20 2763 756d  ring(order, 'cum
+00029030: 4578 6563 5174 7927 290a 2020 2020 2020  ExecQty').      
+00029040: 2020 7265 6d61 696e 696e 6720 3d20 7365    remaining = se
+00029050: 6c66 2e73 6166 655f 7374 7269 6e67 286f  lf.safe_string(o
+00029060: 7264 6572 2c20 276c 6561 7665 7351 7479  rder, 'leavesQty
+00029070: 2729 0a20 2020 2020 2020 206c 6173 7454  ').        lastT
+00029080: 7261 6465 5469 6d65 7374 616d 7020 3d20  radeTimestamp = 
+00029090: 7365 6c66 2e73 6166 655f 696e 7465 6765  self.safe_intege
+000290a0: 7228 6f72 6465 722c 2027 7570 6461 7465  r(order, 'update
+000290b0: 6454 696d 6527 290a 2020 2020 2020 2020  dTime').        
+000290c0: 7261 7753 7461 7475 7320 3d20 7365 6c66  rawStatus = self
+000290d0: 2e73 6166 655f 7374 7269 6e67 286f 7264  .safe_string(ord
+000290e0: 6572 2c20 276f 7264 6572 5374 6174 7573  er, 'orderStatus
+000290f0: 2729 0a20 2020 2020 2020 2073 7461 7475  ').        statu
+00029100: 7320 3d20 7365 6c66 2e70 6172 7365 5f6f  s = self.parse_o
+00029110: 7264 6572 5f73 7461 7475 7328 7261 7753  rder_status(rawS
+00029120: 7461 7475 7329 0a20 2020 2020 2020 2073  tatus).        s
+00029130: 6964 6520 3d20 7365 6c66 2e73 6166 655f  ide = self.safe_
+00029140: 7374 7269 6e67 5f6c 6f77 6572 286f 7264  string_lower(ord
+00029150: 6572 2c20 2773 6964 6527 290a 2020 2020  er, 'side').    
+00029160: 2020 2020 6665 6520 3d20 4e6f 6e65 0a20      fee = None. 
+00029170: 2020 2020 2020 2066 6565 436f 7374 5374         feeCostSt
+00029180: 7269 6e67 203d 2073 656c 662e 7361 6665  ring = self.safe
+00029190: 5f73 7472 696e 6728 6f72 6465 722c 2027  _string(order, '
+000291a0: 6375 6d45 7865 6346 6565 2729 0a20 2020  cumExecFee').   
+000291b0: 2020 2020 2069 6620 6665 6543 6f73 7453       if feeCostS
+000291c0: 7472 696e 6720 6973 206e 6f74 204e 6f6e  tring is not Non
+000291d0: 653a 0a20 2020 2020 2020 2020 2020 2066  e:.            f
+000291e0: 6565 203d 207b 0a20 2020 2020 2020 2020  ee = {.         
+000291f0: 2020 2020 2020 2027 636f 7374 273a 2066         'cost': f
+00029200: 6565 436f 7374 5374 7269 6e67 2c0a 2020  eeCostString,.  
+00029210: 2020 2020 2020 2020 2020 2020 2020 2763                'c
+00029220: 7572 7265 6e63 7927 3a20 6d61 726b 6574  urrency': market
+00029230: 5b27 7365 7474 6c65 275d 2c0a 2020 2020  ['settle'],.    
+00029240: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00029250: 2020 636c 6965 6e74 4f72 6465 7249 6420    clientOrderId 
+00029260: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+00029270: 6e67 286f 7264 6572 2c20 276f 7264 6572  ng(order, 'order
+00029280: 4c69 6e6b 4964 2729 0a20 2020 2020 2020  LinkId').       
+00029290: 2069 6620 2863 6c69 656e 744f 7264 6572   if (clientOrder
+000292a0: 4964 2069 7320 6e6f 7420 4e6f 6e65 2920  Id is not None) 
+000292b0: 616e 6420 286c 656e 2863 6c69 656e 744f  and (len(clientO
+000292c0: 7264 6572 4964 2920 3c20 3129 3a0a 2020  rderId) < 1):.  
+000292d0: 2020 2020 2020 2020 2020 636c 6965 6e74            client
+000292e0: 4f72 6465 7249 6420 3d20 4e6f 6e65 0a20  OrderId = None. 
+000292f0: 2020 2020 2020 2072 6177 5469 6d65 496e         rawTimeIn
+00029300: 466f 7263 6520 3d20 7365 6c66 2e73 6166  Force = self.saf
+00029310: 655f 7374 7269 6e67 286f 7264 6572 2c20  e_string(order, 
+00029320: 2774 696d 6549 6e46 6f72 6365 2729 0a20  'timeInForce'). 
+00029330: 2020 2020 2020 2074 696d 6549 6e46 6f72         timeInFor
+00029340: 6365 203d 2073 656c 662e 7061 7273 655f  ce = self.parse_
+00029350: 7469 6d65 5f69 6e5f 666f 7263 6528 7261  time_in_force(ra
+00029360: 7754 696d 6549 6e46 6f72 6365 290a 2020  wTimeInForce).  
+00029370: 2020 2020 2020 7374 6f70 5072 6963 6520        stopPrice 
+00029380: 3d20 7365 6c66 2e6f 6d69 745f 7a65 726f  = self.omit_zero
+00029390: 2873 656c 662e 7361 6665 5f73 7472 696e  (self.safe_strin
+000293a0: 6728 6f72 6465 722c 2027 7472 6967 6765  g(order, 'trigge
+000293b0: 7250 7269 6365 2729 290a 2020 2020 2020  rPrice')).      
+000293c0: 2020 7461 6b65 5072 6f66 6974 5072 6963    takeProfitPric
+000293d0: 6520 3d20 7365 6c66 2e6f 6d69 745f 7a65  e = self.omit_ze
+000293e0: 726f 2873 656c 662e 7361 6665 5f73 7472  ro(self.safe_str
+000293f0: 696e 6728 6f72 6465 722c 2027 7461 6b65  ing(order, 'take
+00029400: 5072 6f66 6974 2729 290a 2020 2020 2020  Profit')).      
+00029410: 2020 7374 6f70 4c6f 7373 5072 6963 6520    stopLossPrice 
+00029420: 3d20 7365 6c66 2e6f 6d69 745f 7a65 726f  = self.omit_zero
+00029430: 2873 656c 662e 7361 6665 5f73 7472 696e  (self.safe_strin
+00029440: 6728 6f72 6465 722c 2027 7374 6f70 4c6f  g(order, 'stopLo
+00029450: 7373 2729 290a 2020 2020 2020 2020 7265  ss')).        re
+00029460: 7475 726e 2073 656c 662e 7361 6665 5f6f  turn self.safe_o
+00029470: 7264 6572 287b 0a20 2020 2020 2020 2020  rder({.         
+00029480: 2020 2027 696e 666f 273a 206f 7264 6572     'info': order
+00029490: 2c0a 2020 2020 2020 2020 2020 2020 2769  ,.            'i
+000294a0: 6427 3a20 6964 2c0a 2020 2020 2020 2020  d': id,.        
+000294b0: 2020 2020 2763 6c69 656e 744f 7264 6572      'clientOrder
+000294c0: 4964 273a 2063 6c69 656e 744f 7264 6572  Id': clientOrder
+000294d0: 4964 2c0a 2020 2020 2020 2020 2020 2020  Id,.            
+000294e0: 2774 696d 6573 7461 6d70 273a 2074 696d  'timestamp': tim
+000294f0: 6573 7461 6d70 2c0a 2020 2020 2020 2020  estamp,.        
+00029500: 2020 2020 2764 6174 6574 696d 6527 3a20      'datetime': 
+00029510: 7365 6c66 2e69 736f 3836 3031 2874 696d  self.iso8601(tim
+00029520: 6573 7461 6d70 292c 0a20 2020 2020 2020  estamp),.       
+00029530: 2020 2020 2027 6c61 7374 5472 6164 6554       'lastTradeT
+00029540: 696d 6573 7461 6d70 273a 206c 6173 7454  imestamp': lastT
+00029550: 7261 6465 5469 6d65 7374 616d 702c 0a20  radeTimestamp,. 
+00029560: 2020 2020 2020 2020 2020 2027 7379 6d62             'symb
+00029570: 6f6c 273a 2073 796d 626f 6c2c 0a20 2020  ol': symbol,.   
+00029580: 2020 2020 2020 2020 2027 7479 7065 273a           'type':
+00029590: 2074 7970 652c 0a20 2020 2020 2020 2020   type,.         
+000295a0: 2020 2027 7469 6d65 496e 466f 7263 6527     'timeInForce'
+000295b0: 3a20 7469 6d65 496e 466f 7263 652c 0a20  : timeInForce,. 
+000295c0: 2020 2020 2020 2020 2020 2027 706f 7374             'post
+000295d0: 4f6e 6c79 273a 204e 6f6e 652c 0a20 2020  Only': None,.   
+000295e0: 2020 2020 2020 2020 2027 7265 6475 6365           'reduce
+000295f0: 4f6e 6c79 273a 2073 656c 662e 7361 6665  Only': self.safe
+00029600: 5f76 616c 7565 286f 7264 6572 2c20 2772  _value(order, 'r
+00029610: 6564 7563 654f 6e6c 7927 292c 0a20 2020  educeOnly'),.   
+00029620: 2020 2020 2020 2020 2027 7369 6465 273a           'side':
+00029630: 2073 6964 652c 0a20 2020 2020 2020 2020   side,.         
+00029640: 2020 2027 7072 6963 6527 3a20 7072 6963     'price': pric
+00029650: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
+00029660: 7374 6f70 5072 6963 6527 3a20 7374 6f70  stopPrice': stop
+00029670: 5072 6963 652c 0a20 2020 2020 2020 2020  Price,.         
+00029680: 2020 2027 7472 6967 6765 7250 7269 6365     'triggerPrice
+00029690: 273a 2073 746f 7050 7269 6365 2c0a 2020  ': stopPrice,.  
+000296a0: 2020 2020 2020 2020 2020 2774 616b 6550            'takeP
+000296b0: 726f 6669 7450 7269 6365 273a 2074 616b  rofitPrice': tak
+000296c0: 6550 726f 6669 7450 7269 6365 2c0a 2020  eProfitPrice,.  
+000296d0: 2020 2020 2020 2020 2020 2773 746f 704c            'stopL
+000296e0: 6f73 7350 7269 6365 273a 2073 746f 704c  ossPrice': stopL
+000296f0: 6f73 7350 7269 6365 2c0a 2020 2020 2020  ossPrice,.      
+00029700: 2020 2020 2020 2761 6d6f 756e 7427 3a20        'amount': 
+00029710: 616d 6f75 6e74 2c0a 2020 2020 2020 2020  amount,.        
+00029720: 2020 2020 2763 6f73 7427 3a20 636f 7374      'cost': cost
+00029730: 2c0a 2020 2020 2020 2020 2020 2020 2761  ,.            'a
+00029740: 7665 7261 6765 273a 204e 6f6e 652c 0a20  verage': None,. 
+00029750: 2020 2020 2020 2020 2020 2027 6669 6c6c             'fill
+00029760: 6564 273a 2066 696c 6c65 642c 0a20 2020  ed': filled,.   
+00029770: 2020 2020 2020 2020 2027 7265 6d61 696e           'remain
+00029780: 696e 6727 3a20 7265 6d61 696e 696e 672c  ing': remaining,
+00029790: 0a20 2020 2020 2020 2020 2020 2027 7374  .            'st
+000297a0: 6174 7573 273a 2073 7461 7475 732c 0a20  atus': status,. 
+000297b0: 2020 2020 2020 2020 2020 2027 6665 6527             'fee'
+000297c0: 3a20 6665 652c 0a20 2020 2020 2020 2020  : fee,.         
+000297d0: 2020 2027 7472 6164 6573 273a 204e 6f6e     'trades': Non
+000297e0: 652c 0a20 2020 2020 2020 207d 2c20 6d61  e,.        }, ma
+000297f0: 726b 6574 290a 0a20 2020 2064 6566 2070  rket)..    def p
+00029800: 6172 7365 5f73 706f 745f 6f72 6465 7228  arse_spot_order(
+00029810: 7365 6c66 2c20 6f72 6465 722c 206d 6172  self, order, mar
+00029820: 6b65 743d 4e6f 6e65 293a 0a20 2020 2020  ket=None):.     
+00029830: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
+00029840: 6372 6561 7465 4f72 6465 722c 2063 616e  createOrder, can
+00029850: 6365 6c4f 7265 720a 2020 2020 2020 2020  celOrer.        
+00029860: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+00029870: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+00029880: 2020 2020 226f 7264 6572 4964 223a 2022      "orderId": "
+00029890: 3132 3734 3735 3439 3136 3238 3733 3436  1274754916287346
+000298a0: 3238 3022 2c0a 2020 2020 2020 2020 2320  280",.        # 
+000298b0: 2020 2020 2020 2020 226f 7264 6572 4c69          "orderLi
+000298c0: 6e6b 4964 223a 2022 3136 3636 3739 3836  nkId": "16667986
+000298d0: 3237 3031 3537 3330 222c 0a20 2020 2020  27015730",.     
+000298e0: 2020 2023 2020 2020 2020 2020 2022 7379     #         "sy
+000298f0: 6d62 6f6c 223a 2022 4141 5645 5553 4454  mbol": "AAVEUSDT
+00029900: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00029910: 2020 2020 2022 6372 6561 7465 5469 6d65       "createTime
+00029920: 223a 2022 3136 3636 3639 3836 3239 3832  ": "166669862982
+00029930: 3122 2c0a 2020 2020 2020 2020 2320 2020  1",.        #   
+00029940: 2020 2020 2020 226f 7264 6572 5072 6963        "orderPric
+00029950: 6522 3a20 2238 3022 2c0a 2020 2020 2020  e": "80",.      
+00029960: 2020 2320 2020 2020 2020 2020 226f 7264    #         "ord
+00029970: 6572 5174 7922 3a20 2230 2e31 3122 2c0a  erQty": "0.11",.
+00029980: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00029990: 2020 226f 7264 6572 5479 7065 223a 2022    "orderType": "
+000299a0: 4c49 4d49 5422 2c0a 2020 2020 2020 2020  LIMIT",.        
+000299b0: 2320 2020 2020 2020 2020 2273 6964 6522  #         "side"
+000299c0: 3a20 2242 5559 222c 0a20 2020 2020 2020  : "BUY",.       
+000299d0: 2023 2020 2020 2020 2020 2022 7374 6174   #         "stat
+000299e0: 7573 223a 2022 4e45 5722 2c0a 2020 2020  us": "NEW",.    
+000299f0: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
+00029a00: 696d 6549 6e46 6f72 6365 223a 2022 4754  imeInForce": "GT
+00029a10: 4322 2c0a 2020 2020 2020 2020 2320 2020  C",.        #   
+00029a20: 2020 2020 2020 2261 6363 6f75 6e74 4964        "accountId
+00029a30: 223a 2022 3133 3338 3034 3334 222c 0a20  ": "13380434",. 
+00029a40: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00029a50: 2022 6578 6563 5174 7922 3a20 2230 222c   "execQty": "0",
+00029a60: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00029a70: 2020 2022 6f72 6465 7243 6174 6567 6f72     "orderCategor
+00029a80: 7922 3a20 2230 220a 2020 2020 2020 2020  y": "0".        
+00029a90: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
+00029aa0: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+00029ab0: 6665 7463 684f 7264 6572 2c20 6665 7463  fetchOrder, fetc
+00029ac0: 684f 7065 6e4f 7264 6572 732c 2066 6574  hOpenOrders, fet
+00029ad0: 6368 436c 6f73 6564 4f72 6465 7273 2861  chClosedOrders(a
+00029ae0: 6e64 2061 6c73 6f20 666f 7220 636f 6e64  nd also for cond
+00029af0: 6974 696f 6e61 6c20 6f72 6465 7273 2920  itional orders) 
+00029b00: 7468 6572 6520 6172 6520 616c 736f 2070  there are also p
+00029b10: 7265 7365 6e74 2074 6865 7365 2061 6464  resent these add
+00029b20: 6974 696f 6e61 6c20 6669 656c 6473 3a0a  itional fields:.
+00029b30: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+00029b40: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00029b50: 2020 2263 756d 6d75 6c61 7469 7665 5175    "cummulativeQu
+00029b60: 6f74 6551 7479 223a 2022 3022 2c0a 2020  oteQty": "0",.  
+00029b70: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00029b80: 2261 7667 5072 6963 6522 3a20 2230 222c  "avgPrice": "0",
+00029b90: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00029ba0: 2020 2022 7374 6f70 5072 6963 6522 3a20     "stopPrice": 
+00029bb0: 2230 2e30 222c 0a20 2020 2020 2020 2023  "0.0",.        #
+00029bc0: 2020 2020 2020 2020 2022 6963 6562 6572           "iceber
+00029bd0: 6751 7479 223a 2022 302e 3022 2c0a 2020  gQty": "0.0",.  
+00029be0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00029bf0: 2275 7064 6174 6554 696d 6522 3a20 2231  "updateTime": "1
+00029c00: 3636 3637 3333 3335 3734 3434 222c 0a20  666733357444",. 
+00029c10: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00029c20: 2022 6973 576f 726b 696e 6722 3a20 2231   "isWorking": "1
+00029c30: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00029c40: 2020 2020 2022 6c6f 636b 6564 223a 2022       "locked": "
+00029c50: 382e 3822 2c0a 2020 2020 2020 2020 2320  8.8",.        # 
+00029c60: 2020 2020 2020 2020 2265 7865 6375 7465          "execute
+00029c70: 644f 7264 6572 4964 223a 2022 3132 3739  dOrderId": "1279
+00029c80: 3039 3430 3337 3534 3339 3632 3131 3322  094037543962113"
+00029c90: 2c20 2023 2069 6e20 636f 6e64 6974 696f  ,  # in conditio
+00029ca0: 6e61 6c20 6f72 6465 720a 2020 2020 2020  nal order.      
+00029cb0: 2020 2320 2020 2020 2020 2020 2274 7269    #         "tri
+00029cc0: 6767 6572 5072 6963 6522 3a20 2230 2e39  ggerPrice": "0.9
+00029cd0: 3922 2c20 2023 2069 6e20 636f 6e64 6974  9",  # in condit
+00029ce0: 696f 6e61 6c20 6f72 6465 720a 2020 2020  ional order.    
+00029cf0: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+00029d00: 2020 2020 230a 2020 2020 2020 2020 6d61      #.        ma
+00029d10: 726b 6574 4964 203d 2073 656c 662e 7361  rketId = self.sa
+00029d20: 6665 5f73 7472 696e 6728 6f72 6465 722c  fe_string(order,
+00029d30: 2027 7379 6d62 6f6c 2729 0a20 2020 2020   'symbol').     
+00029d40: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
+00029d50: 2e73 6166 655f 6d61 726b 6574 286d 6172  .safe_market(mar
+00029d60: 6b65 7449 642c 206d 6172 6b65 742c 204e  ketId, market, N
+00029d70: 6f6e 652c 2027 7370 6f74 2729 0a20 2020  one, 'spot').   
+00029d80: 2020 2020 2074 696d 6573 7461 6d70 203d       timestamp =
+00029d90: 2073 656c 662e 7361 6665 5f69 6e74 6567   self.safe_integ
+00029da0: 6572 286f 7264 6572 2c20 2763 7265 6174  er(order, 'creat
+00029db0: 6554 696d 6527 290a 2020 2020 2020 2020  eTime').        
+00029dc0: 7479 7065 203d 2073 656c 662e 7361 6665  type = self.safe
+00029dd0: 5f73 7472 696e 675f 6c6f 7765 7228 6f72  _string_lower(or
+00029de0: 6465 722c 2027 6f72 6465 7254 7970 6527  der, 'orderType'
+00029df0: 290a 2020 2020 2020 2020 7072 6963 6520  ).        price 
+00029e00: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+00029e10: 6e67 286f 7264 6572 2c20 276f 7264 6572  ng(order, 'order
+00029e20: 5072 6963 6527 290a 2020 2020 2020 2020  Price').        
+00029e30: 6966 2070 7269 6365 203d 3d20 2730 2720  if price == '0' 
+00029e40: 616e 6420 7479 7065 203d 3d20 276d 6172  and type == 'mar
+00029e50: 6b65 7427 3a0a 2020 2020 2020 2020 2020  ket':.          
+00029e60: 2020 7072 6963 6520 3d20 4e6f 6e65 0a20    price = None. 
+00029e70: 2020 2020 2020 2066 696c 6c65 6420 3d20         filled = 
+00029e80: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+00029e90: 286f 7264 6572 2c20 2765 7865 6351 7479  (order, 'execQty
+00029ea0: 2729 0a20 2020 2020 2020 2073 6964 6520  ').        side 
+00029eb0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+00029ec0: 6e67 5f6c 6f77 6572 286f 7264 6572 2c20  ng_lower(order, 
+00029ed0: 2773 6964 6527 290a 2020 2020 2020 2020  'side').        
+00029ee0: 7469 6d65 496e 466f 7263 6520 3d20 7365  timeInForce = se
+00029ef0: 6c66 2e70 6172 7365 5f74 696d 655f 696e  lf.parse_time_in
+00029f00: 5f66 6f72 6365 2873 656c 662e 7361 6665  _force(self.safe
+00029f10: 5f73 7472 696e 6728 6f72 6465 722c 2027  _string(order, '
+00029f20: 7469 6d65 496e 466f 7263 6527 2929 0a20  timeInForce')). 
+00029f30: 2020 2020 2020 2074 7269 6767 6572 5072         triggerPr
+00029f40: 6963 6520 3d20 7365 6c66 2e73 6166 655f  ice = self.safe_
+00029f50: 7374 7269 6e67 286f 7264 6572 2c20 2774  string(order, 't
+00029f60: 7269 6767 6572 5072 6963 6527 290a 2020  riggerPrice').  
+00029f70: 2020 2020 2020 706f 7374 4f6e 6c79 203d        postOnly =
+00029f80: 2028 7469 6d65 496e 466f 7263 6520 3d3d   (timeInForce ==
+00029f90: 2027 504f 2729 0a20 2020 2020 2020 2061   'PO').        a
+00029fa0: 6d6f 756e 7420 3d20 4e6f 6e65 0a20 2020  mount = None.   
+00029fb0: 2020 2020 2069 6620 6d61 726b 6574 5b27       if market['
+00029fc0: 7370 6f74 275d 2061 6e64 2074 7970 6520  spot'] and type 
+00029fd0: 3d3d 2027 6d61 726b 6574 2720 616e 6420  == 'market' and 
+00029fe0: 7369 6465 203d 3d20 2762 7579 273a 0a20  side == 'buy':. 
+00029ff0: 2020 2020 2020 2020 2020 2061 6d6f 756e             amoun
+0002a000: 7420 3d20 6669 6c6c 6564 0a20 2020 2020  t = filled.     
+0002a010: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0002a020: 2020 2020 2061 6d6f 756e 7420 3d20 7365       amount = se
+0002a030: 6c66 2e73 6166 655f 7374 7269 6e67 286f  lf.safe_string(o
+0002a040: 7264 6572 2c20 276f 7264 6572 5174 7927  rder, 'orderQty'
+0002a050: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+0002a060: 2073 656c 662e 7361 6665 5f6f 7264 6572   self.safe_order
+0002a070: 287b 0a20 2020 2020 2020 2020 2020 2027  ({.            '
+0002a080: 6964 273a 2073 656c 662e 7361 6665 5f73  id': self.safe_s
+0002a090: 7472 696e 6728 6f72 6465 722c 2027 6f72  tring(order, 'or
+0002a0a0: 6465 7249 6427 292c 0a20 2020 2020 2020  derId'),.       
+0002a0b0: 2020 2020 2027 636c 6965 6e74 4f72 6465       'clientOrde
+0002a0c0: 7249 6427 3a20 7365 6c66 2e73 6166 655f  rId': self.safe_
+0002a0d0: 7374 7269 6e67 286f 7264 6572 2c20 276f  string(order, 'o
+0002a0e0: 7264 6572 4c69 6e6b 4964 2729 2c0a 2020  rderLinkId'),.  
+0002a0f0: 2020 2020 2020 2020 2020 2774 696d 6573            'times
+0002a100: 7461 6d70 273a 2074 696d 6573 7461 6d70  tamp': timestamp
+0002a110: 2c0a 2020 2020 2020 2020 2020 2020 2764  ,.            'd
+0002a120: 6174 6574 696d 6527 3a20 7365 6c66 2e69  atetime': self.i
+0002a130: 736f 3836 3031 2874 696d 6573 7461 6d70  so8601(timestamp
+0002a140: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
+0002a150: 6c61 7374 5472 6164 6554 696d 6573 7461  lastTradeTimesta
+0002a160: 6d70 273a 2073 656c 662e 7361 6665 5f69  mp': self.safe_i
+0002a170: 6e74 6567 6572 286f 7264 6572 2c20 2775  nteger(order, 'u
+0002a180: 7064 6174 6554 696d 6527 292c 0a20 2020  pdateTime'),.   
+0002a190: 2020 2020 2020 2020 2027 7379 6d62 6f6c           'symbol
+0002a1a0: 273a 206d 6172 6b65 745b 2773 796d 626f  ': market['symbo
+0002a1b0: 6c27 5d2c 0a20 2020 2020 2020 2020 2020  l'],.           
+0002a1c0: 2027 7479 7065 273a 2074 7970 652c 0a20   'type': type,. 
+0002a1d0: 2020 2020 2020 2020 2020 2027 7469 6d65             'time
+0002a1e0: 496e 466f 7263 6527 3a20 7469 6d65 496e  InForce': timeIn
+0002a1f0: 466f 7263 652c 0a20 2020 2020 2020 2020  Force,.         
+0002a200: 2020 2027 706f 7374 4f6e 6c79 273a 2070     'postOnly': p
+0002a210: 6f73 744f 6e6c 792c 0a20 2020 2020 2020  ostOnly,.       
+0002a220: 2020 2020 2027 7369 6465 273a 2073 6964       'side': sid
+0002a230: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
+0002a240: 7072 6963 6527 3a20 7072 6963 652c 0a20  price': price,. 
+0002a250: 2020 2020 2020 2020 2020 2027 7472 6967             'trig
+0002a260: 6765 7250 7269 6365 273a 2074 7269 6767  gerPrice': trigg
+0002a270: 6572 5072 6963 652c 0a20 2020 2020 2020  erPrice,.       
+0002a280: 2020 2020 2027 7374 6f70 5072 6963 6527       'stopPrice'
+0002a290: 3a20 7472 6967 6765 7250 7269 6365 2c20  : triggerPrice, 
+0002a2a0: 2023 2064 6570 7265 6361 7465 6420 6669   # deprecated fi
+0002a2b0: 656c 640a 2020 2020 2020 2020 2020 2020  eld.            
+0002a2c0: 2761 6d6f 756e 7427 3a20 616d 6f75 6e74  'amount': amount
+0002a2d0: 2c0a 2020 2020 2020 2020 2020 2020 2763  ,.            'c
+0002a2e0: 6f73 7427 3a20 7365 6c66 2e73 6166 655f  ost': self.safe_
+0002a2f0: 7374 7269 6e67 286f 7264 6572 2c20 2763  string(order, 'c
+0002a300: 756d 6d75 6c61 7469 7665 5175 6f74 6551  ummulativeQuoteQ
+0002a310: 7479 2729 2c0a 2020 2020 2020 2020 2020  ty'),.          
+0002a320: 2020 2761 7665 7261 6765 273a 2073 656c    'average': sel
+0002a330: 662e 7361 6665 5f73 7472 696e 6728 6f72  f.safe_string(or
+0002a340: 6465 722c 2027 6176 6750 7269 6365 2729  der, 'avgPrice')
+0002a350: 2c0a 2020 2020 2020 2020 2020 2020 2766  ,.            'f
+0002a360: 696c 6c65 6427 3a20 6669 6c6c 6564 2c0a  illed': filled,.
+0002a370: 2020 2020 2020 2020 2020 2020 2772 656d              'rem
+0002a380: 6169 6e69 6e67 273a 204e 6f6e 652c 0a20  aining': None,. 
+0002a390: 2020 2020 2020 2020 2020 2027 7374 6174             'stat
+0002a3a0: 7573 273a 2073 656c 662e 7061 7273 655f  us': self.parse_
+0002a3b0: 6f72 6465 725f 7374 6174 7573 2873 656c  order_status(sel
+0002a3c0: 662e 7361 6665 5f73 7472 696e 6728 6f72  f.safe_string(or
+0002a3d0: 6465 722c 2027 7374 6174 7573 2729 292c  der, 'status')),
+0002a3e0: 0a20 2020 2020 2020 2020 2020 2027 6665  .            'fe
+0002a3f0: 6527 3a20 4e6f 6e65 2c0a 2020 2020 2020  e': None,.      
+0002a400: 2020 2020 2020 2774 7261 6465 7327 3a20        'trades': 
+0002a410: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
+0002a420: 2020 2769 6e66 6f27 3a20 6f72 6465 722c    'info': order,
+0002a430: 0a20 2020 2020 2020 207d 2c20 6d61 726b  .        }, mark
+0002a440: 6574 290a 0a20 2020 2061 7379 6e63 2064  et)..    async d
+0002a450: 6566 2066 6574 6368 5f6f 7264 6572 2873  ef fetch_order(s
+0002a460: 656c 662c 2069 643a 2073 7472 2c20 7379  elf, id: str, sy
+0002a470: 6d62 6f6c 3a20 4f70 7469 6f6e 616c 5b73  mbol: Optional[s
+0002a480: 7472 5d20 3d20 4e6f 6e65 2c20 7061 7261  tr] = None, para
+0002a490: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
+0002a4a0: 2222 220a 2020 2020 2020 2020 6665 7463  """.        fetc
+0002a4b0: 6865 7320 696e 666f 726d 6174 696f 6e20  hes information 
+0002a4c0: 6f6e 2061 6e20 6f72 6465 7220 6d61 6465  on an order made
+0002a4d0: 2062 7920 7468 6520 7573 6572 0a20 2020   by the user.   
+0002a4e0: 2020 2020 203a 7061 7261 6d20 7374 727c       :param str|
+0002a4f0: 4e6f 6e65 2073 796d 626f 6c3a 2075 6e69  None symbol: uni
+0002a500: 6669 6564 2073 796d 626f 6c20 6f66 2074  fied symbol of t
+0002a510: 6865 206d 6172 6b65 7420 7468 6520 6f72  he market the or
+0002a520: 6465 7220 7761 7320 6d61 6465 2069 6e0a  der was made in.
+0002a530: 2020 2020 2020 2020 3a70 6172 616d 2064          :param d
+0002a540: 6963 7420 7061 7261 6d73 3a20 6578 7472  ict params: extr
+0002a550: 6120 7061 7261 6d65 7465 7273 2073 7065  a parameters spe
+0002a560: 6369 6669 6320 746f 2074 6865 2062 7962  cific to the byb
+0002a570: 6974 2061 7069 2065 6e64 706f 696e 740a  it api endpoint.
+0002a580: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
+0002a590: 2064 6963 743a 2041 6e20 606f 7264 6572   dict: An `order
+0002a5a0: 2073 7472 7563 7475 7265 203c 6874 7470   structure <http
+0002a5b0: 733a 2f2f 646f 6373 2e63 6378 742e 636f  s://docs.ccxt.co
+0002a5c0: 6d2f 232f 3f69 643d 6f72 6465 722d 7374  m/#/?id=order-st
+0002a5d0: 7275 6374 7572 653e 600a 2020 2020 2020  ructure>`.      
+0002a5e0: 2020 2222 220a 2020 2020 2020 2020 6177    """.        aw
+0002a5f0: 6169 7420 7365 6c66 2e6c 6f61 645f 6d61  ait self.load_ma
+0002a600: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
+0002a610: 6d61 726b 6574 203d 204e 6f6e 650a 2020  market = None.  
+0002a620: 2020 2020 2020 6966 2073 796d 626f 6c20        if symbol 
+0002a630: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0002a640: 2020 2020 2020 2020 206d 6172 6b65 7420           market 
+0002a650: 3d20 7365 6c66 2e6d 6172 6b65 7428 7379  = self.market(sy
+0002a660: 6d62 6f6c 290a 2020 2020 2020 2020 7479  mbol).        ty
+0002a670: 7065 203d 204e 6f6e 650a 2020 2020 2020  pe = None.      
+0002a680: 2020 7479 7065 2c20 7061 7261 6d73 203d    type, params =
+0002a690: 2073 656c 662e 6861 6e64 6c65 5f6d 6172   self.handle_mar
+0002a6a0: 6b65 745f 7479 7065 5f61 6e64 5f70 6172  ket_type_and_par
+0002a6b0: 616d 7328 2766 6574 6368 4f72 6465 7227  ams('fetchOrder'
+0002a6c0: 2c20 6d61 726b 6574 2c20 7061 7261 6d73  , market, params
+0002a6d0: 290a 2020 2020 2020 2020 6163 636f 756e  ).        accoun
+0002a6e0: 7473 203d 2061 7761 6974 2073 656c 662e  ts = await self.
+0002a6f0: 6973 5f75 6e69 6669 6564 5f65 6e61 626c  is_unified_enabl
+0002a700: 6564 2829 0a20 2020 2020 2020 2069 7355  ed().        isU
+0002a710: 6e69 6669 6564 4163 636f 756e 7420 3d20  nifiedAccount = 
+0002a720: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
+0002a730: 6163 636f 756e 7473 2c20 312c 2046 616c  accounts, 1, Fal
+0002a740: 7365 290a 2020 2020 2020 2020 6966 2069  se).        if i
+0002a750: 7355 6e69 6669 6564 4163 636f 756e 743a  sUnifiedAccount:
+0002a760: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+0002a770: 7365 204e 6f74 5375 7070 6f72 7465 6428  se NotSupported(
+0002a780: 7365 6c66 2e69 6420 2b20 2720 6665 7463  self.id + ' fetc
+0002a790: 684f 7264 6572 2829 2064 6f65 7320 6e6f  hOrder() does no
+0002a7a0: 7420 7375 7070 6f72 7420 756e 6966 6965  t support unifie
+0002a7b0: 6420 6163 636f 756e 742e 2050 6c65 6173  d account. Pleas
+0002a7c0: 6520 636f 6e73 6964 6572 2075 7369 6e67  e consider using
+0002a7d0: 2066 6574 6368 4f70 656e 4f72 6465 7273   fetchOpenOrders
+0002a7e0: 2829 206f 7220 6665 7463 6843 6c6f 7365  () or fetchClose
+0002a7f0: 644f 7264 6572 7328 2927 290a 2020 2020  dOrders()').    
+0002a800: 2020 2020 6966 2074 7970 6520 3d3d 2027      if type == '
+0002a810: 7370 6f74 273a 0a20 2020 2020 2020 2020  spot':.         
+0002a820: 2020 2023 206f 6e6c 7920 7370 6f74 206d     # only spot m
+0002a830: 6172 6b65 7473 2068 6176 6520 6120 6465  arkets have a de
+0002a840: 6469 6361 7465 6420 656e 6470 6f69 6e74  dicated endpoint
+0002a850: 2066 6f72 2066 6574 6368 696e 6720 6120   for fetching a 
+0002a860: 6f72 6465 720a 2020 2020 2020 2020 2020  order.          
+0002a870: 2020 7265 7175 6573 7420 3d20 7b0a 2020    request = {.  
+0002a880: 2020 2020 2020 2020 2020 2020 2020 276f                'o
+0002a890: 7264 6572 4964 273a 2069 642c 0a20 2020  rderId': id,.   
+0002a8a0: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+0002a8b0: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+0002a8c0: 3d20 6177 6169 7420 7365 6c66 2e70 7269  = await self.pri
+0002a8d0: 7661 7465 4765 7453 706f 7456 3350 7269  vateGetSpotV3Pri
+0002a8e0: 7661 7465 4f72 6465 7228 7365 6c66 2e65  vateOrder(self.e
+0002a8f0: 7874 656e 6428 7061 7261 6d73 2c20 7265  xtend(params, re
+0002a900: 7175 6573 7429 290a 2020 2020 2020 2020  quest)).        
+0002a910: 2020 2020 230a 2020 2020 2020 2020 2020      #.          
+0002a920: 2020 2320 2020 207b 0a20 2020 2020 2020    #    {.       
+0002a930: 2020 2020 2023 2020 2020 2020 2020 2272       #        "r
+0002a940: 6574 436f 6465 223a 2022 3022 2c0a 2020  etCode": "0",.  
+0002a950: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+0002a960: 2020 2022 7265 744d 7367 223a 2022 4f4b     "retMsg": "OK
+0002a970: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
+0002a980: 2020 2020 2020 2020 2272 6573 756c 7422          "result"
+0002a990: 3a20 7b0a 2020 2020 2020 2020 2020 2020  : {.            
+0002a9a0: 2320 2020 2020 2020 2020 2020 2022 6163  #            "ac
+0002a9b0: 636f 756e 7449 6422 3a20 2231 3333 3830  countId": "13380
+0002a9c0: 3433 3422 2c0a 2020 2020 2020 2020 2020  434",.          
+0002a9d0: 2020 2320 2020 2020 2020 2020 2020 2022    #            "
+0002a9e0: 7379 6d62 6f6c 223a 2022 4141 5645 5553  symbol": "AAVEUS
+0002a9f0: 4454 222c 0a20 2020 2020 2020 2020 2020  DT",.           
+0002aa00: 2023 2020 2020 2020 2020 2020 2020 226f   #            "o
+0002aa10: 7264 6572 4c69 6e6b 4964 223a 2022 3136  rderLinkId": "16
+0002aa20: 3636 3733 3333 3537 3433 3436 3137 222c  66733357434617",
+0002aa30: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+0002aa40: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+0002aa50: 4964 223a 2022 3132 3735 3034 3632 3438  Id": "1275046248
+0002aa60: 3538 3534 3134 3134 3422 2c0a 2020 2020  585414144",.    
+0002aa70: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0002aa80: 2020 2020 2022 6f72 6465 7250 7269 6365       "orderPrice
+0002aa90: 223a 2022 3830 222c 0a20 2020 2020 2020  ": "80",.       
+0002aaa0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0002aab0: 2020 226f 7264 6572 5174 7922 3a20 2230    "orderQty": "0
+0002aac0: 2e31 3122 2c0a 2020 2020 2020 2020 2020  .11",.          
+0002aad0: 2020 2320 2020 2020 2020 2020 2020 2022    #            "
+0002aae0: 6578 6563 5174 7922 3a20 2230 222c 0a20  execQty": "0",. 
+0002aaf0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+0002ab00: 2020 2020 2020 2020 2263 756d 6d75 6c61          "cummula
+0002ab10: 7469 7665 5175 6f74 6551 7479 223a 2022  tiveQuoteQty": "
+0002ab20: 3022 2c0a 2020 2020 2020 2020 2020 2020  0",.            
+0002ab30: 2320 2020 2020 2020 2020 2020 2022 6176  #            "av
+0002ab40: 6750 7269 6365 223a 2022 3022 2c0a 2020  gPrice": "0",.  
+0002ab50: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+0002ab60: 2020 2020 2020 2022 7374 6174 7573 223a         "status":
+0002ab70: 2022 4e45 5722 2c0a 2020 2020 2020 2020   "NEW",.        
+0002ab80: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0002ab90: 2022 7469 6d65 496e 466f 7263 6522 3a20   "timeInForce": 
+0002aba0: 2247 5443 222c 0a20 2020 2020 2020 2020  "GTC",.         
+0002abb0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0002abc0: 226f 7264 6572 5479 7065 223a 2022 4c49  "orderType": "LI
+0002abd0: 4d49 5422 2c0a 2020 2020 2020 2020 2020  MIT",.          
+0002abe0: 2020 2320 2020 2020 2020 2020 2020 2022    #            "
+0002abf0: 7369 6465 223a 2022 4255 5922 2c0a 2020  side": "BUY",.  
+0002ac00: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+0002ac10: 2020 2020 2020 2022 7374 6f70 5072 6963         "stopPric
+0002ac20: 6522 3a20 2230 2e30 222c 0a20 2020 2020  e": "0.0",.     
+0002ac30: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0002ac40: 2020 2020 2269 6365 6265 7267 5174 7922      "icebergQty"
+0002ac50: 3a20 2230 2e30 222c 0a20 2020 2020 2020  : "0.0",.       
+0002ac60: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0002ac70: 2020 2263 7265 6174 6554 696d 6522 3a20    "createTime": 
+0002ac80: 2231 3636 3637 3333 3335 3734 3338 222c  "1666733357438",
+0002ac90: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+0002aca0: 2020 2020 2020 2020 2020 2275 7064 6174            "updat
+0002acb0: 6554 696d 6522 3a20 2231 3636 3637 3333  eTime": "1666733
+0002acc0: 3335 3734 3434 222c 0a20 2020 2020 2020  357444",.       
+0002acd0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0002ace0: 2020 2269 7357 6f72 6b69 6e67 223a 2022    "isWorking": "
+0002acf0: 3122 2c0a 2020 2020 2020 2020 2020 2020  1",.            
+0002ad00: 2320 2020 2020 2020 2020 2020 2022 6c6f  #            "lo
+0002ad10: 636b 6564 223a 2022 382e 3822 2c0a 2020  cked": "8.8",.  
+0002ad20: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+0002ad30: 2020 2020 2020 2022 6f72 6465 7243 6174         "orderCat
+0002ad40: 6567 6f72 7922 3a20 2230 220a 2020 2020  egory": "0".    
+0002ad50: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0002ad60: 207d 2c0a 2020 2020 2020 2020 2020 2020   },.            
+0002ad70: 2320 2020 2020 2020 2022 7265 7445 7874  #        "retExt
+0002ad80: 4d61 7022 3a20 7b7d 2c0a 2020 2020 2020  Map": {},.      
+0002ad90: 2020 2020 2020 2320 2020 2020 2020 2022        #        "
+0002ada0: 7265 7445 7874 496e 666f 223a 206e 756c  retExtInfo": nul
+0002adb0: 6c2c 0a20 2020 2020 2020 2020 2020 2023  l,.            #
+0002adc0: 2020 2020 2020 2020 2274 696d 6522 3a20          "time": 
+0002add0: 2231 3636 3637 3333 3335 3737 3434 220a  "1666733357744".
+0002ade0: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+0002adf0: 207d 0a20 2020 2020 2020 2020 2020 2023   }.            #
+0002ae00: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+0002ae10: 756c 7420 3d20 7365 6c66 2e73 6166 655f  ult = self.safe_
+0002ae20: 7661 6c75 6528 7265 7370 6f6e 7365 2c20  value(response, 
+0002ae30: 2772 6573 756c 7427 2c20 7b7d 290a 2020  'result', {}).  
+0002ae40: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0002ae50: 2073 656c 662e 7061 7273 655f 6f72 6465   self.parse_orde
+0002ae60: 7228 7265 7375 6c74 2c20 6d61 726b 6574  r(result, market
+0002ae70: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
+0002ae80: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0002ae90: 2e63 6865 636b 5f72 6571 7569 7265 645f  .check_required_
+0002aea0: 7379 6d62 6f6c 2827 6665 7463 684f 7264  symbol('fetchOrd
+0002aeb0: 6572 272c 2073 796d 626f 6c29 0a20 2020  er', symbol).   
+0002aec0: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0002aed0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+0002aee0: 2020 2020 2027 6f72 6465 7249 6427 3a20       'orderId': 
+0002aef0: 6964 2c0a 2020 2020 2020 2020 2020 2020  id,.            
+0002af00: 7d0a 2020 2020 2020 2020 2020 2020 7265  }.            re
+0002af10: 7375 6c74 203d 2061 7761 6974 2073 656c  sult = await sel
+0002af20: 662e 6665 7463 685f 6f72 6465 7273 2873  f.fetch_orders(s
+0002af30: 796d 626f 6c2c 204e 6f6e 652c 204e 6f6e  ymbol, None, Non
+0002af40: 652c 2073 656c 662e 6578 7465 6e64 2872  e, self.extend(r
+0002af50: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
+0002af60: 0a20 2020 2020 2020 2020 2020 206c 656e  .            len
+0002af70: 6774 6820 3d20 6c65 6e28 7265 7375 6c74  gth = len(result
+0002af80: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+0002af90: 206c 656e 6774 6820 3d3d 2030 3a0a 2020   length == 0:.  
+0002afa0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
+0002afb0: 6973 6520 4f72 6465 724e 6f74 466f 756e  ise OrderNotFoun
+0002afc0: 6428 274f 7264 6572 2027 202b 2069 6420  d('Order ' + id 
+0002afd0: 2b20 2720 646f 6573 206e 6f74 2065 7869  + ' does not exi
+0002afe0: 7374 2e27 290a 2020 2020 2020 2020 2020  st.').          
+0002aff0: 2020 6966 206c 656e 6774 6820 3e20 313a    if length > 1:
+0002b000: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002b010: 2072 6169 7365 2049 6e76 616c 6964 4f72   raise InvalidOr
+0002b020: 6465 7228 7365 6c66 2e69 6420 2b20 2720  der(self.id + ' 
+0002b030: 7265 7475 726e 6564 206d 6f72 6520 7468  returned more th
+0002b040: 616e 206f 6e65 206f 7264 6572 2729 0a20  an one order'). 
+0002b050: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0002b060: 6e20 7365 6c66 2e73 6166 655f 7661 6c75  n self.safe_valu
+0002b070: 6528 7265 7375 6c74 2c20 3029 0a0a 2020  e(result, 0)..  
+0002b080: 2020 6173 796e 6320 6465 6620 6372 6561    async def crea
+0002b090: 7465 5f6f 7264 6572 2873 656c 662c 2073  te_order(self, s
+0002b0a0: 796d 626f 6c3a 2073 7472 2c20 7479 7065  ymbol: str, type
+0002b0b0: 2c20 7369 6465 3a20 4f72 6465 7253 6964  , side: OrderSid
+0002b0c0: 652c 2061 6d6f 756e 742c 2070 7269 6365  e, amount, price
+0002b0d0: 3d4e 6f6e 652c 2070 6172 616d 733d 7b7d  =None, params={}
+0002b0e0: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
+0002b0f0: 2020 2020 2020 2063 7265 6174 6520 6120         create a 
+0002b100: 7472 6164 6520 6f72 6465 720a 2020 2020  trade order.    
+0002b110: 2020 2020 7365 6520 6874 7470 733a 2f2f      see https://
+0002b120: 6279 6269 742d 6578 6368 616e 6765 2e67  bybit-exchange.g
+0002b130: 6974 6875 622e 696f 2f64 6f63 732f 7635  ithub.io/docs/v5
+0002b140: 2f6f 7264 6572 2f63 7265 6174 652d 6f72  /order/create-or
+0002b150: 6465 720a 2020 2020 2020 2020 7365 6520  der.        see 
+0002b160: 6874 7470 733a 2f2f 6279 6269 742d 6578  https://bybit-ex
+0002b170: 6368 616e 6765 2e67 6974 6875 622e 696f  change.github.io
+0002b180: 2f64 6f63 732f 7370 6f74 2f74 7261 6465  /docs/spot/trade
+0002b190: 2f70 6c61 6365 2d6f 7264 6572 0a20 2020  /place-order.   
+0002b1a0: 2020 2020 2073 6565 2068 7474 7073 3a2f       see https:/
+0002b1b0: 2f62 7962 6974 2d65 7863 6861 6e67 652e  /bybit-exchange.
+0002b1c0: 6769 7468 7562 2e69 6f2f 646f 6373 2f64  github.io/docs/d
+0002b1d0: 6572 6976 6174 6976 6573 2f75 6e69 6669  erivatives/unifi
+0002b1e0: 6564 2f70 6c61 6365 2d6f 7264 6572 0a20  ed/place-order. 
+0002b1f0: 2020 2020 2020 2073 6565 2068 7474 7073         see https
+0002b200: 3a2f 2f62 7962 6974 2d65 7863 6861 6e67  ://bybit-exchang
+0002b210: 652e 6769 7468 7562 2e69 6f2f 646f 6373  e.github.io/docs
+0002b220: 2f64 6572 6976 6174 6976 6573 2f63 6f6e  /derivatives/con
+0002b230: 7472 6163 742f 706c 6163 652d 6f72 6465  tract/place-orde
+0002b240: 720a 2020 2020 2020 2020 3a70 6172 616d  r.        :param
+0002b250: 2073 7472 2073 796d 626f 6c3a 2075 6e69   str symbol: uni
+0002b260: 6669 6564 2073 796d 626f 6c20 6f66 2074  fied symbol of t
+0002b270: 6865 206d 6172 6b65 7420 746f 2063 7265  he market to cre
+0002b280: 6174 6520 616e 206f 7264 6572 2069 6e0a  ate an order in.
+0002b290: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+0002b2a0: 7472 2074 7970 653a 2027 6d61 726b 6574  tr type: 'market
+0002b2b0: 2720 6f72 2027 6c69 6d69 7427 0a20 2020  ' or 'limit'.   
+0002b2c0: 2020 2020 203a 7061 7261 6d20 7374 7220       :param str 
+0002b2d0: 7369 6465 3a20 2762 7579 2720 6f72 2027  side: 'buy' or '
+0002b2e0: 7365 6c6c 270a 2020 2020 2020 2020 3a70  sell'.        :p
+0002b2f0: 6172 616d 2066 6c6f 6174 2061 6d6f 756e  aram float amoun
+0002b300: 743a 2068 6f77 206d 7563 6820 6f66 2063  t: how much of c
+0002b310: 7572 7265 6e63 7920 796f 7520 7761 6e74  urrency you want
+0002b320: 2074 6f20 7472 6164 6520 696e 2075 6e69   to trade in uni
+0002b330: 7473 206f 6620 6261 7365 2063 7572 7265  ts of base curre
+0002b340: 6e63 790a 2020 2020 2020 2020 3a70 6172  ncy.        :par
+0002b350: 616d 2066 6c6f 6174 7c4e 6f6e 6520 7072  am float|None pr
+0002b360: 6963 653a 2074 6865 2070 7269 6365 2061  ice: the price a
+0002b370: 7420 7768 6963 6820 7468 6520 6f72 6465  t which the orde
+0002b380: 7220 6973 2074 6f20 6265 2066 756c 6c66  r is to be fullf
+0002b390: 696c 6c65 642c 2069 6e20 756e 6974 7320  illed, in units 
+0002b3a0: 6f66 2074 6865 2071 756f 7465 2063 7572  of the quote cur
+0002b3b0: 7265 6e63 792c 2069 676e 6f72 6564 2069  rency, ignored i
+0002b3c0: 6e20 6d61 726b 6574 206f 7264 6572 730a  n market orders.
+0002b3d0: 2020 2020 2020 2020 3a70 6172 616d 2064          :param d
+0002b3e0: 6963 7420 7061 7261 6d73 3a20 6578 7472  ict params: extr
+0002b3f0: 6120 7061 7261 6d65 7465 7273 2073 7065  a parameters spe
+0002b400: 6369 6669 6320 746f 2074 6865 2062 7962  cific to the byb
+0002b410: 6974 2061 7069 2065 6e64 706f 696e 740a  it api endpoint.
+0002b420: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
+0002b430: 2064 6963 743a 2061 6e20 606f 7264 6572   dict: an `order
+0002b440: 2073 7472 7563 7475 7265 203c 6874 7470   structure <http
+0002b450: 733a 2f2f 646f 6373 2e63 6378 742e 636f  s://docs.ccxt.co
+0002b460: 6d2f 232f 3f69 643d 6f72 6465 722d 7374  m/#/?id=order-st
+0002b470: 7275 6374 7572 653e 600a 2020 2020 2020  ructure>`.      
+0002b480: 2020 2222 220a 2020 2020 2020 2020 6177    """.        aw
+0002b490: 6169 7420 7365 6c66 2e6c 6f61 645f 6d61  ait self.load_ma
+0002b4a0: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
+0002b4b0: 7365 6c66 2e63 6865 636b 5f72 6571 7569  self.check_requi
+0002b4c0: 7265 645f 7379 6d62 6f6c 2827 6372 6561  red_symbol('crea
+0002b4d0: 7465 4f72 6465 7227 2c20 7379 6d62 6f6c  teOrder', symbol
+0002b4e0: 290a 2020 2020 2020 2020 6d61 726b 6574  ).        market
+0002b4f0: 203d 2073 656c 662e 6d61 726b 6574 2873   = self.market(s
+0002b500: 796d 626f 6c29 0a20 2020 2020 2020 2073  ymbol).        s
+0002b510: 796d 626f 6c20 3d20 6d61 726b 6574 5b27  ymbol = market['
+0002b520: 7379 6d62 6f6c 275d 0a20 2020 2020 2020  symbol'].       
+0002b530: 2065 6e61 626c 6555 6e69 6669 6564 4d61   enableUnifiedMa
+0002b540: 7267 696e 2c20 656e 6162 6c65 556e 6966  rgin, enableUnif
+0002b550: 6965 6441 6363 6f75 6e74 203d 2061 7761  iedAccount = awa
+0002b560: 6974 2073 656c 662e 6973 5f75 6e69 6669  it self.is_unifi
+0002b570: 6564 5f65 6e61 626c 6564 2829 0a20 2020  ed_enabled().   
+0002b580: 2020 2020 2069 7355 5344 4353 6574 746c       isUSDCSettl
+0002b590: 6564 203d 206d 6172 6b65 745b 2773 6574  ed = market['set
+0002b5a0: 746c 6527 5d20 3d3d 2027 5553 4443 270a  tle'] == 'USDC'.
+0002b5b0: 2020 2020 2020 2020 6966 2065 6e61 626c          if enabl
+0002b5c0: 6555 6e69 6669 6564 4163 636f 756e 7420  eUnifiedAccount 
+0002b5d0: 616e 6420 6e6f 7420 6d61 726b 6574 5b27  and not market['
+0002b5e0: 696e 7665 7273 6527 5d3a 0a20 2020 2020  inverse']:.     
+0002b5f0: 2020 2020 2020 2072 6574 7572 6e20 6177         return aw
+0002b600: 6169 7420 7365 6c66 2e63 7265 6174 655f  ait self.create_
+0002b610: 756e 6966 6965 645f 6163 636f 756e 745f  unified_account_
+0002b620: 6f72 6465 7228 7379 6d62 6f6c 2c20 7479  order(symbol, ty
+0002b630: 7065 2c20 7369 6465 2c20 616d 6f75 6e74  pe, side, amount
+0002b640: 2c20 7072 6963 652c 2070 6172 616d 7329  , price, params)
+0002b650: 0a20 2020 2020 2020 2065 6c69 6620 6d61  .        elif ma
+0002b660: 726b 6574 5b27 7370 6f74 275d 3a0a 2020  rket['spot']:.  
+0002b670: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0002b680: 2061 7761 6974 2073 656c 662e 6372 6561   await self.crea
+0002b690: 7465 5f73 706f 745f 6f72 6465 7228 7379  te_spot_order(sy
+0002b6a0: 6d62 6f6c 2c20 7479 7065 2c20 7369 6465  mbol, type, side
+0002b6b0: 2c20 616d 6f75 6e74 2c20 7072 6963 652c  , amount, price,
+0002b6c0: 2070 6172 616d 7329 0a20 2020 2020 2020   params).       
+0002b6d0: 2065 6c69 6620 656e 6162 6c65 556e 6966   elif enableUnif
+0002b6e0: 6965 644d 6172 6769 6e20 616e 6420 6e6f  iedMargin and no
+0002b6f0: 7420 6d61 726b 6574 5b27 696e 7665 7273  t market['invers
+0002b700: 6527 5d3a 0a20 2020 2020 2020 2020 2020  e']:.           
+0002b710: 2072 6574 7572 6e20 6177 6169 7420 7365   return await se
+0002b720: 6c66 2e63 7265 6174 655f 756e 6966 6965  lf.create_unifie
+0002b730: 645f 6d61 7267 696e 5f6f 7264 6572 2873  d_margin_order(s
+0002b740: 796d 626f 6c2c 2074 7970 652c 2073 6964  ymbol, type, sid
+0002b750: 652c 2061 6d6f 756e 742c 2070 7269 6365  e, amount, price
+0002b760: 2c20 7061 7261 6d73 290a 2020 2020 2020  , params).      
+0002b770: 2020 656c 6966 2069 7355 5344 4353 6574    elif isUSDCSet
+0002b780: 746c 6564 3a0a 2020 2020 2020 2020 2020  tled:.          
+0002b790: 2020 7265 7475 726e 2061 7761 6974 2073    return await s
+0002b7a0: 656c 662e 6372 6561 7465 5f75 7364 635f  elf.create_usdc_
+0002b7b0: 6f72 6465 7228 7379 6d62 6f6c 2c20 7479  order(symbol, ty
+0002b7c0: 7065 2c20 7369 6465 2c20 616d 6f75 6e74  pe, side, amount
+0002b7d0: 2c20 7072 6963 652c 2070 6172 616d 7329  , price, params)
+0002b7e0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+0002b7f0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0002b800: 6e20 6177 6169 7420 7365 6c66 2e63 7265  n await self.cre
+0002b810: 6174 655f 636f 6e74 7261 6374 5f76 335f  ate_contract_v3_
+0002b820: 6f72 6465 7228 7379 6d62 6f6c 2c20 7479  order(symbol, ty
+0002b830: 7065 2c20 7369 6465 2c20 616d 6f75 6e74  pe, side, amount
+0002b840: 2c20 7072 6963 652c 2070 6172 616d 7329  , price, params)
+0002b850: 0a0a 2020 2020 6173 796e 6320 6465 6620  ..    async def 
+0002b860: 6372 6561 7465 5f75 6e69 6669 6564 5f61  create_unified_a
+0002b870: 6363 6f75 6e74 5f6f 7264 6572 2873 656c  ccount_order(sel
+0002b880: 662c 2073 796d 626f 6c3a 2073 7472 2c20  f, symbol: str, 
+0002b890: 7479 7065 2c20 7369 6465 2c20 616d 6f75  type, side, amou
+0002b8a0: 6e74 2c20 7072 6963 653d 4e6f 6e65 2c20  nt, price=None, 
+0002b8b0: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
+0002b8c0: 2020 2020 6177 6169 7420 7365 6c66 2e6c      await self.l
+0002b8d0: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
+0002b8e0: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
+0002b8f0: 656c 662e 6d61 726b 6574 2873 796d 626f  elf.market(symbo
+0002b900: 6c29 0a20 2020 2020 2020 206c 6f77 6572  l).        lower
+0002b910: 4361 7365 5479 7065 203d 2074 7970 652e  CaseType = type.
+0002b920: 6c6f 7765 7228 290a 2020 2020 2020 2020  lower().        
+0002b930: 6966 2028 7072 6963 6520 6973 204e 6f6e  if (price is Non
+0002b940: 6529 2061 6e64 2028 6c6f 7765 7243 6173  e) and (lowerCas
+0002b950: 6554 7970 6520 3d3d 2027 6c69 6d69 7427  eType == 'limit'
+0002b960: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+0002b970: 6169 7365 2041 7267 756d 656e 7473 5265  aise ArgumentsRe
+0002b980: 7175 6972 6564 2873 656c 662e 6964 202b  quired(self.id +
+0002b990: 2027 2063 7265 6174 654f 7264 6572 2072   ' createOrder r
+0002b9a0: 6571 7569 7265 7320 6120 7072 6963 6520  equires a price 
+0002b9b0: 6172 6775 6d65 6e74 2066 6f72 206c 696d  argument for lim
+0002b9c0: 6974 206f 7264 6572 7327 290a 2020 2020  it orders').    
+0002b9d0: 2020 2020 7265 7175 6573 7420 3d20 7b0a      request = {.
+0002b9e0: 2020 2020 2020 2020 2020 2020 2773 796d              'sym
+0002b9f0: 626f 6c27 3a20 6d61 726b 6574 5b27 6964  bol': market['id
+0002ba00: 275d 2c0a 2020 2020 2020 2020 2020 2020  '],.            
+0002ba10: 2773 6964 6527 3a20 7365 6c66 2e63 6170  'side': self.cap
+0002ba20: 6974 616c 697a 6528 7369 6465 292c 0a20  italize(side),. 
+0002ba30: 2020 2020 2020 2020 2020 2027 6f72 6465             'orde
+0002ba40: 7254 7970 6527 3a20 7365 6c66 2e63 6170  rType': self.cap
+0002ba50: 6974 616c 697a 6528 6c6f 7765 7243 6173  italize(lowerCas
+0002ba60: 6554 7970 6529 2c20 2023 206c 696d 6974  eType),  # limit
+0002ba70: 206f 7220 6d61 726b 6574 0a20 2020 2020   or market.     
+0002ba80: 2020 2020 2020 2023 2027 7469 6d65 496e         # 'timeIn
+0002ba90: 466f 7263 6527 3a20 2747 5443 272c 2020  Force': 'GTC',  
+0002baa0: 2320 494f 432c 2046 4f4b 2c20 506f 7374  # IOC, FOK, Post
+0002bab0: 4f6e 6c79 0a20 2020 2020 2020 2020 2020  Only.           
+0002bac0: 2023 2027 7461 6b65 5072 6f66 6974 273a   # 'takeProfit':
+0002bad0: 2031 3233 2e34 352c 2020 2320 7461 6b65   123.45,  # take
+0002bae0: 2070 726f 6669 7420 7072 6963 652c 206f   profit price, o
+0002baf0: 6e6c 7920 7461 6b65 2065 6666 6563 7420  nly take effect 
+0002bb00: 7570 6f6e 206f 7065 6e69 6e67 2074 6865  upon opening the
+0002bb10: 2070 6f73 6974 696f 6e0a 2020 2020 2020   position.      
+0002bb20: 2020 2020 2020 2320 2773 746f 704c 6f73        # 'stopLos
+0002bb30: 7327 3a20 3132 332e 3435 2c20 2023 2073  s': 123.45,  # s
+0002bb40: 746f 7020 6c6f 7373 2070 7269 6365 2c20  top loss price, 
+0002bb50: 6f6e 6c79 2074 616b 6520 6566 6665 6374  only take effect
+0002bb60: 2075 706f 6e20 6f70 656e 696e 6720 7468   upon opening th
+0002bb70: 6520 706f 7369 7469 6f6e 0a20 2020 2020  e position.     
+0002bb80: 2020 2020 2020 2023 2027 7265 6475 6365         # 'reduce
+0002bb90: 4f6e 6c79 273a 2046 616c 7365 2c20 2023  Only': False,  #
+0002bba0: 2072 6564 7563 6520 6f6e 6c79 2c20 7265   reduce only, re
+0002bbb0: 7175 6972 6564 2066 6f72 206c 696e 6561  quired for linea
+0002bbc0: 7220 6f72 6465 7273 0a20 2020 2020 2020  r orders.       
+0002bbd0: 2020 2020 2023 2077 6865 6e20 6372 6561       # when crea
+0002bbe0: 7469 6e67 2061 2063 6c6f 7369 6e67 206f  ting a closing o
+0002bbf0: 7264 6572 2c20 6279 6269 7420 7265 636f  rder, bybit reco
+0002bc00: 6d6d 656e 6473 2061 2054 7275 6520 7661  mmends a True va
+0002bc10: 6c75 6520 666f 720a 2020 2020 2020 2020  lue for.        
+0002bc20: 2020 2020 2320 2063 6c6f 7365 4f6e 5472      #  closeOnTr
+0002bc30: 6967 6765 7220 746f 2061 766f 6964 2066  igger to avoid f
+0002bc40: 6169 6c69 6e67 2064 7565 2074 6f20 696e  ailing due to in
+0002bc50: 7375 6666 6963 6965 6e74 2061 7661 696c  sufficient avail
+0002bc60: 6162 6c65 206d 6172 6769 6e0a 2020 2020  able margin.    
+0002bc70: 2020 2020 2020 2020 2320 2763 6c6f 7365          # 'close
+0002bc80: 4f6e 5472 6967 6765 7227 3a20 4661 6c73  OnTrigger': Fals
+0002bc90: 652c 2072 6571 7569 7265 6420 666f 7220  e, required for 
+0002bca0: 6c69 6e65 6172 206f 7264 6572 730a 2020  linear orders.  
+0002bcb0: 2020 2020 2020 2020 2020 2320 276f 7264            # 'ord
+0002bcc0: 6572 4c69 6e6b 4964 273a 2027 7374 7269  erLinkId': 'stri
+0002bcd0: 6e67 272c 2020 2320 756e 6971 7565 2063  ng',  # unique c
+0002bce0: 6c69 656e 7420 6f72 6465 7220 6964 2c20  lient order id, 
+0002bcf0: 6d61 7820 3336 2063 6861 7261 6374 6572  max 36 character
+0002bd00: 730a 2020 2020 2020 2020 2020 2020 2320  s.            # 
+0002bd10: 2774 7269 6767 6572 5072 6963 6527 3a20  'triggerPrice': 
+0002bd20: 3132 332e 3435 2c20 2023 2074 7269 6767  123.45,  # trigg
+0002bd30: 6572 2070 7269 6365 2c20 7265 7175 6972  er price, requir
+0002bd40: 6564 2066 6f72 2063 6f6e 6469 7469 6f6e  ed for condition
+0002bd50: 616c 206f 7264 6572 730a 2020 2020 2020  al orders.      
+0002bd60: 2020 2020 2020 2320 2774 7269 6767 6572        # 'trigger
+0002bd70: 4279 273a 2027 4d61 726b 5072 6963 6527  By': 'MarkPrice'
+0002bd80: 2c20 2023 2049 6e64 6578 5072 6963 652c  ,  # IndexPrice,
+0002bd90: 204d 6172 6b50 7269 6365 2c20 4c61 7374   MarkPrice, Last
+0002bda0: 5072 6963 650a 2020 2020 2020 2020 2020  Price.          
+0002bdb0: 2020 2320 2774 7054 7269 6767 6572 6279    # 'tpTriggerby
+0002bdc0: 273a 2027 4d61 726b 5072 6963 6527 2c20  ': 'MarkPrice', 
+0002bdd0: 2023 2049 6e64 6578 5072 6963 652c 204d   # IndexPrice, M
+0002bde0: 6172 6b50 7269 6365 2c20 4c61 7374 5072  arkPrice, LastPr
+0002bdf0: 6963 650a 2020 2020 2020 2020 2020 2020  ice.            
+0002be00: 2320 2773 6c54 7269 6767 6572 4279 273a  # 'slTriggerBy':
+0002be10: 2027 4d61 726b 5072 6963 6527 2c20 2023   'MarkPrice',  #
+0002be20: 2049 6e64 6578 5072 6963 652c 204d 6172   IndexPrice, Mar
+0002be30: 6b50 7269 6365 2c20 4c61 7374 5072 6963  kPrice, LastPric
+0002be40: 650a 2020 2020 2020 2020 2020 2020 2320  e.            # 
+0002be50: 276d 6d70 273a 2046 616c 7365 2020 2320  'mmp': False  # 
+0002be60: 6d61 726b 6574 206d 616b 6572 2070 726f  market maker pro
+0002be70: 7465 6374 696f 6e0a 2020 2020 2020 2020  tection.        
+0002be80: 2020 2020 2320 2770 6f73 6974 696f 6e49      # 'positionI
+0002be90: 6478 273a 2030 2c20 2023 2050 6f73 6974  dx': 0,  # Posit
+0002bea0: 696f 6e20 6d6f 6465 2e20 556e 6966 6965  ion mode. Unifie
+0002beb0: 6420 6163 636f 756e 7420 6861 7320 6f6e  d account has on
+0002bec0: 652d 7761 7920 6d6f 6465 206f 6e6c 7928  e-way mode only(
+0002bed0: 3029 0a20 2020 2020 2020 2020 2020 2023  0).            #
+0002bee0: 2027 7472 6967 6765 7244 6972 6563 7469   'triggerDirecti
+0002bef0: 6f6e 273a 2031 2c20 2023 2043 6f6e 6469  on': 1,  # Condi
+0002bf00: 7469 6f6e 616c 206f 7264 6572 2070 6172  tional order par
+0002bf10: 616d 2e20 5573 6564 2074 6f20 6964 656e  am. Used to iden
+0002bf20: 7469 6679 2074 6865 2065 7870 6563 7465  tify the expecte
+0002bf30: 6420 6469 7265 6374 696f 6e20 6f66 2074  d direction of t
+0002bf40: 6865 2063 6f6e 6469 7469 6f6e 616c 206f  he conditional o
+0002bf50: 7264 6572 2e20 313a 2074 7269 6767 6572  rder. 1: trigger
+0002bf60: 6564 2077 6865 6e20 6d61 726b 6574 2070  ed when market p
+0002bf70: 7269 6365 2072 6973 6573 2074 6f20 7472  rice rises to tr
+0002bf80: 6967 6765 7250 7269 6365 2032 3a20 7472  iggerPrice 2: tr
+0002bf90: 6967 6765 7265 6420 7768 656e 206d 6172  iggered when mar
+0002bfa0: 6b65 7420 7072 6963 6520 6661 6c6c 7320  ket price falls 
+0002bfb0: 746f 2074 7269 6767 6572 5072 6963 650a  to triggerPrice.
+0002bfc0: 2020 2020 2020 2020 2020 2020 2320 5661              # Va
+0002bfd0: 6c69 6420 666f 7220 7370 6f74 206f 6e6c  lid for spot onl
+0002bfe0: 792e 0a20 2020 2020 2020 2020 2020 2023  y..            #
+0002bff0: 2027 6973 4c65 7665 7261 6765 273a 2030   'isLeverage': 0
+0002c000: 2c20 2023 2057 6865 7468 6572 2074 6f20  ,  # Whether to 
+0002c010: 626f 7272 6f77 2e20 3028 6465 6661 756c  borrow. 0(defaul
+0002c020: 7429 3a20 4661 6c73 652c 2031 3a20 5472  t): False, 1: Tr
+0002c030: 7565 0a20 2020 2020 2020 2020 2020 2023  ue.            #
+0002c040: 2027 6f72 6465 7246 696c 7465 7227 3a20   'orderFilter': 
+0002c050: 274f 7264 6572 2720 2023 204f 7264 6572  'Order'  # Order
+0002c060: 2c74 7073 6c4f 7264 6572 2e20 4966 206e  ,tpslOrder. If n
+0002c070: 6f74 2070 6173 7365 642c 204f 7264 6572  ot passed, Order
+0002c080: 2062 7920 6465 6661 756c 740a 2020 2020   by default.    
+0002c090: 2020 2020 2020 2020 2320 5661 6c69 6420          # Valid 
+0002c0a0: 666f 7220 6f70 7469 6f6e 206f 6e6c 792e  for option only.
+0002c0b0: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+0002c0c0: 6f72 6465 7249 7627 3a20 2730 272c 2020  orderIv': '0',  
+0002c0d0: 2320 496d 706c 6965 6420 766f 6c61 7469  # Implied volati
+0002c0e0: 6c69 7479 3b20 7061 7261 6d65 7465 7273  lity; parameters
+0002c0f0: 2061 7265 2070 6173 7365 6420 6163 636f   are passed acco
+0002c100: 7264 696e 6720 746f 2074 6865 2072 6561  rding to the rea
+0002c110: 6c20 7661 6c75 653b 2066 6f72 2065 7861  l value; for exa
+0002c120: 6d70 6c65 2c20 666f 7220 3130 252c 2030  mple, for 10%, 0
+0002c130: 2e31 2069 7320 7061 7373 6564 0a20 2020  .1 is passed.   
+0002c140: 2020 2020 207d 0a20 2020 2020 2020 2069       }.        i
+0002c150: 6620 6d61 726b 6574 5b27 7370 6f74 275d  f market['spot']
+0002c160: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+0002c170: 7175 6573 745b 2763 6174 6567 6f72 7927  quest['category'
+0002c180: 5d20 3d20 2773 706f 7427 0a20 2020 2020  ] = 'spot'.     
+0002c190: 2020 2065 6c69 6620 6d61 726b 6574 5b27     elif market['
+0002c1a0: 6c69 6e65 6172 275d 3a0a 2020 2020 2020  linear']:.      
+0002c1b0: 2020 2020 2020 7265 7175 6573 745b 2763        request['c
+0002c1c0: 6174 6567 6f72 7927 5d20 3d20 276c 696e  ategory'] = 'lin
+0002c1d0: 6561 7227 0a20 2020 2020 2020 2065 6c69  ear'.        eli
+0002c1e0: 6620 6d61 726b 6574 5b27 6f70 7469 6f6e  f market['option
+0002c1f0: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+0002c200: 7265 7175 6573 745b 2763 6174 6567 6f72  request['categor
+0002c210: 7927 5d20 3d20 276f 7074 696f 6e27 0a20  y'] = 'option'. 
+0002c220: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0002c230: 2020 2020 2020 2020 2072 6169 7365 204e           raise N
+0002c240: 6f74 5375 7070 6f72 7465 6428 7365 6c66  otSupported(self
+0002c250: 2e69 6420 2b20 2720 6372 6561 7465 4f72  .id + ' createOr
+0002c260: 6465 7220 646f 6573 206e 6f74 2061 6c6c  der does not all
+0002c270: 6f77 2069 6e76 6572 7365 206d 6172 6b65  ow inverse marke
+0002c280: 7420 6f72 6465 7273 2066 6f72 2027 202b  t orders for ' +
+0002c290: 2073 796d 626f 6c20 2b20 2720 6d61 726b   symbol + ' mark
+0002c2a0: 6574 7327 290a 2020 2020 2020 2020 6966  ets').        if
+0002c2b0: 206d 6172 6b65 745b 2773 706f 7427 5d20   market['spot'] 
+0002c2c0: 616e 6420 2874 7970 6520 3d3d 2027 6d61  and (type == 'ma
+0002c2d0: 726b 6574 2729 2061 6e64 2028 7369 6465  rket') and (side
+0002c2e0: 203d 3d20 2762 7579 2729 3a0a 2020 2020   == 'buy'):.    
+0002c2f0: 2020 2020 2020 2020 2320 666f 7220 6d61          # for ma
+0002c300: 726b 6574 2062 7579 2069 7420 7265 7175  rket buy it requ
+0002c310: 6972 6573 2074 6865 2061 6d6f 756e 7420  ires the amount 
+0002c320: 6f66 2071 756f 7465 2063 7572 7265 6e63  of quote currenc
+0002c330: 7920 746f 2073 7065 6e64 0a20 2020 2020  y to spend.     
+0002c340: 2020 2020 2020 2069 6620 7365 6c66 2e6f         if self.o
+0002c350: 7074 696f 6e73 5b27 6372 6561 7465 4d61  ptions['createMa
+0002c360: 726b 6574 4275 794f 7264 6572 5265 7175  rketBuyOrderRequ
+0002c370: 6972 6573 5072 6963 6527 5d3a 0a20 2020  iresPrice']:.   
+0002c380: 2020 2020 2020 2020 2020 2020 2063 6f73               cos
+0002c390: 7420 3d20 7365 6c66 2e73 6166 655f 6e75  t = self.safe_nu
+0002c3a0: 6d62 6572 2870 6172 616d 732c 2027 636f  mber(params, 'co
+0002c3b0: 7374 2729 0a20 2020 2020 2020 2020 2020  st').           
+0002c3c0: 2020 2020 2070 6172 616d 7320 3d20 7365       params = se
+0002c3d0: 6c66 2e6f 6d69 7428 7061 7261 6d73 2c20  lf.omit(params, 
+0002c3e0: 2763 6f73 7427 290a 2020 2020 2020 2020  'cost').        
+0002c3f0: 2020 2020 2020 2020 6966 2070 7269 6365          if price
+0002c400: 2069 7320 4e6f 6e65 2061 6e64 2063 6f73   is None and cos
+0002c410: 7420 6973 204e 6f6e 653a 0a20 2020 2020  t is None:.     
+0002c420: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0002c430: 6169 7365 2049 6e76 616c 6964 4f72 6465  aise InvalidOrde
+0002c440: 7228 7365 6c66 2e69 6420 2b20 2220 6372  r(self.id + " cr
+0002c450: 6561 7465 4f72 6465 7228 2920 7265 7175  eateOrder() requ
+0002c460: 6972 6573 2074 6865 2070 7269 6365 2061  ires the price a
+0002c470: 7267 756d 656e 7420 7769 7468 206d 6172  rgument with mar
+0002c480: 6b65 7420 6275 7920 6f72 6465 7273 2074  ket buy orders t
+0002c490: 6f20 6361 6c63 756c 6174 6520 746f 7461  o calculate tota
+0002c4a0: 6c20 6f72 6465 7220 636f 7374 2861 6d6f  l order cost(amo
+0002c4b0: 756e 7420 746f 2073 7065 6e64 292c 2077  unt to spend), w
+0002c4c0: 6865 7265 2063 6f73 7420 3d20 616d 6f75  here cost = amou
+0002c4d0: 6e74 202a 2070 7269 6365 2e20 5375 7070  nt * price. Supp
+0002c4e0: 6c79 2061 2070 7269 6365 2061 7267 756d  ly a price argum
+0002c4f0: 656e 7420 746f 2063 7265 6174 654f 7264  ent to createOrd
+0002c500: 6572 2829 2063 616c 6c20 6966 2079 6f75  er() call if you
+0002c510: 2077 616e 7420 7468 6520 636f 7374 2074   want the cost t
+0002c520: 6f20 6265 2063 616c 6375 6c61 7465 6420  o be calculated 
+0002c530: 666f 7220 796f 7520 6672 6f6d 2070 7269  for you from pri
+0002c540: 6365 2061 6e64 2061 6d6f 756e 742c 206f  ce and amount, o
+0002c550: 722c 2061 6c74 6572 6e61 7469 7665 6c79  r, alternatively
+0002c560: 2c20 6164 6420 2e6f 7074 696f 6e73 5b27  , add .options['
+0002c570: 6372 6561 7465 4d61 726b 6574 4275 794f  createMarketBuyO
+0002c580: 7264 6572 5265 7175 6972 6573 5072 6963  rderRequiresPric
+0002c590: 6527 5d20 3d20 4661 6c73 6520 746f 2073  e'] = False to s
+0002c5a0: 7570 706c 7920 7468 6520 636f 7374 2069  upply the cost i
+0002c5b0: 6e20 7468 6520 616d 6f75 6e74 2061 7267  n the amount arg
+0002c5c0: 756d 656e 7428 7468 6520 6578 6368 616e  ument(the exchan
+0002c5d0: 6765 2d73 7065 6369 6669 6320 6265 6861  ge-specific beha
+0002c5e0: 7669 6f75 7229 2229 0a20 2020 2020 2020  viour)").       
+0002c5f0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+0002c600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c610: 2020 2061 6d6f 756e 7453 7472 696e 6720     amountString 
+0002c620: 3d20 7365 6c66 2e6e 756d 6265 725f 746f  = self.number_to
+0002c630: 5f73 7472 696e 6728 616d 6f75 6e74 290a  _string(amount).
+0002c640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c650: 2020 2020 7072 6963 6553 7472 696e 6720      priceString 
+0002c660: 3d20 7365 6c66 2e6e 756d 6265 725f 746f  = self.number_to
+0002c670: 5f73 7472 696e 6728 7072 6963 6529 0a20  _string(price). 
+0002c680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c690: 2020 2071 756f 7465 416d 6f75 6e74 203d     quoteAmount =
+0002c6a0: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
+0002c6b0: 6d75 6c28 616d 6f75 6e74 5374 7269 6e67  mul(amountString
+0002c6c0: 2c20 7072 6963 6553 7472 696e 6729 0a20  , priceString). 
+0002c6d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c6e0: 2020 2061 6d6f 756e 7420 3d20 636f 7374     amount = cost
+0002c6f0: 2069 6620 2863 6f73 7420 6973 206e 6f74   if (cost is not
+0002c700: 204e 6f6e 6529 2065 6c73 6520 7365 6c66   None) else self
+0002c710: 2e70 6172 7365 5f6e 756d 6265 7228 7175  .parse_number(qu
+0002c720: 6f74 6541 6d6f 756e 7429 0a20 2020 2020  oteAmount).     
+0002c730: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0002c740: 6571 7565 7374 5b27 7174 7927 5d20 3d20  equest['qty'] = 
+0002c750: 7365 6c66 2e63 6f73 745f 746f 5f70 7265  self.cost_to_pre
+0002c760: 6369 7369 6f6e 2873 796d 626f 6c2c 2061  cision(symbol, a
+0002c770: 6d6f 756e 7429 0a20 2020 2020 2020 2020  mount).         
+0002c780: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0002c790: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0002c7a0: 5b27 7174 7927 5d20 3d20 7365 6c66 2e63  ['qty'] = self.c
+0002c7b0: 6f73 745f 746f 5f70 7265 6369 7369 6f6e  ost_to_precision
+0002c7c0: 2873 796d 626f 6c2c 2061 6d6f 756e 7429  (symbol, amount)
+0002c7d0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+0002c7e0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+0002c7f0: 7374 5b27 7174 7927 5d20 3d20 7365 6c66  st['qty'] = self
+0002c800: 2e61 6d6f 756e 745f 746f 5f70 7265 6369  .amount_to_preci
+0002c810: 7369 6f6e 2873 796d 626f 6c2c 2061 6d6f  sion(symbol, amo
+0002c820: 756e 7429 0a20 2020 2020 2020 2069 734d  unt).        isM
+0002c830: 6172 6b65 7420 3d20 6c6f 7765 7243 6173  arket = lowerCas
+0002c840: 6554 7970 6520 3d3d 2027 6d61 726b 6574  eType == 'market
+0002c850: 270a 2020 2020 2020 2020 6973 4c69 6d69  '.        isLimi
+0002c860: 7420 3d20 6c6f 7765 7243 6173 6554 7970  t = lowerCaseTyp
+0002c870: 6520 3d3d 2027 6c69 6d69 7427 0a20 2020  e == 'limit'.   
+0002c880: 2020 2020 2069 6620 6973 4c69 6d69 743a       if isLimit:
+0002c890: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+0002c8a0: 7565 7374 5b27 7072 6963 6527 5d20 3d20  uest['price'] = 
+0002c8b0: 7365 6c66 2e70 7269 6365 5f74 6f5f 7072  self.price_to_pr
+0002c8c0: 6563 6973 696f 6e28 7379 6d62 6f6c 2c20  ecision(symbol, 
+0002c8d0: 7072 6963 6529 0a20 2020 2020 2020 2074  price).        t
+0002c8e0: 696d 6549 6e46 6f72 6365 203d 2073 656c  imeInForce = sel
+0002c8f0: 662e 7361 6665 5f73 7472 696e 675f 6c6f  f.safe_string_lo
+0002c900: 7765 7228 7061 7261 6d73 2c20 2774 696d  wer(params, 'tim
+0002c910: 6549 6e46 6f72 6365 2729 2020 2320 7365  eInForce')  # se
+0002c920: 6c66 2069 7320 7361 6d65 2073 7065 6369  lf is same speci
+0002c930: 6669 6320 7061 7261 6d0a 2020 2020 2020  fic param.      
+0002c940: 2020 706f 7374 4f6e 6c79 203d 204e 6f6e    postOnly = Non
+0002c950: 650a 2020 2020 2020 2020 706f 7374 4f6e  e.        postOn
+0002c960: 6c79 2c20 7061 7261 6d73 203d 2073 656c  ly, params = sel
+0002c970: 662e 6861 6e64 6c65 5f70 6f73 745f 6f6e  f.handle_post_on
+0002c980: 6c79 2869 734d 6172 6b65 742c 2074 696d  ly(isMarket, tim
+0002c990: 6549 6e46 6f72 6365 203d 3d20 2750 6f73  eInForce == 'Pos
+0002c9a0: 744f 6e6c 7927 2c20 7061 7261 6d73 290a  tOnly', params).
+0002c9b0: 2020 2020 2020 2020 6966 2070 6f73 744f          if postO
+0002c9c0: 6e6c 793a 0a20 2020 2020 2020 2020 2020  nly:.           
+0002c9d0: 2072 6571 7565 7374 5b27 7469 6d65 496e   request['timeIn
+0002c9e0: 466f 7263 6527 5d20 3d20 2750 6f73 744f  Force'] = 'PostO
+0002c9f0: 6e6c 7927 0a20 2020 2020 2020 2065 6c69  nly'.        eli
+0002ca00: 6620 7469 6d65 496e 466f 7263 6520 3d3d  f timeInForce ==
+0002ca10: 2027 6774 6327 3a0a 2020 2020 2020 2020   'gtc':.        
+0002ca20: 2020 2020 7265 7175 6573 745b 2774 696d      request['tim
+0002ca30: 6549 6e46 6f72 6365 275d 203d 2027 4754  eInForce'] = 'GT
+0002ca40: 4327 0a20 2020 2020 2020 2065 6c69 6620  C'.        elif 
+0002ca50: 7469 6d65 496e 466f 7263 6520 3d3d 2027  timeInForce == '
+0002ca60: 666f 6b27 3a0a 2020 2020 2020 2020 2020  fok':.          
+0002ca70: 2020 7265 7175 6573 745b 2774 696d 6549    request['timeI
+0002ca80: 6e46 6f72 6365 275d 203d 2027 464f 4b27  nForce'] = 'FOK'
+0002ca90: 0a20 2020 2020 2020 2065 6c69 6620 7469  .        elif ti
+0002caa0: 6d65 496e 466f 7263 6520 3d3d 2027 696f  meInForce == 'io
+0002cab0: 6327 3a0a 2020 2020 2020 2020 2020 2020  c':.            
+0002cac0: 7265 7175 6573 745b 2774 696d 6549 6e46  request['timeInF
+0002cad0: 6f72 6365 275d 203d 2027 494f 4327 0a20  orce'] = 'IOC'. 
+0002cae0: 2020 2020 2020 2074 7269 6767 6572 5072         triggerPr
+0002caf0: 6963 6520 3d20 7365 6c66 2e73 6166 655f  ice = self.safe_
+0002cb00: 6e75 6d62 6572 5f32 2870 6172 616d 732c  number_2(params,
+0002cb10: 2027 7472 6967 6765 7250 7269 6365 272c   'triggerPrice',
+0002cb20: 2027 7374 6f70 5072 6963 6527 290a 2020   'stopPrice').  
+0002cb30: 2020 2020 2020 7374 6f70 4c6f 7373 5472        stopLossTr
+0002cb40: 6967 6765 7250 7269 6365 203d 2073 656c  iggerPrice = sel
+0002cb50: 662e 7361 6665 5f6e 756d 6265 7228 7061  f.safe_number(pa
+0002cb60: 7261 6d73 2c20 2773 746f 704c 6f73 7350  rams, 'stopLossP
+0002cb70: 7269 6365 2729 0a20 2020 2020 2020 2074  rice').        t
+0002cb80: 616b 6550 726f 6669 7454 7269 6767 6572  akeProfitTrigger
+0002cb90: 5072 6963 6520 3d20 7365 6c66 2e73 6166  Price = self.saf
+0002cba0: 655f 6e75 6d62 6572 2870 6172 616d 732c  e_number(params,
+0002cbb0: 2027 7461 6b65 5072 6f66 6974 5072 6963   'takeProfitPric
+0002cbc0: 6527 290a 2020 2020 2020 2020 7374 6f70  e').        stop
+0002cbd0: 4c6f 7373 203d 2073 656c 662e 7361 6665  Loss = self.safe
+0002cbe0: 5f6e 756d 6265 7228 7061 7261 6d73 2c20  _number(params, 
+0002cbf0: 2773 746f 704c 6f73 7327 290a 2020 2020  'stopLoss').    
+0002cc00: 2020 2020 7461 6b65 5072 6f66 6974 203d      takeProfit =
+0002cc10: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
+0002cc20: 7228 7061 7261 6d73 2c20 2774 616b 6550  r(params, 'takeP
+0002cc30: 726f 6669 7427 290a 2020 2020 2020 2020  rofit').        
+0002cc40: 6973 5374 6f70 4c6f 7373 5472 6967 6765  isStopLossTrigge
+0002cc50: 724f 7264 6572 203d 2073 746f 704c 6f73  rOrder = stopLos
+0002cc60: 7354 7269 6767 6572 5072 6963 6520 6973  sTriggerPrice is
+0002cc70: 206e 6f74 204e 6f6e 650a 2020 2020 2020   not None.      
+0002cc80: 2020 6973 5461 6b65 5072 6f66 6974 5472    isTakeProfitTr
+0002cc90: 6967 6765 724f 7264 6572 203d 2074 616b  iggerOrder = tak
+0002cca0: 6550 726f 6669 7454 7269 6767 6572 5072  eProfitTriggerPr
+0002ccb0: 6963 6520 6973 206e 6f74 204e 6f6e 650a  ice is not None.
+0002ccc0: 2020 2020 2020 2020 6973 5374 6f70 4c6f          isStopLo
+0002ccd0: 7373 203d 2073 746f 704c 6f73 7320 6973  ss = stopLoss is
+0002cce0: 206e 6f74 204e 6f6e 650a 2020 2020 2020   not None.      
+0002ccf0: 2020 6973 5461 6b65 5072 6f66 6974 203d    isTakeProfit =
+0002cd00: 2074 616b 6550 726f 6669 7420 6973 206e   takeProfit is n
+0002cd10: 6f74 204e 6f6e 650a 2020 2020 2020 2020  ot None.        
+0002cd20: 6973 4275 7920 3d20 7369 6465 203d 3d20  isBuy = side == 
+0002cd30: 2762 7579 270a 2020 2020 2020 2020 6173  'buy'.        as
+0002cd40: 6365 6e64 696e 6720 3d20 6e6f 7420 6973  cending = not is
+0002cd50: 4275 7920 6966 2073 746f 704c 6f73 7354  Buy if stopLossT
+0002cd60: 7269 6767 6572 5072 6963 6520 656c 7365  riggerPrice else
+0002cd70: 2069 7342 7579 0a20 2020 2020 2020 2069   isBuy.        i
+0002cd80: 6620 7472 6967 6765 7250 7269 6365 2069  f triggerPrice i
+0002cd90: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0002cda0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+0002cdb0: 2774 7269 6767 6572 4469 7265 6374 696f  'triggerDirectio
+0002cdc0: 6e27 5d20 3d20 3220 6966 2061 7363 656e  n'] = 2 if ascen
+0002cdd0: 6469 6e67 2065 6c73 6520 310a 2020 2020  ding else 1.    
+0002cde0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+0002cdf0: 2774 7269 6767 6572 5072 6963 6527 5d20  'triggerPrice'] 
+0002ce00: 3d20 7365 6c66 2e70 7269 6365 5f74 6f5f  = self.price_to_
+0002ce10: 7072 6563 6973 696f 6e28 7379 6d62 6f6c  precision(symbol
+0002ce20: 2c20 7472 6967 6765 7250 7269 6365 290a  , triggerPrice).
+0002ce30: 2020 2020 2020 2020 656c 6966 2069 7353          elif isS
+0002ce40: 746f 704c 6f73 7354 7269 6767 6572 4f72  topLossTriggerOr
+0002ce50: 6465 7220 6f72 2069 7354 616b 6550 726f  der or isTakePro
+0002ce60: 6669 7454 7269 6767 6572 4f72 6465 723a  fitTriggerOrder:
+0002ce70: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+0002ce80: 7565 7374 5b27 7472 6967 6765 7244 6972  uest['triggerDir
+0002ce90: 6563 7469 6f6e 275d 203d 2032 2069 6620  ection'] = 2 if 
+0002cea0: 6173 6365 6e64 696e 6720 656c 7365 2031  ascending else 1
+0002ceb0: 0a20 2020 2020 2020 2020 2020 2074 7269  .            tri
+0002cec0: 6767 6572 5072 6963 6520 3d20 7374 6f70  ggerPrice = stop
+0002ced0: 4c6f 7373 5472 6967 6765 7250 7269 6365  LossTriggerPrice
+0002cee0: 2069 6620 6973 5374 6f70 4c6f 7373 5472   if isStopLossTr
+0002cef0: 6967 6765 724f 7264 6572 2065 6c73 6520  iggerOrder else 
+0002cf00: 7461 6b65 5072 6f66 6974 5472 6967 6765  takeProfitTrigge
+0002cf10: 7250 7269 6365 0a20 2020 2020 2020 2020  rPrice.         
+0002cf20: 2020 2072 6571 7565 7374 5b27 7472 6967     request['trig
+0002cf30: 6765 7250 7269 6365 275d 203d 2073 656c  gerPrice'] = sel
+0002cf40: 662e 7072 6963 655f 746f 5f70 7265 6369  f.price_to_preci
+0002cf50: 7369 6f6e 2873 796d 626f 6c2c 2074 7269  sion(symbol, tri
+0002cf60: 6767 6572 5072 6963 6529 0a20 2020 2020  ggerPrice).     
+0002cf70: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+0002cf80: 7265 6475 6365 4f6e 6c79 275d 203d 2054  reduceOnly'] = T
+0002cf90: 7275 650a 2020 2020 2020 2020 656c 6966  rue.        elif
+0002cfa0: 2069 7353 746f 704c 6f73 7320 6f72 2069   isStopLoss or i
+0002cfb0: 7354 616b 6550 726f 6669 743a 0a20 2020  sTakeProfit:.   
+0002cfc0: 2020 2020 2020 2020 2069 6620 6973 5374           if isSt
+0002cfd0: 6f70 4c6f 7373 3a0a 2020 2020 2020 2020  opLoss:.        
+0002cfe0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+0002cff0: 2773 746f 704c 6f73 7327 5d20 3d20 7365  'stopLoss'] = se
+0002d000: 6c66 2e70 7269 6365 5f74 6f5f 7072 6563  lf.price_to_prec
+0002d010: 6973 696f 6e28 7379 6d62 6f6c 2c20 7374  ision(symbol, st
+0002d020: 6f70 4c6f 7373 290a 2020 2020 2020 2020  opLoss).        
+0002d030: 2020 2020 6966 2069 7354 616b 6550 726f      if isTakePro
+0002d040: 6669 743a 0a20 2020 2020 2020 2020 2020  fit:.           
+0002d050: 2020 2020 2072 6571 7565 7374 5b27 7461       request['ta
+0002d060: 6b65 5072 6f66 6974 275d 203d 2073 656c  keProfit'] = sel
+0002d070: 662e 7072 6963 655f 746f 5f70 7265 6369  f.price_to_preci
+0002d080: 7369 6f6e 2873 796d 626f 6c2c 2074 616b  sion(symbol, tak
+0002d090: 6550 726f 6669 7429 0a20 2020 2020 2020  eProfit).       
+0002d0a0: 2069 6620 6d61 726b 6574 5b27 7370 6f74   if market['spot
+0002d0b0: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+0002d0c0: 2320 6f6e 6c79 2077 6f72 6b73 2066 6f72  # only works for
+0002d0d0: 2073 706f 7420 6d61 726b 6574 0a20 2020   spot market.   
+0002d0e0: 2020 2020 2020 2020 2069 6620 7472 6967           if trig
+0002d0f0: 6765 7250 7269 6365 2069 7320 6e6f 7420  gerPrice is not 
+0002d100: 4e6f 6e65 206f 7220 7374 6f70 4c6f 7373  None or stopLoss
+0002d110: 5472 6967 6765 7250 7269 6365 2069 7320  TriggerPrice is 
+0002d120: 6e6f 7420 4e6f 6e65 206f 7220 7461 6b65  not None or take
+0002d130: 5072 6f66 6974 5472 6967 6765 7250 7269  ProfitTriggerPri
+0002d140: 6365 2069 7320 6e6f 7420 4e6f 6e65 206f  ce is not None o
+0002d150: 7220 6973 5374 6f70 4c6f 7373 206f 7220  r isStopLoss or 
+0002d160: 6973 5461 6b65 5072 6f66 6974 3a0a 2020  isTakeProfit:.  
+0002d170: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0002d180: 7175 6573 745b 276f 7264 6572 4669 6c74  quest['orderFilt
+0002d190: 6572 275d 203d 2027 7470 736c 4f72 6465  er'] = 'tpslOrde
+0002d1a0: 7227 0a20 2020 2020 2020 2063 6c69 656e  r'.        clien
+0002d1b0: 744f 7264 6572 4964 203d 2073 656c 662e  tOrderId = self.
+0002d1c0: 7361 6665 5f73 7472 696e 6728 7061 7261  safe_string(para
+0002d1d0: 6d73 2c20 2763 6c69 656e 744f 7264 6572  ms, 'clientOrder
+0002d1e0: 4964 2729 0a20 2020 2020 2020 2069 6620  Id').        if 
+0002d1f0: 636c 6965 6e74 4f72 6465 7249 6420 6973  clientOrderId is
+0002d200: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+0002d210: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+0002d220: 6f72 6465 724c 696e 6b49 6427 5d20 3d20  orderLinkId'] = 
+0002d230: 636c 6965 6e74 4f72 6465 7249 640a 2020  clientOrderId.  
+0002d240: 2020 2020 2020 656c 6966 206d 6172 6b65        elif marke
+0002d250: 745b 276f 7074 696f 6e27 5d3a 0a20 2020  t['option']:.   
+0002d260: 2020 2020 2020 2020 2023 206d 616e 6461           # manda
+0002d270: 746f 7279 2066 6965 6c64 2066 6f72 206f  tory field for o
+0002d280: 7074 696f 6e73 0a20 2020 2020 2020 2020  ptions.         
+0002d290: 2020 2072 6571 7565 7374 5b27 6f72 6465     request['orde
+0002d2a0: 724c 696e 6b49 6427 5d20 3d20 7365 6c66  rLinkId'] = self
+0002d2b0: 2e75 7569 6431 3628 290a 2020 2020 2020  .uuid16().      
+0002d2c0: 2020 7061 7261 6d73 203d 2073 656c 662e    params = self.
+0002d2d0: 6f6d 6974 2870 6172 616d 732c 205b 2773  omit(params, ['s
+0002d2e0: 746f 7050 7269 6365 272c 2027 7469 6d65  topPrice', 'time
+0002d2f0: 496e 466f 7263 6527 2c20 2773 746f 704c  InForce', 'stopL
+0002d300: 6f73 7350 7269 6365 272c 2027 7461 6b65  ossPrice', 'take
+0002d310: 5072 6f66 6974 5072 6963 6527 2c20 2770  ProfitPrice', 'p
+0002d320: 6f73 744f 6e6c 7927 2c20 2763 6c69 656e  ostOnly', 'clien
+0002d330: 744f 7264 6572 4964 272c 2027 7472 6967  tOrderId', 'trig
+0002d340: 6765 7250 7269 6365 272c 2027 7374 6f70  gerPrice', 'stop
+0002d350: 4c6f 7373 272c 2027 7461 6b65 5072 6f66  Loss', 'takeProf
+0002d360: 6974 275d 290a 2020 2020 2020 2020 7265  it']).        re
+0002d370: 7370 6f6e 7365 203d 2061 7761 6974 2073  sponse = await s
+0002d380: 656c 662e 7072 6976 6174 6550 6f73 7456  elf.privatePostV
+0002d390: 354f 7264 6572 4372 6561 7465 2873 656c  5OrderCreate(sel
+0002d3a0: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
+0002d3b0: 2c20 7061 7261 6d73 2929 0a20 2020 2020  , params)).     
+0002d3c0: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
+0002d3d0: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
+0002d3e0: 2020 2020 2020 2022 7265 7443 6f64 6522         "retCode"
+0002d3f0: 3a20 302c 0a20 2020 2020 2020 2023 2020  : 0,.        #  
+0002d400: 2020 2020 2020 2022 7265 744d 7367 223a         "retMsg":
+0002d410: 2022 4f4b 222c 0a20 2020 2020 2020 2023   "OK",.        #
+0002d420: 2020 2020 2020 2020 2022 7265 7375 6c74           "result
+0002d430: 223a 207b 0a20 2020 2020 2020 2023 2020  ": {.        #  
+0002d440: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
+0002d450: 7249 6422 3a20 2231 3332 3130 3033 3734  rId": "132100374
+0002d460: 3933 3836 3332 3735 3532 222c 0a20 2020  9386327552",.   
+0002d470: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0002d480: 2020 2022 6f72 6465 724c 696e 6b49 6422     "orderLinkId"
+0002d490: 3a20 2273 706f 742d 7465 7374 2d70 6f73  : "spot-test-pos
+0002d4a0: 746f 6e6c 7922 0a20 2020 2020 2020 2023  tonly".        #
+0002d4b0: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
+0002d4c0: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
+0002d4d0: 6574 4578 7449 6e66 6f22 3a20 7b7d 2c0a  etExtInfo": {},.
+0002d4e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0002d4f0: 2020 2274 696d 6522 3a20 3136 3732 3231    "time": 167221
+0002d500: 3139 3138 3437 310a 2020 2020 2020 2020  1918471.        
+0002d510: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
+0002d520: 230a 2020 2020 2020 2020 6f72 6465 7220  #.        order 
+0002d530: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+0002d540: 6528 7265 7370 6f6e 7365 2c20 2772 6573  e(response, 'res
+0002d550: 756c 7427 2c20 7b7d 290a 2020 2020 2020  ult', {}).      
+0002d560: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
+0002d570: 7273 655f 6f72 6465 7228 6f72 6465 7229  rse_order(order)
+0002d580: 0a0a 2020 2020 6173 796e 6320 6465 6620  ..    async def 
+0002d590: 6372 6561 7465 5f73 706f 745f 6f72 6465  create_spot_orde
+0002d5a0: 7228 7365 6c66 2c20 7379 6d62 6f6c 3a20  r(self, symbol: 
+0002d5b0: 7374 722c 2074 7970 652c 2073 6964 652c  str, type, side,
+0002d5c0: 2061 6d6f 756e 742c 2070 7269 6365 3d4e   amount, price=N
+0002d5d0: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
+0002d5e0: 0a20 2020 2020 2020 2061 7761 6974 2073  .        await s
+0002d5f0: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
+0002d600: 2829 0a20 2020 2020 2020 206d 6172 6b65  ().        marke
+0002d610: 7420 3d20 7365 6c66 2e6d 6172 6b65 7428  t = self.market(
+0002d620: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
+0002d630: 7570 7065 7243 6173 6554 7970 6520 3d20  upperCaseType = 
+0002d640: 7479 7065 2e75 7070 6572 2829 0a20 2020  type.upper().   
+0002d650: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
+0002d660: 0a20 2020 2020 2020 2020 2020 2027 7379  .            'sy
+0002d670: 6d62 6f6c 273a 206d 6172 6b65 745b 2769  mbol': market['i
+0002d680: 6427 5d2c 0a20 2020 2020 2020 2020 2020  d'],.           
+0002d690: 2027 7369 6465 273a 2073 656c 662e 6361   'side': self.ca
+0002d6a0: 7069 7461 6c69 7a65 2873 6964 6529 2c0a  pitalize(side),.
+0002d6b0: 2020 2020 2020 2020 2020 2020 276f 7264              'ord
+0002d6c0: 6572 5479 7065 273a 2075 7070 6572 4361  erType': upperCa
+0002d6d0: 7365 5479 7065 2c20 2023 206c 696d 6974  seType,  # limit
+0002d6e0: 2c20 6d61 726b 6574 206f 7220 6c69 6d69  , market or limi
+0002d6f0: 745f 6d61 6b65 720a 2020 2020 2020 2020  t_maker.        
+0002d700: 2020 2020 2774 696d 6549 6e46 6f72 6365      'timeInForce
+0002d710: 273a 2027 4754 4327 2c20 2023 2046 4f4b  ': 'GTC',  # FOK
+0002d720: 2c20 494f 430a 2020 2020 2020 2020 2020  , IOC.          
+0002d730: 2020 2320 276f 7264 6572 4c69 6e6b 4964    # 'orderLinkId
+0002d740: 273a 2027 7374 7269 6e67 272c 2020 2320  ': 'string',  # 
+0002d750: 756e 6971 7565 2063 6c69 656e 7420 6f72  unique client or
+0002d760: 6465 7220 6964 2c20 6d61 7820 3336 2063  der id, max 36 c
+0002d770: 6861 7261 6374 6572 730a 2020 2020 2020  haracters.      
+0002d780: 2020 7d0a 2020 2020 2020 2020 6966 2028    }.        if (
+0002d790: 7479 7065 203d 3d20 276d 6172 6b65 7427  type == 'market'
+0002d7a0: 2920 616e 6420 2873 6964 6520 3d3d 2027  ) and (side == '
+0002d7b0: 6275 7927 293a 0a20 2020 2020 2020 2020  buy'):.         
+0002d7c0: 2020 2023 2066 6f72 206d 6172 6b65 7420     # for market 
+0002d7d0: 6275 7920 6974 2072 6571 7569 7265 7320  buy it requires 
+0002d7e0: 7468 6520 616d 6f75 6e74 206f 6620 7175  the amount of qu
+0002d7f0: 6f74 6520 6375 7272 656e 6379 2074 6f20  ote currency to 
+0002d800: 7370 656e 640a 2020 2020 2020 2020 2020  spend.          
+0002d810: 2020 6966 2073 656c 662e 6f70 7469 6f6e    if self.option
+0002d820: 735b 2763 7265 6174 654d 6172 6b65 7442  s['createMarketB
+0002d830: 7579 4f72 6465 7252 6571 7569 7265 7350  uyOrderRequiresP
+0002d840: 7269 6365 275d 3a0a 2020 2020 2020 2020  rice']:.        
+0002d850: 2020 2020 2020 2020 636f 7374 203d 2073          cost = s
+0002d860: 656c 662e 7361 6665 5f6e 756d 6265 7228  elf.safe_number(
+0002d870: 7061 7261 6d73 2c20 2763 6f73 7427 290a  params, 'cost').
+0002d880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d890: 7061 7261 6d73 203d 2073 656c 662e 6f6d  params = self.om
+0002d8a0: 6974 2870 6172 616d 732c 2027 636f 7374  it(params, 'cost
+0002d8b0: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
+0002d8c0: 2020 2069 6620 7072 6963 6520 6973 204e     if price is N
+0002d8d0: 6f6e 6520 616e 6420 636f 7374 2069 7320  one and cost is 
+0002d8e0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+0002d8f0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+0002d900: 496e 7661 6c69 644f 7264 6572 2873 656c  InvalidOrder(sel
+0002d910: 662e 6964 202b 2022 2063 7265 6174 654f  f.id + " createO
+0002d920: 7264 6572 2829 2072 6571 7569 7265 7320  rder() requires 
+0002d930: 7468 6520 7072 6963 6520 6172 6775 6d65  the price argume
+0002d940: 6e74 2077 6974 6820 6d61 726b 6574 2062  nt with market b
+0002d950: 7579 206f 7264 6572 7320 746f 2063 616c  uy orders to cal
+0002d960: 6375 6c61 7465 2074 6f74 616c 206f 7264  culate total ord
+0002d970: 6572 2063 6f73 7428 616d 6f75 6e74 2074  er cost(amount t
+0002d980: 6f20 7370 656e 6429 2c20 7768 6572 6520  o spend), where 
+0002d990: 636f 7374 203d 2061 6d6f 756e 7420 2a20  cost = amount * 
+0002d9a0: 7072 6963 652e 2053 7570 706c 7920 6120  price. Supply a 
+0002d9b0: 7072 6963 6520 6172 6775 6d65 6e74 2074  price argument t
+0002d9c0: 6f20 6372 6561 7465 4f72 6465 7228 2920  o createOrder() 
+0002d9d0: 6361 6c6c 2069 6620 796f 7520 7761 6e74  call if you want
+0002d9e0: 2074 6865 2063 6f73 7420 746f 2062 6520   the cost to be 
+0002d9f0: 6361 6c63 756c 6174 6564 2066 6f72 2079  calculated for y
+0002da00: 6f75 2066 726f 6d20 7072 6963 6520 616e  ou from price an
+0002da10: 6420 616d 6f75 6e74 2c20 6f72 2c20 616c  d amount, or, al
+0002da20: 7465 726e 6174 6976 656c 792c 2061 6464  ternatively, add
+0002da30: 202e 6f70 7469 6f6e 735b 2763 7265 6174   .options['creat
+0002da40: 654d 6172 6b65 7442 7579 4f72 6465 7252  eMarketBuyOrderR
+0002da50: 6571 7569 7265 7350 7269 6365 275d 203d  equiresPrice'] =
+0002da60: 2046 616c 7365 2074 6f20 7375 7070 6c79   False to supply
+0002da70: 2074 6865 2063 6f73 7420 696e 2074 6865   the cost in the
+0002da80: 2061 6d6f 756e 7420 6172 6775 6d65 6e74   amount argument
+0002da90: 2874 6865 2065 7863 6861 6e67 652d 7370  (the exchange-sp
+0002daa0: 6563 6966 6963 2062 6568 6176 696f 7572  ecific behaviour
+0002dab0: 2922 290a 2020 2020 2020 2020 2020 2020  )").            
+0002dac0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0002dad0: 2020 2020 2020 2020 2020 2020 2020 616d                am
+0002dae0: 6f75 6e74 5374 7269 6e67 203d 2073 656c  ountString = sel
+0002daf0: 662e 6e75 6d62 6572 5f74 6f5f 7374 7269  f.number_to_stri
+0002db00: 6e67 2861 6d6f 756e 7429 0a20 2020 2020  ng(amount).     
+0002db10: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+0002db20: 7269 6365 5374 7269 6e67 203d 2073 656c  riceString = sel
+0002db30: 662e 6e75 6d62 6572 5f74 6f5f 7374 7269  f.number_to_stri
+0002db40: 6e67 2870 7269 6365 290a 2020 2020 2020  ng(price).      
+0002db50: 2020 2020 2020 2020 2020 2020 2020 7175                qu
+0002db60: 6f74 6541 6d6f 756e 7420 3d20 5072 6563  oteAmount = Prec
+0002db70: 6973 652e 7374 7269 6e67 5f6d 756c 2861  ise.string_mul(a
+0002db80: 6d6f 756e 7453 7472 696e 672c 2070 7269  mountString, pri
+0002db90: 6365 5374 7269 6e67 290a 2020 2020 2020  ceString).      
+0002dba0: 2020 2020 2020 2020 2020 2020 2020 616d                am
+0002dbb0: 6f75 6e74 203d 2063 6f73 7420 6966 2028  ount = cost if (
+0002dbc0: 636f 7374 2069 7320 6e6f 7420 4e6f 6e65  cost is not None
+0002dbd0: 2920 656c 7365 2073 656c 662e 7061 7273  ) else self.pars
+0002dbe0: 655f 6e75 6d62 6572 2871 756f 7465 416d  e_number(quoteAm
+0002dbf0: 6f75 6e74 290a 2020 2020 2020 2020 2020  ount).          
+0002dc00: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+0002dc10: 745b 276f 7264 6572 5174 7927 5d20 3d20  t['orderQty'] = 
+0002dc20: 7365 6c66 2e63 6f73 745f 746f 5f70 7265  self.cost_to_pre
+0002dc30: 6369 7369 6f6e 2873 796d 626f 6c2c 2061  cision(symbol, a
+0002dc40: 6d6f 756e 7429 0a20 2020 2020 2020 2020  mount).         
+0002dc50: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0002dc60: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0002dc70: 5b27 6f72 6465 7251 7479 275d 203d 2073  ['orderQty'] = s
+0002dc80: 656c 662e 636f 7374 5f74 6f5f 7072 6563  elf.cost_to_prec
+0002dc90: 6973 696f 6e28 7379 6d62 6f6c 2c20 616d  ision(symbol, am
+0002dca0: 6f75 6e74 290a 2020 2020 2020 2020 656c  ount).        el
+0002dcb0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0002dcc0: 7265 7175 6573 745b 276f 7264 6572 5174  request['orderQt
+0002dcd0: 7927 5d20 3d20 7365 6c66 2e61 6d6f 756e  y'] = self.amoun
+0002dce0: 745f 746f 5f70 7265 6369 7369 6f6e 2873  t_to_precision(s
+0002dcf0: 796d 626f 6c2c 2061 6d6f 756e 7429 0a20  ymbol, amount). 
+0002dd00: 2020 2020 2020 2069 6620 2875 7070 6572         if (upper
+0002dd10: 4361 7365 5479 7065 203d 3d20 274c 494d  CaseType == 'LIM
+0002dd20: 4954 2729 206f 7220 2875 7070 6572 4361  IT') or (upperCa
+0002dd30: 7365 5479 7065 203d 3d20 274c 494d 4954  seType == 'LIMIT
+0002dd40: 5f4d 414b 4552 2729 3a0a 2020 2020 2020  _MAKER'):.      
+0002dd50: 2020 2020 2020 6966 2070 7269 6365 2069        if price i
+0002dd60: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+0002dd70: 2020 2020 2020 2020 7261 6973 6520 496e          raise In
+0002dd80: 7661 6c69 644f 7264 6572 2873 656c 662e  validOrder(self.
+0002dd90: 6964 202b 2027 2063 7265 6174 654f 7264  id + ' createOrd
+0002dda0: 6572 2072 6571 7569 7265 7320 6120 7072  er requires a pr
+0002ddb0: 6963 6520 6172 6775 6d65 6e74 2066 6f72  ice argument for
+0002ddc0: 2061 2027 202b 2074 7970 6520 2b20 2720   a ' + type + ' 
+0002ddd0: 6f72 6465 7227 290a 2020 2020 2020 2020  order').        
+0002dde0: 2020 2020 7265 7175 6573 745b 276f 7264      request['ord
+0002ddf0: 6572 5072 6963 6527 5d20 3d20 7365 6c66  erPrice'] = self
+0002de00: 2e70 7269 6365 5f74 6f5f 7072 6563 6973  .price_to_precis
+0002de10: 696f 6e28 7379 6d62 6f6c 2c20 7072 6963  ion(symbol, pric
+0002de20: 6529 0a20 2020 2020 2020 2069 734d 6172  e).        isMar
+0002de30: 6b65 7420 3d20 2875 7070 6572 4361 7365  ket = (upperCase
+0002de40: 5479 7065 203d 3d20 274d 4152 4b45 5427  Type == 'MARKET'
+0002de50: 290a 2020 2020 2020 2020 706f 7374 4f6e  ).        postOn
+0002de60: 6c79 203d 204e 6f6e 650a 2020 2020 2020  ly = None.      
+0002de70: 2020 706f 7374 4f6e 6c79 2c20 7061 7261    postOnly, para
+0002de80: 6d73 203d 2073 656c 662e 6861 6e64 6c65  ms = self.handle
+0002de90: 5f70 6f73 745f 6f6e 6c79 2869 734d 6172  _post_only(isMar
+0002dea0: 6b65 742c 2074 7970 6520 3d3d 2027 4c49  ket, type == 'LI
+0002deb0: 4d49 545f 4d41 4b45 5227 2c20 7061 7261  MIT_MAKER', para
+0002dec0: 6d73 290a 2020 2020 2020 2020 6966 2070  ms).        if p
+0002ded0: 6f73 744f 6e6c 793a 0a20 2020 2020 2020  ostOnly:.       
+0002dee0: 2020 2020 2072 6571 7565 7374 5b27 6f72       request['or
+0002def0: 6465 7254 7970 6527 5d20 3d20 274c 494d  derType'] = 'LIM
+0002df00: 4954 5f4d 414b 4552 270a 2020 2020 2020  IT_MAKER'.      
+0002df10: 2020 636c 6965 6e74 4f72 6465 7249 6420    clientOrderId 
+0002df20: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+0002df30: 6e67 5f32 2870 6172 616d 732c 2027 636c  ng_2(params, 'cl
+0002df40: 6965 6e74 4f72 6465 7249 6427 2c20 276f  ientOrderId', 'o
+0002df50: 7264 6572 4c69 6e6b 4964 2729 0a20 2020  rderLinkId').   
+0002df60: 2020 2020 2069 6620 636c 6965 6e74 4f72       if clientOr
+0002df70: 6465 7249 6420 6973 206e 6f74 204e 6f6e  derId is not Non
+0002df80: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+0002df90: 6571 7565 7374 5b27 6f72 6465 724c 696e  equest['orderLin
+0002dfa0: 6b49 6427 5d20 3d20 636c 6965 6e74 4f72  kId'] = clientOr
+0002dfb0: 6465 7249 640a 2020 2020 2020 2020 7061  derId.        pa
+0002dfc0: 7261 6d73 203d 2073 656c 662e 6f6d 6974  rams = self.omit
+0002dfd0: 2870 6172 616d 732c 205b 2763 6c69 656e  (params, ['clien
+0002dfe0: 744f 7264 6572 4964 272c 2027 6f72 6465  tOrderId', 'orde
+0002dff0: 724c 696e 6b49 6427 2c20 2770 6f73 744f  rLinkId', 'postO
+0002e000: 6e6c 7927 5d29 0a20 2020 2020 2020 2062  nly']).        b
+0002e010: 726f 6b65 7249 6420 3d20 7365 6c66 2e73  rokerId = self.s
+0002e020: 6166 655f 7374 7269 6e67 2873 656c 662e  afe_string(self.
+0002e030: 6f70 7469 6f6e 732c 2027 6272 6f6b 6572  options, 'broker
+0002e040: 4964 2729 0a20 2020 2020 2020 2069 6620  Id').        if 
+0002e050: 6272 6f6b 6572 4964 2069 7320 6e6f 7420  brokerId is not 
+0002e060: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+0002e070: 2020 7265 7175 6573 745b 2761 6765 6e74    request['agent
+0002e080: 536f 7572 6365 275d 203d 2062 726f 6b65  Source'] = broke
+0002e090: 7249 640a 2020 2020 2020 2020 7472 6967  rId.        trig
+0002e0a0: 6765 7250 7269 6365 203d 2073 656c 662e  gerPrice = self.
+0002e0b0: 7361 6665 5f6e 756d 6265 725f 3228 7061  safe_number_2(pa
+0002e0c0: 7261 6d73 2c20 2774 7269 6767 6572 5072  rams, 'triggerPr
+0002e0d0: 6963 6527 2c20 2773 746f 7050 7269 6365  ice', 'stopPrice
+0002e0e0: 2729 0a20 2020 2020 2020 2069 6620 7472  ').        if tr
+0002e0f0: 6967 6765 7250 7269 6365 2069 7320 6e6f  iggerPrice is no
+0002e100: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+0002e110: 2020 2020 7265 7175 6573 745b 2774 7269      request['tri
+0002e120: 6767 6572 5072 6963 6527 5d20 3d20 7365  ggerPrice'] = se
+0002e130: 6c66 2e70 7269 6365 5f74 6f5f 7072 6563  lf.price_to_prec
+0002e140: 6973 696f 6e28 7379 6d62 6f6c 2c20 7472  ision(symbol, tr
+0002e150: 6967 6765 7250 7269 6365 290a 2020 2020  iggerPrice).    
+0002e160: 2020 2020 7061 7261 6d73 203d 2073 656c      params = sel
+0002e170: 662e 6f6d 6974 2870 6172 616d 732c 2027  f.omit(params, '
+0002e180: 7374 6f70 5072 6963 6527 290a 2020 2020  stopPrice').    
+0002e190: 2020 2020 7265 7370 6f6e 7365 203d 2061      response = a
+0002e1a0: 7761 6974 2073 656c 662e 7072 6976 6174  wait self.privat
+0002e1b0: 6550 6f73 7453 706f 7456 3350 7269 7661  ePostSpotV3Priva
+0002e1c0: 7465 4f72 6465 7228 7365 6c66 2e65 7874  teOrder(self.ext
+0002e1d0: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
+0002e1e0: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
+0002e1f0: 2020 2020 2020 2020 2320 2020 207b 0a20          #    {. 
+0002e200: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0002e210: 2272 6574 436f 6465 223a 2022 3022 2c0a  "retCode": "0",.
+0002e220: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0002e230: 2022 7265 744d 7367 223a 2022 4f4b 222c   "retMsg": "OK",
+0002e240: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0002e250: 2020 2272 6573 756c 7422 3a20 7b0a 2020    "result": {.  
+0002e260: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0002e270: 2020 2022 6f72 6465 7249 6422 3a20 2231     "orderId": "1
+0002e280: 3237 3437 3534 3931 3632 3837 3334 3632  2747549162873462
+0002e290: 3830 222c 0a20 2020 2020 2020 2023 2020  80",.        #  
+0002e2a0: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+0002e2b0: 4c69 6e6b 4964 223a 2022 3136 3636 3739  LinkId": "166679
+0002e2c0: 3836 3237 3031 3537 3330 222c 0a20 2020  8627015730",.   
+0002e2d0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0002e2e0: 2020 2273 796d 626f 6c22 3a20 2241 4156    "symbol": "AAV
+0002e2f0: 4555 5344 5422 2c0a 2020 2020 2020 2020  EUSDT",.        
+0002e300: 2320 2020 2020 2020 2020 2020 2022 6372  #            "cr
+0002e310: 6561 7465 5469 6d65 223a 2022 3136 3636  eateTime": "1666
+0002e320: 3639 3836 3239 3832 3122 2c0a 2020 2020  698629821",.    
+0002e330: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0002e340: 2022 6f72 6465 7250 7269 6365 223a 2022   "orderPrice": "
+0002e350: 3830 222c 0a20 2020 2020 2020 2023 2020  80",.        #  
+0002e360: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+0002e370: 5174 7922 3a20 2230 2e31 3122 2c0a 2020  Qty": "0.11",.  
+0002e380: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0002e390: 2020 2022 6f72 6465 7254 7970 6522 3a20     "orderType": 
+0002e3a0: 224c 494d 4954 222c 0a20 2020 2020 2020  "LIMIT",.       
+0002e3b0: 2023 2020 2020 2020 2020 2020 2020 2273   #            "s
+0002e3c0: 6964 6522 3a20 2242 5559 222c 0a20 2020  ide": "BUY",.   
+0002e3d0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0002e3e0: 2020 2273 7461 7475 7322 3a20 224e 4557    "status": "NEW
+0002e3f0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0002e400: 2020 2020 2020 2020 2274 696d 6549 6e46          "timeInF
+0002e410: 6f72 6365 223a 2022 4754 4322 2c0a 2020  orce": "GTC",.  
+0002e420: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0002e430: 2020 2022 6163 636f 756e 7449 6422 3a20     "accountId": 
+0002e440: 2231 3333 3830 3433 3422 2c0a 2020 2020  "13380434",.    
+0002e450: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0002e460: 2022 6578 6563 5174 7922 3a20 2230 222c   "execQty": "0",
+0002e470: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0002e480: 2020 2020 2020 226f 7264 6572 4361 7465        "orderCate
+0002e490: 676f 7279 223a 2022 3022 0a20 2020 2020  gory": "0".     
+0002e4a0: 2020 2023 2020 2020 2020 2020 7d2c 0a20     #        },. 
+0002e4b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0002e4c0: 2272 6574 4578 744d 6170 223a 207b 7d2c  "retExtMap": {},
+0002e4d0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0002e4e0: 2020 2272 6574 4578 7449 6e66 6f22 3a20    "retExtInfo": 
+0002e4f0: 6e75 6c6c 2c0a 2020 2020 2020 2020 2320  null,.        # 
+0002e500: 2020 2020 2020 2022 7469 6d65 223a 2022         "time": "
+0002e510: 3136 3636 3639 3836 3237 3932 3622 0a20  1666698627926". 
+0002e520: 2020 2020 2020 2023 2020 2020 7d0a 2020         #    }.  
+0002e530: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+0002e540: 6f72 6465 7220 3d20 7365 6c66 2e73 6166  order = self.saf
+0002e550: 655f 7661 6c75 6528 7265 7370 6f6e 7365  e_value(response
+0002e560: 2c20 2772 6573 756c 7427 2c20 7b7d 290a  , 'result', {}).
+0002e570: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0002e580: 656c 662e 7061 7273 655f 6f72 6465 7228  elf.parse_order(
+0002e590: 6f72 6465 7229 0a0a 2020 2020 6173 796e  order)..    asyn
+0002e5a0: 6320 6465 6620 6372 6561 7465 5f75 6e69  c def create_uni
+0002e5b0: 6669 6564 5f6d 6172 6769 6e5f 6f72 6465  fied_margin_orde
+0002e5c0: 7228 7365 6c66 2c20 7379 6d62 6f6c 3a20  r(self, symbol: 
+0002e5d0: 7374 722c 2074 7970 652c 2073 6964 652c  str, type, side,
+0002e5e0: 2061 6d6f 756e 742c 2070 7269 6365 3d4e   amount, price=N
+0002e5f0: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
+0002e600: 0a20 2020 2020 2020 2061 7761 6974 2073  .        await s
+0002e610: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
+0002e620: 2829 0a20 2020 2020 2020 206d 6172 6b65  ().        marke
+0002e630: 7420 3d20 7365 6c66 2e6d 6172 6b65 7428  t = self.market(
+0002e640: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
+0002e650: 6966 206e 6f74 206d 6172 6b65 745b 276c  if not market['l
+0002e660: 696e 6561 7227 5d20 616e 6420 6e6f 7420  inear'] and not 
+0002e670: 6d61 726b 6574 5b27 6f70 7469 6f6e 275d  market['option']
+0002e680: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
+0002e690: 6973 6520 4e6f 7453 7570 706f 7274 6564  ise NotSupported
+0002e6a0: 2873 656c 662e 6964 202b 2027 2063 7265  (self.id + ' cre
+0002e6b0: 6174 654f 7264 6572 2064 6f65 7320 6e6f  ateOrder does no
+0002e6c0: 7420 616c 6c6f 7720 696e 7665 7273 6520  t allow inverse 
+0002e6d0: 6d61 726b 6574 206f 7264 6572 7320 666f  market orders fo
+0002e6e0: 7220 2720 2b20 7379 6d62 6f6c 202b 2027  r ' + symbol + '
+0002e6f0: 206d 6172 6b65 7473 2729 0a20 2020 2020   markets').     
+0002e700: 2020 206c 6f77 6572 4361 7365 5479 7065     lowerCaseType
+0002e710: 203d 2074 7970 652e 6c6f 7765 7228 290a   = type.lower().
+0002e720: 2020 2020 2020 2020 6966 2028 7072 6963          if (pric
+0002e730: 6520 6973 204e 6f6e 6529 2061 6e64 2028  e is None) and (
+0002e740: 6c6f 7765 7243 6173 6554 7970 6520 3d3d  lowerCaseType ==
+0002e750: 2027 6c69 6d69 7427 293a 0a20 2020 2020   'limit'):.     
+0002e760: 2020 2020 2020 2072 6169 7365 2041 7267         raise Arg
+0002e770: 756d 656e 7473 5265 7175 6972 6564 2873  umentsRequired(s
+0002e780: 656c 662e 6964 202b 2027 2063 7265 6174  elf.id + ' creat
+0002e790: 654f 7264 6572 2072 6571 7569 7265 7320  eOrder requires 
+0002e7a0: 6120 7072 6963 6520 6172 6775 6d65 6e74  a price argument
+0002e7b0: 2066 6f72 206c 696d 6974 206f 7264 6572   for limit order
+0002e7c0: 7327 290a 2020 2020 2020 2020 7265 7175  s').        requ
+0002e7d0: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
+0002e7e0: 2020 2020 2773 796d 626f 6c27 3a20 6d61      'symbol': ma
+0002e7f0: 726b 6574 5b27 6964 275d 2c0a 2020 2020  rket['id'],.    
+0002e800: 2020 2020 2020 2020 2773 6964 6527 3a20          'side': 
+0002e810: 7365 6c66 2e63 6170 6974 616c 697a 6528  self.capitalize(
+0002e820: 7369 6465 292c 0a20 2020 2020 2020 2020  side),.         
+0002e830: 2020 2027 6f72 6465 7254 7970 6527 3a20     'orderType': 
+0002e840: 7365 6c66 2e63 6170 6974 616c 697a 6528  self.capitalize(
+0002e850: 6c6f 7765 7243 6173 6554 7970 6529 2c20  lowerCaseType), 
+0002e860: 2023 206c 696d 6974 206f 7220 6d61 726b   # limit or mark
+0002e870: 6574 0a20 2020 2020 2020 2020 2020 2027  et.            '
+0002e880: 7469 6d65 496e 466f 7263 6527 3a20 2747  timeInForce': 'G
+0002e890: 6f6f 6454 696c 6c43 616e 6365 6c27 2c20  oodTillCancel', 
+0002e8a0: 2023 2049 6d6d 6564 6961 7465 4f72 4361   # ImmediateOrCa
+0002e8b0: 6e63 656c 2c20 4669 6c6c 4f72 4b69 6c6c  ncel, FillOrKill
+0002e8c0: 2c20 506f 7374 4f6e 6c79 0a20 2020 2020  , PostOnly.     
+0002e8d0: 2020 2020 2020 2027 7174 7927 3a20 7365         'qty': se
+0002e8e0: 6c66 2e61 6d6f 756e 745f 746f 5f70 7265  lf.amount_to_pre
+0002e8f0: 6369 7369 6f6e 2873 796d 626f 6c2c 2061  cision(symbol, a
+0002e900: 6d6f 756e 7429 2c0a 2020 2020 2020 2020  mount),.        
+0002e910: 2020 2020 2320 2774 616b 6550 726f 6669      # 'takeProfi
+0002e920: 7427 3a20 3132 332e 3435 2c20 2023 2074  t': 123.45,  # t
+0002e930: 616b 6520 7072 6f66 6974 2070 7269 6365  ake profit price
+0002e940: 2c20 6f6e 6c79 2074 616b 6520 6566 6665  , only take effe
+0002e950: 6374 2075 706f 6e20 6f70 656e 696e 6720  ct upon opening 
+0002e960: 7468 6520 706f 7369 7469 6f6e 0a20 2020  the position.   
+0002e970: 2020 2020 2020 2020 2023 2027 7374 6f70           # 'stop
+0002e980: 4c6f 7373 273a 2031 3233 2e34 352c 2020  Loss': 123.45,  
+0002e990: 2320 7374 6f70 206c 6f73 7320 7072 6963  # stop loss pric
+0002e9a0: 652c 206f 6e6c 7920 7461 6b65 2065 6666  e, only take eff
+0002e9b0: 6563 7420 7570 6f6e 206f 7065 6e69 6e67  ect upon opening
+0002e9c0: 2074 6865 2070 6f73 6974 696f 6e0a 2020   the position.  
+0002e9d0: 2020 2020 2020 2020 2020 2320 2772 6564            # 'red
+0002e9e0: 7563 654f 6e6c 7927 3a20 4661 6c73 652c  uceOnly': False,
+0002e9f0: 2020 2320 7265 6475 6365 206f 6e6c 792c    # reduce only,
+0002ea00: 2072 6571 7569 7265 6420 666f 7220 6c69   required for li
+0002ea10: 6e65 6172 206f 7264 6572 730a 2020 2020  near orders.    
+0002ea20: 2020 2020 2020 2020 2320 7768 656e 2063          # when c
+0002ea30: 7265 6174 696e 6720 6120 636c 6f73 696e  reating a closin
+0002ea40: 6720 6f72 6465 722c 2062 7962 6974 2072  g order, bybit r
+0002ea50: 6563 6f6d 6d65 6e64 7320 6120 5472 7565  ecommends a True
+0002ea60: 2076 616c 7565 2066 6f72 0a20 2020 2020   value for.     
+0002ea70: 2020 2020 2020 2023 2020 636c 6f73 654f         #  closeO
+0002ea80: 6e54 7269 6767 6572 2074 6f20 6176 6f69  nTrigger to avoi
+0002ea90: 6420 6661 696c 696e 6720 6475 6520 746f  d failing due to
+0002eaa0: 2069 6e73 7566 6669 6369 656e 7420 6176   insufficient av
+0002eab0: 6169 6c61 626c 6520 6d61 7267 696e 0a20  ailable margin. 
+0002eac0: 2020 2020 2020 2020 2020 2023 2027 636c             # 'cl
+0002ead0: 6f73 654f 6e54 7269 6767 6572 273a 2046  oseOnTrigger': F
+0002eae0: 616c 7365 2c20 7265 7175 6972 6564 2066  alse, required f
+0002eaf0: 6f72 206c 696e 6561 7220 6f72 6465 7273  or linear orders
+0002eb00: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+0002eb10: 6f72 6465 724c 696e 6b49 6427 3a20 2773  orderLinkId': 's
+0002eb20: 7472 696e 6727 2c20 2023 2075 6e69 7175  tring',  # uniqu
+0002eb30: 6520 636c 6965 6e74 206f 7264 6572 2069  e client order i
+0002eb40: 642c 206d 6178 2033 3620 6368 6172 6163  d, max 36 charac
+0002eb50: 7465 7273 0a20 2020 2020 2020 2020 2020  ters.           
+0002eb60: 2023 2027 7472 6967 6765 7250 7269 6365   # 'triggerPrice
+0002eb70: 273a 2031 3233 2e34 352c 2020 2320 7472  ': 123.45,  # tr
+0002eb80: 6967 6765 7220 7072 6963 652c 2072 6571  igger price, req
+0002eb90: 7569 7265 6420 666f 7220 636f 6e64 6974  uired for condit
+0002eba0: 696f 6e61 6c20 6f72 6465 7273 0a20 2020  ional orders.   
+0002ebb0: 2020 2020 2020 2020 2023 2027 7472 6967           # 'trig
+0002ebc0: 6765 7242 7927 3a20 274d 6172 6b50 7269  gerBy': 'MarkPri
+0002ebd0: 6365 272c 2020 2320 496e 6465 7850 7269  ce',  # IndexPri
+0002ebe0: 6365 2c20 4d61 726b 5072 6963 650a 2020  ce, MarkPrice.  
+0002ebf0: 2020 2020 2020 2020 2020 2320 2774 7074            # 'tpt
+0002ec00: 7269 6767 6572 6279 273a 2027 4d61 726b  riggerby': 'Mark
+0002ec10: 5072 6963 6527 2c20 2023 2049 6e64 6578  Price',  # Index
+0002ec20: 5072 6963 652c 204d 6172 6b50 7269 6365  Price, MarkPrice
+0002ec30: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+0002ec40: 736c 5472 6967 6765 7242 7927 3a20 274d  slTriggerBy': 'M
+0002ec50: 6172 6b50 7269 6365 272c 2020 2320 496e  arkPrice',  # In
+0002ec60: 6465 7850 7269 6365 2c20 4d61 726b 5072  dexPrice, MarkPr
+0002ec70: 6963 650a 2020 2020 2020 2020 2020 2020  ice.            
+0002ec80: 2320 276d 6d70 273a 2046 616c 7365 2020  # 'mmp': False  
+0002ec90: 2320 6d61 726b 6574 206d 616b 6572 2070  # market maker p
+0002eca0: 726f 7465 6374 696f 6e0a 2020 2020 2020  rotection.      
+0002ecb0: 2020 2020 2020 2320 2770 6f73 6974 696f        # 'positio
+0002ecc0: 6e49 6478 273a 2030 2c20 2023 2050 6f73  nIdx': 0,  # Pos
+0002ecd0: 6974 696f 6e20 6d6f 6465 2e20 756e 6966  ition mode. unif
+0002ece0: 6965 6420 6d61 7267 696e 2061 6363 6f75  ied margin accou
+0002ecf0: 6e74 2069 7320 6f6e 6c79 2061 7661 696c  nt is only avail
+0002ed00: 6162 6c65 2069 6e20 4f6e 652d 5761 7920  able in One-Way 
+0002ed10: 6d6f 6465 2c20 7768 6963 6820 6973 2030  mode, which is 0
+0002ed20: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+0002ed30: 6261 7365 5072 6963 6527 3a20 2730 272c  basePrice': '0',
+0002ed40: 2020 2320 4974 2077 696c 6c20 6265 2075    # It will be u
+0002ed50: 7365 6420 746f 2063 6f6d 7061 7265 2077  sed to compare w
+0002ed60: 6974 6820 7468 6520 7661 6c75 6520 6f66  ith the value of
+0002ed70: 2074 7269 6767 6572 5072 6963 652c 2074   triggerPrice, t
+0002ed80: 6f20 6465 6369 6465 2077 6865 7468 6572  o decide whether
+0002ed90: 2079 6f75 7220 636f 6e64 6974 696f 6e61   your conditiona
+0002eda0: 6c20 6f72 6465 7220 7769 6c6c 2062 6520  l order will be 
+0002edb0: 7472 6967 6765 7265 6420 6279 2063 726f  triggered by cro
+0002edc0: 7373 696e 6720 7472 6967 6765 7220 7072  ssing trigger pr
+0002edd0: 6963 6520 6672 6f6d 2075 7070 6572 2073  ice from upper s
+0002ede0: 6964 6520 6f72 206c 6f77 6572 2073 6964  ide or lower sid
+0002edf0: 652e 204d 6169 6e6c 7920 7573 6564 2074  e. Mainly used t
+0002ee00: 6f20 6964 656e 7469 6679 2074 6865 2065  o identify the e
+0002ee10: 7870 6563 7465 6420 6469 7265 6374 696f  xpected directio
+0002ee20: 6e20 6f66 2074 6865 2063 7572 7265 6e74  n of the current
+0002ee30: 2063 6f6e 6469 7469 6f6e 616c 206f 7264   conditional ord
+0002ee40: 6572 2e0a 2020 2020 2020 2020 2020 2020  er..            
+0002ee50: 2320 2769 7627 3a20 2730 272c 2020 2320  # 'iv': '0',  # 
+0002ee60: 496d 706c 6965 6420 766f 6c61 7469 6c69  Implied volatili
+0002ee70: 7479 2c20 666f 7220 6f70 7469 6f6e 7320  ty, for options 
+0002ee80: 6f6e 6c79 3b20 7061 7261 6d65 7465 7273  only; parameters
+0002ee90: 2061 7265 2070 6173 7365 6420 6163 636f   are passed acco
+0002eea0: 7264 696e 6720 746f 2074 6865 2072 6561  rding to the rea
+0002eeb0: 6c20 7661 6c75 653b 2066 6f72 2065 7861  l value; for exa
+0002eec0: 6d70 6c65 2c20 666f 7220 3130 252c 2030  mple, for 10%, 0
+0002eed0: 2e31 2069 7320 7061 7373 6564 0a20 2020  .1 is passed.   
+0002eee0: 2020 2020 207d 0a20 2020 2020 2020 2069       }.        i
+0002eef0: 6620 6d61 726b 6574 5b27 6c69 6e65 6172  f market['linear
+0002ef00: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+0002ef10: 7265 7175 6573 745b 2763 6174 6567 6f72  request['categor
+0002ef20: 7927 5d20 3d20 276c 696e 6561 7227 0a20  y'] = 'linear'. 
+0002ef30: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0002ef40: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0002ef50: 5b27 6361 7465 676f 7279 275d 203d 2027  ['category'] = '
+0002ef60: 6f70 7469 6f6e 270a 2020 2020 2020 2020  option'.        
+0002ef70: 6973 4d61 726b 6574 203d 206c 6f77 6572  isMarket = lower
+0002ef80: 4361 7365 5479 7065 203d 3d20 276d 6172  CaseType == 'mar
+0002ef90: 6b65 7427 0a20 2020 2020 2020 2069 734c  ket'.        isL
+0002efa0: 696d 6974 203d 206c 6f77 6572 4361 7365  imit = lowerCase
+0002efb0: 5479 7065 203d 3d20 276c 696d 6974 270a  Type == 'limit'.
+0002efc0: 2020 2020 2020 2020 6966 2069 734c 696d          if isLim
+0002efd0: 6974 3a0a 2020 2020 2020 2020 2020 2020  it:.            
+0002efe0: 7265 7175 6573 745b 2770 7269 6365 275d  request['price']
+0002eff0: 203d 2073 656c 662e 7072 6963 655f 746f   = self.price_to
+0002f000: 5f70 7265 6369 7369 6f6e 2873 796d 626f  _precision(symbo
+0002f010: 6c2c 2070 7269 6365 290a 2020 2020 2020  l, price).      
+0002f020: 2020 6578 6368 616e 6765 5370 6563 6966    exchangeSpecif
+0002f030: 6963 5061 7261 6d20 3d20 7365 6c66 2e73  icParam = self.s
+0002f040: 6166 655f 7374 7269 6e67 2870 6172 616d  afe_string(param
+0002f050: 732c 2027 7469 6d65 5f69 6e5f 666f 7263  s, 'time_in_forc
+0002f060: 6527 290a 2020 2020 2020 2020 7469 6d65  e').        time
+0002f070: 496e 466f 7263 6520 3d20 7365 6c66 2e73  InForce = self.s
+0002f080: 6166 655f 7374 7269 6e67 5f6c 6f77 6572  afe_string_lower
+0002f090: 2870 6172 616d 732c 2027 7469 6d65 496e  (params, 'timeIn
+0002f0a0: 466f 7263 6527 290a 2020 2020 2020 2020  Force').        
+0002f0b0: 706f 7374 4f6e 6c79 203d 204e 6f6e 650a  postOnly = None.
+0002f0c0: 2020 2020 2020 2020 706f 7374 4f6e 6c79          postOnly
+0002f0d0: 2c20 7061 7261 6d73 203d 2073 656c 662e  , params = self.
+0002f0e0: 6861 6e64 6c65 5f70 6f73 745f 6f6e 6c79  handle_post_only
+0002f0f0: 2869 734d 6172 6b65 742c 2065 7863 6861  (isMarket, excha
+0002f100: 6e67 6553 7065 6369 6669 6350 6172 616d  ngeSpecificParam
+0002f110: 203d 3d20 2750 6f73 744f 6e6c 7927 2c20   == 'PostOnly', 
+0002f120: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
+0002f130: 6966 2070 6f73 744f 6e6c 793a 0a20 2020  if postOnly:.   
+0002f140: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0002f150: 5b27 7469 6d65 496e 466f 7263 6527 5d20  ['timeInForce'] 
+0002f160: 3d20 2750 6f73 744f 6e6c 7927 0a20 2020  = 'PostOnly'.   
+0002f170: 2020 2020 2065 6c69 6620 7469 6d65 496e       elif timeIn
+0002f180: 466f 7263 6520 3d3d 2027 6774 6327 3a0a  Force == 'gtc':.
+0002f190: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0002f1a0: 6573 745b 2774 696d 6549 6e46 6f72 6365  est['timeInForce
+0002f1b0: 275d 203d 2027 476f 6f64 5469 6c6c 4361  '] = 'GoodTillCa
+0002f1c0: 6e63 656c 270a 2020 2020 2020 2020 656c  ncel'.        el
+0002f1d0: 6966 2074 696d 6549 6e46 6f72 6365 203d  if timeInForce =
+0002f1e0: 3d20 2766 6f6b 273a 0a20 2020 2020 2020  = 'fok':.       
+0002f1f0: 2020 2020 2072 6571 7565 7374 5b27 7469       request['ti
+0002f200: 6d65 496e 466f 7263 6527 5d20 3d20 2746  meInForce'] = 'F
+0002f210: 696c 6c4f 724b 696c 6c27 0a20 2020 2020  illOrKill'.     
+0002f220: 2020 2065 6c69 6620 7469 6d65 496e 466f     elif timeInFo
+0002f230: 7263 6520 3d3d 2027 696f 6327 3a0a 2020  rce == 'ioc':.  
+0002f240: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+0002f250: 745b 2774 696d 6549 6e46 6f72 6365 275d  t['timeInForce']
+0002f260: 203d 2027 496d 6d65 6469 6174 654f 7243   = 'ImmediateOrC
+0002f270: 616e 6365 6c27 0a20 2020 2020 2020 2074  ancel'.        t
+0002f280: 7269 6767 6572 5072 6963 6520 3d20 7365  riggerPrice = se
+0002f290: 6c66 2e73 6166 655f 6e75 6d62 6572 5f32  lf.safe_number_2
+0002f2a0: 2870 6172 616d 732c 2027 7374 6f70 5072  (params, 'stopPr
+0002f2b0: 6963 6527 2c20 2774 7269 6767 6572 5072  ice', 'triggerPr
+0002f2c0: 6963 6527 290a 2020 2020 2020 2020 7374  ice').        st
+0002f2d0: 6f70 4c6f 7373 5472 6967 6765 7250 7269  opLossTriggerPri
+0002f2e0: 6365 203d 2073 656c 662e 7361 6665 5f6e  ce = self.safe_n
+0002f2f0: 756d 6265 7228 7061 7261 6d73 2c20 2773  umber(params, 's
+0002f300: 746f 704c 6f73 7350 7269 6365 272c 2074  topLossPrice', t
+0002f310: 7269 6767 6572 5072 6963 6529 0a20 2020  riggerPrice).   
+0002f320: 2020 2020 2074 616b 6550 726f 6669 7454       takeProfitT
+0002f330: 7269 6767 6572 5072 6963 6520 3d20 7365  riggerPrice = se
+0002f340: 6c66 2e73 6166 655f 6e75 6d62 6572 2870  lf.safe_number(p
+0002f350: 6172 616d 732c 2027 7461 6b65 5072 6f66  arams, 'takeProf
+0002f360: 6974 5072 6963 6527 290a 2020 2020 2020  itPrice').      
+0002f370: 2020 7374 6f70 4c6f 7373 203d 2073 656c    stopLoss = sel
+0002f380: 662e 7361 6665 5f6e 756d 6265 7228 7061  f.safe_number(pa
+0002f390: 7261 6d73 2c20 2773 746f 704c 6f73 7327  rams, 'stopLoss'
+0002f3a0: 290a 2020 2020 2020 2020 7461 6b65 5072  ).        takePr
+0002f3b0: 6f66 6974 203d 2073 656c 662e 7361 6665  ofit = self.safe
+0002f3c0: 5f6e 756d 6265 7228 7061 7261 6d73 2c20  _number(params, 
+0002f3d0: 2774 616b 6550 726f 6669 7427 290a 2020  'takeProfit').  
+0002f3e0: 2020 2020 2020 6973 5374 6f70 4c6f 7373        isStopLoss
+0002f3f0: 5472 6967 6765 724f 7264 6572 203d 2073  TriggerOrder = s
+0002f400: 746f 704c 6f73 7354 7269 6767 6572 5072  topLossTriggerPr
+0002f410: 6963 6520 6973 206e 6f74 204e 6f6e 650a  ice is not None.
+0002f420: 2020 2020 2020 2020 6973 5461 6b65 5072          isTakePr
+0002f430: 6f66 6974 5472 6967 6765 724f 7264 6572  ofitTriggerOrder
+0002f440: 203d 2074 616b 6550 726f 6669 7454 7269   = takeProfitTri
+0002f450: 6767 6572 5072 6963 6520 6973 206e 6f74  ggerPrice is not
+0002f460: 204e 6f6e 650a 2020 2020 2020 2020 6973   None.        is
+0002f470: 5374 6f70 4c6f 7373 203d 2073 746f 704c  StopLoss = stopL
+0002f480: 6f73 7320 6973 206e 6f74 204e 6f6e 650a  oss is not None.
+0002f490: 2020 2020 2020 2020 6973 5461 6b65 5072          isTakePr
+0002f4a0: 6f66 6974 203d 2074 616b 6550 726f 6669  ofit = takeProfi
+0002f4b0: 7420 6973 206e 6f74 204e 6f6e 650a 2020  t is not None.  
+0002f4c0: 2020 2020 2020 6966 2069 7353 746f 704c        if isStopL
+0002f4d0: 6f73 7354 7269 6767 6572 4f72 6465 7220  ossTriggerOrder 
+0002f4e0: 6f72 2069 7354 616b 6550 726f 6669 7454  or isTakeProfitT
+0002f4f0: 7269 6767 6572 4f72 6465 723a 0a20 2020  riggerOrder:.   
+0002f500: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0002f510: 5b27 7472 6967 6765 7242 7927 5d20 3d20  ['triggerBy'] = 
+0002f520: 274c 6173 7450 7269 6365 270a 2020 2020  'LastPrice'.    
+0002f530: 2020 2020 2020 2020 7472 6967 6765 7241          triggerA
+0002f540: 7420 3d20 7374 6f70 4c6f 7373 5472 6967  t = stopLossTrig
+0002f550: 6765 7250 7269 6365 2069 6620 6973 5374  gerPrice if isSt
+0002f560: 6f70 4c6f 7373 5472 6967 6765 724f 7264  opLossTriggerOrd
+0002f570: 6572 2065 6c73 6520 7461 6b65 5072 6f66  er else takeProf
+0002f580: 6974 5472 6967 6765 7250 7269 6365 0a20  itTriggerPrice. 
+0002f590: 2020 2020 2020 2020 2020 2070 7265 6369             preci
+0002f5a0: 7365 5472 6967 6765 7250 7269 6365 203d  seTriggerPrice =
+0002f5b0: 2073 656c 662e 7072 6963 655f 746f 5f70   self.price_to_p
+0002f5c0: 7265 6369 7369 6f6e 2873 796d 626f 6c2c  recision(symbol,
+0002f5d0: 2074 7269 6767 6572 4174 290a 2020 2020   triggerAt).    
+0002f5e0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+0002f5f0: 2774 7269 6767 6572 5072 6963 6527 5d20  'triggerPrice'] 
+0002f600: 3d20 7072 6563 6973 6554 7269 6767 6572  = preciseTrigger
+0002f610: 5072 6963 650a 2020 2020 2020 2020 2020  Price.          
+0002f620: 2020 6973 4275 7920 3d20 7369 6465 203d    isBuy = side =
+0002f630: 3d20 2762 7579 270a 2020 2020 2020 2020  = 'buy'.        
+0002f640: 2020 2020 2320 6c6f 6769 6361 6c20 786f      # logical xo
+0002f650: 720a 2020 2020 2020 2020 2020 2020 6173  r.            as
+0002f660: 6365 6e64 696e 6720 3d20 6e6f 7420 6973  cending = not is
+0002f670: 4275 7920 6966 2073 746f 704c 6f73 7354  Buy if stopLossT
+0002f680: 7269 6767 6572 5072 6963 6520 656c 7365  riggerPrice else
+0002f690: 2069 7342 7579 0a20 2020 2020 2020 2020   isBuy.         
+0002f6a0: 2020 2064 656c 7461 203d 2073 656c 662e     delta = self.
+0002f6b0: 6e75 6d62 6572 5f74 6f5f 7374 7269 6e67  number_to_string
+0002f6c0: 286d 6172 6b65 745b 2770 7265 6369 7369  (market['precisi
+0002f6d0: 6f6e 275d 5b27 7072 6963 6527 5d29 0a20  on']['price']). 
+0002f6e0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+0002f6f0: 7374 5b27 6261 7365 5072 6963 6527 5d20  st['basePrice'] 
+0002f700: 3d20 5072 6563 6973 652e 7374 7269 6e67  = Precise.string
+0002f710: 5f61 6464 2870 7265 6369 7365 5472 6967  _add(preciseTrig
+0002f720: 6765 7250 7269 6365 2c20 6465 6c74 6129  gerPrice, delta)
+0002f730: 2069 6620 6173 6365 6e64 696e 6720 656c   if ascending el
+0002f740: 7365 2050 7265 6369 7365 2e73 7472 696e  se Precise.strin
+0002f750: 675f 7375 6228 7072 6563 6973 6554 7269  g_sub(preciseTri
+0002f760: 6767 6572 5072 6963 652c 2064 656c 7461  ggerPrice, delta
+0002f770: 290a 2020 2020 2020 2020 656c 6966 2069  ).        elif i
+0002f780: 7353 746f 704c 6f73 7320 6f72 2069 7354  sStopLoss or isT
+0002f790: 616b 6550 726f 6669 743a 0a20 2020 2020  akeProfit:.     
+0002f7a0: 2020 2020 2020 2069 6620 6973 5374 6f70         if isStop
+0002f7b0: 4c6f 7373 3a0a 2020 2020 2020 2020 2020  Loss:.          
+0002f7c0: 2020 2020 2020 7265 7175 6573 745b 2773        request['s
+0002f7d0: 746f 704c 6f73 7327 5d20 3d20 7365 6c66  topLoss'] = self
+0002f7e0: 2e70 7269 6365 5f74 6f5f 7072 6563 6973  .price_to_precis
+0002f7f0: 696f 6e28 7379 6d62 6f6c 2c20 7374 6f70  ion(symbol, stop
+0002f800: 4c6f 7373 290a 2020 2020 2020 2020 2020  Loss).          
+0002f810: 2020 6966 2069 7354 616b 6550 726f 6669    if isTakeProfi
+0002f820: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
+0002f830: 2020 2072 6571 7565 7374 5b27 7461 6b65     request['take
+0002f840: 5072 6f66 6974 275d 203d 2073 656c 662e  Profit'] = self.
+0002f850: 7072 6963 655f 746f 5f70 7265 6369 7369  price_to_precisi
+0002f860: 6f6e 2873 796d 626f 6c2c 2074 616b 6550  on(symbol, takeP
+0002f870: 726f 6669 7429 0a20 2020 2020 2020 2063  rofit).        c
+0002f880: 6c69 656e 744f 7264 6572 4964 203d 2073  lientOrderId = s
+0002f890: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+0002f8a0: 7061 7261 6d73 2c20 2763 6c69 656e 744f  params, 'clientO
+0002f8b0: 7264 6572 4964 2729 0a20 2020 2020 2020  rderId').       
+0002f8c0: 2069 6620 636c 6965 6e74 4f72 6465 7249   if clientOrderI
+0002f8d0: 6420 6973 206e 6f74 204e 6f6e 653a 0a20  d is not None:. 
+0002f8e0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+0002f8f0: 7374 5b27 6f72 6465 724c 696e 6b49 6427  st['orderLinkId'
+0002f900: 5d20 3d20 636c 6965 6e74 4f72 6465 7249  ] = clientOrderI
+0002f910: 640a 2020 2020 2020 2020 656c 6966 206d  d.        elif m
+0002f920: 6172 6b65 745b 276f 7074 696f 6e27 5d3a  arket['option']:
+0002f930: 0a20 2020 2020 2020 2020 2020 2023 206d  .            # m
+0002f940: 616e 6461 746f 7279 2066 6965 6c64 2066  andatory field f
+0002f950: 6f72 206f 7074 696f 6e73 0a20 2020 2020  or options.     
+0002f960: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+0002f970: 6f72 6465 724c 696e 6b49 6427 5d20 3d20  orderLinkId'] = 
+0002f980: 7365 6c66 2e75 7569 6431 3628 290a 2020  self.uuid16().  
+0002f990: 2020 2020 2020 7061 7261 6d73 203d 2073        params = s
+0002f9a0: 656c 662e 6f6d 6974 2870 6172 616d 732c  elf.omit(params,
+0002f9b0: 205b 2773 746f 7050 7269 6365 272c 2027   ['stopPrice', '
+0002f9c0: 7469 6d65 496e 466f 7263 6527 2c20 2774  timeInForce', 't
+0002f9d0: 7269 6767 6572 5072 6963 6527 2c20 2773  riggerPrice', 's
+0002f9e0: 746f 704c 6f73 7350 7269 6365 272c 2027  topLossPrice', '
+0002f9f0: 7461 6b65 5072 6f66 6974 5072 6963 6527  takeProfitPrice'
+0002fa00: 2c20 2770 6f73 744f 6e6c 7927 2c20 2763  , 'postOnly', 'c
+0002fa10: 6c69 656e 744f 7264 6572 4964 272c 2027  lientOrderId', '
+0002fa20: 7374 6f70 4c6f 7373 272c 2027 7461 6b65  stopLoss', 'take
+0002fa30: 5072 6f66 6974 275d 290a 2020 2020 2020  Profit']).      
+0002fa40: 2020 7265 7370 6f6e 7365 203d 2061 7761    response = awa
+0002fa50: 6974 2073 656c 662e 7072 6976 6174 6550  it self.privateP
+0002fa60: 6f73 7455 6e69 6669 6564 5633 5072 6976  ostUnifiedV3Priv
+0002fa70: 6174 654f 7264 6572 4372 6561 7465 2873  ateOrderCreate(s
+0002fa80: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
+0002fa90: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
+0002faa0: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+0002fab0: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+0002fac0: 2020 2020 2020 2020 2022 7265 7443 6f64           "retCod
+0002fad0: 6522 3a20 302c 0a20 2020 2020 2020 2023  e": 0,.        #
+0002fae0: 2020 2020 2020 2020 2022 7265 744d 7367           "retMsg
+0002faf0: 223a 2022 4f4b 222c 0a20 2020 2020 2020  ": "OK",.       
+0002fb00: 2023 2020 2020 2020 2020 2022 7265 7375   #         "resu
+0002fb10: 6c74 223a 207b 0a20 2020 2020 2020 2023  lt": {.        #
+0002fb20: 2020 2020 2020 2020 2020 2020 2022 6f72               "or
+0002fb30: 6465 7249 6422 3a20 2265 3130 6230 3731  derId": "e10b071
+0002fb40: 362d 3763 3931 2d34 3039 312d 6239 3861  6-7c91-4091-b98a
+0002fb50: 2d31 6661 3066 3430 3163 3764 3522 2c0a  -1fa0f401c7d5",.
+0002fb60: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0002fb70: 2020 2020 2020 226f 7264 6572 4c69 6e6b        "orderLink
+0002fb80: 4964 223a 2022 7465 7374 3030 3030 3030  Id": "test000000
+0002fb90: 3322 0a20 2020 2020 2020 2023 2020 2020  3".        #    
+0002fba0: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
+0002fbb0: 2320 2020 2020 2020 2020 2272 6574 4578  #         "retEx
+0002fbc0: 7449 6e66 6f22 3a20 6e75 6c6c 2c0a 2020  tInfo": null,.  
+0002fbd0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0002fbe0: 2274 696d 6522 3a20 3136 3634 3434 3133  "time": 16644413
+0002fbf0: 3434 3233 380a 2020 2020 2020 2020 2320  44238.        # 
+0002fc00: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
+0002fc10: 2020 2020 2020 2020 6f72 6465 7220 3d20          order = 
+0002fc20: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
+0002fc30: 7265 7370 6f6e 7365 2c20 2772 6573 756c  response, 'resul
+0002fc40: 7427 2c20 7b7d 290a 2020 2020 2020 2020  t', {}).        
+0002fc50: 7265 7475 726e 2073 656c 662e 7061 7273  return self.pars
+0002fc60: 655f 6f72 6465 7228 6f72 6465 7229 0a0a  e_order(order)..
+0002fc70: 2020 2020 6173 796e 6320 6465 6620 6372      async def cr
+0002fc80: 6561 7465 5f63 6f6e 7472 6163 745f 7633  eate_contract_v3
+0002fc90: 5f6f 7264 6572 2873 656c 662c 2073 796d  _order(self, sym
+0002fca0: 626f 6c3a 2073 7472 2c20 7479 7065 2c20  bol: str, type, 
+0002fcb0: 7369 6465 2c20 616d 6f75 6e74 2c20 7072  side, amount, pr
+0002fcc0: 6963 653d 4e6f 6e65 2c20 7061 7261 6d73  ice=None, params
+0002fcd0: 3d7b 7d29 3a0a 2020 2020 2020 2020 6177  ={}):.        aw
+0002fce0: 6169 7420 7365 6c66 2e6c 6f61 645f 6d61  ait self.load_ma
+0002fcf0: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
+0002fd00: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
+0002fd10: 726b 6574 2873 796d 626f 6c29 0a20 2020  rket(symbol).   
+0002fd20: 2020 2020 206c 6f77 6572 4361 7365 5479       lowerCaseTy
+0002fd30: 7065 203d 2074 7970 652e 6c6f 7765 7228  pe = type.lower(
+0002fd40: 290a 2020 2020 2020 2020 6966 2028 7072  ).        if (pr
+0002fd50: 6963 6520 6973 204e 6f6e 6529 2061 6e64  ice is None) and
+0002fd60: 2028 6c6f 7765 7243 6173 6554 7970 6520   (lowerCaseType 
+0002fd70: 3d3d 2027 6c69 6d69 7427 293a 0a20 2020  == 'limit'):.   
+0002fd80: 2020 2020 2020 2020 2072 6169 7365 2041           raise A
+0002fd90: 7267 756d 656e 7473 5265 7175 6972 6564  rgumentsRequired
+0002fda0: 2873 656c 662e 6964 202b 2027 2063 7265  (self.id + ' cre
+0002fdb0: 6174 6543 6f6e 7472 6163 7456 334f 7264  ateContractV3Ord
+0002fdc0: 6572 2072 6571 7569 7265 7320 6120 7072  er requires a pr
+0002fdd0: 6963 6520 6172 6775 6d65 6e74 2066 6f72  ice argument for
+0002fde0: 206c 696d 6974 206f 7264 6572 7327 290a   limit orders').
+0002fdf0: 2020 2020 2020 2020 7265 7175 6573 7420          request 
+0002fe00: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+0002fe10: 2773 796d 626f 6c27 3a20 6d61 726b 6574  'symbol': market
+0002fe20: 5b27 6964 275d 2c0a 2020 2020 2020 2020  ['id'],.        
+0002fe30: 2020 2020 2773 6964 6527 3a20 7365 6c66      'side': self
+0002fe40: 2e63 6170 6974 616c 697a 6528 7369 6465  .capitalize(side
+0002fe50: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
+0002fe60: 6f72 6465 7254 7970 6527 3a20 7365 6c66  orderType': self
+0002fe70: 2e63 6170 6974 616c 697a 6528 6c6f 7765  .capitalize(lowe
+0002fe80: 7243 6173 6554 7970 6529 2c20 2023 206c  rCaseType),  # l
+0002fe90: 696d 6974 206f 7220 6d61 726b 6574 0a20  imit or market. 
+0002fea0: 2020 2020 2020 2020 2020 2027 7469 6d65             'time
+0002feb0: 496e 466f 7263 6527 3a20 2747 6f6f 6454  InForce': 'GoodT
+0002fec0: 696c 6c43 616e 6365 6c27 2c20 2023 2049  illCancel',  # I
+0002fed0: 6d6d 6564 6961 7465 4f72 4361 6e63 656c  mmediateOrCancel
+0002fee0: 2c20 4669 6c6c 4f72 4b69 6c6c 2c20 506f  , FillOrKill, Po
+0002fef0: 7374 4f6e 6c79 0a20 2020 2020 2020 2020  stOnly.         
+0002ff00: 2020 2027 7174 7927 3a20 7365 6c66 2e61     'qty': self.a
+0002ff10: 6d6f 756e 745f 746f 5f70 7265 6369 7369  mount_to_precisi
+0002ff20: 6f6e 2873 796d 626f 6c2c 2061 6d6f 756e  on(symbol, amoun
+0002ff30: 7429 2c0a 2020 2020 2020 2020 2020 2020  t),.            
+0002ff40: 2320 2774 616b 6550 726f 6669 7427 3a20  # 'takeProfit': 
+0002ff50: 3132 332e 3435 2c20 2023 2074 616b 6520  123.45,  # take 
+0002ff60: 7072 6f66 6974 2070 7269 6365 2c20 6f6e  profit price, on
+0002ff70: 6c79 2074 616b 6520 6566 6665 6374 2075  ly take effect u
+0002ff80: 706f 6e20 6f70 656e 696e 6720 7468 6520  pon opening the 
+0002ff90: 706f 7369 7469 6f6e 0a20 2020 2020 2020  position.       
+0002ffa0: 2020 2020 2023 2027 7374 6f70 4c6f 7373       # 'stopLoss
+0002ffb0: 273a 2031 3233 2e34 352c 2020 2320 7374  ': 123.45,  # st
+0002ffc0: 6f70 206c 6f73 7320 7072 6963 652c 206f  op loss price, o
+0002ffd0: 6e6c 7920 7461 6b65 2065 6666 6563 7420  nly take effect 
+0002ffe0: 7570 6f6e 206f 7065 6e69 6e67 2074 6865  upon opening the
+0002fff0: 2070 6f73 6974 696f 6e0a 2020 2020 2020   position.      
+00030000: 2020 2020 2020 2320 2772 6564 7563 654f        # 'reduceO
+00030010: 6e6c 7927 3a20 4661 6c73 652c 2020 2320  nly': False,  # 
+00030020: 7265 6475 6365 206f 6e6c 792c 2072 6571  reduce only, req
+00030030: 7569 7265 6420 666f 7220 6c69 6e65 6172  uired for linear
+00030040: 206f 7264 6572 730a 2020 2020 2020 2020   orders.        
+00030050: 2020 2020 2320 7768 656e 2063 7265 6174      # when creat
+00030060: 696e 6720 6120 636c 6f73 696e 6720 6f72  ing a closing or
+00030070: 6465 722c 2062 7962 6974 2072 6563 6f6d  der, bybit recom
+00030080: 6d65 6e64 7320 6120 5472 7565 2076 616c  mends a True val
+00030090: 7565 2066 6f72 0a20 2020 2020 2020 2020  ue for.         
+000300a0: 2020 2023 2020 636c 6f73 654f 6e54 7269     #  closeOnTri
+000300b0: 6767 6572 2074 6f20 6176 6f69 6420 6661  gger to avoid fa
+000300c0: 696c 696e 6720 6475 6520 746f 2069 6e73  iling due to ins
+000300d0: 7566 6669 6369 656e 7420 6176 6169 6c61  ufficient availa
+000300e0: 626c 6520 6d61 7267 696e 0a20 2020 2020  ble margin.     
+000300f0: 2020 2020 2020 2023 2027 636c 6f73 654f         # 'closeO
+00030100: 6e54 7269 6767 6572 273a 2046 616c 7365  nTrigger': False
+00030110: 2c20 7265 7175 6972 6564 2066 6f72 206c  , required for l
+00030120: 696e 6561 7220 6f72 6465 7273 0a20 2020  inear orders.   
+00030130: 2020 2020 2020 2020 2023 2027 6f72 6465           # 'orde
+00030140: 724c 696e 6b49 6427 3a20 2773 7472 696e  rLinkId': 'strin
+00030150: 6727 2c20 2023 2075 6e69 7175 6520 636c  g',  # unique cl
+00030160: 6965 6e74 206f 7264 6572 2069 642c 206d  ient order id, m
+00030170: 6178 2033 3620 6368 6172 6163 7465 7273  ax 36 characters
+00030180: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+00030190: 7472 6967 6765 7250 7269 6365 273a 2031  triggerPrice': 1
+000301a0: 3233 2e34 352c 2020 2320 7472 6967 6765  23.45,  # trigge
+000301b0: 7220 7072 6963 652c 2072 6571 7569 7265  r price, require
+000301c0: 6420 666f 7220 636f 6e64 6974 696f 6e61  d for conditiona
+000301d0: 6c20 6f72 6465 7273 0a20 2020 2020 2020  l orders.       
+000301e0: 2020 2020 2023 2027 7472 6967 6765 7242       # 'triggerB
+000301f0: 7927 3a20 274d 6172 6b50 7269 6365 272c  y': 'MarkPrice',
+00030200: 2020 2320 496e 6465 7850 7269 6365 2c20    # IndexPrice, 
+00030210: 4d61 726b 5072 6963 650a 2020 2020 2020  MarkPrice.      
+00030220: 2020 2020 2020 2320 2774 7074 7269 6767        # 'tptrigg
+00030230: 6572 6279 273a 2027 4d61 726b 5072 6963  erby': 'MarkPric
+00030240: 6527 2c20 2023 2049 6e64 6578 5072 6963  e',  # IndexPric
+00030250: 652c 204d 6172 6b50 7269 6365 0a20 2020  e, MarkPrice.   
+00030260: 2020 2020 2020 2020 2023 2027 736c 5472           # 'slTr
+00030270: 6967 6765 7242 7927 3a20 274d 6172 6b50  iggerBy': 'MarkP
+00030280: 7269 6365 272c 2020 2320 496e 6465 7850  rice',  # IndexP
+00030290: 7269 6365 2c20 4d61 726b 5072 6963 650a  rice, MarkPrice.
+000302a0: 2020 2020 2020 2020 2020 2020 2320 2770              # 'p
+000302b0: 6f73 6974 696f 6e49 6478 273a 2030 2c20  ositionIdx': 0, 
+000302c0: 2023 2050 6f73 6974 696f 6e20 6d6f 6465   # Position mode
+000302d0: 2e20 756e 6966 6965 6420 6d61 7267 696e  . unified margin
+000302e0: 2061 6363 6f75 6e74 2069 7320 6f6e 6c79   account is only
+000302f0: 2061 7661 696c 6162 6c65 2069 6e20 4f6e   available in On
+00030300: 652d 5761 7920 6d6f 6465 2c20 7768 6963  e-Way mode, whic
+00030310: 6820 6973 2030 0a20 2020 2020 2020 2020  h is 0.         
+00030320: 2020 2023 2027 7472 6967 6765 7244 6972     # 'triggerDir
+00030330: 6563 7469 6f6e 273a 2031 2c20 2023 2054  ection': 1,  # T
+00030340: 7269 6767 6572 2064 6972 6563 7469 6f6e  rigger direction
+00030350: 2e20 4d61 696e 6c79 2075 7365 6420 696e  . Mainly used in
+00030360: 2063 6f6e 6469 7469 6f6e 616c 206f 7264   conditional ord
+00030370: 6572 2e20 5472 6967 6765 7220 7468 6520  er. Trigger the 
+00030380: 6f72 6465 7220 7768 656e 206d 6172 6b65  order when marke
+00030390: 7420 7072 6963 6520 7269 7365 7320 746f  t price rises to
+000303a0: 2074 7269 6767 6572 5072 6963 6520 6f72   triggerPrice or
+000303b0: 2066 616c 6c73 2074 6f20 7472 6967 6765   falls to trigge
+000303c0: 7250 7269 6365 2e20 313a 2072 6973 653b  rPrice. 1: rise;
+000303d0: 2032 3a20 6661 6c6c 0a20 2020 2020 2020   2: fall.       
+000303e0: 207d 0a20 2020 2020 2020 2069 6620 6d61   }.        if ma
+000303f0: 726b 6574 5b27 6675 7475 7265 275d 3a0a  rket['future']:.
+00030400: 2020 2020 2020 2020 2020 2020 706f 7369              posi
+00030410: 7469 6f6e 4964 7820 3d20 7365 6c66 2e73  tionIdx = self.s
+00030420: 6166 655f 696e 7465 6765 7228 7061 7261  afe_integer(para
+00030430: 6d73 2c20 2770 6f73 6974 696f 6e5f 6964  ms, 'position_id
+00030440: 7827 2c20 3029 2020 2320 3020 4f6e 652d  x', 0)  # 0 One-
+00030450: 5761 7920 4d6f 6465 2c20 3120 4275 792d  Way Mode, 1 Buy-
+00030460: 7369 6465 2c20 3220 5365 6c6c 2d73 6964  side, 2 Sell-sid
+00030470: 650a 2020 2020 2020 2020 2020 2020 7265  e.            re
+00030480: 7175 6573 745b 2770 6f73 6974 696f 6e5f  quest['position_
+00030490: 6964 7827 5d20 3d20 706f 7369 7469 6f6e  idx'] = position
+000304a0: 4964 780a 2020 2020 2020 2020 2020 2020  Idx.            
+000304b0: 7061 7261 6d73 203d 2073 656c 662e 6f6d  params = self.om
+000304c0: 6974 2870 6172 616d 732c 2027 706f 7369  it(params, 'posi
+000304d0: 7469 6f6e 5f69 6478 2729 0a20 2020 2020  tion_idx').     
+000304e0: 2020 2069 734d 6172 6b65 7420 3d20 6c6f     isMarket = lo
+000304f0: 7765 7243 6173 6554 7970 6520 3d3d 2027  werCaseType == '
+00030500: 6d61 726b 6574 270a 2020 2020 2020 2020  market'.        
+00030510: 6973 4c69 6d69 7420 3d20 6c6f 7765 7243  isLimit = lowerC
+00030520: 6173 6554 7970 6520 3d3d 2027 6c69 6d69  aseType == 'limi
+00030530: 7427 0a20 2020 2020 2020 2069 6620 6973  t'.        if is
+00030540: 4c69 6d69 743a 0a20 2020 2020 2020 2020  Limit:.         
+00030550: 2020 2072 6571 7565 7374 5b27 7072 6963     request['pric
+00030560: 6527 5d20 3d20 7365 6c66 2e70 7269 6365  e'] = self.price
+00030570: 5f74 6f5f 7072 6563 6973 696f 6e28 7379  _to_precision(sy
+00030580: 6d62 6f6c 2c20 7072 6963 6529 0a20 2020  mbol, price).   
+00030590: 2020 2020 2074 696d 6549 6e46 6f72 6365       timeInForce
+000305a0: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+000305b0: 696e 675f 6c6f 7765 7228 7061 7261 6d73  ing_lower(params
+000305c0: 2c20 2774 696d 6549 6e46 6f72 6365 2729  , 'timeInForce')
+000305d0: 2020 2320 7361 6d65 2073 7065 6369 6669    # same specifi
+000305e0: 6320 7061 7261 6d0a 2020 2020 2020 2020  c param.        
+000305f0: 706f 7374 4f6e 6c79 203d 204e 6f6e 650a  postOnly = None.
+00030600: 2020 2020 2020 2020 706f 7374 4f6e 6c79          postOnly
+00030610: 2c20 7061 7261 6d73 203d 2073 656c 662e  , params = self.
+00030620: 6861 6e64 6c65 5f70 6f73 745f 6f6e 6c79  handle_post_only
+00030630: 2869 734d 6172 6b65 742c 2074 696d 6549  (isMarket, timeI
+00030640: 6e46 6f72 6365 203d 3d20 2750 6f73 744f  nForce == 'PostO
+00030650: 6e6c 7927 2c20 7061 7261 6d73 290a 2020  nly', params).  
+00030660: 2020 2020 2020 6966 2070 6f73 744f 6e6c        if postOnl
+00030670: 793a 0a20 2020 2020 2020 2020 2020 2072  y:.            r
+00030680: 6571 7565 7374 5b27 7469 6d65 496e 466f  equest['timeInFo
+00030690: 7263 6527 5d20 3d20 2750 6f73 744f 6e6c  rce'] = 'PostOnl
+000306a0: 7927 0a20 2020 2020 2020 2065 6c69 6620  y'.        elif 
+000306b0: 7469 6d65 496e 466f 7263 6520 3d3d 2027  timeInForce == '
+000306c0: 6774 6327 3a0a 2020 2020 2020 2020 2020  gtc':.          
+000306d0: 2020 7265 7175 6573 745b 2774 696d 6549    request['timeI
+000306e0: 6e46 6f72 6365 275d 203d 2027 476f 6f64  nForce'] = 'Good
+000306f0: 5469 6c6c 4361 6e63 656c 270a 2020 2020  TillCancel'.    
+00030700: 2020 2020 656c 6966 2074 696d 6549 6e46      elif timeInF
+00030710: 6f72 6365 203d 3d20 2766 6f6b 273a 0a20  orce == 'fok':. 
+00030720: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+00030730: 7374 5b27 7469 6d65 496e 466f 7263 6527  st['timeInForce'
+00030740: 5d20 3d20 2746 696c 6c4f 724b 696c 6c27  ] = 'FillOrKill'
+00030750: 0a20 2020 2020 2020 2065 6c69 6620 7469  .        elif ti
+00030760: 6d65 496e 466f 7263 6520 3d3d 2027 696f  meInForce == 'io
+00030770: 6327 3a0a 2020 2020 2020 2020 2020 2020  c':.            
+00030780: 7265 7175 6573 745b 2774 696d 6549 6e46  request['timeInF
+00030790: 6f72 6365 275d 203d 2027 496d 6d65 6469  orce'] = 'Immedi
+000307a0: 6174 654f 7243 616e 6365 6c27 0a20 2020  ateOrCancel'.   
+000307b0: 2020 2020 2074 7269 6767 6572 5072 6963       triggerPric
+000307c0: 6520 3d20 7365 6c66 2e73 6166 655f 6e75  e = self.safe_nu
+000307d0: 6d62 6572 5f32 2870 6172 616d 732c 2027  mber_2(params, '
+000307e0: 7472 6967 6765 7250 7269 6365 272c 2027  triggerPrice', '
+000307f0: 7374 6f70 5072 6963 6527 290a 2020 2020  stopPrice').    
+00030800: 2020 2020 7374 6f70 4c6f 7373 5472 6967      stopLossTrig
+00030810: 6765 7250 7269 6365 203d 2073 656c 662e  gerPrice = self.
+00030820: 7361 6665 5f6e 756d 6265 7228 7061 7261  safe_number(para
+00030830: 6d73 2c20 2773 746f 704c 6f73 7350 7269  ms, 'stopLossPri
+00030840: 6365 272c 2074 7269 6767 6572 5072 6963  ce', triggerPric
+00030850: 6529 0a20 2020 2020 2020 2074 616b 6550  e).        takeP
+00030860: 726f 6669 7454 7269 6767 6572 5072 6963  rofitTriggerPric
+00030870: 6520 3d20 7365 6c66 2e73 6166 655f 6e75  e = self.safe_nu
+00030880: 6d62 6572 2870 6172 616d 732c 2027 7461  mber(params, 'ta
+00030890: 6b65 5072 6f66 6974 5072 6963 6527 290a  keProfitPrice').
+000308a0: 2020 2020 2020 2020 7374 6f70 4c6f 7373          stopLoss
+000308b0: 203d 2073 656c 662e 7361 6665 5f6e 756d   = self.safe_num
+000308c0: 6265 7228 7061 7261 6d73 2c20 2773 746f  ber(params, 'sto
+000308d0: 704c 6f73 7327 290a 2020 2020 2020 2020  pLoss').        
+000308e0: 7461 6b65 5072 6f66 6974 203d 2073 656c  takeProfit = sel
+000308f0: 662e 7361 6665 5f6e 756d 6265 7228 7061  f.safe_number(pa
+00030900: 7261 6d73 2c20 2774 616b 6550 726f 6669  rams, 'takeProfi
+00030910: 7427 290a 2020 2020 2020 2020 6973 5374  t').        isSt
+00030920: 6f70 4c6f 7373 5472 6967 6765 724f 7264  opLossTriggerOrd
+00030930: 6572 203d 2073 746f 704c 6f73 7354 7269  er = stopLossTri
+00030940: 6767 6572 5072 6963 6520 6973 206e 6f74  ggerPrice is not
+00030950: 204e 6f6e 650a 2020 2020 2020 2020 6973   None.        is
+00030960: 5461 6b65 5072 6f66 6974 5472 6967 6765  TakeProfitTrigge
+00030970: 724f 7264 6572 203d 2074 616b 6550 726f  rOrder = takePro
+00030980: 6669 7454 7269 6767 6572 5072 6963 6520  fitTriggerPrice 
+00030990: 6973 206e 6f74 204e 6f6e 650a 2020 2020  is not None.    
+000309a0: 2020 2020 6973 5374 6f70 4c6f 7373 203d      isStopLoss =
+000309b0: 2073 746f 704c 6f73 7320 6973 206e 6f74   stopLoss is not
+000309c0: 204e 6f6e 650a 2020 2020 2020 2020 6973   None.        is
+000309d0: 5461 6b65 5072 6f66 6974 203d 2074 616b  TakeProfit = tak
+000309e0: 6550 726f 6669 7420 6973 206e 6f74 204e  eProfit is not N
+000309f0: 6f6e 650a 2020 2020 2020 2020 6973 4275  one.        isBu
+00030a00: 7920 3d20 7369 6465 203d 3d20 2762 7579  y = side == 'buy
+00030a10: 270a 2020 2020 2020 2020 6173 6365 6e64  '.        ascend
+00030a20: 696e 6720 3d20 6e6f 7420 6973 4275 7920  ing = not isBuy 
+00030a30: 6966 2073 746f 704c 6f73 7354 7269 6767  if stopLossTrigg
+00030a40: 6572 5072 6963 6520 656c 7365 2069 7342  erPrice else isB
+00030a50: 7579 0a20 2020 2020 2020 2069 6620 7472  uy.        if tr
+00030a60: 6967 6765 7250 7269 6365 2069 7320 6e6f  iggerPrice is no
+00030a70: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00030a80: 2020 2020 7265 7175 6573 745b 2774 7269      request['tri
+00030a90: 6767 6572 4469 7265 6374 696f 6e27 5d20  ggerDirection'] 
+00030aa0: 3d20 3220 6966 2061 7363 656e 6469 6e67  = 2 if ascending
+00030ab0: 2065 6c73 6520 310a 2020 2020 2020 2020   else 1.        
+00030ac0: 2020 2020 7265 7175 6573 745b 2774 7269      request['tri
+00030ad0: 6767 6572 5072 6963 6527 5d20 3d20 7365  ggerPrice'] = se
+00030ae0: 6c66 2e70 7269 6365 5f74 6f5f 7072 6563  lf.price_to_prec
+00030af0: 6973 696f 6e28 7379 6d62 6f6c 2c20 7472  ision(symbol, tr
+00030b00: 6967 6765 7250 7269 6365 290a 2020 2020  iggerPrice).    
+00030b10: 2020 2020 656c 6966 2069 7353 746f 704c      elif isStopL
+00030b20: 6f73 7354 7269 6767 6572 4f72 6465 7220  ossTriggerOrder 
+00030b30: 6f72 2069 7354 616b 6550 726f 6669 7454  or isTakeProfitT
+00030b40: 7269 6767 6572 4f72 6465 723a 0a20 2020  riggerOrder:.   
+00030b50: 2020 2020 2020 2020 2072 6571 7565 7374           request
+00030b60: 5b27 7472 6967 6765 7244 6972 6563 7469  ['triggerDirecti
+00030b70: 6f6e 275d 203d 2032 2069 6620 6173 6365  on'] = 2 if asce
+00030b80: 6e64 696e 6720 656c 7365 2031 0a20 2020  nding else 1.   
+00030b90: 2020 2020 2020 2020 2074 7269 6767 6572           trigger
+00030ba0: 5072 6963 6520 3d20 7374 6f70 4c6f 7373  Price = stopLoss
+00030bb0: 5472 6967 6765 7250 7269 6365 2069 6620  TriggerPrice if 
+00030bc0: 6973 5374 6f70 4c6f 7373 5472 6967 6765  isStopLossTrigge
+00030bd0: 724f 7264 6572 2065 6c73 6520 7461 6b65  rOrder else take
+00030be0: 5072 6f66 6974 5472 6967 6765 7250 7269  ProfitTriggerPri
+00030bf0: 6365 0a20 2020 2020 2020 2020 2020 2072  ce.            r
+00030c00: 6571 7565 7374 5b27 7472 6967 6765 7250  equest['triggerP
+00030c10: 7269 6365 275d 203d 2073 656c 662e 7072  rice'] = self.pr
+00030c20: 6963 655f 746f 5f70 7265 6369 7369 6f6e  ice_to_precision
+00030c30: 2873 796d 626f 6c2c 2074 7269 6767 6572  (symbol, trigger
+00030c40: 5072 6963 6529 0a20 2020 2020 2020 2020  Price).         
+00030c50: 2020 2072 6571 7565 7374 5b27 7265 6475     request['redu
+00030c60: 6365 4f6e 6c79 275d 203d 2054 7275 650a  ceOnly'] = True.
+00030c70: 2020 2020 2020 2020 656c 6966 2069 7353          elif isS
+00030c80: 746f 704c 6f73 7320 6f72 2069 7354 616b  topLoss or isTak
+00030c90: 6550 726f 6669 743a 0a20 2020 2020 2020  eProfit:.       
+00030ca0: 2020 2020 2069 6620 6973 5374 6f70 4c6f       if isStopLo
+00030cb0: 7373 3a0a 2020 2020 2020 2020 2020 2020  ss:.            
+00030cc0: 2020 2020 7265 7175 6573 745b 2773 746f      request['sto
+00030cd0: 704c 6f73 7327 5d20 3d20 7365 6c66 2e70  pLoss'] = self.p
+00030ce0: 7269 6365 5f74 6f5f 7072 6563 6973 696f  rice_to_precisio
+00030cf0: 6e28 7379 6d62 6f6c 2c20 7374 6f70 4c6f  n(symbol, stopLo
+00030d00: 7373 290a 2020 2020 2020 2020 2020 2020  ss).            
+00030d10: 6966 2069 7354 616b 6550 726f 6669 743a  if isTakeProfit:
+00030d20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00030d30: 2072 6571 7565 7374 5b27 7461 6b65 5072   request['takePr
+00030d40: 6f66 6974 275d 203d 2073 656c 662e 7072  ofit'] = self.pr
+00030d50: 6963 655f 746f 5f70 7265 6369 7369 6f6e  ice_to_precision
+00030d60: 2873 796d 626f 6c2c 2074 616b 6550 726f  (symbol, takePro
+00030d70: 6669 7429 0a20 2020 2020 2020 2063 6c69  fit).        cli
+00030d80: 656e 744f 7264 6572 4964 203d 2073 656c  entOrderId = sel
+00030d90: 662e 7361 6665 5f73 7472 696e 6728 7061  f.safe_string(pa
+00030da0: 7261 6d73 2c20 2763 6c69 656e 744f 7264  rams, 'clientOrd
+00030db0: 6572 4964 2729 0a20 2020 2020 2020 2069  erId').        i
+00030dc0: 6620 636c 6965 6e74 4f72 6465 7249 6420  f clientOrderId 
+00030dd0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00030de0: 2020 2020 2020 2020 2072 6571 7565 7374           request
+00030df0: 5b27 6f72 6465 724c 696e 6b49 6427 5d20  ['orderLinkId'] 
+00030e00: 3d20 636c 6965 6e74 4f72 6465 7249 640a  = clientOrderId.
+00030e10: 2020 2020 2020 2020 656c 6966 206d 6172          elif mar
+00030e20: 6b65 745b 276f 7074 696f 6e27 5d3a 0a20  ket['option']:. 
+00030e30: 2020 2020 2020 2020 2020 2023 206d 616e             # man
+00030e40: 6461 746f 7279 2066 6965 6c64 2066 6f72  datory field for
+00030e50: 206f 7074 696f 6e73 0a20 2020 2020 2020   options.       
+00030e60: 2020 2020 2072 6571 7565 7374 5b27 6f72       request['or
+00030e70: 6465 724c 696e 6b49 6427 5d20 3d20 7365  derLinkId'] = se
+00030e80: 6c66 2e75 7569 6431 3628 290a 2020 2020  lf.uuid16().    
+00030e90: 2020 2020 7061 7261 6d73 203d 2073 656c      params = sel
+00030ea0: 662e 6f6d 6974 2870 6172 616d 732c 205b  f.omit(params, [
+00030eb0: 2773 746f 7050 7269 6365 272c 2027 7469  'stopPrice', 'ti
+00030ec0: 6d65 496e 466f 7263 6527 2c20 2773 746f  meInForce', 'sto
+00030ed0: 704c 6f73 7350 7269 6365 272c 2027 7461  pLossPrice', 'ta
+00030ee0: 6b65 5072 6f66 6974 5072 6963 6527 2c20  keProfitPrice', 
+00030ef0: 2770 6f73 744f 6e6c 7927 2c20 2763 6c69  'postOnly', 'cli
+00030f00: 656e 744f 7264 6572 4964 272c 2027 7472  entOrderId', 'tr
+00030f10: 6967 6765 7250 7269 6365 272c 2027 7374  iggerPrice', 'st
+00030f20: 6f70 4c6f 7373 272c 2027 7461 6b65 5072  opLoss', 'takePr
+00030f30: 6f66 6974 275d 290a 2020 2020 2020 2020  ofit']).        
+00030f40: 7265 7370 6f6e 7365 203d 2061 7761 6974  response = await
+00030f50: 2073 656c 662e 7072 6976 6174 6550 6f73   self.privatePos
+00030f60: 7443 6f6e 7472 6163 7456 3350 7269 7661  tContractV3Priva
+00030f70: 7465 4f72 6465 7243 7265 6174 6528 7365  teOrderCreate(se
+00030f80: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
+00030f90: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
+00030fa0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+00030fb0: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+00030fc0: 2020 2020 2020 2020 2272 6574 436f 6465          "retCode
+00030fd0: 223a 2030 2c0a 2020 2020 2020 2020 2320  ": 0,.        # 
+00030fe0: 2020 2020 2020 2020 2272 6574 4d73 6722          "retMsg"
+00030ff0: 3a20 224f 4b22 2c0a 2020 2020 2020 2020  : "OK",.        
+00031000: 2320 2020 2020 2020 2020 2272 6573 756c  #         "resul
+00031010: 7422 3a20 7b0a 2020 2020 2020 2020 2320  t": {.        # 
+00031020: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+00031030: 6572 4964 223a 2022 6531 3062 3037 3136  erId": "e10b0716
+00031040: 2d37 6339 312d 3430 3931 2d62 3938 612d  -7c91-4091-b98a-
+00031050: 3166 6130 6634 3031 6337 6435 222c 0a20  1fa0f401c7d5",. 
+00031060: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00031070: 2020 2020 2022 6f72 6465 724c 696e 6b49       "orderLinkI
+00031080: 6422 3a20 2274 6573 7430 3030 3030 3033  d": "test0000003
+00031090: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
+000310a0: 2020 2020 7d2c 0a20 2020 2020 2020 2023      },.        #
+000310b0: 2020 2020 2020 2020 2022 7265 7445 7874           "retExt
+000310c0: 496e 666f 223a 206e 756c 6c2c 0a20 2020  Info": null,.   
+000310d0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+000310e0: 7469 6d65 223a 2031 3636 3434 3431 3334  time": 166444134
+000310f0: 3432 3338 0a20 2020 2020 2020 2023 2020  4238.        #  
+00031100: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
+00031110: 2020 2020 2020 206f 7264 6572 203d 2073         order = s
+00031120: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
+00031130: 6573 706f 6e73 652c 2027 7265 7375 6c74  esponse, 'result
+00031140: 272c 207b 7d29 0a20 2020 2020 2020 2072  ', {}).        r
+00031150: 6574 7572 6e20 7365 6c66 2e70 6172 7365  eturn self.parse
+00031160: 5f6f 7264 6572 286f 7264 6572 290a 0a20  _order(order).. 
+00031170: 2020 2061 7379 6e63 2064 6566 2063 7265     async def cre
+00031180: 6174 655f 7573 6463 5f6f 7264 6572 2873  ate_usdc_order(s
+00031190: 656c 662c 2073 796d 626f 6c3a 2073 7472  elf, symbol: str
+000311a0: 2c20 7479 7065 2c20 7369 6465 2c20 616d  , type, side, am
+000311b0: 6f75 6e74 2c20 7072 6963 653d 4e6f 6e65  ount, price=None
+000311c0: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
+000311d0: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
+000311e0: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
+000311f0: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
+00031200: 2073 656c 662e 6d61 726b 6574 2873 796d   self.market(sym
+00031210: 626f 6c29 0a20 2020 2020 2020 206c 6f77  bol).        low
+00031220: 6572 4361 7365 5479 7065 203d 2074 7970  erCaseType = typ
+00031230: 652e 6c6f 7765 7228 290a 2020 2020 2020  e.lower().      
+00031240: 2020 6966 2028 7072 6963 6520 6973 204e    if (price is N
+00031250: 6f6e 6529 2061 6e64 2028 6c6f 7765 7243  one) and (lowerC
+00031260: 6173 6554 7970 6520 3d3d 2027 6c69 6d69  aseType == 'limi
+00031270: 7427 293a 0a20 2020 2020 2020 2020 2020  t'):.           
+00031280: 2072 6169 7365 2041 7267 756d 656e 7473   raise Arguments
+00031290: 5265 7175 6972 6564 2873 656c 662e 6964  Required(self.id
+000312a0: 202b 2027 2063 7265 6174 654f 7264 6572   + ' createOrder
+000312b0: 2072 6571 7569 7265 7320 6120 7072 6963   requires a pric
+000312c0: 6520 6172 6775 6d65 6e74 2066 6f72 206c  e argument for l
+000312d0: 696d 6974 206f 7264 6572 7327 290a 2020  imit orders').  
+000312e0: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
+000312f0: 7b0a 2020 2020 2020 2020 2020 2020 2773  {.            's
+00031300: 796d 626f 6c27 3a20 6d61 726b 6574 5b27  ymbol': market['
+00031310: 6964 275d 2c0a 2020 2020 2020 2020 2020  id'],.          
+00031320: 2020 2773 6964 6527 3a20 7365 6c66 2e63    'side': self.c
+00031330: 6170 6974 616c 697a 6528 7369 6465 292c  apitalize(side),
+00031340: 0a20 2020 2020 2020 2020 2020 2027 6f72  .            'or
+00031350: 6465 7254 7970 6527 3a20 7365 6c66 2e63  derType': self.c
+00031360: 6170 6974 616c 697a 6528 6c6f 7765 7243  apitalize(lowerC
+00031370: 6173 6554 7970 6529 2c20 2023 206c 696d  aseType),  # lim
+00031380: 6974 206f 7220 6d61 726b 6574 0a20 2020  it or market.   
+00031390: 2020 2020 2020 2020 2027 7469 6d65 496e           'timeIn
+000313a0: 466f 7263 6527 3a20 2747 6f6f 6454 696c  Force': 'GoodTil
+000313b0: 6c43 616e 6365 6c27 2c20 2023 2049 6d6d  lCancel',  # Imm
+000313c0: 6564 6961 7465 4f72 4361 6e63 656c 2c20  ediateOrCancel, 
+000313d0: 4669 6c6c 4f72 4b69 6c6c 2c20 506f 7374  FillOrKill, Post
+000313e0: 4f6e 6c79 0a20 2020 2020 2020 2020 2020  Only.           
+000313f0: 2027 6f72 6465 7251 7479 273a 2073 656c   'orderQty': sel
+00031400: 662e 616d 6f75 6e74 5f74 6f5f 7072 6563  f.amount_to_prec
+00031410: 6973 696f 6e28 7379 6d62 6f6c 2c20 616d  ision(symbol, am
+00031420: 6f75 6e74 292c 0a20 2020 2020 2020 2020  ount),.         
+00031430: 2020 2023 2027 7461 6b65 5072 6f66 6974     # 'takeProfit
+00031440: 273a 2031 3233 2e34 352c 2020 2320 7461  ': 123.45,  # ta
+00031450: 6b65 2070 726f 6669 7420 7072 6963 652c  ke profit price,
+00031460: 206f 6e6c 7920 7461 6b65 2065 6666 6563   only take effec
+00031470: 7420 7570 6f6e 206f 7065 6e69 6e67 2074  t upon opening t
+00031480: 6865 2070 6f73 6974 696f 6e0a 2020 2020  he position.    
+00031490: 2020 2020 2020 2020 2320 2773 746f 704c          # 'stopL
+000314a0: 6f73 7327 3a20 3132 332e 3435 2c20 2023  oss': 123.45,  #
+000314b0: 2073 746f 7020 6c6f 7373 2070 7269 6365   stop loss price
+000314c0: 2c20 6f6e 6c79 2074 616b 6520 6566 6665  , only take effe
+000314d0: 6374 2075 706f 6e20 6f70 656e 696e 6720  ct upon opening 
+000314e0: 7468 6520 706f 7369 7469 6f6e 0a20 2020  the position.   
+000314f0: 2020 2020 2020 2020 2023 2027 7265 6475           # 'redu
+00031500: 6365 4f6e 6c79 273a 2046 616c 7365 2c20  ceOnly': False, 
+00031510: 2023 2072 6564 7563 6520 6f6e 6c79 2c20   # reduce only, 
+00031520: 7265 7175 6972 6564 2066 6f72 206c 696e  required for lin
+00031530: 6561 7220 6f72 6465 7273 0a20 2020 2020  ear orders.     
+00031540: 2020 2020 2020 2023 2077 6865 6e20 6372         # when cr
+00031550: 6561 7469 6e67 2061 2063 6c6f 7369 6e67  eating a closing
+00031560: 206f 7264 6572 2c20 6279 6269 7420 7265   order, bybit re
+00031570: 636f 6d6d 656e 6473 2061 2054 7275 6520  commends a True 
+00031580: 7661 6c75 6520 666f 720a 2020 2020 2020  value for.      
+00031590: 2020 2020 2020 2320 2063 6c6f 7365 4f6e        #  closeOn
+000315a0: 5472 6967 6765 7220 746f 2061 766f 6964  Trigger to avoid
+000315b0: 2066 6169 6c69 6e67 2064 7565 2074 6f20   failing due to 
+000315c0: 696e 7375 6666 6963 6965 6e74 2061 7661  insufficient ava
+000315d0: 696c 6162 6c65 206d 6172 6769 6e0a 2020  ilable margin.  
+000315e0: 2020 2020 2020 2020 2020 2320 2763 6c6f            # 'clo
+000315f0: 7365 4f6e 5472 6967 6765 7227 3a20 4661  seOnTrigger': Fa
+00031600: 6c73 652c 2072 6571 7569 7265 6420 666f  lse, required fo
+00031610: 7220 6c69 6e65 6172 206f 7264 6572 730a  r linear orders.
+00031620: 2020 2020 2020 2020 2020 2020 2320 276f              # 'o
+00031630: 7264 6572 4c69 6e6b 4964 273a 2027 7374  rderLinkId': 'st
+00031640: 7269 6e67 272c 2020 2320 756e 6971 7565  ring',  # unique
+00031650: 2063 6c69 656e 7420 6f72 6465 7220 6964   client order id
+00031660: 2c20 6d61 7820 3336 2063 6861 7261 6374  , max 36 charact
+00031670: 6572 730a 2020 2020 2020 2020 2020 2020  ers.            
+00031680: 2320 2774 7269 6767 6572 5072 6963 6527  # 'triggerPrice'
+00031690: 3a20 3132 332e 3435 2c20 2023 2074 7269  : 123.45,  # tri
+000316a0: 6767 6572 2070 7269 6365 2c20 7265 7175  gger price, requ
+000316b0: 6972 6564 2066 6f72 2063 6f6e 6469 7469  ired for conditi
+000316c0: 6f6e 616c 206f 7264 6572 730a 2020 2020  onal orders.    
+000316d0: 2020 2020 2020 2020 2320 2774 7269 6767          # 'trigg
+000316e0: 6572 5f62 7927 3a20 274d 6172 6b50 7269  er_by': 'MarkPri
+000316f0: 6365 272c 2020 2320 496e 6465 7850 7269  ce',  # IndexPri
+00031700: 6365 2c20 4d61 726b 5072 6963 650a 2020  ce, MarkPrice.  
+00031710: 2020 2020 2020 2020 2020 2320 2774 7074            # 'tpt
+00031720: 7269 6767 6572 6279 273a 2027 4d61 726b  riggerby': 'Mark
+00031730: 5072 6963 6527 2c20 2023 2049 6e64 6578  Price',  # Index
+00031740: 5072 6963 652c 204d 6172 6b50 7269 6365  Price, MarkPrice
+00031750: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+00031760: 736c 5472 6967 6765 7242 7927 3a20 274d  slTriggerBy': 'M
+00031770: 6172 6b50 7269 6365 272c 2020 2320 496e  arkPrice',  # In
+00031780: 6465 7850 7269 6365 2c20 4d61 726b 5072  dexPrice, MarkPr
+00031790: 6963 650a 2020 2020 2020 2020 2020 2020  ice.            
+000317a0: 2320 276f 7264 6572 4669 6c74 6572 273a  # 'orderFilter':
+000317b0: 2027 4f72 6465 7227 206f 7220 2753 746f   'Order' or 'Sto
+000317c0: 704f 7264 6572 270a 2020 2020 2020 2020  pOrder'.        
+000317d0: 2020 2020 2320 276d 6d70 273a 2046 616c      # 'mmp': Fal
+000317e0: 7365 2020 2320 6d61 726b 6574 206d 616b  se  # market mak
+000317f0: 6572 2070 726f 7465 6374 696f 6e0a 2020  er protection.  
+00031800: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00031810: 6973 4d61 726b 6574 203d 206c 6f77 6572  isMarket = lower
+00031820: 4361 7365 5479 7065 203d 3d20 276d 6172  CaseType == 'mar
+00031830: 6b65 7427 0a20 2020 2020 2020 2069 734c  ket'.        isL
+00031840: 696d 6974 203d 206c 6f77 6572 4361 7365  imit = lowerCase
+00031850: 5479 7065 203d 3d20 276c 696d 6974 270a  Type == 'limit'.
+00031860: 2020 2020 2020 2020 6966 2069 734c 696d          if isLim
+00031870: 6974 3a0a 2020 2020 2020 2020 2020 2020  it:.            
+00031880: 7265 7175 6573 745b 276f 7264 6572 5072  request['orderPr
+00031890: 6963 6527 5d20 3d20 7365 6c66 2e70 7269  ice'] = self.pri
+000318a0: 6365 5f74 6f5f 7072 6563 6973 696f 6e28  ce_to_precision(
+000318b0: 7379 6d62 6f6c 2c20 7072 6963 6529 0a20  symbol, price). 
+000318c0: 2020 2020 2020 2065 7863 6861 6e67 6553         exchangeS
+000318d0: 7065 6369 6669 6350 6172 616d 203d 2073  pecificParam = s
+000318e0: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+000318f0: 7061 7261 6d73 2c20 2774 696d 655f 696e  params, 'time_in
+00031900: 5f66 6f72 6365 2729 0a20 2020 2020 2020  _force').       
+00031910: 2074 696d 6549 6e46 6f72 6365 203d 2073   timeInForce = s
+00031920: 656c 662e 7361 6665 5f73 7472 696e 675f  elf.safe_string_
+00031930: 6c6f 7765 7228 7061 7261 6d73 2c20 2774  lower(params, 't
+00031940: 696d 6549 6e46 6f72 6365 2729 0a20 2020  imeInForce').   
+00031950: 2020 2020 2070 6f73 744f 6e6c 7920 3d20       postOnly = 
+00031960: 4e6f 6e65 0a20 2020 2020 2020 2070 6f73  None.        pos
+00031970: 744f 6e6c 792c 2070 6172 616d 7320 3d20  tOnly, params = 
+00031980: 7365 6c66 2e68 616e 646c 655f 706f 7374  self.handle_post
+00031990: 5f6f 6e6c 7928 6973 4d61 726b 6574 2c20  _only(isMarket, 
+000319a0: 6578 6368 616e 6765 5370 6563 6966 6963  exchangeSpecific
+000319b0: 5061 7261 6d20 3d3d 2027 506f 7374 4f6e  Param == 'PostOn
+000319c0: 6c79 272c 2070 6172 616d 7329 0a20 2020  ly', params).   
+000319d0: 2020 2020 2069 6620 706f 7374 4f6e 6c79       if postOnly
+000319e0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+000319f0: 7175 6573 745b 2774 696d 655f 696e 5f66  quest['time_in_f
+00031a00: 6f72 6365 275d 203d 2027 506f 7374 4f6e  orce'] = 'PostOn
+00031a10: 6c79 270a 2020 2020 2020 2020 656c 6966  ly'.        elif
+00031a20: 2074 696d 6549 6e46 6f72 6365 203d 3d20   timeInForce == 
+00031a30: 2767 7463 273a 0a20 2020 2020 2020 2020  'gtc':.         
+00031a40: 2020 2072 6571 7565 7374 5b27 7469 6d65     request['time
+00031a50: 5f69 6e5f 666f 7263 6527 5d20 3d20 2747  _in_force'] = 'G
+00031a60: 6f6f 6454 696c 6c43 616e 6365 6c27 0a20  oodTillCancel'. 
+00031a70: 2020 2020 2020 2065 6c69 6620 7469 6d65         elif time
+00031a80: 496e 466f 7263 6520 3d3d 2027 666f 6b27  InForce == 'fok'
+00031a90: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00031aa0: 7175 6573 745b 2774 696d 655f 696e 5f66  quest['time_in_f
+00031ab0: 6f72 6365 275d 203d 2027 4669 6c6c 4f72  orce'] = 'FillOr
+00031ac0: 4b69 6c6c 270a 2020 2020 2020 2020 656c  Kill'.        el
+00031ad0: 6966 2074 696d 6549 6e46 6f72 6365 203d  if timeInForce =
+00031ae0: 3d20 2769 6f63 273a 0a20 2020 2020 2020  = 'ioc':.       
+00031af0: 2020 2020 2072 6571 7565 7374 5b27 7469       request['ti
+00031b00: 6d65 5f69 6e5f 666f 7263 6527 5d20 3d20  me_in_force'] = 
+00031b10: 2749 6d6d 6564 6961 7465 4f72 4361 6e63  'ImmediateOrCanc
+00031b20: 656c 270a 2020 2020 2020 2020 6966 206d  el'.        if m
+00031b30: 6172 6b65 745b 2773 7761 7027 5d3a 0a20  arket['swap']:. 
+00031b40: 2020 2020 2020 2020 2020 2074 7269 6767             trigg
+00031b50: 6572 5072 6963 6520 3d20 7365 6c66 2e73  erPrice = self.s
+00031b60: 6166 655f 6e75 6d62 6572 5f32 2870 6172  afe_number_2(par
+00031b70: 616d 732c 2027 7374 6f70 5072 6963 6527  ams, 'stopPrice'
+00031b80: 2c20 2774 7269 6767 6572 5072 6963 6527  , 'triggerPrice'
+00031b90: 290a 2020 2020 2020 2020 2020 2020 7374  ).            st
+00031ba0: 6f70 4c6f 7373 5472 6967 6765 7250 7269  opLossTriggerPri
+00031bb0: 6365 203d 2073 656c 662e 7361 6665 5f6e  ce = self.safe_n
+00031bc0: 756d 6265 7228 7061 7261 6d73 2c20 2773  umber(params, 's
+00031bd0: 746f 704c 6f73 7350 7269 6365 272c 2074  topLossPrice', t
+00031be0: 7269 6767 6572 5072 6963 6529 0a20 2020  riggerPrice).   
+00031bf0: 2020 2020 2020 2020 2074 616b 6550 726f           takePro
+00031c00: 6669 7454 7269 6767 6572 5072 6963 6520  fitTriggerPrice 
+00031c10: 3d20 7365 6c66 2e73 6166 655f 6e75 6d62  = self.safe_numb
+00031c20: 6572 2870 6172 616d 732c 2027 7461 6b65  er(params, 'take
+00031c30: 5072 6f66 6974 5072 6963 6527 290a 2020  ProfitPrice').  
+00031c40: 2020 2020 2020 2020 2020 7374 6f70 4c6f            stopLo
+00031c50: 7373 203d 2073 656c 662e 7361 6665 5f6e  ss = self.safe_n
+00031c60: 756d 6265 7228 7061 7261 6d73 2c20 2773  umber(params, 's
+00031c70: 746f 704c 6f73 7327 290a 2020 2020 2020  topLoss').      
+00031c80: 2020 2020 2020 7461 6b65 5072 6f66 6974        takeProfit
+00031c90: 203d 2073 656c 662e 7361 6665 5f6e 756d   = self.safe_num
+00031ca0: 6265 7228 7061 7261 6d73 2c20 2774 616b  ber(params, 'tak
+00031cb0: 6550 726f 6669 7427 290a 2020 2020 2020  eProfit').      
+00031cc0: 2020 2020 2020 6973 5374 6f70 4c6f 7373        isStopLoss
+00031cd0: 5472 6967 6765 724f 7264 6572 203d 2073  TriggerOrder = s
+00031ce0: 746f 704c 6f73 7354 7269 6767 6572 5072  topLossTriggerPr
+00031cf0: 6963 6520 6973 206e 6f74 204e 6f6e 650a  ice is not None.
+00031d00: 2020 2020 2020 2020 2020 2020 6973 5461              isTa
+00031d10: 6b65 5072 6f66 6974 5472 6967 6765 724f  keProfitTriggerO
+00031d20: 7264 6572 203d 2074 616b 6550 726f 6669  rder = takeProfi
+00031d30: 7454 7269 6767 6572 5072 6963 6520 6973  tTriggerPrice is
+00031d40: 206e 6f74 204e 6f6e 650a 2020 2020 2020   not None.      
+00031d50: 2020 2020 2020 6973 5374 6f70 4c6f 7373        isStopLoss
+00031d60: 203d 2073 746f 704c 6f73 7320 6973 206e   = stopLoss is n
+00031d70: 6f74 204e 6f6e 650a 2020 2020 2020 2020  ot None.        
+00031d80: 2020 2020 6973 5461 6b65 5072 6f66 6974      isTakeProfit
+00031d90: 203d 2074 616b 6550 726f 6669 7420 6973   = takeProfit is
+00031da0: 206e 6f74 204e 6f6e 650a 2020 2020 2020   not None.      
+00031db0: 2020 2020 2020 6973 5374 6f70 4f72 6465        isStopOrde
+00031dc0: 7220 3d20 6973 5374 6f70 4c6f 7373 5472  r = isStopLossTr
+00031dd0: 6967 6765 724f 7264 6572 206f 7220 6973  iggerOrder or is
+00031de0: 5461 6b65 5072 6f66 6974 5472 6967 6765  TakeProfitTrigge
+00031df0: 724f 7264 6572 0a20 2020 2020 2020 2020  rOrder.         
+00031e00: 2020 2069 6620 6973 5374 6f70 4f72 6465     if isStopOrde
+00031e10: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
+00031e20: 2020 2072 6571 7565 7374 5b27 6f72 6465     request['orde
+00031e30: 7246 696c 7465 7227 5d20 3d20 2753 746f  rFilter'] = 'Sto
+00031e40: 704f 7264 6572 270a 2020 2020 2020 2020  pOrder'.        
+00031e50: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+00031e60: 2774 7269 6767 6572 5f62 7927 5d20 3d20  'trigger_by'] = 
+00031e70: 274c 6173 7450 7269 6365 270a 2020 2020  'LastPrice'.    
+00031e80: 2020 2020 2020 2020 2020 2020 7374 6f70              stop
+00031e90: 5078 203d 2073 746f 704c 6f73 7354 7269  Px = stopLossTri
+00031ea0: 6767 6572 5072 6963 6520 6966 2069 7353  ggerPrice if isS
+00031eb0: 746f 704c 6f73 7354 7269 6767 6572 4f72  topLossTriggerOr
+00031ec0: 6465 7220 656c 7365 2074 616b 6550 726f  der else takePro
+00031ed0: 6669 7454 7269 6767 6572 5072 6963 650a  fitTriggerPrice.
+00031ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031ef0: 7072 6563 6973 6553 746f 7050 7269 6365  preciseStopPrice
+00031f00: 203d 2073 656c 662e 7072 6963 655f 746f   = self.price_to
+00031f10: 5f70 7265 6369 7369 6f6e 2873 796d 626f  _precision(symbo
+00031f20: 6c2c 2073 746f 7050 7829 0a20 2020 2020  l, stopPx).     
+00031f30: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+00031f40: 7374 5b27 7472 6967 6765 7250 7269 6365  st['triggerPrice
+00031f50: 275d 203d 2070 7265 6369 7365 5374 6f70  '] = preciseStop
+00031f60: 5072 6963 650a 2020 2020 2020 2020 2020  Price.          
+00031f70: 2020 2020 2020 6465 6c74 6120 3d20 7365        delta = se
+00031f80: 6c66 2e6e 756d 6265 725f 746f 5f73 7472  lf.number_to_str
+00031f90: 696e 6728 6d61 726b 6574 5b27 7072 6563  ing(market['prec
+00031fa0: 6973 696f 6e27 5d5b 2770 7269 6365 275d  ision']['price']
+00031fb0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00031fc0: 2020 7265 7175 6573 745b 2762 6173 6550    request['baseP
+00031fd0: 7269 6365 275d 203d 2050 7265 6369 7365  rice'] = Precise
+00031fe0: 2e73 7472 696e 675f 7375 6228 7072 6563  .string_sub(prec
+00031ff0: 6973 6553 746f 7050 7269 6365 2c20 6465  iseStopPrice, de
+00032000: 6c74 6129 2069 6620 6973 5374 6f70 4c6f  lta) if isStopLo
+00032010: 7373 5472 6967 6765 724f 7264 6572 2065  ssTriggerOrder e
+00032020: 6c73 6520 5072 6563 6973 652e 7374 7269  lse Precise.stri
+00032030: 6e67 5f61 6464 2870 7265 6369 7365 5374  ng_add(preciseSt
+00032040: 6f70 5072 6963 652c 2064 656c 7461 290a  opPrice, delta).
+00032050: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+00032060: 2069 7353 746f 704c 6f73 7320 6f72 2069   isStopLoss or i
+00032070: 7354 616b 6550 726f 6669 743a 0a20 2020  sTakeProfit:.   
+00032080: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00032090: 6973 5374 6f70 4c6f 7373 3a0a 2020 2020  isStopLoss:.    
+000320a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000320b0: 7265 7175 6573 745b 2773 746f 704c 6f73  request['stopLos
+000320c0: 7327 5d20 3d20 7365 6c66 2e70 7269 6365  s'] = self.price
+000320d0: 5f74 6f5f 7072 6563 6973 696f 6e28 7379  _to_precision(sy
+000320e0: 6d62 6f6c 2c20 7374 6f70 4c6f 7373 290a  mbol, stopLoss).
+000320f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032100: 6966 2069 7354 616b 6550 726f 6669 743a  if isTakeProfit:
+00032110: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00032120: 2020 2020 2072 6571 7565 7374 5b27 7461       request['ta
+00032130: 6b65 5072 6f66 6974 275d 203d 2073 656c  keProfit'] = sel
+00032140: 662e 7072 6963 655f 746f 5f70 7265 6369  f.price_to_preci
+00032150: 7369 6f6e 2873 796d 626f 6c2c 2074 616b  sion(symbol, tak
+00032160: 6550 726f 6669 7429 0a20 2020 2020 2020  eProfit).       
+00032170: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00032180: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+00032190: 7374 5b27 6f72 6465 7246 696c 7465 7227  st['orderFilter'
+000321a0: 5d20 3d20 274f 7264 6572 270a 2020 2020  ] = 'Order'.    
+000321b0: 2020 2020 636c 6965 6e74 4f72 6465 7249      clientOrderI
+000321c0: 6420 3d20 7365 6c66 2e73 6166 655f 7374  d = self.safe_st
+000321d0: 7269 6e67 2870 6172 616d 732c 2027 636c  ring(params, 'cl
+000321e0: 6965 6e74 4f72 6465 7249 6427 290a 2020  ientOrderId').  
+000321f0: 2020 2020 2020 6966 2063 6c69 656e 744f        if clientO
+00032200: 7264 6572 4964 2069 7320 6e6f 7420 4e6f  rderId is not No
+00032210: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+00032220: 7265 7175 6573 745b 276f 7264 6572 4c69  request['orderLi
+00032230: 6e6b 4964 275d 203d 2063 6c69 656e 744f  nkId'] = clientO
+00032240: 7264 6572 4964 0a20 2020 2020 2020 2065  rderId.        e
+00032250: 6c69 6620 6d61 726b 6574 5b27 6f70 7469  lif market['opti
+00032260: 6f6e 275d 3a0a 2020 2020 2020 2020 2020  on']:.          
+00032270: 2020 2320 6d61 6e64 6174 6f72 7920 6669    # mandatory fi
+00032280: 656c 6420 666f 7220 6f70 7469 6f6e 730a  eld for options.
+00032290: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+000322a0: 6573 745b 276f 7264 6572 4c69 6e6b 4964  est['orderLinkId
+000322b0: 275d 203d 2073 656c 662e 7575 6964 3136  '] = self.uuid16
+000322c0: 2829 0a20 2020 2020 2020 2070 6172 616d  ().        param
+000322d0: 7320 3d20 7365 6c66 2e6f 6d69 7428 7061  s = self.omit(pa
+000322e0: 7261 6d73 2c20 5b27 7374 6f70 5072 6963  rams, ['stopPric
+000322f0: 6527 2c20 2774 696d 6549 6e46 6f72 6365  e', 'timeInForce
+00032300: 272c 2027 7472 6967 6765 7250 7269 6365  ', 'triggerPrice
+00032310: 272c 2027 7374 6f70 4c6f 7373 5072 6963  ', 'stopLossPric
+00032320: 6527 2c20 2774 616b 6550 726f 6669 7450  e', 'takeProfitP
+00032330: 7269 6365 272c 2027 706f 7374 4f6e 6c79  rice', 'postOnly
+00032340: 272c 2027 636c 6965 6e74 4f72 6465 7249  ', 'clientOrderI
+00032350: 6427 2c20 2773 746f 704c 6f73 7327 2c20  d', 'stopLoss', 
+00032360: 2774 616b 6550 726f 6669 7427 5d29 0a20  'takeProfit']). 
+00032370: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+00032380: 3d20 4e6f 6e65 0a20 2020 2020 2020 2069  = None.        i
+00032390: 6620 6d61 726b 6574 5b27 6f70 7469 6f6e  f market['option
+000323a0: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+000323b0: 7265 7370 6f6e 7365 203d 2061 7761 6974  response = await
+000323c0: 2073 656c 662e 7072 6976 6174 6550 6f73   self.privatePos
+000323d0: 744f 7074 696f 6e55 7364 634f 7065 6e61  tOptionUsdcOpena
+000323e0: 7069 5072 6976 6174 6556 3150 6c61 6365  piPrivateV1Place
+000323f0: 4f72 6465 7228 7365 6c66 2e65 7874 656e  Order(self.exten
+00032400: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
+00032410: 7329 290a 2020 2020 2020 2020 656c 7365  s)).        else
+00032420: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00032430: 7370 6f6e 7365 203d 2061 7761 6974 2073  sponse = await s
+00032440: 656c 662e 7072 6976 6174 6550 6f73 7450  elf.privatePostP
+00032450: 6572 7065 7475 616c 5573 6463 4f70 656e  erpetualUsdcOpen
+00032460: 6170 6950 7269 7661 7465 5631 506c 6163  apiPrivateV1Plac
+00032470: 654f 7264 6572 2873 656c 662e 6578 7465  eOrder(self.exte
+00032480: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
+00032490: 6d73 2929 0a20 2020 2020 2020 2023 0a20  ms)).        #. 
+000324a0: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
+000324b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000324c0: 2022 7265 7443 6f64 6522 3a30 2c0a 2020   "retCode":0,.  
+000324d0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000324e0: 2272 6574 4d73 6722 3a22 222c 0a20 2020  "retMsg":"",.   
+000324f0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00032500: 7265 7375 6c74 223a 7b0a 2020 2020 2020  result":{.      
+00032510: 2020 2320 2020 2020 2020 2020 2020 2022    #            "
+00032520: 6f72 6465 7249 6422 3a22 3334 3435 3061  orderId":"34450a
+00032530: 3539 2d33 3235 652d 3432 3936 2d38 6166  59-325e-4296-8af
+00032540: 302d 3633 6337 6335 3234 6165 3333 222c  0-63c7c524ae33",
+00032550: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00032560: 2020 2020 2020 226f 7264 6572 4c69 6e6b        "orderLink
+00032570: 4964 223a 2222 2c0a 2020 2020 2020 2020  Id":"",.        
+00032580: 2320 2020 2020 2020 2020 2020 2022 6d6d  #            "mm
+00032590: 7022 3a66 616c 7365 2c0a 2020 2020 2020  p":false,.      
+000325a0: 2020 2320 2020 2020 2020 2020 2020 2022    #            "
+000325b0: 7379 6d62 6f6c 223a 2242 5443 5045 5250  symbol":"BTCPERP
+000325c0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+000325d0: 2020 2020 2020 2020 226f 7264 6572 5479          "orderTy
+000325e0: 7065 223a 224c 696d 6974 222c 0a20 2020  pe":"Limit",.   
+000325f0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00032600: 2020 2273 6964 6522 3a22 4275 7922 2c0a    "side":"Buy",.
+00032610: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00032620: 2020 2020 2022 6f72 6465 7251 7479 223a       "orderQty":
+00032630: 2230 2e30 3031 3030 3030 3022 2c0a 2020  "0.00100000",.  
+00032640: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00032650: 2020 2022 6f72 6465 7250 7269 6365 223a     "orderPrice":
+00032660: 2232 3030 3030 2e30 3022 2c0a 2020 2020  "20000.00",.    
+00032670: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00032680: 2022 6976 223a 2230 222c 0a20 2020 2020   "iv":"0",.     
+00032690: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+000326a0: 2274 696d 6549 6e46 6f72 6365 223a 2247  "timeInForce":"G
+000326b0: 6f6f 6454 696c 6c43 616e 6365 6c22 2c0a  oodTillCancel",.
+000326c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000326d0: 2020 2020 2022 6f72 6465 7253 7461 7475       "orderStatu
+000326e0: 7322 3a22 4372 6561 7465 6422 2c0a 2020  s":"Created",.  
+000326f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00032700: 2020 2022 6372 6561 7465 6441 7422 3a22     "createdAt":"
+00032710: 3136 3532 3236 3137 3436 3030 3738 3733  1652261746007873
+00032720: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00032730: 2020 2020 2020 2020 2262 6173 6550 7269          "basePri
+00032740: 6365 223a 2230 2e30 3022 2c0a 2020 2020  ce":"0.00",.    
+00032750: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00032760: 2022 7472 6967 6765 7250 7269 6365 223a   "triggerPrice":
+00032770: 2230 2e30 3022 2c0a 2020 2020 2020 2020  "0.00",.        
+00032780: 2320 2020 2020 2020 2020 2020 2022 7461  #            "ta
+00032790: 6b65 5072 6f66 6974 223a 2230 2e30 3022  keProfit":"0.00"
+000327a0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000327b0: 2020 2020 2020 2022 7374 6f70 4c6f 7373         "stopLoss
+000327c0: 223a 2230 2e30 3022 2c0a 2020 2020 2020  ":"0.00",.      
+000327d0: 2020 2320 2020 2020 2020 2020 2020 2022    #            "
+000327e0: 736c 5472 6967 6765 7242 7922 3a22 554e  slTriggerBy":"UN
+000327f0: 4b4e 4f57 4e22 2c0a 2020 2020 2020 2020  KNOWN",.        
+00032800: 2320 2020 2020 2020 2020 2020 2022 7470  #            "tp
+00032810: 5472 6967 6765 7242 7922 3a22 554e 4b4e  TriggerBy":"UNKN
+00032820: 4f57 4e22 0a20 2020 2020 2020 2023 2020  OWN".        #  
+00032830: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
+00032840: 2020 2020 2020 206f 7264 6572 203d 2073         order = s
+00032850: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
+00032860: 6573 706f 6e73 652c 2027 7265 7375 6c74  esponse, 'result
+00032870: 272c 207b 7d29 0a20 2020 2020 2020 2072  ', {}).        r
+00032880: 6574 7572 6e20 7365 6c66 2e70 6172 7365  eturn self.parse
+00032890: 5f6f 7264 6572 286f 7264 6572 290a 0a20  _order(order).. 
+000328a0: 2020 2061 7379 6e63 2064 6566 2065 6469     async def edi
+000328b0: 745f 756e 6966 6965 645f 6163 636f 756e  t_unified_accoun
+000328c0: 745f 6f72 6465 7228 7365 6c66 2c20 6964  t_order(self, id
+000328d0: 3a20 7374 722c 2073 796d 626f 6c2c 2074  : str, symbol, t
+000328e0: 7970 652c 2073 6964 652c 2061 6d6f 756e  ype, side, amoun
+000328f0: 743d 4e6f 6e65 2c20 7072 6963 653d 4e6f  t=None, price=No
+00032900: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
+00032910: 2020 2020 2020 2020 6177 6169 7420 7365          await se
+00032920: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
+00032930: 290a 2020 2020 2020 2020 6d61 726b 6574  ).        market
+00032940: 203d 2073 656c 662e 6d61 726b 6574 2873   = self.market(s
+00032950: 796d 626f 6c29 0a20 2020 2020 2020 2069  ymbol).        i
+00032960: 6620 6e6f 7420 6d61 726b 6574 5b27 6c69  f not market['li
+00032970: 6e65 6172 275d 2061 6e64 206e 6f74 206d  near'] and not m
+00032980: 6172 6b65 745b 276f 7074 696f 6e27 5d3a  arket['option']:
+00032990: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+000329a0: 7365 204e 6f74 5375 7070 6f72 7465 6428  se NotSupported(
+000329b0: 7365 6c66 2e69 6420 2b20 2720 6564 6974  self.id + ' edit
+000329c0: 4f72 6465 7220 646f 6573 206e 6f74 2061  Order does not a
+000329d0: 6c6c 6f77 2069 6e76 6572 7365 206d 6172  llow inverse mar
+000329e0: 6b65 7420 6f72 6465 7273 2066 6f72 2027  ket orders for '
+000329f0: 202b 2073 796d 626f 6c20 2b20 2720 6d61   + symbol + ' ma
+00032a00: 726b 6574 7327 290a 2020 2020 2020 2020  rkets').        
+00032a10: 7265 7175 6573 7420 3d20 7b0a 2020 2020  request = {.    
+00032a20: 2020 2020 2020 2020 2773 796d 626f 6c27          'symbol'
+00032a30: 3a20 6d61 726b 6574 5b27 6964 275d 2c0a  : market['id'],.
+00032a40: 2020 2020 2020 2020 2020 2020 276f 7264              'ord
+00032a50: 6572 4964 273a 2069 642c 0a20 2020 2020  erId': id,.     
+00032a60: 2020 2020 2020 2027 7174 7927 3a20 7365         'qty': se
+00032a70: 6c66 2e61 6d6f 756e 745f 746f 5f70 7265  lf.amount_to_pre
+00032a80: 6369 7369 6f6e 2873 796d 626f 6c2c 2061  cision(symbol, a
+00032a90: 6d6f 756e 7429 2c0a 2020 2020 2020 2020  mount),.        
+00032aa0: 2020 2020 2320 276f 7264 6572 4c69 6e6b      # 'orderLink
+00032ab0: 4964 273a 2027 7374 7269 6e67 272c 2020  Id': 'string',  
+00032ac0: 2320 756e 6971 7565 2063 6c69 656e 7420  # unique client 
+00032ad0: 6f72 6465 7220 6964 2c20 6d61 7820 3336  order id, max 36
+00032ae0: 2063 6861 7261 6374 6572 730a 2020 2020   characters.    
+00032af0: 2020 2020 2020 2020 2320 2774 616b 6550          # 'takeP
+00032b00: 726f 6669 7427 3a20 3132 332e 3435 2c20  rofit': 123.45, 
+00032b10: 2023 2074 616b 6520 7072 6f66 6974 2070   # take profit p
+00032b20: 7269 6365 2c20 6f6e 6c79 2074 616b 6520  rice, only take 
+00032b30: 6566 6665 6374 2075 706f 6e20 6f70 656e  effect upon open
+00032b40: 696e 6720 7468 6520 706f 7369 7469 6f6e  ing the position
+00032b50: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+00032b60: 7374 6f70 4c6f 7373 273a 2031 3233 2e34  stopLoss': 123.4
+00032b70: 352c 2020 2320 7374 6f70 206c 6f73 7320  5,  # stop loss 
+00032b80: 7072 6963 652c 206f 6e6c 7920 7461 6b65  price, only take
+00032b90: 2065 6666 6563 7420 7570 6f6e 206f 7065   effect upon ope
+00032ba0: 6e69 6e67 2074 6865 2070 6f73 6974 696f  ning the positio
+00032bb0: 6e0a 2020 2020 2020 2020 2020 2020 2320  n.            # 
+00032bc0: 2774 7269 6767 6572 5072 6963 6527 3a20  'triggerPrice': 
+00032bd0: 3132 332e 3435 2c20 2023 2074 7269 6767  123.45,  # trigg
+00032be0: 6572 2070 7269 6365 2c20 7265 7175 6972  er price, requir
+00032bf0: 6564 2066 6f72 2063 6f6e 6469 7469 6f6e  ed for condition
+00032c00: 616c 206f 7264 6572 730a 2020 2020 2020  al orders.      
+00032c10: 2020 2020 2020 2320 2774 7269 6767 6572        # 'trigger
+00032c20: 4279 273a 2027 4d61 726b 5072 6963 6527  By': 'MarkPrice'
+00032c30: 2c20 2023 2049 6e64 6578 5072 6963 652c  ,  # IndexPrice,
+00032c40: 204d 6172 6b50 7269 6365 2c20 4c61 7374   MarkPrice, Last
+00032c50: 5072 6963 650a 2020 2020 2020 2020 2020  Price.          
+00032c60: 2020 2320 2774 7054 7269 6767 6572 6279    # 'tpTriggerby
+00032c70: 273a 2027 4d61 726b 5072 6963 6527 2c20  ': 'MarkPrice', 
+00032c80: 2023 2049 6e64 6578 5072 6963 652c 204d   # IndexPrice, M
+00032c90: 6172 6b50 7269 6365 2c20 4c61 7374 5072  arkPrice, LastPr
+00032ca0: 6963 650a 2020 2020 2020 2020 2020 2020  ice.            
+00032cb0: 2320 2773 6c54 7269 6767 6572 4279 273a  # 'slTriggerBy':
+00032cc0: 2027 4d61 726b 5072 6963 6527 2c20 2023   'MarkPrice',  #
+00032cd0: 2049 6e64 6578 5072 6963 652c 204d 6172   IndexPrice, Mar
+00032ce0: 6b50 7269 6365 2c20 4c61 7374 5072 6963  kPrice, LastPric
+00032cf0: 650a 2020 2020 2020 2020 2020 2020 2320  e.            # 
+00032d00: 5661 6c69 6420 666f 7220 6f70 7469 6f6e  Valid for option
+00032d10: 206f 6e6c 792e 0a20 2020 2020 2020 2020   only..         
+00032d20: 2020 2023 2027 6f72 6465 7249 7627 3a20     # 'orderIv': 
+00032d30: 2730 272c 2020 2320 496d 706c 6965 6420  '0',  # Implied 
+00032d40: 766f 6c61 7469 6c69 7479 3b20 7061 7261  volatility; para
+00032d50: 6d65 7465 7273 2061 7265 2070 6173 7365  meters are passe
+00032d60: 6420 6163 636f 7264 696e 6720 746f 2074  d according to t
+00032d70: 6865 2072 6561 6c20 7661 6c75 653b 2066  he real value; f
+00032d80: 6f72 2065 7861 6d70 6c65 2c20 666f 7220  or example, for 
+00032d90: 3130 252c 2030 2e31 2069 7320 7061 7373  10%, 0.1 is pass
+00032da0: 6564 0a20 2020 2020 2020 207d 0a20 2020  ed.        }.   
+00032db0: 2020 2020 2069 6620 6d61 726b 6574 5b27       if market['
+00032dc0: 6c69 6e65 6172 275d 3a0a 2020 2020 2020  linear']:.      
+00032dd0: 2020 2020 2020 7265 7175 6573 745b 2763        request['c
+00032de0: 6174 6567 6f72 7927 5d20 3d20 276c 696e  ategory'] = 'lin
+00032df0: 6561 7227 0a20 2020 2020 2020 2065 6c73  ear'.        els
+00032e00: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+00032e10: 6571 7565 7374 5b27 6361 7465 676f 7279  equest['category
+00032e20: 275d 203d 2027 6f70 7469 6f6e 270a 2020  '] = 'option'.  
+00032e30: 2020 2020 2020 6966 2070 7269 6365 2069        if price i
+00032e40: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00032e50: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+00032e60: 2770 7269 6365 275d 203d 2073 656c 662e  'price'] = self.
+00032e70: 7072 6963 655f 746f 5f70 7265 6369 7369  price_to_precisi
+00032e80: 6f6e 2873 796d 626f 6c2c 2070 7269 6365  on(symbol, price
+00032e90: 290a 2020 2020 2020 2020 7472 6967 6765  ).        trigge
+00032ea0: 7250 7269 6365 203d 2073 656c 662e 7361  rPrice = self.sa
+00032eb0: 6665 5f6e 756d 6265 725f 3228 7061 7261  fe_number_2(para
+00032ec0: 6d73 2c20 2774 7269 6767 6572 5072 6963  ms, 'triggerPric
+00032ed0: 6527 2c20 2773 746f 7050 7269 6365 2729  e', 'stopPrice')
+00032ee0: 0a20 2020 2020 2020 2073 746f 704c 6f73  .        stopLos
+00032ef0: 7354 7269 6767 6572 5072 6963 6520 3d20  sTriggerPrice = 
+00032f00: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
+00032f10: 2870 6172 616d 732c 2027 7374 6f70 4c6f  (params, 'stopLo
+00032f20: 7373 5072 6963 6527 290a 2020 2020 2020  ssPrice').      
+00032f30: 2020 7461 6b65 5072 6f66 6974 5472 6967    takeProfitTrig
+00032f40: 6765 7250 7269 6365 203d 2073 656c 662e  gerPrice = self.
+00032f50: 7361 6665 5f6e 756d 6265 7228 7061 7261  safe_number(para
+00032f60: 6d73 2c20 2774 616b 6550 726f 6669 7450  ms, 'takeProfitP
+00032f70: 7269 6365 2729 0a20 2020 2020 2020 2073  rice').        s
+00032f80: 746f 704c 6f73 7320 3d20 7365 6c66 2e73  topLoss = self.s
+00032f90: 6166 655f 6e75 6d62 6572 2870 6172 616d  afe_number(param
+00032fa0: 732c 2027 7374 6f70 4c6f 7373 2729 0a20  s, 'stopLoss'). 
+00032fb0: 2020 2020 2020 2074 616b 6550 726f 6669         takeProfi
+00032fc0: 7420 3d20 7365 6c66 2e73 6166 655f 6e75  t = self.safe_nu
+00032fd0: 6d62 6572 2870 6172 616d 732c 2027 7461  mber(params, 'ta
+00032fe0: 6b65 5072 6f66 6974 2729 0a20 2020 2020  keProfit').     
+00032ff0: 2020 2069 7353 746f 704c 6f73 7354 7269     isStopLossTri
+00033000: 6767 6572 4f72 6465 7220 3d20 7374 6f70  ggerOrder = stop
+00033010: 4c6f 7373 5472 6967 6765 7250 7269 6365  LossTriggerPrice
+00033020: 2069 7320 6e6f 7420 4e6f 6e65 0a20 2020   is not None.   
+00033030: 2020 2020 2069 7354 616b 6550 726f 6669       isTakeProfi
+00033040: 7454 7269 6767 6572 4f72 6465 7220 3d20  tTriggerOrder = 
+00033050: 7461 6b65 5072 6f66 6974 5472 6967 6765  takeProfitTrigge
+00033060: 7250 7269 6365 2069 7320 6e6f 7420 4e6f  rPrice is not No
+00033070: 6e65 0a20 2020 2020 2020 2069 7353 746f  ne.        isSto
+00033080: 704c 6f73 7320 3d20 7374 6f70 4c6f 7373  pLoss = stopLoss
+00033090: 2069 7320 6e6f 7420 4e6f 6e65 0a20 2020   is not None.   
+000330a0: 2020 2020 2069 7354 616b 6550 726f 6669       isTakeProfi
+000330b0: 7420 3d20 7461 6b65 5072 6f66 6974 2069  t = takeProfit i
+000330c0: 7320 6e6f 7420 4e6f 6e65 0a20 2020 2020  s not None.     
+000330d0: 2020 2069 6620 6973 5374 6f70 4c6f 7373     if isStopLoss
+000330e0: 5472 6967 6765 724f 7264 6572 206f 7220  TriggerOrder or 
+000330f0: 6973 5461 6b65 5072 6f66 6974 5472 6967  isTakeProfitTrig
+00033100: 6765 724f 7264 6572 3a0a 2020 2020 2020  gerOrder:.      
+00033110: 2020 2020 2020 7472 6967 6765 7250 7269        triggerPri
+00033120: 6365 203d 2073 746f 704c 6f73 7354 7269  ce = stopLossTri
+00033130: 6767 6572 5072 6963 6520 6966 2069 7353  ggerPrice if isS
+00033140: 746f 704c 6f73 7354 7269 6767 6572 4f72  topLossTriggerOr
+00033150: 6465 7220 656c 7365 2074 616b 6550 726f  der else takePro
+00033160: 6669 7454 7269 6767 6572 5072 6963 650a  fitTriggerPrice.
+00033170: 2020 2020 2020 2020 6966 2074 7269 6767          if trigg
+00033180: 6572 5072 6963 6520 6973 206e 6f74 204e  erPrice is not N
+00033190: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+000331a0: 2072 6571 7565 7374 5b27 7472 6967 6765   request['trigge
+000331b0: 7250 7269 6365 275d 203d 2073 656c 662e  rPrice'] = self.
+000331c0: 7072 6963 655f 746f 5f70 7265 6369 7369  price_to_precisi
+000331d0: 6f6e 2873 796d 626f 6c2c 2074 7269 6767  on(symbol, trigg
+000331e0: 6572 5072 6963 6529 0a20 2020 2020 2020  erPrice).       
+000331f0: 2069 6620 6973 5374 6f70 4c6f 7373 206f   if isStopLoss o
+00033200: 7220 6973 5461 6b65 5072 6f66 6974 3a0a  r isTakeProfit:.
+00033210: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00033220: 7353 746f 704c 6f73 733a 0a20 2020 2020  sStopLoss:.     
+00033230: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+00033240: 7374 5b27 7374 6f70 4c6f 7373 275d 203d  st['stopLoss'] =
+00033250: 2073 656c 662e 7072 6963 655f 746f 5f70   self.price_to_p
+00033260: 7265 6369 7369 6f6e 2873 796d 626f 6c2c  recision(symbol,
+00033270: 2073 746f 704c 6f73 7329 0a20 2020 2020   stopLoss).     
+00033280: 2020 2020 2020 2069 6620 6973 5461 6b65         if isTake
+00033290: 5072 6f66 6974 3a0a 2020 2020 2020 2020  Profit:.        
+000332a0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+000332b0: 2774 616b 6550 726f 6669 7427 5d20 3d20  'takeProfit'] = 
+000332c0: 7365 6c66 2e70 7269 6365 5f74 6f5f 7072  self.price_to_pr
+000332d0: 6563 6973 696f 6e28 7379 6d62 6f6c 2c20  ecision(symbol, 
+000332e0: 7461 6b65 5072 6f66 6974 290a 2020 2020  takeProfit).    
+000332f0: 2020 2020 636c 6965 6e74 4f72 6465 7249      clientOrderI
+00033300: 6420 3d20 7365 6c66 2e73 6166 655f 7374  d = self.safe_st
+00033310: 7269 6e67 2870 6172 616d 732c 2027 636c  ring(params, 'cl
+00033320: 6965 6e74 4f72 6465 7249 6427 290a 2020  ientOrderId').  
+00033330: 2020 2020 2020 6966 2063 6c69 656e 744f        if clientO
+00033340: 7264 6572 4964 2069 7320 6e6f 7420 4e6f  rderId is not No
+00033350: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+00033360: 7265 7175 6573 745b 276f 7264 6572 4c69  request['orderLi
+00033370: 6e6b 4964 275d 203d 2063 6c69 656e 744f  nkId'] = clientO
+00033380: 7264 6572 4964 0a20 2020 2020 2020 2070  rderId.        p
+00033390: 6172 616d 7320 3d20 7365 6c66 2e6f 6d69  arams = self.omi
+000333a0: 7428 7061 7261 6d73 2c20 5b27 7374 6f70  t(params, ['stop
+000333b0: 5072 6963 6527 2c20 2773 746f 704c 6f73  Price', 'stopLos
+000333c0: 7350 7269 6365 272c 2027 7461 6b65 5072  sPrice', 'takePr
+000333d0: 6f66 6974 5072 6963 6527 2c20 2774 7269  ofitPrice', 'tri
+000333e0: 6767 6572 5072 6963 6527 2c20 2763 6c69  ggerPrice', 'cli
+000333f0: 656e 744f 7264 6572 4964 272c 2027 7374  entOrderId', 'st
+00033400: 6f70 4c6f 7373 272c 2027 7461 6b65 5072  opLoss', 'takePr
+00033410: 6f66 6974 275d 290a 2020 2020 2020 2020  ofit']).        
+00033420: 7265 7370 6f6e 7365 203d 2061 7761 6974  response = await
+00033430: 2073 656c 662e 7072 6976 6174 6550 6f73   self.privatePos
+00033440: 7456 354f 7264 6572 416d 656e 6428 7365  tV5OrderAmend(se
+00033450: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
+00033460: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
+00033470: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+00033480: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+00033490: 2020 2020 2020 2020 2272 6574 436f 6465          "retCode
+000334a0: 223a 2030 2c0a 2020 2020 2020 2020 2320  ": 0,.        # 
+000334b0: 2020 2020 2020 2020 2272 6574 4d73 6722          "retMsg"
+000334c0: 3a20 224f 4b22 2c0a 2020 2020 2020 2020  : "OK",.        
+000334d0: 2320 2020 2020 2020 2020 2272 6573 756c  #         "resul
+000334e0: 7422 3a20 7b0a 2020 2020 2020 2020 2320  t": {.        # 
+000334f0: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+00033500: 6572 4964 223a 2022 6336 6630 3535 6439  erId": "c6f055d9
+00033510: 2d37 6632 312d 3430 3739 2d39 3133 642d  -7f21-4079-913d-
+00033520: 6536 3532 3361 3963 6666 6661 222c 0a20  e6523a9cfffa",. 
+00033530: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00033540: 2020 2020 2022 6f72 6465 724c 696e 6b49       "orderLinkI
+00033550: 6422 3a20 226c 696e 6561 722d 3030 3422  d": "linear-004"
+00033560: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00033570: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
+00033580: 2020 2020 2020 2020 2272 6574 4578 7449          "retExtI
+00033590: 6e66 6f22 3a20 7b7d 2c0a 2020 2020 2020  nfo": {},.      
+000335a0: 2020 2320 2020 2020 2020 2020 2274 696d    #         "tim
+000335b0: 6522 3a20 3136 3732 3231 3730 3933 3436  e": 167221709346
+000335c0: 310a 2020 2020 2020 2020 2320 2020 2020  1.        #     
+000335d0: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
+000335e0: 2020 2020 7265 7375 6c74 203d 2073 656c      result = sel
+000335f0: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
+00033600: 706f 6e73 652c 2027 7265 7375 6c74 272c  ponse, 'result',
+00033610: 207b 7d29 0a20 2020 2020 2020 2072 6574   {}).        ret
+00033620: 7572 6e20 7b0a 2020 2020 2020 2020 2020  urn {.          
+00033630: 2020 2769 6e66 6f27 3a20 7265 7370 6f6e    'info': respon
+00033640: 7365 2c0a 2020 2020 2020 2020 2020 2020  se,.            
+00033650: 2769 6427 3a20 7365 6c66 2e73 6166 655f  'id': self.safe_
+00033660: 7374 7269 6e67 2872 6573 756c 742c 2027  string(result, '
+00033670: 6f72 6465 7249 6427 292c 0a20 2020 2020  orderId'),.     
+00033680: 2020 207d 0a0a 2020 2020 6173 796e 6320     }..    async 
+00033690: 6465 6620 6564 6974 5f75 6e69 6669 6564  def edit_unified
+000336a0: 5f6d 6172 6769 6e5f 6f72 6465 7228 7365  _margin_order(se
+000336b0: 6c66 2c20 6964 3a20 7374 722c 2073 796d  lf, id: str, sym
+000336c0: 626f 6c2c 2074 7970 652c 2073 6964 652c  bol, type, side,
+000336d0: 2061 6d6f 756e 742c 2070 7269 6365 3d4e   amount, price=N
+000336e0: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
+000336f0: 0a20 2020 2020 2020 2061 7761 6974 2073  .        await s
+00033700: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
+00033710: 2829 0a20 2020 2020 2020 206d 6172 6b65  ().        marke
+00033720: 7420 3d20 7365 6c66 2e6d 6172 6b65 7428  t = self.market(
+00033730: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
+00033740: 6966 206e 6f74 206d 6172 6b65 745b 276c  if not market['l
+00033750: 696e 6561 7227 5d20 616e 6420 6e6f 7420  inear'] and not 
+00033760: 6d61 726b 6574 5b27 6f70 7469 6f6e 275d  market['option']
+00033770: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
+00033780: 6973 6520 4e6f 7453 7570 706f 7274 6564  ise NotSupported
+00033790: 2873 656c 662e 6964 202b 2027 2065 6469  (self.id + ' edi
+000337a0: 744f 7264 6572 2064 6f65 7320 6e6f 7420  tOrder does not 
+000337b0: 616c 6c6f 7720 696e 7665 7273 6520 6d61  allow inverse ma
+000337c0: 726b 6574 206f 7264 6572 7320 666f 7220  rket orders for 
+000337d0: 2720 2b20 7379 6d62 6f6c 202b 2027 206d  ' + symbol + ' m
+000337e0: 6172 6b65 7473 2729 0a20 2020 2020 2020  arkets').       
+000337f0: 206c 6f77 6572 4361 7365 5479 7065 203d   lowerCaseType =
+00033800: 2074 7970 652e 6c6f 7765 7228 290a 2020   type.lower().  
+00033810: 2020 2020 2020 6966 2028 7072 6963 6520        if (price 
+00033820: 6973 204e 6f6e 6529 2061 6e64 2028 6c6f  is None) and (lo
+00033830: 7765 7243 6173 6554 7970 6520 3d3d 2027  werCaseType == '
+00033840: 6c69 6d69 7427 293a 0a20 2020 2020 2020  limit'):.       
+00033850: 2020 2020 2072 6169 7365 2041 7267 756d       raise Argum
+00033860: 656e 7473 5265 7175 6972 6564 2873 656c  entsRequired(sel
+00033870: 662e 6964 202b 2027 2065 6469 744f 7264  f.id + ' editOrd
+00033880: 6572 2072 6571 7569 7265 7320 6120 7072  er requires a pr
+00033890: 6963 6520 6172 6775 6d65 6e74 2066 6f72  ice argument for
+000338a0: 206c 696d 6974 206f 7264 6572 7327 290a   limit orders').
+000338b0: 2020 2020 2020 2020 7265 7175 6573 7420          request 
+000338c0: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+000338d0: 276f 7264 6572 4964 273a 2069 642c 0a20  'orderId': id,. 
+000338e0: 2020 2020 2020 2020 2020 2027 7379 6d62             'symb
+000338f0: 6f6c 273a 206d 6172 6b65 745b 2769 6427  ol': market['id'
+00033900: 5d2c 0a20 2020 2020 2020 2020 2020 2027  ],.            '
+00033910: 7369 6465 273a 2073 656c 662e 6361 7069  side': self.capi
+00033920: 7461 6c69 7a65 2873 6964 6529 2c0a 2020  talize(side),.  
+00033930: 2020 2020 2020 2020 2020 276f 7264 6572            'order
+00033940: 5479 7065 273a 2073 656c 662e 6361 7069  Type': self.capi
+00033950: 7461 6c69 7a65 286c 6f77 6572 4361 7365  talize(lowerCase
+00033960: 5479 7065 292c 2020 2320 6c69 6d69 7420  Type),  # limit 
+00033970: 6f72 206d 6172 6b65 740a 2020 2020 2020  or market.      
+00033980: 2020 2020 2020 2774 696d 6549 6e46 6f72        'timeInFor
+00033990: 6365 273a 2027 476f 6f64 5469 6c6c 4361  ce': 'GoodTillCa
+000339a0: 6e63 656c 272c 2020 2320 496d 6d65 6469  ncel',  # Immedi
+000339b0: 6174 654f 7243 616e 6365 6c2c 2046 696c  ateOrCancel, Fil
+000339c0: 6c4f 724b 696c 6c2c 2050 6f73 744f 6e6c  lOrKill, PostOnl
+000339d0: 790a 2020 2020 2020 2020 2020 2020 2771  y.            'q
+000339e0: 7479 273a 2073 656c 662e 616d 6f75 6e74  ty': self.amount
+000339f0: 5f74 6f5f 7072 6563 6973 696f 6e28 7379  _to_precision(sy
+00033a00: 6d62 6f6c 2c20 616d 6f75 6e74 292c 0a20  mbol, amount),. 
+00033a10: 2020 2020 2020 2020 2020 2023 2027 7461             # 'ta
+00033a20: 6b65 5072 6f66 6974 273a 2031 3233 2e34  keProfit': 123.4
+00033a30: 352c 2020 2320 7461 6b65 2070 726f 6669  5,  # take profi
+00033a40: 7420 7072 6963 652c 206f 6e6c 7920 7461  t price, only ta
+00033a50: 6b65 2065 6666 6563 7420 7570 6f6e 206f  ke effect upon o
+00033a60: 7065 6e69 6e67 2074 6865 2070 6f73 6974  pening the posit
+00033a70: 696f 6e0a 2020 2020 2020 2020 2020 2020  ion.            
+00033a80: 2320 2773 746f 704c 6f73 7327 3a20 3132  # 'stopLoss': 12
+00033a90: 332e 3435 2c20 2023 2073 746f 7020 6c6f  3.45,  # stop lo
+00033aa0: 7373 2070 7269 6365 2c20 6f6e 6c79 2074  ss price, only t
+00033ab0: 616b 6520 6566 6665 6374 2075 706f 6e20  ake effect upon 
+00033ac0: 6f70 656e 696e 6720 7468 6520 706f 7369  opening the posi
+00033ad0: 7469 6f6e 0a20 2020 2020 2020 2020 2020  tion.           
+00033ae0: 2023 2027 6f72 6465 724c 696e 6b49 6427   # 'orderLinkId'
+00033af0: 3a20 2773 7472 696e 6727 2c20 2023 2075  : 'string',  # u
+00033b00: 6e69 7175 6520 636c 6965 6e74 206f 7264  nique client ord
+00033b10: 6572 2069 642c 206d 6178 2033 3620 6368  er id, max 36 ch
+00033b20: 6172 6163 7465 7273 0a20 2020 2020 2020  aracters.       
+00033b30: 2020 2020 2023 2027 7472 6967 6765 7250       # 'triggerP
+00033b40: 7269 6365 273a 2031 3233 2e34 352c 2020  rice': 123.45,  
+00033b50: 2320 7472 6967 6765 7220 7072 6963 652c  # trigger price,
+00033b60: 2072 6571 7569 7265 6420 666f 7220 636f   required for co
+00033b70: 6e64 6974 696f 6e61 6c20 6f72 6465 7273  nditional orders
+00033b80: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+00033b90: 7472 6967 6765 7242 7927 3a20 274d 6172  triggerBy': 'Mar
+00033ba0: 6b50 7269 6365 272c 2020 2320 496e 6465  kPrice',  # Inde
+00033bb0: 7850 7269 6365 2c20 4d61 726b 5072 6963  xPrice, MarkPric
+00033bc0: 650a 2020 2020 2020 2020 2020 2020 2320  e.            # 
+00033bd0: 2774 7074 7269 6767 6572 6279 273a 2027  'tptriggerby': '
+00033be0: 4d61 726b 5072 6963 6527 2c20 2023 2049  MarkPrice',  # I
+00033bf0: 6e64 6578 5072 6963 652c 204d 6172 6b50  ndexPrice, MarkP
+00033c00: 7269 6365 0a20 2020 2020 2020 2020 2020  rice.           
+00033c10: 2023 2027 736c 5472 6967 6765 7242 7927   # 'slTriggerBy'
+00033c20: 3a20 274d 6172 6b50 7269 6365 272c 2020  : 'MarkPrice',  
+00033c30: 2320 496e 6465 7850 7269 6365 2c20 4d61  # IndexPrice, Ma
+00033c40: 726b 5072 6963 650a 2020 2020 2020 2020  rkPrice.        
+00033c50: 2020 2020 2320 2769 7627 3a20 2730 272c      # 'iv': '0',
+00033c60: 2020 2320 496d 706c 6965 6420 766f 6c61    # Implied vola
+00033c70: 7469 6c69 7479 2c20 666f 7220 6f70 7469  tility, for opti
+00033c80: 6f6e 7320 6f6e 6c79 3b20 7061 7261 6d65  ons only; parame
+00033c90: 7465 7273 2061 7265 2070 6173 7365 6420  ters are passed 
+00033ca0: 6163 636f 7264 696e 6720 746f 2074 6865  according to the
+00033cb0: 2072 6561 6c20 7661 6c75 653b 2066 6f72   real value; for
+00033cc0: 2065 7861 6d70 6c65 2c20 666f 7220 3130   example, for 10
+00033cd0: 252c 2030 2e31 2069 7320 7061 7373 6564  %, 0.1 is passed
+00033ce0: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
+00033cf0: 2020 2069 6620 6d61 726b 6574 5b27 6c69     if market['li
+00033d00: 6e65 6172 275d 3a0a 2020 2020 2020 2020  near']:.        
+00033d10: 2020 2020 7265 7175 6573 745b 2763 6174      request['cat
+00033d20: 6567 6f72 7927 5d20 3d20 276c 696e 6561  egory'] = 'linea
+00033d30: 7227 0a20 2020 2020 2020 2065 6c73 653a  r'.        else:
+00033d40: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+00033d50: 7565 7374 5b27 6361 7465 676f 7279 275d  uest['category']
+00033d60: 203d 2027 6f70 7469 6f6e 270a 2020 2020   = 'option'.    
+00033d70: 2020 2020 6973 4d61 726b 6574 203d 206c      isMarket = l
+00033d80: 6f77 6572 4361 7365 5479 7065 203d 3d20  owerCaseType == 
+00033d90: 276d 6172 6b65 7427 0a20 2020 2020 2020  'market'.       
+00033da0: 2069 734c 696d 6974 203d 206c 6f77 6572   isLimit = lower
+00033db0: 4361 7365 5479 7065 203d 3d20 276c 696d  CaseType == 'lim
+00033dc0: 6974 270a 2020 2020 2020 2020 6966 2069  it'.        if i
+00033dd0: 734c 696d 6974 3a0a 2020 2020 2020 2020  sLimit:.        
+00033de0: 2020 2020 7265 7175 6573 745b 2770 7269      request['pri
+00033df0: 6365 275d 203d 2073 656c 662e 7072 6963  ce'] = self.pric
+00033e00: 655f 746f 5f70 7265 6369 7369 6f6e 2873  e_to_precision(s
+00033e10: 796d 626f 6c2c 2070 7269 6365 290a 2020  ymbol, price).  
+00033e20: 2020 2020 2020 6578 6368 616e 6765 5370        exchangeSp
+00033e30: 6563 6966 6963 5061 7261 6d20 3d20 7365  ecificParam = se
+00033e40: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
+00033e50: 6172 616d 732c 2027 7469 6d65 5f69 6e5f  arams, 'time_in_
+00033e60: 666f 7263 6527 290a 2020 2020 2020 2020  force').        
+00033e70: 7469 6d65 496e 466f 7263 6520 3d20 7365  timeInForce = se
+00033e80: 6c66 2e73 6166 655f 7374 7269 6e67 5f6c  lf.safe_string_l
+00033e90: 6f77 6572 2870 6172 616d 732c 2027 7469  ower(params, 'ti
+00033ea0: 6d65 496e 466f 7263 6527 290a 2020 2020  meInForce').    
+00033eb0: 2020 2020 706f 7374 4f6e 6c79 203d 2073      postOnly = s
+00033ec0: 656c 662e 6973 5f70 6f73 745f 6f6e 6c79  elf.is_post_only
+00033ed0: 2869 734d 6172 6b65 742c 2065 7863 6861  (isMarket, excha
+00033ee0: 6e67 6553 7065 6369 6669 6350 6172 616d  ngeSpecificParam
+00033ef0: 203d 3d20 2750 6f73 744f 6e6c 7927 2c20   == 'PostOnly', 
+00033f00: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
+00033f10: 6966 2070 6f73 744f 6e6c 793a 0a20 2020  if postOnly:.   
+00033f20: 2020 2020 2020 2020 2072 6571 7565 7374           request
+00033f30: 5b27 7469 6d65 496e 466f 7263 6527 5d20  ['timeInForce'] 
+00033f40: 3d20 2750 6f73 744f 6e6c 7927 0a20 2020  = 'PostOnly'.   
+00033f50: 2020 2020 2065 6c69 6620 7469 6d65 496e       elif timeIn
+00033f60: 466f 7263 6520 3d3d 2027 6774 6327 3a0a  Force == 'gtc':.
+00033f70: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+00033f80: 6573 745b 2774 696d 6549 6e46 6f72 6365  est['timeInForce
+00033f90: 275d 203d 2027 476f 6f64 5469 6c6c 4361  '] = 'GoodTillCa
+00033fa0: 6e63 656c 270a 2020 2020 2020 2020 656c  ncel'.        el
+00033fb0: 6966 2074 696d 6549 6e46 6f72 6365 203d  if timeInForce =
+00033fc0: 3d20 2766 6f6b 273a 0a20 2020 2020 2020  = 'fok':.       
+00033fd0: 2020 2020 2072 6571 7565 7374 5b27 7469       request['ti
+00033fe0: 6d65 496e 466f 7263 6527 5d20 3d20 2746  meInForce'] = 'F
+00033ff0: 696c 6c4f 724b 696c 6c27 0a20 2020 2020  illOrKill'.     
+00034000: 2020 2065 6c69 6620 7469 6d65 496e 466f     elif timeInFo
+00034010: 7263 6520 3d3d 2027 696f 6327 3a0a 2020  rce == 'ioc':.  
+00034020: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+00034030: 745b 2774 696d 6549 6e46 6f72 6365 275d  t['timeInForce']
+00034040: 203d 2027 496d 6d65 6469 6174 654f 7243   = 'ImmediateOrC
+00034050: 616e 6365 6c27 0a20 2020 2020 2020 2074  ancel'.        t
+00034060: 7269 6767 6572 5072 6963 6520 3d20 7365  riggerPrice = se
+00034070: 6c66 2e73 6166 655f 6e75 6d62 6572 5f32  lf.safe_number_2
+00034080: 2870 6172 616d 732c 2027 7472 6967 6765  (params, 'trigge
+00034090: 7250 7269 6365 272c 2027 7374 6f70 5072  rPrice', 'stopPr
+000340a0: 6963 6527 290a 2020 2020 2020 2020 7374  ice').        st
+000340b0: 6f70 4c6f 7373 5472 6967 6765 7250 7269  opLossTriggerPri
+000340c0: 6365 203d 2073 656c 662e 7361 6665 5f6e  ce = self.safe_n
+000340d0: 756d 6265 7228 7061 7261 6d73 2c20 2773  umber(params, 's
+000340e0: 746f 704c 6f73 7350 7269 6365 2729 0a20  topLossPrice'). 
+000340f0: 2020 2020 2020 2074 616b 6550 726f 6669         takeProfi
+00034100: 7454 7269 6767 6572 5072 6963 6520 3d20  tTriggerPrice = 
+00034110: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
+00034120: 2870 6172 616d 732c 2027 7461 6b65 5072  (params, 'takePr
+00034130: 6f66 6974 5072 6963 6527 290a 2020 2020  ofitPrice').    
+00034140: 2020 2020 7374 6f70 4c6f 7373 203d 2073      stopLoss = s
+00034150: 656c 662e 7361 6665 5f6e 756d 6265 7228  elf.safe_number(
+00034160: 7061 7261 6d73 2c20 2773 746f 704c 6f73  params, 'stopLos
+00034170: 7327 290a 2020 2020 2020 2020 7461 6b65  s').        take
+00034180: 5072 6f66 6974 203d 2073 656c 662e 7361  Profit = self.sa
+00034190: 6665 5f6e 756d 6265 7228 7061 7261 6d73  fe_number(params
+000341a0: 2c20 2774 616b 6550 726f 6669 7427 290a  , 'takeProfit').
+000341b0: 2020 2020 2020 2020 6973 5374 6f70 4c6f          isStopLo
+000341c0: 7373 5472 6967 6765 724f 7264 6572 203d  ssTriggerOrder =
+000341d0: 2073 746f 704c 6f73 7354 7269 6767 6572   stopLossTrigger
+000341e0: 5072 6963 6520 6973 206e 6f74 204e 6f6e  Price is not Non
+000341f0: 650a 2020 2020 2020 2020 6973 5461 6b65  e.        isTake
+00034200: 5072 6f66 6974 5472 6967 6765 724f 7264  ProfitTriggerOrd
+00034210: 6572 203d 2074 616b 6550 726f 6669 7454  er = takeProfitT
+00034220: 7269 6767 6572 5072 6963 6520 6973 206e  riggerPrice is n
+00034230: 6f74 204e 6f6e 650a 2020 2020 2020 2020  ot None.        
+00034240: 6973 5374 6f70 4c6f 7373 203d 2073 746f  isStopLoss = sto
+00034250: 704c 6f73 7320 6973 206e 6f74 204e 6f6e  pLoss is not Non
+00034260: 650a 2020 2020 2020 2020 6973 5461 6b65  e.        isTake
+00034270: 5072 6f66 6974 203d 2074 616b 6550 726f  Profit = takePro
+00034280: 6669 7420 6973 206e 6f74 204e 6f6e 650a  fit is not None.
+00034290: 2020 2020 2020 2020 6966 2069 7353 746f          if isSto
+000342a0: 704c 6f73 7354 7269 6767 6572 4f72 6465  pLossTriggerOrde
+000342b0: 7220 6f72 2069 7354 616b 6550 726f 6669  r or isTakeProfi
+000342c0: 7454 7269 6767 6572 4f72 6465 723a 0a20  tTriggerOrder:. 
+000342d0: 2020 2020 2020 2020 2020 2074 7269 6767             trigg
+000342e0: 6572 5072 6963 6520 3d20 7374 6f70 4c6f  erPrice = stopLo
+000342f0: 7373 5472 6967 6765 7250 7269 6365 2069  ssTriggerPrice i
+00034300: 6620 6973 5374 6f70 4c6f 7373 5472 6967  f isStopLossTrig
+00034310: 6765 724f 7264 6572 2065 6c73 6520 7461  gerOrder else ta
+00034320: 6b65 5072 6f66 6974 5472 6967 6765 7250  keProfitTriggerP
+00034330: 7269 6365 0a20 2020 2020 2020 2069 6620  rice.        if 
+00034340: 7472 6967 6765 7250 7269 6365 2069 7320  triggerPrice is 
+00034350: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00034360: 2020 2020 2020 7265 7175 6573 745b 2774        request['t
+00034370: 7269 6767 6572 5072 6963 6527 5d20 3d20  riggerPrice'] = 
+00034380: 7365 6c66 2e70 7269 6365 5f74 6f5f 7072  self.price_to_pr
+00034390: 6563 6973 696f 6e28 7379 6d62 6f6c 2c20  ecision(symbol, 
+000343a0: 7472 6967 6765 7250 7269 6365 290a 2020  triggerPrice).  
+000343b0: 2020 2020 2020 6966 2069 7353 746f 704c        if isStopL
+000343c0: 6f73 7320 6f72 2069 7354 616b 6550 726f  oss or isTakePro
+000343d0: 6669 743a 0a20 2020 2020 2020 2020 2020  fit:.           
+000343e0: 2069 6620 6973 5374 6f70 4c6f 7373 3a0a   if isStopLoss:.
+000343f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034400: 7265 7175 6573 745b 2773 746f 704c 6f73  request['stopLos
+00034410: 7327 5d20 3d20 7365 6c66 2e70 7269 6365  s'] = self.price
+00034420: 5f74 6f5f 7072 6563 6973 696f 6e28 7379  _to_precision(sy
+00034430: 6d62 6f6c 2c20 7374 6f70 4c6f 7373 290a  mbol, stopLoss).
+00034440: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00034450: 7354 616b 6550 726f 6669 743a 0a20 2020  sTakeProfit:.   
+00034460: 2020 2020 2020 2020 2020 2020 2072 6571               req
+00034470: 7565 7374 5b27 7461 6b65 5072 6f66 6974  uest['takeProfit
+00034480: 275d 203d 2073 656c 662e 7072 6963 655f  '] = self.price_
+00034490: 746f 5f70 7265 6369 7369 6f6e 2873 796d  to_precision(sym
+000344a0: 626f 6c2c 2074 616b 6550 726f 6669 7429  bol, takeProfit)
+000344b0: 0a20 2020 2020 2020 2063 6c69 656e 744f  .        clientO
+000344c0: 7264 6572 4964 203d 2073 656c 662e 7361  rderId = self.sa
+000344d0: 6665 5f73 7472 696e 6728 7061 7261 6d73  fe_string(params
+000344e0: 2c20 2763 6c69 656e 744f 7264 6572 4964  , 'clientOrderId
+000344f0: 2729 0a20 2020 2020 2020 2069 6620 636c  ').        if cl
+00034500: 6965 6e74 4f72 6465 7249 6420 6973 206e  ientOrderId is n
+00034510: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00034520: 2020 2020 2072 6571 7565 7374 5b27 6f72       request['or
+00034530: 6465 724c 696e 6b49 6427 5d20 3d20 636c  derLinkId'] = cl
+00034540: 6965 6e74 4f72 6465 7249 640a 2020 2020  ientOrderId.    
+00034550: 2020 2020 7061 7261 6d73 203d 2073 656c      params = sel
+00034560: 662e 6f6d 6974 2870 6172 616d 732c 205b  f.omit(params, [
+00034570: 2773 746f 7050 7269 6365 272c 2027 7469  'stopPrice', 'ti
+00034580: 6d65 496e 466f 7263 6527 2c20 2774 7269  meInForce', 'tri
+00034590: 6767 6572 5072 6963 6527 2c20 2773 746f  ggerPrice', 'sto
+000345a0: 704c 6f73 7350 7269 6365 272c 2027 7461  pLossPrice', 'ta
+000345b0: 6b65 5072 6f66 6974 5072 6963 6527 2c20  keProfitPrice', 
+000345c0: 2770 6f73 744f 6e6c 7927 2c20 2763 6c69  'postOnly', 'cli
+000345d0: 656e 744f 7264 6572 4964 272c 2027 7374  entOrderId', 'st
+000345e0: 6f70 4c6f 7373 272c 2027 7461 6b65 5072  opLoss', 'takePr
+000345f0: 6f66 6974 275d 290a 2020 2020 2020 2020  ofit']).        
+00034600: 7265 7370 6f6e 7365 203d 2061 7761 6974  response = await
+00034610: 2073 656c 662e 7072 6976 6174 6550 6f73   self.privatePos
+00034620: 7455 6e69 6669 6564 5633 5072 6976 6174  tUnifiedV3Privat
+00034630: 654f 7264 6572 5265 706c 6163 6528 7365  eOrderReplace(se
+00034640: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
+00034650: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
+00034660: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+00034670: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+00034680: 2020 2020 2020 2020 2272 6574 436f 6465          "retCode
+00034690: 223a 2030 2c0a 2020 2020 2020 2020 2320  ": 0,.        # 
+000346a0: 2020 2020 2020 2020 2272 6574 4d73 6722          "retMsg"
+000346b0: 3a20 224f 4b22 2c0a 2020 2020 2020 2020  : "OK",.        
+000346c0: 2320 2020 2020 2020 2020 2272 6573 756c  #         "resul
+000346d0: 7422 3a20 7b0a 2020 2020 2020 2020 2320  t": {.        # 
+000346e0: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+000346f0: 6572 4964 223a 2022 3432 6338 3664 3636  erId": "42c86d66
+00034700: 3333 3165 3431 3939 3864 3132 6332 3434  331e41998d12c244
+00034710: 3063 6539 3063 3161 222c 0a20 2020 2020  0ce90c1a",.     
+00034720: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00034730: 2022 6f72 6465 724c 696e 6b49 6422 3a20   "orderLinkId": 
+00034740: 2265 3830 6435 3538 652d 6564 220a 2020  "e80d558e-ed".  
+00034750: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00034760: 7d0a 2020 2020 2020 2020 2320 2020 2020  }.        #     
+00034770: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
+00034780: 2020 2020 6f72 6465 7220 3d20 7365 6c66      order = self
+00034790: 2e73 6166 655f 7661 6c75 6528 7265 7370  .safe_value(resp
+000347a0: 6f6e 7365 2c20 2772 6573 756c 7427 2c20  onse, 'result', 
+000347b0: 7b7d 290a 2020 2020 2020 2020 7265 7475  {}).        retu
+000347c0: 726e 2073 656c 662e 7061 7273 655f 6f72  rn self.parse_or
+000347d0: 6465 7228 6f72 6465 7229 0a0a 2020 2020  der(order)..    
+000347e0: 6173 796e 6320 6465 6620 6564 6974 5f63  async def edit_c
+000347f0: 6f6e 7472 6163 745f 7633 5f6f 7264 6572  ontract_v3_order
+00034800: 2873 656c 662c 2069 643a 2073 7472 2c20  (self, id: str, 
+00034810: 7379 6d62 6f6c 2c20 7479 7065 2c20 7369  symbol, type, si
+00034820: 6465 2c20 616d 6f75 6e74 3d4e 6f6e 652c  de, amount=None,
+00034830: 2070 7269 6365 3d4e 6f6e 652c 2070 6172   price=None, par
+00034840: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
+00034850: 2061 7761 6974 2073 656c 662e 6c6f 6164   await self.load
+00034860: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
+00034870: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
+00034880: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
+00034890: 2020 2020 2020 2020 7265 7175 6573 7420          request 
+000348a0: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+000348b0: 2773 796d 626f 6c27 3a20 6d61 726b 6574  'symbol': market
+000348c0: 5b27 6964 275d 2c0a 2020 2020 2020 2020  ['id'],.        
+000348d0: 2020 2020 276f 7264 6572 4964 273a 2069      'orderId': i
+000348e0: 642c 0a20 2020 2020 2020 2020 2020 2027  d,.            '
+000348f0: 7174 7927 3a20 7365 6c66 2e61 6d6f 756e  qty': self.amoun
+00034900: 745f 746f 5f70 7265 6369 7369 6f6e 2873  t_to_precision(s
+00034910: 796d 626f 6c2c 2061 6d6f 756e 7429 2c0a  ymbol, amount),.
+00034920: 2020 2020 2020 2020 2020 2020 2320 276f              # 'o
+00034930: 7264 6572 4c69 6e6b 4964 273a 2027 272c  rderLinkId': '',
+00034940: 2020 2320 5573 6572 2063 7573 746f 6d69    # User customi
+00034950: 7365 6420 6f72 6465 7220 6964 2e20 4569  sed order id. Ei
+00034960: 7468 6572 206f 7264 6572 4964 206f 7220  ther orderId or 
+00034970: 6f72 6465 724c 696e 6b49 6420 6973 2072  orderLinkId is r
+00034980: 6571 7569 7265 640a 2020 2020 2020 2020  equired.        
+00034990: 2020 2020 2320 2774 7269 6767 6572 5072      # 'triggerPr
+000349a0: 6963 6527 3a20 2727 2c20 2023 2054 7269  ice': '',  # Tri
+000349b0: 6767 6572 2070 7269 6365 2e20 446f 6e27  gger price. Don'
+000349c0: 7420 7061 7373 2069 7420 6966 206e 6f74  t pass it if not
+000349d0: 206d 6f64 6966 7920 7468 6520 7174 790a   modify the qty.
+000349e0: 2020 2020 2020 2020 2020 2020 2320 2774              # 't
+000349f0: 616b 6550 726f 6669 7427 3a20 2727 2c20  akeProfit': '', 
+00034a00: 2023 2054 616b 6520 7072 6f66 6974 2070   # Take profit p
+00034a10: 7269 6365 2061 6674 6572 206d 6f64 6966  rice after modif
+00034a20: 6963 6174 696f 6e2e 2044 6f6e 2774 2070  ication. Don't p
+00034a30: 6173 7320 6974 2069 6620 6e6f 7420 6d6f  ass it if not mo
+00034a40: 6469 6679 2074 6865 2074 616b 6520 7072  dify the take pr
+00034a50: 6f66 6974 0a20 2020 2020 2020 2020 2020  ofit.           
+00034a60: 2023 2027 7374 6f70 4c6f 7373 273a 2027   # 'stopLoss': '
+00034a70: 272c 2020 2320 5374 6f70 206c 6f73 7320  ',  # Stop loss 
+00034a80: 7072 6963 6520 6166 7465 7220 6d6f 6469  price after modi
+00034a90: 6669 6361 7469 6f6e 2e20 446f 6e27 7420  fication. Don't 
+00034aa0: 7061 7373 2069 7420 6966 206e 6f74 206d  pass it if not m
+00034ab0: 6f64 6966 7920 7468 6520 5374 6f70 206c  odify the Stop l
+00034ac0: 6f73 730a 2020 2020 2020 2020 2020 2020  oss.            
+00034ad0: 2320 2774 7054 7269 6767 6572 4279 273a  # 'tpTriggerBy':
+00034ae0: 2027 272c 2020 2320 5468 6520 7072 6963   '',  # The pric
+00034af0: 6520 7479 7065 2074 6f20 7472 6967 6765  e type to trigge
+00034b00: 7220 7461 6b65 2070 726f 6669 742e 2057  r take profit. W
+00034b10: 6865 6e20 7365 7420 6120 7461 6b65 2070  hen set a take p
+00034b20: 726f 6669 742c 2073 656c 6620 7061 7261  rofit, self para
+00034b30: 6d20 6973 2072 6571 7569 7265 6420 6966  m is required if
+00034b40: 206e 6f20 696e 6974 6961 6c20 7661 6c75   no initial valu
+00034b50: 6520 666f 7220 7468 6520 6f72 6465 720a  e for the order.
+00034b60: 2020 2020 2020 2020 2020 2020 2320 2773              # 's
+00034b70: 6c54 7269 6767 6572 4279 273a 2027 272c  lTriggerBy': '',
+00034b80: 2020 2320 5468 6520 7072 6963 6520 7479    # The price ty
+00034b90: 7065 2074 6f20 7472 6967 6765 7220 7374  pe to trigger st
+00034ba0: 6f70 206c 6f73 732e 2057 6865 6e20 7365  op loss. When se
+00034bb0: 7420 6120 7374 6f70 206c 6f73 732c 2073  t a stop loss, s
+00034bc0: 656c 6620 7061 7261 6d20 6973 2072 6571  elf param is req
+00034bd0: 7569 7265 6420 6966 206e 6f20 696e 6974  uired if no init
+00034be0: 6961 6c20 7661 6c75 6520 666f 7220 7468  ial value for th
+00034bf0: 6520 6f72 6465 720a 2020 2020 2020 2020  e order.        
+00034c00: 2020 2020 2320 2774 7269 6767 6572 4279      # 'triggerBy
+00034c10: 273a 2027 272c 2020 2320 5472 6967 6765  ': '',  # Trigge
+00034c20: 7220 7072 6963 6520 7479 7065 2e20 4c61  r price type. La
+00034c30: 7374 5072 6963 652c 2049 6e64 6578 5072  stPrice, IndexPr
+00034c40: 6963 652c 204d 6172 6b50 7269 6365 2c20  ice, MarkPrice, 
+00034c50: 4c61 7374 5072 6963 650a 2020 2020 2020  LastPrice.      
+00034c60: 2020 7d0a 2020 2020 2020 2020 6966 2070    }.        if p
+00034c70: 7269 6365 2069 7320 6e6f 7420 4e6f 6e65  rice is not None
+00034c80: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00034c90: 7175 6573 745b 2770 7269 6365 275d 203d  quest['price'] =
+00034ca0: 2073 656c 662e 7072 6963 655f 746f 5f70   self.price_to_p
+00034cb0: 7265 6369 7369 6f6e 2873 796d 626f 6c2c  recision(symbol,
+00034cc0: 2070 7269 6365 290a 2020 2020 2020 2020   price).        
+00034cd0: 7472 6967 6765 7250 7269 6365 203d 2073  triggerPrice = s
+00034ce0: 656c 662e 7361 6665 5f6e 756d 6265 725f  elf.safe_number_
+00034cf0: 3228 7061 7261 6d73 2c20 2774 7269 6767  2(params, 'trigg
+00034d00: 6572 5072 6963 6527 2c20 2773 746f 7050  erPrice', 'stopP
+00034d10: 7269 6365 2729 0a20 2020 2020 2020 2073  rice').        s
+00034d20: 746f 704c 6f73 7354 7269 6767 6572 5072  topLossTriggerPr
+00034d30: 6963 6520 3d20 7365 6c66 2e73 6166 655f  ice = self.safe_
+00034d40: 6e75 6d62 6572 2870 6172 616d 732c 2027  number(params, '
+00034d50: 7374 6f70 4c6f 7373 5072 6963 6527 290a  stopLossPrice').
+00034d60: 2020 2020 2020 2020 7461 6b65 5072 6f66          takeProf
+00034d70: 6974 5472 6967 6765 7250 7269 6365 203d  itTriggerPrice =
+00034d80: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
+00034d90: 7228 7061 7261 6d73 2c20 2774 616b 6550  r(params, 'takeP
+00034da0: 726f 6669 7450 7269 6365 2729 0a20 2020  rofitPrice').   
+00034db0: 2020 2020 2073 746f 704c 6f73 7320 3d20       stopLoss = 
+00034dc0: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
+00034dd0: 2870 6172 616d 732c 2027 7374 6f70 4c6f  (params, 'stopLo
+00034de0: 7373 2729 0a20 2020 2020 2020 2074 616b  ss').        tak
+00034df0: 6550 726f 6669 7420 3d20 7365 6c66 2e73  eProfit = self.s
+00034e00: 6166 655f 6e75 6d62 6572 2870 6172 616d  afe_number(param
+00034e10: 732c 2027 7461 6b65 5072 6f66 6974 2729  s, 'takeProfit')
+00034e20: 0a20 2020 2020 2020 2069 7353 746f 704c  .        isStopL
+00034e30: 6f73 7354 7269 6767 6572 4f72 6465 7220  ossTriggerOrder 
+00034e40: 3d20 7374 6f70 4c6f 7373 5472 6967 6765  = stopLossTrigge
+00034e50: 7250 7269 6365 2069 7320 6e6f 7420 4e6f  rPrice is not No
+00034e60: 6e65 0a20 2020 2020 2020 2069 7354 616b  ne.        isTak
+00034e70: 6550 726f 6669 7454 7269 6767 6572 4f72  eProfitTriggerOr
+00034e80: 6465 7220 3d20 7461 6b65 5072 6f66 6974  der = takeProfit
+00034e90: 5472 6967 6765 7250 7269 6365 2069 7320  TriggerPrice is 
+00034ea0: 6e6f 7420 4e6f 6e65 0a20 2020 2020 2020  not None.       
+00034eb0: 2069 7353 746f 704c 6f73 7320 3d20 7374   isStopLoss = st
+00034ec0: 6f70 4c6f 7373 2069 7320 6e6f 7420 4e6f  opLoss is not No
+00034ed0: 6e65 0a20 2020 2020 2020 2069 7354 616b  ne.        isTak
+00034ee0: 6550 726f 6669 7420 3d20 7461 6b65 5072  eProfit = takePr
+00034ef0: 6f66 6974 2069 7320 6e6f 7420 4e6f 6e65  ofit is not None
+00034f00: 0a20 2020 2020 2020 2069 6620 6973 5374  .        if isSt
+00034f10: 6f70 4c6f 7373 5472 6967 6765 724f 7264  opLossTriggerOrd
+00034f20: 6572 206f 7220 6973 5461 6b65 5072 6f66  er or isTakeProf
+00034f30: 6974 5472 6967 6765 724f 7264 6572 3a0a  itTriggerOrder:.
+00034f40: 2020 2020 2020 2020 2020 2020 7472 6967              trig
+00034f50: 6765 7250 7269 6365 203d 2073 746f 704c  gerPrice = stopL
+00034f60: 6f73 7354 7269 6767 6572 5072 6963 6520  ossTriggerPrice 
+00034f70: 6966 2069 7353 746f 704c 6f73 7354 7269  if isStopLossTri
+00034f80: 6767 6572 4f72 6465 7220 656c 7365 2074  ggerOrder else t
+00034f90: 616b 6550 726f 6669 7454 7269 6767 6572  akeProfitTrigger
+00034fa0: 5072 6963 650a 2020 2020 2020 2020 6966  Price.        if
+00034fb0: 2074 7269 6767 6572 5072 6963 6520 6973   triggerPrice is
+00034fc0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00034fd0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+00034fe0: 7472 6967 6765 7250 7269 6365 275d 203d  triggerPrice'] =
+00034ff0: 2073 656c 662e 7072 6963 655f 746f 5f70   self.price_to_p
+00035000: 7265 6369 7369 6f6e 2873 796d 626f 6c2c  recision(symbol,
+00035010: 2074 7269 6767 6572 5072 6963 6529 0a20   triggerPrice). 
+00035020: 2020 2020 2020 2069 6620 6973 5374 6f70         if isStop
+00035030: 4c6f 7373 206f 7220 6973 5461 6b65 5072  Loss or isTakePr
+00035040: 6f66 6974 3a0a 2020 2020 2020 2020 2020  ofit:.          
+00035050: 2020 6966 2069 7353 746f 704c 6f73 733a    if isStopLoss:
+00035060: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00035070: 2072 6571 7565 7374 5b27 7374 6f70 4c6f   request['stopLo
+00035080: 7373 275d 203d 2073 656c 662e 7072 6963  ss'] = self.pric
+00035090: 655f 746f 5f70 7265 6369 7369 6f6e 2873  e_to_precision(s
+000350a0: 796d 626f 6c2c 2073 746f 704c 6f73 7329  ymbol, stopLoss)
+000350b0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000350c0: 6973 5461 6b65 5072 6f66 6974 3a0a 2020  isTakeProfit:.  
+000350d0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+000350e0: 7175 6573 745b 2774 616b 6550 726f 6669  quest['takeProfi
+000350f0: 7427 5d20 3d20 7365 6c66 2e70 7269 6365  t'] = self.price
+00035100: 5f74 6f5f 7072 6563 6973 696f 6e28 7379  _to_precision(sy
+00035110: 6d62 6f6c 2c20 7461 6b65 5072 6f66 6974  mbol, takeProfit
+00035120: 290a 2020 2020 2020 2020 636c 6965 6e74  ).        client
+00035130: 4f72 6465 7249 6420 3d20 7365 6c66 2e73  OrderId = self.s
+00035140: 6166 655f 7374 7269 6e67 2870 6172 616d  afe_string(param
+00035150: 732c 2027 636c 6965 6e74 4f72 6465 7249  s, 'clientOrderI
+00035160: 6427 290a 2020 2020 2020 2020 6966 2063  d').        if c
+00035170: 6c69 656e 744f 7264 6572 4964 2069 7320  lientOrderId is 
+00035180: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00035190: 2020 2020 2020 7265 7175 6573 745b 276f        request['o
+000351a0: 7264 6572 4c69 6e6b 4964 275d 203d 2063  rderLinkId'] = c
+000351b0: 6c69 656e 744f 7264 6572 4964 0a20 2020  lientOrderId.   
+000351c0: 2020 2020 2070 6172 616d 7320 3d20 7365       params = se
+000351d0: 6c66 2e6f 6d69 7428 7061 7261 6d73 2c20  lf.omit(params, 
+000351e0: 5b27 7374 6f70 5072 6963 6527 2c20 2773  ['stopPrice', 's
+000351f0: 746f 704c 6f73 7350 7269 6365 272c 2027  topLossPrice', '
+00035200: 7461 6b65 5072 6f66 6974 5072 6963 6527  takeProfitPrice'
+00035210: 2c20 2774 7269 6767 6572 5072 6963 6527  , 'triggerPrice'
+00035220: 2c20 2763 6c69 656e 744f 7264 6572 4964  , 'clientOrderId
+00035230: 272c 2027 7374 6f70 4c6f 7373 272c 2027  ', 'stopLoss', '
+00035240: 7461 6b65 5072 6f66 6974 275d 290a 2020  takeProfit']).  
+00035250: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+00035260: 2061 7761 6974 2073 656c 662e 7072 6976   await self.priv
+00035270: 6174 6550 6f73 7443 6f6e 7472 6163 7456  atePostContractV
+00035280: 3350 7269 7661 7465 4f72 6465 7252 6570  3PrivateOrderRep
+00035290: 6c61 6365 2873 656c 662e 6578 7465 6e64  lace(self.extend
+000352a0: 2872 6571 7565 7374 2c20 7061 7261 6d73  (request, params
+000352b0: 2929 0a20 2020 2020 2020 2023 0a20 2020  )).        #.   
+000352c0: 2020 2020 2023 2063 6f6e 7472 6163 7420       # contract 
+000352d0: 7633 0a20 2020 2020 2020 2023 0a20 2020  v3.        #.   
+000352e0: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
+000352f0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00035300: 7265 7443 6f64 6522 3a20 302c 0a20 2020  retCode": 0,.   
+00035310: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00035320: 7265 744d 7367 223a 2022 4f4b 222c 0a20  retMsg": "OK",. 
+00035330: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00035340: 2022 7265 7375 6c74 223a 207b 0a20 2020   "result": {.   
+00035350: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00035360: 2020 2022 6f72 6465 7249 6422 3a20 2264     "orderId": "d
+00035370: 6238 6237 3462 332d 3732 6433 2d34 3236  b8b74b3-72d3-426
+00035380: 342d 6266 3366 2d35 3264 3339 6234 3139  4-bf3f-52d39b419
+00035390: 3536 6522 2c0a 2020 2020 2020 2020 2320  56e",.        # 
+000353a0: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+000353b0: 6572 4c69 6e6b 4964 223a 2022 7830 3032  erLinkId": "x002
+000353c0: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
+000353d0: 2020 2020 7d2c 0a20 2020 2020 2020 2023      },.        #
+000353e0: 2020 2020 2020 2020 2022 7265 7445 7874           "retExt
+000353f0: 496e 666f 223a 207b 7d2c 0a20 2020 2020  Info": {},.     
+00035400: 2020 2023 2020 2020 2020 2020 2022 7469     #         "ti
+00035410: 6d65 223a 2031 3635 3839 3032 3631 3037  me": 16589026107
+00035420: 3439 0a20 2020 2020 2020 2023 2020 2020  49.        #    
+00035430: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
+00035440: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
+00035450: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
+00035460: 7370 6f6e 7365 2c20 2772 6573 756c 7427  sponse, 'result'
+00035470: 2c20 7b7d 290a 2020 2020 2020 2020 7265  , {}).        re
+00035480: 7475 726e 207b 0a20 2020 2020 2020 2020  turn {.         
+00035490: 2020 2027 696e 666f 273a 2072 6573 706f     'info': respo
+000354a0: 6e73 652c 0a20 2020 2020 2020 2020 2020  nse,.           
+000354b0: 2027 6964 273a 2073 656c 662e 7361 6665   'id': self.safe
+000354c0: 5f73 7472 696e 6728 7265 7375 6c74 2c20  _string(result, 
+000354d0: 276f 7264 6572 4964 2729 2c0a 2020 2020  'orderId'),.    
+000354e0: 2020 2020 7d0a 0a20 2020 2061 7379 6e63      }..    async
+000354f0: 2064 6566 2065 6469 745f 6f72 6465 7228   def edit_order(
+00035500: 7365 6c66 2c20 6964 3a20 7374 722c 2073  self, id: str, s
+00035510: 796d 626f 6c2c 2074 7970 652c 2073 6964  ymbol, type, sid
+00035520: 652c 2061 6d6f 756e 743d 4e6f 6e65 2c20  e, amount=None, 
+00035530: 7072 6963 653d 4e6f 6e65 2c20 7061 7261  price=None, para
+00035540: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
+00035550: 6966 2073 796d 626f 6c20 6973 204e 6f6e  if symbol is Non
+00035560: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+00035570: 6169 7365 2041 7267 756d 656e 7473 5265  aise ArgumentsRe
+00035580: 7175 6972 6564 2873 656c 662e 6964 202b  quired(self.id +
+00035590: 2027 2065 6469 744f 7264 6572 2829 2072   ' editOrder() r
+000355a0: 6571 7569 7265 7320 616e 2073 796d 626f  equires an symbo
+000355b0: 6c20 6172 6775 6d65 6e74 2729 0a20 2020  l argument').   
+000355c0: 2020 2020 2061 7761 6974 2073 656c 662e       await self.
+000355d0: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
+000355e0: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
+000355f0: 7365 6c66 2e6d 6172 6b65 7428 7379 6d62  self.market(symb
+00035600: 6f6c 290a 2020 2020 2020 2020 656e 6162  ol).        enab
+00035610: 6c65 556e 6966 6965 644d 6172 6769 6e2c  leUnifiedMargin,
+00035620: 2065 6e61 626c 6555 6e69 6669 6564 4163   enableUnifiedAc
+00035630: 636f 756e 7420 3d20 6177 6169 7420 7365  count = await se
+00035640: 6c66 2e69 735f 756e 6966 6965 645f 656e  lf.is_unified_en
+00035650: 6162 6c65 6428 290a 2020 2020 2020 2020  abled().        
+00035660: 6966 2065 6e61 626c 6555 6e69 6669 6564  if enableUnified
+00035670: 4163 636f 756e 743a 0a20 2020 2020 2020  Account:.       
+00035680: 2020 2020 2072 6574 7572 6e20 6177 6169       return awai
+00035690: 7420 7365 6c66 2e65 6469 745f 756e 6966  t self.edit_unif
+000356a0: 6965 645f 6163 636f 756e 745f 6f72 6465  ied_account_orde
+000356b0: 7228 6964 2c20 7379 6d62 6f6c 2c20 7479  r(id, symbol, ty
+000356c0: 7065 2c20 7369 6465 2c20 616d 6f75 6e74  pe, side, amount
+000356d0: 2c20 7072 6963 652c 2070 6172 616d 7329  , price, params)
+000356e0: 0a20 2020 2020 2020 2065 6c69 6620 6d61  .        elif ma
+000356f0: 726b 6574 5b27 7370 6f74 275d 3a0a 2020  rket['spot']:.  
+00035700: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00035710: 4e6f 7453 7570 706f 7274 6564 2873 656c  NotSupported(sel
+00035720: 662e 6964 202b 2027 2065 6469 744f 7264  f.id + ' editOrd
+00035730: 6572 2829 2064 6f65 7320 6e6f 7420 7375  er() does not su
+00035740: 7070 6f72 7420 7370 6f74 206d 6172 6b65  pport spot marke
+00035750: 7473 2729 0a20 2020 2020 2020 2065 6c69  ts').        eli
+00035760: 6620 656e 6162 6c65 556e 6966 6965 644d  f enableUnifiedM
+00035770: 6172 6769 6e20 616e 6420 6e6f 7420 6d61  argin and not ma
+00035780: 726b 6574 5b27 696e 7665 7273 6527 5d3a  rket['inverse']:
+00035790: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+000357a0: 7572 6e20 6177 6169 7420 7365 6c66 2e65  urn await self.e
+000357b0: 6469 745f 756e 6966 6965 645f 6d61 7267  dit_unified_marg
+000357c0: 696e 5f6f 7264 6572 2869 642c 2073 796d  in_order(id, sym
+000357d0: 626f 6c2c 2074 7970 652c 2073 6964 652c  bol, type, side,
+000357e0: 2061 6d6f 756e 742c 2070 7269 6365 2c20   amount, price, 
+000357f0: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
+00035800: 7265 7475 726e 2061 7761 6974 2073 656c  return await sel
+00035810: 662e 6564 6974 5f63 6f6e 7472 6163 745f  f.edit_contract_
+00035820: 7633 5f6f 7264 6572 2869 642c 2073 796d  v3_order(id, sym
+00035830: 626f 6c2c 2074 7970 652c 2073 6964 652c  bol, type, side,
+00035840: 2061 6d6f 756e 742c 2070 7269 6365 2c20   amount, price, 
+00035850: 7061 7261 6d73 290a 0a20 2020 2061 7379  params)..    asy
+00035860: 6e63 2064 6566 2063 616e 6365 6c5f 756e  nc def cancel_un
+00035870: 6966 6965 645f 6163 636f 756e 745f 6f72  ified_account_or
+00035880: 6465 7228 7365 6c66 2c20 6964 3a20 7374  der(self, id: st
+00035890: 722c 2073 796d 626f 6c3a 204f 7074 696f  r, symbol: Optio
+000358a0: 6e61 6c5b 7374 725d 203d 204e 6f6e 652c  nal[str] = None,
+000358b0: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
+000358c0: 2020 2020 2069 6620 7379 6d62 6f6c 2069       if symbol i
+000358d0: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+000358e0: 2020 2020 7261 6973 6520 4172 6775 6d65      raise Argume
+000358f0: 6e74 7352 6571 7569 7265 6428 7365 6c66  ntsRequired(self
+00035900: 2e69 6420 2b20 2720 6361 6e63 656c 4f72  .id + ' cancelOr
+00035910: 6465 7228 2920 7265 7175 6972 6573 2061  der() requires a
+00035920: 2073 796d 626f 6c20 6172 6775 6d65 6e74   symbol argument
+00035930: 2729 0a20 2020 2020 2020 2061 7761 6974  ').        await
+00035940: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
+00035950: 7473 2829 0a20 2020 2020 2020 206d 6172  ts().        mar
+00035960: 6b65 7420 3d20 7365 6c66 2e6d 6172 6b65  ket = self.marke
+00035970: 7428 7379 6d62 6f6c 290a 2020 2020 2020  t(symbol).      
+00035980: 2020 7265 7175 6573 7420 3d20 7b0a 2020    request = {.  
+00035990: 2020 2020 2020 2020 2020 2773 796d 626f            'symbo
+000359a0: 6c27 3a20 6d61 726b 6574 5b27 6964 275d  l': market['id']
+000359b0: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+000359c0: 276f 7264 6572 4c69 6e6b 4964 273a 2027  'orderLinkId': '
+000359d0: 7374 7269 6e67 272c 0a20 2020 2020 2020  string',.       
+000359e0: 2020 2020 2023 2027 6f72 6465 7249 6427       # 'orderId'
+000359f0: 3a20 6964 2c0a 2020 2020 2020 2020 2020  : id,.          
+00035a00: 2020 2320 636f 6e64 6974 696f 6e61 6c20    # conditional 
+00035a10: 6f72 6465 7273 0a20 2020 2020 2020 2020  orders.         
+00035a20: 2020 2023 2027 6f72 6465 7246 696c 7465     # 'orderFilte
+00035a30: 7227 3a20 2727 2c20 2023 2056 616c 6964  r': '',  # Valid
+00035a40: 2066 6f72 2073 706f 7420 6f6e 6c79 2e20   for spot only. 
+00035a50: 4f72 6465 722c 7470 736c 4f72 6465 722e  Order,tpslOrder.
+00035a60: 2049 6620 6e6f 7420 7061 7373 6564 2c20   If not passed, 
+00035a70: 4f72 6465 7220 6279 2064 6566 6175 6c74  Order by default
+00035a80: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
+00035a90: 2020 2069 6620 6d61 726b 6574 5b27 7370     if market['sp
+00035aa0: 6f74 275d 3a0a 2020 2020 2020 2020 2020  ot']:.          
+00035ab0: 2020 2320 6f6e 6c79 2077 6f72 6b73 2066    # only works f
+00035ac0: 6f72 2073 706f 7420 6d61 726b 6574 0a20  or spot market. 
+00035ad0: 2020 2020 2020 2020 2020 2069 7353 746f             isSto
+00035ae0: 7020 3d20 7365 6c66 2e73 6166 655f 7661  p = self.safe_va
+00035af0: 6c75 6528 7061 7261 6d73 2c20 2773 746f  lue(params, 'sto
+00035b00: 7027 2c20 4661 6c73 6529 0a20 2020 2020  p', False).     
+00035b10: 2020 2020 2020 2070 6172 616d 7320 3d20         params = 
+00035b20: 7365 6c66 2e6f 6d69 7428 7061 7261 6d73  self.omit(params
+00035b30: 2c20 5b27 7374 6f70 275d 290a 2020 2020  , ['stop']).    
+00035b40: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+00035b50: 276f 7264 6572 4669 6c74 6572 275d 203d  'orderFilter'] =
+00035b60: 2027 7470 736c 4f72 6465 7227 2069 6620   'tpslOrder' if 
+00035b70: 6973 5374 6f70 2065 6c73 6520 274f 7264  isStop else 'Ord
+00035b80: 6572 270a 2020 2020 2020 2020 6966 2069  er'.        if i
+00035b90: 6420 6973 206e 6f74 204e 6f6e 653a 2020  d is not None:  
+00035ba0: 2320 5468 6520 7573 6572 2063 616e 2061  # The user can a
+00035bb0: 6c73 6f20 7573 6520 6172 6775 6d65 6e74  lso use argument
+00035bc0: 2070 6172 616d 735b 226f 7264 6572 4c69   params["orderLi
+00035bd0: 6e6b 4964 225d 0a20 2020 2020 2020 2020  nkId"].         
+00035be0: 2020 2072 6571 7565 7374 5b27 6f72 6465     request['orde
+00035bf0: 7249 6427 5d20 3d20 6964 0a20 2020 2020  rId'] = id.     
+00035c00: 2020 2069 6620 6d61 726b 6574 5b27 7370     if market['sp
+00035c10: 6f74 275d 3a0a 2020 2020 2020 2020 2020  ot']:.          
+00035c20: 2020 7265 7175 6573 745b 2763 6174 6567    request['categ
+00035c30: 6f72 7927 5d20 3d20 2773 706f 7427 0a20  ory'] = 'spot'. 
+00035c40: 2020 2020 2020 2065 6c69 6620 6d61 726b         elif mark
+00035c50: 6574 5b27 6f70 7469 6f6e 275d 3a0a 2020  et['option']:.  
+00035c60: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+00035c70: 745b 2763 6174 6567 6f72 7927 5d20 3d20  t['category'] = 
+00035c80: 276f 7074 696f 6e27 0a20 2020 2020 2020  'option'.       
+00035c90: 2065 6c69 6620 6d61 726b 6574 5b27 6c69   elif market['li
+00035ca0: 6e65 6172 275d 3a0a 2020 2020 2020 2020  near']:.        
+00035cb0: 2020 2020 7265 7175 6573 745b 2763 6174      request['cat
+00035cc0: 6567 6f72 7927 5d20 3d20 276c 696e 6561  egory'] = 'linea
+00035cd0: 7227 0a20 2020 2020 2020 2065 6c73 653a  r'.        else:
+00035ce0: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+00035cf0: 7365 204e 6f74 5375 7070 6f72 7465 6428  se NotSupported(
+00035d00: 7365 6c66 2e69 6420 2b20 2720 6361 6e63  self.id + ' canc
+00035d10: 656c 4f72 6465 7228 2920 646f 6573 206e  elOrder() does n
+00035d20: 6f74 2061 6c6c 6f77 2069 6e76 6572 7365  ot allow inverse
+00035d30: 206d 6172 6b65 7420 6f72 6465 7273 2066   market orders f
+00035d40: 6f72 2027 202b 2073 796d 626f 6c20 2b20  or ' + symbol + 
+00035d50: 2720 6d61 726b 6574 7327 290a 2020 2020  ' markets').    
+00035d60: 2020 2020 7265 7370 6f6e 7365 203d 2061      response = a
+00035d70: 7761 6974 2073 656c 662e 7072 6976 6174  wait self.privat
+00035d80: 6550 6f73 7456 354f 7264 6572 4361 6e63  ePostV5OrderCanc
+00035d90: 656c 2873 656c 662e 6578 7465 6e64 2872  el(self.extend(r
+00035da0: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
+00035db0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+00035dc0: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
+00035dd0: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+00035de0: 7443 6f64 6522 3a20 302c 0a20 2020 2020  tCode": 0,.     
+00035df0: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+00035e00: 744d 7367 223a 2022 4f4b 222c 0a20 2020  tMsg": "OK",.   
+00035e10: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00035e20: 7265 7375 6c74 223a 207b 0a20 2020 2020  result": {.     
+00035e30: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00035e40: 2022 6f72 6465 7249 6422 3a20 2263 3666   "orderId": "c6f
+00035e50: 3035 3564 392d 3766 3231 2d34 3037 392d  055d9-7f21-4079-
+00035e60: 3931 3364 2d65 3635 3233 6139 6366 6666  913d-e6523a9cfff
+00035e70: 6122 2c0a 2020 2020 2020 2020 2320 2020  a",.        #   
+00035e80: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+00035e90: 4c69 6e6b 4964 223a 2022 6c69 6e65 6172  LinkId": "linear
+00035ea0: 2d30 3034 220a 2020 2020 2020 2020 2320  -004".        # 
+00035eb0: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
+00035ec0: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+00035ed0: 7445 7874 496e 666f 223a 207b 7d2c 0a20  tExtInfo": {},. 
+00035ee0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00035ef0: 2022 7469 6d65 223a 2031 3637 3232 3137   "time": 1672217
+00035f00: 3337 3731 3634 0a20 2020 2020 2020 2023  377164.        #
+00035f10: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+00035f20: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
+00035f30: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+00035f40: 6528 7265 7370 6f6e 7365 2c20 2772 6573  e(response, 'res
+00035f50: 756c 7427 2c20 7b7d 290a 2020 2020 2020  ult', {}).      
+00035f60: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
+00035f70: 7273 655f 6f72 6465 7228 7265 7375 6c74  rse_order(result
+00035f80: 2c20 6d61 726b 6574 290a 0a20 2020 2061  , market)..    a
+00035f90: 7379 6e63 2064 6566 2063 616e 6365 6c5f  sync def cancel_
+00035fa0: 7370 6f74 5f6f 7264 6572 2873 656c 662c  spot_order(self,
+00035fb0: 2069 643a 2073 7472 2c20 7379 6d62 6f6c   id: str, symbol
+00035fc0: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
+00035fd0: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
+00035fe0: 7d29 3a0a 2020 2020 2020 2020 6177 6169  }):.        awai
+00035ff0: 7420 7365 6c66 2e6c 6f61 645f 6d61 726b  t self.load_mark
+00036000: 6574 7328 290a 2020 2020 2020 2020 6d61  ets().        ma
+00036010: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
+00036020: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
+00036030: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
+00036040: 2020 2020 2020 2020 2020 2023 2027 6f72             # 'or
+00036050: 6465 725f 6c69 6e6b 5f69 6427 3a20 2773  der_link_id': 's
+00036060: 7472 696e 6727 2c20 2023 206f 6e65 206f  tring',  # one o
+00036070: 6620 6f72 6465 725f 6964 2c20 7374 6f70  f order_id, stop
+00036080: 5f6f 7264 6572 5f69 6420 6f72 206f 7264  _order_id or ord
+00036090: 6572 5f6c 696e 6b5f 6964 2069 7320 7265  er_link_id is re
+000360a0: 7175 6972 6564 0a20 2020 2020 2020 2020  quired.         
+000360b0: 2020 2023 2027 6f72 6465 7249 6427 3a20     # 'orderId': 
+000360c0: 6964 0a20 2020 2020 2020 207d 0a20 2020  id.        }.   
+000360d0: 2020 2020 2069 6620 6964 2069 7320 6e6f       if id is no
+000360e0: 7420 4e6f 6e65 3a20 2023 2054 6865 2075  t None:  # The u
+000360f0: 7365 7220 6361 6e20 616c 736f 2075 7365  ser can also use
+00036100: 2061 7267 756d 656e 7420 7061 7261 6d73   argument params
+00036110: 5b22 6f72 6465 725f 6c69 6e6b 5f69 6422  ["order_link_id"
+00036120: 5d0a 2020 2020 2020 2020 2020 2020 7265  ].            re
+00036130: 7175 6573 745b 276f 7264 6572 4964 275d  quest['orderId']
+00036140: 203d 2069 640a 2020 2020 2020 2020 7265   = id.        re
+00036150: 7370 6f6e 7365 203d 2061 7761 6974 2073  sponse = await s
+00036160: 656c 662e 7072 6976 6174 6550 6f73 7453  elf.privatePostS
+00036170: 706f 7456 3350 7269 7661 7465 4361 6e63  potV3PrivateCanc
+00036180: 656c 4f72 6465 7228 7365 6c66 2e65 7874  elOrder(self.ext
+00036190: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
+000361a0: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
+000361b0: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+000361c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000361d0: 2020 2272 6574 436f 6465 223a 2022 3022    "retCode": "0"
+000361e0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000361f0: 2020 2020 2272 6574 4d73 6722 3a20 224f      "retMsg": "O
+00036200: 4b22 2c0a 2020 2020 2020 2020 2320 2020  K",.        #   
+00036210: 2020 2020 2020 2272 6573 756c 7422 3a20        "result": 
+00036220: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+00036230: 2020 2020 2020 2020 226f 7264 6572 4964          "orderId
+00036240: 223a 2022 3132 3735 3034 3632 3438 3538  ": "127504624858
+00036250: 3534 3134 3134 3422 2c0a 2020 2020 2020  5414144",.      
+00036260: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00036270: 226f 7264 6572 4c69 6e6b 4964 223a 2022  "orderLinkId": "
+00036280: 3136 3636 3733 3333 3537 3433 3436 3137  1666733357434617
+00036290: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+000362a0: 2020 2020 2020 2020 2022 7379 6d62 6f6c           "symbol
+000362b0: 223a 2022 4141 5645 5553 4454 222c 0a20  ": "AAVEUSDT",. 
+000362c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000362d0: 2020 2020 2022 7374 6174 7573 223a 2022       "status": "
+000362e0: 4e45 5722 2c0a 2020 2020 2020 2020 2320  NEW",.        # 
+000362f0: 2020 2020 2020 2020 2020 2020 2261 6363              "acc
+00036300: 6f75 6e74 4964 223a 2022 3133 3338 3034  ountId": "133804
+00036310: 3334 222c 0a20 2020 2020 2020 2023 2020  34",.        #  
+00036320: 2020 2020 2020 2020 2020 2022 6372 6561             "crea
+00036330: 7465 5469 6d65 223a 2022 3136 3636 3733  teTime": "166673
+00036340: 3333 3537 3433 3822 2c0a 2020 2020 2020  3357438",.      
+00036350: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00036360: 226f 7264 6572 5072 6963 6522 3a20 2238  "orderPrice": "8
+00036370: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00036380: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+00036390: 5174 7922 3a20 2230 2e31 3122 2c0a 2020  Qty": "0.11",.  
+000363a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000363b0: 2020 2020 2265 7865 6351 7479 223a 2022      "execQty": "
+000363c0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+000363d0: 2020 2020 2020 2020 2020 2274 696d 6549            "timeI
+000363e0: 6e46 6f72 6365 223a 2022 4754 4322 2c0a  nForce": "GTC",.
+000363f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00036400: 2020 2020 2020 226f 7264 6572 5479 7065        "orderType
+00036410: 223a 2022 4c49 4d49 5422 2c0a 2020 2020  ": "LIMIT",.    
+00036420: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00036430: 2020 2273 6964 6522 3a20 2242 5559 222c    "side": "BUY",
+00036440: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00036450: 2020 2020 2020 2022 6f72 6465 7243 6174         "orderCat
+00036460: 6567 6f72 7922 3a20 2230 220a 2020 2020  egory": "0".    
+00036470: 2020 2020 2320 2020 2020 2020 2020 7d2c      #         },
+00036480: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00036490: 2020 2022 7265 7445 7874 4d61 7022 3a20     "retExtMap": 
+000364a0: 7b7d 2c0a 2020 2020 2020 2020 2320 2020  {},.        #   
+000364b0: 2020 2020 2020 2272 6574 4578 7449 6e66        "retExtInf
+000364c0: 6f22 3a20 6e75 6c6c 2c0a 2020 2020 2020  o": null,.      
+000364d0: 2020 2320 2020 2020 2020 2020 2274 696d    #         "tim
+000364e0: 6522 3a20 2231 3636 3637 3333 3833 3934  e": "16667338394
+000364f0: 3933 220a 2020 2020 2020 2020 2320 2020  93".        #   
+00036500: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
+00036510: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
+00036520: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
+00036530: 6573 706f 6e73 652c 2027 7265 7375 6c74  esponse, 'result
+00036540: 272c 207b 7d29 0a20 2020 2020 2020 2072  ', {}).        r
+00036550: 6574 7572 6e20 7365 6c66 2e70 6172 7365  eturn self.parse
+00036560: 5f6f 7264 6572 2872 6573 756c 742c 206d  _order(result, m
+00036570: 6172 6b65 7429 0a0a 2020 2020 6173 796e  arket)..    asyn
+00036580: 6320 6465 6620 6361 6e63 656c 5f75 6e69  c def cancel_uni
+00036590: 6669 6564 5f6d 6172 6769 6e5f 6f72 6465  fied_margin_orde
+000365a0: 7228 7365 6c66 2c20 6964 3a20 7374 722c  r(self, id: str,
+000365b0: 2073 796d 626f 6c3a 204f 7074 696f 6e61   symbol: Optiona
+000365c0: 6c5b 7374 725d 203d 204e 6f6e 652c 2070  l[str] = None, p
+000365d0: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
+000365e0: 2020 2069 6620 7379 6d62 6f6c 2069 7320     if symbol is 
+000365f0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00036600: 2020 7261 6973 6520 4172 6775 6d65 6e74    raise Argument
+00036610: 7352 6571 7569 7265 6428 7365 6c66 2e69  sRequired(self.i
+00036620: 6420 2b20 2720 6361 6e63 656c 556e 6966  d + ' cancelUnif
+00036630: 6965 644d 6172 6769 6e4f 7264 6572 2829  iedMarginOrder()
+00036640: 2072 6571 7569 7265 7320 6120 7379 6d62   requires a symb
+00036650: 6f6c 2061 7267 756d 656e 7427 290a 2020  ol argument').  
+00036660: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
+00036670: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
+00036680: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
+00036690: 2073 656c 662e 6d61 726b 6574 2873 796d   self.market(sym
+000366a0: 626f 6c29 0a20 2020 2020 2020 2072 6571  bol).        req
+000366b0: 7565 7374 203d 207b 0a20 2020 2020 2020  uest = {.       
+000366c0: 2020 2020 2027 7379 6d62 6f6c 273a 206d       'symbol': m
+000366d0: 6172 6b65 745b 2769 6427 5d2c 0a20 2020  arket['id'],.   
+000366e0: 2020 2020 2020 2020 2023 2027 6f72 6465           # 'orde
+000366f0: 724c 696e 6b49 6427 3a20 2773 7472 696e  rLinkId': 'strin
+00036700: 6727 2c0a 2020 2020 2020 2020 2020 2020  g',.            
+00036710: 2320 276f 7264 6572 4964 273a 2069 642c  # 'orderId': id,
+00036720: 0a20 2020 2020 2020 2020 2020 2023 2063  .            # c
+00036730: 6f6e 6469 7469 6f6e 616c 206f 7264 6572  onditional order
+00036740: 730a 2020 2020 2020 2020 2020 2020 2320  s.            # 
+00036750: 276f 7264 6572 4669 6c74 6572 273a 2027  'orderFilter': '
+00036760: 272c 0a20 2020 2020 2020 2020 2020 2023  ',.            #
+00036770: 2027 6361 7465 676f 7279 273a 2027 272c   'category': '',
+00036780: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
+00036790: 2020 2069 7353 746f 7020 3d20 7365 6c66     isStop = self
+000367a0: 2e73 6166 655f 7661 6c75 6528 7061 7261  .safe_value(para
+000367b0: 6d73 2c20 2773 746f 7027 2c20 4661 6c73  ms, 'stop', Fals
+000367c0: 6529 0a20 2020 2020 2020 2070 6172 616d  e).        param
+000367d0: 7320 3d20 7365 6c66 2e6f 6d69 7428 7061  s = self.omit(pa
+000367e0: 7261 6d73 2c20 5b27 7374 6f70 275d 290a  rams, ['stop']).
+000367f0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+00036800: 276f 7264 6572 4669 6c74 6572 275d 203d  'orderFilter'] =
+00036810: 2027 5374 6f70 4f72 6465 7227 2069 6620   'StopOrder' if 
+00036820: 6973 5374 6f70 2065 6c73 6520 274f 7264  isStop else 'Ord
+00036830: 6572 270a 2020 2020 2020 2020 6966 2069  er'.        if i
+00036840: 6420 6973 206e 6f74 204e 6f6e 653a 2020  d is not None:  
+00036850: 2320 5468 6520 7573 6572 2063 616e 2061  # The user can a
+00036860: 6c73 6f20 7573 6520 6172 6775 6d65 6e74  lso use argument
+00036870: 2070 6172 616d 735b 226f 7264 6572 4c69   params["orderLi
+00036880: 6e6b 4964 225d 0a20 2020 2020 2020 2020  nkId"].         
+00036890: 2020 2072 6571 7565 7374 5b27 6f72 6465     request['orde
+000368a0: 7249 6427 5d20 3d20 6964 0a20 2020 2020  rId'] = id.     
+000368b0: 2020 2069 6620 6d61 726b 6574 5b27 6f70     if market['op
+000368c0: 7469 6f6e 275d 3a0a 2020 2020 2020 2020  tion']:.        
+000368d0: 2020 2020 7265 7175 6573 745b 2763 6174      request['cat
+000368e0: 6567 6f72 7927 5d20 3d20 276f 7074 696f  egory'] = 'optio
+000368f0: 6e27 0a20 2020 2020 2020 2065 6c69 6620  n'.        elif 
+00036900: 6d61 726b 6574 5b27 6c69 6e65 6172 275d  market['linear']
+00036910: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00036920: 7175 6573 745b 2763 6174 6567 6f72 7927  quest['category'
+00036930: 5d20 3d20 276c 696e 6561 7227 0a20 2020  ] = 'linear'.   
+00036940: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00036950: 2020 2020 2020 2072 6169 7365 204e 6f74         raise Not
+00036960: 5375 7070 6f72 7465 6428 7365 6c66 2e69  Supported(self.i
+00036970: 6420 2b20 2720 6361 6e63 656c 556e 6966  d + ' cancelUnif
+00036980: 6965 644d 6172 6769 6e4f 7264 6572 2829  iedMarginOrder()
+00036990: 2064 6f65 7320 6e6f 7420 616c 6c6f 7720   does not allow 
+000369a0: 696e 7665 7273 6520 6d61 726b 6574 206f  inverse market o
+000369b0: 7264 6572 7320 666f 7220 2720 2b20 7379  rders for ' + sy
+000369c0: 6d62 6f6c 202b 2027 206d 6172 6b65 7473  mbol + ' markets
+000369d0: 2729 0a20 2020 2020 2020 2072 6573 706f  ').        respo
+000369e0: 6e73 6520 3d20 6177 6169 7420 7365 6c66  nse = await self
+000369f0: 2e70 7269 7661 7465 506f 7374 556e 6966  .privatePostUnif
+00036a00: 6965 6456 3350 7269 7661 7465 4f72 6465  iedV3PrivateOrde
+00036a10: 7243 616e 6365 6c28 7365 6c66 2e65 7874  rCancel(self.ext
+00036a20: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
+00036a30: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
+00036a40: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+00036a50: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00036a60: 2020 2272 6574 436f 6465 223a 2030 2c0a    "retCode": 0,.
+00036a70: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00036a80: 2020 2272 6574 4d73 6722 3a20 224f 4b22    "retMsg": "OK"
+00036a90: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00036aa0: 2020 2020 2272 6573 756c 7422 3a20 7b0a      "result": {.
+00036ab0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00036ac0: 2020 2020 2020 226f 7264 6572 4964 223a        "orderId":
+00036ad0: 2022 3432 6338 3664 3636 3333 3165 3431   "42c86d66331e41
+00036ae0: 3939 3864 3132 6332 3434 3063 6539 3063  998d12c2440ce90c
+00036af0: 3161 222c 0a20 2020 2020 2020 2023 2020  1a",.        #  
+00036b00: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
+00036b10: 724c 696e 6b49 6422 3a20 2265 3830 6435  rLinkId": "e80d5
+00036b20: 3538 652d 6564 220a 2020 2020 2020 2020  58e-ed".        
+00036b30: 2320 2020 2020 2020 2020 7d0a 2020 2020  #         }.    
+00036b40: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+00036b50: 2020 2020 230a 2020 2020 2020 2020 7265      #.        re
+00036b60: 7375 6c74 203d 2073 656c 662e 7361 6665  sult = self.safe
+00036b70: 5f76 616c 7565 2872 6573 706f 6e73 652c  _value(response,
+00036b80: 2027 7265 7375 6c74 272c 207b 7d29 0a20   'result', {}). 
+00036b90: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00036ba0: 6c66 2e70 6172 7365 5f6f 7264 6572 2872  lf.parse_order(r
+00036bb0: 6573 756c 742c 206d 6172 6b65 7429 0a0a  esult, market)..
+00036bc0: 2020 2020 6173 796e 6320 6465 6620 6361      async def ca
+00036bd0: 6e63 656c 5f75 7364 635f 6f72 6465 7228  ncel_usdc_order(
+00036be0: 7365 6c66 2c20 6964 3a20 7374 722c 2073  self, id: str, s
+00036bf0: 796d 626f 6c3a 204f 7074 696f 6e61 6c5b  ymbol: Optional[
+00036c00: 7374 725d 203d 204e 6f6e 652c 2070 6172  str] = None, par
+00036c10: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
+00036c20: 2069 6620 7379 6d62 6f6c 2069 7320 4e6f   if symbol is No
+00036c30: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+00036c40: 7261 6973 6520 4172 6775 6d65 6e74 7352  raise ArgumentsR
+00036c50: 6571 7569 7265 6428 7365 6c66 2e69 6420  equired(self.id 
+00036c60: 2b20 2720 6361 6e63 656c 5553 4443 4f72  + ' cancelUSDCOr
+00036c70: 6465 7228 2920 7265 7175 6972 6573 2061  der() requires a
+00036c80: 2073 796d 626f 6c20 6172 6775 6d65 6e74   symbol argument
+00036c90: 2729 0a20 2020 2020 2020 2061 7761 6974  ').        await
+00036ca0: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
+00036cb0: 7473 2829 0a20 2020 2020 2020 206d 6172  ts().        mar
+00036cc0: 6b65 7420 3d20 7365 6c66 2e6d 6172 6b65  ket = self.marke
+00036cd0: 7428 7379 6d62 6f6c 290a 2020 2020 2020  t(symbol).      
+00036ce0: 2020 7265 7175 6573 7420 3d20 7b0a 2020    request = {.  
+00036cf0: 2020 2020 2020 2020 2020 2773 796d 626f            'symbo
+00036d00: 6c27 3a20 6d61 726b 6574 5b27 6964 275d  l': market['id']
+00036d10: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+00036d20: 276f 7264 6572 4c69 6e6b 4964 273a 2027  'orderLinkId': '
+00036d30: 7374 7269 6e67 272c 2020 2320 6f6e 6520  string',  # one 
+00036d40: 6f66 206f 7264 6572 5f69 642c 2073 746f  of order_id, sto
+00036d50: 705f 6f72 6465 725f 6964 206f 7220 6f72  p_order_id or or
+00036d60: 6465 725f 6c69 6e6b 5f69 6420 6973 2072  der_link_id is r
+00036d70: 6571 7569 7265 640a 2020 2020 2020 2020  equired.        
+00036d80: 2020 2020 2320 276f 7264 6572 4964 273a      # 'orderId':
+00036d90: 2069 642c 0a20 2020 2020 2020 207d 0a20   id,.        }. 
+00036da0: 2020 2020 2020 2069 7353 746f 7020 3d20         isStop = 
+00036db0: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
+00036dc0: 7061 7261 6d73 2c20 2773 746f 7027 2c20  params, 'stop', 
+00036dd0: 4661 6c73 6529 0a20 2020 2020 2020 2070  False).        p
+00036de0: 6172 616d 7320 3d20 7365 6c66 2e6f 6d69  arams = self.omi
+00036df0: 7428 7061 7261 6d73 2c20 5b27 7374 6f70  t(params, ['stop
+00036e00: 275d 290a 2020 2020 2020 2020 6d65 7468  ']).        meth
+00036e10: 6f64 203d 204e 6f6e 650a 2020 2020 2020  od = None.      
+00036e20: 2020 6966 2069 6420 6973 206e 6f74 204e    if id is not N
+00036e30: 6f6e 653a 2020 2320 5468 6520 7573 6572  one:  # The user
+00036e40: 2063 616e 2061 6c73 6f20 7573 6520 6172   can also use ar
+00036e50: 6775 6d65 6e74 2070 6172 616d 735b 226f  gument params["o
+00036e60: 7264 6572 5f6c 696e 6b5f 6964 225d 0a20  rder_link_id"]. 
+00036e70: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+00036e80: 7374 5b27 6f72 6465 7249 6427 5d20 3d20  st['orderId'] = 
+00036e90: 6964 0a20 2020 2020 2020 2069 6620 6d61  id.        if ma
+00036ea0: 726b 6574 5b27 6f70 7469 6f6e 275d 3a0a  rket['option']:.
+00036eb0: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
+00036ec0: 6f64 203d 2027 7072 6976 6174 6550 6f73  od = 'privatePos
+00036ed0: 744f 7074 696f 6e55 7364 634f 7065 6e61  tOptionUsdcOpena
+00036ee0: 7069 5072 6976 6174 6556 3143 616e 6365  piPrivateV1Cance
+00036ef0: 6c4f 7264 6572 270a 2020 2020 2020 2020  lOrder'.        
+00036f00: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00036f10: 2020 6d65 7468 6f64 203d 2027 7072 6976    method = 'priv
+00036f20: 6174 6550 6f73 7450 6572 7065 7475 616c  atePostPerpetual
+00036f30: 5573 6463 4f70 656e 6170 6950 7269 7661  UsdcOpenapiPriva
+00036f40: 7465 5631 4361 6e63 656c 4f72 6465 7227  teV1CancelOrder'
+00036f50: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+00036f60: 7565 7374 5b27 6f72 6465 7246 696c 7465  uest['orderFilte
+00036f70: 7227 5d20 3d20 2753 746f 704f 7264 6572  r'] = 'StopOrder
+00036f80: 2720 6966 2069 7353 746f 7020 656c 7365  ' if isStop else
+00036f90: 2027 4f72 6465 7227 0a20 2020 2020 2020   'Order'.       
+00036fa0: 2072 6573 706f 6e73 6520 3d20 6177 6169   response = awai
+00036fb0: 7420 6765 7461 7474 7228 7365 6c66 2c20  t getattr(self, 
+00036fc0: 6d65 7468 6f64 2928 7365 6c66 2e65 7874  method)(self.ext
+00036fd0: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
+00036fe0: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
+00036ff0: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+00037000: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00037010: 2020 2272 6574 436f 6465 223a 2030 2c0a    "retCode": 0,.
+00037020: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00037030: 2020 2272 6574 4d73 6722 3a20 224f 4b22    "retMsg": "OK"
+00037040: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00037050: 2020 2020 2272 6573 756c 7422 3a20 7b0a      "result": {.
+00037060: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00037070: 2020 2020 2020 226f 7574 5265 7175 6573        "outReques
+00037080: 7449 6422 3a20 2222 2c0a 2020 2020 2020  tId": "",.      
+00037090: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+000370a0: 2273 796d 626f 6c22 3a20 2242 5443 2d31  "symbol": "BTC-1
+000370b0: 334d 4159 3232 2d34 3030 3030 2d43 222c  3MAY22-40000-C",
+000370c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000370d0: 2020 2020 2020 2022 6f72 6465 7249 6422         "orderId"
+000370e0: 3a20 2238 6336 3564 6639 312d 3931 6663  : "8c65df91-91fc
+000370f0: 2d34 3631 642d 3962 3134 2d37 3836 3337  -461d-9b14-78637
+00037100: 3965 6631 3338 6322 2c0a 2020 2020 2020  9ef138c",.      
+00037110: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00037120: 226f 7264 6572 4c69 6e6b 4964 223a 2022  "orderLinkId": "
+00037130: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
+00037140: 2020 2020 7d2c 0a20 2020 2020 2020 2023      },.        #
+00037150: 2020 2020 2020 2020 2022 7265 7445 7874           "retExt
+00037160: 4d61 7022 3a20 7b7d 0a20 2020 2020 2020  Map": {}.       
+00037170: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
+00037180: 2023 0a20 2020 2020 2020 2072 6573 756c   #.        resul
+00037190: 7420 3d20 7365 6c66 2e73 6166 655f 7661  t = self.safe_va
+000371a0: 6c75 6528 7265 7370 6f6e 7365 2c20 2772  lue(response, 'r
+000371b0: 6573 756c 7427 2c20 7b7d 290a 2020 2020  esult', {}).    
+000371c0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+000371d0: 7061 7273 655f 6f72 6465 7228 7265 7375  parse_order(resu
+000371e0: 6c74 2c20 6d61 726b 6574 290a 0a20 2020  lt, market)..   
+000371f0: 2061 7379 6e63 2064 6566 2063 616e 6365   async def cance
+00037200: 6c5f 6465 7269 7661 7469 7665 735f 6f72  l_derivatives_or
+00037210: 6465 7228 7365 6c66 2c20 6964 3a20 7374  der(self, id: st
+00037220: 722c 2073 796d 626f 6c3a 204f 7074 696f  r, symbol: Optio
+00037230: 6e61 6c5b 7374 725d 203d 204e 6f6e 652c  nal[str] = None,
+00037240: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
+00037250: 2020 2020 2069 6620 7379 6d62 6f6c 2069       if symbol i
+00037260: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+00037270: 2020 2020 7261 6973 6520 4172 6775 6d65      raise Argume
+00037280: 6e74 7352 6571 7569 7265 6428 7365 6c66  ntsRequired(self
+00037290: 2e69 6420 2b20 2720 6361 6e63 656c 4465  .id + ' cancelDe
+000372a0: 7269 7661 7469 7665 734f 7264 6572 2829  rivativesOrder()
+000372b0: 2072 6571 7569 7265 7320 6120 7379 6d62   requires a symb
+000372c0: 6f6c 2061 7267 756d 656e 7427 290a 2020  ol argument').  
+000372d0: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
+000372e0: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
+000372f0: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
+00037300: 2073 656c 662e 6d61 726b 6574 2873 796d   self.market(sym
+00037310: 626f 6c29 0a20 2020 2020 2020 2072 6571  bol).        req
+00037320: 7565 7374 203d 207b 0a20 2020 2020 2020  uest = {.       
+00037330: 2020 2020 2027 7379 6d62 6f6c 273a 206d       'symbol': m
+00037340: 6172 6b65 745b 2769 6427 5d2c 0a20 2020  arket['id'],.   
+00037350: 2020 2020 2020 2020 2027 6f72 6465 7249           'orderI
+00037360: 6427 3a20 6964 2c0a 2020 2020 2020 2020  d': id,.        
+00037370: 7d0a 2020 2020 2020 2020 7265 7370 6f6e  }.        respon
+00037380: 7365 203d 2061 7761 6974 2073 656c 662e  se = await self.
+00037390: 7072 6976 6174 6550 6f73 7443 6f6e 7472  privatePostContr
+000373a0: 6163 7456 3350 7269 7661 7465 4f72 6465  actV3PrivateOrde
+000373b0: 7243 616e 6365 6c28 7365 6c66 2e65 7874  rCancel(self.ext
+000373c0: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
+000373d0: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
+000373e0: 2020 2020 2020 2020 2320 636f 6e74 7261          # contra
+000373f0: 6374 2076 330a 2020 2020 2020 2020 230a  ct v3.        #.
+00037400: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+00037410: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00037420: 2020 2272 6574 436f 6465 223a 302c 0a20    "retCode":0,. 
+00037430: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00037440: 2022 7265 744d 7367 223a 224f 4b22 2c0a   "retMsg":"OK",.
+00037450: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00037460: 2020 2272 6573 756c 7422 3a7b 0a20 2020    "result":{.   
+00037470: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00037480: 2020 2022 6f72 6465 7249 6422 3a20 2234     "orderId": "4
+00037490: 3033 3034 3330 642d 3164 6261 2d34 3133  030430d-1dba-413
+000374a0: 342d 6163 3737 2d33 6438 3163 3134 6161  4-ac77-3d81c14aa
+000374b0: 6130 3022 2c0a 2020 2020 2020 2020 2320  a00",.        # 
+000374c0: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+000374d0: 6572 4c69 6e6b 4964 223a 2022 220a 2020  erLinkId": "".  
+000374e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000374f0: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
+00037500: 2020 2020 2022 7265 7445 7874 496e 666f       "retExtInfo
+00037510: 223a 6e75 6c6c 2c0a 2020 2020 2020 2020  ":null,.        
+00037520: 2320 2020 2020 2020 2020 2274 696d 6522  #         "time"
+00037530: 3a31 3635 3838 3530 3332 3138 3631 0a20  :1658850321861. 
+00037540: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+00037550: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+00037560: 2072 6573 756c 7420 3d20 7365 6c66 2e73   result = self.s
+00037570: 6166 655f 7661 6c75 6528 7265 7370 6f6e  afe_value(respon
+00037580: 7365 2c20 2772 6573 756c 7427 2c20 7b7d  se, 'result', {}
+00037590: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+000375a0: 2073 656c 662e 7061 7273 655f 6f72 6465   self.parse_orde
+000375b0: 7228 7265 7375 6c74 2c20 6d61 726b 6574  r(result, market
+000375c0: 290a 0a20 2020 2061 7379 6e63 2064 6566  )..    async def
+000375d0: 2063 616e 6365 6c5f 6f72 6465 7228 7365   cancel_order(se
+000375e0: 6c66 2c20 6964 3a20 7374 722c 2073 796d  lf, id: str, sym
+000375f0: 626f 6c3a 204f 7074 696f 6e61 6c5b 7374  bol: Optional[st
+00037600: 725d 203d 204e 6f6e 652c 2070 6172 616d  r] = None, param
+00037610: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
+00037620: 2222 0a20 2020 2020 2020 2063 616e 6365  "".        cance
+00037630: 6c73 2061 6e20 6f70 656e 206f 7264 6572  ls an open order
+00037640: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00037650: 7374 7220 6964 3a20 6f72 6465 7220 6964  str id: order id
+00037660: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00037670: 7374 7220 7379 6d62 6f6c 3a20 756e 6966  str symbol: unif
+00037680: 6965 6420 7379 6d62 6f6c 206f 6620 7468  ied symbol of th
+00037690: 6520 6d61 726b 6574 2074 6865 206f 7264  e market the ord
+000376a0: 6572 2077 6173 206d 6164 6520 696e 0a20  er was made in. 
+000376b0: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
+000376c0: 6374 2070 6172 616d 733a 2065 7874 7261  ct params: extra
+000376d0: 2070 6172 616d 6574 6572 7320 7370 6563   parameters spec
+000376e0: 6966 6963 2074 6f20 7468 6520 6279 6269  ific to the bybi
+000376f0: 7420 6170 6920 656e 6470 6f69 6e74 0a20  t api endpoint. 
+00037700: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
+00037710: 6469 6374 3a20 416e 2060 6f72 6465 7220  dict: An `order 
+00037720: 7374 7275 6374 7572 6520 3c68 7474 7073  structure <https
+00037730: 3a2f 2f64 6f63 732e 6363 7874 2e63 6f6d  ://docs.ccxt.com
+00037740: 2f23 2f3f 6964 3d6f 7264 6572 2d73 7472  /#/?id=order-str
+00037750: 7563 7475 7265 3e60 0a20 2020 2020 2020  ucture>`.       
+00037760: 2022 2222 0a20 2020 2020 2020 2069 6620   """.        if 
+00037770: 7379 6d62 6f6c 2069 7320 4e6f 6e65 3a0a  symbol is None:.
+00037780: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00037790: 6520 4172 6775 6d65 6e74 7352 6571 7569  e ArgumentsRequi
+000377a0: 7265 6428 7365 6c66 2e69 6420 2b20 2720  red(self.id + ' 
+000377b0: 6361 6e63 656c 4f72 6465 7228 2920 7265  cancelOrder() re
+000377c0: 7175 6972 6573 2061 2073 796d 626f 6c20  quires a symbol 
+000377d0: 6172 6775 6d65 6e74 2729 0a20 2020 2020  argument').     
+000377e0: 2020 2061 7761 6974 2073 656c 662e 6c6f     await self.lo
+000377f0: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
+00037800: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
+00037810: 6c66 2e6d 6172 6b65 7428 7379 6d62 6f6c  lf.market(symbol
+00037820: 290a 2020 2020 2020 2020 656e 6162 6c65  ).        enable
+00037830: 556e 6966 6965 644d 6172 6769 6e2c 2065  UnifiedMargin, e
+00037840: 6e61 626c 6555 6e69 6669 6564 4163 636f  nableUnifiedAcco
+00037850: 756e 7420 3d20 6177 6169 7420 7365 6c66  unt = await self
+00037860: 2e69 735f 756e 6966 6965 645f 656e 6162  .is_unified_enab
+00037870: 6c65 6428 290a 2020 2020 2020 2020 6973  led().        is
+00037880: 5573 6463 5365 7474 6c65 6420 3d20 6d61  UsdcSettled = ma
+00037890: 726b 6574 5b27 7365 7474 6c65 275d 203d  rket['settle'] =
+000378a0: 3d20 2755 5344 4327 0a20 2020 2020 2020  = 'USDC'.       
+000378b0: 2069 6620 656e 6162 6c65 556e 6966 6965   if enableUnifie
+000378c0: 6441 6363 6f75 6e74 3a0a 2020 2020 2020  dAccount:.      
+000378d0: 2020 2020 2020 7265 7475 726e 2061 7761        return awa
+000378e0: 6974 2073 656c 662e 6361 6e63 656c 5f75  it self.cancel_u
+000378f0: 6e69 6669 6564 5f61 6363 6f75 6e74 5f6f  nified_account_o
+00037900: 7264 6572 2869 642c 2073 796d 626f 6c2c  rder(id, symbol,
+00037910: 2070 6172 616d 7329 0a20 2020 2020 2020   params).       
+00037920: 2065 6c69 6620 6d61 726b 6574 5b27 7370   elif market['sp
+00037930: 6f74 275d 3a0a 2020 2020 2020 2020 2020  ot']:.          
+00037940: 2020 7265 7475 726e 2061 7761 6974 2073    return await s
+00037950: 656c 662e 6361 6e63 656c 5f73 706f 745f  elf.cancel_spot_
+00037960: 6f72 6465 7228 6964 2c20 7379 6d62 6f6c  order(id, symbol
+00037970: 2c20 7061 7261 6d73 290a 2020 2020 2020  , params).      
+00037980: 2020 656c 6966 2065 6e61 626c 6555 6e69    elif enableUni
+00037990: 6669 6564 4d61 7267 696e 2061 6e64 206e  fiedMargin and n
+000379a0: 6f74 206d 6172 6b65 745b 2769 6e76 6572  ot market['inver
+000379b0: 7365 275d 3a0a 2020 2020 2020 2020 2020  se']:.          
+000379c0: 2020 7265 7475 726e 2061 7761 6974 2073    return await s
+000379d0: 656c 662e 6361 6e63 656c 5f75 6e69 6669  elf.cancel_unifi
+000379e0: 6564 5f6d 6172 6769 6e5f 6f72 6465 7228  ed_margin_order(
+000379f0: 6964 2c20 7379 6d62 6f6c 2c20 7061 7261  id, symbol, para
+00037a00: 6d73 290a 2020 2020 2020 2020 656c 6966  ms).        elif
+00037a10: 2069 7355 7364 6353 6574 746c 6564 3a0a   isUsdcSettled:.
+00037a20: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00037a30: 726e 2061 7761 6974 2073 656c 662e 6361  rn await self.ca
+00037a40: 6e63 656c 5f75 7364 635f 6f72 6465 7228  ncel_usdc_order(
+00037a50: 6964 2c20 7379 6d62 6f6c 2c20 7061 7261  id, symbol, para
+00037a60: 6d73 290a 2020 2020 2020 2020 7265 7475  ms).        retu
+00037a70: 726e 2061 7761 6974 2073 656c 662e 6361  rn await self.ca
+00037a80: 6e63 656c 5f64 6572 6976 6174 6976 6573  ncel_derivatives
+00037a90: 5f6f 7264 6572 2869 642c 2073 796d 626f  _order(id, symbo
+00037aa0: 6c2c 2070 6172 616d 7329 0a0a 2020 2020  l, params)..    
+00037ab0: 6173 796e 6320 6465 6620 6361 6e63 656c  async def cancel
+00037ac0: 5f61 6c6c 5f75 6e69 6669 6564 5f61 6363  _all_unified_acc
+00037ad0: 6f75 6e74 5f6f 7264 6572 7328 7365 6c66  ount_orders(self
+00037ae0: 2c20 7379 6d62 6f6c 3a20 4f70 7469 6f6e  , symbol: Option
+00037af0: 616c 5b73 7472 5d20 3d20 4e6f 6e65 2c20  al[str] = None, 
+00037b00: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
+00037b10: 2020 2020 6177 6169 7420 7365 6c66 2e6c      await self.l
+00037b20: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
+00037b30: 2020 2020 2020 6d61 726b 6574 203d 204e        market = N
+00037b40: 6f6e 650a 2020 2020 2020 2020 7365 7474  one.        sett
+00037b50: 6c65 203d 204e 6f6e 650a 2020 2020 2020  le = None.      
+00037b60: 2020 7479 7065 203d 204e 6f6e 650a 2020    type = None.  
+00037b70: 2020 2020 2020 7375 6254 7970 6520 3d20        subType = 
+00037b80: 4e6f 6e65 0a20 2020 2020 2020 2072 6571  None.        req
+00037b90: 7565 7374 203d 207b 7d0a 2020 2020 2020  uest = {}.      
+00037ba0: 2020 6966 2073 796d 626f 6c20 6973 206e    if symbol is n
+00037bb0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00037bc0: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
+00037bd0: 6c66 2e6d 6172 6b65 7428 7379 6d62 6f6c  lf.market(symbol
+00037be0: 290a 2020 2020 2020 2020 2020 2020 7365  ).            se
+00037bf0: 7474 6c65 203d 206d 6172 6b65 745b 2773  ttle = market['s
+00037c00: 6574 746c 6527 5d0a 2020 2020 2020 2020  ettle'].        
+00037c10: 2020 2020 7265 7175 6573 745b 2773 796d      request['sym
+00037c20: 626f 6c27 5d20 3d20 6d61 726b 6574 5b27  bol'] = market['
+00037c30: 6964 275d 0a20 2020 2020 2020 2065 6c73  id'].        els
+00037c40: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
+00037c50: 6574 746c 652c 2070 6172 616d 7320 3d20  ettle, params = 
+00037c60: 7365 6c66 2e68 616e 646c 655f 6f70 7469  self.handle_opti
+00037c70: 6f6e 5f61 6e64 5f70 6172 616d 7328 7061  on_and_params(pa
+00037c80: 7261 6d73 2c20 2763 616e 6365 6c41 6c6c  rams, 'cancelAll
+00037c90: 4f72 6465 7273 272c 2027 7365 7474 6c65  Orders', 'settle
+00037ca0: 272c 2027 5553 4454 2729 0a20 2020 2020  ', 'USDT').     
+00037cb0: 2020 2074 7970 652c 2070 6172 616d 7320     type, params 
+00037cc0: 3d20 7365 6c66 2e68 616e 646c 655f 6d61  = self.handle_ma
+00037cd0: 726b 6574 5f74 7970 655f 616e 645f 7061  rket_type_and_pa
+00037ce0: 7261 6d73 2827 6361 6e63 656c 416c 6c4f  rams('cancelAllO
+00037cf0: 7264 6572 7327 2c20 6d61 726b 6574 2c20  rders', market, 
+00037d00: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
+00037d10: 7375 6254 7970 652c 2070 6172 616d 7320  subType, params 
+00037d20: 3d20 7365 6c66 2e68 616e 646c 655f 7375  = self.handle_su
+00037d30: 625f 7479 7065 5f61 6e64 5f70 6172 616d  b_type_and_param
+00037d40: 7328 2763 616e 6365 6c41 6c6c 4f72 6465  s('cancelAllOrde
+00037d50: 7273 272c 206d 6172 6b65 742c 2070 6172  rs', market, par
+00037d60: 616d 732c 2027 6c69 6e65 6172 2729 0a20  ams, 'linear'). 
+00037d70: 2020 2020 2020 2069 6620 7479 7065 203d         if type =
+00037d80: 3d20 2773 706f 7427 3a0a 2020 2020 2020  = 'spot':.      
+00037d90: 2020 2020 2020 7265 7175 6573 745b 2763        request['c
+00037da0: 6174 6567 6f72 7927 5d20 3d20 2773 706f  ategory'] = 'spo
+00037db0: 7427 0a20 2020 2020 2020 2065 6c69 6620  t'.        elif 
+00037dc0: 7479 7065 203d 3d20 276f 7074 696f 6e27  type == 'option'
+00037dd0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00037de0: 7175 6573 745b 2763 6174 6567 6f72 7927  quest['category'
+00037df0: 5d20 3d20 276f 7074 696f 6e27 0a20 2020  ] = 'option'.   
+00037e00: 2020 2020 2065 6c69 6620 7375 6254 7970       elif subTyp
+00037e10: 6520 3d3d 2027 6c69 6e65 6172 273a 0a20  e == 'linear':. 
+00037e20: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+00037e30: 7374 5b27 6361 7465 676f 7279 275d 203d  st['category'] =
+00037e40: 2027 6c69 6e65 6172 270a 2020 2020 2020   'linear'.      
+00037e50: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00037e60: 2020 2020 7261 6973 6520 4e6f 7453 7570      raise NotSup
+00037e70: 706f 7274 6564 2873 656c 662e 6964 202b  ported(self.id +
+00037e80: 2027 2063 616e 6365 6c41 6c6c 4f72 6465   ' cancelAllOrde
+00037e90: 7273 2829 2064 6f65 7320 6e6f 7420 616c  rs() does not al
+00037ea0: 6c6f 7720 696e 7665 7273 6520 6d61 726b  low inverse mark
+00037eb0: 6574 206f 7264 6572 7320 666f 7220 2720  et orders for ' 
+00037ec0: 2b20 7479 7065 202b 2027 206d 6172 6b65  + type + ' marke
+00037ed0: 7473 2729 0a20 2020 2020 2020 2072 6571  ts').        req
+00037ee0: 7565 7374 5b27 7365 7474 6c65 436f 696e  uest['settleCoin
+00037ef0: 275d 203d 2073 6574 746c 650a 2020 2020  '] = settle.    
+00037f00: 2020 2020 6973 5374 6f70 203d 2073 656c      isStop = sel
+00037f10: 662e 7361 6665 5f76 616c 7565 2870 6172  f.safe_value(par
+00037f20: 616d 732c 2027 7374 6f70 272c 2046 616c  ams, 'stop', Fal
+00037f30: 7365 290a 2020 2020 2020 2020 7061 7261  se).        para
+00037f40: 6d73 203d 2073 656c 662e 6f6d 6974 2870  ms = self.omit(p
+00037f50: 6172 616d 732c 205b 2773 746f 7027 5d29  arams, ['stop'])
+00037f60: 0a20 2020 2020 2020 2069 6620 6973 5374  .        if isSt
+00037f70: 6f70 3a0a 2020 2020 2020 2020 2020 2020  op:.            
+00037f80: 7265 7175 6573 745b 276f 7264 6572 4669  request['orderFi
+00037f90: 6c74 6572 275d 203d 2027 7470 736c 4f72  lter'] = 'tpslOr
+00037fa0: 6465 7227 0a20 2020 2020 2020 2072 6573  der'.        res
+00037fb0: 706f 6e73 6520 3d20 6177 6169 7420 7365  ponse = await se
+00037fc0: 6c66 2e70 7269 7661 7465 506f 7374 5635  lf.privatePostV5
+00037fd0: 4f72 6465 7243 616e 6365 6c41 6c6c 2873  OrderCancelAll(s
+00037fe0: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
+00037ff0: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
+00038000: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+00038010: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+00038020: 2020 2020 2020 2020 2022 7265 7443 6f64           "retCod
+00038030: 6522 3a20 302c 0a20 2020 2020 2020 2023  e": 0,.        #
+00038040: 2020 2020 2020 2020 2022 7265 744d 7367           "retMsg
+00038050: 223a 2022 4f4b 222c 0a20 2020 2020 2020  ": "OK",.       
+00038060: 2023 2020 2020 2020 2020 2022 7265 7375   #         "resu
+00038070: 6c74 223a 207b 0a20 2020 2020 2020 2023  lt": {.        #
+00038080: 2020 2020 2020 2020 2020 2020 2022 6c69               "li
+00038090: 7374 223a 205b 0a20 2020 2020 2020 2023  st": [.        #
+000380a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000380b0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+000380c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000380d0: 2022 6f72 6465 7249 6422 3a20 2266 3661   "orderId": "f6a
+000380e0: 3733 6531 662d 3339 6235 2d34 6465 652d  73e1f-39b5-4dee-
+000380f0: 6166 3231 2d31 3436 3062 3265 3362 3237  af21-1460b2e3b27
+00038100: 6322 2c0a 2020 2020 2020 2020 2320 2020  c",.        #   
+00038110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038120: 2020 226f 7264 6572 4c69 6e6b 4964 223a    "orderLinkId":
+00038130: 2022 6130 3031 220a 2020 2020 2020 2020   "a001".        
+00038140: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00038150: 2020 7d0a 2020 2020 2020 2020 2320 2020    }.        #   
+00038160: 2020 2020 2020 2020 2020 5d0a 2020 2020            ].    
+00038170: 2020 2020 2320 2020 2020 2020 2020 7d2c      #         },
+00038180: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00038190: 2020 2022 7265 7445 7874 496e 666f 223a     "retExtInfo":
+000381a0: 207b 7d2c 0a20 2020 2020 2020 2023 2020   {},.        #  
+000381b0: 2020 2020 2020 2022 7469 6d65 223a 2031         "time": 1
+000381c0: 3637 3232 3139 3738 3034 3633 0a20 2020  672219780463.   
+000381d0: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
+000381e0: 2020 2020 2023 0a20 2020 2020 2020 2072       #.        r
+000381f0: 6573 756c 7420 3d20 7365 6c66 2e73 6166  esult = self.saf
+00038200: 655f 7661 6c75 6528 7265 7370 6f6e 7365  e_value(response
+00038210: 2c20 2772 6573 756c 7427 2c20 5b5d 290a  , 'result', []).
+00038220: 2020 2020 2020 2020 6f72 6465 7273 203d          orders =
+00038230: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+00038240: 2872 6573 756c 742c 2027 6c69 7374 2729  (result, 'list')
+00038250: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+00038260: 6973 696e 7374 616e 6365 286f 7264 6572  isinstance(order
+00038270: 732c 206c 6973 7429 3a0a 2020 2020 2020  s, list):.      
+00038280: 2020 2020 2020 7265 7475 726e 2072 6573        return res
+00038290: 706f 6e73 650a 2020 2020 2020 2020 7265  ponse.        re
+000382a0: 7475 726e 2073 656c 662e 7061 7273 655f  turn self.parse_
+000382b0: 6f72 6465 7273 286f 7264 6572 732c 206d  orders(orders, m
+000382c0: 6172 6b65 7429 0a0a 2020 2020 6173 796e  arket)..    asyn
+000382d0: 6320 6465 6620 6361 6e63 656c 5f61 6c6c  c def cancel_all
+000382e0: 5f73 706f 745f 6f72 6465 7273 2873 656c  _spot_orders(sel
+000382f0: 662c 2073 796d 626f 6c3a 204f 7074 696f  f, symbol: Optio
+00038300: 6e61 6c5b 7374 725d 203d 204e 6f6e 652c  nal[str] = None,
+00038310: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
+00038320: 2020 2020 2069 6620 7379 6d62 6f6c 2069       if symbol i
+00038330: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+00038340: 2020 2020 7261 6973 6520 4172 6775 6d65      raise Argume
+00038350: 6e74 7352 6571 7569 7265 6428 7365 6c66  ntsRequired(self
+00038360: 2e69 6420 2b20 2720 6361 6e63 656c 416c  .id + ' cancelAl
+00038370: 6c53 706f 744f 7264 6572 7328 2920 7265  lSpotOrders() re
+00038380: 7175 6972 6573 2061 2073 796d 626f 6c20  quires a symbol 
+00038390: 6172 6775 6d65 6e74 2729 0a20 2020 2020  argument').     
+000383a0: 2020 2061 7761 6974 2073 656c 662e 6c6f     await self.lo
+000383b0: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
+000383c0: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
+000383d0: 6c66 2e6d 6172 6b65 7428 7379 6d62 6f6c  lf.market(symbol
+000383e0: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
+000383f0: 7420 3d20 7b0a 2020 2020 2020 2020 2020  t = {.          
+00038400: 2020 2773 796d 626f 6c27 3a20 6d61 726b    'symbol': mark
+00038410: 6574 5b27 6964 275d 2c0a 2020 2020 2020  et['id'],.      
+00038420: 2020 7d0a 2020 2020 2020 2020 7265 7370    }.        resp
+00038430: 6f6e 7365 203d 2061 7761 6974 2073 656c  onse = await sel
+00038440: 662e 7072 6976 6174 6544 656c 6574 6553  f.privateDeleteS
+00038450: 706f 744f 7264 6572 4261 7463 6843 616e  potOrderBatchCan
+00038460: 6365 6c28 7365 6c66 2e65 7874 656e 6428  cel(self.extend(
+00038470: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
+00038480: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
+00038490: 2020 2020 2320 2020 207b 0a20 2020 2020      #    {.     
+000384a0: 2020 2023 2020 2020 2020 2020 2272 6574     #        "ret
+000384b0: 5f63 6f64 6522 3a20 302c 0a20 2020 2020  _code": 0,.     
+000384c0: 2020 2023 2020 2020 2020 2020 2272 6574     #        "ret
+000384d0: 5f6d 7367 223a 2022 222c 0a20 2020 2020  _msg": "",.     
+000384e0: 2020 2023 2020 2020 2020 2020 2265 7874     #        "ext
+000384f0: 5f63 6f64 6522 3a20 6e75 6c6c 2c0a 2020  _code": null,.  
+00038500: 2020 2020 2020 2320 2020 2020 2020 2022        #        "
+00038510: 6578 745f 696e 666f 223a 206e 756c 6c2c  ext_info": null,
+00038520: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00038530: 2020 2272 6573 756c 7422 3a20 7b0a 2020    "result": {.  
+00038540: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00038550: 2020 2022 7375 6363 6573 7322 3a20 5472     "success": Tr
+00038560: 7565 0a20 2020 2020 2020 2023 2020 2020  ue.        #    
+00038570: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
+00038580: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
+00038590: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
+000385a0: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
+000385b0: 7265 7370 6f6e 7365 2c20 2772 6573 756c  response, 'resul
+000385c0: 7427 2c20 5b5d 290a 2020 2020 2020 2020  t', []).        
+000385d0: 6966 206e 6f74 2069 7369 6e73 7461 6e63  if not isinstanc
+000385e0: 6528 7265 7375 6c74 2c20 6c69 7374 293a  e(result, list):
+000385f0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00038600: 7572 6e20 7265 7370 6f6e 7365 0a20 2020  urn response.   
+00038610: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00038620: 2e70 6172 7365 5f6f 7264 6572 7328 7265  .parse_orders(re
+00038630: 7375 6c74 2c20 6d61 726b 6574 290a 0a20  sult, market).. 
+00038640: 2020 2061 7379 6e63 2064 6566 2063 616e     async def can
+00038650: 6365 6c5f 616c 6c5f 756e 6966 6965 645f  cel_all_unified_
+00038660: 6d61 7267 696e 5f6f 7264 6572 7328 7365  margin_orders(se
+00038670: 6c66 2c20 7379 6d62 6f6c 3a20 4f70 7469  lf, symbol: Opti
+00038680: 6f6e 616c 5b73 7472 5d20 3d20 4e6f 6e65  onal[str] = None
+00038690: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
+000386a0: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
+000386b0: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
+000386c0: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
+000386d0: 204e 6f6e 650a 2020 2020 2020 2020 7365   None.        se
+000386e0: 7474 6c65 203d 204e 6f6e 650a 2020 2020  ttle = None.    
+000386f0: 2020 2020 7265 7175 6573 7420 3d20 7b7d      request = {}
+00038700: 0a20 2020 2020 2020 2069 6620 7379 6d62  .        if symb
+00038710: 6f6c 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ol is not None:.
+00038720: 2020 2020 2020 2020 2020 2020 6d61 726b              mark
+00038730: 6574 203d 2073 656c 662e 6d61 726b 6574  et = self.market
+00038740: 2873 796d 626f 6c29 0a20 2020 2020 2020  (symbol).       
+00038750: 2020 2020 2073 6574 746c 6520 3d20 6d61       settle = ma
+00038760: 726b 6574 5b27 7365 7474 6c65 275d 0a20  rket['settle']. 
+00038770: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+00038780: 7374 5b27 7379 6d62 6f6c 275d 203d 206d  st['symbol'] = m
+00038790: 6172 6b65 745b 2769 6427 5d0a 2020 2020  arket['id'].    
+000387a0: 2020 2020 7375 6254 7970 6520 3d20 4e6f      subType = No
+000387b0: 6e65 0a20 2020 2020 2020 2073 7562 5479  ne.        subTy
+000387c0: 7065 2c20 7061 7261 6d73 203d 2073 656c  pe, params = sel
+000387d0: 662e 6861 6e64 6c65 5f73 7562 5f74 7970  f.handle_sub_typ
+000387e0: 655f 616e 645f 7061 7261 6d73 2827 6361  e_and_params('ca
+000387f0: 6e63 656c 416c 6c4f 7264 6572 7327 2c20  ncelAllOrders', 
+00038800: 6d61 726b 6574 2c20 7061 7261 6d73 2c20  market, params, 
+00038810: 276c 696e 6561 7227 290a 2020 2020 2020  'linear').      
+00038820: 2020 7265 7175 6573 745b 2763 6174 6567    request['categ
+00038830: 6f72 7927 5d20 3d20 7375 6254 7970 650a  ory'] = subType.
+00038840: 2020 2020 2020 2020 7365 7474 6c65 2c20          settle, 
+00038850: 7061 7261 6d73 203d 2073 656c 662e 6861  params = self.ha
+00038860: 6e64 6c65 5f6f 7074 696f 6e5f 616e 645f  ndle_option_and_
+00038870: 7061 7261 6d73 2870 6172 616d 732c 2027  params(params, '
+00038880: 6361 6e63 656c 416c 6c4f 7264 6572 7327  cancelAllOrders'
+00038890: 2c20 2773 6574 746c 6527 2c20 7365 7474  , 'settle', sett
+000388a0: 6c65 290a 2020 2020 2020 2020 6966 2073  le).        if s
+000388b0: 6574 746c 6520 6973 206e 6f74 204e 6f6e  ettle is not Non
+000388c0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+000388d0: 6571 7565 7374 5b27 7365 7474 6c65 436f  equest['settleCo
+000388e0: 696e 275d 203d 2073 6574 746c 650a 2020  in'] = settle.  
+000388f0: 2020 2020 2020 6973 5374 6f70 203d 2073        isStop = s
+00038900: 656c 662e 7361 6665 5f76 616c 7565 2870  elf.safe_value(p
+00038910: 6172 616d 732c 2027 7374 6f70 272c 2046  arams, 'stop', F
+00038920: 616c 7365 290a 2020 2020 2020 2020 7061  alse).        pa
+00038930: 7261 6d73 203d 2073 656c 662e 6f6d 6974  rams = self.omit
+00038940: 2870 6172 616d 732c 205b 2773 746f 7027  (params, ['stop'
+00038950: 5d29 0a20 2020 2020 2020 2069 6620 6973  ]).        if is
+00038960: 5374 6f70 3a0a 2020 2020 2020 2020 2020  Stop:.          
+00038970: 2020 7265 7175 6573 745b 276f 7264 6572    request['order
+00038980: 4669 6c74 6572 275d 203d 2027 5374 6f70  Filter'] = 'Stop
+00038990: 4f72 6465 7227 0a20 2020 2020 2020 2072  Order'.        r
+000389a0: 6573 706f 6e73 6520 3d20 6177 6169 7420  esponse = await 
+000389b0: 7365 6c66 2e70 7269 7661 7465 506f 7374  self.privatePost
+000389c0: 556e 6966 6965 6456 3350 7269 7661 7465  UnifiedV3Private
+000389d0: 4f72 6465 7243 616e 6365 6c41 6c6c 2873  OrderCancelAll(s
+000389e0: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
+000389f0: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
+00038a00: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+00038a10: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+00038a20: 2020 2020 2020 2020 2022 7265 7443 6f64           "retCod
+00038a30: 6522 3a20 302c 0a20 2020 2020 2020 2023  e": 0,.        #
+00038a40: 2020 2020 2020 2020 2022 7265 744d 7367           "retMsg
+00038a50: 223a 2022 4f4b 222c 0a20 2020 2020 2020  ": "OK",.       
+00038a60: 2023 2020 2020 2020 2020 2022 7265 7375   #         "resu
+00038a70: 6c74 223a 207b 0a20 2020 2020 2020 2023  lt": {.        #
+00038a80: 2020 2020 2020 2020 2020 2020 2022 6c69               "li
+00038a90: 7374 223a 205b 7b0a 2020 2020 2020 2020  st": [{.        
+00038aa0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00038ab0: 2020 2020 2020 2263 6174 6567 6f72 7922        "category"
+00038ac0: 3a20 226f 7074 696f 6e22 2c0a 2020 2020  : "option",.    
+00038ad0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00038ae0: 2020 2020 2020 2020 2020 2273 796d 626f            "symbo
+00038af0: 6c22 3a20 2242 5443 2d32 344a 554e 3232  l": "BTC-24JUN22
+00038b00: 2d34 3530 3030 2d50 222c 0a20 2020 2020  -45000-P",.     
+00038b10: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00038b20: 2020 2020 2020 2020 2022 6f72 6465 7249           "orderI
+00038b30: 6422 3a20 2262 6435 6633 6233 342d 6436  d": "bd5f3b34-d6
+00038b40: 3464 2d34 6236 302d 3831 3838 2d34 3338  4d-4b60-8188-438
+00038b50: 6662 6561 3463 3535 3222 2c0a 2020 2020  fbea4c552",.    
+00038b60: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00038b70: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+00038b80: 4c69 6e6b 4964 223a 2022 6163 3465 3362  LinkId": "ac4e3b
+00038b90: 3334 2d64 3634 642d 3462 3630 2d38 3138  34-d64d-4b60-818
+00038ba0: 382d 3433 3866 6265 6134 6335 3532 222c  8-438fbea4c552",
+00038bb0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00038bc0: 2020 2020 2020 2020 2020 207d 2c20 7b0a             }, {.
+00038bd0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00038be0: 2020 2020 2020 2020 2020 2020 2020 2263                "c
+00038bf0: 6174 6567 6f72 7922 3a20 226f 7074 696f  ategory": "optio
+00038c00: 6e22 2c0a 2020 2020 2020 2020 2320 2020  n",.        #   
+00038c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038c20: 2020 2273 796d 626f 6c22 3a20 2242 5443    "symbol": "BTC
+00038c30: 2d32 344a 554e 3232 2d34 3530 3030 2d50  -24JUN22-45000-P
+00038c40: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00038c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038c60: 2022 6f72 6465 7249 6422 3a20 2234 6464   "orderId": "4dd
+00038c70: 6437 3237 612d 3261 6638 2d34 3330 652d  d727a-2af8-430e-
+00038c80: 6132 3933 2d34 3238 3935 6535 3934 6431  a293-42895e594d1
+00038c90: 3822 2c0a 2020 2020 2020 2020 2320 2020  8",.        #   
+00038ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038cb0: 2020 226f 7264 6572 4c69 6e6b 4964 223a    "orderLinkId":
+00038cc0: 2022 3563 6565 3732 3761 2d32 6166 382d   "5cee727a-2af8-
+00038cd0: 3433 3065 2d61 3239 332d 3432 3839 3565  430e-a293-42895e
+00038ce0: 3539 3464 3138 222c 0a20 2020 2020 2020  594d18",.       
+00038cf0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00038d00: 2020 207d 0a20 2020 2020 2020 2023 2020     }.        #  
+00038d10: 2020 2020 2020 2020 2020 205d 0a20 2020             ].   
+00038d20: 2020 2020 2023 2020 2020 2020 2020 207d       #         }
+00038d30: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00038d40: 2020 2020 2272 6574 4578 7449 6e66 6f22      "retExtInfo"
+00038d50: 3a20 7b0a 2020 2020 2020 2020 2320 2020  : {.        #   
+00038d60: 2020 2020 2020 2020 2020 226c 6973 7422            "list"
+00038d70: 3a20 5b7b 0a20 2020 2020 2020 2023 2020  : [{.        #  
+00038d80: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00038d90: 636f 6465 223a 2030 2c0a 2020 2020 2020  code": 0,.      
+00038da0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00038db0: 2020 2020 226d 7367 223a 2022 4f4b 220a      "msg": "OK".
+00038dc0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00038dd0: 2020 2020 2020 7d2c 207b 0a20 2020 2020        }, {.     
+00038de0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00038df0: 2020 2020 2022 636f 6465 223a 2030 2c0a       "code": 0,.
+00038e00: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00038e10: 2020 2020 2020 2020 2020 226d 7367 223a            "msg":
+00038e20: 2022 4f4b 220a 2020 2020 2020 2020 2320   "OK".        # 
+00038e30: 2020 2020 2020 2020 2020 2020 7d5d 0a20              }]. 
+00038e40: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00038e50: 207d 2c0a 2020 2020 2020 2020 2320 2020   },.        #   
+00038e60: 2020 2020 2020 2274 696d 6522 3a20 3136        "time": 16
+00038e70: 3537 3230 3037 3336 3537 300a 2020 2020  57200736570.    
+00038e80: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+00038e90: 2020 2020 230a 2020 2020 2020 2020 7265      #.        re
+00038ea0: 7375 6c74 203d 2073 656c 662e 7361 6665  sult = self.safe
+00038eb0: 5f76 616c 7565 2872 6573 706f 6e73 652c  _value(response,
+00038ec0: 2027 7265 7375 6c74 272c 205b 5d29 0a20   'result', []). 
+00038ed0: 2020 2020 2020 206f 7264 6572 7320 3d20         orders = 
+00038ee0: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
+00038ef0: 7265 7375 6c74 2c20 276c 6973 7427 290a  result, 'list').
+00038f00: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
+00038f10: 7369 6e73 7461 6e63 6528 6f72 6465 7273  sinstance(orders
+00038f20: 2c20 6c69 7374 293a 0a20 2020 2020 2020  , list):.       
+00038f30: 2020 2020 2072 6574 7572 6e20 7265 7370       return resp
+00038f40: 6f6e 7365 0a20 2020 2020 2020 2072 6574  onse.        ret
+00038f50: 7572 6e20 7365 6c66 2e70 6172 7365 5f6f  urn self.parse_o
+00038f60: 7264 6572 7328 6f72 6465 7273 2c20 6d61  rders(orders, ma
+00038f70: 726b 6574 290a 0a20 2020 2061 7379 6e63  rket)..    async
+00038f80: 2064 6566 2063 616e 6365 6c5f 616c 6c5f   def cancel_all_
+00038f90: 7573 6463 5f6f 7264 6572 7328 7365 6c66  usdc_orders(self
+00038fa0: 2c20 7379 6d62 6f6c 3a20 4f70 7469 6f6e  , symbol: Option
+00038fb0: 616c 5b73 7472 5d20 3d20 4e6f 6e65 2c20  al[str] = None, 
+00038fc0: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
+00038fd0: 2020 2020 6966 2073 796d 626f 6c20 6973      if symbol is
+00038fe0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00038ff0: 2020 2072 6169 7365 2041 7267 756d 656e     raise Argumen
+00039000: 7473 5265 7175 6972 6564 2873 656c 662e  tsRequired(self.
+00039010: 6964 202b 2027 2063 616e 6365 6c41 6c6c  id + ' cancelAll
+00039020: 5553 4443 4f72 6465 7273 2829 2072 6571  USDCOrders() req
+00039030: 7569 7265 7320 6120 7379 6d62 6f6c 2061  uires a symbol a
+00039040: 7267 756d 656e 7427 290a 2020 2020 2020  rgument').      
+00039050: 2020 6177 6169 7420 7365 6c66 2e6c 6f61    await self.loa
+00039060: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
+00039070: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
+00039080: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
+00039090: 0a20 2020 2020 2020 206d 6574 686f 6420  .        method 
+000390a0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2072  = None.        r
+000390b0: 6571 7565 7374 203d 207b 0a20 2020 2020  equest = {.     
+000390c0: 2020 2020 2020 2027 7379 6d62 6f6c 273a         'symbol':
+000390d0: 206d 6172 6b65 745b 2769 6427 5d2c 0a20   market['id'],. 
+000390e0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+000390f0: 2069 6620 6d61 726b 6574 5b27 6f70 7469   if market['opti
+00039100: 6f6e 275d 3a0a 2020 2020 2020 2020 2020  on']:.          
+00039110: 2020 6d65 7468 6f64 203d 2027 7072 6976    method = 'priv
+00039120: 6174 6550 6f73 744f 7074 696f 6e55 7364  atePostOptionUsd
+00039130: 634f 7065 6e61 7069 5072 6976 6174 6556  cOpenapiPrivateV
+00039140: 3143 616e 6365 6c41 6c6c 270a 2020 2020  1CancelAll'.    
+00039150: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00039160: 2020 2020 2020 6d65 7468 6f64 203d 2027        method = '
+00039170: 7072 6976 6174 6550 6f73 7450 6572 7065  privatePostPerpe
+00039180: 7475 616c 5573 6463 4f70 656e 6170 6950  tualUsdcOpenapiP
+00039190: 7269 7661 7465 5631 4361 6e63 656c 416c  rivateV1CancelAl
+000391a0: 6c27 0a20 2020 2020 2020 2020 2020 2069  l'.            i
+000391b0: 7353 746f 7020 3d20 7365 6c66 2e73 6166  sStop = self.saf
+000391c0: 655f 7661 6c75 6528 7061 7261 6d73 2c20  e_value(params, 
+000391d0: 2773 746f 7027 2c20 4661 6c73 6529 0a20  'stop', False). 
+000391e0: 2020 2020 2020 2020 2020 2069 6620 6973             if is
+000391f0: 5374 6f70 3a0a 2020 2020 2020 2020 2020  Stop:.          
+00039200: 2020 2020 2020 7265 7175 6573 745b 276f        request['o
+00039210: 7264 6572 4669 6c74 6572 275d 203d 2027  rderFilter'] = '
+00039220: 5374 6f70 4f72 6465 7227 0a20 2020 2020  StopOrder'.     
+00039230: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00039240: 2020 2020 2020 2020 2020 2020 2072 6571               req
+00039250: 7565 7374 5b27 6f72 6465 7246 696c 7465  uest['orderFilte
+00039260: 7227 5d20 3d20 274f 7264 6572 270a 2020  r'] = 'Order'.  
+00039270: 2020 2020 2020 2020 2020 7061 7261 6d73            params
+00039280: 203d 2073 656c 662e 6f6d 6974 2870 6172   = self.omit(par
+00039290: 616d 732c 205b 2773 746f 7027 5d29 0a20  ams, ['stop']). 
+000392a0: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+000392b0: 3d20 6177 6169 7420 6765 7461 7474 7228  = await getattr(
+000392c0: 7365 6c66 2c20 6d65 7468 6f64 2928 7365  self, method)(se
+000392d0: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
+000392e0: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
+000392f0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+00039300: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+00039310: 2020 2020 2020 2020 2272 6574 436f 6465          "retCode
+00039320: 223a 2030 2c0a 2020 2020 2020 2020 2320  ": 0,.        # 
+00039330: 2020 2020 2020 2020 2272 6574 4d73 6722          "retMsg"
+00039340: 3a20 224f 4b22 2c0a 2020 2020 2020 2020  : "OK",.        
+00039350: 2320 2020 2020 2020 2020 2272 6574 4578  #         "retEx
+00039360: 744d 6170 223a 207b 7d2c 0a20 2020 2020  tMap": {},.     
+00039370: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+00039380: 7375 6c74 223a 205b 0a20 2020 2020 2020  sult": [.       
+00039390: 2023 2020 2020 2020 2020 2020 2020 207b   #             {
+000393a0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000393b0: 2020 2020 2020 2020 2020 2022 6f75 7452             "outR
+000393c0: 6571 7565 7374 4964 223a 2022 6361 6e63  equestId": "canc
+000393d0: 656c 416c 6c2d 3239 3031 3139 2d31 3635  elAll-290119-165
+000393e0: 3231 3736 3434 3331 3134 2d30 222c 0a20  2176443114-0",. 
+000393f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00039400: 2020 2020 2020 2020 2022 7379 6d62 6f6c           "symbol
+00039410: 223a 2022 4254 432d 3133 4d41 5932 322d  ": "BTC-13MAY22-
+00039420: 3430 3030 302d 4322 2c0a 2020 2020 2020  40000-C",.      
+00039430: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00039440: 2020 2020 226f 7264 6572 4964 223a 2022      "orderId": "
+00039450: 6661 3663 6437 3430 2d35 3665 642d 3437  fa6cd740-56ed-47
+00039460: 3764 2d39 3338 352d 3930 6363 6266 6565  7d-9385-90ccbfee
+00039470: 3439 6361 222c 0a20 2020 2020 2020 2023  49ca",.        #
+00039480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00039490: 2022 6f72 6465 724c 696e 6b49 6422 3a20   "orderLinkId": 
+000394a0: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
+000394b0: 2020 2020 2020 2020 2020 2020 2020 2265                "e
+000394c0: 7272 6f72 436f 6465 223a 2030 2c0a 2020  rrorCode": 0,.  
+000394d0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000394e0: 2020 2020 2020 2020 2265 7272 6f72 4465          "errorDe
+000394f0: 7363 223a 2022 220a 2020 2020 2020 2020  sc": "".        
+00039500: 2320 2020 2020 2020 2020 2020 2020 7d0a  #             }.
+00039510: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00039520: 2020 5d0a 2020 2020 2020 2020 2320 2020    ].        #   
+00039530: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
+00039540: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
+00039550: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
+00039560: 6573 706f 6e73 652c 2027 7265 7375 6c74  esponse, 'result
+00039570: 272c 205b 5d29 0a20 2020 2020 2020 2069  ', []).        i
+00039580: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
+00039590: 2872 6573 756c 742c 206c 6973 7429 3a0a  (result, list):.
+000395a0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+000395b0: 726e 2072 6573 706f 6e73 650a 2020 2020  rn response.    
+000395c0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+000395d0: 7061 7273 655f 6f72 6465 7273 2872 6573  parse_orders(res
+000395e0: 756c 742c 206d 6172 6b65 7429 0a0a 2020  ult, market)..  
+000395f0: 2020 6173 796e 6320 6465 6620 6361 6e63    async def canc
+00039600: 656c 5f61 6c6c 5f64 6572 6976 6174 6976  el_all_derivativ
+00039610: 6573 5f6f 7264 6572 7328 7365 6c66 2c20  es_orders(self, 
+00039620: 7379 6d62 6f6c 3a20 4f70 7469 6f6e 616c  symbol: Optional
+00039630: 5b73 7472 5d20 3d20 4e6f 6e65 2c20 7061  [str] = None, pa
+00039640: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
+00039650: 2020 6177 6169 7420 7365 6c66 2e6c 6f61    await self.loa
+00039660: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
+00039670: 2020 2020 6d61 726b 6574 203d 204e 6f6e      market = Non
+00039680: 650a 2020 2020 2020 2020 7365 7474 6c65  e.        settle
+00039690: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+000396a0: 7265 7175 6573 7420 3d20 7b7d 0a20 2020  request = {}.   
+000396b0: 2020 2020 2069 6620 7379 6d62 6f6c 2069       if symbol i
+000396c0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+000396d0: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
+000396e0: 2073 656c 662e 6d61 726b 6574 2873 796d   self.market(sym
+000396f0: 626f 6c29 0a20 2020 2020 2020 2020 2020  bol).           
+00039700: 2073 6574 746c 6520 3d20 6d61 726b 6574   settle = market
+00039710: 5b27 7365 7474 6c65 275d 0a20 2020 2020  ['settle'].     
+00039720: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+00039730: 7379 6d62 6f6c 275d 203d 206d 6172 6b65  symbol'] = marke
+00039740: 745b 2769 6427 5d0a 2020 2020 2020 2020  t['id'].        
+00039750: 7365 7474 6c65 2c20 7061 7261 6d73 203d  settle, params =
+00039760: 2073 656c 662e 6861 6e64 6c65 5f6f 7074   self.handle_opt
+00039770: 696f 6e5f 616e 645f 7061 7261 6d73 2870  ion_and_params(p
+00039780: 6172 616d 732c 2027 6361 6e63 656c 416c  arams, 'cancelAl
+00039790: 6c4f 7264 6572 7327 2c20 2773 6574 746c  lOrders', 'settl
+000397a0: 6527 2c20 7365 7474 6c65 290a 2020 2020  e', settle).    
+000397b0: 2020 2020 6966 2073 6574 746c 6520 6973      if settle is
+000397c0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+000397d0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+000397e0: 7365 7474 6c65 436f 696e 275d 203d 2073  settleCoin'] = s
+000397f0: 6574 746c 650a 2020 2020 2020 2020 7265  ettle.        re
+00039800: 7370 6f6e 7365 203d 2061 7761 6974 2073  sponse = await s
+00039810: 656c 662e 7072 6976 6174 6550 6f73 7443  elf.privatePostC
+00039820: 6f6e 7472 6163 7456 3350 7269 7661 7465  ontractV3Private
+00039830: 4f72 6465 7243 616e 6365 6c41 6c6c 2873  OrderCancelAll(s
+00039840: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
+00039850: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
+00039860: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+00039870: 2063 6f6e 7472 6163 7420 7633 0a20 2020   contract v3.   
+00039880: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+00039890: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+000398a0: 2020 2020 2020 2020 2022 7265 7443 6f64           "retCod
+000398b0: 6522 3a20 302c 0a20 2020 2020 2020 2023  e": 0,.        #
+000398c0: 2020 2020 2020 2020 2022 7265 744d 7367           "retMsg
+000398d0: 223a 2022 4f4b 222c 0a20 2020 2020 2020  ": "OK",.       
+000398e0: 2023 2020 2020 2020 2020 2022 7265 7375   #         "resu
+000398f0: 6c74 223a 207b 0a20 2020 2020 2020 2023  lt": {.        #
+00039900: 2020 2020 2020 2020 2020 2020 2022 6c69               "li
+00039910: 7374 223a 205b 0a20 2020 2020 2020 2023  st": [.        #
+00039920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00039930: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+00039940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00039950: 2022 6f72 6465 7249 6422 3a20 2234 3033   "orderId": "403
+00039960: 3034 3330 642d 3164 6261 2d34 3133 342d  0430d-1dba-4134-
+00039970: 6163 3737 2d33 6438 3163 3134 6161 6130  ac77-3d81c14aaa0
+00039980: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00039990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000399a0: 2020 226f 7264 6572 4c69 6e6b 4964 223a    "orderLinkId":
+000399b0: 2022 7830 3031 220a 2020 2020 2020 2020   "x001".        
+000399c0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000399d0: 2020 7d0a 2020 2020 2020 2020 2320 2020    }.        #   
+000399e0: 2020 2020 2020 2020 2020 5d0a 2020 2020            ].    
+000399f0: 2020 2020 2320 2020 2020 2020 2020 7d2c      #         },
+00039a00: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00039a10: 2020 2022 7265 7445 7874 496e 666f 223a     "retExtInfo":
+00039a20: 207b 7d2c 0a20 2020 2020 2020 2023 2020   {},.        #  
+00039a30: 2020 2020 2020 2022 7469 6d65 223a 2031         "time": 1
+00039a40: 3635 3839 3031 3335 3932 3235 0a20 2020  658901359225.   
+00039a50: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
+00039a60: 2020 2020 2023 0a20 2020 2020 2020 2072       #.        r
+00039a70: 6573 756c 7420 3d20 7365 6c66 2e73 6166  esult = self.saf
+00039a80: 655f 7661 6c75 6528 7265 7370 6f6e 7365  e_value(response
+00039a90: 2c20 2772 6573 756c 7427 2c20 5b5d 290a  , 'result', []).
+00039aa0: 2020 2020 2020 2020 6f72 6465 7273 203d          orders =
+00039ab0: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+00039ac0: 2872 6573 756c 742c 2027 6c69 7374 272c  (result, 'list',
+00039ad0: 205b 5d29 0a20 2020 2020 2020 2072 6574   []).        ret
+00039ae0: 7572 6e20 7365 6c66 2e70 6172 7365 5f6f  urn self.parse_o
+00039af0: 7264 6572 7328 6f72 6465 7273 2c20 6d61  rders(orders, ma
+00039b00: 726b 6574 290a 0a20 2020 2061 7379 6e63  rket)..    async
+00039b10: 2064 6566 2063 616e 6365 6c5f 616c 6c5f   def cancel_all_
+00039b20: 6f72 6465 7273 2873 656c 662c 2073 796d  orders(self, sym
+00039b30: 626f 6c3a 204f 7074 696f 6e61 6c5b 7374  bol: Optional[st
+00039b40: 725d 203d 204e 6f6e 652c 2070 6172 616d  r] = None, param
+00039b50: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
+00039b60: 2222 0a20 2020 2020 2020 2063 616e 6365  "".        cance
+00039b70: 6c20 616c 6c20 6f70 656e 206f 7264 6572  l all open order
+00039b80: 730a 2020 2020 2020 2020 3a70 6172 616d  s.        :param
+00039b90: 2073 7472 7c4e 6f6e 6520 7379 6d62 6f6c   str|None symbol
+00039ba0: 3a20 756e 6966 6965 6420 6d61 726b 6574  : unified market
+00039bb0: 2073 796d 626f 6c2c 206f 6e6c 7920 6f72   symbol, only or
+00039bc0: 6465 7273 2069 6e20 7468 6520 6d61 726b  ders in the mark
+00039bd0: 6574 206f 6620 7365 6c66 2073 796d 626f  et of self symbo
+00039be0: 6c20 6172 6520 6361 6e63 656c 6c65 6420  l are cancelled 
+00039bf0: 7768 656e 2073 796d 626f 6c20 6973 206e  when symbol is n
+00039c00: 6f74 204e 6f6e 650a 2020 2020 2020 2020  ot None.        
+00039c10: 3a70 6172 616d 2064 6963 7420 7061 7261  :param dict para
+00039c20: 6d73 3a20 6578 7472 6120 7061 7261 6d65  ms: extra parame
+00039c30: 7465 7273 2073 7065 6369 6669 6320 746f  ters specific to
+00039c40: 2074 6865 2062 7962 6974 2061 7069 2065   the bybit api e
+00039c50: 6e64 706f 696e 740a 2020 2020 2020 2020  ndpoint.        
+00039c60: 3a72 6574 7572 6e73 205b 6469 6374 5d3a  :returns [dict]:
+00039c70: 2061 206c 6973 7420 6f66 2060 6f72 6465   a list of `orde
+00039c80: 7220 7374 7275 6374 7572 6573 203c 6874  r structures <ht
+00039c90: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
+00039ca0: 636f 6d2f 232f 3f69 643d 6f72 6465 722d  com/#/?id=order-
+00039cb0: 7374 7275 6374 7572 653e 600a 2020 2020  structure>`.    
+00039cc0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00039cd0: 6177 6169 7420 7365 6c66 2e6c 6f61 645f  await self.load_
+00039ce0: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
+00039cf0: 2020 6d61 726b 6574 203d 204e 6f6e 650a    market = None.
+00039d00: 2020 2020 2020 2020 7365 7474 6c65 203d          settle =
+00039d10: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+00039d20: 6728 7061 7261 6d73 2c20 2773 6574 746c  g(params, 'settl
+00039d30: 6543 6f69 6e27 290a 2020 2020 2020 2020  eCoin').        
+00039d40: 6966 2073 6574 746c 6520 6973 204e 6f6e  if settle is Non
+00039d50: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
+00039d60: 6574 746c 652c 2070 6172 616d 7320 3d20  ettle, params = 
+00039d70: 7365 6c66 2e68 616e 646c 655f 6f70 7469  self.handle_opti
+00039d80: 6f6e 5f61 6e64 5f70 6172 616d 7328 7061  on_and_params(pa
+00039d90: 7261 6d73 2c20 2763 616e 6365 6c41 6c6c  rams, 'cancelAll
+00039da0: 4f72 6465 7273 272c 2027 7365 7474 6c65  Orders', 'settle
+00039db0: 272c 2073 6574 746c 6529 0a20 2020 2020  ', settle).     
+00039dc0: 2020 2069 6620 7379 6d62 6f6c 2069 7320     if symbol is 
+00039dd0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00039de0: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
+00039df0: 656c 662e 6d61 726b 6574 2873 796d 626f  elf.market(symbo
+00039e00: 6c29 0a20 2020 2020 2020 2020 2020 2073  l).            s
+00039e10: 6574 746c 6520 3d20 6d61 726b 6574 5b27  ettle = market['
+00039e20: 7365 7474 6c65 275d 0a20 2020 2020 2020  settle'].       
+00039e30: 2073 7562 5479 7065 203d 204e 6f6e 650a   subType = None.
+00039e40: 2020 2020 2020 2020 7375 6254 7970 652c          subType,
+00039e50: 2070 6172 616d 7320 3d20 7365 6c66 2e68   params = self.h
+00039e60: 616e 646c 655f 7375 625f 7479 7065 5f61  andle_sub_type_a
+00039e70: 6e64 5f70 6172 616d 7328 2763 616e 6365  nd_params('cance
+00039e80: 6c41 6c6c 4f72 6465 7273 272c 206d 6172  lAllOrders', mar
+00039e90: 6b65 742c 2070 6172 616d 7329 0a20 2020  ket, params).   
+00039ea0: 2020 2020 2069 7355 7364 6353 6574 746c       isUsdcSettl
+00039eb0: 6564 203d 2073 6574 746c 6520 3d3d 2027  ed = settle == '
+00039ec0: 5553 4443 270a 2020 2020 2020 2020 6973  USDC'.        is
+00039ed0: 496e 7665 7273 6520 3d20 7375 6254 7970  Inverse = subTyp
+00039ee0: 6520 3d3d 2027 696e 7665 7273 6527 0a20  e == 'inverse'. 
+00039ef0: 2020 2020 2020 2069 734c 696e 6561 7253         isLinearS
+00039f00: 6574 746c 6520 3d20 6973 5573 6463 5365  ettle = isUsdcSe
+00039f10: 7474 6c65 6420 6f72 2028 7365 7474 6c65  ttled or (settle
+00039f20: 203d 3d20 2755 5344 5427 290a 2020 2020   == 'USDT').    
+00039f30: 2020 2020 6966 2069 7349 6e76 6572 7365      if isInverse
+00039f40: 2061 6e64 2069 734c 696e 6561 7253 6574   and isLinearSet
+00039f50: 746c 653a 0a20 2020 2020 2020 2020 2020  tle:.           
+00039f60: 2072 6169 7365 2041 7267 756d 656e 7473   raise Arguments
+00039f70: 5265 7175 6972 6564 2873 656c 662e 6964  Required(self.id
+00039f80: 202b 2027 2063 616e 6365 6c41 6c6c 4f72   + ' cancelAllOr
+00039f90: 6465 7273 2077 6974 6820 696e 7665 7273  ders with invers
+00039fa0: 6520 7375 6254 7970 6520 7265 7175 6972  e subType requir
+00039fb0: 6573 2073 6574 746c 6520 746f 206e 6f74  es settle to not
+00039fc0: 2062 6520 5553 4454 206f 7220 5553 4443   be USDT or USDC
+00039fd0: 2729 0a20 2020 2020 2020 2074 7970 652c  ').        type,
+00039fe0: 2071 7565 7279 203d 2073 656c 662e 6861   query = self.ha
+00039ff0: 6e64 6c65 5f6d 6172 6b65 745f 7479 7065  ndle_market_type
+0003a000: 5f61 6e64 5f70 6172 616d 7328 2763 616e  _and_params('can
+0003a010: 6365 6c41 6c6c 4f72 6465 7273 272c 206d  celAllOrders', m
+0003a020: 6172 6b65 742c 2070 6172 616d 7329 0a20  arket, params). 
+0003a030: 2020 2020 2020 2065 6e61 626c 6555 6e69         enableUni
+0003a040: 6669 6564 4d61 7267 696e 2c20 656e 6162  fiedMargin, enab
+0003a050: 6c65 556e 6966 6965 6441 6363 6f75 6e74  leUnifiedAccount
+0003a060: 203d 2061 7761 6974 2073 656c 662e 6973   = await self.is
+0003a070: 5f75 6e69 6669 6564 5f65 6e61 626c 6564  _unified_enabled
+0003a080: 2829 0a20 2020 2020 2020 2069 6620 656e  ().        if en
+0003a090: 6162 6c65 556e 6966 6965 6441 6363 6f75  ableUnifiedAccou
+0003a0a0: 6e74 3a0a 2020 2020 2020 2020 2020 2020  nt:.            
+0003a0b0: 7265 7475 726e 2061 7761 6974 2073 656c  return await sel
+0003a0c0: 662e 6361 6e63 656c 5f61 6c6c 5f75 6e69  f.cancel_all_uni
+0003a0d0: 6669 6564 5f61 6363 6f75 6e74 5f6f 7264  fied_account_ord
+0003a0e0: 6572 7328 7379 6d62 6f6c 2c20 7175 6572  ers(symbol, quer
+0003a0f0: 7929 0a20 2020 2020 2020 2065 6c69 6620  y).        elif 
+0003a100: 7479 7065 203d 3d20 2773 706f 7427 3a0a  type == 'spot':.
+0003a110: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0003a120: 726e 2061 7761 6974 2073 656c 662e 6361  rn await self.ca
+0003a130: 6e63 656c 5f61 6c6c 5f73 706f 745f 6f72  ncel_all_spot_or
+0003a140: 6465 7273 2873 796d 626f 6c2c 2071 7565  ders(symbol, que
+0003a150: 7279 290a 2020 2020 2020 2020 656c 6966  ry).        elif
+0003a160: 2065 6e61 626c 6555 6e69 6669 6564 4d61   enableUnifiedMa
+0003a170: 7267 696e 2061 6e64 206e 6f74 2069 7349  rgin and not isI
+0003a180: 6e76 6572 7365 3a0a 2020 2020 2020 2020  nverse:.        
+0003a190: 2020 2020 7265 7475 726e 2061 7761 6974      return await
+0003a1a0: 2073 656c 662e 6361 6e63 656c 5f61 6c6c   self.cancel_all
+0003a1b0: 5f75 6e69 6669 6564 5f6d 6172 6769 6e5f  _unified_margin_
+0003a1c0: 6f72 6465 7273 2873 796d 626f 6c2c 2071  orders(symbol, q
+0003a1d0: 7565 7279 290a 2020 2020 2020 2020 656c  uery).        el
+0003a1e0: 6966 2069 7355 7364 6353 6574 746c 6564  if isUsdcSettled
+0003a1f0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+0003a200: 7475 726e 2061 7761 6974 2073 656c 662e  turn await self.
+0003a210: 6361 6e63 656c 5f61 6c6c 5f75 7364 635f  cancel_all_usdc_
+0003a220: 6f72 6465 7273 2873 796d 626f 6c2c 2071  orders(symbol, q
+0003a230: 7565 7279 290a 2020 2020 2020 2020 656c  uery).        el
+0003a240: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0003a250: 7265 7475 726e 2061 7761 6974 2073 656c  return await sel
+0003a260: 662e 6361 6e63 656c 5f61 6c6c 5f64 6572  f.cancel_all_der
+0003a270: 6976 6174 6976 6573 5f6f 7264 6572 7328  ivatives_orders(
+0003a280: 7379 6d62 6f6c 2c20 7175 6572 7929 0a0a  symbol, query)..
+0003a290: 2020 2020 6173 796e 6320 6465 6620 6665      async def fe
+0003a2a0: 7463 685f 756e 6966 6965 645f 6163 636f  tch_unified_acco
+0003a2b0: 756e 745f 6f72 6465 7273 2873 656c 662c  unt_orders(self,
+0003a2c0: 2073 796d 626f 6c3a 204f 7074 696f 6e61   symbol: Optiona
+0003a2d0: 6c5b 7374 725d 203d 204e 6f6e 652c 2073  l[str] = None, s
+0003a2e0: 696e 6365 3a20 4f70 7469 6f6e 616c 5b69  ince: Optional[i
+0003a2f0: 6e74 5d20 3d20 4e6f 6e65 2c20 6c69 6d69  nt] = None, limi
+0003a300: 743a 204f 7074 696f 6e61 6c5b 696e 745d  t: Optional[int]
+0003a310: 203d 204e 6f6e 652c 2070 6172 616d 733d   = None, params=
+0003a320: 7b7d 293a 0a20 2020 2020 2020 2061 7761  {}):.        awa
+0003a330: 6974 2073 656c 662e 6c6f 6164 5f6d 6172  it self.load_mar
+0003a340: 6b65 7473 2829 0a20 2020 2020 2020 2072  kets().        r
+0003a350: 6571 7565 7374 203d 207b 0a20 2020 2020  equest = {.     
+0003a360: 2020 2020 2020 2023 2027 7379 6d62 6f6c         # 'symbol
+0003a370: 273a 206d 6172 6b65 745b 2769 6427 5d2c  ': market['id'],
+0003a380: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+0003a390: 6361 7465 676f 7279 272c 2054 7970 6520  category', Type 
+0003a3a0: 6f66 2064 6572 6976 6174 6976 6573 2070  of derivatives p
+0003a3b0: 726f 6475 6374 3a20 7370 6f74 2c20 6c69  roduct: spot, li
+0003a3c0: 6e65 6172 206f 7220 6f70 7469 6f6e 2e0a  near or option..
+0003a3d0: 2020 2020 2020 2020 2020 2020 2320 2762              # 'b
+0003a3e0: 6173 6543 6f69 6e27 2c20 4261 7365 2063  aseCoin', Base c
+0003a3f0: 6f69 6e2e 2057 6865 6e20 6361 7465 676f  oin. When catego
+0003a400: 7279 3d6f 7074 696f 6e2e 2049 6620 6e6f  ry=option. If no
+0003a410: 7420 7061 7373 6564 2c20 4254 4320 6279  t passed, BTC by
+0003a420: 2064 6566 6175 6c74 3b20 7768 656e 2063   default; when c
+0003a430: 6174 6567 6f72 793d 6c69 6e65 6172 2c20  ategory=linear, 
+0003a440: 6966 2042 5443 2070 6173 7365 642c 2042  if BTC passed, B
+0003a450: 5443 5045 5250 2026 2042 5443 5553 4454  TCPERP & BTCUSDT
+0003a460: 2072 6574 7572 6e65 642e 0a20 2020 2020   returned..     
+0003a470: 2020 2020 2020 2023 2027 6f72 6465 7249         # 'orderI
+0003a480: 6427 2c20 4f72 6465 7220 4944 0a20 2020  d', Order ID.   
+0003a490: 2020 2020 2020 2020 2023 2027 6f72 6465           # 'orde
+0003a4a0: 724c 696e 6b49 6427 2c20 556e 6971 7565  rLinkId', Unique
+0003a4b0: 2075 7365 722d 7365 7420 6f72 6465 7220   user-set order 
+0003a4c0: 4944 0a20 2020 2020 2020 2020 2020 2023  ID.            #
+0003a4d0: 2027 6f72 6465 7253 7461 7475 7327 2c20   'orderStatus', 
+0003a4e0: 2023 2052 6574 7572 6e20 616c 6c20 7374   # Return all st
+0003a4f0: 6174 7573 206f 7264 6572 7320 6966 206e  atus orders if n
+0003a500: 6f74 2070 6173 7365 640a 2020 2020 2020  ot passed.      
+0003a510: 2020 2020 2020 2320 276f 7264 6572 4669        # 'orderFi
+0003a520: 6c74 6572 272c 2043 6f6e 6469 7469 6f6e  lter', Condition
+0003a530: 616c 206f 7264 6572 206f 7220 6163 7469  al order or acti
+0003a540: 7665 206f 7264 6572 0a20 2020 2020 2020  ve order.       
+0003a550: 2020 2020 2023 2027 6c69 6d69 7427 3a20       # 'limit': 
+0003a560: 6e75 6d62 6572 2c20 4461 7461 2071 7561  number, Data qua
+0003a570: 6e74 6974 7920 7065 7220 7061 6765 3a20  ntity per page: 
+0003a580: 4d61 7820 6461 7461 2076 616c 7565 2070  Max data value p
+0003a590: 6572 2070 6167 6520 6973 2035 302c 2061  er page is 50, a
+0003a5a0: 6e64 2064 6566 6175 6c74 2076 616c 7565  nd default value
+0003a5b0: 2061 7420 3230 2e0a 2020 2020 2020 2020   at 20..        
+0003a5c0: 2020 2020 2320 2763 7572 736f 7227 2c20      # 'cursor', 
+0003a5d0: 4150 4920 7061 7373 2d74 6872 6f75 6768  API pass-through
+0003a5e0: 2e20 6163 636f 756e 7454 7970 6520 2b20  . accountType + 
+0003a5f0: 6361 7465 676f 7279 202b 2063 7572 736f  category + curso
+0003a600: 7220 2b2e 2049 6620 696e 636f 6e73 6973  r +. If inconsis
+0003a610: 7465 6e74 2c20 7468 6520 666f 6c6c 6f77  tent, the follow
+0003a620: 696e 6720 7368 6f75 6c64 2062 6520 7265  ing should be re
+0003a630: 7475 726e 6564 3a20 5468 6520 6163 636f  turned: The acco
+0003a640: 756e 7420 7479 7065 2064 6f65 7320 6e6f  unt type does no
+0003a650: 7420 6d61 7463 6820 7468 6520 7365 7276  t match the serv
+0003a660: 6963 6520 696e 7175 6972 792e 0a20 2020  ice inquiry..   
+0003a670: 2020 2020 2020 2020 2023 2027 7374 6172           # 'star
+0003a680: 7454 696d 6527 3a20 302c 2020 2320 5468  tTime': 0,  # Th
+0003a690: 6520 7374 6172 7420 7469 6d65 7374 616d  e start timestam
+0003a6a0: 7028 6d73 2920 5375 7070 6f72 7420 5554  p(ms) Support UT
+0003a6b0: 4120 6f6e 6c79 2074 656d 706f 7261 7269  A only temporari
+0003a6c0: 6c79 2073 7461 7274 5469 6d65 2061 6e64  ly startTime and
+0003a6d0: 2065 6e64 5469 6d65 206d 7573 7420 6265   endTime must be
+0003a6e0: 2070 6173 7365 6420 746f 6765 7468 6572   passed together
+0003a6f0: 2049 6620 6e6f 7420 7061 7373 6564 2c20   If not passed, 
+0003a700: 7175 6572 7920 7468 6520 7061 7374 2037  query the past 7
+0003a710: 2064 6179 7320 6461 7461 2062 7920 6465   days data by de
+0003a720: 6661 756c 740a 2020 2020 2020 2020 2020  fault.          
+0003a730: 2020 2320 2765 6e64 5469 6d65 273a 2030    # 'endTime': 0
+0003a740: 2c20 2023 2054 6865 2065 6e64 2074 696d  ,  # The end tim
+0003a750: 6573 7461 6d70 286d 7329 0a20 2020 2020  estamp(ms).     
+0003a760: 2020 207d 0a20 2020 2020 2020 206d 6172     }.        mar
+0003a770: 6b65 7420 3d20 4e6f 6e65 0a20 2020 2020  ket = None.     
+0003a780: 2020 2069 6620 7379 6d62 6f6c 2069 7320     if symbol is 
+0003a790: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+0003a7a0: 2020 7479 7065 203d 204e 6f6e 650a 2020    type = None.  
+0003a7b0: 2020 2020 2020 2020 2020 7479 7065 2c20            type, 
+0003a7c0: 7061 7261 6d73 203d 2073 656c 662e 6861  params = self.ha
+0003a7d0: 6e64 6c65 5f6d 6172 6b65 745f 7479 7065  ndle_market_type
+0003a7e0: 5f61 6e64 5f70 6172 616d 7328 2766 6574  _and_params('fet
+0003a7f0: 6368 4f72 6465 7273 272c 206d 6172 6b65  chOrders', marke
+0003a800: 742c 2070 6172 616d 7329 0a20 2020 2020  t, params).     
+0003a810: 2020 2020 2020 2023 206f 7074 696f 6e2c         # option,
+0003a820: 2073 706f 740a 2020 2020 2020 2020 2020   spot.          
+0003a830: 2020 7265 7175 6573 745b 2763 6174 6567    request['categ
+0003a840: 6f72 7927 5d20 3d20 7479 7065 0a20 2020  ory'] = type.   
+0003a850: 2020 2020 2020 2020 2069 6620 7479 7065           if type
+0003a860: 203d 3d20 2773 7761 7027 3a0a 2020 2020   == 'swap':.    
+0003a870: 2020 2020 2020 2020 2020 2020 7375 6254              subT
+0003a880: 7970 6520 3d20 4e6f 6e65 0a20 2020 2020  ype = None.     
+0003a890: 2020 2020 2020 2020 2020 2073 7562 5479             subTy
+0003a8a0: 7065 2c20 7061 7261 6d73 203d 2073 656c  pe, params = sel
+0003a8b0: 662e 6861 6e64 6c65 5f73 7562 5f74 7970  f.handle_sub_typ
+0003a8c0: 655f 616e 645f 7061 7261 6d73 2827 6665  e_and_params('fe
+0003a8d0: 7463 684f 7264 6572 7327 2c20 6d61 726b  tchOrders', mark
+0003a8e0: 6574 2c20 7061 7261 6d73 2c20 276c 696e  et, params, 'lin
+0003a8f0: 6561 7227 290a 2020 2020 2020 2020 2020  ear').          
+0003a900: 2020 2020 2020 7265 7175 6573 745b 2763        request['c
+0003a910: 6174 6567 6f72 7927 5d20 3d20 7375 6254  ategory'] = subT
+0003a920: 7970 650a 2020 2020 2020 2020 656c 7365  ype.        else
+0003a930: 3a0a 2020 2020 2020 2020 2020 2020 6d61  :.            ma
+0003a940: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
+0003a950: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
+0003a960: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+0003a970: 7379 6d62 6f6c 275d 203d 206d 6172 6b65  symbol'] = marke
+0003a980: 745b 2769 6427 5d0a 2020 2020 2020 2020  t['id'].        
+0003a990: 2020 2020 6966 206d 6172 6b65 745b 2773      if market['s
+0003a9a0: 706f 7427 5d3a 0a20 2020 2020 2020 2020  pot']:.         
+0003a9b0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+0003a9c0: 6361 7465 676f 7279 275d 203d 2027 7370  category'] = 'sp
+0003a9d0: 6f74 270a 2020 2020 2020 2020 2020 2020  ot'.            
+0003a9e0: 656c 6966 206d 6172 6b65 745b 276f 7074  elif market['opt
+0003a9f0: 696f 6e27 5d3a 0a20 2020 2020 2020 2020  ion']:.         
+0003aa00: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+0003aa10: 6361 7465 676f 7279 275d 203d 2027 6f70  category'] = 'op
+0003aa20: 7469 6f6e 270a 2020 2020 2020 2020 2020  tion'.          
+0003aa30: 2020 656c 6966 206d 6172 6b65 745b 276c    elif market['l
+0003aa40: 696e 6561 7227 5d3a 0a20 2020 2020 2020  inear']:.       
+0003aa50: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0003aa60: 5b27 6361 7465 676f 7279 275d 203d 2027  ['category'] = '
+0003aa70: 6c69 6e65 6172 270a 2020 2020 2020 2020  linear'.        
+0003aa80: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0003aa90: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+0003aaa0: 4e6f 7453 7570 706f 7274 6564 2873 656c  NotSupported(sel
+0003aab0: 662e 6964 202b 2027 2066 6574 6368 4f72  f.id + ' fetchOr
+0003aac0: 6465 7273 2829 2064 6f65 7320 6e6f 7420  ders() does not 
+0003aad0: 616c 6c6f 7720 696e 7665 7273 6520 6d61  allow inverse ma
+0003aae0: 726b 6574 206f 7264 6572 7320 666f 7220  rket orders for 
+0003aaf0: 2720 2b20 7379 6d62 6f6c 202b 2027 206d  ' + symbol + ' m
+0003ab00: 6172 6b65 7473 2729 0a20 2020 2020 2020  arkets').       
+0003ab10: 2069 7353 746f 7020 3d20 7365 6c66 2e73   isStop = self.s
+0003ab20: 6166 655f 7661 6c75 6528 7061 7261 6d73  afe_value(params
+0003ab30: 2c20 2773 746f 7027 2c20 4661 6c73 6529  , 'stop', False)
+0003ab40: 0a20 2020 2020 2020 2070 6172 616d 7320  .        params 
+0003ab50: 3d20 7365 6c66 2e6f 6d69 7428 7061 7261  = self.omit(para
+0003ab60: 6d73 2c20 5b27 7374 6f70 275d 290a 2020  ms, ['stop']).  
+0003ab70: 2020 2020 2020 6966 2069 7353 746f 703a        if isStop:
+0003ab80: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0003ab90: 6d61 726b 6574 5b27 7370 6f74 275d 3a0a  market['spot']:.
+0003aba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003abb0: 7265 7175 6573 745b 276f 7264 6572 4669  request['orderFi
+0003abc0: 6c74 6572 275d 203d 2027 7470 736c 4f72  lter'] = 'tpslOr
+0003abd0: 6465 7227 0a20 2020 2020 2020 2020 2020  der'.           
+0003abe0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0003abf0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+0003ac00: 6f72 6465 7246 696c 7465 7227 5d20 3d20  orderFilter'] = 
+0003ac10: 2753 746f 704f 7264 6572 270a 2020 2020  'StopOrder'.    
+0003ac20: 2020 2020 6966 206c 696d 6974 2069 7320      if limit is 
+0003ac30: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+0003ac40: 2020 2020 2020 7265 7175 6573 745b 276c        request['l
+0003ac50: 696d 6974 275d 203d 206c 696d 6974 0a20  imit'] = limit. 
+0003ac60: 2020 2020 2020 2069 6620 7369 6e63 6520         if since 
+0003ac70: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0003ac80: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0003ac90: 5b27 7374 6172 7454 696d 6527 5d20 3d20  ['startTime'] = 
+0003aca0: 7369 6e63 650a 2020 2020 2020 2020 756e  since.        un
+0003acb0: 7469 6c20 3d20 7365 6c66 2e73 6166 655f  til = self.safe_
+0003acc0: 696e 7465 6765 725f 3228 7061 7261 6d73  integer_2(params
+0003acd0: 2c20 2775 6e74 696c 272c 2027 7469 6c6c  , 'until', 'till
+0003ace0: 2729 2020 2320 756e 6966 6965 6420 696e  ')  # unified in
+0003acf0: 206d 696c 6c69 7365 636f 6e64 730a 2020   milliseconds.  
+0003ad00: 2020 2020 2020 656e 6454 696d 6520 3d20        endTime = 
+0003ad10: 7365 6c66 2e73 6166 655f 696e 7465 6765  self.safe_intege
+0003ad20: 7228 7061 7261 6d73 2c20 2765 6e64 5469  r(params, 'endTi
+0003ad30: 6d65 272c 2075 6e74 696c 2920 2023 2065  me', until)  # e
+0003ad40: 7863 6861 6e67 652d 7370 6563 6966 6963  xchange-specific
+0003ad50: 2069 6e20 6d69 6c6c 6973 6563 6f6e 6473   in milliseconds
+0003ad60: 0a20 2020 2020 2020 2070 6172 616d 7320  .        params 
+0003ad70: 3d20 7365 6c66 2e6f 6d69 7428 7061 7261  = self.omit(para
+0003ad80: 6d73 2c20 5b27 656e 6454 696d 6527 2c20  ms, ['endTime', 
+0003ad90: 2774 696c 6c27 2c20 2775 6e74 696c 275d  'till', 'until']
+0003ada0: 290a 2020 2020 2020 2020 6966 2065 6e64  ).        if end
+0003adb0: 5469 6d65 2069 7320 6e6f 7420 4e6f 6e65  Time is not None
+0003adc0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+0003add0: 7175 6573 745b 2765 6e64 5469 6d65 275d  quest['endTime']
+0003ade0: 203d 2065 6e64 5469 6d65 0a20 2020 2020   = endTime.     
+0003adf0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0003ae00: 2020 2020 2069 6620 7369 6e63 6520 6973       if since is
+0003ae10: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+0003ae20: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+0003ae30: 2042 6164 5265 7175 6573 7428 7365 6c66   BadRequest(self
+0003ae40: 2e69 6420 2b20 2720 6665 7463 684f 7264  .id + ' fetchOrd
+0003ae50: 6572 7328 2920 7265 7175 6972 6573 2075  ers() requires u
+0003ae60: 6e74 696c 2f65 6e64 5469 6d65 2077 6865  ntil/endTime whe
+0003ae70: 6e20 7369 6e63 6520 6973 2070 726f 7669  n since is provi
+0003ae80: 6465 642e 2729 0a20 2020 2020 2020 2072  ded.').        r
+0003ae90: 6573 706f 6e73 6520 3d20 6177 6169 7420  esponse = await 
+0003aea0: 7365 6c66 2e70 7269 7661 7465 4765 7456  self.privateGetV
+0003aeb0: 354f 7264 6572 4869 7374 6f72 7928 7365  5OrderHistory(se
+0003aec0: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
+0003aed0: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
+0003aee0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+0003aef0: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+0003af00: 2020 2020 2020 2020 2272 6574 436f 6465          "retCode
+0003af10: 223a 2030 2c0a 2020 2020 2020 2020 2320  ": 0,.        # 
+0003af20: 2020 2020 2020 2020 2272 6574 4d73 6722          "retMsg"
+0003af30: 3a20 224f 4b22 2c0a 2020 2020 2020 2020  : "OK",.        
+0003af40: 2320 2020 2020 2020 2020 2272 6573 756c  #         "resul
+0003af50: 7422 3a20 7b0a 2020 2020 2020 2020 2320  t": {.        # 
+0003af60: 2020 2020 2020 2020 2020 2020 226e 6578              "nex
+0003af70: 7450 6167 6543 7572 736f 7222 3a20 2230  tPageCursor": "0
+0003af80: 3332 3334 6465 392d 3133 3332 2d34 3165  3234de9-1332-41e
+0003af90: 622d 6238 3035 2d34 6139 6634 3263 3133  b-b805-4a9f42c13
+0003afa0: 3661 3325 3341 3136 3732 3232 3031 3039  6a3%3A1672220109
+0003afb0: 3338 3725 3243 3033 3233 3464 6539 2d31  387%2C03234de9-1
+0003afc0: 3333 322d 3431 6562 2d62 3830 352d 3461  332-41eb-b805-4a
+0003afd0: 3966 3432 6331 3336 6133 2533 4131 3637  9f42c136a3%3A167
+0003afe0: 3232 3230 3130 3933 3837 222c 0a20 2020  2220109387",.   
+0003aff0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003b000: 2020 2022 6361 7465 676f 7279 223a 2022     "category": "
+0003b010: 6c69 6e65 6172 222c 0a20 2020 2020 2020  linear",.       
+0003b020: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+0003b030: 6c69 7374 223a 205b 0a20 2020 2020 2020  list": [.       
+0003b040: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0003b050: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
+0003b060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b070: 2020 2022 7379 6d62 6f6c 223a 2022 4254     "symbol": "BT
+0003b080: 4355 5344 5422 2c0a 2020 2020 2020 2020  CUSDT",.        
+0003b090: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0003b0a0: 2020 2020 2020 226f 7264 6572 5479 7065        "orderType
+0003b0b0: 223a 2022 4c69 6d69 7422 2c0a 2020 2020  ": "Limit",.    
+0003b0c0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0003b0d0: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+0003b0e0: 4c69 6e6b 4964 223a 2022 7465 7374 2d30  LinkId": "test-0
+0003b0f0: 3031 222c 0a20 2020 2020 2020 2023 2020  01",.        #  
+0003b100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b110: 2020 2022 6f72 6465 7249 6422 3a20 2230     "orderId": "0
+0003b120: 3332 3334 6465 392d 3133 3332 2d34 3165  3234de9-1332-41e
+0003b130: 622d 6238 3035 2d34 6139 6634 3263 3133  b-b805-4a9f42c13
+0003b140: 3661 3322 2c0a 2020 2020 2020 2020 2320  6a3",.        # 
+0003b150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b160: 2020 2020 2263 616e 6365 6c54 7970 6522      "cancelType"
+0003b170: 3a20 2243 616e 6365 6c42 7955 7365 7222  : "CancelByUser"
+0003b180: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003b190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b1a0: 2261 7667 5072 6963 6522 3a20 2230 222c  "avgPrice": "0",
+0003b1b0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003b1c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0003b1d0: 7374 6f70 4f72 6465 7254 7970 6522 3a20  stopOrderType": 
+0003b1e0: 2255 4e4b 4e4f 574e 222c 0a20 2020 2020  "UNKNOWN",.     
+0003b1f0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0003b200: 2020 2020 2020 2020 2022 6c61 7374 5072           "lastPr
+0003b210: 6963 654f 6e43 7265 6174 6564 223a 2022  iceOnCreated": "
+0003b220: 3136 3635 362e 3522 2c0a 2020 2020 2020  16656.5",.      
+0003b230: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0003b240: 2020 2020 2020 2020 226f 7264 6572 5374          "orderSt
+0003b250: 6174 7573 223a 2022 4361 6e63 656c 6c65  atus": "Cancelle
+0003b260: 6422 2c0a 2020 2020 2020 2020 2320 2020  d",.        #   
+0003b270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b280: 2020 2274 616b 6550 726f 6669 7422 3a20    "takeProfit": 
+0003b290: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
+0003b2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b2b0: 2020 2263 756d 4578 6563 5661 6c75 6522    "cumExecValue"
+0003b2c0: 3a20 2230 222c 0a20 2020 2020 2020 2023  : "0",.        #
+0003b2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b2e0: 2020 2020 2022 7472 6967 6765 7244 6972       "triggerDir
+0003b2f0: 6563 7469 6f6e 223a 2030 2c0a 2020 2020  ection": 0,.    
+0003b300: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0003b310: 2020 2020 2020 2020 2020 2262 6c6f 636b            "block
+0003b320: 5472 6164 6549 6422 3a20 2222 2c0a 2020  TradeId": "",.  
+0003b330: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003b340: 2020 2020 2020 2020 2020 2020 2272 656a              "rej
+0003b350: 6563 7452 6561 736f 6e22 3a20 2245 435f  ectReason": "EC_
+0003b360: 5065 7243 616e 6365 6c52 6571 7565 7374  PerCancelRequest
+0003b370: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0003b380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b390: 2022 6973 4c65 7665 7261 6765 223a 2022   "isLeverage": "
+0003b3a0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0003b3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b3c0: 2022 7072 6963 6522 3a20 2231 3830 3030   "price": "18000
+0003b3d0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0003b3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b3f0: 2022 6f72 6465 7249 7622 3a20 2222 2c0a   "orderIv": "",.
+0003b400: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003b410: 2020 2020 2020 2020 2020 2020 2020 2263                "c
+0003b420: 7265 6174 6564 5469 6d65 223a 2022 3136  reatedTime": "16
+0003b430: 3732 3232 3031 3039 3338 3722 2c0a 2020  72220109387",.  
+0003b440: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003b450: 2020 2020 2020 2020 2020 2020 2274 7054              "tpT
+0003b460: 7269 6767 6572 4279 223a 2022 554e 4b4e  riggerBy": "UNKN
+0003b470: 4f57 4e22 2c0a 2020 2020 2020 2020 2320  OWN",.        # 
+0003b480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b490: 2020 2020 2270 6f73 6974 696f 6e49 6478      "positionIdx
+0003b4a0: 223a 2030 2c0a 2020 2020 2020 2020 2320  ": 0,.        # 
+0003b4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b4c0: 2020 2020 2274 696d 6549 6e46 6f72 6365      "timeInForce
+0003b4d0: 223a 2022 476f 6f64 5469 6c6c 4361 6e63  ": "GoodTillCanc
+0003b4e0: 656c 222c 0a20 2020 2020 2020 2023 2020  el",.        #  
+0003b4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b500: 2020 2022 6c65 6176 6573 5661 6c75 6522     "leavesValue"
+0003b510: 3a20 2230 222c 0a20 2020 2020 2020 2023  : "0",.        #
+0003b520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b530: 2020 2020 2022 7570 6461 7465 6454 696d       "updatedTim
+0003b540: 6522 3a20 2231 3637 3232 3230 3131 3431  e": "16722201141
+0003b550: 3233 222c 0a20 2020 2020 2020 2023 2020  23",.        #  
+0003b560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b570: 2020 2022 7369 6465 223a 2022 5365 6c6c     "side": "Sell
+0003b580: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0003b590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b5a0: 2022 7472 6967 6765 7250 7269 6365 223a   "triggerPrice":
+0003b5b0: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
+0003b5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b5d0: 2020 2022 6375 6d45 7865 6346 6565 223a     "cumExecFee":
+0003b5e0: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
+0003b5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b600: 2020 2020 2273 6c54 7269 6767 6572 4279      "slTriggerBy
+0003b610: 223a 2022 554e 4b4e 4f57 4e22 2c0a 2020  ": "UNKNOWN",.  
+0003b620: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003b630: 2020 2020 2020 2020 2020 2020 226c 6561              "lea
+0003b640: 7665 7351 7479 223a 2022 3022 2c0a 2020  vesQty": "0",.  
+0003b650: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003b660: 2020 2020 2020 2020 2020 2020 2263 6c6f              "clo
+0003b670: 7365 4f6e 5472 6967 6765 7222 3a20 4661  seOnTrigger": Fa
+0003b680: 6c73 652c 0a20 2020 2020 2020 2023 2020  lse,.        #  
+0003b690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b6a0: 2020 2022 6375 6d45 7865 6351 7479 223a     "cumExecQty":
+0003b6b0: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
+0003b6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b6d0: 2020 2020 2272 6564 7563 654f 6e6c 7922      "reduceOnly"
+0003b6e0: 3a20 4661 6c73 652c 0a20 2020 2020 2020  : False,.       
+0003b6f0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0003b700: 2020 2020 2020 2022 7174 7922 3a20 2230         "qty": "0
+0003b710: 2e31 222c 0a20 2020 2020 2020 2023 2020  .1",.        #  
+0003b720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b730: 2020 2022 7374 6f70 4c6f 7373 223a 2022     "stopLoss": "
+0003b740: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0003b750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b760: 2022 7472 6967 6765 7242 7922 3a20 2255   "triggerBy": "U
+0003b770: 4e4b 4e4f 574e 220a 2020 2020 2020 2020  NKNOWN".        
+0003b780: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0003b790: 2020 7d0a 2020 2020 2020 2020 2320 2020    }.        #   
+0003b7a0: 2020 2020 2020 2020 2020 5d0a 2020 2020            ].    
+0003b7b0: 2020 2020 2320 2020 2020 2020 2020 7d2c      #         },
+0003b7c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003b7d0: 2020 2022 7265 7445 7874 496e 666f 223a     "retExtInfo":
+0003b7e0: 207b 7d2c 0a20 2020 2020 2020 2023 2020   {},.        #  
+0003b7f0: 2020 2020 2020 2022 7469 6d65 223a 2031         "time": 1
+0003b800: 3637 3232 3231 3236 3338 3632 0a20 2020  672221263862.   
+0003b810: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
+0003b820: 2020 2020 2023 0a20 2020 2020 2020 2072       #.        r
+0003b830: 6573 756c 7420 3d20 7365 6c66 2e73 6166  esult = self.saf
+0003b840: 655f 7661 6c75 6528 7265 7370 6f6e 7365  e_value(response
+0003b850: 2c20 2772 6573 756c 7427 2c20 7b7d 290a  , 'result', {}).
+0003b860: 2020 2020 2020 2020 6461 7461 203d 2073          data = s
+0003b870: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
+0003b880: 6573 756c 742c 2027 6c69 7374 272c 205b  esult, 'list', [
+0003b890: 5d29 0a20 2020 2020 2020 2072 6574 7572  ]).        retur
+0003b8a0: 6e20 7365 6c66 2e70 6172 7365 5f6f 7264  n self.parse_ord
+0003b8b0: 6572 7328 6461 7461 2c20 6d61 726b 6574  ers(data, market
+0003b8c0: 2c20 7369 6e63 652c 206c 696d 6974 290a  , since, limit).
+0003b8d0: 0a20 2020 2061 7379 6e63 2064 6566 2066  .    async def f
+0003b8e0: 6574 6368 5f75 6e69 6669 6564 5f6d 6172  etch_unified_mar
+0003b8f0: 6769 6e5f 6f72 6465 7273 2873 656c 662c  gin_orders(self,
+0003b900: 2073 796d 626f 6c3a 204f 7074 696f 6e61   symbol: Optiona
+0003b910: 6c5b 7374 725d 203d 204e 6f6e 652c 2073  l[str] = None, s
+0003b920: 696e 6365 3a20 4f70 7469 6f6e 616c 5b69  ince: Optional[i
+0003b930: 6e74 5d20 3d20 4e6f 6e65 2c20 6c69 6d69  nt] = None, limi
+0003b940: 743a 204f 7074 696f 6e61 6c5b 696e 745d  t: Optional[int]
+0003b950: 203d 204e 6f6e 652c 2070 6172 616d 733d   = None, params=
+0003b960: 7b7d 293a 0a20 2020 2020 2020 2061 7761  {}):.        awa
+0003b970: 6974 2073 656c 662e 6c6f 6164 5f6d 6172  it self.load_mar
+0003b980: 6b65 7473 2829 0a20 2020 2020 2020 2072  kets().        r
+0003b990: 6571 7565 7374 203d 207b 0a20 2020 2020  equest = {.     
+0003b9a0: 2020 2020 2020 2023 2027 7379 6d62 6f6c         # 'symbol
+0003b9b0: 273a 206d 6172 6b65 745b 2769 6427 5d2c  ': market['id'],
+0003b9c0: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+0003b9d0: 6361 7465 676f 7279 272c 2054 7970 6520  category', Type 
+0003b9e0: 6f66 2064 6572 6976 6174 6976 6573 2070  of derivatives p
+0003b9f0: 726f 6475 6374 3a20 6c69 6e65 6172 206f  roduct: linear o
+0003ba00: 7220 6f70 7469 6f6e 2e0a 2020 2020 2020  r option..      
+0003ba10: 2020 2020 2020 2320 2762 6173 6543 6f69        # 'baseCoi
+0003ba20: 6e27 2c20 4261 7365 2063 6f69 6e2e 2057  n', Base coin. W
+0003ba30: 6865 6e20 6361 7465 676f 7279 3d6f 7074  hen category=opt
+0003ba40: 696f 6e2e 2049 6620 6e6f 7420 7061 7373  ion. If not pass
+0003ba50: 6564 2c20 4254 4320 6279 2064 6566 6175  ed, BTC by defau
+0003ba60: 6c74 3b20 7768 656e 2063 6174 6567 6f72  lt; when categor
+0003ba70: 793d 6c69 6e65 6172 2c20 6966 2042 5443  y=linear, if BTC
+0003ba80: 2070 6173 7365 642c 2042 5443 5045 5250   passed, BTCPERP
+0003ba90: 2026 2042 5443 5553 4454 2072 6574 7572   & BTCUSDT retur
+0003baa0: 6e65 642e 0a20 2020 2020 2020 2020 2020  ned..           
+0003bab0: 2023 2027 6f72 6465 7249 6427 2c20 4f72   # 'orderId', Or
+0003bac0: 6465 7220 4944 0a20 2020 2020 2020 2020  der ID.         
+0003bad0: 2020 2023 2027 6f72 6465 724c 696e 6b49     # 'orderLinkI
+0003bae0: 6427 2c20 556e 6971 7565 2075 7365 722d  d', Unique user-
+0003baf0: 7365 7420 6f72 6465 7220 4944 0a20 2020  set order ID.   
+0003bb00: 2020 2020 2020 2020 2023 2027 6f72 6465           # 'orde
+0003bb10: 7253 7461 7475 7327 2c20 5175 6572 7920  rStatus', Query 
+0003bb20: 6c69 7374 206f 6620 6f72 6465 7273 2069  list of orders i
+0003bb30: 6e20 6465 7369 676e 6174 6564 2073 7461  n designated sta
+0003bb40: 7465 732e 2049 6620 7365 6c66 2070 6172  tes. If self par
+0003bb50: 616d 6574 6572 2069 7320 6e6f 7420 7061  ameter is not pa
+0003bb60: 7373 6564 2c20 7468 6520 6f72 6465 7273  ssed, the orders
+0003bb70: 2069 6e20 616c 6c20 7374 6174 6573 2073   in all states s
+0003bb80: 6861 6c6c 2062 6520 656e 7175 6972 6564  hall be enquired
+0003bb90: 2062 7920 6465 6661 756c 742e 2054 6869   by default. Thi
+0003bba0: 7320 7061 7261 6d65 7465 7220 7375 7070  s parameter supp
+0003bbb0: 6f72 7473 206d 756c 7469 2d73 7461 7465  orts multi-state
+0003bbc0: 2069 6e71 7569 7279 2e20 5374 6174 6573   inquiry. States
+0003bbd0: 2073 686f 756c 6420 6265 2073 6570 6172   should be separ
+0003bbe0: 6174 6564 2077 6974 6820 456e 676c 6973  ated with Englis
+0003bbf0: 6820 636f 6d6d 6173 2e0a 2020 2020 2020  h commas..      
+0003bc00: 2020 2020 2020 2320 276f 7264 6572 4669        # 'orderFi
+0003bc10: 6c74 6572 272c 2043 6f6e 6469 7469 6f6e  lter', Condition
+0003bc20: 616c 206f 7264 6572 206f 7220 6163 7469  al order or acti
+0003bc30: 7665 206f 7264 6572 0a20 2020 2020 2020  ve order.       
+0003bc40: 2020 2020 2023 2027 6469 7265 6374 696f       # 'directio
+0003bc50: 6e27 2c20 7072 6576 3a20 7072 6576 2c20  n', prev: prev, 
+0003bc60: 6e65 7874 3a20 6e65 7874 2e0a 2020 2020  next: next..    
+0003bc70: 2020 2020 2020 2020 2320 276c 696d 6974          # 'limit
+0003bc80: 273a 206e 756d 6265 722c 2044 6174 6120  ': number, Data 
+0003bc90: 7175 616e 7469 7479 2070 6572 2070 6167  quantity per pag
+0003bca0: 653a 204d 6178 2064 6174 6120 7661 6c75  e: Max data valu
+0003bcb0: 6520 7065 7220 7061 6765 2069 7320 3530  e per page is 50
+0003bcc0: 2c20 616e 6420 6465 6661 756c 7420 7661  , and default va
+0003bcd0: 6c75 6520 6174 2032 302e 0a20 2020 2020  lue at 20..     
+0003bce0: 2020 2020 2020 2023 2027 6375 7273 6f72         # 'cursor
+0003bcf0: 272c 2041 5049 2070 6173 732d 7468 726f  ', API pass-thro
+0003bd00: 7567 682e 2061 6363 6f75 6e74 5479 7065  ugh. accountType
+0003bd10: 202b 2063 6174 6567 6f72 7920 2b20 6375   + category + cu
+0003bd20: 7273 6f72 202b 2e20 4966 2069 6e63 6f6e  rsor +. If incon
+0003bd30: 7369 7374 656e 742c 2074 6865 2066 6f6c  sistent, the fol
+0003bd40: 6c6f 7769 6e67 2073 686f 756c 6420 6265  lowing should be
+0003bd50: 2072 6574 7572 6e65 643a 2054 6865 2061   returned: The a
+0003bd60: 6363 6f75 6e74 2074 7970 6520 646f 6573  ccount type does
+0003bd70: 206e 6f74 206d 6174 6368 2074 6865 2073   not match the s
+0003bd80: 6572 7669 6365 2069 6e71 7569 7279 2e0a  ervice inquiry..
+0003bd90: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+0003bda0: 2020 6d61 726b 6574 203d 204e 6f6e 650a    market = None.
+0003bdb0: 2020 2020 2020 2020 6966 2073 796d 626f          if symbo
+0003bdc0: 6c20 6973 204e 6f6e 653a 0a20 2020 2020  l is None:.     
+0003bdd0: 2020 2020 2020 2073 7562 5479 7065 203d         subType =
+0003bde0: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
+0003bdf0: 2020 7375 6254 7970 652c 2070 6172 616d    subType, param
+0003be00: 7320 3d20 7365 6c66 2e68 616e 646c 655f  s = self.handle_
+0003be10: 7375 625f 7479 7065 5f61 6e64 5f70 6172  sub_type_and_par
+0003be20: 616d 7328 2766 6574 6368 556e 6966 6965  ams('fetchUnifie
+0003be30: 644d 6172 6769 6e4f 7264 6572 7327 2c20  dMarginOrders', 
+0003be40: 6d61 726b 6574 2c20 7061 7261 6d73 2c20  market, params, 
+0003be50: 276c 696e 6561 7227 290a 2020 2020 2020  'linear').      
+0003be60: 2020 2020 2020 7265 7175 6573 745b 2763        request['c
+0003be70: 6174 6567 6f72 7927 5d20 3d20 7375 6254  ategory'] = subT
+0003be80: 7970 650a 2020 2020 2020 2020 656c 7365  ype.        else
+0003be90: 3a0a 2020 2020 2020 2020 2020 2020 6d61  :.            ma
+0003bea0: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
+0003beb0: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
+0003bec0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+0003bed0: 7379 6d62 6f6c 275d 203d 206d 6172 6b65  symbol'] = marke
+0003bee0: 745b 2769 6427 5d0a 2020 2020 2020 2020  t['id'].        
+0003bef0: 2020 2020 6966 206d 6172 6b65 745b 276f      if market['o
+0003bf00: 7074 696f 6e27 5d3a 0a20 2020 2020 2020  ption']:.       
+0003bf10: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0003bf20: 5b27 6361 7465 676f 7279 275d 203d 2027  ['category'] = '
+0003bf30: 6f70 7469 6f6e 270a 2020 2020 2020 2020  option'.        
+0003bf40: 2020 2020 656c 6966 206d 6172 6b65 745b      elif market[
+0003bf50: 276c 696e 6561 7227 5d3a 0a20 2020 2020  'linear']:.     
+0003bf60: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+0003bf70: 7374 5b27 6361 7465 676f 7279 275d 203d  st['category'] =
+0003bf80: 2027 6c69 6e65 6172 270a 2020 2020 2020   'linear'.      
+0003bf90: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0003bfa0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+0003bfb0: 6520 4e6f 7453 7570 706f 7274 6564 2873  e NotSupported(s
+0003bfc0: 656c 662e 6964 202b 2027 2066 6574 6368  elf.id + ' fetch
+0003bfd0: 556e 6966 6965 644d 6172 6769 6e4f 7264  UnifiedMarginOrd
+0003bfe0: 6572 7328 2920 646f 6573 206e 6f74 2061  ers() does not a
+0003bff0: 6c6c 6f77 2069 6e76 6572 7365 206d 6172  llow inverse mar
+0003c000: 6b65 7420 6f72 6465 7273 2066 6f72 2027  ket orders for '
+0003c010: 202b 2073 796d 626f 6c20 2b20 2720 6d61   + symbol + ' ma
+0003c020: 726b 6574 7327 290a 2020 2020 2020 2020  rkets').        
+0003c030: 6973 5374 6f70 203d 2073 656c 662e 7361  isStop = self.sa
+0003c040: 6665 5f76 616c 7565 2870 6172 616d 732c  fe_value(params,
+0003c050: 2027 7374 6f70 272c 2046 616c 7365 290a   'stop', False).
+0003c060: 2020 2020 2020 2020 7061 7261 6d73 203d          params =
+0003c070: 2073 656c 662e 6f6d 6974 2870 6172 616d   self.omit(param
+0003c080: 732c 205b 2773 746f 7027 5d29 0a20 2020  s, ['stop']).   
+0003c090: 2020 2020 2069 6620 6973 5374 6f70 3a0a       if isStop:.
+0003c0a0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0003c0b0: 6573 745b 276f 7264 6572 4669 6c74 6572  est['orderFilter
+0003c0c0: 275d 203d 2027 5374 6f70 4f72 6465 7227  '] = 'StopOrder'
+0003c0d0: 0a20 2020 2020 2020 2069 6620 6c69 6d69  .        if limi
+0003c0e0: 7420 6973 206e 6f74 204e 6f6e 653a 0a20  t is not None:. 
+0003c0f0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+0003c100: 7374 5b27 6c69 6d69 7427 5d20 3d20 6c69  st['limit'] = li
+0003c110: 6d69 740a 2020 2020 2020 2020 7265 7370  mit.        resp
+0003c120: 6f6e 7365 203d 2061 7761 6974 2073 656c  onse = await sel
+0003c130: 662e 7072 6976 6174 6547 6574 556e 6966  f.privateGetUnif
+0003c140: 6965 6456 3350 7269 7661 7465 4f72 6465  iedV3PrivateOrde
+0003c150: 724c 6973 7428 7365 6c66 2e65 7874 656e  rList(self.exten
+0003c160: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
+0003c170: 7329 290a 2020 2020 2020 2020 230a 2020  s)).        #.  
+0003c180: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
+0003c190: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003c1a0: 2272 6574 436f 6465 223a 2030 2c0a 2020  "retCode": 0,.  
+0003c1b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003c1c0: 2272 6574 4d73 6722 3a20 2253 7563 6365  "retMsg": "Succe
+0003c1d0: 7373 222c 0a20 2020 2020 2020 2023 2020  ss",.        #  
+0003c1e0: 2020 2020 2020 2022 7265 7375 6c74 223a         "result":
+0003c1f0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+0003c200: 2020 2020 2022 6e65 7874 5061 6765 4375       "nextPageCu
+0003c210: 7273 6f72 223a 2022 3764 3137 6433 3539  rsor": "7d17d359
+0003c220: 2d34 6533 382d 3464 3361 2d39 6133 312d  -4e38-4d3a-9a31-
+0003c230: 3239 3739 3165 6632 6466 6437 2533 4131  29791ef2dfd7%3A1
+0003c240: 3635 3737 3131 3934 3939 3238 2532 4337  657711949928%2C7
+0003c250: 6431 3764 3335 392d 3465 3338 2d34 6433  d17d359-4e38-4d3
+0003c260: 612d 3961 3331 2d32 3937 3931 6566 3264  a-9a31-29791ef2d
+0003c270: 6664 3725 3341 3136 3537 3731 3139 3439  fd7%3A1657711949
+0003c280: 3932 3822 2c0a 2020 2020 2020 2020 2320  928",.        # 
+0003c290: 2020 2020 2020 2020 2263 6174 6567 6f72          "categor
+0003c2a0: 7922 3a20 226c 696e 6561 7222 2c0a 2020  y": "linear",.  
+0003c2b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003c2c0: 226c 6973 7422 3a20 5b0a 2020 2020 2020  "list": [.      
+0003c2d0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0003c2e0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0003c2f0: 2020 2020 2020 2020 2020 2020 2273 796d              "sym
+0003c300: 626f 6c22 3a20 2245 5448 5553 4454 222c  bol": "ETHUSDT",
+0003c310: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003c320: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
+0003c330: 7254 7970 6522 3a20 224d 6172 6b65 7422  rType": "Market"
+0003c340: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003c350: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+0003c360: 6572 4c69 6e6b 4964 223a 2022 222c 0a20  erLinkId": "",. 
+0003c370: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003c380: 2020 2020 2020 2020 2022 6f72 6465 7249           "orderI
+0003c390: 6422 3a20 2237 6431 3764 3335 392d 3465  d": "7d17d359-4e
+0003c3a0: 3338 2d34 6433 612d 3961 3331 2d32 3937  38-4d3a-9a31-297
+0003c3b0: 3931 6566 3264 6664 3722 2c0a 2020 2020  91ef2dfd7",.    
+0003c3c0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0003c3d0: 2020 2020 2020 2273 746f 704f 7264 6572        "stopOrder
+0003c3e0: 5479 7065 223a 2022 554e 4b4e 4f57 4e22  Type": "UNKNOWN"
+0003c3f0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003c400: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+0003c410: 6572 5374 6174 7573 223a 2022 4669 6c6c  erStatus": "Fill
+0003c420: 6564 222c 0a20 2020 2020 2020 2023 2020  ed",.        #  
+0003c430: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0003c440: 7461 6b65 5072 6f66 6974 223a 2022 222c  takeProfit": "",
+0003c450: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003c460: 2020 2020 2020 2020 2020 2022 6375 6d45             "cumE
+0003c470: 7865 6356 616c 7565 223a 2022 3533 362e  xecValue": "536.
+0003c480: 3932 3530 3030 3030 222c 0a20 2020 2020  92500000",.     
+0003c490: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0003c4a0: 2020 2020 2022 626c 6f63 6b54 7261 6465       "blockTrade
+0003c4b0: 4964 223a 2022 222c 0a20 2020 2020 2020  Id": "",.       
+0003c4c0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0003c4d0: 2020 2022 7265 6a65 6374 5265 6173 6f6e     "rejectReason
+0003c4e0: 223a 2022 4543 5f4e 6f45 7272 6f72 222c  ": "EC_NoError",
+0003c4f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003c500: 2020 2020 2020 2020 2020 2022 7072 6963             "pric
+0003c510: 6522 3a20 2231 3132 372e 3130 3030 3030  e": "1127.100000
+0003c520: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+0003c530: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0003c540: 6372 6561 7465 6454 696d 6522 3a20 3136  createdTime": 16
+0003c550: 3537 3731 3139 3439 3932 382c 0a20 2020  57711949928,.   
+0003c560: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003c570: 2020 2020 2020 2022 7470 5472 6967 6765         "tpTrigge
+0003c580: 7242 7922 3a20 2255 4e4b 4e4f 574e 222c  rBy": "UNKNOWN",
+0003c590: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003c5a0: 2020 2020 2020 2020 2020 2022 7469 6d65             "time
+0003c5b0: 496e 466f 7263 6522 3a20 2249 6d6d 6564  InForce": "Immed
+0003c5c0: 6961 7465 4f72 4361 6e63 656c 222c 0a20  iateOrCancel",. 
+0003c5d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003c5e0: 2020 2020 2020 2020 2022 6261 7365 5072           "basePr
+0003c5f0: 6963 6522 3a20 2222 2c0a 2020 2020 2020  ice": "",.      
+0003c600: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0003c610: 2020 2020 226c 6561 7665 7356 616c 7565      "leavesValue
+0003c620: 223a 2022 302e 3030 3030 3030 3030 222c  ": "0.00000000",
+0003c630: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003c640: 2020 2020 2020 2020 2020 2022 7570 6461             "upda
+0003c650: 7465 6454 696d 6522 3a20 3136 3537 3731  tedTime": 165771
+0003c660: 3139 3439 3934 352c 0a20 2020 2020 2020  1949945,.       
+0003c670: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0003c680: 2020 2022 7369 6465 223a 2022 4275 7922     "side": "Buy"
+0003c690: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003c6a0: 2020 2020 2020 2020 2020 2020 2274 7269              "tri
+0003c6b0: 6767 6572 5072 6963 6522 3a20 2222 2c0a  ggerPrice": "",.
+0003c6c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003c6d0: 2020 2020 2020 2020 2020 2263 756d 4578            "cumEx
+0003c6e0: 6563 4665 6522 3a20 2230 2e33 3232 3135  ecFee": "0.32215
+0003c6f0: 3530 3022 2c0a 2020 2020 2020 2020 2320  500",.        # 
+0003c700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003c710: 2273 6c54 7269 6767 6572 4279 223a 2022  "slTriggerBy": "
+0003c720: 554e 4b4e 4f57 4e22 2c0a 2020 2020 2020  UNKNOWN",.      
+0003c730: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0003c740: 2020 2020 226c 6561 7665 7351 7479 223a      "leavesQty":
+0003c750: 2022 302e 3030 3030 222c 0a20 2020 2020   "0.0000",.     
+0003c760: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0003c770: 2020 2020 2022 636c 6f73 654f 6e54 7269       "closeOnTri
+0003c780: 6767 6572 223a 2046 616c 7365 2c0a 2020  gger": False,.  
+0003c790: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003c7a0: 2020 2020 2020 2020 2263 756d 4578 6563          "cumExec
+0003c7b0: 5174 7922 3a20 2230 2e35 3030 3022 2c0a  Qty": "0.5000",.
+0003c7c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003c7d0: 2020 2020 2020 2020 2020 2272 6564 7563            "reduc
+0003c7e0: 654f 6e6c 7922 3a20 4661 6c73 652c 0a20  eOnly": False,. 
+0003c7f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003c800: 2020 2020 2020 2020 2022 7174 7922 3a20           "qty": 
+0003c810: 2230 2e35 3030 3022 2c0a 2020 2020 2020  "0.5000",.      
+0003c820: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0003c830: 2020 2020 2273 746f 704c 6f73 7322 3a20      "stopLoss": 
+0003c840: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
+0003c850: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+0003c860: 7269 6767 6572 4279 223a 2022 554e 4b4e  riggerBy": "UNKN
+0003c870: 4f57 4e22 2c0a 2020 2020 2020 2020 2320  OWN",.        # 
+0003c880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003c890: 226f 7264 6572 494d 223a 2022 220a 2020  "orderIM": "".  
+0003c8a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003c8b0: 2020 2020 7d5d 0a20 2020 2020 2020 2023      }].        #
+0003c8c0: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
+0003c8d0: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
+0003c8e0: 696d 6522 3a20 3136 3537 3731 3334 3531  ime": 1657713451
+0003c8f0: 3734 310a 2020 2020 2020 2020 2320 2020  741.        #   
+0003c900: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
+0003c910: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
+0003c920: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
+0003c930: 6573 706f 6e73 652c 2027 7265 7375 6c74  esponse, 'result
+0003c940: 272c 207b 7d29 0a20 2020 2020 2020 2064  ', {}).        d
+0003c950: 6174 6120 3d20 7365 6c66 2e73 6166 655f  ata = self.safe_
+0003c960: 7661 6c75 6528 7265 7375 6c74 2c20 276c  value(result, 'l
+0003c970: 6973 7427 2c20 5b5d 290a 2020 2020 2020  ist', []).      
+0003c980: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
+0003c990: 7273 655f 6f72 6465 7273 2864 6174 612c  rse_orders(data,
+0003c9a0: 206d 6172 6b65 742c 2073 696e 6365 2c20   market, since, 
+0003c9b0: 6c69 6d69 7429 0a0a 2020 2020 6173 796e  limit)..    asyn
+0003c9c0: 6320 6465 6620 6665 7463 685f 6465 7269  c def fetch_deri
+0003c9d0: 7661 7469 7665 735f 6f72 6465 7273 2873  vatives_orders(s
+0003c9e0: 656c 662c 2073 796d 626f 6c3a 204f 7074  elf, symbol: Opt
+0003c9f0: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
+0003ca00: 652c 2073 696e 6365 3a20 4f70 7469 6f6e  e, since: Option
+0003ca10: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c20  al[int] = None, 
+0003ca20: 6c69 6d69 743a 204f 7074 696f 6e61 6c5b  limit: Optional[
+0003ca30: 696e 745d 203d 204e 6f6e 652c 2070 6172  int] = None, par
+0003ca40: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
+0003ca50: 2061 7761 6974 2073 656c 662e 6c6f 6164   await self.load
+0003ca60: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
+0003ca70: 2020 206d 6172 6b65 7420 3d20 4e6f 6e65     market = None
+0003ca80: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
+0003ca90: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+0003caa0: 2023 2027 7379 6d62 6f6c 273a 206d 6172   # 'symbol': mar
+0003cab0: 6b65 745b 2769 6427 5d2c 0a20 2020 2020  ket['id'],.     
+0003cac0: 2020 2020 2020 2023 2027 6361 7465 676f         # 'catego
+0003cad0: 7279 272c 2054 7970 6520 6f66 2064 6572  ry', Type of der
+0003cae0: 6976 6174 6976 6573 2070 726f 6475 6374  ivatives product
+0003caf0: 3a20 7370 6f74 2c20 6c69 6e65 6172 206f  : spot, linear o
+0003cb00: 7220 6f70 7469 6f6e 2e0a 2020 2020 2020  r option..      
+0003cb10: 2020 2020 2020 2320 2762 6173 6543 6f69        # 'baseCoi
+0003cb20: 6e27 2c20 4261 7365 2063 6f69 6e2e 2057  n', Base coin. W
+0003cb30: 6865 6e20 6361 7465 676f 7279 3d6f 7074  hen category=opt
+0003cb40: 696f 6e2e 2049 6620 6e6f 7420 7061 7373  ion. If not pass
+0003cb50: 6564 2c20 4254 4320 6279 2064 6566 6175  ed, BTC by defau
+0003cb60: 6c74 3b20 7768 656e 2063 6174 6567 6f72  lt; when categor
+0003cb70: 793d 6c69 6e65 6172 2c20 6966 2042 5443  y=linear, if BTC
+0003cb80: 2070 6173 7365 642c 2042 5443 5045 5250   passed, BTCPERP
+0003cb90: 2026 2042 5443 5553 4454 2072 6574 7572   & BTCUSDT retur
+0003cba0: 6e65 642e 0a20 2020 2020 2020 2020 2020  ned..           
+0003cbb0: 2023 2027 6f72 6465 7249 6427 2c20 4f72   # 'orderId', Or
+0003cbc0: 6465 7220 4944 0a20 2020 2020 2020 2020  der ID.         
+0003cbd0: 2020 2023 2027 6f72 6465 724c 696e 6b49     # 'orderLinkI
+0003cbe0: 6427 2c20 556e 6971 7565 2075 7365 722d  d', Unique user-
+0003cbf0: 7365 7420 6f72 6465 7220 4944 0a20 2020  set order ID.   
+0003cc00: 2020 2020 2020 2020 2023 2027 6f72 6465           # 'orde
+0003cc10: 7253 7461 7475 7327 2c20 2023 2052 6574  rStatus',  # Ret
+0003cc20: 7572 6e20 616c 6c20 7374 6174 7573 206f  urn all status o
+0003cc30: 7264 6572 7320 6966 206e 6f74 2070 6173  rders if not pas
+0003cc40: 7365 640a 2020 2020 2020 2020 2020 2020  sed.            
+0003cc50: 2320 276f 7264 6572 4669 6c74 6572 272c  # 'orderFilter',
+0003cc60: 2043 6f6e 6469 7469 6f6e 616c 206f 7264   Conditional ord
+0003cc70: 6572 206f 7220 6163 7469 7665 206f 7264  er or active ord
+0003cc80: 6572 0a20 2020 2020 2020 2020 2020 2023  er.            #
+0003cc90: 2027 6c69 6d69 7427 3a20 6e75 6d62 6572   'limit': number
+0003cca0: 2c20 4461 7461 2071 7561 6e74 6974 7920  , Data quantity 
+0003ccb0: 7065 7220 7061 6765 3a20 4d61 7820 6461  per page: Max da
+0003ccc0: 7461 2076 616c 7565 2070 6572 2070 6167  ta value per pag
+0003ccd0: 6520 6973 2035 302c 2061 6e64 2064 6566  e is 50, and def
+0003cce0: 6175 6c74 2076 616c 7565 2061 7420 3230  ault value at 20
+0003ccf0: 2e0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+0003cd00: 2763 7572 736f 7227 2c20 4150 4920 7061  'cursor', API pa
+0003cd10: 7373 2d74 6872 6f75 6768 2e20 6163 636f  ss-through. acco
+0003cd20: 756e 7454 7970 6520 2b20 6361 7465 676f  untType + catego
+0003cd30: 7279 202b 2063 7572 736f 7220 2b2e 2049  ry + cursor +. I
+0003cd40: 6620 696e 636f 6e73 6973 7465 6e74 2c20  f inconsistent, 
+0003cd50: 7468 6520 666f 6c6c 6f77 696e 6720 7368  the following sh
+0003cd60: 6f75 6c64 2062 6520 7265 7475 726e 6564  ould be returned
+0003cd70: 3a20 5468 6520 6163 636f 756e 7420 7479  : The account ty
+0003cd80: 7065 2064 6f65 7320 6e6f 7420 6d61 7463  pe does not matc
+0003cd90: 6820 7468 6520 7365 7276 6963 6520 696e  h the service in
+0003cda0: 7175 6972 792e 0a20 2020 2020 2020 207d  quiry..        }
+0003cdb0: 0a20 2020 2020 2020 2069 6620 7379 6d62  .        if symb
+0003cdc0: 6f6c 2069 7320 4e6f 6e65 3a0a 2020 2020  ol is None:.    
+0003cdd0: 2020 2020 2020 2020 7479 7065 203d 204e          type = N
+0003cde0: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+0003cdf0: 7479 7065 2c20 7061 7261 6d73 203d 2073  type, params = s
+0003ce00: 656c 662e 6861 6e64 6c65 5f6d 6172 6b65  elf.handle_marke
+0003ce10: 745f 7479 7065 5f61 6e64 5f70 6172 616d  t_type_and_param
+0003ce20: 7328 2766 6574 6368 4f72 6465 7273 272c  s('fetchOrders',
+0003ce30: 206d 6172 6b65 742c 2070 6172 616d 7329   market, params)
+0003ce40: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+0003ce50: 7565 7374 5b27 6361 7465 676f 7279 275d  uest['category']
+0003ce60: 203d 2074 7970 650a 2020 2020 2020 2020   = type.        
+0003ce70: 2020 2020 6966 2074 7970 6520 3d3d 2027      if type == '
+0003ce80: 7377 6170 273a 0a20 2020 2020 2020 2020  swap':.         
+0003ce90: 2020 2020 2020 2073 7562 5479 7065 203d         subType =
+0003cea0: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
+0003ceb0: 2020 2020 2020 7375 6254 7970 652c 2070        subType, p
+0003cec0: 6172 616d 7320 3d20 7365 6c66 2e68 616e  arams = self.han
+0003ced0: 646c 655f 7375 625f 7479 7065 5f61 6e64  dle_sub_type_and
+0003cee0: 5f70 6172 616d 7328 2766 6574 6368 4f72  _params('fetchOr
+0003cef0: 6465 7273 272c 206d 6172 6b65 742c 2070  ders', market, p
+0003cf00: 6172 616d 732c 2027 6c69 6e65 6172 2729  arams, 'linear')
+0003cf10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003cf20: 2072 6571 7565 7374 5b27 6361 7465 676f   request['catego
+0003cf30: 7279 275d 203d 2073 7562 5479 7065 0a20  ry'] = subType. 
+0003cf40: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0003cf50: 2020 2020 2020 2020 206d 6172 6b65 7420           market 
+0003cf60: 3d20 7365 6c66 2e6d 6172 6b65 7428 7379  = self.market(sy
+0003cf70: 6d62 6f6c 290a 2020 2020 2020 2020 2020  mbol).          
+0003cf80: 2020 7265 7175 6573 745b 2773 796d 626f    request['symbo
+0003cf90: 6c27 5d20 3d20 6d61 726b 6574 5b27 6964  l'] = market['id
+0003cfa0: 275d 0a20 2020 2020 2020 2020 2020 2069  '].            i
+0003cfb0: 6620 6d61 726b 6574 5b27 6c69 6e65 6172  f market['linear
+0003cfc0: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+0003cfd0: 2020 2020 7265 7175 6573 745b 2763 6174      request['cat
+0003cfe0: 6567 6f72 7927 5d20 3d20 276c 696e 6561  egory'] = 'linea
+0003cff0: 7227 0a20 2020 2020 2020 2020 2020 2065  r'.            e
+0003d000: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0003d010: 2020 2020 2072 6571 7565 7374 5b27 6361       request['ca
+0003d020: 7465 676f 7279 275d 203d 2027 696e 7665  tegory'] = 'inve
+0003d030: 7273 6527 0a20 2020 2020 2020 2069 7353  rse'.        isS
+0003d040: 746f 7020 3d20 7365 6c66 2e73 6166 655f  top = self.safe_
+0003d050: 7661 6c75 6528 7061 7261 6d73 2c20 2773  value(params, 's
+0003d060: 746f 7027 2c20 4661 6c73 6529 0a20 2020  top', False).   
+0003d070: 2020 2020 2070 6172 616d 7320 3d20 7365       params = se
+0003d080: 6c66 2e6f 6d69 7428 7061 7261 6d73 2c20  lf.omit(params, 
+0003d090: 5b27 7374 6f70 275d 290a 2020 2020 2020  ['stop']).      
+0003d0a0: 2020 6966 2069 7353 746f 703a 0a20 2020    if isStop:.   
+0003d0b0: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0003d0c0: 5b27 6f72 6465 7246 696c 7465 7227 5d20  ['orderFilter'] 
+0003d0d0: 3d20 2753 746f 704f 7264 6572 270a 2020  = 'StopOrder'.  
+0003d0e0: 2020 2020 2020 6966 206c 696d 6974 2069        if limit i
+0003d0f0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0003d100: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+0003d110: 276c 696d 6974 275d 203d 206c 696d 6974  'limit'] = limit
+0003d120: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
+0003d130: 6520 3d20 6177 6169 7420 7365 6c66 2e70  e = await self.p
+0003d140: 7269 7661 7465 4765 7456 354f 7264 6572  rivateGetV5Order
+0003d150: 4869 7374 6f72 7928 7365 6c66 2e65 7874  History(self.ext
+0003d160: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
+0003d170: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
+0003d180: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+0003d190: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003d1a0: 2020 2272 6574 436f 6465 223a 2030 2c0a    "retCode": 0,.
+0003d1b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003d1c0: 2020 2272 6574 4d73 6722 3a20 224f 4b22    "retMsg": "OK"
+0003d1d0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003d1e0: 2020 2020 2272 6573 756c 7422 3a20 7b0a      "result": {.
+0003d1f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003d200: 2020 2020 2020 226e 6578 7450 6167 6543        "nextPageC
+0003d210: 7572 736f 7222 3a20 2230 3332 3334 6465  ursor": "03234de
+0003d220: 392d 3133 3332 2d34 3165 622d 6238 3035  9-1332-41eb-b805
+0003d230: 2d34 6139 6634 3263 3133 3661 3325 3341  -4a9f42c136a3%3A
+0003d240: 3136 3732 3232 3031 3039 3338 3725 3243  1672220109387%2C
+0003d250: 3033 3233 3464 6539 2d31 3333 322d 3431  03234de9-1332-41
+0003d260: 6562 2d62 3830 352d 3461 3966 3432 6331  eb-b805-4a9f42c1
+0003d270: 3336 6133 2533 4131 3637 3232 3230 3130  36a3%3A167222010
+0003d280: 3933 3837 222c 0a20 2020 2020 2020 2023  9387",.        #
+0003d290: 2020 2020 2020 2020 2020 2020 2022 6361               "ca
+0003d2a0: 7465 676f 7279 223a 2022 6c69 6e65 6172  tegory": "linear
+0003d2b0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0003d2c0: 2020 2020 2020 2020 2022 6c69 7374 223a           "list":
+0003d2d0: 205b 0a20 2020 2020 2020 2023 2020 2020   [.        #    
+0003d2e0: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
+0003d2f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003d300: 2020 2020 2020 2020 2020 2020 2022 7379               "sy
+0003d310: 6d62 6f6c 223a 2022 4254 4355 5344 5422  mbol": "BTCUSDT"
+0003d320: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
 0003d330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d340: 2020 2020 2022 7570 6461 7465 6454 696d       "updatedTim
-0003d350: 6522 3a20 2231 3637 3232 3230 3131 3431  e": "16722201141
-0003d360: 3233 222c 0a20 2020 2020 2020 2023 2020  23",.        #  
-0003d370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d380: 2020 2022 7369 6465 223a 2022 5365 6c6c     "side": "Sell
-0003d390: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0003d3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d3b0: 2022 7472 6967 6765 7250 7269 6365 223a   "triggerPrice":
-0003d3c0: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
-0003d3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d3e0: 2020 2022 6375 6d45 7865 6346 6565 223a     "cumExecFee":
-0003d3f0: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
-0003d400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d410: 2020 2020 2273 6c54 7269 6767 6572 4279      "slTriggerBy
-0003d420: 223a 2022 554e 4b4e 4f57 4e22 2c0a 2020  ": "UNKNOWN",.  
-0003d430: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003d440: 2020 2020 2020 2020 2020 2020 226c 6561              "lea
-0003d450: 7665 7351 7479 223a 2022 3022 2c0a 2020  vesQty": "0",.  
-0003d460: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003d470: 2020 2020 2020 2020 2020 2020 2263 6c6f              "clo
-0003d480: 7365 4f6e 5472 6967 6765 7222 3a20 4661  seOnTrigger": Fa
-0003d490: 6c73 652c 0a20 2020 2020 2020 2023 2020  lse,.        #  
-0003d4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d4b0: 2020 2022 6375 6d45 7865 6351 7479 223a     "cumExecQty":
-0003d4c0: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
+0003d340: 226f 7264 6572 5479 7065 223a 2022 4c69  "orderType": "Li
+0003d350: 6d69 7422 2c0a 2020 2020 2020 2020 2320  mit",.        # 
+0003d360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d370: 2020 2020 226f 7264 6572 4c69 6e6b 4964      "orderLinkId
+0003d380: 223a 2022 7465 7374 2d30 3031 222c 0a20  ": "test-001",. 
+0003d390: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003d3a0: 2020 2020 2020 2020 2020 2020 2022 6f72               "or
+0003d3b0: 6465 7249 6422 3a20 2230 3332 3334 6465  derId": "03234de
+0003d3c0: 392d 3133 3332 2d34 3165 622d 6238 3035  9-1332-41eb-b805
+0003d3d0: 2d34 6139 6634 3263 3133 3661 3322 2c0a  -4a9f42c136a3",.
+0003d3e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003d3f0: 2020 2020 2020 2020 2020 2020 2020 2263                "c
+0003d400: 616e 6365 6c54 7970 6522 3a20 2243 616e  ancelType": "Can
+0003d410: 6365 6c42 7955 7365 7222 2c0a 2020 2020  celByUser",.    
+0003d420: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0003d430: 2020 2020 2020 2020 2020 2261 7667 5072            "avgPr
+0003d440: 6963 6522 3a20 2230 222c 0a20 2020 2020  ice": "0",.     
+0003d450: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0003d460: 2020 2020 2020 2020 2022 7374 6f70 4f72           "stopOr
+0003d470: 6465 7254 7970 6522 3a20 2255 4e4b 4e4f  derType": "UNKNO
+0003d480: 574e 222c 0a20 2020 2020 2020 2023 2020  WN",.        #  
+0003d490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d4a0: 2020 2022 6c61 7374 5072 6963 654f 6e43     "lastPriceOnC
+0003d4b0: 7265 6174 6564 223a 2022 3136 3635 362e  reated": "16656.
+0003d4c0: 3522 2c0a 2020 2020 2020 2020 2320 2020  5",.        #   
 0003d4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d4e0: 2020 2020 2272 6564 7563 654f 6e6c 7922      "reduceOnly"
-0003d4f0: 3a20 4661 6c73 652c 0a20 2020 2020 2020  : False,.       
-0003d500: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0003d510: 2020 2020 2020 2022 7174 7922 3a20 2230         "qty": "0
-0003d520: 2e31 222c 0a20 2020 2020 2020 2023 2020  .1",.        #  
-0003d530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d540: 2020 2022 7374 6f70 4c6f 7373 223a 2022     "stopLoss": "
-0003d550: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0003d560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d570: 2022 7472 6967 6765 7242 7922 3a20 2255   "triggerBy": "U
-0003d580: 4e4b 4e4f 574e 220a 2020 2020 2020 2020  NKNOWN".        
-0003d590: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0003d5a0: 2020 7d0a 2020 2020 2020 2020 2320 2020    }.        #   
-0003d5b0: 2020 2020 2020 2020 2020 5d0a 2020 2020            ].    
-0003d5c0: 2020 2020 2320 2020 2020 2020 2020 7d2c      #         },
-0003d5d0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0003d5e0: 2020 2022 7265 7445 7874 496e 666f 223a     "retExtInfo":
-0003d5f0: 207b 7d2c 0a20 2020 2020 2020 2023 2020   {},.        #  
-0003d600: 2020 2020 2020 2022 7469 6d65 223a 2031         "time": 1
-0003d610: 3637 3232 3231 3236 3338 3632 0a20 2020  672221263862.   
-0003d620: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
-0003d630: 2020 2020 2023 0a20 2020 2020 2020 2072       #.        r
-0003d640: 6573 756c 7420 3d20 7365 6c66 2e73 6166  esult = self.saf
-0003d650: 655f 7661 6c75 6528 7265 7370 6f6e 7365  e_value(response
-0003d660: 2c20 2772 6573 756c 7427 2c20 7b7d 290a  , 'result', {}).
-0003d670: 2020 2020 2020 2020 6461 7461 203d 2073          data = s
-0003d680: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
-0003d690: 6573 756c 742c 2027 6c69 7374 272c 205b  esult, 'list', [
-0003d6a0: 5d29 0a20 2020 2020 2020 2072 6574 7572  ]).        retur
-0003d6b0: 6e20 7365 6c66 2e70 6172 7365 5f6f 7264  n self.parse_ord
-0003d6c0: 6572 7328 6461 7461 2c20 6d61 726b 6574  ers(data, market
-0003d6d0: 2c20 7369 6e63 652c 206c 696d 6974 290a  , since, limit).
-0003d6e0: 0a20 2020 2061 7379 6e63 2064 6566 2066  .    async def f
-0003d6f0: 6574 6368 5f6f 7264 6572 7328 7365 6c66  etch_orders(self
-0003d700: 2c20 7379 6d62 6f6c 3a20 4f70 7469 6f6e  , symbol: Option
-0003d710: 616c 5b73 7472 5d20 3d20 4e6f 6e65 2c20  al[str] = None, 
-0003d720: 7369 6e63 653a 204f 7074 696f 6e61 6c5b  since: Optional[
-0003d730: 696e 745d 203d 204e 6f6e 652c 206c 696d  int] = None, lim
-0003d740: 6974 3a20 4f70 7469 6f6e 616c 5b69 6e74  it: Optional[int
-0003d750: 5d20 3d20 4e6f 6e65 2c20 7061 7261 6d73  ] = None, params
-0003d760: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
-0003d770: 220a 2020 2020 2020 2020 6665 7463 6865  ".        fetche
-0003d780: 7320 696e 666f 726d 6174 696f 6e20 6f6e  s information on
-0003d790: 206d 756c 7469 706c 6520 6f72 6465 7273   multiple orders
-0003d7a0: 206d 6164 6520 6279 2074 6865 2075 7365   made by the use
-0003d7b0: 720a 2020 2020 2020 2020 3a70 6172 616d  r.        :param
-0003d7c0: 2073 7472 2073 796d 626f 6c3a 2075 6e69   str symbol: uni
-0003d7d0: 6669 6564 206d 6172 6b65 7420 7379 6d62  fied market symb
-0003d7e0: 6f6c 206f 6620 7468 6520 6d61 726b 6574  ol of the market
-0003d7f0: 206f 7264 6572 7320 7765 7265 206d 6164   orders were mad
-0003d800: 6520 696e 0a20 2020 2020 2020 203a 7061  e in.        :pa
-0003d810: 7261 6d20 696e 747c 4e6f 6e65 2073 696e  ram int|None sin
-0003d820: 6365 3a20 7468 6520 6561 726c 6965 7374  ce: the earliest
-0003d830: 2074 696d 6520 696e 206d 7320 746f 2066   time in ms to f
-0003d840: 6574 6368 206f 7264 6572 7320 666f 720a  etch orders for.
-0003d850: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
-0003d860: 6e74 7c4e 6f6e 6520 6c69 6d69 743a 2074  nt|None limit: t
-0003d870: 6865 206d 6178 696d 756d 206e 756d 6265  he maximum numbe
-0003d880: 7220 6f66 2020 6f72 6465 2073 7472 7563  r of  orde struc
-0003d890: 7475 7265 7320 746f 2072 6574 7269 6576  tures to retriev
-0003d8a0: 650a 2020 2020 2020 2020 3a70 6172 616d  e.        :param
-0003d8b0: 2064 6963 7420 7061 7261 6d73 3a20 6578   dict params: ex
-0003d8c0: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
-0003d8d0: 7065 6369 6669 6320 746f 2074 6865 2062  pecific to the b
-0003d8e0: 7962 6974 2061 7069 2065 6e64 706f 696e  ybit api endpoin
-0003d8f0: 740a 2020 2020 2020 2020 3a72 6574 7572  t.        :retur
-0003d900: 6e73 205b 6469 6374 5d3a 2061 206c 6973  ns [dict]: a lis
-0003d910: 7420 6f66 2060 6f72 6465 7220 7374 7275  t of `order stru
-0003d920: 6374 7572 6573 203c 6874 7470 733a 2f2f  ctures <https://
-0003d930: 646f 6373 2e63 6378 742e 636f 6d2f 232f  docs.ccxt.com/#/
-0003d940: 3f69 643d 6f72 6465 722d 7374 7275 6374  ?id=order-struct
-0003d950: 7572 653e 600a 2020 2020 2020 2020 2222  ure>`.        ""
-0003d960: 220a 2020 2020 2020 2020 6177 6169 7420  ".        await 
-0003d970: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
-0003d980: 7328 290a 2020 2020 2020 2020 6d61 726b  s().        mark
-0003d990: 6574 203d 204e 6f6e 650a 2020 2020 2020  et = None.      
-0003d9a0: 2020 7365 7474 6c65 203d 2073 656c 662e    settle = self.
-0003d9b0: 7361 6665 5f73 7472 696e 6728 7061 7261  safe_string(para
-0003d9c0: 6d73 2c20 2773 6574 746c 6543 6f69 6e27  ms, 'settleCoin'
-0003d9d0: 290a 2020 2020 2020 2020 6966 2073 6574  ).        if set
-0003d9e0: 746c 6520 6973 204e 6f6e 653a 0a20 2020  tle is None:.   
-0003d9f0: 2020 2020 2020 2020 2073 6574 746c 652c           settle,
-0003da00: 2070 6172 616d 7320 3d20 7365 6c66 2e68   params = self.h
-0003da10: 616e 646c 655f 6f70 7469 6f6e 5f61 6e64  andle_option_and
-0003da20: 5f70 6172 616d 7328 7061 7261 6d73 2c20  _params(params, 
-0003da30: 2766 6574 6368 4f72 6465 7273 272c 2027  'fetchOrders', '
-0003da40: 7365 7474 6c65 272c 2073 6574 746c 6529  settle', settle)
-0003da50: 0a20 2020 2020 2020 2069 6620 7379 6d62  .        if symb
-0003da60: 6f6c 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ol is not None:.
-0003da70: 2020 2020 2020 2020 2020 2020 6d61 726b              mark
-0003da80: 6574 203d 2073 656c 662e 6d61 726b 6574  et = self.market
-0003da90: 2873 796d 626f 6c29 0a20 2020 2020 2020  (symbol).       
-0003daa0: 2020 2020 2073 6574 746c 6520 3d20 6d61       settle = ma
-0003dab0: 726b 6574 5b27 7365 7474 6c65 275d 0a20  rket['settle']. 
-0003dac0: 2020 2020 2020 2073 7562 5479 7065 203d         subType =
-0003dad0: 204e 6f6e 650a 2020 2020 2020 2020 7375   None.        su
-0003dae0: 6254 7970 652c 2070 6172 616d 7320 3d20  bType, params = 
-0003daf0: 7365 6c66 2e68 616e 646c 655f 7375 625f  self.handle_sub_
-0003db00: 7479 7065 5f61 6e64 5f70 6172 616d 7328  type_and_params(
-0003db10: 2766 6574 6368 4f72 6465 7273 272c 206d  'fetchOrders', m
-0003db20: 6172 6b65 742c 2070 6172 616d 7329 0a20  arket, params). 
-0003db30: 2020 2020 2020 2069 7349 6e76 6572 7365         isInverse
-0003db40: 203d 2073 7562 5479 7065 203d 3d20 2769   = subType == 'i
-0003db50: 6e76 6572 7365 270a 2020 2020 2020 2020  nverse'.        
-0003db60: 6973 5573 6463 5365 7474 6c65 6420 3d20  isUsdcSettled = 
-0003db70: 7365 7474 6c65 203d 3d20 2755 5344 4327  settle == 'USDC'
-0003db80: 0a20 2020 2020 2020 2069 734c 696e 6561  .        isLinea
-0003db90: 7253 6574 746c 6520 3d20 6973 5573 6463  rSettle = isUsdc
-0003dba0: 5365 7474 6c65 6420 6f72 2028 7365 7474  Settled or (sett
-0003dbb0: 6c65 203d 3d20 2755 5344 5427 290a 2020  le == 'USDT').  
-0003dbc0: 2020 2020 2020 6966 2069 7349 6e76 6572        if isInver
-0003dbd0: 7365 2061 6e64 2069 734c 696e 6561 7253  se and isLinearS
-0003dbe0: 6574 746c 653a 0a20 2020 2020 2020 2020  ettle:.         
-0003dbf0: 2020 2072 6169 7365 2041 7267 756d 656e     raise Argumen
-0003dc00: 7473 5265 7175 6972 6564 2873 656c 662e  tsRequired(self.
-0003dc10: 6964 202b 2027 2066 6574 6368 4f72 6465  id + ' fetchOrde
-0003dc20: 7273 2077 6974 6820 696e 7665 7273 6520  rs with inverse 
-0003dc30: 7375 6254 7970 6520 7265 7175 6972 6573  subType requires
-0003dc40: 2073 6574 746c 6520 746f 206e 6f74 2062   settle to not b
-0003dc50: 6520 5553 4454 206f 7220 5553 4443 2729  e USDT or USDC')
-0003dc60: 0a20 2020 2020 2020 2074 7970 652c 2071  .        type, q
-0003dc70: 7565 7279 203d 2073 656c 662e 6861 6e64  uery = self.hand
-0003dc80: 6c65 5f6d 6172 6b65 745f 7479 7065 5f61  le_market_type_a
-0003dc90: 6e64 5f70 6172 616d 7328 2766 6574 6368  nd_params('fetch
-0003dca0: 4f72 6465 7273 272c 206d 6172 6b65 742c  Orders', market,
-0003dcb0: 2070 6172 616d 7329 0a20 2020 2020 2020   params).       
-0003dcc0: 2065 6e61 626c 6555 6e69 6669 6564 4d61   enableUnifiedMa
-0003dcd0: 7267 696e 2c20 656e 6162 6c65 556e 6966  rgin, enableUnif
-0003dce0: 6965 6441 6363 6f75 6e74 203d 2061 7761  iedAccount = awa
-0003dcf0: 6974 2073 656c 662e 6973 5f75 6e69 6669  it self.is_unifi
-0003dd00: 6564 5f65 6e61 626c 6564 2829 0a20 2020  ed_enabled().   
-0003dd10: 2020 2020 2069 6620 656e 6162 6c65 556e       if enableUn
-0003dd20: 6966 6965 6441 6363 6f75 6e74 2061 6e64  ifiedAccount and
-0003dd30: 206e 6f74 2069 7349 6e76 6572 7365 3a0a   not isInverse:.
-0003dd40: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0003dd50: 726e 2061 7761 6974 2073 656c 662e 6665  rn await self.fe
-0003dd60: 7463 685f 756e 6966 6965 645f 6163 636f  tch_unified_acco
-0003dd70: 756e 745f 6f72 6465 7273 2873 796d 626f  unt_orders(symbo
-0003dd80: 6c2c 2073 696e 6365 2c20 6c69 6d69 742c  l, since, limit,
-0003dd90: 2071 7565 7279 290a 2020 2020 2020 2020   query).        
-0003dda0: 656c 6966 2074 7970 6520 3d3d 2027 7370  elif type == 'sp
-0003ddb0: 6f74 273a 0a20 2020 2020 2020 2020 2020  ot':.           
-0003ddc0: 2072 6169 7365 204e 6f74 5375 7070 6f72   raise NotSuppor
-0003ddd0: 7465 6428 7365 6c66 2e69 6420 2b20 2720  ted(self.id + ' 
-0003dde0: 6665 7463 684f 7264 6572 7328 2920 6f6e  fetchOrders() on
-0003ddf0: 6c79 2073 7570 706f 7274 2027 202b 2074  ly support ' + t
-0003de00: 7970 6520 2b20 2720 6d61 726b 6574 7320  ype + ' markets 
-0003de10: 666f 7220 756e 6966 6965 6420 7472 6164  for unified trad
-0003de20: 6520 6163 636f 756e 742c 2075 7365 2065  e account, use e
-0003de30: 7863 6861 6e67 652e 6665 7463 685f 6f70  xchange.fetch_op
-0003de40: 656e 5f6f 7264 6572 7328 2920 616e 6420  en_orders() and 
-0003de50: 6578 6368 616e 6765 2e66 6574 6368 436c  exchange.fetchCl
-0003de60: 6f73 6564 4f72 6465 7273 2829 2069 6e73  osedOrders() ins
-0003de70: 7465 6164 2729 0a20 2020 2020 2020 2065  tead').        e
-0003de80: 6c69 6620 656e 6162 6c65 556e 6966 6965  lif enableUnifie
-0003de90: 644d 6172 6769 6e20 616e 6420 6e6f 7420  dMargin and not 
-0003dea0: 6973 496e 7665 7273 653a 0a20 2020 2020  isInverse:.     
-0003deb0: 2020 2020 2020 2072 6574 7572 6e20 6177         return aw
-0003dec0: 6169 7420 7365 6c66 2e66 6574 6368 5f75  ait self.fetch_u
-0003ded0: 6e69 6669 6564 5f6d 6172 6769 6e5f 6f72  nified_margin_or
-0003dee0: 6465 7273 2873 796d 626f 6c2c 2073 696e  ders(symbol, sin
-0003def0: 6365 2c20 6c69 6d69 742c 2071 7565 7279  ce, limit, query
-0003df00: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
-0003df10: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0003df20: 726e 2061 7761 6974 2073 656c 662e 6665  rn await self.fe
-0003df30: 7463 685f 6465 7269 7661 7469 7665 735f  tch_derivatives_
-0003df40: 6f72 6465 7273 2873 796d 626f 6c2c 2073  orders(symbol, s
-0003df50: 696e 6365 2c20 6c69 6d69 742c 2071 7565  ince, limit, que
-0003df60: 7279 290a 0a20 2020 2061 7379 6e63 2064  ry)..    async d
-0003df70: 6566 2066 6574 6368 5f73 706f 745f 636c  ef fetch_spot_cl
-0003df80: 6f73 6564 5f6f 7264 6572 7328 7365 6c66  osed_orders(self
-0003df90: 2c20 7379 6d62 6f6c 3a20 4f70 7469 6f6e  , symbol: Option
-0003dfa0: 616c 5b73 7472 5d20 3d20 4e6f 6e65 2c20  al[str] = None, 
-0003dfb0: 7369 6e63 653a 204f 7074 696f 6e61 6c5b  since: Optional[
-0003dfc0: 696e 745d 203d 204e 6f6e 652c 206c 696d  int] = None, lim
-0003dfd0: 6974 3a20 4f70 7469 6f6e 616c 5b69 6e74  it: Optional[int
-0003dfe0: 5d20 3d20 4e6f 6e65 2c20 7061 7261 6d73  ] = None, params
-0003dff0: 3d7b 7d29 3a0a 2020 2020 2020 2020 6177  ={}):.        aw
-0003e000: 6169 7420 7365 6c66 2e6c 6f61 645f 6d61  ait self.load_ma
-0003e010: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
-0003e020: 6d61 726b 6574 203d 204e 6f6e 650a 2020  market = None.  
-0003e030: 2020 2020 2020 6966 2073 796d 626f 6c20        if symbol 
-0003e040: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0003e050: 2020 2020 2020 2020 206d 6172 6b65 7420           market 
-0003e060: 3d20 7365 6c66 2e6d 6172 6b65 7428 7379  = self.market(sy
-0003e070: 6d62 6f6c 290a 2020 2020 2020 2020 7265  mbol).        re
-0003e080: 7175 6573 7420 3d20 7b7d 0a20 2020 2020  quest = {}.     
-0003e090: 2020 2069 6620 7379 6d62 6f6c 2069 7320     if symbol is 
-0003e0a0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0003e0b0: 2020 2020 2020 7265 7175 6573 745b 2773        request['s
-0003e0c0: 796d 626f 6c27 5d20 3d20 6d61 726b 6574  ymbol'] = market
-0003e0d0: 5b27 6964 275d 0a20 2020 2020 2020 2069  ['id'].        i
-0003e0e0: 6620 6c69 6d69 7420 6973 206e 6f74 204e  f limit is not N
-0003e0f0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-0003e100: 2072 6571 7565 7374 5b27 6c69 6d69 7427   request['limit'
-0003e110: 5d20 3d20 6c69 6d69 740a 2020 2020 2020  ] = limit.      
-0003e120: 2020 6966 2073 696e 6365 2069 7320 6e6f    if since is no
-0003e130: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0003e140: 2020 2020 7265 7175 6573 745b 2773 7461      request['sta
-0003e150: 7274 5469 6d65 275d 203d 2073 696e 6365  rtTime'] = since
-0003e160: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
-0003e170: 6520 3d20 6177 6169 7420 7365 6c66 2e70  e = await self.p
-0003e180: 7269 7661 7465 4765 7453 706f 7456 3350  rivateGetSpotV3P
-0003e190: 7269 7661 7465 4869 7374 6f72 794f 7264  rivateHistoryOrd
-0003e1a0: 6572 7328 7365 6c66 2e65 7874 656e 6428  ers(self.extend(
-0003e1b0: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
-0003e1c0: 290a 2020 2020 2020 2020 7265 7375 6c74  ).        result
-0003e1d0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
-0003e1e0: 7565 2872 6573 706f 6e73 652c 2027 7265  ue(response, 're
-0003e1f0: 7375 6c74 272c 207b 7d29 0a20 2020 2020  sult', {}).     
-0003e200: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
-0003e210: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-0003e220: 2020 2020 2022 7265 7443 6f64 6522 3a20       "retCode": 
-0003e230: 2230 222c 0a20 2020 2020 2020 2023 2020  "0",.        #  
-0003e240: 2020 2020 2020 2272 6574 4d73 6722 3a20        "retMsg": 
-0003e250: 224f 4b22 2c0a 2020 2020 2020 2020 2320  "OK",.        # 
-0003e260: 2020 2020 2020 2022 7265 7375 6c74 223a         "result":
-0003e270: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-0003e280: 2020 2020 2020 2020 226c 6973 7422 3a20          "list": 
-0003e290: 5b0a 2020 2020 2020 2020 2320 2020 2020  [.        #     
-0003e2a0: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
-0003e2b0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0003e2c0: 2020 2020 2020 2020 2020 2261 6363 6f75            "accou
-0003e2d0: 6e74 4964 223a 2022 3133 3338 3034 3334  ntId": "13380434
-0003e2e0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0003e2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003e300: 2273 796d 626f 6c22 3a20 2241 4156 4555  "symbol": "AAVEU
-0003e310: 5344 5422 2c0a 2020 2020 2020 2020 2320  SDT",.        # 
-0003e320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003e330: 2020 2022 6f72 6465 724c 696e 6b49 6422     "orderLinkId"
-0003e340: 3a20 2231 3636 3636 3937 3834 3739 3636  : "1666697847966
-0003e350: 3630 3422 2c0a 2020 2020 2020 2020 2320  604",.        # 
-0003e360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003e370: 2020 2022 6f72 6465 7249 6422 3a20 2231     "orderId": "1
-0003e380: 3237 3437 3438 3337 3335 3934 3832 3832  2747483735948282
-0003e390: 3838 222c 0a20 2020 2020 2020 2023 2020  88",.        #  
-0003e3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003e3b0: 2020 226f 7264 6572 5072 6963 6522 3a20    "orderPrice": 
-0003e3c0: 2238 3022 2c0a 2020 2020 2020 2020 2320  "80",.        # 
-0003e3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003e3e0: 2020 2022 6f72 6465 7251 7479 223a 2022     "orderQty": "
-0003e3f0: 302e 3131 222c 0a20 2020 2020 2020 2023  0.11",.        #
-0003e400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003e410: 2020 2020 2265 7865 6351 7479 223a 2022      "execQty": "
-0003e420: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-0003e430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003e440: 2022 6375 6d6d 756c 6174 6976 6551 756f   "cummulativeQuo
-0003e450: 7465 5174 7922 3a20 2230 222c 0a20 2020  teQty": "0",.   
-0003e460: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0003e470: 2020 2020 2020 2020 2020 2261 7667 5072            "avgPr
-0003e480: 6963 6522 3a20 2230 222c 0a20 2020 2020  ice": "0",.     
-0003e490: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0003e4a0: 2020 2020 2020 2020 2273 7461 7475 7322          "status"
-0003e4b0: 3a20 2243 414e 4345 4c45 4422 2c0a 2020  : "CANCELED",.  
-0003e4c0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003e4d0: 2020 2020 2020 2020 2020 2022 7469 6d65             "time
-0003e4e0: 496e 466f 7263 6522 3a20 2247 5443 222c  InForce": "GTC",
-0003e4f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0003e500: 2020 2020 2020 2020 2020 2020 2020 226f                "o
-0003e510: 7264 6572 5479 7065 223a 2022 4c49 4d49  rderType": "LIMI
-0003e520: 5422 2c0a 2020 2020 2020 2020 2320 2020  T",.        #   
-0003e530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003e540: 2022 7369 6465 223a 2022 4255 5922 2c0a   "side": "BUY",.
-0003e550: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003e560: 2020 2020 2020 2020 2020 2020 2022 7374               "st
-0003e570: 6f70 5072 6963 6522 3a20 2230 2e30 222c  opPrice": "0.0",
-0003e580: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0003e590: 2020 2020 2020 2020 2020 2020 2020 2269                "i
-0003e5a0: 6365 6265 7267 5174 7922 3a20 2230 2e30  cebergQty": "0.0
-0003e5b0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0003e5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003e5d0: 2263 7265 6174 6554 696d 6522 3a20 2231  "createTime": "1
-0003e5e0: 3636 3636 3937 3834 3739 3732 222c 0a20  666697847972",. 
-0003e5f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003e600: 2020 2020 2020 2020 2020 2020 2275 7064              "upd
-0003e610: 6174 6554 696d 6522 3a20 2231 3636 3636  ateTime": "16666
-0003e620: 3937 3836 3538 3039 222c 0a20 2020 2020  97865809",.     
-0003e630: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0003e640: 2020 2020 2020 2020 2269 7357 6f72 6b69          "isWorki
-0003e650: 6e67 223a 2022 3122 2c0a 2020 2020 2020  ng": "1",.      
-0003e660: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0003e670: 2020 2020 2020 2022 6f72 6465 7243 6174         "orderCat
-0003e680: 6567 6f72 7922 3a20 2230 220a 2020 2020  egory": "0".    
-0003e690: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003e6a0: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
-0003e6b0: 2320 2020 2020 2020 2020 2020 205d 0a20  #            ]. 
+0003d4e0: 2020 226f 7264 6572 5374 6174 7573 223a    "orderStatus":
+0003d4f0: 2022 4361 6e63 656c 6c65 6422 2c0a 2020   "Cancelled",.  
+0003d500: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003d510: 2020 2020 2020 2020 2020 2020 2274 616b              "tak
+0003d520: 6550 726f 6669 7422 3a20 2222 2c0a 2020  eProfit": "",.  
+0003d530: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003d540: 2020 2020 2020 2020 2020 2020 2263 756d              "cum
+0003d550: 4578 6563 5661 6c75 6522 3a20 2230 222c  ExecValue": "0",
+0003d560: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003d570: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0003d580: 7472 6967 6765 7244 6972 6563 7469 6f6e  triggerDirection
+0003d590: 223a 2030 2c0a 2020 2020 2020 2020 2320  ": 0,.        # 
+0003d5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d5b0: 2020 2020 2262 6c6f 636b 5472 6164 6549      "blockTradeI
+0003d5c0: 6422 3a20 2222 2c0a 2020 2020 2020 2020  d": "",.        
+0003d5d0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0003d5e0: 2020 2020 2020 2272 656a 6563 7452 6561        "rejectRea
+0003d5f0: 736f 6e22 3a20 2245 435f 5065 7243 616e  son": "EC_PerCan
+0003d600: 6365 6c52 6571 7565 7374 222c 0a20 2020  celRequest",.   
+0003d610: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003d620: 2020 2020 2020 2020 2020 2022 6973 4c65             "isLe
+0003d630: 7665 7261 6765 223a 2022 222c 0a20 2020  verage": "",.   
+0003d640: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003d650: 2020 2020 2020 2020 2020 2022 7072 6963             "pric
+0003d660: 6522 3a20 2231 3830 3030 222c 0a20 2020  e": "18000",.   
+0003d670: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003d680: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
+0003d690: 7249 7622 3a20 2222 2c0a 2020 2020 2020  rIv": "",.      
+0003d6a0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0003d6b0: 2020 2020 2020 2020 2263 7265 6174 6564          "created
+0003d6c0: 5469 6d65 223a 2022 3136 3732 3232 3031  Time": "16722201
+0003d6d0: 3039 3338 3722 2c0a 2020 2020 2020 2020  09387",.        
+0003d6e0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0003d6f0: 2020 2020 2020 2274 7054 7269 6767 6572        "tpTrigger
+0003d700: 4279 223a 2022 554e 4b4e 4f57 4e22 2c0a  By": "UNKNOWN",.
+0003d710: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003d720: 2020 2020 2020 2020 2020 2020 2020 2270                "p
+0003d730: 6f73 6974 696f 6e49 6478 223a 2030 2c0a  ositionIdx": 0,.
+0003d740: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003d750: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+0003d760: 696d 6549 6e46 6f72 6365 223a 2022 476f  imeInForce": "Go
+0003d770: 6f64 5469 6c6c 4361 6e63 656c 222c 0a20  odTillCancel",. 
+0003d780: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003d790: 2020 2020 2020 2020 2020 2020 2022 6c65               "le
+0003d7a0: 6176 6573 5661 6c75 6522 3a20 2230 222c  avesValue": "0",
+0003d7b0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003d7c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0003d7d0: 7570 6461 7465 6454 696d 6522 3a20 2231  updatedTime": "1
+0003d7e0: 3637 3232 3230 3131 3431 3233 222c 0a20  672220114123",. 
+0003d7f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003d800: 2020 2020 2020 2020 2020 2020 2022 7369               "si
+0003d810: 6465 223a 2022 5365 6c6c 222c 0a20 2020  de": "Sell",.   
+0003d820: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003d830: 2020 2020 2020 2020 2020 2022 7472 6967             "trig
+0003d840: 6765 7250 7269 6365 223a 2022 222c 0a20  gerPrice": "",. 
+0003d850: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003d860: 2020 2020 2020 2020 2020 2020 2022 6375               "cu
+0003d870: 6d45 7865 6346 6565 223a 2022 3022 2c0a  mExecFee": "0",.
+0003d880: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003d890: 2020 2020 2020 2020 2020 2020 2020 2273                "s
+0003d8a0: 6c54 7269 6767 6572 4279 223a 2022 554e  lTriggerBy": "UN
+0003d8b0: 4b4e 4f57 4e22 2c0a 2020 2020 2020 2020  KNOWN",.        
+0003d8c0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0003d8d0: 2020 2020 2020 226c 6561 7665 7351 7479        "leavesQty
+0003d8e0: 223a 2022 3022 2c0a 2020 2020 2020 2020  ": "0",.        
+0003d8f0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0003d900: 2020 2020 2020 2263 6c6f 7365 4f6e 5472        "closeOnTr
+0003d910: 6967 6765 7222 3a20 4661 6c73 652c 0a20  igger": False,. 
+0003d920: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003d930: 2020 2020 2020 2020 2020 2020 2022 6375               "cu
+0003d940: 6d45 7865 6351 7479 223a 2022 3022 2c0a  mExecQty": "0",.
+0003d950: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003d960: 2020 2020 2020 2020 2020 2020 2020 2272                "r
+0003d970: 6564 7563 654f 6e6c 7922 3a20 4661 6c73  educeOnly": Fals
+0003d980: 652c 0a20 2020 2020 2020 2023 2020 2020  e,.        #    
+0003d990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d9a0: 2022 7174 7922 3a20 2230 2e31 222c 0a20   "qty": "0.1",. 
+0003d9b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003d9c0: 2020 2020 2020 2020 2020 2020 2022 7374               "st
+0003d9d0: 6f70 4c6f 7373 223a 2022 222c 0a20 2020  opLoss": "",.   
+0003d9e0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003d9f0: 2020 2020 2020 2020 2020 2022 7472 6967             "trig
+0003da00: 6765 7242 7922 3a20 2255 4e4b 4e4f 574e  gerBy": "UNKNOWN
+0003da10: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
+0003da20: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
+0003da30: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003da40: 2020 2020 5d0a 2020 2020 2020 2020 2320      ].        # 
+0003da50: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
+0003da60: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+0003da70: 7445 7874 496e 666f 223a 207b 7d2c 0a20  tExtInfo": {},. 
+0003da80: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003da90: 2022 7469 6d65 223a 2031 3637 3232 3231   "time": 1672221
+0003daa0: 3236 3338 3632 0a20 2020 2020 2020 2023  263862.        #
+0003dab0: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+0003dac0: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
+0003dad0: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+0003dae0: 6528 7265 7370 6f6e 7365 2c20 2772 6573  e(response, 'res
+0003daf0: 756c 7427 2c20 7b7d 290a 2020 2020 2020  ult', {}).      
+0003db00: 2020 6461 7461 203d 2073 656c 662e 7361    data = self.sa
+0003db10: 6665 5f76 616c 7565 2872 6573 756c 742c  fe_value(result,
+0003db20: 2027 6c69 7374 272c 205b 5d29 0a20 2020   'list', []).   
+0003db30: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+0003db40: 2e70 6172 7365 5f6f 7264 6572 7328 6461  .parse_orders(da
+0003db50: 7461 2c20 6d61 726b 6574 2c20 7369 6e63  ta, market, sinc
+0003db60: 652c 206c 696d 6974 290a 0a20 2020 2061  e, limit)..    a
+0003db70: 7379 6e63 2064 6566 2066 6574 6368 5f6f  sync def fetch_o
+0003db80: 7264 6572 7328 7365 6c66 2c20 7379 6d62  rders(self, symb
+0003db90: 6f6c 3a20 4f70 7469 6f6e 616c 5b73 7472  ol: Optional[str
+0003dba0: 5d20 3d20 4e6f 6e65 2c20 7369 6e63 653a  ] = None, since:
+0003dbb0: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
+0003dbc0: 204e 6f6e 652c 206c 696d 6974 3a20 4f70   None, limit: Op
+0003dbd0: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
+0003dbe0: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
+0003dbf0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0003dc00: 2020 2020 6665 7463 6865 7320 696e 666f      fetches info
+0003dc10: 726d 6174 696f 6e20 6f6e 206d 756c 7469  rmation on multi
+0003dc20: 706c 6520 6f72 6465 7273 206d 6164 6520  ple orders made 
+0003dc30: 6279 2074 6865 2075 7365 720a 2020 2020  by the user.    
+0003dc40: 2020 2020 3a70 6172 616d 2073 7472 2073      :param str s
+0003dc50: 796d 626f 6c3a 2075 6e69 6669 6564 206d  ymbol: unified m
+0003dc60: 6172 6b65 7420 7379 6d62 6f6c 206f 6620  arket symbol of 
+0003dc70: 7468 6520 6d61 726b 6574 206f 7264 6572  the market order
+0003dc80: 7320 7765 7265 206d 6164 6520 696e 0a20  s were made in. 
+0003dc90: 2020 2020 2020 203a 7061 7261 6d20 696e         :param in
+0003dca0: 747c 4e6f 6e65 2073 696e 6365 3a20 7468  t|None since: th
+0003dcb0: 6520 6561 726c 6965 7374 2074 696d 6520  e earliest time 
+0003dcc0: 696e 206d 7320 746f 2066 6574 6368 206f  in ms to fetch o
+0003dcd0: 7264 6572 7320 666f 720a 2020 2020 2020  rders for.      
+0003dce0: 2020 3a70 6172 616d 2069 6e74 7c4e 6f6e    :param int|Non
+0003dcf0: 6520 6c69 6d69 743a 2074 6865 206d 6178  e limit: the max
+0003dd00: 696d 756d 206e 756d 6265 7220 6f66 2020  imum number of  
+0003dd10: 6f72 6465 2073 7472 7563 7475 7265 7320  orde structures 
+0003dd20: 746f 2072 6574 7269 6576 650a 2020 2020  to retrieve.    
+0003dd30: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
+0003dd40: 7061 7261 6d73 3a20 6578 7472 6120 7061  params: extra pa
+0003dd50: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
+0003dd60: 6320 746f 2074 6865 2062 7962 6974 2061  c to the bybit a
+0003dd70: 7069 2065 6e64 706f 696e 740a 2020 2020  pi endpoint.    
+0003dd80: 2020 2020 3a72 6574 7572 6e73 205b 6469      :returns [di
+0003dd90: 6374 5d3a 2061 206c 6973 7420 6f66 2060  ct]: a list of `
+0003dda0: 6f72 6465 7220 7374 7275 6374 7572 6573  order structures
+0003ddb0: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
+0003ddc0: 6378 742e 636f 6d2f 232f 3f69 643d 6f72  cxt.com/#/?id=or
+0003ddd0: 6465 722d 7374 7275 6374 7572 653e 600a  der-structure>`.
+0003dde0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0003ddf0: 2020 2020 6177 6169 7420 7365 6c66 2e6c      await self.l
+0003de00: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
+0003de10: 2020 2020 2020 6d61 726b 6574 203d 204e        market = N
+0003de20: 6f6e 650a 2020 2020 2020 2020 7365 7474  one.        sett
+0003de30: 6c65 203d 2073 656c 662e 7361 6665 5f73  le = self.safe_s
+0003de40: 7472 696e 6728 7061 7261 6d73 2c20 2773  tring(params, 's
+0003de50: 6574 746c 6543 6f69 6e27 290a 2020 2020  ettleCoin').    
+0003de60: 2020 2020 6966 2073 6574 746c 6520 6973      if settle is
+0003de70: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0003de80: 2020 2073 6574 746c 652c 2070 6172 616d     settle, param
+0003de90: 7320 3d20 7365 6c66 2e68 616e 646c 655f  s = self.handle_
+0003dea0: 6f70 7469 6f6e 5f61 6e64 5f70 6172 616d  option_and_param
+0003deb0: 7328 7061 7261 6d73 2c20 2766 6574 6368  s(params, 'fetch
+0003dec0: 4f72 6465 7273 272c 2027 7365 7474 6c65  Orders', 'settle
+0003ded0: 272c 2073 6574 746c 6529 0a20 2020 2020  ', settle).     
+0003dee0: 2020 2069 6620 7379 6d62 6f6c 2069 7320     if symbol is 
+0003def0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+0003df00: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
+0003df10: 656c 662e 6d61 726b 6574 2873 796d 626f  elf.market(symbo
+0003df20: 6c29 0a20 2020 2020 2020 2020 2020 2073  l).            s
+0003df30: 6574 746c 6520 3d20 6d61 726b 6574 5b27  ettle = market['
+0003df40: 7365 7474 6c65 275d 0a20 2020 2020 2020  settle'].       
+0003df50: 2073 7562 5479 7065 203d 204e 6f6e 650a   subType = None.
+0003df60: 2020 2020 2020 2020 7375 6254 7970 652c          subType,
+0003df70: 2070 6172 616d 7320 3d20 7365 6c66 2e68   params = self.h
+0003df80: 616e 646c 655f 7375 625f 7479 7065 5f61  andle_sub_type_a
+0003df90: 6e64 5f70 6172 616d 7328 2766 6574 6368  nd_params('fetch
+0003dfa0: 4f72 6465 7273 272c 206d 6172 6b65 742c  Orders', market,
+0003dfb0: 2070 6172 616d 7329 0a20 2020 2020 2020   params).       
+0003dfc0: 2069 7349 6e76 6572 7365 203d 2073 7562   isInverse = sub
+0003dfd0: 5479 7065 203d 3d20 2769 6e76 6572 7365  Type == 'inverse
+0003dfe0: 270a 2020 2020 2020 2020 6973 5573 6463  '.        isUsdc
+0003dff0: 5365 7474 6c65 6420 3d20 7365 7474 6c65  Settled = settle
+0003e000: 203d 3d20 2755 5344 4327 0a20 2020 2020   == 'USDC'.     
+0003e010: 2020 2069 734c 696e 6561 7253 6574 746c     isLinearSettl
+0003e020: 6520 3d20 6973 5573 6463 5365 7474 6c65  e = isUsdcSettle
+0003e030: 6420 6f72 2028 7365 7474 6c65 203d 3d20  d or (settle == 
+0003e040: 2755 5344 5427 290a 2020 2020 2020 2020  'USDT').        
+0003e050: 6966 2069 7349 6e76 6572 7365 2061 6e64  if isInverse and
+0003e060: 2069 734c 696e 6561 7253 6574 746c 653a   isLinearSettle:
+0003e070: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+0003e080: 7365 2041 7267 756d 656e 7473 5265 7175  se ArgumentsRequ
+0003e090: 6972 6564 2873 656c 662e 6964 202b 2027  ired(self.id + '
+0003e0a0: 2066 6574 6368 4f72 6465 7273 2077 6974   fetchOrders wit
+0003e0b0: 6820 696e 7665 7273 6520 7375 6254 7970  h inverse subTyp
+0003e0c0: 6520 7265 7175 6972 6573 2073 6574 746c  e requires settl
+0003e0d0: 6520 746f 206e 6f74 2062 6520 5553 4454  e to not be USDT
+0003e0e0: 206f 7220 5553 4443 2729 0a20 2020 2020   or USDC').     
+0003e0f0: 2020 2074 7970 652c 2071 7565 7279 203d     type, query =
+0003e100: 2073 656c 662e 6861 6e64 6c65 5f6d 6172   self.handle_mar
+0003e110: 6b65 745f 7479 7065 5f61 6e64 5f70 6172  ket_type_and_par
+0003e120: 616d 7328 2766 6574 6368 4f72 6465 7273  ams('fetchOrders
+0003e130: 272c 206d 6172 6b65 742c 2070 6172 616d  ', market, param
+0003e140: 7329 0a20 2020 2020 2020 2065 6e61 626c  s).        enabl
+0003e150: 6555 6e69 6669 6564 4d61 7267 696e 2c20  eUnifiedMargin, 
+0003e160: 656e 6162 6c65 556e 6966 6965 6441 6363  enableUnifiedAcc
+0003e170: 6f75 6e74 203d 2061 7761 6974 2073 656c  ount = await sel
+0003e180: 662e 6973 5f75 6e69 6669 6564 5f65 6e61  f.is_unified_ena
+0003e190: 626c 6564 2829 0a20 2020 2020 2020 2069  bled().        i
+0003e1a0: 6620 656e 6162 6c65 556e 6966 6965 6441  f enableUnifiedA
+0003e1b0: 6363 6f75 6e74 2061 6e64 206e 6f74 2069  ccount and not i
+0003e1c0: 7349 6e76 6572 7365 3a0a 2020 2020 2020  sInverse:.      
+0003e1d0: 2020 2020 2020 7265 7475 726e 2061 7761        return awa
+0003e1e0: 6974 2073 656c 662e 6665 7463 685f 756e  it self.fetch_un
+0003e1f0: 6966 6965 645f 6163 636f 756e 745f 6f72  ified_account_or
+0003e200: 6465 7273 2873 796d 626f 6c2c 2073 696e  ders(symbol, sin
+0003e210: 6365 2c20 6c69 6d69 742c 2071 7565 7279  ce, limit, query
+0003e220: 290a 2020 2020 2020 2020 656c 6966 2074  ).        elif t
+0003e230: 7970 6520 3d3d 2027 7370 6f74 273a 0a20  ype == 'spot':. 
+0003e240: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+0003e250: 204e 6f74 5375 7070 6f72 7465 6428 7365   NotSupported(se
+0003e260: 6c66 2e69 6420 2b20 2720 6665 7463 684f  lf.id + ' fetchO
+0003e270: 7264 6572 7328 2920 6f6e 6c79 2073 7570  rders() only sup
+0003e280: 706f 7274 2027 202b 2074 7970 6520 2b20  port ' + type + 
+0003e290: 2720 6d61 726b 6574 7320 666f 7220 756e  ' markets for un
+0003e2a0: 6966 6965 6420 7472 6164 6520 6163 636f  ified trade acco
+0003e2b0: 756e 742c 2075 7365 2065 7863 6861 6e67  unt, use exchang
+0003e2c0: 652e 6665 7463 685f 6f70 656e 5f6f 7264  e.fetch_open_ord
+0003e2d0: 6572 7328 2920 616e 6420 6578 6368 616e  ers() and exchan
+0003e2e0: 6765 2e66 6574 6368 436c 6f73 6564 4f72  ge.fetchClosedOr
+0003e2f0: 6465 7273 2829 2069 6e73 7465 6164 2729  ders() instead')
+0003e300: 0a20 2020 2020 2020 2065 6c69 6620 656e  .        elif en
+0003e310: 6162 6c65 556e 6966 6965 644d 6172 6769  ableUnifiedMargi
+0003e320: 6e20 616e 6420 6e6f 7420 6973 496e 7665  n and not isInve
+0003e330: 7273 653a 0a20 2020 2020 2020 2020 2020  rse:.           
+0003e340: 2072 6574 7572 6e20 6177 6169 7420 7365   return await se
+0003e350: 6c66 2e66 6574 6368 5f75 6e69 6669 6564  lf.fetch_unified
+0003e360: 5f6d 6172 6769 6e5f 6f72 6465 7273 2873  _margin_orders(s
+0003e370: 796d 626f 6c2c 2073 696e 6365 2c20 6c69  ymbol, since, li
+0003e380: 6d69 742c 2071 7565 7279 290a 2020 2020  mit, query).    
+0003e390: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0003e3a0: 2020 2020 2020 7265 7475 726e 2061 7761        return awa
+0003e3b0: 6974 2073 656c 662e 6665 7463 685f 6465  it self.fetch_de
+0003e3c0: 7269 7661 7469 7665 735f 6f72 6465 7273  rivatives_orders
+0003e3d0: 2873 796d 626f 6c2c 2073 696e 6365 2c20  (symbol, since, 
+0003e3e0: 6c69 6d69 742c 2071 7565 7279 290a 0a20  limit, query).. 
+0003e3f0: 2020 2061 7379 6e63 2064 6566 2066 6574     async def fet
+0003e400: 6368 5f73 706f 745f 636c 6f73 6564 5f6f  ch_spot_closed_o
+0003e410: 7264 6572 7328 7365 6c66 2c20 7379 6d62  rders(self, symb
+0003e420: 6f6c 3a20 4f70 7469 6f6e 616c 5b73 7472  ol: Optional[str
+0003e430: 5d20 3d20 4e6f 6e65 2c20 7369 6e63 653a  ] = None, since:
+0003e440: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
+0003e450: 204e 6f6e 652c 206c 696d 6974 3a20 4f70   None, limit: Op
+0003e460: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
+0003e470: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
+0003e480: 2020 2020 2020 2020 6177 6169 7420 7365          await se
+0003e490: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
+0003e4a0: 290a 2020 2020 2020 2020 6d61 726b 6574  ).        market
+0003e4b0: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+0003e4c0: 6966 2073 796d 626f 6c20 6973 206e 6f74  if symbol is not
+0003e4d0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0003e4e0: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
+0003e4f0: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
+0003e500: 2020 2020 2020 2020 7265 7175 6573 7420          request 
+0003e510: 3d20 7b7d 0a20 2020 2020 2020 2069 6620  = {}.        if 
+0003e520: 7379 6d62 6f6c 2069 7320 6e6f 7420 4e6f  symbol is not No
+0003e530: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+0003e540: 7265 7175 6573 745b 2773 796d 626f 6c27  request['symbol'
+0003e550: 5d20 3d20 6d61 726b 6574 5b27 6964 275d  ] = market['id']
+0003e560: 0a20 2020 2020 2020 2069 6620 6c69 6d69  .        if limi
+0003e570: 7420 6973 206e 6f74 204e 6f6e 653a 0a20  t is not None:. 
+0003e580: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+0003e590: 7374 5b27 6c69 6d69 7427 5d20 3d20 6c69  st['limit'] = li
+0003e5a0: 6d69 740a 2020 2020 2020 2020 6966 2073  mit.        if s
+0003e5b0: 696e 6365 2069 7320 6e6f 7420 4e6f 6e65  ince is not None
+0003e5c0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+0003e5d0: 7175 6573 745b 2773 7461 7274 5469 6d65  quest['startTime
+0003e5e0: 275d 203d 2073 696e 6365 0a20 2020 2020  '] = since.     
+0003e5f0: 2020 2072 6573 706f 6e73 6520 3d20 6177     response = aw
+0003e600: 6169 7420 7365 6c66 2e70 7269 7661 7465  ait self.private
+0003e610: 4765 7453 706f 7456 3350 7269 7661 7465  GetSpotV3Private
+0003e620: 4869 7374 6f72 794f 7264 6572 7328 7365  HistoryOrders(se
+0003e630: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
+0003e640: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
+0003e650: 2020 2020 7265 7375 6c74 203d 2073 656c      result = sel
+0003e660: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
+0003e670: 706f 6e73 652c 2027 7265 7375 6c74 272c  ponse, 'result',
+0003e680: 207b 7d29 0a20 2020 2020 2020 2023 0a20   {}).        #. 
+0003e690: 2020 2020 2020 2023 2020 2020 7b0a 2020         #    {.  
+0003e6a0: 2020 2020 2020 2320 2020 2020 2020 2022        #        "
+0003e6b0: 7265 7443 6f64 6522 3a20 2230 222c 0a20  retCode": "0",. 
 0003e6c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003e6d0: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
-0003e6e0: 2020 2020 2272 6574 4578 7449 6e66 6f22      "retExtInfo"
-0003e6f0: 3a20 6e75 6c6c 2c0a 2020 2020 2020 2020  : null,.        
-0003e700: 2320 2020 2020 2020 2022 7469 6d65 223a  #        "time":
-0003e710: 2022 3136 3636 3733 3232 3837 3538 3822   "1666732287588"
-0003e720: 0a20 2020 2020 2020 2023 2020 2020 7d0a  .        #    }.
-0003e730: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0003e740: 2020 6f72 6465 7273 203d 2073 656c 662e    orders = self.
-0003e750: 7361 6665 5f76 616c 7565 2872 6573 756c  safe_value(resul
-0003e760: 742c 2027 6c69 7374 272c 205b 5d29 0a20  t, 'list', []). 
-0003e770: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-0003e780: 6c66 2e70 6172 7365 5f6f 7264 6572 7328  lf.parse_orders(
-0003e790: 6f72 6465 7273 2c20 6d61 726b 6574 2c20  orders, market, 
-0003e7a0: 7369 6e63 652c 206c 696d 6974 290a 0a20  since, limit).. 
-0003e7b0: 2020 2061 7379 6e63 2064 6566 2066 6574     async def fet
-0003e7c0: 6368 5f63 6c6f 7365 645f 6f72 6465 7273  ch_closed_orders
-0003e7d0: 2873 656c 662c 2073 796d 626f 6c3a 204f  (self, symbol: O
-0003e7e0: 7074 696f 6e61 6c5b 7374 725d 203d 204e  ptional[str] = N
-0003e7f0: 6f6e 652c 2073 696e 6365 3a20 4f70 7469  one, since: Opti
-0003e800: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
-0003e810: 2c20 6c69 6d69 743a 204f 7074 696f 6e61  , limit: Optiona
-0003e820: 6c5b 696e 745d 203d 204e 6f6e 652c 2070  l[int] = None, p
-0003e830: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
-0003e840: 2020 2022 2222 0a20 2020 2020 2020 2066     """.        f
-0003e850: 6574 6368 6573 2069 6e66 6f72 6d61 7469  etches informati
-0003e860: 6f6e 206f 6e20 6d75 6c74 6970 6c65 2063  on on multiple c
-0003e870: 6c6f 7365 6420 6f72 6465 7273 206d 6164  losed orders mad
-0003e880: 6520 6279 2074 6865 2075 7365 720a 2020  e by the user.  
-0003e890: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
-0003e8a0: 7c4e 6f6e 6520 7379 6d62 6f6c 3a20 756e  |None symbol: un
-0003e8b0: 6966 6965 6420 6d61 726b 6574 2073 796d  ified market sym
-0003e8c0: 626f 6c20 6f66 2074 6865 206d 6172 6b65  bol of the marke
-0003e8d0: 7420 6f72 6465 7273 2077 6572 6520 6d61  t orders were ma
-0003e8e0: 6465 2069 6e0a 2020 2020 2020 2020 3a70  de in.        :p
-0003e8f0: 6172 616d 2069 6e74 7c4e 6f6e 6520 7369  aram int|None si
-0003e900: 6e63 653a 2074 6865 2065 6172 6c69 6573  nce: the earlies
-0003e910: 7420 7469 6d65 2069 6e20 6d73 2074 6f20  t time in ms to 
-0003e920: 6665 7463 6820 6f72 6465 7273 2066 6f72  fetch orders for
-0003e930: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0003e940: 696e 747c 4e6f 6e65 206c 696d 6974 3a20  int|None limit: 
-0003e950: 7468 6520 6d61 7869 6d75 6d20 6e75 6d62  the maximum numb
-0003e960: 6572 206f 6620 206f 7264 6520 7374 7275  er of  orde stru
-0003e970: 6374 7572 6573 2074 6f20 7265 7472 6965  ctures to retrie
-0003e980: 7665 0a20 2020 2020 2020 203a 7061 7261  ve.        :para
-0003e990: 6d20 6469 6374 2070 6172 616d 733a 2065  m dict params: e
-0003e9a0: 7874 7261 2070 6172 616d 6574 6572 7320  xtra parameters 
-0003e9b0: 7370 6563 6966 6963 2074 6f20 7468 6520  specific to the 
-0003e9c0: 6279 6269 7420 6170 6920 656e 6470 6f69  bybit api endpoi
-0003e9d0: 6e74 0a20 2020 2020 2020 203a 7265 7475  nt.        :retu
-0003e9e0: 726e 7320 5b64 6963 745d 3a20 6120 6c69  rns [dict]: a li
-0003e9f0: 7374 206f 6620 606f 7264 6572 2073 7472  st of `order str
-0003ea00: 7563 7475 7265 7320 3c68 7474 7073 3a2f  uctures <https:/
-0003ea10: 2f64 6f63 732e 6363 7874 2e63 6f6d 2f23  /docs.ccxt.com/#
-0003ea20: 2f3f 6964 3d6f 7264 6572 2d73 7472 7563  /?id=order-struc
-0003ea30: 7475 7265 3e60 0a20 2020 2020 2020 2022  ture>`.        "
-0003ea40: 2222 0a20 2020 2020 2020 2061 7761 6974  "".        await
-0003ea50: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
-0003ea60: 7473 2829 0a20 2020 2020 2020 206d 6172  ts().        mar
-0003ea70: 6b65 7420 3d20 4e6f 6e65 0a20 2020 2020  ket = None.     
-0003ea80: 2020 2069 6620 7379 6d62 6f6c 2069 7320     if symbol is 
-0003ea90: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0003eaa0: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
-0003eab0: 656c 662e 6d61 726b 6574 2873 796d 626f  elf.market(symbo
-0003eac0: 6c29 0a20 2020 2020 2020 2074 7970 6520  l).        type 
-0003ead0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2074  = None.        t
-0003eae0: 7970 652c 2070 6172 616d 7320 3d20 7365  ype, params = se
-0003eaf0: 6c66 2e68 616e 646c 655f 6d61 726b 6574  lf.handle_market
-0003eb00: 5f74 7970 655f 616e 645f 7061 7261 6d73  _type_and_params
-0003eb10: 2827 6665 7463 6843 6c6f 7365 644f 7264  ('fetchClosedOrd
-0003eb20: 6572 7327 2c20 6d61 726b 6574 2c20 7061  ers', market, pa
-0003eb30: 7261 6d73 290a 2020 2020 2020 2020 656e  rams).        en
-0003eb40: 6162 6c65 556e 6966 6965 6420 3d20 6177  ableUnified = aw
-0003eb50: 6169 7420 7365 6c66 2e69 735f 756e 6966  ait self.is_unif
-0003eb60: 6965 645f 656e 6162 6c65 6428 290a 2020  ied_enabled().  
-0003eb70: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-0003eb80: 7b7d 0a20 2020 2020 2020 2069 6620 2874  {}.        if (t
-0003eb90: 7970 6520 3d3d 2027 7370 6f74 2729 2061  ype == 'spot') a
-0003eba0: 6e64 206e 6f74 2065 6e61 626c 6555 6e69  nd not enableUni
-0003ebb0: 6669 6564 5b31 5d3a 0a20 2020 2020 2020  fied[1]:.       
-0003ebc0: 2020 2020 2072 6574 7572 6e20 6177 6169       return awai
-0003ebd0: 7420 7365 6c66 2e66 6574 6368 5f73 706f  t self.fetch_spo
-0003ebe0: 745f 636c 6f73 6564 5f6f 7264 6572 7328  t_closed_orders(
-0003ebf0: 7379 6d62 6f6c 2c20 7369 6e63 652c 206c  symbol, since, l
-0003ec00: 696d 6974 2c20 7061 7261 6d73 290a 2020  imit, params).  
-0003ec10: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0003ec20: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0003ec30: 276f 7264 6572 5374 6174 7573 275d 203d  'orderStatus'] =
-0003ec40: 2027 4669 6c6c 6564 270a 2020 2020 2020   'Filled'.      
-0003ec50: 2020 7265 7475 726e 2061 7761 6974 2073    return await s
-0003ec60: 656c 662e 6665 7463 685f 6f72 6465 7273  elf.fetch_orders
-0003ec70: 2873 796d 626f 6c2c 2073 696e 6365 2c20  (symbol, since, 
-0003ec80: 6c69 6d69 742c 2073 656c 662e 6578 7465  limit, self.exte
-0003ec90: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
-0003eca0: 6d73 2929 0a0a 2020 2020 6173 796e 6320  ms))..    async 
-0003ecb0: 6465 6620 6665 7463 685f 6361 6e63 656c  def fetch_cancel
-0003ecc0: 6564 5f6f 7264 6572 7328 7365 6c66 2c20  ed_orders(self, 
-0003ecd0: 7379 6d62 6f6c 3a20 4f70 7469 6f6e 616c  symbol: Optional
-0003ece0: 5b73 7472 5d20 3d20 4e6f 6e65 2c20 7369  [str] = None, si
-0003ecf0: 6e63 653a 204f 7074 696f 6e61 6c5b 696e  nce: Optional[in
-0003ed00: 745d 203d 204e 6f6e 652c 206c 696d 6974  t] = None, limit
-0003ed10: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
-0003ed20: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
-0003ed30: 7d29 3a0a 2020 2020 2020 2020 2222 220a  }):.        """.
-0003ed40: 2020 2020 2020 2020 6665 7463 6865 7320          fetches 
-0003ed50: 696e 666f 726d 6174 696f 6e20 6f6e 206d  information on m
-0003ed60: 756c 7469 706c 6520 6361 6e63 656c 6564  ultiple canceled
-0003ed70: 206f 7264 6572 7320 6d61 6465 2062 7920   orders made by 
-0003ed80: 7468 6520 7573 6572 0a20 2020 2020 2020  the user.       
-0003ed90: 203a 7061 7261 6d20 7374 7220 7379 6d62   :param str symb
-0003eda0: 6f6c 3a20 756e 6966 6965 6420 6d61 726b  ol: unified mark
-0003edb0: 6574 2073 796d 626f 6c20 6f66 2074 6865  et symbol of the
-0003edc0: 206d 6172 6b65 7420 6f72 6465 7273 2077   market orders w
-0003edd0: 6572 6520 6d61 6465 2069 6e0a 2020 2020  ere made in.    
-0003ede0: 2020 2020 3a70 6172 616d 2069 6e74 7c4e      :param int|N
-0003edf0: 6f6e 6520 7369 6e63 653a 2074 696d 6573  one since: times
-0003ee00: 7461 6d70 2069 6e20 6d73 206f 6620 7468  tamp in ms of th
-0003ee10: 6520 6561 726c 6965 7374 206f 7264 6572  e earliest order
-0003ee20: 2c20 6465 6661 756c 7420 6973 204e 6f6e  , default is Non
-0003ee30: 650a 2020 2020 2020 2020 3a70 6172 616d  e.        :param
-0003ee40: 2069 6e74 7c4e 6f6e 6520 6c69 6d69 743a   int|None limit:
-0003ee50: 206d 6178 206e 756d 6265 7220 6f66 206f   max number of o
-0003ee60: 7264 6572 7320 746f 2072 6574 7572 6e2c  rders to return,
-0003ee70: 2064 6566 6175 6c74 2069 7320 4e6f 6e65   default is None
-0003ee80: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0003ee90: 6469 6374 2070 6172 616d 733a 2065 7874  dict params: ext
-0003eea0: 7261 2070 6172 616d 6574 6572 7320 7370  ra parameters sp
-0003eeb0: 6563 6966 6963 2074 6f20 7468 6520 6279  ecific to the by
-0003eec0: 6269 7420 6170 6920 656e 6470 6f69 6e74  bit api endpoint
-0003eed0: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
-0003eee0: 7320 6469 6374 3a20 6120 6c69 7374 206f  s dict: a list o
-0003eef0: 6620 606f 7264 6572 2073 7472 7563 7475  f `order structu
-0003ef00: 7265 7320 3c68 7474 7073 3a2f 2f64 6f63  res <https://doc
-0003ef10: 732e 6363 7874 2e63 6f6d 2f23 2f3f 6964  s.ccxt.com/#/?id
-0003ef20: 3d6f 7264 6572 2d73 7472 7563 7475 7265  =order-structure
-0003ef30: 3e60 0a20 2020 2020 2020 2022 2222 0a20  >`.        """. 
-0003ef40: 2020 2020 2020 2061 7761 6974 2073 656c         await sel
-0003ef50: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
-0003ef60: 0a20 2020 2020 2020 206d 6172 6b65 7420  .        market 
-0003ef70: 3d20 4e6f 6e65 0a20 2020 2020 2020 2069  = None.        i
-0003ef80: 6620 7379 6d62 6f6c 2069 7320 6e6f 7420  f symbol is not 
-0003ef90: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0003efa0: 2020 6d61 726b 6574 203d 2073 656c 662e    market = self.
-0003efb0: 6d61 726b 6574 2873 796d 626f 6c29 0a20  market(symbol). 
-0003efc0: 2020 2020 2020 2074 7970 6520 3d20 4e6f         type = No
-0003efd0: 6e65 0a20 2020 2020 2020 2074 7970 652c  ne.        type,
-0003efe0: 2070 6172 616d 7320 3d20 7365 6c66 2e68   params = self.h
-0003eff0: 616e 646c 655f 6d61 726b 6574 5f74 7970  andle_market_typ
-0003f000: 655f 616e 645f 7061 7261 6d73 2827 6665  e_and_params('fe
-0003f010: 7463 6843 616e 6365 6c65 644f 7264 6572  tchCanceledOrder
-0003f020: 7327 2c20 6d61 726b 6574 2c20 7061 7261  s', market, para
-0003f030: 6d73 290a 2020 2020 2020 2020 656e 6162  ms).        enab
-0003f040: 6c65 556e 6966 6965 6420 3d20 6177 6169  leUnified = awai
-0003f050: 7420 7365 6c66 2e69 735f 756e 6966 6965  t self.is_unifie
-0003f060: 645f 656e 6162 6c65 6428 290a 2020 2020  d_enabled().    
-0003f070: 2020 2020 7265 7175 6573 7420 3d20 7b7d      request = {}
-0003f080: 0a20 2020 2020 2020 2069 6620 2874 7970  .        if (typ
-0003f090: 6520 3d3d 2027 7370 6f74 2729 2061 6e64  e == 'spot') and
-0003f0a0: 206e 6f74 2065 6e61 626c 6555 6e69 6669   not enableUnifi
-0003f0b0: 6564 5b31 5d3a 0a20 2020 2020 2020 2020  ed[1]:.         
-0003f0c0: 2020 2072 6169 7365 204e 6f74 5375 7070     raise NotSupp
-0003f0d0: 6f72 7465 6428 7365 6c66 2e69 6420 2b20  orted(self.id + 
-0003f0e0: 2720 6665 7463 6843 616e 6365 6c65 644f  ' fetchCanceledO
-0003f0f0: 7264 6572 7328 2920 6f6e 6c79 2061 6c6c  rders() only all
-0003f100: 6f77 2073 706f 7420 6d61 726b 6574 206f  ow spot market o
-0003f110: 7264 6572 7320 666f 7220 756e 6966 6965  rders for unifie
-0003f120: 6420 7472 6164 6520 6163 636f 756e 742c  d trade account,
-0003f130: 2075 7365 2065 7863 6861 6e67 652e 6665   use exchange.fe
-0003f140: 7463 685f 6f70 656e 5f6f 7264 6572 7328  tch_open_orders(
-0003f150: 2920 616e 6420 6578 6368 616e 6765 2e66  ) and exchange.f
-0003f160: 6574 6368 436c 6f73 6564 4f72 6465 7273  etchClosedOrders
-0003f170: 2829 2069 6e73 7465 6164 2729 0a20 2020  () instead').   
-0003f180: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0003f190: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-0003f1a0: 6f72 6465 7253 7461 7475 7327 5d20 3d20  orderStatus'] = 
-0003f1b0: 2743 616e 6365 6c6c 6564 270a 2020 2020  'Cancelled'.    
-0003f1c0: 2020 2020 7265 7475 726e 2061 7761 6974      return await
-0003f1d0: 2073 656c 662e 6665 7463 685f 6f72 6465   self.fetch_orde
-0003f1e0: 7273 2873 796d 626f 6c2c 2073 696e 6365  rs(symbol, since
-0003f1f0: 2c20 6c69 6d69 742c 2073 656c 662e 6578  , limit, self.ex
-0003f200: 7465 6e64 2872 6571 7565 7374 2c20 7061  tend(request, pa
-0003f210: 7261 6d73 2929 0a0a 2020 2020 6173 796e  rams))..    asyn
-0003f220: 6320 6465 6620 6665 7463 685f 756e 6966  c def fetch_unif
-0003f230: 6965 645f 6163 636f 756e 745f 6f70 656e  ied_account_open
-0003f240: 5f6f 7264 6572 7328 7365 6c66 2c20 7379  _orders(self, sy
-0003f250: 6d62 6f6c 3a20 4f70 7469 6f6e 616c 5b73  mbol: Optional[s
-0003f260: 7472 5d20 3d20 4e6f 6e65 2c20 7369 6e63  tr] = None, sinc
-0003f270: 653a 204f 7074 696f 6e61 6c5b 696e 745d  e: Optional[int]
-0003f280: 203d 204e 6f6e 652c 206c 696d 6974 3a20   = None, limit: 
-0003f290: 4f70 7469 6f6e 616c 5b69 6e74 5d20 3d20  Optional[int] = 
-0003f2a0: 4e6f 6e65 2c20 7061 7261 6d73 3d7b 7d29  None, params={})
-0003f2b0: 3a0a 2020 2020 2020 2020 6177 6169 7420  :.        await 
-0003f2c0: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
-0003f2d0: 7328 290a 2020 2020 2020 2020 7265 7175  s().        requ
-0003f2e0: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
-0003f2f0: 2020 2020 2320 2773 796d 626f 6c27 3a20      # 'symbol': 
-0003f300: 6d61 726b 6574 5b27 6964 275d 2c0a 2020  market['id'],.  
-0003f310: 2020 2020 2020 2020 2020 2320 2763 6174            # 'cat
-0003f320: 6567 6f72 7927 2c20 5479 7065 206f 6620  egory', Type of 
-0003f330: 6465 7269 7661 7469 7665 7320 7072 6f64  derivatives prod
-0003f340: 7563 743a 206c 696e 6561 7220 6f72 206f  uct: linear or o
-0003f350: 7074 696f 6e2e 0a20 2020 2020 2020 2020  ption..         
-0003f360: 2020 2023 2027 6261 7365 436f 696e 272c     # 'baseCoin',
-0003f370: 2042 6173 6520 636f 696e 2e20 5768 656e   Base coin. When
-0003f380: 2063 6174 6567 6f72 793d 6f70 7469 6f6e   category=option
-0003f390: 2e20 4966 206e 6f74 2070 6173 7365 642c  . If not passed,
-0003f3a0: 2042 5443 2062 7920 6465 6661 756c 743b   BTC by default;
-0003f3b0: 2077 6865 6e20 6361 7465 676f 7279 3d6c   when category=l
-0003f3c0: 696e 6561 722c 2069 6620 4254 4320 7061  inear, if BTC pa
-0003f3d0: 7373 6564 2c20 4254 4350 4552 5020 2620  ssed, BTCPERP & 
-0003f3e0: 4254 4355 5344 5420 7265 7475 726e 6564  BTCUSDT returned
-0003f3f0: 2e0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-0003f400: 2773 6574 746c 6543 6f69 6e27 2c20 5365  'settleCoin', Se
-0003f410: 7474 6c65 2063 6f69 6e2e 2046 6f72 206c  ttle coin. For l
-0003f420: 696e 6561 722c 2065 6974 6865 7220 7379  inear, either sy
-0003f430: 6d62 6f6c 206f 7220 7365 7474 6c65 436f  mbol or settleCo
-0003f440: 696e 2069 7320 7265 7175 6972 6564 0a20  in is required. 
-0003f450: 2020 2020 2020 2020 2020 2023 2027 6f72             # 'or
-0003f460: 6465 7249 6427 2c20 4f72 6465 7220 4944  derId', Order ID
-0003f470: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
-0003f480: 6f72 6465 724c 696e 6b49 6427 2c20 556e  orderLinkId', Un
-0003f490: 6971 7565 2075 7365 722d 7365 7420 6f72  ique user-set or
-0003f4a0: 6465 7220 4944 0a20 2020 2020 2020 2020  der ID.         
-0003f4b0: 2020 2023 2027 6f72 6465 7246 696c 7465     # 'orderFilte
-0003f4c0: 7227 2c20 436f 6e64 6974 696f 6e61 6c20  r', Conditional 
-0003f4d0: 6f72 6465 7220 6f72 2061 6374 6976 6520  order or active 
-0003f4e0: 6f72 6465 720a 2020 2020 2020 2020 2020  order.          
-0003f4f0: 2020 2320 276c 696d 6974 273a 206e 756d    # 'limit': num
-0003f500: 6265 722c 2044 6174 6120 7175 616e 7469  ber, Data quanti
-0003f510: 7479 2070 6572 2070 6167 653a 204d 6178  ty per page: Max
-0003f520: 2064 6174 6120 7661 6c75 6520 7065 7220   data value per 
-0003f530: 7061 6765 2069 7320 3530 2c20 616e 6420  page is 50, and 
-0003f540: 6465 6661 756c 7420 7661 6c75 6520 6174  default value at
-0003f550: 2032 302e 0a20 2020 2020 2020 2020 2020   20..           
-0003f560: 2023 2027 6375 7273 6f72 272c 2041 5049   # 'cursor', API
-0003f570: 2070 6173 732d 7468 726f 7567 682e 2061   pass-through. a
-0003f580: 6363 6f75 6e74 5479 7065 202b 2063 6174  ccountType + cat
-0003f590: 6567 6f72 7920 2b20 6375 7273 6f72 202b  egory + cursor +
-0003f5a0: 2e20 4966 2069 6e63 6f6e 7369 7374 656e  . If inconsisten
-0003f5b0: 742c 2074 6865 2066 6f6c 6c6f 7769 6e67  t, the following
-0003f5c0: 2073 686f 756c 6420 6265 2072 6574 7572   should be retur
-0003f5d0: 6e65 643a 2054 6865 2061 6363 6f75 6e74  ned: The account
-0003f5e0: 2074 7970 6520 646f 6573 206e 6f74 206d   type does not m
-0003f5f0: 6174 6368 2074 6865 2073 6572 7669 6365  atch the service
-0003f600: 2069 6e71 7569 7279 2e0a 2020 2020 2020   inquiry..      
-0003f610: 2020 2020 2020 2320 276f 7065 6e4f 6e6c        # 'openOnl
-0003f620: 7927 3a20 302c 0a20 2020 2020 2020 207d  y': 0,.        }
-0003f630: 0a20 2020 2020 2020 206d 6172 6b65 7420  .        market 
-0003f640: 3d20 4e6f 6e65 0a20 2020 2020 2020 2069  = None.        i
-0003f650: 6620 7379 6d62 6f6c 2069 7320 4e6f 6e65  f symbol is None
-0003f660: 3a0a 2020 2020 2020 2020 2020 2020 7479  :.            ty
-0003f670: 7065 203d 204e 6f6e 650a 2020 2020 2020  pe = None.      
-0003f680: 2020 2020 2020 7479 7065 2c20 7061 7261        type, para
-0003f690: 6d73 203d 2073 656c 662e 6861 6e64 6c65  ms = self.handle
-0003f6a0: 5f6d 6172 6b65 745f 7479 7065 5f61 6e64  _market_type_and
-0003f6b0: 5f70 6172 616d 7328 2766 6574 6368 4f70  _params('fetchOp
-0003f6c0: 656e 4f72 6465 7273 272c 206d 6172 6b65  enOrders', marke
-0003f6d0: 742c 2070 6172 616d 7329 0a20 2020 2020  t, params).     
-0003f6e0: 2020 2020 2020 2073 7562 5479 7065 203d         subType =
-0003f6f0: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
-0003f700: 2020 7375 6254 7970 652c 2070 6172 616d    subType, param
-0003f710: 7320 3d20 7365 6c66 2e68 616e 646c 655f  s = self.handle_
-0003f720: 7375 625f 7479 7065 5f61 6e64 5f70 6172  sub_type_and_par
-0003f730: 616d 7328 2766 6574 6368 4f70 656e 4f72  ams('fetchOpenOr
-0003f740: 6465 7273 272c 206d 6172 6b65 742c 2070  ders', market, p
-0003f750: 6172 616d 732c 2027 6c69 6e65 6172 2729  arams, 'linear')
-0003f760: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-0003f770: 7565 7374 5b27 6361 7465 676f 7279 275d  uest['category']
-0003f780: 203d 2074 7970 650a 2020 2020 2020 2020   = type.        
-0003f790: 2020 2020 6966 2074 7970 6520 3d3d 2027      if type == '
-0003f7a0: 7377 6170 273a 0a20 2020 2020 2020 2020  swap':.         
-0003f7b0: 2020 2020 2020 2069 6620 7375 6254 7970         if subTyp
-0003f7c0: 6520 3d3d 2027 6c69 6e65 6172 273a 0a20  e == 'linear':. 
-0003f7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003f7e0: 2020 2073 656c 662e 6368 6563 6b5f 7265     self.check_re
-0003f7f0: 7175 6972 6564 5f73 796d 626f 6c28 2766  quired_symbol('f
-0003f800: 6574 6368 4f70 656e 4f72 6465 7273 272c  etchOpenOrders',
-0003f810: 2073 796d 626f 6c29 0a20 2020 2020 2020   symbol).       
-0003f820: 2020 2020 2020 2020 2065 6c69 6620 7375           elif su
-0003f830: 6254 7970 6520 3d3d 2027 696e 7665 7273  bType == 'invers
-0003f840: 6527 3a0a 2020 2020 2020 2020 2020 2020  e':.            
-0003f850: 2020 2020 2020 2020 7261 6973 6520 4e6f          raise No
-0003f860: 7453 7570 706f 7274 6564 2873 656c 662e  tSupported(self.
-0003f870: 6964 202b 2027 2066 6574 6368 4f70 656e  id + ' fetchOpen
-0003f880: 4f72 6465 7273 2829 2064 6f65 7320 6e6f  Orders() does no
-0003f890: 7420 616c 6c6f 7720 696e 7665 7273 6520  t allow inverse 
-0003f8a0: 6d61 726b 6574 206f 7264 6572 7320 666f  market orders fo
-0003f8b0: 7220 2720 2b20 7379 6d62 6f6c 202b 2027  r ' + symbol + '
-0003f8c0: 206d 6172 6b65 7473 2729 0a20 2020 2020   markets').     
-0003f8d0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-0003f8e0: 7374 5b27 6361 7465 676f 7279 275d 203d  st['category'] =
-0003f8f0: 2073 7562 5479 7065 0a20 2020 2020 2020   subType.       
-0003f900: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0003f910: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
-0003f920: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
-0003f930: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-0003f940: 6573 745b 2773 796d 626f 6c27 5d20 3d20  est['symbol'] = 
-0003f950: 6d61 726b 6574 5b27 6964 275d 0a20 2020  market['id'].   
-0003f960: 2020 2020 2020 2020 2069 6620 6d61 726b           if mark
-0003f970: 6574 5b27 7370 6f74 275d 3a0a 2020 2020  et['spot']:.    
-0003f980: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-0003f990: 6573 745b 2763 6174 6567 6f72 7927 5d20  est['category'] 
-0003f9a0: 3d20 2773 706f 7427 0a20 2020 2020 2020  = 'spot'.       
-0003f9b0: 2020 2020 2065 6c69 6620 6d61 726b 6574       elif market
-0003f9c0: 5b27 6f70 7469 6f6e 275d 3a0a 2020 2020  ['option']:.    
-0003f9d0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-0003f9e0: 6573 745b 2763 6174 6567 6f72 7927 5d20  est['category'] 
-0003f9f0: 3d20 276f 7074 696f 6e27 0a20 2020 2020  = 'option'.     
-0003fa00: 2020 2020 2020 2065 6c69 6620 6d61 726b         elif mark
-0003fa10: 6574 5b27 6c69 6e65 6172 275d 3a0a 2020  et['linear']:.  
-0003fa20: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0003fa30: 7175 6573 745b 2763 6174 6567 6f72 7927  quest['category'
-0003fa40: 5d20 3d20 276c 696e 6561 7227 0a20 2020  ] = 'linear'.   
-0003fa50: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-0003fa60: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0003fa70: 6169 7365 204e 6f74 5375 7070 6f72 7465  aise NotSupporte
-0003fa80: 6428 7365 6c66 2e69 6420 2b20 2720 6665  d(self.id + ' fe
-0003fa90: 7463 684f 7065 6e4f 7264 6572 7328 2920  tchOpenOrders() 
-0003faa0: 646f 6573 206e 6f74 2061 6c6c 6f77 2069  does not allow i
-0003fab0: 6e76 6572 7365 206d 6172 6b65 7420 6f72  nverse market or
-0003fac0: 6465 7273 2066 6f72 2027 202b 2073 796d  ders for ' + sym
-0003fad0: 626f 6c20 2b20 2720 6d61 726b 6574 7327  bol + ' markets'
-0003fae0: 290a 2020 2020 2020 2020 6973 5374 6f70  ).        isStop
-0003faf0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
-0003fb00: 7565 2870 6172 616d 732c 2027 7374 6f70  ue(params, 'stop
-0003fb10: 272c 2046 616c 7365 290a 2020 2020 2020  ', False).      
-0003fb20: 2020 7061 7261 6d73 203d 2073 656c 662e    params = self.
-0003fb30: 6f6d 6974 2870 6172 616d 732c 205b 2773  omit(params, ['s
-0003fb40: 746f 7027 5d29 0a20 2020 2020 2020 2069  top']).        i
-0003fb50: 6620 6973 5374 6f70 3a0a 2020 2020 2020  f isStop:.      
-0003fb60: 2020 2020 2020 6966 206d 6172 6b65 745b        if market[
-0003fb70: 2773 706f 7427 5d3a 0a20 2020 2020 2020  'spot']:.       
-0003fb80: 2020 2020 2020 2020 2072 6571 7565 7374           request
-0003fb90: 5b27 6f72 6465 7246 696c 7465 7227 5d20  ['orderFilter'] 
-0003fba0: 3d20 2774 7073 6c4f 7264 6572 270a 2020  = 'tpslOrder'.  
-0003fbb0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-0003fbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003fbd0: 7265 7175 6573 745b 276f 7264 6572 4669  request['orderFi
-0003fbe0: 6c74 6572 275d 203d 2027 5374 6f70 4f72  lter'] = 'StopOr
-0003fbf0: 6465 7227 0a20 2020 2020 2020 2069 6620  der'.        if 
-0003fc00: 6c69 6d69 7420 6973 206e 6f74 204e 6f6e  limit is not Non
-0003fc10: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-0003fc20: 6571 7565 7374 5b27 6c69 6d69 7427 5d20  equest['limit'] 
-0003fc30: 3d20 6c69 6d69 740a 2020 2020 2020 2020  = limit.        
-0003fc40: 7265 7370 6f6e 7365 203d 2061 7761 6974  response = await
-0003fc50: 2073 656c 662e 7072 6976 6174 6547 6574   self.privateGet
-0003fc60: 5635 4f72 6465 7252 6561 6c74 696d 6528  V5OrderRealtime(
-0003fc70: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
-0003fc80: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
-0003fc90: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-0003fca0: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
-0003fcb0: 2320 2020 2020 2020 2020 2272 6574 436f  #         "retCo
-0003fcc0: 6465 223a 2030 2c0a 2020 2020 2020 2020  de": 0,.        
-0003fcd0: 2320 2020 2020 2020 2020 2272 6574 4d73  #         "retMs
-0003fce0: 6722 3a20 224f 4b22 2c0a 2020 2020 2020  g": "OK",.      
-0003fcf0: 2020 2320 2020 2020 2020 2020 2272 6573    #         "res
-0003fd00: 756c 7422 3a20 7b0a 2020 2020 2020 2020  ult": {.        
-0003fd10: 2320 2020 2020 2020 2020 2020 2020 226e  #             "n
-0003fd20: 6578 7450 6167 6543 7572 736f 7222 3a20  extPageCursor": 
-0003fd30: 2231 3332 3130 3532 3635 3335 3336 3531  "132105265353651
-0003fd40: 3535 3834 2533 4131 3637 3232 3137 3734  5584%3A167221774
-0003fd50: 3832 3837 2532 4331 3332 3130 3532 3635  8287%2C132105265
-0003fd60: 3335 3336 3531 3535 3834 2533 4131 3637  3536515584%3A167
-0003fd70: 3232 3137 3734 3832 3837 222c 0a20 2020  2217748287",.   
-0003fd80: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0003fd90: 2020 2022 6361 7465 676f 7279 223a 2022     "category": "
-0003fda0: 7370 6f74 222c 0a20 2020 2020 2020 2023  spot",.        #
-0003fdb0: 2020 2020 2020 2020 2020 2020 2022 6c69               "li
-0003fdc0: 7374 223a 205b 0a20 2020 2020 2020 2023  st": [.        #
-0003fdd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003fde0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-0003fdf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003fe00: 2022 7379 6d62 6f6c 223a 2022 4554 4855   "symbol": "ETHU
-0003fe10: 5344 5422 2c0a 2020 2020 2020 2020 2320  SDT",.        # 
-0003fe20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003fe30: 2020 2020 226f 7264 6572 5479 7065 223a      "orderType":
-0003fe40: 2022 4c69 6d69 7422 2c0a 2020 2020 2020   "Limit",.      
-0003fe50: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0003fe60: 2020 2020 2020 2020 226f 7264 6572 4c69          "orderLi
-0003fe70: 6e6b 4964 223a 2022 3136 3732 3231 3737  nkId": "16722177
-0003fe80: 3438 3237 3736 3532 222c 0a20 2020 2020  48277652",.     
-0003fe90: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0003fea0: 2020 2020 2020 2020 2022 6f72 6465 7249           "orderI
-0003feb0: 6422 3a20 2231 3332 3130 3532 3635 3335  d": "13210526535
-0003fec0: 3336 3531 3535 3834 222c 0a20 2020 2020  36515584",.     
-0003fed0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0003fee0: 2020 2020 2020 2020 2022 6361 6e63 656c           "cancel
-0003fef0: 5479 7065 223a 2022 554e 4b4e 4f57 4e22  Type": "UNKNOWN"
-0003ff00: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0003ff10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003ff20: 2261 7667 5072 6963 6522 3a20 2222 2c0a  "avgPrice": "",.
-0003ff30: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003ff40: 2020 2020 2020 2020 2020 2020 2020 2273                "s
-0003ff50: 746f 704f 7264 6572 5479 7065 223a 2022  topOrderType": "
-0003ff60: 7470 736c 4f72 6465 7222 2c0a 2020 2020  tpslOrder",.    
-0003ff70: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003ff80: 2020 2020 2020 2020 2020 226c 6173 7450            "lastP
-0003ff90: 7269 6365 4f6e 4372 6561 7465 6422 3a20  riceOnCreated": 
-0003ffa0: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
-0003ffb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003ffc0: 2020 226f 7264 6572 5374 6174 7573 223a    "orderStatus":
-0003ffd0: 2022 4361 6e63 656c 6c65 6422 2c0a 2020   "Cancelled",.  
-0003ffe0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003fff0: 2020 2020 2020 2020 2020 2020 2274 616b              "tak
-00040000: 6550 726f 6669 7422 3a20 2222 2c0a 2020  eProfit": "",.  
-00040010: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00040020: 2020 2020 2020 2020 2020 2020 2263 756d              "cum
-00040030: 4578 6563 5661 6c75 6522 3a20 2230 222c  ExecValue": "0",
-00040040: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00040050: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00040060: 7472 6967 6765 7244 6972 6563 7469 6f6e  triggerDirection
-00040070: 223a 2030 2c0a 2020 2020 2020 2020 2320  ": 0,.        # 
-00040080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040090: 2020 2020 2269 734c 6576 6572 6167 6522      "isLeverage"
-000400a0: 3a20 2230 222c 0a20 2020 2020 2020 2023  : "0",.        #
-000400b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000400c0: 2020 2020 2022 7265 6a65 6374 5265 6173       "rejectReas
-000400d0: 6f6e 223a 2022 222c 0a20 2020 2020 2020  on": "",.       
-000400e0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-000400f0: 2020 2020 2020 2022 7072 6963 6522 3a20         "price": 
-00040100: 2231 3030 3022 2c0a 2020 2020 2020 2020  "1000",.        
-00040110: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00040120: 2020 2020 2020 226f 7264 6572 4976 223a        "orderIv":
-00040130: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
-00040140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040150: 2020 2022 6372 6561 7465 6454 696d 6522     "createdTime"
-00040160: 3a20 2231 3637 3232 3137 3734 3832 3837  : "1672217748287
-00040170: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00040180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040190: 2022 7470 5472 6967 6765 7242 7922 3a20   "tpTriggerBy": 
-000401a0: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
-000401b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000401c0: 2020 2270 6f73 6974 696f 6e49 6478 223a    "positionIdx":
-000401d0: 2030 2c0a 2020 2020 2020 2020 2320 2020   0,.        #   
-000401e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000401f0: 2020 2274 696d 6549 6e46 6f72 6365 223a    "timeInForce":
-00040200: 2022 4754 4322 2c0a 2020 2020 2020 2020   "GTC",.        
-00040210: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00040220: 2020 2020 2020 226c 6561 7665 7356 616c        "leavesVal
-00040230: 7565 223a 2022 3530 3022 2c0a 2020 2020  ue": "500",.    
-00040240: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00040250: 2020 2020 2020 2020 2020 2275 7064 6174            "updat
-00040260: 6564 5469 6d65 223a 2022 3136 3732 3231  edTime": "167221
-00040270: 3737 3438 3238 3722 2c0a 2020 2020 2020  7748287",.      
-00040280: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00040290: 2020 2020 2020 2020 2273 6964 6522 3a20          "side": 
-000402a0: 2242 7579 222c 0a20 2020 2020 2020 2023  "Buy",.        #
-000402b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000402c0: 2020 2020 2022 7472 6967 6765 7250 7269       "triggerPri
-000402d0: 6365 223a 2022 3135 3030 222c 0a20 2020  ce": "1500",.   
-000402e0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000402f0: 2020 2020 2020 2020 2020 2022 6375 6d45             "cumE
-00040300: 7865 6346 6565 223a 2022 3022 2c0a 2020  xecFee": "0",.  
-00040310: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00040320: 2020 2020 2020 2020 2020 2020 226c 6561              "lea
-00040330: 7665 7351 7479 223a 2022 3022 2c0a 2020  vesQty": "0",.  
-00040340: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00040350: 2020 2020 2020 2020 2020 2020 2273 6c54              "slT
-00040360: 7269 6767 6572 4279 223a 2022 222c 0a20  riggerBy": "",. 
-00040370: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00040380: 2020 2020 2020 2020 2020 2020 2022 636c               "cl
-00040390: 6f73 654f 6e54 7269 6767 6572 223a 2046  oseOnTrigger": F
-000403a0: 616c 7365 2c0a 2020 2020 2020 2020 2320  alse,.        # 
-000403b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000403c0: 2020 2020 2263 756d 4578 6563 5174 7922      "cumExecQty"
-000403d0: 3a20 2230 222c 0a20 2020 2020 2020 2023  : "0",.        #
-000403e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000403f0: 2020 2020 2022 7265 6475 6365 4f6e 6c79       "reduceOnly
-00040400: 223a 2046 616c 7365 2c0a 2020 2020 2020  ": False,.      
-00040410: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00040420: 2020 2020 2020 2020 2271 7479 223a 2022          "qty": "
-00040430: 302e 3522 2c0a 2020 2020 2020 2020 2320  0.5",.        # 
-00040440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040450: 2020 2020 2273 746f 704c 6f73 7322 3a20      "stopLoss": 
-00040460: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
-00040470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040480: 2020 2274 7269 6767 6572 4279 223a 2022    "triggerBy": "
-00040490: 3131 3932 2e35 220a 2020 2020 2020 2020  1192.5".        
+0003e6d0: 2272 6574 4d73 6722 3a20 224f 4b22 2c0a  "retMsg": "OK",.
+0003e6e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003e6f0: 2022 7265 7375 6c74 223a 207b 0a20 2020   "result": {.   
+0003e700: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003e710: 2020 226c 6973 7422 3a20 5b0a 2020 2020    "list": [.    
+0003e720: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0003e730: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+0003e740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003e750: 2020 2020 2261 6363 6f75 6e74 4964 223a      "accountId":
+0003e760: 2022 3133 3338 3034 3334 222c 0a20 2020   "13380434",.   
+0003e770: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003e780: 2020 2020 2020 2020 2020 2273 796d 626f            "symbo
+0003e790: 6c22 3a20 2241 4156 4555 5344 5422 2c0a  l": "AAVEUSDT",.
+0003e7a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003e7b0: 2020 2020 2020 2020 2020 2020 2022 6f72               "or
+0003e7c0: 6465 724c 696e 6b49 6422 3a20 2231 3636  derLinkId": "166
+0003e7d0: 3636 3937 3834 3739 3636 3630 3422 2c0a  6697847966604",.
+0003e7e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003e7f0: 2020 2020 2020 2020 2020 2020 2022 6f72               "or
+0003e800: 6465 7249 6422 3a20 2231 3237 3437 3438  derId": "1274748
+0003e810: 3337 3335 3934 3832 3832 3838 222c 0a20  373594828288",. 
+0003e820: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003e830: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+0003e840: 6572 5072 6963 6522 3a20 2238 3022 2c0a  erPrice": "80",.
+0003e850: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003e860: 2020 2020 2020 2020 2020 2020 2022 6f72               "or
+0003e870: 6465 7251 7479 223a 2022 302e 3131 222c  derQty": "0.11",
+0003e880: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003e890: 2020 2020 2020 2020 2020 2020 2020 2265                "e
+0003e8a0: 7865 6351 7479 223a 2022 3022 2c0a 2020  xecQty": "0",.  
+0003e8b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003e8c0: 2020 2020 2020 2020 2020 2022 6375 6d6d             "cumm
+0003e8d0: 756c 6174 6976 6551 756f 7465 5174 7922  ulativeQuoteQty"
+0003e8e0: 3a20 2230 222c 0a20 2020 2020 2020 2023  : "0",.        #
+0003e8f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003e900: 2020 2020 2261 7667 5072 6963 6522 3a20      "avgPrice": 
+0003e910: 2230 222c 0a20 2020 2020 2020 2023 2020  "0",.        #  
+0003e920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003e930: 2020 2273 7461 7475 7322 3a20 2243 414e    "status": "CAN
+0003e940: 4345 4c45 4422 2c0a 2020 2020 2020 2020  CELED",.        
+0003e950: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0003e960: 2020 2020 2022 7469 6d65 496e 466f 7263       "timeInForc
+0003e970: 6522 3a20 2247 5443 222c 0a20 2020 2020  e": "GTC",.     
+0003e980: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0003e990: 2020 2020 2020 2020 226f 7264 6572 5479          "orderTy
+0003e9a0: 7065 223a 2022 4c49 4d49 5422 2c0a 2020  pe": "LIMIT",.  
+0003e9b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003e9c0: 2020 2020 2020 2020 2020 2022 7369 6465             "side
+0003e9d0: 223a 2022 4255 5922 2c0a 2020 2020 2020  ": "BUY",.      
+0003e9e0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0003e9f0: 2020 2020 2020 2022 7374 6f70 5072 6963         "stopPric
+0003ea00: 6522 3a20 2230 2e30 222c 0a20 2020 2020  e": "0.0",.     
+0003ea10: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0003ea20: 2020 2020 2020 2020 2269 6365 6265 7267          "iceberg
+0003ea30: 5174 7922 3a20 2230 2e30 222c 0a20 2020  Qty": "0.0",.   
+0003ea40: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003ea50: 2020 2020 2020 2020 2020 2263 7265 6174            "creat
+0003ea60: 6554 696d 6522 3a20 2231 3636 3636 3937  eTime": "1666697
+0003ea70: 3834 3739 3732 222c 0a20 2020 2020 2020  847972",.       
+0003ea80: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0003ea90: 2020 2020 2020 2275 7064 6174 6554 696d        "updateTim
+0003eaa0: 6522 3a20 2231 3636 3636 3937 3836 3538  e": "16666978658
+0003eab0: 3039 222c 0a20 2020 2020 2020 2023 2020  09",.        #  
+0003eac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003ead0: 2020 2269 7357 6f72 6b69 6e67 223a 2022    "isWorking": "
+0003eae0: 3122 2c0a 2020 2020 2020 2020 2320 2020  1",.        #   
+0003eaf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003eb00: 2022 6f72 6465 7243 6174 6567 6f72 7922   "orderCategory"
+0003eb10: 3a20 2230 220a 2020 2020 2020 2020 2320  : "0".        # 
+0003eb20: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+0003eb30: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003eb40: 2020 2020 2020 205d 0a20 2020 2020 2020         ].       
+0003eb50: 2023 2020 2020 2020 2020 7d2c 0a20 2020   #        },.   
+0003eb60: 2020 2020 2023 2020 2020 2020 2020 2272       #        "r
+0003eb70: 6574 4578 7449 6e66 6f22 3a20 6e75 6c6c  etExtInfo": null
+0003eb80: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003eb90: 2020 2022 7469 6d65 223a 2022 3136 3636     "time": "1666
+0003eba0: 3733 3232 3837 3538 3822 0a20 2020 2020  732287588".     
+0003ebb0: 2020 2023 2020 2020 7d0a 2020 2020 2020     #    }.      
+0003ebc0: 2020 230a 2020 2020 2020 2020 6f72 6465    #.        orde
+0003ebd0: 7273 203d 2073 656c 662e 7361 6665 5f76  rs = self.safe_v
+0003ebe0: 616c 7565 2872 6573 756c 742c 2027 6c69  alue(result, 'li
+0003ebf0: 7374 272c 205b 5d29 0a20 2020 2020 2020  st', []).       
+0003ec00: 2072 6574 7572 6e20 7365 6c66 2e70 6172   return self.par
+0003ec10: 7365 5f6f 7264 6572 7328 6f72 6465 7273  se_orders(orders
+0003ec20: 2c20 6d61 726b 6574 2c20 7369 6e63 652c  , market, since,
+0003ec30: 206c 696d 6974 290a 0a20 2020 2061 7379   limit)..    asy
+0003ec40: 6e63 2064 6566 2066 6574 6368 5f63 6c6f  nc def fetch_clo
+0003ec50: 7365 645f 6f72 6465 7273 2873 656c 662c  sed_orders(self,
+0003ec60: 2073 796d 626f 6c3a 204f 7074 696f 6e61   symbol: Optiona
+0003ec70: 6c5b 7374 725d 203d 204e 6f6e 652c 2073  l[str] = None, s
+0003ec80: 696e 6365 3a20 4f70 7469 6f6e 616c 5b69  ince: Optional[i
+0003ec90: 6e74 5d20 3d20 4e6f 6e65 2c20 6c69 6d69  nt] = None, limi
+0003eca0: 743a 204f 7074 696f 6e61 6c5b 696e 745d  t: Optional[int]
+0003ecb0: 203d 204e 6f6e 652c 2070 6172 616d 733d   = None, params=
+0003ecc0: 7b7d 293a 0a20 2020 2020 2020 2022 2222  {}):.        """
+0003ecd0: 0a20 2020 2020 2020 2066 6574 6368 6573  .        fetches
+0003ece0: 2069 6e66 6f72 6d61 7469 6f6e 206f 6e20   information on 
+0003ecf0: 6d75 6c74 6970 6c65 2063 6c6f 7365 6420  multiple closed 
+0003ed00: 6f72 6465 7273 206d 6164 6520 6279 2074  orders made by t
+0003ed10: 6865 2075 7365 720a 2020 2020 2020 2020  he user.        
+0003ed20: 3a70 6172 616d 2073 7472 7c4e 6f6e 6520  :param str|None 
+0003ed30: 7379 6d62 6f6c 3a20 756e 6966 6965 6420  symbol: unified 
+0003ed40: 6d61 726b 6574 2073 796d 626f 6c20 6f66  market symbol of
+0003ed50: 2074 6865 206d 6172 6b65 7420 6f72 6465   the market orde
+0003ed60: 7273 2077 6572 6520 6d61 6465 2069 6e0a  rs were made in.
+0003ed70: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+0003ed80: 6e74 7c4e 6f6e 6520 7369 6e63 653a 2074  nt|None since: t
+0003ed90: 6865 2065 6172 6c69 6573 7420 7469 6d65  he earliest time
+0003eda0: 2069 6e20 6d73 2074 6f20 6665 7463 6820   in ms to fetch 
+0003edb0: 6f72 6465 7273 2066 6f72 0a20 2020 2020  orders for.     
+0003edc0: 2020 203a 7061 7261 6d20 696e 747c 4e6f     :param int|No
+0003edd0: 6e65 206c 696d 6974 3a20 7468 6520 6d61  ne limit: the ma
+0003ede0: 7869 6d75 6d20 6e75 6d62 6572 206f 6620  ximum number of 
+0003edf0: 206f 7264 6520 7374 7275 6374 7572 6573   orde structures
+0003ee00: 2074 6f20 7265 7472 6965 7665 0a20 2020   to retrieve.   
+0003ee10: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
+0003ee20: 2070 6172 616d 733a 2065 7874 7261 2070   params: extra p
+0003ee30: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
+0003ee40: 6963 2074 6f20 7468 6520 6279 6269 7420  ic to the bybit 
+0003ee50: 6170 6920 656e 6470 6f69 6e74 0a20 2020  api endpoint.   
+0003ee60: 2020 2020 203a 7265 7475 726e 7320 5b64       :returns [d
+0003ee70: 6963 745d 3a20 6120 6c69 7374 206f 6620  ict]: a list of 
+0003ee80: 606f 7264 6572 2073 7472 7563 7475 7265  `order structure
+0003ee90: 7320 3c68 7474 7073 3a2f 2f64 6f63 732e  s <https://docs.
+0003eea0: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d6f  ccxt.com/#/?id=o
+0003eeb0: 7264 6572 2d73 7472 7563 7475 7265 3e60  rder-structure>`
+0003eec0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0003eed0: 2020 2020 2061 7761 6974 2073 656c 662e       await self.
+0003eee0: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
+0003eef0: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
+0003ef00: 4e6f 6e65 0a20 2020 2020 2020 2069 6620  None.        if 
+0003ef10: 7379 6d62 6f6c 2069 7320 6e6f 7420 4e6f  symbol is not No
+0003ef20: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+0003ef30: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
+0003ef40: 726b 6574 2873 796d 626f 6c29 0a20 2020  rket(symbol).   
+0003ef50: 2020 2020 2074 7970 6520 3d20 4e6f 6e65       type = None
+0003ef60: 0a20 2020 2020 2020 2074 7970 652c 2070  .        type, p
+0003ef70: 6172 616d 7320 3d20 7365 6c66 2e68 616e  arams = self.han
+0003ef80: 646c 655f 6d61 726b 6574 5f74 7970 655f  dle_market_type_
+0003ef90: 616e 645f 7061 7261 6d73 2827 6665 7463  and_params('fetc
+0003efa0: 6843 6c6f 7365 644f 7264 6572 7327 2c20  hClosedOrders', 
+0003efb0: 6d61 726b 6574 2c20 7061 7261 6d73 290a  market, params).
+0003efc0: 2020 2020 2020 2020 656e 6162 6c65 556e          enableUn
+0003efd0: 6966 6965 6420 3d20 6177 6169 7420 7365  ified = await se
+0003efe0: 6c66 2e69 735f 756e 6966 6965 645f 656e  lf.is_unified_en
+0003eff0: 6162 6c65 6428 290a 2020 2020 2020 2020  abled().        
+0003f000: 7265 7175 6573 7420 3d20 7b7d 0a20 2020  request = {}.   
+0003f010: 2020 2020 2069 6620 2874 7970 6520 3d3d       if (type ==
+0003f020: 2027 7370 6f74 2729 2061 6e64 206e 6f74   'spot') and not
+0003f030: 2065 6e61 626c 6555 6e69 6669 6564 5b31   enableUnified[1
+0003f040: 5d3a 0a20 2020 2020 2020 2020 2020 2072  ]:.            r
+0003f050: 6574 7572 6e20 6177 6169 7420 7365 6c66  eturn await self
+0003f060: 2e66 6574 6368 5f73 706f 745f 636c 6f73  .fetch_spot_clos
+0003f070: 6564 5f6f 7264 6572 7328 7379 6d62 6f6c  ed_orders(symbol
+0003f080: 2c20 7369 6e63 652c 206c 696d 6974 2c20  , since, limit, 
+0003f090: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
+0003f0a0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0003f0b0: 2020 7265 7175 6573 745b 276f 7264 6572    request['order
+0003f0c0: 5374 6174 7573 275d 203d 2027 4669 6c6c  Status'] = 'Fill
+0003f0d0: 6564 270a 2020 2020 2020 2020 7265 7475  ed'.        retu
+0003f0e0: 726e 2061 7761 6974 2073 656c 662e 6665  rn await self.fe
+0003f0f0: 7463 685f 6f72 6465 7273 2873 796d 626f  tch_orders(symbo
+0003f100: 6c2c 2073 696e 6365 2c20 6c69 6d69 742c  l, since, limit,
+0003f110: 2073 656c 662e 6578 7465 6e64 2872 6571   self.extend(req
+0003f120: 7565 7374 2c20 7061 7261 6d73 2929 0a0a  uest, params))..
+0003f130: 2020 2020 6173 796e 6320 6465 6620 6665      async def fe
+0003f140: 7463 685f 6361 6e63 656c 6564 5f6f 7264  tch_canceled_ord
+0003f150: 6572 7328 7365 6c66 2c20 7379 6d62 6f6c  ers(self, symbol
+0003f160: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
+0003f170: 3d20 4e6f 6e65 2c20 7369 6e63 653a 204f  = None, since: O
+0003f180: 7074 696f 6e61 6c5b 696e 745d 203d 204e  ptional[int] = N
+0003f190: 6f6e 652c 206c 696d 6974 3a20 4f70 7469  one, limit: Opti
+0003f1a0: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
+0003f1b0: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
+0003f1c0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+0003f1d0: 2020 6665 7463 6865 7320 696e 666f 726d    fetches inform
+0003f1e0: 6174 696f 6e20 6f6e 206d 756c 7469 706c  ation on multipl
+0003f1f0: 6520 6361 6e63 656c 6564 206f 7264 6572  e canceled order
+0003f200: 7320 6d61 6465 2062 7920 7468 6520 7573  s made by the us
+0003f210: 6572 0a20 2020 2020 2020 203a 7061 7261  er.        :para
+0003f220: 6d20 7374 7220 7379 6d62 6f6c 3a20 756e  m str symbol: un
+0003f230: 6966 6965 6420 6d61 726b 6574 2073 796d  ified market sym
+0003f240: 626f 6c20 6f66 2074 6865 206d 6172 6b65  bol of the marke
+0003f250: 7420 6f72 6465 7273 2077 6572 6520 6d61  t orders were ma
+0003f260: 6465 2069 6e0a 2020 2020 2020 2020 3a70  de in.        :p
+0003f270: 6172 616d 2069 6e74 7c4e 6f6e 6520 7369  aram int|None si
+0003f280: 6e63 653a 2074 696d 6573 7461 6d70 2069  nce: timestamp i
+0003f290: 6e20 6d73 206f 6620 7468 6520 6561 726c  n ms of the earl
+0003f2a0: 6965 7374 206f 7264 6572 2c20 6465 6661  iest order, defa
+0003f2b0: 756c 7420 6973 204e 6f6e 650a 2020 2020  ult is None.    
+0003f2c0: 2020 2020 3a70 6172 616d 2069 6e74 7c4e      :param int|N
+0003f2d0: 6f6e 6520 6c69 6d69 743a 206d 6178 206e  one limit: max n
+0003f2e0: 756d 6265 7220 6f66 206f 7264 6572 7320  umber of orders 
+0003f2f0: 746f 2072 6574 7572 6e2c 2064 6566 6175  to return, defau
+0003f300: 6c74 2069 7320 4e6f 6e65 0a20 2020 2020  lt is None.     
+0003f310: 2020 203a 7061 7261 6d20 6469 6374 2070     :param dict p
+0003f320: 6172 616d 733a 2065 7874 7261 2070 6172  arams: extra par
+0003f330: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
+0003f340: 2074 6f20 7468 6520 6279 6269 7420 6170   to the bybit ap
+0003f350: 6920 656e 6470 6f69 6e74 0a20 2020 2020  i endpoint.     
+0003f360: 2020 203a 7265 7475 726e 7320 6469 6374     :returns dict
+0003f370: 3a20 6120 6c69 7374 206f 6620 606f 7264  : a list of `ord
+0003f380: 6572 2073 7472 7563 7475 7265 7320 3c68  er structures <h
+0003f390: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
+0003f3a0: 2e63 6f6d 2f23 2f3f 6964 3d6f 7264 6572  .com/#/?id=order
+0003f3b0: 2d73 7472 7563 7475 7265 3e60 0a20 2020  -structure>`.   
+0003f3c0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0003f3d0: 2061 7761 6974 2073 656c 662e 6c6f 6164   await self.load
+0003f3e0: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
+0003f3f0: 2020 206d 6172 6b65 7420 3d20 4e6f 6e65     market = None
+0003f400: 0a20 2020 2020 2020 2069 6620 7379 6d62  .        if symb
+0003f410: 6f6c 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ol is not None:.
+0003f420: 2020 2020 2020 2020 2020 2020 6d61 726b              mark
+0003f430: 6574 203d 2073 656c 662e 6d61 726b 6574  et = self.market
+0003f440: 2873 796d 626f 6c29 0a20 2020 2020 2020  (symbol).       
+0003f450: 2074 7970 6520 3d20 4e6f 6e65 0a20 2020   type = None.   
+0003f460: 2020 2020 2074 7970 652c 2070 6172 616d       type, param
+0003f470: 7320 3d20 7365 6c66 2e68 616e 646c 655f  s = self.handle_
+0003f480: 6d61 726b 6574 5f74 7970 655f 616e 645f  market_type_and_
+0003f490: 7061 7261 6d73 2827 6665 7463 6843 616e  params('fetchCan
+0003f4a0: 6365 6c65 644f 7264 6572 7327 2c20 6d61  celedOrders', ma
+0003f4b0: 726b 6574 2c20 7061 7261 6d73 290a 2020  rket, params).  
+0003f4c0: 2020 2020 2020 656e 6162 6c65 556e 6966        enableUnif
+0003f4d0: 6965 6420 3d20 6177 6169 7420 7365 6c66  ied = await self
+0003f4e0: 2e69 735f 756e 6966 6965 645f 656e 6162  .is_unified_enab
+0003f4f0: 6c65 6428 290a 2020 2020 2020 2020 7265  led().        re
+0003f500: 7175 6573 7420 3d20 7b7d 0a20 2020 2020  quest = {}.     
+0003f510: 2020 2069 6620 2874 7970 6520 3d3d 2027     if (type == '
+0003f520: 7370 6f74 2729 2061 6e64 206e 6f74 2065  spot') and not e
+0003f530: 6e61 626c 6555 6e69 6669 6564 5b31 5d3a  nableUnified[1]:
+0003f540: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+0003f550: 7365 204e 6f74 5375 7070 6f72 7465 6428  se NotSupported(
+0003f560: 7365 6c66 2e69 6420 2b20 2720 6665 7463  self.id + ' fetc
+0003f570: 6843 616e 6365 6c65 644f 7264 6572 7328  hCanceledOrders(
+0003f580: 2920 6f6e 6c79 2061 6c6c 6f77 2073 706f  ) only allow spo
+0003f590: 7420 6d61 726b 6574 206f 7264 6572 7320  t market orders 
+0003f5a0: 666f 7220 756e 6966 6965 6420 7472 6164  for unified trad
+0003f5b0: 6520 6163 636f 756e 742c 2075 7365 2065  e account, use e
+0003f5c0: 7863 6861 6e67 652e 6665 7463 685f 6f70  xchange.fetch_op
+0003f5d0: 656e 5f6f 7264 6572 7328 2920 616e 6420  en_orders() and 
+0003f5e0: 6578 6368 616e 6765 2e66 6574 6368 436c  exchange.fetchCl
+0003f5f0: 6f73 6564 4f72 6465 7273 2829 2069 6e73  osedOrders() ins
+0003f600: 7465 6164 2729 0a20 2020 2020 2020 2065  tead').        e
+0003f610: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0003f620: 2072 6571 7565 7374 5b27 6f72 6465 7253   request['orderS
+0003f630: 7461 7475 7327 5d20 3d20 2743 616e 6365  tatus'] = 'Cance
+0003f640: 6c6c 6564 270a 2020 2020 2020 2020 7265  lled'.        re
+0003f650: 7475 726e 2061 7761 6974 2073 656c 662e  turn await self.
+0003f660: 6665 7463 685f 6f72 6465 7273 2873 796d  fetch_orders(sym
+0003f670: 626f 6c2c 2073 696e 6365 2c20 6c69 6d69  bol, since, limi
+0003f680: 742c 2073 656c 662e 6578 7465 6e64 2872  t, self.extend(r
+0003f690: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
+0003f6a0: 0a0a 2020 2020 6173 796e 6320 6465 6620  ..    async def 
+0003f6b0: 6665 7463 685f 756e 6966 6965 645f 6163  fetch_unified_ac
+0003f6c0: 636f 756e 745f 6f70 656e 5f6f 7264 6572  count_open_order
+0003f6d0: 7328 7365 6c66 2c20 7379 6d62 6f6c 3a20  s(self, symbol: 
+0003f6e0: 4f70 7469 6f6e 616c 5b73 7472 5d20 3d20  Optional[str] = 
+0003f6f0: 4e6f 6e65 2c20 7369 6e63 653a 204f 7074  None, since: Opt
+0003f700: 696f 6e61 6c5b 696e 745d 203d 204e 6f6e  ional[int] = Non
+0003f710: 652c 206c 696d 6974 3a20 4f70 7469 6f6e  e, limit: Option
+0003f720: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c20  al[int] = None, 
+0003f730: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
+0003f740: 2020 2020 6177 6169 7420 7365 6c66 2e6c      await self.l
+0003f750: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
+0003f760: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
+0003f770: 7b0a 2020 2020 2020 2020 2020 2020 2320  {.            # 
+0003f780: 2773 796d 626f 6c27 3a20 6d61 726b 6574  'symbol': market
+0003f790: 5b27 6964 275d 2c0a 2020 2020 2020 2020  ['id'],.        
+0003f7a0: 2020 2020 2320 2763 6174 6567 6f72 7927      # 'category'
+0003f7b0: 2c20 5479 7065 206f 6620 6465 7269 7661  , Type of deriva
+0003f7c0: 7469 7665 7320 7072 6f64 7563 743a 206c  tives product: l
+0003f7d0: 696e 6561 7220 6f72 206f 7074 696f 6e2e  inear or option.
+0003f7e0: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+0003f7f0: 6261 7365 436f 696e 272c 2042 6173 6520  baseCoin', Base 
+0003f800: 636f 696e 2e20 5768 656e 2063 6174 6567  coin. When categ
+0003f810: 6f72 793d 6f70 7469 6f6e 2e20 4966 206e  ory=option. If n
+0003f820: 6f74 2070 6173 7365 642c 2042 5443 2062  ot passed, BTC b
+0003f830: 7920 6465 6661 756c 743b 2077 6865 6e20  y default; when 
+0003f840: 6361 7465 676f 7279 3d6c 696e 6561 722c  category=linear,
+0003f850: 2069 6620 4254 4320 7061 7373 6564 2c20   if BTC passed, 
+0003f860: 4254 4350 4552 5020 2620 4254 4355 5344  BTCPERP & BTCUSD
+0003f870: 5420 7265 7475 726e 6564 2e0a 2020 2020  T returned..    
+0003f880: 2020 2020 2020 2020 2320 2773 6574 746c          # 'settl
+0003f890: 6543 6f69 6e27 2c20 5365 7474 6c65 2063  eCoin', Settle c
+0003f8a0: 6f69 6e2e 2046 6f72 206c 696e 6561 722c  oin. For linear,
+0003f8b0: 2065 6974 6865 7220 7379 6d62 6f6c 206f   either symbol o
+0003f8c0: 7220 7365 7474 6c65 436f 696e 2069 7320  r settleCoin is 
+0003f8d0: 7265 7175 6972 6564 0a20 2020 2020 2020  required.       
+0003f8e0: 2020 2020 2023 2027 6f72 6465 7249 6427       # 'orderId'
+0003f8f0: 2c20 4f72 6465 7220 4944 0a20 2020 2020  , Order ID.     
+0003f900: 2020 2020 2020 2023 2027 6f72 6465 724c         # 'orderL
+0003f910: 696e 6b49 6427 2c20 556e 6971 7565 2075  inkId', Unique u
+0003f920: 7365 722d 7365 7420 6f72 6465 7220 4944  ser-set order ID
+0003f930: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+0003f940: 6f72 6465 7246 696c 7465 7227 2c20 436f  orderFilter', Co
+0003f950: 6e64 6974 696f 6e61 6c20 6f72 6465 7220  nditional order 
+0003f960: 6f72 2061 6374 6976 6520 6f72 6465 720a  or active order.
+0003f970: 2020 2020 2020 2020 2020 2020 2320 276c              # 'l
+0003f980: 696d 6974 273a 206e 756d 6265 722c 2044  imit': number, D
+0003f990: 6174 6120 7175 616e 7469 7479 2070 6572  ata quantity per
+0003f9a0: 2070 6167 653a 204d 6178 2064 6174 6120   page: Max data 
+0003f9b0: 7661 6c75 6520 7065 7220 7061 6765 2069  value per page i
+0003f9c0: 7320 3530 2c20 616e 6420 6465 6661 756c  s 50, and defaul
+0003f9d0: 7420 7661 6c75 6520 6174 2032 302e 0a20  t value at 20.. 
+0003f9e0: 2020 2020 2020 2020 2020 2023 2027 6375             # 'cu
+0003f9f0: 7273 6f72 272c 2041 5049 2070 6173 732d  rsor', API pass-
+0003fa00: 7468 726f 7567 682e 2061 6363 6f75 6e74  through. account
+0003fa10: 5479 7065 202b 2063 6174 6567 6f72 7920  Type + category 
+0003fa20: 2b20 6375 7273 6f72 202b 2e20 4966 2069  + cursor +. If i
+0003fa30: 6e63 6f6e 7369 7374 656e 742c 2074 6865  nconsistent, the
+0003fa40: 2066 6f6c 6c6f 7769 6e67 2073 686f 756c   following shoul
+0003fa50: 6420 6265 2072 6574 7572 6e65 643a 2054  d be returned: T
+0003fa60: 6865 2061 6363 6f75 6e74 2074 7970 6520  he account type 
+0003fa70: 646f 6573 206e 6f74 206d 6174 6368 2074  does not match t
+0003fa80: 6865 2073 6572 7669 6365 2069 6e71 7569  he service inqui
+0003fa90: 7279 2e0a 2020 2020 2020 2020 2020 2020  ry..            
+0003faa0: 2320 276f 7065 6e4f 6e6c 7927 3a20 302c  # 'openOnly': 0,
+0003fab0: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
+0003fac0: 2020 206d 6172 6b65 7420 3d20 4e6f 6e65     market = None
+0003fad0: 0a20 2020 2020 2020 2069 6620 7379 6d62  .        if symb
+0003fae0: 6f6c 2069 7320 4e6f 6e65 3a0a 2020 2020  ol is None:.    
+0003faf0: 2020 2020 2020 2020 7479 7065 203d 204e          type = N
+0003fb00: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+0003fb10: 7479 7065 2c20 7061 7261 6d73 203d 2073  type, params = s
+0003fb20: 656c 662e 6861 6e64 6c65 5f6d 6172 6b65  elf.handle_marke
+0003fb30: 745f 7479 7065 5f61 6e64 5f70 6172 616d  t_type_and_param
+0003fb40: 7328 2766 6574 6368 4f70 656e 4f72 6465  s('fetchOpenOrde
+0003fb50: 7273 272c 206d 6172 6b65 742c 2070 6172  rs', market, par
+0003fb60: 616d 7329 0a20 2020 2020 2020 2020 2020  ams).           
+0003fb70: 2073 7562 5479 7065 203d 204e 6f6e 650a   subType = None.
+0003fb80: 2020 2020 2020 2020 2020 2020 7375 6254              subT
+0003fb90: 7970 652c 2070 6172 616d 7320 3d20 7365  ype, params = se
+0003fba0: 6c66 2e68 616e 646c 655f 7375 625f 7479  lf.handle_sub_ty
+0003fbb0: 7065 5f61 6e64 5f70 6172 616d 7328 2766  pe_and_params('f
+0003fbc0: 6574 6368 4f70 656e 4f72 6465 7273 272c  etchOpenOrders',
+0003fbd0: 206d 6172 6b65 742c 2070 6172 616d 732c   market, params,
+0003fbe0: 2027 6c69 6e65 6172 2729 0a20 2020 2020   'linear').     
+0003fbf0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+0003fc00: 6361 7465 676f 7279 275d 203d 2074 7970  category'] = typ
+0003fc10: 650a 2020 2020 2020 2020 2020 2020 6966  e.            if
+0003fc20: 2074 7970 6520 3d3d 2027 7377 6170 273a   type == 'swap':
+0003fc30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003fc40: 2069 6620 7375 6254 7970 6520 3d3d 2027   if subType == '
+0003fc50: 6c69 6e65 6172 273a 0a20 2020 2020 2020  linear':.       
+0003fc60: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0003fc70: 662e 6368 6563 6b5f 7265 7175 6972 6564  f.check_required
+0003fc80: 5f73 796d 626f 6c28 2766 6574 6368 4f70  _symbol('fetchOp
+0003fc90: 656e 4f72 6465 7273 272c 2073 796d 626f  enOrders', symbo
+0003fca0: 6c29 0a20 2020 2020 2020 2020 2020 2020  l).             
+0003fcb0: 2020 2065 6c69 6620 7375 6254 7970 6520     elif subType 
+0003fcc0: 3d3d 2027 696e 7665 7273 6527 3a0a 2020  == 'inverse':.  
+0003fcd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003fce0: 2020 7261 6973 6520 4e6f 7453 7570 706f    raise NotSuppo
+0003fcf0: 7274 6564 2873 656c 662e 6964 202b 2027  rted(self.id + '
+0003fd00: 2066 6574 6368 4f70 656e 4f72 6465 7273   fetchOpenOrders
+0003fd10: 2829 2064 6f65 7320 6e6f 7420 616c 6c6f  () does not allo
+0003fd20: 7720 696e 7665 7273 6520 6d61 726b 6574  w inverse market
+0003fd30: 206f 7264 6572 7320 666f 7220 2720 2b20   orders for ' + 
+0003fd40: 7379 6d62 6f6c 202b 2027 206d 6172 6b65  symbol + ' marke
+0003fd50: 7473 2729 0a20 2020 2020 2020 2020 2020  ts').           
+0003fd60: 2020 2020 2072 6571 7565 7374 5b27 6361       request['ca
+0003fd70: 7465 676f 7279 275d 203d 2073 7562 5479  tegory'] = subTy
+0003fd80: 7065 0a20 2020 2020 2020 2065 6c73 653a  pe.        else:
+0003fd90: 0a20 2020 2020 2020 2020 2020 206d 6172  .            mar
+0003fda0: 6b65 7420 3d20 7365 6c66 2e6d 6172 6b65  ket = self.marke
+0003fdb0: 7428 7379 6d62 6f6c 290a 2020 2020 2020  t(symbol).      
+0003fdc0: 2020 2020 2020 7265 7175 6573 745b 2773        request['s
+0003fdd0: 796d 626f 6c27 5d20 3d20 6d61 726b 6574  ymbol'] = market
+0003fde0: 5b27 6964 275d 0a20 2020 2020 2020 2020  ['id'].         
+0003fdf0: 2020 2069 6620 6d61 726b 6574 5b27 7370     if market['sp
+0003fe00: 6f74 275d 3a0a 2020 2020 2020 2020 2020  ot']:.          
+0003fe10: 2020 2020 2020 7265 7175 6573 745b 2763        request['c
+0003fe20: 6174 6567 6f72 7927 5d20 3d20 2773 706f  ategory'] = 'spo
+0003fe30: 7427 0a20 2020 2020 2020 2020 2020 2065  t'.            e
+0003fe40: 6c69 6620 6d61 726b 6574 5b27 6f70 7469  lif market['opti
+0003fe50: 6f6e 275d 3a0a 2020 2020 2020 2020 2020  on']:.          
+0003fe60: 2020 2020 2020 7265 7175 6573 745b 2763        request['c
+0003fe70: 6174 6567 6f72 7927 5d20 3d20 276f 7074  ategory'] = 'opt
+0003fe80: 696f 6e27 0a20 2020 2020 2020 2020 2020  ion'.           
+0003fe90: 2065 6c69 6620 6d61 726b 6574 5b27 6c69   elif market['li
+0003fea0: 6e65 6172 275d 3a0a 2020 2020 2020 2020  near']:.        
+0003feb0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+0003fec0: 2763 6174 6567 6f72 7927 5d20 3d20 276c  'category'] = 'l
+0003fed0: 696e 6561 7227 0a20 2020 2020 2020 2020  inear'.         
+0003fee0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0003fef0: 2020 2020 2020 2020 2072 6169 7365 204e           raise N
+0003ff00: 6f74 5375 7070 6f72 7465 6428 7365 6c66  otSupported(self
+0003ff10: 2e69 6420 2b20 2720 6665 7463 684f 7065  .id + ' fetchOpe
+0003ff20: 6e4f 7264 6572 7328 2920 646f 6573 206e  nOrders() does n
+0003ff30: 6f74 2061 6c6c 6f77 2069 6e76 6572 7365  ot allow inverse
+0003ff40: 206d 6172 6b65 7420 6f72 6465 7273 2066   market orders f
+0003ff50: 6f72 2027 202b 2073 796d 626f 6c20 2b20  or ' + symbol + 
+0003ff60: 2720 6d61 726b 6574 7327 290a 2020 2020  ' markets').    
+0003ff70: 2020 2020 6973 5374 6f70 203d 2073 656c      isStop = sel
+0003ff80: 662e 7361 6665 5f76 616c 7565 2870 6172  f.safe_value(par
+0003ff90: 616d 732c 2027 7374 6f70 272c 2046 616c  ams, 'stop', Fal
+0003ffa0: 7365 290a 2020 2020 2020 2020 7061 7261  se).        para
+0003ffb0: 6d73 203d 2073 656c 662e 6f6d 6974 2870  ms = self.omit(p
+0003ffc0: 6172 616d 732c 205b 2773 746f 7027 5d29  arams, ['stop'])
+0003ffd0: 0a20 2020 2020 2020 2069 6620 6973 5374  .        if isSt
+0003ffe0: 6f70 3a0a 2020 2020 2020 2020 2020 2020  op:.            
+0003fff0: 6966 206d 6172 6b65 745b 2773 706f 7427  if market['spot'
+00040000: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+00040010: 2020 2072 6571 7565 7374 5b27 6f72 6465     request['orde
+00040020: 7246 696c 7465 7227 5d20 3d20 2774 7073  rFilter'] = 'tps
+00040030: 6c4f 7264 6572 270a 2020 2020 2020 2020  lOrder'.        
+00040040: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00040050: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+00040060: 745b 276f 7264 6572 4669 6c74 6572 275d  t['orderFilter']
+00040070: 203d 2027 5374 6f70 4f72 6465 7227 0a20   = 'StopOrder'. 
+00040080: 2020 2020 2020 2069 6620 6c69 6d69 7420         if limit 
+00040090: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+000400a0: 2020 2020 2020 2020 2072 6571 7565 7374           request
+000400b0: 5b27 6c69 6d69 7427 5d20 3d20 6c69 6d69  ['limit'] = limi
+000400c0: 740a 2020 2020 2020 2020 7265 7370 6f6e  t.        respon
+000400d0: 7365 203d 2061 7761 6974 2073 656c 662e  se = await self.
+000400e0: 7072 6976 6174 6547 6574 5635 4f72 6465  privateGetV5Orde
+000400f0: 7252 6561 6c74 696d 6528 7365 6c66 2e65  rRealtime(self.e
+00040100: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
+00040110: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
+00040120: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+00040130: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+00040140: 2020 2020 2272 6574 436f 6465 223a 2030      "retCode": 0
+00040150: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00040160: 2020 2020 2272 6574 4d73 6722 3a20 224f      "retMsg": "O
+00040170: 4b22 2c0a 2020 2020 2020 2020 2320 2020  K",.        #   
+00040180: 2020 2020 2020 2272 6573 756c 7422 3a20        "result": 
+00040190: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+000401a0: 2020 2020 2020 2020 226e 6578 7450 6167          "nextPag
+000401b0: 6543 7572 736f 7222 3a20 2231 3332 3130  eCursor": "13210
+000401c0: 3532 3635 3335 3336 3531 3535 3834 2533  52653536515584%3
+000401d0: 4131 3637 3232 3137 3734 3832 3837 2532  A1672217748287%2
+000401e0: 4331 3332 3130 3532 3635 3335 3336 3531  C132105265353651
+000401f0: 3535 3834 2533 4131 3637 3232 3137 3734  5584%3A167221774
+00040200: 3832 3837 222c 0a20 2020 2020 2020 2023  8287",.        #
+00040210: 2020 2020 2020 2020 2020 2020 2022 6361               "ca
+00040220: 7465 676f 7279 223a 2022 7370 6f74 222c  tegory": "spot",
+00040230: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00040240: 2020 2020 2020 2022 6c69 7374 223a 205b         "list": [
+00040250: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00040260: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+00040270: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00040280: 2020 2020 2020 2020 2020 2022 7379 6d62             "symb
+00040290: 6f6c 223a 2022 4554 4855 5344 5422 2c0a  ol": "ETHUSDT",.
+000402a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000402b0: 2020 2020 2020 2020 2020 2020 2020 226f                "o
+000402c0: 7264 6572 5479 7065 223a 2022 4c69 6d69  rderType": "Limi
+000402d0: 7422 2c0a 2020 2020 2020 2020 2320 2020  t",.        #   
+000402e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000402f0: 2020 226f 7264 6572 4c69 6e6b 4964 223a    "orderLinkId":
+00040300: 2022 3136 3732 3231 3737 3438 3237 3736   "16722177482776
+00040310: 3532 222c 0a20 2020 2020 2020 2023 2020  52",.        #  
+00040320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040330: 2020 2022 6f72 6465 7249 6422 3a20 2231     "orderId": "1
+00040340: 3332 3130 3532 3635 3335 3336 3531 3535  3210526535365155
+00040350: 3834 222c 0a20 2020 2020 2020 2023 2020  84",.        #  
+00040360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040370: 2020 2022 6361 6e63 656c 5479 7065 223a     "cancelType":
+00040380: 2022 554e 4b4e 4f57 4e22 2c0a 2020 2020   "UNKNOWN",.    
+00040390: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+000403a0: 2020 2020 2020 2020 2020 2261 7667 5072            "avgPr
+000403b0: 6963 6522 3a20 2222 2c0a 2020 2020 2020  ice": "",.      
+000403c0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+000403d0: 2020 2020 2020 2020 2273 746f 704f 7264          "stopOrd
+000403e0: 6572 5479 7065 223a 2022 7470 736c 4f72  erType": "tpslOr
+000403f0: 6465 7222 2c0a 2020 2020 2020 2020 2320  der",.        # 
+00040400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040410: 2020 2020 226c 6173 7450 7269 6365 4f6e      "lastPriceOn
+00040420: 4372 6561 7465 6422 3a20 2222 2c0a 2020  Created": "",.  
+00040430: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00040440: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+00040450: 6572 5374 6174 7573 223a 2022 4361 6e63  erStatus": "Canc
+00040460: 656c 6c65 6422 2c0a 2020 2020 2020 2020  elled",.        
+00040470: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00040480: 2020 2020 2020 2274 616b 6550 726f 6669        "takeProfi
+00040490: 7422 3a20 2222 2c0a 2020 2020 2020 2020  t": "",.        
 000404a0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-000404b0: 2020 7d0a 2020 2020 2020 2020 2320 2020    }.        #   
-000404c0: 2020 2020 2020 2020 2020 5d0a 2020 2020            ].    
-000404d0: 2020 2020 2320 2020 2020 2020 2020 7d2c      #         },
-000404e0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000404f0: 2020 2022 7265 7445 7874 496e 666f 223a     "retExtInfo":
-00040500: 207b 7d2c 0a20 2020 2020 2020 2023 2020   {},.        #  
-00040510: 2020 2020 2020 2022 7469 6d65 223a 2031         "time": 1
-00040520: 3637 3232 3139 3532 3632 3934 0a20 2020  672219526294.   
-00040530: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
-00040540: 2020 2020 2023 0a20 2020 2020 2020 2072       #.        r
-00040550: 6573 756c 7420 3d20 7365 6c66 2e73 6166  esult = self.saf
-00040560: 655f 7661 6c75 6528 7265 7370 6f6e 7365  e_value(response
-00040570: 2c20 2772 6573 756c 7427 2c20 7b7d 290a  , 'result', {}).
-00040580: 2020 2020 2020 2020 6461 7461 203d 2073          data = s
-00040590: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
-000405a0: 6573 756c 742c 2027 6c69 7374 272c 205b  esult, 'list', [
-000405b0: 5d29 0a20 2020 2020 2020 2072 6574 7572  ]).        retur
-000405c0: 6e20 7365 6c66 2e70 6172 7365 5f6f 7264  n self.parse_ord
-000405d0: 6572 7328 6461 7461 2c20 6d61 726b 6574  ers(data, market
-000405e0: 2c20 7369 6e63 652c 206c 696d 6974 290a  , since, limit).
-000405f0: 0a20 2020 2061 7379 6e63 2064 6566 2066  .    async def f
-00040600: 6574 6368 5f73 706f 745f 6f70 656e 5f6f  etch_spot_open_o
-00040610: 7264 6572 7328 7365 6c66 2c20 7379 6d62  rders(self, symb
-00040620: 6f6c 3a20 4f70 7469 6f6e 616c 5b73 7472  ol: Optional[str
-00040630: 5d20 3d20 4e6f 6e65 2c20 7369 6e63 653a  ] = None, since:
-00040640: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
-00040650: 204e 6f6e 652c 206c 696d 6974 3a20 4f70   None, limit: Op
-00040660: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
-00040670: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
-00040680: 2020 2020 2020 2020 6177 6169 7420 7365          await se
-00040690: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
-000406a0: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
-000406b0: 7420 3d20 7b7d 0a20 2020 2020 2020 206d  t = {}.        m
-000406c0: 6172 6b65 7420 3d20 4e6f 6e65 0a20 2020  arket = None.   
-000406d0: 2020 2020 2069 6620 7379 6d62 6f6c 2069       if symbol i
-000406e0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-000406f0: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
-00040700: 2073 656c 662e 6d61 726b 6574 2873 796d   self.market(sym
-00040710: 626f 6c29 0a20 2020 2020 2020 2020 2020  bol).           
-00040720: 2072 6571 7565 7374 5b27 7379 6d62 6f6c   request['symbol
-00040730: 275d 203d 206d 6172 6b65 745b 2769 6427  '] = market['id'
-00040740: 5d0a 2020 2020 2020 2020 6966 206c 696d  ].        if lim
-00040750: 6974 2069 7320 6e6f 7420 4e6f 6e65 3a0a  it is not None:.
-00040760: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00040770: 6573 745b 276c 696d 6974 275d 203d 206c  est['limit'] = l
-00040780: 696d 6974 0a20 2020 2020 2020 2072 6573  imit.        res
-00040790: 706f 6e73 6520 3d20 6177 6169 7420 7365  ponse = await se
-000407a0: 6c66 2e70 7269 7661 7465 4765 7453 706f  lf.privateGetSpo
-000407b0: 7456 3350 7269 7661 7465 4f70 656e 4f72  tV3PrivateOpenOr
-000407c0: 6465 7273 2873 656c 662e 6578 7465 6e64  ders(self.extend
-000407d0: 2872 6571 7565 7374 2c20 7061 7261 6d73  (request, params
-000407e0: 2929 0a20 2020 2020 2020 2023 0a20 2020  )).        #.   
-000407f0: 2020 2020 2023 2020 2020 7b0a 2020 2020       #    {.    
-00040800: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-00040810: 6574 436f 6465 223a 2022 3022 2c0a 2020  etCode": "0",.  
-00040820: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00040830: 2272 6574 4d73 6722 3a20 224f 4b22 2c0a  "retMsg": "OK",.
-00040840: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00040850: 2020 2272 6573 756c 7422 3a20 7b0a 2020    "result": {.  
-00040860: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00040870: 2020 2020 226c 6973 7422 3a20 5b0a 2020      "list": [.  
-00040880: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00040890: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
-000408a0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000408b0: 2020 2020 2020 2020 2261 6363 6f75 6e74          "account
-000408c0: 4964 223a 2022 3133 3338 3034 3334 222c  Id": "13380434",
-000408d0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000408e0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000408f0: 7379 6d62 6f6c 223a 2022 4141 5645 5553  symbol": "AAVEUS
-00040900: 4454 222c 0a20 2020 2020 2020 2023 2020  DT",.        #  
-00040910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040920: 2020 2022 6f72 6465 724c 696e 6b49 6422     "orderLinkId"
-00040930: 3a20 2231 3636 3637 3334 3030 3533 3030  : "1666734005300
-00040940: 3731 3722 2c0a 2020 2020 2020 2020 2320  717",.        # 
-00040950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040960: 2020 2020 226f 7264 6572 4964 223a 2022      "orderId": "
-00040970: 3132 3735 3035 3136 3833 3237 3932 3831  1275051683279281
-00040980: 3636 3422 2c0a 2020 2020 2020 2020 2320  664",.        # 
-00040990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000409a0: 2020 2020 226f 7264 6572 5072 6963 6522      "orderPrice"
-000409b0: 3a20 2238 3022 2c0a 2020 2020 2020 2020  : "80",.        
-000409c0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-000409d0: 2020 2020 2020 226f 7264 6572 5174 7922        "orderQty"
-000409e0: 3a20 2230 2e31 3122 2c0a 2020 2020 2020  : "0.11",.      
-000409f0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00040a00: 2020 2020 2020 2020 2265 7865 6351 7479          "execQty
-00040a10: 223a 2022 3022 2c0a 2020 2020 2020 2020  ": "0",.        
-00040a20: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00040a30: 2020 2020 2020 2263 756d 6d75 6c61 7469        "cummulati
-00040a40: 7665 5175 6f74 6551 7479 223a 2022 3022  veQuoteQty": "0"
-00040a50: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00040a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040a70: 2261 7667 5072 6963 6522 3a20 2230 222c  "avgPrice": "0",
-00040a80: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00040a90: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00040aa0: 7374 6174 7573 223a 2022 4e45 5722 2c0a  status": "NEW",.
-00040ab0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00040ac0: 2020 2020 2020 2020 2020 2020 2020 2274                "t
-00040ad0: 696d 6549 6e46 6f72 6365 223a 2022 4754  imeInForce": "GT
-00040ae0: 4322 2c0a 2020 2020 2020 2020 2320 2020  C",.        #   
-00040af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040b00: 2020 226f 7264 6572 5479 7065 223a 2022    "orderType": "
-00040b10: 4c49 4d49 5422 2c0a 2020 2020 2020 2020  LIMIT",.        
-00040b20: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00040b30: 2020 2020 2020 2273 6964 6522 3a20 2242        "side": "B
-00040b40: 5559 222c 0a20 2020 2020 2020 2023 2020  UY",.        #  
-00040b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040b60: 2020 2022 7374 6f70 5072 6963 6522 3a20     "stopPrice": 
-00040b70: 2230 2e30 222c 0a20 2020 2020 2020 2023  "0.0",.        #
-00040b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040b90: 2020 2020 2022 6963 6562 6572 6751 7479       "icebergQty
-00040ba0: 223a 2022 302e 3022 2c0a 2020 2020 2020  ": "0.0",.      
-00040bb0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00040bc0: 2020 2020 2020 2020 2263 7265 6174 6554          "createT
-00040bd0: 696d 6522 3a20 2231 3636 3637 3334 3030  ime": "166673400
-00040be0: 3533 3034 222c 0a20 2020 2020 2020 2023  5304",.        #
-00040bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040c00: 2020 2020 2022 7570 6461 7465 5469 6d65       "updateTime
-00040c10: 223a 2022 3136 3636 3733 3430 3035 3330  ": "166673400530
-00040c20: 3922 2c0a 2020 2020 2020 2020 2320 2020  9",.        #   
-00040c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040c40: 2020 2269 7357 6f72 6b69 6e67 223a 2022    "isWorking": "
-00040c50: 3122 2c0a 2020 2020 2020 2020 2320 2020  1",.        #   
-00040c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040c70: 2020 226f 7264 6572 4361 7465 676f 7279    "orderCategory
-00040c80: 223a 2022 3022 0a20 2020 2020 2020 2023  ": "0".        #
-00040c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040ca0: 207d 0a20 2020 2020 2020 2023 2020 2020   }.        #    
-00040cb0: 2020 2020 2020 2020 205d 0a20 2020 2020           ].     
-00040cc0: 2020 2023 2020 2020 2020 2020 207d 2c0a     #         },.
-00040cd0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00040ce0: 2020 2272 6574 4578 7449 6e66 6f22 3a20    "retExtInfo": 
-00040cf0: 6e75 6c6c 2c0a 2020 2020 2020 2020 2320  null,.        # 
-00040d00: 2020 2020 2020 2020 2274 696d 6522 3a20          "time": 
-00040d10: 2231 3636 3637 3334 3033 3135 3932 220a  "1666734031592".
-00040d20: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-00040d30: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-00040d40: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
-00040d50: 7361 6665 5f76 616c 7565 2872 6573 706f  safe_value(respo
-00040d60: 6e73 652c 2027 7265 7375 6c74 272c 207b  nse, 'result', {
-00040d70: 7d29 0a20 2020 2020 2020 206f 7264 6572  }).        order
-00040d80: 7320 3d20 7365 6c66 2e73 6166 655f 7661  s = self.safe_va
-00040d90: 6c75 6528 7265 7375 6c74 2c20 276c 6973  lue(result, 'lis
-00040da0: 7427 2c20 5b5d 290a 2020 2020 2020 2020  t', []).        
-00040db0: 7265 7475 726e 2073 656c 662e 7061 7273  return self.pars
-00040dc0: 655f 6f72 6465 7273 286f 7264 6572 732c  e_orders(orders,
-00040dd0: 206d 6172 6b65 742c 2073 696e 6365 2c20   market, since, 
-00040de0: 6c69 6d69 7429 0a0a 2020 2020 6173 796e  limit)..    asyn
-00040df0: 6320 6465 6620 6665 7463 685f 756e 6966  c def fetch_unif
-00040e00: 6965 645f 6d61 7267 696e 5f6f 7065 6e5f  ied_margin_open_
-00040e10: 6f72 6465 7273 2873 656c 662c 2073 796d  orders(self, sym
-00040e20: 626f 6c3a 204f 7074 696f 6e61 6c5b 7374  bol: Optional[st
-00040e30: 725d 203d 204e 6f6e 652c 2073 696e 6365  r] = None, since
-00040e40: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
-00040e50: 3d20 4e6f 6e65 2c20 6c69 6d69 743a 204f  = None, limit: O
-00040e60: 7074 696f 6e61 6c5b 696e 745d 203d 204e  ptional[int] = N
-00040e70: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
-00040e80: 0a20 2020 2020 2020 2061 7761 6974 2073  .        await s
-00040e90: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
-00040ea0: 2829 0a20 2020 2020 2020 2072 6571 7565  ().        reque
-00040eb0: 7374 203d 207b 7d0a 2020 2020 2020 2020  st = {}.        
-00040ec0: 6d61 726b 6574 203d 204e 6f6e 650a 2020  market = None.  
-00040ed0: 2020 2020 2020 6966 2073 796d 626f 6c20        if symbol 
-00040ee0: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-00040ef0: 2020 2020 2073 7562 5479 7065 203d 204e       subType = N
-00040f00: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
-00040f10: 7375 6254 7970 652c 2070 6172 616d 7320  subType, params 
-00040f20: 3d20 7365 6c66 2e68 616e 646c 655f 7375  = self.handle_su
-00040f30: 625f 7479 7065 5f61 6e64 5f70 6172 616d  b_type_and_param
-00040f40: 7328 2766 6574 6368 556e 6966 6965 644d  s('fetchUnifiedM
-00040f50: 6172 6769 6e4f 7264 6572 7327 2c20 6d61  arginOrders', ma
-00040f60: 726b 6574 2c20 7061 7261 6d73 2c20 276c  rket, params, 'l
-00040f70: 696e 6561 7227 290a 2020 2020 2020 2020  inear').        
-00040f80: 2020 2020 7265 7175 6573 745b 2763 6174      request['cat
-00040f90: 6567 6f72 7927 5d20 3d20 7375 6254 7970  egory'] = subTyp
-00040fa0: 650a 2020 2020 2020 2020 656c 7365 3a0a  e.        else:.
-00040fb0: 2020 2020 2020 2020 2020 2020 6d61 726b              mark
-00040fc0: 6574 203d 2073 656c 662e 6d61 726b 6574  et = self.market
-00040fd0: 2873 796d 626f 6c29 0a20 2020 2020 2020  (symbol).       
-00040fe0: 2020 2020 2072 6571 7565 7374 5b27 7379       request['sy
-00040ff0: 6d62 6f6c 275d 203d 206d 6172 6b65 745b  mbol'] = market[
-00041000: 2769 6427 5d0a 2020 2020 2020 2020 2020  'id'].          
-00041010: 2020 6966 206d 6172 6b65 745b 276f 7074    if market['opt
-00041020: 696f 6e27 5d3a 0a20 2020 2020 2020 2020  ion']:.         
-00041030: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-00041040: 6361 7465 676f 7279 275d 203d 2027 6f70  category'] = 'op
-00041050: 7469 6f6e 270a 2020 2020 2020 2020 2020  tion'.          
-00041060: 2020 656c 6966 206d 6172 6b65 745b 276c    elif market['l
-00041070: 696e 6561 7227 5d3a 0a20 2020 2020 2020  inear']:.       
-00041080: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00041090: 5b27 6361 7465 676f 7279 275d 203d 2027  ['category'] = '
-000410a0: 6c69 6e65 6172 270a 2020 2020 2020 2020  linear'.        
-000410b0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-000410c0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-000410d0: 4e6f 7453 7570 706f 7274 6564 2873 656c  NotSupported(sel
-000410e0: 662e 6964 202b 2027 2066 6574 6368 556e  f.id + ' fetchUn
-000410f0: 6966 6965 644d 6172 6769 6e4f 7065 6e4f  ifiedMarginOpenO
-00041100: 7264 6572 7328 2920 646f 6573 206e 6f74  rders() does not
-00041110: 2061 6c6c 6f77 2069 6e76 6572 7365 206d   allow inverse m
-00041120: 6172 6b65 7420 6f72 6465 7273 2066 6f72  arket orders for
-00041130: 2027 202b 2073 796d 626f 6c20 2b20 2720   ' + symbol + ' 
-00041140: 6d61 726b 6574 7327 290a 2020 2020 2020  markets').      
-00041150: 2020 7479 7065 203d 204e 6f6e 650a 2020    type = None.  
-00041160: 2020 2020 2020 7479 7065 2c20 7061 7261        type, para
-00041170: 6d73 203d 2073 656c 662e 6861 6e64 6c65  ms = self.handle
-00041180: 5f6d 6172 6b65 745f 7479 7065 5f61 6e64  _market_type_and
-00041190: 5f70 6172 616d 7328 2766 6574 6368 556e  _params('fetchUn
-000411a0: 6966 6965 644d 6172 6769 6e4f 7065 6e4f  ifiedMarginOpenO
-000411b0: 7264 6572 7327 2c20 6d61 726b 6574 2c20  rders', market, 
-000411c0: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
-000411d0: 6973 5374 6f70 203d 2073 656c 662e 7361  isStop = self.sa
-000411e0: 6665 5f76 616c 7565 2870 6172 616d 732c  fe_value(params,
-000411f0: 2027 7374 6f70 272c 2046 616c 7365 290a   'stop', False).
-00041200: 2020 2020 2020 2020 6973 436f 6e64 6974          isCondit
-00041210: 696f 6e61 6c20 3d20 6973 5374 6f70 206f  ional = isStop o
-00041220: 7220 2874 7970 6520 3d3d 2027 7374 6f70  r (type == 'stop
-00041230: 2729 206f 7220 2874 7970 6520 3d3d 2027  ') or (type == '
-00041240: 636f 6e64 6974 696f 6e61 6c27 290a 2020  conditional').  
-00041250: 2020 2020 2020 7061 7261 6d73 203d 2073        params = s
-00041260: 656c 662e 6f6d 6974 2870 6172 616d 732c  elf.omit(params,
-00041270: 205b 2773 746f 7027 5d29 0a20 2020 2020   ['stop']).     
-00041280: 2020 2069 6620 6973 436f 6e64 6974 696f     if isConditio
-00041290: 6e61 6c3a 0a20 2020 2020 2020 2020 2020  nal:.           
-000412a0: 2072 6571 7565 7374 5b27 6f72 6465 7246   request['orderF
-000412b0: 696c 7465 7227 5d20 3d20 2753 746f 704f  ilter'] = 'StopO
-000412c0: 7264 6572 270a 2020 2020 2020 2020 6966  rder'.        if
-000412d0: 206c 696d 6974 2069 7320 6e6f 7420 4e6f   limit is not No
-000412e0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-000412f0: 7265 7175 6573 745b 276c 696d 6974 275d  request['limit']
-00041300: 203d 206c 696d 6974 0a20 2020 2020 2020   = limit.       
-00041310: 2072 6573 706f 6e73 6520 3d20 6177 6169   response = awai
-00041320: 7420 7365 6c66 2e70 7269 7661 7465 4765  t self.privateGe
-00041330: 7455 6e69 6669 6564 5633 5072 6976 6174  tUnifiedV3Privat
-00041340: 654f 7264 6572 556e 6669 6c6c 6564 4f72  eOrderUnfilledOr
-00041350: 6465 7273 2873 656c 662e 6578 7465 6e64  ders(self.extend
-00041360: 2872 6571 7565 7374 2c20 7061 7261 6d73  (request, params
-00041370: 2929 0a20 2020 2020 2020 2023 0a20 2020  )).        #.   
-00041380: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
-00041390: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-000413a0: 7265 7443 6f64 6522 3a20 302c 0a20 2020  retCode": 0,.   
-000413b0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-000413c0: 7265 744d 7367 223a 2022 5375 6363 6573  retMsg": "Succes
-000413d0: 7322 2c0a 2020 2020 2020 2020 2320 2020  s",.        #   
-000413e0: 2020 2020 2020 2272 6573 756c 7422 3a20        "result": 
-000413f0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-00041400: 2020 2020 2020 2020 226e 6578 7450 6167          "nextPag
-00041410: 6543 7572 736f 7222 3a20 2231 3335 6363  eCursor": "135cc
-00041420: 6330 642d 3831 3336 2d34 6531 622d 3861  c0d-8136-4e1b-8a
-00041430: 6633 2d30 3762 3131 6565 3135 3864 3125  f3-07b11ee158d1%
-00041440: 3341 3136 3635 3536 3536 3130 3532 3625  3A1665565610526%
-00041450: 3243 3133 3563 6363 3064 2d38 3133 362d  2C135ccc0d-8136-
-00041460: 3465 3162 2d38 6166 332d 3037 6231 3165  4e1b-8af3-07b11e
-00041470: 6531 3538 6431 2533 4131 3636 3535 3635  e158d1%3A1665565
-00041480: 3631 3035 3236 222c 0a20 2020 2020 2020  610526",.       
-00041490: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-000414a0: 6361 7465 676f 7279 223a 2022 6c69 6e65  category": "line
-000414b0: 6172 222c 0a20 2020 2020 2020 2023 2020  ar",.        #  
-000414c0: 2020 2020 2020 2020 2020 2022 6c69 7374             "list
-000414d0: 223a 205b 0a20 2020 2020 2020 2023 2020  ": [.        #  
-000414e0: 2020 2020 2020 2020 2020 2020 2020 207b                 {
-000414f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00041500: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00041510: 7379 6d62 6f6c 223a 2022 4554 4855 5344  symbol": "ETHUSD
-00041520: 5422 2c0a 2020 2020 2020 2020 2320 2020  T",.        #   
-00041530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041540: 2020 226f 7264 6572 5479 7065 223a 2022    "orderType": "
-00041550: 4c69 6d69 7422 2c0a 2020 2020 2020 2020  Limit",.        
-00041560: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00041570: 2020 2020 2020 226f 7264 6572 4c69 6e6b        "orderLink
-00041580: 4964 223a 2022 7465 7374 3030 3030 3030  Id": "test000000
-00041590: 3522 2c0a 2020 2020 2020 2020 2320 2020  5",.        #   
-000415a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000415b0: 2020 226f 7264 6572 4964 223a 2022 3133    "orderId": "13
-000415c0: 3563 6363 3064 2d38 3133 362d 3465 3162  5ccc0d-8136-4e1b
-000415d0: 2d38 6166 332d 3037 6231 3165 6531 3538  -8af3-07b11ee158
-000415e0: 6431 222c 0a20 2020 2020 2020 2023 2020  d1",.        #  
-000415f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041600: 2020 2022 7374 6f70 4f72 6465 7254 7970     "stopOrderTyp
-00041610: 6522 3a20 2255 4e4b 4e4f 574e 222c 0a20  e": "UNKNOWN",. 
-00041620: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00041630: 2020 2020 2020 2020 2020 2020 2022 6f72               "or
-00041640: 6465 7253 7461 7475 7322 3a20 224e 6577  derStatus": "New
-00041650: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00041660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041670: 2022 7461 6b65 5072 6f66 6974 223a 2022   "takeProfit": "
-00041680: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00041690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000416a0: 2022 6375 6d45 7865 6356 616c 7565 223a   "cumExecValue":
-000416b0: 2022 302e 3030 3030 3030 3030 222c 0a20   "0.00000000",. 
-000416c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000416d0: 2020 2020 2020 2020 2020 2020 2022 626c               "bl
-000416e0: 6f63 6b54 7261 6465 4964 223a 2022 222c  ockTradeId": "",
-000416f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00041700: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00041710: 7072 6963 6522 3a20 2237 3030 2e30 3030  price": "700.000
-00041720: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
-00041730: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00041740: 2020 2020 2020 2263 7265 6174 6564 5469        "createdTi
-00041750: 6d65 223a 2031 3636 3535 3635 3631 3035  me": 16655656105
-00041760: 3236 2c0a 2020 2020 2020 2020 2320 2020  26,.        #   
-00041770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041780: 2020 2274 7054 7269 6767 6572 4279 223a    "tpTriggerBy":
-00041790: 2022 554e 4b4e 4f57 4e22 2c0a 2020 2020   "UNKNOWN",.    
-000417a0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000417b0: 2020 2020 2020 2020 2020 2274 696d 6549            "timeI
-000417c0: 6e46 6f72 6365 223a 2022 476f 6f64 5469  nForce": "GoodTi
-000417d0: 6c6c 4361 6e63 656c 222c 0a20 2020 2020  llCancel",.     
-000417e0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-000417f0: 2020 2020 2020 2020 2022 6261 7365 5072           "basePr
-00041800: 6963 6522 3a20 2222 2c0a 2020 2020 2020  ice": "",.      
-00041810: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00041820: 2020 2020 2020 2020 2275 7064 6174 6564          "updated
-00041830: 5469 6d65 223a 2031 3636 3535 3635 3631  Time": 166556561
-00041840: 3035 3333 2c0a 2020 2020 2020 2020 2320  0533,.        # 
-00041850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041860: 2020 2020 2273 6964 6522 3a20 2242 7579      "side": "Buy
-00041870: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00041880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041890: 2022 7472 6967 6765 7250 7269 6365 223a   "triggerPrice":
-000418a0: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
-000418b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000418c0: 2020 2022 6375 6d45 7865 6346 6565 223a     "cumExecFee":
-000418d0: 2022 302e 3030 3030 3030 3030 222c 0a20   "0.00000000",. 
-000418e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000418f0: 2020 2020 2020 2020 2020 2020 2022 736c               "sl
-00041900: 5472 6967 6765 7242 7922 3a20 2255 4e4b  TriggerBy": "UNK
-00041910: 4e4f 574e 222c 0a20 2020 2020 2020 2023  NOWN",.        #
-00041920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041930: 2020 2020 2022 6c65 6176 6573 5174 7922       "leavesQty"
-00041940: 3a20 2230 2e31 3030 3022 2c0a 2020 2020  : "0.1000",.    
-00041950: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00041960: 2020 2020 2020 2020 2020 2263 6c6f 7365            "close
-00041970: 4f6e 5472 6967 6765 7222 3a20 4661 6c73  OnTrigger": Fals
-00041980: 652c 0a20 2020 2020 2020 2023 2020 2020  e,.        #    
-00041990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000419a0: 2022 6375 6d45 7865 6351 7479 223a 2022   "cumExecQty": "
-000419b0: 302e 3030 3030 3030 3030 222c 0a20 2020  0.00000000",.   
-000419c0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000419d0: 2020 2020 2020 2020 2020 2022 7265 6475             "redu
-000419e0: 6365 4f6e 6c79 223a 2046 616c 7365 2c0a  ceOnly": False,.
-000419f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00041a00: 2020 2020 2020 2020 2020 2020 2020 2271                "q
-00041a10: 7479 223a 2022 302e 3130 3030 222c 0a20  ty": "0.1000",. 
-00041a20: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00041a30: 2020 2020 2020 2020 2020 2020 2022 7374               "st
-00041a40: 6f70 4c6f 7373 223a 2022 222c 0a20 2020  opLoss": "",.   
-00041a50: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00041a60: 2020 2020 2020 2020 2020 2022 7472 6967             "trig
-00041a70: 6765 7242 7922 3a20 2255 4e4b 4e4f 574e  gerBy": "UNKNOWN
-00041a80: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00041a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041aa0: 2022 6f72 6465 7249 4d22 3a20 2230 2e30   "orderIM": "0.0
-00041ab0: 3030 3030 3030 3022 0a20 2020 2020 2020  0000000".       
-00041ac0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00041ad0: 2020 207d 0a20 2020 2020 2020 2023 2020     }.        #  
-00041ae0: 2020 2020 2020 2020 2020 205d 0a20 2020             ].   
-00041af0: 2020 2020 2023 2020 2020 2020 2020 207d       #         }
-00041b00: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00041b10: 2020 2020 2272 6574 4578 7449 6e66 6f22      "retExtInfo"
-00041b20: 3a20 6e75 6c6c 2c0a 2020 2020 2020 2020  : null,.        
-00041b30: 2320 2020 2020 2020 2020 2274 696d 6522  #         "time"
-00041b40: 3a20 3136 3635 3536 3536 3134 3332 300a  : 1665565614320.
-00041b50: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-00041b60: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-00041b70: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
-00041b80: 7361 6665 5f76 616c 7565 2872 6573 706f  safe_value(respo
-00041b90: 6e73 652c 2027 7265 7375 6c74 272c 207b  nse, 'result', {
-00041ba0: 7d29 0a20 2020 2020 2020 206f 7264 6572  }).        order
-00041bb0: 7320 3d20 7365 6c66 2e73 6166 655f 7661  s = self.safe_va
-00041bc0: 6c75 6528 7265 7375 6c74 2c20 276c 6973  lue(result, 'lis
-00041bd0: 7427 2c20 5b5d 290a 2020 2020 2020 2020  t', []).        
-00041be0: 7265 7475 726e 2073 656c 662e 7061 7273  return self.pars
-00041bf0: 655f 6f72 6465 7273 286f 7264 6572 732c  e_orders(orders,
-00041c00: 206d 6172 6b65 742c 2073 696e 6365 2c20   market, since, 
-00041c10: 6c69 6d69 7429 0a0a 2020 2020 6173 796e  limit)..    asyn
-00041c20: 6320 6465 6620 6665 7463 685f 6465 7269  c def fetch_deri
-00041c30: 7661 7469 7665 735f 6f70 656e 5f6f 7264  vatives_open_ord
-00041c40: 6572 7328 7365 6c66 2c20 7379 6d62 6f6c  ers(self, symbol
-00041c50: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
-00041c60: 3d20 4e6f 6e65 2c20 7369 6e63 653a 204f  = None, since: O
-00041c70: 7074 696f 6e61 6c5b 696e 745d 203d 204e  ptional[int] = N
-00041c80: 6f6e 652c 206c 696d 6974 3a20 4f70 7469  one, limit: Opti
-00041c90: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
-00041ca0: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
-00041cb0: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
-00041cc0: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
-00041cd0: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
-00041ce0: 204e 6f6e 650a 2020 2020 2020 2020 7365   None.        se
-00041cf0: 7474 6c65 203d 204e 6f6e 650a 2020 2020  ttle = None.    
-00041d00: 2020 2020 7265 7175 6573 7420 3d20 7b0a      request = {.
-00041d10: 2020 2020 2020 2020 2020 2020 2320 2773              # 's
-00041d20: 796d 626f 6c27 3a20 6d61 726b 6574 5b27  ymbol': market['
-00041d30: 6964 275d 2c0a 2020 2020 2020 2020 2020  id'],.          
-00041d40: 2020 2320 2763 6174 6567 6f72 7927 2c20    # 'category', 
-00041d50: 5479 7065 206f 6620 6465 7269 7661 7469  Type of derivati
-00041d60: 7665 7320 7072 6f64 7563 743a 206c 696e  ves product: lin
-00041d70: 6561 7220 6f72 206f 7074 696f 6e2e 0a20  ear or option.. 
-00041d80: 2020 2020 2020 2020 2020 2023 2027 6261             # 'ba
-00041d90: 7365 436f 696e 272c 2042 6173 6520 636f  seCoin', Base co
-00041da0: 696e 2e20 5768 656e 2063 6174 6567 6f72  in. When categor
-00041db0: 793d 6f70 7469 6f6e 2e20 4966 206e 6f74  y=option. If not
-00041dc0: 2070 6173 7365 642c 2042 5443 2062 7920   passed, BTC by 
-00041dd0: 6465 6661 756c 743b 2077 6865 6e20 6361  default; when ca
-00041de0: 7465 676f 7279 3d6c 696e 6561 722c 2069  tegory=linear, i
-00041df0: 6620 4254 4320 7061 7373 6564 2c20 4254  f BTC passed, BT
-00041e00: 4350 4552 5020 2620 4254 4355 5344 5420  CPERP & BTCUSDT 
-00041e10: 7265 7475 726e 6564 2e0a 2020 2020 2020  returned..      
-00041e20: 2020 2020 2020 2320 2773 6574 746c 6543        # 'settleC
-00041e30: 6f69 6e27 2c20 5365 7474 6c65 2063 6f69  oin', Settle coi
-00041e40: 6e2e 2046 6f72 206c 696e 6561 722c 2065  n. For linear, e
-00041e50: 6974 6865 7220 7379 6d62 6f6c 206f 7220  ither symbol or 
-00041e60: 7365 7474 6c65 436f 696e 2069 7320 7265  settleCoin is re
-00041e70: 7175 6972 6564 0a20 2020 2020 2020 2020  quired.         
-00041e80: 2020 2023 2027 6f72 6465 7249 6427 2c20     # 'orderId', 
-00041e90: 4f72 6465 7220 4944 0a20 2020 2020 2020  Order ID.       
-00041ea0: 2020 2020 2023 2027 6f72 6465 724c 696e       # 'orderLin
-00041eb0: 6b49 6427 2c20 556e 6971 7565 2075 7365  kId', Unique use
-00041ec0: 722d 7365 7420 6f72 6465 7220 4944 0a20  r-set order ID. 
-00041ed0: 2020 2020 2020 2020 2020 2023 2027 6f72             # 'or
-00041ee0: 6465 7246 696c 7465 7227 2c20 436f 6e64  derFilter', Cond
-00041ef0: 6974 696f 6e61 6c20 6f72 6465 7220 6f72  itional order or
-00041f00: 2061 6374 6976 6520 6f72 6465 720a 2020   active order.  
-00041f10: 2020 2020 2020 2020 2020 2320 276c 696d            # 'lim
-00041f20: 6974 273a 206e 756d 6265 722c 2044 6174  it': number, Dat
-00041f30: 6120 7175 616e 7469 7479 2070 6572 2070  a quantity per p
-00041f40: 6167 653a 204d 6178 2064 6174 6120 7661  age: Max data va
-00041f50: 6c75 6520 7065 7220 7061 6765 2069 7320  lue per page is 
-00041f60: 3530 2c20 616e 6420 6465 6661 756c 7420  50, and default 
-00041f70: 7661 6c75 6520 6174 2032 302e 0a20 2020  value at 20..   
-00041f80: 2020 2020 2020 2020 2023 2027 6375 7273           # 'curs
-00041f90: 6f72 272c 2041 5049 2070 6173 732d 7468  or', API pass-th
-00041fa0: 726f 7567 682e 2061 6363 6f75 6e74 5479  rough. accountTy
-00041fb0: 7065 202b 2063 6174 6567 6f72 7920 2b20  pe + category + 
-00041fc0: 6375 7273 6f72 202b 2e20 4966 2069 6e63  cursor +. If inc
-00041fd0: 6f6e 7369 7374 656e 742c 2074 6865 2066  onsistent, the f
-00041fe0: 6f6c 6c6f 7769 6e67 2073 686f 756c 6420  ollowing should 
-00041ff0: 6265 2072 6574 7572 6e65 643a 2054 6865  be returned: The
-00042000: 2061 6363 6f75 6e74 2074 7970 6520 646f   account type do
-00042010: 6573 206e 6f74 206d 6174 6368 2074 6865  es not match the
-00042020: 2073 6572 7669 6365 2069 6e71 7569 7279   service inquiry
-00042030: 2e0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-00042040: 276f 7065 6e4f 6e6c 7927 3a20 302c 0a20  'openOnly': 0,. 
-00042050: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-00042060: 2069 6620 7379 6d62 6f6c 2069 7320 6e6f   if symbol is no
-00042070: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00042080: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
-00042090: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
-000420a0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-000420b0: 7565 7374 5b27 7379 6d62 6f6c 275d 203d  uest['symbol'] =
-000420c0: 206d 6172 6b65 745b 2769 6427 5d0a 2020   market['id'].  
-000420d0: 2020 2020 2020 2020 2020 6966 206d 6172            if mar
-000420e0: 6b65 745b 276c 696e 6561 7227 5d3a 0a20  ket['linear']:. 
-000420f0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00042100: 6571 7565 7374 5b27 6361 7465 676f 7279  equest['category
-00042110: 275d 203d 2027 6c69 6e65 6172 270a 2020  '] = 'linear'.  
-00042120: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00042130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042140: 7265 7175 6573 745b 2763 6174 6567 6f72  request['categor
-00042150: 7927 5d20 3d20 2769 6e76 6572 7365 270a  y'] = 'inverse'.
-00042160: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00042170: 2020 2020 2020 2020 2020 7479 7065 203d            type =
-00042180: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
-00042190: 2020 7479 7065 2c20 7061 7261 6d73 203d    type, params =
-000421a0: 2073 656c 662e 6861 6e64 6c65 5f6d 6172   self.handle_mar
-000421b0: 6b65 745f 7479 7065 5f61 6e64 5f70 6172  ket_type_and_par
-000421c0: 616d 7328 2766 6574 6368 4f70 656e 4f72  ams('fetchOpenOr
-000421d0: 6465 7273 272c 206d 6172 6b65 742c 2070  ders', market, p
-000421e0: 6172 616d 7329 0a20 2020 2020 2020 2020  arams).         
-000421f0: 2020 2073 7562 5479 7065 203d 204e 6f6e     subType = Non
-00042200: 650a 2020 2020 2020 2020 2020 2020 7375  e.            su
-00042210: 6254 7970 652c 2070 6172 616d 7320 3d20  bType, params = 
-00042220: 7365 6c66 2e68 616e 646c 655f 7375 625f  self.handle_sub_
-00042230: 7479 7065 5f61 6e64 5f70 6172 616d 7328  type_and_params(
-00042240: 2766 6574 6368 4f70 656e 4f72 6465 7273  'fetchOpenOrders
-00042250: 272c 206d 6172 6b65 742c 2070 6172 616d  ', market, param
-00042260: 732c 2027 6c69 6e65 6172 2729 0a20 2020  s, 'linear').   
-00042270: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00042280: 5b27 6361 7465 676f 7279 275d 203d 2074  ['category'] = t
-00042290: 7970 650a 2020 2020 2020 2020 2020 2020  ype.            
-000422a0: 6966 2074 7970 6520 3d3d 2027 7377 6170  if type == 'swap
-000422b0: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
-000422c0: 2020 2072 6571 7565 7374 5b27 6361 7465     request['cate
-000422d0: 676f 7279 275d 203d 2073 7562 5479 7065  gory'] = subType
-000422e0: 0a20 2020 2020 2020 2073 6574 746c 652c  .        settle,
-000422f0: 2070 6172 616d 7320 3d20 7365 6c66 2e68   params = self.h
-00042300: 616e 646c 655f 6f70 7469 6f6e 5f61 6e64  andle_option_and
-00042310: 5f70 6172 616d 7328 7061 7261 6d73 2c20  _params(params, 
-00042320: 2766 6574 6368 4f70 656e 4f72 6465 7273  'fetchOpenOrders
-00042330: 272c 2027 7365 7474 6c65 272c 2073 6574  ', 'settle', set
-00042340: 746c 6529 0a20 2020 2020 2020 2069 6620  tle).        if 
-00042350: 7365 7474 6c65 2069 7320 6e6f 7420 4e6f  settle is not No
-00042360: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00042370: 7265 7175 6573 745b 2773 6574 746c 6543  request['settleC
-00042380: 6f69 6e27 5d20 3d20 7365 7474 6c65 0a20  oin'] = settle. 
-00042390: 2020 2020 2020 2069 7353 746f 7020 3d20         isStop = 
-000423a0: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
-000423b0: 7061 7261 6d73 2c20 2773 746f 7027 2c20  params, 'stop', 
-000423c0: 4661 6c73 6529 0a20 2020 2020 2020 2070  False).        p
-000423d0: 6172 616d 7320 3d20 7365 6c66 2e6f 6d69  arams = self.omi
-000423e0: 7428 7061 7261 6d73 2c20 5b27 7374 6f70  t(params, ['stop
-000423f0: 275d 290a 2020 2020 2020 2020 6966 2069  ']).        if i
-00042400: 7353 746f 703a 0a20 2020 2020 2020 2020  sStop:.         
-00042410: 2020 2072 6571 7565 7374 5b27 6f72 6465     request['orde
-00042420: 7246 696c 7465 7227 5d20 3d20 2753 746f  rFilter'] = 'Sto
-00042430: 704f 7264 6572 270a 2020 2020 2020 2020  pOrder'.        
-00042440: 6966 206c 696d 6974 2069 7320 6e6f 7420  if limit is not 
-00042450: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-00042460: 2020 7265 7175 6573 745b 276c 696d 6974    request['limit
-00042470: 275d 203d 206c 696d 6974 0a20 2020 2020  '] = limit.     
-00042480: 2020 2072 6573 706f 6e73 6520 3d20 6177     response = aw
-00042490: 6169 7420 7365 6c66 2e70 7269 7661 7465  ait self.private
-000424a0: 4765 7456 354f 7264 6572 5265 616c 7469  GetV5OrderRealti
-000424b0: 6d65 2873 656c 662e 6578 7465 6e64 2872  me(self.extend(r
-000424c0: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
-000424d0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-000424e0: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
-000424f0: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-00042500: 7443 6f64 6522 3a20 302c 0a20 2020 2020  tCode": 0,.     
-00042510: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-00042520: 744d 7367 223a 2022 4f4b 222c 0a20 2020  tMsg": "OK",.   
-00042530: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00042540: 7265 7375 6c74 223a 207b 0a20 2020 2020  result": {.     
-00042550: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00042560: 2022 6e65 7874 5061 6765 4375 7273 6f72   "nextPageCursor
-00042570: 223a 2022 3133 3231 3035 3236 3533 3533  ": "132105265353
-00042580: 3635 3135 3538 3425 3341 3136 3732 3231  6515584%3A167221
-00042590: 3737 3438 3238 3725 3243 3133 3231 3035  7748287%2C132105
-000425a0: 3236 3533 3533 3635 3135 3538 3425 3341  2653536515584%3A
-000425b0: 3136 3732 3231 3737 3438 3238 3722 2c0a  1672217748287",.
-000425c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000425d0: 2020 2020 2020 2263 6174 6567 6f72 7922        "category"
-000425e0: 3a20 2273 706f 7422 2c0a 2020 2020 2020  : "spot",.      
-000425f0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00042600: 226c 6973 7422 3a20 5b0a 2020 2020 2020  "list": [.      
-00042610: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00042620: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-00042630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042640: 2020 2020 2273 796d 626f 6c22 3a20 2245      "symbol": "E
-00042650: 5448 5553 4454 222c 0a20 2020 2020 2020  THUSDT",.       
-00042660: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00042670: 2020 2020 2020 2022 6f72 6465 7254 7970         "orderTyp
-00042680: 6522 3a20 224c 696d 6974 222c 0a20 2020  e": "Limit",.   
-00042690: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000426a0: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
-000426b0: 724c 696e 6b49 6422 3a20 2231 3637 3232  rLinkId": "16722
-000426c0: 3137 3734 3832 3737 3635 3222 2c0a 2020  17748277652",.  
-000426d0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000426e0: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
-000426f0: 6572 4964 223a 2022 3133 3231 3035 3236  erId": "13210526
-00042700: 3533 3533 3635 3135 3538 3422 2c0a 2020  53536515584",.  
-00042710: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00042720: 2020 2020 2020 2020 2020 2020 2263 616e              "can
-00042730: 6365 6c54 7970 6522 3a20 2255 4e4b 4e4f  celType": "UNKNO
-00042740: 574e 222c 0a20 2020 2020 2020 2023 2020  WN",.        #  
-00042750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042760: 2020 2022 6176 6750 7269 6365 223a 2022     "avgPrice": "
-00042770: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00042780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042790: 2022 7374 6f70 4f72 6465 7254 7970 6522   "stopOrderType"
-000427a0: 3a20 2274 7073 6c4f 7264 6572 222c 0a20  : "tpslOrder",. 
-000427b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000427c0: 2020 2020 2020 2020 2020 2020 2022 6c61               "la
-000427d0: 7374 5072 6963 654f 6e43 7265 6174 6564  stPriceOnCreated
-000427e0: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
-000427f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042800: 2020 2020 2022 6f72 6465 7253 7461 7475       "orderStatu
-00042810: 7322 3a20 2243 616e 6365 6c6c 6564 222c  s": "Cancelled",
-00042820: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00042830: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00042840: 7461 6b65 5072 6f66 6974 223a 2022 222c  takeProfit": "",
-00042850: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00042860: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00042870: 6375 6d45 7865 6356 616c 7565 223a 2022  cumExecValue": "
-00042880: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-00042890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000428a0: 2020 2274 7269 6767 6572 4469 7265 6374    "triggerDirect
-000428b0: 696f 6e22 3a20 302c 0a20 2020 2020 2020  ion": 0,.       
-000428c0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-000428d0: 2020 2020 2020 2022 6973 4c65 7665 7261         "isLevera
-000428e0: 6765 223a 2022 3022 2c0a 2020 2020 2020  ge": "0",.      
-000428f0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00042900: 2020 2020 2020 2020 2272 656a 6563 7452          "rejectR
-00042910: 6561 736f 6e22 3a20 2222 2c0a 2020 2020  eason": "",.    
-00042920: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00042930: 2020 2020 2020 2020 2020 2270 7269 6365            "price
-00042940: 223a 2022 3130 3030 222c 0a20 2020 2020  ": "1000",.     
-00042950: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00042960: 2020 2020 2020 2020 2022 6f72 6465 7249           "orderI
-00042970: 7622 3a20 2222 2c0a 2020 2020 2020 2020  v": "",.        
-00042980: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00042990: 2020 2020 2020 2263 7265 6174 6564 5469        "createdTi
-000429a0: 6d65 223a 2022 3136 3732 3231 3737 3438  me": "1672217748
-000429b0: 3238 3722 2c0a 2020 2020 2020 2020 2320  287",.        # 
-000429c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000429d0: 2020 2020 2274 7054 7269 6767 6572 4279      "tpTriggerBy
-000429e0: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
-000429f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042a00: 2020 2020 2022 706f 7369 7469 6f6e 4964       "positionId
-00042a10: 7822 3a20 302c 0a20 2020 2020 2020 2023  x": 0,.        #
-00042a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042a30: 2020 2020 2022 7469 6d65 496e 466f 7263       "timeInForc
-00042a40: 6522 3a20 2247 5443 222c 0a20 2020 2020  e": "GTC",.     
-00042a50: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00042a60: 2020 2020 2020 2020 2022 6c65 6176 6573           "leaves
-00042a70: 5661 6c75 6522 3a20 2235 3030 222c 0a20  Value": "500",. 
-00042a80: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00042a90: 2020 2020 2020 2020 2020 2020 2022 7570               "up
-00042aa0: 6461 7465 6454 696d 6522 3a20 2231 3637  datedTime": "167
-00042ab0: 3232 3137 3734 3832 3837 222c 0a20 2020  2217748287",.   
-00042ac0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00042ad0: 2020 2020 2020 2020 2020 2022 7369 6465             "side
-00042ae0: 223a 2022 4275 7922 2c0a 2020 2020 2020  ": "Buy",.      
-00042af0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00042b00: 2020 2020 2020 2020 2274 7269 6767 6572          "trigger
-00042b10: 5072 6963 6522 3a20 2231 3530 3022 2c0a  Price": "1500",.
-00042b20: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00042b30: 2020 2020 2020 2020 2020 2020 2020 2263                "c
-00042b40: 756d 4578 6563 4665 6522 3a20 2230 222c  umExecFee": "0",
-00042b50: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00042b60: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00042b70: 6c65 6176 6573 5174 7922 3a20 2230 222c  leavesQty": "0",
-00042b80: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00042b90: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00042ba0: 736c 5472 6967 6765 7242 7922 3a20 2222  slTriggerBy": ""
-00042bb0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00042bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042bd0: 2263 6c6f 7365 4f6e 5472 6967 6765 7222  "closeOnTrigger"
-00042be0: 3a20 4661 6c73 652c 0a20 2020 2020 2020  : False,.       
-00042bf0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00042c00: 2020 2020 2020 2022 6375 6d45 7865 6351         "cumExecQ
-00042c10: 7479 223a 2022 3022 2c0a 2020 2020 2020  ty": "0",.      
-00042c20: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00042c30: 2020 2020 2020 2020 2272 6564 7563 654f          "reduceO
-00042c40: 6e6c 7922 3a20 4661 6c73 652c 0a20 2020  nly": False,.   
-00042c50: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00042c60: 2020 2020 2020 2020 2020 2022 7174 7922             "qty"
-00042c70: 3a20 2230 2e35 222c 0a20 2020 2020 2020  : "0.5",.       
-00042c80: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00042c90: 2020 2020 2020 2022 7374 6f70 4c6f 7373         "stopLoss
-00042ca0: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
-00042cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042cc0: 2020 2020 2022 7472 6967 6765 7242 7922       "triggerBy"
-00042cd0: 3a20 2231 3139 322e 3522 0a20 2020 2020  : "1192.5".     
+000404b0: 2020 2020 2020 2263 756d 4578 6563 5661        "cumExecVa
+000404c0: 6c75 6522 3a20 2230 222c 0a20 2020 2020  lue": "0",.     
+000404d0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+000404e0: 2020 2020 2020 2020 2022 7472 6967 6765           "trigge
+000404f0: 7244 6972 6563 7469 6f6e 223a 2030 2c0a  rDirection": 0,.
+00040500: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00040510: 2020 2020 2020 2020 2020 2020 2020 2269                "i
+00040520: 734c 6576 6572 6167 6522 3a20 2230 222c  sLeverage": "0",
+00040530: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00040540: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00040550: 7265 6a65 6374 5265 6173 6f6e 223a 2022  rejectReason": "
+00040560: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00040570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040580: 2022 7072 6963 6522 3a20 2231 3030 3022   "price": "1000"
+00040590: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000405a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000405b0: 226f 7264 6572 4976 223a 2022 222c 0a20  "orderIv": "",. 
+000405c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000405d0: 2020 2020 2020 2020 2020 2020 2022 6372               "cr
+000405e0: 6561 7465 6454 696d 6522 3a20 2231 3637  eatedTime": "167
+000405f0: 3232 3137 3734 3832 3837 222c 0a20 2020  2217748287",.   
+00040600: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00040610: 2020 2020 2020 2020 2020 2022 7470 5472             "tpTr
+00040620: 6967 6765 7242 7922 3a20 2222 2c0a 2020  iggerBy": "",.  
+00040630: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00040640: 2020 2020 2020 2020 2020 2020 2270 6f73              "pos
+00040650: 6974 696f 6e49 6478 223a 2030 2c0a 2020  itionIdx": 0,.  
+00040660: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00040670: 2020 2020 2020 2020 2020 2020 2274 696d              "tim
+00040680: 6549 6e46 6f72 6365 223a 2022 4754 4322  eInForce": "GTC"
+00040690: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000406a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000406b0: 226c 6561 7665 7356 616c 7565 223a 2022  "leavesValue": "
+000406c0: 3530 3022 2c0a 2020 2020 2020 2020 2320  500",.        # 
+000406d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000406e0: 2020 2020 2275 7064 6174 6564 5469 6d65      "updatedTime
+000406f0: 223a 2022 3136 3732 3231 3737 3438 3238  ": "167221774828
+00040700: 3722 2c0a 2020 2020 2020 2020 2320 2020  7",.        #   
+00040710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040720: 2020 2273 6964 6522 3a20 2242 7579 222c    "side": "Buy",
+00040730: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00040740: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00040750: 7472 6967 6765 7250 7269 6365 223a 2022  triggerPrice": "
+00040760: 3135 3030 222c 0a20 2020 2020 2020 2023  1500",.        #
+00040770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040780: 2020 2020 2022 6375 6d45 7865 6346 6565       "cumExecFee
+00040790: 223a 2022 3022 2c0a 2020 2020 2020 2020  ": "0",.        
+000407a0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000407b0: 2020 2020 2020 226c 6561 7665 7351 7479        "leavesQty
+000407c0: 223a 2022 3022 2c0a 2020 2020 2020 2020  ": "0",.        
+000407d0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000407e0: 2020 2020 2020 2273 6c54 7269 6767 6572        "slTrigger
+000407f0: 4279 223a 2022 222c 0a20 2020 2020 2020  By": "",.       
+00040800: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00040810: 2020 2020 2020 2022 636c 6f73 654f 6e54         "closeOnT
+00040820: 7269 6767 6572 223a 2046 616c 7365 2c0a  rigger": False,.
+00040830: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00040840: 2020 2020 2020 2020 2020 2020 2020 2263                "c
+00040850: 756d 4578 6563 5174 7922 3a20 2230 222c  umExecQty": "0",
+00040860: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00040870: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00040880: 7265 6475 6365 4f6e 6c79 223a 2046 616c  reduceOnly": Fal
+00040890: 7365 2c0a 2020 2020 2020 2020 2320 2020  se,.        #   
+000408a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000408b0: 2020 2271 7479 223a 2022 302e 3522 2c0a    "qty": "0.5",.
+000408c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000408d0: 2020 2020 2020 2020 2020 2020 2020 2273                "s
+000408e0: 746f 704c 6f73 7322 3a20 2222 2c0a 2020  topLoss": "",.  
+000408f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00040900: 2020 2020 2020 2020 2020 2020 2274 7269              "tri
+00040910: 6767 6572 4279 223a 2022 3131 3932 2e35  ggerBy": "1192.5
+00040920: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
+00040930: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
+00040940: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00040950: 2020 2020 5d0a 2020 2020 2020 2020 2320      ].        # 
+00040960: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
+00040970: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+00040980: 7445 7874 496e 666f 223a 207b 7d2c 0a20  tExtInfo": {},. 
+00040990: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000409a0: 2022 7469 6d65 223a 2031 3637 3232 3139   "time": 1672219
+000409b0: 3532 3632 3934 0a20 2020 2020 2020 2023  526294.        #
+000409c0: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+000409d0: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
+000409e0: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+000409f0: 6528 7265 7370 6f6e 7365 2c20 2772 6573  e(response, 'res
+00040a00: 756c 7427 2c20 7b7d 290a 2020 2020 2020  ult', {}).      
+00040a10: 2020 6461 7461 203d 2073 656c 662e 7361    data = self.sa
+00040a20: 6665 5f76 616c 7565 2872 6573 756c 742c  fe_value(result,
+00040a30: 2027 6c69 7374 272c 205b 5d29 0a20 2020   'list', []).   
+00040a40: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00040a50: 2e70 6172 7365 5f6f 7264 6572 7328 6461  .parse_orders(da
+00040a60: 7461 2c20 6d61 726b 6574 2c20 7369 6e63  ta, market, sinc
+00040a70: 652c 206c 696d 6974 290a 0a20 2020 2061  e, limit)..    a
+00040a80: 7379 6e63 2064 6566 2066 6574 6368 5f73  sync def fetch_s
+00040a90: 706f 745f 6f70 656e 5f6f 7264 6572 7328  pot_open_orders(
+00040aa0: 7365 6c66 2c20 7379 6d62 6f6c 3a20 4f70  self, symbol: Op
+00040ab0: 7469 6f6e 616c 5b73 7472 5d20 3d20 4e6f  tional[str] = No
+00040ac0: 6e65 2c20 7369 6e63 653a 204f 7074 696f  ne, since: Optio
+00040ad0: 6e61 6c5b 696e 745d 203d 204e 6f6e 652c  nal[int] = None,
+00040ae0: 206c 696d 6974 3a20 4f70 7469 6f6e 616c   limit: Optional
+00040af0: 5b69 6e74 5d20 3d20 4e6f 6e65 2c20 7061  [int] = None, pa
+00040b00: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
+00040b10: 2020 6177 6169 7420 7365 6c66 2e6c 6f61    await self.loa
+00040b20: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
+00040b30: 2020 2020 7265 7175 6573 7420 3d20 7b7d      request = {}
+00040b40: 0a20 2020 2020 2020 206d 6172 6b65 7420  .        market 
+00040b50: 3d20 4e6f 6e65 0a20 2020 2020 2020 2069  = None.        i
+00040b60: 6620 7379 6d62 6f6c 2069 7320 6e6f 7420  f symbol is not 
+00040b70: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00040b80: 2020 6d61 726b 6574 203d 2073 656c 662e    market = self.
+00040b90: 6d61 726b 6574 2873 796d 626f 6c29 0a20  market(symbol). 
+00040ba0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+00040bb0: 7374 5b27 7379 6d62 6f6c 275d 203d 206d  st['symbol'] = m
+00040bc0: 6172 6b65 745b 2769 6427 5d0a 2020 2020  arket['id'].    
+00040bd0: 2020 2020 6966 206c 696d 6974 2069 7320      if limit is 
+00040be0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00040bf0: 2020 2020 2020 7265 7175 6573 745b 276c        request['l
+00040c00: 696d 6974 275d 203d 206c 696d 6974 0a20  imit'] = limit. 
+00040c10: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+00040c20: 3d20 6177 6169 7420 7365 6c66 2e70 7269  = await self.pri
+00040c30: 7661 7465 4765 7453 706f 7456 3350 7269  vateGetSpotV3Pri
+00040c40: 7661 7465 4f70 656e 4f72 6465 7273 2873  vateOpenOrders(s
+00040c50: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
+00040c60: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
+00040c70: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+00040c80: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+00040c90: 2020 2020 2020 2020 2272 6574 436f 6465          "retCode
+00040ca0: 223a 2022 3022 2c0a 2020 2020 2020 2020  ": "0",.        
+00040cb0: 2320 2020 2020 2020 2020 2272 6574 4d73  #         "retMs
+00040cc0: 6722 3a20 224f 4b22 2c0a 2020 2020 2020  g": "OK",.      
+00040cd0: 2020 2320 2020 2020 2020 2020 2272 6573    #         "res
+00040ce0: 756c 7422 3a20 7b0a 2020 2020 2020 2020  ult": {.        
+00040cf0: 2320 2020 2020 2020 2020 2020 2020 226c  #             "l
+00040d00: 6973 7422 3a20 5b0a 2020 2020 2020 2020  ist": [.        
+00040d10: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00040d20: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+00040d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040d40: 2020 2261 6363 6f75 6e74 4964 223a 2022    "accountId": "
+00040d50: 3133 3338 3034 3334 222c 0a20 2020 2020  13380434",.     
+00040d60: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00040d70: 2020 2020 2020 2020 2022 7379 6d62 6f6c           "symbol
+00040d80: 223a 2022 4141 5645 5553 4454 222c 0a20  ": "AAVEUSDT",. 
+00040d90: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00040da0: 2020 2020 2020 2020 2020 2020 2022 6f72               "or
+00040db0: 6465 724c 696e 6b49 6422 3a20 2231 3636  derLinkId": "166
+00040dc0: 3637 3334 3030 3533 3030 3731 3722 2c0a  6734005300717",.
+00040dd0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00040de0: 2020 2020 2020 2020 2020 2020 2020 226f                "o
+00040df0: 7264 6572 4964 223a 2022 3132 3735 3035  rderId": "127505
+00040e00: 3136 3833 3237 3932 3831 3636 3422 2c0a  1683279281664",.
+00040e10: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00040e20: 2020 2020 2020 2020 2020 2020 2020 226f                "o
+00040e30: 7264 6572 5072 6963 6522 3a20 2238 3022  rderPrice": "80"
+00040e40: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00040e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040e60: 226f 7264 6572 5174 7922 3a20 2230 2e31  "orderQty": "0.1
+00040e70: 3122 2c0a 2020 2020 2020 2020 2320 2020  1",.        #   
+00040e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040e90: 2020 2265 7865 6351 7479 223a 2022 3022    "execQty": "0"
+00040ea0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00040eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040ec0: 2263 756d 6d75 6c61 7469 7665 5175 6f74  "cummulativeQuot
+00040ed0: 6551 7479 223a 2022 3022 2c0a 2020 2020  eQty": "0",.    
+00040ee0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00040ef0: 2020 2020 2020 2020 2020 2261 7667 5072            "avgPr
+00040f00: 6963 6522 3a20 2230 222c 0a20 2020 2020  ice": "0",.     
+00040f10: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00040f20: 2020 2020 2020 2020 2022 7374 6174 7573           "status
+00040f30: 223a 2022 4e45 5722 2c0a 2020 2020 2020  ": "NEW",.      
+00040f40: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00040f50: 2020 2020 2020 2020 2274 696d 6549 6e46          "timeInF
+00040f60: 6f72 6365 223a 2022 4754 4322 2c0a 2020  orce": "GTC",.  
+00040f70: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00040f80: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+00040f90: 6572 5479 7065 223a 2022 4c49 4d49 5422  erType": "LIMIT"
+00040fa0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00040fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040fc0: 2273 6964 6522 3a20 2242 5559 222c 0a20  "side": "BUY",. 
+00040fd0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00040fe0: 2020 2020 2020 2020 2020 2020 2022 7374               "st
+00040ff0: 6f70 5072 6963 6522 3a20 2230 2e30 222c  opPrice": "0.0",
+00041000: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00041010: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00041020: 6963 6562 6572 6751 7479 223a 2022 302e  icebergQty": "0.
+00041030: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00041040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041050: 2020 2263 7265 6174 6554 696d 6522 3a20    "createTime": 
+00041060: 2231 3636 3637 3334 3030 3533 3034 222c  "1666734005304",
+00041070: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00041080: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00041090: 7570 6461 7465 5469 6d65 223a 2022 3136  updateTime": "16
+000410a0: 3636 3733 3430 3035 3330 3922 2c0a 2020  66734005309",.  
+000410b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000410c0: 2020 2020 2020 2020 2020 2020 2269 7357              "isW
+000410d0: 6f72 6b69 6e67 223a 2022 3122 2c0a 2020  orking": "1",.  
+000410e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000410f0: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+00041100: 6572 4361 7465 676f 7279 223a 2022 3022  erCategory": "0"
+00041110: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00041120: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
+00041130: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00041140: 2020 205d 0a20 2020 2020 2020 2023 2020     ].        #  
+00041150: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
+00041160: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
+00041170: 4578 7449 6e66 6f22 3a20 6e75 6c6c 2c0a  ExtInfo": null,.
+00041180: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00041190: 2020 2274 696d 6522 3a20 2231 3636 3637    "time": "16667
+000411a0: 3334 3033 3135 3932 220a 2020 2020 2020  34031592".      
+000411b0: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
+000411c0: 2020 230a 2020 2020 2020 2020 7265 7375    #.        resu
+000411d0: 6c74 203d 2073 656c 662e 7361 6665 5f76  lt = self.safe_v
+000411e0: 616c 7565 2872 6573 706f 6e73 652c 2027  alue(response, '
+000411f0: 7265 7375 6c74 272c 207b 7d29 0a20 2020  result', {}).   
+00041200: 2020 2020 206f 7264 6572 7320 3d20 7365       orders = se
+00041210: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
+00041220: 7375 6c74 2c20 276c 6973 7427 2c20 5b5d  sult, 'list', []
+00041230: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00041240: 2073 656c 662e 7061 7273 655f 6f72 6465   self.parse_orde
+00041250: 7273 286f 7264 6572 732c 206d 6172 6b65  rs(orders, marke
+00041260: 742c 2073 696e 6365 2c20 6c69 6d69 7429  t, since, limit)
+00041270: 0a0a 2020 2020 6173 796e 6320 6465 6620  ..    async def 
+00041280: 6665 7463 685f 756e 6966 6965 645f 6d61  fetch_unified_ma
+00041290: 7267 696e 5f6f 7065 6e5f 6f72 6465 7273  rgin_open_orders
+000412a0: 2873 656c 662c 2073 796d 626f 6c3a 204f  (self, symbol: O
+000412b0: 7074 696f 6e61 6c5b 7374 725d 203d 204e  ptional[str] = N
+000412c0: 6f6e 652c 2073 696e 6365 3a20 4f70 7469  one, since: Opti
+000412d0: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
+000412e0: 2c20 6c69 6d69 743a 204f 7074 696f 6e61  , limit: Optiona
+000412f0: 6c5b 696e 745d 203d 204e 6f6e 652c 2070  l[int] = None, p
+00041300: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
+00041310: 2020 2061 7761 6974 2073 656c 662e 6c6f     await self.lo
+00041320: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
+00041330: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
+00041340: 7d0a 2020 2020 2020 2020 6d61 726b 6574  }.        market
+00041350: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+00041360: 6966 2073 796d 626f 6c20 6973 204e 6f6e  if symbol is Non
+00041370: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
+00041380: 7562 5479 7065 203d 204e 6f6e 650a 2020  ubType = None.  
+00041390: 2020 2020 2020 2020 2020 7375 6254 7970            subTyp
+000413a0: 652c 2070 6172 616d 7320 3d20 7365 6c66  e, params = self
+000413b0: 2e68 616e 646c 655f 7375 625f 7479 7065  .handle_sub_type
+000413c0: 5f61 6e64 5f70 6172 616d 7328 2766 6574  _and_params('fet
+000413d0: 6368 556e 6966 6965 644d 6172 6769 6e4f  chUnifiedMarginO
+000413e0: 7264 6572 7327 2c20 6d61 726b 6574 2c20  rders', market, 
+000413f0: 7061 7261 6d73 2c20 276c 696e 6561 7227  params, 'linear'
+00041400: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
+00041410: 7175 6573 745b 2763 6174 6567 6f72 7927  quest['category'
+00041420: 5d20 3d20 7375 6254 7970 650a 2020 2020  ] = subType.    
+00041430: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00041440: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
+00041450: 656c 662e 6d61 726b 6574 2873 796d 626f  elf.market(symbo
+00041460: 6c29 0a20 2020 2020 2020 2020 2020 2072  l).            r
+00041470: 6571 7565 7374 5b27 7379 6d62 6f6c 275d  equest['symbol']
+00041480: 203d 206d 6172 6b65 745b 2769 6427 5d0a   = market['id'].
+00041490: 2020 2020 2020 2020 2020 2020 6966 206d              if m
+000414a0: 6172 6b65 745b 276f 7074 696f 6e27 5d3a  arket['option']:
+000414b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000414c0: 2072 6571 7565 7374 5b27 6361 7465 676f   request['catego
+000414d0: 7279 275d 203d 2027 6f70 7469 6f6e 270a  ry'] = 'option'.
+000414e0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+000414f0: 206d 6172 6b65 745b 276c 696e 6561 7227   market['linear'
+00041500: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+00041510: 2020 2072 6571 7565 7374 5b27 6361 7465     request['cate
+00041520: 676f 7279 275d 203d 2027 6c69 6e65 6172  gory'] = 'linear
+00041530: 270a 2020 2020 2020 2020 2020 2020 656c  '.            el
+00041540: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00041550: 2020 2020 7261 6973 6520 4e6f 7453 7570      raise NotSup
+00041560: 706f 7274 6564 2873 656c 662e 6964 202b  ported(self.id +
+00041570: 2027 2066 6574 6368 556e 6966 6965 644d   ' fetchUnifiedM
+00041580: 6172 6769 6e4f 7065 6e4f 7264 6572 7328  arginOpenOrders(
+00041590: 2920 646f 6573 206e 6f74 2061 6c6c 6f77  ) does not allow
+000415a0: 2069 6e76 6572 7365 206d 6172 6b65 7420   inverse market 
+000415b0: 6f72 6465 7273 2066 6f72 2027 202b 2073  orders for ' + s
+000415c0: 796d 626f 6c20 2b20 2720 6d61 726b 6574  ymbol + ' market
+000415d0: 7327 290a 2020 2020 2020 2020 7479 7065  s').        type
+000415e0: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+000415f0: 7479 7065 2c20 7061 7261 6d73 203d 2073  type, params = s
+00041600: 656c 662e 6861 6e64 6c65 5f6d 6172 6b65  elf.handle_marke
+00041610: 745f 7479 7065 5f61 6e64 5f70 6172 616d  t_type_and_param
+00041620: 7328 2766 6574 6368 556e 6966 6965 644d  s('fetchUnifiedM
+00041630: 6172 6769 6e4f 7065 6e4f 7264 6572 7327  arginOpenOrders'
+00041640: 2c20 6d61 726b 6574 2c20 7061 7261 6d73  , market, params
+00041650: 290a 2020 2020 2020 2020 6973 5374 6f70  ).        isStop
+00041660: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+00041670: 7565 2870 6172 616d 732c 2027 7374 6f70  ue(params, 'stop
+00041680: 272c 2046 616c 7365 290a 2020 2020 2020  ', False).      
+00041690: 2020 6973 436f 6e64 6974 696f 6e61 6c20    isConditional 
+000416a0: 3d20 6973 5374 6f70 206f 7220 2874 7970  = isStop or (typ
+000416b0: 6520 3d3d 2027 7374 6f70 2729 206f 7220  e == 'stop') or 
+000416c0: 2874 7970 6520 3d3d 2027 636f 6e64 6974  (type == 'condit
+000416d0: 696f 6e61 6c27 290a 2020 2020 2020 2020  ional').        
+000416e0: 7061 7261 6d73 203d 2073 656c 662e 6f6d  params = self.om
+000416f0: 6974 2870 6172 616d 732c 205b 2773 746f  it(params, ['sto
+00041700: 7027 5d29 0a20 2020 2020 2020 2069 6620  p']).        if 
+00041710: 6973 436f 6e64 6974 696f 6e61 6c3a 0a20  isConditional:. 
+00041720: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+00041730: 7374 5b27 6f72 6465 7246 696c 7465 7227  st['orderFilter'
+00041740: 5d20 3d20 2753 746f 704f 7264 6572 270a  ] = 'StopOrder'.
+00041750: 2020 2020 2020 2020 6966 206c 696d 6974          if limit
+00041760: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00041770: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+00041780: 745b 276c 696d 6974 275d 203d 206c 696d  t['limit'] = lim
+00041790: 6974 0a20 2020 2020 2020 2072 6573 706f  it.        respo
+000417a0: 6e73 6520 3d20 6177 6169 7420 7365 6c66  nse = await self
+000417b0: 2e70 7269 7661 7465 4765 7455 6e69 6669  .privateGetUnifi
+000417c0: 6564 5633 5072 6976 6174 654f 7264 6572  edV3PrivateOrder
+000417d0: 556e 6669 6c6c 6564 4f72 6465 7273 2873  UnfilledOrders(s
+000417e0: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
+000417f0: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
+00041800: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+00041810: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+00041820: 2020 2020 2020 2020 2022 7265 7443 6f64           "retCod
+00041830: 6522 3a20 302c 0a20 2020 2020 2020 2023  e": 0,.        #
+00041840: 2020 2020 2020 2020 2022 7265 744d 7367           "retMsg
+00041850: 223a 2022 5375 6363 6573 7322 2c0a 2020  ": "Success",.  
+00041860: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00041870: 2272 6573 756c 7422 3a20 7b0a 2020 2020  "result": {.    
+00041880: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00041890: 2020 226e 6578 7450 6167 6543 7572 736f    "nextPageCurso
+000418a0: 7222 3a20 2231 3335 6363 6330 642d 3831  r": "135ccc0d-81
+000418b0: 3336 2d34 6531 622d 3861 6633 2d30 3762  36-4e1b-8af3-07b
+000418c0: 3131 6565 3135 3864 3125 3341 3136 3635  11ee158d1%3A1665
+000418d0: 3536 3536 3130 3532 3625 3243 3133 3563  565610526%2C135c
+000418e0: 6363 3064 2d38 3133 362d 3465 3162 2d38  cc0d-8136-4e1b-8
+000418f0: 6166 332d 3037 6231 3165 6531 3538 6431  af3-07b11ee158d1
+00041900: 2533 4131 3636 3535 3635 3631 3035 3236  %3A1665565610526
+00041910: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00041920: 2020 2020 2020 2020 2022 6361 7465 676f           "catego
+00041930: 7279 223a 2022 6c69 6e65 6172 222c 0a20  ry": "linear",. 
+00041940: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00041950: 2020 2020 2022 6c69 7374 223a 205b 0a20       "list": [. 
+00041960: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00041970: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+00041980: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00041990: 2020 2020 2020 2020 2022 7379 6d62 6f6c           "symbol
+000419a0: 223a 2022 4554 4855 5344 5422 2c0a 2020  ": "ETHUSDT",.  
+000419b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000419c0: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+000419d0: 6572 5479 7065 223a 2022 4c69 6d69 7422  erType": "Limit"
+000419e0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000419f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041a00: 226f 7264 6572 4c69 6e6b 4964 223a 2022  "orderLinkId": "
+00041a10: 7465 7374 3030 3030 3030 3522 2c0a 2020  test0000005",.  
+00041a20: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00041a30: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+00041a40: 6572 4964 223a 2022 3133 3563 6363 3064  erId": "135ccc0d
+00041a50: 2d38 3133 362d 3465 3162 2d38 6166 332d  -8136-4e1b-8af3-
+00041a60: 3037 6231 3165 6531 3538 6431 222c 0a20  07b11ee158d1",. 
+00041a70: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00041a80: 2020 2020 2020 2020 2020 2020 2022 7374               "st
+00041a90: 6f70 4f72 6465 7254 7970 6522 3a20 2255  opOrderType": "U
+00041aa0: 4e4b 4e4f 574e 222c 0a20 2020 2020 2020  NKNOWN",.       
+00041ab0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00041ac0: 2020 2020 2020 2022 6f72 6465 7253 7461         "orderSta
+00041ad0: 7475 7322 3a20 224e 6577 222c 0a20 2020  tus": "New",.   
+00041ae0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00041af0: 2020 2020 2020 2020 2020 2022 7461 6b65             "take
+00041b00: 5072 6f66 6974 223a 2022 222c 0a20 2020  Profit": "",.   
+00041b10: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00041b20: 2020 2020 2020 2020 2020 2022 6375 6d45             "cumE
+00041b30: 7865 6356 616c 7565 223a 2022 302e 3030  xecValue": "0.00
+00041b40: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
+00041b50: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00041b60: 2020 2020 2020 2022 626c 6f63 6b54 7261         "blockTra
+00041b70: 6465 4964 223a 2022 222c 0a20 2020 2020  deId": "",.     
+00041b80: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00041b90: 2020 2020 2020 2020 2022 7072 6963 6522           "price"
+00041ba0: 3a20 2237 3030 2e30 3030 3030 3030 3022  : "700.00000000"
+00041bb0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00041bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041bd0: 2263 7265 6174 6564 5469 6d65 223a 2031  "createdTime": 1
+00041be0: 3636 3535 3635 3631 3035 3236 2c0a 2020  665565610526,.  
+00041bf0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00041c00: 2020 2020 2020 2020 2020 2020 2274 7054              "tpT
+00041c10: 7269 6767 6572 4279 223a 2022 554e 4b4e  riggerBy": "UNKN
+00041c20: 4f57 4e22 2c0a 2020 2020 2020 2020 2320  OWN",.        # 
+00041c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041c40: 2020 2020 2274 696d 6549 6e46 6f72 6365      "timeInForce
+00041c50: 223a 2022 476f 6f64 5469 6c6c 4361 6e63  ": "GoodTillCanc
+00041c60: 656c 222c 0a20 2020 2020 2020 2023 2020  el",.        #  
+00041c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041c80: 2020 2022 6261 7365 5072 6963 6522 3a20     "basePrice": 
+00041c90: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
+00041ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041cb0: 2020 2275 7064 6174 6564 5469 6d65 223a    "updatedTime":
+00041cc0: 2031 3636 3535 3635 3631 3035 3333 2c0a   1665565610533,.
+00041cd0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00041ce0: 2020 2020 2020 2020 2020 2020 2020 2273                "s
+00041cf0: 6964 6522 3a20 2242 7579 222c 0a20 2020  ide": "Buy",.   
+00041d00: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00041d10: 2020 2020 2020 2020 2020 2022 7472 6967             "trig
+00041d20: 6765 7250 7269 6365 223a 2022 222c 0a20  gerPrice": "",. 
+00041d30: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00041d40: 2020 2020 2020 2020 2020 2020 2022 6375               "cu
+00041d50: 6d45 7865 6346 6565 223a 2022 302e 3030  mExecFee": "0.00
+00041d60: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
+00041d70: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00041d80: 2020 2020 2020 2022 736c 5472 6967 6765         "slTrigge
+00041d90: 7242 7922 3a20 2255 4e4b 4e4f 574e 222c  rBy": "UNKNOWN",
+00041da0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00041db0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00041dc0: 6c65 6176 6573 5174 7922 3a20 2230 2e31  leavesQty": "0.1
+00041dd0: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
+00041de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041df0: 2020 2020 2263 6c6f 7365 4f6e 5472 6967      "closeOnTrig
+00041e00: 6765 7222 3a20 4661 6c73 652c 0a20 2020  ger": False,.   
+00041e10: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00041e20: 2020 2020 2020 2020 2020 2022 6375 6d45             "cumE
+00041e30: 7865 6351 7479 223a 2022 302e 3030 3030  xecQty": "0.0000
+00041e40: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
+00041e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041e60: 2020 2020 2022 7265 6475 6365 4f6e 6c79       "reduceOnly
+00041e70: 223a 2046 616c 7365 2c0a 2020 2020 2020  ": False,.      
+00041e80: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00041e90: 2020 2020 2020 2020 2271 7479 223a 2022          "qty": "
+00041ea0: 302e 3130 3030 222c 0a20 2020 2020 2020  0.1000",.       
+00041eb0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00041ec0: 2020 2020 2020 2022 7374 6f70 4c6f 7373         "stopLoss
+00041ed0: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
+00041ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041ef0: 2020 2020 2022 7472 6967 6765 7242 7922       "triggerBy"
+00041f00: 3a20 2255 4e4b 4e4f 574e 222c 0a20 2020  : "UNKNOWN",.   
+00041f10: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00041f20: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
+00041f30: 7249 4d22 3a20 2230 2e30 3030 3030 3030  rIM": "0.0000000
+00041f40: 3022 0a20 2020 2020 2020 2023 2020 2020  0".        #    
+00041f50: 2020 2020 2020 2020 2020 2020 207d 0a20               }. 
+00041f60: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00041f70: 2020 2020 205d 0a20 2020 2020 2020 2023       ].        #
+00041f80: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
+00041f90: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
+00041fa0: 6574 4578 7449 6e66 6f22 3a20 6e75 6c6c  etExtInfo": null
+00041fb0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00041fc0: 2020 2020 2274 696d 6522 3a20 3136 3635      "time": 1665
+00041fd0: 3536 3536 3134 3332 300a 2020 2020 2020  565614320.      
+00041fe0: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
+00041ff0: 2020 230a 2020 2020 2020 2020 7265 7375    #.        resu
+00042000: 6c74 203d 2073 656c 662e 7361 6665 5f76  lt = self.safe_v
+00042010: 616c 7565 2872 6573 706f 6e73 652c 2027  alue(response, '
+00042020: 7265 7375 6c74 272c 207b 7d29 0a20 2020  result', {}).   
+00042030: 2020 2020 206f 7264 6572 7320 3d20 7365       orders = se
+00042040: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
+00042050: 7375 6c74 2c20 276c 6973 7427 2c20 5b5d  sult, 'list', []
+00042060: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00042070: 2073 656c 662e 7061 7273 655f 6f72 6465   self.parse_orde
+00042080: 7273 286f 7264 6572 732c 206d 6172 6b65  rs(orders, marke
+00042090: 742c 2073 696e 6365 2c20 6c69 6d69 7429  t, since, limit)
+000420a0: 0a0a 2020 2020 6173 796e 6320 6465 6620  ..    async def 
+000420b0: 6665 7463 685f 6465 7269 7661 7469 7665  fetch_derivative
+000420c0: 735f 6f70 656e 5f6f 7264 6572 7328 7365  s_open_orders(se
+000420d0: 6c66 2c20 7379 6d62 6f6c 3a20 4f70 7469  lf, symbol: Opti
+000420e0: 6f6e 616c 5b73 7472 5d20 3d20 4e6f 6e65  onal[str] = None
+000420f0: 2c20 7369 6e63 653a 204f 7074 696f 6e61  , since: Optiona
+00042100: 6c5b 696e 745d 203d 204e 6f6e 652c 206c  l[int] = None, l
+00042110: 696d 6974 3a20 4f70 7469 6f6e 616c 5b69  imit: Optional[i
+00042120: 6e74 5d20 3d20 4e6f 6e65 2c20 7061 7261  nt] = None, para
+00042130: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
+00042140: 6177 6169 7420 7365 6c66 2e6c 6f61 645f  await self.load_
+00042150: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
+00042160: 2020 6d61 726b 6574 203d 204e 6f6e 650a    market = None.
+00042170: 2020 2020 2020 2020 7365 7474 6c65 203d          settle =
+00042180: 204e 6f6e 650a 2020 2020 2020 2020 7265   None.        re
+00042190: 7175 6573 7420 3d20 7b0a 2020 2020 2020  quest = {.      
+000421a0: 2020 2020 2020 2320 2773 796d 626f 6c27        # 'symbol'
+000421b0: 3a20 6d61 726b 6574 5b27 6964 275d 2c0a  : market['id'],.
+000421c0: 2020 2020 2020 2020 2020 2020 2320 2763              # 'c
+000421d0: 6174 6567 6f72 7927 2c20 5479 7065 206f  ategory', Type o
+000421e0: 6620 6465 7269 7661 7469 7665 7320 7072  f derivatives pr
+000421f0: 6f64 7563 743a 206c 696e 6561 7220 6f72  oduct: linear or
+00042200: 206f 7074 696f 6e2e 0a20 2020 2020 2020   option..       
+00042210: 2020 2020 2023 2027 6261 7365 436f 696e       # 'baseCoin
+00042220: 272c 2042 6173 6520 636f 696e 2e20 5768  ', Base coin. Wh
+00042230: 656e 2063 6174 6567 6f72 793d 6f70 7469  en category=opti
+00042240: 6f6e 2e20 4966 206e 6f74 2070 6173 7365  on. If not passe
+00042250: 642c 2042 5443 2062 7920 6465 6661 756c  d, BTC by defaul
+00042260: 743b 2077 6865 6e20 6361 7465 676f 7279  t; when category
+00042270: 3d6c 696e 6561 722c 2069 6620 4254 4320  =linear, if BTC 
+00042280: 7061 7373 6564 2c20 4254 4350 4552 5020  passed, BTCPERP 
+00042290: 2620 4254 4355 5344 5420 7265 7475 726e  & BTCUSDT return
+000422a0: 6564 2e0a 2020 2020 2020 2020 2020 2020  ed..            
+000422b0: 2320 2773 6574 746c 6543 6f69 6e27 2c20  # 'settleCoin', 
+000422c0: 5365 7474 6c65 2063 6f69 6e2e 2046 6f72  Settle coin. For
+000422d0: 206c 696e 6561 722c 2065 6974 6865 7220   linear, either 
+000422e0: 7379 6d62 6f6c 206f 7220 7365 7474 6c65  symbol or settle
+000422f0: 436f 696e 2069 7320 7265 7175 6972 6564  Coin is required
+00042300: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+00042310: 6f72 6465 7249 6427 2c20 4f72 6465 7220  orderId', Order 
+00042320: 4944 0a20 2020 2020 2020 2020 2020 2023  ID.            #
+00042330: 2027 6f72 6465 724c 696e 6b49 6427 2c20   'orderLinkId', 
+00042340: 556e 6971 7565 2075 7365 722d 7365 7420  Unique user-set 
+00042350: 6f72 6465 7220 4944 0a20 2020 2020 2020  order ID.       
+00042360: 2020 2020 2023 2027 6f72 6465 7246 696c       # 'orderFil
+00042370: 7465 7227 2c20 436f 6e64 6974 696f 6e61  ter', Conditiona
+00042380: 6c20 6f72 6465 7220 6f72 2061 6374 6976  l order or activ
+00042390: 6520 6f72 6465 720a 2020 2020 2020 2020  e order.        
+000423a0: 2020 2020 2320 276c 696d 6974 273a 206e      # 'limit': n
+000423b0: 756d 6265 722c 2044 6174 6120 7175 616e  umber, Data quan
+000423c0: 7469 7479 2070 6572 2070 6167 653a 204d  tity per page: M
+000423d0: 6178 2064 6174 6120 7661 6c75 6520 7065  ax data value pe
+000423e0: 7220 7061 6765 2069 7320 3530 2c20 616e  r page is 50, an
+000423f0: 6420 6465 6661 756c 7420 7661 6c75 6520  d default value 
+00042400: 6174 2032 302e 0a20 2020 2020 2020 2020  at 20..         
+00042410: 2020 2023 2027 6375 7273 6f72 272c 2041     # 'cursor', A
+00042420: 5049 2070 6173 732d 7468 726f 7567 682e  PI pass-through.
+00042430: 2061 6363 6f75 6e74 5479 7065 202b 2063   accountType + c
+00042440: 6174 6567 6f72 7920 2b20 6375 7273 6f72  ategory + cursor
+00042450: 202b 2e20 4966 2069 6e63 6f6e 7369 7374   +. If inconsist
+00042460: 656e 742c 2074 6865 2066 6f6c 6c6f 7769  ent, the followi
+00042470: 6e67 2073 686f 756c 6420 6265 2072 6574  ng should be ret
+00042480: 7572 6e65 643a 2054 6865 2061 6363 6f75  urned: The accou
+00042490: 6e74 2074 7970 6520 646f 6573 206e 6f74  nt type does not
+000424a0: 206d 6174 6368 2074 6865 2073 6572 7669   match the servi
+000424b0: 6365 2069 6e71 7569 7279 2e0a 2020 2020  ce inquiry..    
+000424c0: 2020 2020 2020 2020 2320 276f 7065 6e4f          # 'openO
+000424d0: 6e6c 7927 3a20 302c 0a20 2020 2020 2020  nly': 0,.       
+000424e0: 207d 0a20 2020 2020 2020 2069 6620 7379   }.        if sy
+000424f0: 6d62 6f6c 2069 7320 6e6f 7420 4e6f 6e65  mbol is not None
+00042500: 3a0a 2020 2020 2020 2020 2020 2020 6d61  :.            ma
+00042510: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
+00042520: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
+00042530: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+00042540: 7379 6d62 6f6c 275d 203d 206d 6172 6b65  symbol'] = marke
+00042550: 745b 2769 6427 5d0a 2020 2020 2020 2020  t['id'].        
+00042560: 2020 2020 6966 206d 6172 6b65 745b 276c      if market['l
+00042570: 696e 6561 7227 5d3a 0a20 2020 2020 2020  inear']:.       
+00042580: 2020 2020 2020 2020 2072 6571 7565 7374           request
+00042590: 5b27 6361 7465 676f 7279 275d 203d 2027  ['category'] = '
+000425a0: 6c69 6e65 6172 270a 2020 2020 2020 2020  linear'.        
+000425b0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+000425c0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+000425d0: 745b 2763 6174 6567 6f72 7927 5d20 3d20  t['category'] = 
+000425e0: 2769 6e76 6572 7365 270a 2020 2020 2020  'inverse'.      
+000425f0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00042600: 2020 2020 7479 7065 203d 204e 6f6e 650a      type = None.
+00042610: 2020 2020 2020 2020 2020 2020 7479 7065              type
+00042620: 2c20 7061 7261 6d73 203d 2073 656c 662e  , params = self.
+00042630: 6861 6e64 6c65 5f6d 6172 6b65 745f 7479  handle_market_ty
+00042640: 7065 5f61 6e64 5f70 6172 616d 7328 2766  pe_and_params('f
+00042650: 6574 6368 4f70 656e 4f72 6465 7273 272c  etchOpenOrders',
+00042660: 206d 6172 6b65 742c 2070 6172 616d 7329   market, params)
+00042670: 0a20 2020 2020 2020 2020 2020 2073 7562  .            sub
+00042680: 5479 7065 203d 204e 6f6e 650a 2020 2020  Type = None.    
+00042690: 2020 2020 2020 2020 7375 6254 7970 652c          subType,
+000426a0: 2070 6172 616d 7320 3d20 7365 6c66 2e68   params = self.h
+000426b0: 616e 646c 655f 7375 625f 7479 7065 5f61  andle_sub_type_a
+000426c0: 6e64 5f70 6172 616d 7328 2766 6574 6368  nd_params('fetch
+000426d0: 4f70 656e 4f72 6465 7273 272c 206d 6172  OpenOrders', mar
+000426e0: 6b65 742c 2070 6172 616d 732c 2027 6c69  ket, params, 'li
+000426f0: 6e65 6172 2729 0a20 2020 2020 2020 2020  near').         
+00042700: 2020 2072 6571 7565 7374 5b27 6361 7465     request['cate
+00042710: 676f 7279 275d 203d 2074 7970 650a 2020  gory'] = type.  
+00042720: 2020 2020 2020 2020 2020 6966 2074 7970            if typ
+00042730: 6520 3d3d 2027 7377 6170 273a 0a20 2020  e == 'swap':.   
+00042740: 2020 2020 2020 2020 2020 2020 2072 6571               req
+00042750: 7565 7374 5b27 6361 7465 676f 7279 275d  uest['category']
+00042760: 203d 2073 7562 5479 7065 0a20 2020 2020   = subType.     
+00042770: 2020 2073 6574 746c 652c 2070 6172 616d     settle, param
+00042780: 7320 3d20 7365 6c66 2e68 616e 646c 655f  s = self.handle_
+00042790: 6f70 7469 6f6e 5f61 6e64 5f70 6172 616d  option_and_param
+000427a0: 7328 7061 7261 6d73 2c20 2766 6574 6368  s(params, 'fetch
+000427b0: 4f70 656e 4f72 6465 7273 272c 2027 7365  OpenOrders', 'se
+000427c0: 7474 6c65 272c 2073 6574 746c 6529 0a20  ttle', settle). 
+000427d0: 2020 2020 2020 2069 6620 7365 7474 6c65         if settle
+000427e0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+000427f0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+00042800: 745b 2773 6574 746c 6543 6f69 6e27 5d20  t['settleCoin'] 
+00042810: 3d20 7365 7474 6c65 0a20 2020 2020 2020  = settle.       
+00042820: 2069 7353 746f 7020 3d20 7365 6c66 2e73   isStop = self.s
+00042830: 6166 655f 7661 6c75 6528 7061 7261 6d73  afe_value(params
+00042840: 2c20 2773 746f 7027 2c20 4661 6c73 6529  , 'stop', False)
+00042850: 0a20 2020 2020 2020 2070 6172 616d 7320  .        params 
+00042860: 3d20 7365 6c66 2e6f 6d69 7428 7061 7261  = self.omit(para
+00042870: 6d73 2c20 5b27 7374 6f70 275d 290a 2020  ms, ['stop']).  
+00042880: 2020 2020 2020 6966 2069 7353 746f 703a        if isStop:
+00042890: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+000428a0: 7565 7374 5b27 6f72 6465 7246 696c 7465  uest['orderFilte
+000428b0: 7227 5d20 3d20 2753 746f 704f 7264 6572  r'] = 'StopOrder
+000428c0: 270a 2020 2020 2020 2020 6966 206c 696d  '.        if lim
+000428d0: 6974 2069 7320 6e6f 7420 4e6f 6e65 3a0a  it is not None:.
+000428e0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+000428f0: 6573 745b 276c 696d 6974 275d 203d 206c  est['limit'] = l
+00042900: 696d 6974 0a20 2020 2020 2020 2072 6573  imit.        res
+00042910: 706f 6e73 6520 3d20 6177 6169 7420 7365  ponse = await se
+00042920: 6c66 2e70 7269 7661 7465 4765 7456 354f  lf.privateGetV5O
+00042930: 7264 6572 5265 616c 7469 6d65 2873 656c  rderRealtime(sel
+00042940: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
+00042950: 2c20 7061 7261 6d73 2929 0a20 2020 2020  , params)).     
+00042960: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
+00042970: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
+00042980: 2020 2020 2020 2022 7265 7443 6f64 6522         "retCode"
+00042990: 3a20 302c 0a20 2020 2020 2020 2023 2020  : 0,.        #  
+000429a0: 2020 2020 2020 2022 7265 744d 7367 223a         "retMsg":
+000429b0: 2022 4f4b 222c 0a20 2020 2020 2020 2023   "OK",.        #
+000429c0: 2020 2020 2020 2020 2022 7265 7375 6c74           "result
+000429d0: 223a 207b 0a20 2020 2020 2020 2023 2020  ": {.        #  
+000429e0: 2020 2020 2020 2020 2020 2022 6e65 7874             "next
+000429f0: 5061 6765 4375 7273 6f72 223a 2022 3133  PageCursor": "13
+00042a00: 3231 3035 3236 3533 3533 3635 3135 3538  2105265353651558
+00042a10: 3425 3341 3136 3732 3231 3737 3438 3238  4%3A167221774828
+00042a20: 3725 3243 3133 3231 3035 3236 3533 3533  7%2C132105265353
+00042a30: 3635 3135 3538 3425 3341 3136 3732 3231  6515584%3A167221
+00042a40: 3737 3438 3238 3722 2c0a 2020 2020 2020  7748287",.      
+00042a50: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00042a60: 2263 6174 6567 6f72 7922 3a20 2273 706f  "category": "spo
+00042a70: 7422 2c0a 2020 2020 2020 2020 2320 2020  t",.        #   
+00042a80: 2020 2020 2020 2020 2020 226c 6973 7422            "list"
+00042a90: 3a20 5b0a 2020 2020 2020 2020 2320 2020  : [.        #   
+00042aa0: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
+00042ab0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00042ac0: 2020 2020 2020 2020 2020 2020 2020 2273                "s
+00042ad0: 796d 626f 6c22 3a20 2245 5448 5553 4454  ymbol": "ETHUSDT
+00042ae0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00042af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042b00: 2022 6f72 6465 7254 7970 6522 3a20 224c   "orderType": "L
+00042b10: 696d 6974 222c 0a20 2020 2020 2020 2023  imit",.        #
+00042b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042b30: 2020 2020 2022 6f72 6465 724c 696e 6b49       "orderLinkI
+00042b40: 6422 3a20 2231 3637 3232 3137 3734 3832  d": "16722177482
+00042b50: 3737 3635 3222 2c0a 2020 2020 2020 2020  77652",.        
+00042b60: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00042b70: 2020 2020 2020 226f 7264 6572 4964 223a        "orderId":
+00042b80: 2022 3133 3231 3035 3236 3533 3533 3635   "13210526535365
+00042b90: 3135 3538 3422 2c0a 2020 2020 2020 2020  15584",.        
+00042ba0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00042bb0: 2020 2020 2020 2263 616e 6365 6c54 7970        "cancelTyp
+00042bc0: 6522 3a20 2255 4e4b 4e4f 574e 222c 0a20  e": "UNKNOWN",. 
+00042bd0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00042be0: 2020 2020 2020 2020 2020 2020 2022 6176               "av
+00042bf0: 6750 7269 6365 223a 2022 222c 0a20 2020  gPrice": "",.   
+00042c00: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00042c10: 2020 2020 2020 2020 2020 2022 7374 6f70             "stop
+00042c20: 4f72 6465 7254 7970 6522 3a20 2274 7073  OrderType": "tps
+00042c30: 6c4f 7264 6572 222c 0a20 2020 2020 2020  lOrder",.       
+00042c40: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00042c50: 2020 2020 2020 2022 6c61 7374 5072 6963         "lastPric
+00042c60: 654f 6e43 7265 6174 6564 223a 2022 222c  eOnCreated": "",
+00042c70: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00042c80: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00042c90: 6f72 6465 7253 7461 7475 7322 3a20 2243  orderStatus": "C
+00042ca0: 616e 6365 6c6c 6564 222c 0a20 2020 2020  ancelled",.     
+00042cb0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00042cc0: 2020 2020 2020 2020 2022 7461 6b65 5072           "takePr
+00042cd0: 6f66 6974 223a 2022 222c 0a20 2020 2020  ofit": "",.     
 00042ce0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00042cf0: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
-00042d00: 2020 2020 2020 2020 2020 2020 205d 0a20               ]. 
-00042d10: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00042d20: 207d 2c0a 2020 2020 2020 2020 2320 2020   },.        #   
-00042d30: 2020 2020 2020 2272 6574 4578 7449 6e66        "retExtInf
-00042d40: 6f22 3a20 7b7d 2c0a 2020 2020 2020 2020  o": {},.        
-00042d50: 2320 2020 2020 2020 2020 2274 696d 6522  #         "time"
-00042d60: 3a20 3136 3732 3231 3935 3236 3239 340a  : 1672219526294.
-00042d70: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-00042d80: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-00042d90: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
-00042da0: 7361 6665 5f76 616c 7565 2872 6573 706f  safe_value(respo
-00042db0: 6e73 652c 2027 7265 7375 6c74 272c 207b  nse, 'result', {
-00042dc0: 7d29 0a20 2020 2020 2020 206f 7264 6572  }).        order
-00042dd0: 7320 3d20 7365 6c66 2e73 6166 655f 7661  s = self.safe_va
-00042de0: 6c75 6528 7265 7375 6c74 2c20 276c 6973  lue(result, 'lis
-00042df0: 7427 2c20 5b5d 290a 2020 2020 2020 2020  t', []).        
-00042e00: 7265 7475 726e 2073 656c 662e 7061 7273  return self.pars
-00042e10: 655f 6f72 6465 7273 286f 7264 6572 732c  e_orders(orders,
-00042e20: 206d 6172 6b65 742c 2073 696e 6365 2c20   market, since, 
-00042e30: 6c69 6d69 7429 0a0a 2020 2020 6173 796e  limit)..    asyn
-00042e40: 6320 6465 6620 6665 7463 685f 7573 6463  c def fetch_usdc
-00042e50: 5f6f 7065 6e5f 6f72 6465 7273 2873 656c  _open_orders(sel
-00042e60: 662c 2073 796d 626f 6c3a 204f 7074 696f  f, symbol: Optio
-00042e70: 6e61 6c5b 7374 725d 203d 204e 6f6e 652c  nal[str] = None,
-00042e80: 2073 696e 6365 3a20 4f70 7469 6f6e 616c   since: Optional
-00042e90: 5b69 6e74 5d20 3d20 4e6f 6e65 2c20 6c69  [int] = None, li
-00042ea0: 6d69 743a 204f 7074 696f 6e61 6c5b 696e  mit: Optional[in
-00042eb0: 745d 203d 204e 6f6e 652c 2070 6172 616d  t] = None, param
-00042ec0: 733d 7b7d 293a 0a20 2020 2020 2020 2061  s={}):.        a
-00042ed0: 7761 6974 2073 656c 662e 6c6f 6164 5f6d  wait self.load_m
-00042ee0: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
-00042ef0: 2072 6571 7565 7374 203d 207b 7d0a 2020   request = {}.  
-00042f00: 2020 2020 2020 6d61 726b 6574 203d 204e        market = N
-00042f10: 6f6e 650a 2020 2020 2020 2020 6966 2073  one.        if s
-00042f20: 796d 626f 6c20 6973 206e 6f74 204e 6f6e  ymbol is not Non
-00042f30: 653a 0a20 2020 2020 2020 2020 2020 206d  e:.            m
-00042f40: 6172 6b65 7420 3d20 7365 6c66 2e6d 6172  arket = self.mar
-00042f50: 6b65 7428 7379 6d62 6f6c 290a 2020 2020  ket(symbol).    
-00042f60: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-00042f70: 2773 796d 626f 6c27 5d20 3d20 6d61 726b  'symbol'] = mark
-00042f80: 6574 5b27 6964 275d 0a20 2020 2020 2020  et['id'].       
-00042f90: 2074 7970 6520 3d20 4e6f 6e65 0a20 2020   type = None.   
-00042fa0: 2020 2020 2074 7970 652c 2070 6172 616d       type, param
-00042fb0: 7320 3d20 7365 6c66 2e68 616e 646c 655f  s = self.handle_
-00042fc0: 6d61 726b 6574 5f74 7970 655f 616e 645f  market_type_and_
-00042fd0: 7061 7261 6d73 2827 6665 7463 6855 5344  params('fetchUSD
-00042fe0: 434f 7065 6e4f 7264 6572 7327 2c20 6d61  COpenOrders', ma
-00042ff0: 726b 6574 2c20 7061 7261 6d73 290a 2020  rket, params).  
-00043000: 2020 2020 2020 7265 7175 6573 745b 2763        request['c
-00043010: 6174 6567 6f72 7927 5d20 3d20 2770 6572  ategory'] = 'per
-00043020: 7065 7475 616c 2720 6966 2028 7479 7065  petual' if (type
-00043030: 203d 3d20 2773 7761 7027 2920 656c 7365   == 'swap') else
-00043040: 2027 6f70 7469 6f6e 270a 2020 2020 2020   'option'.      
-00043050: 2020 7265 7370 6f6e 7365 203d 2061 7761    response = awa
-00043060: 6974 2073 656c 662e 7072 6976 6174 6550  it self.privateP
-00043070: 6f73 744f 7074 696f 6e55 7364 634f 7065  ostOptionUsdcOpe
-00043080: 6e61 7069 5072 6976 6174 6556 3151 7565  napiPrivateV1Que
-00043090: 7279 4163 7469 7665 4f72 6465 7273 2873  ryActiveOrders(s
-000430a0: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
-000430b0: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
-000430c0: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
-000430d0: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
-000430e0: 7370 6f6e 7365 2c20 2772 6573 756c 7427  sponse, 'result'
-000430f0: 2c20 7b7d 290a 2020 2020 2020 2020 6f72  , {}).        or
-00043100: 6465 7273 203d 2073 656c 662e 7361 6665  ders = self.safe
-00043110: 5f76 616c 7565 2872 6573 756c 742c 2027  _value(result, '
-00043120: 6461 7461 4c69 7374 272c 205b 5d29 0a20  dataList', []). 
-00043130: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-00043140: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
-00043150: 2023 2020 2020 2020 2020 2022 7265 7443   #         "retC
-00043160: 6f64 6522 3a20 302c 0a20 2020 2020 2020  ode": 0,.       
-00043170: 2023 2020 2020 2020 2020 2022 7265 744d   #         "retM
-00043180: 7367 223a 2022 4f4b 222c 0a20 2020 2020  sg": "OK",.     
-00043190: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-000431a0: 7375 6c74 223a 207b 0a20 2020 2020 2020  sult": {.       
-000431b0: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-000431c0: 7265 7375 6c74 546f 7461 6c53 697a 6522  resultTotalSize"
-000431d0: 3a20 312c 0a20 2020 2020 2020 2023 2020  : 1,.        #  
-000431e0: 2020 2020 2020 2020 2020 2022 6375 7273             "curs
-000431f0: 6f72 223a 2022 6964 2533 4431 3636 3230  or": "id%3D16620
-00043200: 3139 3831 3835 3639 2532 3364 6633 3165  19818569%23df31e
-00043210: 3033 622d 6663 3030 2d34 6234 632d 6264  03b-fc00-4b4c-bd
-00043220: 3163 2d62 3937 6664 3732 6235 6335 6322  1c-b97fd72b5c5c"
-00043230: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00043240: 2020 2020 2020 2020 2264 6174 614c 6973          "dataLis
-00043250: 7422 3a20 5b0a 2020 2020 2020 2020 2320  t": [.        # 
-00043260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043270: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-00043280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043290: 226f 7264 6572 4964 223a 2022 6466 3331  "orderId": "df31
-000432a0: 6530 3362 2d66 6330 302d 3462 3463 2d62  e03b-fc00-4b4c-b
-000432b0: 6431 632d 6239 3766 6437 3262 3563 3563  d1c-b97fd72b5c5c
-000432c0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-000432d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000432e0: 2022 6f72 6465 724c 696e 6b49 6422 3a20   "orderLinkId": 
-000432f0: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
-00043300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043310: 2020 2273 796d 626f 6c22 3a20 2242 5443    "symbol": "BTC
-00043320: 2d32 5345 5032 322d 3138 3030 302d 4322  -2SEP22-18000-C"
-00043330: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00043340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043350: 226f 7264 6572 5374 6174 7573 223a 2022  "orderStatus": "
-00043360: 4e65 7722 2c0a 2020 2020 2020 2020 2320  New",.        # 
-00043370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043380: 2020 2020 226f 7264 6572 5072 6963 6522      "orderPrice"
-00043390: 3a20 2235 3030 222c 0a20 2020 2020 2020  : "500",.       
-000433a0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-000433b0: 2020 2020 2020 2022 7369 6465 223a 2022         "side": "
-000433c0: 4275 7922 2c0a 2020 2020 2020 2020 2320  Buy",.        # 
-000433d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000433e0: 2020 2020 2272 656d 6169 6e69 6e67 5174      "remainingQt
-000433f0: 7922 3a20 2230 2e31 222c 0a20 2020 2020  y": "0.1",.     
-00043400: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00043410: 2020 2020 2020 2020 2022 6f72 6465 7254           "orderT
-00043420: 7970 6522 3a20 224c 696d 6974 222c 0a20  ype": "Limit",. 
-00043430: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00043440: 2020 2020 2020 2020 2020 2020 2022 7174               "qt
-00043450: 7922 3a20 2230 2e31 222c 0a20 2020 2020  y": "0.1",.     
-00043460: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00043470: 2020 2020 2020 2020 2022 6976 223a 2022           "iv": "
-00043480: 302e 3030 3030 222c 0a20 2020 2020 2020  0.0000",.       
-00043490: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-000434a0: 2020 2020 2020 2022 6361 6e63 656c 5479         "cancelTy
-000434b0: 7065 223a 2022 222c 0a20 2020 2020 2020  pe": "",.       
-000434c0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-000434d0: 2020 2020 2020 2022 7570 6461 7465 5469         "updateTi
-000434e0: 6d65 7374 616d 7022 3a20 2231 3636 3230  mestamp": "16620
-000434f0: 3139 3831 3835 3739 220a 2020 2020 2020  19818579".      
-00043500: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00043510: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
-00043520: 2020 2020 2020 2020 2020 2020 5d0a 2020              ].  
-00043530: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00043540: 7d0a 2020 2020 2020 2020 2320 2020 2020  }.        #     
-00043550: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
-00043560: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00043570: 7061 7273 655f 6f72 6465 7273 286f 7264  parse_orders(ord
-00043580: 6572 732c 206d 6172 6b65 742c 2073 696e  ers, market, sin
-00043590: 6365 2c20 6c69 6d69 7429 0a0a 2020 2020  ce, limit)..    
-000435a0: 6173 796e 6320 6465 6620 6665 7463 685f  async def fetch_
-000435b0: 6f70 656e 5f6f 7264 6572 7328 7365 6c66  open_orders(self
-000435c0: 2c20 7379 6d62 6f6c 3a20 4f70 7469 6f6e  , symbol: Option
-000435d0: 616c 5b73 7472 5d20 3d20 4e6f 6e65 2c20  al[str] = None, 
-000435e0: 7369 6e63 653a 204f 7074 696f 6e61 6c5b  since: Optional[
-000435f0: 696e 745d 203d 204e 6f6e 652c 206c 696d  int] = None, lim
-00043600: 6974 3a20 4f70 7469 6f6e 616c 5b69 6e74  it: Optional[int
-00043610: 5d20 3d20 4e6f 6e65 2c20 7061 7261 6d73  ] = None, params
-00043620: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
-00043630: 220a 2020 2020 2020 2020 6665 7463 6820  ".        fetch 
-00043640: 616c 6c20 756e 6669 6c6c 6564 2063 7572  all unfilled cur
-00043650: 7265 6e74 6c79 206f 7065 6e20 6f72 6465  rently open orde
-00043660: 7273 0a20 2020 2020 2020 203a 7061 7261  rs.        :para
-00043670: 6d20 7374 727c 4e6f 6e65 2073 796d 626f  m str|None symbo
-00043680: 6c3a 2075 6e69 6669 6564 206d 6172 6b65  l: unified marke
-00043690: 7420 7379 6d62 6f6c 0a20 2020 2020 2020  t symbol.       
-000436a0: 203a 7061 7261 6d20 696e 747c 4e6f 6e65   :param int|None
-000436b0: 2073 696e 6365 3a20 7468 6520 6561 726c   since: the earl
-000436c0: 6965 7374 2074 696d 6520 696e 206d 7320  iest time in ms 
-000436d0: 746f 2066 6574 6368 206f 7065 6e20 6f72  to fetch open or
-000436e0: 6465 7273 2066 6f72 0a20 2020 2020 2020  ders for.       
-000436f0: 203a 7061 7261 6d20 696e 747c 4e6f 6e65   :param int|None
-00043700: 206c 696d 6974 3a20 7468 6520 6d61 7869   limit: the maxi
-00043710: 6d75 6d20 6e75 6d62 6572 206f 6620 206f  mum number of  o
-00043720: 7065 6e20 6f72 6465 7273 2073 7472 7563  pen orders struc
-00043730: 7475 7265 7320 746f 2072 6574 7269 6576  tures to retriev
-00043740: 650a 2020 2020 2020 2020 3a70 6172 616d  e.        :param
-00043750: 2064 6963 7420 7061 7261 6d73 3a20 6578   dict params: ex
-00043760: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
-00043770: 7065 6369 6669 6320 746f 2074 6865 2062  pecific to the b
-00043780: 7962 6974 2061 7069 2065 6e64 706f 696e  ybit api endpoin
-00043790: 740a 2020 2020 2020 2020 3a72 6574 7572  t.        :retur
-000437a0: 6e73 205b 6469 6374 5d3a 2061 206c 6973  ns [dict]: a lis
-000437b0: 7420 6f66 2060 6f72 6465 7220 7374 7275  t of `order stru
-000437c0: 6374 7572 6573 203c 6874 7470 733a 2f2f  ctures <https://
-000437d0: 646f 6373 2e63 6378 742e 636f 6d2f 232f  docs.ccxt.com/#/
-000437e0: 3f69 643d 6f72 6465 722d 7374 7275 6374  ?id=order-struct
-000437f0: 7572 653e 600a 2020 2020 2020 2020 2222  ure>`.        ""
-00043800: 220a 2020 2020 2020 2020 6177 6169 7420  ".        await 
-00043810: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
-00043820: 7328 290a 2020 2020 2020 2020 6d61 726b  s().        mark
-00043830: 6574 203d 204e 6f6e 650a 2020 2020 2020  et = None.      
-00043840: 2020 7365 7474 6c65 203d 2073 656c 662e    settle = self.
-00043850: 7361 6665 5f73 7472 696e 6728 7061 7261  safe_string(para
-00043860: 6d73 2c20 2773 6574 746c 6543 6f69 6e27  ms, 'settleCoin'
-00043870: 290a 2020 2020 2020 2020 6966 2073 6574  ).        if set
-00043880: 746c 6520 6973 204e 6f6e 653a 0a20 2020  tle is None:.   
-00043890: 2020 2020 2020 2020 2073 6574 746c 652c           settle,
-000438a0: 2070 6172 616d 7320 3d20 7365 6c66 2e68   params = self.h
-000438b0: 616e 646c 655f 6f70 7469 6f6e 5f61 6e64  andle_option_and
-000438c0: 5f70 6172 616d 7328 7061 7261 6d73 2c20  _params(params, 
-000438d0: 2766 6574 6368 4f70 656e 4f72 6465 7273  'fetchOpenOrders
-000438e0: 272c 2027 7365 7474 6c65 272c 2073 6574  ', 'settle', set
-000438f0: 746c 6529 0a20 2020 2020 2020 2069 6620  tle).        if 
-00043900: 7379 6d62 6f6c 2069 7320 6e6f 7420 4e6f  symbol is not No
-00043910: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00043920: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
-00043930: 726b 6574 2873 796d 626f 6c29 0a20 2020  rket(symbol).   
-00043940: 2020 2020 2020 2020 2073 6574 746c 6520           settle 
-00043950: 3d20 6d61 726b 6574 5b27 7365 7474 6c65  = market['settle
-00043960: 275d 0a20 2020 2020 2020 2073 7562 5479  '].        subTy
-00043970: 7065 203d 204e 6f6e 650a 2020 2020 2020  pe = None.      
-00043980: 2020 7375 6254 7970 652c 2070 6172 616d    subType, param
-00043990: 7320 3d20 7365 6c66 2e68 616e 646c 655f  s = self.handle_
-000439a0: 7375 625f 7479 7065 5f61 6e64 5f70 6172  sub_type_and_par
-000439b0: 616d 7328 2766 6574 6368 4f70 656e 4f72  ams('fetchOpenOr
-000439c0: 6465 7273 272c 206d 6172 6b65 742c 2070  ders', market, p
-000439d0: 6172 616d 7329 0a20 2020 2020 2020 2069  arams).        i
-000439e0: 7349 6e76 6572 7365 203d 2073 7562 5479  sInverse = subTy
-000439f0: 7065 203d 3d20 2769 6e76 6572 7365 270a  pe == 'inverse'.
-00043a00: 2020 2020 2020 2020 6973 5573 6463 5365          isUsdcSe
-00043a10: 7474 6c65 6420 3d20 7365 7474 6c65 203d  ttled = settle =
-00043a20: 3d20 2755 5344 4327 0a20 2020 2020 2020  = 'USDC'.       
-00043a30: 2069 734c 696e 6561 7253 6574 746c 6520   isLinearSettle 
-00043a40: 3d20 6973 5573 6463 5365 7474 6c65 6420  = isUsdcSettled 
-00043a50: 6f72 2028 7365 7474 6c65 203d 3d20 2755  or (settle == 'U
-00043a60: 5344 5427 290a 2020 2020 2020 2020 6966  SDT').        if
-00043a70: 2069 7349 6e76 6572 7365 2061 6e64 2069   isInverse and i
-00043a80: 734c 696e 6561 7253 6574 746c 653a 0a20  sLinearSettle:. 
-00043a90: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00043aa0: 2041 7267 756d 656e 7473 5265 7175 6972   ArgumentsRequir
-00043ab0: 6564 2873 656c 662e 6964 202b 2027 2066  ed(self.id + ' f
-00043ac0: 6574 6368 4f70 656e 4f72 6465 7273 2077  etchOpenOrders w
-00043ad0: 6974 6820 696e 7665 7273 6520 7375 6254  ith inverse subT
-00043ae0: 7970 6520 7265 7175 6972 6573 2073 6574  ype requires set
-00043af0: 746c 6520 746f 206e 6f74 2062 6520 5553  tle to not be US
-00043b00: 4454 206f 7220 5553 4443 2729 0a20 2020  DT or USDC').   
-00043b10: 2020 2020 2074 7970 652c 2071 7565 7279       type, query
-00043b20: 203d 2073 656c 662e 6861 6e64 6c65 5f6d   = self.handle_m
-00043b30: 6172 6b65 745f 7479 7065 5f61 6e64 5f70  arket_type_and_p
-00043b40: 6172 616d 7328 2766 6574 6368 4f70 656e  arams('fetchOpen
-00043b50: 4f72 6465 7273 272c 206d 6172 6b65 742c  Orders', market,
-00043b60: 2070 6172 616d 7329 0a20 2020 2020 2020   params).       
-00043b70: 2065 6e61 626c 6555 6e69 6669 6564 4d61   enableUnifiedMa
-00043b80: 7267 696e 2c20 656e 6162 6c65 556e 6966  rgin, enableUnif
-00043b90: 6965 6441 6363 6f75 6e74 203d 2061 7761  iedAccount = awa
-00043ba0: 6974 2073 656c 662e 6973 5f75 6e69 6669  it self.is_unifi
-00043bb0: 6564 5f65 6e61 626c 6564 2829 0a20 2020  ed_enabled().   
-00043bc0: 2020 2020 2069 6620 656e 6162 6c65 556e       if enableUn
-00043bd0: 6966 6965 6441 6363 6f75 6e74 2061 6e64  ifiedAccount and
-00043be0: 206e 6f74 2069 7349 6e76 6572 7365 3a0a   not isInverse:.
-00043bf0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00043c00: 726e 2061 7761 6974 2073 656c 662e 6665  rn await self.fe
-00043c10: 7463 685f 756e 6966 6965 645f 6163 636f  tch_unified_acco
-00043c20: 756e 745f 6f70 656e 5f6f 7264 6572 7328  unt_open_orders(
-00043c30: 7379 6d62 6f6c 2c20 7369 6e63 652c 206c  symbol, since, l
-00043c40: 696d 6974 2c20 7175 6572 7929 0a20 2020  imit, query).   
-00043c50: 2020 2020 2065 6c69 6620 7479 7065 203d       elif type =
-00043c60: 3d20 2773 706f 7427 3a0a 2020 2020 2020  = 'spot':.      
-00043c70: 2020 2020 2020 7265 7475 726e 2061 7761        return awa
-00043c80: 6974 2073 656c 662e 6665 7463 685f 7370  it self.fetch_sp
-00043c90: 6f74 5f6f 7065 6e5f 6f72 6465 7273 2873  ot_open_orders(s
-00043ca0: 796d 626f 6c2c 2073 696e 6365 2c20 6c69  ymbol, since, li
-00043cb0: 6d69 742c 2071 7565 7279 290a 2020 2020  mit, query).    
-00043cc0: 2020 2020 656c 6966 2065 6e61 626c 6555      elif enableU
-00043cd0: 6e69 6669 6564 4d61 7267 696e 2061 6e64  nifiedMargin and
-00043ce0: 206e 6f74 2069 7349 6e76 6572 7365 3a0a   not isInverse:.
-00043cf0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00043d00: 726e 2061 7761 6974 2073 656c 662e 6665  rn await self.fe
-00043d10: 7463 685f 756e 6966 6965 645f 6d61 7267  tch_unified_marg
-00043d20: 696e 5f6f 7065 6e5f 6f72 6465 7273 2873  in_open_orders(s
-00043d30: 796d 626f 6c2c 2073 696e 6365 2c20 6c69  ymbol, since, li
-00043d40: 6d69 742c 2071 7565 7279 290a 2020 2020  mit, query).    
-00043d50: 2020 2020 656c 6966 2069 7355 7364 6353      elif isUsdcS
-00043d60: 6574 746c 6564 3a0a 2020 2020 2020 2020  ettled:.        
-00043d70: 2020 2020 7265 7475 726e 2061 7761 6974      return await
-00043d80: 2073 656c 662e 6665 7463 685f 7573 6463   self.fetch_usdc
-00043d90: 5f6f 7065 6e5f 6f72 6465 7273 2873 796d  _open_orders(sym
-00043da0: 626f 6c2c 2073 696e 6365 2c20 6c69 6d69  bol, since, limi
-00043db0: 742c 2071 7565 7279 290a 2020 2020 2020  t, query).      
-00043dc0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00043dd0: 2020 2020 7265 7475 726e 2061 7761 6974      return await
-00043de0: 2073 656c 662e 6665 7463 685f 6465 7269   self.fetch_deri
-00043df0: 7661 7469 7665 735f 6f70 656e 5f6f 7264  vatives_open_ord
-00043e00: 6572 7328 7379 6d62 6f6c 2c20 7369 6e63  ers(symbol, sinc
-00043e10: 652c 206c 696d 6974 2c20 7175 6572 7929  e, limit, query)
-00043e20: 0a0a 2020 2020 6173 796e 6320 6465 6620  ..    async def 
-00043e30: 6665 7463 685f 6f72 6465 725f 7472 6164  fetch_order_trad
-00043e40: 6573 2873 656c 662c 2069 643a 2073 7472  es(self, id: str
-00043e50: 2c20 7379 6d62 6f6c 3a20 4f70 7469 6f6e  , symbol: Option
-00043e60: 616c 5b73 7472 5d20 3d20 4e6f 6e65 2c20  al[str] = None, 
-00043e70: 7369 6e63 653a 204f 7074 696f 6e61 6c5b  since: Optional[
-00043e80: 696e 745d 203d 204e 6f6e 652c 206c 696d  int] = None, lim
-00043e90: 6974 3a20 4f70 7469 6f6e 616c 5b69 6e74  it: Optional[int
-00043ea0: 5d20 3d20 4e6f 6e65 2c20 7061 7261 6d73  ] = None, params
-00043eb0: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
-00043ec0: 220a 2020 2020 2020 2020 6665 7463 6820  ".        fetch 
-00043ed0: 616c 6c20 7468 6520 7472 6164 6573 206d  all the trades m
-00043ee0: 6164 6520 6672 6f6d 2061 2073 696e 676c  ade from a singl
-00043ef0: 6520 6f72 6465 720a 2020 2020 2020 2020  e order.        
-00043f00: 3a70 6172 616d 2073 7472 2069 643a 206f  :param str id: o
-00043f10: 7264 6572 2069 640a 2020 2020 2020 2020  rder id.        
-00043f20: 3a70 6172 616d 2073 7472 7c4e 6f6e 6520  :param str|None 
-00043f30: 7379 6d62 6f6c 3a20 756e 6966 6965 6420  symbol: unified 
-00043f40: 6d61 726b 6574 2073 796d 626f 6c0a 2020  market symbol.  
-00043f50: 2020 2020 2020 3a70 6172 616d 2069 6e74        :param int
-00043f60: 7c4e 6f6e 6520 7369 6e63 653a 2074 6865  |None since: the
-00043f70: 2065 6172 6c69 6573 7420 7469 6d65 2069   earliest time i
-00043f80: 6e20 6d73 2074 6f20 6665 7463 6820 7472  n ms to fetch tr
-00043f90: 6164 6573 2066 6f72 0a20 2020 2020 2020  ades for.       
-00043fa0: 203a 7061 7261 6d20 696e 747c 4e6f 6e65   :param int|None
-00043fb0: 206c 696d 6974 3a20 7468 6520 6d61 7869   limit: the maxi
-00043fc0: 6d75 6d20 6e75 6d62 6572 206f 6620 7472  mum number of tr
-00043fd0: 6164 6573 2074 6f20 7265 7472 6965 7665  ades to retrieve
-00043fe0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00043ff0: 6469 6374 2070 6172 616d 733a 2065 7874  dict params: ext
-00044000: 7261 2070 6172 616d 6574 6572 7320 7370  ra parameters sp
-00044010: 6563 6966 6963 2074 6f20 7468 6520 6279  ecific to the by
-00044020: 6269 7420 6170 6920 656e 6470 6f69 6e74  bit api endpoint
-00044030: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
-00044040: 7320 5b64 6963 745d 3a20 6120 6c69 7374  s [dict]: a list
-00044050: 206f 6620 6074 7261 6465 2073 7472 7563   of `trade struc
-00044060: 7475 7265 7320 3c68 7474 7073 3a2f 2f64  tures <https://d
-00044070: 6f63 732e 6363 7874 2e63 6f6d 2f23 2f3f  ocs.ccxt.com/#/?
-00044080: 6964 3d74 7261 6465 2d73 7472 7563 7475  id=trade-structu
-00044090: 7265 3e60 0a20 2020 2020 2020 2022 2222  re>`.        """
-000440a0: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
-000440b0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-000440c0: 2027 6f72 6465 7249 6427 3a20 6964 2c0a   'orderId': id,.
-000440d0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-000440e0: 2020 7265 7475 726e 2061 7761 6974 2073    return await s
-000440f0: 656c 662e 6665 7463 685f 6d79 5f74 7261  elf.fetch_my_tra
-00044100: 6465 7328 7379 6d62 6f6c 2c20 7369 6e63  des(symbol, sinc
-00044110: 652c 206c 696d 6974 2c20 7365 6c66 2e65  e, limit, self.e
-00044120: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
-00044130: 6172 616d 7329 290a 0a20 2020 2061 7379  arams))..    asy
-00044140: 6e63 2064 6566 2066 6574 6368 5f6d 795f  nc def fetch_my_
-00044150: 756e 6966 6965 645f 7472 6164 6573 2873  unified_trades(s
-00044160: 656c 662c 2073 796d 626f 6c3a 204f 7074  elf, symbol: Opt
-00044170: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
-00044180: 652c 2073 696e 6365 3a20 4f70 7469 6f6e  e, since: Option
-00044190: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c20  al[int] = None, 
-000441a0: 6c69 6d69 743a 204f 7074 696f 6e61 6c5b  limit: Optional[
-000441b0: 696e 745d 203d 204e 6f6e 652c 2070 6172  int] = None, par
-000441c0: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
-000441d0: 2061 7761 6974 2073 656c 662e 6c6f 6164   await self.load
-000441e0: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
-000441f0: 2020 206d 6172 6b65 7420 3d20 4e6f 6e65     market = None
-00044200: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
-00044210: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-00044220: 2023 2027 7379 6d62 6f6c 273a 206d 6172   # 'symbol': mar
-00044230: 6b65 745b 2769 6427 5d2c 0a20 2020 2020  ket['id'],.     
-00044240: 2020 2020 2020 2023 2027 6361 7465 676f         # 'catego
-00044250: 7279 273a 2027 272c 2020 2320 5072 6f64  ry': '',  # Prod
-00044260: 7563 7420 7479 7065 2e20 7370 6f74 2c6c  uct type. spot,l
-00044270: 696e 6561 722c 6f70 7469 6f6e 0a20 2020  inear,option.   
-00044280: 2020 2020 2020 2020 2023 2027 6f72 6465           # 'orde
-00044290: 7249 6427 3a20 2727 2c20 2023 204f 7264  rId': '',  # Ord
-000442a0: 6572 2049 440a 2020 2020 2020 2020 2020  er ID.          
-000442b0: 2020 2320 276f 7264 6572 4c69 6e6b 4964    # 'orderLinkId
-000442c0: 273a 2027 272c 2020 2320 5573 6572 2063  ': '',  # User c
-000442d0: 7573 746f 6d69 7365 6420 6f72 6465 7220  ustomised order 
-000442e0: 4944 0a20 2020 2020 2020 2020 2020 2023  ID.            #
-000442f0: 2027 6261 7365 436f 696e 273a 2027 272c   'baseCoin': '',
-00044300: 2020 2320 4261 7365 2063 6f69 6e0a 2020    # Base coin.  
-00044310: 2020 2020 2020 2020 2020 2320 2773 7461            # 'sta
-00044320: 7274 5469 6d65 273a 2030 2c20 2023 2054  rtTime': 0,  # T
-00044330: 6865 2073 7461 7274 2074 696d 6573 7461  he start timesta
-00044340: 6d70 286d 7329 0a20 2020 2020 2020 2020  mp(ms).         
-00044350: 2020 2023 2027 656e 6454 696d 6527 3a20     # 'endTime': 
-00044360: 302c 2020 2320 5468 6520 656e 6420 7469  0,  # The end ti
-00044370: 6d65 7374 616d 7028 6d73 290a 2020 2020  mestamp(ms).    
-00044380: 2020 2020 2020 2020 2320 2765 7865 6354          # 'execT
-00044390: 7970 6527 3a20 2727 2c20 2023 2045 7865  ype': '',  # Exe
-000443a0: 6375 7469 6f6e 2074 7970 650a 2020 2020  cution type.    
-000443b0: 2020 2020 2020 2020 2320 276c 696d 6974          # 'limit
-000443c0: 273a 2030 2c20 2023 204c 696d 6974 2066  ': 0,  # Limit f
-000443d0: 6f72 2064 6174 6120 7369 7a65 2070 6572  or data size per
-000443e0: 2070 6167 652e 205b 312c 2031 3030 5d2e   page. [1, 100].
-000443f0: 2044 6566 6175 6c74 3a20 3530 0a20 2020   Default: 50.   
-00044400: 2020 2020 2020 2020 2023 2027 6375 7273           # 'curs
-00044410: 6f72 273a 2027 272c 2020 2320 4375 7273  or': '',  # Curs
-00044420: 6f72 2e20 5573 6564 2066 6f72 2070 6167  or. Used for pag
-00044430: 696e 6174 696f 6e0a 2020 2020 2020 2020  ination.        
-00044440: 7d0a 2020 2020 2020 2020 6966 2073 796d  }.        if sym
-00044450: 626f 6c20 6973 206e 6f74 204e 6f6e 653a  bol is not None:
-00044460: 0a20 2020 2020 2020 2020 2020 206d 6172  .            mar
-00044470: 6b65 7420 3d20 7365 6c66 2e6d 6172 6b65  ket = self.marke
-00044480: 7428 7379 6d62 6f6c 290a 2020 2020 2020  t(symbol).      
-00044490: 2020 2020 2020 7265 7175 6573 745b 2773        request['s
-000444a0: 796d 626f 6c27 5d20 3d20 6d61 726b 6574  ymbol'] = market
-000444b0: 5b27 6964 275d 0a20 2020 2020 2020 2074  ['id'].        t
-000444c0: 7970 6520 3d20 4e6f 6e65 0a20 2020 2020  ype = None.     
-000444d0: 2020 2074 7970 652c 2070 6172 616d 7320     type, params 
-000444e0: 3d20 7365 6c66 2e68 616e 646c 655f 6d61  = self.handle_ma
-000444f0: 726b 6574 5f74 7970 655f 616e 645f 7061  rket_type_and_pa
-00044500: 7261 6d73 2827 6665 7463 684d 7954 7261  rams('fetchMyTra
-00044510: 6465 7327 2c20 6d61 726b 6574 2c20 7061  des', market, pa
-00044520: 7261 6d73 290a 2020 2020 2020 2020 6966  rams).        if
-00044530: 2074 7970 6520 3d3d 2027 7370 6f74 273a   type == 'spot':
-00044540: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-00044550: 7565 7374 5b27 6361 7465 676f 7279 275d  uest['category']
-00044560: 203d 2027 7370 6f74 270a 2020 2020 2020   = 'spot'.      
-00044570: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00044580: 2020 2020 7375 6254 7970 6520 3d20 4e6f      subType = No
-00044590: 6e65 0a20 2020 2020 2020 2020 2020 2073  ne.            s
-000445a0: 7562 5479 7065 2c20 7061 7261 6d73 203d  ubType, params =
-000445b0: 2073 656c 662e 6861 6e64 6c65 5f73 7562   self.handle_sub
-000445c0: 5f74 7970 655f 616e 645f 7061 7261 6d73  _type_and_params
-000445d0: 2827 6665 7463 684d 7954 7261 6465 7327  ('fetchMyTrades'
-000445e0: 2c20 6d61 726b 6574 2c20 7061 7261 6d73  , market, params
-000445f0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-00044600: 2073 7562 5479 7065 203d 3d20 2769 6e76   subType == 'inv
-00044610: 6572 7365 273a 0a20 2020 2020 2020 2020  erse':.         
-00044620: 2020 2020 2020 2072 6169 7365 204e 6f74         raise Not
-00044630: 5375 7070 6f72 7465 6428 7365 6c66 2e69  Supported(self.i
-00044640: 6420 2b20 2720 6665 7463 684d 7954 7261  d + ' fetchMyTra
-00044650: 6465 7328 2920 646f 6573 206e 6f74 2073  des() does not s
-00044660: 7570 706f 7274 2027 202b 2073 7562 5479  upport ' + subTy
-00044670: 7065 202b 2027 206d 6172 6b65 7473 2e27  pe + ' markets.'
-00044680: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
-00044690: 7175 6573 745b 2763 6174 6567 6f72 7927  quest['category'
-000446a0: 5d20 3d20 7375 6254 7970 650a 2020 2020  ] = subType.    
-000446b0: 2020 2020 6966 2073 696e 6365 2069 7320      if since is 
-000446c0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-000446d0: 2020 2020 2020 7265 7175 6573 745b 2773        request['s
-000446e0: 7461 7274 5469 6d65 275d 203d 2073 696e  tartTime'] = sin
-000446f0: 6365 0a20 2020 2020 2020 2069 6620 6c69  ce.        if li
-00044700: 6d69 7420 6973 206e 6f74 204e 6f6e 653a  mit is not None:
-00044710: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-00044720: 7565 7374 5b27 6c69 6d69 7427 5d20 3d20  uest['limit'] = 
-00044730: 6c69 6d69 7420 2023 2064 6566 6175 6c74  limit  # default
-00044740: 2032 302c 206d 6178 2035 300a 2020 2020   20, max 50.    
-00044750: 2020 2020 7265 7370 6f6e 7365 203d 2061      response = a
-00044760: 7761 6974 2073 656c 662e 7072 6976 6174  wait self.privat
-00044770: 6547 6574 5635 4578 6563 7574 696f 6e4c  eGetV5ExecutionL
-00044780: 6973 7428 7365 6c66 2e65 7874 656e 6428  ist(self.extend(
-00044790: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
-000447a0: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
-000447b0: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-000447c0: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-000447d0: 6574 436f 6465 223a 2030 2c0a 2020 2020  etCode": 0,.    
-000447e0: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-000447f0: 6574 4d73 6722 3a20 224f 4b22 2c0a 2020  etMsg": "OK",.  
-00044800: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00044810: 2272 6573 756c 7422 3a20 7b0a 2020 2020  "result": {.    
-00044820: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00044830: 2020 226e 6578 7450 6167 6543 7572 736f    "nextPageCurso
-00044840: 7222 3a20 2231 3332 3736 3625 3341 3225  r": "132766%3A2%
-00044850: 3243 3133 3237 3636 2533 4132 222c 0a20  2C132766%3A2",. 
-00044860: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00044870: 2020 2020 2022 6361 7465 676f 7279 223a       "category":
-00044880: 2022 6c69 6e65 6172 222c 0a20 2020 2020   "linear",.     
-00044890: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-000448a0: 2022 6c69 7374 223a 205b 0a20 2020 2020   "list": [.     
-000448b0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-000448c0: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
-000448d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000448e0: 2020 2020 2022 7379 6d62 6f6c 223a 2022       "symbol": "
-000448f0: 4554 4850 4552 5022 2c0a 2020 2020 2020  ETHPERP",.      
-00044900: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00044910: 2020 2020 2020 2020 226f 7264 6572 5479          "orderTy
-00044920: 7065 223a 2022 4d61 726b 6574 222c 0a20  pe": "Market",. 
-00044930: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00044940: 2020 2020 2020 2020 2020 2020 2022 756e               "un
-00044950: 6465 726c 7969 6e67 5072 6963 6522 3a20  derlyingPrice": 
-00044960: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
-00044970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044980: 2020 226f 7264 6572 4c69 6e6b 4964 223a    "orderLinkId":
-00044990: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
-000449a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000449b0: 2020 2022 7369 6465 223a 2022 4275 7922     "side": "Buy"
-000449c0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-000449d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000449e0: 2269 6e64 6578 5072 6963 6522 3a20 2222  "indexPrice": ""
-000449f0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00044a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044a10: 226f 7264 6572 4964 223a 2022 3863 3036  "orderId": "8c06
-00044a20: 3533 3431 2d37 6235 322d 3463 6139 2d61  5341-7b52-4ca9-a
-00044a30: 6332 632d 3337 6533 3161 6335 3563 3934  c2c-37e31ac55c94
-00044a40: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00044a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044a60: 2022 7374 6f70 4f72 6465 7254 7970 6522   "stopOrderType"
-00044a70: 3a20 2255 4e4b 4e4f 574e 222c 0a20 2020  : "UNKNOWN",.   
-00044a80: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00044a90: 2020 2020 2020 2020 2020 2022 6c65 6176             "leav
-00044aa0: 6573 5174 7922 3a20 2230 222c 0a20 2020  esQty": "0",.   
-00044ab0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00044ac0: 2020 2020 2020 2020 2020 2022 6578 6563             "exec
-00044ad0: 5469 6d65 223a 2022 3136 3732 3238 3237  Time": "16722827
-00044ae0: 3232 3432 3922 2c0a 2020 2020 2020 2020  22429",.        
-00044af0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00044b00: 2020 2020 2020 2269 734d 616b 6572 223a        "isMaker":
-00044b10: 2046 616c 7365 2c0a 2020 2020 2020 2020   False,.        
-00044b20: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00044b30: 2020 2020 2020 2265 7865 6346 6565 223a        "execFee":
-00044b40: 2022 302e 3037 3134 3039 222c 0a20 2020   "0.071409",.   
-00044b50: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00044b60: 2020 2020 2020 2020 2020 2022 6665 6552             "feeR
-00044b70: 6174 6522 3a20 2230 2e30 3030 3622 2c0a  ate": "0.0006",.
-00044b80: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00044b90: 2020 2020 2020 2020 2020 2020 2020 2265                "e
-00044ba0: 7865 6349 6422 3a20 2265 3063 6265 3831  xecId": "e0cbe81
-00044bb0: 642d 3066 3138 2d35 3836 362d 3934 3135  d-0f18-5866-9415
-00044bc0: 2d63 6633 3139 6235 6461 6233 6222 2c0a  -cf319b5dab3b",.
-00044bd0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00044be0: 2020 2020 2020 2020 2020 2020 2020 2274                "t
-00044bf0: 7261 6465 4976 223a 2022 222c 0a20 2020  radeIv": "",.   
-00044c00: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00044c10: 2020 2020 2020 2020 2020 2022 626c 6f63             "bloc
-00044c20: 6b54 7261 6465 4964 223a 2022 222c 0a20  kTradeId": "",. 
-00044c30: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00044c40: 2020 2020 2020 2020 2020 2020 2022 6d61               "ma
-00044c50: 726b 5072 6963 6522 3a20 2231 3138 332e  rkPrice": "1183.
-00044c60: 3534 222c 0a20 2020 2020 2020 2023 2020  54",.        #  
-00044c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044c80: 2020 2022 6578 6563 5072 6963 6522 3a20     "execPrice": 
-00044c90: 2231 3139 302e 3135 222c 0a20 2020 2020  "1190.15",.     
-00044ca0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00044cb0: 2020 2020 2020 2020 2022 6d61 726b 4976           "markIv
-00044cc0: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
-00044cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044ce0: 2020 2020 2022 6f72 6465 7251 7479 223a       "orderQty":
-00044cf0: 2022 302e 3122 2c0a 2020 2020 2020 2020   "0.1",.        
-00044d00: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00044d10: 2020 2020 2020 226f 7264 6572 5072 6963        "orderPric
-00044d20: 6522 3a20 2231 3233 362e 3922 2c0a 2020  e": "1236.9",.  
-00044d30: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00044d40: 2020 2020 2020 2020 2020 2020 2265 7865              "exe
-00044d50: 6356 616c 7565 223a 2022 3131 392e 3031  cValue": "119.01
-00044d60: 3522 2c0a 2020 2020 2020 2020 2320 2020  5",.        #   
-00044d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044d80: 2020 2265 7865 6354 7970 6522 3a20 2254    "execType": "T
-00044d90: 7261 6465 222c 0a20 2020 2020 2020 2023  rade",.        #
-00044da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044db0: 2020 2020 2022 6578 6563 5174 7922 3a20       "execQty": 
-00044dc0: 2230 2e31 220a 2020 2020 2020 2020 2320  "0.1".        # 
-00044dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044de0: 7d0a 2020 2020 2020 2020 2320 2020 2020  }.        #     
-00044df0: 2020 2020 2020 2020 5d0a 2020 2020 2020          ].      
-00044e00: 2020 2320 2020 2020 2020 2020 7d2c 0a20    #         },. 
-00044e10: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00044e20: 2022 7265 7445 7874 496e 666f 223a 207b   "retExtInfo": {
-00044e30: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
-00044e40: 2020 2020 2022 7469 6d65 223a 2031 3637       "time": 167
-00044e50: 3232 3833 3735 3435 3130 0a20 2020 2020  2283754510.     
-00044e60: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
-00044e70: 2020 2023 0a20 2020 2020 2020 2072 6573     #.        res
-00044e80: 756c 7420 3d20 7365 6c66 2e73 6166 655f  ult = self.safe_
-00044e90: 7661 6c75 6528 7265 7370 6f6e 7365 2c20  value(response, 
-00044ea0: 2772 6573 756c 7427 2c20 7b7d 290a 2020  'result', {}).  
-00044eb0: 2020 2020 2020 7472 6164 6573 203d 2073        trades = s
-00044ec0: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
-00044ed0: 6573 756c 742c 2027 6c69 7374 272c 205b  esult, 'list', [
-00044ee0: 5d29 0a20 2020 2020 2020 2072 6574 7572  ]).        retur
-00044ef0: 6e20 7365 6c66 2e70 6172 7365 5f74 7261  n self.parse_tra
-00044f00: 6465 7328 7472 6164 6573 2c20 6d61 726b  des(trades, mark
-00044f10: 6574 2c20 7369 6e63 652c 206c 696d 6974  et, since, limit
-00044f20: 290a 0a20 2020 2061 7379 6e63 2064 6566  )..    async def
-00044f30: 2066 6574 6368 5f6d 795f 7370 6f74 5f74   fetch_my_spot_t
-00044f40: 7261 6465 7328 7365 6c66 2c20 7379 6d62  rades(self, symb
-00044f50: 6f6c 3a20 4f70 7469 6f6e 616c 5b73 7472  ol: Optional[str
-00044f60: 5d20 3d20 4e6f 6e65 2c20 7369 6e63 653a  ] = None, since:
-00044f70: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
-00044f80: 204e 6f6e 652c 206c 696d 6974 3a20 4f70   None, limit: Op
-00044f90: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
-00044fa0: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
-00044fb0: 2020 2020 2020 2020 6966 2073 796d 626f          if symbo
-00044fc0: 6c20 6973 204e 6f6e 653a 0a20 2020 2020  l is None:.     
-00044fd0: 2020 2020 2020 2072 6169 7365 2041 7267         raise Arg
-00044fe0: 756d 656e 7473 5265 7175 6972 6564 2873  umentsRequired(s
-00044ff0: 656c 662e 6964 202b 2027 2066 6574 6368  elf.id + ' fetch
-00045000: 4d79 5370 6f74 5472 6164 6573 2829 2072  MySpotTrades() r
-00045010: 6571 7569 7265 7320 6120 7379 6d62 6f6c  equires a symbol
-00045020: 2061 7267 756d 656e 7427 290a 2020 2020   argument').    
-00045030: 2020 2020 6177 6169 7420 7365 6c66 2e6c      await self.l
-00045040: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
-00045050: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
-00045060: 656c 662e 6d61 726b 6574 2873 796d 626f  elf.market(symbo
-00045070: 6c29 0a20 2020 2020 2020 2072 6571 7565  l).        reque
-00045080: 7374 203d 207b 0a20 2020 2020 2020 2020  st = {.         
-00045090: 2020 2027 7379 6d62 6f6c 273a 206d 6172     'symbol': mar
-000450a0: 6b65 745b 2769 6427 5d2c 0a20 2020 2020  ket['id'],.     
-000450b0: 2020 2020 2020 2023 2027 6f72 6465 7249         # 'orderI
-000450c0: 6427 3a20 2766 3138 3538 3036 622d 6238  d': 'f185806b-b8
-000450d0: 3031 2d34 3066 662d 6164 6563 2d35 3232  01-40ff-adec-522
-000450e0: 3839 3337 3065 6436 3227 2c20 2023 2069  89370ed62',  # i
-000450f0: 6620 6e6f 7420 7072 6f76 6964 6564 2077  f not provided w
-00045100: 696c 6c20 7265 7475 726e 2075 7365 7227  ill return user'
-00045110: 7320 7472 6164 696e 6720 7265 636f 7264  s trading record
-00045120: 730a 2020 2020 2020 2020 2020 2020 2320  s.            # 
-00045130: 2773 7461 7274 5469 6d65 273a 2069 6e74  'startTime': int
-00045140: 2873 696e 6365 202f 2031 3030 3029 2c0a  (since / 1000),.
-00045150: 2020 2020 2020 2020 2020 2020 2320 2765              # 'e
-00045160: 6e64 5469 6d65 273a 2030 2c0a 2020 2020  ndTime': 0,.    
-00045170: 2020 2020 2020 2020 2320 2766 726f 6d54          # 'fromT
-00045180: 7261 6465 4964 273a 2027 272c 0a20 2020  radeId': '',.   
-00045190: 2020 2020 2020 2020 2023 2027 746f 5472           # 'toTr
-000451a0: 6164 6549 6427 3a20 2727 2c0a 2020 2020  adeId': '',.    
-000451b0: 2020 2020 2020 2020 2320 276c 696d 6974          # 'limit
-000451c0: 2720 3230 2c20 2023 206d 6178 2035 300a  ' 20,  # max 50.
-000451d0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-000451e0: 2020 6966 2073 696e 6365 2069 7320 6e6f    if since is no
-000451f0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00045200: 2020 2020 7265 7175 6573 745b 2773 7461      request['sta
-00045210: 7274 5469 6d65 275d 203d 2073 696e 6365  rtTime'] = since
-00045220: 0a20 2020 2020 2020 2069 6620 6c69 6d69  .        if limi
-00045230: 7420 6973 206e 6f74 204e 6f6e 653a 0a20  t is not None:. 
-00045240: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-00045250: 7374 5b27 6c69 6d69 7427 5d20 3d20 6c69  st['limit'] = li
-00045260: 6d69 7420 2023 2064 6566 6175 6c74 2032  mit  # default 2
-00045270: 302c 206d 6178 2035 300a 2020 2020 2020  0, max 50.      
-00045280: 2020 7265 7370 6f6e 7365 203d 2061 7761    response = awa
-00045290: 6974 2073 656c 662e 7072 6976 6174 6547  it self.privateG
-000452a0: 6574 5370 6f74 5633 5072 6976 6174 654d  etSpotV3PrivateM
-000452b0: 7954 7261 6465 7328 7365 6c66 2e65 7874  yTrades(self.ext
-000452c0: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
-000452d0: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
-000452e0: 2020 2020 2020 2020 2320 2020 207b 0a20          #    {. 
-000452f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00045300: 2022 7265 7443 6f64 6522 3a20 2230 222c   "retCode": "0",
-00045310: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00045320: 2020 2022 7265 744d 7367 223a 2022 4f4b     "retMsg": "OK
-00045330: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00045340: 2020 2020 2022 7265 7375 6c74 223a 207b       "result": {
-00045350: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00045360: 2020 2020 2020 2022 6c69 7374 223a 205b         "list": [
-00045370: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00045380: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
-00045390: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000453a0: 2020 2020 2020 2020 2020 2022 7379 6d62             "symb
-000453b0: 6f6c 223a 2022 4141 5645 5553 4454 222c  ol": "AAVEUSDT",
-000453c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000453d0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000453e0: 6964 223a 2022 3132 3734 3738 3531 3031  id": "1274785101
-000453f0: 3936 3537 3136 3939 3222 2c0a 2020 2020  965716992",.    
-00045400: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00045410: 2020 2020 2020 2020 2020 226f 7264 6572            "order
-00045420: 4964 223a 2022 3132 3734 3738 3432 3532  Id": "1274784252
-00045430: 3335 3930 3839 3636 3422 2c0a 2020 2020  359089664",.    
-00045440: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00045450: 2020 2020 2020 2020 2020 2274 7261 6465            "trade
-00045460: 4964 223a 2022 3232 3730 3030 3030 3030  Id": "2270000000
-00045470: 3033 3133 3635 3633 3922 2c0a 2020 2020  031365639",.    
-00045480: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00045490: 2020 2020 2020 2020 2020 226f 7264 6572            "order
-000454a0: 5072 6963 6522 3a20 2238 322e 3522 2c0a  Price": "82.5",.
-000454b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000454c0: 2020 2020 2020 2020 2020 2020 2020 226f                "o
-000454d0: 7264 6572 5174 7922 3a20 2230 2e30 3136  rderQty": "0.016
-000454e0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-000454f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045500: 2022 6578 6563 4665 6522 3a20 2230 222c   "execFee": "0",
-00045510: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00045520: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00045530: 6665 6554 6f6b 656e 4964 223a 2022 4141  feeTokenId": "AA
-00045540: 5645 222c 0a20 2020 2020 2020 2023 2020  VE",.        #  
-00045550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045560: 2020 2022 6372 6561 7454 696d 6522 3a20     "creatTime": 
-00045570: 2231 3636 3637 3032 3232 3633 3236 222c  "1666702226326",
-00045580: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00045590: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000455a0: 6973 4275 7965 7222 3a20 2230 222c 0a20  isBuyer": "0",. 
-000455b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000455c0: 2020 2020 2020 2020 2020 2020 2022 6973               "is
-000455d0: 4d61 6b65 7222 3a20 2230 222c 0a20 2020  Maker": "0",.   
-000455e0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000455f0: 2020 2020 2020 2020 2020 2022 6d61 7463             "matc
-00045600: 684f 7264 6572 4964 223a 2022 3132 3734  hOrderId": "1274
-00045610: 3738 3531 3031 3836 3530 3736 3232 3422  785101865076224"
-00045620: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00045630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045640: 226d 616b 6572 5265 6261 7465 223a 2022  "makerRebate": "
-00045650: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-00045660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045670: 2020 2265 7865 6375 7469 6f6e 5469 6d65    "executionTime
-00045680: 223a 2022 3136 3636 3730 3232 3236 3333  ": "166670222633
-00045690: 3522 0a20 2020 2020 2020 2023 2020 2020  5".        #    
-000456a0: 2020 2020 2020 2020 2020 2020 207d 2c0a               },.
-000456b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000456c0: 2020 2020 2020 5d0a 2020 2020 2020 2020        ].        
-000456d0: 2320 2020 2020 2020 2020 7d2c 0a20 2020  #         },.   
-000456e0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-000456f0: 7265 7445 7874 4d61 7022 3a20 7b7d 2c0a  retExtMap": {},.
-00045700: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00045710: 2020 2272 6574 4578 7449 6e66 6f22 3a20    "retExtInfo": 
-00045720: 6e75 6c6c 2c0a 2020 2020 2020 2020 2320  null,.        # 
-00045730: 2020 2020 2020 2020 2274 696d 6522 3a20          "time": 
-00045740: 2231 3636 3637 3638 3231 3531 3537 220a  "1666768215157".
-00045750: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
+00042cf0: 2020 2020 2020 2020 2022 6375 6d45 7865           "cumExe
+00042d00: 6356 616c 7565 223a 2022 3022 2c0a 2020  cValue": "0",.  
+00042d10: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00042d20: 2020 2020 2020 2020 2020 2020 2274 7269              "tri
+00042d30: 6767 6572 4469 7265 6374 696f 6e22 3a20  ggerDirection": 
+00042d40: 302c 0a20 2020 2020 2020 2023 2020 2020  0,.        #    
+00042d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042d60: 2022 6973 4c65 7665 7261 6765 223a 2022   "isLeverage": "
+00042d70: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00042d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042d90: 2020 2272 656a 6563 7452 6561 736f 6e22    "rejectReason"
+00042da0: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
+00042db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042dc0: 2020 2020 2270 7269 6365 223a 2022 3130      "price": "10
+00042dd0: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+00042de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042df0: 2020 2022 6f72 6465 7249 7622 3a20 2222     "orderIv": ""
+00042e00: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00042e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042e20: 2263 7265 6174 6564 5469 6d65 223a 2022  "createdTime": "
+00042e30: 3136 3732 3231 3737 3438 3238 3722 2c0a  1672217748287",.
+00042e40: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00042e50: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+00042e60: 7054 7269 6767 6572 4279 223a 2022 222c  pTriggerBy": "",
+00042e70: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00042e80: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00042e90: 706f 7369 7469 6f6e 4964 7822 3a20 302c  positionIdx": 0,
+00042ea0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00042eb0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00042ec0: 7469 6d65 496e 466f 7263 6522 3a20 2247  timeInForce": "G
+00042ed0: 5443 222c 0a20 2020 2020 2020 2023 2020  TC",.        #  
+00042ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042ef0: 2020 2022 6c65 6176 6573 5661 6c75 6522     "leavesValue"
+00042f00: 3a20 2235 3030 222c 0a20 2020 2020 2020  : "500",.       
+00042f10: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00042f20: 2020 2020 2020 2022 7570 6461 7465 6454         "updatedT
+00042f30: 696d 6522 3a20 2231 3637 3232 3137 3734  ime": "167221774
+00042f40: 3832 3837 222c 0a20 2020 2020 2020 2023  8287",.        #
+00042f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042f60: 2020 2020 2022 7369 6465 223a 2022 4275       "side": "Bu
+00042f70: 7922 2c0a 2020 2020 2020 2020 2320 2020  y",.        #   
+00042f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042f90: 2020 2274 7269 6767 6572 5072 6963 6522    "triggerPrice"
+00042fa0: 3a20 2231 3530 3022 2c0a 2020 2020 2020  : "1500",.      
+00042fb0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00042fc0: 2020 2020 2020 2020 2263 756d 4578 6563          "cumExec
+00042fd0: 4665 6522 3a20 2230 222c 0a20 2020 2020  Fee": "0",.     
+00042fe0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00042ff0: 2020 2020 2020 2020 2022 6c65 6176 6573           "leaves
+00043000: 5174 7922 3a20 2230 222c 0a20 2020 2020  Qty": "0",.     
+00043010: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00043020: 2020 2020 2020 2020 2022 736c 5472 6967           "slTrig
+00043030: 6765 7242 7922 3a20 2222 2c0a 2020 2020  gerBy": "",.    
+00043040: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00043050: 2020 2020 2020 2020 2020 2263 6c6f 7365            "close
+00043060: 4f6e 5472 6967 6765 7222 3a20 4661 6c73  OnTrigger": Fals
+00043070: 652c 0a20 2020 2020 2020 2023 2020 2020  e,.        #    
+00043080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043090: 2022 6375 6d45 7865 6351 7479 223a 2022   "cumExecQty": "
+000430a0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+000430b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000430c0: 2020 2272 6564 7563 654f 6e6c 7922 3a20    "reduceOnly": 
+000430d0: 4661 6c73 652c 0a20 2020 2020 2020 2023  False,.        #
+000430e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000430f0: 2020 2020 2022 7174 7922 3a20 2230 2e35       "qty": "0.5
+00043100: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00043110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043120: 2022 7374 6f70 4c6f 7373 223a 2022 222c   "stopLoss": "",
+00043130: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00043140: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00043150: 7472 6967 6765 7242 7922 3a20 2231 3139  triggerBy": "119
+00043160: 322e 3522 0a20 2020 2020 2020 2023 2020  2.5".        #  
+00043170: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+00043180: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00043190: 2020 2020 2020 205d 0a20 2020 2020 2020         ].       
+000431a0: 2023 2020 2020 2020 2020 207d 2c0a 2020   #         },.  
+000431b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000431c0: 2272 6574 4578 7449 6e66 6f22 3a20 7b7d  "retExtInfo": {}
+000431d0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000431e0: 2020 2020 2274 696d 6522 3a20 3136 3732      "time": 1672
+000431f0: 3231 3935 3236 3239 340a 2020 2020 2020  219526294.      
+00043200: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
+00043210: 2020 230a 2020 2020 2020 2020 7265 7375    #.        resu
+00043220: 6c74 203d 2073 656c 662e 7361 6665 5f76  lt = self.safe_v
+00043230: 616c 7565 2872 6573 706f 6e73 652c 2027  alue(response, '
+00043240: 7265 7375 6c74 272c 207b 7d29 0a20 2020  result', {}).   
+00043250: 2020 2020 206f 7264 6572 7320 3d20 7365       orders = se
+00043260: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
+00043270: 7375 6c74 2c20 276c 6973 7427 2c20 5b5d  sult, 'list', []
+00043280: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00043290: 2073 656c 662e 7061 7273 655f 6f72 6465   self.parse_orde
+000432a0: 7273 286f 7264 6572 732c 206d 6172 6b65  rs(orders, marke
+000432b0: 742c 2073 696e 6365 2c20 6c69 6d69 7429  t, since, limit)
+000432c0: 0a0a 2020 2020 6173 796e 6320 6465 6620  ..    async def 
+000432d0: 6665 7463 685f 7573 6463 5f6f 7065 6e5f  fetch_usdc_open_
+000432e0: 6f72 6465 7273 2873 656c 662c 2073 796d  orders(self, sym
+000432f0: 626f 6c3a 204f 7074 696f 6e61 6c5b 7374  bol: Optional[st
+00043300: 725d 203d 204e 6f6e 652c 2073 696e 6365  r] = None, since
+00043310: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
+00043320: 3d20 4e6f 6e65 2c20 6c69 6d69 743a 204f  = None, limit: O
+00043330: 7074 696f 6e61 6c5b 696e 745d 203d 204e  ptional[int] = N
+00043340: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
+00043350: 0a20 2020 2020 2020 2061 7761 6974 2073  .        await s
+00043360: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
+00043370: 2829 0a20 2020 2020 2020 2072 6571 7565  ().        reque
+00043380: 7374 203d 207b 7d0a 2020 2020 2020 2020  st = {}.        
+00043390: 6d61 726b 6574 203d 204e 6f6e 650a 2020  market = None.  
+000433a0: 2020 2020 2020 6966 2073 796d 626f 6c20        if symbol 
+000433b0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+000433c0: 2020 2020 2020 2020 206d 6172 6b65 7420           market 
+000433d0: 3d20 7365 6c66 2e6d 6172 6b65 7428 7379  = self.market(sy
+000433e0: 6d62 6f6c 290a 2020 2020 2020 2020 2020  mbol).          
+000433f0: 2020 7265 7175 6573 745b 2773 796d 626f    request['symbo
+00043400: 6c27 5d20 3d20 6d61 726b 6574 5b27 6964  l'] = market['id
+00043410: 275d 0a20 2020 2020 2020 2074 7970 6520  '].        type 
+00043420: 3d20 4e6f 6e65 0a20 2020 2020 2020 2074  = None.        t
+00043430: 7970 652c 2070 6172 616d 7320 3d20 7365  ype, params = se
+00043440: 6c66 2e68 616e 646c 655f 6d61 726b 6574  lf.handle_market
+00043450: 5f74 7970 655f 616e 645f 7061 7261 6d73  _type_and_params
+00043460: 2827 6665 7463 6855 5344 434f 7065 6e4f  ('fetchUSDCOpenO
+00043470: 7264 6572 7327 2c20 6d61 726b 6574 2c20  rders', market, 
+00043480: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
+00043490: 7265 7175 6573 745b 2763 6174 6567 6f72  request['categor
+000434a0: 7927 5d20 3d20 2770 6572 7065 7475 616c  y'] = 'perpetual
+000434b0: 2720 6966 2028 7479 7065 203d 3d20 2773  ' if (type == 's
+000434c0: 7761 7027 2920 656c 7365 2027 6f70 7469  wap') else 'opti
+000434d0: 6f6e 270a 2020 2020 2020 2020 7265 7370  on'.        resp
+000434e0: 6f6e 7365 203d 2061 7761 6974 2073 656c  onse = await sel
+000434f0: 662e 7072 6976 6174 6550 6f73 744f 7074  f.privatePostOpt
+00043500: 696f 6e55 7364 634f 7065 6e61 7069 5072  ionUsdcOpenapiPr
+00043510: 6976 6174 6556 3151 7565 7279 4163 7469  ivateV1QueryActi
+00043520: 7665 4f72 6465 7273 2873 656c 662e 6578  veOrders(self.ex
+00043530: 7465 6e64 2872 6571 7565 7374 2c20 7061  tend(request, pa
+00043540: 7261 6d73 2929 0a20 2020 2020 2020 2072  rams)).        r
+00043550: 6573 756c 7420 3d20 7365 6c66 2e73 6166  esult = self.saf
+00043560: 655f 7661 6c75 6528 7265 7370 6f6e 7365  e_value(response
+00043570: 2c20 2772 6573 756c 7427 2c20 7b7d 290a  , 'result', {}).
+00043580: 2020 2020 2020 2020 6f72 6465 7273 203d          orders =
+00043590: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+000435a0: 2872 6573 756c 742c 2027 6461 7461 4c69  (result, 'dataLi
+000435b0: 7374 272c 205b 5d29 0a20 2020 2020 2020  st', []).       
+000435c0: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
+000435d0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+000435e0: 2020 2020 2022 7265 7443 6f64 6522 3a20       "retCode": 
+000435f0: 302c 0a20 2020 2020 2020 2023 2020 2020  0,.        #    
+00043600: 2020 2020 2022 7265 744d 7367 223a 2022       "retMsg": "
+00043610: 4f4b 222c 0a20 2020 2020 2020 2023 2020  OK",.        #  
+00043620: 2020 2020 2020 2022 7265 7375 6c74 223a         "result":
+00043630: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+00043640: 2020 2020 2020 2020 2022 7265 7375 6c74           "result
+00043650: 546f 7461 6c53 697a 6522 3a20 312c 0a20  TotalSize": 1,. 
+00043660: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00043670: 2020 2020 2022 6375 7273 6f72 223a 2022       "cursor": "
+00043680: 6964 2533 4431 3636 3230 3139 3831 3835  id%3D16620198185
+00043690: 3639 2532 3364 6633 3165 3033 622d 6663  69%23df31e03b-fc
+000436a0: 3030 2d34 6234 632d 6264 3163 2d62 3937  00-4b4c-bd1c-b97
+000436b0: 6664 3732 6235 6335 6322 2c0a 2020 2020  fd72b5c5c",.    
+000436c0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+000436d0: 2020 2264 6174 614c 6973 7422 3a20 5b0a    "dataList": [.
+000436e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000436f0: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
+00043700: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00043710: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+00043720: 4964 223a 2022 6466 3331 6530 3362 2d66  Id": "df31e03b-f
+00043730: 6330 302d 3462 3463 2d62 6431 632d 6239  c00-4b4c-bd1c-b9
+00043740: 3766 6437 3262 3563 3563 222c 0a20 2020  7fd72b5c5c",.   
+00043750: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00043760: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
+00043770: 724c 696e 6b49 6422 3a20 2222 2c0a 2020  rLinkId": "",.  
+00043780: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00043790: 2020 2020 2020 2020 2020 2020 2273 796d              "sym
+000437a0: 626f 6c22 3a20 2242 5443 2d32 5345 5032  bol": "BTC-2SEP2
+000437b0: 322d 3138 3030 302d 4322 2c0a 2020 2020  2-18000-C",.    
+000437c0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+000437d0: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+000437e0: 5374 6174 7573 223a 2022 4e65 7722 2c0a  Status": "New",.
+000437f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00043800: 2020 2020 2020 2020 2020 2020 2020 226f                "o
+00043810: 7264 6572 5072 6963 6522 3a20 2235 3030  rderPrice": "500
+00043820: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00043830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043840: 2022 7369 6465 223a 2022 4275 7922 2c0a   "side": "Buy",.
+00043850: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00043860: 2020 2020 2020 2020 2020 2020 2020 2272                "r
+00043870: 656d 6169 6e69 6e67 5174 7922 3a20 2230  emainingQty": "0
+00043880: 2e31 222c 0a20 2020 2020 2020 2023 2020  .1",.        #  
+00043890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000438a0: 2020 2022 6f72 6465 7254 7970 6522 3a20     "orderType": 
+000438b0: 224c 696d 6974 222c 0a20 2020 2020 2020  "Limit",.       
+000438c0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+000438d0: 2020 2020 2020 2022 7174 7922 3a20 2230         "qty": "0
+000438e0: 2e31 222c 0a20 2020 2020 2020 2023 2020  .1",.        #  
+000438f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043900: 2020 2022 6976 223a 2022 302e 3030 3030     "iv": "0.0000
+00043910: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00043920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043930: 2022 6361 6e63 656c 5479 7065 223a 2022   "cancelType": "
+00043940: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00043950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043960: 2022 7570 6461 7465 5469 6d65 7374 616d   "updateTimestam
+00043970: 7022 3a20 2231 3636 3230 3139 3831 3835  p": "16620198185
+00043980: 3739 220a 2020 2020 2020 2020 2320 2020  79".        #   
+00043990: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
+000439a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000439b0: 2020 2020 2020 5d0a 2020 2020 2020 2020        ].        
+000439c0: 2320 2020 2020 2020 2020 7d0a 2020 2020  #         }.    
+000439d0: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+000439e0: 2020 2020 230a 2020 2020 2020 2020 7265      #.        re
+000439f0: 7475 726e 2073 656c 662e 7061 7273 655f  turn self.parse_
+00043a00: 6f72 6465 7273 286f 7264 6572 732c 206d  orders(orders, m
+00043a10: 6172 6b65 742c 2073 696e 6365 2c20 6c69  arket, since, li
+00043a20: 6d69 7429 0a0a 2020 2020 6173 796e 6320  mit)..    async 
+00043a30: 6465 6620 6665 7463 685f 6f70 656e 5f6f  def fetch_open_o
+00043a40: 7264 6572 7328 7365 6c66 2c20 7379 6d62  rders(self, symb
+00043a50: 6f6c 3a20 4f70 7469 6f6e 616c 5b73 7472  ol: Optional[str
+00043a60: 5d20 3d20 4e6f 6e65 2c20 7369 6e63 653a  ] = None, since:
+00043a70: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
+00043a80: 204e 6f6e 652c 206c 696d 6974 3a20 4f70   None, limit: Op
+00043a90: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
+00043aa0: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
+00043ab0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00043ac0: 2020 2020 6665 7463 6820 616c 6c20 756e      fetch all un
+00043ad0: 6669 6c6c 6564 2063 7572 7265 6e74 6c79  filled currently
+00043ae0: 206f 7065 6e20 6f72 6465 7273 0a20 2020   open orders.   
+00043af0: 2020 2020 203a 7061 7261 6d20 7374 727c       :param str|
+00043b00: 4e6f 6e65 2073 796d 626f 6c3a 2075 6e69  None symbol: uni
+00043b10: 6669 6564 206d 6172 6b65 7420 7379 6d62  fied market symb
+00043b20: 6f6c 0a20 2020 2020 2020 203a 7061 7261  ol.        :para
+00043b30: 6d20 696e 747c 4e6f 6e65 2073 696e 6365  m int|None since
+00043b40: 3a20 7468 6520 6561 726c 6965 7374 2074  : the earliest t
+00043b50: 696d 6520 696e 206d 7320 746f 2066 6574  ime in ms to fet
+00043b60: 6368 206f 7065 6e20 6f72 6465 7273 2066  ch open orders f
+00043b70: 6f72 0a20 2020 2020 2020 203a 7061 7261  or.        :para
+00043b80: 6d20 696e 747c 4e6f 6e65 206c 696d 6974  m int|None limit
+00043b90: 3a20 7468 6520 6d61 7869 6d75 6d20 6e75  : the maximum nu
+00043ba0: 6d62 6572 206f 6620 206f 7065 6e20 6f72  mber of  open or
+00043bb0: 6465 7273 2073 7472 7563 7475 7265 7320  ders structures 
+00043bc0: 746f 2072 6574 7269 6576 650a 2020 2020  to retrieve.    
+00043bd0: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
+00043be0: 7061 7261 6d73 3a20 6578 7472 6120 7061  params: extra pa
+00043bf0: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
+00043c00: 6320 746f 2074 6865 2062 7962 6974 2061  c to the bybit a
+00043c10: 7069 2065 6e64 706f 696e 740a 2020 2020  pi endpoint.    
+00043c20: 2020 2020 3a72 6574 7572 6e73 205b 6469      :returns [di
+00043c30: 6374 5d3a 2061 206c 6973 7420 6f66 2060  ct]: a list of `
+00043c40: 6f72 6465 7220 7374 7275 6374 7572 6573  order structures
+00043c50: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
+00043c60: 6378 742e 636f 6d2f 232f 3f69 643d 6f72  cxt.com/#/?id=or
+00043c70: 6465 722d 7374 7275 6374 7572 653e 600a  der-structure>`.
+00043c80: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00043c90: 2020 2020 6177 6169 7420 7365 6c66 2e6c      await self.l
+00043ca0: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
+00043cb0: 2020 2020 2020 6d61 726b 6574 203d 204e        market = N
+00043cc0: 6f6e 650a 2020 2020 2020 2020 7365 7474  one.        sett
+00043cd0: 6c65 203d 2073 656c 662e 7361 6665 5f73  le = self.safe_s
+00043ce0: 7472 696e 6728 7061 7261 6d73 2c20 2773  tring(params, 's
+00043cf0: 6574 746c 6543 6f69 6e27 290a 2020 2020  ettleCoin').    
+00043d00: 2020 2020 6966 2073 6574 746c 6520 6973      if settle is
+00043d10: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00043d20: 2020 2073 6574 746c 652c 2070 6172 616d     settle, param
+00043d30: 7320 3d20 7365 6c66 2e68 616e 646c 655f  s = self.handle_
+00043d40: 6f70 7469 6f6e 5f61 6e64 5f70 6172 616d  option_and_param
+00043d50: 7328 7061 7261 6d73 2c20 2766 6574 6368  s(params, 'fetch
+00043d60: 4f70 656e 4f72 6465 7273 272c 2027 7365  OpenOrders', 'se
+00043d70: 7474 6c65 272c 2073 6574 746c 6529 0a20  ttle', settle). 
+00043d80: 2020 2020 2020 2069 6620 7379 6d62 6f6c         if symbol
+00043d90: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00043da0: 2020 2020 2020 2020 2020 6d61 726b 6574            market
+00043db0: 203d 2073 656c 662e 6d61 726b 6574 2873   = self.market(s
+00043dc0: 796d 626f 6c29 0a20 2020 2020 2020 2020  ymbol).         
+00043dd0: 2020 2073 6574 746c 6520 3d20 6d61 726b     settle = mark
+00043de0: 6574 5b27 7365 7474 6c65 275d 0a20 2020  et['settle'].   
+00043df0: 2020 2020 2073 7562 5479 7065 203d 204e       subType = N
+00043e00: 6f6e 650a 2020 2020 2020 2020 7375 6254  one.        subT
+00043e10: 7970 652c 2070 6172 616d 7320 3d20 7365  ype, params = se
+00043e20: 6c66 2e68 616e 646c 655f 7375 625f 7479  lf.handle_sub_ty
+00043e30: 7065 5f61 6e64 5f70 6172 616d 7328 2766  pe_and_params('f
+00043e40: 6574 6368 4f70 656e 4f72 6465 7273 272c  etchOpenOrders',
+00043e50: 206d 6172 6b65 742c 2070 6172 616d 7329   market, params)
+00043e60: 0a20 2020 2020 2020 2069 7349 6e76 6572  .        isInver
+00043e70: 7365 203d 2073 7562 5479 7065 203d 3d20  se = subType == 
+00043e80: 2769 6e76 6572 7365 270a 2020 2020 2020  'inverse'.      
+00043e90: 2020 6973 5573 6463 5365 7474 6c65 6420    isUsdcSettled 
+00043ea0: 3d20 7365 7474 6c65 203d 3d20 2755 5344  = settle == 'USD
+00043eb0: 4327 0a20 2020 2020 2020 2069 734c 696e  C'.        isLin
+00043ec0: 6561 7253 6574 746c 6520 3d20 6973 5573  earSettle = isUs
+00043ed0: 6463 5365 7474 6c65 6420 6f72 2028 7365  dcSettled or (se
+00043ee0: 7474 6c65 203d 3d20 2755 5344 5427 290a  ttle == 'USDT').
+00043ef0: 2020 2020 2020 2020 6966 2069 7349 6e76          if isInv
+00043f00: 6572 7365 2061 6e64 2069 734c 696e 6561  erse and isLinea
+00043f10: 7253 6574 746c 653a 0a20 2020 2020 2020  rSettle:.       
+00043f20: 2020 2020 2072 6169 7365 2041 7267 756d       raise Argum
+00043f30: 656e 7473 5265 7175 6972 6564 2873 656c  entsRequired(sel
+00043f40: 662e 6964 202b 2027 2066 6574 6368 4f70  f.id + ' fetchOp
+00043f50: 656e 4f72 6465 7273 2077 6974 6820 696e  enOrders with in
+00043f60: 7665 7273 6520 7375 6254 7970 6520 7265  verse subType re
+00043f70: 7175 6972 6573 2073 6574 746c 6520 746f  quires settle to
+00043f80: 206e 6f74 2062 6520 5553 4454 206f 7220   not be USDT or 
+00043f90: 5553 4443 2729 0a20 2020 2020 2020 2074  USDC').        t
+00043fa0: 7970 652c 2071 7565 7279 203d 2073 656c  ype, query = sel
+00043fb0: 662e 6861 6e64 6c65 5f6d 6172 6b65 745f  f.handle_market_
+00043fc0: 7479 7065 5f61 6e64 5f70 6172 616d 7328  type_and_params(
+00043fd0: 2766 6574 6368 4f70 656e 4f72 6465 7273  'fetchOpenOrders
+00043fe0: 272c 206d 6172 6b65 742c 2070 6172 616d  ', market, param
+00043ff0: 7329 0a20 2020 2020 2020 2065 6e61 626c  s).        enabl
+00044000: 6555 6e69 6669 6564 4d61 7267 696e 2c20  eUnifiedMargin, 
+00044010: 656e 6162 6c65 556e 6966 6965 6441 6363  enableUnifiedAcc
+00044020: 6f75 6e74 203d 2061 7761 6974 2073 656c  ount = await sel
+00044030: 662e 6973 5f75 6e69 6669 6564 5f65 6e61  f.is_unified_ena
+00044040: 626c 6564 2829 0a20 2020 2020 2020 2069  bled().        i
+00044050: 6620 656e 6162 6c65 556e 6966 6965 6441  f enableUnifiedA
+00044060: 6363 6f75 6e74 2061 6e64 206e 6f74 2069  ccount and not i
+00044070: 7349 6e76 6572 7365 3a0a 2020 2020 2020  sInverse:.      
+00044080: 2020 2020 2020 7265 7475 726e 2061 7761        return awa
+00044090: 6974 2073 656c 662e 6665 7463 685f 756e  it self.fetch_un
+000440a0: 6966 6965 645f 6163 636f 756e 745f 6f70  ified_account_op
+000440b0: 656e 5f6f 7264 6572 7328 7379 6d62 6f6c  en_orders(symbol
+000440c0: 2c20 7369 6e63 652c 206c 696d 6974 2c20  , since, limit, 
+000440d0: 7175 6572 7929 0a20 2020 2020 2020 2065  query).        e
+000440e0: 6c69 6620 7479 7065 203d 3d20 2773 706f  lif type == 'spo
+000440f0: 7427 3a0a 2020 2020 2020 2020 2020 2020  t':.            
+00044100: 7265 7475 726e 2061 7761 6974 2073 656c  return await sel
+00044110: 662e 6665 7463 685f 7370 6f74 5f6f 7065  f.fetch_spot_ope
+00044120: 6e5f 6f72 6465 7273 2873 796d 626f 6c2c  n_orders(symbol,
+00044130: 2073 696e 6365 2c20 6c69 6d69 742c 2071   since, limit, q
+00044140: 7565 7279 290a 2020 2020 2020 2020 656c  uery).        el
+00044150: 6966 2065 6e61 626c 6555 6e69 6669 6564  if enableUnified
+00044160: 4d61 7267 696e 2061 6e64 206e 6f74 2069  Margin and not i
+00044170: 7349 6e76 6572 7365 3a0a 2020 2020 2020  sInverse:.      
+00044180: 2020 2020 2020 7265 7475 726e 2061 7761        return awa
+00044190: 6974 2073 656c 662e 6665 7463 685f 756e  it self.fetch_un
+000441a0: 6966 6965 645f 6d61 7267 696e 5f6f 7065  ified_margin_ope
+000441b0: 6e5f 6f72 6465 7273 2873 796d 626f 6c2c  n_orders(symbol,
+000441c0: 2073 696e 6365 2c20 6c69 6d69 742c 2071   since, limit, q
+000441d0: 7565 7279 290a 2020 2020 2020 2020 656c  uery).        el
+000441e0: 6966 2069 7355 7364 6353 6574 746c 6564  if isUsdcSettled
+000441f0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00044200: 7475 726e 2061 7761 6974 2073 656c 662e  turn await self.
+00044210: 6665 7463 685f 7573 6463 5f6f 7065 6e5f  fetch_usdc_open_
+00044220: 6f72 6465 7273 2873 796d 626f 6c2c 2073  orders(symbol, s
+00044230: 696e 6365 2c20 6c69 6d69 742c 2071 7565  ince, limit, que
+00044240: 7279 290a 2020 2020 2020 2020 656c 7365  ry).        else
+00044250: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00044260: 7475 726e 2061 7761 6974 2073 656c 662e  turn await self.
+00044270: 6665 7463 685f 6465 7269 7661 7469 7665  fetch_derivative
+00044280: 735f 6f70 656e 5f6f 7264 6572 7328 7379  s_open_orders(sy
+00044290: 6d62 6f6c 2c20 7369 6e63 652c 206c 696d  mbol, since, lim
+000442a0: 6974 2c20 7175 6572 7929 0a0a 2020 2020  it, query)..    
+000442b0: 6173 796e 6320 6465 6620 6665 7463 685f  async def fetch_
+000442c0: 6f72 6465 725f 7472 6164 6573 2873 656c  order_trades(sel
+000442d0: 662c 2069 643a 2073 7472 2c20 7379 6d62  f, id: str, symb
+000442e0: 6f6c 3a20 4f70 7469 6f6e 616c 5b73 7472  ol: Optional[str
+000442f0: 5d20 3d20 4e6f 6e65 2c20 7369 6e63 653a  ] = None, since:
+00044300: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
+00044310: 204e 6f6e 652c 206c 696d 6974 3a20 4f70   None, limit: Op
+00044320: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
+00044330: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
+00044340: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00044350: 2020 2020 6665 7463 6820 616c 6c20 7468      fetch all th
+00044360: 6520 7472 6164 6573 206d 6164 6520 6672  e trades made fr
+00044370: 6f6d 2061 2073 696e 676c 6520 6f72 6465  om a single orde
+00044380: 720a 2020 2020 2020 2020 3a70 6172 616d  r.        :param
+00044390: 2073 7472 2069 643a 206f 7264 6572 2069   str id: order i
+000443a0: 640a 2020 2020 2020 2020 3a70 6172 616d  d.        :param
+000443b0: 2073 7472 7c4e 6f6e 6520 7379 6d62 6f6c   str|None symbol
+000443c0: 3a20 756e 6966 6965 6420 6d61 726b 6574  : unified market
+000443d0: 2073 796d 626f 6c0a 2020 2020 2020 2020   symbol.        
+000443e0: 3a70 6172 616d 2069 6e74 7c4e 6f6e 6520  :param int|None 
+000443f0: 7369 6e63 653a 2074 6865 2065 6172 6c69  since: the earli
+00044400: 6573 7420 7469 6d65 2069 6e20 6d73 2074  est time in ms t
+00044410: 6f20 6665 7463 6820 7472 6164 6573 2066  o fetch trades f
+00044420: 6f72 0a20 2020 2020 2020 203a 7061 7261  or.        :para
+00044430: 6d20 696e 747c 4e6f 6e65 206c 696d 6974  m int|None limit
+00044440: 3a20 7468 6520 6d61 7869 6d75 6d20 6e75  : the maximum nu
+00044450: 6d62 6572 206f 6620 7472 6164 6573 2074  mber of trades t
+00044460: 6f20 7265 7472 6965 7665 0a20 2020 2020  o retrieve.     
+00044470: 2020 203a 7061 7261 6d20 6469 6374 2070     :param dict p
+00044480: 6172 616d 733a 2065 7874 7261 2070 6172  arams: extra par
+00044490: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
+000444a0: 2074 6f20 7468 6520 6279 6269 7420 6170   to the bybit ap
+000444b0: 6920 656e 6470 6f69 6e74 0a20 2020 2020  i endpoint.     
+000444c0: 2020 203a 7265 7475 726e 7320 5b64 6963     :returns [dic
+000444d0: 745d 3a20 6120 6c69 7374 206f 6620 6074  t]: a list of `t
+000444e0: 7261 6465 2073 7472 7563 7475 7265 7320  rade structures 
+000444f0: 3c68 7474 7073 3a2f 2f64 6f63 732e 6363  <https://docs.cc
+00044500: 7874 2e63 6f6d 2f23 2f3f 6964 3d74 7261  xt.com/#/?id=tra
+00044510: 6465 2d73 7472 7563 7475 7265 3e60 0a20  de-structure>`. 
+00044520: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00044530: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
+00044540: 2020 2020 2020 2020 2020 2027 6f72 6465             'orde
+00044550: 7249 6427 3a20 6964 2c0a 2020 2020 2020  rId': id,.      
+00044560: 2020 7d0a 2020 2020 2020 2020 7265 7475    }.        retu
+00044570: 726e 2061 7761 6974 2073 656c 662e 6665  rn await self.fe
+00044580: 7463 685f 6d79 5f74 7261 6465 7328 7379  tch_my_trades(sy
+00044590: 6d62 6f6c 2c20 7369 6e63 652c 206c 696d  mbol, since, lim
+000445a0: 6974 2c20 7365 6c66 2e65 7874 656e 6428  it, self.extend(
+000445b0: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
+000445c0: 290a 0a20 2020 2061 7379 6e63 2064 6566  )..    async def
+000445d0: 2066 6574 6368 5f6d 795f 756e 6966 6965   fetch_my_unifie
+000445e0: 645f 7472 6164 6573 2873 656c 662c 2073  d_trades(self, s
+000445f0: 796d 626f 6c3a 204f 7074 696f 6e61 6c5b  ymbol: Optional[
+00044600: 7374 725d 203d 204e 6f6e 652c 2073 696e  str] = None, sin
+00044610: 6365 3a20 4f70 7469 6f6e 616c 5b69 6e74  ce: Optional[int
+00044620: 5d20 3d20 4e6f 6e65 2c20 6c69 6d69 743a  ] = None, limit:
+00044630: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
+00044640: 204e 6f6e 652c 2070 6172 616d 733d 7b7d   None, params={}
+00044650: 293a 0a20 2020 2020 2020 2061 7761 6974  ):.        await
+00044660: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
+00044670: 7473 2829 0a20 2020 2020 2020 206d 6172  ts().        mar
+00044680: 6b65 7420 3d20 4e6f 6e65 0a20 2020 2020  ket = None.     
+00044690: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
+000446a0: 2020 2020 2020 2020 2020 2023 2027 7379             # 'sy
+000446b0: 6d62 6f6c 273a 206d 6172 6b65 745b 2769  mbol': market['i
+000446c0: 6427 5d2c 0a20 2020 2020 2020 2020 2020  d'],.           
+000446d0: 2023 2027 6361 7465 676f 7279 273a 2027   # 'category': '
+000446e0: 272c 2020 2320 5072 6f64 7563 7420 7479  ',  # Product ty
+000446f0: 7065 2e20 7370 6f74 2c6c 696e 6561 722c  pe. spot,linear,
+00044700: 6f70 7469 6f6e 0a20 2020 2020 2020 2020  option.         
+00044710: 2020 2023 2027 6f72 6465 7249 6427 3a20     # 'orderId': 
+00044720: 2727 2c20 2023 204f 7264 6572 2049 440a  '',  # Order ID.
+00044730: 2020 2020 2020 2020 2020 2020 2320 276f              # 'o
+00044740: 7264 6572 4c69 6e6b 4964 273a 2027 272c  rderLinkId': '',
+00044750: 2020 2320 5573 6572 2063 7573 746f 6d69    # User customi
+00044760: 7365 6420 6f72 6465 7220 4944 0a20 2020  sed order ID.   
+00044770: 2020 2020 2020 2020 2023 2027 6261 7365           # 'base
+00044780: 436f 696e 273a 2027 272c 2020 2320 4261  Coin': '',  # Ba
+00044790: 7365 2063 6f69 6e0a 2020 2020 2020 2020  se coin.        
+000447a0: 2020 2020 2320 2773 7461 7274 5469 6d65      # 'startTime
+000447b0: 273a 2030 2c20 2023 2054 6865 2073 7461  ': 0,  # The sta
+000447c0: 7274 2074 696d 6573 7461 6d70 286d 7329  rt timestamp(ms)
+000447d0: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+000447e0: 656e 6454 696d 6527 3a20 302c 2020 2320  endTime': 0,  # 
+000447f0: 5468 6520 656e 6420 7469 6d65 7374 616d  The end timestam
+00044800: 7028 6d73 290a 2020 2020 2020 2020 2020  p(ms).          
+00044810: 2020 2320 2765 7865 6354 7970 6527 3a20    # 'execType': 
+00044820: 2727 2c20 2023 2045 7865 6375 7469 6f6e  '',  # Execution
+00044830: 2074 7970 650a 2020 2020 2020 2020 2020   type.          
+00044840: 2020 2320 276c 696d 6974 273a 2030 2c20    # 'limit': 0, 
+00044850: 2023 204c 696d 6974 2066 6f72 2064 6174   # Limit for dat
+00044860: 6120 7369 7a65 2070 6572 2070 6167 652e  a size per page.
+00044870: 205b 312c 2031 3030 5d2e 2044 6566 6175   [1, 100]. Defau
+00044880: 6c74 3a20 3530 0a20 2020 2020 2020 2020  lt: 50.         
+00044890: 2020 2023 2027 6375 7273 6f72 273a 2027     # 'cursor': '
+000448a0: 272c 2020 2320 4375 7273 6f72 2e20 5573  ',  # Cursor. Us
+000448b0: 6564 2066 6f72 2070 6167 696e 6174 696f  ed for paginatio
+000448c0: 6e0a 2020 2020 2020 2020 7d0a 2020 2020  n.        }.    
+000448d0: 2020 2020 6966 2073 796d 626f 6c20 6973      if symbol is
+000448e0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+000448f0: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
+00044900: 7365 6c66 2e6d 6172 6b65 7428 7379 6d62  self.market(symb
+00044910: 6f6c 290a 2020 2020 2020 2020 2020 2020  ol).            
+00044920: 7265 7175 6573 745b 2773 796d 626f 6c27  request['symbol'
+00044930: 5d20 3d20 6d61 726b 6574 5b27 6964 275d  ] = market['id']
+00044940: 0a20 2020 2020 2020 2074 7970 6520 3d20  .        type = 
+00044950: 4e6f 6e65 0a20 2020 2020 2020 2074 7970  None.        typ
+00044960: 652c 2070 6172 616d 7320 3d20 7365 6c66  e, params = self
+00044970: 2e68 616e 646c 655f 6d61 726b 6574 5f74  .handle_market_t
+00044980: 7970 655f 616e 645f 7061 7261 6d73 2827  ype_and_params('
+00044990: 6665 7463 684d 7954 7261 6465 7327 2c20  fetchMyTrades', 
+000449a0: 6d61 726b 6574 2c20 7061 7261 6d73 290a  market, params).
+000449b0: 2020 2020 2020 2020 6966 2074 7970 6520          if type 
+000449c0: 3d3d 2027 7370 6f74 273a 0a20 2020 2020  == 'spot':.     
+000449d0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+000449e0: 6361 7465 676f 7279 275d 203d 2027 7370  category'] = 'sp
+000449f0: 6f74 270a 2020 2020 2020 2020 656c 7365  ot'.        else
+00044a00: 3a0a 2020 2020 2020 2020 2020 2020 7375  :.            su
+00044a10: 6254 7970 6520 3d20 4e6f 6e65 0a20 2020  bType = None.   
+00044a20: 2020 2020 2020 2020 2073 7562 5479 7065           subType
+00044a30: 2c20 7061 7261 6d73 203d 2073 656c 662e  , params = self.
+00044a40: 6861 6e64 6c65 5f73 7562 5f74 7970 655f  handle_sub_type_
+00044a50: 616e 645f 7061 7261 6d73 2827 6665 7463  and_params('fetc
+00044a60: 684d 7954 7261 6465 7327 2c20 6d61 726b  hMyTrades', mark
+00044a70: 6574 2c20 7061 7261 6d73 290a 2020 2020  et, params).    
+00044a80: 2020 2020 2020 2020 6966 2073 7562 5479          if subTy
+00044a90: 7065 203d 3d20 2769 6e76 6572 7365 273a  pe == 'inverse':
+00044aa0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00044ab0: 2072 6169 7365 204e 6f74 5375 7070 6f72   raise NotSuppor
+00044ac0: 7465 6428 7365 6c66 2e69 6420 2b20 2720  ted(self.id + ' 
+00044ad0: 6665 7463 684d 7954 7261 6465 7328 2920  fetchMyTrades() 
+00044ae0: 646f 6573 206e 6f74 2073 7570 706f 7274  does not support
+00044af0: 2027 202b 2073 7562 5479 7065 202b 2027   ' + subType + '
+00044b00: 206d 6172 6b65 7473 2e27 290a 2020 2020   markets.').    
+00044b10: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+00044b20: 2763 6174 6567 6f72 7927 5d20 3d20 7375  'category'] = su
+00044b30: 6254 7970 650a 2020 2020 2020 2020 6966  bType.        if
+00044b40: 2073 696e 6365 2069 7320 6e6f 7420 4e6f   since is not No
+00044b50: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+00044b60: 7265 7175 6573 745b 2773 7461 7274 5469  request['startTi
+00044b70: 6d65 275d 203d 2073 696e 6365 0a20 2020  me'] = since.   
+00044b80: 2020 2020 2069 6620 6c69 6d69 7420 6973       if limit is
+00044b90: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00044ba0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+00044bb0: 6c69 6d69 7427 5d20 3d20 6c69 6d69 7420  limit'] = limit 
+00044bc0: 2023 2064 6566 6175 6c74 2032 302c 206d   # default 20, m
+00044bd0: 6178 2035 300a 2020 2020 2020 2020 7265  ax 50.        re
+00044be0: 7370 6f6e 7365 203d 2061 7761 6974 2073  sponse = await s
+00044bf0: 656c 662e 7072 6976 6174 6547 6574 5635  elf.privateGetV5
+00044c00: 4578 6563 7574 696f 6e4c 6973 7428 7365  ExecutionList(se
+00044c10: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
+00044c20: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
+00044c30: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+00044c40: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+00044c50: 2020 2020 2020 2020 2272 6574 436f 6465          "retCode
+00044c60: 223a 2030 2c0a 2020 2020 2020 2020 2320  ": 0,.        # 
+00044c70: 2020 2020 2020 2020 2272 6574 4d73 6722          "retMsg"
+00044c80: 3a20 224f 4b22 2c0a 2020 2020 2020 2020  : "OK",.        
+00044c90: 2320 2020 2020 2020 2020 2272 6573 756c  #         "resul
+00044ca0: 7422 3a20 7b0a 2020 2020 2020 2020 2320  t": {.        # 
+00044cb0: 2020 2020 2020 2020 2020 2020 226e 6578              "nex
+00044cc0: 7450 6167 6543 7572 736f 7222 3a20 2231  tPageCursor": "1
+00044cd0: 3332 3736 3625 3341 3225 3243 3133 3237  32766%3A2%2C1327
+00044ce0: 3636 2533 4132 222c 0a20 2020 2020 2020  66%3A2",.       
+00044cf0: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00044d00: 6361 7465 676f 7279 223a 2022 6c69 6e65  category": "line
+00044d10: 6172 222c 0a20 2020 2020 2020 2023 2020  ar",.        #  
+00044d20: 2020 2020 2020 2020 2020 2022 6c69 7374             "list
+00044d30: 223a 205b 0a20 2020 2020 2020 2023 2020  ": [.        #  
+00044d40: 2020 2020 2020 2020 2020 2020 2020 207b                 {
+00044d50: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00044d60: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00044d70: 7379 6d62 6f6c 223a 2022 4554 4850 4552  symbol": "ETHPER
+00044d80: 5022 2c0a 2020 2020 2020 2020 2320 2020  P",.        #   
+00044d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044da0: 2020 226f 7264 6572 5479 7065 223a 2022    "orderType": "
+00044db0: 4d61 726b 6574 222c 0a20 2020 2020 2020  Market",.       
+00044dc0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00044dd0: 2020 2020 2020 2022 756e 6465 726c 7969         "underlyi
+00044de0: 6e67 5072 6963 6522 3a20 2222 2c0a 2020  ngPrice": "",.  
+00044df0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00044e00: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+00044e10: 6572 4c69 6e6b 4964 223a 2022 222c 0a20  erLinkId": "",. 
+00044e20: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00044e30: 2020 2020 2020 2020 2020 2020 2022 7369               "si
+00044e40: 6465 223a 2022 4275 7922 2c0a 2020 2020  de": "Buy",.    
+00044e50: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00044e60: 2020 2020 2020 2020 2020 2269 6e64 6578            "index
+00044e70: 5072 6963 6522 3a20 2222 2c0a 2020 2020  Price": "",.    
+00044e80: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00044e90: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+00044ea0: 4964 223a 2022 3863 3036 3533 3431 2d37  Id": "8c065341-7
+00044eb0: 6235 322d 3463 6139 2d61 6332 632d 3337  b52-4ca9-ac2c-37
+00044ec0: 6533 3161 6335 3563 3934 222c 0a20 2020  e31ac55c94",.   
+00044ed0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00044ee0: 2020 2020 2020 2020 2020 2022 7374 6f70             "stop
+00044ef0: 4f72 6465 7254 7970 6522 3a20 2255 4e4b  OrderType": "UNK
+00044f00: 4e4f 574e 222c 0a20 2020 2020 2020 2023  NOWN",.        #
+00044f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044f20: 2020 2020 2022 6c65 6176 6573 5174 7922       "leavesQty"
+00044f30: 3a20 2230 222c 0a20 2020 2020 2020 2023  : "0",.        #
+00044f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044f50: 2020 2020 2022 6578 6563 5469 6d65 223a       "execTime":
+00044f60: 2022 3136 3732 3238 3237 3232 3432 3922   "1672282722429"
+00044f70: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00044f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044f90: 2269 734d 616b 6572 223a 2046 616c 7365  "isMaker": False
+00044fa0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00044fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044fc0: 2265 7865 6346 6565 223a 2022 302e 3037  "execFee": "0.07
+00044fd0: 3134 3039 222c 0a20 2020 2020 2020 2023  1409",.        #
+00044fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044ff0: 2020 2020 2022 6665 6552 6174 6522 3a20       "feeRate": 
+00045000: 2230 2e30 3030 3622 2c0a 2020 2020 2020  "0.0006",.      
+00045010: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00045020: 2020 2020 2020 2020 2265 7865 6349 6422          "execId"
+00045030: 3a20 2265 3063 6265 3831 642d 3066 3138  : "e0cbe81d-0f18
+00045040: 2d35 3836 362d 3934 3135 2d63 6633 3139  -5866-9415-cf319
+00045050: 6235 6461 6233 6222 2c0a 2020 2020 2020  b5dab3b",.      
+00045060: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00045070: 2020 2020 2020 2020 2274 7261 6465 4976          "tradeIv
+00045080: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
+00045090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000450a0: 2020 2020 2022 626c 6f63 6b54 7261 6465       "blockTrade
+000450b0: 4964 223a 2022 222c 0a20 2020 2020 2020  Id": "",.       
+000450c0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+000450d0: 2020 2020 2020 2022 6d61 726b 5072 6963         "markPric
+000450e0: 6522 3a20 2231 3138 332e 3534 222c 0a20  e": "1183.54",. 
+000450f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00045100: 2020 2020 2020 2020 2020 2020 2022 6578               "ex
+00045110: 6563 5072 6963 6522 3a20 2231 3139 302e  ecPrice": "1190.
+00045120: 3135 222c 0a20 2020 2020 2020 2023 2020  15",.        #  
+00045130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045140: 2020 2022 6d61 726b 4976 223a 2022 222c     "markIv": "",
+00045150: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00045160: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00045170: 6f72 6465 7251 7479 223a 2022 302e 3122  orderQty": "0.1"
+00045180: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00045190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000451a0: 226f 7264 6572 5072 6963 6522 3a20 2231  "orderPrice": "1
+000451b0: 3233 362e 3922 2c0a 2020 2020 2020 2020  236.9",.        
+000451c0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000451d0: 2020 2020 2020 2265 7865 6356 616c 7565        "execValue
+000451e0: 223a 2022 3131 392e 3031 3522 2c0a 2020  ": "119.015",.  
+000451f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00045200: 2020 2020 2020 2020 2020 2020 2265 7865              "exe
+00045210: 6354 7970 6522 3a20 2254 7261 6465 222c  cType": "Trade",
+00045220: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00045230: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00045240: 6578 6563 5174 7922 3a20 2230 2e31 220a  execQty": "0.1".
+00045250: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00045260: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
+00045270: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00045280: 2020 5d0a 2020 2020 2020 2020 2320 2020    ].        #   
+00045290: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
+000452a0: 2023 2020 2020 2020 2020 2022 7265 7445   #         "retE
+000452b0: 7874 496e 666f 223a 207b 7d2c 0a20 2020  xtInfo": {},.   
+000452c0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+000452d0: 7469 6d65 223a 2031 3637 3232 3833 3735  time": 167228375
+000452e0: 3435 3130 0a20 2020 2020 2020 2023 2020  4510.        #  
+000452f0: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
+00045300: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
+00045310: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
+00045320: 7265 7370 6f6e 7365 2c20 2772 6573 756c  response, 'resul
+00045330: 7427 2c20 7b7d 290a 2020 2020 2020 2020  t', {}).        
+00045340: 7472 6164 6573 203d 2073 656c 662e 7361  trades = self.sa
+00045350: 6665 5f76 616c 7565 2872 6573 756c 742c  fe_value(result,
+00045360: 2027 6c69 7374 272c 205b 5d29 0a20 2020   'list', []).   
+00045370: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00045380: 2e70 6172 7365 5f74 7261 6465 7328 7472  .parse_trades(tr
+00045390: 6164 6573 2c20 6d61 726b 6574 2c20 7369  ades, market, si
+000453a0: 6e63 652c 206c 696d 6974 290a 0a20 2020  nce, limit)..   
+000453b0: 2061 7379 6e63 2064 6566 2066 6574 6368   async def fetch
+000453c0: 5f6d 795f 7370 6f74 5f74 7261 6465 7328  _my_spot_trades(
+000453d0: 7365 6c66 2c20 7379 6d62 6f6c 3a20 4f70  self, symbol: Op
+000453e0: 7469 6f6e 616c 5b73 7472 5d20 3d20 4e6f  tional[str] = No
+000453f0: 6e65 2c20 7369 6e63 653a 204f 7074 696f  ne, since: Optio
+00045400: 6e61 6c5b 696e 745d 203d 204e 6f6e 652c  nal[int] = None,
+00045410: 206c 696d 6974 3a20 4f70 7469 6f6e 616c   limit: Optional
+00045420: 5b69 6e74 5d20 3d20 4e6f 6e65 2c20 7061  [int] = None, pa
+00045430: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
+00045440: 2020 6966 2073 796d 626f 6c20 6973 204e    if symbol is N
+00045450: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00045460: 2072 6169 7365 2041 7267 756d 656e 7473   raise Arguments
+00045470: 5265 7175 6972 6564 2873 656c 662e 6964  Required(self.id
+00045480: 202b 2027 2066 6574 6368 4d79 5370 6f74   + ' fetchMySpot
+00045490: 5472 6164 6573 2829 2072 6571 7569 7265  Trades() require
+000454a0: 7320 6120 7379 6d62 6f6c 2061 7267 756d  s a symbol argum
+000454b0: 656e 7427 290a 2020 2020 2020 2020 6177  ent').        aw
+000454c0: 6169 7420 7365 6c66 2e6c 6f61 645f 6d61  ait self.load_ma
+000454d0: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
+000454e0: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
+000454f0: 726b 6574 2873 796d 626f 6c29 0a20 2020  rket(symbol).   
+00045500: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
+00045510: 0a20 2020 2020 2020 2020 2020 2027 7379  .            'sy
+00045520: 6d62 6f6c 273a 206d 6172 6b65 745b 2769  mbol': market['i
+00045530: 6427 5d2c 0a20 2020 2020 2020 2020 2020  d'],.           
+00045540: 2023 2027 6f72 6465 7249 6427 3a20 2766   # 'orderId': 'f
+00045550: 3138 3538 3036 622d 6238 3031 2d34 3066  185806b-b801-40f
+00045560: 662d 6164 6563 2d35 3232 3839 3337 3065  f-adec-52289370e
+00045570: 6436 3227 2c20 2023 2069 6620 6e6f 7420  d62',  # if not 
+00045580: 7072 6f76 6964 6564 2077 696c 6c20 7265  provided will re
+00045590: 7475 726e 2075 7365 7227 7320 7472 6164  turn user's trad
+000455a0: 696e 6720 7265 636f 7264 730a 2020 2020  ing records.    
+000455b0: 2020 2020 2020 2020 2320 2773 7461 7274          # 'start
+000455c0: 5469 6d65 273a 2069 6e74 2873 696e 6365  Time': int(since
+000455d0: 202f 2031 3030 3029 2c0a 2020 2020 2020   / 1000),.      
+000455e0: 2020 2020 2020 2320 2765 6e64 5469 6d65        # 'endTime
+000455f0: 273a 2030 2c0a 2020 2020 2020 2020 2020  ': 0,.          
+00045600: 2020 2320 2766 726f 6d54 7261 6465 4964    # 'fromTradeId
+00045610: 273a 2027 272c 0a20 2020 2020 2020 2020  ': '',.         
+00045620: 2020 2023 2027 746f 5472 6164 6549 6427     # 'toTradeId'
+00045630: 3a20 2727 2c0a 2020 2020 2020 2020 2020  : '',.          
+00045640: 2020 2320 276c 696d 6974 2720 3230 2c20    # 'limit' 20, 
+00045650: 2023 206d 6178 2035 300a 2020 2020 2020   # max 50.      
+00045660: 2020 7d0a 2020 2020 2020 2020 6966 2073    }.        if s
+00045670: 696e 6365 2069 7320 6e6f 7420 4e6f 6e65  ince is not None
+00045680: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00045690: 7175 6573 745b 2773 7461 7274 5469 6d65  quest['startTime
+000456a0: 275d 203d 2073 696e 6365 0a20 2020 2020  '] = since.     
+000456b0: 2020 2069 6620 6c69 6d69 7420 6973 206e     if limit is n
+000456c0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+000456d0: 2020 2020 2072 6571 7565 7374 5b27 6c69       request['li
+000456e0: 6d69 7427 5d20 3d20 6c69 6d69 7420 2023  mit'] = limit  #
+000456f0: 2064 6566 6175 6c74 2032 302c 206d 6178   default 20, max
+00045700: 2035 300a 2020 2020 2020 2020 7265 7370   50.        resp
+00045710: 6f6e 7365 203d 2061 7761 6974 2073 656c  onse = await sel
+00045720: 662e 7072 6976 6174 6547 6574 5370 6f74  f.privateGetSpot
+00045730: 5633 5072 6976 6174 654d 7954 7261 6465  V3PrivateMyTrade
+00045740: 7328 7365 6c66 2e65 7874 656e 6428 7265  s(self.extend(re
+00045750: 7175 6573 742c 2070 6172 616d 7329 290a  quest, params)).
 00045760: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-00045770: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
-00045780: 7361 6665 5f76 616c 7565 2872 6573 706f  safe_value(respo
-00045790: 6e73 652c 2027 7265 7375 6c74 272c 207b  nse, 'result', {
-000457a0: 7d29 0a20 2020 2020 2020 2074 7261 6465  }).        trade
-000457b0: 7320 3d20 7365 6c66 2e73 6166 655f 7661  s = self.safe_va
-000457c0: 6c75 6528 7265 7375 6c74 2c20 276c 6973  lue(result, 'lis
-000457d0: 7427 2c20 5b5d 290a 2020 2020 2020 2020  t', []).        
-000457e0: 7265 7475 726e 2073 656c 662e 7061 7273  return self.pars
-000457f0: 655f 7472 6164 6573 2874 7261 6465 732c  e_trades(trades,
-00045800: 206d 6172 6b65 742c 2073 696e 6365 2c20   market, since, 
-00045810: 6c69 6d69 7429 0a0a 2020 2020 6173 796e  limit)..    asyn
-00045820: 6320 6465 6620 6665 7463 685f 6d79 5f75  c def fetch_my_u
-00045830: 6e69 6669 6564 5f6d 6172 6769 6e5f 7472  nified_margin_tr
-00045840: 6164 6573 2873 656c 662c 2073 796d 626f  ades(self, symbo
-00045850: 6c3a 204f 7074 696f 6e61 6c5b 7374 725d  l: Optional[str]
-00045860: 203d 204e 6f6e 652c 2073 696e 6365 3a20   = None, since: 
-00045870: 4f70 7469 6f6e 616c 5b69 6e74 5d20 3d20  Optional[int] = 
-00045880: 4e6f 6e65 2c20 6c69 6d69 743a 204f 7074  None, limit: Opt
-00045890: 696f 6e61 6c5b 696e 745d 203d 204e 6f6e  ional[int] = Non
-000458a0: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
-000458b0: 2020 2020 2020 2061 7761 6974 2073 656c         await sel
-000458c0: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
-000458d0: 0a20 2020 2020 2020 206d 6172 6b65 7420  .        market 
-000458e0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2073  = None.        s
-000458f0: 6574 746c 6520 3d20 4e6f 6e65 0a20 2020  ettle = None.   
-00045900: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
-00045910: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
-00045920: 7379 6d62 6f6c 273a 206d 6172 6b65 745b  symbol': market[
-00045930: 2769 6427 5d2c 0a20 2020 2020 2020 2020  'id'],.         
-00045940: 2020 2023 2027 6f72 6465 7249 6427 3a20     # 'orderId': 
-00045950: 2766 3138 3538 3036 622d 6238 3031 2d34  'f185806b-b801-4
-00045960: 3066 662d 6164 6563 2d35 3232 3839 3337  0ff-adec-5228937
-00045970: 3065 6436 3227 2c20 2023 2069 6620 6e6f  0ed62',  # if no
-00045980: 7420 7072 6f76 6964 6564 2077 696c 6c20  t provided will 
-00045990: 7265 7475 726e 2075 7365 7227 7320 7472  return user's tr
-000459a0: 6164 696e 6720 7265 636f 7264 730a 2020  ading records.  
-000459b0: 2020 2020 2020 2020 2020 2320 2773 7461            # 'sta
-000459c0: 7274 5469 6d65 273a 2069 6e74 2873 696e  rtTime': int(sin
-000459d0: 6365 202f 2031 3030 3029 2c0a 2020 2020  ce / 1000),.    
-000459e0: 2020 2020 2020 2020 2320 2765 6e64 5469          # 'endTi
-000459f0: 6d65 273a 2030 2c0a 2020 2020 2020 2020  me': 0,.        
-00045a00: 2020 2020 2320 2763 6174 6567 6f72 7927      # 'category'
-00045a10: 3a20 2727 0a20 2020 2020 2020 2020 2020  : ''.           
-00045a20: 2023 2027 6c69 6d69 7427 2032 302c 2020   # 'limit' 20,  
-00045a30: 2320 6d61 7820 3530 0a20 2020 2020 2020  # max 50.       
-00045a40: 207d 0a20 2020 2020 2020 2069 6620 7379   }.        if sy
-00045a50: 6d62 6f6c 2069 7320 6e6f 7420 4e6f 6e65  mbol is not None
-00045a60: 3a0a 2020 2020 2020 2020 2020 2020 6d61  :.            ma
-00045a70: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
-00045a80: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
-00045a90: 2020 2020 2020 2073 6574 746c 6520 3d20         settle = 
-00045aa0: 6d61 726b 6574 5b27 7365 7474 6c65 275d  market['settle']
-00045ab0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-00045ac0: 7565 7374 5b27 7379 6d62 6f6c 275d 203d  uest['symbol'] =
-00045ad0: 206d 6172 6b65 745b 2769 6427 5d0a 2020   market['id'].  
-00045ae0: 2020 2020 2020 7375 6254 7970 6520 3d20        subType = 
-00045af0: 4e6f 6e65 0a20 2020 2020 2020 2073 7562  None.        sub
-00045b00: 5479 7065 2c20 7061 7261 6d73 203d 2073  Type, params = s
-00045b10: 656c 662e 6861 6e64 6c65 5f73 7562 5f74  elf.handle_sub_t
-00045b20: 7970 655f 616e 645f 7061 7261 6d73 2827  ype_and_params('
-00045b30: 6665 7463 684d 7954 7261 6465 7327 2c20  fetchMyTrades', 
-00045b40: 6d61 726b 6574 2c20 7061 7261 6d73 2c20  market, params, 
-00045b50: 276c 696e 6561 7227 290a 2020 2020 2020  'linear').      
-00045b60: 2020 7265 7175 6573 745b 2763 6174 6567    request['categ
-00045b70: 6f72 7927 5d20 3d20 7375 6254 7970 650a  ory'] = subType.
-00045b80: 2020 2020 2020 2020 7365 7474 6c65 2c20          settle, 
-00045b90: 7061 7261 6d73 203d 2073 656c 662e 6861  params = self.ha
-00045ba0: 6e64 6c65 5f6f 7074 696f 6e5f 616e 645f  ndle_option_and_
-00045bb0: 7061 7261 6d73 2870 6172 616d 732c 2027  params(params, '
-00045bc0: 6361 6e63 656c 416c 6c4f 7264 6572 7327  cancelAllOrders'
-00045bd0: 2c20 2773 6574 746c 6527 2c20 7365 7474  , 'settle', sett
-00045be0: 6c65 290a 2020 2020 2020 2020 6966 2073  le).        if s
-00045bf0: 6574 746c 6520 6973 206e 6f74 204e 6f6e  ettle is not Non
-00045c00: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-00045c10: 6571 7565 7374 5b27 7365 7474 6c65 436f  equest['settleCo
-00045c20: 696e 275d 203d 2073 6574 746c 650a 2020  in'] = settle.  
-00045c30: 2020 2020 2020 6966 2073 696e 6365 2069        if since i
-00045c40: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00045c50: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-00045c60: 2773 7461 7274 5469 6d65 275d 203d 2073  'startTime'] = s
-00045c70: 696e 6365 0a20 2020 2020 2020 2069 6620  ince.        if 
-00045c80: 6c69 6d69 7420 6973 206e 6f74 204e 6f6e  limit is not Non
-00045c90: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-00045ca0: 6571 7565 7374 5b27 6c69 6d69 7427 5d20  equest['limit'] 
-00045cb0: 3d20 6c69 6d69 7420 2023 2064 6566 6175  = limit  # defau
-00045cc0: 6c74 2032 302c 206d 6178 2035 300a 2020  lt 20, max 50.  
-00045cd0: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
-00045ce0: 2061 7761 6974 2073 656c 662e 7072 6976   await self.priv
-00045cf0: 6174 6547 6574 556e 6966 6965 6456 3350  ateGetUnifiedV3P
-00045d00: 7269 7661 7465 4578 6563 7574 696f 6e4c  rivateExecutionL
-00045d10: 6973 7428 7365 6c66 2e65 7874 656e 6428  ist(self.extend(
-00045d20: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
-00045d30: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
-00045d40: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-00045d50: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-00045d60: 6574 436f 6465 223a 2030 2c0a 2020 2020  etCode": 0,.    
-00045d70: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-00045d80: 6574 4d73 6722 3a20 2253 7563 6365 7373  etMsg": "Success
-00045d90: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00045da0: 2020 2020 2022 7265 7375 6c74 223a 207b       "result": {
-00045db0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00045dc0: 2020 2020 2020 2022 6e65 7874 5061 6765         "nextPage
-00045dd0: 4375 7273 6f72 223a 2022 3135 3635 2533  Cursor": "1565%3
-00045de0: 4130 2532 4331 3536 3525 3341 3022 2c0a  A0%2C1565%3A0",.
-00045df0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00045e00: 2020 2020 2020 2263 6174 6567 6f72 7922        "category"
-00045e10: 3a20 226f 7074 696f 6e22 2c0a 2020 2020  : "option",.    
-00045e20: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00045e30: 2020 226c 6973 7422 3a20 5b0a 2020 2020    "list": [.    
-00045e40: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00045e50: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
-00045e60: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00045e70: 2020 2020 2020 226f 7264 6572 5479 7065        "orderType
-00045e80: 223a 2022 4c69 6d69 7422 2c0a 2020 2020  ": "Limit",.    
-00045e90: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00045ea0: 2020 2020 2020 2020 2020 2273 796d 626f            "symbo
-00045eb0: 6c22 3a20 2242 5443 2d31 344a 554c 3232  l": "BTC-14JUL22
-00045ec0: 2d31 3735 3030 2d43 222c 0a20 2020 2020  -17500-C",.     
-00045ed0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00045ee0: 2020 2020 2020 2020 2022 6f72 6465 724c           "orderL
-00045ef0: 696e 6b49 6422 3a20 2231 3838 3838 3936  inkId": "1888896
-00045f00: 3839 2d79 7561 6e7a 6865 6e2d 3535 3839  89-yuanzhen-5589
-00045f10: 3938 3939 3838 3939 222c 0a20 2020 2020  98998899",.     
-00045f20: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00045f30: 2020 2020 2020 2020 2022 7369 6465 223a           "side":
-00045f40: 2022 4275 7922 2c0a 2020 2020 2020 2020   "Buy",.        
-00045f50: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00045f60: 2020 2020 2020 226f 7264 6572 4964 223a        "orderId":
-00045f70: 2022 3039 6335 3833 3666 2d38 3165 662d   "09c5836f-81ef-
-00045f80: 3432 3038 2d61 3562 342d 3433 3133 3564  4208-a5b4-43135d
-00045f90: 3365 3032 6132 222c 0a20 2020 2020 2020  3e02a2",.       
-00045fa0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00045fb0: 2020 2020 2020 2022 6c65 6176 6573 5174         "leavesQt
-00045fc0: 7922 3a20 2230 2e30 3030 3022 2c0a 2020  y": "0.0000",.  
-00045fd0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00045fe0: 2020 2020 2020 2020 2020 2020 2265 7865              "exe
-00045ff0: 6354 696d 6522 3a20 3136 3537 3731 3431  cTime": 16577141
-00046000: 3232 3431 372c 0a20 2020 2020 2020 2023  22417,.        #
-00046010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046020: 2020 2020 2022 6578 6563 4665 6522 3a20       "execFee": 
-00046030: 2230 2e31 3138 3937 3038 3222 2c0a 2020  "0.11897082",.  
-00046040: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00046050: 2020 2020 2020 2020 2020 2020 2266 6565              "fee
-00046060: 5261 7465 223a 2022 302e 3030 3033 3030  Rate": "0.000300
-00046070: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00046080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046090: 2022 6578 6563 4964 223a 2022 3665 3439   "execId": "6e49
-000460a0: 3235 3630 2d37 3862 342d 3564 3262 2d62  2560-78b4-5d2b-b
-000460b0: 3333 312d 3232 3932 3164 3331 3733 6339  331-22921d3173c9
-000460c0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-000460d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000460e0: 2022 626c 6f63 6b54 7261 6465 4964 223a   "blockTradeId":
-000460f0: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
-00046100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046110: 2020 2022 6578 6563 5072 6963 6522 3a20     "execPrice": 
-00046120: 2232 3336 302e 3030 3030 3030 3030 222c  "2360.00000000",
-00046130: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00046140: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00046150: 6c61 7374 4c69 7175 6964 6974 7949 6e64  lastLiquidityInd
-00046160: 223a 2022 5441 4b45 5222 2c0a 2020 2020  ": "TAKER",.    
-00046170: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00046180: 2020 2020 2020 2020 2020 226f 7264 6572            "order
-00046190: 5174 7922 3a20 2230 2e30 3230 3022 2c0a  Qty": "0.0200",.
-000461a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000461b0: 2020 2020 2020 2020 2020 2020 2020 226f                "o
-000461c0: 7264 6572 5072 6963 6522 3a20 2232 3336  rderPrice": "236
-000461d0: 302e 3030 3030 3030 3030 222c 0a20 2020  0.00000000",.   
-000461e0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000461f0: 2020 2020 2020 2020 2020 2022 6578 6563             "exec
-00046200: 5661 6c75 6522 3a20 2234 372e 3230 3030  Value": "47.2000
-00046210: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
-00046220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046230: 2020 2020 2022 6578 6563 5479 7065 223a       "execType":
-00046240: 2022 5472 6164 6522 2c0a 2020 2020 2020   "Trade",.      
-00046250: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00046260: 2020 2020 2020 2020 2265 7865 6351 7479          "execQty
-00046270: 223a 2022 302e 3032 3030 220a 2020 2020  ": "0.0200".    
-00046280: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00046290: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-000462a0: 2320 2020 2020 2020 2020 2020 2020 5d0a  #             ].
-000462b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000462c0: 2020 7d2c 0a20 2020 2020 2020 2023 2020    },.        #  
-000462d0: 2020 2020 2020 2022 7469 6d65 223a 2031         "time": 1
-000462e0: 3635 3737 3134 3239 3237 3833 0a20 2020  657714292783.   
-000462f0: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
-00046300: 2020 2020 2023 0a20 2020 2020 2020 2072       #.        r
-00046310: 6573 756c 7420 3d20 7365 6c66 2e73 6166  esult = self.saf
-00046320: 655f 7661 6c75 6528 7265 7370 6f6e 7365  e_value(response
-00046330: 2c20 2772 6573 756c 7427 2c20 7b7d 290a  , 'result', {}).
-00046340: 2020 2020 2020 2020 7472 6164 6573 203d          trades =
-00046350: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-00046360: 2872 6573 756c 742c 2027 6c69 7374 272c  (result, 'list',
-00046370: 205b 5d29 0a20 2020 2020 2020 2072 6574   []).        ret
-00046380: 7572 6e20 7365 6c66 2e70 6172 7365 5f74  urn self.parse_t
-00046390: 7261 6465 7328 7472 6164 6573 2c20 6d61  rades(trades, ma
-000463a0: 726b 6574 2c20 7369 6e63 652c 206c 696d  rket, since, lim
-000463b0: 6974 290a 0a20 2020 2061 7379 6e63 2064  it)..    async d
-000463c0: 6566 2066 6574 6368 5f6d 795f 636f 6e74  ef fetch_my_cont
-000463d0: 7261 6374 5f74 7261 6465 7328 7365 6c66  ract_trades(self
-000463e0: 2c20 7379 6d62 6f6c 3a20 4f70 7469 6f6e  , symbol: Option
-000463f0: 616c 5b73 7472 5d20 3d20 4e6f 6e65 2c20  al[str] = None, 
-00046400: 7369 6e63 653a 204f 7074 696f 6e61 6c5b  since: Optional[
-00046410: 696e 745d 203d 204e 6f6e 652c 206c 696d  int] = None, lim
-00046420: 6974 3a20 4f70 7469 6f6e 616c 5b69 6e74  it: Optional[int
-00046430: 5d20 3d20 4e6f 6e65 2c20 7061 7261 6d73  ] = None, params
-00046440: 3d7b 7d29 3a0a 2020 2020 2020 2020 6966  ={}):.        if
-00046450: 2073 796d 626f 6c20 6973 204e 6f6e 653a   symbol is None:
-00046460: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-00046470: 7365 2041 7267 756d 656e 7473 5265 7175  se ArgumentsRequ
-00046480: 6972 6564 2873 656c 662e 6964 202b 2027  ired(self.id + '
-00046490: 2066 6574 6368 4d79 436f 6e74 7261 6374   fetchMyContract
-000464a0: 5472 6164 6573 2829 2072 6571 7569 7265  Trades() require
-000464b0: 7320 6120 7379 6d62 6f6c 2061 7267 756d  s a symbol argum
-000464c0: 656e 7427 290a 2020 2020 2020 2020 6177  ent').        aw
-000464d0: 6169 7420 7365 6c66 2e6c 6f61 645f 6d61  ait self.load_ma
-000464e0: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
-000464f0: 6d61 726b 6574 203d 204e 6f6e 650a 2020  market = None.  
-00046500: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-00046510: 7b0a 2020 2020 2020 2020 2020 2020 2320  {.            # 
-00046520: 2773 796d 626f 6c27 3a20 6d61 726b 6574  'symbol': market
-00046530: 5b27 6964 275d 2c0a 2020 2020 2020 2020  ['id'],.        
-00046540: 2020 2020 2320 2763 6174 6567 6f72 7927      # 'category'
-00046550: 3a20 2727 2c20 2023 2050 726f 6475 6374  : '',  # Product
-00046560: 2074 7970 652e 2073 706f 742c 6c69 6e65   type. spot,line
-00046570: 6172 2c6f 7074 696f 6e0a 2020 2020 2020  ar,option.      
-00046580: 2020 2020 2020 2320 276f 7264 6572 4964        # 'orderId
-00046590: 273a 2027 272c 2020 2320 4f72 6465 7220  ': '',  # Order 
-000465a0: 4944 0a20 2020 2020 2020 2020 2020 2023  ID.            #
-000465b0: 2027 6f72 6465 724c 696e 6b49 6427 3a20   'orderLinkId': 
-000465c0: 2727 2c20 2023 2055 7365 7220 6375 7374  '',  # User cust
-000465d0: 6f6d 6973 6564 206f 7264 6572 2049 440a  omised order ID.
-000465e0: 2020 2020 2020 2020 2020 2020 2320 2762              # 'b
-000465f0: 6173 6543 6f69 6e27 3a20 2727 2c20 2023  aseCoin': '',  #
-00046600: 2042 6173 6520 636f 696e 0a20 2020 2020   Base coin.     
-00046610: 2020 2020 2020 2023 2027 7374 6172 7454         # 'startT
-00046620: 696d 6527 3a20 302c 2020 2320 5468 6520  ime': 0,  # The 
-00046630: 7374 6172 7420 7469 6d65 7374 616d 7028  start timestamp(
-00046640: 6d73 290a 2020 2020 2020 2020 2020 2020  ms).            
-00046650: 2320 2765 6e64 5469 6d65 273a 2030 2c20  # 'endTime': 0, 
-00046660: 2023 2054 6865 2065 6e64 2074 696d 6573   # The end times
-00046670: 7461 6d70 286d 7329 0a20 2020 2020 2020  tamp(ms).       
-00046680: 2020 2020 2023 2027 6578 6563 5479 7065       # 'execType
-00046690: 273a 2027 272c 2020 2320 4578 6563 7574  ': '',  # Execut
-000466a0: 696f 6e20 7479 7065 0a20 2020 2020 2020  ion type.       
-000466b0: 2020 2020 2023 2027 6c69 6d69 7427 3a20       # 'limit': 
-000466c0: 302c 2020 2320 4c69 6d69 7420 666f 7220  0,  # Limit for 
-000466d0: 6461 7461 2073 697a 6520 7065 7220 7061  data size per pa
-000466e0: 6765 2e20 5b31 2c20 3130 305d 2e20 4465  ge. [1, 100]. De
-000466f0: 6661 756c 743a 2035 300a 2020 2020 2020  fault: 50.      
-00046700: 2020 2020 2020 2320 2763 7572 736f 7227        # 'cursor'
-00046710: 3a20 2727 2c20 2023 2043 7572 736f 722e  : '',  # Cursor.
-00046720: 2055 7365 6420 666f 7220 7061 6769 6e61   Used for pagina
-00046730: 7469 6f6e 0a20 2020 2020 2020 207d 0a20  tion.        }. 
-00046740: 2020 2020 2020 2069 6620 7379 6d62 6f6c         if symbol
-00046750: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00046760: 2020 2020 2020 2020 2020 6d61 726b 6574            market
-00046770: 203d 2073 656c 662e 6d61 726b 6574 2873   = self.market(s
-00046780: 796d 626f 6c29 0a20 2020 2020 2020 2020  ymbol).         
-00046790: 2020 2072 6571 7565 7374 5b27 7379 6d62     request['symb
-000467a0: 6f6c 275d 203d 206d 6172 6b65 745b 2769  ol'] = market['i
-000467b0: 6427 5d0a 2020 2020 2020 2020 7375 6254  d'].        subT
-000467c0: 7970 6520 3d20 4e6f 6e65 0a20 2020 2020  ype = None.     
-000467d0: 2020 2073 7562 5479 7065 2c20 7061 7261     subType, para
-000467e0: 6d73 203d 2073 656c 662e 6861 6e64 6c65  ms = self.handle
-000467f0: 5f73 7562 5f74 7970 655f 616e 645f 7061  _sub_type_and_pa
-00046800: 7261 6d73 2827 6665 7463 684d 7954 7261  rams('fetchMyTra
-00046810: 6465 7327 2c20 6d61 726b 6574 2c20 7061  des', market, pa
-00046820: 7261 6d73 290a 2020 2020 2020 2020 7265  rams).        re
-00046830: 7175 6573 745b 2763 6174 6567 6f72 7927  quest['category'
-00046840: 5d20 3d20 7375 6254 7970 650a 2020 2020  ] = subType.    
-00046850: 2020 2020 6966 2073 696e 6365 2069 7320      if since is 
-00046860: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00046870: 2020 2020 2020 7265 7175 6573 745b 2773        request['s
-00046880: 7461 7274 5469 6d65 275d 203d 2073 696e  tartTime'] = sin
-00046890: 6365 0a20 2020 2020 2020 2069 6620 6c69  ce.        if li
-000468a0: 6d69 7420 6973 206e 6f74 204e 6f6e 653a  mit is not None:
-000468b0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-000468c0: 7565 7374 5b27 6c69 6d69 7427 5d20 3d20  uest['limit'] = 
-000468d0: 6c69 6d69 7420 2023 2064 6566 6175 6c74  limit  # default
-000468e0: 2035 302c 206d 6178 2031 3030 0a20 2020   50, max 100.   
-000468f0: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
-00046900: 6177 6169 7420 7365 6c66 2e70 7269 7661  await self.priva
-00046910: 7465 4765 7456 3545 7865 6375 7469 6f6e  teGetV5Execution
-00046920: 4c69 7374 2873 656c 662e 6578 7465 6e64  List(self.extend
-00046930: 2872 6571 7565 7374 2c20 7061 7261 6d73  (request, params
-00046940: 2929 0a20 2020 2020 2020 2023 0a20 2020  )).        #.   
-00046950: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
-00046960: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00046970: 7265 7443 6f64 6522 3a20 302c 0a20 2020  retCode": 0,.   
-00046980: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00046990: 7265 744d 7367 223a 2022 4f4b 222c 0a20  retMsg": "OK",. 
-000469a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000469b0: 2022 7265 7375 6c74 223a 207b 0a20 2020   "result": {.   
-000469c0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000469d0: 2020 2022 6e65 7874 5061 6765 4375 7273     "nextPageCurs
-000469e0: 6f72 223a 2022 3133 3237 3636 2533 4132  or": "132766%3A2
-000469f0: 2532 4331 3332 3736 3625 3341 3222 2c0a  %2C132766%3A2",.
-00046a00: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00046a10: 2020 2020 2020 2263 6174 6567 6f72 7922        "category"
-00046a20: 3a20 226c 696e 6561 7222 2c0a 2020 2020  : "linear",.    
-00046a30: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00046a40: 2020 226c 6973 7422 3a20 5b0a 2020 2020    "list": [.    
-00046a50: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00046a60: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
-00046a70: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00046a80: 2020 2020 2020 2273 796d 626f 6c22 3a20        "symbol": 
-00046a90: 2245 5448 5045 5250 222c 0a20 2020 2020  "ETHPERP",.     
-00046aa0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00046ab0: 2020 2020 2020 2020 2022 6f72 6465 7254           "orderT
-00046ac0: 7970 6522 3a20 224d 6172 6b65 7422 2c0a  ype": "Market",.
-00046ad0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00046ae0: 2020 2020 2020 2020 2020 2020 2020 2275                "u
-00046af0: 6e64 6572 6c79 696e 6750 7269 6365 223a  nderlyingPrice":
-00046b00: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
-00046b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046b20: 2020 2022 6f72 6465 724c 696e 6b49 6422     "orderLinkId"
-00046b30: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
-00046b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046b50: 2020 2020 2273 6964 6522 3a20 2242 7579      "side": "Buy
-00046b60: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00046b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046b80: 2022 696e 6465 7850 7269 6365 223a 2022   "indexPrice": "
-00046b90: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00046ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046bb0: 2022 6f72 6465 7249 6422 3a20 2238 6330   "orderId": "8c0
-00046bc0: 3635 3334 312d 3762 3532 2d34 6361 392d  65341-7b52-4ca9-
-00046bd0: 6163 3263 2d33 3765 3331 6163 3535 6339  ac2c-37e31ac55c9
-00046be0: 3422 2c0a 2020 2020 2020 2020 2320 2020  4",.        #   
-00046bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046c00: 2020 2273 746f 704f 7264 6572 5479 7065    "stopOrderType
-00046c10: 223a 2022 554e 4b4e 4f57 4e22 2c0a 2020  ": "UNKNOWN",.  
-00046c20: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00046c30: 2020 2020 2020 2020 2020 2020 226c 6561              "lea
-00046c40: 7665 7351 7479 223a 2022 3022 2c0a 2020  vesQty": "0",.  
-00046c50: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00046c60: 2020 2020 2020 2020 2020 2020 2265 7865              "exe
-00046c70: 6354 696d 6522 3a20 2231 3637 3232 3832  cTime": "1672282
-00046c80: 3732 3234 3239 222c 0a20 2020 2020 2020  722429",.       
-00046c90: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00046ca0: 2020 2020 2020 2022 6973 4d61 6b65 7222         "isMaker"
-00046cb0: 3a20 4661 6c73 652c 0a20 2020 2020 2020  : False,.       
-00046cc0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00046cd0: 2020 2020 2020 2022 6578 6563 4665 6522         "execFee"
-00046ce0: 3a20 2230 2e30 3731 3430 3922 2c0a 2020  : "0.071409",.  
-00046cf0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00046d00: 2020 2020 2020 2020 2020 2020 2266 6565              "fee
-00046d10: 5261 7465 223a 2022 302e 3030 3036 222c  Rate": "0.0006",
-00046d20: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00046d30: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00046d40: 6578 6563 4964 223a 2022 6530 6362 6538  execId": "e0cbe8
-00046d50: 3164 2d30 6631 382d 3538 3636 2d39 3431  1d-0f18-5866-941
-00046d60: 352d 6366 3331 3962 3564 6162 3362 222c  5-cf319b5dab3b",
-00046d70: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00046d80: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00046d90: 7472 6164 6549 7622 3a20 2222 2c0a 2020  tradeIv": "",.  
-00046da0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00046db0: 2020 2020 2020 2020 2020 2020 2262 6c6f              "blo
-00046dc0: 636b 5472 6164 6549 6422 3a20 2222 2c0a  ckTradeId": "",.
-00046dd0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00046de0: 2020 2020 2020 2020 2020 2020 2020 226d                "m
-00046df0: 6172 6b50 7269 6365 223a 2022 3131 3833  arkPrice": "1183
-00046e00: 2e35 3422 2c0a 2020 2020 2020 2020 2320  .54",.        # 
-00046e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046e20: 2020 2020 2265 7865 6350 7269 6365 223a      "execPrice":
-00046e30: 2022 3131 3930 2e31 3522 2c0a 2020 2020   "1190.15",.    
-00046e40: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00046e50: 2020 2020 2020 2020 2020 226d 6172 6b49            "markI
-00046e60: 7622 3a20 2222 2c0a 2020 2020 2020 2020  v": "",.        
-00046e70: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00046e80: 2020 2020 2020 226f 7264 6572 5174 7922        "orderQty"
-00046e90: 3a20 2230 2e31 222c 0a20 2020 2020 2020  : "0.1",.       
-00046ea0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00046eb0: 2020 2020 2020 2022 6f72 6465 7250 7269         "orderPri
-00046ec0: 6365 223a 2022 3132 3336 2e39 222c 0a20  ce": "1236.9",. 
-00046ed0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00046ee0: 2020 2020 2020 2020 2020 2020 2022 6578               "ex
-00046ef0: 6563 5661 6c75 6522 3a20 2231 3139 2e30  ecValue": "119.0
-00046f00: 3135 222c 0a20 2020 2020 2020 2023 2020  15",.        #  
-00046f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046f20: 2020 2022 6578 6563 5479 7065 223a 2022     "execType": "
-00046f30: 5472 6164 6522 2c0a 2020 2020 2020 2020  Trade",.        
-00046f40: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00046f50: 2020 2020 2020 2265 7865 6351 7479 223a        "execQty":
-00046f60: 2022 302e 3122 0a20 2020 2020 2020 2023   "0.1".        #
-00046f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046f80: 207d 0a20 2020 2020 2020 2023 2020 2020   }.        #    
-00046f90: 2020 2020 2020 2020 205d 0a20 2020 2020           ].     
-00046fa0: 2020 2023 2020 2020 2020 2020 207d 2c0a     #         },.
-00046fb0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00046fc0: 2020 2272 6574 4578 7449 6e66 6f22 3a20    "retExtInfo": 
-00046fd0: 7b7d 2c0a 2020 2020 2020 2020 2320 2020  {},.        #   
-00046fe0: 2020 2020 2020 2274 696d 6522 3a20 3136        "time": 16
-00046ff0: 3732 3238 3337 3534 3531 300a 2020 2020  72283754510.    
-00047000: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
-00047010: 2020 2020 230a 2020 2020 2020 2020 7265      #.        re
-00047020: 7375 6c74 203d 2073 656c 662e 7361 6665  sult = self.safe
-00047030: 5f76 616c 7565 2872 6573 706f 6e73 652c  _value(response,
-00047040: 2027 7265 7375 6c74 272c 207b 7d29 0a20   'result', {}). 
-00047050: 2020 2020 2020 2074 7261 6465 7320 3d20         trades = 
-00047060: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
-00047070: 7265 7375 6c74 2c20 276c 6973 7427 2c20  result, 'list', 
-00047080: 5b5d 290a 2020 2020 2020 2020 7265 7475  []).        retu
-00047090: 726e 2073 656c 662e 7061 7273 655f 7472  rn self.parse_tr
-000470a0: 6164 6573 2874 7261 6465 732c 206d 6172  ades(trades, mar
-000470b0: 6b65 742c 2073 696e 6365 2c20 6c69 6d69  ket, since, limi
-000470c0: 7429 0a0a 2020 2020 6173 796e 6320 6465  t)..    async de
-000470d0: 6620 6665 7463 685f 6d79 5f75 7364 635f  f fetch_my_usdc_
-000470e0: 7472 6164 6573 2873 656c 662c 2073 796d  trades(self, sym
-000470f0: 626f 6c3a 204f 7074 696f 6e61 6c5b 7374  bol: Optional[st
-00047100: 725d 203d 204e 6f6e 652c 2073 696e 6365  r] = None, since
-00047110: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
-00047120: 3d20 4e6f 6e65 2c20 6c69 6d69 743a 204f  = None, limit: O
-00047130: 7074 696f 6e61 6c5b 696e 745d 203d 204e  ptional[int] = N
-00047140: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
-00047150: 0a20 2020 2020 2020 2061 7761 6974 2073  .        await s
-00047160: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
-00047170: 2829 0a20 2020 2020 2020 206d 6172 6b65  ().        marke
-00047180: 7420 3d20 4e6f 6e65 0a20 2020 2020 2020  t = None.       
-00047190: 2072 6571 7565 7374 203d 207b 7d0a 2020   request = {}.  
-000471a0: 2020 2020 2020 6966 2073 796d 626f 6c20        if symbol 
-000471b0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-000471c0: 2020 2020 2020 2020 206d 6172 6b65 7420           market 
-000471d0: 3d20 7365 6c66 2e6d 6172 6b65 7428 7379  = self.market(sy
-000471e0: 6d62 6f6c 290a 2020 2020 2020 2020 2020  mbol).          
-000471f0: 2020 7265 7175 6573 745b 2773 796d 626f    request['symbo
-00047200: 6c27 5d20 3d20 6d61 726b 6574 5b27 6964  l'] = market['id
-00047210: 275d 0a20 2020 2020 2020 2020 2020 2072  '].            r
-00047220: 6571 7565 7374 5b27 6361 7465 676f 7279  equest['category
-00047230: 275d 203d 2027 4f50 5449 4f4e 2720 6966  '] = 'OPTION' if
-00047240: 206d 6172 6b65 745b 276f 7074 696f 6e27   market['option'
-00047250: 5d20 656c 7365 2027 5045 5250 4554 5541  ] else 'PERPETUA
-00047260: 4c27 0a20 2020 2020 2020 2065 6c73 653a  L'.        else:
-00047270: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-00047280: 7565 7374 5b27 6361 7465 676f 7279 275d  uest['category']
-00047290: 203d 2027 5045 5250 4554 5541 4c27 0a20   = 'PERPETUAL'. 
-000472a0: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
-000472b0: 3d20 6177 6169 7420 7365 6c66 2e70 7269  = await self.pri
-000472c0: 7661 7465 506f 7374 4f70 7469 6f6e 5573  vatePostOptionUs
-000472d0: 6463 4f70 656e 6170 6950 7269 7661 7465  dcOpenapiPrivate
-000472e0: 5631 4578 6563 7574 696f 6e4c 6973 7428  V1ExecutionList(
-000472f0: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
-00047300: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
-00047310: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00047320: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
-00047330: 2320 2020 2020 2020 2272 6573 756c 7422  #       "result"
-00047340: 3a20 7b0a 2020 2020 2020 2020 2320 2020  : {.        #   
-00047350: 2020 2020 2020 2263 7572 736f 7222 3a20        "cursor": 
-00047360: 2232 3925 3341 3125 3243 3238 2533 4131  "29%3A1%2C28%3A1
-00047370: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00047380: 2020 2020 2022 7265 7375 6c74 546f 7461       "resultTota
-00047390: 6c53 697a 6522 3a20 322c 0a20 2020 2020  lSize": 2,.     
-000473a0: 2020 2023 2020 2020 2020 2020 2022 6461     #         "da
-000473b0: 7461 4c69 7374 223a 205b 0a20 2020 2020  taList": [.     
-000473c0: 2020 2023 2020 2020 2020 2020 2020 207b     #           {
-000473d0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000473e0: 2020 2020 2020 2022 7379 6d62 6f6c 223a         "symbol":
-000473f0: 2022 4554 4850 4552 5022 2c0a 2020 2020   "ETHPERP",.    
-00047400: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00047410: 2020 226f 7264 6572 4c69 6e6b 4964 223a    "orderLinkId":
-00047420: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
-00047430: 2020 2020 2020 2020 2020 2022 7369 6465             "side
-00047440: 223a 2022 5365 6c6c 222c 0a20 2020 2020  ": "Sell",.     
-00047450: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00047460: 2022 6f72 6465 7249 6422 3a20 2264 3833   "orderId": "d83
-00047470: 6638 6234 642d 3266 3630 2d34 6530 342d  f8b4d-2f60-4e04-
-00047480: 6136 3461 2d61 3366 3230 3739 3839 6463  a64a-a3f207989dc
-00047490: 3622 2c0a 2020 2020 2020 2020 2320 2020  6",.        #   
-000474a0: 2020 2020 2020 2020 2020 2265 7865 6346            "execF
-000474b0: 6565 223a 2022 302e 3032 3130 222c 0a20  ee": "0.0210",. 
-000474c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000474d0: 2020 2020 2022 6665 6552 6174 6522 3a20       "feeRate": 
-000474e0: 2230 2e30 3030 3630 3022 2c0a 2020 2020  "0.000600",.    
-000474f0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00047500: 2020 2262 6c6f 636b 5472 6164 6549 6422    "blockTradeId"
-00047510: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
-00047520: 2020 2020 2020 2020 2020 2020 2274 7261              "tra
-00047530: 6465 5469 6d65 223a 2022 3136 3639 3139  deTime": "166919
-00047540: 3634 3233 3538 3122 2c0a 2020 2020 2020  6423581",.      
-00047550: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00047560: 2265 7865 6350 7269 6365 223a 2022 3131  "execPrice": "11
-00047570: 3631 2e34 3522 2c0a 2020 2020 2020 2020  61.45",.        
-00047580: 2320 2020 2020 2020 2020 2020 2020 226c  #             "l
-00047590: 6173 744c 6971 7569 6469 7479 496e 6422  astLiquidityInd"
-000475a0: 3a20 2254 414b 4552 222c 0a20 2020 2020  : "TAKER",.     
-000475b0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-000475c0: 2022 6578 6563 5661 6c75 6522 3a20 2233   "execValue": "3
-000475d0: 342e 3834 3335 222c 0a20 2020 2020 2020  4.8435",.       
-000475e0: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-000475f0: 6578 6563 5479 7065 223a 2022 5472 6164  execType": "Trad
-00047600: 6522 2c0a 2020 2020 2020 2020 2320 2020  e",.        #   
-00047610: 2020 2020 2020 2020 2020 2265 7865 6351            "execQ
-00047620: 7479 223a 2022 302e 3033 3022 2c0a 2020  ty": "0.030",.  
-00047630: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00047640: 2020 2020 2274 7261 6465 4964 223a 2022      "tradeId": "
-00047650: 6439 6161 3835 3930 2d39 6536 612d 3537  d9aa8590-9e6a-57
-00047660: 3565 2d61 3162 652d 6436 3236 3165 3665  5e-a1be-d6261e6e
-00047670: 6432 6535 220a 2020 2020 2020 2020 2320  d2e5".        # 
-00047680: 2020 2020 2020 2020 2020 7d2c 202e 2e2e            }, ...
-00047690: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000476a0: 2020 205d 0a20 2020 2020 2020 2023 2020     ].        #  
-000476b0: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
-000476c0: 2320 2020 2020 2020 2272 6574 436f 6465  #       "retCode
-000476d0: 223a 2030 2c0a 2020 2020 2020 2020 2320  ": 0,.        # 
-000476e0: 2020 2020 2020 2272 6574 4d73 6722 3a20        "retMsg": 
-000476f0: 2253 7563 6365 7373 2e22 0a20 2020 2020  "Success.".     
-00047700: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
-00047710: 2020 2023 0a20 2020 2020 2020 2072 6573     #.        res
-00047720: 756c 7420 3d20 7365 6c66 2e73 6166 655f  ult = self.safe_
-00047730: 7661 6c75 6528 7265 7370 6f6e 7365 2c20  value(response, 
-00047740: 2772 6573 756c 7427 2c20 7b7d 290a 2020  'result', {}).  
-00047750: 2020 2020 2020 6461 7461 4c69 7374 203d        dataList =
-00047760: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-00047770: 2872 6573 756c 742c 2027 6461 7461 4c69  (result, 'dataLi
-00047780: 7374 272c 205b 5d29 0a20 2020 2020 2020  st', []).       
-00047790: 2072 6574 7572 6e20 7365 6c66 2e70 6172   return self.par
-000477a0: 7365 5f74 7261 6465 7328 6461 7461 4c69  se_trades(dataLi
-000477b0: 7374 2c20 6d61 726b 6574 2c20 7369 6e63  st, market, sinc
-000477c0: 652c 206c 696d 6974 290a 0a20 2020 2061  e, limit)..    a
-000477d0: 7379 6e63 2064 6566 2066 6574 6368 5f6d  sync def fetch_m
-000477e0: 795f 7472 6164 6573 2873 656c 662c 2073  y_trades(self, s
-000477f0: 796d 626f 6c3a 204f 7074 696f 6e61 6c5b  ymbol: Optional[
-00047800: 7374 725d 203d 204e 6f6e 652c 2073 696e  str] = None, sin
-00047810: 6365 3a20 4f70 7469 6f6e 616c 5b69 6e74  ce: Optional[int
-00047820: 5d20 3d20 4e6f 6e65 2c20 6c69 6d69 743a  ] = None, limit:
-00047830: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
-00047840: 204e 6f6e 652c 2070 6172 616d 733d 7b7d   None, params={}
-00047850: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
-00047860: 2020 2020 2020 2066 6574 6368 2061 6c6c         fetch all
-00047870: 2074 7261 6465 7320 6d61 6465 2062 7920   trades made by 
-00047880: 7468 6520 7573 6572 0a20 2020 2020 2020  the user.       
-00047890: 203a 7061 7261 6d20 7374 7220 7379 6d62   :param str symb
-000478a0: 6f6c 3a20 756e 6966 6965 6420 6d61 726b  ol: unified mark
-000478b0: 6574 2073 796d 626f 6c0a 2020 2020 2020  et symbol.      
-000478c0: 2020 3a70 6172 616d 2069 6e74 7c4e 6f6e    :param int|Non
-000478d0: 6520 7369 6e63 653a 2074 6865 2065 6172  e since: the ear
-000478e0: 6c69 6573 7420 7469 6d65 2069 6e20 6d73  liest time in ms
-000478f0: 2074 6f20 6665 7463 6820 7472 6164 6573   to fetch trades
-00047900: 2066 6f72 0a20 2020 2020 2020 203a 7061   for.        :pa
-00047910: 7261 6d20 696e 747c 4e6f 6e65 206c 696d  ram int|None lim
-00047920: 6974 3a20 7468 6520 6d61 7869 6d75 6d20  it: the maximum 
-00047930: 6e75 6d62 6572 206f 6620 7472 6164 6573  number of trades
-00047940: 2073 7472 7563 7475 7265 7320 746f 2072   structures to r
-00047950: 6574 7269 6576 650a 2020 2020 2020 2020  etrieve.        
-00047960: 3a70 6172 616d 2064 6963 7420 7061 7261  :param dict para
-00047970: 6d73 3a20 6578 7472 6120 7061 7261 6d65  ms: extra parame
-00047980: 7465 7273 2073 7065 6369 6669 6320 746f  ters specific to
-00047990: 2074 6865 2062 7962 6974 2061 7069 2065   the bybit api e
-000479a0: 6e64 706f 696e 740a 2020 2020 2020 2020  ndpoint.        
-000479b0: 3a72 6574 7572 6e73 205b 6469 6374 5d3a  :returns [dict]:
-000479c0: 2061 206c 6973 7420 6f66 2060 7472 6164   a list of `trad
-000479d0: 6520 7374 7275 6374 7572 6573 203c 6874  e structures <ht
-000479e0: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
-000479f0: 636f 6d2f 232f 3f69 643d 7472 6164 652d  com/#/?id=trade-
-00047a00: 7374 7275 6374 7572 653e 600a 2020 2020  structure>`.    
-00047a10: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00047a20: 6177 6169 7420 7365 6c66 2e6c 6f61 645f  await self.load_
-00047a30: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
-00047a40: 2020 6d61 726b 6574 203d 204e 6f6e 650a    market = None.
-00047a50: 2020 2020 2020 2020 7365 7474 6c65 203d          settle =
-00047a60: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-00047a70: 6728 7061 7261 6d73 2c20 2773 6574 746c  g(params, 'settl
-00047a80: 6543 6f69 6e27 290a 2020 2020 2020 2020  eCoin').        
-00047a90: 6966 2073 6574 746c 6520 6973 204e 6f6e  if settle is Non
-00047aa0: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
-00047ab0: 6574 746c 652c 2070 6172 616d 7320 3d20  ettle, params = 
-00047ac0: 7365 6c66 2e68 616e 646c 655f 6f70 7469  self.handle_opti
-00047ad0: 6f6e 5f61 6e64 5f70 6172 616d 7328 7061  on_and_params(pa
-00047ae0: 7261 6d73 2c20 2766 6574 6368 4d79 5472  rams, 'fetchMyTr
-00047af0: 6164 6573 272c 2027 7365 7474 6c65 272c  ades', 'settle',
-00047b00: 2073 6574 746c 6529 0a20 2020 2020 2020   settle).       
-00047b10: 2069 6620 7379 6d62 6f6c 2069 7320 6e6f   if symbol is no
-00047b20: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00047b30: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
-00047b40: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
-00047b50: 0a20 2020 2020 2020 2020 2020 2073 6574  .            set
-00047b60: 746c 6520 3d20 6d61 726b 6574 5b27 7365  tle = market['se
-00047b70: 7474 6c65 275d 0a20 2020 2020 2020 2073  ttle'].        s
-00047b80: 7562 5479 7065 203d 204e 6f6e 650a 2020  ubType = None.  
-00047b90: 2020 2020 2020 7375 6254 7970 652c 2070        subType, p
-00047ba0: 6172 616d 7320 3d20 7365 6c66 2e68 616e  arams = self.han
-00047bb0: 646c 655f 7375 625f 7479 7065 5f61 6e64  dle_sub_type_and
-00047bc0: 5f70 6172 616d 7328 2766 6574 6368 4d79  _params('fetchMy
-00047bd0: 5472 6164 6573 272c 206d 6172 6b65 742c  Trades', market,
-00047be0: 2070 6172 616d 7329 0a20 2020 2020 2020   params).       
-00047bf0: 2069 7349 6e76 6572 7365 203d 2073 7562   isInverse = sub
-00047c00: 5479 7065 203d 3d20 2769 6e76 6572 7365  Type == 'inverse
-00047c10: 270a 2020 2020 2020 2020 6973 5573 6463  '.        isUsdc
-00047c20: 5365 7474 6c65 6420 3d20 7365 7474 6c65  Settled = settle
-00047c30: 203d 3d20 2755 5344 4327 0a20 2020 2020   == 'USDC'.     
-00047c40: 2020 2069 734c 696e 6561 7253 6574 746c     isLinearSettl
-00047c50: 6520 3d20 6973 5573 6463 5365 7474 6c65  e = isUsdcSettle
-00047c60: 6420 6f72 2028 7365 7474 6c65 203d 3d20  d or (settle == 
-00047c70: 2755 5344 5427 290a 2020 2020 2020 2020  'USDT').        
-00047c80: 6966 2069 7349 6e76 6572 7365 2061 6e64  if isInverse and
-00047c90: 2069 734c 696e 6561 7253 6574 746c 653a   isLinearSettle:
-00047ca0: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-00047cb0: 7365 2041 7267 756d 656e 7473 5265 7175  se ArgumentsRequ
-00047cc0: 6972 6564 2873 656c 662e 6964 202b 2027  ired(self.id + '
-00047cd0: 2066 6574 6368 4d79 5472 6164 6573 2077   fetchMyTrades w
-00047ce0: 6974 6820 696e 7665 7273 6520 7375 6254  ith inverse subT
-00047cf0: 7970 6520 7265 7175 6972 6573 2073 6574  ype requires set
-00047d00: 746c 6520 746f 206e 6f74 2062 6520 5553  tle to not be US
-00047d10: 4454 206f 7220 5553 4443 2729 0a20 2020  DT or USDC').   
-00047d20: 2020 2020 2074 7970 652c 2071 7565 7279       type, query
-00047d30: 203d 2073 656c 662e 6861 6e64 6c65 5f6d   = self.handle_m
-00047d40: 6172 6b65 745f 7479 7065 5f61 6e64 5f70  arket_type_and_p
-00047d50: 6172 616d 7328 2766 6574 6368 4d79 5472  arams('fetchMyTr
-00047d60: 6164 6573 272c 206d 6172 6b65 742c 2070  ades', market, p
-00047d70: 6172 616d 7329 0a20 2020 2020 2020 2065  arams).        e
-00047d80: 6e61 626c 6555 6e69 6669 6564 4d61 7267  nableUnifiedMarg
-00047d90: 696e 2c20 656e 6162 6c65 556e 6966 6965  in, enableUnifie
-00047da0: 6441 6363 6f75 6e74 203d 2061 7761 6974  dAccount = await
-00047db0: 2073 656c 662e 6973 5f75 6e69 6669 6564   self.is_unified
-00047dc0: 5f65 6e61 626c 6564 2829 0a20 2020 2020  _enabled().     
-00047dd0: 2020 2069 6620 656e 6162 6c65 556e 6966     if enableUnif
-00047de0: 6965 6441 6363 6f75 6e74 2061 6e64 206e  iedAccount and n
-00047df0: 6f74 2069 7349 6e76 6572 7365 3a0a 2020  ot isInverse:.  
-00047e00: 2020 2020 2020 2020 2020 6f72 6465 7249            orderI
-00047e10: 6420 3d20 7365 6c66 2e73 6166 655f 7374  d = self.safe_st
-00047e20: 7269 6e67 2870 6172 616d 732c 2027 6f72  ring(params, 'or
-00047e30: 6465 7249 6427 290a 2020 2020 2020 2020  derId').        
-00047e40: 2020 2020 6966 206f 7264 6572 4964 2069      if orderId i
-00047e50: 7320 4e6f 6e65 2061 6e64 2074 7970 6520  s None and type 
-00047e60: 213d 2027 7370 6f74 273a 0a20 2020 2020  != 'spot':.     
-00047e70: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00047e80: 6368 6563 6b5f 7265 7175 6972 6564 5f73  check_required_s
-00047e90: 796d 626f 6c28 2766 6574 6368 4d79 5472  ymbol('fetchMyTr
-00047ea0: 6164 6573 272c 2073 796d 626f 6c29 0a20  ades', symbol). 
-00047eb0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00047ec0: 6e20 6177 6169 7420 7365 6c66 2e66 6574  n await self.fet
-00047ed0: 6368 5f6d 795f 756e 6966 6965 645f 7472  ch_my_unified_tr
-00047ee0: 6164 6573 2873 796d 626f 6c2c 2073 696e  ades(symbol, sin
-00047ef0: 6365 2c20 6c69 6d69 742c 2071 7565 7279  ce, limit, query
-00047f00: 290a 2020 2020 2020 2020 656c 6966 2074  ).        elif t
-00047f10: 7970 6520 3d3d 2027 7370 6f74 273a 0a20  ype == 'spot':. 
-00047f20: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00047f30: 6e20 6177 6169 7420 7365 6c66 2e66 6574  n await self.fet
-00047f40: 6368 5f6d 795f 7370 6f74 5f74 7261 6465  ch_my_spot_trade
-00047f50: 7328 7379 6d62 6f6c 2c20 7369 6e63 652c  s(symbol, since,
-00047f60: 206c 696d 6974 2c20 7175 6572 7929 0a20   limit, query). 
-00047f70: 2020 2020 2020 2065 6c69 6620 656e 6162         elif enab
-00047f80: 6c65 556e 6966 6965 644d 6172 6769 6e20  leUnifiedMargin 
-00047f90: 616e 6420 6e6f 7420 6973 496e 7665 7273  and not isInvers
-00047fa0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-00047fb0: 6574 7572 6e20 6177 6169 7420 7365 6c66  eturn await self
-00047fc0: 2e66 6574 6368 5f6d 795f 756e 6966 6965  .fetch_my_unifie
-00047fd0: 645f 6d61 7267 696e 5f74 7261 6465 7328  d_margin_trades(
-00047fe0: 7379 6d62 6f6c 2c20 7369 6e63 652c 206c  symbol, since, l
-00047ff0: 696d 6974 2c20 7175 6572 7929 0a20 2020  imit, query).   
-00048000: 2020 2020 2065 6c69 6620 6973 5573 6463       elif isUsdc
-00048010: 5365 7474 6c65 643a 0a20 2020 2020 2020  Settled:.       
-00048020: 2020 2020 2072 6574 7572 6e20 6177 6169       return awai
-00048030: 7420 7365 6c66 2e66 6574 6368 5f6d 795f  t self.fetch_my_
-00048040: 7573 6463 5f74 7261 6465 7328 7379 6d62  usdc_trades(symb
-00048050: 6f6c 2c20 7369 6e63 652c 206c 696d 6974  ol, since, limit
-00048060: 2c20 7175 6572 7929 0a20 2020 2020 2020  , query).       
-00048070: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00048080: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
-00048090: 7365 6c66 2e66 6574 6368 5f6d 795f 636f  self.fetch_my_co
-000480a0: 6e74 7261 6374 5f74 7261 6465 7328 7379  ntract_trades(sy
-000480b0: 6d62 6f6c 2c20 7369 6e63 652c 206c 696d  mbol, since, lim
-000480c0: 6974 2c20 7175 6572 7929 0a0a 2020 2020  it, query)..    
-000480d0: 6465 6620 7061 7273 655f 6465 706f 7369  def parse_deposi
-000480e0: 745f 6164 6472 6573 7328 7365 6c66 2c20  t_address(self, 
-000480f0: 6465 706f 7369 7441 6464 7265 7373 2c20  depositAddress, 
-00048100: 6375 7272 656e 6379 3d4e 6f6e 6529 3a0a  currency=None):.
-00048110: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-00048120: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
-00048130: 2020 2320 2020 2020 2020 2020 6368 6169    #         chai
-00048140: 6e54 7970 653a 2027 4552 4332 3027 2c0a  nType: 'ERC20',.
-00048150: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00048160: 2020 6164 6472 6573 7344 6570 6f73 6974    addressDeposit
-00048170: 3a20 2730 7866 3536 3239 3763 3637 3137  : '0xf56297c6717
-00048180: 6331 6431 6334 3263 3330 3332 3434 3638  c1d1c42c30324468
-00048190: 6564 3530 6139 6237 3430 3265 6527 2c0a  ed50a9b7402ee',.
-000481a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000481b0: 2020 7461 6744 6570 6f73 6974 3a20 2727    tagDeposit: ''
-000481c0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-000481d0: 2020 2020 6368 6169 6e3a 2027 4554 4827      chain: 'ETH'
-000481e0: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
-000481f0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00048200: 2020 2061 6464 7265 7373 203d 2073 656c     address = sel
-00048210: 662e 7361 6665 5f73 7472 696e 6728 6465  f.safe_string(de
-00048220: 706f 7369 7441 6464 7265 7373 2c20 2761  positAddress, 'a
-00048230: 6464 7265 7373 4465 706f 7369 7427 290a  ddressDeposit').
-00048240: 2020 2020 2020 2020 7461 6720 3d20 7365          tag = se
-00048250: 6c66 2e73 6166 655f 7374 7269 6e67 2864  lf.safe_string(d
-00048260: 6570 6f73 6974 4164 6472 6573 732c 2027  epositAddress, '
-00048270: 7461 6744 6570 6f73 6974 2729 0a20 2020  tagDeposit').   
-00048280: 2020 2020 2063 6f64 6520 3d20 7365 6c66       code = self
-00048290: 2e73 6166 655f 7374 7269 6e67 2863 7572  .safe_string(cur
-000482a0: 7265 6e63 792c 2027 636f 6465 2729 0a20  rency, 'code'). 
-000482b0: 2020 2020 2020 2063 6861 696e 203d 2073         chain = s
-000482c0: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
-000482d0: 6465 706f 7369 7441 6464 7265 7373 2c20  depositAddress, 
-000482e0: 2763 6861 696e 2729 0a20 2020 2020 2020  'chain').       
-000482f0: 2073 656c 662e 6368 6563 6b5f 6164 6472   self.check_addr
-00048300: 6573 7328 6164 6472 6573 7329 0a20 2020  ess(address).   
-00048310: 2020 2020 2072 6574 7572 6e20 7b0a 2020       return {.  
-00048320: 2020 2020 2020 2020 2020 2763 7572 7265            'curre
-00048330: 6e63 7927 3a20 636f 6465 2c0a 2020 2020  ncy': code,.    
-00048340: 2020 2020 2020 2020 2761 6464 7265 7373          'address
-00048350: 273a 2061 6464 7265 7373 2c0a 2020 2020  ': address,.    
-00048360: 2020 2020 2020 2020 2774 6167 273a 2074          'tag': t
-00048370: 6167 2c0a 2020 2020 2020 2020 2020 2020  ag,.            
-00048380: 276e 6574 776f 726b 273a 2063 6861 696e  'network': chain
-00048390: 2c0a 2020 2020 2020 2020 2020 2020 2769  ,.            'i
-000483a0: 6e66 6f27 3a20 6465 706f 7369 7441 6464  nfo': depositAdd
-000483b0: 7265 7373 2c0a 2020 2020 2020 2020 7d0a  ress,.        }.
-000483c0: 0a20 2020 2061 7379 6e63 2064 6566 2066  .    async def f
-000483d0: 6574 6368 5f64 6570 6f73 6974 5f61 6464  etch_deposit_add
-000483e0: 7265 7373 6573 5f62 795f 6e65 7477 6f72  resses_by_networ
-000483f0: 6b28 7365 6c66 2c20 636f 6465 3a20 7374  k(self, code: st
-00048400: 722c 2070 6172 616d 733d 7b7d 293a 0a20  r, params={}):. 
-00048410: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00048420: 2020 2066 6574 6368 2061 2064 6963 7469     fetch a dicti
-00048430: 6f6e 6172 7920 6f66 2061 6464 7265 7373  onary of address
-00048440: 6573 2066 6f72 2061 2063 7572 7265 6e63  es for a currenc
-00048450: 792c 2069 6e64 6578 6564 2062 7920 6e65  y, indexed by ne
-00048460: 7477 6f72 6b0a 2020 2020 2020 2020 7365  twork.        se
-00048470: 6520 6874 7470 733a 2f2f 6279 6269 742d  e https://bybit-
-00048480: 6578 6368 616e 6765 2e67 6974 6875 622e  exchange.github.
-00048490: 696f 2f64 6f63 732f 7635 2f61 7373 6574  io/docs/v5/asset
-000484a0: 2f6d 6173 7465 722d 6465 706f 7369 742d  /master-deposit-
-000484b0: 6164 6472 0a20 2020 2020 2020 203a 7061  addr.        :pa
-000484c0: 7261 6d20 7374 7220 636f 6465 3a20 756e  ram str code: un
-000484d0: 6966 6965 6420 6375 7272 656e 6379 2063  ified currency c
-000484e0: 6f64 6520 6f66 2074 6865 2063 7572 7265  ode of the curre
-000484f0: 6e63 7920 666f 7220 7468 6520 6465 706f  ncy for the depo
-00048500: 7369 7420 6164 6472 6573 730a 2020 2020  sit address.    
-00048510: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
-00048520: 7061 7261 6d73 3a20 6578 7472 6120 7061  params: extra pa
-00048530: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
-00048540: 6320 746f 2074 6865 2062 7962 6974 2061  c to the bybit a
-00048550: 7069 2065 6e64 706f 696e 740a 2020 2020  pi endpoint.    
-00048560: 2020 2020 3a72 6574 7572 6e73 2064 6963      :returns dic
-00048570: 743a 2061 2064 6963 7469 6f6e 6172 7920  t: a dictionary 
-00048580: 6f66 2060 6164 6472 6573 7320 7374 7275  of `address stru
-00048590: 6374 7572 6573 203c 6874 7470 733a 2f2f  ctures <https://
-000485a0: 646f 6373 2e63 6378 742e 636f 6d2f 232f  docs.ccxt.com/#/
-000485b0: 3f69 643d 6164 6472 6573 732d 7374 7275  ?id=address-stru
-000485c0: 6374 7572 653e 6020 696e 6465 7865 6420  cture>` indexed 
-000485d0: 6279 2074 6865 206e 6574 776f 726b 0a20  by the network. 
-000485e0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-000485f0: 2020 2061 7761 6974 2073 656c 662e 6c6f     await self.lo
-00048600: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
-00048610: 2020 2020 2063 7572 7265 6e63 7920 3d20       currency = 
-00048620: 7365 6c66 2e63 7572 7265 6e63 7928 636f  self.currency(co
-00048630: 6465 290a 2020 2020 2020 2020 7265 7175  de).        requ
-00048640: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
-00048650: 2020 2020 2763 6f69 6e27 3a20 6375 7272      'coin': curr
-00048660: 656e 6379 5b27 6964 275d 2c0a 2020 2020  ency['id'],.    
-00048670: 2020 2020 7d0a 2020 2020 2020 2020 7265      }.        re
-00048680: 7370 6f6e 7365 203d 2061 7761 6974 2073  sponse = await s
-00048690: 656c 662e 7072 6976 6174 6547 6574 5635  elf.privateGetV5
-000486a0: 4173 7365 7444 6570 6f73 6974 5175 6572  AssetDepositQuer
-000486b0: 7941 6464 7265 7373 2873 656c 662e 6578  yAddress(self.ex
-000486c0: 7465 6e64 2872 6571 7565 7374 2c20 7061  tend(request, pa
-000486d0: 7261 6d73 2929 0a20 2020 2020 2020 2023  rams)).        #
-000486e0: 0a20 2020 2020 2020 2023 2020 2020 207b  .        #     {
-000486f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00048700: 2020 2022 7265 7443 6f64 6522 3a20 302c     "retCode": 0,
-00048710: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00048720: 2020 2022 7265 744d 7367 223a 2022 7375     "retMsg": "su
-00048730: 6363 6573 7322 2c0a 2020 2020 2020 2020  ccess",.        
-00048740: 2320 2020 2020 2020 2020 2272 6573 756c  #         "resul
-00048750: 7422 3a20 7b0a 2020 2020 2020 2020 2320  t": {.        # 
-00048760: 2020 2020 2020 2020 2020 2020 2263 6f69              "coi
-00048770: 6e22 3a20 2255 5344 5422 2c0a 2020 2020  n": "USDT",.    
-00048780: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00048790: 2020 2263 6861 696e 7322 3a20 5b0a 2020    "chains": [.  
-000487a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000487b0: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
-000487c0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000487d0: 2020 2020 2020 2020 2263 6861 696e 5479          "chainTy
-000487e0: 7065 223a 2022 4552 4332 3022 2c0a 2020  pe": "ERC20",.  
-000487f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00048800: 2020 2020 2020 2020 2020 2020 2261 6464              "add
-00048810: 7265 7373 4465 706f 7369 7422 3a20 2230  ressDeposit": "0
-00048820: 7864 3965 3163 6437 3761 6661 3065 3530  xd9e1cd77afa0e50
-00048830: 6234 3532 6136 3266 6262 3638 6133 3334  b452a62fbb68a334
-00048840: 3036 3032 3238 3663 3322 2c0a 2020 2020  0602286c3",.    
-00048850: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00048860: 2020 2020 2020 2020 2020 2274 6167 4465            "tagDe
-00048870: 706f 7369 7422 3a20 2222 2c0a 2020 2020  posit": "",.    
-00048880: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00048890: 2020 2020 2020 2020 2020 2263 6861 696e            "chain
-000488a0: 223a 2022 4554 4822 0a20 2020 2020 2020  ": "ETH".       
-000488b0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-000488c0: 2020 207d 0a20 2020 2020 2020 2023 2020     }.        #  
-000488d0: 2020 2020 2020 2020 2020 205d 0a20 2020             ].   
-000488e0: 2020 2020 2023 2020 2020 2020 2020 207d       #         }
-000488f0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00048900: 2020 2020 2272 6574 4578 7449 6e66 6f22      "retExtInfo"
-00048910: 3a20 7b7d 2c0a 2020 2020 2020 2020 2320  : {},.        # 
-00048920: 2020 2020 2020 2020 2274 696d 6522 3a20          "time": 
-00048930: 3136 3732 3139 3237 3932 3836 300a 2020  1672192792860.  
-00048940: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
-00048950: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00048960: 7265 7375 6c74 203d 2073 656c 662e 7361  result = self.sa
-00048970: 6665 5f76 616c 7565 2872 6573 706f 6e73  fe_value(respons
-00048980: 652c 2027 7265 7375 6c74 272c 205b 5d29  e, 'result', [])
-00048990: 0a20 2020 2020 2020 2063 6861 696e 7320  .        chains 
-000489a0: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-000489b0: 6528 7265 7375 6c74 2c20 2763 6861 696e  e(result, 'chain
-000489c0: 7327 2c20 5b5d 290a 2020 2020 2020 2020  s', []).        
-000489d0: 636f 696e 203d 2073 656c 662e 7361 6665  coin = self.safe
-000489e0: 5f73 7472 696e 6728 7265 7375 6c74 2c20  _string(result, 
-000489f0: 2763 6f69 6e27 290a 2020 2020 2020 2020  'coin').        
-00048a00: 6375 7272 656e 6379 203d 2073 656c 662e  currency = self.
-00048a10: 6375 7272 656e 6379 2863 6f69 6e29 0a20  currency(coin). 
-00048a20: 2020 2020 2020 2070 6172 7365 6420 3d20         parsed = 
-00048a30: 7365 6c66 2e70 6172 7365 5f64 6570 6f73  self.parse_depos
-00048a40: 6974 5f61 6464 7265 7373 6573 2863 6861  it_addresses(cha
-00048a50: 696e 732c 205b 6375 7272 656e 6379 5b27  ins, [currency['
-00048a60: 636f 6465 275d 5d2c 2046 616c 7365 2c20  code']], False, 
-00048a70: 7b0a 2020 2020 2020 2020 2020 2020 2763  {.            'c
-00048a80: 7572 7265 6e63 7927 3a20 6375 7272 656e  urrency': curren
-00048a90: 6379 5b27 6964 275d 2c0a 2020 2020 2020  cy['id'],.      
-00048aa0: 2020 7d29 0a20 2020 2020 2020 2072 6574    }).        ret
-00048ab0: 7572 6e20 7365 6c66 2e69 6e64 6578 5f62  urn self.index_b
-00048ac0: 7928 7061 7273 6564 2c20 276e 6574 776f  y(parsed, 'netwo
-00048ad0: 726b 2729 0a0a 2020 2020 6173 796e 6320  rk')..    async 
-00048ae0: 6465 6620 6665 7463 685f 6465 706f 7369  def fetch_deposi
-00048af0: 745f 6164 6472 6573 7328 7365 6c66 2c20  t_address(self, 
-00048b00: 636f 6465 3a20 7374 722c 2070 6172 616d  code: str, param
-00048b10: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
-00048b20: 2222 0a20 2020 2020 2020 2066 6574 6368  "".        fetch
-00048b30: 2074 6865 2064 6570 6f73 6974 2061 6464   the deposit add
-00048b40: 7265 7373 2066 6f72 2061 2063 7572 7265  ress for a curre
-00048b50: 6e63 7920 6173 736f 6369 6174 6564 2077  ncy associated w
-00048b60: 6974 6820 7365 6c66 2061 6363 6f75 6e74  ith self account
-00048b70: 0a20 2020 2020 2020 2073 6565 2068 7474  .        see htt
-00048b80: 7073 3a2f 2f62 7962 6974 2d65 7863 6861  ps://bybit-excha
-00048b90: 6e67 652e 6769 7468 7562 2e69 6f2f 646f  nge.github.io/do
-00048ba0: 6373 2f76 352f 6173 7365 742f 6d61 7374  cs/v5/asset/mast
-00048bb0: 6572 2d64 6570 6f73 6974 2d61 6464 720a  er-deposit-addr.
-00048bc0: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-00048bd0: 7472 2063 6f64 653a 2075 6e69 6669 6564  tr code: unified
-00048be0: 2063 7572 7265 6e63 7920 636f 6465 0a20   currency code. 
-00048bf0: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
-00048c00: 6374 2070 6172 616d 733a 2065 7874 7261  ct params: extra
-00048c10: 2070 6172 616d 6574 6572 7320 7370 6563   parameters spec
-00048c20: 6966 6963 2074 6f20 7468 6520 6279 6269  ific to the bybi
-00048c30: 7420 6170 6920 656e 6470 6f69 6e74 0a20  t api endpoint. 
-00048c40: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
-00048c50: 6469 6374 3a20 616e 2060 6164 6472 6573  dict: an `addres
-00048c60: 7320 7374 7275 6374 7572 6520 3c68 7474  s structure <htt
-00048c70: 7073 3a2f 2f64 6f63 732e 6363 7874 2e63  ps://docs.ccxt.c
-00048c80: 6f6d 2f23 2f3f 6964 3d61 6464 7265 7373  om/#/?id=address
-00048c90: 2d73 7472 7563 7475 7265 3e60 0a20 2020  -structure>`.   
-00048ca0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00048cb0: 2061 7761 6974 2073 656c 662e 6c6f 6164   await self.load
-00048cc0: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
-00048cd0: 2020 206e 6574 776f 726b 436f 6465 2c20     networkCode, 
-00048ce0: 7175 6572 7920 3d20 7365 6c66 2e68 616e  query = self.han
-00048cf0: 646c 655f 6e65 7477 6f72 6b5f 636f 6465  dle_network_code
-00048d00: 5f61 6e64 5f70 6172 616d 7328 7061 7261  _and_params(para
-00048d10: 6d73 290a 2020 2020 2020 2020 6e65 7477  ms).        netw
-00048d20: 6f72 6b49 6420 3d20 7365 6c66 2e6e 6574  orkId = self.net
-00048d30: 776f 726b 5f63 6f64 655f 746f 5f69 6428  work_code_to_id(
-00048d40: 6e65 7477 6f72 6b43 6f64 6529 0a20 2020  networkCode).   
-00048d50: 2020 2020 2063 7572 7265 6e63 7920 3d20       currency = 
-00048d60: 7365 6c66 2e63 7572 7265 6e63 7928 636f  self.currency(co
-00048d70: 6465 290a 2020 2020 2020 2020 7265 7175  de).        requ
-00048d80: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
-00048d90: 2020 2020 2763 6f69 6e27 3a20 6375 7272      'coin': curr
-00048da0: 656e 6379 5b27 6964 275d 2c0a 2020 2020  ency['id'],.    
-00048db0: 2020 2020 7d0a 2020 2020 2020 2020 6966      }.        if
-00048dc0: 206e 6574 776f 726b 4964 2069 7320 6e6f   networkId is no
-00048dd0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00048de0: 2020 2020 7265 7175 6573 745b 2763 6861      request['cha
-00048df0: 696e 5479 7065 275d 203d 206e 6574 776f  inType'] = netwo
-00048e00: 726b 4964 0a20 2020 2020 2020 2072 6573  rkId.        res
-00048e10: 706f 6e73 6520 3d20 6177 6169 7420 7365  ponse = await se
-00048e20: 6c66 2e70 7269 7661 7465 4765 7456 3541  lf.privateGetV5A
-00048e30: 7373 6574 4465 706f 7369 7451 7565 7279  ssetDepositQuery
-00048e40: 4164 6472 6573 7328 7365 6c66 2e65 7874  Address(self.ext
-00048e50: 656e 6428 7265 7175 6573 742c 2071 7565  end(request, que
-00048e60: 7279 2929 0a20 2020 2020 2020 2023 0a20  ry)).        #. 
-00048e70: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
-00048e80: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00048e90: 2022 7265 7443 6f64 6522 3a20 302c 0a20   "retCode": 0,. 
-00048ea0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00048eb0: 2022 7265 744d 7367 223a 2022 7375 6363   "retMsg": "succ
-00048ec0: 6573 7322 2c0a 2020 2020 2020 2020 2320  ess",.        # 
-00048ed0: 2020 2020 2020 2020 2272 6573 756c 7422          "result"
-00048ee0: 3a20 7b0a 2020 2020 2020 2020 2320 2020  : {.        #   
-00048ef0: 2020 2020 2020 2020 2020 2263 6f69 6e22            "coin"
-00048f00: 3a20 2255 5344 5422 2c0a 2020 2020 2020  : "USDT",.      
-00048f10: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00048f20: 2263 6861 696e 7322 3a20 5b0a 2020 2020  "chains": [.    
-00048f30: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00048f40: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
-00048f50: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00048f60: 2020 2020 2020 2263 6861 696e 5479 7065        "chainType
-00048f70: 223a 2022 4552 4332 3022 2c0a 2020 2020  ": "ERC20",.    
-00048f80: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00048f90: 2020 2020 2020 2020 2020 2261 6464 7265            "addre
-00048fa0: 7373 4465 706f 7369 7422 3a20 2230 7864  ssDeposit": "0xd
-00048fb0: 3965 3163 6437 3761 6661 3065 3530 6234  9e1cd77afa0e50b4
-00048fc0: 3532 6136 3266 6262 3638 6133 3334 3036  52a62fbb68a33406
-00048fd0: 3032 3238 3663 3322 2c0a 2020 2020 2020  02286c3",.      
-00048fe0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00048ff0: 2020 2020 2020 2020 2274 6167 4465 706f          "tagDepo
-00049000: 7369 7422 3a20 2222 2c0a 2020 2020 2020  sit": "",.      
-00049010: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00049020: 2020 2020 2020 2020 2263 6861 696e 223a          "chain":
-00049030: 2022 4554 4822 0a20 2020 2020 2020 2023   "ETH".        #
-00049040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00049050: 207d 0a20 2020 2020 2020 2023 2020 2020   }.        #    
-00049060: 2020 2020 2020 2020 205d 0a20 2020 2020           ].     
-00049070: 2020 2023 2020 2020 2020 2020 207d 2c0a     #         },.
-00049080: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00049090: 2020 2272 6574 4578 7449 6e66 6f22 3a20    "retExtInfo": 
-000490a0: 7b7d 2c0a 2020 2020 2020 2020 2320 2020  {},.        #   
-000490b0: 2020 2020 2020 2274 696d 6522 3a20 3136        "time": 16
-000490c0: 3732 3139 3237 3932 3836 300a 2020 2020  72192792860.    
-000490d0: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
-000490e0: 2020 2020 230a 2020 2020 2020 2020 7265      #.        re
-000490f0: 7375 6c74 203d 2073 656c 662e 7361 6665  sult = self.safe
-00049100: 5f76 616c 7565 2872 6573 706f 6e73 652c  _value(response,
-00049110: 2027 7265 7375 6c74 272c 207b 7d29 0a20   'result', {}). 
-00049120: 2020 2020 2020 2063 6861 696e 7320 3d20         chains = 
-00049130: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
-00049140: 7265 7375 6c74 2c20 2763 6861 696e 7327  result, 'chains'
-00049150: 2c20 5b5d 290a 2020 2020 2020 2020 6368  , []).        ch
-00049160: 6169 6e73 496e 6465 7865 6442 7949 6420  ainsIndexedById 
-00049170: 3d20 7365 6c66 2e69 6e64 6578 5f62 7928  = self.index_by(
-00049180: 6368 6169 6e73 2c20 2763 6861 696e 2729  chains, 'chain')
-00049190: 0a20 2020 2020 2020 2073 656c 6563 7465  .        selecte
-000491a0: 644e 6574 776f 726b 4964 203d 2073 656c  dNetworkId = sel
-000491b0: 662e 7365 6c65 6374 5f6e 6574 776f 726b  f.select_network
-000491c0: 5f69 645f 6672 6f6d 5f72 6177 5f6e 6574  _id_from_raw_net
-000491d0: 776f 726b 7328 636f 6465 2c20 6e65 7477  works(code, netw
-000491e0: 6f72 6b43 6f64 652c 2063 6861 696e 7349  orkCode, chainsI
-000491f0: 6e64 6578 6564 4279 4964 290a 2020 2020  ndexedById).    
-00049200: 2020 2020 6164 6472 6573 734f 626a 6563      addressObjec
-00049210: 7420 3d20 7365 6c66 2e73 6166 655f 7661  t = self.safe_va
-00049220: 6c75 6528 6368 6169 6e73 496e 6465 7865  lue(chainsIndexe
-00049230: 6442 7949 642c 2073 656c 6563 7465 644e  dById, selectedN
-00049240: 6574 776f 726b 4964 2c20 7b7d 290a 2020  etworkId, {}).  
-00049250: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00049260: 662e 7061 7273 655f 6465 706f 7369 745f  f.parse_deposit_
-00049270: 6164 6472 6573 7328 6164 6472 6573 734f  address(addressO
-00049280: 626a 6563 742c 2063 7572 7265 6e63 7929  bject, currency)
-00049290: 0a0a 2020 2020 6173 796e 6320 6465 6620  ..    async def 
-000492a0: 6665 7463 685f 6465 706f 7369 7473 2873  fetch_deposits(s
-000492b0: 656c 662c 2063 6f64 653a 204f 7074 696f  elf, code: Optio
-000492c0: 6e61 6c5b 7374 725d 203d 204e 6f6e 652c  nal[str] = None,
-000492d0: 2073 696e 6365 3a20 4f70 7469 6f6e 616c   since: Optional
-000492e0: 5b69 6e74 5d20 3d20 4e6f 6e65 2c20 6c69  [int] = None, li
-000492f0: 6d69 743a 204f 7074 696f 6e61 6c5b 696e  mit: Optional[in
-00049300: 745d 203d 204e 6f6e 652c 2070 6172 616d  t] = None, param
-00049310: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
-00049320: 2222 0a20 2020 2020 2020 2066 6574 6368  "".        fetch
-00049330: 2061 6c6c 2064 6570 6f73 6974 7320 6d61   all deposits ma
-00049340: 6465 2074 6f20 616e 2061 6363 6f75 6e74  de to an account
-00049350: 0a20 2020 2020 2020 2073 6565 2068 7474  .        see htt
-00049360: 7073 3a2f 2f62 7962 6974 2d65 7863 6861  ps://bybit-excha
-00049370: 6e67 652e 6769 7468 7562 2e69 6f2f 646f  nge.github.io/do
-00049380: 6373 2f76 352f 6173 7365 742f 6465 706f  cs/v5/asset/depo
-00049390: 7369 742d 7265 636f 7264 0a20 2020 2020  sit-record.     
-000493a0: 2020 203a 7061 7261 6d20 7374 727c 4e6f     :param str|No
-000493b0: 6e65 2063 6f64 653a 2075 6e69 6669 6564  ne code: unified
-000493c0: 2063 7572 7265 6e63 7920 636f 6465 0a20   currency code. 
-000493d0: 2020 2020 2020 203a 7061 7261 6d20 696e         :param in
-000493e0: 747c 4e6f 6e65 2073 696e 6365 3a20 7468  t|None since: th
-000493f0: 6520 6561 726c 6965 7374 2074 696d 6520  e earliest time 
-00049400: 696e 206d 7320 746f 2066 6574 6368 2064  in ms to fetch d
-00049410: 6570 6f73 6974 7320 666f 722c 2064 6566  eposits for, def
-00049420: 6175 6c74 203d 2033 3020 6461 7973 2062  ault = 30 days b
-00049430: 6566 6f72 6520 7468 6520 6375 7272 656e  efore the curren
-00049440: 7420 7469 6d65 0a20 2020 2020 2020 203a  t time.        :
-00049450: 7061 7261 6d20 696e 747c 4e6f 6e65 206c  param int|None l
-00049460: 696d 6974 3a20 7468 6520 6d61 7869 6d75  imit: the maximu
-00049470: 6d20 6e75 6d62 6572 206f 6620 6465 706f  m number of depo
-00049480: 7369 7473 2073 7472 7563 7475 7265 7320  sits structures 
-00049490: 746f 2072 6574 7269 6576 652c 2064 6566  to retrieve, def
-000494a0: 6175 6c74 203d 2035 302c 206d 6178 203d  ault = 50, max =
-000494b0: 2035 300a 2020 2020 2020 2020 3a70 6172   50.        :par
-000494c0: 616d 2064 6963 7420 7061 7261 6d73 3a20  am dict params: 
-000494d0: 6578 7472 6120 7061 7261 6d65 7465 7273  extra parameters
-000494e0: 2073 7065 6369 6669 6320 746f 2074 6865   specific to the
-000494f0: 2062 7962 6974 2061 7069 2065 6e64 706f   bybit api endpo
-00049500: 696e 740a 2020 2020 2020 2020 3a70 6172  int.        :par
-00049510: 616d 2069 6e74 7c4e 6f6e 6520 7061 7261  am int|None para
-00049520: 6d73 5b27 756e 7469 6c27 5d3a 2074 6865  ms['until']: the
-00049530: 206c 6174 6573 7420 7469 6d65 2069 6e20   latest time in 
-00049540: 6d73 2074 6f20 6665 7463 6820 6465 706f  ms to fetch depo
-00049550: 7369 7473 2066 6f72 2c20 6465 6661 756c  sits for, defaul
-00049560: 7420 3d20 3330 2064 6179 7320 6166 7465  t = 30 days afte
-00049570: 7220 7369 6e63 650a 2020 2020 2020 2020  r since.        
-00049580: 202a 0a20 2020 2020 2020 2020 2a20 4558   *.         * EX
-00049590: 4348 414e 4745 2053 5045 4349 4649 4320  CHANGE SPECIFIC 
-000495a0: 5041 5241 4d45 5445 5253 0a20 2020 2020  PARAMETERS.     
-000495b0: 2020 203a 7061 7261 6d20 7374 727c 4e6f     :param str|No
-000495c0: 6e65 2070 6172 616d 735b 2763 7572 736f  ne params['curso
-000495d0: 7227 5d3a 2075 7365 6420 666f 7220 7061  r']: used for pa
-000495e0: 6769 6e61 7469 6f6e 0a20 2020 2020 2020  gination.       
-000495f0: 203a 7265 7475 726e 7320 5b64 6963 745d   :returns [dict]
-00049600: 3a20 6120 6c69 7374 206f 6620 6074 7261  : a list of `tra
-00049610: 6e73 6163 7469 6f6e 2073 7472 7563 7475  nsaction structu
-00049620: 7265 7320 3c68 7474 7073 3a2f 2f64 6f63  res <https://doc
-00049630: 732e 6363 7874 2e63 6f6d 2f23 2f3f 6964  s.ccxt.com/#/?id
-00049640: 3d74 7261 6e73 6163 7469 6f6e 2d73 7472  =transaction-str
-00049650: 7563 7475 7265 3e60 0a20 2020 2020 2020  ucture>`.       
-00049660: 2222 220a 2020 2020 2020 2020 6177 6169  """.        awai
-00049670: 7420 7365 6c66 2e6c 6f61 645f 6d61 726b  t self.load_mark
-00049680: 6574 7328 290a 2020 2020 2020 2020 7265  ets().        re
-00049690: 7175 6573 7420 3d20 7b0a 2020 2020 2020  quest = {.      
-000496a0: 2020 2020 2020 2320 2763 6f69 6e27 3a20        # 'coin': 
-000496b0: 6375 7272 656e 6379 5b27 6964 275d 2c0a  currency['id'],.
-000496c0: 2020 2020 2020 2020 2020 2020 2320 276c              # 'l
-000496d0: 696d 6974 273a 2032 302c 2020 2320 6d61  imit': 20,  # ma
-000496e0: 7820 3530 0a20 2020 2020 2020 2020 2020  x 50.           
-000496f0: 2023 2027 6375 7273 6f72 273a 2027 272c   # 'cursor': '',
-00049700: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
-00049710: 2020 2063 7572 7265 6e63 7920 3d20 4e6f     currency = No
-00049720: 6e65 0a20 2020 2020 2020 2069 6620 636f  ne.        if co
-00049730: 6465 2069 7320 6e6f 7420 4e6f 6e65 3a0a  de is not None:.
-00049740: 2020 2020 2020 2020 2020 2020 6375 7272              curr
-00049750: 656e 6379 203d 2073 656c 662e 6375 7272  ency = self.curr
-00049760: 656e 6379 2863 6f64 6529 0a20 2020 2020  ency(code).     
-00049770: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-00049780: 636f 696e 275d 203d 2063 7572 7265 6e63  coin'] = currenc
-00049790: 795b 2769 6427 5d0a 2020 2020 2020 2020  y['id'].        
-000497a0: 6966 2073 696e 6365 2069 7320 6e6f 7420  if since is not 
-000497b0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-000497c0: 2020 7265 7175 6573 745b 2773 7461 7274    request['start
-000497d0: 5469 6d65 275d 203d 2073 696e 6365 0a20  Time'] = since. 
-000497e0: 2020 2020 2020 2069 6620 6c69 6d69 7420         if limit 
-000497f0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00049800: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00049810: 5b27 6c69 6d69 7427 5d20 3d20 6c69 6d69  ['limit'] = limi
-00049820: 740a 2020 2020 2020 2020 7265 7370 6f6e  t.        respon
-00049830: 7365 203d 2061 7761 6974 2073 656c 662e  se = await self.
-00049840: 7072 6976 6174 6547 6574 5635 4173 7365  privateGetV5Asse
-00049850: 7444 6570 6f73 6974 5175 6572 7952 6563  tDepositQueryRec
-00049860: 6f72 6428 7365 6c66 2e65 7874 656e 6428  ord(self.extend(
-00049870: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
-00049880: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
-00049890: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-000498a0: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-000498b0: 6574 436f 6465 223a 2030 2c0a 2020 2020  etCode": 0,.    
-000498c0: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-000498d0: 6574 4d73 6722 3a20 2273 7563 6365 7373  etMsg": "success
-000498e0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-000498f0: 2020 2020 2022 7265 7375 6c74 223a 207b       "result": {
-00049900: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00049910: 2020 2020 2020 2022 726f 7773 223a 205b         "rows": [
-00049920: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00049930: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
-00049940: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00049950: 2020 2020 2020 2020 2020 2022 636f 696e             "coin
-00049960: 223a 2022 5553 4454 222c 0a20 2020 2020  ": "USDT",.     
-00049970: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00049980: 2020 2020 2020 2020 2022 6368 6169 6e22           "chain"
-00049990: 3a20 2245 5448 222c 0a20 2020 2020 2020  : "ETH",.       
-000499a0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-000499b0: 2020 2020 2020 2022 616d 6f75 6e74 223a         "amount":
-000499c0: 2022 3130 3030 3022 2c0a 2020 2020 2020   "10000",.      
-000499d0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000499e0: 2020 2020 2020 2020 2274 7849 4422 3a20          "txID": 
-000499f0: 2273 6b69 702d 6e6f 7469 6669 6361 7469  "skip-notificati
-00049a00: 6f6e 2d73 6365 6e65 2d74 6573 742d 616d  on-scene-test-am
-00049a10: 6f75 6e74 2d32 3032 3231 3232 3730 3934  ount-20221227094
-00049a20: 342d 3533 3332 3835 2d55 5344 5422 2c0a  4-533285-USDT",.
-00049a30: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00049a40: 2020 2020 2020 2020 2020 2020 2020 2273                "s
-00049a50: 7461 7475 7322 3a20 332c 0a20 2020 2020  tatus": 3,.     
-00049a60: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00049a70: 2020 2020 2020 2020 2022 746f 4164 6472           "toAddr
-00049a80: 6573 7322 3a20 2274 6573 742d 616d 6f75  ess": "test-amou
-00049a90: 6e74 2d61 6464 7265 7373 222c 0a20 2020  nt-address",.   
-00049aa0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00049ab0: 2020 2020 2020 2020 2020 2022 7461 6722             "tag"
-00049ac0: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
-00049ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00049ae0: 2020 2020 2264 6570 6f73 6974 4665 6522      "depositFee"
-00049af0: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
-00049b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00049b10: 2020 2020 2273 7563 6365 7373 4174 223a      "successAt":
-00049b20: 2022 3136 3732 3133 3432 3734 3030 3022   "1672134274000"
-00049b30: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00049b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00049b50: 2263 6f6e 6669 726d 6174 696f 6e73 223a  "confirmations":
-00049b60: 2022 3130 3030 3022 2c0a 2020 2020 2020   "10000",.      
-00049b70: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00049b80: 2020 2020 2020 2020 2274 7849 6e64 6578          "txIndex
-00049b90: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
-00049ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00049bb0: 2020 2020 2022 626c 6f63 6b48 6173 6822       "blockHash"
-00049bc0: 3a20 2222 0a20 2020 2020 2020 2023 2020  : "".        #  
-00049bd0: 2020 2020 2020 2020 2020 2020 2020 207d                 }
-00049be0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00049bf0: 2020 2020 2020 205d 2c0a 2020 2020 2020         ],.      
-00049c00: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00049c10: 226e 6578 7450 6167 6543 7572 736f 7222  "nextPageCursor"
-00049c20: 3a20 2265 794a 7461 5735 4a52 4349 364d  : "eyJtaW5JRCI6M
-00049c30: 5441 304e 6a41 304d 7977 6962 5746 3453  TA0NjA0MywibWF4S
-00049c40: 5551 694f 6a45 774e 4459 774e 444e 3922  UQiOjEwNDYwNDN9"
-00049c50: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00049c60: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
-00049c70: 2020 2020 2020 2020 2272 6574 4578 7449          "retExtI
-00049c80: 6e66 6f22 3a20 7b7d 2c0a 2020 2020 2020  nfo": {},.      
-00049c90: 2020 2320 2020 2020 2020 2020 2274 696d    #         "tim
-00049ca0: 6522 3a20 3136 3732 3139 3139 3932 3531  e": 167219199251
-00049cb0: 320a 2020 2020 2020 2020 2320 2020 2020  2.        #     
-00049cc0: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
-00049cd0: 2020 2020 7265 7375 6c74 203d 2073 656c      result = sel
-00049ce0: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
-00049cf0: 706f 6e73 652c 2027 7265 7375 6c74 272c  ponse, 'result',
-00049d00: 207b 7d29 0a20 2020 2020 2020 2064 6174   {}).        dat
-00049d10: 6120 3d20 7365 6c66 2e73 6166 655f 7661  a = self.safe_va
-00049d20: 6c75 6528 7265 7375 6c74 2c20 2772 6f77  lue(result, 'row
-00049d30: 7327 2c20 5b5d 290a 2020 2020 2020 2020  s', []).        
-00049d40: 7265 7475 726e 2073 656c 662e 7061 7273  return self.pars
-00049d50: 655f 7472 616e 7361 6374 696f 6e73 2864  e_transactions(d
-00049d60: 6174 612c 2063 7572 7265 6e63 792c 2073  ata, currency, s
-00049d70: 696e 6365 2c20 6c69 6d69 7429 0a0a 2020  ince, limit)..  
-00049d80: 2020 6173 796e 6320 6465 6620 6665 7463    async def fetc
-00049d90: 685f 7769 7468 6472 6177 616c 7328 7365  h_withdrawals(se
-00049da0: 6c66 2c20 636f 6465 3a20 4f70 7469 6f6e  lf, code: Option
-00049db0: 616c 5b73 7472 5d20 3d20 4e6f 6e65 2c20  al[str] = None, 
-00049dc0: 7369 6e63 653a 204f 7074 696f 6e61 6c5b  since: Optional[
-00049dd0: 696e 745d 203d 204e 6f6e 652c 206c 696d  int] = None, lim
-00049de0: 6974 3a20 4f70 7469 6f6e 616c 5b69 6e74  it: Optional[int
-00049df0: 5d20 3d20 4e6f 6e65 2c20 7061 7261 6d73  ] = None, params
-00049e00: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
-00049e10: 220a 2020 2020 2020 2020 6665 7463 6820  ".        fetch 
-00049e20: 616c 6c20 7769 7468 6472 6177 616c 7320  all withdrawals 
-00049e30: 6d61 6465 2066 726f 6d20 616e 2061 6363  made from an acc
-00049e40: 6f75 6e74 0a20 2020 2020 2020 2073 6565  ount.        see
-00049e50: 2068 7474 7073 3a2f 2f62 7962 6974 2d65   https://bybit-e
-00049e60: 7863 6861 6e67 652e 6769 7468 7562 2e69  xchange.github.i
-00049e70: 6f2f 646f 6373 2f76 352f 6173 7365 742f  o/docs/v5/asset/
-00049e80: 7769 7468 6472 6177 2d72 6563 6f72 640a  withdraw-record.
-00049e90: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-00049ea0: 7472 2063 6f64 653a 2075 6e69 6669 6564  tr code: unified
-00049eb0: 2063 7572 7265 6e63 7920 636f 6465 0a20   currency code. 
-00049ec0: 2020 2020 2020 203a 7061 7261 6d20 696e         :param in
-00049ed0: 747c 4e6f 6e65 2073 696e 6365 3a20 7468  t|None since: th
-00049ee0: 6520 6561 726c 6965 7374 2074 696d 6520  e earliest time 
-00049ef0: 696e 206d 7320 746f 2066 6574 6368 2077  in ms to fetch w
-00049f00: 6974 6864 7261 7761 6c73 2066 6f72 0a20  ithdrawals for. 
-00049f10: 2020 2020 2020 203a 7061 7261 6d20 696e         :param in
-00049f20: 747c 4e6f 6e65 206c 696d 6974 3a20 7468  t|None limit: th
-00049f30: 6520 6d61 7869 6d75 6d20 6e75 6d62 6572  e maximum number
-00049f40: 206f 6620 7769 7468 6472 6177 616c 7320   of withdrawals 
-00049f50: 7374 7275 6374 7572 6573 2074 6f20 7265  structures to re
-00049f60: 7472 6965 7665 0a20 2020 2020 2020 203a  trieve.        :
-00049f70: 7061 7261 6d20 6469 6374 2070 6172 616d  param dict param
-00049f80: 733a 2065 7874 7261 2070 6172 616d 6574  s: extra paramet
-00049f90: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
-00049fa0: 7468 6520 6279 6269 7420 6170 6920 656e  the bybit api en
-00049fb0: 6470 6f69 6e74 0a20 2020 2020 2020 203a  dpoint.        :
-00049fc0: 7265 7475 726e 7320 5b64 6963 745d 3a20  returns [dict]: 
-00049fd0: 6120 6c69 7374 206f 6620 6074 7261 6e73  a list of `trans
-00049fe0: 6163 7469 6f6e 2073 7472 7563 7475 7265  action structure
-00049ff0: 7320 3c68 7474 7073 3a2f 2f64 6f63 732e  s <https://docs.
-0004a000: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d74  ccxt.com/#/?id=t
-0004a010: 7261 6e73 6163 7469 6f6e 2d73 7472 7563  ransaction-struc
-0004a020: 7475 7265 3e60 0a20 2020 2020 2020 2022  ture>`.        "
-0004a030: 2222 0a20 2020 2020 2020 2061 7761 6974  "".        await
-0004a040: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
-0004a050: 7473 2829 0a20 2020 2020 2020 2072 6571  ts().        req
-0004a060: 7565 7374 203d 207b 0a20 2020 2020 2020  uest = {.       
-0004a070: 2020 2020 2023 2027 636f 696e 273a 2063       # 'coin': c
-0004a080: 7572 7265 6e63 795b 2769 6427 5d2c 0a20  urrency['id'],. 
-0004a090: 2020 2020 2020 2020 2020 2023 2027 6c69             # 'li
-0004a0a0: 6d69 7427 3a20 3230 2c20 2023 206d 6178  mit': 20,  # max
-0004a0b0: 2035 300a 2020 2020 2020 2020 2020 2020   50.            
-0004a0c0: 2320 2763 7573 6f72 273a 2027 272c 0a20  # 'cusor': '',. 
-0004a0d0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-0004a0e0: 2063 7572 7265 6e63 7920 3d20 4e6f 6e65   currency = None
-0004a0f0: 0a20 2020 2020 2020 2069 6620 636f 6465  .        if code
-0004a100: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0004a110: 2020 2020 2020 2020 2020 6375 7272 656e            curren
-0004a120: 6379 203d 2073 656c 662e 6375 7272 656e  cy = self.curren
-0004a130: 6379 2863 6f64 6529 0a20 2020 2020 2020  cy(code).       
-0004a140: 2020 2020 2072 6571 7565 7374 5b27 636f       request['co
-0004a150: 696e 275d 203d 2063 7572 7265 6e63 795b  in'] = currency[
-0004a160: 2769 6427 5d0a 2020 2020 2020 2020 6966  'id'].        if
-0004a170: 2073 696e 6365 2069 7320 6e6f 7420 4e6f   since is not No
-0004a180: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-0004a190: 7265 7175 6573 745b 2773 7461 7274 5469  request['startTi
-0004a1a0: 6d65 275d 203d 2073 696e 6365 0a20 2020  me'] = since.   
-0004a1b0: 2020 2020 2069 6620 6c69 6d69 7420 6973       if limit is
-0004a1c0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-0004a1d0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-0004a1e0: 6c69 6d69 7427 5d20 3d20 6c69 6d69 740a  limit'] = limit.
-0004a1f0: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
-0004a200: 203d 2061 7761 6974 2073 656c 662e 7072   = await self.pr
-0004a210: 6976 6174 6547 6574 5635 4173 7365 7457  ivateGetV5AssetW
-0004a220: 6974 6864 7261 7751 7565 7279 5265 636f  ithdrawQueryReco
-0004a230: 7264 2873 656c 662e 6578 7465 6e64 2872  rd(self.extend(r
-0004a240: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
-0004a250: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-0004a260: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
-0004a270: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-0004a280: 7443 6f64 6522 3a20 302c 0a20 2020 2020  tCode": 0,.     
-0004a290: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-0004a2a0: 744d 7367 223a 2022 7375 6363 6573 7322  tMsg": "success"
-0004a2b0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004a2c0: 2020 2020 2272 6573 756c 7422 3a20 7b0a      "result": {.
-0004a2d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004a2e0: 2020 2020 2020 2272 6f77 7322 3a20 5b0a        "rows": [.
-0004a2f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004a300: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
-0004a310: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004a320: 2020 2020 2020 2020 2020 2263 6f69 6e22            "coin"
-0004a330: 3a20 2255 5344 5422 2c0a 2020 2020 2020  : "USDT",.      
-0004a340: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0004a350: 2020 2020 2020 2020 2263 6861 696e 223a          "chain":
-0004a360: 2022 4554 4822 2c0a 2020 2020 2020 2020   "ETH",.        
-0004a370: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004a380: 2020 2020 2020 2261 6d6f 756e 7422 3a20        "amount": 
-0004a390: 2237 3722 2c0a 2020 2020 2020 2020 2320  "77",.        # 
-0004a3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004a3b0: 2020 2020 2274 7849 4422 3a20 2222 2c0a      "txID": "",.
-0004a3c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004a3d0: 2020 2020 2020 2020 2020 2020 2020 2273                "s
-0004a3e0: 7461 7475 7322 3a20 2253 6563 7572 6974  tatus": "Securit
-0004a3f0: 7943 6865 636b 222c 0a20 2020 2020 2020  yCheck",.       
-0004a400: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004a410: 2020 2020 2020 2022 746f 4164 6472 6573         "toAddres
-0004a420: 7322 3a20 2230 7839 3963 6564 3132 3936  s": "0x99ced1296
-0004a430: 3033 6162 6337 3731 6330 6461 6265 3933  03abc771c0dabe93
-0004a440: 3563 3332 3666 6636 6338 3636 3435 6422  5c326ff6c86645d"
-0004a450: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004a460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004a470: 2274 6167 223a 2022 222c 0a20 2020 2020  "tag": "",.     
-0004a480: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0004a490: 2020 2020 2020 2020 2022 7769 7468 6472           "withdr
-0004a4a0: 6177 4665 6522 3a20 2231 3022 2c0a 2020  awFee": "10",.  
-0004a4b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004a4c0: 2020 2020 2020 2020 2020 2020 2263 7265              "cre
-0004a4d0: 6174 6554 696d 6522 3a20 2231 3637 3039  ateTime": "16709
-0004a4e0: 3232 3231 3730 3030 222c 0a20 2020 2020  22217000",.     
-0004a4f0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0004a500: 2020 2020 2020 2020 2022 7570 6461 7465           "update
-0004a510: 5469 6d65 223a 2022 3136 3730 3932 3232  Time": "16709222
-0004a520: 3137 3030 3022 2c0a 2020 2020 2020 2020  17000",.        
-0004a530: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004a540: 2020 2020 2020 2277 6974 6864 7261 7749        "withdrawI
-0004a550: 6422 3a20 2239 3937 3622 2c0a 2020 2020  d": "9976",.    
-0004a560: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004a570: 2020 2020 2020 2020 2020 2277 6974 6864            "withd
-0004a580: 7261 7754 7970 6522 3a20 300a 2020 2020  rawType": 0.    
-0004a590: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004a5a0: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
-0004a5b0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004a5c0: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-0004a5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004a5e0: 2020 2022 636f 696e 223a 2022 5553 4454     "coin": "USDT
-0004a5f0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004a600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004a610: 2022 6368 6169 6e22 3a20 2245 5448 222c   "chain": "ETH",
-0004a620: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004a630: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0004a640: 616d 6f75 6e74 223a 2022 3236 222c 0a20  amount": "26",. 
-0004a650: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004a660: 2020 2020 2020 2020 2020 2020 2022 7478               "tx
-0004a670: 4944 223a 2022 222c 0a20 2020 2020 2020  ID": "",.       
-0004a680: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004a690: 2020 2020 2020 2022 7374 6174 7573 223a         "status":
-0004a6a0: 2022 7375 6363 6573 7322 2c0a 2020 2020   "success",.    
-0004a6b0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004a6c0: 2020 2020 2020 2020 2020 2274 6f41 6464            "toAdd
-0004a6d0: 7265 7373 223a 2022 3135 3633 3830 3732  ress": "15638072
-0004a6e0: 3638 3140 3136 332e 636f 6d22 2c0a 2020  681@163.com",.  
-0004a6f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004a700: 2020 2020 2020 2020 2020 2020 2274 6167              "tag
-0004a710: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
-0004a720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004a730: 2020 2020 2022 7769 7468 6472 6177 4665       "withdrawFe
-0004a740: 6522 3a20 2230 222c 0a20 2020 2020 2020  e": "0",.       
-0004a750: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004a760: 2020 2020 2020 2022 6372 6561 7465 5469         "createTi
-0004a770: 6d65 223a 2022 3136 3639 3731 3131 3231  me": "1669711121
-0004a780: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
-0004a790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004a7a0: 2020 2020 2275 7064 6174 6554 696d 6522      "updateTime"
-0004a7b0: 3a20 2231 3636 3937 3131 3338 3030 3030  : "1669711380000
-0004a7c0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00045770: 2020 2320 2020 207b 0a20 2020 2020 2020    #    {.       
+00045780: 2023 2020 2020 2020 2020 2022 7265 7443   #         "retC
+00045790: 6f64 6522 3a20 2230 222c 0a20 2020 2020  ode": "0",.     
+000457a0: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+000457b0: 744d 7367 223a 2022 4f4b 222c 0a20 2020  tMsg": "OK",.   
+000457c0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+000457d0: 7265 7375 6c74 223a 207b 0a20 2020 2020  result": {.     
+000457e0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+000457f0: 2022 6c69 7374 223a 205b 0a20 2020 2020   "list": [.     
+00045800: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00045810: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+00045820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045830: 2020 2020 2022 7379 6d62 6f6c 223a 2022       "symbol": "
+00045840: 4141 5645 5553 4454 222c 0a20 2020 2020  AAVEUSDT",.     
+00045850: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00045860: 2020 2020 2020 2020 2022 6964 223a 2022           "id": "
+00045870: 3132 3734 3738 3531 3031 3936 3537 3136  1274785101965716
+00045880: 3939 3222 2c0a 2020 2020 2020 2020 2320  992",.        # 
+00045890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000458a0: 2020 2020 226f 7264 6572 4964 223a 2022      "orderId": "
+000458b0: 3132 3734 3738 3432 3532 3335 3930 3839  1274784252359089
+000458c0: 3636 3422 2c0a 2020 2020 2020 2020 2320  664",.        # 
+000458d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000458e0: 2020 2020 2274 7261 6465 4964 223a 2022      "tradeId": "
+000458f0: 3232 3730 3030 3030 3030 3033 3133 3635  2270000000031365
+00045900: 3633 3922 2c0a 2020 2020 2020 2020 2320  639",.        # 
+00045910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045920: 2020 2020 226f 7264 6572 5072 6963 6522      "orderPrice"
+00045930: 3a20 2238 322e 3522 2c0a 2020 2020 2020  : "82.5",.      
+00045940: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00045950: 2020 2020 2020 2020 226f 7264 6572 5174          "orderQt
+00045960: 7922 3a20 2230 2e30 3136 222c 0a20 2020  y": "0.016",.   
+00045970: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00045980: 2020 2020 2020 2020 2020 2022 6578 6563             "exec
+00045990: 4665 6522 3a20 2230 222c 0a20 2020 2020  Fee": "0",.     
+000459a0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+000459b0: 2020 2020 2020 2020 2022 6665 6554 6f6b           "feeTok
+000459c0: 656e 4964 223a 2022 4141 5645 222c 0a20  enId": "AAVE",. 
+000459d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000459e0: 2020 2020 2020 2020 2020 2020 2022 6372               "cr
+000459f0: 6561 7454 696d 6522 3a20 2231 3636 3637  eatTime": "16667
+00045a00: 3032 3232 3633 3236 222c 0a20 2020 2020  02226326",.     
+00045a10: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00045a20: 2020 2020 2020 2020 2022 6973 4275 7965           "isBuye
+00045a30: 7222 3a20 2230 222c 0a20 2020 2020 2020  r": "0",.       
+00045a40: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00045a50: 2020 2020 2020 2022 6973 4d61 6b65 7222         "isMaker"
+00045a60: 3a20 2230 222c 0a20 2020 2020 2020 2023  : "0",.        #
+00045a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045a80: 2020 2020 2022 6d61 7463 684f 7264 6572       "matchOrder
+00045a90: 4964 223a 2022 3132 3734 3738 3531 3031  Id": "1274785101
+00045aa0: 3836 3530 3736 3232 3422 2c0a 2020 2020  865076224",.    
+00045ab0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00045ac0: 2020 2020 2020 2020 2020 226d 616b 6572            "maker
+00045ad0: 5265 6261 7465 223a 2022 3022 2c0a 2020  Rebate": "0",.  
+00045ae0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00045af0: 2020 2020 2020 2020 2020 2020 2265 7865              "exe
+00045b00: 6375 7469 6f6e 5469 6d65 223a 2022 3136  cutionTime": "16
+00045b10: 3636 3730 3232 3236 3333 3522 0a20 2020  66702226335".   
+00045b20: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00045b30: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
+00045b40: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00045b50: 5d0a 2020 2020 2020 2020 2320 2020 2020  ].        #     
+00045b60: 2020 2020 7d2c 0a20 2020 2020 2020 2023      },.        #
+00045b70: 2020 2020 2020 2020 2022 7265 7445 7874           "retExt
+00045b80: 4d61 7022 3a20 7b7d 2c0a 2020 2020 2020  Map": {},.      
+00045b90: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
+00045ba0: 4578 7449 6e66 6f22 3a20 6e75 6c6c 2c0a  ExtInfo": null,.
+00045bb0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00045bc0: 2020 2274 696d 6522 3a20 2231 3636 3637    "time": "16667
+00045bd0: 3638 3231 3531 3537 220a 2020 2020 2020  68215157".      
+00045be0: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
+00045bf0: 2020 230a 2020 2020 2020 2020 7265 7375    #.        resu
+00045c00: 6c74 203d 2073 656c 662e 7361 6665 5f76  lt = self.safe_v
+00045c10: 616c 7565 2872 6573 706f 6e73 652c 2027  alue(response, '
+00045c20: 7265 7375 6c74 272c 207b 7d29 0a20 2020  result', {}).   
+00045c30: 2020 2020 2074 7261 6465 7320 3d20 7365       trades = se
+00045c40: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
+00045c50: 7375 6c74 2c20 276c 6973 7427 2c20 5b5d  sult, 'list', []
+00045c60: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00045c70: 2073 656c 662e 7061 7273 655f 7472 6164   self.parse_trad
+00045c80: 6573 2874 7261 6465 732c 206d 6172 6b65  es(trades, marke
+00045c90: 742c 2073 696e 6365 2c20 6c69 6d69 7429  t, since, limit)
+00045ca0: 0a0a 2020 2020 6173 796e 6320 6465 6620  ..    async def 
+00045cb0: 6665 7463 685f 6d79 5f75 6e69 6669 6564  fetch_my_unified
+00045cc0: 5f6d 6172 6769 6e5f 7472 6164 6573 2873  _margin_trades(s
+00045cd0: 656c 662c 2073 796d 626f 6c3a 204f 7074  elf, symbol: Opt
+00045ce0: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
+00045cf0: 652c 2073 696e 6365 3a20 4f70 7469 6f6e  e, since: Option
+00045d00: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c20  al[int] = None, 
+00045d10: 6c69 6d69 743a 204f 7074 696f 6e61 6c5b  limit: Optional[
+00045d20: 696e 745d 203d 204e 6f6e 652c 2070 6172  int] = None, par
+00045d30: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
+00045d40: 2061 7761 6974 2073 656c 662e 6c6f 6164   await self.load
+00045d50: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
+00045d60: 2020 206d 6172 6b65 7420 3d20 4e6f 6e65     market = None
+00045d70: 0a20 2020 2020 2020 2073 6574 746c 6520  .        settle 
+00045d80: 3d20 4e6f 6e65 0a20 2020 2020 2020 2072  = None.        r
+00045d90: 6571 7565 7374 203d 207b 0a20 2020 2020  equest = {.     
+00045da0: 2020 2020 2020 2023 2027 7379 6d62 6f6c         # 'symbol
+00045db0: 273a 206d 6172 6b65 745b 2769 6427 5d2c  ': market['id'],
+00045dc0: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+00045dd0: 6f72 6465 7249 6427 3a20 2766 3138 3538  orderId': 'f1858
+00045de0: 3036 622d 6238 3031 2d34 3066 662d 6164  06b-b801-40ff-ad
+00045df0: 6563 2d35 3232 3839 3337 3065 6436 3227  ec-52289370ed62'
+00045e00: 2c20 2023 2069 6620 6e6f 7420 7072 6f76  ,  # if not prov
+00045e10: 6964 6564 2077 696c 6c20 7265 7475 726e  ided will return
+00045e20: 2075 7365 7227 7320 7472 6164 696e 6720   user's trading 
+00045e30: 7265 636f 7264 730a 2020 2020 2020 2020  records.        
+00045e40: 2020 2020 2320 2773 7461 7274 5469 6d65      # 'startTime
+00045e50: 273a 2069 6e74 2873 696e 6365 202f 2031  ': int(since / 1
+00045e60: 3030 3029 2c0a 2020 2020 2020 2020 2020  000),.          
+00045e70: 2020 2320 2765 6e64 5469 6d65 273a 2030    # 'endTime': 0
+00045e80: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+00045e90: 2763 6174 6567 6f72 7927 3a20 2727 0a20  'category': ''. 
+00045ea0: 2020 2020 2020 2020 2020 2023 2027 6c69             # 'li
+00045eb0: 6d69 7427 2032 302c 2020 2320 6d61 7820  mit' 20,  # max 
+00045ec0: 3530 0a20 2020 2020 2020 207d 0a20 2020  50.        }.   
+00045ed0: 2020 2020 2069 6620 7379 6d62 6f6c 2069       if symbol i
+00045ee0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00045ef0: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
+00045f00: 2073 656c 662e 6d61 726b 6574 2873 796d   self.market(sym
+00045f10: 626f 6c29 0a20 2020 2020 2020 2020 2020  bol).           
+00045f20: 2073 6574 746c 6520 3d20 6d61 726b 6574   settle = market
+00045f30: 5b27 7365 7474 6c65 275d 0a20 2020 2020  ['settle'].     
+00045f40: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+00045f50: 7379 6d62 6f6c 275d 203d 206d 6172 6b65  symbol'] = marke
+00045f60: 745b 2769 6427 5d0a 2020 2020 2020 2020  t['id'].        
+00045f70: 7375 6254 7970 6520 3d20 4e6f 6e65 0a20  subType = None. 
+00045f80: 2020 2020 2020 2073 7562 5479 7065 2c20         subType, 
+00045f90: 7061 7261 6d73 203d 2073 656c 662e 6861  params = self.ha
+00045fa0: 6e64 6c65 5f73 7562 5f74 7970 655f 616e  ndle_sub_type_an
+00045fb0: 645f 7061 7261 6d73 2827 6665 7463 684d  d_params('fetchM
+00045fc0: 7954 7261 6465 7327 2c20 6d61 726b 6574  yTrades', market
+00045fd0: 2c20 7061 7261 6d73 2c20 276c 696e 6561  , params, 'linea
+00045fe0: 7227 290a 2020 2020 2020 2020 7265 7175  r').        requ
+00045ff0: 6573 745b 2763 6174 6567 6f72 7927 5d20  est['category'] 
+00046000: 3d20 7375 6254 7970 650a 2020 2020 2020  = subType.      
+00046010: 2020 7365 7474 6c65 2c20 7061 7261 6d73    settle, params
+00046020: 203d 2073 656c 662e 6861 6e64 6c65 5f6f   = self.handle_o
+00046030: 7074 696f 6e5f 616e 645f 7061 7261 6d73  ption_and_params
+00046040: 2870 6172 616d 732c 2027 6361 6e63 656c  (params, 'cancel
+00046050: 416c 6c4f 7264 6572 7327 2c20 2773 6574  AllOrders', 'set
+00046060: 746c 6527 2c20 7365 7474 6c65 290a 2020  tle', settle).  
+00046070: 2020 2020 2020 6966 2073 6574 746c 6520        if settle 
+00046080: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00046090: 2020 2020 2020 2020 2072 6571 7565 7374           request
+000460a0: 5b27 7365 7474 6c65 436f 696e 275d 203d  ['settleCoin'] =
+000460b0: 2073 6574 746c 650a 2020 2020 2020 2020   settle.        
+000460c0: 6966 2073 696e 6365 2069 7320 6e6f 7420  if since is not 
+000460d0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+000460e0: 2020 7265 7175 6573 745b 2773 7461 7274    request['start
+000460f0: 5469 6d65 275d 203d 2073 696e 6365 0a20  Time'] = since. 
+00046100: 2020 2020 2020 2069 6620 6c69 6d69 7420         if limit 
+00046110: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00046120: 2020 2020 2020 2020 2072 6571 7565 7374           request
+00046130: 5b27 6c69 6d69 7427 5d20 3d20 6c69 6d69  ['limit'] = limi
+00046140: 7420 2023 2064 6566 6175 6c74 2032 302c  t  # default 20,
+00046150: 206d 6178 2035 300a 2020 2020 2020 2020   max 50.        
+00046160: 7265 7370 6f6e 7365 203d 2061 7761 6974  response = await
+00046170: 2073 656c 662e 7072 6976 6174 6547 6574   self.privateGet
+00046180: 556e 6966 6965 6456 3350 7269 7661 7465  UnifiedV3Private
+00046190: 4578 6563 7574 696f 6e4c 6973 7428 7365  ExecutionList(se
+000461a0: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
+000461b0: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
+000461c0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+000461d0: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+000461e0: 2020 2020 2020 2020 2272 6574 436f 6465          "retCode
+000461f0: 223a 2030 2c0a 2020 2020 2020 2020 2320  ": 0,.        # 
+00046200: 2020 2020 2020 2020 2272 6574 4d73 6722          "retMsg"
+00046210: 3a20 2253 7563 6365 7373 222c 0a20 2020  : "Success",.   
+00046220: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00046230: 7265 7375 6c74 223a 207b 0a20 2020 2020  result": {.     
+00046240: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00046250: 2022 6e65 7874 5061 6765 4375 7273 6f72   "nextPageCursor
+00046260: 223a 2022 3135 3635 2533 4130 2532 4331  ": "1565%3A0%2C1
+00046270: 3536 3525 3341 3022 2c0a 2020 2020 2020  565%3A0",.      
+00046280: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00046290: 2263 6174 6567 6f72 7922 3a20 226f 7074  "category": "opt
+000462a0: 696f 6e22 2c0a 2020 2020 2020 2020 2320  ion",.        # 
+000462b0: 2020 2020 2020 2020 2020 2020 226c 6973              "lis
+000462c0: 7422 3a20 5b0a 2020 2020 2020 2020 2320  t": [.        # 
+000462d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000462e0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+000462f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046300: 226f 7264 6572 5479 7065 223a 2022 4c69  "orderType": "Li
+00046310: 6d69 7422 2c0a 2020 2020 2020 2020 2320  mit",.        # 
+00046320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046330: 2020 2020 2273 796d 626f 6c22 3a20 2242      "symbol": "B
+00046340: 5443 2d31 344a 554c 3232 2d31 3735 3030  TC-14JUL22-17500
+00046350: 2d43 222c 0a20 2020 2020 2020 2023 2020  -C",.        #  
+00046360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046370: 2020 2022 6f72 6465 724c 696e 6b49 6422     "orderLinkId"
+00046380: 3a20 2231 3838 3838 3936 3839 2d79 7561  : "188889689-yua
+00046390: 6e7a 6865 6e2d 3535 3839 3938 3939 3838  nzhen-5589989988
+000463a0: 3939 222c 0a20 2020 2020 2020 2023 2020  99",.        #  
+000463b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000463c0: 2020 2022 7369 6465 223a 2022 4275 7922     "side": "Buy"
+000463d0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000463e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000463f0: 226f 7264 6572 4964 223a 2022 3039 6335  "orderId": "09c5
+00046400: 3833 3666 2d38 3165 662d 3432 3038 2d61  836f-81ef-4208-a
+00046410: 3562 342d 3433 3133 3564 3365 3032 6132  5b4-43135d3e02a2
+00046420: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00046430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046440: 2022 6c65 6176 6573 5174 7922 3a20 2230   "leavesQty": "0
+00046450: 2e30 3030 3022 2c0a 2020 2020 2020 2020  .0000",.        
+00046460: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00046470: 2020 2020 2020 2265 7865 6354 696d 6522        "execTime"
+00046480: 3a20 3136 3537 3731 3431 3232 3431 372c  : 1657714122417,
+00046490: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000464a0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000464b0: 6578 6563 4665 6522 3a20 2230 2e31 3138  execFee": "0.118
+000464c0: 3937 3038 3222 2c0a 2020 2020 2020 2020  97082",.        
+000464d0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000464e0: 2020 2020 2020 2266 6565 5261 7465 223a        "feeRate":
+000464f0: 2022 302e 3030 3033 3030 222c 0a20 2020   "0.000300",.   
+00046500: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00046510: 2020 2020 2020 2020 2020 2022 6578 6563             "exec
+00046520: 4964 223a 2022 3665 3439 3235 3630 2d37  Id": "6e492560-7
+00046530: 3862 342d 3564 3262 2d62 3333 312d 3232  8b4-5d2b-b331-22
+00046540: 3932 3164 3331 3733 6339 222c 0a20 2020  921d3173c9",.   
+00046550: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00046560: 2020 2020 2020 2020 2020 2022 626c 6f63             "bloc
+00046570: 6b54 7261 6465 4964 223a 2022 222c 0a20  kTradeId": "",. 
+00046580: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00046590: 2020 2020 2020 2020 2020 2020 2022 6578               "ex
+000465a0: 6563 5072 6963 6522 3a20 2232 3336 302e  ecPrice": "2360.
+000465b0: 3030 3030 3030 3030 222c 0a20 2020 2020  00000000",.     
+000465c0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+000465d0: 2020 2020 2020 2020 2022 6c61 7374 4c69           "lastLi
+000465e0: 7175 6964 6974 7949 6e64 223a 2022 5441  quidityInd": "TA
+000465f0: 4b45 5222 2c0a 2020 2020 2020 2020 2320  KER",.        # 
+00046600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046610: 2020 2020 226f 7264 6572 5174 7922 3a20      "orderQty": 
+00046620: 2230 2e30 3230 3022 2c0a 2020 2020 2020  "0.0200",.      
+00046630: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00046640: 2020 2020 2020 2020 226f 7264 6572 5072          "orderPr
+00046650: 6963 6522 3a20 2232 3336 302e 3030 3030  ice": "2360.0000
+00046660: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
+00046670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046680: 2020 2020 2022 6578 6563 5661 6c75 6522       "execValue"
+00046690: 3a20 2234 372e 3230 3030 3030 3030 222c  : "47.20000000",
+000466a0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000466b0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000466c0: 6578 6563 5479 7065 223a 2022 5472 6164  execType": "Trad
+000466d0: 6522 2c0a 2020 2020 2020 2020 2320 2020  e",.        #   
+000466e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000466f0: 2020 2265 7865 6351 7479 223a 2022 302e    "execQty": "0.
+00046700: 3032 3030 220a 2020 2020 2020 2020 2320  0200".        # 
+00046710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046720: 7d0a 2020 2020 2020 2020 2320 2020 2020  }.        #     
+00046730: 2020 2020 2020 2020 5d0a 2020 2020 2020          ].      
+00046740: 2020 2320 2020 2020 2020 2020 7d2c 0a20    #         },. 
+00046750: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00046760: 2022 7469 6d65 223a 2031 3635 3737 3134   "time": 1657714
+00046770: 3239 3237 3833 0a20 2020 2020 2020 2023  292783.        #
+00046780: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+00046790: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
+000467a0: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+000467b0: 6528 7265 7370 6f6e 7365 2c20 2772 6573  e(response, 'res
+000467c0: 756c 7427 2c20 7b7d 290a 2020 2020 2020  ult', {}).      
+000467d0: 2020 7472 6164 6573 203d 2073 656c 662e    trades = self.
+000467e0: 7361 6665 5f76 616c 7565 2872 6573 756c  safe_value(resul
+000467f0: 742c 2027 6c69 7374 272c 205b 5d29 0a20  t, 'list', []). 
+00046800: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00046810: 6c66 2e70 6172 7365 5f74 7261 6465 7328  lf.parse_trades(
+00046820: 7472 6164 6573 2c20 6d61 726b 6574 2c20  trades, market, 
+00046830: 7369 6e63 652c 206c 696d 6974 290a 0a20  since, limit).. 
+00046840: 2020 2061 7379 6e63 2064 6566 2066 6574     async def fet
+00046850: 6368 5f6d 795f 636f 6e74 7261 6374 5f74  ch_my_contract_t
+00046860: 7261 6465 7328 7365 6c66 2c20 7379 6d62  rades(self, symb
+00046870: 6f6c 3a20 4f70 7469 6f6e 616c 5b73 7472  ol: Optional[str
+00046880: 5d20 3d20 4e6f 6e65 2c20 7369 6e63 653a  ] = None, since:
+00046890: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
+000468a0: 204e 6f6e 652c 206c 696d 6974 3a20 4f70   None, limit: Op
+000468b0: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
+000468c0: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
+000468d0: 2020 2020 2020 2020 6966 2073 796d 626f          if symbo
+000468e0: 6c20 6973 204e 6f6e 653a 0a20 2020 2020  l is None:.     
+000468f0: 2020 2020 2020 2072 6169 7365 2041 7267         raise Arg
+00046900: 756d 656e 7473 5265 7175 6972 6564 2873  umentsRequired(s
+00046910: 656c 662e 6964 202b 2027 2066 6574 6368  elf.id + ' fetch
+00046920: 4d79 436f 6e74 7261 6374 5472 6164 6573  MyContractTrades
+00046930: 2829 2072 6571 7569 7265 7320 6120 7379  () requires a sy
+00046940: 6d62 6f6c 2061 7267 756d 656e 7427 290a  mbol argument').
+00046950: 2020 2020 2020 2020 6177 6169 7420 7365          await se
+00046960: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
+00046970: 290a 2020 2020 2020 2020 6d61 726b 6574  ).        market
+00046980: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+00046990: 7265 7175 6573 7420 3d20 7b0a 2020 2020  request = {.    
+000469a0: 2020 2020 2020 2020 2320 2773 796d 626f          # 'symbo
+000469b0: 6c27 3a20 6d61 726b 6574 5b27 6964 275d  l': market['id']
+000469c0: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+000469d0: 2763 6174 6567 6f72 7927 3a20 2727 2c20  'category': '', 
+000469e0: 2023 2050 726f 6475 6374 2074 7970 652e   # Product type.
+000469f0: 2073 706f 742c 6c69 6e65 6172 2c6f 7074   spot,linear,opt
+00046a00: 696f 6e0a 2020 2020 2020 2020 2020 2020  ion.            
+00046a10: 2320 276f 7264 6572 4964 273a 2027 272c  # 'orderId': '',
+00046a20: 2020 2320 4f72 6465 7220 4944 0a20 2020    # Order ID.   
+00046a30: 2020 2020 2020 2020 2023 2027 6f72 6465           # 'orde
+00046a40: 724c 696e 6b49 6427 3a20 2727 2c20 2023  rLinkId': '',  #
+00046a50: 2055 7365 7220 6375 7374 6f6d 6973 6564   User customised
+00046a60: 206f 7264 6572 2049 440a 2020 2020 2020   order ID.      
+00046a70: 2020 2020 2020 2320 2762 6173 6543 6f69        # 'baseCoi
+00046a80: 6e27 3a20 2727 2c20 2023 2042 6173 6520  n': '',  # Base 
+00046a90: 636f 696e 0a20 2020 2020 2020 2020 2020  coin.           
+00046aa0: 2023 2027 7374 6172 7454 696d 6527 3a20   # 'startTime': 
+00046ab0: 302c 2020 2320 5468 6520 7374 6172 7420  0,  # The start 
+00046ac0: 7469 6d65 7374 616d 7028 6d73 290a 2020  timestamp(ms).  
+00046ad0: 2020 2020 2020 2020 2020 2320 2765 6e64            # 'end
+00046ae0: 5469 6d65 273a 2030 2c20 2023 2054 6865  Time': 0,  # The
+00046af0: 2065 6e64 2074 696d 6573 7461 6d70 286d   end timestamp(m
+00046b00: 7329 0a20 2020 2020 2020 2020 2020 2023  s).            #
+00046b10: 2027 6578 6563 5479 7065 273a 2027 272c   'execType': '',
+00046b20: 2020 2320 4578 6563 7574 696f 6e20 7479    # Execution ty
+00046b30: 7065 0a20 2020 2020 2020 2020 2020 2023  pe.            #
+00046b40: 2027 6c69 6d69 7427 3a20 302c 2020 2320   'limit': 0,  # 
+00046b50: 4c69 6d69 7420 666f 7220 6461 7461 2073  Limit for data s
+00046b60: 697a 6520 7065 7220 7061 6765 2e20 5b31  ize per page. [1
+00046b70: 2c20 3130 305d 2e20 4465 6661 756c 743a  , 100]. Default:
+00046b80: 2035 300a 2020 2020 2020 2020 2020 2020   50.            
+00046b90: 2320 2763 7572 736f 7227 3a20 2727 2c20  # 'cursor': '', 
+00046ba0: 2023 2043 7572 736f 722e 2055 7365 6420   # Cursor. Used 
+00046bb0: 666f 7220 7061 6769 6e61 7469 6f6e 0a20  for pagination. 
+00046bc0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+00046bd0: 2069 6620 7379 6d62 6f6c 2069 7320 6e6f   if symbol is no
+00046be0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00046bf0: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
+00046c00: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
+00046c10: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+00046c20: 7565 7374 5b27 7379 6d62 6f6c 275d 203d  uest['symbol'] =
+00046c30: 206d 6172 6b65 745b 2769 6427 5d0a 2020   market['id'].  
+00046c40: 2020 2020 2020 7375 6254 7970 6520 3d20        subType = 
+00046c50: 4e6f 6e65 0a20 2020 2020 2020 2073 7562  None.        sub
+00046c60: 5479 7065 2c20 7061 7261 6d73 203d 2073  Type, params = s
+00046c70: 656c 662e 6861 6e64 6c65 5f73 7562 5f74  elf.handle_sub_t
+00046c80: 7970 655f 616e 645f 7061 7261 6d73 2827  ype_and_params('
+00046c90: 6665 7463 684d 7954 7261 6465 7327 2c20  fetchMyTrades', 
+00046ca0: 6d61 726b 6574 2c20 7061 7261 6d73 290a  market, params).
+00046cb0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+00046cc0: 2763 6174 6567 6f72 7927 5d20 3d20 7375  'category'] = su
+00046cd0: 6254 7970 650a 2020 2020 2020 2020 6966  bType.        if
+00046ce0: 2073 696e 6365 2069 7320 6e6f 7420 4e6f   since is not No
+00046cf0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+00046d00: 7265 7175 6573 745b 2773 7461 7274 5469  request['startTi
+00046d10: 6d65 275d 203d 2073 696e 6365 0a20 2020  me'] = since.   
+00046d20: 2020 2020 2069 6620 6c69 6d69 7420 6973       if limit is
+00046d30: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00046d40: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+00046d50: 6c69 6d69 7427 5d20 3d20 6c69 6d69 7420  limit'] = limit 
+00046d60: 2023 2064 6566 6175 6c74 2035 302c 206d   # default 50, m
+00046d70: 6178 2031 3030 0a20 2020 2020 2020 2072  ax 100.        r
+00046d80: 6573 706f 6e73 6520 3d20 6177 6169 7420  esponse = await 
+00046d90: 7365 6c66 2e70 7269 7661 7465 4765 7456  self.privateGetV
+00046da0: 3545 7865 6375 7469 6f6e 4c69 7374 2873  5ExecutionList(s
+00046db0: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
+00046dc0: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
+00046dd0: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+00046de0: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+00046df0: 2020 2020 2020 2020 2022 7265 7443 6f64           "retCod
+00046e00: 6522 3a20 302c 0a20 2020 2020 2020 2023  e": 0,.        #
+00046e10: 2020 2020 2020 2020 2022 7265 744d 7367           "retMsg
+00046e20: 223a 2022 4f4b 222c 0a20 2020 2020 2020  ": "OK",.       
+00046e30: 2023 2020 2020 2020 2020 2022 7265 7375   #         "resu
+00046e40: 6c74 223a 207b 0a20 2020 2020 2020 2023  lt": {.        #
+00046e50: 2020 2020 2020 2020 2020 2020 2022 6e65               "ne
+00046e60: 7874 5061 6765 4375 7273 6f72 223a 2022  xtPageCursor": "
+00046e70: 3133 3237 3636 2533 4132 2532 4331 3332  132766%3A2%2C132
+00046e80: 3736 3625 3341 3222 2c0a 2020 2020 2020  766%3A2",.      
+00046e90: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00046ea0: 2263 6174 6567 6f72 7922 3a20 226c 696e  "category": "lin
+00046eb0: 6561 7222 2c0a 2020 2020 2020 2020 2320  ear",.        # 
+00046ec0: 2020 2020 2020 2020 2020 2020 226c 6973              "lis
+00046ed0: 7422 3a20 5b0a 2020 2020 2020 2020 2320  t": [.        # 
+00046ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046ef0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+00046f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046f10: 2273 796d 626f 6c22 3a20 2245 5448 5045  "symbol": "ETHPE
+00046f20: 5250 222c 0a20 2020 2020 2020 2023 2020  RP",.        #  
+00046f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046f40: 2020 2022 6f72 6465 7254 7970 6522 3a20     "orderType": 
+00046f50: 224d 6172 6b65 7422 2c0a 2020 2020 2020  "Market",.      
+00046f60: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00046f70: 2020 2020 2020 2020 2275 6e64 6572 6c79          "underly
+00046f80: 696e 6750 7269 6365 223a 2022 222c 0a20  ingPrice": "",. 
+00046f90: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00046fa0: 2020 2020 2020 2020 2020 2020 2022 6f72               "or
+00046fb0: 6465 724c 696e 6b49 6422 3a20 2222 2c0a  derLinkId": "",.
+00046fc0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00046fd0: 2020 2020 2020 2020 2020 2020 2020 2273                "s
+00046fe0: 6964 6522 3a20 2242 7579 222c 0a20 2020  ide": "Buy",.   
+00046ff0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00047000: 2020 2020 2020 2020 2020 2022 696e 6465             "inde
+00047010: 7850 7269 6365 223a 2022 222c 0a20 2020  xPrice": "",.   
+00047020: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00047030: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
+00047040: 7249 6422 3a20 2238 6330 3635 3334 312d  rId": "8c065341-
+00047050: 3762 3532 2d34 6361 392d 6163 3263 2d33  7b52-4ca9-ac2c-3
+00047060: 3765 3331 6163 3535 6339 3422 2c0a 2020  7e31ac55c94",.  
+00047070: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00047080: 2020 2020 2020 2020 2020 2020 2273 746f              "sto
+00047090: 704f 7264 6572 5479 7065 223a 2022 554e  pOrderType": "UN
+000470a0: 4b4e 4f57 4e22 2c0a 2020 2020 2020 2020  KNOWN",.        
+000470b0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000470c0: 2020 2020 2020 226c 6561 7665 7351 7479        "leavesQty
+000470d0: 223a 2022 3022 2c0a 2020 2020 2020 2020  ": "0",.        
+000470e0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000470f0: 2020 2020 2020 2265 7865 6354 696d 6522        "execTime"
+00047100: 3a20 2231 3637 3232 3832 3732 3234 3239  : "1672282722429
+00047110: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00047120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047130: 2022 6973 4d61 6b65 7222 3a20 4661 6c73   "isMaker": Fals
+00047140: 652c 0a20 2020 2020 2020 2023 2020 2020  e,.        #    
+00047150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047160: 2022 6578 6563 4665 6522 3a20 2230 2e30   "execFee": "0.0
+00047170: 3731 3430 3922 2c0a 2020 2020 2020 2020  71409",.        
+00047180: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00047190: 2020 2020 2020 2266 6565 5261 7465 223a        "feeRate":
+000471a0: 2022 302e 3030 3036 222c 0a20 2020 2020   "0.0006",.     
+000471b0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+000471c0: 2020 2020 2020 2020 2022 6578 6563 4964           "execId
+000471d0: 223a 2022 6530 6362 6538 3164 2d30 6631  ": "e0cbe81d-0f1
+000471e0: 382d 3538 3636 2d39 3431 352d 6366 3331  8-5866-9415-cf31
+000471f0: 3962 3564 6162 3362 222c 0a20 2020 2020  9b5dab3b",.     
+00047200: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00047210: 2020 2020 2020 2020 2022 7472 6164 6549           "tradeI
+00047220: 7622 3a20 2222 2c0a 2020 2020 2020 2020  v": "",.        
+00047230: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00047240: 2020 2020 2020 2262 6c6f 636b 5472 6164        "blockTrad
+00047250: 6549 6422 3a20 2222 2c0a 2020 2020 2020  eId": "",.      
+00047260: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00047270: 2020 2020 2020 2020 226d 6172 6b50 7269          "markPri
+00047280: 6365 223a 2022 3131 3833 2e35 3422 2c0a  ce": "1183.54",.
+00047290: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000472a0: 2020 2020 2020 2020 2020 2020 2020 2265                "e
+000472b0: 7865 6350 7269 6365 223a 2022 3131 3930  xecPrice": "1190
+000472c0: 2e31 3522 2c0a 2020 2020 2020 2020 2320  .15",.        # 
+000472d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000472e0: 2020 2020 226d 6172 6b49 7622 3a20 2222      "markIv": ""
+000472f0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00047300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047310: 226f 7264 6572 5174 7922 3a20 2230 2e31  "orderQty": "0.1
+00047320: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00047330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047340: 2022 6f72 6465 7250 7269 6365 223a 2022   "orderPrice": "
+00047350: 3132 3336 2e39 222c 0a20 2020 2020 2020  1236.9",.       
+00047360: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00047370: 2020 2020 2020 2022 6578 6563 5661 6c75         "execValu
+00047380: 6522 3a20 2231 3139 2e30 3135 222c 0a20  e": "119.015",. 
+00047390: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000473a0: 2020 2020 2020 2020 2020 2020 2022 6578               "ex
+000473b0: 6563 5479 7065 223a 2022 5472 6164 6522  ecType": "Trade"
+000473c0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000473d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000473e0: 2265 7865 6351 7479 223a 2022 302e 3122  "execQty": "0.1"
+000473f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00047400: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
+00047410: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00047420: 2020 205d 0a20 2020 2020 2020 2023 2020     ].        #  
+00047430: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
+00047440: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
+00047450: 4578 7449 6e66 6f22 3a20 7b7d 2c0a 2020  ExtInfo": {},.  
+00047460: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00047470: 2274 696d 6522 3a20 3136 3732 3238 3337  "time": 16722837
+00047480: 3534 3531 300a 2020 2020 2020 2020 2320  54510.        # 
+00047490: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
+000474a0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+000474b0: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+000474c0: 2872 6573 706f 6e73 652c 2027 7265 7375  (response, 'resu
+000474d0: 6c74 272c 207b 7d29 0a20 2020 2020 2020  lt', {}).       
+000474e0: 2074 7261 6465 7320 3d20 7365 6c66 2e73   trades = self.s
+000474f0: 6166 655f 7661 6c75 6528 7265 7375 6c74  afe_value(result
+00047500: 2c20 276c 6973 7427 2c20 5b5d 290a 2020  , 'list', []).  
+00047510: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00047520: 662e 7061 7273 655f 7472 6164 6573 2874  f.parse_trades(t
+00047530: 7261 6465 732c 206d 6172 6b65 742c 2073  rades, market, s
+00047540: 696e 6365 2c20 6c69 6d69 7429 0a0a 2020  ince, limit)..  
+00047550: 2020 6173 796e 6320 6465 6620 6665 7463    async def fetc
+00047560: 685f 6d79 5f75 7364 635f 7472 6164 6573  h_my_usdc_trades
+00047570: 2873 656c 662c 2073 796d 626f 6c3a 204f  (self, symbol: O
+00047580: 7074 696f 6e61 6c5b 7374 725d 203d 204e  ptional[str] = N
+00047590: 6f6e 652c 2073 696e 6365 3a20 4f70 7469  one, since: Opti
+000475a0: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
+000475b0: 2c20 6c69 6d69 743a 204f 7074 696f 6e61  , limit: Optiona
+000475c0: 6c5b 696e 745d 203d 204e 6f6e 652c 2070  l[int] = None, p
+000475d0: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
+000475e0: 2020 2061 7761 6974 2073 656c 662e 6c6f     await self.lo
+000475f0: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
+00047600: 2020 2020 206d 6172 6b65 7420 3d20 4e6f       market = No
+00047610: 6e65 0a20 2020 2020 2020 2072 6571 7565  ne.        reque
+00047620: 7374 203d 207b 7d0a 2020 2020 2020 2020  st = {}.        
+00047630: 6966 2073 796d 626f 6c20 6973 206e 6f74  if symbol is not
+00047640: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00047650: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
+00047660: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
+00047670: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+00047680: 6573 745b 2773 796d 626f 6c27 5d20 3d20  est['symbol'] = 
+00047690: 6d61 726b 6574 5b27 6964 275d 0a20 2020  market['id'].   
+000476a0: 2020 2020 2020 2020 2072 6571 7565 7374           request
+000476b0: 5b27 6361 7465 676f 7279 275d 203d 2027  ['category'] = '
+000476c0: 4f50 5449 4f4e 2720 6966 206d 6172 6b65  OPTION' if marke
+000476d0: 745b 276f 7074 696f 6e27 5d20 656c 7365  t['option'] else
+000476e0: 2027 5045 5250 4554 5541 4c27 0a20 2020   'PERPETUAL'.   
+000476f0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00047700: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+00047710: 6361 7465 676f 7279 275d 203d 2027 5045  category'] = 'PE
+00047720: 5250 4554 5541 4c27 0a20 2020 2020 2020  RPETUAL'.       
+00047730: 2072 6573 706f 6e73 6520 3d20 6177 6169   response = awai
+00047740: 7420 7365 6c66 2e70 7269 7661 7465 506f  t self.privatePo
+00047750: 7374 4f70 7469 6f6e 5573 6463 4f70 656e  stOptionUsdcOpen
+00047760: 6170 6950 7269 7661 7465 5631 4578 6563  apiPrivateV1Exec
+00047770: 7574 696f 6e4c 6973 7428 7365 6c66 2e65  utionList(self.e
+00047780: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
+00047790: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
+000477a0: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+000477b0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+000477c0: 2020 2272 6573 756c 7422 3a20 7b0a 2020    "result": {.  
+000477d0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000477e0: 2263 7572 736f 7222 3a20 2232 3925 3341  "cursor": "29%3A
+000477f0: 3125 3243 3238 2533 4131 222c 0a20 2020  1%2C28%3A1",.   
+00047800: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00047810: 7265 7375 6c74 546f 7461 6c53 697a 6522  resultTotalSize"
+00047820: 3a20 322c 0a20 2020 2020 2020 2023 2020  : 2,.        #  
+00047830: 2020 2020 2020 2022 6461 7461 4c69 7374         "dataList
+00047840: 223a 205b 0a20 2020 2020 2020 2023 2020  ": [.        #  
+00047850: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+00047860: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00047870: 2022 7379 6d62 6f6c 223a 2022 4554 4850   "symbol": "ETHP
+00047880: 4552 5022 2c0a 2020 2020 2020 2020 2320  ERP",.        # 
+00047890: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+000478a0: 6572 4c69 6e6b 4964 223a 2022 222c 0a20  erLinkId": "",. 
+000478b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000478c0: 2020 2020 2022 7369 6465 223a 2022 5365       "side": "Se
+000478d0: 6c6c 222c 0a20 2020 2020 2020 2023 2020  ll",.        #  
+000478e0: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
+000478f0: 7249 6422 3a20 2264 3833 6638 6234 642d  rId": "d83f8b4d-
+00047900: 3266 3630 2d34 6530 342d 6136 3461 2d61  2f60-4e04-a64a-a
+00047910: 3366 3230 3739 3839 6463 3622 2c0a 2020  3f207989dc6",.  
+00047920: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00047930: 2020 2020 2265 7865 6346 6565 223a 2022      "execFee": "
+00047940: 302e 3032 3130 222c 0a20 2020 2020 2020  0.0210",.       
+00047950: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00047960: 6665 6552 6174 6522 3a20 2230 2e30 3030  feeRate": "0.000
+00047970: 3630 3022 2c0a 2020 2020 2020 2020 2320  600",.        # 
+00047980: 2020 2020 2020 2020 2020 2020 2262 6c6f              "blo
+00047990: 636b 5472 6164 6549 6422 3a20 2222 2c0a  ckTradeId": "",.
+000479a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000479b0: 2020 2020 2020 2274 7261 6465 5469 6d65        "tradeTime
+000479c0: 223a 2022 3136 3639 3139 3634 3233 3538  ": "166919642358
+000479d0: 3122 2c0a 2020 2020 2020 2020 2320 2020  1",.        #   
+000479e0: 2020 2020 2020 2020 2020 2265 7865 6350            "execP
+000479f0: 7269 6365 223a 2022 3131 3631 2e34 3522  rice": "1161.45"
+00047a00: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00047a10: 2020 2020 2020 2020 226c 6173 744c 6971          "lastLiq
+00047a20: 7569 6469 7479 496e 6422 3a20 2254 414b  uidityInd": "TAK
+00047a30: 4552 222c 0a20 2020 2020 2020 2023 2020  ER",.        #  
+00047a40: 2020 2020 2020 2020 2020 2022 6578 6563             "exec
+00047a50: 5661 6c75 6522 3a20 2233 342e 3834 3335  Value": "34.8435
+00047a60: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00047a70: 2020 2020 2020 2020 2022 6578 6563 5479           "execTy
+00047a80: 7065 223a 2022 5472 6164 6522 2c0a 2020  pe": "Trade",.  
+00047a90: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00047aa0: 2020 2020 2265 7865 6351 7479 223a 2022      "execQty": "
+00047ab0: 302e 3033 3022 2c0a 2020 2020 2020 2020  0.030",.        
+00047ac0: 2320 2020 2020 2020 2020 2020 2020 2274  #             "t
+00047ad0: 7261 6465 4964 223a 2022 6439 6161 3835  radeId": "d9aa85
+00047ae0: 3930 2d39 6536 612d 3537 3565 2d61 3162  90-9e6a-575e-a1b
+00047af0: 652d 6436 3236 3165 3665 6432 6535 220a  e-d6261e6ed2e5".
+00047b00: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00047b10: 2020 2020 7d2c 202e 2e2e 0a20 2020 2020      }, ....     
+00047b20: 2020 2023 2020 2020 2020 2020 205d 0a20     #         ]. 
+00047b30: 2020 2020 2020 2023 2020 2020 2020 207d         #       }
+00047b40: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00047b50: 2020 2272 6574 436f 6465 223a 2030 2c0a    "retCode": 0,.
+00047b60: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00047b70: 2272 6574 4d73 6722 3a20 2253 7563 6365  "retMsg": "Succe
+00047b80: 7373 2e22 0a20 2020 2020 2020 2023 2020  ss.".        #  
+00047b90: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
+00047ba0: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
+00047bb0: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
+00047bc0: 7265 7370 6f6e 7365 2c20 2772 6573 756c  response, 'resul
+00047bd0: 7427 2c20 7b7d 290a 2020 2020 2020 2020  t', {}).        
+00047be0: 6461 7461 4c69 7374 203d 2073 656c 662e  dataList = self.
+00047bf0: 7361 6665 5f76 616c 7565 2872 6573 756c  safe_value(resul
+00047c00: 742c 2027 6461 7461 4c69 7374 272c 205b  t, 'dataList', [
+00047c10: 5d29 0a20 2020 2020 2020 2072 6574 7572  ]).        retur
+00047c20: 6e20 7365 6c66 2e70 6172 7365 5f74 7261  n self.parse_tra
+00047c30: 6465 7328 6461 7461 4c69 7374 2c20 6d61  des(dataList, ma
+00047c40: 726b 6574 2c20 7369 6e63 652c 206c 696d  rket, since, lim
+00047c50: 6974 290a 0a20 2020 2061 7379 6e63 2064  it)..    async d
+00047c60: 6566 2066 6574 6368 5f6d 795f 7472 6164  ef fetch_my_trad
+00047c70: 6573 2873 656c 662c 2073 796d 626f 6c3a  es(self, symbol:
+00047c80: 204f 7074 696f 6e61 6c5b 7374 725d 203d   Optional[str] =
+00047c90: 204e 6f6e 652c 2073 696e 6365 3a20 4f70   None, since: Op
+00047ca0: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
+00047cb0: 6e65 2c20 6c69 6d69 743a 204f 7074 696f  ne, limit: Optio
+00047cc0: 6e61 6c5b 696e 745d 203d 204e 6f6e 652c  nal[int] = None,
+00047cd0: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
+00047ce0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00047cf0: 2066 6574 6368 2061 6c6c 2074 7261 6465   fetch all trade
+00047d00: 7320 6d61 6465 2062 7920 7468 6520 7573  s made by the us
+00047d10: 6572 0a20 2020 2020 2020 203a 7061 7261  er.        :para
+00047d20: 6d20 7374 7220 7379 6d62 6f6c 3a20 756e  m str symbol: un
+00047d30: 6966 6965 6420 6d61 726b 6574 2073 796d  ified market sym
+00047d40: 626f 6c0a 2020 2020 2020 2020 3a70 6172  bol.        :par
+00047d50: 616d 2069 6e74 7c4e 6f6e 6520 7369 6e63  am int|None sinc
+00047d60: 653a 2074 6865 2065 6172 6c69 6573 7420  e: the earliest 
+00047d70: 7469 6d65 2069 6e20 6d73 2074 6f20 6665  time in ms to fe
+00047d80: 7463 6820 7472 6164 6573 2066 6f72 0a20  tch trades for. 
+00047d90: 2020 2020 2020 203a 7061 7261 6d20 696e         :param in
+00047da0: 747c 4e6f 6e65 206c 696d 6974 3a20 7468  t|None limit: th
+00047db0: 6520 6d61 7869 6d75 6d20 6e75 6d62 6572  e maximum number
+00047dc0: 206f 6620 7472 6164 6573 2073 7472 7563   of trades struc
+00047dd0: 7475 7265 7320 746f 2072 6574 7269 6576  tures to retriev
+00047de0: 650a 2020 2020 2020 2020 3a70 6172 616d  e.        :param
+00047df0: 2064 6963 7420 7061 7261 6d73 3a20 6578   dict params: ex
+00047e00: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
+00047e10: 7065 6369 6669 6320 746f 2074 6865 2062  pecific to the b
+00047e20: 7962 6974 2061 7069 2065 6e64 706f 696e  ybit api endpoin
+00047e30: 740a 2020 2020 2020 2020 3a72 6574 7572  t.        :retur
+00047e40: 6e73 205b 6469 6374 5d3a 2061 206c 6973  ns [dict]: a lis
+00047e50: 7420 6f66 2060 7472 6164 6520 7374 7275  t of `trade stru
+00047e60: 6374 7572 6573 203c 6874 7470 733a 2f2f  ctures <https://
+00047e70: 646f 6373 2e63 6378 742e 636f 6d2f 232f  docs.ccxt.com/#/
+00047e80: 3f69 643d 7472 6164 652d 7374 7275 6374  ?id=trade-struct
+00047e90: 7572 653e 600a 2020 2020 2020 2020 2222  ure>`.        ""
+00047ea0: 220a 2020 2020 2020 2020 6177 6169 7420  ".        await 
+00047eb0: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
+00047ec0: 7328 290a 2020 2020 2020 2020 6d61 726b  s().        mark
+00047ed0: 6574 203d 204e 6f6e 650a 2020 2020 2020  et = None.      
+00047ee0: 2020 7365 7474 6c65 203d 2073 656c 662e    settle = self.
+00047ef0: 7361 6665 5f73 7472 696e 6728 7061 7261  safe_string(para
+00047f00: 6d73 2c20 2773 6574 746c 6543 6f69 6e27  ms, 'settleCoin'
+00047f10: 290a 2020 2020 2020 2020 6966 2073 6574  ).        if set
+00047f20: 746c 6520 6973 204e 6f6e 653a 0a20 2020  tle is None:.   
+00047f30: 2020 2020 2020 2020 2073 6574 746c 652c           settle,
+00047f40: 2070 6172 616d 7320 3d20 7365 6c66 2e68   params = self.h
+00047f50: 616e 646c 655f 6f70 7469 6f6e 5f61 6e64  andle_option_and
+00047f60: 5f70 6172 616d 7328 7061 7261 6d73 2c20  _params(params, 
+00047f70: 2766 6574 6368 4d79 5472 6164 6573 272c  'fetchMyTrades',
+00047f80: 2027 7365 7474 6c65 272c 2073 6574 746c   'settle', settl
+00047f90: 6529 0a20 2020 2020 2020 2069 6620 7379  e).        if sy
+00047fa0: 6d62 6f6c 2069 7320 6e6f 7420 4e6f 6e65  mbol is not None
+00047fb0: 3a0a 2020 2020 2020 2020 2020 2020 6d61  :.            ma
+00047fc0: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
+00047fd0: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
+00047fe0: 2020 2020 2020 2073 6574 746c 6520 3d20         settle = 
+00047ff0: 6d61 726b 6574 5b27 7365 7474 6c65 275d  market['settle']
+00048000: 0a20 2020 2020 2020 2073 7562 5479 7065  .        subType
+00048010: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+00048020: 7375 6254 7970 652c 2070 6172 616d 7320  subType, params 
+00048030: 3d20 7365 6c66 2e68 616e 646c 655f 7375  = self.handle_su
+00048040: 625f 7479 7065 5f61 6e64 5f70 6172 616d  b_type_and_param
+00048050: 7328 2766 6574 6368 4d79 5472 6164 6573  s('fetchMyTrades
+00048060: 272c 206d 6172 6b65 742c 2070 6172 616d  ', market, param
+00048070: 7329 0a20 2020 2020 2020 2069 7349 6e76  s).        isInv
+00048080: 6572 7365 203d 2073 7562 5479 7065 203d  erse = subType =
+00048090: 3d20 2769 6e76 6572 7365 270a 2020 2020  = 'inverse'.    
+000480a0: 2020 2020 6973 5573 6463 5365 7474 6c65      isUsdcSettle
+000480b0: 6420 3d20 7365 7474 6c65 203d 3d20 2755  d = settle == 'U
+000480c0: 5344 4327 0a20 2020 2020 2020 2069 734c  SDC'.        isL
+000480d0: 696e 6561 7253 6574 746c 6520 3d20 6973  inearSettle = is
+000480e0: 5573 6463 5365 7474 6c65 6420 6f72 2028  UsdcSettled or (
+000480f0: 7365 7474 6c65 203d 3d20 2755 5344 5427  settle == 'USDT'
+00048100: 290a 2020 2020 2020 2020 6966 2069 7349  ).        if isI
+00048110: 6e76 6572 7365 2061 6e64 2069 734c 696e  nverse and isLin
+00048120: 6561 7253 6574 746c 653a 0a20 2020 2020  earSettle:.     
+00048130: 2020 2020 2020 2072 6169 7365 2041 7267         raise Arg
+00048140: 756d 656e 7473 5265 7175 6972 6564 2873  umentsRequired(s
+00048150: 656c 662e 6964 202b 2027 2066 6574 6368  elf.id + ' fetch
+00048160: 4d79 5472 6164 6573 2077 6974 6820 696e  MyTrades with in
+00048170: 7665 7273 6520 7375 6254 7970 6520 7265  verse subType re
+00048180: 7175 6972 6573 2073 6574 746c 6520 746f  quires settle to
+00048190: 206e 6f74 2062 6520 5553 4454 206f 7220   not be USDT or 
+000481a0: 5553 4443 2729 0a20 2020 2020 2020 2074  USDC').        t
+000481b0: 7970 652c 2071 7565 7279 203d 2073 656c  ype, query = sel
+000481c0: 662e 6861 6e64 6c65 5f6d 6172 6b65 745f  f.handle_market_
+000481d0: 7479 7065 5f61 6e64 5f70 6172 616d 7328  type_and_params(
+000481e0: 2766 6574 6368 4d79 5472 6164 6573 272c  'fetchMyTrades',
+000481f0: 206d 6172 6b65 742c 2070 6172 616d 7329   market, params)
+00048200: 0a20 2020 2020 2020 2065 6e61 626c 6555  .        enableU
+00048210: 6e69 6669 6564 4d61 7267 696e 2c20 656e  nifiedMargin, en
+00048220: 6162 6c65 556e 6966 6965 6441 6363 6f75  ableUnifiedAccou
+00048230: 6e74 203d 2061 7761 6974 2073 656c 662e  nt = await self.
+00048240: 6973 5f75 6e69 6669 6564 5f65 6e61 626c  is_unified_enabl
+00048250: 6564 2829 0a20 2020 2020 2020 2069 6620  ed().        if 
+00048260: 656e 6162 6c65 556e 6966 6965 6441 6363  enableUnifiedAcc
+00048270: 6f75 6e74 2061 6e64 206e 6f74 2069 7349  ount and not isI
+00048280: 6e76 6572 7365 3a0a 2020 2020 2020 2020  nverse:.        
+00048290: 2020 2020 6f72 6465 7249 6420 3d20 7365      orderId = se
+000482a0: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
+000482b0: 6172 616d 732c 2027 6f72 6465 7249 6427  arams, 'orderId'
+000482c0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+000482d0: 206f 7264 6572 4964 2069 7320 4e6f 6e65   orderId is None
+000482e0: 2061 6e64 2074 7970 6520 213d 2027 7370   and type != 'sp
+000482f0: 6f74 273a 0a20 2020 2020 2020 2020 2020  ot':.           
+00048300: 2020 2020 2073 656c 662e 6368 6563 6b5f       self.check_
+00048310: 7265 7175 6972 6564 5f73 796d 626f 6c28  required_symbol(
+00048320: 2766 6574 6368 4d79 5472 6164 6573 272c  'fetchMyTrades',
+00048330: 2073 796d 626f 6c29 0a20 2020 2020 2020   symbol).       
+00048340: 2020 2020 2072 6574 7572 6e20 6177 6169       return awai
+00048350: 7420 7365 6c66 2e66 6574 6368 5f6d 795f  t self.fetch_my_
+00048360: 756e 6966 6965 645f 7472 6164 6573 2873  unified_trades(s
+00048370: 796d 626f 6c2c 2073 696e 6365 2c20 6c69  ymbol, since, li
+00048380: 6d69 742c 2071 7565 7279 290a 2020 2020  mit, query).    
+00048390: 2020 2020 656c 6966 2074 7970 6520 3d3d      elif type ==
+000483a0: 2027 7370 6f74 273a 0a20 2020 2020 2020   'spot':.       
+000483b0: 2020 2020 2072 6574 7572 6e20 6177 6169       return awai
+000483c0: 7420 7365 6c66 2e66 6574 6368 5f6d 795f  t self.fetch_my_
+000483d0: 7370 6f74 5f74 7261 6465 7328 7379 6d62  spot_trades(symb
+000483e0: 6f6c 2c20 7369 6e63 652c 206c 696d 6974  ol, since, limit
+000483f0: 2c20 7175 6572 7929 0a20 2020 2020 2020  , query).       
+00048400: 2065 6c69 6620 656e 6162 6c65 556e 6966   elif enableUnif
+00048410: 6965 644d 6172 6769 6e20 616e 6420 6e6f  iedMargin and no
+00048420: 7420 6973 496e 7665 7273 653a 0a20 2020  t isInverse:.   
+00048430: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00048440: 6177 6169 7420 7365 6c66 2e66 6574 6368  await self.fetch
+00048450: 5f6d 795f 756e 6966 6965 645f 6d61 7267  _my_unified_marg
+00048460: 696e 5f74 7261 6465 7328 7379 6d62 6f6c  in_trades(symbol
+00048470: 2c20 7369 6e63 652c 206c 696d 6974 2c20  , since, limit, 
+00048480: 7175 6572 7929 0a20 2020 2020 2020 2065  query).        e
+00048490: 6c69 6620 6973 5573 6463 5365 7474 6c65  lif isUsdcSettle
+000484a0: 643a 0a20 2020 2020 2020 2020 2020 2072  d:.            r
+000484b0: 6574 7572 6e20 6177 6169 7420 7365 6c66  eturn await self
+000484c0: 2e66 6574 6368 5f6d 795f 7573 6463 5f74  .fetch_my_usdc_t
+000484d0: 7261 6465 7328 7379 6d62 6f6c 2c20 7369  rades(symbol, si
+000484e0: 6e63 652c 206c 696d 6974 2c20 7175 6572  nce, limit, quer
+000484f0: 7929 0a20 2020 2020 2020 2065 6c73 653a  y).        else:
+00048500: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00048510: 7572 6e20 6177 6169 7420 7365 6c66 2e66  urn await self.f
+00048520: 6574 6368 5f6d 795f 636f 6e74 7261 6374  etch_my_contract
+00048530: 5f74 7261 6465 7328 7379 6d62 6f6c 2c20  _trades(symbol, 
+00048540: 7369 6e63 652c 206c 696d 6974 2c20 7175  since, limit, qu
+00048550: 6572 7929 0a0a 2020 2020 6465 6620 7061  ery)..    def pa
+00048560: 7273 655f 6465 706f 7369 745f 6164 6472  rse_deposit_addr
+00048570: 6573 7328 7365 6c66 2c20 6465 706f 7369  ess(self, deposi
+00048580: 7441 6464 7265 7373 2c20 6375 7272 656e  tAddress, curren
+00048590: 6379 3d4e 6f6e 6529 3a0a 2020 2020 2020  cy=None):.      
+000485a0: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
+000485b0: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+000485c0: 2020 2020 2020 6368 6169 6e54 7970 653a        chainType:
+000485d0: 2027 4552 4332 3027 2c0a 2020 2020 2020   'ERC20',.      
+000485e0: 2020 2320 2020 2020 2020 2020 6164 6472    #         addr
+000485f0: 6573 7344 6570 6f73 6974 3a20 2730 7866  essDeposit: '0xf
+00048600: 3536 3239 3763 3637 3137 6331 6431 6334  56297c6717c1d1c4
+00048610: 3263 3330 3332 3434 3638 6564 3530 6139  2c30324468ed50a9
+00048620: 6237 3430 3265 6527 2c0a 2020 2020 2020  b7402ee',.      
+00048630: 2020 2320 2020 2020 2020 2020 7461 6744    #         tagD
+00048640: 6570 6f73 6974 3a20 2727 2c0a 2020 2020  eposit: '',.    
+00048650: 2020 2020 2320 2020 2020 2020 2020 6368      #         ch
+00048660: 6169 6e3a 2027 4554 4827 0a20 2020 2020  ain: 'ETH'.     
+00048670: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
+00048680: 2020 2023 0a20 2020 2020 2020 2061 6464     #.        add
+00048690: 7265 7373 203d 2073 656c 662e 7361 6665  ress = self.safe
+000486a0: 5f73 7472 696e 6728 6465 706f 7369 7441  _string(depositA
+000486b0: 6464 7265 7373 2c20 2761 6464 7265 7373  ddress, 'address
+000486c0: 4465 706f 7369 7427 290a 2020 2020 2020  Deposit').      
+000486d0: 2020 7461 6720 3d20 7365 6c66 2e73 6166    tag = self.saf
+000486e0: 655f 7374 7269 6e67 2864 6570 6f73 6974  e_string(deposit
+000486f0: 4164 6472 6573 732c 2027 7461 6744 6570  Address, 'tagDep
+00048700: 6f73 6974 2729 0a20 2020 2020 2020 2063  osit').        c
+00048710: 6f64 6520 3d20 7365 6c66 2e73 6166 655f  ode = self.safe_
+00048720: 7374 7269 6e67 2863 7572 7265 6e63 792c  string(currency,
+00048730: 2027 636f 6465 2729 0a20 2020 2020 2020   'code').       
+00048740: 2063 6861 696e 203d 2073 656c 662e 7361   chain = self.sa
+00048750: 6665 5f73 7472 696e 6728 6465 706f 7369  fe_string(deposi
+00048760: 7441 6464 7265 7373 2c20 2763 6861 696e  tAddress, 'chain
+00048770: 2729 0a20 2020 2020 2020 2073 656c 662e  ').        self.
+00048780: 6368 6563 6b5f 6164 6472 6573 7328 6164  check_address(ad
+00048790: 6472 6573 7329 0a20 2020 2020 2020 2072  dress).        r
+000487a0: 6574 7572 6e20 7b0a 2020 2020 2020 2020  eturn {.        
+000487b0: 2020 2020 2763 7572 7265 6e63 7927 3a20      'currency': 
+000487c0: 636f 6465 2c0a 2020 2020 2020 2020 2020  code,.          
+000487d0: 2020 2761 6464 7265 7373 273a 2061 6464    'address': add
+000487e0: 7265 7373 2c0a 2020 2020 2020 2020 2020  ress,.          
+000487f0: 2020 2774 6167 273a 2074 6167 2c0a 2020    'tag': tag,.  
+00048800: 2020 2020 2020 2020 2020 276e 6574 776f            'netwo
+00048810: 726b 273a 2063 6861 696e 2c0a 2020 2020  rk': chain,.    
+00048820: 2020 2020 2020 2020 2769 6e66 6f27 3a20          'info': 
+00048830: 6465 706f 7369 7441 6464 7265 7373 2c0a  depositAddress,.
+00048840: 2020 2020 2020 2020 7d0a 0a20 2020 2061          }..    a
+00048850: 7379 6e63 2064 6566 2066 6574 6368 5f64  sync def fetch_d
+00048860: 6570 6f73 6974 5f61 6464 7265 7373 6573  eposit_addresses
+00048870: 5f62 795f 6e65 7477 6f72 6b28 7365 6c66  _by_network(self
+00048880: 2c20 636f 6465 3a20 7374 722c 2070 6172  , code: str, par
+00048890: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
+000488a0: 2022 2222 0a20 2020 2020 2020 2066 6574   """.        fet
+000488b0: 6368 2061 2064 6963 7469 6f6e 6172 7920  ch a dictionary 
+000488c0: 6f66 2061 6464 7265 7373 6573 2066 6f72  of addresses for
+000488d0: 2061 2063 7572 7265 6e63 792c 2069 6e64   a currency, ind
+000488e0: 6578 6564 2062 7920 6e65 7477 6f72 6b0a  exed by network.
+000488f0: 2020 2020 2020 2020 7365 6520 6874 7470          see http
+00048900: 733a 2f2f 6279 6269 742d 6578 6368 616e  s://bybit-exchan
+00048910: 6765 2e67 6974 6875 622e 696f 2f64 6f63  ge.github.io/doc
+00048920: 732f 7635 2f61 7373 6574 2f6d 6173 7465  s/v5/asset/maste
+00048930: 722d 6465 706f 7369 742d 6164 6472 0a20  r-deposit-addr. 
+00048940: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
+00048950: 7220 636f 6465 3a20 756e 6966 6965 6420  r code: unified 
+00048960: 6375 7272 656e 6379 2063 6f64 6520 6f66  currency code of
+00048970: 2074 6865 2063 7572 7265 6e63 7920 666f   the currency fo
+00048980: 7220 7468 6520 6465 706f 7369 7420 6164  r the deposit ad
+00048990: 6472 6573 730a 2020 2020 2020 2020 3a70  dress.        :p
+000489a0: 6172 616d 2064 6963 7420 7061 7261 6d73  aram dict params
+000489b0: 3a20 6578 7472 6120 7061 7261 6d65 7465  : extra paramete
+000489c0: 7273 2073 7065 6369 6669 6320 746f 2074  rs specific to t
+000489d0: 6865 2062 7962 6974 2061 7069 2065 6e64  he bybit api end
+000489e0: 706f 696e 740a 2020 2020 2020 2020 3a72  point.        :r
+000489f0: 6574 7572 6e73 2064 6963 743a 2061 2064  eturns dict: a d
+00048a00: 6963 7469 6f6e 6172 7920 6f66 2060 6164  ictionary of `ad
+00048a10: 6472 6573 7320 7374 7275 6374 7572 6573  dress structures
+00048a20: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
+00048a30: 6378 742e 636f 6d2f 232f 3f69 643d 6164  cxt.com/#/?id=ad
+00048a40: 6472 6573 732d 7374 7275 6374 7572 653e  dress-structure>
+00048a50: 6020 696e 6465 7865 6420 6279 2074 6865  ` indexed by the
+00048a60: 206e 6574 776f 726b 0a20 2020 2020 2020   network.       
+00048a70: 2022 2222 0a20 2020 2020 2020 2061 7761   """.        awa
+00048a80: 6974 2073 656c 662e 6c6f 6164 5f6d 6172  it self.load_mar
+00048a90: 6b65 7473 2829 0a20 2020 2020 2020 2063  kets().        c
+00048aa0: 7572 7265 6e63 7920 3d20 7365 6c66 2e63  urrency = self.c
+00048ab0: 7572 7265 6e63 7928 636f 6465 290a 2020  urrency(code).  
+00048ac0: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
+00048ad0: 7b0a 2020 2020 2020 2020 2020 2020 2763  {.            'c
+00048ae0: 6f69 6e27 3a20 6375 7272 656e 6379 5b27  oin': currency['
+00048af0: 6964 275d 2c0a 2020 2020 2020 2020 7d0a  id'],.        }.
+00048b00: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
+00048b10: 203d 2061 7761 6974 2073 656c 662e 7072   = await self.pr
+00048b20: 6976 6174 6547 6574 5635 4173 7365 7444  ivateGetV5AssetD
+00048b30: 6570 6f73 6974 5175 6572 7941 6464 7265  epositQueryAddre
+00048b40: 7373 2873 656c 662e 6578 7465 6e64 2872  ss(self.extend(r
+00048b50: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
+00048b60: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+00048b70: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
+00048b80: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+00048b90: 7443 6f64 6522 3a20 302c 0a20 2020 2020  tCode": 0,.     
+00048ba0: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+00048bb0: 744d 7367 223a 2022 7375 6363 6573 7322  tMsg": "success"
+00048bc0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00048bd0: 2020 2020 2272 6573 756c 7422 3a20 7b0a      "result": {.
+00048be0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00048bf0: 2020 2020 2020 2263 6f69 6e22 3a20 2255        "coin": "U
+00048c00: 5344 5422 2c0a 2020 2020 2020 2020 2320  SDT",.        # 
+00048c10: 2020 2020 2020 2020 2020 2020 2263 6861              "cha
+00048c20: 696e 7322 3a20 5b0a 2020 2020 2020 2020  ins": [.        
+00048c30: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00048c40: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+00048c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048c60: 2020 2263 6861 696e 5479 7065 223a 2022    "chainType": "
+00048c70: 4552 4332 3022 2c0a 2020 2020 2020 2020  ERC20",.        
+00048c80: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00048c90: 2020 2020 2020 2261 6464 7265 7373 4465        "addressDe
+00048ca0: 706f 7369 7422 3a20 2230 7864 3965 3163  posit": "0xd9e1c
+00048cb0: 6437 3761 6661 3065 3530 6234 3532 6136  d77afa0e50b452a6
+00048cc0: 3266 6262 3638 6133 3334 3036 3032 3238  2fbb68a334060228
+00048cd0: 3663 3322 2c0a 2020 2020 2020 2020 2320  6c3",.        # 
+00048ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048cf0: 2020 2020 2274 6167 4465 706f 7369 7422      "tagDeposit"
+00048d00: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
+00048d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048d20: 2020 2020 2263 6861 696e 223a 2022 4554      "chain": "ET
+00048d30: 4822 0a20 2020 2020 2020 2023 2020 2020  H".        #    
+00048d40: 2020 2020 2020 2020 2020 2020 207d 0a20               }. 
+00048d50: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00048d60: 2020 2020 205d 0a20 2020 2020 2020 2023       ].        #
+00048d70: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
+00048d80: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
+00048d90: 6574 4578 7449 6e66 6f22 3a20 7b7d 2c0a  etExtInfo": {},.
+00048da0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00048db0: 2020 2274 696d 6522 3a20 3136 3732 3139    "time": 167219
+00048dc0: 3237 3932 3836 300a 2020 2020 2020 2020  2792860.        
+00048dd0: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
+00048de0: 230a 2020 2020 2020 2020 7265 7375 6c74  #.        result
+00048df0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+00048e00: 7565 2872 6573 706f 6e73 652c 2027 7265  ue(response, 're
+00048e10: 7375 6c74 272c 205b 5d29 0a20 2020 2020  sult', []).     
+00048e20: 2020 2063 6861 696e 7320 3d20 7365 6c66     chains = self
+00048e30: 2e73 6166 655f 7661 6c75 6528 7265 7375  .safe_value(resu
+00048e40: 6c74 2c20 2763 6861 696e 7327 2c20 5b5d  lt, 'chains', []
+00048e50: 290a 2020 2020 2020 2020 636f 696e 203d  ).        coin =
+00048e60: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+00048e70: 6728 7265 7375 6c74 2c20 2763 6f69 6e27  g(result, 'coin'
+00048e80: 290a 2020 2020 2020 2020 6375 7272 656e  ).        curren
+00048e90: 6379 203d 2073 656c 662e 6375 7272 656e  cy = self.curren
+00048ea0: 6379 2863 6f69 6e29 0a20 2020 2020 2020  cy(coin).       
+00048eb0: 2070 6172 7365 6420 3d20 7365 6c66 2e70   parsed = self.p
+00048ec0: 6172 7365 5f64 6570 6f73 6974 5f61 6464  arse_deposit_add
+00048ed0: 7265 7373 6573 2863 6861 696e 732c 205b  resses(chains, [
+00048ee0: 6375 7272 656e 6379 5b27 636f 6465 275d  currency['code']
+00048ef0: 5d2c 2046 616c 7365 2c20 7b0a 2020 2020  ], False, {.    
+00048f00: 2020 2020 2020 2020 2763 7572 7265 6e63          'currenc
+00048f10: 7927 3a20 6375 7272 656e 6379 5b27 6964  y': currency['id
+00048f20: 275d 2c0a 2020 2020 2020 2020 7d29 0a20  '],.        }). 
+00048f30: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00048f40: 6c66 2e69 6e64 6578 5f62 7928 7061 7273  lf.index_by(pars
+00048f50: 6564 2c20 276e 6574 776f 726b 2729 0a0a  ed, 'network')..
+00048f60: 2020 2020 6173 796e 6320 6465 6620 6665      async def fe
+00048f70: 7463 685f 6465 706f 7369 745f 6164 6472  tch_deposit_addr
+00048f80: 6573 7328 7365 6c66 2c20 636f 6465 3a20  ess(self, code: 
+00048f90: 7374 722c 2070 6172 616d 733d 7b7d 293a  str, params={}):
+00048fa0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00048fb0: 2020 2020 2066 6574 6368 2074 6865 2064       fetch the d
+00048fc0: 6570 6f73 6974 2061 6464 7265 7373 2066  eposit address f
+00048fd0: 6f72 2061 2063 7572 7265 6e63 7920 6173  or a currency as
+00048fe0: 736f 6369 6174 6564 2077 6974 6820 7365  sociated with se
+00048ff0: 6c66 2061 6363 6f75 6e74 0a20 2020 2020  lf account.     
+00049000: 2020 2073 6565 2068 7474 7073 3a2f 2f62     see https://b
+00049010: 7962 6974 2d65 7863 6861 6e67 652e 6769  ybit-exchange.gi
+00049020: 7468 7562 2e69 6f2f 646f 6373 2f76 352f  thub.io/docs/v5/
+00049030: 6173 7365 742f 6d61 7374 6572 2d64 6570  asset/master-dep
+00049040: 6f73 6974 2d61 6464 720a 2020 2020 2020  osit-addr.      
+00049050: 2020 3a70 6172 616d 2073 7472 2063 6f64    :param str cod
+00049060: 653a 2075 6e69 6669 6564 2063 7572 7265  e: unified curre
+00049070: 6e63 7920 636f 6465 0a20 2020 2020 2020  ncy code.       
+00049080: 203a 7061 7261 6d20 6469 6374 2070 6172   :param dict par
+00049090: 616d 733a 2065 7874 7261 2070 6172 616d  ams: extra param
+000490a0: 6574 6572 7320 7370 6563 6966 6963 2074  eters specific t
+000490b0: 6f20 7468 6520 6279 6269 7420 6170 6920  o the bybit api 
+000490c0: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
+000490d0: 203a 7265 7475 726e 7320 6469 6374 3a20   :returns dict: 
+000490e0: 616e 2060 6164 6472 6573 7320 7374 7275  an `address stru
+000490f0: 6374 7572 6520 3c68 7474 7073 3a2f 2f64  cture <https://d
+00049100: 6f63 732e 6363 7874 2e63 6f6d 2f23 2f3f  ocs.ccxt.com/#/?
+00049110: 6964 3d61 6464 7265 7373 2d73 7472 7563  id=address-struc
+00049120: 7475 7265 3e60 0a20 2020 2020 2020 2022  ture>`.        "
+00049130: 2222 0a20 2020 2020 2020 2061 7761 6974  "".        await
+00049140: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
+00049150: 7473 2829 0a20 2020 2020 2020 206e 6574  ts().        net
+00049160: 776f 726b 436f 6465 2c20 7175 6572 7920  workCode, query 
+00049170: 3d20 7365 6c66 2e68 616e 646c 655f 6e65  = self.handle_ne
+00049180: 7477 6f72 6b5f 636f 6465 5f61 6e64 5f70  twork_code_and_p
+00049190: 6172 616d 7328 7061 7261 6d73 290a 2020  arams(params).  
+000491a0: 2020 2020 2020 6e65 7477 6f72 6b49 6420        networkId 
+000491b0: 3d20 7365 6c66 2e6e 6574 776f 726b 5f63  = self.network_c
+000491c0: 6f64 655f 746f 5f69 6428 6e65 7477 6f72  ode_to_id(networ
+000491d0: 6b43 6f64 6529 0a20 2020 2020 2020 2063  kCode).        c
+000491e0: 7572 7265 6e63 7920 3d20 7365 6c66 2e63  urrency = self.c
+000491f0: 7572 7265 6e63 7928 636f 6465 290a 2020  urrency(code).  
+00049200: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
+00049210: 7b0a 2020 2020 2020 2020 2020 2020 2763  {.            'c
+00049220: 6f69 6e27 3a20 6375 7272 656e 6379 5b27  oin': currency['
+00049230: 6964 275d 2c0a 2020 2020 2020 2020 7d0a  id'],.        }.
+00049240: 2020 2020 2020 2020 6966 206e 6574 776f          if netwo
+00049250: 726b 4964 2069 7320 6e6f 7420 4e6f 6e65  rkId is not None
+00049260: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00049270: 7175 6573 745b 2763 6861 696e 5479 7065  quest['chainType
+00049280: 275d 203d 206e 6574 776f 726b 4964 0a20  '] = networkId. 
+00049290: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+000492a0: 3d20 6177 6169 7420 7365 6c66 2e70 7269  = await self.pri
+000492b0: 7661 7465 4765 7456 3541 7373 6574 4465  vateGetV5AssetDe
+000492c0: 706f 7369 7451 7565 7279 4164 6472 6573  positQueryAddres
+000492d0: 7328 7365 6c66 2e65 7874 656e 6428 7265  s(self.extend(re
+000492e0: 7175 6573 742c 2071 7565 7279 2929 0a20  quest, query)). 
+000492f0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+00049300: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
+00049310: 2023 2020 2020 2020 2020 2022 7265 7443   #         "retC
+00049320: 6f64 6522 3a20 302c 0a20 2020 2020 2020  ode": 0,.       
+00049330: 2023 2020 2020 2020 2020 2022 7265 744d   #         "retM
+00049340: 7367 223a 2022 7375 6363 6573 7322 2c0a  sg": "success",.
+00049350: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00049360: 2020 2272 6573 756c 7422 3a20 7b0a 2020    "result": {.  
+00049370: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00049380: 2020 2020 2263 6f69 6e22 3a20 2255 5344      "coin": "USD
+00049390: 5422 2c0a 2020 2020 2020 2020 2320 2020  T",.        #   
+000493a0: 2020 2020 2020 2020 2020 2263 6861 696e            "chain
+000493b0: 7322 3a20 5b0a 2020 2020 2020 2020 2320  s": [.        # 
+000493c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000493d0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+000493e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000493f0: 2263 6861 696e 5479 7065 223a 2022 4552  "chainType": "ER
+00049400: 4332 3022 2c0a 2020 2020 2020 2020 2320  C20",.        # 
+00049410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00049420: 2020 2020 2261 6464 7265 7373 4465 706f      "addressDepo
+00049430: 7369 7422 3a20 2230 7864 3965 3163 6437  sit": "0xd9e1cd7
+00049440: 3761 6661 3065 3530 6234 3532 6136 3266  7afa0e50b452a62f
+00049450: 6262 3638 6133 3334 3036 3032 3238 3663  bb68a3340602286c
+00049460: 3322 2c0a 2020 2020 2020 2020 2320 2020  3",.        #   
+00049470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00049480: 2020 2274 6167 4465 706f 7369 7422 3a20    "tagDeposit": 
+00049490: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
+000494a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000494b0: 2020 2263 6861 696e 223a 2022 4554 4822    "chain": "ETH"
+000494c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000494d0: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
+000494e0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+000494f0: 2020 205d 0a20 2020 2020 2020 2023 2020     ].        #  
+00049500: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
+00049510: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
+00049520: 4578 7449 6e66 6f22 3a20 7b7d 2c0a 2020  ExtInfo": {},.  
+00049530: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00049540: 2274 696d 6522 3a20 3136 3732 3139 3237  "time": 16721927
+00049550: 3932 3836 300a 2020 2020 2020 2020 2320  92860.        # 
+00049560: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
+00049570: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00049580: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+00049590: 2872 6573 706f 6e73 652c 2027 7265 7375  (response, 'resu
+000495a0: 6c74 272c 207b 7d29 0a20 2020 2020 2020  lt', {}).       
+000495b0: 2063 6861 696e 7320 3d20 7365 6c66 2e73   chains = self.s
+000495c0: 6166 655f 7661 6c75 6528 7265 7375 6c74  afe_value(result
+000495d0: 2c20 2763 6861 696e 7327 2c20 5b5d 290a  , 'chains', []).
+000495e0: 2020 2020 2020 2020 6368 6169 6e73 496e          chainsIn
+000495f0: 6465 7865 6442 7949 6420 3d20 7365 6c66  dexedById = self
+00049600: 2e69 6e64 6578 5f62 7928 6368 6169 6e73  .index_by(chains
+00049610: 2c20 2763 6861 696e 2729 0a20 2020 2020  , 'chain').     
+00049620: 2020 2073 656c 6563 7465 644e 6574 776f     selectedNetwo
+00049630: 726b 4964 203d 2073 656c 662e 7365 6c65  rkId = self.sele
+00049640: 6374 5f6e 6574 776f 726b 5f69 645f 6672  ct_network_id_fr
+00049650: 6f6d 5f72 6177 5f6e 6574 776f 726b 7328  om_raw_networks(
+00049660: 636f 6465 2c20 6e65 7477 6f72 6b43 6f64  code, networkCod
+00049670: 652c 2063 6861 696e 7349 6e64 6578 6564  e, chainsIndexed
+00049680: 4279 4964 290a 2020 2020 2020 2020 6164  ById).        ad
+00049690: 6472 6573 734f 626a 6563 7420 3d20 7365  dressObject = se
+000496a0: 6c66 2e73 6166 655f 7661 6c75 6528 6368  lf.safe_value(ch
+000496b0: 6169 6e73 496e 6465 7865 6442 7949 642c  ainsIndexedById,
+000496c0: 2073 656c 6563 7465 644e 6574 776f 726b   selectedNetwork
+000496d0: 4964 2c20 7b7d 290a 2020 2020 2020 2020  Id, {}).        
+000496e0: 7265 7475 726e 2073 656c 662e 7061 7273  return self.pars
+000496f0: 655f 6465 706f 7369 745f 6164 6472 6573  e_deposit_addres
+00049700: 7328 6164 6472 6573 734f 626a 6563 742c  s(addressObject,
+00049710: 2063 7572 7265 6e63 7929 0a0a 2020 2020   currency)..    
+00049720: 6173 796e 6320 6465 6620 6665 7463 685f  async def fetch_
+00049730: 6465 706f 7369 7473 2873 656c 662c 2063  deposits(self, c
+00049740: 6f64 653a 204f 7074 696f 6e61 6c5b 7374  ode: Optional[st
+00049750: 725d 203d 204e 6f6e 652c 2073 696e 6365  r] = None, since
+00049760: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
+00049770: 3d20 4e6f 6e65 2c20 6c69 6d69 743a 204f  = None, limit: O
+00049780: 7074 696f 6e61 6c5b 696e 745d 203d 204e  ptional[int] = N
+00049790: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
+000497a0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+000497b0: 2020 2020 2066 6574 6368 2061 6c6c 2064       fetch all d
+000497c0: 6570 6f73 6974 7320 6d61 6465 2074 6f20  eposits made to 
+000497d0: 616e 2061 6363 6f75 6e74 0a20 2020 2020  an account.     
+000497e0: 2020 2073 6565 2068 7474 7073 3a2f 2f62     see https://b
+000497f0: 7962 6974 2d65 7863 6861 6e67 652e 6769  ybit-exchange.gi
+00049800: 7468 7562 2e69 6f2f 646f 6373 2f76 352f  thub.io/docs/v5/
+00049810: 6173 7365 742f 6465 706f 7369 742d 7265  asset/deposit-re
+00049820: 636f 7264 0a20 2020 2020 2020 203a 7061  cord.        :pa
+00049830: 7261 6d20 7374 727c 4e6f 6e65 2063 6f64  ram str|None cod
+00049840: 653a 2075 6e69 6669 6564 2063 7572 7265  e: unified curre
+00049850: 6e63 7920 636f 6465 0a20 2020 2020 2020  ncy code.       
+00049860: 203a 7061 7261 6d20 696e 747c 4e6f 6e65   :param int|None
+00049870: 2073 696e 6365 3a20 7468 6520 6561 726c   since: the earl
+00049880: 6965 7374 2074 696d 6520 696e 206d 7320  iest time in ms 
+00049890: 746f 2066 6574 6368 2064 6570 6f73 6974  to fetch deposit
+000498a0: 7320 666f 722c 2064 6566 6175 6c74 203d  s for, default =
+000498b0: 2033 3020 6461 7973 2062 6566 6f72 6520   30 days before 
+000498c0: 7468 6520 6375 7272 656e 7420 7469 6d65  the current time
+000498d0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+000498e0: 696e 747c 4e6f 6e65 206c 696d 6974 3a20  int|None limit: 
+000498f0: 7468 6520 6d61 7869 6d75 6d20 6e75 6d62  the maximum numb
+00049900: 6572 206f 6620 6465 706f 7369 7473 2073  er of deposits s
+00049910: 7472 7563 7475 7265 7320 746f 2072 6574  tructures to ret
+00049920: 7269 6576 652c 2064 6566 6175 6c74 203d  rieve, default =
+00049930: 2035 302c 206d 6178 203d 2035 300a 2020   50, max = 50.  
+00049940: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
+00049950: 7420 7061 7261 6d73 3a20 6578 7472 6120  t params: extra 
+00049960: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
+00049970: 6669 6320 746f 2074 6865 2062 7962 6974  fic to the bybit
+00049980: 2061 7069 2065 6e64 706f 696e 740a 2020   api endpoint.  
+00049990: 2020 2020 2020 3a70 6172 616d 2069 6e74        :param int
+000499a0: 7c4e 6f6e 6520 7061 7261 6d73 5b27 756e  |None params['un
+000499b0: 7469 6c27 5d3a 2074 6865 206c 6174 6573  til']: the lates
+000499c0: 7420 7469 6d65 2069 6e20 6d73 2074 6f20  t time in ms to 
+000499d0: 6665 7463 6820 6465 706f 7369 7473 2066  fetch deposits f
+000499e0: 6f72 2c20 6465 6661 756c 7420 3d20 3330  or, default = 30
+000499f0: 2064 6179 7320 6166 7465 7220 7369 6e63   days after sinc
+00049a00: 650a 2020 2020 2020 2020 202a 0a20 2020  e.         *.   
+00049a10: 2020 2020 2020 2a20 4558 4348 414e 4745        * EXCHANGE
+00049a20: 2053 5045 4349 4649 4320 5041 5241 4d45   SPECIFIC PARAME
+00049a30: 5445 5253 0a20 2020 2020 2020 203a 7061  TERS.        :pa
+00049a40: 7261 6d20 7374 727c 4e6f 6e65 2070 6172  ram str|None par
+00049a50: 616d 735b 2763 7572 736f 7227 5d3a 2075  ams['cursor']: u
+00049a60: 7365 6420 666f 7220 7061 6769 6e61 7469  sed for paginati
+00049a70: 6f6e 0a20 2020 2020 2020 203a 7265 7475  on.        :retu
+00049a80: 726e 7320 5b64 6963 745d 3a20 6120 6c69  rns [dict]: a li
+00049a90: 7374 206f 6620 6074 7261 6e73 6163 7469  st of `transacti
+00049aa0: 6f6e 2073 7472 7563 7475 7265 7320 3c68  on structures <h
+00049ab0: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
+00049ac0: 2e63 6f6d 2f23 2f3f 6964 3d74 7261 6e73  .com/#/?id=trans
+00049ad0: 6163 7469 6f6e 2d73 7472 7563 7475 7265  action-structure
+00049ae0: 3e60 0a20 2020 2020 2020 2222 220a 2020  >`.       """.  
+00049af0: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
+00049b00: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
+00049b10: 2020 2020 2020 2020 7265 7175 6573 7420          request 
+00049b20: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+00049b30: 2320 2763 6f69 6e27 3a20 6375 7272 656e  # 'coin': curren
+00049b40: 6379 5b27 6964 275d 2c0a 2020 2020 2020  cy['id'],.      
+00049b50: 2020 2020 2020 2320 276c 696d 6974 273a        # 'limit':
+00049b60: 2032 302c 2020 2320 6d61 7820 3530 0a20   20,  # max 50. 
+00049b70: 2020 2020 2020 2020 2020 2023 2027 6375             # 'cu
+00049b80: 7273 6f72 273a 2027 272c 0a20 2020 2020  rsor': '',.     
+00049b90: 2020 207d 0a20 2020 2020 2020 2063 7572     }.        cur
+00049ba0: 7265 6e63 7920 3d20 4e6f 6e65 0a20 2020  rency = None.   
+00049bb0: 2020 2020 2069 6620 636f 6465 2069 7320       if code is 
+00049bc0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00049bd0: 2020 2020 2020 6375 7272 656e 6379 203d        currency =
+00049be0: 2073 656c 662e 6375 7272 656e 6379 2863   self.currency(c
+00049bf0: 6f64 6529 0a20 2020 2020 2020 2020 2020  ode).           
+00049c00: 2072 6571 7565 7374 5b27 636f 696e 275d   request['coin']
+00049c10: 203d 2063 7572 7265 6e63 795b 2769 6427   = currency['id'
+00049c20: 5d0a 2020 2020 2020 2020 6966 2073 696e  ].        if sin
+00049c30: 6365 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ce is not None:.
+00049c40: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+00049c50: 6573 745b 2773 7461 7274 5469 6d65 275d  est['startTime']
+00049c60: 203d 2073 696e 6365 0a20 2020 2020 2020   = since.       
+00049c70: 2069 6620 6c69 6d69 7420 6973 206e 6f74   if limit is not
+00049c80: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00049c90: 2020 2072 6571 7565 7374 5b27 6c69 6d69     request['limi
+00049ca0: 7427 5d20 3d20 6c69 6d69 740a 2020 2020  t'] = limit.    
+00049cb0: 2020 2020 7265 7370 6f6e 7365 203d 2061      response = a
+00049cc0: 7761 6974 2073 656c 662e 7072 6976 6174  wait self.privat
+00049cd0: 6547 6574 5635 4173 7365 7444 6570 6f73  eGetV5AssetDepos
+00049ce0: 6974 5175 6572 7952 6563 6f72 6428 7365  itQueryRecord(se
+00049cf0: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
+00049d00: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
+00049d10: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+00049d20: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+00049d30: 2020 2020 2020 2020 2272 6574 436f 6465          "retCode
+00049d40: 223a 2030 2c0a 2020 2020 2020 2020 2320  ": 0,.        # 
+00049d50: 2020 2020 2020 2020 2272 6574 4d73 6722          "retMsg"
+00049d60: 3a20 2273 7563 6365 7373 222c 0a20 2020  : "success",.   
+00049d70: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00049d80: 7265 7375 6c74 223a 207b 0a20 2020 2020  result": {.     
+00049d90: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00049da0: 2022 726f 7773 223a 205b 0a20 2020 2020   "rows": [.     
+00049db0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00049dc0: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+00049dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00049de0: 2020 2020 2022 636f 696e 223a 2022 5553       "coin": "US
+00049df0: 4454 222c 0a20 2020 2020 2020 2023 2020  DT",.        #  
+00049e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00049e10: 2020 2022 6368 6169 6e22 3a20 2245 5448     "chain": "ETH
+00049e20: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00049e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00049e40: 2022 616d 6f75 6e74 223a 2022 3130 3030   "amount": "1000
+00049e50: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00049e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00049e70: 2020 2274 7849 4422 3a20 2273 6b69 702d    "txID": "skip-
+00049e80: 6e6f 7469 6669 6361 7469 6f6e 2d73 6365  notification-sce
+00049e90: 6e65 2d74 6573 742d 616d 6f75 6e74 2d32  ne-test-amount-2
+00049ea0: 3032 3231 3232 3730 3934 342d 3533 3332  02212270944-5332
+00049eb0: 3835 2d55 5344 5422 2c0a 2020 2020 2020  85-USDT",.      
+00049ec0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00049ed0: 2020 2020 2020 2020 2273 7461 7475 7322          "status"
+00049ee0: 3a20 332c 0a20 2020 2020 2020 2023 2020  : 3,.        #  
+00049ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00049f00: 2020 2022 746f 4164 6472 6573 7322 3a20     "toAddress": 
+00049f10: 2274 6573 742d 616d 6f75 6e74 2d61 6464  "test-amount-add
+00049f20: 7265 7373 222c 0a20 2020 2020 2020 2023  ress",.        #
+00049f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00049f40: 2020 2020 2022 7461 6722 3a20 2222 2c0a       "tag": "",.
+00049f50: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00049f60: 2020 2020 2020 2020 2020 2020 2020 2264                "d
+00049f70: 6570 6f73 6974 4665 6522 3a20 2222 2c0a  epositFee": "",.
+00049f80: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00049f90: 2020 2020 2020 2020 2020 2020 2020 2273                "s
+00049fa0: 7563 6365 7373 4174 223a 2022 3136 3732  uccessAt": "1672
+00049fb0: 3133 3432 3734 3030 3022 2c0a 2020 2020  134274000",.    
+00049fc0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00049fd0: 2020 2020 2020 2020 2020 2263 6f6e 6669            "confi
+00049fe0: 726d 6174 696f 6e73 223a 2022 3130 3030  rmations": "1000
+00049ff0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+0004a000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004a010: 2020 2274 7849 6e64 6578 223a 2022 222c    "txIndex": "",
+0004a020: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004a030: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0004a040: 626c 6f63 6b48 6173 6822 3a20 2222 0a20  blockHash": "". 
+0004a050: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004a060: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+0004a070: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004a080: 205d 2c0a 2020 2020 2020 2020 2320 2020   ],.        #   
+0004a090: 2020 2020 2020 2020 2020 226e 6578 7450            "nextP
+0004a0a0: 6167 6543 7572 736f 7222 3a20 2265 794a  ageCursor": "eyJ
+0004a0b0: 7461 5735 4a52 4349 364d 5441 304e 6a41  taW5JRCI6MTA0NjA
+0004a0c0: 304d 7977 6962 5746 3453 5551 694f 6a45  0MywibWF4SUQiOjE
+0004a0d0: 774e 4459 774e 444e 3922 0a20 2020 2020  wNDYwNDN9".     
+0004a0e0: 2020 2023 2020 2020 2020 2020 207d 2c0a     #         },.
+0004a0f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004a100: 2020 2272 6574 4578 7449 6e66 6f22 3a20    "retExtInfo": 
+0004a110: 7b7d 2c0a 2020 2020 2020 2020 2320 2020  {},.        #   
+0004a120: 2020 2020 2020 2274 696d 6522 3a20 3136        "time": 16
+0004a130: 3732 3139 3139 3932 3531 320a 2020 2020  72191992512.    
+0004a140: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+0004a150: 2020 2020 230a 2020 2020 2020 2020 7265      #.        re
+0004a160: 7375 6c74 203d 2073 656c 662e 7361 6665  sult = self.safe
+0004a170: 5f76 616c 7565 2872 6573 706f 6e73 652c  _value(response,
+0004a180: 2027 7265 7375 6c74 272c 207b 7d29 0a20   'result', {}). 
+0004a190: 2020 2020 2020 2064 6174 6120 3d20 7365         data = se
+0004a1a0: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
+0004a1b0: 7375 6c74 2c20 2772 6f77 7327 2c20 5b5d  sult, 'rows', []
+0004a1c0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+0004a1d0: 2073 656c 662e 7061 7273 655f 7472 616e   self.parse_tran
+0004a1e0: 7361 6374 696f 6e73 2864 6174 612c 2063  sactions(data, c
+0004a1f0: 7572 7265 6e63 792c 2073 696e 6365 2c20  urrency, since, 
+0004a200: 6c69 6d69 7429 0a0a 2020 2020 6173 796e  limit)..    asyn
+0004a210: 6320 6465 6620 6665 7463 685f 7769 7468  c def fetch_with
+0004a220: 6472 6177 616c 7328 7365 6c66 2c20 636f  drawals(self, co
+0004a230: 6465 3a20 4f70 7469 6f6e 616c 5b73 7472  de: Optional[str
+0004a240: 5d20 3d20 4e6f 6e65 2c20 7369 6e63 653a  ] = None, since:
+0004a250: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
+0004a260: 204e 6f6e 652c 206c 696d 6974 3a20 4f70   None, limit: Op
+0004a270: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
+0004a280: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
+0004a290: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0004a2a0: 2020 2020 6665 7463 6820 616c 6c20 7769      fetch all wi
+0004a2b0: 7468 6472 6177 616c 7320 6d61 6465 2066  thdrawals made f
+0004a2c0: 726f 6d20 616e 2061 6363 6f75 6e74 0a20  rom an account. 
+0004a2d0: 2020 2020 2020 2073 6565 2068 7474 7073         see https
+0004a2e0: 3a2f 2f62 7962 6974 2d65 7863 6861 6e67  ://bybit-exchang
+0004a2f0: 652e 6769 7468 7562 2e69 6f2f 646f 6373  e.github.io/docs
+0004a300: 2f76 352f 6173 7365 742f 7769 7468 6472  /v5/asset/withdr
+0004a310: 6177 2d72 6563 6f72 640a 2020 2020 2020  aw-record.      
+0004a320: 2020 3a70 6172 616d 2073 7472 2063 6f64    :param str cod
+0004a330: 653a 2075 6e69 6669 6564 2063 7572 7265  e: unified curre
+0004a340: 6e63 7920 636f 6465 0a20 2020 2020 2020  ncy code.       
+0004a350: 203a 7061 7261 6d20 696e 747c 4e6f 6e65   :param int|None
+0004a360: 2073 696e 6365 3a20 7468 6520 6561 726c   since: the earl
+0004a370: 6965 7374 2074 696d 6520 696e 206d 7320  iest time in ms 
+0004a380: 746f 2066 6574 6368 2077 6974 6864 7261  to fetch withdra
+0004a390: 7761 6c73 2066 6f72 0a20 2020 2020 2020  wals for.       
+0004a3a0: 203a 7061 7261 6d20 696e 747c 4e6f 6e65   :param int|None
+0004a3b0: 206c 696d 6974 3a20 7468 6520 6d61 7869   limit: the maxi
+0004a3c0: 6d75 6d20 6e75 6d62 6572 206f 6620 7769  mum number of wi
+0004a3d0: 7468 6472 6177 616c 7320 7374 7275 6374  thdrawals struct
+0004a3e0: 7572 6573 2074 6f20 7265 7472 6965 7665  ures to retrieve
+0004a3f0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+0004a400: 6469 6374 2070 6172 616d 733a 2065 7874  dict params: ext
+0004a410: 7261 2070 6172 616d 6574 6572 7320 7370  ra parameters sp
+0004a420: 6563 6966 6963 2074 6f20 7468 6520 6279  ecific to the by
+0004a430: 6269 7420 6170 6920 656e 6470 6f69 6e74  bit api endpoint
+0004a440: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
+0004a450: 7320 5b64 6963 745d 3a20 6120 6c69 7374  s [dict]: a list
+0004a460: 206f 6620 6074 7261 6e73 6163 7469 6f6e   of `transaction
+0004a470: 2073 7472 7563 7475 7265 7320 3c68 7474   structures <htt
+0004a480: 7073 3a2f 2f64 6f63 732e 6363 7874 2e63  ps://docs.ccxt.c
+0004a490: 6f6d 2f23 2f3f 6964 3d74 7261 6e73 6163  om/#/?id=transac
+0004a4a0: 7469 6f6e 2d73 7472 7563 7475 7265 3e60  tion-structure>`
+0004a4b0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0004a4c0: 2020 2020 2061 7761 6974 2073 656c 662e       await self.
+0004a4d0: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
+0004a4e0: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+0004a4f0: 207b 0a20 2020 2020 2020 2020 2020 2023   {.            #
+0004a500: 2027 636f 696e 273a 2063 7572 7265 6e63   'coin': currenc
+0004a510: 795b 2769 6427 5d2c 0a20 2020 2020 2020  y['id'],.       
+0004a520: 2020 2020 2023 2027 6c69 6d69 7427 3a20       # 'limit': 
+0004a530: 3230 2c20 2023 206d 6178 2035 300a 2020  20,  # max 50.  
+0004a540: 2020 2020 2020 2020 2020 2320 2763 7573            # 'cus
+0004a550: 6f72 273a 2027 272c 0a20 2020 2020 2020  or': '',.       
+0004a560: 207d 0a20 2020 2020 2020 2063 7572 7265   }.        curre
+0004a570: 6e63 7920 3d20 4e6f 6e65 0a20 2020 2020  ncy = None.     
+0004a580: 2020 2069 6620 636f 6465 2069 7320 6e6f     if code is no
+0004a590: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+0004a5a0: 2020 2020 6375 7272 656e 6379 203d 2073      currency = s
+0004a5b0: 656c 662e 6375 7272 656e 6379 2863 6f64  elf.currency(cod
+0004a5c0: 6529 0a20 2020 2020 2020 2020 2020 2072  e).            r
+0004a5d0: 6571 7565 7374 5b27 636f 696e 275d 203d  equest['coin'] =
+0004a5e0: 2063 7572 7265 6e63 795b 2769 6427 5d0a   currency['id'].
+0004a5f0: 2020 2020 2020 2020 6966 2073 696e 6365          if since
+0004a600: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0004a610: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+0004a620: 745b 2773 7461 7274 5469 6d65 275d 203d  t['startTime'] =
+0004a630: 2073 696e 6365 0a20 2020 2020 2020 2069   since.        i
+0004a640: 6620 6c69 6d69 7420 6973 206e 6f74 204e  f limit is not N
+0004a650: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+0004a660: 2072 6571 7565 7374 5b27 6c69 6d69 7427   request['limit'
+0004a670: 5d20 3d20 6c69 6d69 740a 2020 2020 2020  ] = limit.      
+0004a680: 2020 7265 7370 6f6e 7365 203d 2061 7761    response = awa
+0004a690: 6974 2073 656c 662e 7072 6976 6174 6547  it self.privateG
+0004a6a0: 6574 5635 4173 7365 7457 6974 6864 7261  etV5AssetWithdra
+0004a6b0: 7751 7565 7279 5265 636f 7264 2873 656c  wQueryRecord(sel
+0004a6c0: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
+0004a6d0: 2c20 7061 7261 6d73 2929 0a20 2020 2020  , params)).     
+0004a6e0: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
+0004a6f0: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
+0004a700: 2020 2020 2020 2022 7265 7443 6f64 6522         "retCode"
+0004a710: 3a20 302c 0a20 2020 2020 2020 2023 2020  : 0,.        #  
+0004a720: 2020 2020 2020 2022 7265 744d 7367 223a         "retMsg":
+0004a730: 2022 7375 6363 6573 7322 2c0a 2020 2020   "success",.    
+0004a740: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
+0004a750: 6573 756c 7422 3a20 7b0a 2020 2020 2020  esult": {.      
+0004a760: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0004a770: 2272 6f77 7322 3a20 5b0a 2020 2020 2020  "rows": [.      
+0004a780: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0004a790: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+0004a7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004a7b0: 2020 2020 2263 6f69 6e22 3a20 2255 5344      "coin": "USD
+0004a7c0: 5422 2c0a 2020 2020 2020 2020 2320 2020  T",.        #   
 0004a7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004a7e0: 2022 7769 7468 6472 6177 4964 223a 2022   "withdrawId": "
-0004a7f0: 3938 3031 222c 0a20 2020 2020 2020 2023  9801",.        #
+0004a7e0: 2020 2263 6861 696e 223a 2022 4554 4822    "chain": "ETH"
+0004a7f0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
 0004a800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004a810: 2020 2020 2022 7769 7468 6472 6177 5479       "withdrawTy
-0004a820: 7065 223a 2031 0a20 2020 2020 2020 2023  pe": 1.        #
-0004a830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004a840: 207d 0a20 2020 2020 2020 2023 2020 2020   }.        #    
-0004a850: 2020 2020 2020 2020 205d 2c0a 2020 2020           ],.    
-0004a860: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004a870: 2020 226e 6578 7450 6167 6543 7572 736f    "nextPageCurso
-0004a880: 7222 3a20 2265 794a 7461 5735 4a52 4349  r": "eyJtaW5JRCI
-0004a890: 364f 5467 774d 5377 6962 5746 3453 5551  6OTgwMSwibWF4SUQ
-0004a8a0: 694f 6a6b 354e 7a5a 3922 0a20 2020 2020  iOjk5NzZ9".     
-0004a8b0: 2020 2023 2020 2020 2020 2020 207d 2c0a     #         },.
-0004a8c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004a8d0: 2020 2272 6574 4578 7449 6e66 6f22 3a20    "retExtInfo": 
-0004a8e0: 7b7d 2c0a 2020 2020 2020 2020 2320 2020  {},.        #   
-0004a8f0: 2020 2020 2020 2274 696d 6522 3a20 3136        "time": 16
-0004a900: 3732 3139 3439 3439 3932 380a 2020 2020  72194949928.    
-0004a910: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
-0004a920: 2020 2020 230a 2020 2020 2020 2020 7265      #.        re
-0004a930: 7375 6c74 203d 2073 656c 662e 7361 6665  sult = self.safe
-0004a940: 5f76 616c 7565 2872 6573 706f 6e73 652c  _value(response,
-0004a950: 2027 7265 7375 6c74 272c 207b 7d29 0a20   'result', {}). 
-0004a960: 2020 2020 2020 2064 6174 6120 3d20 7365         data = se
-0004a970: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
-0004a980: 7375 6c74 2c20 2772 6f77 7327 2c20 5b5d  sult, 'rows', []
-0004a990: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-0004a9a0: 2073 656c 662e 7061 7273 655f 7472 616e   self.parse_tran
-0004a9b0: 7361 6374 696f 6e73 2864 6174 612c 2063  sactions(data, c
-0004a9c0: 7572 7265 6e63 792c 2073 696e 6365 2c20  urrency, since, 
-0004a9d0: 6c69 6d69 7429 0a0a 2020 2020 6465 6620  limit)..    def 
-0004a9e0: 7061 7273 655f 7472 616e 7361 6374 696f  parse_transactio
-0004a9f0: 6e5f 7374 6174 7573 2873 656c 662c 2073  n_status(self, s
-0004aa00: 7461 7475 7329 3a0a 2020 2020 2020 2020  tatus):.        
-0004aa10: 7374 6174 7573 6573 203d 207b 0a20 2020  statuses = {.   
-0004aa20: 2020 2020 2020 2020 2023 2076 312f 7632           # v1/v2
-0004aa30: 0a20 2020 2020 2020 2020 2020 2027 546f  .            'To
-0004aa40: 4265 436f 6e66 6972 6d65 6427 3a20 2770  BeConfirmed': 'p
-0004aa50: 656e 6469 6e67 272c 0a20 2020 2020 2020  ending',.       
-0004aa60: 2020 2020 2027 556e 6465 7252 6576 6965       'UnderRevie
-0004aa70: 7727 3a20 2770 656e 6469 6e67 272c 0a20  w': 'pending',. 
-0004aa80: 2020 2020 2020 2020 2020 2027 5375 6363             'Succ
-0004aa90: 6573 7327 3a20 276f 6b27 2c0a 2020 2020  ess': 'ok',.    
-0004aaa0: 2020 2020 2020 2020 2745 7870 6972 6527          'Expire'
-0004aab0: 3a20 2765 7870 6972 6564 272c 0a20 2020  : 'expired',.   
-0004aac0: 2020 2020 2020 2020 2023 2076 3320 6465           # v3 de
-0004aad0: 706f 7369 7420 7374 6174 7573 0a20 2020  posit status.   
-0004aae0: 2020 2020 2020 2020 2027 3027 3a20 2775           '0': 'u
-0004aaf0: 6e6b 6e6f 776e 272c 0a20 2020 2020 2020  nknown',.       
-0004ab00: 2020 2020 2027 3127 3a20 2770 656e 6469       '1': 'pendi
-0004ab10: 6e67 272c 0a20 2020 2020 2020 2020 2020  ng',.           
-0004ab20: 2027 3227 3a20 2770 726f 6365 7373 696e   '2': 'processin
-0004ab30: 6727 2c0a 2020 2020 2020 2020 2020 2020  g',.            
-0004ab40: 2733 273a 2027 6f6b 272c 0a20 2020 2020  '3': 'ok',.     
-0004ab50: 2020 2020 2020 2027 3427 3a20 2766 6169         '4': 'fai
-0004ab60: 6c27 2c0a 2020 2020 2020 2020 2020 2020  l',.            
-0004ab70: 2320 7633 2077 6974 6864 7261 7761 6c20  # v3 withdrawal 
-0004ab80: 7374 6174 7573 0a20 2020 2020 2020 2020  status.         
-0004ab90: 2020 2027 5365 6375 7269 7479 4368 6563     'SecurityChec
-0004aba0: 6b27 3a20 2770 656e 6469 6e67 272c 0a20  k': 'pending',. 
-0004abb0: 2020 2020 2020 2020 2020 2027 5065 6e64             'Pend
-0004abc0: 696e 6727 3a20 2770 656e 6469 6e67 272c  ing': 'pending',
-0004abd0: 0a20 2020 2020 2020 2020 2020 2027 7375  .            'su
-0004abe0: 6363 6573 7327 3a20 276f 6b27 2c0a 2020  ccess': 'ok',.  
-0004abf0: 2020 2020 2020 2020 2020 2743 616e 6365            'Cance
-0004ac00: 6c42 7955 7365 7227 3a20 2763 616e 6365  lByUser': 'cance
-0004ac10: 6c65 6427 2c0a 2020 2020 2020 2020 2020  led',.          
-0004ac20: 2020 2752 656a 6563 7427 3a20 2772 656a    'Reject': 'rej
-0004ac30: 6563 7465 6427 2c0a 2020 2020 2020 2020  ected',.        
-0004ac40: 2020 2020 2746 6169 6c27 3a20 2766 6169      'Fail': 'fai
-0004ac50: 6c65 6427 2c0a 2020 2020 2020 2020 2020  led',.          
-0004ac60: 2020 2742 6c6f 636b 6368 6169 6e43 6f6e    'BlockchainCon
-0004ac70: 6669 726d 6564 273a 2027 6f6b 272c 0a20  firmed': 'ok',. 
-0004ac80: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-0004ac90: 2072 6574 7572 6e20 7365 6c66 2e73 6166   return self.saf
-0004aca0: 655f 7374 7269 6e67 2873 7461 7475 7365  e_string(statuse
-0004acb0: 732c 2073 7461 7475 732c 2073 7461 7475  s, status, statu
-0004acc0: 7329 0a0a 2020 2020 6465 6620 7061 7273  s)..    def pars
-0004acd0: 655f 7472 616e 7361 6374 696f 6e28 7365  e_transaction(se
-0004ace0: 6c66 2c20 7472 616e 7361 6374 696f 6e2c  lf, transaction,
-0004acf0: 2063 7572 7265 6e63 793d 4e6f 6e65 293a   currency=None):
-0004ad00: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-0004ad10: 2020 2023 2066 6574 6368 5769 7468 6472     # fetchWithdr
-0004ad20: 6177 616c 730a 2020 2020 2020 2020 230a  awals.        #.
-0004ad30: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
-0004ad40: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004ad50: 2020 2263 6f69 6e22 3a20 2255 5344 5422    "coin": "USDT"
-0004ad60: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004ad70: 2020 2020 2263 6861 696e 223a 2022 5452      "chain": "TR
-0004ad80: 5822 2c0a 2020 2020 2020 2020 2320 2020  X",.        #   
-0004ad90: 2020 2020 2020 2261 6d6f 756e 7422 3a20        "amount": 
-0004ada0: 2231 322e 3334 222c 0a20 2020 2020 2020  "12.34",.       
-0004adb0: 2023 2020 2020 2020 2020 2022 7478 4944   #         "txID
-0004adc0: 223a 2022 6465 3565 6130 6132 6632 6535  ": "de5ea0a2f2e5
-0004add0: 3964 6339 6137 3134 3833 3764 6433 6464  9dc9a714837dd3dd
-0004ade0: 6336 6435 6531 3531 6235 3665 6335 6437  c6d5e151b56ec5d7
-0004adf0: 3836 6433 3531 6334 6635 3233 3336 6638  86d351c4f52336f8
-0004ae00: 3064 3363 222c 0a20 2020 2020 2020 2023  0d3c",.        #
-0004ae10: 2020 2020 2020 2020 2022 7374 6174 7573           "status
-0004ae20: 223a 2022 7375 6363 6573 7322 2c0a 2020  ": "success",.  
-0004ae30: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004ae40: 2274 6f41 6464 7265 7373 223a 2022 5451  "toAddress": "TQ
-0004ae50: 646d 464b 556f 6531 4c6b 3269 775a 7577  dmFKUoe1Lk2iwZuw
-0004ae60: 524a 4548 4a72 6554 5542 6f4e 3342 4177  RJEHJreTUBoN3BAw
-0004ae70: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004ae80: 2020 2020 2022 7461 6722 3a20 2222 2c0a       "tag": "",.
-0004ae90: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004aea0: 2020 2277 6974 6864 7261 7746 6565 223a    "withdrawFee":
-0004aeb0: 2022 302e 3522 2c0a 2020 2020 2020 2020   "0.5",.        
-0004aec0: 2320 2020 2020 2020 2020 2263 7265 6174  #         "creat
-0004aed0: 6554 696d 6522 3a20 2231 3636 3531 3434  eTime": "1665144
-0004aee0: 3138 3330 3030 222c 0a20 2020 2020 2020  183000",.       
-0004aef0: 2023 2020 2020 2020 2020 2022 7570 6461   #         "upda
-0004af00: 7465 5469 6d65 223a 2022 3136 3635 3134  teTime": "166514
-0004af10: 3432 3536 3030 3022 2c0a 2020 2020 2020  4256000",.      
-0004af20: 2020 2320 2020 2020 2020 2020 2277 6974    #         "wit
-0004af30: 6864 7261 7749 6422 3a20 2238 3833 3930  hdrawId": "88390
-0004af40: 3335 220a 2020 2020 2020 2020 2320 2020  35".        #   
-0004af50: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-0004af60: 2020 2020 2020 2320 6665 7463 6844 6570        # fetchDep
-0004af70: 6f73 6974 730a 2020 2020 2020 2020 230a  osits.        #.
-0004af80: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
-0004af90: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004afa0: 2020 2263 6f69 6e22 3a20 2255 5344 5422    "coin": "USDT"
-0004afb0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004afc0: 2020 2020 2263 6861 696e 223a 2022 5452      "chain": "TR
-0004afd0: 5822 2c0a 2020 2020 2020 2020 2320 2020  X",.        #   
-0004afe0: 2020 2020 2020 2261 6d6f 756e 7422 3a20        "amount": 
-0004aff0: 2234 3422 2c0a 2020 2020 2020 2020 2320  "44",.        # 
-0004b000: 2020 2020 2020 2020 2274 7849 4422 3a20          "txID": 
-0004b010: 2230 6230 3338 6561 3132 6661 3135 3735  "0b038ea12fa1575
-0004b020: 6532 6436 3636 3933 6462 3363 3334 3662  e2d66693db3c346b
-0004b030: 3730 3064 3462 3238 3334 3761 6663 3339  700d4b28347afc39
-0004b040: 6638 3033 3231 6366 3038 3961 6363 3936  f80321cf089acc96
-0004b050: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-0004b060: 2020 2020 2020 2273 7461 7475 7322 3a20        "status": 
-0004b070: 2233 222c 0a20 2020 2020 2020 2023 2020  "3",.        #  
-0004b080: 2020 2020 2020 2022 746f 4164 6472 6573         "toAddres
-0004b090: 7322 3a20 2254 4336 4e43 4143 3557 5356  s": "TC6NCAC5WSV
-0004b0a0: 4343 6961 4433 6b57 5a58 7957 3931 5a4b  CCiaD3kWZXyW91ZK
-0004b0b0: 4b68 4c6d 3533 6222 2c0a 2020 2020 2020  KhLm53b",.      
-0004b0c0: 2020 2320 2020 2020 2020 2020 2274 6167    #         "tag
-0004b0d0: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
-0004b0e0: 2020 2020 2020 2020 2022 6465 706f 7369           "deposi
-0004b0f0: 7446 6565 223a 2022 222c 0a20 2020 2020  tFee": "",.     
-0004b100: 2020 2023 2020 2020 2020 2020 2022 7375     #         "su
-0004b110: 6363 6573 7341 7422 3a20 2231 3636 3531  ccessAt": "16651
-0004b120: 3432 3530 3730 3030 222c 0a20 2020 2020  42507000",.     
-0004b130: 2020 2023 2020 2020 2020 2020 2022 636f     #         "co
-0004b140: 6e66 6972 6d61 7469 6f6e 7322 3a20 2231  nfirmations": "1
-0004b150: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
-0004b160: 2020 2020 2020 2022 7478 496e 6465 7822         "txIndex"
-0004b170: 3a20 2230 222c 0a20 2020 2020 2020 2023  : "0",.        #
-0004b180: 2020 2020 2020 2020 2022 626c 6f63 6b48           "blockH
-0004b190: 6173 6822 3a20 2230 3030 3030 3030 3030  ash": "000000000
-0004b1a0: 3261 6333 6231 3036 3461 6565 3934 6263  2ac3b1064aee94bc
-0004b1b0: 6131 6264 3062 3538 6334 6330 3963 3635  a1bd0b58c4c09c65
-0004b1c0: 3831 3362 3038 3462 3837 6132 3036 3364  813b084b87a2063d
-0004b1d0: 3936 3131 3239 6522 0a20 2020 2020 2020  961129e".       
-0004b1e0: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
-0004b1f0: 2023 0a20 2020 2020 2020 2023 2077 6974   #.        # wit
-0004b200: 6864 7261 770a 2020 2020 2020 2020 230a  hdraw.        #.
-0004b210: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
-0004b220: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004b230: 2020 2269 6422 3a20 2239 3337 3732 3636    "id": "9377266
-0004b240: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
-0004b250: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
-0004b260: 2020 2020 6375 7272 656e 6379 4964 203d      currencyId =
-0004b270: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-0004b280: 6728 7472 616e 7361 6374 696f 6e2c 2027  g(transaction, '
-0004b290: 636f 696e 2729 0a20 2020 2020 2020 2063  coin').        c
-0004b2a0: 6f64 6520 3d20 7365 6c66 2e73 6166 655f  ode = self.safe_
-0004b2b0: 6375 7272 656e 6379 5f63 6f64 6528 6375  currency_code(cu
-0004b2c0: 7272 656e 6379 4964 2c20 6375 7272 656e  rrencyId, curren
-0004b2d0: 6379 290a 2020 2020 2020 2020 7469 6d65  cy).        time
-0004b2e0: 7374 616d 7020 3d20 7365 6c66 2e73 6166  stamp = self.saf
-0004b2f0: 655f 696e 7465 6765 725f 3228 7472 616e  e_integer_2(tran
-0004b300: 7361 6374 696f 6e2c 2027 6372 6561 7465  saction, 'create
-0004b310: 5469 6d65 272c 2027 7375 6363 6573 7341  Time', 'successA
-0004b320: 7427 290a 2020 2020 2020 2020 7570 6461  t').        upda
-0004b330: 7465 6420 3d20 7365 6c66 2e73 6166 655f  ted = self.safe_
-0004b340: 696e 7465 6765 7228 7472 616e 7361 6374  integer(transact
-0004b350: 696f 6e2c 2027 7570 6461 7465 5469 6d65  ion, 'updateTime
-0004b360: 2729 0a20 2020 2020 2020 2073 7461 7475  ').        statu
-0004b370: 7320 3d20 7365 6c66 2e70 6172 7365 5f74  s = self.parse_t
-0004b380: 7261 6e73 6163 7469 6f6e 5f73 7461 7475  ransaction_statu
-0004b390: 7328 7365 6c66 2e73 6166 655f 7374 7269  s(self.safe_stri
-0004b3a0: 6e67 2874 7261 6e73 6163 7469 6f6e 2c20  ng(transaction, 
-0004b3b0: 2773 7461 7475 7327 2929 0a20 2020 2020  'status')).     
-0004b3c0: 2020 2066 6565 436f 7374 203d 2073 656c     feeCost = sel
-0004b3d0: 662e 7361 6665 5f6e 756d 6265 725f 3228  f.safe_number_2(
-0004b3e0: 7472 616e 7361 6374 696f 6e2c 2027 6465  transaction, 'de
-0004b3f0: 706f 7369 7446 6565 272c 2027 7769 7468  positFee', 'with
-0004b400: 6472 6177 4665 6527 2c20 3029 0a20 2020  drawFee', 0).   
-0004b410: 2020 2020 2074 7970 6520 3d20 2764 6570       type = 'dep
-0004b420: 6f73 6974 2720 6966 2028 2764 6570 6f73  osit' if ('depos
-0004b430: 6974 4665 6527 2069 6e20 7472 616e 7361  itFee' in transa
-0004b440: 6374 696f 6e29 2065 6c73 6520 2777 6974  ction) else 'wit
-0004b450: 6864 7261 7761 6c27 0a20 2020 2020 2020  hdrawal'.       
-0004b460: 2066 6565 203d 204e 6f6e 650a 2020 2020   fee = None.    
-0004b470: 2020 2020 6966 2066 6565 436f 7374 2069      if feeCost i
-0004b480: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-0004b490: 2020 2020 2020 2020 6665 6520 3d20 7b0a          fee = {.
-0004b4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004b4b0: 2763 6f73 7427 3a20 6665 6543 6f73 742c  'cost': feeCost,
-0004b4c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0004b4d0: 2027 6375 7272 656e 6379 273a 2063 6f64   'currency': cod
-0004b4e0: 652c 0a20 2020 2020 2020 2020 2020 207d  e,.            }
-0004b4f0: 0a20 2020 2020 2020 2074 6f41 6464 7265  .        toAddre
-0004b500: 7373 203d 2073 656c 662e 7361 6665 5f73  ss = self.safe_s
-0004b510: 7472 696e 6728 7472 616e 7361 6374 696f  tring(transactio
-0004b520: 6e2c 2027 746f 4164 6472 6573 7327 290a  n, 'toAddress').
-0004b530: 2020 2020 2020 2020 7265 7475 726e 207b          return {
-0004b540: 0a20 2020 2020 2020 2020 2020 2027 696e  .            'in
-0004b550: 666f 273a 2074 7261 6e73 6163 7469 6f6e  fo': transaction
-0004b560: 2c0a 2020 2020 2020 2020 2020 2020 2769  ,.            'i
-0004b570: 6427 3a20 7365 6c66 2e73 6166 655f 7374  d': self.safe_st
-0004b580: 7269 6e67 5f32 2874 7261 6e73 6163 7469  ring_2(transacti
-0004b590: 6f6e 2c20 2769 6427 2c20 2777 6974 6864  on, 'id', 'withd
-0004b5a0: 7261 7749 6427 292c 0a20 2020 2020 2020  rawId'),.       
-0004b5b0: 2020 2020 2027 7478 6964 273a 2073 656c       'txid': sel
-0004b5c0: 662e 7361 6665 5f73 7472 696e 6728 7472  f.safe_string(tr
-0004b5d0: 616e 7361 6374 696f 6e2c 2027 7478 4944  ansaction, 'txID
-0004b5e0: 2729 2c0a 2020 2020 2020 2020 2020 2020  '),.            
-0004b5f0: 2774 696d 6573 7461 6d70 273a 2074 696d  'timestamp': tim
-0004b600: 6573 7461 6d70 2c0a 2020 2020 2020 2020  estamp,.        
-0004b610: 2020 2020 2764 6174 6574 696d 6527 3a20      'datetime': 
-0004b620: 7365 6c66 2e69 736f 3836 3031 2874 696d  self.iso8601(tim
-0004b630: 6573 7461 6d70 292c 0a20 2020 2020 2020  estamp),.       
-0004b640: 2020 2020 2027 6e65 7477 6f72 6b27 3a20       'network': 
-0004b650: 7365 6c66 2e6e 6574 776f 726b 5f69 645f  self.network_id_
-0004b660: 746f 5f63 6f64 6528 7365 6c66 2e73 6166  to_code(self.saf
-0004b670: 655f 7374 7269 6e67 2874 7261 6e73 6163  e_string(transac
-0004b680: 7469 6f6e 2c20 2763 6861 696e 2729 292c  tion, 'chain')),
-0004b690: 0a20 2020 2020 2020 2020 2020 2027 6164  .            'ad
-0004b6a0: 6472 6573 7327 3a20 4e6f 6e65 2c0a 2020  dress': None,.  
-0004b6b0: 2020 2020 2020 2020 2020 2761 6464 7265            'addre
-0004b6c0: 7373 546f 273a 2074 6f41 6464 7265 7373  ssTo': toAddress
-0004b6d0: 2c0a 2020 2020 2020 2020 2020 2020 2761  ,.            'a
-0004b6e0: 6464 7265 7373 4672 6f6d 273a 204e 6f6e  ddressFrom': Non
-0004b6f0: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
-0004b700: 7461 6727 3a20 7365 6c66 2e73 6166 655f  tag': self.safe_
-0004b710: 7374 7269 6e67 2874 7261 6e73 6163 7469  string(transacti
-0004b720: 6f6e 2c20 2774 6167 2729 2c0a 2020 2020  on, 'tag'),.    
-0004b730: 2020 2020 2020 2020 2774 6167 546f 273a          'tagTo':
-0004b740: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
-0004b750: 2020 2027 7461 6746 726f 6d27 3a20 4e6f     'tagFrom': No
-0004b760: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-0004b770: 2774 7970 6527 3a20 7479 7065 2c0a 2020  'type': type,.  
-0004b780: 2020 2020 2020 2020 2020 2761 6d6f 756e            'amoun
-0004b790: 7427 3a20 7365 6c66 2e73 6166 655f 6e75  t': self.safe_nu
-0004b7a0: 6d62 6572 2874 7261 6e73 6163 7469 6f6e  mber(transaction
-0004b7b0: 2c20 2761 6d6f 756e 7427 292c 0a20 2020  , 'amount'),.   
-0004b7c0: 2020 2020 2020 2020 2027 6375 7272 656e           'curren
-0004b7d0: 6379 273a 2063 6f64 652c 0a20 2020 2020  cy': code,.     
-0004b7e0: 2020 2020 2020 2027 7374 6174 7573 273a         'status':
-0004b7f0: 2073 7461 7475 732c 0a20 2020 2020 2020   status,.       
-0004b800: 2020 2020 2027 7570 6461 7465 6427 3a20       'updated': 
-0004b810: 7570 6461 7465 642c 0a20 2020 2020 2020  updated,.       
-0004b820: 2020 2020 2027 6665 6527 3a20 6665 652c       'fee': fee,
-0004b830: 0a20 2020 2020 2020 207d 0a0a 2020 2020  .        }..    
-0004b840: 6173 796e 6320 6465 6620 6665 7463 685f  async def fetch_
-0004b850: 6c65 6467 6572 2873 656c 662c 2063 6f64  ledger(self, cod
-0004b860: 653a 204f 7074 696f 6e61 6c5b 7374 725d  e: Optional[str]
-0004b870: 203d 204e 6f6e 652c 2073 696e 6365 3a20   = None, since: 
-0004b880: 4f70 7469 6f6e 616c 5b69 6e74 5d20 3d20  Optional[int] = 
-0004b890: 4e6f 6e65 2c20 6c69 6d69 743a 204f 7074  None, limit: Opt
-0004b8a0: 696f 6e61 6c5b 696e 745d 203d 204e 6f6e  ional[int] = Non
-0004b8b0: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
-0004b8c0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-0004b8d0: 2020 2066 6574 6368 2074 6865 2068 6973     fetch the his
-0004b8e0: 746f 7279 206f 6620 6368 616e 6765 732c  tory of changes,
-0004b8f0: 2061 6374 696f 6e73 2064 6f6e 6520 6279   actions done by
-0004b900: 2074 6865 2075 7365 7220 6f72 206f 7065   the user or ope
-0004b910: 7261 7469 6f6e 7320 7468 6174 2061 6c74  rations that alt
-0004b920: 6572 6564 2062 616c 616e 6365 206f 6620  ered balance of 
-0004b930: 7468 6520 7573 6572 0a20 2020 2020 2020  the user.       
-0004b940: 2073 6565 2068 7474 7073 3a2f 2f62 7962   see https://byb
-0004b950: 6974 2d65 7863 6861 6e67 652e 6769 7468  it-exchange.gith
-0004b960: 7562 2e69 6f2f 646f 6373 2f76 352f 6163  ub.io/docs/v5/ac
-0004b970: 636f 756e 742f 7472 616e 7361 6374 696f  count/transactio
-0004b980: 6e2d 6c6f 670a 2020 2020 2020 2020 3a70  n-log.        :p
-0004b990: 6172 616d 2073 7472 7c4e 6f6e 6520 636f  aram str|None co
-0004b9a0: 6465 3a20 756e 6966 6965 6420 6375 7272  de: unified curr
-0004b9b0: 656e 6379 2063 6f64 652c 2064 6566 6175  ency code, defau
-0004b9c0: 6c74 2069 7320 4e6f 6e65 0a20 2020 2020  lt is None.     
-0004b9d0: 2020 203a 7061 7261 6d20 696e 747c 4e6f     :param int|No
-0004b9e0: 6e65 2073 696e 6365 3a20 7469 6d65 7374  ne since: timest
-0004b9f0: 616d 7020 696e 206d 7320 6f66 2074 6865  amp in ms of the
-0004ba00: 2065 6172 6c69 6573 7420 6c65 6467 6572   earliest ledger
-0004ba10: 2065 6e74 7279 2c20 6465 6661 756c 7420   entry, default 
-0004ba20: 6973 204e 6f6e 650a 2020 2020 2020 2020  is None.        
-0004ba30: 3a70 6172 616d 2069 6e74 7c4e 6f6e 6520  :param int|None 
-0004ba40: 6c69 6d69 743a 206d 6178 206e 756d 6265  limit: max numbe
-0004ba50: 7220 6f66 206c 6564 6765 7220 656e 7472  r of ledger entr
-0004ba60: 7973 2074 6f20 7265 7475 726e 2c20 6465  ys to return, de
-0004ba70: 6661 756c 7420 6973 204e 6f6e 650a 2020  fault is None.  
-0004ba80: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
-0004ba90: 7420 7061 7261 6d73 3a20 6578 7472 6120  t params: extra 
-0004baa0: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
-0004bab0: 6669 6320 746f 2074 6865 2062 7962 6974  fic to the bybit
-0004bac0: 2061 7069 2065 6e64 706f 696e 740a 2020   api endpoint.  
-0004bad0: 2020 2020 2020 3a72 6574 7572 6e73 2064        :returns d
-0004bae0: 6963 743a 2061 2060 6c65 6467 6572 2073  ict: a `ledger s
-0004baf0: 7472 7563 7475 7265 203c 6874 7470 733a  tructure <https:
-0004bb00: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
-0004bb10: 232f 3f69 643d 6c65 6467 6572 2d73 7472  #/?id=ledger-str
-0004bb20: 7563 7475 7265 3e60 0a20 2020 2020 2020  ucture>`.       
-0004bb30: 2022 2222 0a20 2020 2020 2020 2061 7761   """.        awa
-0004bb40: 6974 2073 656c 662e 6c6f 6164 5f6d 6172  it self.load_mar
-0004bb50: 6b65 7473 2829 0a20 2020 2020 2020 2072  kets().        r
-0004bb60: 6571 7565 7374 203d 207b 0a20 2020 2020  equest = {.     
-0004bb70: 2020 2020 2020 2023 2027 636f 696e 273a         # 'coin':
-0004bb80: 2063 7572 7265 6e63 795b 2769 6427 5d2c   currency['id'],
-0004bb90: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
-0004bba0: 6375 7272 656e 6379 273a 2063 7572 7265  currency': curre
-0004bbb0: 6e63 795b 2769 6427 5d2c 2020 2320 616c  ncy['id'],  # al
-0004bbc0: 6961 730a 2020 2020 2020 2020 2020 2020  ias.            
-0004bbd0: 2320 2773 7461 7274 5f64 6174 6527 3a20  # 'start_date': 
-0004bbe0: 7365 6c66 2e69 736f 3836 3031 2873 696e  self.iso8601(sin
-0004bbf0: 6365 292c 0a20 2020 2020 2020 2020 2020  ce),.           
-0004bc00: 2023 2027 656e 645f 6461 7465 273a 2073   # 'end_date': s
-0004bc10: 656c 662e 6973 6f38 3630 3128 7469 6c6c  elf.iso8601(till
-0004bc20: 292c 0a20 2020 2020 2020 2020 2020 2023  ),.            #
-0004bc30: 2027 7761 6c6c 6574 5f66 756e 645f 7479   'wallet_fund_ty
-0004bc40: 7065 273a 2027 4465 706f 7369 7427 2c20  pe': 'Deposit', 
-0004bc50: 2023 2057 6974 6864 7261 772c 2052 6561   # Withdraw, Rea
-0004bc60: 6c69 7365 6450 4e4c 2c20 436f 6d6d 6973  lisedPNL, Commis
-0004bc70: 7369 6f6e 2c20 5265 6675 6e64 2c20 5072  sion, Refund, Pr
-0004bc80: 697a 652c 2045 7863 6861 6e67 654f 7264  ize, ExchangeOrd
-0004bc90: 6572 5769 7468 6472 6177 2c20 4578 6368  erWithdraw, Exch
-0004bca0: 616e 6765 4f72 6465 7244 6570 6f73 6974  angeOrderDeposit
-0004bcb0: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
-0004bcc0: 7061 6765 273a 2031 2c0a 2020 2020 2020  page': 1,.      
-0004bcd0: 2020 2020 2020 2320 276c 696d 6974 273a        # 'limit':
-0004bce0: 2032 302c 2020 2320 6d61 7820 3530 0a20   20,  # max 50. 
-0004bcf0: 2020 2020 2020 2020 2020 2023 2076 3520             # v5 
-0004bd00: 7472 616e 7361 6374 696f 6e20 6c6f 670a  transaction log.
-0004bd10: 2020 2020 2020 2020 2020 2020 2320 2761              # 'a
-0004bd20: 6363 6f75 6e74 5479 7065 273a 2027 272c  ccountType': '',
-0004bd30: 2041 6363 6f75 6e74 2054 7970 652e 2055   Account Type. U
-0004bd40: 4e49 4649 4544 0a20 2020 2020 2020 2020  NIFIED.         
-0004bd50: 2020 2023 2027 6361 7465 676f 7279 273a     # 'category':
-0004bd60: 2027 272c 2050 726f 6475 6374 2074 7970   '', Product typ
-0004bd70: 652e 2073 706f 742c 6c69 6e65 6172 2c6f  e. spot,linear,o
-0004bd80: 7074 696f 6e0a 2020 2020 2020 2020 2020  ption.          
-0004bd90: 2020 2320 2763 7572 7265 6e63 7927 3a20    # 'currency': 
-0004bda0: 2727 2c20 4375 7272 656e 6379 0a20 2020  '', Currency.   
-0004bdb0: 2020 2020 2020 2020 2023 2027 6261 7365           # 'base
-0004bdc0: 436f 696e 273a 2027 272c 2042 6173 6543  Coin': '', BaseC
-0004bdd0: 6f69 6e2e 2065 2e67 2e2c 2042 5443 206f  oin. e.g., BTC o
-0004bde0: 6620 4254 4350 4552 500a 2020 2020 2020  f BTCPERP.      
-0004bdf0: 2020 2020 2020 2320 2774 7970 6527 3a20        # 'type': 
-0004be00: 2727 2c20 5479 7065 7320 6f66 2074 7261  '', Types of tra
-0004be10: 6e73 6163 7469 6f6e 206c 6f67 730a 2020  nsaction logs.  
-0004be20: 2020 2020 2020 2020 2020 2320 2773 7461            # 'sta
-0004be30: 7274 5469 6d65 273a 2030 2c20 5468 6520  rtTime': 0, The 
-0004be40: 7374 6172 7420 7469 6d65 7374 616d 7028  start timestamp(
-0004be50: 6d73 290a 2020 2020 2020 2020 2020 2020  ms).            
-0004be60: 2320 2765 6e64 5469 6d65 273a 2030 2c20  # 'endTime': 0, 
-0004be70: 5468 6520 656e 6420 7469 6d65 7374 616d  The end timestam
-0004be80: 7028 6d73 290a 2020 2020 2020 2020 2020  p(ms).          
-0004be90: 2020 2320 276c 696d 6974 273a 2030 2c20    # 'limit': 0, 
-0004bea0: 4c69 6d69 7420 666f 7220 6461 7461 2073  Limit for data s
-0004beb0: 697a 6520 7065 7220 7061 6765 2e20 5b31  ize per page. [1
-0004bec0: 2c20 3530 5d2e 2044 6566 6175 6c74 3a20  , 50]. Default: 
-0004bed0: 3230 0a20 2020 2020 2020 2020 2020 2023  20.            #
-0004bee0: 2027 6375 7273 6f72 273a 2027 272c 2043   'cursor': '', C
-0004bef0: 7572 736f 722e 2055 7365 6420 666f 7220  ursor. Used for 
-0004bf00: 7061 6769 6e61 7469 6f6e 0a20 2020 2020  pagination.     
-0004bf10: 2020 207d 0a20 2020 2020 2020 2065 6e61     }.        ena
-0004bf20: 626c 6555 6e69 6669 6564 203d 2061 7761  bleUnified = awa
-0004bf30: 6974 2073 656c 662e 6973 5f75 6e69 6669  it self.is_unifi
-0004bf40: 6564 5f65 6e61 626c 6564 2829 0a20 2020  ed_enabled().   
-0004bf50: 2020 2020 2063 7572 7265 6e63 7920 3d20       currency = 
-0004bf60: 4e6f 6e65 0a20 2020 2020 2020 2063 7572  None.        cur
-0004bf70: 7265 6e63 794b 6579 203d 2027 636f 696e  rencyKey = 'coin
-0004bf80: 270a 2020 2020 2020 2020 6966 2065 6e61  '.        if ena
-0004bf90: 626c 6555 6e69 6669 6564 5b31 5d3a 0a20  bleUnified[1]:. 
-0004bfa0: 2020 2020 2020 2020 2020 2063 7572 7265             curre
-0004bfb0: 6e63 794b 6579 203d 2027 6375 7272 656e  ncyKey = 'curren
-0004bfc0: 6379 270a 2020 2020 2020 2020 2020 2020  cy'.            
-0004bfd0: 6966 2073 696e 6365 2069 7320 6e6f 7420  if since is not 
-0004bfe0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0004bff0: 2020 2020 2020 7265 7175 6573 745b 2773        request['s
-0004c000: 7461 7274 5469 6d65 275d 203d 2073 696e  tartTime'] = sin
-0004c010: 6365 0a20 2020 2020 2020 2065 6c73 653a  ce.        else:
-0004c020: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0004c030: 7369 6e63 6520 6973 206e 6f74 204e 6f6e  since is not Non
-0004c040: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0004c050: 2020 2072 6571 7565 7374 5b27 7374 6172     request['star
-0004c060: 745f 6461 7465 275d 203d 2073 656c 662e  t_date'] = self.
-0004c070: 7979 7979 6d6d 6464 2873 696e 6365 290a  yyyymmdd(since).
-0004c080: 2020 2020 2020 2020 6d65 7468 6f64 203d          method =
-0004c090: 2027 7072 6976 6174 6547 6574 5635 4163   'privateGetV5Ac
-0004c0a0: 636f 756e 7454 7261 6e73 6163 7469 6f6e  countTransaction
-0004c0b0: 4c6f 6727 2069 6620 2865 6e61 626c 6555  Log' if (enableU
-0004c0c0: 6e69 6669 6564 5b31 5d29 2065 6c73 6520  nified[1]) else 
-0004c0d0: 2770 7269 7661 7465 4765 7456 3250 7269  'privateGetV2Pri
-0004c0e0: 7661 7465 5761 6c6c 6574 4675 6e64 5265  vateWalletFundRe
-0004c0f0: 636f 7264 7327 0a20 2020 2020 2020 2069  cords'.        i
-0004c100: 6620 636f 6465 2069 7320 6e6f 7420 4e6f  f code is not No
-0004c110: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-0004c120: 6375 7272 656e 6379 203d 2073 656c 662e  currency = self.
-0004c130: 6375 7272 656e 6379 2863 6f64 6529 0a20  currency(code). 
-0004c140: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-0004c150: 7374 5b63 7572 7265 6e63 794b 6579 5d20  st[currencyKey] 
-0004c160: 3d20 6375 7272 656e 6379 5b27 6964 275d  = currency['id']
-0004c170: 0a20 2020 2020 2020 2069 6620 6c69 6d69  .        if limi
-0004c180: 7420 6973 206e 6f74 204e 6f6e 653a 0a20  t is not None:. 
-0004c190: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-0004c1a0: 7374 5b27 6c69 6d69 7427 5d20 3d20 6c69  st['limit'] = li
-0004c1b0: 6d69 740a 2020 2020 2020 2020 7265 7370  mit.        resp
-0004c1c0: 6f6e 7365 203d 2061 7761 6974 2067 6574  onse = await get
-0004c1d0: 6174 7472 2873 656c 662c 206d 6574 686f  attr(self, metho
-0004c1e0: 6429 2873 656c 662e 6578 7465 6e64 2872  d)(self.extend(r
-0004c1f0: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
-0004c200: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-0004c210: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
-0004c220: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-0004c230: 745f 636f 6465 223a 2030 2c0a 2020 2020  t_code": 0,.    
-0004c240: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-0004c250: 6574 5f6d 7367 223a 2022 6f6b 222c 0a20  et_msg": "ok",. 
-0004c260: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004c270: 2022 6578 745f 636f 6465 223a 2022 222c   "ext_code": "",
-0004c280: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004c290: 2020 2022 7265 7375 6c74 223a 207b 0a20     "result": {. 
-0004c2a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004c2b0: 2020 2020 2022 6461 7461 223a 205b 0a20       "data": [. 
-0004c2c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004c2d0: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-0004c2e0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0004c2f0: 2020 2020 2020 2020 2022 6964 223a 2032           "id": 2
-0004c300: 3334 3436 372c 0a20 2020 2020 2020 2023  34467,.        #
-0004c310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004c320: 2020 2020 2022 7573 6572 5f69 6422 3a20       "user_id": 
-0004c330: 312c 0a20 2020 2020 2020 2023 2020 2020  1,.        #    
-0004c340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004c350: 2022 636f 696e 223a 2022 4254 4322 2c0a   "coin": "BTC",.
-0004c360: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004c370: 2020 2020 2020 2020 2020 2020 2020 2277                "w
-0004c380: 616c 6c65 745f 6964 223a 2032 3739 3133  allet_id": 27913
-0004c390: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004c3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004c3b0: 2274 7970 6522 3a20 2252 6561 6c69 7a65  "type": "Realize
-0004c3c0: 6420 5026 4c22 2c0a 2020 2020 2020 2020  d P&L",.        
-0004c3d0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004c3e0: 2020 2020 2020 2261 6d6f 756e 7422 3a20        "amount": 
-0004c3f0: 222d 302e 3030 3030 3030 3036 222c 0a20  "-0.00000006",. 
-0004c400: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004c410: 2020 2020 2020 2020 2020 2020 2022 7478               "tx
-0004c420: 5f69 6422 3a20 2222 2c0a 2020 2020 2020  _id": "",.      
-0004c430: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0004c440: 2020 2020 2020 2020 2261 6464 7265 7373          "address
-0004c450: 223a 2022 4254 4355 5344 222c 0a20 2020  ": "BTCUSD",.   
-0004c460: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0004c470: 2020 2020 2020 2020 2020 2022 7761 6c6c             "wall
-0004c480: 6574 5f62 616c 616e 6365 223a 2022 302e  et_balance": "0.
-0004c490: 3033 3030 3033 3330 222c 0a20 2020 2020  03000330",.     
-0004c4a0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0004c4b0: 2020 2020 2020 2020 2022 6578 6563 5f74           "exec_t
-0004c4c0: 696d 6522 3a20 2232 3031 392d 3132 2d30  ime": "2019-12-0
-0004c4d0: 3954 3030 3a30 303a 3235 2e30 3030 5a22  9T00:00:25.000Z"
-0004c4e0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004c4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004c500: 2263 726f 7373 5f73 6571 223a 2030 0a20  "cross_seq": 0. 
-0004c510: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004c520: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
-0004c530: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0004c540: 205d 0a20 2020 2020 2020 2023 2020 2020   ].        #    
-0004c550: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
-0004c560: 2320 2020 2020 2020 2020 2265 7874 5f69  #         "ext_i
-0004c570: 6e66 6f22 3a20 6e75 6c6c 2c0a 2020 2020  nfo": null,.    
-0004c580: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
-0004c590: 696d 655f 6e6f 7722 3a20 2231 3537 3734  ime_now": "15774
-0004c5a0: 3831 3836 372e 3131 3535 3532 222c 0a20  81867.115552",. 
-0004c5b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004c5c0: 2022 7261 7465 5f6c 696d 6974 5f73 7461   "rate_limit_sta
-0004c5d0: 7475 7322 3a20 3131 392c 0a20 2020 2020  tus": 119,.     
-0004c5e0: 2020 2023 2020 2020 2020 2020 2022 7261     #         "ra
-0004c5f0: 7465 5f6c 696d 6974 5f72 6573 6574 5f6d  te_limit_reset_m
-0004c600: 7322 3a20 3135 3737 3438 3138 3637 3132  s": 157748186712
-0004c610: 322c 0a20 2020 2020 2020 2023 2020 2020  2,.        #    
-0004c620: 2020 2020 2022 7261 7465 5f6c 696d 6974       "rate_limit
-0004c630: 223a 2031 3230 0a20 2020 2020 2020 2023  ": 120.        #
-0004c640: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
-0004c650: 0a20 2020 2020 2020 2023 2076 3520 7472  .        # v5 tr
-0004c660: 616e 7361 6374 696f 6e20 6c6f 670a 2020  ansaction log.  
-0004c670: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-0004c680: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
-0004c690: 2320 2020 2020 2020 2020 2272 6574 436f  #         "retCo
-0004c6a0: 6465 223a 2030 2c0a 2020 2020 2020 2020  de": 0,.        
-0004c6b0: 2320 2020 2020 2020 2020 2272 6574 4d73  #         "retMs
-0004c6c0: 6722 3a20 224f 4b22 2c0a 2020 2020 2020  g": "OK",.      
-0004c6d0: 2020 2320 2020 2020 2020 2020 2272 6573    #         "res
-0004c6e0: 756c 7422 3a20 7b0a 2020 2020 2020 2020  ult": {.        
-0004c6f0: 2320 2020 2020 2020 2020 2020 2020 226e  #             "n
-0004c700: 6578 7450 6167 6543 7572 736f 7222 3a20  extPageCursor": 
-0004c710: 2232 3139 3633 2533 4131 2532 4331 3439  "21963%3A1%2C149
-0004c720: 3534 2533 4131 222c 0a20 2020 2020 2020  54%3A1",.       
+0004a810: 2261 6d6f 756e 7422 3a20 2237 3722 2c0a  "amount": "77",.
+0004a820: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004a830: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+0004a840: 7849 4422 3a20 2222 2c0a 2020 2020 2020  xID": "",.      
+0004a850: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0004a860: 2020 2020 2020 2020 2273 7461 7475 7322          "status"
+0004a870: 3a20 2253 6563 7572 6974 7943 6865 636b  : "SecurityCheck
+0004a880: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004a890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004a8a0: 2022 746f 4164 6472 6573 7322 3a20 2230   "toAddress": "0
+0004a8b0: 7839 3963 6564 3132 3936 3033 6162 6337  x99ced129603abc7
+0004a8c0: 3731 6330 6461 6265 3933 3563 3332 3666  71c0dabe935c326f
+0004a8d0: 6636 6338 3636 3435 6422 2c0a 2020 2020  f6c86645d",.    
+0004a8e0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004a8f0: 2020 2020 2020 2020 2020 2274 6167 223a            "tag":
+0004a900: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
+0004a910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004a920: 2020 2022 7769 7468 6472 6177 4665 6522     "withdrawFee"
+0004a930: 3a20 2231 3022 2c0a 2020 2020 2020 2020  : "10",.        
+0004a940: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0004a950: 2020 2020 2020 2263 7265 6174 6554 696d        "createTim
+0004a960: 6522 3a20 2231 3637 3039 3232 3231 3730  e": "16709222170
+0004a970: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+0004a980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004a990: 2020 2022 7570 6461 7465 5469 6d65 223a     "updateTime":
+0004a9a0: 2022 3136 3730 3932 3232 3137 3030 3022   "1670922217000"
+0004a9b0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004a9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004a9d0: 2277 6974 6864 7261 7749 6422 3a20 2239  "withdrawId": "9
+0004a9e0: 3937 3622 2c0a 2020 2020 2020 2020 2320  976",.        # 
+0004a9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004aa00: 2020 2020 2277 6974 6864 7261 7754 7970      "withdrawTyp
+0004aa10: 6522 3a20 300a 2020 2020 2020 2020 2320  e": 0.        # 
+0004aa20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004aa30: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
+0004aa40: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
+0004aa50: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004aa60: 2020 2020 2020 2020 2020 2020 2022 636f               "co
+0004aa70: 696e 223a 2022 5553 4454 222c 0a20 2020  in": "USDT",.   
+0004aa80: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004aa90: 2020 2020 2020 2020 2020 2022 6368 6169             "chai
+0004aaa0: 6e22 3a20 2245 5448 222c 0a20 2020 2020  n": "ETH",.     
+0004aab0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004aac0: 2020 2020 2020 2020 2022 616d 6f75 6e74           "amount
+0004aad0: 223a 2022 3236 222c 0a20 2020 2020 2020  ": "26",.       
+0004aae0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0004aaf0: 2020 2020 2020 2022 7478 4944 223a 2022         "txID": "
+0004ab00: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004ab10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004ab20: 2022 7374 6174 7573 223a 2022 7375 6363   "status": "succ
+0004ab30: 6573 7322 2c0a 2020 2020 2020 2020 2320  ess",.        # 
+0004ab40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004ab50: 2020 2020 2274 6f41 6464 7265 7373 223a      "toAddress":
+0004ab60: 2022 3135 3633 3830 3732 3638 3140 3136   "15638072681@16
+0004ab70: 332e 636f 6d22 2c0a 2020 2020 2020 2020  3.com",.        
+0004ab80: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0004ab90: 2020 2020 2020 2274 6167 223a 2022 222c        "tag": "",
+0004aba0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004abb0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0004abc0: 7769 7468 6472 6177 4665 6522 3a20 2230  withdrawFee": "0
+0004abd0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004abe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004abf0: 2022 6372 6561 7465 5469 6d65 223a 2022   "createTime": "
+0004ac00: 3136 3639 3731 3131 3231 3030 3022 2c0a  1669711121000",.
+0004ac10: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004ac20: 2020 2020 2020 2020 2020 2020 2020 2275                "u
+0004ac30: 7064 6174 6554 696d 6522 3a20 2231 3636  pdateTime": "166
+0004ac40: 3937 3131 3338 3030 3030 222c 0a20 2020  9711380000",.   
+0004ac50: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004ac60: 2020 2020 2020 2020 2020 2022 7769 7468             "with
+0004ac70: 6472 6177 4964 223a 2022 3938 3031 222c  drawId": "9801",
+0004ac80: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004ac90: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0004aca0: 7769 7468 6472 6177 5479 7065 223a 2031  withdrawType": 1
+0004acb0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004acc0: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
+0004acd0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004ace0: 2020 205d 2c0a 2020 2020 2020 2020 2320     ],.        # 
+0004acf0: 2020 2020 2020 2020 2020 2020 226e 6578              "nex
+0004ad00: 7450 6167 6543 7572 736f 7222 3a20 2265  tPageCursor": "e
+0004ad10: 794a 7461 5735 4a52 4349 364f 5467 774d  yJtaW5JRCI6OTgwM
+0004ad20: 5377 6962 5746 3453 5551 694f 6a6b 354e  SwibWF4SUQiOjk5N
+0004ad30: 7a5a 3922 0a20 2020 2020 2020 2023 2020  zZ9".        #  
+0004ad40: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
+0004ad50: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
+0004ad60: 4578 7449 6e66 6f22 3a20 7b7d 2c0a 2020  ExtInfo": {},.  
+0004ad70: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0004ad80: 2274 696d 6522 3a20 3136 3732 3139 3439  "time": 16721949
+0004ad90: 3439 3932 380a 2020 2020 2020 2020 2320  49928.        # 
+0004ada0: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
+0004adb0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+0004adc0: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+0004add0: 2872 6573 706f 6e73 652c 2027 7265 7375  (response, 'resu
+0004ade0: 6c74 272c 207b 7d29 0a20 2020 2020 2020  lt', {}).       
+0004adf0: 2064 6174 6120 3d20 7365 6c66 2e73 6166   data = self.saf
+0004ae00: 655f 7661 6c75 6528 7265 7375 6c74 2c20  e_value(result, 
+0004ae10: 2772 6f77 7327 2c20 5b5d 290a 2020 2020  'rows', []).    
+0004ae20: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+0004ae30: 7061 7273 655f 7472 616e 7361 6374 696f  parse_transactio
+0004ae40: 6e73 2864 6174 612c 2063 7572 7265 6e63  ns(data, currenc
+0004ae50: 792c 2073 696e 6365 2c20 6c69 6d69 7429  y, since, limit)
+0004ae60: 0a0a 2020 2020 6465 6620 7061 7273 655f  ..    def parse_
+0004ae70: 7472 616e 7361 6374 696f 6e5f 7374 6174  transaction_stat
+0004ae80: 7573 2873 656c 662c 2073 7461 7475 7329  us(self, status)
+0004ae90: 3a0a 2020 2020 2020 2020 7374 6174 7573  :.        status
+0004aea0: 6573 203d 207b 0a20 2020 2020 2020 2020  es = {.         
+0004aeb0: 2020 2023 2076 312f 7632 0a20 2020 2020     # v1/v2.     
+0004aec0: 2020 2020 2020 2027 546f 4265 436f 6e66         'ToBeConf
+0004aed0: 6972 6d65 6427 3a20 2770 656e 6469 6e67  irmed': 'pending
+0004aee0: 272c 0a20 2020 2020 2020 2020 2020 2027  ',.            '
+0004aef0: 556e 6465 7252 6576 6965 7727 3a20 2770  UnderReview': 'p
+0004af00: 656e 6469 6e67 272c 0a20 2020 2020 2020  ending',.       
+0004af10: 2020 2020 2027 5375 6363 6573 7327 3a20       'Success': 
+0004af20: 276f 6b27 2c0a 2020 2020 2020 2020 2020  'ok',.          
+0004af30: 2020 2745 7870 6972 6527 3a20 2765 7870    'Expire': 'exp
+0004af40: 6972 6564 272c 0a20 2020 2020 2020 2020  ired',.         
+0004af50: 2020 2023 2076 3320 6465 706f 7369 7420     # v3 deposit 
+0004af60: 7374 6174 7573 0a20 2020 2020 2020 2020  status.         
+0004af70: 2020 2027 3027 3a20 2775 6e6b 6e6f 776e     '0': 'unknown
+0004af80: 272c 0a20 2020 2020 2020 2020 2020 2027  ',.            '
+0004af90: 3127 3a20 2770 656e 6469 6e67 272c 0a20  1': 'pending',. 
+0004afa0: 2020 2020 2020 2020 2020 2027 3227 3a20             '2': 
+0004afb0: 2770 726f 6365 7373 696e 6727 2c0a 2020  'processing',.  
+0004afc0: 2020 2020 2020 2020 2020 2733 273a 2027            '3': '
+0004afd0: 6f6b 272c 0a20 2020 2020 2020 2020 2020  ok',.           
+0004afe0: 2027 3427 3a20 2766 6169 6c27 2c0a 2020   '4': 'fail',.  
+0004aff0: 2020 2020 2020 2020 2020 2320 7633 2077            # v3 w
+0004b000: 6974 6864 7261 7761 6c20 7374 6174 7573  ithdrawal status
+0004b010: 0a20 2020 2020 2020 2020 2020 2027 5365  .            'Se
+0004b020: 6375 7269 7479 4368 6563 6b27 3a20 2770  curityCheck': 'p
+0004b030: 656e 6469 6e67 272c 0a20 2020 2020 2020  ending',.       
+0004b040: 2020 2020 2027 5065 6e64 696e 6727 3a20       'Pending': 
+0004b050: 2770 656e 6469 6e67 272c 0a20 2020 2020  'pending',.     
+0004b060: 2020 2020 2020 2027 7375 6363 6573 7327         'success'
+0004b070: 3a20 276f 6b27 2c0a 2020 2020 2020 2020  : 'ok',.        
+0004b080: 2020 2020 2743 616e 6365 6c42 7955 7365      'CancelByUse
+0004b090: 7227 3a20 2763 616e 6365 6c65 6427 2c0a  r': 'canceled',.
+0004b0a0: 2020 2020 2020 2020 2020 2020 2752 656a              'Rej
+0004b0b0: 6563 7427 3a20 2772 656a 6563 7465 6427  ect': 'rejected'
+0004b0c0: 2c0a 2020 2020 2020 2020 2020 2020 2746  ,.            'F
+0004b0d0: 6169 6c27 3a20 2766 6169 6c65 6427 2c0a  ail': 'failed',.
+0004b0e0: 2020 2020 2020 2020 2020 2020 2742 6c6f              'Blo
+0004b0f0: 636b 6368 6169 6e43 6f6e 6669 726d 6564  ckchainConfirmed
+0004b100: 273a 2027 6f6b 272c 0a20 2020 2020 2020  ': 'ok',.       
+0004b110: 207d 0a20 2020 2020 2020 2072 6574 7572   }.        retur
+0004b120: 6e20 7365 6c66 2e73 6166 655f 7374 7269  n self.safe_stri
+0004b130: 6e67 2873 7461 7475 7365 732c 2073 7461  ng(statuses, sta
+0004b140: 7475 732c 2073 7461 7475 7329 0a0a 2020  tus, status)..  
+0004b150: 2020 6465 6620 7061 7273 655f 7472 616e    def parse_tran
+0004b160: 7361 6374 696f 6e28 7365 6c66 2c20 7472  saction(self, tr
+0004b170: 616e 7361 6374 696f 6e2c 2063 7572 7265  ansaction, curre
+0004b180: 6e63 793d 4e6f 6e65 293a 0a20 2020 2020  ncy=None):.     
+0004b190: 2020 2023 0a20 2020 2020 2020 2023 2066     #.        # f
+0004b1a0: 6574 6368 5769 7468 6472 6177 616c 730a  etchWithdrawals.
+0004b1b0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+0004b1c0: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
+0004b1d0: 2020 2320 2020 2020 2020 2020 2263 6f69    #         "coi
+0004b1e0: 6e22 3a20 2255 5344 5422 2c0a 2020 2020  n": "USDT",.    
+0004b1f0: 2020 2020 2320 2020 2020 2020 2020 2263      #         "c
+0004b200: 6861 696e 223a 2022 5452 5822 2c0a 2020  hain": "TRX",.  
+0004b210: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0004b220: 2261 6d6f 756e 7422 3a20 2231 322e 3334  "amount": "12.34
+0004b230: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004b240: 2020 2020 2022 7478 4944 223a 2022 6465       "txID": "de
+0004b250: 3565 6130 6132 6632 6535 3964 6339 6137  5ea0a2f2e59dc9a7
+0004b260: 3134 3833 3764 6433 6464 6336 6435 6531  14837dd3ddc6d5e1
+0004b270: 3531 6235 3665 6335 6437 3836 6433 3531  51b56ec5d786d351
+0004b280: 6334 6635 3233 3336 6638 3064 3363 222c  c4f52336f80d3c",
+0004b290: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004b2a0: 2020 2022 7374 6174 7573 223a 2022 7375     "status": "su
+0004b2b0: 6363 6573 7322 2c0a 2020 2020 2020 2020  ccess",.        
+0004b2c0: 2320 2020 2020 2020 2020 2274 6f41 6464  #         "toAdd
+0004b2d0: 7265 7373 223a 2022 5451 646d 464b 556f  ress": "TQdmFKUo
+0004b2e0: 6531 4c6b 3269 775a 7577 524a 4548 4a72  e1Lk2iwZuwRJEHJr
+0004b2f0: 6554 5542 6f4e 3342 4177 222c 0a20 2020  eTUBoN3BAw",.   
+0004b300: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0004b310: 7461 6722 3a20 2222 2c0a 2020 2020 2020  tag": "",.      
+0004b320: 2020 2320 2020 2020 2020 2020 2277 6974    #         "wit
+0004b330: 6864 7261 7746 6565 223a 2022 302e 3522  hdrawFee": "0.5"
+0004b340: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004b350: 2020 2020 2263 7265 6174 6554 696d 6522      "createTime"
+0004b360: 3a20 2231 3636 3531 3434 3138 3330 3030  : "1665144183000
+0004b370: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004b380: 2020 2020 2022 7570 6461 7465 5469 6d65       "updateTime
+0004b390: 223a 2022 3136 3635 3134 3432 3536 3030  ": "166514425600
+0004b3a0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+0004b3b0: 2020 2020 2020 2277 6974 6864 7261 7749        "withdrawI
+0004b3c0: 6422 3a20 2238 3833 3930 3335 220a 2020  d": "8839035".  
+0004b3d0: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
+0004b3e0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+0004b3f0: 2320 6665 7463 6844 6570 6f73 6974 730a  # fetchDeposits.
+0004b400: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+0004b410: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
+0004b420: 2020 2320 2020 2020 2020 2020 2263 6f69    #         "coi
+0004b430: 6e22 3a20 2255 5344 5422 2c0a 2020 2020  n": "USDT",.    
+0004b440: 2020 2020 2320 2020 2020 2020 2020 2263      #         "c
+0004b450: 6861 696e 223a 2022 5452 5822 2c0a 2020  hain": "TRX",.  
+0004b460: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0004b470: 2261 6d6f 756e 7422 3a20 2234 3422 2c0a  "amount": "44",.
+0004b480: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004b490: 2020 2274 7849 4422 3a20 2230 6230 3338    "txID": "0b038
+0004b4a0: 6561 3132 6661 3135 3735 6532 6436 3636  ea12fa1575e2d666
+0004b4b0: 3933 6462 3363 3334 3662 3730 3064 3462  93db3c346b700d4b
+0004b4c0: 3238 3334 3761 6663 3339 6638 3033 3231  28347afc39f80321
+0004b4d0: 6366 3038 3961 6363 3936 3022 2c0a 2020  cf089acc960",.  
+0004b4e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0004b4f0: 2273 7461 7475 7322 3a20 2233 222c 0a20  "status": "3",. 
+0004b500: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004b510: 2022 746f 4164 6472 6573 7322 3a20 2254   "toAddress": "T
+0004b520: 4336 4e43 4143 3557 5356 4343 6961 4433  C6NCAC5WSVCCiaD3
+0004b530: 6b57 5a58 7957 3931 5a4b 4b68 4c6d 3533  kWZXyW91ZKKhLm53
+0004b540: 6222 2c0a 2020 2020 2020 2020 2320 2020  b",.        #   
+0004b550: 2020 2020 2020 2274 6167 223a 2022 222c        "tag": "",
+0004b560: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004b570: 2020 2022 6465 706f 7369 7446 6565 223a     "depositFee":
+0004b580: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
+0004b590: 2020 2020 2020 2022 7375 6363 6573 7341         "successA
+0004b5a0: 7422 3a20 2231 3636 3531 3432 3530 3730  t": "16651425070
+0004b5b0: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+0004b5c0: 2020 2020 2020 2022 636f 6e66 6972 6d61         "confirma
+0004b5d0: 7469 6f6e 7322 3a20 2231 3030 222c 0a20  tions": "100",. 
+0004b5e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004b5f0: 2022 7478 496e 6465 7822 3a20 2230 222c   "txIndex": "0",
+0004b600: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004b610: 2020 2022 626c 6f63 6b48 6173 6822 3a20     "blockHash": 
+0004b620: 2230 3030 3030 3030 3030 3261 6333 6231  "0000000002ac3b1
+0004b630: 3036 3461 6565 3934 6263 6131 6264 3062  064aee94bca1bd0b
+0004b640: 3538 6334 6330 3963 3635 3831 3362 3038  58c4c09c65813b08
+0004b650: 3462 3837 6132 3036 3364 3936 3131 3239  4b87a2063d961129
+0004b660: 6522 0a20 2020 2020 2020 2023 2020 2020  e".        #    
+0004b670: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
+0004b680: 2020 2020 2023 2077 6974 6864 7261 770a       # withdraw.
+0004b690: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+0004b6a0: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
+0004b6b0: 2020 2320 2020 2020 2020 2020 2269 6422    #         "id"
+0004b6c0: 3a20 2239 3337 3732 3636 220a 2020 2020  : "9377266".    
+0004b6d0: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+0004b6e0: 2020 2020 230a 2020 2020 2020 2020 6375      #.        cu
+0004b6f0: 7272 656e 6379 4964 203d 2073 656c 662e  rrencyId = self.
+0004b700: 7361 6665 5f73 7472 696e 6728 7472 616e  safe_string(tran
+0004b710: 7361 6374 696f 6e2c 2027 636f 696e 2729  saction, 'coin')
+0004b720: 0a20 2020 2020 2020 2063 6f64 6520 3d20  .        code = 
+0004b730: 7365 6c66 2e73 6166 655f 6375 7272 656e  self.safe_curren
+0004b740: 6379 5f63 6f64 6528 6375 7272 656e 6379  cy_code(currency
+0004b750: 4964 2c20 6375 7272 656e 6379 290a 2020  Id, currency).  
+0004b760: 2020 2020 2020 7469 6d65 7374 616d 7020        timestamp 
+0004b770: 3d20 7365 6c66 2e73 6166 655f 696e 7465  = self.safe_inte
+0004b780: 6765 725f 3228 7472 616e 7361 6374 696f  ger_2(transactio
+0004b790: 6e2c 2027 6372 6561 7465 5469 6d65 272c  n, 'createTime',
+0004b7a0: 2027 7375 6363 6573 7341 7427 290a 2020   'successAt').  
+0004b7b0: 2020 2020 2020 7570 6461 7465 6420 3d20        updated = 
+0004b7c0: 7365 6c66 2e73 6166 655f 696e 7465 6765  self.safe_intege
+0004b7d0: 7228 7472 616e 7361 6374 696f 6e2c 2027  r(transaction, '
+0004b7e0: 7570 6461 7465 5469 6d65 2729 0a20 2020  updateTime').   
+0004b7f0: 2020 2020 2073 7461 7475 7320 3d20 7365       status = se
+0004b800: 6c66 2e70 6172 7365 5f74 7261 6e73 6163  lf.parse_transac
+0004b810: 7469 6f6e 5f73 7461 7475 7328 7365 6c66  tion_status(self
+0004b820: 2e73 6166 655f 7374 7269 6e67 2874 7261  .safe_string(tra
+0004b830: 6e73 6163 7469 6f6e 2c20 2773 7461 7475  nsaction, 'statu
+0004b840: 7327 2929 0a20 2020 2020 2020 2066 6565  s')).        fee
+0004b850: 436f 7374 203d 2073 656c 662e 7361 6665  Cost = self.safe
+0004b860: 5f6e 756d 6265 725f 3228 7472 616e 7361  _number_2(transa
+0004b870: 6374 696f 6e2c 2027 6465 706f 7369 7446  ction, 'depositF
+0004b880: 6565 272c 2027 7769 7468 6472 6177 4665  ee', 'withdrawFe
+0004b890: 6527 2c20 3029 0a20 2020 2020 2020 2074  e', 0).        t
+0004b8a0: 7970 6520 3d20 2764 6570 6f73 6974 2720  ype = 'deposit' 
+0004b8b0: 6966 2028 2764 6570 6f73 6974 4665 6527  if ('depositFee'
+0004b8c0: 2069 6e20 7472 616e 7361 6374 696f 6e29   in transaction)
+0004b8d0: 2065 6c73 6520 2777 6974 6864 7261 7761   else 'withdrawa
+0004b8e0: 6c27 0a20 2020 2020 2020 2066 6565 203d  l'.        fee =
+0004b8f0: 204e 6f6e 650a 2020 2020 2020 2020 6966   None.        if
+0004b900: 2066 6565 436f 7374 2069 7320 6e6f 7420   feeCost is not 
+0004b910: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+0004b920: 2020 6665 6520 3d20 7b0a 2020 2020 2020    fee = {.      
+0004b930: 2020 2020 2020 2020 2020 2763 6f73 7427            'cost'
+0004b940: 3a20 6665 6543 6f73 742c 0a20 2020 2020  : feeCost,.     
+0004b950: 2020 2020 2020 2020 2020 2027 6375 7272             'curr
+0004b960: 656e 6379 273a 2063 6f64 652c 0a20 2020  ency': code,.   
+0004b970: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+0004b980: 2020 2074 6f41 6464 7265 7373 203d 2073     toAddress = s
+0004b990: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+0004b9a0: 7472 616e 7361 6374 696f 6e2c 2027 746f  transaction, 'to
+0004b9b0: 4164 6472 6573 7327 290a 2020 2020 2020  Address').      
+0004b9c0: 2020 7265 7475 726e 207b 0a20 2020 2020    return {.     
+0004b9d0: 2020 2020 2020 2027 696e 666f 273a 2074         'info': t
+0004b9e0: 7261 6e73 6163 7469 6f6e 2c0a 2020 2020  ransaction,.    
+0004b9f0: 2020 2020 2020 2020 2769 6427 3a20 7365          'id': se
+0004ba00: 6c66 2e73 6166 655f 7374 7269 6e67 5f32  lf.safe_string_2
+0004ba10: 2874 7261 6e73 6163 7469 6f6e 2c20 2769  (transaction, 'i
+0004ba20: 6427 2c20 2777 6974 6864 7261 7749 6427  d', 'withdrawId'
+0004ba30: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
+0004ba40: 7478 6964 273a 2073 656c 662e 7361 6665  txid': self.safe
+0004ba50: 5f73 7472 696e 6728 7472 616e 7361 6374  _string(transact
+0004ba60: 696f 6e2c 2027 7478 4944 2729 2c0a 2020  ion, 'txID'),.  
+0004ba70: 2020 2020 2020 2020 2020 2774 696d 6573            'times
+0004ba80: 7461 6d70 273a 2074 696d 6573 7461 6d70  tamp': timestamp
+0004ba90: 2c0a 2020 2020 2020 2020 2020 2020 2764  ,.            'd
+0004baa0: 6174 6574 696d 6527 3a20 7365 6c66 2e69  atetime': self.i
+0004bab0: 736f 3836 3031 2874 696d 6573 7461 6d70  so8601(timestamp
+0004bac0: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
+0004bad0: 6e65 7477 6f72 6b27 3a20 7365 6c66 2e6e  network': self.n
+0004bae0: 6574 776f 726b 5f69 645f 746f 5f63 6f64  etwork_id_to_cod
+0004baf0: 6528 7365 6c66 2e73 6166 655f 7374 7269  e(self.safe_stri
+0004bb00: 6e67 2874 7261 6e73 6163 7469 6f6e 2c20  ng(transaction, 
+0004bb10: 2763 6861 696e 2729 292c 0a20 2020 2020  'chain')),.     
+0004bb20: 2020 2020 2020 2027 6164 6472 6573 7327         'address'
+0004bb30: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
+0004bb40: 2020 2020 2761 6464 7265 7373 546f 273a      'addressTo':
+0004bb50: 2074 6f41 6464 7265 7373 2c0a 2020 2020   toAddress,.    
+0004bb60: 2020 2020 2020 2020 2761 6464 7265 7373          'address
+0004bb70: 4672 6f6d 273a 204e 6f6e 652c 0a20 2020  From': None,.   
+0004bb80: 2020 2020 2020 2020 2027 7461 6727 3a20           'tag': 
+0004bb90: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+0004bba0: 2874 7261 6e73 6163 7469 6f6e 2c20 2774  (transaction, 't
+0004bbb0: 6167 2729 2c0a 2020 2020 2020 2020 2020  ag'),.          
+0004bbc0: 2020 2774 6167 546f 273a 204e 6f6e 652c    'tagTo': None,
+0004bbd0: 0a20 2020 2020 2020 2020 2020 2027 7461  .            'ta
+0004bbe0: 6746 726f 6d27 3a20 4e6f 6e65 2c0a 2020  gFrom': None,.  
+0004bbf0: 2020 2020 2020 2020 2020 2774 7970 6527            'type'
+0004bc00: 3a20 7479 7065 2c0a 2020 2020 2020 2020  : type,.        
+0004bc10: 2020 2020 2761 6d6f 756e 7427 3a20 7365      'amount': se
+0004bc20: 6c66 2e73 6166 655f 6e75 6d62 6572 2874  lf.safe_number(t
+0004bc30: 7261 6e73 6163 7469 6f6e 2c20 2761 6d6f  ransaction, 'amo
+0004bc40: 756e 7427 292c 0a20 2020 2020 2020 2020  unt'),.         
+0004bc50: 2020 2027 6375 7272 656e 6379 273a 2063     'currency': c
+0004bc60: 6f64 652c 0a20 2020 2020 2020 2020 2020  ode,.           
+0004bc70: 2027 7374 6174 7573 273a 2073 7461 7475   'status': statu
+0004bc80: 732c 0a20 2020 2020 2020 2020 2020 2027  s,.            '
+0004bc90: 7570 6461 7465 6427 3a20 7570 6461 7465  updated': update
+0004bca0: 642c 0a20 2020 2020 2020 2020 2020 2027  d,.            '
+0004bcb0: 6665 6527 3a20 6665 652c 0a20 2020 2020  fee': fee,.     
+0004bcc0: 2020 207d 0a0a 2020 2020 6173 796e 6320     }..    async 
+0004bcd0: 6465 6620 6665 7463 685f 6c65 6467 6572  def fetch_ledger
+0004bce0: 2873 656c 662c 2063 6f64 653a 204f 7074  (self, code: Opt
+0004bcf0: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
+0004bd00: 652c 2073 696e 6365 3a20 4f70 7469 6f6e  e, since: Option
+0004bd10: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c20  al[int] = None, 
+0004bd20: 6c69 6d69 743a 204f 7074 696f 6e61 6c5b  limit: Optional[
+0004bd30: 696e 745d 203d 204e 6f6e 652c 2070 6172  int] = None, par
+0004bd40: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
+0004bd50: 2022 2222 0a20 2020 2020 2020 2066 6574   """.        fet
+0004bd60: 6368 2074 6865 2068 6973 746f 7279 206f  ch the history o
+0004bd70: 6620 6368 616e 6765 732c 2061 6374 696f  f changes, actio
+0004bd80: 6e73 2064 6f6e 6520 6279 2074 6865 2075  ns done by the u
+0004bd90: 7365 7220 6f72 206f 7065 7261 7469 6f6e  ser or operation
+0004bda0: 7320 7468 6174 2061 6c74 6572 6564 2062  s that altered b
+0004bdb0: 616c 616e 6365 206f 6620 7468 6520 7573  alance of the us
+0004bdc0: 6572 0a20 2020 2020 2020 2073 6565 2068  er.        see h
+0004bdd0: 7474 7073 3a2f 2f62 7962 6974 2d65 7863  ttps://bybit-exc
+0004bde0: 6861 6e67 652e 6769 7468 7562 2e69 6f2f  hange.github.io/
+0004bdf0: 646f 6373 2f76 352f 6163 636f 756e 742f  docs/v5/account/
+0004be00: 7472 616e 7361 6374 696f 6e2d 6c6f 670a  transaction-log.
+0004be10: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+0004be20: 7472 7c4e 6f6e 6520 636f 6465 3a20 756e  tr|None code: un
+0004be30: 6966 6965 6420 6375 7272 656e 6379 2063  ified currency c
+0004be40: 6f64 652c 2064 6566 6175 6c74 2069 7320  ode, default is 
+0004be50: 4e6f 6e65 0a20 2020 2020 2020 203a 7061  None.        :pa
+0004be60: 7261 6d20 696e 747c 4e6f 6e65 2073 696e  ram int|None sin
+0004be70: 6365 3a20 7469 6d65 7374 616d 7020 696e  ce: timestamp in
+0004be80: 206d 7320 6f66 2074 6865 2065 6172 6c69   ms of the earli
+0004be90: 6573 7420 6c65 6467 6572 2065 6e74 7279  est ledger entry
+0004bea0: 2c20 6465 6661 756c 7420 6973 204e 6f6e  , default is Non
+0004beb0: 650a 2020 2020 2020 2020 3a70 6172 616d  e.        :param
+0004bec0: 2069 6e74 7c4e 6f6e 6520 6c69 6d69 743a   int|None limit:
+0004bed0: 206d 6178 206e 756d 6265 7220 6f66 206c   max number of l
+0004bee0: 6564 6765 7220 656e 7472 7973 2074 6f20  edger entrys to 
+0004bef0: 7265 7475 726e 2c20 6465 6661 756c 7420  return, default 
+0004bf00: 6973 204e 6f6e 650a 2020 2020 2020 2020  is None.        
+0004bf10: 3a70 6172 616d 2064 6963 7420 7061 7261  :param dict para
+0004bf20: 6d73 3a20 6578 7472 6120 7061 7261 6d65  ms: extra parame
+0004bf30: 7465 7273 2073 7065 6369 6669 6320 746f  ters specific to
+0004bf40: 2074 6865 2062 7962 6974 2061 7069 2065   the bybit api e
+0004bf50: 6e64 706f 696e 740a 2020 2020 2020 2020  ndpoint.        
+0004bf60: 3a72 6574 7572 6e73 2064 6963 743a 2061  :returns dict: a
+0004bf70: 2060 6c65 6467 6572 2073 7472 7563 7475   `ledger structu
+0004bf80: 7265 203c 6874 7470 733a 2f2f 646f 6373  re <https://docs
+0004bf90: 2e63 6378 742e 636f 6d2f 232f 3f69 643d  .ccxt.com/#/?id=
+0004bfa0: 6c65 6467 6572 2d73 7472 7563 7475 7265  ledger-structure
+0004bfb0: 3e60 0a20 2020 2020 2020 2022 2222 0a20  >`.        """. 
+0004bfc0: 2020 2020 2020 2061 7761 6974 2073 656c         await sel
+0004bfd0: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
+0004bfe0: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
+0004bff0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+0004c000: 2023 2027 636f 696e 273a 2063 7572 7265   # 'coin': curre
+0004c010: 6e63 795b 2769 6427 5d2c 0a20 2020 2020  ncy['id'],.     
+0004c020: 2020 2020 2020 2023 2027 6375 7272 656e         # 'curren
+0004c030: 6379 273a 2063 7572 7265 6e63 795b 2769  cy': currency['i
+0004c040: 6427 5d2c 2020 2320 616c 6961 730a 2020  d'],  # alias.  
+0004c050: 2020 2020 2020 2020 2020 2320 2773 7461            # 'sta
+0004c060: 7274 5f64 6174 6527 3a20 7365 6c66 2e69  rt_date': self.i
+0004c070: 736f 3836 3031 2873 696e 6365 292c 0a20  so8601(since),. 
+0004c080: 2020 2020 2020 2020 2020 2023 2027 656e             # 'en
+0004c090: 645f 6461 7465 273a 2073 656c 662e 6973  d_date': self.is
+0004c0a0: 6f38 3630 3128 7469 6c6c 292c 0a20 2020  o8601(till),.   
+0004c0b0: 2020 2020 2020 2020 2023 2027 7761 6c6c           # 'wall
+0004c0c0: 6574 5f66 756e 645f 7479 7065 273a 2027  et_fund_type': '
+0004c0d0: 4465 706f 7369 7427 2c20 2023 2057 6974  Deposit',  # Wit
+0004c0e0: 6864 7261 772c 2052 6561 6c69 7365 6450  hdraw, RealisedP
+0004c0f0: 4e4c 2c20 436f 6d6d 6973 7369 6f6e 2c20  NL, Commission, 
+0004c100: 5265 6675 6e64 2c20 5072 697a 652c 2045  Refund, Prize, E
+0004c110: 7863 6861 6e67 654f 7264 6572 5769 7468  xchangeOrderWith
+0004c120: 6472 6177 2c20 4578 6368 616e 6765 4f72  draw, ExchangeOr
+0004c130: 6465 7244 6570 6f73 6974 0a20 2020 2020  derDeposit.     
+0004c140: 2020 2020 2020 2023 2027 7061 6765 273a         # 'page':
+0004c150: 2031 2c0a 2020 2020 2020 2020 2020 2020   1,.            
+0004c160: 2320 276c 696d 6974 273a 2032 302c 2020  # 'limit': 20,  
+0004c170: 2320 6d61 7820 3530 0a20 2020 2020 2020  # max 50.       
+0004c180: 2020 2020 2023 2076 3520 7472 616e 7361       # v5 transa
+0004c190: 6374 696f 6e20 6c6f 670a 2020 2020 2020  ction log.      
+0004c1a0: 2020 2020 2020 2320 2761 6363 6f75 6e74        # 'account
+0004c1b0: 5479 7065 273a 2027 272c 2041 6363 6f75  Type': '', Accou
+0004c1c0: 6e74 2054 7970 652e 2055 4e49 4649 4544  nt Type. UNIFIED
+0004c1d0: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+0004c1e0: 6361 7465 676f 7279 273a 2027 272c 2050  category': '', P
+0004c1f0: 726f 6475 6374 2074 7970 652e 2073 706f  roduct type. spo
+0004c200: 742c 6c69 6e65 6172 2c6f 7074 696f 6e0a  t,linear,option.
+0004c210: 2020 2020 2020 2020 2020 2020 2320 2763              # 'c
+0004c220: 7572 7265 6e63 7927 3a20 2727 2c20 4375  urrency': '', Cu
+0004c230: 7272 656e 6379 0a20 2020 2020 2020 2020  rrency.         
+0004c240: 2020 2023 2027 6261 7365 436f 696e 273a     # 'baseCoin':
+0004c250: 2027 272c 2042 6173 6543 6f69 6e2e 2065   '', BaseCoin. e
+0004c260: 2e67 2e2c 2042 5443 206f 6620 4254 4350  .g., BTC of BTCP
+0004c270: 4552 500a 2020 2020 2020 2020 2020 2020  ERP.            
+0004c280: 2320 2774 7970 6527 3a20 2727 2c20 5479  # 'type': '', Ty
+0004c290: 7065 7320 6f66 2074 7261 6e73 6163 7469  pes of transacti
+0004c2a0: 6f6e 206c 6f67 730a 2020 2020 2020 2020  on logs.        
+0004c2b0: 2020 2020 2320 2773 7461 7274 5469 6d65      # 'startTime
+0004c2c0: 273a 2030 2c20 5468 6520 7374 6172 7420  ': 0, The start 
+0004c2d0: 7469 6d65 7374 616d 7028 6d73 290a 2020  timestamp(ms).  
+0004c2e0: 2020 2020 2020 2020 2020 2320 2765 6e64            # 'end
+0004c2f0: 5469 6d65 273a 2030 2c20 5468 6520 656e  Time': 0, The en
+0004c300: 6420 7469 6d65 7374 616d 7028 6d73 290a  d timestamp(ms).
+0004c310: 2020 2020 2020 2020 2020 2020 2320 276c              # 'l
+0004c320: 696d 6974 273a 2030 2c20 4c69 6d69 7420  imit': 0, Limit 
+0004c330: 666f 7220 6461 7461 2073 697a 6520 7065  for data size pe
+0004c340: 7220 7061 6765 2e20 5b31 2c20 3530 5d2e  r page. [1, 50].
+0004c350: 2044 6566 6175 6c74 3a20 3230 0a20 2020   Default: 20.   
+0004c360: 2020 2020 2020 2020 2023 2027 6375 7273           # 'curs
+0004c370: 6f72 273a 2027 272c 2043 7572 736f 722e  or': '', Cursor.
+0004c380: 2055 7365 6420 666f 7220 7061 6769 6e61   Used for pagina
+0004c390: 7469 6f6e 0a20 2020 2020 2020 207d 0a20  tion.        }. 
+0004c3a0: 2020 2020 2020 2065 6e61 626c 6555 6e69         enableUni
+0004c3b0: 6669 6564 203d 2061 7761 6974 2073 656c  fied = await sel
+0004c3c0: 662e 6973 5f75 6e69 6669 6564 5f65 6e61  f.is_unified_ena
+0004c3d0: 626c 6564 2829 0a20 2020 2020 2020 2063  bled().        c
+0004c3e0: 7572 7265 6e63 7920 3d20 4e6f 6e65 0a20  urrency = None. 
+0004c3f0: 2020 2020 2020 2063 7572 7265 6e63 794b         currencyK
+0004c400: 6579 203d 2027 636f 696e 270a 2020 2020  ey = 'coin'.    
+0004c410: 2020 2020 6966 2065 6e61 626c 6555 6e69      if enableUni
+0004c420: 6669 6564 5b31 5d3a 0a20 2020 2020 2020  fied[1]:.       
+0004c430: 2020 2020 2063 7572 7265 6e63 794b 6579       currencyKey
+0004c440: 203d 2027 6375 7272 656e 6379 270a 2020   = 'currency'.  
+0004c450: 2020 2020 2020 2020 2020 6966 2073 696e            if sin
+0004c460: 6365 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ce is not None:.
+0004c470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004c480: 7265 7175 6573 745b 2773 7461 7274 5469  request['startTi
+0004c490: 6d65 275d 203d 2073 696e 6365 0a20 2020  me'] = since.   
+0004c4a0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0004c4b0: 2020 2020 2020 2069 6620 7369 6e63 6520         if since 
+0004c4c0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0004c4d0: 2020 2020 2020 2020 2020 2020 2072 6571               req
+0004c4e0: 7565 7374 5b27 7374 6172 745f 6461 7465  uest['start_date
+0004c4f0: 275d 203d 2073 656c 662e 7979 7979 6d6d  '] = self.yyyymm
+0004c500: 6464 2873 696e 6365 290a 2020 2020 2020  dd(since).      
+0004c510: 2020 6d65 7468 6f64 203d 2027 7072 6976    method = 'priv
+0004c520: 6174 6547 6574 5635 4163 636f 756e 7454  ateGetV5AccountT
+0004c530: 7261 6e73 6163 7469 6f6e 4c6f 6727 2069  ransactionLog' i
+0004c540: 6620 2865 6e61 626c 6555 6e69 6669 6564  f (enableUnified
+0004c550: 5b31 5d29 2065 6c73 6520 2770 7269 7661  [1]) else 'priva
+0004c560: 7465 4765 7456 3250 7269 7661 7465 5761  teGetV2PrivateWa
+0004c570: 6c6c 6574 4675 6e64 5265 636f 7264 7327  lletFundRecords'
+0004c580: 0a20 2020 2020 2020 2069 6620 636f 6465  .        if code
+0004c590: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0004c5a0: 2020 2020 2020 2020 2020 6375 7272 656e            curren
+0004c5b0: 6379 203d 2073 656c 662e 6375 7272 656e  cy = self.curren
+0004c5c0: 6379 2863 6f64 6529 0a20 2020 2020 2020  cy(code).       
+0004c5d0: 2020 2020 2072 6571 7565 7374 5b63 7572       request[cur
+0004c5e0: 7265 6e63 794b 6579 5d20 3d20 6375 7272  rencyKey] = curr
+0004c5f0: 656e 6379 5b27 6964 275d 0a20 2020 2020  ency['id'].     
+0004c600: 2020 2069 6620 6c69 6d69 7420 6973 206e     if limit is n
+0004c610: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+0004c620: 2020 2020 2072 6571 7565 7374 5b27 6c69       request['li
+0004c630: 6d69 7427 5d20 3d20 6c69 6d69 740a 2020  mit'] = limit.  
+0004c640: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+0004c650: 2061 7761 6974 2067 6574 6174 7472 2873   await getattr(s
+0004c660: 656c 662c 206d 6574 686f 6429 2873 656c  elf, method)(sel
+0004c670: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
+0004c680: 2c20 7061 7261 6d73 2929 0a20 2020 2020  , params)).     
+0004c690: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
+0004c6a0: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
+0004c6b0: 2020 2020 2020 2022 7265 745f 636f 6465         "ret_code
+0004c6c0: 223a 2030 2c0a 2020 2020 2020 2020 2320  ": 0,.        # 
+0004c6d0: 2020 2020 2020 2020 2272 6574 5f6d 7367          "ret_msg
+0004c6e0: 223a 2022 6f6b 222c 0a20 2020 2020 2020  ": "ok",.       
+0004c6f0: 2023 2020 2020 2020 2020 2022 6578 745f   #         "ext_
+0004c700: 636f 6465 223a 2022 222c 0a20 2020 2020  code": "",.     
+0004c710: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+0004c720: 7375 6c74 223a 207b 0a20 2020 2020 2020  sult": {.       
 0004c730: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-0004c740: 6c69 7374 223a 205b 0a20 2020 2020 2020  list": [.       
+0004c740: 6461 7461 223a 205b 0a20 2020 2020 2020  data": [.       
 0004c750: 2023 2020 2020 2020 2020 2020 2020 2020   #              
 0004c760: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
 0004c770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004c780: 2020 2022 7379 6d62 6f6c 223a 2022 5852     "symbol": "XR
-0004c790: 5055 5344 5422 2c0a 2020 2020 2020 2020  PUSDT",.        
-0004c7a0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004c7b0: 2020 2020 2020 2273 6964 6522 3a20 2242        "side": "B
-0004c7c0: 7579 222c 0a20 2020 2020 2020 2023 2020  uy",.        #  
-0004c7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004c7e0: 2020 2022 6675 6e64 696e 6722 3a20 222d     "funding": "-
-0004c7f0: 302e 3030 3336 3736 222c 0a20 2020 2020  0.003676",.     
-0004c800: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0004c810: 2020 2020 2020 2020 2022 6f72 6465 724c           "orderL
-0004c820: 696e 6b49 6422 3a20 2222 2c0a 2020 2020  inkId": "",.    
-0004c830: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004c840: 2020 2020 2020 2020 2020 226f 7264 6572            "order
-0004c850: 4964 223a 2022 3136 3732 3132 3830 3030  Id": "1672128000
-0004c860: 2d38 2d35 3932 3332 342d 312d 3222 2c0a  -8-592324-1-2",.
-0004c870: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004c880: 2020 2020 2020 2020 2020 2020 2020 2266                "f
-0004c890: 6565 223a 2022 302e 3030 3030 3030 3030  ee": "0.00000000
-0004c8a0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004c8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004c8c0: 2022 6368 616e 6765 223a 2022 2d30 2e30   "change": "-0.0
-0004c8d0: 3033 3637 3622 2c0a 2020 2020 2020 2020  03676",.        
-0004c8e0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004c8f0: 2020 2020 2020 2263 6173 6846 6c6f 7722        "cashFlow"
-0004c900: 3a20 2230 222c 0a20 2020 2020 2020 2023  : "0",.        #
-0004c910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004c920: 2020 2020 2022 7472 616e 7361 6374 696f       "transactio
-0004c930: 6e54 696d 6522 3a20 2231 3637 3231 3238  nTime": "1672128
-0004c940: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
-0004c950: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004c960: 2020 2020 2020 2022 7479 7065 223a 2022         "type": "
-0004c970: 5345 5454 4c45 4d45 4e54 222c 0a20 2020  SETTLEMENT",.   
-0004c980: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0004c990: 2020 2020 2020 2020 2020 2022 6665 6552             "feeR
-0004c9a0: 6174 6522 3a20 2230 2e30 3030 3122 2c0a  ate": "0.0001",.
-0004c9b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004c9c0: 2020 2020 2020 2020 2020 2020 2020 2273                "s
-0004c9d0: 697a 6522 3a20 2231 3030 222c 0a20 2020  ize": "100",.   
-0004c9e0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0004c9f0: 2020 2020 2020 2020 2020 2022 7174 7922             "qty"
-0004ca00: 3a20 2231 3030 222c 0a20 2020 2020 2020  : "100",.       
-0004ca10: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004ca20: 2020 2020 2020 2022 6361 7368 4261 6c61         "cashBala
-0004ca30: 6e63 6522 3a20 2235 3038 362e 3535 3832  nce": "5086.5582
-0004ca40: 3530 3032 222c 0a20 2020 2020 2020 2023  5002",.        #
-0004ca50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004ca60: 2020 2020 2022 6375 7272 656e 6379 223a       "currency":
-0004ca70: 2022 5553 4454 222c 0a20 2020 2020 2020   "USDT",.       
-0004ca80: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004ca90: 2020 2020 2020 2022 6361 7465 676f 7279         "category
-0004caa0: 223a 2022 6c69 6e65 6172 222c 0a20 2020  ": "linear",.   
-0004cab0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0004cac0: 2020 2020 2020 2020 2020 2022 7472 6164             "trad
-0004cad0: 6550 7269 6365 223a 2022 302e 3336 3736  ePrice": "0.3676
-0004cae0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004caf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004cb00: 2022 7472 6164 6549 6422 3a20 2235 3334   "tradeId": "534
-0004cb10: 6330 3030 332d 3462 6637 2d34 3836 662d  c0003-4bf7-486f-
-0004cb20: 6161 3032 2d37 3863 6565 3336 3832 3565  aa02-78cee36825e
-0004cb30: 3422 0a20 2020 2020 2020 2023 2020 2020  4".        #    
-0004cb40: 2020 2020 2020 2020 2020 2020 207d 2c0a               },.
-0004cb50: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004cb60: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
-0004cb70: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004cb80: 2020 2020 2020 2020 2020 2273 796d 626f            "symbo
-0004cb90: 6c22 3a20 2258 5250 5553 4454 222c 0a20  l": "XRPUSDT",. 
-0004cba0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004cbb0: 2020 2020 2020 2020 2020 2020 2022 7369               "si
-0004cbc0: 6465 223a 2022 4275 7922 2c0a 2020 2020  de": "Buy",.    
-0004cbd0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004cbe0: 2020 2020 2020 2020 2020 2266 756e 6469            "fundi
-0004cbf0: 6e67 223a 2022 222c 0a20 2020 2020 2020  ng": "",.       
-0004cc00: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004cc10: 2020 2020 2020 2022 6f72 6465 724c 696e         "orderLin
-0004cc20: 6b49 6422 3a20 226c 696e 6561 722d 6f72  kId": "linear-or
-0004cc30: 6465 7222 2c0a 2020 2020 2020 2020 2320  der",.        # 
-0004cc40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004cc50: 2020 2020 226f 7264 6572 4964 223a 2022      "orderId": "
-0004cc60: 3539 3262 3765 3431 2d37 3866 642d 3432  592b7e41-78fd-42
-0004cc70: 6532 2d39 6161 332d 3931 6531 3833 3565  e2-9aa3-91e1835e
-0004cc80: 6633 6531 222c 0a20 2020 2020 2020 2023  f3e1",.        #
+0004c780: 2020 2022 6964 223a 2032 3334 3436 372c     "id": 234467,
+0004c790: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004c7a0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0004c7b0: 7573 6572 5f69 6422 3a20 312c 0a20 2020  user_id": 1,.   
+0004c7c0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004c7d0: 2020 2020 2020 2020 2020 2022 636f 696e             "coin
+0004c7e0: 223a 2022 4254 4322 2c0a 2020 2020 2020  ": "BTC",.      
+0004c7f0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0004c800: 2020 2020 2020 2020 2277 616c 6c65 745f          "wallet_
+0004c810: 6964 223a 2032 3739 3133 2c0a 2020 2020  id": 27913,.    
+0004c820: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004c830: 2020 2020 2020 2020 2020 2274 7970 6522            "type"
+0004c840: 3a20 2252 6561 6c69 7a65 6420 5026 4c22  : "Realized P&L"
+0004c850: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004c860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004c870: 2261 6d6f 756e 7422 3a20 222d 302e 3030  "amount": "-0.00
+0004c880: 3030 3030 3036 222c 0a20 2020 2020 2020  000006",.       
+0004c890: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0004c8a0: 2020 2020 2020 2022 7478 5f69 6422 3a20         "tx_id": 
+0004c8b0: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
+0004c8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004c8d0: 2020 2261 6464 7265 7373 223a 2022 4254    "address": "BT
+0004c8e0: 4355 5344 222c 0a20 2020 2020 2020 2023  CUSD",.        #
+0004c8f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004c900: 2020 2020 2022 7761 6c6c 6574 5f62 616c       "wallet_bal
+0004c910: 616e 6365 223a 2022 302e 3033 3030 3033  ance": "0.030003
+0004c920: 3330 222c 0a20 2020 2020 2020 2023 2020  30",.        #  
+0004c930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004c940: 2020 2022 6578 6563 5f74 696d 6522 3a20     "exec_time": 
+0004c950: 2232 3031 392d 3132 2d30 3954 3030 3a30  "2019-12-09T00:0
+0004c960: 303a 3235 2e30 3030 5a22 2c0a 2020 2020  0:25.000Z",.    
+0004c970: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004c980: 2020 2020 2020 2020 2020 2263 726f 7373            "cross
+0004c990: 5f73 6571 223a 2030 0a20 2020 2020 2020  _seq": 0.       
+0004c9a0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0004c9b0: 2020 207d 0a20 2020 2020 2020 2023 2020     }.        #  
+0004c9c0: 2020 2020 2020 2020 2020 205d 0a20 2020             ].   
+0004c9d0: 2020 2020 2023 2020 2020 2020 2020 207d       #         }
+0004c9e0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004c9f0: 2020 2020 2265 7874 5f69 6e66 6f22 3a20      "ext_info": 
+0004ca00: 6e75 6c6c 2c0a 2020 2020 2020 2020 2320  null,.        # 
+0004ca10: 2020 2020 2020 2020 2274 696d 655f 6e6f          "time_no
+0004ca20: 7722 3a20 2231 3537 3734 3831 3836 372e  w": "1577481867.
+0004ca30: 3131 3535 3532 222c 0a20 2020 2020 2020  115552",.       
+0004ca40: 2023 2020 2020 2020 2020 2022 7261 7465   #         "rate
+0004ca50: 5f6c 696d 6974 5f73 7461 7475 7322 3a20  _limit_status": 
+0004ca60: 3131 392c 0a20 2020 2020 2020 2023 2020  119,.        #  
+0004ca70: 2020 2020 2020 2022 7261 7465 5f6c 696d         "rate_lim
+0004ca80: 6974 5f72 6573 6574 5f6d 7322 3a20 3135  it_reset_ms": 15
+0004ca90: 3737 3438 3138 3637 3132 322c 0a20 2020  77481867122,.   
+0004caa0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0004cab0: 7261 7465 5f6c 696d 6974 223a 2031 3230  rate_limit": 120
+0004cac0: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
+0004cad0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+0004cae0: 2020 2023 2076 3520 7472 616e 7361 6374     # v5 transact
+0004caf0: 696f 6e20 6c6f 670a 2020 2020 2020 2020  ion log.        
+0004cb00: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+0004cb10: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0004cb20: 2020 2020 2272 6574 436f 6465 223a 2030      "retCode": 0
+0004cb30: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004cb40: 2020 2020 2272 6574 4d73 6722 3a20 224f      "retMsg": "O
+0004cb50: 4b22 2c0a 2020 2020 2020 2020 2320 2020  K",.        #   
+0004cb60: 2020 2020 2020 2272 6573 756c 7422 3a20        "result": 
+0004cb70: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0004cb80: 2020 2020 2020 2020 226e 6578 7450 6167          "nextPag
+0004cb90: 6543 7572 736f 7222 3a20 2232 3139 3633  eCursor": "21963
+0004cba0: 2533 4131 2532 4331 3439 3534 2533 4131  %3A1%2C14954%3A1
+0004cbb0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004cbc0: 2020 2020 2020 2020 2022 6c69 7374 223a           "list":
+0004cbd0: 205b 0a20 2020 2020 2020 2023 2020 2020   [.        #    
+0004cbe0: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
+0004cbf0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004cc00: 2020 2020 2020 2020 2020 2020 2022 7379               "sy
+0004cc10: 6d62 6f6c 223a 2022 5852 5055 5344 5422  mbol": "XRPUSDT"
+0004cc20: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004cc30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004cc40: 2273 6964 6522 3a20 2242 7579 222c 0a20  "side": "Buy",. 
+0004cc50: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004cc60: 2020 2020 2020 2020 2020 2020 2022 6675               "fu
+0004cc70: 6e64 696e 6722 3a20 222d 302e 3030 3336  nding": "-0.0036
+0004cc80: 3736 222c 0a20 2020 2020 2020 2023 2020  76",.        #  
 0004cc90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004cca0: 2020 2020 2022 6665 6522 3a20 2230 2e30       "fee": "0.0
-0004ccb0: 3139 3038 3732 3022 2c0a 2020 2020 2020  1908720",.      
-0004ccc0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0004ccd0: 2020 2020 2020 2020 2263 6861 6e67 6522          "change"
-0004cce0: 3a20 222d 302e 3031 3930 3837 3222 2c0a  : "-0.0190872",.
-0004ccf0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004cd00: 2020 2020 2020 2020 2020 2020 2020 2263                "c
-0004cd10: 6173 6846 6c6f 7722 3a20 2230 222c 0a20  ashFlow": "0",. 
-0004cd20: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004cd30: 2020 2020 2020 2020 2020 2020 2022 7472               "tr
-0004cd40: 616e 7361 6374 696f 6e54 696d 6522 3a20  ansactionTime": 
-0004cd50: 2231 3637 3231 3231 3138 3232 3234 222c  "1672121182224",
-0004cd60: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004cd70: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0004cd80: 7479 7065 223a 2022 5452 4144 4522 2c0a  type": "TRADE",.
-0004cd90: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004cda0: 2020 2020 2020 2020 2020 2020 2020 2266                "f
-0004cdb0: 6565 5261 7465 223a 2022 302e 3030 3036  eeRate": "0.0006
-0004cdc0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004cdd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004cde0: 2022 7369 7a65 223a 2022 3130 3022 2c0a   "size": "100",.
-0004cdf0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004ce00: 2020 2020 2020 2020 2020 2020 2020 2271                "q
-0004ce10: 7479 223a 2022 3838 222c 0a20 2020 2020  ty": "88",.     
-0004ce20: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0004ce30: 2020 2020 2020 2020 2022 6361 7368 4261           "cashBa
-0004ce40: 6c61 6e63 6522 3a20 2235 3038 362e 3536  lance": "5086.56
-0004ce50: 3139 3236 3032 222c 0a20 2020 2020 2020  192602",.       
-0004ce60: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004ce70: 2020 2020 2020 2022 6375 7272 656e 6379         "currency
-0004ce80: 223a 2022 5553 4454 222c 0a20 2020 2020  ": "USDT",.     
-0004ce90: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0004cea0: 2020 2020 2020 2020 2022 6361 7465 676f           "catego
-0004ceb0: 7279 223a 2022 6c69 6e65 6172 222c 0a20  ry": "linear",. 
-0004cec0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004ced0: 2020 2020 2020 2020 2020 2020 2022 7472               "tr
-0004cee0: 6164 6550 7269 6365 223a 2022 302e 3336  adePrice": "0.36
-0004cef0: 3135 222c 0a20 2020 2020 2020 2023 2020  15",.        #  
-0004cf00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004cf10: 2020 2022 7472 6164 6549 6422 3a20 2235     "tradeId": "5
-0004cf20: 3138 3466 3037 392d 3838 6563 2d35 3463  184f079-88ec-54c
-0004cf30: 372d 3837 3734 2d35 3137 3363 6166 6432  7-8774-5173cafd2
-0004cf40: 6234 6522 0a20 2020 2020 2020 2023 2020  b4e".        #  
-0004cf50: 2020 2020 2020 2020 2020 2020 2020 207d                 }
-0004cf60: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004cf70: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-0004cf80: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004cf90: 2020 2020 2020 2020 2020 2020 2273 796d              "sym
-0004cfa0: 626f 6c22 3a20 2258 5250 5553 4454 222c  bol": "XRPUSDT",
-0004cfb0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004cfc0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0004cfd0: 7369 6465 223a 2022 4275 7922 2c0a 2020  side": "Buy",.  
-0004cfe0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004cff0: 2020 2020 2020 2020 2020 2020 2266 756e              "fun
-0004d000: 6469 6e67 223a 2022 222c 0a20 2020 2020  ding": "",.     
-0004d010: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0004d020: 2020 2020 2020 2020 2022 6f72 6465 724c           "orderL
-0004d030: 696e 6b49 6422 3a20 226c 696e 6561 722d  inkId": "linear-
-0004d040: 6f72 6465 7222 2c0a 2020 2020 2020 2020  order",.        
-0004d050: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004d060: 2020 2020 2020 226f 7264 6572 4964 223a        "orderId":
-0004d070: 2022 3539 3262 3765 3431 2d37 3866 642d   "592b7e41-78fd-
-0004d080: 3432 6532 2d39 6161 332d 3931 6531 3833  42e2-9aa3-91e183
-0004d090: 3565 6633 6531 222c 0a20 2020 2020 2020  5ef3e1",.       
-0004d0a0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004d0b0: 2020 2020 2020 2022 6665 6522 3a20 2230         "fee": "0
-0004d0c0: 2e30 3032 3630 3238 3022 2c0a 2020 2020  .00260280",.    
-0004d0d0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004d0e0: 2020 2020 2020 2020 2020 2263 6861 6e67            "chang
-0004d0f0: 6522 3a20 222d 302e 3030 3236 3032 3822  e": "-0.0026028"
-0004d100: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004d110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004d120: 2263 6173 6846 6c6f 7722 3a20 2230 222c  "cashFlow": "0",
-0004d130: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004d140: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0004d150: 7472 616e 7361 6374 696f 6e54 696d 6522  transactionTime"
-0004d160: 3a20 2231 3637 3231 3231 3138 3232 3234  : "1672121182224
-0004d170: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004d180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004d190: 2022 7479 7065 223a 2022 5452 4144 4522   "type": "TRADE"
-0004d1a0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004d1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004d1c0: 2266 6565 5261 7465 223a 2022 302e 3030  "feeRate": "0.00
-0004d1d0: 3036 222c 0a20 2020 2020 2020 2023 2020  06",.        #  
-0004d1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004d1f0: 2020 2022 7369 7a65 223a 2022 3132 222c     "size": "12",
-0004d200: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004d210: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0004d220: 7174 7922 3a20 2231 3222 2c0a 2020 2020  qty": "12",.    
-0004d230: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004d240: 2020 2020 2020 2020 2020 2263 6173 6842            "cashB
-0004d250: 616c 616e 6365 223a 2022 3530 3836 2e35  alance": "5086.5
-0004d260: 3831 3031 3332 3222 2c0a 2020 2020 2020  8101322",.      
-0004d270: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0004d280: 2020 2020 2020 2020 2263 7572 7265 6e63          "currenc
-0004d290: 7922 3a20 2255 5344 5422 2c0a 2020 2020  y": "USDT",.    
-0004d2a0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004d2b0: 2020 2020 2020 2020 2020 2263 6174 6567            "categ
-0004d2c0: 6f72 7922 3a20 226c 696e 6561 7222 2c0a  ory": "linear",.
-0004d2d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004d2e0: 2020 2020 2020 2020 2020 2020 2020 2274                "t
-0004d2f0: 7261 6465 5072 6963 6522 3a20 2230 2e33  radePrice": "0.3
-0004d300: 3631 3522 2c0a 2020 2020 2020 2020 2320  615",.        # 
-0004d310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004d320: 2020 2020 2274 7261 6465 4964 223a 2022      "tradeId": "
-0004d330: 3835 3639 6331 3066 2d35 3036 312d 3538  8569c10f-5061-58
-0004d340: 3931 2d38 3163 342d 6135 3439 3239 3834  91-81c4-a5492984
-0004d350: 3765 6233 220a 2020 2020 2020 2020 2320  7eb3".        # 
-0004d360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004d370: 7d0a 2020 2020 2020 2020 2320 2020 2020  }.        #     
-0004d380: 2020 2020 2020 2020 5d0a 2020 2020 2020          ].      
-0004d390: 2020 2320 2020 2020 2020 2020 7d2c 0a20    #         },. 
-0004d3a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004d3b0: 2022 7265 7445 7874 496e 666f 223a 207b   "retExtInfo": {
-0004d3c0: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
-0004d3d0: 2020 2020 2022 7469 6d65 223a 2031 3637       "time": 167
-0004d3e0: 3231 3332 3438 3134 3035 0a20 2020 2020  2132481405.     
-0004d3f0: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
-0004d400: 2020 2023 0a20 2020 2020 2020 2072 6573     #.        res
-0004d410: 756c 7420 3d20 7365 6c66 2e73 6166 655f  ult = self.safe_
-0004d420: 7661 6c75 6528 7265 7370 6f6e 7365 2c20  value(response, 
-0004d430: 2772 6573 756c 7427 2c20 7b7d 290a 2020  'result', {}).  
-0004d440: 2020 2020 2020 6461 7461 203d 2073 656c        data = sel
-0004d450: 662e 7361 6665 5f76 616c 7565 5f32 2872  f.safe_value_2(r
-0004d460: 6573 756c 742c 2027 6461 7461 272c 2027  esult, 'data', '
-0004d470: 6c69 7374 272c 205b 5d29 0a20 2020 2020  list', []).     
-0004d480: 2020 2072 6574 7572 6e20 7365 6c66 2e70     return self.p
-0004d490: 6172 7365 5f6c 6564 6765 7228 6461 7461  arse_ledger(data
-0004d4a0: 2c20 6375 7272 656e 6379 2c20 7369 6e63  , currency, sinc
-0004d4b0: 652c 206c 696d 6974 290a 0a20 2020 2064  e, limit)..    d
-0004d4c0: 6566 2070 6172 7365 5f6c 6564 6765 725f  ef parse_ledger_
-0004d4d0: 656e 7472 7928 7365 6c66 2c20 6974 656d  entry(self, item
-0004d4e0: 2c20 6375 7272 656e 6379 3d4e 6f6e 6529  , currency=None)
-0004d4f0: 3a0a 2020 2020 2020 2020 230a 2020 2020  :.        #.    
-0004d500: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-0004d510: 2020 2020 2320 2020 2020 2020 2020 2269      #         "i
-0004d520: 6422 3a20 3233 3434 3637 2c0a 2020 2020  d": 234467,.    
-0004d530: 2020 2020 2320 2020 2020 2020 2020 2275      #         "u
-0004d540: 7365 725f 6964 223a 2031 2c0a 2020 2020  ser_id": 1,.    
-0004d550: 2020 2020 2320 2020 2020 2020 2020 2263      #         "c
-0004d560: 6f69 6e22 3a20 2242 5443 222c 0a20 2020  oin": "BTC",.   
-0004d570: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0004d580: 7761 6c6c 6574 5f69 6422 3a20 3237 3931  wallet_id": 2791
-0004d590: 332c 0a20 2020 2020 2020 2023 2020 2020  3,.        #    
-0004d5a0: 2020 2020 2022 7479 7065 223a 2022 5265       "type": "Re
-0004d5b0: 616c 697a 6564 2050 264c 222c 0a20 2020  alized P&L",.   
-0004d5c0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0004d5d0: 616d 6f75 6e74 223a 2022 2d30 2e30 3030  amount": "-0.000
-0004d5e0: 3030 3030 3622 2c0a 2020 2020 2020 2020  00006",.        
-0004d5f0: 2320 2020 2020 2020 2020 2274 785f 6964  #         "tx_id
-0004d600: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
-0004d610: 2020 2020 2020 2020 2022 6164 6472 6573           "addres
-0004d620: 7322 3a20 2242 5443 5553 4422 2c0a 2020  s": "BTCUSD",.  
-0004d630: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004d640: 2277 616c 6c65 745f 6261 6c61 6e63 6522  "wallet_balance"
-0004d650: 3a20 2230 2e30 3330 3030 3333 3022 2c0a  : "0.03000330",.
-0004d660: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004d670: 2020 2265 7865 635f 7469 6d65 223a 2022    "exec_time": "
-0004d680: 3230 3139 2d31 322d 3039 5430 303a 3030  2019-12-09T00:00
-0004d690: 3a32 352e 3030 305a 222c 0a20 2020 2020  :25.000Z",.     
-0004d6a0: 2020 2023 2020 2020 2020 2020 2022 6372     #         "cr
-0004d6b0: 6f73 735f 7365 7122 3a20 300a 2020 2020  oss_seq": 0.    
-0004d6c0: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
-0004d6d0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-0004d6e0: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-0004d6f0: 2020 2020 2020 2020 2273 796d 626f 6c22          "symbol"
-0004d700: 3a20 2258 5250 5553 4454 222c 0a20 2020  : "XRPUSDT",.   
-0004d710: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0004d720: 7369 6465 223a 2022 4275 7922 2c0a 2020  side": "Buy",.  
-0004d730: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004d740: 2266 756e 6469 6e67 223a 2022 222c 0a20  "funding": "",. 
-0004d750: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004d760: 2022 6f72 6465 724c 696e 6b49 6422 3a20   "orderLinkId": 
-0004d770: 226c 696e 6561 722d 6f72 6465 7222 2c0a  "linear-order",.
-0004d780: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004d790: 2020 226f 7264 6572 4964 223a 2022 3539    "orderId": "59
-0004d7a0: 3262 3765 3431 2d37 3866 642d 3432 6532  2b7e41-78fd-42e2
-0004d7b0: 2d39 6161 332d 3931 6531 3833 3565 6633  -9aa3-91e1835ef3
-0004d7c0: 6531 222c 0a20 2020 2020 2020 2023 2020  e1",.        #  
-0004d7d0: 2020 2020 2020 2022 6665 6522 3a20 2230         "fee": "0
-0004d7e0: 2e30 3032 3630 3238 3022 2c0a 2020 2020  .00260280",.    
-0004d7f0: 2020 2020 2320 2020 2020 2020 2020 2263      #         "c
-0004d800: 6861 6e67 6522 3a20 222d 302e 3030 3236  hange": "-0.0026
-0004d810: 3032 3822 2c0a 2020 2020 2020 2020 2320  028",.        # 
-0004d820: 2020 2020 2020 2020 2263 6173 6846 6c6f          "cashFlo
-0004d830: 7722 3a20 2230 222c 0a20 2020 2020 2020  w": "0",.       
-0004d840: 2023 2020 2020 2020 2020 2022 7472 616e   #         "tran
-0004d850: 7361 6374 696f 6e54 696d 6522 3a20 2231  sactionTime": "1
-0004d860: 3637 3231 3231 3138 3232 3234 222c 0a20  672121182224",. 
-0004d870: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004d880: 2022 7479 7065 223a 2022 5452 4144 4522   "type": "TRADE"
-0004d890: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004d8a0: 2020 2020 2266 6565 5261 7465 223a 2022      "feeRate": "
-0004d8b0: 302e 3030 3036 222c 0a20 2020 2020 2020  0.0006",.       
-0004d8c0: 2023 2020 2020 2020 2020 2022 7369 7a65   #         "size
-0004d8d0: 223a 2022 3132 222c 0a20 2020 2020 2020  ": "12",.       
-0004d8e0: 2023 2020 2020 2020 2020 2022 7174 7922   #         "qty"
-0004d8f0: 3a20 2231 3222 2c0a 2020 2020 2020 2020  : "12",.        
-0004d900: 2320 2020 2020 2020 2020 2263 6173 6842  #         "cashB
-0004d910: 616c 616e 6365 223a 2022 3530 3836 2e35  alance": "5086.5
-0004d920: 3831 3031 3332 3222 2c0a 2020 2020 2020  8101322",.      
-0004d930: 2020 2320 2020 2020 2020 2020 2263 7572    #         "cur
-0004d940: 7265 6e63 7922 3a20 2255 5344 5422 2c0a  rency": "USDT",.
-0004d950: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004d960: 2020 2263 6174 6567 6f72 7922 3a20 226c    "category": "l
-0004d970: 696e 6561 7222 2c0a 2020 2020 2020 2020  inear",.        
-0004d980: 2320 2020 2020 2020 2020 2274 7261 6465  #         "trade
-0004d990: 5072 6963 6522 3a20 2230 2e33 3631 3522  Price": "0.3615"
-0004d9a0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004d9b0: 2020 2020 2274 7261 6465 4964 223a 2022      "tradeId": "
-0004d9c0: 3835 3639 6331 3066 2d35 3036 312d 3538  8569c10f-5061-58
-0004d9d0: 3931 2d38 3163 342d 6135 3439 3239 3834  91-81c4-a5492984
-0004d9e0: 3765 6233 220a 2020 2020 2020 2020 2320  7eb3".        # 
-0004d9f0: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
-0004da00: 2020 2020 2020 2020 6375 7272 656e 6379          currency
-0004da10: 4964 203d 2073 656c 662e 7361 6665 5f73  Id = self.safe_s
-0004da20: 7472 696e 675f 3228 6974 656d 2c20 2763  tring_2(item, 'c
-0004da30: 6f69 6e27 2c20 2763 7572 7265 6e63 7927  oin', 'currency'
-0004da40: 290a 2020 2020 2020 2020 636f 6465 203d  ).        code =
-0004da50: 2073 656c 662e 7361 6665 5f63 7572 7265   self.safe_curre
-0004da60: 6e63 795f 636f 6465 2863 7572 7265 6e63  ncy_code(currenc
-0004da70: 7949 642c 2063 7572 7265 6e63 7929 0a20  yId, currency). 
-0004da80: 2020 2020 2020 2061 6d6f 756e 7420 3d20         amount = 
-0004da90: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0004daa0: 5f32 2869 7465 6d2c 2027 616d 6f75 6e74  _2(item, 'amount
-0004dab0: 272c 2027 6368 616e 6765 2729 0a20 2020  ', 'change').   
-0004dac0: 2020 2020 2061 6674 6572 203d 2073 656c       after = sel
-0004dad0: 662e 7361 6665 5f73 7472 696e 675f 3228  f.safe_string_2(
-0004dae0: 6974 656d 2c20 2777 616c 6c65 745f 6261  item, 'wallet_ba
-0004daf0: 6c61 6e63 6527 2c20 2763 6173 6842 616c  lance', 'cashBal
-0004db00: 616e 6365 2729 0a20 2020 2020 2020 2064  ance').        d
-0004db10: 6972 6563 7469 6f6e 203d 2027 6f75 7427  irection = 'out'
-0004db20: 2069 6620 5072 6563 6973 652e 7374 7269   if Precise.stri
-0004db30: 6e67 5f6c 7428 616d 6f75 6e74 2c20 2730  ng_lt(amount, '0
-0004db40: 2729 2065 6c73 6520 2769 6e27 0a20 2020  ') else 'in'.   
-0004db50: 2020 2020 2062 6566 6f72 6520 3d20 4e6f       before = No
-0004db60: 6e65 0a20 2020 2020 2020 2069 6620 6166  ne.        if af
-0004db70: 7465 7220 6973 206e 6f74 204e 6f6e 6520  ter is not None 
-0004db80: 616e 6420 616d 6f75 6e74 2069 7320 6e6f  and amount is no
-0004db90: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0004dba0: 2020 2020 6469 6666 6572 656e 6365 203d      difference =
-0004dbb0: 2061 6d6f 756e 7420 6966 2028 6469 7265   amount if (dire
-0004dbc0: 6374 696f 6e20 3d3d 2027 6f75 7427 2920  ction == 'out') 
-0004dbd0: 656c 7365 2050 7265 6369 7365 2e73 7472  else Precise.str
-0004dbe0: 696e 675f 6e65 6728 616d 6f75 6e74 290a  ing_neg(amount).
-0004dbf0: 2020 2020 2020 2020 2020 2020 6265 666f              befo
-0004dc00: 7265 203d 2050 7265 6369 7365 2e73 7472  re = Precise.str
-0004dc10: 696e 675f 6164 6428 6166 7465 722c 2064  ing_add(after, d
-0004dc20: 6966 6665 7265 6e63 6529 0a20 2020 2020  ifference).     
-0004dc30: 2020 2074 696d 6573 7461 6d70 203d 2073     timestamp = s
-0004dc40: 656c 662e 7061 7273 6538 3630 3128 7365  elf.parse8601(se
-0004dc50: 6c66 2e73 6166 655f 7374 7269 6e67 2869  lf.safe_string(i
-0004dc60: 7465 6d2c 2027 6578 6563 5f74 696d 6527  tem, 'exec_time'
-0004dc70: 2929 0a20 2020 2020 2020 2069 6620 7469  )).        if ti
-0004dc80: 6d65 7374 616d 7020 6973 204e 6f6e 653a  mestamp is None:
-0004dc90: 0a20 2020 2020 2020 2020 2020 2074 696d  .            tim
-0004dca0: 6573 7461 6d70 203d 2073 656c 662e 7361  estamp = self.sa
-0004dcb0: 6665 5f69 6e74 6567 6572 2869 7465 6d2c  fe_integer(item,
-0004dcc0: 2027 7472 616e 7361 6374 696f 6e54 696d   'transactionTim
-0004dcd0: 6527 290a 2020 2020 2020 2020 7479 7065  e').        type
-0004dce0: 203d 2073 656c 662e 7061 7273 655f 6c65   = self.parse_le
-0004dcf0: 6467 6572 5f65 6e74 7279 5f74 7970 6528  dger_entry_type(
-0004dd00: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0004dd10: 2869 7465 6d2c 2027 7479 7065 2729 290a  (item, 'type')).
-0004dd20: 2020 2020 2020 2020 6964 203d 2073 656c          id = sel
-0004dd30: 662e 7361 6665 5f73 7472 696e 6728 6974  f.safe_string(it
-0004dd40: 656d 2c20 2769 6427 290a 2020 2020 2020  em, 'id').      
-0004dd50: 2020 7265 6665 7265 6e63 6549 6420 3d20    referenceId = 
-0004dd60: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0004dd70: 2869 7465 6d2c 2027 7478 5f69 6427 290a  (item, 'tx_id').
-0004dd80: 2020 2020 2020 2020 7265 7475 726e 207b          return {
-0004dd90: 0a20 2020 2020 2020 2020 2020 2027 6964  .            'id
-0004dda0: 273a 2069 642c 0a20 2020 2020 2020 2020  ': id,.         
-0004ddb0: 2020 2027 6375 7272 656e 6379 273a 2063     'currency': c
-0004ddc0: 6f64 652c 0a20 2020 2020 2020 2020 2020  ode,.           
-0004ddd0: 2027 6163 636f 756e 7427 3a20 7365 6c66   'account': self
-0004dde0: 2e73 6166 655f 7374 7269 6e67 2869 7465  .safe_string(ite
-0004ddf0: 6d2c 2027 7761 6c6c 6574 5f69 6427 292c  m, 'wallet_id'),
-0004de00: 0a20 2020 2020 2020 2020 2020 2027 7265  .            're
-0004de10: 6665 7265 6e63 6541 6363 6f75 6e74 273a  ferenceAccount':
-0004de20: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
-0004de30: 2020 2027 7265 6665 7265 6e63 6549 6427     'referenceId'
-0004de40: 3a20 7265 6665 7265 6e63 6549 642c 0a20  : referenceId,. 
-0004de50: 2020 2020 2020 2020 2020 2027 7374 6174             'stat
-0004de60: 7573 273a 204e 6f6e 652c 0a20 2020 2020  us': None,.     
-0004de70: 2020 2020 2020 2027 616d 6f75 6e74 273a         'amount':
-0004de80: 2073 656c 662e 7061 7273 655f 6e75 6d62   self.parse_numb
-0004de90: 6572 2861 6d6f 756e 7429 2c0a 2020 2020  er(amount),.    
-0004dea0: 2020 2020 2020 2020 2762 6566 6f72 6527          'before'
-0004deb0: 3a20 7365 6c66 2e70 6172 7365 5f6e 756d  : self.parse_num
-0004dec0: 6265 7228 6265 666f 7265 292c 0a20 2020  ber(before),.   
-0004ded0: 2020 2020 2020 2020 2027 6166 7465 7227           'after'
-0004dee0: 3a20 7365 6c66 2e70 6172 7365 5f6e 756d  : self.parse_num
-0004def0: 6265 7228 6166 7465 7229 2c0a 2020 2020  ber(after),.    
-0004df00: 2020 2020 2020 2020 2766 6565 273a 2073          'fee': s
-0004df10: 656c 662e 7061 7273 655f 6e75 6d62 6572  elf.parse_number
-0004df20: 2873 656c 662e 7361 6665 5f73 7472 696e  (self.safe_strin
-0004df30: 6728 6974 656d 2c20 2766 6565 2729 292c  g(item, 'fee')),
-0004df40: 0a20 2020 2020 2020 2020 2020 2027 6469  .            'di
-0004df50: 7265 6374 696f 6e27 3a20 6469 7265 6374  rection': direct
-0004df60: 696f 6e2c 0a20 2020 2020 2020 2020 2020  ion,.           
-0004df70: 2027 7469 6d65 7374 616d 7027 3a20 7469   'timestamp': ti
-0004df80: 6d65 7374 616d 702c 0a20 2020 2020 2020  mestamp,.       
-0004df90: 2020 2020 2027 6461 7465 7469 6d65 273a       'datetime':
-0004dfa0: 2073 656c 662e 6973 6f38 3630 3128 7469   self.iso8601(ti
-0004dfb0: 6d65 7374 616d 7029 2c0a 2020 2020 2020  mestamp),.      
-0004dfc0: 2020 2020 2020 2774 7970 6527 3a20 7479        'type': ty
-0004dfd0: 7065 2c0a 2020 2020 2020 2020 2020 2020  pe,.            
-0004dfe0: 2769 6e66 6f27 3a20 6974 656d 2c0a 2020  'info': item,.  
-0004dff0: 2020 2020 2020 7d0a 0a20 2020 2064 6566        }..    def
-0004e000: 2070 6172 7365 5f6c 6564 6765 725f 656e   parse_ledger_en
-0004e010: 7472 795f 7479 7065 2873 656c 662c 2074  try_type(self, t
-0004e020: 7970 6529 3a0a 2020 2020 2020 2020 7479  ype):.        ty
-0004e030: 7065 7320 3d20 7b0a 2020 2020 2020 2020  pes = {.        
-0004e040: 2020 2020 2744 6570 6f73 6974 273a 2027      'Deposit': '
-0004e050: 7472 616e 7361 6374 696f 6e27 2c0a 2020  transaction',.  
-0004e060: 2020 2020 2020 2020 2020 2757 6974 6864            'Withd
-0004e070: 7261 7727 3a20 2774 7261 6e73 6163 7469  raw': 'transacti
-0004e080: 6f6e 272c 0a20 2020 2020 2020 2020 2020  on',.           
-0004e090: 2027 5265 616c 6973 6564 504e 4c27 3a20   'RealisedPNL': 
-0004e0a0: 2774 7261 6465 272c 0a20 2020 2020 2020  'trade',.       
-0004e0b0: 2020 2020 2027 436f 6d6d 6973 7369 6f6e       'Commission
-0004e0c0: 273a 2027 6665 6527 2c0a 2020 2020 2020  ': 'fee',.      
-0004e0d0: 2020 2020 2020 2752 6566 756e 6427 3a20        'Refund': 
-0004e0e0: 2763 6173 6862 6163 6b27 2c0a 2020 2020  'cashback',.    
-0004e0f0: 2020 2020 2020 2020 2750 7269 7a65 273a          'Prize':
-0004e100: 2027 7072 697a 6527 2c20 2023 203f 0a20   'prize',  # ?. 
-0004e110: 2020 2020 2020 2020 2020 2027 4578 6368             'Exch
-0004e120: 616e 6765 4f72 6465 7257 6974 6864 7261  angeOrderWithdra
-0004e130: 7727 3a20 2774 7261 6e73 6163 7469 6f6e  w': 'transaction
-0004e140: 272c 0a20 2020 2020 2020 2020 2020 2027  ',.            '
-0004e150: 4578 6368 616e 6765 4f72 6465 7244 6570  ExchangeOrderDep
-0004e160: 6f73 6974 273a 2027 7472 616e 7361 6374  osit': 'transact
-0004e170: 696f 6e27 2c0a 2020 2020 2020 2020 2020  ion',.          
-0004e180: 2020 2320 7635 0a20 2020 2020 2020 2020    # v5.         
-0004e190: 2020 2027 5452 414e 5346 4552 5f49 4e27     'TRANSFER_IN'
-0004e1a0: 3a20 2774 7261 6e73 6163 7469 6f6e 272c  : 'transaction',
-0004e1b0: 0a20 2020 2020 2020 2020 2020 2027 5452  .            'TR
-0004e1c0: 414e 5346 4552 5f4f 5554 273a 2027 7472  ANSFER_OUT': 'tr
-0004e1d0: 616e 7361 6374 696f 6e27 2c0a 2020 2020  ansaction',.    
-0004e1e0: 2020 2020 2020 2020 2754 5241 4445 273a          'TRADE':
-0004e1f0: 2027 7472 6164 6527 2c0a 2020 2020 2020   'trade',.      
-0004e200: 2020 2020 2020 2753 4554 544c 454d 454e        'SETTLEMEN
-0004e210: 5427 3a20 2774 7261 6465 272c 0a20 2020  T': 'trade',.   
-0004e220: 2020 2020 2020 2020 2027 4445 4c49 5645           'DELIVE
-0004e230: 5259 273a 2027 7472 6164 6527 2c0a 2020  RY': 'trade',.  
-0004e240: 2020 2020 2020 2020 2020 274c 4951 5549            'LIQUI
-0004e250: 4441 5449 4f4e 273a 2027 7472 6164 6527  DATION': 'trade'
-0004e260: 2c0a 2020 2020 2020 2020 2020 2020 2742  ,.            'B
-0004e270: 4f4e 5553 273a 2027 5072 697a 6527 2c0a  ONUS': 'Prize',.
-0004e280: 2020 2020 2020 2020 2020 2020 2746 4545              'FEE
-0004e290: 5f52 4546 554e 4427 3a20 2763 6173 6862  _REFUND': 'cashb
-0004e2a0: 6163 6b27 2c0a 2020 2020 2020 2020 2020  ack',.          
-0004e2b0: 2020 2749 4e54 4552 4553 5427 3a20 2774    'INTEREST': 't
-0004e2c0: 7261 6e73 6163 7469 6f6e 272c 0a20 2020  ransaction',.   
-0004e2d0: 2020 2020 2020 2020 2027 4355 5252 454e           'CURREN
-0004e2e0: 4359 5f42 5559 273a 2027 7472 6164 6527  CY_BUY': 'trade'
-0004e2f0: 2c0a 2020 2020 2020 2020 2020 2020 2743  ,.            'C
-0004e300: 5552 5245 4e43 595f 5345 4c4c 273a 2027  URRENCY_SELL': '
-0004e310: 7472 6164 6527 2c0a 2020 2020 2020 2020  trade',.        
-0004e320: 7d0a 2020 2020 2020 2020 7265 7475 726e  }.        return
-0004e330: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-0004e340: 6728 7479 7065 732c 2074 7970 652c 2074  g(types, type, t
-0004e350: 7970 6529 0a0a 2020 2020 6173 796e 6320  ype)..    async 
-0004e360: 6465 6620 7769 7468 6472 6177 2873 656c  def withdraw(sel
-0004e370: 662c 2063 6f64 653a 2073 7472 2c20 616d  f, code: str, am
-0004e380: 6f75 6e74 2c20 6164 6472 6573 732c 2074  ount, address, t
-0004e390: 6167 3d4e 6f6e 652c 2070 6172 616d 733d  ag=None, params=
-0004e3a0: 7b7d 293a 0a20 2020 2020 2020 2022 2222  {}):.        """
-0004e3b0: 0a20 2020 2020 2020 206d 616b 6520 6120  .        make a 
-0004e3c0: 7769 7468 6472 6177 616c 0a20 2020 2020  withdrawal.     
-0004e3d0: 2020 2073 6565 2068 7474 7073 3a2f 2f62     see https://b
-0004e3e0: 7962 6974 2d65 7863 6861 6e67 652e 6769  ybit-exchange.gi
-0004e3f0: 7468 7562 2e69 6f2f 646f 6373 2f76 352f  thub.io/docs/v5/
-0004e400: 6173 7365 742f 7769 7468 6472 6177 0a20  asset/withdraw. 
-0004e410: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
-0004e420: 7220 636f 6465 3a20 756e 6966 6965 6420  r code: unified 
-0004e430: 6375 7272 656e 6379 2063 6f64 650a 2020  currency code.  
-0004e440: 2020 2020 2020 3a70 6172 616d 2066 6c6f        :param flo
-0004e450: 6174 2061 6d6f 756e 743a 2074 6865 2061  at amount: the a
-0004e460: 6d6f 756e 7420 746f 2077 6974 6864 7261  mount to withdra
-0004e470: 770a 2020 2020 2020 2020 3a70 6172 616d  w.        :param
-0004e480: 2073 7472 2061 6464 7265 7373 3a20 7468   str address: th
-0004e490: 6520 6164 6472 6573 7320 746f 2077 6974  e address to wit
-0004e4a0: 6864 7261 7720 746f 0a20 2020 2020 2020  hdraw to.       
-0004e4b0: 203a 7061 7261 6d20 7374 727c 4e6f 6e65   :param str|None
-0004e4c0: 2074 6167 3a0a 2020 2020 2020 2020 3a70   tag:.        :p
-0004e4d0: 6172 616d 2064 6963 7420 7061 7261 6d73  aram dict params
-0004e4e0: 3a20 6578 7472 6120 7061 7261 6d65 7465  : extra paramete
-0004e4f0: 7273 2073 7065 6369 6669 6320 746f 2074  rs specific to t
-0004e500: 6865 2062 7962 6974 2061 7069 2065 6e64  he bybit api end
-0004e510: 706f 696e 740a 2020 2020 2020 2020 3a72  point.        :r
-0004e520: 6574 7572 6e73 2064 6963 743a 2061 2060  eturns dict: a `
-0004e530: 7472 616e 7361 6374 696f 6e20 7374 7275  transaction stru
-0004e540: 6374 7572 6520 3c68 7474 7073 3a2f 2f64  cture <https://d
-0004e550: 6f63 732e 6363 7874 2e63 6f6d 2f23 2f3f  ocs.ccxt.com/#/?
-0004e560: 6964 3d74 7261 6e73 6163 7469 6f6e 2d73  id=transaction-s
-0004e570: 7472 7563 7475 7265 3e60 0a20 2020 2020  tructure>`.     
-0004e580: 2020 2022 2222 0a20 2020 2020 2020 2074     """.        t
-0004e590: 6167 2c20 7061 7261 6d73 203d 2073 656c  ag, params = sel
-0004e5a0: 662e 6861 6e64 6c65 5f77 6974 6864 7261  f.handle_withdra
-0004e5b0: 775f 7461 675f 616e 645f 7061 7261 6d73  w_tag_and_params
-0004e5c0: 2874 6167 2c20 7061 7261 6d73 290a 2020  (tag, params).  
-0004e5d0: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
-0004e5e0: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
-0004e5f0: 2020 2020 2020 2020 7365 6c66 2e63 6865          self.che
-0004e600: 636b 5f61 6464 7265 7373 2861 6464 7265  ck_address(addre
-0004e610: 7373 290a 2020 2020 2020 2020 6375 7272  ss).        curr
-0004e620: 656e 6379 203d 2073 656c 662e 6375 7272  ency = self.curr
-0004e630: 656e 6379 2863 6f64 6529 0a20 2020 2020  ency(code).     
-0004e640: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
-0004e650: 2020 2020 2020 2020 2020 2027 636f 696e             'coin
-0004e660: 273a 2063 7572 7265 6e63 795b 2769 6427  ': currency['id'
-0004e670: 5d2c 0a20 2020 2020 2020 2020 2020 2027  ],.            '
-0004e680: 616d 6f75 6e74 273a 2073 656c 662e 6e75  amount': self.nu
-0004e690: 6d62 6572 5f74 6f5f 7374 7269 6e67 2861  mber_to_string(a
-0004e6a0: 6d6f 756e 7429 2c0a 2020 2020 2020 2020  mount),.        
-0004e6b0: 2020 2020 2761 6464 7265 7373 273a 2061      'address': a
-0004e6c0: 6464 7265 7373 2c0a 2020 2020 2020 2020  ddress,.        
-0004e6d0: 7d0a 2020 2020 2020 2020 6966 2074 6167  }.        if tag
-0004e6e0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0004e6f0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-0004e700: 745b 2774 6167 275d 203d 2074 6167 0a20  t['tag'] = tag. 
-0004e710: 2020 2020 2020 206e 6574 776f 726b 436f         networkCo
-0004e720: 6465 2c20 7175 6572 7920 3d20 7365 6c66  de, query = self
-0004e730: 2e68 616e 646c 655f 6e65 7477 6f72 6b5f  .handle_network_
-0004e740: 636f 6465 5f61 6e64 5f70 6172 616d 7328  code_and_params(
-0004e750: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
-0004e760: 6e65 7477 6f72 6b49 6420 3d20 7365 6c66  networkId = self
-0004e770: 2e6e 6574 776f 726b 5f63 6f64 655f 746f  .network_code_to
-0004e780: 5f69 6428 6e65 7477 6f72 6b43 6f64 6529  _id(networkCode)
-0004e790: 0a20 2020 2020 2020 2069 6620 6e65 7477  .        if netw
-0004e7a0: 6f72 6b49 6420 6973 206e 6f74 204e 6f6e  orkId is not Non
-0004e7b0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-0004e7c0: 6571 7565 7374 5b27 6368 6169 6e27 5d20  equest['chain'] 
-0004e7d0: 3d20 6e65 7477 6f72 6b49 642e 7570 7065  = networkId.uppe
-0004e7e0: 7228 290a 2020 2020 2020 2020 656e 6162  r().        enab
-0004e7f0: 6c65 556e 6966 6965 6420 3d20 6177 6169  leUnified = awai
-0004e800: 7420 7365 6c66 2e69 735f 756e 6966 6965  t self.is_unifie
-0004e810: 645f 656e 6162 6c65 6428 290a 2020 2020  d_enabled().    
-0004e820: 2020 2020 6d65 7468 6f64 203d 2027 7072      method = 'pr
-0004e830: 6976 6174 6550 6f73 7456 3541 7373 6574  ivatePostV5Asset
-0004e840: 5769 7468 6472 6177 4372 6561 7465 2720  WithdrawCreate' 
-0004e850: 6966 2028 656e 6162 6c65 556e 6966 6965  if (enableUnifie
-0004e860: 645b 315d 2920 656c 7365 2027 7072 6976  d[1]) else 'priv
-0004e870: 6174 6550 6f73 7441 7373 6574 5633 5072  atePostAssetV3Pr
-0004e880: 6976 6174 6557 6974 6864 7261 7743 7265  ivateWithdrawCre
-0004e890: 6174 6527 0a20 2020 2020 2020 2072 6573  ate'.        res
-0004e8a0: 706f 6e73 6520 3d20 6177 6169 7420 6765  ponse = await ge
-0004e8b0: 7461 7474 7228 7365 6c66 2c20 6d65 7468  tattr(self, meth
-0004e8c0: 6f64 2928 7365 6c66 2e65 7874 656e 6428  od)(self.extend(
-0004e8d0: 7265 7175 6573 742c 2071 7565 7279 2929  request, query))
-0004e8e0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-0004e8f0: 2020 2023 2020 2020 7b0a 2020 2020 2020     #    {.      
-0004e900: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
-0004e910: 436f 6465 223a 2022 3022 2c0a 2020 2020  Code": "0",.    
-0004e920: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-0004e930: 6574 4d73 6722 3a20 2273 7563 6365 7373  etMsg": "success
-0004e940: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004e950: 2020 2020 2022 7265 7375 6c74 223a 207b       "result": {
-0004e960: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004e970: 2020 2020 2020 2022 6964 223a 2022 3933         "id": "93
-0004e980: 3737 3236 3622 0a20 2020 2020 2020 2023  77266".        #
-0004e990: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
-0004e9a0: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-0004e9b0: 6574 4578 7449 6e66 6f22 3a20 7b7d 2c0a  etExtInfo": {},.
-0004e9c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004e9d0: 2020 2274 696d 6522 3a20 2231 3636 3638    "time": "16668
-0004e9e0: 3932 3839 3439 3032 220a 2020 2020 2020  92894902".      
-0004e9f0: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
-0004ea00: 2020 230a 2020 2020 2020 2020 7265 7375    #.        resu
-0004ea10: 6c74 203d 2073 656c 662e 7361 6665 5f76  lt = self.safe_v
-0004ea20: 616c 7565 2872 6573 706f 6e73 652c 2027  alue(response, '
-0004ea30: 7265 7375 6c74 272c 207b 7d29 0a20 2020  result', {}).   
-0004ea40: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-0004ea50: 2e70 6172 7365 5f74 7261 6e73 6163 7469  .parse_transacti
-0004ea60: 6f6e 2872 6573 756c 742c 2063 7572 7265  on(result, curre
-0004ea70: 6e63 7929 0a0a 2020 2020 6173 796e 6320  ncy)..    async 
-0004ea80: 6465 6620 6665 7463 685f 706f 7369 7469  def fetch_positi
-0004ea90: 6f6e 2873 656c 662c 2073 796d 626f 6c3a  on(self, symbol:
-0004eaa0: 2073 7472 2c20 7061 7261 6d73 3d7b 7d29   str, params={})
-0004eab0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-0004eac0: 2020 2020 2020 6665 7463 6820 6461 7461        fetch data
-0004ead0: 206f 6e20 6120 7369 6e67 6c65 206f 7065   on a single ope
-0004eae0: 6e20 636f 6e74 7261 6374 2074 7261 6465  n contract trade
-0004eaf0: 2070 6f73 6974 696f 6e0a 2020 2020 2020   position.      
-0004eb00: 2020 3a70 6172 616d 2073 7472 2073 796d    :param str sym
-0004eb10: 626f 6c3a 2075 6e69 6669 6564 206d 6172  bol: unified mar
-0004eb20: 6b65 7420 7379 6d62 6f6c 206f 6620 7468  ket symbol of th
-0004eb30: 6520 6d61 726b 6574 2074 6865 2070 6f73  e market the pos
-0004eb40: 6974 696f 6e20 6973 2068 656c 6420 696e  ition is held in
-0004eb50: 2c20 6465 6661 756c 7420 6973 204e 6f6e  , default is Non
-0004eb60: 650a 2020 2020 2020 2020 3a70 6172 616d  e.        :param
-0004eb70: 2064 6963 7420 7061 7261 6d73 3a20 6578   dict params: ex
-0004eb80: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
-0004eb90: 7065 6369 6669 6320 746f 2074 6865 2062  pecific to the b
-0004eba0: 7962 6974 2061 7069 2065 6e64 706f 696e  ybit api endpoin
-0004ebb0: 740a 2020 2020 2020 2020 3a72 6574 7572  t.        :retur
-0004ebc0: 6e73 2064 6963 743a 2061 2060 706f 7369  ns dict: a `posi
-0004ebd0: 7469 6f6e 2073 7472 7563 7475 7265 203c  tion structure <
-0004ebe0: 6874 7470 733a 2f2f 646f 6373 2e63 6378  https://docs.ccx
-0004ebf0: 742e 636f 6d2f 232f 3f69 643d 706f 7369  t.com/#/?id=posi
-0004ec00: 7469 6f6e 2d73 7472 7563 7475 7265 3e60  tion-structure>`
-0004ec10: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-0004ec20: 2020 2020 2073 656c 662e 6368 6563 6b5f       self.check_
-0004ec30: 7265 7175 6972 6564 5f73 796d 626f 6c28  required_symbol(
-0004ec40: 2766 6574 6368 506f 7369 7469 6f6e 272c  'fetchPosition',
-0004ec50: 2073 796d 626f 6c29 0a20 2020 2020 2020   symbol).       
-0004ec60: 2061 7761 6974 2073 656c 662e 6c6f 6164   await self.load
-0004ec70: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
-0004ec80: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
-0004ec90: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
-0004eca0: 2020 2020 2020 2020 7265 7175 6573 7420          request 
-0004ecb0: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-0004ecc0: 2773 796d 626f 6c27 3a20 6d61 726b 6574  'symbol': market
-0004ecd0: 5b27 6964 275d 2c0a 2020 2020 2020 2020  ['id'],.        
-0004ece0: 7d0a 2020 2020 2020 2020 6d65 7468 6f64  }.        method
-0004ecf0: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-0004ed00: 656e 6162 6c65 556e 6966 6965 644d 6172  enableUnifiedMar
-0004ed10: 6769 6e2c 2065 6e61 626c 6555 6e69 6669  gin, enableUnifi
-0004ed20: 6564 4163 636f 756e 7420 3d20 6177 6169  edAccount = awai
-0004ed30: 7420 7365 6c66 2e69 735f 756e 6966 6965  t self.is_unifie
-0004ed40: 645f 656e 6162 6c65 6428 290a 2020 2020  d_enabled().    
-0004ed50: 2020 2020 6973 5573 6463 5365 7474 6c65      isUsdcSettle
-0004ed60: 6420 3d20 6d61 726b 6574 5b27 7365 7474  d = market['sett
-0004ed70: 6c65 275d 203d 3d20 2755 5344 4327 0a20  le'] == 'USDC'. 
-0004ed80: 2020 2020 2020 2069 6620 656e 6162 6c65         if enable
-0004ed90: 556e 6966 6965 644d 6172 6769 6e20 6f72  UnifiedMargin or
-0004eda0: 2065 6e61 626c 6555 6e69 6669 6564 4163   enableUnifiedAc
-0004edb0: 636f 756e 743a 0a20 2020 2020 2020 2020  count:.         
-0004edc0: 2020 206d 6574 686f 6420 3d20 2770 7269     method = 'pri
-0004edd0: 7661 7465 4765 7456 3550 6f73 6974 696f  vateGetV5Positio
-0004ede0: 6e4c 6973 7427 2069 6620 2865 6e61 626c  nList' if (enabl
-0004edf0: 6555 6e69 6669 6564 4163 636f 756e 7429  eUnifiedAccount)
-0004ee00: 2065 6c73 6520 2770 7269 7661 7465 4765   else 'privateGe
-0004ee10: 7455 6e69 6669 6564 5633 5072 6976 6174  tUnifiedV3Privat
-0004ee20: 6550 6f73 6974 696f 6e4c 6973 7427 0a20  ePositionList'. 
-0004ee30: 2020 2020 2020 2020 2020 2069 6620 6d61             if ma
-0004ee40: 726b 6574 5b27 6f70 7469 6f6e 275d 3a0a  rket['option']:.
-0004ee50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004ee60: 7265 7175 6573 745b 2763 6174 6567 6f72  request['categor
-0004ee70: 7927 5d20 3d20 276f 7074 696f 6e27 0a20  y'] = 'option'. 
-0004ee80: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-0004ee90: 6d61 726b 6574 5b27 6c69 6e65 6172 275d  market['linear']
-0004eea0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0004eeb0: 2020 7265 7175 6573 745b 2763 6174 6567    request['categ
-0004eec0: 6f72 7927 5d20 3d20 276c 696e 6561 7227  ory'] = 'linear'
-0004eed0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-0004eee0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0004eef0: 2020 2072 6169 7365 204e 6f74 5375 7070     raise NotSupp
-0004ef00: 6f72 7465 6428 7365 6c66 2e69 6420 2b20  orted(self.id + 
-0004ef10: 2720 6665 7463 6850 6f73 6974 696f 6e28  ' fetchPosition(
-0004ef20: 2920 646f 6573 206e 6f74 2061 6c6c 6f77  ) does not allow
-0004ef30: 2069 6e76 6572 7365 206d 6172 6b65 7420   inverse market 
-0004ef40: 6f72 6465 7273 2066 6f72 2027 202b 2073  orders for ' + s
-0004ef50: 796d 626f 6c20 2b20 2720 6d61 726b 6574  ymbol + ' market
-0004ef60: 7327 290a 2020 2020 2020 2020 656c 6966  s').        elif
-0004ef70: 2069 7355 7364 6353 6574 746c 6564 3a0a   isUsdcSettled:.
-0004ef80: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
-0004ef90: 6f64 203d 2027 7072 6976 6174 6550 6f73  od = 'privatePos
-0004efa0: 744f 7074 696f 6e55 7364 634f 7065 6e61  tOptionUsdcOpena
-0004efb0: 7069 5072 6976 6174 6556 3151 7565 7279  piPrivateV1Query
-0004efc0: 506f 7369 7469 6f6e 270a 2020 2020 2020  Position'.      
-0004efd0: 2020 2020 2020 6966 206d 6172 6b65 745b        if market[
-0004efe0: 276f 7074 696f 6e27 5d3a 0a20 2020 2020  'option']:.     
-0004eff0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-0004f000: 7374 5b27 6361 7465 676f 7279 275d 203d  st['category'] =
-0004f010: 2027 4f50 5449 4f4e 270a 2020 2020 2020   'OPTION'.      
-0004f020: 2020 2020 2020 656c 6966 206d 6172 6b65        elif marke
-0004f030: 745b 276c 696e 6561 7227 5d3a 0a20 2020  t['linear']:.   
-0004f040: 2020 2020 2020 2020 2020 2020 2072 6571               req
-0004f050: 7565 7374 5b27 6361 7465 676f 7279 275d  uest['category']
-0004f060: 203d 2027 5045 5250 4554 5541 4c27 0a20   = 'PERPETUAL'. 
-0004f070: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0004f080: 2020 2020 2020 2020 2069 6620 6d61 726b           if mark
-0004f090: 6574 5b27 6c69 6e65 6172 275d 3a0a 2020  et['linear']:.  
-0004f0a0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0004f0b0: 7175 6573 745b 2763 6174 6567 6f72 7927  quest['category'
-0004f0c0: 5d20 3d20 276c 696e 6561 7227 0a20 2020  ] = 'linear'.   
-0004f0d0: 2020 2020 2020 2020 2065 6c69 6620 6d61           elif ma
-0004f0e0: 726b 6574 5b27 696e 7665 7273 6527 5d3a  rket['inverse']:
-0004f0f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0004f100: 2072 6571 7565 7374 5b27 6361 7465 676f   request['catego
-0004f110: 7279 275d 203d 2027 696e 7665 7273 6527  ry'] = 'inverse'
-0004f120: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-0004f130: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0004f140: 2020 2072 6169 7365 204e 6f74 5375 7070     raise NotSupp
-0004f150: 6f72 7465 6428 7365 6c66 2e69 6420 2b20  orted(self.id + 
-0004f160: 2720 6665 7463 6850 6f73 6974 696f 6e28  ' fetchPosition(
-0004f170: 2920 646f 6573 206e 6f74 2061 6c6c 6f77  ) does not allow
-0004f180: 206f 7074 696f 6e20 6d61 726b 6574 206f   option market o
-0004f190: 7264 6572 7320 666f 7220 2720 2b20 7379  rders for ' + sy
-0004f1a0: 6d62 6f6c 202b 2027 206d 6172 6b65 7473  mbol + ' markets
-0004f1b0: 2729 0a20 2020 2020 2020 2020 2020 206d  ').            m
-0004f1c0: 6574 686f 6420 3d20 2770 7269 7661 7465  ethod = 'private
-0004f1d0: 4765 7456 3550 6f73 6974 696f 6e4c 6973  GetV5PositionLis
-0004f1e0: 7427 0a20 2020 2020 2020 2072 6573 706f  t'.        respo
-0004f1f0: 6e73 6520 3d20 6177 6169 7420 6765 7461  nse = await geta
-0004f200: 7474 7228 7365 6c66 2c20 6d65 7468 6f64  ttr(self, method
-0004f210: 2928 7365 6c66 2e65 7874 656e 6428 7265  )(self.extend(re
-0004f220: 7175 6573 742c 2070 6172 616d 7329 290a  quest, params)).
-0004f230: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0004f240: 2020 2320 756e 6966 6965 6420 6163 636f    # unified acco
-0004f250: 756e 740a 2020 2020 2020 2020 230a 2020  unt.        #.  
-0004f260: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
-0004f270: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004f280: 2272 6574 436f 6465 223a 2030 2c0a 2020  "retCode": 0,.  
-0004f290: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004f2a0: 2272 6574 4d73 6722 3a20 224f 4b22 2c0a  "retMsg": "OK",.
-0004f2b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004f2c0: 2020 2272 6573 756c 7422 3a20 7b0a 2020    "result": {.  
-0004f2d0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004f2e0: 2020 2020 226e 6578 7450 6167 6543 7572      "nextPageCur
-0004f2f0: 736f 7222 3a20 2275 7064 6174 6541 7425  sor": "updateAt%
-0004f300: 3344 3136 3732 3237 3933 3232 3636 3822  3D1672279322668"
-0004f310: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004f320: 2020 2020 2020 2020 2263 6174 6567 6f72          "categor
-0004f330: 7922 3a20 226c 696e 6561 7222 2c0a 2020  y": "linear",.  
-0004f340: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004f350: 2020 2020 226c 6973 7422 3a20 5b0a 2020      "list": [.  
-0004f360: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004f370: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
-0004f380: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0004f390: 2020 2020 2020 2020 2273 796d 626f 6c22          "symbol"
-0004f3a0: 3a20 2258 5250 5553 4454 222c 0a20 2020  : "XRPUSDT",.   
-0004f3b0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0004f3c0: 2020 2020 2020 2020 2020 2022 6c65 7665             "leve
-0004f3d0: 7261 6765 223a 2022 3130 222c 0a20 2020  rage": "10",.   
-0004f3e0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0004f3f0: 2020 2020 2020 2020 2020 2022 6176 6750             "avgP
-0004f400: 7269 6365 223a 2022 302e 3336 3135 222c  rice": "0.3615",
-0004f410: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004f420: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0004f430: 6c69 7150 7269 6365 223a 2022 302e 3030  liqPrice": "0.00
-0004f440: 3031 222c 0a20 2020 2020 2020 2023 2020  01",.        #  
-0004f450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004f460: 2020 2022 7269 736b 4c69 6d69 7456 616c     "riskLimitVal
-0004f470: 7565 223a 2022 3230 3030 3030 222c 0a20  ue": "200000",. 
-0004f480: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004f490: 2020 2020 2020 2020 2020 2020 2022 7461               "ta
-0004f4a0: 6b65 5072 6f66 6974 223a 2022 222c 0a20  keProfit": "",. 
-0004f4b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004f4c0: 2020 2020 2020 2020 2020 2020 2022 706f               "po
-0004f4d0: 7369 7469 6f6e 5661 6c75 6522 3a20 2233  sitionValue": "3
-0004f4e0: 362e 3135 222c 0a20 2020 2020 2020 2023  6.15",.        #
-0004f4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004f500: 2020 2020 2022 7470 736c 4d6f 6465 223a       "tpslMode":
-0004f510: 2022 4675 6c6c 222c 0a20 2020 2020 2020   "Full",.       
-0004f520: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004f530: 2020 2020 2020 2022 7269 736b 4964 223a         "riskId":
-0004f540: 2034 312c 0a20 2020 2020 2020 2023 2020   41,.        #  
-0004f550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004f560: 2020 2022 7472 6169 6c69 6e67 5374 6f70     "trailingStop
-0004f570: 223a 2022 3022 2c0a 2020 2020 2020 2020  ": "0",.        
-0004f580: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004f590: 2020 2020 2020 2275 6e72 6561 6c69 7365        "unrealise
-0004f5a0: 6450 6e6c 223a 2022 2d31 2e38 3322 2c0a  dPnl": "-1.83",.
-0004f5b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004f5c0: 2020 2020 2020 2020 2020 2020 2020 226d                "m
-0004f5d0: 6172 6b50 7269 6365 223a 2022 302e 3334  arkPrice": "0.34
-0004f5e0: 3332 222c 0a20 2020 2020 2020 2023 2020  32",.        #  
-0004f5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004f600: 2020 2022 6375 6d52 6561 6c69 7365 6450     "cumRealisedP
-0004f610: 6e6c 223a 2022 302e 3438 3830 3538 3736  nl": "0.48805876
-0004f620: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004f630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004f640: 2022 706f 7369 7469 6f6e 4d4d 223a 2022   "positionMM": "
-0004f650: 302e 3338 3130 3231 222c 0a20 2020 2020  0.381021",.     
-0004f660: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0004f670: 2020 2020 2020 2020 2022 6372 6561 7465           "create
-0004f680: 6454 696d 6522 3a20 2231 3637 3231 3231  dTime": "1672121
-0004f690: 3138 3232 3136 222c 0a20 2020 2020 2020  182216",.       
-0004f6a0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004f6b0: 2020 2020 2020 2022 706f 7369 7469 6f6e         "position
-0004f6c0: 4964 7822 3a20 302c 0a20 2020 2020 2020  Idx": 0,.       
-0004f6d0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004f6e0: 2020 2020 2020 2022 706f 7369 7469 6f6e         "position
-0004f6f0: 494d 223a 2022 332e 3633 3435 3231 222c  IM": "3.634521",
-0004f700: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004f710: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0004f720: 7570 6461 7465 6454 696d 6522 3a20 2231  updatedTime": "1
-0004f730: 3637 3232 3739 3332 3236 3638 222c 0a20  672279322668",. 
-0004f740: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004f750: 2020 2020 2020 2020 2020 2020 2022 7369               "si
-0004f760: 6465 223a 2022 4275 7922 2c0a 2020 2020  de": "Buy",.    
-0004f770: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004f780: 2020 2020 2020 2020 2020 2262 7573 7450            "bustP
-0004f790: 7269 6365 223a 2022 222c 0a20 2020 2020  rice": "",.     
-0004f7a0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0004f7b0: 2020 2020 2020 2020 2022 7369 7a65 223a           "size":
-0004f7c0: 2022 3130 3022 2c0a 2020 2020 2020 2020   "100",.        
-0004f7d0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004f7e0: 2020 2020 2020 2270 6f73 6974 696f 6e53        "positionS
-0004f7f0: 7461 7475 7322 3a20 224e 6f72 6d61 6c22  tatus": "Normal"
-0004f800: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004cca0: 2020 2022 6f72 6465 724c 696e 6b49 6422     "orderLinkId"
+0004ccb0: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
+0004ccc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004ccd0: 2020 2020 226f 7264 6572 4964 223a 2022      "orderId": "
+0004cce0: 3136 3732 3132 3830 3030 2d38 2d35 3932  1672128000-8-592
+0004ccf0: 3332 342d 312d 3222 2c0a 2020 2020 2020  324-1-2",.      
+0004cd00: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0004cd10: 2020 2020 2020 2020 2266 6565 223a 2022          "fee": "
+0004cd20: 302e 3030 3030 3030 3030 222c 0a20 2020  0.00000000",.   
+0004cd30: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004cd40: 2020 2020 2020 2020 2020 2022 6368 616e             "chan
+0004cd50: 6765 223a 2022 2d30 2e30 3033 3637 3622  ge": "-0.003676"
+0004cd60: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004cd70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004cd80: 2263 6173 6846 6c6f 7722 3a20 2230 222c  "cashFlow": "0",
+0004cd90: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004cda0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0004cdb0: 7472 616e 7361 6374 696f 6e54 696d 6522  transactionTime"
+0004cdc0: 3a20 2231 3637 3231 3238 3030 3030 3030  : "1672128000000
+0004cdd0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004cde0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004cdf0: 2022 7479 7065 223a 2022 5345 5454 4c45   "type": "SETTLE
+0004ce00: 4d45 4e54 222c 0a20 2020 2020 2020 2023  MENT",.        #
+0004ce10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004ce20: 2020 2020 2022 6665 6552 6174 6522 3a20       "feeRate": 
+0004ce30: 2230 2e30 3030 3122 2c0a 2020 2020 2020  "0.0001",.      
+0004ce40: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0004ce50: 2020 2020 2020 2020 2273 697a 6522 3a20          "size": 
+0004ce60: 2231 3030 222c 0a20 2020 2020 2020 2023  "100",.        #
+0004ce70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004ce80: 2020 2020 2022 7174 7922 3a20 2231 3030       "qty": "100
+0004ce90: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004cea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004ceb0: 2022 6361 7368 4261 6c61 6e63 6522 3a20   "cashBalance": 
+0004cec0: 2235 3038 362e 3535 3832 3530 3032 222c  "5086.55825002",
+0004ced0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004cee0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0004cef0: 6375 7272 656e 6379 223a 2022 5553 4454  currency": "USDT
+0004cf00: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004cf10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004cf20: 2022 6361 7465 676f 7279 223a 2022 6c69   "category": "li
+0004cf30: 6e65 6172 222c 0a20 2020 2020 2020 2023  near",.        #
+0004cf40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004cf50: 2020 2020 2022 7472 6164 6550 7269 6365       "tradePrice
+0004cf60: 223a 2022 302e 3336 3736 222c 0a20 2020  ": "0.3676",.   
+0004cf70: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004cf80: 2020 2020 2020 2020 2020 2022 7472 6164             "trad
+0004cf90: 6549 6422 3a20 2235 3334 6330 3030 332d  eId": "534c0003-
+0004cfa0: 3462 6637 2d34 3836 662d 6161 3032 2d37  4bf7-486f-aa02-7
+0004cfb0: 3863 6565 3336 3832 3565 3422 0a20 2020  8cee36825e4".   
+0004cfc0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004cfd0: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
+0004cfe0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0004cff0: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+0004d000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004d010: 2020 2020 2273 796d 626f 6c22 3a20 2258      "symbol": "X
+0004d020: 5250 5553 4454 222c 0a20 2020 2020 2020  RPUSDT",.       
+0004d030: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0004d040: 2020 2020 2020 2022 7369 6465 223a 2022         "side": "
+0004d050: 4275 7922 2c0a 2020 2020 2020 2020 2320  Buy",.        # 
+0004d060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004d070: 2020 2020 2266 756e 6469 6e67 223a 2022      "funding": "
+0004d080: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004d090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004d0a0: 2022 6f72 6465 724c 696e 6b49 6422 3a20   "orderLinkId": 
+0004d0b0: 226c 696e 6561 722d 6f72 6465 7222 2c0a  "linear-order",.
+0004d0c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004d0d0: 2020 2020 2020 2020 2020 2020 2020 226f                "o
+0004d0e0: 7264 6572 4964 223a 2022 3539 3262 3765  rderId": "592b7e
+0004d0f0: 3431 2d37 3866 642d 3432 6532 2d39 6161  41-78fd-42e2-9aa
+0004d100: 332d 3931 6531 3833 3565 6633 6531 222c  3-91e1835ef3e1",
+0004d110: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004d120: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0004d130: 6665 6522 3a20 2230 2e30 3139 3038 3732  fee": "0.0190872
+0004d140: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+0004d150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004d160: 2020 2263 6861 6e67 6522 3a20 222d 302e    "change": "-0.
+0004d170: 3031 3930 3837 3222 2c0a 2020 2020 2020  0190872",.      
+0004d180: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0004d190: 2020 2020 2020 2020 2263 6173 6846 6c6f          "cashFlo
+0004d1a0: 7722 3a20 2230 222c 0a20 2020 2020 2020  w": "0",.       
+0004d1b0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0004d1c0: 2020 2020 2020 2022 7472 616e 7361 6374         "transact
+0004d1d0: 696f 6e54 696d 6522 3a20 2231 3637 3231  ionTime": "16721
+0004d1e0: 3231 3138 3232 3234 222c 0a20 2020 2020  21182224",.     
+0004d1f0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004d200: 2020 2020 2020 2020 2022 7479 7065 223a           "type":
+0004d210: 2022 5452 4144 4522 2c0a 2020 2020 2020   "TRADE",.      
+0004d220: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0004d230: 2020 2020 2020 2020 2266 6565 5261 7465          "feeRate
+0004d240: 223a 2022 302e 3030 3036 222c 0a20 2020  ": "0.0006",.   
+0004d250: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004d260: 2020 2020 2020 2020 2020 2022 7369 7a65             "size
+0004d270: 223a 2022 3130 3022 2c0a 2020 2020 2020  ": "100",.      
+0004d280: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0004d290: 2020 2020 2020 2020 2271 7479 223a 2022          "qty": "
+0004d2a0: 3838 222c 0a20 2020 2020 2020 2023 2020  88",.        #  
+0004d2b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004d2c0: 2020 2022 6361 7368 4261 6c61 6e63 6522     "cashBalance"
+0004d2d0: 3a20 2235 3038 362e 3536 3139 3236 3032  : "5086.56192602
+0004d2e0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004d2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004d300: 2022 6375 7272 656e 6379 223a 2022 5553   "currency": "US
+0004d310: 4454 222c 0a20 2020 2020 2020 2023 2020  DT",.        #  
+0004d320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004d330: 2020 2022 6361 7465 676f 7279 223a 2022     "category": "
+0004d340: 6c69 6e65 6172 222c 0a20 2020 2020 2020  linear",.       
+0004d350: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0004d360: 2020 2020 2020 2022 7472 6164 6550 7269         "tradePri
+0004d370: 6365 223a 2022 302e 3336 3135 222c 0a20  ce": "0.3615",. 
+0004d380: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004d390: 2020 2020 2020 2020 2020 2020 2022 7472               "tr
+0004d3a0: 6164 6549 6422 3a20 2235 3138 3466 3037  adeId": "5184f07
+0004d3b0: 392d 3838 6563 2d35 3463 372d 3837 3734  9-88ec-54c7-8774
+0004d3c0: 2d35 3137 3363 6166 6432 6234 6522 0a20  -5173cafd2b4e". 
+0004d3d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004d3e0: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
+0004d3f0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004d400: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
+0004d410: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0004d420: 2020 2020 2020 2273 796d 626f 6c22 3a20        "symbol": 
+0004d430: 2258 5250 5553 4454 222c 0a20 2020 2020  "XRPUSDT",.     
+0004d440: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004d450: 2020 2020 2020 2020 2022 7369 6465 223a           "side":
+0004d460: 2022 4275 7922 2c0a 2020 2020 2020 2020   "Buy",.        
+0004d470: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0004d480: 2020 2020 2020 2266 756e 6469 6e67 223a        "funding":
+0004d490: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
+0004d4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004d4b0: 2020 2022 6f72 6465 724c 696e 6b49 6422     "orderLinkId"
+0004d4c0: 3a20 226c 696e 6561 722d 6f72 6465 7222  : "linear-order"
+0004d4d0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004d4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004d4f0: 226f 7264 6572 4964 223a 2022 3539 3262  "orderId": "592b
+0004d500: 3765 3431 2d37 3866 642d 3432 6532 2d39  7e41-78fd-42e2-9
+0004d510: 6161 332d 3931 6531 3833 3565 6633 6531  aa3-91e1835ef3e1
+0004d520: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004d530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004d540: 2022 6665 6522 3a20 2230 2e30 3032 3630   "fee": "0.00260
+0004d550: 3238 3022 2c0a 2020 2020 2020 2020 2320  280",.        # 
+0004d560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004d570: 2020 2020 2263 6861 6e67 6522 3a20 222d      "change": "-
+0004d580: 302e 3030 3236 3032 3822 2c0a 2020 2020  0.0026028",.    
+0004d590: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004d5a0: 2020 2020 2020 2020 2020 2263 6173 6846            "cashF
+0004d5b0: 6c6f 7722 3a20 2230 222c 0a20 2020 2020  low": "0",.     
+0004d5c0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004d5d0: 2020 2020 2020 2020 2022 7472 616e 7361           "transa
+0004d5e0: 6374 696f 6e54 696d 6522 3a20 2231 3637  ctionTime": "167
+0004d5f0: 3231 3231 3138 3232 3234 222c 0a20 2020  2121182224",.   
+0004d600: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004d610: 2020 2020 2020 2020 2020 2022 7479 7065             "type
+0004d620: 223a 2022 5452 4144 4522 2c0a 2020 2020  ": "TRADE",.    
+0004d630: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004d640: 2020 2020 2020 2020 2020 2266 6565 5261            "feeRa
+0004d650: 7465 223a 2022 302e 3030 3036 222c 0a20  te": "0.0006",. 
+0004d660: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004d670: 2020 2020 2020 2020 2020 2020 2022 7369               "si
+0004d680: 7a65 223a 2022 3132 222c 0a20 2020 2020  ze": "12",.     
+0004d690: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004d6a0: 2020 2020 2020 2020 2022 7174 7922 3a20           "qty": 
+0004d6b0: 2231 3222 2c0a 2020 2020 2020 2020 2320  "12",.        # 
+0004d6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004d6d0: 2020 2020 2263 6173 6842 616c 616e 6365      "cashBalance
+0004d6e0: 223a 2022 3530 3836 2e35 3831 3031 3332  ": "5086.5810132
+0004d6f0: 3222 2c0a 2020 2020 2020 2020 2320 2020  2",.        #   
+0004d700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004d710: 2020 2263 7572 7265 6e63 7922 3a20 2255    "currency": "U
+0004d720: 5344 5422 2c0a 2020 2020 2020 2020 2320  SDT",.        # 
+0004d730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004d740: 2020 2020 2263 6174 6567 6f72 7922 3a20      "category": 
+0004d750: 226c 696e 6561 7222 2c0a 2020 2020 2020  "linear",.      
+0004d760: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0004d770: 2020 2020 2020 2020 2274 7261 6465 5072          "tradePr
+0004d780: 6963 6522 3a20 2230 2e33 3631 3522 2c0a  ice": "0.3615",.
+0004d790: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004d7a0: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+0004d7b0: 7261 6465 4964 223a 2022 3835 3639 6331  radeId": "8569c1
+0004d7c0: 3066 2d35 3036 312d 3538 3931 2d38 3163  0f-5061-5891-81c
+0004d7d0: 342d 6135 3439 3239 3834 3765 6233 220a  4-a54929847eb3".
+0004d7e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004d7f0: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
+0004d800: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004d810: 2020 5d0a 2020 2020 2020 2020 2320 2020    ].        #   
+0004d820: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
+0004d830: 2023 2020 2020 2020 2020 2022 7265 7445   #         "retE
+0004d840: 7874 496e 666f 223a 207b 7d2c 0a20 2020  xtInfo": {},.   
+0004d850: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0004d860: 7469 6d65 223a 2031 3637 3231 3332 3438  time": 167213248
+0004d870: 3134 3035 0a20 2020 2020 2020 2023 2020  1405.        #  
+0004d880: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
+0004d890: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
+0004d8a0: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
+0004d8b0: 7265 7370 6f6e 7365 2c20 2772 6573 756c  response, 'resul
+0004d8c0: 7427 2c20 7b7d 290a 2020 2020 2020 2020  t', {}).        
+0004d8d0: 6461 7461 203d 2073 656c 662e 7361 6665  data = self.safe
+0004d8e0: 5f76 616c 7565 5f32 2872 6573 756c 742c  _value_2(result,
+0004d8f0: 2027 6461 7461 272c 2027 6c69 7374 272c   'data', 'list',
+0004d900: 205b 5d29 0a20 2020 2020 2020 2072 6574   []).        ret
+0004d910: 7572 6e20 7365 6c66 2e70 6172 7365 5f6c  urn self.parse_l
+0004d920: 6564 6765 7228 6461 7461 2c20 6375 7272  edger(data, curr
+0004d930: 656e 6379 2c20 7369 6e63 652c 206c 696d  ency, since, lim
+0004d940: 6974 290a 0a20 2020 2064 6566 2070 6172  it)..    def par
+0004d950: 7365 5f6c 6564 6765 725f 656e 7472 7928  se_ledger_entry(
+0004d960: 7365 6c66 2c20 6974 656d 2c20 6375 7272  self, item, curr
+0004d970: 656e 6379 3d4e 6f6e 6529 3a0a 2020 2020  ency=None):.    
+0004d980: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+0004d990: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+0004d9a0: 2020 2020 2020 2020 2269 6422 3a20 3233          "id": 23
+0004d9b0: 3434 3637 2c0a 2020 2020 2020 2020 2320  4467,.        # 
+0004d9c0: 2020 2020 2020 2020 2275 7365 725f 6964          "user_id
+0004d9d0: 223a 2031 2c0a 2020 2020 2020 2020 2320  ": 1,.        # 
+0004d9e0: 2020 2020 2020 2020 2263 6f69 6e22 3a20          "coin": 
+0004d9f0: 2242 5443 222c 0a20 2020 2020 2020 2023  "BTC",.        #
+0004da00: 2020 2020 2020 2020 2022 7761 6c6c 6574           "wallet
+0004da10: 5f69 6422 3a20 3237 3931 332c 0a20 2020  _id": 27913,.   
+0004da20: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0004da30: 7479 7065 223a 2022 5265 616c 697a 6564  type": "Realized
+0004da40: 2050 264c 222c 0a20 2020 2020 2020 2023   P&L",.        #
+0004da50: 2020 2020 2020 2020 2022 616d 6f75 6e74           "amount
+0004da60: 223a 2022 2d30 2e30 3030 3030 3030 3622  ": "-0.00000006"
+0004da70: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004da80: 2020 2020 2274 785f 6964 223a 2022 222c      "tx_id": "",
+0004da90: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004daa0: 2020 2022 6164 6472 6573 7322 3a20 2242     "address": "B
+0004dab0: 5443 5553 4422 2c0a 2020 2020 2020 2020  TCUSD",.        
+0004dac0: 2320 2020 2020 2020 2020 2277 616c 6c65  #         "walle
+0004dad0: 745f 6261 6c61 6e63 6522 3a20 2230 2e30  t_balance": "0.0
+0004dae0: 3330 3030 3333 3022 2c0a 2020 2020 2020  3000330",.      
+0004daf0: 2020 2320 2020 2020 2020 2020 2265 7865    #         "exe
+0004db00: 635f 7469 6d65 223a 2022 3230 3139 2d31  c_time": "2019-1
+0004db10: 322d 3039 5430 303a 3030 3a32 352e 3030  2-09T00:00:25.00
+0004db20: 305a 222c 0a20 2020 2020 2020 2023 2020  0Z",.        #  
+0004db30: 2020 2020 2020 2022 6372 6f73 735f 7365         "cross_se
+0004db40: 7122 3a20 300a 2020 2020 2020 2020 2320  q": 0.        # 
+0004db50: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
+0004db60: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+0004db70: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004db80: 2020 2273 796d 626f 6c22 3a20 2258 5250    "symbol": "XRP
+0004db90: 5553 4454 222c 0a20 2020 2020 2020 2023  USDT",.        #
+0004dba0: 2020 2020 2020 2020 2022 7369 6465 223a           "side":
+0004dbb0: 2022 4275 7922 2c0a 2020 2020 2020 2020   "Buy",.        
+0004dbc0: 2320 2020 2020 2020 2020 2266 756e 6469  #         "fundi
+0004dbd0: 6e67 223a 2022 222c 0a20 2020 2020 2020  ng": "",.       
+0004dbe0: 2023 2020 2020 2020 2020 2022 6f72 6465   #         "orde
+0004dbf0: 724c 696e 6b49 6422 3a20 226c 696e 6561  rLinkId": "linea
+0004dc00: 722d 6f72 6465 7222 2c0a 2020 2020 2020  r-order",.      
+0004dc10: 2020 2320 2020 2020 2020 2020 226f 7264    #         "ord
+0004dc20: 6572 4964 223a 2022 3539 3262 3765 3431  erId": "592b7e41
+0004dc30: 2d37 3866 642d 3432 6532 2d39 6161 332d  -78fd-42e2-9aa3-
+0004dc40: 3931 6531 3833 3565 6633 6531 222c 0a20  91e1835ef3e1",. 
+0004dc50: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004dc60: 2022 6665 6522 3a20 2230 2e30 3032 3630   "fee": "0.00260
+0004dc70: 3238 3022 2c0a 2020 2020 2020 2020 2320  280",.        # 
+0004dc80: 2020 2020 2020 2020 2263 6861 6e67 6522          "change"
+0004dc90: 3a20 222d 302e 3030 3236 3032 3822 2c0a  : "-0.0026028",.
+0004dca0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004dcb0: 2020 2263 6173 6846 6c6f 7722 3a20 2230    "cashFlow": "0
+0004dcc0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004dcd0: 2020 2020 2022 7472 616e 7361 6374 696f       "transactio
+0004dce0: 6e54 696d 6522 3a20 2231 3637 3231 3231  nTime": "1672121
+0004dcf0: 3138 3232 3234 222c 0a20 2020 2020 2020  182224",.       
+0004dd00: 2023 2020 2020 2020 2020 2022 7479 7065   #         "type
+0004dd10: 223a 2022 5452 4144 4522 2c0a 2020 2020  ": "TRADE",.    
+0004dd20: 2020 2020 2320 2020 2020 2020 2020 2266      #         "f
+0004dd30: 6565 5261 7465 223a 2022 302e 3030 3036  eeRate": "0.0006
+0004dd40: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004dd50: 2020 2020 2022 7369 7a65 223a 2022 3132       "size": "12
+0004dd60: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004dd70: 2020 2020 2022 7174 7922 3a20 2231 3222       "qty": "12"
+0004dd80: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004dd90: 2020 2020 2263 6173 6842 616c 616e 6365      "cashBalance
+0004dda0: 223a 2022 3530 3836 2e35 3831 3031 3332  ": "5086.5810132
+0004ddb0: 3222 2c0a 2020 2020 2020 2020 2320 2020  2",.        #   
+0004ddc0: 2020 2020 2020 2263 7572 7265 6e63 7922        "currency"
+0004ddd0: 3a20 2255 5344 5422 2c0a 2020 2020 2020  : "USDT",.      
+0004dde0: 2020 2320 2020 2020 2020 2020 2263 6174    #         "cat
+0004ddf0: 6567 6f72 7922 3a20 226c 696e 6561 7222  egory": "linear"
+0004de00: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004de10: 2020 2020 2274 7261 6465 5072 6963 6522      "tradePrice"
+0004de20: 3a20 2230 2e33 3631 3522 2c0a 2020 2020  : "0.3615",.    
+0004de30: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
+0004de40: 7261 6465 4964 223a 2022 3835 3639 6331  radeId": "8569c1
+0004de50: 3066 2d35 3036 312d 3538 3931 2d38 3163  0f-5061-5891-81c
+0004de60: 342d 6135 3439 3239 3834 3765 6233 220a  4-a54929847eb3".
+0004de70: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
+0004de80: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+0004de90: 2020 6375 7272 656e 6379 4964 203d 2073    currencyId = s
+0004dea0: 656c 662e 7361 6665 5f73 7472 696e 675f  elf.safe_string_
+0004deb0: 3228 6974 656d 2c20 2763 6f69 6e27 2c20  2(item, 'coin', 
+0004dec0: 2763 7572 7265 6e63 7927 290a 2020 2020  'currency').    
+0004ded0: 2020 2020 636f 6465 203d 2073 656c 662e      code = self.
+0004dee0: 7361 6665 5f63 7572 7265 6e63 795f 636f  safe_currency_co
+0004def0: 6465 2863 7572 7265 6e63 7949 642c 2063  de(currencyId, c
+0004df00: 7572 7265 6e63 7929 0a20 2020 2020 2020  urrency).       
+0004df10: 2061 6d6f 756e 7420 3d20 7365 6c66 2e73   amount = self.s
+0004df20: 6166 655f 7374 7269 6e67 5f32 2869 7465  afe_string_2(ite
+0004df30: 6d2c 2027 616d 6f75 6e74 272c 2027 6368  m, 'amount', 'ch
+0004df40: 616e 6765 2729 0a20 2020 2020 2020 2061  ange').        a
+0004df50: 6674 6572 203d 2073 656c 662e 7361 6665  fter = self.safe
+0004df60: 5f73 7472 696e 675f 3228 6974 656d 2c20  _string_2(item, 
+0004df70: 2777 616c 6c65 745f 6261 6c61 6e63 6527  'wallet_balance'
+0004df80: 2c20 2763 6173 6842 616c 616e 6365 2729  , 'cashBalance')
+0004df90: 0a20 2020 2020 2020 2064 6972 6563 7469  .        directi
+0004dfa0: 6f6e 203d 2027 6f75 7427 2069 6620 5072  on = 'out' if Pr
+0004dfb0: 6563 6973 652e 7374 7269 6e67 5f6c 7428  ecise.string_lt(
+0004dfc0: 616d 6f75 6e74 2c20 2730 2729 2065 6c73  amount, '0') els
+0004dfd0: 6520 2769 6e27 0a20 2020 2020 2020 2062  e 'in'.        b
+0004dfe0: 6566 6f72 6520 3d20 4e6f 6e65 0a20 2020  efore = None.   
+0004dff0: 2020 2020 2069 6620 6166 7465 7220 6973       if after is
+0004e000: 206e 6f74 204e 6f6e 6520 616e 6420 616d   not None and am
+0004e010: 6f75 6e74 2069 7320 6e6f 7420 4e6f 6e65  ount is not None
+0004e020: 3a0a 2020 2020 2020 2020 2020 2020 6469  :.            di
+0004e030: 6666 6572 656e 6365 203d 2061 6d6f 756e  fference = amoun
+0004e040: 7420 6966 2028 6469 7265 6374 696f 6e20  t if (direction 
+0004e050: 3d3d 2027 6f75 7427 2920 656c 7365 2050  == 'out') else P
+0004e060: 7265 6369 7365 2e73 7472 696e 675f 6e65  recise.string_ne
+0004e070: 6728 616d 6f75 6e74 290a 2020 2020 2020  g(amount).      
+0004e080: 2020 2020 2020 6265 666f 7265 203d 2050        before = P
+0004e090: 7265 6369 7365 2e73 7472 696e 675f 6164  recise.string_ad
+0004e0a0: 6428 6166 7465 722c 2064 6966 6665 7265  d(after, differe
+0004e0b0: 6e63 6529 0a20 2020 2020 2020 2074 696d  nce).        tim
+0004e0c0: 6573 7461 6d70 203d 2073 656c 662e 7061  estamp = self.pa
+0004e0d0: 7273 6538 3630 3128 7365 6c66 2e73 6166  rse8601(self.saf
+0004e0e0: 655f 7374 7269 6e67 2869 7465 6d2c 2027  e_string(item, '
+0004e0f0: 6578 6563 5f74 696d 6527 2929 0a20 2020  exec_time')).   
+0004e100: 2020 2020 2069 6620 7469 6d65 7374 616d       if timestam
+0004e110: 7020 6973 204e 6f6e 653a 0a20 2020 2020  p is None:.     
+0004e120: 2020 2020 2020 2074 696d 6573 7461 6d70         timestamp
+0004e130: 203d 2073 656c 662e 7361 6665 5f69 6e74   = self.safe_int
+0004e140: 6567 6572 2869 7465 6d2c 2027 7472 616e  eger(item, 'tran
+0004e150: 7361 6374 696f 6e54 696d 6527 290a 2020  sactionTime').  
+0004e160: 2020 2020 2020 7479 7065 203d 2073 656c        type = sel
+0004e170: 662e 7061 7273 655f 6c65 6467 6572 5f65  f.parse_ledger_e
+0004e180: 6e74 7279 5f74 7970 6528 7365 6c66 2e73  ntry_type(self.s
+0004e190: 6166 655f 7374 7269 6e67 2869 7465 6d2c  afe_string(item,
+0004e1a0: 2027 7479 7065 2729 290a 2020 2020 2020   'type')).      
+0004e1b0: 2020 6964 203d 2073 656c 662e 7361 6665    id = self.safe
+0004e1c0: 5f73 7472 696e 6728 6974 656d 2c20 2769  _string(item, 'i
+0004e1d0: 6427 290a 2020 2020 2020 2020 7265 6665  d').        refe
+0004e1e0: 7265 6e63 6549 6420 3d20 7365 6c66 2e73  renceId = self.s
+0004e1f0: 6166 655f 7374 7269 6e67 2869 7465 6d2c  afe_string(item,
+0004e200: 2027 7478 5f69 6427 290a 2020 2020 2020   'tx_id').      
+0004e210: 2020 7265 7475 726e 207b 0a20 2020 2020    return {.     
+0004e220: 2020 2020 2020 2027 6964 273a 2069 642c         'id': id,
+0004e230: 0a20 2020 2020 2020 2020 2020 2027 6375  .            'cu
+0004e240: 7272 656e 6379 273a 2063 6f64 652c 0a20  rrency': code,. 
+0004e250: 2020 2020 2020 2020 2020 2027 6163 636f             'acco
+0004e260: 756e 7427 3a20 7365 6c66 2e73 6166 655f  unt': self.safe_
+0004e270: 7374 7269 6e67 2869 7465 6d2c 2027 7761  string(item, 'wa
+0004e280: 6c6c 6574 5f69 6427 292c 0a20 2020 2020  llet_id'),.     
+0004e290: 2020 2020 2020 2027 7265 6665 7265 6e63         'referenc
+0004e2a0: 6541 6363 6f75 6e74 273a 204e 6f6e 652c  eAccount': None,
+0004e2b0: 0a20 2020 2020 2020 2020 2020 2027 7265  .            're
+0004e2c0: 6665 7265 6e63 6549 6427 3a20 7265 6665  ferenceId': refe
+0004e2d0: 7265 6e63 6549 642c 0a20 2020 2020 2020  renceId,.       
+0004e2e0: 2020 2020 2027 7374 6174 7573 273a 204e       'status': N
+0004e2f0: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
+0004e300: 2027 616d 6f75 6e74 273a 2073 656c 662e   'amount': self.
+0004e310: 7061 7273 655f 6e75 6d62 6572 2861 6d6f  parse_number(amo
+0004e320: 756e 7429 2c0a 2020 2020 2020 2020 2020  unt),.          
+0004e330: 2020 2762 6566 6f72 6527 3a20 7365 6c66    'before': self
+0004e340: 2e70 6172 7365 5f6e 756d 6265 7228 6265  .parse_number(be
+0004e350: 666f 7265 292c 0a20 2020 2020 2020 2020  fore),.         
+0004e360: 2020 2027 6166 7465 7227 3a20 7365 6c66     'after': self
+0004e370: 2e70 6172 7365 5f6e 756d 6265 7228 6166  .parse_number(af
+0004e380: 7465 7229 2c0a 2020 2020 2020 2020 2020  ter),.          
+0004e390: 2020 2766 6565 273a 2073 656c 662e 7061    'fee': self.pa
+0004e3a0: 7273 655f 6e75 6d62 6572 2873 656c 662e  rse_number(self.
+0004e3b0: 7361 6665 5f73 7472 696e 6728 6974 656d  safe_string(item
+0004e3c0: 2c20 2766 6565 2729 292c 0a20 2020 2020  , 'fee')),.     
+0004e3d0: 2020 2020 2020 2027 6469 7265 6374 696f         'directio
+0004e3e0: 6e27 3a20 6469 7265 6374 696f 6e2c 0a20  n': direction,. 
+0004e3f0: 2020 2020 2020 2020 2020 2027 7469 6d65             'time
+0004e400: 7374 616d 7027 3a20 7469 6d65 7374 616d  stamp': timestam
+0004e410: 702c 0a20 2020 2020 2020 2020 2020 2027  p,.            '
+0004e420: 6461 7465 7469 6d65 273a 2073 656c 662e  datetime': self.
+0004e430: 6973 6f38 3630 3128 7469 6d65 7374 616d  iso8601(timestam
+0004e440: 7029 2c0a 2020 2020 2020 2020 2020 2020  p),.            
+0004e450: 2774 7970 6527 3a20 7479 7065 2c0a 2020  'type': type,.  
+0004e460: 2020 2020 2020 2020 2020 2769 6e66 6f27            'info'
+0004e470: 3a20 6974 656d 2c0a 2020 2020 2020 2020  : item,.        
+0004e480: 7d0a 0a20 2020 2064 6566 2070 6172 7365  }..    def parse
+0004e490: 5f6c 6564 6765 725f 656e 7472 795f 7479  _ledger_entry_ty
+0004e4a0: 7065 2873 656c 662c 2074 7970 6529 3a0a  pe(self, type):.
+0004e4b0: 2020 2020 2020 2020 7479 7065 7320 3d20          types = 
+0004e4c0: 7b0a 2020 2020 2020 2020 2020 2020 2744  {.            'D
+0004e4d0: 6570 6f73 6974 273a 2027 7472 616e 7361  eposit': 'transa
+0004e4e0: 6374 696f 6e27 2c0a 2020 2020 2020 2020  ction',.        
+0004e4f0: 2020 2020 2757 6974 6864 7261 7727 3a20      'Withdraw': 
+0004e500: 2774 7261 6e73 6163 7469 6f6e 272c 0a20  'transaction',. 
+0004e510: 2020 2020 2020 2020 2020 2027 5265 616c             'Real
+0004e520: 6973 6564 504e 4c27 3a20 2774 7261 6465  isedPNL': 'trade
+0004e530: 272c 0a20 2020 2020 2020 2020 2020 2027  ',.            '
+0004e540: 436f 6d6d 6973 7369 6f6e 273a 2027 6665  Commission': 'fe
+0004e550: 6527 2c0a 2020 2020 2020 2020 2020 2020  e',.            
+0004e560: 2752 6566 756e 6427 3a20 2763 6173 6862  'Refund': 'cashb
+0004e570: 6163 6b27 2c0a 2020 2020 2020 2020 2020  ack',.          
+0004e580: 2020 2750 7269 7a65 273a 2027 7072 697a    'Prize': 'priz
+0004e590: 6527 2c20 2023 203f 0a20 2020 2020 2020  e',  # ?.       
+0004e5a0: 2020 2020 2027 4578 6368 616e 6765 4f72       'ExchangeOr
+0004e5b0: 6465 7257 6974 6864 7261 7727 3a20 2774  derWithdraw': 't
+0004e5c0: 7261 6e73 6163 7469 6f6e 272c 0a20 2020  ransaction',.   
+0004e5d0: 2020 2020 2020 2020 2027 4578 6368 616e           'Exchan
+0004e5e0: 6765 4f72 6465 7244 6570 6f73 6974 273a  geOrderDeposit':
+0004e5f0: 2027 7472 616e 7361 6374 696f 6e27 2c0a   'transaction',.
+0004e600: 2020 2020 2020 2020 2020 2020 2320 7635              # v5
+0004e610: 0a20 2020 2020 2020 2020 2020 2027 5452  .            'TR
+0004e620: 414e 5346 4552 5f49 4e27 3a20 2774 7261  ANSFER_IN': 'tra
+0004e630: 6e73 6163 7469 6f6e 272c 0a20 2020 2020  nsaction',.     
+0004e640: 2020 2020 2020 2027 5452 414e 5346 4552         'TRANSFER
+0004e650: 5f4f 5554 273a 2027 7472 616e 7361 6374  _OUT': 'transact
+0004e660: 696f 6e27 2c0a 2020 2020 2020 2020 2020  ion',.          
+0004e670: 2020 2754 5241 4445 273a 2027 7472 6164    'TRADE': 'trad
+0004e680: 6527 2c0a 2020 2020 2020 2020 2020 2020  e',.            
+0004e690: 2753 4554 544c 454d 454e 5427 3a20 2774  'SETTLEMENT': 't
+0004e6a0: 7261 6465 272c 0a20 2020 2020 2020 2020  rade',.         
+0004e6b0: 2020 2027 4445 4c49 5645 5259 273a 2027     'DELIVERY': '
+0004e6c0: 7472 6164 6527 2c0a 2020 2020 2020 2020  trade',.        
+0004e6d0: 2020 2020 274c 4951 5549 4441 5449 4f4e      'LIQUIDATION
+0004e6e0: 273a 2027 7472 6164 6527 2c0a 2020 2020  ': 'trade',.    
+0004e6f0: 2020 2020 2020 2020 2742 4f4e 5553 273a          'BONUS':
+0004e700: 2027 5072 697a 6527 2c0a 2020 2020 2020   'Prize',.      
+0004e710: 2020 2020 2020 2746 4545 5f52 4546 554e        'FEE_REFUN
+0004e720: 4427 3a20 2763 6173 6862 6163 6b27 2c0a  D': 'cashback',.
+0004e730: 2020 2020 2020 2020 2020 2020 2749 4e54              'INT
+0004e740: 4552 4553 5427 3a20 2774 7261 6e73 6163  EREST': 'transac
+0004e750: 7469 6f6e 272c 0a20 2020 2020 2020 2020  tion',.         
+0004e760: 2020 2027 4355 5252 454e 4359 5f42 5559     'CURRENCY_BUY
+0004e770: 273a 2027 7472 6164 6527 2c0a 2020 2020  ': 'trade',.    
+0004e780: 2020 2020 2020 2020 2743 5552 5245 4e43          'CURRENC
+0004e790: 595f 5345 4c4c 273a 2027 7472 6164 6527  Y_SELL': 'trade'
+0004e7a0: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
+0004e7b0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+0004e7c0: 7361 6665 5f73 7472 696e 6728 7479 7065  safe_string(type
+0004e7d0: 732c 2074 7970 652c 2074 7970 6529 0a0a  s, type, type)..
+0004e7e0: 2020 2020 6173 796e 6320 6465 6620 7769      async def wi
+0004e7f0: 7468 6472 6177 2873 656c 662c 2063 6f64  thdraw(self, cod
+0004e800: 653a 2073 7472 2c20 616d 6f75 6e74 2c20  e: str, amount, 
+0004e810: 6164 6472 6573 732c 2074 6167 3d4e 6f6e  address, tag=Non
+0004e820: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
+0004e830: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0004e840: 2020 206d 616b 6520 6120 7769 7468 6472     make a withdr
+0004e850: 6177 616c 0a20 2020 2020 2020 2073 6565  awal.        see
+0004e860: 2068 7474 7073 3a2f 2f62 7962 6974 2d65   https://bybit-e
+0004e870: 7863 6861 6e67 652e 6769 7468 7562 2e69  xchange.github.i
+0004e880: 6f2f 646f 6373 2f76 352f 6173 7365 742f  o/docs/v5/asset/
+0004e890: 7769 7468 6472 6177 0a20 2020 2020 2020  withdraw.       
+0004e8a0: 203a 7061 7261 6d20 7374 7220 636f 6465   :param str code
+0004e8b0: 3a20 756e 6966 6965 6420 6375 7272 656e  : unified curren
+0004e8c0: 6379 2063 6f64 650a 2020 2020 2020 2020  cy code.        
+0004e8d0: 3a70 6172 616d 2066 6c6f 6174 2061 6d6f  :param float amo
+0004e8e0: 756e 743a 2074 6865 2061 6d6f 756e 7420  unt: the amount 
+0004e8f0: 746f 2077 6974 6864 7261 770a 2020 2020  to withdraw.    
+0004e900: 2020 2020 3a70 6172 616d 2073 7472 2061      :param str a
+0004e910: 6464 7265 7373 3a20 7468 6520 6164 6472  ddress: the addr
+0004e920: 6573 7320 746f 2077 6974 6864 7261 7720  ess to withdraw 
+0004e930: 746f 0a20 2020 2020 2020 203a 7061 7261  to.        :para
+0004e940: 6d20 7374 727c 4e6f 6e65 2074 6167 3a0a  m str|None tag:.
+0004e950: 2020 2020 2020 2020 3a70 6172 616d 2064          :param d
+0004e960: 6963 7420 7061 7261 6d73 3a20 6578 7472  ict params: extr
+0004e970: 6120 7061 7261 6d65 7465 7273 2073 7065  a parameters spe
+0004e980: 6369 6669 6320 746f 2074 6865 2062 7962  cific to the byb
+0004e990: 6974 2061 7069 2065 6e64 706f 696e 740a  it api endpoint.
+0004e9a0: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
+0004e9b0: 2064 6963 743a 2061 2060 7472 616e 7361   dict: a `transa
+0004e9c0: 6374 696f 6e20 7374 7275 6374 7572 6520  ction structure 
+0004e9d0: 3c68 7474 7073 3a2f 2f64 6f63 732e 6363  <https://docs.cc
+0004e9e0: 7874 2e63 6f6d 2f23 2f3f 6964 3d74 7261  xt.com/#/?id=tra
+0004e9f0: 6e73 6163 7469 6f6e 2d73 7472 7563 7475  nsaction-structu
+0004ea00: 7265 3e60 0a20 2020 2020 2020 2022 2222  re>`.        """
+0004ea10: 0a20 2020 2020 2020 2074 6167 2c20 7061  .        tag, pa
+0004ea20: 7261 6d73 203d 2073 656c 662e 6861 6e64  rams = self.hand
+0004ea30: 6c65 5f77 6974 6864 7261 775f 7461 675f  le_withdraw_tag_
+0004ea40: 616e 645f 7061 7261 6d73 2874 6167 2c20  and_params(tag, 
+0004ea50: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
+0004ea60: 6177 6169 7420 7365 6c66 2e6c 6f61 645f  await self.load_
+0004ea70: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
+0004ea80: 2020 7365 6c66 2e63 6865 636b 5f61 6464    self.check_add
+0004ea90: 7265 7373 2861 6464 7265 7373 290a 2020  ress(address).  
+0004eaa0: 2020 2020 2020 6375 7272 656e 6379 203d        currency =
+0004eab0: 2073 656c 662e 6375 7272 656e 6379 2863   self.currency(c
+0004eac0: 6f64 6529 0a20 2020 2020 2020 2072 6571  ode).        req
+0004ead0: 7565 7374 203d 207b 0a20 2020 2020 2020  uest = {.       
+0004eae0: 2020 2020 2027 636f 696e 273a 2063 7572       'coin': cur
+0004eaf0: 7265 6e63 795b 2769 6427 5d2c 0a20 2020  rency['id'],.   
+0004eb00: 2020 2020 2020 2020 2027 616d 6f75 6e74           'amount
+0004eb10: 273a 2073 656c 662e 6e75 6d62 6572 5f74  ': self.number_t
+0004eb20: 6f5f 7374 7269 6e67 2861 6d6f 756e 7429  o_string(amount)
+0004eb30: 2c0a 2020 2020 2020 2020 2020 2020 2761  ,.            'a
+0004eb40: 6464 7265 7373 273a 2061 6464 7265 7373  ddress': address
+0004eb50: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
+0004eb60: 2020 2020 6966 2074 6167 2069 7320 6e6f      if tag is no
+0004eb70: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+0004eb80: 2020 2020 7265 7175 6573 745b 2774 6167      request['tag
+0004eb90: 275d 203d 2074 6167 0a20 2020 2020 2020  '] = tag.       
+0004eba0: 206e 6574 776f 726b 436f 6465 2c20 7175   networkCode, qu
+0004ebb0: 6572 7920 3d20 7365 6c66 2e68 616e 646c  ery = self.handl
+0004ebc0: 655f 6e65 7477 6f72 6b5f 636f 6465 5f61  e_network_code_a
+0004ebd0: 6e64 5f70 6172 616d 7328 7061 7261 6d73  nd_params(params
+0004ebe0: 290a 2020 2020 2020 2020 6e65 7477 6f72  ).        networ
+0004ebf0: 6b49 6420 3d20 7365 6c66 2e6e 6574 776f  kId = self.netwo
+0004ec00: 726b 5f63 6f64 655f 746f 5f69 6428 6e65  rk_code_to_id(ne
+0004ec10: 7477 6f72 6b43 6f64 6529 0a20 2020 2020  tworkCode).     
+0004ec20: 2020 2069 6620 6e65 7477 6f72 6b49 6420     if networkId 
+0004ec30: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0004ec40: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0004ec50: 5b27 6368 6169 6e27 5d20 3d20 6e65 7477  ['chain'] = netw
+0004ec60: 6f72 6b49 642e 7570 7065 7228 290a 2020  orkId.upper().  
+0004ec70: 2020 2020 2020 656e 6162 6c65 556e 6966        enableUnif
+0004ec80: 6965 6420 3d20 6177 6169 7420 7365 6c66  ied = await self
+0004ec90: 2e69 735f 756e 6966 6965 645f 656e 6162  .is_unified_enab
+0004eca0: 6c65 6428 290a 2020 2020 2020 2020 6d65  led().        me
+0004ecb0: 7468 6f64 203d 2027 7072 6976 6174 6550  thod = 'privateP
+0004ecc0: 6f73 7456 3541 7373 6574 5769 7468 6472  ostV5AssetWithdr
+0004ecd0: 6177 4372 6561 7465 2720 6966 2028 656e  awCreate' if (en
+0004ece0: 6162 6c65 556e 6966 6965 645b 315d 2920  ableUnified[1]) 
+0004ecf0: 656c 7365 2027 7072 6976 6174 6550 6f73  else 'privatePos
+0004ed00: 7441 7373 6574 5633 5072 6976 6174 6557  tAssetV3PrivateW
+0004ed10: 6974 6864 7261 7743 7265 6174 6527 0a20  ithdrawCreate'. 
+0004ed20: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+0004ed30: 3d20 6177 6169 7420 6765 7461 7474 7228  = await getattr(
+0004ed40: 7365 6c66 2c20 6d65 7468 6f64 2928 7365  self, method)(se
+0004ed50: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
+0004ed60: 742c 2071 7565 7279 2929 0a20 2020 2020  t, query)).     
+0004ed70: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
+0004ed80: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+0004ed90: 2020 2020 2020 2272 6574 436f 6465 223a        "retCode":
+0004eda0: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
+0004edb0: 2020 2020 2020 2020 2272 6574 4d73 6722          "retMsg"
+0004edc0: 3a20 2273 7563 6365 7373 222c 0a20 2020  : "success",.   
+0004edd0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0004ede0: 7265 7375 6c74 223a 207b 0a20 2020 2020  result": {.     
+0004edf0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004ee00: 2022 6964 223a 2022 3933 3737 3236 3622   "id": "9377266"
+0004ee10: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004ee20: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
+0004ee30: 2020 2020 2020 2020 2272 6574 4578 7449          "retExtI
+0004ee40: 6e66 6f22 3a20 7b7d 2c0a 2020 2020 2020  nfo": {},.      
+0004ee50: 2020 2320 2020 2020 2020 2020 2274 696d    #         "tim
+0004ee60: 6522 3a20 2231 3636 3638 3932 3839 3439  e": "16668928949
+0004ee70: 3032 220a 2020 2020 2020 2020 2320 2020  02".        #   
+0004ee80: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
+0004ee90: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
+0004eea0: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
+0004eeb0: 6573 706f 6e73 652c 2027 7265 7375 6c74  esponse, 'result
+0004eec0: 272c 207b 7d29 0a20 2020 2020 2020 2072  ', {}).        r
+0004eed0: 6574 7572 6e20 7365 6c66 2e70 6172 7365  eturn self.parse
+0004eee0: 5f74 7261 6e73 6163 7469 6f6e 2872 6573  _transaction(res
+0004eef0: 756c 742c 2063 7572 7265 6e63 7929 0a0a  ult, currency)..
+0004ef00: 2020 2020 6173 796e 6320 6465 6620 6665      async def fe
+0004ef10: 7463 685f 706f 7369 7469 6f6e 2873 656c  tch_position(sel
+0004ef20: 662c 2073 796d 626f 6c3a 2073 7472 2c20  f, symbol: str, 
+0004ef30: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
+0004ef40: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+0004ef50: 6665 7463 6820 6461 7461 206f 6e20 6120  fetch data on a 
+0004ef60: 7369 6e67 6c65 206f 7065 6e20 636f 6e74  single open cont
+0004ef70: 7261 6374 2074 7261 6465 2070 6f73 6974  ract trade posit
+0004ef80: 696f 6e0a 2020 2020 2020 2020 3a70 6172  ion.        :par
+0004ef90: 616d 2073 7472 2073 796d 626f 6c3a 2075  am str symbol: u
+0004efa0: 6e69 6669 6564 206d 6172 6b65 7420 7379  nified market sy
+0004efb0: 6d62 6f6c 206f 6620 7468 6520 6d61 726b  mbol of the mark
+0004efc0: 6574 2074 6865 2070 6f73 6974 696f 6e20  et the position 
+0004efd0: 6973 2068 656c 6420 696e 2c20 6465 6661  is held in, defa
+0004efe0: 756c 7420 6973 204e 6f6e 650a 2020 2020  ult is None.    
+0004eff0: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
+0004f000: 7061 7261 6d73 3a20 6578 7472 6120 7061  params: extra pa
+0004f010: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
+0004f020: 6320 746f 2074 6865 2062 7962 6974 2061  c to the bybit a
+0004f030: 7069 2065 6e64 706f 696e 740a 2020 2020  pi endpoint.    
+0004f040: 2020 2020 3a72 6574 7572 6e73 2064 6963      :returns dic
+0004f050: 743a 2061 2060 706f 7369 7469 6f6e 2073  t: a `position s
+0004f060: 7472 7563 7475 7265 203c 6874 7470 733a  tructure <https:
+0004f070: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
+0004f080: 232f 3f69 643d 706f 7369 7469 6f6e 2d73  #/?id=position-s
+0004f090: 7472 7563 7475 7265 3e60 0a20 2020 2020  tructure>`.     
+0004f0a0: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
+0004f0b0: 656c 662e 6368 6563 6b5f 7265 7175 6972  elf.check_requir
+0004f0c0: 6564 5f73 796d 626f 6c28 2766 6574 6368  ed_symbol('fetch
+0004f0d0: 506f 7369 7469 6f6e 272c 2073 796d 626f  Position', symbo
+0004f0e0: 6c29 0a20 2020 2020 2020 2061 7761 6974  l).        await
+0004f0f0: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
+0004f100: 7473 2829 0a20 2020 2020 2020 206d 6172  ts().        mar
+0004f110: 6b65 7420 3d20 7365 6c66 2e6d 6172 6b65  ket = self.marke
+0004f120: 7428 7379 6d62 6f6c 290a 2020 2020 2020  t(symbol).      
+0004f130: 2020 7265 7175 6573 7420 3d20 7b0a 2020    request = {.  
+0004f140: 2020 2020 2020 2020 2020 2773 796d 626f            'symbo
+0004f150: 6c27 3a20 6d61 726b 6574 5b27 6964 275d  l': market['id']
+0004f160: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
+0004f170: 2020 2020 6d65 7468 6f64 203d 204e 6f6e      method = Non
+0004f180: 650a 2020 2020 2020 2020 656e 6162 6c65  e.        enable
+0004f190: 556e 6966 6965 644d 6172 6769 6e2c 2065  UnifiedMargin, e
+0004f1a0: 6e61 626c 6555 6e69 6669 6564 4163 636f  nableUnifiedAcco
+0004f1b0: 756e 7420 3d20 6177 6169 7420 7365 6c66  unt = await self
+0004f1c0: 2e69 735f 756e 6966 6965 645f 656e 6162  .is_unified_enab
+0004f1d0: 6c65 6428 290a 2020 2020 2020 2020 6973  led().        is
+0004f1e0: 5573 6463 5365 7474 6c65 6420 3d20 6d61  UsdcSettled = ma
+0004f1f0: 726b 6574 5b27 7365 7474 6c65 275d 203d  rket['settle'] =
+0004f200: 3d20 2755 5344 4327 0a20 2020 2020 2020  = 'USDC'.       
+0004f210: 2069 6620 656e 6162 6c65 556e 6966 6965   if enableUnifie
+0004f220: 644d 6172 6769 6e20 6f72 2065 6e61 626c  dMargin or enabl
+0004f230: 6555 6e69 6669 6564 4163 636f 756e 743a  eUnifiedAccount:
+0004f240: 0a20 2020 2020 2020 2020 2020 206d 6574  .            met
+0004f250: 686f 6420 3d20 2770 7269 7661 7465 4765  hod = 'privateGe
+0004f260: 7456 3550 6f73 6974 696f 6e4c 6973 7427  tV5PositionList'
+0004f270: 2069 6620 2865 6e61 626c 6555 6e69 6669   if (enableUnifi
+0004f280: 6564 4163 636f 756e 7429 2065 6c73 6520  edAccount) else 
+0004f290: 2770 7269 7661 7465 4765 7455 6e69 6669  'privateGetUnifi
+0004f2a0: 6564 5633 5072 6976 6174 6550 6f73 6974  edV3PrivatePosit
+0004f2b0: 696f 6e4c 6973 7427 0a20 2020 2020 2020  ionList'.       
+0004f2c0: 2020 2020 2069 6620 6d61 726b 6574 5b27       if market['
+0004f2d0: 6f70 7469 6f6e 275d 3a0a 2020 2020 2020  option']:.      
+0004f2e0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+0004f2f0: 745b 2763 6174 6567 6f72 7927 5d20 3d20  t['category'] = 
+0004f300: 276f 7074 696f 6e27 0a20 2020 2020 2020  'option'.       
+0004f310: 2020 2020 2065 6c69 6620 6d61 726b 6574       elif market
+0004f320: 5b27 6c69 6e65 6172 275d 3a0a 2020 2020  ['linear']:.    
+0004f330: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0004f340: 6573 745b 2763 6174 6567 6f72 7927 5d20  est['category'] 
+0004f350: 3d20 276c 696e 6561 7227 0a20 2020 2020  = 'linear'.     
+0004f360: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0004f370: 2020 2020 2020 2020 2020 2020 2072 6169               rai
+0004f380: 7365 204e 6f74 5375 7070 6f72 7465 6428  se NotSupported(
+0004f390: 7365 6c66 2e69 6420 2b20 2720 6665 7463  self.id + ' fetc
+0004f3a0: 6850 6f73 6974 696f 6e28 2920 646f 6573  hPosition() does
+0004f3b0: 206e 6f74 2061 6c6c 6f77 2069 6e76 6572   not allow inver
+0004f3c0: 7365 206d 6172 6b65 7420 6f72 6465 7273  se market orders
+0004f3d0: 2066 6f72 2027 202b 2073 796d 626f 6c20   for ' + symbol 
+0004f3e0: 2b20 2720 6d61 726b 6574 7327 290a 2020  + ' markets').  
+0004f3f0: 2020 2020 2020 656c 6966 2069 7355 7364        elif isUsd
+0004f400: 6353 6574 746c 6564 3a0a 2020 2020 2020  cSettled:.      
+0004f410: 2020 2020 2020 6d65 7468 6f64 203d 2027        method = '
+0004f420: 7072 6976 6174 6550 6f73 744f 7074 696f  privatePostOptio
+0004f430: 6e55 7364 634f 7065 6e61 7069 5072 6976  nUsdcOpenapiPriv
+0004f440: 6174 6556 3151 7565 7279 506f 7369 7469  ateV1QueryPositi
+0004f450: 6f6e 270a 2020 2020 2020 2020 2020 2020  on'.            
+0004f460: 6966 206d 6172 6b65 745b 276f 7074 696f  if market['optio
+0004f470: 6e27 5d3a 0a20 2020 2020 2020 2020 2020  n']:.           
+0004f480: 2020 2020 2072 6571 7565 7374 5b27 6361       request['ca
+0004f490: 7465 676f 7279 275d 203d 2027 4f50 5449  tegory'] = 'OPTI
+0004f4a0: 4f4e 270a 2020 2020 2020 2020 2020 2020  ON'.            
+0004f4b0: 656c 6966 206d 6172 6b65 745b 276c 696e  elif market['lin
+0004f4c0: 6561 7227 5d3a 0a20 2020 2020 2020 2020  ear']:.         
+0004f4d0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+0004f4e0: 6361 7465 676f 7279 275d 203d 2027 5045  category'] = 'PE
+0004f4f0: 5250 4554 5541 4c27 0a20 2020 2020 2020  RPETUAL'.       
+0004f500: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0004f510: 2020 2069 6620 6d61 726b 6574 5b27 6c69     if market['li
+0004f520: 6e65 6172 275d 3a0a 2020 2020 2020 2020  near']:.        
+0004f530: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+0004f540: 2763 6174 6567 6f72 7927 5d20 3d20 276c  'category'] = 'l
+0004f550: 696e 6561 7227 0a20 2020 2020 2020 2020  inear'.         
+0004f560: 2020 2065 6c69 6620 6d61 726b 6574 5b27     elif market['
+0004f570: 696e 7665 7273 6527 5d3a 0a20 2020 2020  inverse']:.     
+0004f580: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+0004f590: 7374 5b27 6361 7465 676f 7279 275d 203d  st['category'] =
+0004f5a0: 2027 696e 7665 7273 6527 0a20 2020 2020   'inverse'.     
+0004f5b0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0004f5c0: 2020 2020 2020 2020 2020 2020 2072 6169               rai
+0004f5d0: 7365 204e 6f74 5375 7070 6f72 7465 6428  se NotSupported(
+0004f5e0: 7365 6c66 2e69 6420 2b20 2720 6665 7463  self.id + ' fetc
+0004f5f0: 6850 6f73 6974 696f 6e28 2920 646f 6573  hPosition() does
+0004f600: 206e 6f74 2061 6c6c 6f77 206f 7074 696f   not allow optio
+0004f610: 6e20 6d61 726b 6574 206f 7264 6572 7320  n market orders 
+0004f620: 666f 7220 2720 2b20 7379 6d62 6f6c 202b  for ' + symbol +
+0004f630: 2027 206d 6172 6b65 7473 2729 0a20 2020   ' markets').   
+0004f640: 2020 2020 2020 2020 206d 6574 686f 6420           method 
+0004f650: 3d20 2770 7269 7661 7465 4765 7456 3550  = 'privateGetV5P
+0004f660: 6f73 6974 696f 6e4c 6973 7427 0a20 2020  ositionList'.   
+0004f670: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
+0004f680: 6177 6169 7420 6765 7461 7474 7228 7365  await getattr(se
+0004f690: 6c66 2c20 6d65 7468 6f64 2928 7365 6c66  lf, method)(self
+0004f6a0: 2e65 7874 656e 6428 7265 7175 6573 742c  .extend(request,
+0004f6b0: 2070 6172 616d 7329 290a 2020 2020 2020   params)).      
+0004f6c0: 2020 230a 2020 2020 2020 2020 2320 756e    #.        # un
+0004f6d0: 6966 6965 6420 6163 636f 756e 740a 2020  ified account.  
+0004f6e0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+0004f6f0: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
+0004f700: 2320 2020 2020 2020 2020 2272 6574 436f  #         "retCo
+0004f710: 6465 223a 2030 2c0a 2020 2020 2020 2020  de": 0,.        
+0004f720: 2320 2020 2020 2020 2020 2272 6574 4d73  #         "retMs
+0004f730: 6722 3a20 224f 4b22 2c0a 2020 2020 2020  g": "OK",.      
+0004f740: 2020 2320 2020 2020 2020 2020 2272 6573    #         "res
+0004f750: 756c 7422 3a20 7b0a 2020 2020 2020 2020  ult": {.        
+0004f760: 2320 2020 2020 2020 2020 2020 2020 226e  #             "n
+0004f770: 6578 7450 6167 6543 7572 736f 7222 3a20  extPageCursor": 
+0004f780: 2275 7064 6174 6541 7425 3344 3136 3732  "updateAt%3D1672
+0004f790: 3237 3933 3232 3636 3822 2c0a 2020 2020  279322668",.    
+0004f7a0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004f7b0: 2020 2263 6174 6567 6f72 7922 3a20 226c    "category": "l
+0004f7c0: 696e 6561 7222 2c0a 2020 2020 2020 2020  inear",.        
+0004f7d0: 2320 2020 2020 2020 2020 2020 2020 226c  #             "l
+0004f7e0: 6973 7422 3a20 5b0a 2020 2020 2020 2020  ist": [.        
+0004f7f0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0004f800: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
 0004f810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004f820: 2273 746f 704c 6f73 7322 3a20 2222 2c0a  "stopLoss": "",.
-0004f830: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004f840: 2020 2020 2020 2020 2020 2020 2020 2274                "t
-0004f850: 7261 6465 4d6f 6465 223a 2030 0a20 2020  radeMode": 0.   
-0004f860: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0004f870: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-0004f880: 2023 2020 2020 2020 2020 2020 2020 205d   #             ]
-0004f890: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004f8a0: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
-0004f8b0: 2020 2020 2020 2020 2272 6574 4578 7449          "retExtI
-0004f8c0: 6e66 6f22 3a20 7b7d 2c0a 2020 2020 2020  nfo": {},.      
-0004f8d0: 2020 2320 2020 2020 2020 2020 2274 696d    #         "tim
-0004f8e0: 6522 3a20 3136 3732 3238 3032 3139 3136  e": 167228021916
-0004f8f0: 390a 2020 2020 2020 2020 2320 2020 2020  9.        #     
-0004f900: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
-0004f910: 2020 2020 2320 756e 6966 6965 6420 6d61      # unified ma
-0004f920: 7267 696e 0a20 2020 2020 2020 2023 0a20  rgin.        #. 
-0004f930: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
-0004f940: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004f950: 2022 7265 7443 6f64 6522 3a20 302c 0a20   "retCode": 0,. 
-0004f960: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004f970: 2022 7265 744d 7367 223a 2022 5375 6363   "retMsg": "Succ
-0004f980: 6573 7322 2c0a 2020 2020 2020 2020 2320  ess",.        # 
-0004f990: 2020 2020 2020 2020 2272 6573 756c 7422          "result"
-0004f9a0: 3a20 7b0a 2020 2020 2020 2020 2320 2020  : {.        #   
-0004f9b0: 2020 2020 2020 2020 2020 226e 6578 7450            "nextP
-0004f9c0: 6167 6543 7572 736f 7222 3a20 2230 2533  ageCursor": "0%3
-0004f9d0: 4131 3635 3737 3131 3934 3939 3435 2532  A1657711949945%2
-0004f9e0: 4330 2533 4131 3635 3737 3131 3934 3939  C0%3A16577119499
-0004f9f0: 3435 222c 0a20 2020 2020 2020 2023 2020  45",.        #  
-0004fa00: 2020 2020 2020 2020 2020 2022 6361 7465             "cate
-0004fa10: 676f 7279 223a 2022 6c69 6e65 6172 222c  gory": "linear",
-0004fa20: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004fa30: 2020 2020 2020 2022 6c69 7374 223a 205b         "list": [
-0004fa40: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004fa50: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
-0004fa60: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0004fa70: 2020 2020 2020 2020 2020 2022 7379 6d62             "symb
-0004fa80: 6f6c 223a 2022 4554 4855 5344 5422 2c0a  ol": "ETHUSDT",.
-0004fa90: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004faa0: 2020 2020 2020 2020 2020 2020 2020 226c                "l
-0004fab0: 6576 6572 6167 6522 3a20 2231 3022 2c0a  everage": "10",.
-0004fac0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004fad0: 2020 2020 2020 2020 2020 2020 2020 2275                "u
-0004fae0: 7064 6174 6564 5469 6d65 223a 2031 3635  pdatedTime": 165
-0004faf0: 3737 3131 3934 3939 3435 2c0a 2020 2020  7711949945,.    
-0004fb00: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004fb10: 2020 2020 2020 2020 2020 2273 6964 6522            "side"
-0004fb20: 3a20 2242 7579 222c 0a20 2020 2020 2020  : "Buy",.       
-0004fb30: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004fb40: 2020 2020 2020 2022 706f 7369 7469 6f6e         "position
-0004fb50: 5661 6c75 6522 3a20 2235 3336 2e39 3235  Value": "536.925
-0004fb60: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
-0004fb70: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004fb80: 2020 2020 2020 2274 616b 6550 726f 6669        "takeProfi
-0004fb90: 7422 3a20 2222 2c0a 2020 2020 2020 2020  t": "",.        
-0004fba0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004fbb0: 2020 2020 2020 2274 7073 6c4d 6f64 6522        "tpslMode"
-0004fbc0: 3a20 2246 756c 6c22 2c0a 2020 2020 2020  : "Full",.      
-0004fbd0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0004fbe0: 2020 2020 2020 2020 2272 6973 6b49 6422          "riskId"
-0004fbf0: 3a20 3131 2c0a 2020 2020 2020 2020 2320  : 11,.        # 
+0004f820: 2020 2273 796d 626f 6c22 3a20 2258 5250    "symbol": "XRP
+0004f830: 5553 4454 222c 0a20 2020 2020 2020 2023  USDT",.        #
+0004f840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004f850: 2020 2020 2022 6c65 7665 7261 6765 223a       "leverage":
+0004f860: 2022 3130 222c 0a20 2020 2020 2020 2023   "10",.        #
+0004f870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004f880: 2020 2020 2022 6176 6750 7269 6365 223a       "avgPrice":
+0004f890: 2022 302e 3336 3135 222c 0a20 2020 2020   "0.3615",.     
+0004f8a0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004f8b0: 2020 2020 2020 2020 2022 6c69 7150 7269           "liqPri
+0004f8c0: 6365 223a 2022 302e 3030 3031 222c 0a20  ce": "0.0001",. 
+0004f8d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004f8e0: 2020 2020 2020 2020 2020 2020 2022 7269               "ri
+0004f8f0: 736b 4c69 6d69 7456 616c 7565 223a 2022  skLimitValue": "
+0004f900: 3230 3030 3030 222c 0a20 2020 2020 2020  200000",.       
+0004f910: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0004f920: 2020 2020 2020 2022 7461 6b65 5072 6f66         "takeProf
+0004f930: 6974 223a 2022 222c 0a20 2020 2020 2020  it": "",.       
+0004f940: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0004f950: 2020 2020 2020 2022 706f 7369 7469 6f6e         "position
+0004f960: 5661 6c75 6522 3a20 2233 362e 3135 222c  Value": "36.15",
+0004f970: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004f980: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0004f990: 7470 736c 4d6f 6465 223a 2022 4675 6c6c  tpslMode": "Full
+0004f9a0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004f9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004f9c0: 2022 7269 736b 4964 223a 2034 312c 0a20   "riskId": 41,. 
+0004f9d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004f9e0: 2020 2020 2020 2020 2020 2020 2022 7472               "tr
+0004f9f0: 6169 6c69 6e67 5374 6f70 223a 2022 3022  ailingStop": "0"
+0004fa00: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004fa10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004fa20: 2275 6e72 6561 6c69 7365 6450 6e6c 223a  "unrealisedPnl":
+0004fa30: 2022 2d31 2e38 3322 2c0a 2020 2020 2020   "-1.83",.      
+0004fa40: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0004fa50: 2020 2020 2020 2020 226d 6172 6b50 7269          "markPri
+0004fa60: 6365 223a 2022 302e 3334 3332 222c 0a20  ce": "0.3432",. 
+0004fa70: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004fa80: 2020 2020 2020 2020 2020 2020 2022 6375               "cu
+0004fa90: 6d52 6561 6c69 7365 6450 6e6c 223a 2022  mRealisedPnl": "
+0004faa0: 302e 3438 3830 3538 3736 222c 0a20 2020  0.48805876",.   
+0004fab0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004fac0: 2020 2020 2020 2020 2020 2022 706f 7369             "posi
+0004fad0: 7469 6f6e 4d4d 223a 2022 302e 3338 3130  tionMM": "0.3810
+0004fae0: 3231 222c 0a20 2020 2020 2020 2023 2020  21",.        #  
+0004faf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004fb00: 2020 2022 6372 6561 7465 6454 696d 6522     "createdTime"
+0004fb10: 3a20 2231 3637 3231 3231 3138 3232 3136  : "1672121182216
+0004fb20: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004fb30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004fb40: 2022 706f 7369 7469 6f6e 4964 7822 3a20   "positionIdx": 
+0004fb50: 302c 0a20 2020 2020 2020 2023 2020 2020  0,.        #    
+0004fb60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004fb70: 2022 706f 7369 7469 6f6e 494d 223a 2022   "positionIM": "
+0004fb80: 332e 3633 3435 3231 222c 0a20 2020 2020  3.634521",.     
+0004fb90: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004fba0: 2020 2020 2020 2020 2022 7570 6461 7465           "update
+0004fbb0: 6454 696d 6522 3a20 2231 3637 3232 3739  dTime": "1672279
+0004fbc0: 3332 3236 3638 222c 0a20 2020 2020 2020  322668",.       
+0004fbd0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0004fbe0: 2020 2020 2020 2022 7369 6465 223a 2022         "side": "
+0004fbf0: 4275 7922 2c0a 2020 2020 2020 2020 2320  Buy",.        # 
 0004fc00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004fc10: 2020 2020 2274 7261 696c 696e 6753 746f      "trailingSto
-0004fc20: 7022 3a20 2222 2c0a 2020 2020 2020 2020  p": "",.        
-0004fc30: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004fc40: 2020 2020 2020 2265 6e74 7279 5072 6963        "entryPric
-0004fc50: 6522 3a20 2231 3037 332e 3835 3030 3030  e": "1073.850000
-0004fc60: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
-0004fc70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004fc80: 2020 2022 756e 7265 616c 6973 6564 506e     "unrealisedPn
-0004fc90: 6c22 3a20 2222 2c0a 2020 2020 2020 2020  l": "",.        
-0004fca0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004fcb0: 2020 2020 2020 226d 6172 6b50 7269 6365        "markPrice
-0004fcc0: 223a 2022 3130 3830 2e36 3530 3030 3030  ": "1080.6500000
-0004fcd0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-0004fce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004fcf0: 2020 2273 697a 6522 3a20 2230 2e35 3030    "size": "0.500
-0004fd00: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-0004fd10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004fd20: 2020 2270 6f73 6974 696f 6e53 7461 7475    "positionStatu
-0004fd30: 7322 3a20 226e 6f72 6d61 6c22 2c0a 2020  s": "normal",.  
-0004fd40: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004fd50: 2020 2020 2020 2020 2020 2020 2273 746f              "sto
-0004fd60: 704c 6f73 7322 3a20 2222 2c0a 2020 2020  pLoss": "",.    
-0004fd70: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004fd80: 2020 2020 2020 2020 2020 2263 756d 5265            "cumRe
-0004fd90: 616c 6973 6564 506e 6c22 3a20 222d 302e  alisedPnl": "-0.
-0004fda0: 3332 3231 3535 3030 222c 0a20 2020 2020  32215500",.     
-0004fdb0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0004fdc0: 2020 2020 2020 2020 2022 706f 7369 7469           "positi
-0004fdd0: 6f6e 4d4d 223a 2022 322e 3937 3435 3634  onMM": "2.974564
-0004fde0: 3530 222c 0a20 2020 2020 2020 2023 2020  50",.        #  
-0004fdf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004fe00: 2020 2022 6372 6561 7465 6454 696d 6522     "createdTime"
-0004fe10: 3a20 3136 3537 3731 3139 3439 3932 382c  : 1657711949928,
-0004fe20: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004fe30: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0004fe40: 706f 7369 7469 6f6e 4964 7822 3a20 302c  positionIdx": 0,
-0004fe50: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004fe60: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0004fe70: 706f 7369 7469 6f6e 494d 223a 2022 3533  positionIM": "53
-0004fe80: 2e39 3832 3433 3935 3022 0a20 2020 2020  .98243950".     
-0004fe90: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0004fea0: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
-0004feb0: 2020 2020 2020 2020 2020 2020 205d 0a20               ]. 
-0004fec0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004fed0: 207d 2c0a 2020 2020 2020 2020 2320 2020   },.        #   
-0004fee0: 2020 2020 2020 2274 696d 6522 3a20 3136        "time": 16
-0004fef0: 3537 3731 3336 3933 3138 320a 2020 2020  57713693182.    
-0004ff00: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
-0004ff10: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-0004ff20: 636f 6e74 7261 6374 2076 330a 2020 2020  contract v3.    
-0004ff30: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-0004ff40: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-0004ff50: 2020 2020 2020 2020 2272 6574 436f 6465          "retCode
-0004ff60: 223a 2030 2c0a 2020 2020 2020 2020 2320  ": 0,.        # 
-0004ff70: 2020 2020 2020 2020 2272 6574 4d73 6722          "retMsg"
-0004ff80: 3a20 224f 4b22 2c0a 2020 2020 2020 2020  : "OK",.        
-0004ff90: 2320 2020 2020 2020 2020 2272 6573 756c  #         "resul
-0004ffa0: 7422 3a20 7b0a 2020 2020 2020 2020 2320  t": {.        # 
-0004ffb0: 2020 2020 2020 2020 2020 2020 226c 6973              "lis
-0004ffc0: 7422 3a20 5b0a 2020 2020 2020 2020 2320  t": [.        # 
-0004ffd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004ffe0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-0004fff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00050000: 2270 6f73 6974 696f 6e49 6478 223a 2031  "positionIdx": 1
-00050010: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00050020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00050030: 2272 6973 6b49 6422 3a20 2234 3122 2c0a  "riskId": "41",.
-00050040: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00050050: 2020 2020 2020 2020 2020 2020 2020 2273                "s
-00050060: 796d 626f 6c22 3a20 2258 5250 5553 4454  ymbol": "XRPUSDT
-00050070: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00050080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00050090: 2022 7369 6465 223a 2022 4275 7922 2c0a   "side": "Buy",.
-000500a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000500b0: 2020 2020 2020 2020 2020 2020 2020 2273                "s
-000500c0: 697a 6522 3a20 2230 222c 0a20 2020 2020  ize": "0",.     
-000500d0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-000500e0: 2020 2020 2020 2020 2022 706f 7369 7469           "positi
-000500f0: 6f6e 5661 6c75 6522 3a20 2230 222c 0a20  onValue": "0",. 
-00050100: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00050110: 2020 2020 2020 2020 2020 2020 2022 656e               "en
-00050120: 7472 7950 7269 6365 223a 2022 3022 2c0a  tryPrice": "0",.
-00050130: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00050140: 2020 2020 2020 2020 2020 2020 2020 2274                "t
-00050150: 7261 6465 4d6f 6465 223a 2030 2c0a 2020  radeMode": 0,.  
+0004fc10: 2020 2020 2262 7573 7450 7269 6365 223a      "bustPrice":
+0004fc20: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
+0004fc30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004fc40: 2020 2022 7369 7a65 223a 2022 3130 3022     "size": "100"
+0004fc50: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004fc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004fc70: 2270 6f73 6974 696f 6e53 7461 7475 7322  "positionStatus"
+0004fc80: 3a20 224e 6f72 6d61 6c22 2c0a 2020 2020  : "Normal",.    
+0004fc90: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004fca0: 2020 2020 2020 2020 2020 2273 746f 704c            "stopL
+0004fcb0: 6f73 7322 3a20 2222 2c0a 2020 2020 2020  oss": "",.      
+0004fcc0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0004fcd0: 2020 2020 2020 2020 2274 7261 6465 4d6f          "tradeMo
+0004fce0: 6465 223a 2030 0a20 2020 2020 2020 2023  de": 0.        #
+0004fcf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004fd00: 207d 0a20 2020 2020 2020 2023 2020 2020   }.        #    
+0004fd10: 2020 2020 2020 2020 205d 0a20 2020 2020           ].     
+0004fd20: 2020 2023 2020 2020 2020 2020 207d 2c0a     #         },.
+0004fd30: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004fd40: 2020 2272 6574 4578 7449 6e66 6f22 3a20    "retExtInfo": 
+0004fd50: 7b7d 2c0a 2020 2020 2020 2020 2320 2020  {},.        #   
+0004fd60: 2020 2020 2020 2274 696d 6522 3a20 3136        "time": 16
+0004fd70: 3732 3238 3032 3139 3136 390a 2020 2020  72280219169.    
+0004fd80: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+0004fd90: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+0004fda0: 756e 6966 6965 6420 6d61 7267 696e 0a20  unified margin. 
+0004fdb0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+0004fdc0: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
+0004fdd0: 2023 2020 2020 2020 2020 2022 7265 7443   #         "retC
+0004fde0: 6f64 6522 3a20 302c 0a20 2020 2020 2020  ode": 0,.       
+0004fdf0: 2023 2020 2020 2020 2020 2022 7265 744d   #         "retM
+0004fe00: 7367 223a 2022 5375 6363 6573 7322 2c0a  sg": "Success",.
+0004fe10: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004fe20: 2020 2272 6573 756c 7422 3a20 7b0a 2020    "result": {.  
+0004fe30: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0004fe40: 2020 2020 226e 6578 7450 6167 6543 7572      "nextPageCur
+0004fe50: 736f 7222 3a20 2230 2533 4131 3635 3737  sor": "0%3A16577
+0004fe60: 3131 3934 3939 3435 2532 4330 2533 4131  11949945%2C0%3A1
+0004fe70: 3635 3737 3131 3934 3939 3435 222c 0a20  657711949945",. 
+0004fe80: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004fe90: 2020 2020 2022 6361 7465 676f 7279 223a       "category":
+0004fea0: 2022 6c69 6e65 6172 222c 0a20 2020 2020   "linear",.     
+0004feb0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004fec0: 2022 6c69 7374 223a 205b 0a20 2020 2020   "list": [.     
+0004fed0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004fee0: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+0004fef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004ff00: 2020 2020 2022 7379 6d62 6f6c 223a 2022       "symbol": "
+0004ff10: 4554 4855 5344 5422 2c0a 2020 2020 2020  ETHUSDT",.      
+0004ff20: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0004ff30: 2020 2020 2020 2020 226c 6576 6572 6167          "leverag
+0004ff40: 6522 3a20 2231 3022 2c0a 2020 2020 2020  e": "10",.      
+0004ff50: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0004ff60: 2020 2020 2020 2020 2275 7064 6174 6564          "updated
+0004ff70: 5469 6d65 223a 2031 3635 3737 3131 3934  Time": 165771194
+0004ff80: 3939 3435 2c0a 2020 2020 2020 2020 2320  9945,.        # 
+0004ff90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004ffa0: 2020 2020 2273 6964 6522 3a20 2242 7579      "side": "Buy
+0004ffb0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004ffc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004ffd0: 2022 706f 7369 7469 6f6e 5661 6c75 6522   "positionValue"
+0004ffe0: 3a20 2235 3336 2e39 3235 3030 3030 3022  : "536.92500000"
+0004fff0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00050000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00050010: 2274 616b 6550 726f 6669 7422 3a20 2222  "takeProfit": ""
+00050020: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00050030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00050040: 2274 7073 6c4d 6f64 6522 3a20 2246 756c  "tpslMode": "Ful
+00050050: 6c22 2c0a 2020 2020 2020 2020 2320 2020  l",.        #   
+00050060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00050070: 2020 2272 6973 6b49 6422 3a20 3131 2c0a    "riskId": 11,.
+00050080: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00050090: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+000500a0: 7261 696c 696e 6753 746f 7022 3a20 2222  railingStop": ""
+000500b0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000500c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000500d0: 2265 6e74 7279 5072 6963 6522 3a20 2231  "entryPrice": "1
+000500e0: 3037 332e 3835 3030 3030 3030 222c 0a20  073.85000000",. 
+000500f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00050100: 2020 2020 2020 2020 2020 2020 2022 756e               "un
+00050110: 7265 616c 6973 6564 506e 6c22 3a20 2222  realisedPnl": ""
+00050120: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00050130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00050140: 226d 6172 6b50 7269 6365 223a 2022 3130  "markPrice": "10
+00050150: 3830 2e36 3530 3030 3030 3022 2c0a 2020  80.65000000",.  
 00050160: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00050170: 2020 2020 2020 2020 2020 2020 2261 7574              "aut
-00050180: 6f41 6464 4d61 7267 696e 223a 2030 2c0a  oAddMargin": 0,.
-00050190: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000501a0: 2020 2020 2020 2020 2020 2020 2020 226c                "l
-000501b0: 6576 6572 6167 6522 3a20 2231 3022 2c0a  everage": "10",.
-000501c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000501d0: 2020 2020 2020 2020 2020 2020 2020 2270                "p
-000501e0: 6f73 6974 696f 6e42 616c 616e 6365 223a  ositionBalance":
-000501f0: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
+00050170: 2020 2020 2020 2020 2020 2020 2273 697a              "siz
+00050180: 6522 3a20 2230 2e35 3030 3022 2c0a 2020  e": "0.5000",.  
+00050190: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000501a0: 2020 2020 2020 2020 2020 2020 2270 6f73              "pos
+000501b0: 6974 696f 6e53 7461 7475 7322 3a20 226e  itionStatus": "n
+000501c0: 6f72 6d61 6c22 2c0a 2020 2020 2020 2020  ormal",.        
+000501d0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000501e0: 2020 2020 2020 2273 746f 704c 6f73 7322        "stopLoss"
+000501f0: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
 00050200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00050210: 2020 2020 226c 6971 5072 6963 6522 3a20      "liqPrice": 
-00050220: 2230 2e30 3030 3022 2c0a 2020 2020 2020  "0.0000",.      
-00050230: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00050240: 2020 2020 2020 2020 2262 7573 7450 7269          "bustPri
-00050250: 6365 223a 2022 302e 3030 3030 222c 0a20  ce": "0.0000",. 
-00050260: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00050270: 2020 2020 2020 2020 2020 2020 2022 7461               "ta
-00050280: 6b65 5072 6f66 6974 223a 2022 302e 3030  keProfit": "0.00
-00050290: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
-000502a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000502b0: 2020 2022 7374 6f70 4c6f 7373 223a 2022     "stopLoss": "
-000502c0: 302e 3030 3030 222c 0a20 2020 2020 2020  0.0000",.       
-000502d0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-000502e0: 2020 2020 2020 2022 7472 6169 6c69 6e67         "trailing
-000502f0: 5374 6f70 223a 2022 302e 3030 3030 222c  Stop": "0.0000",
-00050300: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00050310: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00050320: 756e 7265 616c 6973 6564 506e 6c22 3a20  unrealisedPnl": 
-00050330: 2230 222c 0a20 2020 2020 2020 2023 2020  "0",.        #  
-00050340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00050350: 2020 2022 6372 6561 7465 6454 696d 6522     "createdTime"
-00050360: 3a20 2231 3635 3838 3237 3434 3433 3238  : "1658827444328
-00050370: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00050380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00050390: 2022 7570 6461 7465 6454 696d 6522 3a20   "updatedTime": 
-000503a0: 2231 3635 3839 3034 3836 3334 3132 222c  "1658904863412",
-000503b0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000503c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000503d0: 7470 536c 4d6f 6465 223a 2022 4675 6c6c  tpSlMode": "Full
-000503e0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-000503f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00050400: 2022 7269 736b 4c69 6d69 7456 616c 7565   "riskLimitValue
-00050410: 223a 2022 3230 3030 3030 222c 0a20 2020  ": "200000",.   
-00050420: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00050430: 2020 2020 2020 2020 2020 2022 6163 7469             "acti
-00050440: 7665 5072 6963 6522 3a20 2230 2e30 3030  vePrice": "0.000
-00050450: 3022 0a20 2020 2020 2020 2023 2020 2020  0".        #    
-00050460: 2020 2020 2020 2020 2020 2020 207d 2c0a               },.
-00050470: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00050480: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
-00050490: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000504a0: 2020 2020 2020 2020 2020 2270 6f73 6974            "posit
-000504b0: 696f 6e49 6478 223a 2032 2c0a 2020 2020  ionIdx": 2,.    
-000504c0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000504d0: 2020 2020 2020 2020 2020 2272 6973 6b49            "riskI
-000504e0: 6422 3a20 2234 3122 2c0a 2020 2020 2020  d": "41",.      
-000504f0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00050500: 2020 2020 2020 2020 2273 796d 626f 6c22          "symbol"
-00050510: 3a20 2258 5250 5553 4454 222c 0a20 2020  : "XRPUSDT",.   
-00050520: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00050530: 2020 2020 2020 2020 2020 2022 7369 6465             "side
-00050540: 223a 2022 5365 6c6c 222c 0a20 2020 2020  ": "Sell",.     
-00050550: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00050560: 2020 2020 2020 2020 2022 7369 7a65 223a           "size":
-00050570: 2022 3530 222c 0a20 2020 2020 2020 2023   "50",.        #
-00050580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00050590: 2020 2020 2022 706f 7369 7469 6f6e 5661       "positionVa
-000505a0: 6c75 6522 3a20 2231 362e 3638 222c 0a20  lue": "16.68",. 
-000505b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000505c0: 2020 2020 2020 2020 2020 2020 2022 656e               "en
-000505d0: 7472 7950 7269 6365 223a 2022 302e 3333  tryPrice": "0.33
-000505e0: 3336 222c 0a20 2020 2020 2020 2023 2020  36",.        #  
-000505f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00050600: 2020 2022 7472 6164 654d 6f64 6522 3a20     "tradeMode": 
-00050610: 302c 0a20 2020 2020 2020 2023 2020 2020  0,.        #    
-00050620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00050630: 2022 6175 746f 4164 644d 6172 6769 6e22   "autoAddMargin"
-00050640: 3a20 302c 0a20 2020 2020 2020 2023 2020  : 0,.        #  
-00050650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00050660: 2020 2022 6c65 7665 7261 6765 223a 2022     "leverage": "
-00050670: 3130 222c 0a20 2020 2020 2020 2023 2020  10",.        #  
-00050680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00050690: 2020 2022 706f 7369 7469 6f6e 4261 6c61     "positionBala
-000506a0: 6e63 6522 3a20 2231 2e36 3739 3030 3838  nce": "1.6790088
-000506b0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00050210: 2020 2020 2263 756d 5265 616c 6973 6564      "cumRealised
+00050220: 506e 6c22 3a20 222d 302e 3332 3231 3535  Pnl": "-0.322155
+00050230: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+00050240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00050250: 2020 2022 706f 7369 7469 6f6e 4d4d 223a     "positionMM":
+00050260: 2022 322e 3937 3435 3634 3530 222c 0a20   "2.97456450",. 
+00050270: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00050280: 2020 2020 2020 2020 2020 2020 2022 6372               "cr
+00050290: 6561 7465 6454 696d 6522 3a20 3136 3537  eatedTime": 1657
+000502a0: 3731 3139 3439 3932 382c 0a20 2020 2020  711949928,.     
+000502b0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+000502c0: 2020 2020 2020 2020 2022 706f 7369 7469           "positi
+000502d0: 6f6e 4964 7822 3a20 302c 0a20 2020 2020  onIdx": 0,.     
+000502e0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+000502f0: 2020 2020 2020 2020 2022 706f 7369 7469           "positi
+00050300: 6f6e 494d 223a 2022 3533 2e39 3832 3433  onIM": "53.98243
+00050310: 3935 3022 0a20 2020 2020 2020 2023 2020  950".        #  
+00050320: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+00050330: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00050340: 2020 2020 2020 205d 0a20 2020 2020 2020         ].       
+00050350: 2023 2020 2020 2020 2020 207d 2c0a 2020   #         },.  
+00050360: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00050370: 2274 696d 6522 3a20 3136 3537 3731 3336  "time": 16577136
+00050380: 3933 3138 320a 2020 2020 2020 2020 2320  93182.        # 
+00050390: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
+000503a0: 2020 2020 2020 2020 2320 636f 6e74 7261          # contra
+000503b0: 6374 2076 330a 2020 2020 2020 2020 230a  ct v3.        #.
+000503c0: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+000503d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000503e0: 2020 2272 6574 436f 6465 223a 2030 2c0a    "retCode": 0,.
+000503f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00050400: 2020 2272 6574 4d73 6722 3a20 224f 4b22    "retMsg": "OK"
+00050410: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00050420: 2020 2020 2272 6573 756c 7422 3a20 7b0a      "result": {.
+00050430: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00050440: 2020 2020 2020 226c 6973 7422 3a20 5b0a        "list": [.
+00050450: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00050460: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
+00050470: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00050480: 2020 2020 2020 2020 2020 2270 6f73 6974            "posit
+00050490: 696f 6e49 6478 223a 2031 2c0a 2020 2020  ionIdx": 1,.    
+000504a0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+000504b0: 2020 2020 2020 2020 2020 2272 6973 6b49            "riskI
+000504c0: 6422 3a20 2234 3122 2c0a 2020 2020 2020  d": "41",.      
+000504d0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+000504e0: 2020 2020 2020 2020 2273 796d 626f 6c22          "symbol"
+000504f0: 3a20 2258 5250 5553 4454 222c 0a20 2020  : "XRPUSDT",.   
+00050500: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00050510: 2020 2020 2020 2020 2020 2022 7369 6465             "side
+00050520: 223a 2022 4275 7922 2c0a 2020 2020 2020  ": "Buy",.      
+00050530: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00050540: 2020 2020 2020 2020 2273 697a 6522 3a20          "size": 
+00050550: 2230 222c 0a20 2020 2020 2020 2023 2020  "0",.        #  
+00050560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00050570: 2020 2022 706f 7369 7469 6f6e 5661 6c75     "positionValu
+00050580: 6522 3a20 2230 222c 0a20 2020 2020 2020  e": "0",.       
+00050590: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+000505a0: 2020 2020 2020 2022 656e 7472 7950 7269         "entryPri
+000505b0: 6365 223a 2022 3022 2c0a 2020 2020 2020  ce": "0",.      
+000505c0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+000505d0: 2020 2020 2020 2020 2274 7261 6465 4d6f          "tradeMo
+000505e0: 6465 223a 2030 2c0a 2020 2020 2020 2020  de": 0,.        
+000505f0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00050600: 2020 2020 2020 2261 7574 6f41 6464 4d61        "autoAddMa
+00050610: 7267 696e 223a 2030 2c0a 2020 2020 2020  rgin": 0,.      
+00050620: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00050630: 2020 2020 2020 2020 226c 6576 6572 6167          "leverag
+00050640: 6522 3a20 2231 3022 2c0a 2020 2020 2020  e": "10",.      
+00050650: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00050660: 2020 2020 2020 2020 2270 6f73 6974 696f          "positio
+00050670: 6e42 616c 616e 6365 223a 2022 3022 2c0a  nBalance": "0",.
+00050680: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00050690: 2020 2020 2020 2020 2020 2020 2020 226c                "l
+000506a0: 6971 5072 6963 6522 3a20 2230 2e30 3030  iqPrice": "0.000
+000506b0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
 000506c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000506d0: 2022 6c69 7150 7269 6365 223a 2022 3132   "liqPrice": "12
-000506e0: 2e34 3833 3522 2c0a 2020 2020 2020 2020  .4835",.        
-000506f0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00050700: 2020 2020 2020 2262 7573 7450 7269 6365        "bustPrice
-00050710: 223a 2022 3132 2e34 3836 3922 2c0a 2020  ": "12.4869",.  
-00050720: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00050730: 2020 2020 2020 2020 2020 2020 2274 616b              "tak
-00050740: 6550 726f 6669 7422 3a20 2230 2e30 3030  eProfit": "0.000
-00050750: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+000506d0: 2020 2262 7573 7450 7269 6365 223a 2022    "bustPrice": "
+000506e0: 302e 3030 3030 222c 0a20 2020 2020 2020  0.0000",.       
+000506f0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00050700: 2020 2020 2020 2022 7461 6b65 5072 6f66         "takeProf
+00050710: 6974 223a 2022 302e 3030 3030 222c 0a20  it": "0.0000",. 
+00050720: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00050730: 2020 2020 2020 2020 2020 2020 2022 7374               "st
+00050740: 6f70 4c6f 7373 223a 2022 302e 3030 3030  opLoss": "0.0000
+00050750: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
 00050760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00050770: 2020 2273 746f 704c 6f73 7322 3a20 2230    "stopLoss": "0
-00050780: 2e30 3030 3022 2c0a 2020 2020 2020 2020  .0000",.        
-00050790: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-000507a0: 2020 2020 2020 2274 7261 696c 696e 6753        "trailingS
-000507b0: 746f 7022 3a20 2230 2e30 3030 3022 2c0a  top": "0.0000",.
-000507c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000507d0: 2020 2020 2020 2020 2020 2020 2020 2275                "u
-000507e0: 6e72 6561 6c69 7365 6450 6e6c 223a 2022  nrealisedPnl": "
-000507f0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-00050800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00050810: 2020 2263 7265 6174 6564 5469 6d65 223a    "createdTime":
-00050820: 2022 3136 3538 3832 3734 3434 3332 3822   "1658827444328"
-00050830: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00050840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00050850: 2275 7064 6174 6564 5469 6d65 223a 2022  "updatedTime": "
-00050860: 3136 3538 3930 3438 3633 3431 3222 2c0a  1658904863412",.
-00050870: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00050880: 2020 2020 2020 2020 2020 2020 2020 2274                "t
-00050890: 7053 6c4d 6f64 6522 3a20 2246 756c 6c22  pSlMode": "Full"
-000508a0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00050770: 2022 7472 6169 6c69 6e67 5374 6f70 223a   "trailingStop":
+00050780: 2022 302e 3030 3030 222c 0a20 2020 2020   "0.0000",.     
+00050790: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+000507a0: 2020 2020 2020 2020 2022 756e 7265 616c           "unreal
+000507b0: 6973 6564 506e 6c22 3a20 2230 222c 0a20  isedPnl": "0",. 
+000507c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000507d0: 2020 2020 2020 2020 2020 2020 2022 6372               "cr
+000507e0: 6561 7465 6454 696d 6522 3a20 2231 3635  eatedTime": "165
+000507f0: 3838 3237 3434 3433 3238 222c 0a20 2020  8827444328",.   
+00050800: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00050810: 2020 2020 2020 2020 2020 2022 7570 6461             "upda
+00050820: 7465 6454 696d 6522 3a20 2231 3635 3839  tedTime": "16589
+00050830: 3034 3836 3334 3132 222c 0a20 2020 2020  04863412",.     
+00050840: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00050850: 2020 2020 2020 2020 2022 7470 536c 4d6f           "tpSlMo
+00050860: 6465 223a 2022 4675 6c6c 222c 0a20 2020  de": "Full",.   
+00050870: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00050880: 2020 2020 2020 2020 2020 2022 7269 736b             "risk
+00050890: 4c69 6d69 7456 616c 7565 223a 2022 3230  LimitValue": "20
+000508a0: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
 000508b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000508c0: 2272 6973 6b4c 696d 6974 5661 6c75 6522  "riskLimitValue"
-000508d0: 3a20 2232 3030 3030 3022 2c0a 2020 2020  : "200000",.    
-000508e0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000508f0: 2020 2020 2020 2020 2020 2261 6374 6976            "activ
-00050900: 6550 7269 6365 223a 2022 302e 3030 3030  ePrice": "0.0000
-00050910: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
-00050920: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
-00050930: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00050940: 2020 2020 5d0a 2020 2020 2020 2020 2320      ].        # 
-00050950: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
-00050960: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-00050970: 7445 7874 496e 666f 223a 206e 756c 6c2c  tExtInfo": null,
-00050980: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00050990: 2020 2022 7469 6d65 223a 2031 3635 3839     "time": 16589
-000509a0: 3034 3837 3739 3432 0a20 2020 2020 2020  04877942.       
-000509b0: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
-000509c0: 2023 0a20 2020 2020 2020 2072 6573 756c   #.        resul
-000509d0: 7420 3d20 7365 6c66 2e73 6166 655f 7661  t = self.safe_va
-000509e0: 6c75 6528 7265 7370 6f6e 7365 2c20 2772  lue(response, 'r
-000509f0: 6573 756c 7427 2c20 7b7d 290a 2020 2020  esult', {}).    
-00050a00: 2020 2020 706f 7369 7469 6f6e 7320 3d20      positions = 
-00050a10: 7365 6c66 2e73 6166 655f 7661 6c75 655f  self.safe_value_
-00050a20: 3228 7265 7375 6c74 2c20 276c 6973 7427  2(result, 'list'
-00050a30: 2c20 2764 6174 614c 6973 7427 2c20 5b5d  , 'dataList', []
-00050a40: 290a 2020 2020 2020 2020 7469 6d65 7374  ).        timest
-00050a50: 616d 7020 3d20 7365 6c66 2e73 6166 655f  amp = self.safe_
-00050a60: 696e 7465 6765 7228 7265 7370 6f6e 7365  integer(response
-00050a70: 2c20 2774 696d 6527 290a 2020 2020 2020  , 'time').      
-00050a80: 2020 6669 7273 7420 3d20 7365 6c66 2e73    first = self.s
-00050a90: 6166 655f 7661 6c75 6528 706f 7369 7469  afe_value(positi
-00050aa0: 6f6e 732c 2030 290a 2020 2020 2020 2020  ons, 0).        
-00050ab0: 706f 7369 7469 6f6e 203d 2073 656c 662e  position = self.
-00050ac0: 7061 7273 655f 706f 7369 7469 6f6e 2866  parse_position(f
-00050ad0: 6972 7374 2c20 6d61 726b 6574 290a 2020  irst, market).  
-00050ae0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00050af0: 662e 6578 7465 6e64 2870 6f73 6974 696f  f.extend(positio
-00050b00: 6e2c 207b 0a20 2020 2020 2020 2020 2020  n, {.           
-00050b10: 2027 7469 6d65 7374 616d 7027 3a20 7469   'timestamp': ti
-00050b20: 6d65 7374 616d 702c 0a20 2020 2020 2020  mestamp,.       
-00050b30: 2020 2020 2027 6461 7465 7469 6d65 273a       'datetime':
-00050b40: 2073 656c 662e 6973 6f38 3630 3128 7469   self.iso8601(ti
-00050b50: 6d65 7374 616d 7029 2c0a 2020 2020 2020  mestamp),.      
-00050b60: 2020 7d29 0a0a 2020 2020 6173 796e 6320    })..    async 
-00050b70: 6465 6620 6665 7463 685f 756e 6966 6965  def fetch_unifie
-00050b80: 645f 706f 7369 7469 6f6e 7328 7365 6c66  d_positions(self
-00050b90: 2c20 7379 6d62 6f6c 733a 204f 7074 696f  , symbols: Optio
-00050ba0: 6e61 6c5b 4c69 7374 5b73 7472 5d5d 203d  nal[List[str]] =
-00050bb0: 204e 6f6e 652c 2070 6172 616d 733d 7b7d   None, params={}
-00050bc0: 293a 0a20 2020 2020 2020 2061 7761 6974  ):.        await
-00050bd0: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
-00050be0: 7473 2829 0a20 2020 2020 2020 2072 6571  ts().        req
-00050bf0: 7565 7374 203d 207b 7d0a 2020 2020 2020  uest = {}.      
-00050c00: 2020 7479 7065 203d 204e 6f6e 650a 2020    type = None.  
-00050c10: 2020 2020 2020 7365 7474 6c65 203d 204e        settle = N
-00050c20: 6f6e 650a 2020 2020 2020 2020 656e 6162  one.        enab
-00050c30: 6c65 556e 6966 6965 6420 3d20 6177 6169  leUnified = awai
-00050c40: 7420 7365 6c66 2e69 735f 756e 6966 6965  t self.is_unifie
-00050c50: 645f 656e 6162 6c65 6428 290a 2020 2020  d_enabled().    
-00050c60: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-00050c70: 6528 7379 6d62 6f6c 732c 206c 6973 7429  e(symbols, list)
-00050c80: 3a0a 2020 2020 2020 2020 2020 2020 7379  :.            sy
-00050c90: 6d62 6f6c 734c 656e 6774 6820 3d20 6c65  mbolsLength = le
-00050ca0: 6e28 7379 6d62 6f6c 7329 0a20 2020 2020  n(symbols).     
-00050cb0: 2020 2020 2020 2069 6620 7379 6d62 6f6c         if symbol
-00050cc0: 734c 656e 6774 6820 3e20 313a 0a20 2020  sLength > 1:.   
-00050cd0: 2020 2020 2020 2020 2020 2020 2072 6169               rai
-00050ce0: 7365 2041 7267 756d 656e 7473 5265 7175  se ArgumentsRequ
-00050cf0: 6972 6564 2873 656c 662e 6964 202b 2027  ired(self.id + '
-00050d00: 2066 6574 6368 506f 7369 7469 6f6e 7328   fetchPositions(
-00050d10: 2920 646f 6573 206e 6f74 2061 6363 6570  ) does not accep
-00050d20: 7420 616e 2061 7272 6179 2077 6974 6820  t an array with 
-00050d30: 6d6f 7265 2074 6861 6e20 6f6e 6520 7379  more than one sy
-00050d40: 6d62 6f6c 2729 0a20 2020 2020 2020 2020  mbol').         
-00050d50: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
-00050d60: 2e6d 6172 6b65 7428 7379 6d62 6f6c 735b  .market(symbols[
-00050d70: 305d 290a 2020 2020 2020 2020 2020 2020  0]).            
-00050d80: 7365 7474 6c65 203d 206d 6172 6b65 745b  settle = market[
-00050d90: 2773 6574 746c 6527 5d0a 2020 2020 2020  'settle'].      
-00050da0: 2020 656c 6966 2073 796d 626f 6c73 2069    elif symbols i
-00050db0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00050dc0: 2020 2020 2020 2020 7379 6d62 6f6c 7320          symbols 
-00050dd0: 3d20 5b73 796d 626f 6c73 5d0a 2020 2020  = [symbols].    
-00050de0: 2020 2020 7379 6d62 6f6c 7320 3d20 7365      symbols = se
-00050df0: 6c66 2e6d 6172 6b65 745f 7379 6d62 6f6c  lf.market_symbol
-00050e00: 7328 7379 6d62 6f6c 7329 0a20 2020 2020  s(symbols).     
-00050e10: 2020 2069 6620 7379 6d62 6f6c 7320 6973     if symbols is
-00050e20: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00050e30: 2020 2073 6574 746c 652c 2070 6172 616d     settle, param
-00050e40: 7320 3d20 7365 6c66 2e68 616e 646c 655f  s = self.handle_
-00050e50: 6f70 7469 6f6e 5f61 6e64 5f70 6172 616d  option_and_param
-00050e60: 7328 7061 7261 6d73 2c20 2766 6574 6368  s(params, 'fetch
-00050e70: 506f 7369 7469 6f6e 7327 2c20 2773 6574  Positions', 'set
-00050e80: 746c 6527 2c20 2755 5344 5427 290a 2020  tle', 'USDT').  
-00050e90: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00050ea0: 2020 2020 2020 2020 6669 7273 7420 3d20          first = 
-00050eb0: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
-00050ec0: 7379 6d62 6f6c 732c 2030 290a 2020 2020  symbols, 0).    
-00050ed0: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
-00050ee0: 2073 656c 662e 6d61 726b 6574 2866 6972   self.market(fir
-00050ef0: 7374 290a 2020 2020 2020 2020 2020 2020  st).            
-00050f00: 7365 7474 6c65 203d 206d 6172 6b65 745b  settle = market[
-00050f10: 2773 6574 746c 6527 5d0a 2020 2020 2020  'settle'].      
-00050f20: 2020 2020 2020 7265 7175 6573 745b 2773        request['s
-00050f30: 796d 626f 6c27 5d20 3d20 6d61 726b 6574  ymbol'] = market
-00050f40: 5b27 6964 275d 0a20 2020 2020 2020 2069  ['id'].        i
-00050f50: 6620 656e 6162 6c65 556e 6966 6965 645b  f enableUnified[
-00050f60: 315d 3a0a 2020 2020 2020 2020 2020 2020  1]:.            
-00050f70: 7265 7175 6573 745b 2773 6574 746c 6543  request['settleC
-00050f80: 6f69 6e27 5d20 3d20 7365 7474 6c65 0a20  oin'] = settle. 
-00050f90: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-00050fa0: 7374 5b27 6c69 6d69 7427 5d20 3d20 3230  st['limit'] = 20
-00050fb0: 300a 2020 2020 2020 2020 2320 6d61 726b  0.        # mark
-00050fc0: 6574 204e 6f6e 650a 2020 2020 2020 2020  et None.        
-00050fd0: 7479 7065 2c20 7061 7261 6d73 203d 2073  type, params = s
-00050fe0: 656c 662e 6861 6e64 6c65 5f6d 6172 6b65  elf.handle_marke
-00050ff0: 745f 7479 7065 5f61 6e64 5f70 6172 616d  t_type_and_param
-00051000: 7328 2766 6574 6368 506f 7369 7469 6f6e  s('fetchPosition
-00051010: 7327 2c20 4e6f 6e65 2c20 7061 7261 6d73  s', None, params
-00051020: 290a 2020 2020 2020 2020 7375 6254 7970  ).        subTyp
-00051030: 6520 3d20 4e6f 6e65 0a20 2020 2020 2020  e = None.       
-00051040: 2073 7562 5479 7065 2c20 7061 7261 6d73   subType, params
-00051050: 203d 2073 656c 662e 6861 6e64 6c65 5f73   = self.handle_s
-00051060: 7562 5f74 7970 655f 616e 645f 7061 7261  ub_type_and_para
-00051070: 6d73 2827 6665 7463 6850 6f73 6974 696f  ms('fetchPositio
-00051080: 6e73 272c 204e 6f6e 652c 2070 6172 616d  ns', None, param
-00051090: 732c 2027 6c69 6e65 6172 2729 0a20 2020  s, 'linear').   
-000510a0: 2020 2020 2072 6571 7565 7374 5b27 6361       request['ca
-000510b0: 7465 676f 7279 275d 203d 2073 7562 5479  tegory'] = subTy
-000510c0: 7065 0a20 2020 2020 2020 2069 6620 7479  pe.        if ty
-000510d0: 7065 203d 3d20 276f 7074 696f 6e27 3a0a  pe == 'option':.
-000510e0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-000510f0: 6573 745b 2763 6174 6567 6f72 7927 5d20  est['category'] 
-00051100: 3d20 276f 7074 696f 6e27 0a20 2020 2020  = 'option'.     
-00051110: 2020 206d 6574 686f 6420 3d20 2770 7269     method = 'pri
-00051120: 7661 7465 4765 7456 3550 6f73 6974 696f  vateGetV5Positio
-00051130: 6e4c 6973 7427 2069 6620 2865 6e61 626c  nList' if (enabl
-00051140: 6555 6e69 6669 6564 5b31 5d29 2065 6c73  eUnified[1]) els
-00051150: 6520 2770 7269 7661 7465 4765 7455 6e69  e 'privateGetUni
-00051160: 6669 6564 5633 5072 6976 6174 6550 6f73  fiedV3PrivatePos
-00051170: 6974 696f 6e4c 6973 7427 0a20 2020 2020  itionList'.     
-00051180: 2020 2072 6573 706f 6e73 6520 3d20 6177     response = aw
-00051190: 6169 7420 6765 7461 7474 7228 7365 6c66  ait getattr(self
-000511a0: 2c20 6d65 7468 6f64 2928 7365 6c66 2e65  , method)(self.e
-000511b0: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
-000511c0: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
-000511d0: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
-000511e0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-000511f0: 2020 2020 2272 6574 436f 6465 223a 2030      "retCode": 0
-00051200: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00051210: 2020 2020 2272 6574 4d73 6722 3a20 2253      "retMsg": "S
-00051220: 7563 6365 7373 222c 0a20 2020 2020 2020  uccess",.       
-00051230: 2023 2020 2020 2020 2020 2022 7265 7375   #         "resu
-00051240: 6c74 223a 207b 0a20 2020 2020 2020 2023  lt": {.        #
-00051250: 2020 2020 2020 2020 2020 2020 2022 6e65               "ne
-00051260: 7874 5061 6765 4375 7273 6f72 223a 2022  xtPageCursor": "
-00051270: 3025 3341 3136 3537 3731 3139 3439 3934  0%3A165771194994
-00051280: 3525 3243 3025 3341 3136 3537 3731 3139  5%2C0%3A16577119
-00051290: 3439 3934 3522 2c0a 2020 2020 2020 2020  49945",.        
-000512a0: 2320 2020 2020 2020 2020 2020 2020 2263  #             "c
-000512b0: 6174 6567 6f72 7922 3a20 226c 696e 6561  ategory": "linea
-000512c0: 7222 2c0a 2020 2020 2020 2020 2320 2020  r",.        #   
-000512d0: 2020 2020 2020 2020 2020 226c 6973 7422            "list"
-000512e0: 3a20 5b0a 2020 2020 2020 2020 2320 2020  : [.        #   
-000512f0: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
-00051300: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00051310: 2020 2020 2020 2020 2020 2020 2020 2273                "s
-00051320: 796d 626f 6c22 3a20 2245 5448 5553 4454  ymbol": "ETHUSDT
-00051330: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00051340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00051350: 2022 6c65 7665 7261 6765 223a 2022 3130   "leverage": "10
-00051360: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00051370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00051380: 2022 7570 6461 7465 6454 696d 6522 3a20   "updatedTime": 
-00051390: 3136 3537 3731 3139 3439 3934 352c 0a20  1657711949945,. 
-000513a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000513b0: 2020 2020 2020 2020 2020 2020 2022 7369               "si
-000513c0: 6465 223a 2022 4275 7922 2c0a 2020 2020  de": "Buy",.    
-000513d0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000513e0: 2020 2020 2020 2020 2020 2270 6f73 6974            "posit
-000513f0: 696f 6e56 616c 7565 223a 2022 3533 362e  ionValue": "536.
-00051400: 3932 3530 3030 3030 222c 0a20 2020 2020  92500000",.     
-00051410: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00051420: 2020 2020 2020 2020 2022 7461 6b65 5072           "takePr
-00051430: 6f66 6974 223a 2022 222c 0a20 2020 2020  ofit": "",.     
-00051440: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00051450: 2020 2020 2020 2020 2022 7470 736c 4d6f           "tpslMo
-00051460: 6465 223a 2022 4675 6c6c 222c 0a20 2020  de": "Full",.   
-00051470: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00051480: 2020 2020 2020 2020 2020 2022 7269 736b             "risk
-00051490: 4964 223a 2031 312c 0a20 2020 2020 2020  Id": 11,.       
-000514a0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-000514b0: 2020 2020 2020 2022 7472 6169 6c69 6e67         "trailing
-000514c0: 5374 6f70 223a 2022 222c 0a20 2020 2020  Stop": "",.     
-000514d0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-000514e0: 2020 2020 2020 2020 2022 656e 7472 7950           "entryP
-000514f0: 7269 6365 223a 2022 3130 3733 2e38 3530  rice": "1073.850
-00051500: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
-00051510: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00051520: 2020 2020 2020 2275 6e72 6561 6c69 7365        "unrealise
-00051530: 6450 6e6c 223a 2022 222c 0a20 2020 2020  dPnl": "",.     
-00051540: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00051550: 2020 2020 2020 2020 2022 6d61 726b 5072           "markPr
-00051560: 6963 6522 3a20 2231 3038 302e 3635 3030  ice": "1080.6500
-00051570: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
-00051580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00051590: 2020 2020 2022 7369 7a65 223a 2022 302e       "size": "0.
-000515a0: 3530 3030 222c 0a20 2020 2020 2020 2023  5000",.        #
-000515b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000515c0: 2020 2020 2022 706f 7369 7469 6f6e 5374       "positionSt
-000515d0: 6174 7573 223a 2022 6e6f 726d 616c 222c  atus": "normal",
-000515e0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000515f0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00051600: 7374 6f70 4c6f 7373 223a 2022 222c 0a20  stopLoss": "",. 
-00051610: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00051620: 2020 2020 2020 2020 2020 2020 2022 6375               "cu
-00051630: 6d52 6561 6c69 7365 6450 6e6c 223a 2022  mRealisedPnl": "
-00051640: 2d30 2e33 3232 3135 3530 3022 2c0a 2020  -0.32215500",.  
-00051650: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00051660: 2020 2020 2020 2020 2020 2020 2270 6f73              "pos
-00051670: 6974 696f 6e4d 4d22 3a20 2232 2e39 3734  itionMM": "2.974
-00051680: 3536 3435 3022 2c0a 2020 2020 2020 2020  56450",.        
-00051690: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-000516a0: 2020 2020 2020 2263 7265 6174 6564 5469        "createdTi
-000516b0: 6d65 223a 2031 3635 3737 3131 3934 3939  me": 16577119499
-000516c0: 3238 2c0a 2020 2020 2020 2020 2320 2020  28,.        #   
-000516d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000516e0: 2020 2270 6f73 6974 696f 6e49 6478 223a    "positionIdx":
-000516f0: 2030 2c0a 2020 2020 2020 2020 2320 2020   0,.        #   
-00051700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00051710: 2020 2270 6f73 6974 696f 6e49 4d22 3a20    "positionIM": 
-00051720: 2235 332e 3938 3234 3339 3530 220a 2020  "53.98243950".  
-00051730: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00051740: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-00051750: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00051760: 5d0a 2020 2020 2020 2020 2320 2020 2020  ].        #     
-00051770: 2020 2020 7d2c 0a20 2020 2020 2020 2023      },.        #
-00051780: 2020 2020 2020 2020 2022 7469 6d65 223a           "time":
-00051790: 2031 3635 3737 3133 3639 3331 3832 0a20   1657713693182. 
-000517a0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
-000517b0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-000517c0: 2072 6573 756c 7420 3d20 7365 6c66 2e73   result = self.s
-000517d0: 6166 655f 7661 6c75 6528 7265 7370 6f6e  afe_value(respon
-000517e0: 7365 2c20 2772 6573 756c 7427 2c20 7b7d  se, 'result', {}
-000517f0: 290a 2020 2020 2020 2020 706f 7369 7469  ).        positi
-00051800: 6f6e 7320 3d20 7365 6c66 2e73 6166 655f  ons = self.safe_
-00051810: 7661 6c75 6528 7265 7375 6c74 2c20 276c  value(result, 'l
-00051820: 6973 7427 2c20 5b5d 290a 2020 2020 2020  ist', []).      
-00051830: 2020 7265 7375 6c74 7320 3d20 5b5d 0a20    results = []. 
-00051840: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-00051850: 7261 6e67 6528 302c 206c 656e 2870 6f73  range(0, len(pos
-00051860: 6974 696f 6e73 2929 3a0a 2020 2020 2020  itions)):.      
-00051870: 2020 2020 2020 7261 7750 6f73 6974 696f        rawPositio
-00051880: 6e20 3d20 706f 7369 7469 6f6e 735b 695d  n = positions[i]
-00051890: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000518a0: 2827 6461 7461 2720 696e 2072 6177 506f  ('data' in rawPo
-000518b0: 7369 7469 6f6e 2920 616e 6420 2827 6973  sition) and ('is
-000518c0: 5f76 616c 6964 2720 696e 2072 6177 506f  _valid' in rawPo
-000518d0: 7369 7469 6f6e 293a 0a20 2020 2020 2020  sition):.       
-000518e0: 2020 2020 2020 2020 2023 2066 7574 7572           # futur
-000518f0: 6573 206f 6e6c 790a 2020 2020 2020 2020  es only.        
-00051900: 2020 2020 2020 2020 7261 7750 6f73 6974          rawPosit
-00051910: 696f 6e20 3d20 7365 6c66 2e73 6166 655f  ion = self.safe_
-00051920: 7661 6c75 6528 7261 7750 6f73 6974 696f  value(rawPositio
-00051930: 6e2c 2027 6461 7461 2729 0a20 2020 2020  n, 'data').     
-00051940: 2020 2020 2020 2072 6573 756c 7473 2e61         results.a
-00051950: 7070 656e 6428 7365 6c66 2e70 6172 7365  ppend(self.parse
-00051960: 5f70 6f73 6974 696f 6e28 7261 7750 6f73  _position(rawPos
-00051970: 6974 696f 6e29 290a 2020 2020 2020 2020  ition)).        
-00051980: 7265 7475 726e 2073 656c 662e 6669 6c74  return self.filt
-00051990: 6572 5f62 795f 6172 7261 7928 7265 7375  er_by_array(resu
-000519a0: 6c74 732c 2027 7379 6d62 6f6c 272c 2073  lts, 'symbol', s
-000519b0: 796d 626f 6c73 2c20 4661 6c73 6529 0a0a  ymbols, False)..
-000519c0: 2020 2020 6173 796e 6320 6465 6620 6665      async def fe
-000519d0: 7463 685f 7573 6463 5f70 6f73 6974 696f  tch_usdc_positio
-000519e0: 6e73 2873 656c 662c 2073 796d 626f 6c73  ns(self, symbols
-000519f0: 3a20 4f70 7469 6f6e 616c 5b4c 6973 745b  : Optional[List[
-00051a00: 7374 725d 5d20 3d20 4e6f 6e65 2c20 7061  str]] = None, pa
-00051a10: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
-00051a20: 2020 6177 6169 7420 7365 6c66 2e6c 6f61    await self.loa
-00051a30: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
-00051a40: 2020 2020 7379 6d62 6f6c 7320 3d20 7365      symbols = se
-00051a50: 6c66 2e6d 6172 6b65 745f 7379 6d62 6f6c  lf.market_symbol
-00051a60: 7328 7379 6d62 6f6c 7329 0a20 2020 2020  s(symbols).     
-00051a70: 2020 2072 6571 7565 7374 203d 207b 7d0a     request = {}.
-00051a80: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
-00051a90: 204e 6f6e 650a 2020 2020 2020 2020 7479   None.        ty
-00051aa0: 7065 203d 204e 6f6e 650a 2020 2020 2020  pe = None.      
-00051ab0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-00051ac0: 7379 6d62 6f6c 732c 206c 6973 7429 3a0a  symbols, list):.
-00051ad0: 2020 2020 2020 2020 2020 2020 6c65 6e67              leng
-00051ae0: 7468 203d 206c 656e 2873 796d 626f 6c73  th = len(symbols
-00051af0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-00051b00: 206c 656e 6774 6820 213d 2031 3a0a 2020   length != 1:.  
-00051b10: 2020 2020 2020 2020 2020 2020 2020 7261                ra
-00051b20: 6973 6520 4172 6775 6d65 6e74 7352 6571  ise ArgumentsReq
-00051b30: 7569 7265 6428 7365 6c66 2e69 6420 2b20  uired(self.id + 
-00051b40: 2720 6665 7463 6855 5344 4350 6f73 6974  ' fetchUSDCPosit
-00051b50: 696f 6e73 2829 2074 616b 6573 2061 6e20  ions() takes an 
-00051b60: 6172 7261 7920 7769 7468 2065 7861 6374  array with exact
-00051b70: 6c79 206f 6e65 2073 796d 626f 6c27 290a  ly one symbol').
-00051b80: 2020 2020 2020 2020 2020 2020 7379 6d62              symb
-00051b90: 6f6c 203d 2073 656c 662e 7361 6665 5f73  ol = self.safe_s
-00051ba0: 7472 696e 6728 7379 6d62 6f6c 732c 2030  tring(symbols, 0
-00051bb0: 290a 2020 2020 2020 2020 2020 2020 6d61  ).            ma
-00051bc0: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
-00051bd0: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
-00051be0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-00051bf0: 7379 6d62 6f6c 275d 203d 206d 6172 6b65  symbol'] = marke
-00051c00: 745b 2769 6427 5d0a 2020 2020 2020 2020  t['id'].        
-00051c10: 656c 6966 2073 796d 626f 6c73 2069 7320  elif symbols is 
-00051c20: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00051c30: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
-00051c40: 656c 662e 6d61 726b 6574 2873 796d 626f  elf.market(symbo
-00051c50: 6c73 290a 2020 2020 2020 2020 2020 2020  ls).            
-00051c60: 7265 7175 6573 745b 2773 796d 626f 6c27  request['symbol'
-00051c70: 5d20 3d20 6d61 726b 6574 5b27 6964 275d  ] = market['id']
-00051c80: 0a20 2020 2020 2020 2074 7970 652c 2070  .        type, p
-00051c90: 6172 616d 7320 3d20 7365 6c66 2e68 616e  arams = self.han
-00051ca0: 646c 655f 6d61 726b 6574 5f74 7970 655f  dle_market_type_
-00051cb0: 616e 645f 7061 7261 6d73 2827 6665 7463  and_params('fetc
-00051cc0: 6855 5344 4350 6f73 6974 696f 6e73 272c  hUSDCPositions',
-00051cd0: 206d 6172 6b65 742c 2070 6172 616d 7329   market, params)
-00051ce0: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
-00051cf0: 5b27 6361 7465 676f 7279 275d 203d 2027  ['category'] = '
-00051d00: 4f50 5449 4f4e 2720 6966 2028 7479 7065  OPTION' if (type
-00051d10: 203d 3d20 276f 7074 696f 6e27 2920 656c   == 'option') el
-00051d20: 7365 2027 5045 5250 4554 5541 4c27 0a20  se 'PERPETUAL'. 
-00051d30: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
-00051d40: 3d20 6177 6169 7420 7365 6c66 2e70 7269  = await self.pri
-00051d50: 7661 7465 506f 7374 4f70 7469 6f6e 5573  vatePostOptionUs
-00051d60: 6463 4f70 656e 6170 6950 7269 7661 7465  dcOpenapiPrivate
-00051d70: 5631 5175 6572 7950 6f73 6974 696f 6e28  V1QueryPosition(
-00051d80: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
-00051d90: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
-00051da0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00051db0: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
-00051dc0: 2320 2020 2020 2020 2020 2272 6573 756c  #         "resul
-00051dd0: 7422 3a20 7b0a 2020 2020 2020 2020 2320  t": {.        # 
-00051de0: 2020 2020 2020 2020 2020 2020 2263 7572              "cur
-00051df0: 736f 7222 3a20 2242 5443 2d33 3144 4543  sor": "BTC-31DEC
-00051e00: 3231 2d32 3430 3030 2d50 2533 4131 3634  21-24000-P%3A164
-00051e10: 3038 3334 3432 3134 3331 2532 4342 5443  0834421431%2CBTC
-00051e20: 2d33 3144 4543 3231 2d32 3430 3030 2d50  -31DEC21-24000-P
-00051e30: 2533 4131 3634 3038 3334 3432 3134 3331  %3A1640834421431
-00051e40: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00051e50: 2020 2020 2020 2020 2022 7265 7375 6c74           "result
-00051e60: 546f 7461 6c53 697a 6522 3a20 312c 0a20  TotalSize": 1,. 
-00051e70: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00051e80: 2020 2020 2022 6461 7461 4c69 7374 223a       "dataList":
-00051e90: 205b 0a20 2020 2020 2020 2023 2020 2020   [.        #    
-00051ea0: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
-00051eb0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00051ec0: 2020 2020 2020 2020 2022 7379 6d62 6f6c           "symbol
-00051ed0: 223a 2022 4254 432d 3331 4445 4332 312d  ": "BTC-31DEC21-
-00051ee0: 3234 3030 302d 5022 2c0a 2020 2020 2020  24000-P",.      
-00051ef0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00051f00: 2020 2020 226c 6576 6572 6167 6522 3a20      "leverage": 
-00051f10: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
-00051f20: 2020 2020 2020 2020 2020 2020 2020 226f                "o
-00051f30: 6363 436c 6f73 696e 6746 6565 223a 2022  ccClosingFee": "
-00051f40: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00051f50: 2020 2020 2020 2020 2020 2020 2022 6c69               "li
-00051f60: 7150 7269 6365 223a 2022 222c 0a20 2020  qPrice": "",.   
-00051f70: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00051f80: 2020 2020 2020 2022 706f 7369 7469 6f6e         "position
-00051f90: 5661 6c75 6522 3a20 2222 2c0a 2020 2020  Value": "",.    
-00051fa0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00051fb0: 2020 2020 2020 2274 616b 6550 726f 6669        "takeProfi
-00051fc0: 7422 3a20 2222 2c0a 2020 2020 2020 2020  t": "",.        
-00051fd0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00051fe0: 2020 2272 6973 6b49 6422 3a20 2222 2c0a    "riskId": "",.
-00051ff0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00052000: 2020 2020 2020 2020 2020 2274 7261 696c            "trail
-00052010: 696e 6753 746f 7022 3a20 2222 2c0a 2020  ingStop": "",.  
-00052020: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00052030: 2020 2020 2020 2020 2275 6e72 6561 6c69          "unreali
-00052040: 7365 6450 6e6c 223a 2022 222c 0a20 2020  sedPnl": "",.   
-00052050: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00052060: 2020 2020 2020 2022 6372 6561 7465 6441         "createdA
-00052070: 7422 3a20 2231 3634 3038 3334 3432 3134  t": "16408344214
-00052080: 3331 222c 0a20 2020 2020 2020 2023 2020  31",.        #  
-00052090: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000520a0: 6d61 726b 5072 6963 6522 3a20 2230 2e30  markPrice": "0.0
-000520b0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-000520c0: 2020 2020 2020 2020 2020 2020 2020 2263                "c
-000520d0: 756d 5265 616c 6973 6564 506e 6c22 3a20  umRealisedPnl": 
-000520e0: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
-000520f0: 2020 2020 2020 2020 2020 2020 2020 2270                "p
-00052100: 6f73 6974 696f 6e4d 4d22 3a20 2233 3539  ositionMM": "359
-00052110: 2e35 3237 3122 2c0a 2020 2020 2020 2020  .5271",.        
-00052120: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00052130: 2020 2270 6f73 6974 696f 6e49 4d22 3a20    "positionIM": 
-00052140: 2234 3637 2e30 3633 3322 2c0a 2020 2020  "467.0633",.    
-00052150: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00052160: 2020 2020 2020 2275 7064 6174 6564 4174        "updatedAt
-00052170: 223a 2022 3136 3430 3833 3434 3231 3433  ": "164083442143
-00052180: 3122 2c0a 2020 2020 2020 2020 2320 2020  1",.        #   
-00052190: 2020 2020 2020 2020 2020 2020 2020 2274                "t
-000521a0: 7053 4c4d 6f64 6522 3a20 2222 2c0a 2020  pSLMode": "",.  
-000521b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000521c0: 2020 2020 2020 2020 2273 6964 6522 3a20          "side": 
-000521d0: 2253 656c 6c22 2c0a 2020 2020 2020 2020  "Sell",.        
-000521e0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-000521f0: 2020 2262 7573 7450 7269 6365 223a 2022    "bustPrice": "
-00052200: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00052210: 2020 2020 2020 2020 2020 2020 2022 6465               "de
-00052220: 6c65 7665 7261 6765 496e 6469 6361 746f  leverageIndicato
-00052230: 7222 3a20 302c 0a20 2020 2020 2020 2023  r": 0,.        #
-00052240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00052250: 2022 656e 7472 7950 7269 6365 223a 2022   "entryPrice": "
-00052260: 312e 3422 2c0a 2020 2020 2020 2020 2320  1.4",.        # 
-00052270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00052280: 2273 697a 6522 3a20 222d 302e 3130 3022  "size": "-0.100"
-00052290: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-000522a0: 2020 2020 2020 2020 2020 2020 2273 6573              "ses
-000522b0: 7369 6f6e 5250 4c22 3a20 2222 2c0a 2020  sionRPL": "",.  
-000522c0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000522d0: 2020 2020 2020 2020 2270 6f73 6974 696f          "positio
-000522e0: 6e53 7461 7475 7322 3a20 2222 2c0a 2020  nStatus": "",.  
-000522f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00052300: 2020 2020 2020 2020 2273 6573 7369 6f6e          "session
-00052310: 5550 4c22 3a20 2222 2c0a 2020 2020 2020  UPL": "",.      
-00052320: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00052330: 2020 2020 2273 746f 704c 6f73 7322 3a20      "stopLoss": 
-00052340: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
-00052350: 2020 2020 2020 2020 2020 2020 2020 226f                "o
-00052360: 7264 6572 4d61 7267 696e 223a 2022 222c  rderMargin": "",
-00052370: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00052380: 2020 2020 2020 2020 2020 2022 7365 7373             "sess
-00052390: 696f 6e41 7667 5072 6963 6522 3a20 2231  ionAvgPrice": "1
-000523a0: 2e35 220a 2020 2020 2020 2020 2320 2020  .5".        #   
-000523b0: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
-000523c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000523d0: 2020 2020 2020 5d0a 2020 2020 2020 2020        ].        
-000523e0: 2320 2020 2020 2020 2020 7d2c 0a20 2020  #         },.   
-000523f0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00052400: 7265 7443 6f64 6522 3a20 302c 0a20 2020  retCode": 0,.   
-00052410: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00052420: 7265 744d 7367 223a 2022 5375 6363 6573  retMsg": "Succes
-00052430: 732e 220a 2020 2020 2020 2020 2320 2020  s.".        #   
-00052440: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-00052450: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
-00052460: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
-00052470: 6573 706f 6e73 652c 2027 7265 7375 6c74  esponse, 'result
-00052480: 272c 207b 7d29 0a20 2020 2020 2020 2070  ', {}).        p
-00052490: 6f73 6974 696f 6e73 203d 2073 656c 662e  ositions = self.
-000524a0: 7361 6665 5f76 616c 7565 2872 6573 756c  safe_value(resul
-000524b0: 742c 2027 6461 7461 4c69 7374 272c 205b  t, 'dataList', [
-000524c0: 5d29 0a20 2020 2020 2020 2072 6573 756c  ]).        resul
-000524d0: 7473 203d 205b 5d0a 2020 2020 2020 2020  ts = [].        
-000524e0: 666f 7220 6920 696e 2072 616e 6765 2830  for i in range(0
-000524f0: 2c20 6c65 6e28 706f 7369 7469 6f6e 7329  , len(positions)
-00052500: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-00052510: 6177 506f 7369 7469 6f6e 203d 2070 6f73  awPosition = pos
-00052520: 6974 696f 6e73 5b69 5d0a 2020 2020 2020  itions[i].      
-00052530: 2020 2020 2020 6966 2028 2764 6174 6127        if ('data'
-00052540: 2069 6e20 7261 7750 6f73 6974 696f 6e29   in rawPosition)
-00052550: 2061 6e64 2028 2769 735f 7661 6c69 6427   and ('is_valid'
-00052560: 2069 6e20 7261 7750 6f73 6974 696f 6e29   in rawPosition)
-00052570: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00052580: 2020 2320 6675 7475 7265 7320 6f6e 6c79    # futures only
-00052590: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000525a0: 2072 6177 506f 7369 7469 6f6e 203d 2073   rawPosition = s
-000525b0: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
-000525c0: 6177 506f 7369 7469 6f6e 2c20 2764 6174  awPosition, 'dat
-000525d0: 6127 290a 2020 2020 2020 2020 2020 2020  a').            
-000525e0: 7265 7375 6c74 732e 6170 7065 6e64 2873  results.append(s
-000525f0: 656c 662e 7061 7273 655f 706f 7369 7469  elf.parse_positi
-00052600: 6f6e 2872 6177 506f 7369 7469 6f6e 2c20  on(rawPosition, 
-00052610: 6d61 726b 6574 2929 0a20 2020 2020 2020  market)).       
-00052620: 2072 6574 7572 6e20 7365 6c66 2e66 696c   return self.fil
-00052630: 7465 725f 6279 5f61 7272 6179 2872 6573  ter_by_array(res
-00052640: 756c 7473 2c20 2773 796d 626f 6c27 2c20  ults, 'symbol', 
-00052650: 7379 6d62 6f6c 732c 2046 616c 7365 290a  symbols, False).
-00052660: 0a20 2020 2061 7379 6e63 2064 6566 2066  .    async def f
-00052670: 6574 6368 5f64 6572 6976 6174 6976 6573  etch_derivatives
-00052680: 5f70 6f73 6974 696f 6e73 2873 656c 662c  _positions(self,
-00052690: 2073 796d 626f 6c73 3a20 4f70 7469 6f6e   symbols: Option
-000526a0: 616c 5b4c 6973 745b 7374 725d 5d20 3d20  al[List[str]] = 
-000526b0: 4e6f 6e65 2c20 7061 7261 6d73 3d7b 7d29  None, params={})
-000526c0: 3a0a 2020 2020 2020 2020 6177 6169 7420  :.        await 
-000526d0: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
-000526e0: 7328 290a 2020 2020 2020 2020 7265 7175  s().        requ
-000526f0: 6573 7420 3d20 7b7d 0a20 2020 2020 2020  est = {}.       
-00052700: 206d 6172 6b65 7420 3d20 4e6f 6e65 0a20   market = None. 
-00052710: 2020 2020 2020 2073 6574 746c 6520 3d20         settle = 
-00052720: 4e6f 6e65 0a20 2020 2020 2020 2069 6620  None.        if 
-00052730: 6973 696e 7374 616e 6365 2873 796d 626f  isinstance(symbo
-00052740: 6c73 2c20 6c69 7374 293a 0a20 2020 2020  ls, list):.     
-00052750: 2020 2020 2020 2073 796d 626f 6c73 4c65         symbolsLe
-00052760: 6e67 7468 203d 206c 656e 2873 796d 626f  ngth = len(symbo
-00052770: 6c73 290a 2020 2020 2020 2020 2020 2020  ls).            
-00052780: 6966 2073 796d 626f 6c73 4c65 6e67 7468  if symbolsLength
-00052790: 203e 2031 3a0a 2020 2020 2020 2020 2020   > 1:.          
-000527a0: 2020 2020 2020 7261 6973 6520 4172 6775        raise Argu
-000527b0: 6d65 6e74 7352 6571 7569 7265 6428 7365  mentsRequired(se
-000527c0: 6c66 2e69 6420 2b20 2720 6665 7463 6850  lf.id + ' fetchP
-000527d0: 6f73 6974 696f 6e73 2829 2064 6f65 7320  ositions() does 
-000527e0: 6e6f 7420 6163 6365 7074 2061 6e20 6172  not accept an ar
-000527f0: 7261 7920 7769 7468 206d 6f72 6520 7468  ray with more th
-00052800: 616e 206f 6e65 2073 796d 626f 6c27 290a  an one symbol').
-00052810: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-00052820: 796d 626f 6c73 4c65 6e67 7468 203d 3d20  ymbolsLength == 
-00052830: 313a 0a20 2020 2020 2020 2020 2020 2020  1:.             
-00052840: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
-00052850: 2e6d 6172 6b65 7428 7379 6d62 6f6c 735b  .market(symbols[
-00052860: 305d 290a 2020 2020 2020 2020 2020 2020  0]).            
-00052870: 2020 2020 7365 7474 6c65 203d 206d 6172      settle = mar
-00052880: 6b65 745b 2773 6574 746c 6527 5d0a 2020  ket['settle'].  
-00052890: 2020 2020 2020 2020 2020 2020 2020 7265                re
-000528a0: 7175 6573 745b 2773 796d 626f 6c27 5d20  quest['symbol'] 
-000528b0: 3d20 6d61 726b 6574 5b27 6964 275d 0a20  = market['id']. 
-000528c0: 2020 2020 2020 2073 6574 746c 652c 2070         settle, p
-000528d0: 6172 616d 7320 3d20 7365 6c66 2e68 616e  arams = self.han
-000528e0: 646c 655f 6f70 7469 6f6e 5f61 6e64 5f70  dle_option_and_p
-000528f0: 6172 616d 7328 7061 7261 6d73 2c20 2766  arams(params, 'f
-00052900: 6574 6368 506f 7369 7469 6f6e 7327 2c20  etchPositions', 
-00052910: 2773 6574 746c 6527 2c20 7365 7474 6c65  'settle', settle
-00052920: 290a 2020 2020 2020 2020 6966 2073 6574  ).        if set
-00052930: 746c 6520 6973 206e 6f74 204e 6f6e 653a  tle is not None:
-00052940: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-00052950: 7565 7374 5b27 7365 7474 6c65 436f 696e  uest['settleCoin
-00052960: 275d 203d 2073 6574 746c 650a 2020 2020  '] = settle.    
-00052970: 2020 2020 7375 6254 7970 6520 3d20 4e6f      subType = No
-00052980: 6e65 0a20 2020 2020 2020 2073 7562 5479  ne.        subTy
-00052990: 7065 2c20 7061 7261 6d73 203d 2073 656c  pe, params = sel
-000529a0: 662e 6861 6e64 6c65 5f73 7562 5f74 7970  f.handle_sub_typ
-000529b0: 655f 616e 645f 7061 7261 6d73 2827 6665  e_and_params('fe
-000529c0: 7463 6850 6f73 6974 696f 6e73 272c 206d  tchPositions', m
-000529d0: 6172 6b65 742c 2070 6172 616d 732c 2027  arket, params, '
-000529e0: 6c69 6e65 6172 2729 0a20 2020 2020 2020  linear').       
-000529f0: 2072 6571 7565 7374 5b27 6361 7465 676f   request['catego
-00052a00: 7279 275d 203d 2073 7562 5479 7065 0a20  ry'] = subType. 
-00052a10: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
-00052a20: 3d20 6177 6169 7420 7365 6c66 2e70 7269  = await self.pri
-00052a30: 7661 7465 4765 7456 3550 6f73 6974 696f  vateGetV5Positio
-00052a40: 6e4c 6973 7428 7365 6c66 2e65 7874 656e  nList(self.exten
-00052a50: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
-00052a60: 7329 290a 2020 2020 2020 2020 230a 2020  s)).        #.  
-00052a70: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
-00052a80: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00052a90: 2272 6574 436f 6465 223a 2030 2c0a 2020  "retCode": 0,.  
-00052aa0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00052ab0: 2272 6574 4d73 6722 3a20 224f 4b22 2c0a  "retMsg": "OK",.
-00052ac0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00052ad0: 2020 2272 6573 756c 7422 3a20 7b0a 2020    "result": {.  
-00052ae0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00052af0: 2020 2020 226e 6578 7450 6167 6543 7572      "nextPageCur
-00052b00: 736f 7222 3a20 2275 7064 6174 6541 7425  sor": "updateAt%
-00052b10: 3344 3136 3732 3237 3933 3232 3636 3822  3D1672279322668"
-00052b20: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00052b30: 2020 2020 2020 2020 2263 6174 6567 6f72          "categor
-00052b40: 7922 3a20 226c 696e 6561 7222 2c0a 2020  y": "linear",.  
-00052b50: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00052b60: 2020 2020 226c 6973 7422 3a20 5b0a 2020      "list": [.  
-00052b70: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00052b80: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
-00052b90: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00052ba0: 2020 2020 2020 2020 2273 796d 626f 6c22          "symbol"
-00052bb0: 3a20 2258 5250 5553 4454 222c 0a20 2020  : "XRPUSDT",.   
-00052bc0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00052bd0: 2020 2020 2020 2020 2020 2022 6c65 7665             "leve
-00052be0: 7261 6765 223a 2022 3130 222c 0a20 2020  rage": "10",.   
-00052bf0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00052c00: 2020 2020 2020 2020 2020 2022 6176 6750             "avgP
-00052c10: 7269 6365 223a 2022 302e 3336 3135 222c  rice": "0.3615",
-00052c20: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00052c30: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00052c40: 6c69 7150 7269 6365 223a 2022 302e 3030  liqPrice": "0.00
-00052c50: 3031 222c 0a20 2020 2020 2020 2023 2020  01",.        #  
-00052c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00052c70: 2020 2022 7269 736b 4c69 6d69 7456 616c     "riskLimitVal
-00052c80: 7565 223a 2022 3230 3030 3030 222c 0a20  ue": "200000",. 
-00052c90: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00052ca0: 2020 2020 2020 2020 2020 2020 2022 7461               "ta
-00052cb0: 6b65 5072 6f66 6974 223a 2022 222c 0a20  keProfit": "",. 
-00052cc0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00052cd0: 2020 2020 2020 2020 2020 2020 2022 706f               "po
-00052ce0: 7369 7469 6f6e 5661 6c75 6522 3a20 2233  sitionValue": "3
-00052cf0: 362e 3135 222c 0a20 2020 2020 2020 2023  6.15",.        #
-00052d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00052d10: 2020 2020 2022 7470 736c 4d6f 6465 223a       "tpslMode":
-00052d20: 2022 4675 6c6c 222c 0a20 2020 2020 2020   "Full",.       
-00052d30: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00052d40: 2020 2020 2020 2022 7269 736b 4964 223a         "riskId":
-00052d50: 2034 312c 0a20 2020 2020 2020 2023 2020   41,.        #  
-00052d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00052d70: 2020 2022 7472 6169 6c69 6e67 5374 6f70     "trailingStop
-00052d80: 223a 2022 3022 2c0a 2020 2020 2020 2020  ": "0",.        
-00052d90: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00052da0: 2020 2020 2020 2275 6e72 6561 6c69 7365        "unrealise
-00052db0: 6450 6e6c 223a 2022 2d31 2e38 3322 2c0a  dPnl": "-1.83",.
-00052dc0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00052dd0: 2020 2020 2020 2020 2020 2020 2020 226d                "m
-00052de0: 6172 6b50 7269 6365 223a 2022 302e 3334  arkPrice": "0.34
-00052df0: 3332 222c 0a20 2020 2020 2020 2023 2020  32",.        #  
-00052e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00052e10: 2020 2022 6375 6d52 6561 6c69 7365 6450     "cumRealisedP
-00052e20: 6e6c 223a 2022 302e 3438 3830 3538 3736  nl": "0.48805876
-00052e30: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00052e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00052e50: 2022 706f 7369 7469 6f6e 4d4d 223a 2022   "positionMM": "
-00052e60: 302e 3338 3130 3231 222c 0a20 2020 2020  0.381021",.     
-00052e70: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00052e80: 2020 2020 2020 2020 2022 6372 6561 7465           "create
-00052e90: 6454 696d 6522 3a20 2231 3637 3231 3231  dTime": "1672121
-00052ea0: 3138 3232 3136 222c 0a20 2020 2020 2020  182216",.       
-00052eb0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00052ec0: 2020 2020 2020 2022 706f 7369 7469 6f6e         "position
-00052ed0: 4964 7822 3a20 302c 0a20 2020 2020 2020  Idx": 0,.       
-00052ee0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00052ef0: 2020 2020 2020 2022 706f 7369 7469 6f6e         "position
-00052f00: 494d 223a 2022 332e 3633 3435 3231 222c  IM": "3.634521",
-00052f10: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00052f20: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00052f30: 7570 6461 7465 6454 696d 6522 3a20 2231  updatedTime": "1
-00052f40: 3637 3232 3739 3332 3236 3638 222c 0a20  672279322668",. 
-00052f50: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00052f60: 2020 2020 2020 2020 2020 2020 2022 7369               "si
-00052f70: 6465 223a 2022 4275 7922 2c0a 2020 2020  de": "Buy",.    
-00052f80: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00052f90: 2020 2020 2020 2020 2020 2262 7573 7450            "bustP
-00052fa0: 7269 6365 223a 2022 222c 0a20 2020 2020  rice": "",.     
-00052fb0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00052fc0: 2020 2020 2020 2020 2022 7369 7a65 223a           "size":
-00052fd0: 2022 3130 3022 2c0a 2020 2020 2020 2020   "100",.        
-00052fe0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00052ff0: 2020 2020 2020 2270 6f73 6974 696f 6e53        "positionS
-00053000: 7461 7475 7322 3a20 224e 6f72 6d61 6c22  tatus": "Normal"
-00053010: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000508c0: 2020 2020 2022 6163 7469 7665 5072 6963       "activePric
+000508d0: 6522 3a20 2230 2e30 3030 3022 0a20 2020  e": "0.0000".   
+000508e0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+000508f0: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
+00050900: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00050910: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+00050920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00050930: 2020 2020 2270 6f73 6974 696f 6e49 6478      "positionIdx
+00050940: 223a 2032 2c0a 2020 2020 2020 2020 2320  ": 2,.        # 
+00050950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00050960: 2020 2020 2272 6973 6b49 6422 3a20 2234      "riskId": "4
+00050970: 3122 2c0a 2020 2020 2020 2020 2320 2020  1",.        #   
+00050980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00050990: 2020 2273 796d 626f 6c22 3a20 2258 5250    "symbol": "XRP
+000509a0: 5553 4454 222c 0a20 2020 2020 2020 2023  USDT",.        #
+000509b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000509c0: 2020 2020 2022 7369 6465 223a 2022 5365       "side": "Se
+000509d0: 6c6c 222c 0a20 2020 2020 2020 2023 2020  ll",.        #  
+000509e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000509f0: 2020 2022 7369 7a65 223a 2022 3530 222c     "size": "50",
+00050a00: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00050a10: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00050a20: 706f 7369 7469 6f6e 5661 6c75 6522 3a20  positionValue": 
+00050a30: 2231 362e 3638 222c 0a20 2020 2020 2020  "16.68",.       
+00050a40: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00050a50: 2020 2020 2020 2022 656e 7472 7950 7269         "entryPri
+00050a60: 6365 223a 2022 302e 3333 3336 222c 0a20  ce": "0.3336",. 
+00050a70: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00050a80: 2020 2020 2020 2020 2020 2020 2022 7472               "tr
+00050a90: 6164 654d 6f64 6522 3a20 302c 0a20 2020  adeMode": 0,.   
+00050aa0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00050ab0: 2020 2020 2020 2020 2020 2022 6175 746f             "auto
+00050ac0: 4164 644d 6172 6769 6e22 3a20 302c 0a20  AddMargin": 0,. 
+00050ad0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00050ae0: 2020 2020 2020 2020 2020 2020 2022 6c65               "le
+00050af0: 7665 7261 6765 223a 2022 3130 222c 0a20  verage": "10",. 
+00050b00: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00050b10: 2020 2020 2020 2020 2020 2020 2022 706f               "po
+00050b20: 7369 7469 6f6e 4261 6c61 6e63 6522 3a20  sitionBalance": 
+00050b30: 2231 2e36 3739 3030 3838 222c 0a20 2020  "1.6790088",.   
+00050b40: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00050b50: 2020 2020 2020 2020 2020 2022 6c69 7150             "liqP
+00050b60: 7269 6365 223a 2022 3132 2e34 3833 3522  rice": "12.4835"
+00050b70: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00050b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00050b90: 2262 7573 7450 7269 6365 223a 2022 3132  "bustPrice": "12
+00050ba0: 2e34 3836 3922 2c0a 2020 2020 2020 2020  .4869",.        
+00050bb0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00050bc0: 2020 2020 2020 2274 616b 6550 726f 6669        "takeProfi
+00050bd0: 7422 3a20 2230 2e30 3030 3022 2c0a 2020  t": "0.0000",.  
+00050be0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00050bf0: 2020 2020 2020 2020 2020 2020 2273 746f              "sto
+00050c00: 704c 6f73 7322 3a20 2230 2e30 3030 3022  pLoss": "0.0000"
+00050c10: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00050c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00050c30: 2274 7261 696c 696e 6753 746f 7022 3a20  "trailingStop": 
+00050c40: 2230 2e30 3030 3022 2c0a 2020 2020 2020  "0.0000",.      
+00050c50: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00050c60: 2020 2020 2020 2020 2275 6e72 6561 6c69          "unreali
+00050c70: 7365 6450 6e6c 223a 2022 3022 2c0a 2020  sedPnl": "0",.  
+00050c80: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00050c90: 2020 2020 2020 2020 2020 2020 2263 7265              "cre
+00050ca0: 6174 6564 5469 6d65 223a 2022 3136 3538  atedTime": "1658
+00050cb0: 3832 3734 3434 3332 3822 2c0a 2020 2020  827444328",.    
+00050cc0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00050cd0: 2020 2020 2020 2020 2020 2275 7064 6174            "updat
+00050ce0: 6564 5469 6d65 223a 2022 3136 3538 3930  edTime": "165890
+00050cf0: 3438 3633 3431 3222 2c0a 2020 2020 2020  4863412",.      
+00050d00: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00050d10: 2020 2020 2020 2020 2274 7053 6c4d 6f64          "tpSlMod
+00050d20: 6522 3a20 2246 756c 6c22 2c0a 2020 2020  e": "Full",.    
+00050d30: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00050d40: 2020 2020 2020 2020 2020 2272 6973 6b4c            "riskL
+00050d50: 696d 6974 5661 6c75 6522 3a20 2232 3030  imitValue": "200
+00050d60: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
+00050d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00050d80: 2020 2020 2261 6374 6976 6550 7269 6365      "activePrice
+00050d90: 223a 2022 302e 3030 3030 220a 2020 2020  ": "0.0000".    
+00050da0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00050db0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00050dc0: 2320 2020 2020 2020 2020 2020 2020 5d0a  #             ].
+00050dd0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00050de0: 2020 7d2c 0a20 2020 2020 2020 2023 2020    },.        #  
+00050df0: 2020 2020 2020 2022 7265 7445 7874 496e         "retExtIn
+00050e00: 666f 223a 206e 756c 6c2c 0a20 2020 2020  fo": null,.     
+00050e10: 2020 2023 2020 2020 2020 2020 2022 7469     #         "ti
+00050e20: 6d65 223a 2031 3635 3839 3034 3837 3739  me": 16589048779
+00050e30: 3432 0a20 2020 2020 2020 2023 2020 2020  42.        #    
+00050e40: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
+00050e50: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
+00050e60: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
+00050e70: 7370 6f6e 7365 2c20 2772 6573 756c 7427  sponse, 'result'
+00050e80: 2c20 7b7d 290a 2020 2020 2020 2020 706f  , {}).        po
+00050e90: 7369 7469 6f6e 7320 3d20 7365 6c66 2e73  sitions = self.s
+00050ea0: 6166 655f 7661 6c75 655f 3228 7265 7375  afe_value_2(resu
+00050eb0: 6c74 2c20 276c 6973 7427 2c20 2764 6174  lt, 'list', 'dat
+00050ec0: 614c 6973 7427 2c20 5b5d 290a 2020 2020  aList', []).    
+00050ed0: 2020 2020 7469 6d65 7374 616d 7020 3d20      timestamp = 
+00050ee0: 7365 6c66 2e73 6166 655f 696e 7465 6765  self.safe_intege
+00050ef0: 7228 7265 7370 6f6e 7365 2c20 2774 696d  r(response, 'tim
+00050f00: 6527 290a 2020 2020 2020 2020 6669 7273  e').        firs
+00050f10: 7420 3d20 7365 6c66 2e73 6166 655f 7661  t = self.safe_va
+00050f20: 6c75 6528 706f 7369 7469 6f6e 732c 2030  lue(positions, 0
+00050f30: 290a 2020 2020 2020 2020 706f 7369 7469  ).        positi
+00050f40: 6f6e 203d 2073 656c 662e 7061 7273 655f  on = self.parse_
+00050f50: 706f 7369 7469 6f6e 2866 6972 7374 2c20  position(first, 
+00050f60: 6d61 726b 6574 290a 2020 2020 2020 2020  market).        
+00050f70: 7265 7475 726e 2073 656c 662e 6578 7465  return self.exte
+00050f80: 6e64 2870 6f73 6974 696f 6e2c 207b 0a20  nd(position, {. 
+00050f90: 2020 2020 2020 2020 2020 2027 7469 6d65             'time
+00050fa0: 7374 616d 7027 3a20 7469 6d65 7374 616d  stamp': timestam
+00050fb0: 702c 0a20 2020 2020 2020 2020 2020 2027  p,.            '
+00050fc0: 6461 7465 7469 6d65 273a 2073 656c 662e  datetime': self.
+00050fd0: 6973 6f38 3630 3128 7469 6d65 7374 616d  iso8601(timestam
+00050fe0: 7029 2c0a 2020 2020 2020 2020 7d29 0a0a  p),.        })..
+00050ff0: 2020 2020 6173 796e 6320 6465 6620 6665      async def fe
+00051000: 7463 685f 756e 6966 6965 645f 706f 7369  tch_unified_posi
+00051010: 7469 6f6e 7328 7365 6c66 2c20 7379 6d62  tions(self, symb
+00051020: 6f6c 733a 204f 7074 696f 6e61 6c5b 4c69  ols: Optional[Li
+00051030: 7374 5b73 7472 5d5d 203d 204e 6f6e 652c  st[str]] = None,
+00051040: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
+00051050: 2020 2020 2061 7761 6974 2073 656c 662e       await self.
+00051060: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
+00051070: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+00051080: 207b 7d0a 2020 2020 2020 2020 7479 7065   {}.        type
+00051090: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+000510a0: 7365 7474 6c65 203d 204e 6f6e 650a 2020  settle = None.  
+000510b0: 2020 2020 2020 656e 6162 6c65 556e 6966        enableUnif
+000510c0: 6965 6420 3d20 6177 6169 7420 7365 6c66  ied = await self
+000510d0: 2e69 735f 756e 6966 6965 645f 656e 6162  .is_unified_enab
+000510e0: 6c65 6428 290a 2020 2020 2020 2020 6966  led().        if
+000510f0: 2069 7369 6e73 7461 6e63 6528 7379 6d62   isinstance(symb
+00051100: 6f6c 732c 206c 6973 7429 3a0a 2020 2020  ols, list):.    
+00051110: 2020 2020 2020 2020 7379 6d62 6f6c 734c          symbolsL
+00051120: 656e 6774 6820 3d20 6c65 6e28 7379 6d62  ength = len(symb
+00051130: 6f6c 7329 0a20 2020 2020 2020 2020 2020  ols).           
+00051140: 2069 6620 7379 6d62 6f6c 734c 656e 6774   if symbolsLengt
+00051150: 6820 3e20 313a 0a20 2020 2020 2020 2020  h > 1:.         
+00051160: 2020 2020 2020 2072 6169 7365 2041 7267         raise Arg
+00051170: 756d 656e 7473 5265 7175 6972 6564 2873  umentsRequired(s
+00051180: 656c 662e 6964 202b 2027 2066 6574 6368  elf.id + ' fetch
+00051190: 506f 7369 7469 6f6e 7328 2920 646f 6573  Positions() does
+000511a0: 206e 6f74 2061 6363 6570 7420 616e 2061   not accept an a
+000511b0: 7272 6179 2077 6974 6820 6d6f 7265 2074  rray with more t
+000511c0: 6861 6e20 6f6e 6520 7379 6d62 6f6c 2729  han one symbol')
+000511d0: 0a20 2020 2020 2020 2020 2020 206d 6172  .            mar
+000511e0: 6b65 7420 3d20 7365 6c66 2e6d 6172 6b65  ket = self.marke
+000511f0: 7428 7379 6d62 6f6c 735b 305d 290a 2020  t(symbols[0]).  
+00051200: 2020 2020 2020 2020 2020 7365 7474 6c65            settle
+00051210: 203d 206d 6172 6b65 745b 2773 6574 746c   = market['settl
+00051220: 6527 5d0a 2020 2020 2020 2020 656c 6966  e'].        elif
+00051230: 2073 796d 626f 6c73 2069 7320 6e6f 7420   symbols is not 
+00051240: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00051250: 2020 7379 6d62 6f6c 7320 3d20 5b73 796d    symbols = [sym
+00051260: 626f 6c73 5d0a 2020 2020 2020 2020 7379  bols].        sy
+00051270: 6d62 6f6c 7320 3d20 7365 6c66 2e6d 6172  mbols = self.mar
+00051280: 6b65 745f 7379 6d62 6f6c 7328 7379 6d62  ket_symbols(symb
+00051290: 6f6c 7329 0a20 2020 2020 2020 2069 6620  ols).        if 
+000512a0: 7379 6d62 6f6c 7320 6973 204e 6f6e 653a  symbols is None:
+000512b0: 0a20 2020 2020 2020 2020 2020 2073 6574  .            set
+000512c0: 746c 652c 2070 6172 616d 7320 3d20 7365  tle, params = se
+000512d0: 6c66 2e68 616e 646c 655f 6f70 7469 6f6e  lf.handle_option
+000512e0: 5f61 6e64 5f70 6172 616d 7328 7061 7261  _and_params(para
+000512f0: 6d73 2c20 2766 6574 6368 506f 7369 7469  ms, 'fetchPositi
+00051300: 6f6e 7327 2c20 2773 6574 746c 6527 2c20  ons', 'settle', 
+00051310: 2755 5344 5427 290a 2020 2020 2020 2020  'USDT').        
+00051320: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00051330: 2020 6669 7273 7420 3d20 7365 6c66 2e73    first = self.s
+00051340: 6166 655f 7661 6c75 6528 7379 6d62 6f6c  afe_value(symbol
+00051350: 732c 2030 290a 2020 2020 2020 2020 2020  s, 0).          
+00051360: 2020 6d61 726b 6574 203d 2073 656c 662e    market = self.
+00051370: 6d61 726b 6574 2866 6972 7374 290a 2020  market(first).  
+00051380: 2020 2020 2020 2020 2020 7365 7474 6c65            settle
+00051390: 203d 206d 6172 6b65 745b 2773 6574 746c   = market['settl
+000513a0: 6527 5d0a 2020 2020 2020 2020 2020 2020  e'].            
+000513b0: 7265 7175 6573 745b 2773 796d 626f 6c27  request['symbol'
+000513c0: 5d20 3d20 6d61 726b 6574 5b27 6964 275d  ] = market['id']
+000513d0: 0a20 2020 2020 2020 2069 6620 656e 6162  .        if enab
+000513e0: 6c65 556e 6966 6965 645b 315d 3a0a 2020  leUnified[1]:.  
+000513f0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+00051400: 745b 2773 6574 746c 6543 6f69 6e27 5d20  t['settleCoin'] 
+00051410: 3d20 7365 7474 6c65 0a20 2020 2020 2020  = settle.       
+00051420: 2020 2020 2072 6571 7565 7374 5b27 6c69       request['li
+00051430: 6d69 7427 5d20 3d20 3230 300a 2020 2020  mit'] = 200.    
+00051440: 2020 2020 2320 6d61 726b 6574 204e 6f6e      # market Non
+00051450: 650a 2020 2020 2020 2020 7479 7065 2c20  e.        type, 
+00051460: 7061 7261 6d73 203d 2073 656c 662e 6861  params = self.ha
+00051470: 6e64 6c65 5f6d 6172 6b65 745f 7479 7065  ndle_market_type
+00051480: 5f61 6e64 5f70 6172 616d 7328 2766 6574  _and_params('fet
+00051490: 6368 506f 7369 7469 6f6e 7327 2c20 4e6f  chPositions', No
+000514a0: 6e65 2c20 7061 7261 6d73 290a 2020 2020  ne, params).    
+000514b0: 2020 2020 7375 6254 7970 6520 3d20 4e6f      subType = No
+000514c0: 6e65 0a20 2020 2020 2020 2073 7562 5479  ne.        subTy
+000514d0: 7065 2c20 7061 7261 6d73 203d 2073 656c  pe, params = sel
+000514e0: 662e 6861 6e64 6c65 5f73 7562 5f74 7970  f.handle_sub_typ
+000514f0: 655f 616e 645f 7061 7261 6d73 2827 6665  e_and_params('fe
+00051500: 7463 6850 6f73 6974 696f 6e73 272c 204e  tchPositions', N
+00051510: 6f6e 652c 2070 6172 616d 732c 2027 6c69  one, params, 'li
+00051520: 6e65 6172 2729 0a20 2020 2020 2020 2072  near').        r
+00051530: 6571 7565 7374 5b27 6361 7465 676f 7279  equest['category
+00051540: 275d 203d 2073 7562 5479 7065 0a20 2020  '] = subType.   
+00051550: 2020 2020 2069 6620 7479 7065 203d 3d20       if type == 
+00051560: 276f 7074 696f 6e27 3a0a 2020 2020 2020  'option':.      
+00051570: 2020 2020 2020 7265 7175 6573 745b 2763        request['c
+00051580: 6174 6567 6f72 7927 5d20 3d20 276f 7074  ategory'] = 'opt
+00051590: 696f 6e27 0a20 2020 2020 2020 206d 6574  ion'.        met
+000515a0: 686f 6420 3d20 2770 7269 7661 7465 4765  hod = 'privateGe
+000515b0: 7456 3550 6f73 6974 696f 6e4c 6973 7427  tV5PositionList'
+000515c0: 2069 6620 2865 6e61 626c 6555 6e69 6669   if (enableUnifi
+000515d0: 6564 5b31 5d29 2065 6c73 6520 2770 7269  ed[1]) else 'pri
+000515e0: 7661 7465 4765 7455 6e69 6669 6564 5633  vateGetUnifiedV3
+000515f0: 5072 6976 6174 6550 6f73 6974 696f 6e4c  PrivatePositionL
+00051600: 6973 7427 0a20 2020 2020 2020 2072 6573  ist'.        res
+00051610: 706f 6e73 6520 3d20 6177 6169 7420 6765  ponse = await ge
+00051620: 7461 7474 7228 7365 6c66 2c20 6d65 7468  tattr(self, meth
+00051630: 6f64 2928 7365 6c66 2e65 7874 656e 6428  od)(self.extend(
+00051640: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
+00051650: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
+00051660: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
+00051670: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
+00051680: 6574 436f 6465 223a 2030 2c0a 2020 2020  etCode": 0,.    
+00051690: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
+000516a0: 6574 4d73 6722 3a20 2253 7563 6365 7373  etMsg": "Success
+000516b0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+000516c0: 2020 2020 2022 7265 7375 6c74 223a 207b       "result": {
+000516d0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000516e0: 2020 2020 2020 2022 6e65 7874 5061 6765         "nextPage
+000516f0: 4375 7273 6f72 223a 2022 3025 3341 3136  Cursor": "0%3A16
+00051700: 3537 3731 3139 3439 3934 3525 3243 3025  57711949945%2C0%
+00051710: 3341 3136 3537 3731 3139 3439 3934 3522  3A1657711949945"
+00051720: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00051730: 2020 2020 2020 2020 2263 6174 6567 6f72          "categor
+00051740: 7922 3a20 226c 696e 6561 7222 2c0a 2020  y": "linear",.  
+00051750: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00051760: 2020 2020 226c 6973 7422 3a20 5b0a 2020      "list": [.  
+00051770: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00051780: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+00051790: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+000517a0: 2020 2020 2020 2020 2273 796d 626f 6c22          "symbol"
+000517b0: 3a20 2245 5448 5553 4454 222c 0a20 2020  : "ETHUSDT",.   
+000517c0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+000517d0: 2020 2020 2020 2020 2020 2022 6c65 7665             "leve
+000517e0: 7261 6765 223a 2022 3130 222c 0a20 2020  rage": "10",.   
+000517f0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00051800: 2020 2020 2020 2020 2020 2022 7570 6461             "upda
+00051810: 7465 6454 696d 6522 3a20 3136 3537 3731  tedTime": 165771
+00051820: 3139 3439 3934 352c 0a20 2020 2020 2020  1949945,.       
+00051830: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00051840: 2020 2020 2020 2022 7369 6465 223a 2022         "side": "
+00051850: 4275 7922 2c0a 2020 2020 2020 2020 2320  Buy",.        # 
+00051860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00051870: 2020 2020 2270 6f73 6974 696f 6e56 616c      "positionVal
+00051880: 7565 223a 2022 3533 362e 3932 3530 3030  ue": "536.925000
+00051890: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+000518a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000518b0: 2020 2022 7461 6b65 5072 6f66 6974 223a     "takeProfit":
+000518c0: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
+000518d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000518e0: 2020 2022 7470 736c 4d6f 6465 223a 2022     "tpslMode": "
+000518f0: 4675 6c6c 222c 0a20 2020 2020 2020 2023  Full",.        #
+00051900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00051910: 2020 2020 2022 7269 736b 4964 223a 2031       "riskId": 1
+00051920: 312c 0a20 2020 2020 2020 2023 2020 2020  1,.        #    
+00051930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00051940: 2022 7472 6169 6c69 6e67 5374 6f70 223a   "trailingStop":
+00051950: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
+00051960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00051970: 2020 2022 656e 7472 7950 7269 6365 223a     "entryPrice":
+00051980: 2022 3130 3733 2e38 3530 3030 3030 3022   "1073.85000000"
+00051990: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000519a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000519b0: 2275 6e72 6561 6c69 7365 6450 6e6c 223a  "unrealisedPnl":
+000519c0: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
+000519d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000519e0: 2020 2022 6d61 726b 5072 6963 6522 3a20     "markPrice": 
+000519f0: 2231 3038 302e 3635 3030 3030 3030 222c  "1080.65000000",
+00051a00: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00051a10: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00051a20: 7369 7a65 223a 2022 302e 3530 3030 222c  size": "0.5000",
+00051a30: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00051a40: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00051a50: 706f 7369 7469 6f6e 5374 6174 7573 223a  positionStatus":
+00051a60: 2022 6e6f 726d 616c 222c 0a20 2020 2020   "normal",.     
+00051a70: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00051a80: 2020 2020 2020 2020 2022 7374 6f70 4c6f           "stopLo
+00051a90: 7373 223a 2022 222c 0a20 2020 2020 2020  ss": "",.       
+00051aa0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00051ab0: 2020 2020 2020 2022 6375 6d52 6561 6c69         "cumReali
+00051ac0: 7365 6450 6e6c 223a 2022 2d30 2e33 3232  sedPnl": "-0.322
+00051ad0: 3135 3530 3022 2c0a 2020 2020 2020 2020  15500",.        
+00051ae0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00051af0: 2020 2020 2020 2270 6f73 6974 696f 6e4d        "positionM
+00051b00: 4d22 3a20 2232 2e39 3734 3536 3435 3022  M": "2.97456450"
+00051b10: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00051b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00051b30: 2263 7265 6174 6564 5469 6d65 223a 2031  "createdTime": 1
+00051b40: 3635 3737 3131 3934 3939 3238 2c0a 2020  657711949928,.  
+00051b50: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00051b60: 2020 2020 2020 2020 2020 2020 2270 6f73              "pos
+00051b70: 6974 696f 6e49 6478 223a 2030 2c0a 2020  itionIdx": 0,.  
+00051b80: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00051b90: 2020 2020 2020 2020 2020 2020 2270 6f73              "pos
+00051ba0: 6974 696f 6e49 4d22 3a20 2235 332e 3938  itionIM": "53.98
+00051bb0: 3234 3339 3530 220a 2020 2020 2020 2020  243950".        
+00051bc0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00051bd0: 2020 7d0a 2020 2020 2020 2020 2320 2020    }.        #   
+00051be0: 2020 2020 2020 2020 2020 5d0a 2020 2020            ].    
+00051bf0: 2020 2020 2320 2020 2020 2020 2020 7d2c      #         },
+00051c00: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00051c10: 2020 2022 7469 6d65 223a 2031 3635 3737     "time": 16577
+00051c20: 3133 3639 3331 3832 0a20 2020 2020 2020  13693182.       
+00051c30: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
+00051c40: 2023 0a20 2020 2020 2020 2072 6573 756c   #.        resul
+00051c50: 7420 3d20 7365 6c66 2e73 6166 655f 7661  t = self.safe_va
+00051c60: 6c75 6528 7265 7370 6f6e 7365 2c20 2772  lue(response, 'r
+00051c70: 6573 756c 7427 2c20 7b7d 290a 2020 2020  esult', {}).    
+00051c80: 2020 2020 706f 7369 7469 6f6e 7320 3d20      positions = 
+00051c90: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
+00051ca0: 7265 7375 6c74 2c20 276c 6973 7427 2c20  result, 'list', 
+00051cb0: 5b5d 290a 2020 2020 2020 2020 7265 7375  []).        resu
+00051cc0: 6c74 7320 3d20 5b5d 0a20 2020 2020 2020  lts = [].       
+00051cd0: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
+00051ce0: 302c 206c 656e 2870 6f73 6974 696f 6e73  0, len(positions
+00051cf0: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+00051d00: 7261 7750 6f73 6974 696f 6e20 3d20 706f  rawPosition = po
+00051d10: 7369 7469 6f6e 735b 695d 0a20 2020 2020  sitions[i].     
+00051d20: 2020 2020 2020 2069 6620 2827 6461 7461         if ('data
+00051d30: 2720 696e 2072 6177 506f 7369 7469 6f6e  ' in rawPosition
+00051d40: 2920 616e 6420 2827 6973 5f76 616c 6964  ) and ('is_valid
+00051d50: 2720 696e 2072 6177 506f 7369 7469 6f6e  ' in rawPosition
+00051d60: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00051d70: 2020 2023 2066 7574 7572 6573 206f 6e6c     # futures onl
+00051d80: 790a 2020 2020 2020 2020 2020 2020 2020  y.              
+00051d90: 2020 7261 7750 6f73 6974 696f 6e20 3d20    rawPosition = 
+00051da0: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
+00051db0: 7261 7750 6f73 6974 696f 6e2c 2027 6461  rawPosition, 'da
+00051dc0: 7461 2729 0a20 2020 2020 2020 2020 2020  ta').           
+00051dd0: 2072 6573 756c 7473 2e61 7070 656e 6428   results.append(
+00051de0: 7365 6c66 2e70 6172 7365 5f70 6f73 6974  self.parse_posit
+00051df0: 696f 6e28 7261 7750 6f73 6974 696f 6e29  ion(rawPosition)
+00051e00: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00051e10: 2073 656c 662e 6669 6c74 6572 5f62 795f   self.filter_by_
+00051e20: 6172 7261 7928 7265 7375 6c74 732c 2027  array(results, '
+00051e30: 7379 6d62 6f6c 272c 2073 796d 626f 6c73  symbol', symbols
+00051e40: 2c20 4661 6c73 6529 0a0a 2020 2020 6173  , False)..    as
+00051e50: 796e 6320 6465 6620 6665 7463 685f 7573  ync def fetch_us
+00051e60: 6463 5f70 6f73 6974 696f 6e73 2873 656c  dc_positions(sel
+00051e70: 662c 2073 796d 626f 6c73 3a20 4f70 7469  f, symbols: Opti
+00051e80: 6f6e 616c 5b4c 6973 745b 7374 725d 5d20  onal[List[str]] 
+00051e90: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
+00051ea0: 7d29 3a0a 2020 2020 2020 2020 6177 6169  }):.        awai
+00051eb0: 7420 7365 6c66 2e6c 6f61 645f 6d61 726b  t self.load_mark
+00051ec0: 6574 7328 290a 2020 2020 2020 2020 7379  ets().        sy
+00051ed0: 6d62 6f6c 7320 3d20 7365 6c66 2e6d 6172  mbols = self.mar
+00051ee0: 6b65 745f 7379 6d62 6f6c 7328 7379 6d62  ket_symbols(symb
+00051ef0: 6f6c 7329 0a20 2020 2020 2020 2072 6571  ols).        req
+00051f00: 7565 7374 203d 207b 7d0a 2020 2020 2020  uest = {}.      
+00051f10: 2020 6d61 726b 6574 203d 204e 6f6e 650a    market = None.
+00051f20: 2020 2020 2020 2020 7479 7065 203d 204e          type = N
+00051f30: 6f6e 650a 2020 2020 2020 2020 6966 2069  one.        if i
+00051f40: 7369 6e73 7461 6e63 6528 7379 6d62 6f6c  sinstance(symbol
+00051f50: 732c 206c 6973 7429 3a0a 2020 2020 2020  s, list):.      
+00051f60: 2020 2020 2020 6c65 6e67 7468 203d 206c        length = l
+00051f70: 656e 2873 796d 626f 6c73 290a 2020 2020  en(symbols).    
+00051f80: 2020 2020 2020 2020 6966 206c 656e 6774          if lengt
+00051f90: 6820 213d 2031 3a0a 2020 2020 2020 2020  h != 1:.        
+00051fa0: 2020 2020 2020 2020 7261 6973 6520 4172          raise Ar
+00051fb0: 6775 6d65 6e74 7352 6571 7569 7265 6428  gumentsRequired(
+00051fc0: 7365 6c66 2e69 6420 2b20 2720 6665 7463  self.id + ' fetc
+00051fd0: 6855 5344 4350 6f73 6974 696f 6e73 2829  hUSDCPositions()
+00051fe0: 2074 616b 6573 2061 6e20 6172 7261 7920   takes an array 
+00051ff0: 7769 7468 2065 7861 6374 6c79 206f 6e65  with exactly one
+00052000: 2073 796d 626f 6c27 290a 2020 2020 2020   symbol').      
+00052010: 2020 2020 2020 7379 6d62 6f6c 203d 2073        symbol = s
+00052020: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+00052030: 7379 6d62 6f6c 732c 2030 290a 2020 2020  symbols, 0).    
+00052040: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
+00052050: 2073 656c 662e 6d61 726b 6574 2873 796d   self.market(sym
+00052060: 626f 6c29 0a20 2020 2020 2020 2020 2020  bol).           
+00052070: 2072 6571 7565 7374 5b27 7379 6d62 6f6c   request['symbol
+00052080: 275d 203d 206d 6172 6b65 745b 2769 6427  '] = market['id'
+00052090: 5d0a 2020 2020 2020 2020 656c 6966 2073  ].        elif s
+000520a0: 796d 626f 6c73 2069 7320 6e6f 7420 4e6f  ymbols is not No
+000520b0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+000520c0: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
+000520d0: 726b 6574 2873 796d 626f 6c73 290a 2020  rket(symbols).  
+000520e0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+000520f0: 745b 2773 796d 626f 6c27 5d20 3d20 6d61  t['symbol'] = ma
+00052100: 726b 6574 5b27 6964 275d 0a20 2020 2020  rket['id'].     
+00052110: 2020 2074 7970 652c 2070 6172 616d 7320     type, params 
+00052120: 3d20 7365 6c66 2e68 616e 646c 655f 6d61  = self.handle_ma
+00052130: 726b 6574 5f74 7970 655f 616e 645f 7061  rket_type_and_pa
+00052140: 7261 6d73 2827 6665 7463 6855 5344 4350  rams('fetchUSDCP
+00052150: 6f73 6974 696f 6e73 272c 206d 6172 6b65  ositions', marke
+00052160: 742c 2070 6172 616d 7329 0a20 2020 2020  t, params).     
+00052170: 2020 2072 6571 7565 7374 5b27 6361 7465     request['cate
+00052180: 676f 7279 275d 203d 2027 4f50 5449 4f4e  gory'] = 'OPTION
+00052190: 2720 6966 2028 7479 7065 203d 3d20 276f  ' if (type == 'o
+000521a0: 7074 696f 6e27 2920 656c 7365 2027 5045  ption') else 'PE
+000521b0: 5250 4554 5541 4c27 0a20 2020 2020 2020  RPETUAL'.       
+000521c0: 2072 6573 706f 6e73 6520 3d20 6177 6169   response = awai
+000521d0: 7420 7365 6c66 2e70 7269 7661 7465 506f  t self.privatePo
+000521e0: 7374 4f70 7469 6f6e 5573 6463 4f70 656e  stOptionUsdcOpen
+000521f0: 6170 6950 7269 7661 7465 5631 5175 6572  apiPrivateV1Quer
+00052200: 7950 6f73 6974 696f 6e28 7365 6c66 2e65  yPosition(self.e
+00052210: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
+00052220: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
+00052230: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+00052240: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+00052250: 2020 2020 2272 6573 756c 7422 3a20 7b0a      "result": {.
+00052260: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00052270: 2020 2020 2020 2263 7572 736f 7222 3a20        "cursor": 
+00052280: 2242 5443 2d33 3144 4543 3231 2d32 3430  "BTC-31DEC21-240
+00052290: 3030 2d50 2533 4131 3634 3038 3334 3432  00-P%3A164083442
+000522a0: 3134 3331 2532 4342 5443 2d33 3144 4543  1431%2CBTC-31DEC
+000522b0: 3231 2d32 3430 3030 2d50 2533 4131 3634  21-24000-P%3A164
+000522c0: 3038 3334 3432 3134 3331 222c 0a20 2020  0834421431",.   
+000522d0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+000522e0: 2020 2022 7265 7375 6c74 546f 7461 6c53     "resultTotalS
+000522f0: 697a 6522 3a20 312c 0a20 2020 2020 2020  ize": 1,.       
+00052300: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00052310: 6461 7461 4c69 7374 223a 205b 0a20 2020  dataList": [.   
+00052320: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00052330: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
+00052340: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00052350: 2020 2022 7379 6d62 6f6c 223a 2022 4254     "symbol": "BT
+00052360: 432d 3331 4445 4332 312d 3234 3030 302d  C-31DEC21-24000-
+00052370: 5022 2c0a 2020 2020 2020 2020 2320 2020  P",.        #   
+00052380: 2020 2020 2020 2020 2020 2020 2020 226c                "l
+00052390: 6576 6572 6167 6522 3a20 2222 2c0a 2020  everage": "",.  
+000523a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000523b0: 2020 2020 2020 2020 226f 6363 436c 6f73          "occClos
+000523c0: 696e 6746 6565 223a 2022 222c 0a20 2020  ingFee": "",.   
+000523d0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+000523e0: 2020 2020 2020 2022 6c69 7150 7269 6365         "liqPrice
+000523f0: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
+00052400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00052410: 2022 706f 7369 7469 6f6e 5661 6c75 6522   "positionValue"
+00052420: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
+00052430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00052440: 2274 616b 6550 726f 6669 7422 3a20 2222  "takeProfit": ""
+00052450: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00052460: 2020 2020 2020 2020 2020 2020 2272 6973              "ris
+00052470: 6b49 6422 3a20 2222 2c0a 2020 2020 2020  kId": "",.      
+00052480: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00052490: 2020 2020 2274 7261 696c 696e 6753 746f      "trailingSto
+000524a0: 7022 3a20 2222 2c0a 2020 2020 2020 2020  p": "",.        
+000524b0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000524c0: 2020 2275 6e72 6561 6c69 7365 6450 6e6c    "unrealisedPnl
+000524d0: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
+000524e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000524f0: 2022 6372 6561 7465 6441 7422 3a20 2231   "createdAt": "1
+00052500: 3634 3038 3334 3432 3134 3331 222c 0a20  640834421431",. 
+00052510: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00052520: 2020 2020 2020 2020 2022 6d61 726b 5072           "markPr
+00052530: 6963 6522 3a20 2230 2e30 3022 2c0a 2020  ice": "0.00",.  
+00052540: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00052550: 2020 2020 2020 2020 2263 756d 5265 616c          "cumReal
+00052560: 6973 6564 506e 6c22 3a20 2222 2c0a 2020  isedPnl": "",.  
+00052570: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00052580: 2020 2020 2020 2020 2270 6f73 6974 696f          "positio
+00052590: 6e4d 4d22 3a20 2233 3539 2e35 3237 3122  nMM": "359.5271"
+000525a0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000525b0: 2020 2020 2020 2020 2020 2020 2270 6f73              "pos
+000525c0: 6974 696f 6e49 4d22 3a20 2234 3637 2e30  itionIM": "467.0
+000525d0: 3633 3322 2c0a 2020 2020 2020 2020 2320  633",.        # 
+000525e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000525f0: 2275 7064 6174 6564 4174 223a 2022 3136  "updatedAt": "16
+00052600: 3430 3833 3434 3231 3433 3122 2c0a 2020  40834421431",.  
+00052610: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00052620: 2020 2020 2020 2020 2274 7053 4c4d 6f64          "tpSLMod
+00052630: 6522 3a20 2222 2c0a 2020 2020 2020 2020  e": "",.        
+00052640: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00052650: 2020 2273 6964 6522 3a20 2253 656c 6c22    "side": "Sell"
+00052660: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00052670: 2020 2020 2020 2020 2020 2020 2262 7573              "bus
+00052680: 7450 7269 6365 223a 2022 222c 0a20 2020  tPrice": "",.   
+00052690: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+000526a0: 2020 2020 2020 2022 6465 6c65 7665 7261         "delevera
+000526b0: 6765 496e 6469 6361 746f 7222 3a20 302c  geIndicator": 0,
+000526c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000526d0: 2020 2020 2020 2020 2020 2022 656e 7472             "entr
+000526e0: 7950 7269 6365 223a 2022 312e 3422 2c0a  yPrice": "1.4",.
+000526f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00052700: 2020 2020 2020 2020 2020 2273 697a 6522            "size"
+00052710: 3a20 222d 302e 3130 3022 2c0a 2020 2020  : "-0.100",.    
+00052720: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00052730: 2020 2020 2020 2273 6573 7369 6f6e 5250        "sessionRP
+00052740: 4c22 3a20 2222 2c0a 2020 2020 2020 2020  L": "",.        
+00052750: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00052760: 2020 2270 6f73 6974 696f 6e53 7461 7475    "positionStatu
+00052770: 7322 3a20 2222 2c0a 2020 2020 2020 2020  s": "",.        
+00052780: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00052790: 2020 2273 6573 7369 6f6e 5550 4c22 3a20    "sessionUPL": 
+000527a0: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
+000527b0: 2020 2020 2020 2020 2020 2020 2020 2273                "s
+000527c0: 746f 704c 6f73 7322 3a20 2222 2c0a 2020  topLoss": "",.  
+000527d0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000527e0: 2020 2020 2020 2020 226f 7264 6572 4d61          "orderMa
+000527f0: 7267 696e 223a 2022 222c 0a20 2020 2020  rgin": "",.     
+00052800: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00052810: 2020 2020 2022 7365 7373 696f 6e41 7667       "sessionAvg
+00052820: 5072 6963 6522 3a20 2231 2e35 220a 2020  Price": "1.5".  
+00052830: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00052840: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00052850: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00052860: 5d0a 2020 2020 2020 2020 2320 2020 2020  ].        #     
+00052870: 2020 2020 7d2c 0a20 2020 2020 2020 2023      },.        #
+00052880: 2020 2020 2020 2020 2022 7265 7443 6f64           "retCod
+00052890: 6522 3a20 302c 0a20 2020 2020 2020 2023  e": 0,.        #
+000528a0: 2020 2020 2020 2020 2022 7265 744d 7367           "retMsg
+000528b0: 223a 2022 5375 6363 6573 732e 220a 2020  ": "Success.".  
+000528c0: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
+000528d0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+000528e0: 7265 7375 6c74 203d 2073 656c 662e 7361  result = self.sa
+000528f0: 6665 5f76 616c 7565 2872 6573 706f 6e73  fe_value(respons
+00052900: 652c 2027 7265 7375 6c74 272c 207b 7d29  e, 'result', {})
+00052910: 0a20 2020 2020 2020 2070 6f73 6974 696f  .        positio
+00052920: 6e73 203d 2073 656c 662e 7361 6665 5f76  ns = self.safe_v
+00052930: 616c 7565 2872 6573 756c 742c 2027 6461  alue(result, 'da
+00052940: 7461 4c69 7374 272c 205b 5d29 0a20 2020  taList', []).   
+00052950: 2020 2020 2072 6573 756c 7473 203d 205b       results = [
+00052960: 5d0a 2020 2020 2020 2020 666f 7220 6920  ].        for i 
+00052970: 696e 2072 616e 6765 2830 2c20 6c65 6e28  in range(0, len(
+00052980: 706f 7369 7469 6f6e 7329 293a 0a20 2020  positions)):.   
+00052990: 2020 2020 2020 2020 2072 6177 506f 7369           rawPosi
+000529a0: 7469 6f6e 203d 2070 6f73 6974 696f 6e73  tion = positions
+000529b0: 5b69 5d0a 2020 2020 2020 2020 2020 2020  [i].            
+000529c0: 6966 2028 2764 6174 6127 2069 6e20 7261  if ('data' in ra
+000529d0: 7750 6f73 6974 696f 6e29 2061 6e64 2028  wPosition) and (
+000529e0: 2769 735f 7661 6c69 6427 2069 6e20 7261  'is_valid' in ra
+000529f0: 7750 6f73 6974 696f 6e29 3a0a 2020 2020  wPosition):.    
+00052a00: 2020 2020 2020 2020 2020 2020 2320 6675              # fu
+00052a10: 7475 7265 7320 6f6e 6c79 0a20 2020 2020  tures only.     
+00052a20: 2020 2020 2020 2020 2020 2072 6177 506f             rawPo
+00052a30: 7369 7469 6f6e 203d 2073 656c 662e 7361  sition = self.sa
+00052a40: 6665 5f76 616c 7565 2872 6177 506f 7369  fe_value(rawPosi
+00052a50: 7469 6f6e 2c20 2764 6174 6127 290a 2020  tion, 'data').  
+00052a60: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+00052a70: 732e 6170 7065 6e64 2873 656c 662e 7061  s.append(self.pa
+00052a80: 7273 655f 706f 7369 7469 6f6e 2872 6177  rse_position(raw
+00052a90: 506f 7369 7469 6f6e 2c20 6d61 726b 6574  Position, market
+00052aa0: 2929 0a20 2020 2020 2020 2072 6574 7572  )).        retur
+00052ab0: 6e20 7365 6c66 2e66 696c 7465 725f 6279  n self.filter_by
+00052ac0: 5f61 7272 6179 2872 6573 756c 7473 2c20  _array(results, 
+00052ad0: 2773 796d 626f 6c27 2c20 7379 6d62 6f6c  'symbol', symbol
+00052ae0: 732c 2046 616c 7365 290a 0a20 2020 2061  s, False)..    a
+00052af0: 7379 6e63 2064 6566 2066 6574 6368 5f64  sync def fetch_d
+00052b00: 6572 6976 6174 6976 6573 5f70 6f73 6974  erivatives_posit
+00052b10: 696f 6e73 2873 656c 662c 2073 796d 626f  ions(self, symbo
+00052b20: 6c73 3a20 4f70 7469 6f6e 616c 5b4c 6973  ls: Optional[Lis
+00052b30: 745b 7374 725d 5d20 3d20 4e6f 6e65 2c20  t[str]] = None, 
+00052b40: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
+00052b50: 2020 2020 6177 6169 7420 7365 6c66 2e6c      await self.l
+00052b60: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
+00052b70: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
+00052b80: 7b7d 0a20 2020 2020 2020 206d 6172 6b65  {}.        marke
+00052b90: 7420 3d20 4e6f 6e65 0a20 2020 2020 2020  t = None.       
+00052ba0: 2073 6574 746c 6520 3d20 4e6f 6e65 0a20   settle = None. 
+00052bb0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+00052bc0: 616e 6365 2873 796d 626f 6c73 2c20 6c69  ance(symbols, li
+00052bd0: 7374 293a 0a20 2020 2020 2020 2020 2020  st):.           
+00052be0: 2073 796d 626f 6c73 4c65 6e67 7468 203d   symbolsLength =
+00052bf0: 206c 656e 2873 796d 626f 6c73 290a 2020   len(symbols).  
+00052c00: 2020 2020 2020 2020 2020 6966 2073 796d            if sym
+00052c10: 626f 6c73 4c65 6e67 7468 203e 2031 3a0a  bolsLength > 1:.
+00052c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00052c30: 7261 6973 6520 4172 6775 6d65 6e74 7352  raise ArgumentsR
+00052c40: 6571 7569 7265 6428 7365 6c66 2e69 6420  equired(self.id 
+00052c50: 2b20 2720 6665 7463 6850 6f73 6974 696f  + ' fetchPositio
+00052c60: 6e73 2829 2064 6f65 7320 6e6f 7420 6163  ns() does not ac
+00052c70: 6365 7074 2061 6e20 6172 7261 7920 7769  cept an array wi
+00052c80: 7468 206d 6f72 6520 7468 616e 206f 6e65  th more than one
+00052c90: 2073 796d 626f 6c27 290a 2020 2020 2020   symbol').      
+00052ca0: 2020 2020 2020 6966 2073 796d 626f 6c73        if symbols
+00052cb0: 4c65 6e67 7468 203d 3d20 313a 0a20 2020  Length == 1:.   
+00052cc0: 2020 2020 2020 2020 2020 2020 206d 6172               mar
+00052cd0: 6b65 7420 3d20 7365 6c66 2e6d 6172 6b65  ket = self.marke
+00052ce0: 7428 7379 6d62 6f6c 735b 305d 290a 2020  t(symbols[0]).  
+00052cf0: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00052d00: 7474 6c65 203d 206d 6172 6b65 745b 2773  ttle = market['s
+00052d10: 6574 746c 6527 5d0a 2020 2020 2020 2020  ettle'].        
+00052d20: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+00052d30: 2773 796d 626f 6c27 5d20 3d20 6d61 726b  'symbol'] = mark
+00052d40: 6574 5b27 6964 275d 0a20 2020 2020 2020  et['id'].       
+00052d50: 2073 6574 746c 652c 2070 6172 616d 7320   settle, params 
+00052d60: 3d20 7365 6c66 2e68 616e 646c 655f 6f70  = self.handle_op
+00052d70: 7469 6f6e 5f61 6e64 5f70 6172 616d 7328  tion_and_params(
+00052d80: 7061 7261 6d73 2c20 2766 6574 6368 506f  params, 'fetchPo
+00052d90: 7369 7469 6f6e 7327 2c20 2773 6574 746c  sitions', 'settl
+00052da0: 6527 2c20 7365 7474 6c65 290a 2020 2020  e', settle).    
+00052db0: 2020 2020 6966 2073 6574 746c 6520 6973      if settle is
+00052dc0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00052dd0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+00052de0: 7365 7474 6c65 436f 696e 275d 203d 2073  settleCoin'] = s
+00052df0: 6574 746c 650a 2020 2020 2020 2020 7375  ettle.        su
+00052e00: 6254 7970 6520 3d20 4e6f 6e65 0a20 2020  bType = None.   
+00052e10: 2020 2020 2073 7562 5479 7065 2c20 7061       subType, pa
+00052e20: 7261 6d73 203d 2073 656c 662e 6861 6e64  rams = self.hand
+00052e30: 6c65 5f73 7562 5f74 7970 655f 616e 645f  le_sub_type_and_
+00052e40: 7061 7261 6d73 2827 6665 7463 6850 6f73  params('fetchPos
+00052e50: 6974 696f 6e73 272c 206d 6172 6b65 742c  itions', market,
+00052e60: 2070 6172 616d 732c 2027 6c69 6e65 6172   params, 'linear
+00052e70: 2729 0a20 2020 2020 2020 2072 6571 7565  ').        reque
+00052e80: 7374 5b27 6361 7465 676f 7279 275d 203d  st['category'] =
+00052e90: 2073 7562 5479 7065 0a20 2020 2020 2020   subType.       
+00052ea0: 2072 6573 706f 6e73 6520 3d20 6177 6169   response = awai
+00052eb0: 7420 7365 6c66 2e70 7269 7661 7465 4765  t self.privateGe
+00052ec0: 7456 3550 6f73 6974 696f 6e4c 6973 7428  tV5PositionList(
+00052ed0: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
+00052ee0: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
+00052ef0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+00052f00: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
+00052f10: 2320 2020 2020 2020 2020 2272 6574 436f  #         "retCo
+00052f20: 6465 223a 2030 2c0a 2020 2020 2020 2020  de": 0,.        
+00052f30: 2320 2020 2020 2020 2020 2272 6574 4d73  #         "retMs
+00052f40: 6722 3a20 224f 4b22 2c0a 2020 2020 2020  g": "OK",.      
+00052f50: 2020 2320 2020 2020 2020 2020 2272 6573    #         "res
+00052f60: 756c 7422 3a20 7b0a 2020 2020 2020 2020  ult": {.        
+00052f70: 2320 2020 2020 2020 2020 2020 2020 226e  #             "n
+00052f80: 6578 7450 6167 6543 7572 736f 7222 3a20  extPageCursor": 
+00052f90: 2275 7064 6174 6541 7425 3344 3136 3732  "updateAt%3D1672
+00052fa0: 3237 3933 3232 3636 3822 2c0a 2020 2020  279322668",.    
+00052fb0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00052fc0: 2020 2263 6174 6567 6f72 7922 3a20 226c    "category": "l
+00052fd0: 696e 6561 7222 2c0a 2020 2020 2020 2020  inear",.        
+00052fe0: 2320 2020 2020 2020 2020 2020 2020 226c  #             "l
+00052ff0: 6973 7422 3a20 5b0a 2020 2020 2020 2020  ist": [.        
+00053000: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00053010: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
 00053020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00053030: 2273 746f 704c 6f73 7322 3a20 2222 2c0a  "stopLoss": "",.
-00053040: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00053050: 2020 2020 2020 2020 2020 2020 2020 2274                "t
-00053060: 7261 6465 4d6f 6465 223a 2030 0a20 2020  radeMode": 0.   
-00053070: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00053080: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-00053090: 2023 2020 2020 2020 2020 2020 2020 205d   #             ]
-000530a0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000530b0: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
-000530c0: 2020 2020 2020 2020 2272 6574 4578 7449          "retExtI
-000530d0: 6e66 6f22 3a20 7b7d 2c0a 2020 2020 2020  nfo": {},.      
-000530e0: 2020 2320 2020 2020 2020 2020 2274 696d    #         "tim
-000530f0: 6522 3a20 3136 3732 3238 3032 3139 3136  e": 167228021916
-00053100: 390a 2020 2020 2020 2020 2320 2020 2020  9.        #     
-00053110: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
-00053120: 2020 2020 7265 7375 6c74 203d 2073 656c      result = sel
-00053130: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
-00053140: 706f 6e73 652c 2027 7265 7375 6c74 272c  ponse, 'result',
-00053150: 207b 7d29 0a20 2020 2020 2020 2070 6f73   {}).        pos
-00053160: 6974 696f 6e73 203d 2073 656c 662e 7361  itions = self.sa
-00053170: 6665 5f76 616c 7565 2872 6573 756c 742c  fe_value(result,
-00053180: 2027 6c69 7374 272c 205b 5d29 0a20 2020   'list', []).   
-00053190: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-000531a0: 2e70 6172 7365 5f70 6f73 6974 696f 6e73  .parse_positions
-000531b0: 2870 6f73 6974 696f 6e73 2c20 7379 6d62  (positions, symb
-000531c0: 6f6c 732c 2070 6172 616d 7329 0a0a 2020  ols, params)..  
-000531d0: 2020 6173 796e 6320 6465 6620 6665 7463    async def fetc
-000531e0: 685f 706f 7369 7469 6f6e 7328 7365 6c66  h_positions(self
-000531f0: 2c20 7379 6d62 6f6c 733a 204f 7074 696f  , symbols: Optio
-00053200: 6e61 6c5b 4c69 7374 5b73 7472 5d5d 203d  nal[List[str]] =
-00053210: 204e 6f6e 652c 2070 6172 616d 733d 7b7d   None, params={}
-00053220: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
-00053230: 2020 2020 2020 2066 6574 6368 2061 6c6c         fetch all
-00053240: 206f 7065 6e20 706f 7369 7469 6f6e 730a   open positions.
-00053250: 2020 2020 2020 2020 3a70 6172 616d 205b          :param [
-00053260: 7374 725d 7c4e 6f6e 6520 7379 6d62 6f6c  str]|None symbol
-00053270: 733a 206c 6973 7420 6f66 2075 6e69 6669  s: list of unifi
-00053280: 6564 206d 6172 6b65 7420 7379 6d62 6f6c  ed market symbol
-00053290: 730a 2020 2020 2020 2020 3a70 6172 616d  s.        :param
-000532a0: 2064 6963 7420 7061 7261 6d73 3a20 6578   dict params: ex
-000532b0: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
-000532c0: 7065 6369 6669 6320 746f 2074 6865 2062  pecific to the b
-000532d0: 7962 6974 2061 7069 2065 6e64 706f 696e  ybit api endpoin
-000532e0: 740a 2020 2020 2020 2020 3a72 6574 7572  t.        :retur
-000532f0: 6e73 205b 6469 6374 5d3a 2061 206c 6973  ns [dict]: a lis
-00053300: 7420 6f66 2060 706f 7369 7469 6f6e 2073  t of `position s
-00053310: 7472 7563 7475 7265 203c 6874 7470 733a  tructure <https:
-00053320: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
-00053330: 232f 3f69 643d 706f 7369 7469 6f6e 2d73  #/?id=position-s
-00053340: 7472 7563 7475 7265 3e60 0a20 2020 2020  tructure>`.     
-00053350: 2020 2022 2222 0a20 2020 2020 2020 2069     """.        i
-00053360: 6620 6973 696e 7374 616e 6365 2873 796d  f isinstance(sym
-00053370: 626f 6c73 2c20 6c69 7374 293a 0a20 2020  bols, list):.   
-00053380: 2020 2020 2020 2020 2073 796d 626f 6c73           symbols
-00053390: 4c65 6e67 7468 203d 206c 656e 2873 796d  Length = len(sym
-000533a0: 626f 6c73 290a 2020 2020 2020 2020 2020  bols).          
-000533b0: 2020 6966 2073 796d 626f 6c73 4c65 6e67    if symbolsLeng
-000533c0: 7468 203e 2031 3a0a 2020 2020 2020 2020  th > 1:.        
-000533d0: 2020 2020 2020 2020 7261 6973 6520 4172          raise Ar
-000533e0: 6775 6d65 6e74 7352 6571 7569 7265 6428  gumentsRequired(
-000533f0: 7365 6c66 2e69 6420 2b20 2720 6665 7463  self.id + ' fetc
-00053400: 6850 6f73 6974 696f 6e73 2829 2064 6f65  hPositions() doe
-00053410: 7320 6e6f 7420 6163 6365 7074 2061 6e20  s not accept an 
-00053420: 6172 7261 7920 7769 7468 206d 6f72 6520  array with more 
-00053430: 7468 616e 206f 6e65 2073 796d 626f 6c27  than one symbol'
-00053440: 290a 2020 2020 2020 2020 656c 6966 2073  ).        elif s
-00053450: 796d 626f 6c73 2069 7320 6e6f 7420 4e6f  ymbols is not No
-00053460: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00053470: 7379 6d62 6f6c 7320 3d20 5b73 796d 626f  symbols = [symbo
-00053480: 6c73 5d0a 2020 2020 2020 2020 6177 6169  ls].        awai
-00053490: 7420 7365 6c66 2e6c 6f61 645f 6d61 726b  t self.load_mark
-000534a0: 6574 7328 290a 2020 2020 2020 2020 7379  ets().        sy
-000534b0: 6d62 6f6c 7320 3d20 7365 6c66 2e6d 6172  mbols = self.mar
-000534c0: 6b65 745f 7379 6d62 6f6c 7328 7379 6d62  ket_symbols(symb
-000534d0: 6f6c 7329 0a20 2020 2020 2020 2065 6e61  ols).        ena
-000534e0: 626c 6555 6e69 6669 6564 4d61 7267 696e  bleUnifiedMargin
-000534f0: 2c20 656e 6162 6c65 556e 6966 6965 6441  , enableUnifiedA
-00053500: 6363 6f75 6e74 203d 2061 7761 6974 2073  ccount = await s
-00053510: 656c 662e 6973 5f75 6e69 6669 6564 5f65  elf.is_unified_e
-00053520: 6e61 626c 6564 2829 0a20 2020 2020 2020  nabled().       
-00053530: 2073 6574 746c 6520 3d20 7365 6c66 2e73   settle = self.s
-00053540: 6166 655f 7374 7269 6e67 2870 6172 616d  afe_string(param
-00053550: 732c 2027 7365 7474 6c65 436f 696e 2729  s, 'settleCoin')
-00053560: 0a20 2020 2020 2020 2070 6172 616d 734f  .        paramsO
-00053570: 6d69 7474 6564 203d 204e 6f6e 650a 2020  mitted = None.  
-00053580: 2020 2020 2020 6966 2073 6574 746c 6520        if settle 
-00053590: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-000535a0: 2020 2020 2073 6574 746c 652c 2070 6172       settle, par
-000535b0: 616d 734f 6d69 7474 6564 203d 2073 656c  amsOmitted = sel
-000535c0: 662e 6861 6e64 6c65 5f6f 7074 696f 6e5f  f.handle_option_
-000535d0: 616e 645f 7061 7261 6d73 2870 6172 616d  and_params(param
-000535e0: 732c 2027 6665 7463 6850 6f73 6974 696f  s, 'fetchPositio
-000535f0: 6e73 272c 2027 7365 7474 6c65 272c 2073  ns', 'settle', s
-00053600: 6574 746c 6529 0a20 2020 2020 2020 2069  ettle).        i
-00053610: 7355 7364 6353 6574 746c 6564 203d 2073  sUsdcSettled = s
-00053620: 6574 746c 6520 3d3d 2027 5553 4443 270a  ettle == 'USDC'.
-00053630: 2020 2020 2020 2020 7375 6254 7970 6520          subType 
-00053640: 3d20 4e6f 6e65 0a20 2020 2020 2020 2073  = None.        s
-00053650: 7562 5479 7065 2c20 7061 7261 6d73 4f6d  ubType, paramsOm
-00053660: 6974 7465 6420 3d20 7365 6c66 2e68 616e  itted = self.han
-00053670: 646c 655f 7375 625f 7479 7065 5f61 6e64  dle_sub_type_and
-00053680: 5f70 6172 616d 7328 2766 6574 6368 506f  _params('fetchPo
-00053690: 7369 7469 6f6e 7327 2c20 4e6f 6e65 2c20  sitions', None, 
-000536a0: 7061 7261 6d73 4f6d 6974 7465 6429 0a20  paramsOmitted). 
-000536b0: 2020 2020 2020 2069 7349 6e76 6572 7365         isInverse
-000536c0: 203d 2073 7562 5479 7065 203d 3d20 2769   = subType == 'i
-000536d0: 6e76 6572 7365 270a 2020 2020 2020 2020  nverse'.        
-000536e0: 6973 4c69 6e65 6172 5365 7474 6c65 203d  isLinearSettle =
-000536f0: 2069 7355 7364 6353 6574 746c 6564 206f   isUsdcSettled o
-00053700: 7220 2873 6574 746c 6520 3d3d 2027 5553  r (settle == 'US
-00053710: 4454 2729 0a20 2020 2020 2020 2069 6620  DT').        if 
-00053720: 6973 496e 7665 7273 6520 616e 6420 6973  isInverse and is
-00053730: 4c69 6e65 6172 5365 7474 6c65 3a0a 2020  LinearSettle:.  
-00053740: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00053750: 4172 6775 6d65 6e74 7352 6571 7569 7265  ArgumentsRequire
-00053760: 6428 7365 6c66 2e69 6420 2b20 2720 6665  d(self.id + ' fe
-00053770: 7463 6850 6f73 6974 696f 6e73 2077 6974  tchPositions wit
-00053780: 6820 696e 7665 7273 6520 7375 6254 7970  h inverse subTyp
-00053790: 6520 7265 7175 6972 6573 2073 6574 746c  e requires settl
-000537a0: 6520 746f 206e 6f74 2062 6520 5553 4454  e to not be USDT
-000537b0: 206f 7220 5553 4443 2729 0a20 2020 2020   or USDC').     
-000537c0: 2020 2069 6620 2865 6e61 626c 6555 6e69     if (enableUni
-000537d0: 6669 6564 4d61 7267 696e 206f 7220 656e  fiedMargin or en
-000537e0: 6162 6c65 556e 6966 6965 6441 6363 6f75  ableUnifiedAccou
-000537f0: 6e74 2920 616e 6420 6e6f 7420 6973 496e  nt) and not isIn
-00053800: 7665 7273 653a 0a20 2020 2020 2020 2020  verse:.         
-00053810: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
-00053820: 7365 6c66 2e66 6574 6368 5f75 6e69 6669  self.fetch_unifi
-00053830: 6564 5f70 6f73 6974 696f 6e73 2873 796d  ed_positions(sym
-00053840: 626f 6c73 2c20 7061 7261 6d73 290a 2020  bols, params).  
-00053850: 2020 2020 2020 656c 6966 2069 7355 7364        elif isUsd
-00053860: 6353 6574 746c 6564 3a0a 2020 2020 2020  cSettled:.      
-00053870: 2020 2020 2020 7265 7475 726e 2061 7761        return awa
-00053880: 6974 2073 656c 662e 6665 7463 685f 7573  it self.fetch_us
-00053890: 6463 5f70 6f73 6974 696f 6e73 2873 796d  dc_positions(sym
-000538a0: 626f 6c73 2c20 7061 7261 6d73 4f6d 6974  bols, paramsOmit
-000538b0: 7465 6429 0a20 2020 2020 2020 2065 6c73  ted).        els
-000538c0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-000538d0: 6574 7572 6e20 6177 6169 7420 7365 6c66  eturn await self
-000538e0: 2e66 6574 6368 5f64 6572 6976 6174 6976  .fetch_derivativ
-000538f0: 6573 5f70 6f73 6974 696f 6e73 2873 796d  es_positions(sym
-00053900: 626f 6c73 2c20 7061 7261 6d73 290a 0a20  bols, params).. 
-00053910: 2020 2064 6566 2070 6172 7365 5f70 6f73     def parse_pos
-00053920: 6974 696f 6e28 7365 6c66 2c20 706f 7369  ition(self, posi
-00053930: 7469 6f6e 2c20 6d61 726b 6574 3d4e 6f6e  tion, market=Non
-00053940: 6529 3a0a 2020 2020 2020 2020 230a 2020  e):.        #.  
-00053950: 2020 2020 2020 2320 6c69 6e65 6172 2073        # linear s
-00053960: 7761 700a 2020 2020 2020 2020 230a 2020  wap.        #.  
-00053970: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
-00053980: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00053990: 2270 6f73 6974 696f 6e49 6478 223a 2030  "positionIdx": 0
-000539a0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-000539b0: 2020 2020 2272 6973 6b49 6422 3a20 2231      "riskId": "1
-000539c0: 3122 2c0a 2020 2020 2020 2020 2320 2020  1",.        #   
-000539d0: 2020 2020 2020 2273 796d 626f 6c22 3a20        "symbol": 
-000539e0: 2245 5448 5553 4454 222c 0a20 2020 2020  "ETHUSDT",.     
-000539f0: 2020 2023 2020 2020 2020 2020 2022 7369     #         "si
-00053a00: 6465 223a 2022 4275 7922 2c0a 2020 2020  de": "Buy",.    
-00053a10: 2020 2020 2320 2020 2020 2020 2020 2273      #         "s
-00053a20: 697a 6522 3a20 2230 2e31 3022 2c0a 2020  ize": "0.10",.  
-00053a30: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00053a40: 2270 6f73 6974 696f 6e56 616c 7565 223a  "positionValue":
-00053a50: 2022 3131 392e 3834 3522 2c0a 2020 2020   "119.845",.    
-00053a60: 2020 2020 2320 2020 2020 2020 2020 2265      #         "e
-00053a70: 6e74 7279 5072 6963 6522 3a20 2231 3139  ntryPrice": "119
-00053a80: 382e 3435 222c 0a20 2020 2020 2020 2023  8.45",.        #
-00053a90: 2020 2020 2020 2020 2022 7472 6164 654d           "tradeM
-00053aa0: 6f64 6522 3a20 312c 0a20 2020 2020 2020  ode": 1,.       
-00053ab0: 2023 2020 2020 2020 2020 2022 6175 746f   #         "auto
-00053ac0: 4164 644d 6172 6769 6e22 3a20 302c 0a20  AddMargin": 0,. 
-00053ad0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00053ae0: 2022 6c65 7665 7261 6765 223a 2022 342e   "leverage": "4.
-00053af0: 3222 2c0a 2020 2020 2020 2020 2320 2020  2",.        #   
-00053b00: 2020 2020 2020 2270 6f73 6974 696f 6e42        "positionB
-00053b10: 616c 616e 6365 223a 2022 3238 2e35 3839  alance": "28.589
-00053b20: 3331 3131 3822 2c0a 2020 2020 2020 2020  31118",.        
-00053b30: 2320 2020 2020 2020 2020 226c 6971 5072  #         "liqPr
-00053b40: 6963 6522 3a20 2239 3139 2e31 3022 2c0a  ice": "919.10",.
-00053b50: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00053b60: 2020 2262 7573 7450 7269 6365 223a 2022    "bustPrice": "
-00053b70: 3931 332e 3135 222c 0a20 2020 2020 2020  913.15",.       
-00053b80: 2023 2020 2020 2020 2020 2022 7461 6b65   #         "take
-00053b90: 5072 6f66 6974 223a 2022 302e 3030 222c  Profit": "0.00",
-00053ba0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00053bb0: 2020 2022 7374 6f70 4c6f 7373 223a 2022     "stopLoss": "
-00053bc0: 302e 3030 222c 0a20 2020 2020 2020 2023  0.00",.        #
-00053bd0: 2020 2020 2020 2020 2022 7472 6169 6c69           "traili
-00053be0: 6e67 5374 6f70 223a 2022 302e 3030 222c  ngStop": "0.00",
-00053bf0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00053c00: 2020 2022 756e 7265 616c 6973 6564 506e     "unrealisedPn
-00053c10: 6c22 3a20 2230 2e30 3833 222c 0a20 2020  l": "0.083",.   
-00053c20: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00053c30: 6372 6561 7465 6454 696d 6522 3a20 2231  createdTime": "1
-00053c40: 3636 3930 3937 3234 3431 3932 222c 0a20  669097244192",. 
-00053c50: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00053c60: 2022 7570 6461 7465 6454 696d 6522 3a20   "updatedTime": 
-00053c70: 2231 3636 3934 3133 3132 3631 3930 222c  "1669413126190",
-00053c80: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00053c90: 2020 2022 7470 536c 4d6f 6465 223a 2022     "tpSlMode": "
-00053ca0: 4675 6c6c 222c 0a20 2020 2020 2020 2023  Full",.        #
-00053cb0: 2020 2020 2020 2020 2022 7269 736b 4c69           "riskLi
-00053cc0: 6d69 7456 616c 7565 223a 2022 3930 3030  mitValue": "9000
-00053cd0: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
-00053ce0: 2020 2020 2020 2022 6163 7469 7665 5072         "activePr
-00053cf0: 6963 6522 3a20 2230 2e30 3022 0a20 2020  ice": "0.00".   
-00053d00: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
-00053d10: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-00053d20: 2075 7364 630a 2020 2020 2020 2020 2320   usdc.        # 
-00053d30: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-00053d40: 2020 2020 2022 7379 6d62 6f6c 223a 2242       "symbol":"B
-00053d50: 5443 5045 5250 222c 0a20 2020 2020 2020  TCPERP",.       
-00053d60: 2023 2020 2020 2020 2022 6c65 7665 7261   #       "levera
-00053d70: 6765 223a 2231 2e30 3022 2c0a 2020 2020  ge":"1.00",.    
-00053d80: 2020 2020 2320 2020 2020 2020 226f 6363      #       "occ
-00053d90: 436c 6f73 696e 6746 6565 223a 2230 2e30  ClosingFee":"0.0
-00053da0: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
-00053db0: 2020 2020 2020 226c 6971 5072 6963 6522        "liqPrice"
-00053dc0: 3a22 222c 0a20 2020 2020 2020 2023 2020  :"",.        #  
-00053dd0: 2020 2020 2022 706f 7369 7469 6f6e 5661       "positionVa
-00053de0: 6c75 6522 3a22 3330 2e38 3130 3022 2c0a  lue":"30.8100",.
-00053df0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00053e00: 2274 616b 6550 726f 6669 7422 3a22 302e  "takeProfit":"0.
-00053e10: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-00053e20: 2020 2020 2272 6973 6b49 6422 3a22 3130      "riskId":"10
-00053e30: 3030 3122 2c0a 2020 2020 2020 2020 2320  001",.        # 
-00053e40: 2020 2020 2020 2274 7261 696c 696e 6753        "trailingS
-00053e50: 746f 7022 3a22 302e 3030 3030 222c 0a20  top":"0.0000",. 
-00053e60: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
-00053e70: 756e 7265 616c 6973 6564 506e 6c22 3a22  unrealisedPnl":"
-00053e80: 302e 3030 3030 222c 0a20 2020 2020 2020  0.0000",.       
-00053e90: 2023 2020 2020 2020 2022 6372 6561 7465   #       "create
-00053ea0: 6441 7422 3a22 3136 3532 3435 3137 3935  dAt":"1652451795
-00053eb0: 3330 3522 2c0a 2020 2020 2020 2020 2320  305",.        # 
-00053ec0: 2020 2020 2020 226d 6172 6b50 7269 6365        "markPrice
-00053ed0: 223a 2233 3038 3039 2e34 3122 2c0a 2020  ":"30809.41",.  
-00053ee0: 2020 2020 2020 2320 2020 2020 2020 2263        #       "c
-00053ef0: 756d 5265 616c 6973 6564 506e 6c22 3a22  umRealisedPnl":"
-00053f00: 302e 3030 3030 222c 0a20 2020 2020 2020  0.0000",.       
-00053f10: 2023 2020 2020 2020 2022 706f 7369 7469   #       "positi
-00053f20: 6f6e 4d4d 223a 2230 2e31 3534 3122 2c0a  onMM":"0.1541",.
-00053f30: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00053f40: 2270 6f73 6974 696f 6e49 4d22 3a22 3330  "positionIM":"30
-00053f50: 2e38 3130 3022 2c0a 2020 2020 2020 2020  .8100",.        
-00053f60: 2320 2020 2020 2020 2275 7064 6174 6564  #       "updated
-00053f70: 4174 223a 2231 3635 3234 3531 3739 3533  At":"16524517953
-00053f80: 3035 222c 0a20 2020 2020 2020 2023 2020  05",.        #  
-00053f90: 2020 2020 2022 7470 534c 4d6f 6465 223a       "tpSLMode":
-00053fa0: 2255 4e4b 4e4f 574e 222c 0a20 2020 2020  "UNKNOWN",.     
-00053fb0: 2020 2023 2020 2020 2020 2022 7369 6465     #       "side
-00053fc0: 223a 2242 7579 222c 0a20 2020 2020 2020  ":"Buy",.       
-00053fd0: 2023 2020 2020 2020 2022 6275 7374 5072   #       "bustPr
-00053fe0: 6963 6522 3a22 222c 0a20 2020 2020 2020  ice":"",.       
-00053ff0: 2023 2020 2020 2020 2022 6465 6c65 7665   #       "deleve
-00054000: 7261 6765 496e 6469 6361 746f 7222 3a22  rageIndicator":"
-00054010: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-00054020: 2020 2020 2265 6e74 7279 5072 6963 6522      "entryPrice"
-00054030: 3a22 3330 3831 302e 3022 2c0a 2020 2020  :"30810.0",.    
-00054040: 2020 2020 2320 2020 2020 2020 2273 697a      #       "siz
-00054050: 6522 3a22 302e 3030 3122 2c0a 2020 2020  e":"0.001",.    
-00054060: 2020 2020 2320 2020 2020 2020 2273 6573      #       "ses
-00054070: 7369 6f6e 5250 4c22 3a22 302e 3030 3030  sionRPL":"0.0000
-00054080: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00054090: 2020 2022 706f 7369 7469 6f6e 5374 6174     "positionStat
-000540a0: 7573 223a 224e 4f52 4d41 4c22 2c0a 2020  us":"NORMAL",.  
-000540b0: 2020 2020 2020 2320 2020 2020 2020 2273        #       "s
-000540c0: 6573 7369 6f6e 5550 4c22 3a22 2d30 2e30  essionUPL":"-0.0
-000540d0: 3030 3622 2c0a 2020 2020 2020 2020 2320  006",.        # 
-000540e0: 2020 2020 2020 2273 746f 704c 6f73 7322        "stopLoss"
-000540f0: 3a22 302e 3022 2c0a 2020 2020 2020 2020  :"0.0",.        
-00054100: 2320 2020 2020 2020 226f 7264 6572 4d61  #       "orderMa
-00054110: 7267 696e 223a 2230 2e30 3030 3022 2c0a  rgin":"0.0000",.
-00054120: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00054130: 2273 6573 7369 6f6e 4176 6750 7269 6365  "sessionAvgPrice
-00054140: 223a 2233 3038 3130 2e30 220a 2020 2020  ":"30810.0".    
-00054150: 2020 2020 2320 2020 207d 0a20 2020 2020      #    }.     
-00054160: 2020 2023 0a20 2020 2020 2020 2023 2075     #.        # u
-00054170: 6e69 6669 6564 206d 6172 6769 6e0a 2020  nified margin.  
-00054180: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00054190: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
-000541a0: 2320 2020 2020 2020 2020 2273 796d 626f  #         "symbo
-000541b0: 6c22 3a20 2245 5448 5553 4454 222c 0a20  l": "ETHUSDT",. 
-000541c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000541d0: 2022 6c65 7665 7261 6765 223a 2022 3130   "leverage": "10
+00053030: 2020 2273 796d 626f 6c22 3a20 2258 5250    "symbol": "XRP
+00053040: 5553 4454 222c 0a20 2020 2020 2020 2023  USDT",.        #
+00053050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00053060: 2020 2020 2022 6c65 7665 7261 6765 223a       "leverage":
+00053070: 2022 3130 222c 0a20 2020 2020 2020 2023   "10",.        #
+00053080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00053090: 2020 2020 2022 6176 6750 7269 6365 223a       "avgPrice":
+000530a0: 2022 302e 3336 3135 222c 0a20 2020 2020   "0.3615",.     
+000530b0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+000530c0: 2020 2020 2020 2020 2022 6c69 7150 7269           "liqPri
+000530d0: 6365 223a 2022 302e 3030 3031 222c 0a20  ce": "0.0001",. 
+000530e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000530f0: 2020 2020 2020 2020 2020 2020 2022 7269               "ri
+00053100: 736b 4c69 6d69 7456 616c 7565 223a 2022  skLimitValue": "
+00053110: 3230 3030 3030 222c 0a20 2020 2020 2020  200000",.       
+00053120: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00053130: 2020 2020 2020 2022 7461 6b65 5072 6f66         "takeProf
+00053140: 6974 223a 2022 222c 0a20 2020 2020 2020  it": "",.       
+00053150: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00053160: 2020 2020 2020 2022 706f 7369 7469 6f6e         "position
+00053170: 5661 6c75 6522 3a20 2233 362e 3135 222c  Value": "36.15",
+00053180: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00053190: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000531a0: 7470 736c 4d6f 6465 223a 2022 4675 6c6c  tpslMode": "Full
+000531b0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+000531c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000531d0: 2022 7269 736b 4964 223a 2034 312c 0a20   "riskId": 41,. 
+000531e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000531f0: 2020 2020 2020 2020 2020 2020 2022 7472               "tr
+00053200: 6169 6c69 6e67 5374 6f70 223a 2022 3022  ailingStop": "0"
+00053210: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00053220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00053230: 2275 6e72 6561 6c69 7365 6450 6e6c 223a  "unrealisedPnl":
+00053240: 2022 2d31 2e38 3322 2c0a 2020 2020 2020   "-1.83",.      
+00053250: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00053260: 2020 2020 2020 2020 226d 6172 6b50 7269          "markPri
+00053270: 6365 223a 2022 302e 3334 3332 222c 0a20  ce": "0.3432",. 
+00053280: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00053290: 2020 2020 2020 2020 2020 2020 2022 6375               "cu
+000532a0: 6d52 6561 6c69 7365 6450 6e6c 223a 2022  mRealisedPnl": "
+000532b0: 302e 3438 3830 3538 3736 222c 0a20 2020  0.48805876",.   
+000532c0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+000532d0: 2020 2020 2020 2020 2020 2022 706f 7369             "posi
+000532e0: 7469 6f6e 4d4d 223a 2022 302e 3338 3130  tionMM": "0.3810
+000532f0: 3231 222c 0a20 2020 2020 2020 2023 2020  21",.        #  
+00053300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00053310: 2020 2022 6372 6561 7465 6454 696d 6522     "createdTime"
+00053320: 3a20 2231 3637 3231 3231 3138 3232 3136  : "1672121182216
+00053330: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00053340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00053350: 2022 706f 7369 7469 6f6e 4964 7822 3a20   "positionIdx": 
+00053360: 302c 0a20 2020 2020 2020 2023 2020 2020  0,.        #    
+00053370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00053380: 2022 706f 7369 7469 6f6e 494d 223a 2022   "positionIM": "
+00053390: 332e 3633 3435 3231 222c 0a20 2020 2020  3.634521",.     
+000533a0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+000533b0: 2020 2020 2020 2020 2022 7570 6461 7465           "update
+000533c0: 6454 696d 6522 3a20 2231 3637 3232 3739  dTime": "1672279
+000533d0: 3332 3236 3638 222c 0a20 2020 2020 2020  322668",.       
+000533e0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+000533f0: 2020 2020 2020 2022 7369 6465 223a 2022         "side": "
+00053400: 4275 7922 2c0a 2020 2020 2020 2020 2320  Buy",.        # 
+00053410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00053420: 2020 2020 2262 7573 7450 7269 6365 223a      "bustPrice":
+00053430: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
+00053440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00053450: 2020 2022 7369 7a65 223a 2022 3130 3022     "size": "100"
+00053460: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00053470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00053480: 2270 6f73 6974 696f 6e53 7461 7475 7322  "positionStatus"
+00053490: 3a20 224e 6f72 6d61 6c22 2c0a 2020 2020  : "Normal",.    
+000534a0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+000534b0: 2020 2020 2020 2020 2020 2273 746f 704c            "stopL
+000534c0: 6f73 7322 3a20 2222 2c0a 2020 2020 2020  oss": "",.      
+000534d0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+000534e0: 2020 2020 2020 2020 2274 7261 6465 4d6f          "tradeMo
+000534f0: 6465 223a 2030 0a20 2020 2020 2020 2023  de": 0.        #
+00053500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00053510: 207d 0a20 2020 2020 2020 2023 2020 2020   }.        #    
+00053520: 2020 2020 2020 2020 205d 0a20 2020 2020           ].     
+00053530: 2020 2023 2020 2020 2020 2020 207d 2c0a     #         },.
+00053540: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00053550: 2020 2272 6574 4578 7449 6e66 6f22 3a20    "retExtInfo": 
+00053560: 7b7d 2c0a 2020 2020 2020 2020 2320 2020  {},.        #   
+00053570: 2020 2020 2020 2274 696d 6522 3a20 3136        "time": 16
+00053580: 3732 3238 3032 3139 3136 390a 2020 2020  72280219169.    
+00053590: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+000535a0: 2020 2020 230a 2020 2020 2020 2020 7265      #.        re
+000535b0: 7375 6c74 203d 2073 656c 662e 7361 6665  sult = self.safe
+000535c0: 5f76 616c 7565 2872 6573 706f 6e73 652c  _value(response,
+000535d0: 2027 7265 7375 6c74 272c 207b 7d29 0a20   'result', {}). 
+000535e0: 2020 2020 2020 2070 6f73 6974 696f 6e73         positions
+000535f0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+00053600: 7565 2872 6573 756c 742c 2027 6c69 7374  ue(result, 'list
+00053610: 272c 205b 5d29 0a20 2020 2020 2020 2072  ', []).        r
+00053620: 6574 7572 6e20 7365 6c66 2e70 6172 7365  eturn self.parse
+00053630: 5f70 6f73 6974 696f 6e73 2870 6f73 6974  _positions(posit
+00053640: 696f 6e73 2c20 7379 6d62 6f6c 732c 2070  ions, symbols, p
+00053650: 6172 616d 7329 0a0a 2020 2020 6173 796e  arams)..    asyn
+00053660: 6320 6465 6620 6665 7463 685f 706f 7369  c def fetch_posi
+00053670: 7469 6f6e 7328 7365 6c66 2c20 7379 6d62  tions(self, symb
+00053680: 6f6c 733a 204f 7074 696f 6e61 6c5b 4c69  ols: Optional[Li
+00053690: 7374 5b73 7472 5d5d 203d 204e 6f6e 652c  st[str]] = None,
+000536a0: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
+000536b0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+000536c0: 2066 6574 6368 2061 6c6c 206f 7065 6e20   fetch all open 
+000536d0: 706f 7369 7469 6f6e 730a 2020 2020 2020  positions.      
+000536e0: 2020 3a70 6172 616d 205b 7374 725d 7c4e    :param [str]|N
+000536f0: 6f6e 6520 7379 6d62 6f6c 733a 206c 6973  one symbols: lis
+00053700: 7420 6f66 2075 6e69 6669 6564 206d 6172  t of unified mar
+00053710: 6b65 7420 7379 6d62 6f6c 730a 2020 2020  ket symbols.    
+00053720: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
+00053730: 7061 7261 6d73 3a20 6578 7472 6120 7061  params: extra pa
+00053740: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
+00053750: 6320 746f 2074 6865 2062 7962 6974 2061  c to the bybit a
+00053760: 7069 2065 6e64 706f 696e 740a 2020 2020  pi endpoint.    
+00053770: 2020 2020 3a72 6574 7572 6e73 205b 6469      :returns [di
+00053780: 6374 5d3a 2061 206c 6973 7420 6f66 2060  ct]: a list of `
+00053790: 706f 7369 7469 6f6e 2073 7472 7563 7475  position structu
+000537a0: 7265 203c 6874 7470 733a 2f2f 646f 6373  re <https://docs
+000537b0: 2e63 6378 742e 636f 6d2f 232f 3f69 643d  .ccxt.com/#/?id=
+000537c0: 706f 7369 7469 6f6e 2d73 7472 7563 7475  position-structu
+000537d0: 7265 3e60 0a20 2020 2020 2020 2022 2222  re>`.        """
+000537e0: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
+000537f0: 7374 616e 6365 2873 796d 626f 6c73 2c20  stance(symbols, 
+00053800: 6c69 7374 293a 0a20 2020 2020 2020 2020  list):.         
+00053810: 2020 2073 796d 626f 6c73 4c65 6e67 7468     symbolsLength
+00053820: 203d 206c 656e 2873 796d 626f 6c73 290a   = len(symbols).
+00053830: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+00053840: 796d 626f 6c73 4c65 6e67 7468 203e 2031  ymbolsLength > 1
+00053850: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00053860: 2020 7261 6973 6520 4172 6775 6d65 6e74    raise Argument
+00053870: 7352 6571 7569 7265 6428 7365 6c66 2e69  sRequired(self.i
+00053880: 6420 2b20 2720 6665 7463 6850 6f73 6974  d + ' fetchPosit
+00053890: 696f 6e73 2829 2064 6f65 7320 6e6f 7420  ions() does not 
+000538a0: 6163 6365 7074 2061 6e20 6172 7261 7920  accept an array 
+000538b0: 7769 7468 206d 6f72 6520 7468 616e 206f  with more than o
+000538c0: 6e65 2073 796d 626f 6c27 290a 2020 2020  ne symbol').    
+000538d0: 2020 2020 656c 6966 2073 796d 626f 6c73      elif symbols
+000538e0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+000538f0: 2020 2020 2020 2020 2020 7379 6d62 6f6c            symbol
+00053900: 7320 3d20 5b73 796d 626f 6c73 5d0a 2020  s = [symbols].  
+00053910: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
+00053920: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
+00053930: 2020 2020 2020 2020 7379 6d62 6f6c 7320          symbols 
+00053940: 3d20 7365 6c66 2e6d 6172 6b65 745f 7379  = self.market_sy
+00053950: 6d62 6f6c 7328 7379 6d62 6f6c 7329 0a20  mbols(symbols). 
+00053960: 2020 2020 2020 2065 6e61 626c 6555 6e69         enableUni
+00053970: 6669 6564 4d61 7267 696e 2c20 656e 6162  fiedMargin, enab
+00053980: 6c65 556e 6966 6965 6441 6363 6f75 6e74  leUnifiedAccount
+00053990: 203d 2061 7761 6974 2073 656c 662e 6973   = await self.is
+000539a0: 5f75 6e69 6669 6564 5f65 6e61 626c 6564  _unified_enabled
+000539b0: 2829 0a20 2020 2020 2020 2073 6574 746c  ().        settl
+000539c0: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
+000539d0: 7269 6e67 2870 6172 616d 732c 2027 7365  ring(params, 'se
+000539e0: 7474 6c65 436f 696e 2729 0a20 2020 2020  ttleCoin').     
+000539f0: 2020 2070 6172 616d 734f 6d69 7474 6564     paramsOmitted
+00053a00: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+00053a10: 6966 2073 6574 746c 6520 6973 204e 6f6e  if settle is Non
+00053a20: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
+00053a30: 6574 746c 652c 2070 6172 616d 734f 6d69  ettle, paramsOmi
+00053a40: 7474 6564 203d 2073 656c 662e 6861 6e64  tted = self.hand
+00053a50: 6c65 5f6f 7074 696f 6e5f 616e 645f 7061  le_option_and_pa
+00053a60: 7261 6d73 2870 6172 616d 732c 2027 6665  rams(params, 'fe
+00053a70: 7463 6850 6f73 6974 696f 6e73 272c 2027  tchPositions', '
+00053a80: 7365 7474 6c65 272c 2073 6574 746c 6529  settle', settle)
+00053a90: 0a20 2020 2020 2020 2069 7355 7364 6353  .        isUsdcS
+00053aa0: 6574 746c 6564 203d 2073 6574 746c 6520  ettled = settle 
+00053ab0: 3d3d 2027 5553 4443 270a 2020 2020 2020  == 'USDC'.      
+00053ac0: 2020 7375 6254 7970 6520 3d20 4e6f 6e65    subType = None
+00053ad0: 0a20 2020 2020 2020 2073 7562 5479 7065  .        subType
+00053ae0: 2c20 7061 7261 6d73 4f6d 6974 7465 6420  , paramsOmitted 
+00053af0: 3d20 7365 6c66 2e68 616e 646c 655f 7375  = self.handle_su
+00053b00: 625f 7479 7065 5f61 6e64 5f70 6172 616d  b_type_and_param
+00053b10: 7328 2766 6574 6368 506f 7369 7469 6f6e  s('fetchPosition
+00053b20: 7327 2c20 4e6f 6e65 2c20 7061 7261 6d73  s', None, params
+00053b30: 4f6d 6974 7465 6429 0a20 2020 2020 2020  Omitted).       
+00053b40: 2069 7349 6e76 6572 7365 203d 2073 7562   isInverse = sub
+00053b50: 5479 7065 203d 3d20 2769 6e76 6572 7365  Type == 'inverse
+00053b60: 270a 2020 2020 2020 2020 6973 4c69 6e65  '.        isLine
+00053b70: 6172 5365 7474 6c65 203d 2069 7355 7364  arSettle = isUsd
+00053b80: 6353 6574 746c 6564 206f 7220 2873 6574  cSettled or (set
+00053b90: 746c 6520 3d3d 2027 5553 4454 2729 0a20  tle == 'USDT'). 
+00053ba0: 2020 2020 2020 2069 6620 6973 496e 7665         if isInve
+00053bb0: 7273 6520 616e 6420 6973 4c69 6e65 6172  rse and isLinear
+00053bc0: 5365 7474 6c65 3a0a 2020 2020 2020 2020  Settle:.        
+00053bd0: 2020 2020 7261 6973 6520 4172 6775 6d65      raise Argume
+00053be0: 6e74 7352 6571 7569 7265 6428 7365 6c66  ntsRequired(self
+00053bf0: 2e69 6420 2b20 2720 6665 7463 6850 6f73  .id + ' fetchPos
+00053c00: 6974 696f 6e73 2077 6974 6820 696e 7665  itions with inve
+00053c10: 7273 6520 7375 6254 7970 6520 7265 7175  rse subType requ
+00053c20: 6972 6573 2073 6574 746c 6520 746f 206e  ires settle to n
+00053c30: 6f74 2062 6520 5553 4454 206f 7220 5553  ot be USDT or US
+00053c40: 4443 2729 0a20 2020 2020 2020 2069 6620  DC').        if 
+00053c50: 2865 6e61 626c 6555 6e69 6669 6564 4d61  (enableUnifiedMa
+00053c60: 7267 696e 206f 7220 656e 6162 6c65 556e  rgin or enableUn
+00053c70: 6966 6965 6441 6363 6f75 6e74 2920 616e  ifiedAccount) an
+00053c80: 6420 6e6f 7420 6973 496e 7665 7273 653a  d not isInverse:
+00053c90: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00053ca0: 7572 6e20 6177 6169 7420 7365 6c66 2e66  urn await self.f
+00053cb0: 6574 6368 5f75 6e69 6669 6564 5f70 6f73  etch_unified_pos
+00053cc0: 6974 696f 6e73 2873 796d 626f 6c73 2c20  itions(symbols, 
+00053cd0: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
+00053ce0: 656c 6966 2069 7355 7364 6353 6574 746c  elif isUsdcSettl
+00053cf0: 6564 3a0a 2020 2020 2020 2020 2020 2020  ed:.            
+00053d00: 7265 7475 726e 2061 7761 6974 2073 656c  return await sel
+00053d10: 662e 6665 7463 685f 7573 6463 5f70 6f73  f.fetch_usdc_pos
+00053d20: 6974 696f 6e73 2873 796d 626f 6c73 2c20  itions(symbols, 
+00053d30: 7061 7261 6d73 4f6d 6974 7465 6429 0a20  paramsOmitted). 
+00053d40: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00053d50: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00053d60: 6177 6169 7420 7365 6c66 2e66 6574 6368  await self.fetch
+00053d70: 5f64 6572 6976 6174 6976 6573 5f70 6f73  _derivatives_pos
+00053d80: 6974 696f 6e73 2873 796d 626f 6c73 2c20  itions(symbols, 
+00053d90: 7061 7261 6d73 290a 0a20 2020 2064 6566  params)..    def
+00053da0: 2070 6172 7365 5f70 6f73 6974 696f 6e28   parse_position(
+00053db0: 7365 6c66 2c20 706f 7369 7469 6f6e 2c20  self, position, 
+00053dc0: 6d61 726b 6574 3d4e 6f6e 6529 3a0a 2020  market=None):.  
+00053dd0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+00053de0: 2320 6c69 6e65 6172 2073 7761 700a 2020  # linear swap.  
+00053df0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+00053e00: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
+00053e10: 2320 2020 2020 2020 2020 2270 6f73 6974  #         "posit
+00053e20: 696f 6e49 6478 223a 2030 2c0a 2020 2020  ionIdx": 0,.    
+00053e30: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
+00053e40: 6973 6b49 6422 3a20 2231 3122 2c0a 2020  iskId": "11",.  
+00053e50: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00053e60: 2273 796d 626f 6c22 3a20 2245 5448 5553  "symbol": "ETHUS
+00053e70: 4454 222c 0a20 2020 2020 2020 2023 2020  DT",.        #  
+00053e80: 2020 2020 2020 2022 7369 6465 223a 2022         "side": "
+00053e90: 4275 7922 2c0a 2020 2020 2020 2020 2320  Buy",.        # 
+00053ea0: 2020 2020 2020 2020 2273 697a 6522 3a20          "size": 
+00053eb0: 2230 2e31 3022 2c0a 2020 2020 2020 2020  "0.10",.        
+00053ec0: 2320 2020 2020 2020 2020 2270 6f73 6974  #         "posit
+00053ed0: 696f 6e56 616c 7565 223a 2022 3131 392e  ionValue": "119.
+00053ee0: 3834 3522 2c0a 2020 2020 2020 2020 2320  845",.        # 
+00053ef0: 2020 2020 2020 2020 2265 6e74 7279 5072          "entryPr
+00053f00: 6963 6522 3a20 2231 3139 382e 3435 222c  ice": "1198.45",
+00053f10: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00053f20: 2020 2022 7472 6164 654d 6f64 6522 3a20     "tradeMode": 
+00053f30: 312c 0a20 2020 2020 2020 2023 2020 2020  1,.        #    
+00053f40: 2020 2020 2022 6175 746f 4164 644d 6172       "autoAddMar
+00053f50: 6769 6e22 3a20 302c 0a20 2020 2020 2020  gin": 0,.       
+00053f60: 2023 2020 2020 2020 2020 2022 6c65 7665   #         "leve
+00053f70: 7261 6765 223a 2022 342e 3222 2c0a 2020  rage": "4.2",.  
+00053f80: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00053f90: 2270 6f73 6974 696f 6e42 616c 616e 6365  "positionBalance
+00053fa0: 223a 2022 3238 2e35 3839 3331 3131 3822  ": "28.58931118"
+00053fb0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00053fc0: 2020 2020 226c 6971 5072 6963 6522 3a20      "liqPrice": 
+00053fd0: 2239 3139 2e31 3022 2c0a 2020 2020 2020  "919.10",.      
+00053fe0: 2020 2320 2020 2020 2020 2020 2262 7573    #         "bus
+00053ff0: 7450 7269 6365 223a 2022 3931 332e 3135  tPrice": "913.15
+00054000: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00054010: 2020 2020 2022 7461 6b65 5072 6f66 6974       "takeProfit
+00054020: 223a 2022 302e 3030 222c 0a20 2020 2020  ": "0.00",.     
+00054030: 2020 2023 2020 2020 2020 2020 2022 7374     #         "st
+00054040: 6f70 4c6f 7373 223a 2022 302e 3030 222c  opLoss": "0.00",
+00054050: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00054060: 2020 2022 7472 6169 6c69 6e67 5374 6f70     "trailingStop
+00054070: 223a 2022 302e 3030 222c 0a20 2020 2020  ": "0.00",.     
+00054080: 2020 2023 2020 2020 2020 2020 2022 756e     #         "un
+00054090: 7265 616c 6973 6564 506e 6c22 3a20 2230  realisedPnl": "0
+000540a0: 2e30 3833 222c 0a20 2020 2020 2020 2023  .083",.        #
+000540b0: 2020 2020 2020 2020 2022 6372 6561 7465           "create
+000540c0: 6454 696d 6522 3a20 2231 3636 3930 3937  dTime": "1669097
+000540d0: 3234 3431 3932 222c 0a20 2020 2020 2020  244192",.       
+000540e0: 2023 2020 2020 2020 2020 2022 7570 6461   #         "upda
+000540f0: 7465 6454 696d 6522 3a20 2231 3636 3934  tedTime": "16694
+00054100: 3133 3132 3631 3930 222c 0a20 2020 2020  13126190",.     
+00054110: 2020 2023 2020 2020 2020 2020 2022 7470     #         "tp
+00054120: 536c 4d6f 6465 223a 2022 4675 6c6c 222c  SlMode": "Full",
+00054130: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00054140: 2020 2022 7269 736b 4c69 6d69 7456 616c     "riskLimitVal
+00054150: 7565 223a 2022 3930 3030 3030 222c 0a20  ue": "900000",. 
+00054160: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00054170: 2022 6163 7469 7665 5072 6963 6522 3a20   "activePrice": 
+00054180: 2230 2e30 3022 0a20 2020 2020 2020 2023  "0.00".        #
+00054190: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+000541a0: 0a20 2020 2020 2020 2023 2075 7364 630a  .        # usdc.
+000541b0: 2020 2020 2020 2020 2320 2020 207b 0a20          #    {. 
+000541c0: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
+000541d0: 7379 6d62 6f6c 223a 2242 5443 5045 5250  symbol":"BTCPERP
 000541e0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-000541f0: 2020 2020 2022 7570 6461 7465 6454 696d       "updatedTim
-00054200: 6522 3a20 3136 3537 3731 3139 3439 3934  e": 165771194994
-00054210: 352c 0a20 2020 2020 2020 2023 2020 2020  5,.        #    
-00054220: 2020 2020 2022 7369 6465 223a 2022 4275       "side": "Bu
-00054230: 7922 2c0a 2020 2020 2020 2020 2320 2020  y",.        #   
-00054240: 2020 2020 2020 2270 6f73 6974 696f 6e56        "positionV
-00054250: 616c 7565 223a 2022 3533 362e 3932 3530  alue": "536.9250
-00054260: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
-00054270: 2020 2020 2020 2020 2022 7461 6b65 5072           "takePr
-00054280: 6f66 6974 223a 2022 222c 0a20 2020 2020  ofit": "",.     
-00054290: 2020 2023 2020 2020 2020 2020 2022 7470     #         "tp
-000542a0: 736c 4d6f 6465 223a 2022 4675 6c6c 222c  slMode": "Full",
-000542b0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000542c0: 2020 2022 7269 736b 4964 223a 2031 312c     "riskId": 11,
-000542d0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000542e0: 2020 2022 7472 6169 6c69 6e67 5374 6f70     "trailingStop
-000542f0: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
-00054300: 2020 2020 2020 2020 2022 656e 7472 7950           "entryP
-00054310: 7269 6365 223a 2022 3130 3733 2e38 3530  rice": "1073.850
-00054320: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
-00054330: 2320 2020 2020 2020 2020 2275 6e72 6561  #         "unrea
-00054340: 6c69 7365 6450 6e6c 223a 2022 222c 0a20  lisedPnl": "",. 
-00054350: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00054360: 2022 6d61 726b 5072 6963 6522 3a20 2231   "markPrice": "1
-00054370: 3038 302e 3635 3030 3030 3030 222c 0a20  080.65000000",. 
-00054380: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00054390: 2022 7369 7a65 223a 2022 302e 3530 3030   "size": "0.5000
-000543a0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-000543b0: 2020 2020 2022 706f 7369 7469 6f6e 5374       "positionSt
-000543c0: 6174 7573 223a 2022 6e6f 726d 616c 222c  atus": "normal",
-000543d0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000543e0: 2020 2022 7374 6f70 4c6f 7373 223a 2022     "stopLoss": "
-000543f0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00054400: 2020 2020 2022 6375 6d52 6561 6c69 7365       "cumRealise
-00054410: 6450 6e6c 223a 2022 2d30 2e33 3232 3135  dPnl": "-0.32215
-00054420: 3530 3022 2c0a 2020 2020 2020 2020 2320  500",.        # 
-00054430: 2020 2020 2020 2020 2270 6f73 6974 696f          "positio
-00054440: 6e4d 4d22 3a20 2232 2e39 3734 3536 3435  nMM": "2.9745645
-00054450: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-00054460: 2020 2020 2020 2263 7265 6174 6564 5469        "createdTi
-00054470: 6d65 223a 2031 3635 3737 3131 3934 3939  me": 16577119499
-00054480: 3238 2c0a 2020 2020 2020 2020 2320 2020  28,.        #   
-00054490: 2020 2020 2020 2270 6f73 6974 696f 6e49        "positionI
-000544a0: 6478 223a 2030 2c0a 2020 2020 2020 2020  dx": 0,.        
-000544b0: 2320 2020 2020 2020 2020 2270 6f73 6974  #         "posit
-000544c0: 696f 6e49 4d22 3a20 2235 332e 3938 3234  ionIM": "53.9824
-000544d0: 3339 3530 220a 2020 2020 2020 2020 2320  3950".        # 
-000544e0: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
-000544f0: 2020 2020 2020 2020 2320 756e 6966 6965          # unifie
-00054500: 6420 6163 636f 756e 740a 2020 2020 2020  d account.      
-00054510: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
-00054520: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-00054530: 2020 2020 2020 2273 796d 626f 6c22 3a20        "symbol": 
-00054540: 2258 5250 5553 4454 222c 0a20 2020 2020  "XRPUSDT",.     
-00054550: 2020 2023 2020 2020 2020 2020 2022 6c65     #         "le
-00054560: 7665 7261 6765 223a 2022 3130 222c 0a20  verage": "10",. 
-00054570: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00054580: 2022 6176 6750 7269 6365 223a 2022 302e   "avgPrice": "0.
-00054590: 3336 3135 222c 0a20 2020 2020 2020 2023  3615",.        #
-000545a0: 2020 2020 2020 2020 2022 6c69 7150 7269           "liqPri
-000545b0: 6365 223a 2022 302e 3030 3031 222c 0a20  ce": "0.0001",. 
-000545c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000545d0: 2022 7269 736b 4c69 6d69 7456 616c 7565   "riskLimitValue
-000545e0: 223a 2022 3230 3030 3030 222c 0a20 2020  ": "200000",.   
-000545f0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00054600: 7461 6b65 5072 6f66 6974 223a 2022 222c  takeProfit": "",
-00054610: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00054620: 2020 2022 706f 7369 7469 6f6e 5661 6c75     "positionValu
-00054630: 6522 3a20 2233 362e 3135 222c 0a20 2020  e": "36.15",.   
-00054640: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00054650: 7470 736c 4d6f 6465 223a 2022 4675 6c6c  tpslMode": "Full
-00054660: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00054670: 2020 2020 2022 7269 736b 4964 223a 2034       "riskId": 4
-00054680: 312c 0a20 2020 2020 2020 2023 2020 2020  1,.        #    
-00054690: 2020 2020 2022 7472 6169 6c69 6e67 5374       "trailingSt
-000546a0: 6f70 223a 2022 3022 2c0a 2020 2020 2020  op": "0",.      
-000546b0: 2020 2320 2020 2020 2020 2020 2275 6e72    #         "unr
-000546c0: 6561 6c69 7365 6450 6e6c 223a 2022 2d31  ealisedPnl": "-1
-000546d0: 2e38 3322 2c0a 2020 2020 2020 2020 2320  .83",.        # 
-000546e0: 2020 2020 2020 2020 226d 6172 6b50 7269          "markPri
-000546f0: 6365 223a 2022 302e 3334 3332 222c 0a20  ce": "0.3432",. 
-00054700: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00054710: 2022 6375 6d52 6561 6c69 7365 6450 6e6c   "cumRealisedPnl
-00054720: 223a 2022 302e 3438 3830 3538 3736 222c  ": "0.48805876",
-00054730: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00054740: 2020 2022 706f 7369 7469 6f6e 4d4d 223a     "positionMM":
-00054750: 2022 302e 3338 3130 3231 222c 0a20 2020   "0.381021",.   
-00054760: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00054770: 6372 6561 7465 6454 696d 6522 3a20 2231  createdTime": "1
-00054780: 3637 3231 3231 3138 3232 3136 222c 0a20  672121182216",. 
-00054790: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000547a0: 2022 706f 7369 7469 6f6e 4964 7822 3a20   "positionIdx": 
-000547b0: 302c 0a20 2020 2020 2020 2023 2020 2020  0,.        #    
-000547c0: 2020 2020 2022 706f 7369 7469 6f6e 494d       "positionIM
-000547d0: 223a 2022 332e 3633 3435 3231 222c 0a20  ": "3.634521",. 
-000547e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000547f0: 2022 7570 6461 7465 6454 696d 6522 3a20   "updatedTime": 
-00054800: 2231 3637 3232 3739 3332 3236 3638 222c  "1672279322668",
-00054810: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00054820: 2020 2022 7369 6465 223a 2022 4275 7922     "side": "Buy"
-00054830: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00054840: 2020 2020 2262 7573 7450 7269 6365 223a      "bustPrice":
-00054850: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
-00054860: 2020 2020 2020 2022 7369 7a65 223a 2022         "size": "
-00054870: 3130 3022 2c0a 2020 2020 2020 2020 2320  100",.        # 
-00054880: 2020 2020 2020 2020 2270 6f73 6974 696f          "positio
-00054890: 6e53 7461 7475 7322 3a20 224e 6f72 6d61  nStatus": "Norma
-000548a0: 6c22 2c0a 2020 2020 2020 2020 2320 2020  l",.        #   
-000548b0: 2020 2020 2020 2273 746f 704c 6f73 7322        "stopLoss"
-000548c0: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
-000548d0: 2020 2020 2020 2020 2274 7261 6465 4d6f          "tradeMo
-000548e0: 6465 223a 2030 0a20 2020 2020 2020 2023  de": 0.        #
-000548f0: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
-00054900: 0a20 2020 2020 2020 2063 6f6e 7472 6163  .        contrac
-00054910: 7420 3d20 7365 6c66 2e73 6166 655f 7374  t = self.safe_st
-00054920: 7269 6e67 2870 6f73 6974 696f 6e2c 2027  ring(position, '
-00054930: 7379 6d62 6f6c 2729 0a20 2020 2020 2020  symbol').       
-00054940: 206d 6172 6b65 7420 3d20 7365 6c66 2e73   market = self.s
-00054950: 6166 655f 6d61 726b 6574 2863 6f6e 7472  afe_market(contr
-00054960: 6163 742c 206d 6172 6b65 742c 204e 6f6e  act, market, Non
-00054970: 652c 2027 636f 6e74 7261 6374 2729 0a20  e, 'contract'). 
-00054980: 2020 2020 2020 2073 697a 6520 3d20 5072         size = Pr
-00054990: 6563 6973 652e 7374 7269 6e67 5f61 6273  ecise.string_abs
-000549a0: 2873 656c 662e 7361 6665 5f73 7472 696e  (self.safe_strin
-000549b0: 6728 706f 7369 7469 6f6e 2c20 2773 697a  g(position, 'siz
-000549c0: 6527 2929 0a20 2020 2020 2020 2073 6964  e')).        sid
-000549d0: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
-000549e0: 7269 6e67 2870 6f73 6974 696f 6e2c 2027  ring(position, '
-000549f0: 7369 6465 2729 0a20 2020 2020 2020 2069  side').        i
-00054a00: 6620 7369 6465 2069 7320 6e6f 7420 4e6f  f side is not No
-00054a10: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00054a20: 6966 2073 6964 6520 3d3d 2027 4275 7927  if side == 'Buy'
-00054a30: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00054a40: 2020 7369 6465 203d 2027 6c6f 6e67 270a    side = 'long'.
-00054a50: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-00054a60: 2073 6964 6520 3d3d 2027 5365 6c6c 273a   side == 'Sell':
-00054a70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00054a80: 2073 6964 6520 3d20 2773 686f 7274 270a   side = 'short'.
-00054a90: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00054aa0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00054ab0: 2020 7369 6465 203d 204e 6f6e 650a 2020    side = None.  
-00054ac0: 2020 2020 2020 6e6f 7469 6f6e 616c 203d        notional =
-00054ad0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-00054ae0: 6728 706f 7369 7469 6f6e 2c20 2770 6f73  g(position, 'pos
-00054af0: 6974 696f 6e56 616c 7565 2729 0a20 2020  itionValue').   
-00054b00: 2020 2020 2075 6e72 6561 6c69 7365 6450       unrealisedP
-00054b10: 6e6c 203d 2073 656c 662e 6f6d 6974 5f7a  nl = self.omit_z
-00054b20: 6572 6f28 7365 6c66 2e73 6166 655f 7374  ero(self.safe_st
-00054b30: 7269 6e67 2870 6f73 6974 696f 6e2c 2027  ring(position, '
-00054b40: 756e 7265 616c 6973 6564 506e 6c27 2929  unrealisedPnl'))
-00054b50: 0a20 2020 2020 2020 2069 6e69 7469 616c  .        initial
-00054b60: 4d61 7267 696e 5374 7269 6e67 203d 2073  MarginString = s
-00054b70: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
-00054b80: 706f 7369 7469 6f6e 2c20 2770 6f73 6974  position, 'posit
-00054b90: 696f 6e49 4d27 290a 2020 2020 2020 2020  ionIM').        
-00054ba0: 6d61 696e 7465 6e61 6e63 654d 6172 6769  maintenanceMargi
-00054bb0: 6e53 7472 696e 6720 3d20 7365 6c66 2e73  nString = self.s
-00054bc0: 6166 655f 7374 7269 6e67 2870 6f73 6974  afe_string(posit
-00054bd0: 696f 6e2c 2027 706f 7369 7469 6f6e 4d4d  ion, 'positionMM
-00054be0: 2729 0a20 2020 2020 2020 2074 696d 6573  ').        times
-00054bf0: 7461 6d70 203d 2073 656c 662e 7061 7273  tamp = self.pars
-00054c00: 6538 3630 3128 7365 6c66 2e73 6166 655f  e8601(self.safe_
-00054c10: 7374 7269 6e67 2870 6f73 6974 696f 6e2c  string(position,
-00054c20: 2027 7570 6461 7465 645f 6174 2729 290a   'updated_at')).
-00054c30: 2020 2020 2020 2020 6966 2074 696d 6573          if times
-00054c40: 7461 6d70 2069 7320 4e6f 6e65 3a0a 2020  tamp is None:.  
-00054c50: 2020 2020 2020 2020 2020 7469 6d65 7374            timest
-00054c60: 616d 7020 3d20 7365 6c66 2e73 6166 655f  amp = self.safe_
-00054c70: 696e 7465 6765 725f 6e28 706f 7369 7469  integer_n(positi
-00054c80: 6f6e 2c20 5b27 7570 6461 7465 6454 696d  on, ['updatedTim
-00054c90: 6527 2c20 2775 7064 6174 6564 4174 275d  e', 'updatedAt']
-00054ca0: 290a 2020 2020 2020 2020 2320 6465 6661  ).        # defa
-00054cb0: 756c 7420 746f 2063 726f 7373 206f 6620  ult to cross of 
-00054cc0: 5553 4443 206d 6172 6769 6e65 6420 706f  USDC margined po
-00054cd0: 7369 7469 6f6e 730a 2020 2020 2020 2020  sitions.        
-00054ce0: 7472 6164 654d 6f64 6520 3d20 7365 6c66  tradeMode = self
-00054cf0: 2e73 6166 655f 696e 7465 6765 7228 706f  .safe_integer(po
-00054d00: 7369 7469 6f6e 2c20 2774 7261 6465 4d6f  sition, 'tradeMo
-00054d10: 6465 272c 2030 290a 2020 2020 2020 2020  de', 0).        
-00054d20: 6d61 7267 696e 4d6f 6465 203d 2027 6973  marginMode = 'is
-00054d30: 6f6c 6174 6564 2720 6966 2074 7261 6465  olated' if trade
-00054d40: 4d6f 6465 2065 6c73 6520 2763 726f 7373  Mode else 'cross
-00054d50: 270a 2020 2020 2020 2020 636f 6c6c 6174  '.        collat
-00054d60: 6572 616c 5374 7269 6e67 203d 2073 656c  eralString = sel
-00054d70: 662e 7361 6665 5f73 7472 696e 6728 706f  f.safe_string(po
-00054d80: 7369 7469 6f6e 2c20 2770 6f73 6974 696f  sition, 'positio
-00054d90: 6e42 616c 616e 6365 2729 0a20 2020 2020  nBalance').     
-00054da0: 2020 2065 6e74 7279 5072 6963 6520 3d20     entryPrice = 
-00054db0: 7365 6c66 2e6f 6d69 745f 7a65 726f 2873  self.omit_zero(s
-00054dc0: 656c 662e 7361 6665 5f73 7472 696e 675f  elf.safe_string_
-00054dd0: 3228 706f 7369 7469 6f6e 2c20 2765 6e74  2(position, 'ent
-00054de0: 7279 5072 6963 6527 2c20 2761 7667 5072  ryPrice', 'avgPr
-00054df0: 6963 6527 2929 0a20 2020 2020 2020 206c  ice')).        l
-00054e00: 6971 7569 6461 7469 6f6e 5072 6963 6520  iquidationPrice 
-00054e10: 3d20 7365 6c66 2e6f 6d69 745f 7a65 726f  = self.omit_zero
-00054e20: 2873 656c 662e 7361 6665 5f73 7472 696e  (self.safe_strin
-00054e30: 6728 706f 7369 7469 6f6e 2c20 276c 6971  g(position, 'liq
-00054e40: 5072 6963 6527 2929 0a20 2020 2020 2020  Price')).       
-00054e50: 206c 6576 6572 6167 6520 3d20 7365 6c66   leverage = self
-00054e60: 2e73 6166 655f 7374 7269 6e67 2870 6f73  .safe_string(pos
-00054e70: 6974 696f 6e2c 2027 6c65 7665 7261 6765  ition, 'leverage
-00054e80: 2729 0a20 2020 2020 2020 2069 6620 6c69  ').        if li
-00054e90: 7175 6964 6174 696f 6e50 7269 6365 2069  quidationPrice i
-00054ea0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00054eb0: 2020 2020 2020 2020 6966 206d 6172 6b65          if marke
-00054ec0: 745b 2773 6574 746c 6527 5d20 3d3d 2027  t['settle'] == '
-00054ed0: 5553 4443 273a 0a20 2020 2020 2020 2020  USDC':.         
-00054ee0: 2020 2020 2020 2023 2020 2845 6e74 7279         #  (Entry
-00054ef0: 2070 7269 6365 202d 204c 6971 2070 7269   price - Liq pri
-00054f00: 6365 2920 2a20 436f 6e74 7261 6374 7320  ce) * Contracts 
-00054f10: 2b20 4d61 696e 7465 6e61 6e63 6520 4d61  + Maintenance Ma
-00054f20: 7267 696e 202b 2028 756e 7265 616c 6973  rgin + (unrealis
-00054f30: 6564 2070 6e6c 2920 3d20 436f 6c6c 6174  ed pnl) = Collat
-00054f40: 6572 616c 0a20 2020 2020 2020 2020 2020  eral.           
-00054f50: 2020 2020 2064 6966 6665 7265 6e63 6520       difference 
-00054f60: 3d20 5072 6563 6973 652e 7374 7269 6e67  = Precise.string
-00054f70: 5f61 6273 2850 7265 6369 7365 2e73 7472  _abs(Precise.str
-00054f80: 696e 675f 7375 6228 656e 7472 7950 7269  ing_sub(entryPri
-00054f90: 6365 2c20 6c69 7175 6964 6174 696f 6e50  ce, liquidationP
-00054fa0: 7269 6365 2929 0a20 2020 2020 2020 2020  rice)).         
-00054fb0: 2020 2020 2020 2063 6f6c 6c61 7465 7261         collatera
-00054fc0: 6c53 7472 696e 6720 3d20 5072 6563 6973  lString = Precis
-00054fd0: 652e 7374 7269 6e67 5f61 6464 2850 7265  e.string_add(Pre
-00054fe0: 6369 7365 2e73 7472 696e 675f 6164 6428  cise.string_add(
-00054ff0: 5072 6563 6973 652e 7374 7269 6e67 5f6d  Precise.string_m
-00055000: 756c 2864 6966 6665 7265 6e63 652c 2073  ul(difference, s
-00055010: 697a 6529 2c20 6d61 696e 7465 6e61 6e63  ize), maintenanc
-00055020: 654d 6172 6769 6e53 7472 696e 6729 2c20  eMarginString), 
-00055030: 756e 7265 616c 6973 6564 506e 6c29 0a20  unrealisedPnl). 
-00055040: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00055050: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00055060: 2062 7573 7450 7269 6365 203d 2073 656c   bustPrice = sel
-00055070: 662e 7361 6665 5f73 7472 696e 6728 706f  f.safe_string(po
-00055080: 7369 7469 6f6e 2c20 2762 7573 7450 7269  sition, 'bustPri
-00055090: 6365 2729 0a20 2020 2020 2020 2020 2020  ce').           
-000550a0: 2020 2020 2069 6620 6d61 726b 6574 5b27       if market['
-000550b0: 6c69 6e65 6172 275d 3a0a 2020 2020 2020  linear']:.      
-000550c0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-000550d0: 6465 7269 7665 6420 6672 6f6d 2074 6865  derived from the
-000550e0: 2066 6f6c 6c6f 7769 6e67 2066 6f72 6d75   following formu
-000550f0: 6c61 730a 2020 2020 2020 2020 2020 2020  las.            
-00055100: 2020 2020 2020 2020 2320 2028 456e 7472          #  (Entr
-00055110: 7920 7072 6963 6520 2d20 4275 7374 2070  y price - Bust p
-00055120: 7269 6365 2920 2a20 436f 6e74 7261 6374  rice) * Contract
-00055130: 7320 3d20 436f 6c6c 6174 6572 616c 0a20  s = Collateral. 
-00055140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00055150: 2020 2023 2020 2845 6e74 7279 2070 7269     #  (Entry pri
-00055160: 6365 202d 204c 6971 2070 7269 6365 2920  ce - Liq price) 
-00055170: 2a20 436f 6e74 7261 6374 7320 3d20 436f  * Contracts = Co
-00055180: 6c6c 6174 6572 616c 202d 204d 6169 6e74  llateral - Maint
-00055190: 656e 616e 6365 204d 6172 6769 6e0a 2020  enance Margin.  
-000551a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000551b0: 2020 2320 4d61 696e 7465 6e61 6e63 6520    # Maintenance 
-000551c0: 4d61 7267 696e 203d 2028 4275 7374 2070  Margin = (Bust p
-000551d0: 7269 6365 202d 204c 6971 2070 7269 6365  rice - Liq price
-000551e0: 2920 7820 436f 6e74 7261 6374 730a 2020  ) x Contracts.  
-000551f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00055200: 2020 6d61 696e 7465 6e61 6e63 654d 6172    maintenanceMar
-00055210: 6769 6e50 7269 6365 4469 6666 6572 656e  ginPriceDifferen
-00055220: 6365 203d 2050 7265 6369 7365 2e73 7472  ce = Precise.str
-00055230: 696e 675f 6162 7328 5072 6563 6973 652e  ing_abs(Precise.
-00055240: 7374 7269 6e67 5f73 7562 286c 6971 7569  string_sub(liqui
-00055250: 6461 7469 6f6e 5072 6963 652c 2062 7573  dationPrice, bus
-00055260: 7450 7269 6365 2929 0a20 2020 2020 2020  tPrice)).       
-00055270: 2020 2020 2020 2020 2020 2020 206d 6169               mai
-00055280: 6e74 656e 616e 6365 4d61 7267 696e 5374  ntenanceMarginSt
-00055290: 7269 6e67 203d 2050 7265 6369 7365 2e73  ring = Precise.s
-000552a0: 7472 696e 675f 6d75 6c28 6d61 696e 7465  tring_mul(mainte
-000552b0: 6e61 6e63 654d 6172 6769 6e50 7269 6365  nanceMarginPrice
-000552c0: 4469 6666 6572 656e 6365 2c20 7369 7a65  Difference, size
-000552d0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000552e0: 2020 2020 2020 2320 496e 6974 6961 6c20        # Initial 
-000552f0: 4d61 7267 696e 203d 2043 6f6e 7472 6163  Margin = Contrac
-00055300: 7473 2078 2045 6e74 7279 2050 7269 6365  ts x Entry Price
-00055310: 202f 204c 6576 6572 6167 650a 2020 2020   / Leverage.    
-00055320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00055330: 6966 2065 6e74 7279 5072 6963 6520 6973  if entryPrice is
-00055340: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00055350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00055360: 2020 2069 6e69 7469 616c 4d61 7267 696e     initialMargin
-00055370: 5374 7269 6e67 203d 2050 7265 6369 7365  String = Precise
-00055380: 2e73 7472 696e 675f 6469 7628 5072 6563  .string_div(Prec
-00055390: 6973 652e 7374 7269 6e67 5f6d 756c 2873  ise.string_mul(s
-000553a0: 697a 652c 2065 6e74 7279 5072 6963 6529  ize, entryPrice)
-000553b0: 2c20 6c65 7665 7261 6765 290a 2020 2020  , leverage).    
-000553c0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-000553d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000553e0: 2020 2020 2020 2320 436f 6e74 7261 6374        # Contract
-000553f0: 7320 2a20 2831 202f 2045 6e74 7279 2070  s * (1 / Entry p
-00055400: 7269 6365 202d 2031 202f 2042 7573 7420  rice - 1 / Bust 
-00055410: 7072 6963 6529 203d 2043 6f6c 6c61 7465  price) = Collate
-00055420: 7261 6c0a 2020 2020 2020 2020 2020 2020  ral.            
-00055430: 2020 2020 2020 2020 2320 436f 6e74 7261          # Contra
-00055440: 6374 7320 2a20 2831 202f 2045 6e74 7279  cts * (1 / Entry
-00055450: 2070 7269 6365 202d 2031 202f 204c 6971   price - 1 / Liq
-00055460: 2070 7269 6365 2920 3d20 436f 6c6c 6174   price) = Collat
-00055470: 6572 616c 202d 204d 6169 6e74 656e 616e  eral - Maintenan
-00055480: 6365 204d 6172 6769 6e0a 2020 2020 2020  ce Margin.      
-00055490: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-000554a0: 4d61 696e 7465 6e61 6e63 6520 4d61 7267  Maintenance Marg
-000554b0: 696e 203d 2043 6f6e 7472 6163 7473 202a  in = Contracts *
-000554c0: 2028 3120 2f20 4c69 7120 7072 6963 6520   (1 / Liq price 
-000554d0: 2d20 3120 2f20 4275 7374 2070 7269 6365  - 1 / Bust price
-000554e0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000554f0: 2020 2020 2020 2320 4d61 696e 7465 6e61        # Maintena
-00055500: 6e63 6520 4d61 7267 696e 203d 2043 6f6e  nce Margin = Con
-00055510: 7472 6163 7473 202a 2028 4275 7374 2070  tracts * (Bust p
-00055520: 7269 6365 202d 204c 6971 2070 7269 6365  rice - Liq price
-00055530: 2920 2f20 284c 6971 2070 7269 6365 2078  ) / (Liq price x
-00055540: 2042 7573 7420 7072 6963 6529 0a20 2020   Bust price).   
-00055550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00055560: 2064 6966 6665 7265 6e63 6520 3d20 5072   difference = Pr
-00055570: 6563 6973 652e 7374 7269 6e67 5f61 6273  ecise.string_abs
-00055580: 2850 7265 6369 7365 2e73 7472 696e 675f  (Precise.string_
-00055590: 7375 6228 6275 7374 5072 6963 652c 206c  sub(bustPrice, l
-000555a0: 6971 7569 6461 7469 6f6e 5072 6963 6529  iquidationPrice)
-000555b0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000555c0: 2020 2020 2020 6d75 6c74 6970 6c79 203d        multiply =
-000555d0: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
-000555e0: 6d75 6c28 6275 7374 5072 6963 652c 206c  mul(bustPrice, l
-000555f0: 6971 7569 6461 7469 6f6e 5072 6963 6529  iquidationPrice)
-00055600: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00055610: 2020 2020 206d 6169 6e74 656e 616e 6365       maintenance
-00055620: 4d61 7267 696e 5374 7269 6e67 203d 2050  MarginString = P
-00055630: 7265 6369 7365 2e73 7472 696e 675f 6469  recise.string_di
-00055640: 7628 5072 6563 6973 652e 7374 7269 6e67  v(Precise.string
-00055650: 5f6d 756c 2873 697a 652c 2064 6966 6665  _mul(size, diffe
-00055660: 7265 6e63 6529 2c20 6d75 6c74 6970 6c79  rence), multiply
-00055670: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00055680: 2020 2020 2020 2320 496e 6974 6961 6c20        # Initial 
-00055690: 4d61 7267 696e 203d 204c 6576 6572 6167  Margin = Leverag
-000556a0: 6520 7820 436f 6e74 7261 6374 7320 2f20  e x Contracts / 
-000556b0: 456e 7472 7950 7269 6365 0a20 2020 2020  EntryPrice.     
-000556c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000556d0: 6620 656e 7472 7950 7269 6365 2069 7320  f entryPrice is 
-000556e0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-000556f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00055700: 2020 696e 6974 6961 6c4d 6172 6769 6e53    initialMarginS
-00055710: 7472 696e 6720 3d20 5072 6563 6973 652e  tring = Precise.
-00055720: 7374 7269 6e67 5f64 6976 2873 697a 652c  string_div(size,
-00055730: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
-00055740: 6d75 6c28 656e 7472 7950 7269 6365 2c20  mul(entryPrice, 
-00055750: 6c65 7665 7261 6765 2929 0a20 2020 2020  leverage)).     
-00055760: 2020 206d 6169 6e74 656e 616e 6365 4d61     maintenanceMa
-00055770: 7267 696e 5065 7263 656e 7461 6765 203d  rginPercentage =
-00055780: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
-00055790: 6469 7628 6d61 696e 7465 6e61 6e63 654d  div(maintenanceM
-000557a0: 6172 6769 6e53 7472 696e 672c 206e 6f74  arginString, not
-000557b0: 696f 6e61 6c29 0a20 2020 2020 2020 206d  ional).        m
-000557c0: 6172 6769 6e52 6174 696f 203d 2050 7265  arginRatio = Pre
-000557d0: 6369 7365 2e73 7472 696e 675f 6469 7628  cise.string_div(
-000557e0: 6d61 696e 7465 6e61 6e63 654d 6172 6769  maintenanceMargi
-000557f0: 6e53 7472 696e 672c 2063 6f6c 6c61 7465  nString, collate
-00055800: 7261 6c53 7472 696e 672c 2034 290a 2020  ralString, 4).  
-00055810: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00055820: 662e 7361 6665 5f70 6f73 6974 696f 6e28  f.safe_position(
-00055830: 7b0a 2020 2020 2020 2020 2020 2020 2769  {.            'i
-00055840: 6e66 6f27 3a20 706f 7369 7469 6f6e 2c0a  nfo': position,.
-00055850: 2020 2020 2020 2020 2020 2020 2769 6427              'id'
-00055860: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
-00055870: 2020 2020 2773 796d 626f 6c27 3a20 6d61      'symbol': ma
-00055880: 726b 6574 5b27 7379 6d62 6f6c 275d 2c0a  rket['symbol'],.
-00055890: 2020 2020 2020 2020 2020 2020 2774 696d              'tim
-000558a0: 6573 7461 6d70 273a 2074 696d 6573 7461  estamp': timesta
-000558b0: 6d70 2c0a 2020 2020 2020 2020 2020 2020  mp,.            
-000558c0: 2764 6174 6574 696d 6527 3a20 7365 6c66  'datetime': self
-000558d0: 2e69 736f 3836 3031 2874 696d 6573 7461  .iso8601(timesta
-000558e0: 6d70 292c 0a20 2020 2020 2020 2020 2020  mp),.           
-000558f0: 2027 6c61 7374 5570 6461 7465 5469 6d65   'lastUpdateTime
-00055900: 7374 616d 7027 3a20 4e6f 6e65 2c0a 2020  stamp': None,.  
-00055910: 2020 2020 2020 2020 2020 2769 6e69 7469            'initi
-00055920: 616c 4d61 7267 696e 273a 2073 656c 662e  alMargin': self.
-00055930: 7061 7273 655f 6e75 6d62 6572 2869 6e69  parse_number(ini
-00055940: 7469 616c 4d61 7267 696e 5374 7269 6e67  tialMarginString
-00055950: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
-00055960: 696e 6974 6961 6c4d 6172 6769 6e50 6572  initialMarginPer
-00055970: 6365 6e74 6167 6527 3a20 7365 6c66 2e70  centage': self.p
-00055980: 6172 7365 5f6e 756d 6265 7228 5072 6563  arse_number(Prec
-00055990: 6973 652e 7374 7269 6e67 5f64 6976 2869  ise.string_div(i
-000559a0: 6e69 7469 616c 4d61 7267 696e 5374 7269  nitialMarginStri
-000559b0: 6e67 2c20 6e6f 7469 6f6e 616c 2929 2c0a  ng, notional)),.
-000559c0: 2020 2020 2020 2020 2020 2020 276d 6169              'mai
-000559d0: 6e74 656e 616e 6365 4d61 7267 696e 273a  ntenanceMargin':
-000559e0: 2073 656c 662e 7061 7273 655f 6e75 6d62   self.parse_numb
-000559f0: 6572 286d 6169 6e74 656e 616e 6365 4d61  er(maintenanceMa
-00055a00: 7267 696e 5374 7269 6e67 292c 0a20 2020  rginString),.   
-00055a10: 2020 2020 2020 2020 2027 6d61 696e 7465           'mainte
-00055a20: 6e61 6e63 654d 6172 6769 6e50 6572 6365  nanceMarginPerce
-00055a30: 6e74 6167 6527 3a20 7365 6c66 2e70 6172  ntage': self.par
-00055a40: 7365 5f6e 756d 6265 7228 6d61 696e 7465  se_number(mainte
-00055a50: 6e61 6e63 654d 6172 6769 6e50 6572 6365  nanceMarginPerce
-00055a60: 6e74 6167 6529 2c0a 2020 2020 2020 2020  ntage),.        
-00055a70: 2020 2020 2765 6e74 7279 5072 6963 6527      'entryPrice'
-00055a80: 3a20 7365 6c66 2e70 6172 7365 5f6e 756d  : self.parse_num
-00055a90: 6265 7228 656e 7472 7950 7269 6365 292c  ber(entryPrice),
-00055aa0: 0a20 2020 2020 2020 2020 2020 2027 6e6f  .            'no
-00055ab0: 7469 6f6e 616c 273a 2073 656c 662e 7061  tional': self.pa
-00055ac0: 7273 655f 6e75 6d62 6572 286e 6f74 696f  rse_number(notio
-00055ad0: 6e61 6c29 2c0a 2020 2020 2020 2020 2020  nal),.          
-00055ae0: 2020 276c 6576 6572 6167 6527 3a20 7365    'leverage': se
-00055af0: 6c66 2e70 6172 7365 5f6e 756d 6265 7228  lf.parse_number(
-00055b00: 6c65 7665 7261 6765 292c 0a20 2020 2020  leverage),.     
-00055b10: 2020 2020 2020 2027 756e 7265 616c 697a         'unrealiz
-00055b20: 6564 506e 6c27 3a20 7365 6c66 2e70 6172  edPnl': self.par
-00055b30: 7365 5f6e 756d 6265 7228 756e 7265 616c  se_number(unreal
-00055b40: 6973 6564 506e 6c29 2c0a 2020 2020 2020  isedPnl),.      
-00055b50: 2020 2020 2020 2763 6f6e 7472 6163 7473        'contracts
-00055b60: 273a 2073 656c 662e 7061 7273 655f 6e75  ': self.parse_nu
-00055b70: 6d62 6572 2873 697a 6529 2c20 2023 2069  mber(size),  # i
-00055b80: 6e20 5553 4420 666f 7220 696e 7665 7273  n USD for invers
-00055b90: 6520 7377 6170 730a 2020 2020 2020 2020  e swaps.        
-00055ba0: 2020 2020 2763 6f6e 7472 6163 7453 697a      'contractSiz
-00055bb0: 6527 3a20 7365 6c66 2e73 6166 655f 6e75  e': self.safe_nu
-00055bc0: 6d62 6572 286d 6172 6b65 742c 2027 636f  mber(market, 'co
-00055bd0: 6e74 7261 6374 5369 7a65 2729 2c0a 2020  ntractSize'),.  
-00055be0: 2020 2020 2020 2020 2020 276d 6172 6769            'margi
-00055bf0: 6e52 6174 696f 273a 2073 656c 662e 7061  nRatio': self.pa
-00055c00: 7273 655f 6e75 6d62 6572 286d 6172 6769  rse_number(margi
-00055c10: 6e52 6174 696f 292c 0a20 2020 2020 2020  nRatio),.       
-00055c20: 2020 2020 2027 6c69 7175 6964 6174 696f       'liquidatio
-00055c30: 6e50 7269 6365 273a 2073 656c 662e 7061  nPrice': self.pa
-00055c40: 7273 655f 6e75 6d62 6572 286c 6971 7569  rse_number(liqui
-00055c50: 6461 7469 6f6e 5072 6963 6529 2c0a 2020  dationPrice),.  
-00055c60: 2020 2020 2020 2020 2020 276d 6172 6b50            'markP
-00055c70: 7269 6365 273a 2073 656c 662e 7361 6665  rice': self.safe
-00055c80: 5f6e 756d 6265 7228 706f 7369 7469 6f6e  _number(position
-00055c90: 2c20 276d 6172 6b50 7269 6365 2729 2c0a  , 'markPrice'),.
-00055ca0: 2020 2020 2020 2020 2020 2020 276c 6173              'las
-00055cb0: 7450 7269 6365 273a 204e 6f6e 652c 0a20  tPrice': None,. 
-00055cc0: 2020 2020 2020 2020 2020 2027 636f 6c6c             'coll
-00055cd0: 6174 6572 616c 273a 2073 656c 662e 7061  ateral': self.pa
-00055ce0: 7273 655f 6e75 6d62 6572 2863 6f6c 6c61  rse_number(colla
-00055cf0: 7465 7261 6c53 7472 696e 6729 2c0a 2020  teralString),.  
-00055d00: 2020 2020 2020 2020 2020 276d 6172 6769            'margi
-00055d10: 6e4d 6f64 6527 3a20 6d61 7267 696e 4d6f  nMode': marginMo
-00055d20: 6465 2c0a 2020 2020 2020 2020 2020 2020  de,.            
-00055d30: 2773 6964 6527 3a20 7369 6465 2c0a 2020  'side': side,.  
-00055d40: 2020 2020 2020 2020 2020 2770 6572 6365            'perce
-00055d50: 6e74 6167 6527 3a20 4e6f 6e65 2c0a 2020  ntage': None,.  
-00055d60: 2020 2020 2020 7d29 0a0a 2020 2020 6173        })..    as
-00055d70: 796e 6320 6465 6620 7365 745f 6d61 7267  ync def set_marg
-00055d80: 696e 5f6d 6f64 6528 7365 6c66 2c20 6d61  in_mode(self, ma
-00055d90: 7267 696e 4d6f 6465 2c20 7379 6d62 6f6c  rginMode, symbol
-00055da0: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
-00055db0: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
-00055dc0: 7d29 3a0a 2020 2020 2020 2020 6177 6169  }):.        awai
-00055dd0: 7420 7365 6c66 2e6c 6f61 645f 6d61 726b  t self.load_mark
-00055de0: 6574 7328 290a 2020 2020 2020 2020 7661  ets().        va
-00055df0: 6c75 6573 203d 2061 7761 6974 2073 656c  lues = await sel
-00055e00: 662e 6973 5f75 6e69 6669 6564 5f65 6e61  f.is_unified_ena
-00055e10: 626c 6564 2829 0a20 2020 2020 2020 2069  bled().        i
-00055e20: 7355 6e69 6669 6564 4163 636f 756e 7420  sUnifiedAccount 
-00055e30: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-00055e40: 6528 7661 6c75 6573 2c20 3129 0a20 2020  e(values, 1).   
-00055e50: 2020 2020 2069 6620 6973 556e 6966 6965       if isUnifie
-00055e60: 6441 6363 6f75 6e74 3a0a 2020 2020 2020  dAccount:.      
-00055e70: 2020 2020 2020 7265 7475 726e 2061 7761        return awa
-00055e80: 6974 2073 656c 662e 7365 745f 756e 6966  it self.set_unif
-00055e90: 6965 645f 6d61 7267 696e 5f6d 6f64 6528  ied_margin_mode(
-00055ea0: 6d61 7267 696e 4d6f 6465 2c20 7379 6d62  marginMode, symb
-00055eb0: 6f6c 2c20 7061 7261 6d73 290a 2020 2020  ol, params).    
-00055ec0: 2020 2020 7265 7475 726e 2061 7761 6974      return await
-00055ed0: 2073 656c 662e 7365 745f 6465 7269 7661   self.set_deriva
-00055ee0: 7469 7665 735f 6d61 7267 696e 5f6d 6f64  tives_margin_mod
-00055ef0: 6528 6d61 7267 696e 4d6f 6465 2c20 7379  e(marginMode, sy
-00055f00: 6d62 6f6c 2c20 7061 7261 6d73 290a 0a20  mbol, params).. 
-00055f10: 2020 2061 7379 6e63 2064 6566 2073 6574     async def set
-00055f20: 5f75 6e69 6669 6564 5f6d 6172 6769 6e5f  _unified_margin_
-00055f30: 6d6f 6465 2873 656c 662c 206d 6172 6769  mode(self, margi
-00055f40: 6e4d 6f64 652c 2073 796d 626f 6c3a 204f  nMode, symbol: O
-00055f50: 7074 696f 6e61 6c5b 7374 725d 203d 204e  ptional[str] = N
-00055f60: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
-00055f70: 0a20 2020 2020 2020 2061 7761 6974 2073  .        await s
-00055f80: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
-00055f90: 2829 0a20 2020 2020 2020 2069 6620 286d  ().        if (m
-00055fa0: 6172 6769 6e4d 6f64 6520 213d 2027 5245  arginMode != 'RE
-00055fb0: 4755 4c41 525f 4d41 5247 494e 2729 2061  GULAR_MARGIN') a
-00055fc0: 6e64 2028 6d61 7267 696e 4d6f 6465 2021  nd (marginMode !
-00055fd0: 3d20 2750 4f52 5446 4f4c 494f 5f4d 4152  = 'PORTFOLIO_MAR
-00055fe0: 4749 4e27 293a 0a20 2020 2020 2020 2020  GIN'):.         
-00055ff0: 2020 2072 6169 7365 2042 6164 5265 7175     raise BadRequ
-00056000: 6573 7428 7365 6c66 2e69 6420 2b20 2720  est(self.id + ' 
-00056010: 7365 744d 6172 6769 6e4d 6f64 6528 2920  setMarginMode() 
-00056020: 6d61 7267 696e 4d6f 6465 206d 7573 7420  marginMode must 
-00056030: 6265 2065 6974 6865 7220 5245 4755 4c41  be either REGULA
-00056040: 525f 4d41 5247 494e 206f 7220 504f 5254  R_MARGIN or PORT
-00056050: 464f 4c49 4f5f 4d41 5247 494e 2729 0a20  FOLIO_MARGIN'). 
-00056060: 2020 2020 2020 2072 6571 7565 7374 203d         request =
-00056070: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
-00056080: 7365 744d 6172 6769 6e4d 6f64 6527 3a20  setMarginMode': 
-00056090: 6d61 7267 696e 4d6f 6465 2c0a 2020 2020  marginMode,.    
-000560a0: 2020 2020 7d0a 2020 2020 2020 2020 7265      }.        re
-000560b0: 7370 6f6e 7365 203d 2061 7761 6974 2073  sponse = await s
-000560c0: 656c 662e 7072 6976 6174 6550 6f73 7456  elf.privatePostV
-000560d0: 3541 6363 6f75 6e74 5365 744d 6172 6769  5AccountSetMargi
-000560e0: 6e4d 6f64 6528 7365 6c66 2e65 7874 656e  nMode(self.exten
-000560f0: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
-00056100: 7329 290a 2020 2020 2020 2020 230a 2020  s)).        #.  
-00056110: 2020 2020 2020 2320 207b 0a20 2020 2020        #  {.     
-00056120: 2020 2023 2020 2020 2020 2273 6574 4d61     #      "setMa
-00056130: 7267 696e 4d6f 6465 223a 2022 504f 5254  rginMode": "PORT
-00056140: 464f 4c49 4f5f 4d41 5247 494e 220a 2020  FOLIO_MARGIN".  
-00056150: 2020 2020 2020 2320 207d 0a20 2020 2020        #  }.     
-00056160: 2020 2023 0a20 2020 2020 2020 2072 6574     #.        ret
-00056170: 7572 6e20 7265 7370 6f6e 7365 0a0a 2020  urn response..  
-00056180: 2020 6173 796e 6320 6465 6620 7365 745f    async def set_
-00056190: 6465 7269 7661 7469 7665 735f 6d61 7267  derivatives_marg
-000561a0: 696e 5f6d 6f64 6528 7365 6c66 2c20 6d61  in_mode(self, ma
-000561b0: 7267 696e 4d6f 6465 2c20 7379 6d62 6f6c  rginMode, symbol
-000561c0: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
-000561d0: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
-000561e0: 7d29 3a0a 2020 2020 2020 2020 7365 6c66  }):.        self
-000561f0: 2e63 6865 636b 5f72 6571 7569 7265 645f  .check_required_
-00056200: 7379 6d62 6f6c 2827 7365 744d 6172 6769  symbol('setMargi
-00056210: 6e4d 6f64 6527 2c20 7379 6d62 6f6c 290a  nMode', symbol).
-00056220: 2020 2020 2020 2020 6177 6169 7420 7365          await se
-00056230: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
-00056240: 290a 2020 2020 2020 2020 6d61 726b 6574  ).        market
-00056250: 203d 2073 656c 662e 6d61 726b 6574 2873   = self.market(s
-00056260: 796d 626f 6c29 0a20 2020 2020 2020 2069  ymbol).        i
-00056270: 6620 6d61 726b 6574 5b27 7365 7474 6c65  f market['settle
-00056280: 275d 203d 3d20 2755 5344 4327 3a0a 2020  '] == 'USDC':.  
-00056290: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-000562a0: 4e6f 7453 7570 706f 7274 6564 2873 656c  NotSupported(sel
-000562b0: 662e 6964 202b 2027 2073 6574 4d61 7267  f.id + ' setMarg
-000562c0: 696e 4d6f 6465 2829 2064 6f65 7320 6e6f  inMode() does no
-000562d0: 7420 7375 7070 6f72 7420 6d61 726b 6574  t support market
-000562e0: 2027 202b 2073 796d 626f 6c20 2b20 2727   ' + symbol + ''
-000562f0: 290a 2020 2020 2020 2020 6d61 7267 696e  ).        margin
-00056300: 4d6f 6465 203d 206d 6172 6769 6e4d 6f64  Mode = marginMod
-00056310: 652e 7570 7065 7228 290a 2020 2020 2020  e.upper().      
-00056320: 2020 6966 2028 6d61 7267 696e 4d6f 6465    if (marginMode
-00056330: 2021 3d20 2749 534f 4c41 5445 4427 2920   != 'ISOLATED') 
-00056340: 616e 6420 286d 6172 6769 6e4d 6f64 6520  and (marginMode 
-00056350: 213d 2027 4352 4f53 5327 293a 0a20 2020  != 'CROSS'):.   
-00056360: 2020 2020 2020 2020 2072 6169 7365 2042           raise B
-00056370: 6164 5265 7175 6573 7428 7365 6c66 2e69  adRequest(self.i
-00056380: 6420 2b20 2720 7365 744d 6172 6769 6e4d  d + ' setMarginM
-00056390: 6f64 6528 2920 6d61 7267 696e 4d6f 6465  ode() marginMode
-000563a0: 206d 7573 7420 6265 2065 6974 6865 7220   must be either 
-000563b0: 6973 6f6c 6174 6564 206f 7220 6372 6f73  isolated or cros
-000563c0: 7327 290a 2020 2020 2020 2020 6c65 7665  s').        leve
-000563d0: 7261 6765 203d 2073 656c 662e 7361 6665  rage = self.safe
-000563e0: 5f73 7472 696e 6728 7061 7261 6d73 2c20  _string(params, 
-000563f0: 276c 6576 6572 6167 6527 290a 2020 2020  'leverage').    
-00056400: 2020 2020 7365 6c6c 4c65 7665 7261 6765      sellLeverage
-00056410: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-00056420: 6275 794c 6576 6572 6167 6520 3d20 4e6f  buyLeverage = No
-00056430: 6e65 0a20 2020 2020 2020 2069 6620 6c65  ne.        if le
-00056440: 7665 7261 6765 2069 7320 4e6f 6e65 3a0a  verage is None:.
-00056450: 2020 2020 2020 2020 2020 2020 7365 6c6c              sell
-00056460: 4c65 7665 7261 6765 203d 2073 656c 662e  Leverage = self.
-00056470: 7361 6665 5f73 7472 696e 675f 3228 7061  safe_string_2(pa
-00056480: 7261 6d73 2c20 2773 656c 6c5f 6c65 7665  rams, 'sell_leve
-00056490: 7261 6765 272c 2027 7365 6c6c 4c65 7665  rage', 'sellLeve
-000564a0: 7261 6765 2729 0a20 2020 2020 2020 2020  rage').         
-000564b0: 2020 2062 7579 4c65 7665 7261 6765 203d     buyLeverage =
-000564c0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-000564d0: 675f 3228 7061 7261 6d73 2c20 2762 7579  g_2(params, 'buy
-000564e0: 5f6c 6576 6572 6167 6527 2c20 2762 7579  _leverage', 'buy
-000564f0: 4c65 7665 7261 6765 2729 0a20 2020 2020  Leverage').     
-00056500: 2020 2020 2020 2069 6620 7365 6c6c 4c65         if sellLe
-00056510: 7665 7261 6765 2069 7320 4e6f 6e65 2061  verage is None a
-00056520: 6e64 2062 7579 4c65 7665 7261 6765 2069  nd buyLeverage i
-00056530: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
-00056540: 2020 2020 2020 2020 7261 6973 6520 4172          raise Ar
-00056550: 6775 6d65 6e74 7352 6571 7569 7265 6428  gumentsRequired(
-00056560: 7365 6c66 2e69 6420 2b20 2720 7365 744d  self.id + ' setM
-00056570: 6172 6769 6e4d 6f64 6528 2920 7265 7175  arginMode() requ
-00056580: 6972 6573 2061 206c 6576 6572 6167 6520  ires a leverage 
-00056590: 7061 7261 6d65 7465 7220 6f72 2073 656c  parameter or sel
-000565a0: 6c5f 6c65 7665 7261 6765 2061 6e64 2062  l_leverage and b
-000565b0: 7579 5f6c 6576 6572 6167 6520 7061 7261  uy_leverage para
-000565c0: 6d65 7465 7273 2729 0a20 2020 2020 2020  meters').       
-000565d0: 2020 2020 2069 6620 6275 794c 6576 6572       if buyLever
-000565e0: 6167 6520 6973 204e 6f6e 653a 0a20 2020  age is None:.   
-000565f0: 2020 2020 2020 2020 2020 2020 2062 7579               buy
-00056600: 4c65 7665 7261 6765 203d 2073 656c 6c4c  Leverage = sellL
-00056610: 6576 6572 6167 650a 2020 2020 2020 2020  everage.        
-00056620: 2020 2020 6966 2073 656c 6c4c 6576 6572      if sellLever
-00056630: 6167 6520 6973 204e 6f6e 653a 0a20 2020  age is None:.   
-00056640: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00056650: 6c4c 6576 6572 6167 6520 3d20 6275 794c  lLeverage = buyL
-00056660: 6576 6572 6167 650a 2020 2020 2020 2020  everage.        
-00056670: 2020 2020 7061 7261 6d73 203d 2073 656c      params = sel
-00056680: 662e 6f6d 6974 2870 6172 616d 732c 205b  f.omit(params, [
-00056690: 2762 7579 5f6c 6576 6572 6167 6527 2c20  'buy_leverage', 
-000566a0: 2773 656c 6c5f 6c65 7665 7261 6765 272c  'sell_leverage',
-000566b0: 2027 7365 6c6c 4c65 7665 7261 6765 272c   'sellLeverage',
-000566c0: 2027 6275 794c 6576 6572 6167 6527 5d29   'buyLeverage'])
-000566d0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-000566e0: 2020 2020 2020 2020 2020 2070 6172 616d             param
-000566f0: 7320 3d20 7365 6c66 2e6f 6d69 7428 7061  s = self.omit(pa
-00056700: 7261 6d73 2c20 276c 6576 6572 6167 6527  rams, 'leverage'
-00056710: 290a 2020 2020 2020 2020 2020 2020 7365  ).            se
-00056720: 6c6c 4c65 7665 7261 6765 203d 206c 6576  llLeverage = lev
-00056730: 6572 6167 650a 2020 2020 2020 2020 2020  erage.          
-00056740: 2020 6275 794c 6576 6572 6167 6520 3d20    buyLeverage = 
-00056750: 6c65 7665 7261 6765 0a20 2020 2020 2020  leverage.       
-00056760: 2074 7261 6465 4d6f 6465 203d 2031 2069   tradeMode = 1 i
-00056770: 6620 286d 6172 6769 6e4d 6f64 6520 3d3d  f (marginMode ==
-00056780: 2027 4953 4f4c 4154 4544 2729 2065 6c73   'ISOLATED') els
-00056790: 6520 300a 2020 2020 2020 2020 7265 7175  e 0.        requ
-000567a0: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
-000567b0: 2020 2020 2773 796d 626f 6c27 3a20 6d61      'symbol': ma
-000567c0: 726b 6574 5b27 6964 275d 2c0a 2020 2020  rket['id'],.    
-000567d0: 2020 2020 2020 2020 2774 7261 6465 4d6f          'tradeMo
-000567e0: 6465 273a 2074 7261 6465 4d6f 6465 2c0a  de': tradeMode,.
-000567f0: 2020 2020 2020 2020 2020 2020 2762 7579              'buy
-00056800: 4c65 7665 7261 6765 273a 2062 7579 4c65  Leverage': buyLe
-00056810: 7665 7261 6765 2c0a 2020 2020 2020 2020  verage,.        
-00056820: 2020 2020 2773 656c 6c4c 6576 6572 6167      'sellLeverag
-00056830: 6527 3a20 7365 6c6c 4c65 7665 7261 6765  e': sellLeverage
-00056840: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
-00056850: 2020 2020 7265 7370 6f6e 7365 203d 2061      response = a
-00056860: 7761 6974 2073 656c 662e 7072 6976 6174  wait self.privat
-00056870: 6550 6f73 7443 6f6e 7472 6163 7456 3350  ePostContractV3P
-00056880: 7269 7661 7465 506f 7369 7469 6f6e 5377  rivatePositionSw
-00056890: 6974 6368 4973 6f6c 6174 6564 2873 656c  itchIsolated(sel
-000568a0: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
-000568b0: 2c20 7061 7261 6d73 2929 0a20 2020 2020  , params)).     
-000568c0: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
-000568d0: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-000568e0: 2020 2020 2020 2022 7265 7443 6f64 6522         "retCode"
-000568f0: 3a20 302c 0a20 2020 2020 2020 2023 2020  : 0,.        #  
-00056900: 2020 2020 2020 2022 7265 744d 7367 223a         "retMsg":
-00056910: 2022 4f4b 222c 0a20 2020 2020 2020 2023   "OK",.        #
-00056920: 2020 2020 2020 2020 2022 7265 7375 6c74           "result
-00056930: 223a 207b 7d2c 0a20 2020 2020 2020 2023  ": {},.        #
-00056940: 2020 2020 2020 2020 2022 7265 7445 7874           "retExt
-00056950: 496e 666f 223a 206e 756c 6c2c 0a20 2020  Info": null,.   
-00056960: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00056970: 7469 6d65 223a 2031 3635 3839 3038 3533  time": 165890853
-00056980: 3235 3830 0a20 2020 2020 2020 2023 2020  2580.        #  
-00056990: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
-000569a0: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
-000569b0: 7370 6f6e 7365 0a0a 2020 2020 6173 796e  sponse..    asyn
-000569c0: 6320 6465 6620 7365 745f 6c65 7665 7261  c def set_levera
-000569d0: 6765 2873 656c 662c 206c 6576 6572 6167  ge(self, leverag
-000569e0: 652c 2073 796d 626f 6c3a 204f 7074 696f  e, symbol: Optio
-000569f0: 6e61 6c5b 7374 725d 203d 204e 6f6e 652c  nal[str] = None,
-00056a00: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
-00056a10: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00056a20: 2073 6574 2074 6865 206c 6576 656c 206f   set the level o
-00056a30: 6620 6c65 7665 7261 6765 2066 6f72 2061  f leverage for a
-00056a40: 206d 6172 6b65 740a 2020 2020 2020 2020   market.        
-00056a50: 3a70 6172 616d 2066 6c6f 6174 206c 6576  :param float lev
-00056a60: 6572 6167 653a 2074 6865 2072 6174 6520  erage: the rate 
-00056a70: 6f66 206c 6576 6572 6167 650a 2020 2020  of leverage.    
-00056a80: 2020 2020 3a70 6172 616d 2073 7472 2073      :param str s
-00056a90: 796d 626f 6c3a 2075 6e69 6669 6564 206d  ymbol: unified m
-00056aa0: 6172 6b65 7420 7379 6d62 6f6c 0a20 2020  arket symbol.   
-00056ab0: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
-00056ac0: 2070 6172 616d 733a 2065 7874 7261 2070   params: extra p
-00056ad0: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
-00056ae0: 6963 2074 6f20 7468 6520 6279 6269 7420  ic to the bybit 
-00056af0: 6170 6920 656e 6470 6f69 6e74 0a20 2020  api endpoint.   
-00056b00: 2020 2020 203a 7265 7475 726e 7320 6469       :returns di
-00056b10: 6374 3a20 7265 7370 6f6e 7365 2066 726f  ct: response fro
-00056b20: 6d20 7468 6520 6578 6368 616e 6765 0a20  m the exchange. 
-00056b30: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00056b40: 2020 2073 656c 662e 6368 6563 6b5f 7265     self.check_re
-00056b50: 7175 6972 6564 5f73 796d 626f 6c28 2773  quired_symbol('s
-00056b60: 6574 4c65 7665 7261 6765 272c 2073 796d  etLeverage', sym
-00056b70: 626f 6c29 0a20 2020 2020 2020 2061 7761  bol).        awa
-00056b80: 6974 2073 656c 662e 6c6f 6164 5f6d 6172  it self.load_mar
-00056b90: 6b65 7473 2829 0a20 2020 2020 2020 206d  kets().        m
-00056ba0: 6172 6b65 7420 3d20 7365 6c66 2e6d 6172  arket = self.mar
-00056bb0: 6b65 7428 7379 6d62 6f6c 290a 2020 2020  ket(symbol).    
-00056bc0: 2020 2020 2320 5741 524e 494e 473a 2054      # WARNING: T
-00056bd0: 4849 5320 5749 4c4c 2049 4e43 5245 4153  HIS WILL INCREAS
-00056be0: 4520 4c49 5155 4944 4154 494f 4e20 5052  E LIQUIDATION PR
-00056bf0: 4943 4520 464f 5220 4f50 454e 2049 534f  ICE FOR OPEN ISO
-00056c00: 4c41 5445 4420 4c4f 4e47 2050 4f53 4954  LATED LONG POSIT
-00056c10: 494f 4e53 0a20 2020 2020 2020 2023 2041  IONS.        # A
-00056c20: 4e44 2044 4543 5245 4153 4520 4c49 5155  ND DECREASE LIQU
-00056c30: 4944 4154 494f 4e20 5052 4943 4520 464f  IDATION PRICE FO
-00056c40: 5220 4f50 454e 2049 534f 4c41 5445 4420  R OPEN ISOLATED 
-00056c50: 5348 4f52 5420 504f 5349 5449 4f4e 530a  SHORT POSITIONS.
-00056c60: 2020 2020 2020 2020 6973 5573 6463 5365          isUsdcSe
-00056c70: 7474 6c65 6420 3d20 6d61 726b 6574 5b27  ttled = market['
-00056c80: 7365 7474 6c65 275d 203d 3d20 2755 5344  settle'] == 'USD
-00056c90: 4327 0a20 2020 2020 2020 2065 6e61 626c  C'.        enabl
-00056ca0: 6555 6e69 6669 6564 4d61 7267 696e 2c20  eUnifiedMargin, 
-00056cb0: 656e 6162 6c65 556e 6966 6965 6441 6363  enableUnifiedAcc
-00056cc0: 6f75 6e74 203d 2061 7761 6974 2073 656c  ount = await sel
-00056cd0: 662e 6973 5f75 6e69 6669 6564 5f65 6e61  f.is_unified_ena
-00056ce0: 626c 6564 2829 0a20 2020 2020 2020 2023  bled().        #
-00056cf0: 2065 6e67 6167 6520 696e 206c 6576 6572   engage in lever
-00056d00: 6167 6520 7365 7474 696e 670a 2020 2020  age setting.    
-00056d10: 2020 2020 2320 7765 2072 6575 7365 2074      # we reuse t
-00056d20: 6865 2063 6f64 6520 6865 7265 2069 6e73  he code here ins
-00056d30: 7465 6164 206f 6620 6861 7669 6e67 2074  tead of having t
-00056d40: 776f 206d 6574 686f 6473 0a20 2020 2020  wo methods.     
-00056d50: 2020 206c 6576 6572 6167 6520 3d20 7365     leverage = se
-00056d60: 6c66 2e6e 756d 6265 725f 746f 5f73 7472  lf.number_to_str
-00056d70: 696e 6728 6c65 7665 7261 6765 290a 2020  ing(leverage).  
-00056d80: 2020 2020 2020 6d65 7468 6f64 203d 204e        method = N
-00056d90: 6f6e 650a 2020 2020 2020 2020 7265 7175  one.        requ
-00056da0: 6573 7420 3d20 4e6f 6e65 0a20 2020 2020  est = None.     
-00056db0: 2020 2069 6620 656e 6162 6c65 556e 6966     if enableUnif
-00056dc0: 6965 644d 6172 6769 6e20 6f72 2065 6e61  iedMargin or ena
-00056dd0: 626c 6555 6e69 6669 6564 4163 636f 756e  bleUnifiedAccoun
-00056de0: 7420 6f72 206e 6f74 2069 7355 7364 6353  t or not isUsdcS
-00056df0: 6574 746c 6564 3a0a 2020 2020 2020 2020  ettled:.        
-00056e00: 2020 2020 7265 7175 6573 7420 3d20 7b0a      request = {.
-00056e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00056e20: 2773 796d 626f 6c27 3a20 6d61 726b 6574  'symbol': market
-00056e30: 5b27 6964 275d 2c0a 2020 2020 2020 2020  ['id'],.        
-00056e40: 2020 2020 2020 2020 2762 7579 4c65 7665          'buyLeve
-00056e50: 7261 6765 273a 206c 6576 6572 6167 652c  rage': leverage,
-00056e60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00056e70: 2027 7365 6c6c 4c65 7665 7261 6765 273a   'sellLeverage':
-00056e80: 206c 6576 6572 6167 652c 0a20 2020 2020   leverage,.     
-00056e90: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-00056ea0: 2020 2020 2069 6620 656e 6162 6c65 556e       if enableUn
-00056eb0: 6966 6965 6441 6363 6f75 6e74 3a0a 2020  ifiedAccount:.  
-00056ec0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00056ed0: 206d 6172 6b65 745b 276c 696e 6561 7227   market['linear'
-00056ee0: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
-00056ef0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-00056f00: 6361 7465 676f 7279 275d 203d 2027 6c69  category'] = 'li
-00056f10: 6e65 6172 270a 2020 2020 2020 2020 2020  near'.          
-00056f20: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00056f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00056f40: 7261 6973 6520 4e6f 7453 7570 706f 7274  raise NotSupport
-00056f50: 6564 2873 656c 662e 6964 202b 2027 2073  ed(self.id + ' s
-00056f60: 6574 556e 6966 6965 644d 6172 6769 6e4c  etUnifiedMarginL
-00056f70: 6576 6572 6167 6528 2920 6c65 7665 7261  everage() levera
-00056f80: 6765 2064 6f65 736e 5c27 7420 7375 7070  ge doesn\'t supp
-00056f90: 6f72 7420 696e 7665 7273 6520 616e 6420  ort inverse and 
-00056fa0: 6f70 7469 6f6e 206d 6172 6b65 7420 696e  option market in
-00056fb0: 2075 6e69 6669 6564 2061 6363 6f75 6e74   unified account
-00056fc0: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
-00056fd0: 2020 206d 6574 686f 6420 3d20 2770 7269     method = 'pri
-00056fe0: 7661 7465 506f 7374 5635 506f 7369 7469  vatePostV5Positi
-00056ff0: 6f6e 5365 744c 6576 6572 6167 6527 0a20  onSetLeverage'. 
-00057000: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00057010: 656e 6162 6c65 556e 6966 6965 644d 6172  enableUnifiedMar
-00057020: 6769 6e3a 0a20 2020 2020 2020 2020 2020  gin:.           
-00057030: 2020 2020 2069 6620 6d61 726b 6574 5b27       if market['
-00057040: 6f70 7469 6f6e 275d 3a0a 2020 2020 2020  option']:.      
-00057050: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00057060: 7175 6573 745b 2763 6174 6567 6f72 7927  quest['category'
-00057070: 5d20 3d20 276f 7074 696f 6e27 0a20 2020  ] = 'option'.   
-00057080: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-00057090: 6620 6d61 726b 6574 5b27 6c69 6e65 6172  f market['linear
-000570a0: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
-000570b0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-000570c0: 2763 6174 6567 6f72 7927 5d20 3d20 276c  'category'] = 'l
-000570d0: 696e 6561 7227 0a20 2020 2020 2020 2020  inear'.         
-000570e0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-000570f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00057100: 2072 6169 7365 204e 6f74 5375 7070 6f72   raise NotSuppor
-00057110: 7465 6428 7365 6c66 2e69 6420 2b20 2720  ted(self.id + ' 
-00057120: 7365 7455 6e69 6669 6564 4d61 7267 696e  setUnifiedMargin
-00057130: 4c65 7665 7261 6765 2829 206c 6576 6572  Leverage() lever
-00057140: 6167 6520 646f 6573 6e5c 2774 2073 7570  age doesn\'t sup
-00057150: 706f 7274 2069 6e76 6572 7365 206d 6172  port inverse mar
-00057160: 6b65 7420 696e 2075 6e69 6669 6564 206d  ket in unified m
-00057170: 6172 6769 6e27 290a 2020 2020 2020 2020  argin').        
-00057180: 2020 2020 2020 2020 6d65 7468 6f64 203d          method =
-00057190: 2027 7072 6976 6174 6550 6f73 7455 6e69   'privatePostUni
-000571a0: 6669 6564 5633 5072 6976 6174 6550 6f73  fiedV3PrivatePos
-000571b0: 6974 696f 6e53 6574 4c65 7665 7261 6765  itionSetLeverage
-000571c0: 270a 2020 2020 2020 2020 2020 2020 656c  '.            el
-000571d0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-000571e0: 2020 2020 6d65 7468 6f64 203d 2027 7072      method = 'pr
-000571f0: 6976 6174 6550 6f73 7443 6f6e 7472 6163  ivatePostContrac
-00057200: 7456 3350 7269 7661 7465 506f 7369 7469  tV3PrivatePositi
-00057210: 6f6e 5365 744c 6576 6572 6167 6527 0a20  onSetLeverage'. 
-00057220: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00057230: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00057240: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-00057250: 2020 2020 2027 7379 6d62 6f6c 273a 206d       'symbol': m
-00057260: 6172 6b65 745b 2769 6427 5d2c 0a20 2020  arket['id'],.   
-00057270: 2020 2020 2020 2020 2020 2020 2027 6c65               'le
-00057280: 7665 7261 6765 273a 206c 6576 6572 6167  verage': leverag
-00057290: 652c 0a20 2020 2020 2020 2020 2020 207d  e,.            }
-000572a0: 0a20 2020 2020 2020 2020 2020 206d 6574  .            met
-000572b0: 686f 6420 3d20 2770 7269 7661 7465 506f  hod = 'privatePo
-000572c0: 7374 5065 7270 6574 7561 6c55 7364 634f  stPerpetualUsdcO
-000572d0: 7065 6e61 7069 5072 6976 6174 6556 3150  penapiPrivateV1P
-000572e0: 6f73 6974 696f 6e4c 6576 6572 6167 6553  ositionLeverageS
-000572f0: 6176 6527 0a20 2020 2020 2020 2072 6574  ave'.        ret
-00057300: 7572 6e20 6177 6169 7420 6765 7461 7474  urn await getatt
-00057310: 7228 7365 6c66 2c20 6d65 7468 6f64 2928  r(self, method)(
-00057320: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
-00057330: 6573 742c 2070 6172 616d 7329 290a 0a20  est, params)).. 
-00057340: 2020 2061 7379 6e63 2064 6566 2073 6574     async def set
-00057350: 5f70 6f73 6974 696f 6e5f 6d6f 6465 2873  _position_mode(s
-00057360: 656c 662c 2068 6564 6765 642c 2073 796d  elf, hedged, sym
-00057370: 626f 6c3a 204f 7074 696f 6e61 6c5b 7374  bol: Optional[st
-00057380: 725d 203d 204e 6f6e 652c 2070 6172 616d  r] = None, param
-00057390: 733d 7b7d 293a 0a20 2020 2020 2020 2061  s={}):.        a
-000573a0: 7761 6974 2073 656c 662e 6c6f 6164 5f6d  wait self.load_m
-000573b0: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
-000573c0: 206d 6f64 6520 3d20 4e6f 6e65 0a20 2020   mode = None.   
-000573d0: 2020 2020 2069 6620 6865 6467 6564 3a0a       if hedged:.
-000573e0: 2020 2020 2020 2020 2020 2020 6d6f 6465              mode
-000573f0: 203d 2033 0a20 2020 2020 2020 2065 6c73   = 3.        els
-00057400: 653a 0a20 2020 2020 2020 2020 2020 206d  e:.            m
-00057410: 6f64 6520 3d20 300a 2020 2020 2020 2020  ode = 0.        
-00057420: 7265 7175 6573 7420 3d20 7b0a 2020 2020  request = {.    
-00057430: 2020 2020 2020 2020 276d 6f64 6527 3a20          'mode': 
-00057440: 6d6f 6465 2c0a 2020 2020 2020 2020 7d0a  mode,.        }.
-00057450: 2020 2020 2020 2020 6966 2073 796d 626f          if symbo
-00057460: 6c20 6973 204e 6f6e 653a 0a20 2020 2020  l is None:.     
-00057470: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-00057480: 636f 696e 275d 203d 2027 5553 4454 270a  coin'] = 'USDT'.
-00057490: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-000574a0: 2020 2020 2020 2020 2020 6d61 726b 6574            market
-000574b0: 203d 2073 656c 662e 6d61 726b 6574 2873   = self.market(s
-000574c0: 796d 626f 6c29 0a20 2020 2020 2020 2020  ymbol).         
-000574d0: 2020 2072 6571 7565 7374 5b27 7379 6d62     request['symb
-000574e0: 6f6c 275d 203d 206d 6172 6b65 745b 2769  ol'] = market['i
-000574f0: 6427 5d0a 2020 2020 2020 2020 230a 2020  d'].        #.  
-00057500: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
-00057510: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00057520: 2272 6574 5f63 6f64 6522 3a20 302c 0a20  "ret_code": 0,. 
-00057530: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00057540: 2022 7265 745f 6d73 6722 3a20 226f 6b22   "ret_msg": "ok"
-00057550: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00057560: 2020 2020 2265 7874 5f63 6f64 6522 3a20      "ext_code": 
-00057570: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
-00057580: 2020 2020 2020 2272 6573 756c 7422 3a20        "result": 
-00057590: 6e75 6c6c 2c0a 2020 2020 2020 2020 2320  null,.        # 
-000575a0: 2020 2020 2020 2020 2265 7874 5f69 6e66          "ext_inf
-000575b0: 6f22 3a20 6e75 6c6c 2c0a 2020 2020 2020  o": null,.      
-000575c0: 2020 2320 2020 2020 2020 2020 2274 696d    #         "tim
-000575d0: 655f 6e6f 7722 3a20 2231 3537 3734 3737  e_now": "1577477
-000575e0: 3936 382e 3137 3530 3133 222c 0a20 2020  968.175013",.   
-000575f0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00057600: 7261 7465 5f6c 696d 6974 5f73 7461 7475  rate_limit_statu
-00057610: 7322 3a20 3734 2c0a 2020 2020 2020 2020  s": 74,.        
-00057620: 2320 2020 2020 2020 2020 2272 6174 655f  #         "rate_
-00057630: 6c69 6d69 745f 7265 7365 745f 6d73 223a  limit_reset_ms":
-00057640: 2031 3537 3734 3737 3936 3831 3833 2c0a   1577477968183,.
-00057650: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00057660: 2020 2272 6174 655f 6c69 6d69 7422 3a20    "rate_limit": 
-00057670: 3735 0a20 2020 2020 2020 2023 2020 2020  75.        #    
-00057680: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
-00057690: 2020 2020 2072 6574 7572 6e20 6177 6169       return awai
-000576a0: 7420 7365 6c66 2e70 7269 7661 7465 506f  t self.privatePo
-000576b0: 7374 436f 6e74 7261 6374 5633 5072 6976  stContractV3Priv
-000576c0: 6174 6550 6f73 6974 696f 6e53 7769 7463  atePositionSwitc
-000576d0: 684d 6f64 6528 7365 6c66 2e65 7874 656e  hMode(self.exten
-000576e0: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
-000576f0: 7329 290a 0a20 2020 2061 7379 6e63 2064  s))..    async d
-00057700: 6566 2066 6574 6368 5f64 6572 6976 6174  ef fetch_derivat
-00057710: 6976 6573 5f6f 7065 6e5f 696e 7465 7265  ives_open_intere
-00057720: 7374 5f68 6973 746f 7279 2873 656c 662c  st_history(self,
-00057730: 2073 796d 626f 6c3a 2073 7472 2c20 7469   symbol: str, ti
-00057740: 6d65 6672 616d 653d 2731 6827 2c20 7369  meframe='1h', si
-00057750: 6e63 653a 204f 7074 696f 6e61 6c5b 696e  nce: Optional[in
-00057760: 745d 203d 204e 6f6e 652c 206c 696d 6974  t] = None, limit
-00057770: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
-00057780: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
-00057790: 7d29 3a0a 2020 2020 2020 2020 6177 6169  }):.        awai
-000577a0: 7420 7365 6c66 2e6c 6f61 645f 6d61 726b  t self.load_mark
-000577b0: 6574 7328 290a 2020 2020 2020 2020 6d61  ets().        ma
-000577c0: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
-000577d0: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
-000577e0: 2020 2073 7562 5479 7065 203d 2027 6c69     subType = 'li
-000577f0: 6e65 6172 2720 6966 206d 6172 6b65 745b  near' if market[
-00057800: 276c 696e 6561 7227 5d20 656c 7365 2027  'linear'] else '
-00057810: 696e 7665 7273 6527 0a20 2020 2020 2020  inverse'.       
-00057820: 2063 6174 6567 6f72 7920 3d20 7365 6c66   category = self
-00057830: 2e73 6166 655f 7374 7269 6e67 2870 6172  .safe_string(par
-00057840: 616d 732c 2027 6361 7465 676f 7279 272c  ams, 'category',
-00057850: 2073 7562 5479 7065 290a 2020 2020 2020   subType).      
-00057860: 2020 696e 7465 7276 616c 7320 3d20 7365    intervals = se
-00057870: 6c66 2e73 6166 655f 7661 6c75 6528 7365  lf.safe_value(se
-00057880: 6c66 2e6f 7074 696f 6e73 2c20 2769 6e74  lf.options, 'int
-00057890: 6572 7661 6c73 2729 0a20 2020 2020 2020  ervals').       
-000578a0: 2069 6e74 6572 7661 6c20 3d20 7365 6c66   interval = self
-000578b0: 2e73 6166 655f 7374 7269 6e67 2869 6e74  .safe_string(int
-000578c0: 6572 7661 6c73 2c20 7469 6d65 6672 616d  ervals, timefram
-000578d0: 6529 2020 2320 356d 696e 2c31 356d 696e  e)  # 5min,15min
-000578e0: 2c33 306d 696e 2c31 682c 3468 2c31 640a  ,30min,1h,4h,1d.
-000578f0: 2020 2020 2020 2020 6966 2069 6e74 6572          if inter
-00057900: 7661 6c20 6973 204e 6f6e 653a 0a20 2020  val is None:.   
-00057910: 2020 2020 2020 2020 2072 6169 7365 2042           raise B
-00057920: 6164 5265 7175 6573 7428 7365 6c66 2e69  adRequest(self.i
-00057930: 6420 2b20 2720 6665 7463 684f 7065 6e49  d + ' fetchOpenI
-00057940: 6e74 6572 6573 7448 6973 746f 7279 2829  nterestHistory()
-00057950: 2063 616e 6e6f 7420 7573 6520 7468 6520   cannot use the 
-00057960: 2720 2b20 7469 6d65 6672 616d 6520 2b20  ' + timeframe + 
-00057970: 2720 7469 6d65 6672 616d 6527 290a 2020  ' timeframe').  
-00057980: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-00057990: 7b0a 2020 2020 2020 2020 2020 2020 2773  {.            's
-000579a0: 796d 626f 6c27 3a20 6d61 726b 6574 5b27  ymbol': market['
-000579b0: 6964 275d 2c0a 2020 2020 2020 2020 2020  id'],.          
-000579c0: 2020 2769 6e74 6572 7661 6c54 696d 6527    'intervalTime'
-000579d0: 3a20 696e 7465 7276 616c 2c0a 2020 2020  : interval,.    
-000579e0: 2020 2020 2020 2020 2763 6174 6567 6f72          'categor
-000579f0: 7927 3a20 6361 7465 676f 7279 2c0a 2020  y': category,.  
-00057a00: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-00057a10: 6966 2073 696e 6365 2069 7320 6e6f 7420  if since is not 
-00057a20: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-00057a30: 2020 7265 7175 6573 745b 2773 7461 7274    request['start
-00057a40: 5469 6d65 275d 203d 2073 696e 6365 0a20  Time'] = since. 
-00057a50: 2020 2020 2020 2069 6620 6c69 6d69 7420         if limit 
-00057a60: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00057a70: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00057a80: 5b27 6c69 6d69 7427 5d20 3d20 6c69 6d69  ['limit'] = limi
-00057a90: 740a 2020 2020 2020 2020 7265 7370 6f6e  t.        respon
-00057aa0: 7365 203d 2061 7761 6974 2073 656c 662e  se = await self.
-00057ab0: 7075 626c 6963 4765 7456 354d 6172 6b65  publicGetV5Marke
-00057ac0: 744f 7065 6e49 6e74 6572 6573 7428 7365  tOpenInterest(se
-00057ad0: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
-00057ae0: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
-00057af0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-00057b00: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-00057b10: 2020 2020 2020 2020 2272 6574 436f 6465          "retCode
-00057b20: 223a 2030 2c0a 2020 2020 2020 2020 2320  ": 0,.        # 
-00057b30: 2020 2020 2020 2020 2272 6574 4d73 6722          "retMsg"
-00057b40: 3a20 224f 4b22 2c0a 2020 2020 2020 2020  : "OK",.        
-00057b50: 2320 2020 2020 2020 2020 2272 6573 756c  #         "resul
-00057b60: 7422 3a20 7b0a 2020 2020 2020 2020 2320  t": {.        # 
-00057b70: 2020 2020 2020 2020 2020 2020 2273 796d              "sym
-00057b80: 626f 6c22 3a20 2242 5443 5553 4422 2c0a  bol": "BTCUSD",.
-00057b90: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00057ba0: 2020 2020 2020 2263 6174 6567 6f72 7922        "category"
-00057bb0: 3a20 2269 6e76 6572 7365 222c 0a20 2020  : "inverse",.   
-00057bc0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00057bd0: 2020 2022 6c69 7374 223a 205b 0a20 2020     "list": [.   
-00057be0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00057bf0: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
-00057c00: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00057c10: 2020 2020 2020 2022 6f70 656e 496e 7465         "openInte
-00057c20: 7265 7374 223a 2022 3436 3131 3334 3338  rest": "46113438
-00057c30: 342e 3030 3030 3030 3030 222c 0a20 2020  4.00000000",.   
-00057c40: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00057c50: 2020 2020 2020 2020 2020 2022 7469 6d65             "time
-00057c60: 7374 616d 7022 3a20 2231 3636 3935 3731  stamp": "1669571
-00057c70: 3430 3030 3030 220a 2020 2020 2020 2020  400000".        
-00057c80: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00057c90: 2020 7d2c 0a20 2020 2020 2020 2023 2020    },.        #  
-00057ca0: 2020 2020 2020 2020 2020 2020 2020 207b                 {
-00057cb0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00057cc0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00057cd0: 6f70 656e 496e 7465 7265 7374 223a 2022  openInterest": "
-00057ce0: 3436 3131 3334 3239 322e 3030 3030 3030  461134292.000000
-00057cf0: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
-00057d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00057d10: 2020 2022 7469 6d65 7374 616d 7022 3a20     "timestamp": 
-00057d20: 2231 3636 3935 3731 3130 3030 3030 220a  "1669571100000".
-00057d30: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00057d40: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-00057d50: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00057d60: 2020 5d2c 0a20 2020 2020 2020 2023 2020    ],.        #  
-00057d70: 2020 2020 2020 2020 2020 2022 6e65 7874             "next
-00057d80: 5061 6765 4375 7273 6f72 223a 2022 220a  PageCursor": "".
-00057d90: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00057da0: 2020 7d2c 0a20 2020 2020 2020 2023 2020    },.        #  
-00057db0: 2020 2020 2020 2022 7265 7445 7874 496e         "retExtIn
-00057dc0: 666f 223a 207b 7d2c 0a20 2020 2020 2020  fo": {},.       
-00057dd0: 2023 2020 2020 2020 2020 2022 7469 6d65   #         "time
-00057de0: 223a 2031 3637 3230 3533 3534 3835 3739  ": 1672053548579
-00057df0: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
-00057e00: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00057e10: 2020 2072 6573 756c 7420 3d20 7365 6c66     result = self
-00057e20: 2e73 6166 655f 7661 6c75 6528 7265 7370  .safe_value(resp
-00057e30: 6f6e 7365 2c20 2772 6573 756c 7427 2c20  onse, 'result', 
-00057e40: 7b7d 290a 2020 2020 2020 2020 6964 203d  {}).        id =
-00057e50: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-00057e60: 6728 7265 7375 6c74 2c20 2773 796d 626f  g(result, 'symbo
-00057e70: 6c27 290a 2020 2020 2020 2020 6d61 726b  l').        mark
-00057e80: 6574 203d 2073 656c 662e 7361 6665 5f6d  et = self.safe_m
-00057e90: 6172 6b65 7428 6964 2c20 6d61 726b 6574  arket(id, market
-00057ea0: 2c20 4e6f 6e65 2c20 2763 6f6e 7472 6163  , None, 'contrac
-00057eb0: 7427 290a 2020 2020 2020 2020 6461 7461  t').        data
-00057ec0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
-00057ed0: 7565 2872 6573 756c 742c 2027 6c69 7374  ue(result, 'list
-00057ee0: 272c 205b 5d29 0a20 2020 2020 2020 2072  ', []).        r
-00057ef0: 6574 7572 6e20 7365 6c66 2e70 6172 7365  eturn self.parse
-00057f00: 5f6f 7065 6e5f 696e 7465 7265 7374 7328  _open_interests(
-00057f10: 6461 7461 2c20 6d61 726b 6574 2c20 7369  data, market, si
-00057f20: 6e63 652c 206c 696d 6974 290a 0a20 2020  nce, limit)..   
-00057f30: 2061 7379 6e63 2064 6566 2066 6574 6368   async def fetch
-00057f40: 5f6f 7065 6e5f 696e 7465 7265 7374 2873  _open_interest(s
-00057f50: 656c 662c 2073 796d 626f 6c3a 2073 7472  elf, symbol: str
-00057f60: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
-00057f70: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00057f80: 2020 5265 7472 6965 7665 7320 7468 6520    Retrieves the 
-00057f90: 6f70 656e 2069 6e74 6572 6573 7420 6f66  open interest of
-00057fa0: 2061 2064 6572 6976 6174 6976 6520 7472   a derivative tr
-00057fb0: 6164 696e 6720 7061 6972 0a20 2020 2020  ading pair.     
-00057fc0: 2020 2073 6565 2068 7474 7073 3a2f 2f62     see https://b
-00057fd0: 7962 6974 2d65 7863 6861 6e67 652e 6769  ybit-exchange.gi
-00057fe0: 7468 7562 2e69 6f2f 646f 6373 2f76 352f  thub.io/docs/v5/
-00057ff0: 6d61 726b 6574 2f6f 7065 6e2d 696e 7465  market/open-inte
-00058000: 7265 7374 0a20 2020 2020 2020 203a 7061  rest.        :pa
-00058010: 7261 6d20 7374 7220 7379 6d62 6f6c 3a20  ram str symbol: 
-00058020: 556e 6966 6965 6420 4343 5854 206d 6172  Unified CCXT mar
-00058030: 6b65 7420 7379 6d62 6f6c 0a20 2020 2020  ket symbol.     
-00058040: 2020 203a 7061 7261 6d20 6469 6374 2070     :param dict p
-00058050: 6172 616d 733a 2065 7863 6861 6e67 6520  arams: exchange 
-00058060: 7370 6563 6966 6963 2070 6172 616d 6574  specific paramet
-00058070: 6572 730a 2020 2020 2020 2020 3a70 6172  ers.        :par
-00058080: 616d 2073 7472 7c4e 6f6e 6520 7061 7261  am str|None para
-00058090: 6d73 5b27 696e 7465 7276 616c 275d 3a20  ms['interval']: 
-000580a0: 356d 2c20 3135 6d2c 2033 306d 2c20 3168  5m, 15m, 30m, 1h
-000580b0: 2c20 3468 2c20 3164 0a20 2020 2020 2020  , 4h, 1d.       
-000580c0: 203a 7061 7261 6d20 7374 727c 4e6f 6e65   :param str|None
-000580d0: 2070 6172 616d 735b 2763 6174 6567 6f72   params['categor
-000580e0: 7927 5d3a 2022 6c69 6e65 6172 2220 6f72  y']: "linear" or
-000580f0: 2022 696e 7665 7273 6522 0a20 2020 2020   "inverse".     
-00058100: 2020 203a 7265 7475 726e 7320 6469 6374     :returns dict
-00058110: 7d20 616e 206f 7065 6e20 696e 7465 7265  } an open intere
-00058120: 7374 2073 7472 7563 7475 7265 7b40 6c69  st structure{@li
-00058130: 6e6b 2068 7474 7073 3a2f 2f64 6f63 732e  nk https://docs.
-00058140: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d69  ccxt.com/#/?id=i
-00058150: 6e74 6572 6573 742d 6869 7374 6f72 792d  nterest-history-
-00058160: 7374 7275 6374 7572 653a 0a20 2020 2020  structure:.     
-00058170: 2020 2022 2222 0a20 2020 2020 2020 2061     """.        a
-00058180: 7761 6974 2073 656c 662e 6c6f 6164 5f6d  wait self.load_m
-00058190: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
-000581a0: 206d 6172 6b65 7420 3d20 7365 6c66 2e6d   market = self.m
-000581b0: 6172 6b65 7428 7379 6d62 6f6c 290a 2020  arket(symbol).  
-000581c0: 2020 2020 2020 6966 206e 6f74 206d 6172        if not mar
-000581d0: 6b65 745b 2763 6f6e 7472 6163 7427 5d3a  ket['contract']:
-000581e0: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-000581f0: 7365 2042 6164 5265 7175 6573 7428 7365  se BadRequest(se
-00058200: 6c66 2e69 6420 2b20 2720 6665 7463 684f  lf.id + ' fetchO
-00058210: 7065 6e49 6e74 6572 6573 7428 2920 7375  penInterest() su
-00058220: 7070 6f72 7473 2063 6f6e 7472 6163 7420  pports contract 
-00058230: 6d61 726b 6574 7320 6f6e 6c79 2729 0a20  markets only'). 
-00058240: 2020 2020 2020 2074 696d 6566 7261 6d65         timeframe
-00058250: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-00058260: 696e 6728 7061 7261 6d73 2c20 2769 6e74  ing(params, 'int
-00058270: 6572 7661 6c27 2c20 2731 6827 290a 2020  erval', '1h').  
-00058280: 2020 2020 2020 696e 7465 7276 616c 7320        intervals 
-00058290: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-000582a0: 6528 7365 6c66 2e6f 7074 696f 6e73 2c20  e(self.options, 
-000582b0: 2769 6e74 6572 7661 6c73 2729 0a20 2020  'intervals').   
-000582c0: 2020 2020 2069 6e74 6572 7661 6c20 3d20       interval = 
-000582d0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-000582e0: 2869 6e74 6572 7661 6c73 2c20 7469 6d65  (intervals, time
-000582f0: 6672 616d 6529 2020 2320 356d 696e 2c31  frame)  # 5min,1
-00058300: 356d 696e 2c33 306d 696e 2c31 682c 3468  5min,30min,1h,4h
-00058310: 2c31 640a 2020 2020 2020 2020 6966 2069  ,1d.        if i
-00058320: 6e74 6572 7661 6c20 6973 204e 6f6e 653a  nterval is None:
-00058330: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-00058340: 7365 2042 6164 5265 7175 6573 7428 7365  se BadRequest(se
-00058350: 6c66 2e69 6420 2b20 2720 6665 7463 684f  lf.id + ' fetchO
-00058360: 7065 6e49 6e74 6572 6573 7428 2920 6361  penInterest() ca
-00058370: 6e6e 6f74 2075 7365 2074 6865 2027 202b  nnot use the ' +
-00058380: 2074 696d 6566 7261 6d65 202b 2027 2074   timeframe + ' t
-00058390: 696d 6566 7261 6d65 2729 0a20 2020 2020  imeframe').     
-000583a0: 2020 2073 7562 5479 7065 203d 2027 6c69     subType = 'li
-000583b0: 6e65 6172 2720 6966 206d 6172 6b65 745b  near' if market[
-000583c0: 276c 696e 6561 7227 5d20 656c 7365 2027  'linear'] else '
-000583d0: 696e 7665 7273 6527 0a20 2020 2020 2020  inverse'.       
-000583e0: 2063 6174 6567 6f72 7920 3d20 7365 6c66   category = self
-000583f0: 2e73 6166 655f 7374 7269 6e67 2870 6172  .safe_string(par
-00058400: 616d 732c 2027 6361 7465 676f 7279 272c  ams, 'category',
-00058410: 2073 7562 5479 7065 290a 2020 2020 2020   subType).      
-00058420: 2020 7265 7175 6573 7420 3d20 7b0a 2020    request = {.  
-00058430: 2020 2020 2020 2020 2020 2773 796d 626f            'symbo
-00058440: 6c27 3a20 6d61 726b 6574 5b27 6964 275d  l': market['id']
-00058450: 2c0a 2020 2020 2020 2020 2020 2020 2769  ,.            'i
-00058460: 6e74 6572 7661 6c54 696d 6527 3a20 696e  ntervalTime': in
-00058470: 7465 7276 616c 2c0a 2020 2020 2020 2020  terval,.        
-00058480: 2020 2020 2763 6174 6567 6f72 7927 3a20      'category': 
-00058490: 6361 7465 676f 7279 2c0a 2020 2020 2020  category,.      
-000584a0: 2020 7d0a 2020 2020 2020 2020 7265 7370    }.        resp
-000584b0: 6f6e 7365 203d 2061 7761 6974 2073 656c  onse = await sel
-000584c0: 662e 7075 626c 6963 4765 7456 354d 6172  f.publicGetV5Mar
-000584d0: 6b65 744f 7065 6e49 6e74 6572 6573 7428  ketOpenInterest(
-000584e0: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
-000584f0: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
-00058500: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00058510: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
-00058520: 2320 2020 2020 2020 2020 2272 6574 436f  #         "retCo
-00058530: 6465 223a 2030 2c0a 2020 2020 2020 2020  de": 0,.        
-00058540: 2320 2020 2020 2020 2020 2272 6574 4d73  #         "retMs
-00058550: 6722 3a20 224f 4b22 2c0a 2020 2020 2020  g": "OK",.      
-00058560: 2020 2320 2020 2020 2020 2020 2272 6573    #         "res
-00058570: 756c 7422 3a20 7b0a 2020 2020 2020 2020  ult": {.        
-00058580: 2320 2020 2020 2020 2020 2020 2020 2273  #             "s
-00058590: 796d 626f 6c22 3a20 2242 5443 5553 4422  ymbol": "BTCUSD"
-000585a0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-000585b0: 2020 2020 2020 2020 2263 6174 6567 6f72          "categor
-000585c0: 7922 3a20 2269 6e76 6572 7365 222c 0a20  y": "inverse",. 
-000585d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000585e0: 2020 2020 2022 6c69 7374 223a 205b 0a20       "list": [. 
-000585f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00058600: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-00058610: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00058620: 2020 2020 2020 2020 2022 6f70 656e 496e           "openIn
-00058630: 7465 7265 7374 223a 2022 3436 3131 3334  terest": "461134
-00058640: 3338 342e 3030 3030 3030 3030 222c 0a20  384.00000000",. 
-00058650: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00058660: 2020 2020 2020 2020 2020 2020 2022 7469               "ti
-00058670: 6d65 7374 616d 7022 3a20 2231 3636 3935  mestamp": "16695
-00058680: 3731 3430 3030 3030 220a 2020 2020 2020  71400000".      
-00058690: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000586a0: 2020 2020 7d2c 0a20 2020 2020 2020 2023      },.        #
-000586b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000586c0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-000586d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000586e0: 2022 6f70 656e 496e 7465 7265 7374 223a   "openInterest":
-000586f0: 2022 3436 3131 3334 3239 322e 3030 3030   "461134292.0000
-00058700: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
-00058710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00058720: 2020 2020 2022 7469 6d65 7374 616d 7022       "timestamp"
-00058730: 3a20 2231 3636 3935 3731 3130 3030 3030  : "1669571100000
-00058740: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
-00058750: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
-00058760: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00058770: 2020 2020 5d2c 0a20 2020 2020 2020 2023      ],.        #
-00058780: 2020 2020 2020 2020 2020 2020 2022 6e65               "ne
-00058790: 7874 5061 6765 4375 7273 6f72 223a 2022  xtPageCursor": "
-000587a0: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
-000587b0: 2020 2020 7d2c 0a20 2020 2020 2020 2023      },.        #
-000587c0: 2020 2020 2020 2020 2022 7265 7445 7874           "retExt
-000587d0: 496e 666f 223a 207b 7d2c 0a20 2020 2020  Info": {},.     
-000587e0: 2020 2023 2020 2020 2020 2020 2022 7469     #         "ti
-000587f0: 6d65 223a 2031 3637 3230 3533 3534 3835  me": 16720535485
-00058800: 3739 0a20 2020 2020 2020 2023 2020 2020  79.        #    
-00058810: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
-00058820: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
-00058830: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
-00058840: 7370 6f6e 7365 2c20 2772 6573 756c 7427  sponse, 'result'
-00058850: 2c20 7b7d 290a 2020 2020 2020 2020 6964  , {}).        id
-00058860: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-00058870: 696e 6728 7265 7375 6c74 2c20 2773 796d  ing(result, 'sym
-00058880: 626f 6c27 290a 2020 2020 2020 2020 6d61  bol').        ma
-00058890: 726b 6574 203d 2073 656c 662e 7361 6665  rket = self.safe
-000588a0: 5f6d 6172 6b65 7428 6964 2c20 6d61 726b  _market(id, mark
-000588b0: 6574 2c20 4e6f 6e65 2c20 2763 6f6e 7472  et, None, 'contr
-000588c0: 6163 7427 290a 2020 2020 2020 2020 6461  act').        da
-000588d0: 7461 203d 2073 656c 662e 7361 6665 5f76  ta = self.safe_v
-000588e0: 616c 7565 2872 6573 756c 742c 2027 6c69  alue(result, 'li
-000588f0: 7374 272c 205b 5d29 0a20 2020 2020 2020  st', []).       
-00058900: 2072 6574 7572 6e20 7365 6c66 2e70 6172   return self.par
-00058910: 7365 5f6f 7065 6e5f 696e 7465 7265 7374  se_open_interest
-00058920: 2864 6174 615b 305d 2c20 6d61 726b 6574  (data[0], market
-00058930: 290a 0a20 2020 2061 7379 6e63 2064 6566  )..    async def
-00058940: 2066 6574 6368 5f6f 7065 6e5f 696e 7465   fetch_open_inte
-00058950: 7265 7374 5f68 6973 746f 7279 2873 656c  rest_history(sel
-00058960: 662c 2073 796d 626f 6c3a 2073 7472 2c20  f, symbol: str, 
-00058970: 7469 6d65 6672 616d 653d 2731 6827 2c20  timeframe='1h', 
-00058980: 7369 6e63 653a 204f 7074 696f 6e61 6c5b  since: Optional[
-00058990: 696e 745d 203d 204e 6f6e 652c 206c 696d  int] = None, lim
-000589a0: 6974 3a20 4f70 7469 6f6e 616c 5b69 6e74  it: Optional[int
-000589b0: 5d20 3d20 4e6f 6e65 2c20 7061 7261 6d73  ] = None, params
-000589c0: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
-000589d0: 220a 2020 2020 2020 2020 4765 7473 2074  ".        Gets t
-000589e0: 6865 2074 6f74 616c 2061 6d6f 756e 7420  he total amount 
-000589f0: 6f66 2075 6e73 6574 746c 6564 2063 6f6e  of unsettled con
-00058a00: 7472 6163 7473 2e20 496e 206f 7468 6572  tracts. In other
-00058a10: 2077 6f72 6473 2c20 7468 6520 746f 7461   words, the tota
-00058a20: 6c20 6e75 6d62 6572 206f 6620 636f 6e74  l number of cont
-00058a30: 7261 6374 7320 6865 6c64 2069 6e20 6f70  racts held in op
-00058a40: 656e 2070 6f73 6974 696f 6e73 0a20 2020  en positions.   
-00058a50: 2020 2020 2073 6565 2068 7474 7073 3a2f       see https:/
-00058a60: 2f62 7962 6974 2d65 7863 6861 6e67 652e  /bybit-exchange.
-00058a70: 6769 7468 7562 2e69 6f2f 646f 6373 2f76  github.io/docs/v
-00058a80: 352f 6d61 726b 6574 2f6f 7065 6e2d 696e  5/market/open-in
-00058a90: 7465 7265 7374 0a20 2020 2020 2020 203a  terest.        :
-00058aa0: 7061 7261 6d20 7374 7220 7379 6d62 6f6c  param str symbol
-00058ab0: 3a20 556e 6966 6965 6420 6d61 726b 6574  : Unified market
-00058ac0: 2073 796d 626f 6c0a 2020 2020 2020 2020   symbol.        
-00058ad0: 3a70 6172 616d 2073 7472 2074 696d 6566  :param str timef
-00058ae0: 7261 6d65 3a20 2235 6d22 2c20 3135 6d2c  rame: "5m", 15m,
-00058af0: 2033 306d 2c20 3168 2c20 3468 2c20 3164   30m, 1h, 4h, 1d
-00058b00: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00058b10: 696e 7420 7369 6e63 653a 204e 6f74 2075  int since: Not u
-00058b20: 7365 6420 6279 2042 7962 6974 0a20 2020  sed by Bybit.   
-00058b30: 2020 2020 203a 7061 7261 6d20 696e 7420       :param int 
-00058b40: 6c69 6d69 743a 2054 6865 206e 756d 6265  limit: The numbe
-00058b50: 7220 6f66 206f 7065 6e20 696e 7465 7265  r of open intere
-00058b60: 7374 2073 7472 7563 7475 7265 7320 746f  st structures to
-00058b70: 2072 6574 7572 6e2e 204d 6178 2032 3030   return. Max 200
-00058b80: 2c20 6465 6661 756c 7420 3530 0a20 2020  , default 50.   
-00058b90: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
-00058ba0: 2070 6172 616d 733a 2045 7863 6861 6e67   params: Exchang
-00058bb0: 6520 7370 6563 6966 6963 2070 6172 616d  e specific param
-00058bc0: 6574 6572 730a 2020 2020 2020 2020 3a72  eters.        :r
-00058bd0: 6574 7572 6e73 3a20 416e 2061 7272 6179  eturns: An array
-00058be0: 206f 6620 6f70 656e 2069 6e74 6572 6573   of open interes
-00058bf0: 7420 7374 7275 6374 7572 6573 0a20 2020  t structures.   
-00058c00: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00058c10: 2069 6620 7469 6d65 6672 616d 6520 3d3d   if timeframe ==
-00058c20: 2027 316d 273a 0a20 2020 2020 2020 2020   '1m':.         
-00058c30: 2020 2072 6169 7365 2042 6164 5265 7175     raise BadRequ
-00058c40: 6573 7428 7365 6c66 2e69 6420 2b20 2766  est(self.id + 'f
-00058c50: 6574 6368 4f70 656e 496e 7465 7265 7374  etchOpenInterest
-00058c60: 4869 7374 6f72 7920 6361 6e6e 6f74 2075  History cannot u
-00058c70: 7365 2074 6865 2031 6d20 7469 6d65 6672  se the 1m timefr
-00058c80: 616d 6527 290a 2020 2020 2020 2020 6177  ame').        aw
-00058c90: 6169 7420 7365 6c66 2e6c 6f61 645f 6d61  ait self.load_ma
-00058ca0: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
-00058cb0: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
-00058cc0: 726b 6574 2873 796d 626f 6c29 0a20 2020  rket(symbol).   
-00058cd0: 2020 2020 2069 6620 6d61 726b 6574 5b27       if market['
-00058ce0: 7370 6f74 275d 206f 7220 6d61 726b 6574  spot'] or market
-00058cf0: 5b27 6f70 7469 6f6e 275d 3a0a 2020 2020  ['option']:.    
-00058d00: 2020 2020 2020 2020 7261 6973 6520 4261          raise Ba
-00058d10: 6452 6571 7565 7374 2873 656c 662e 6964  dRequest(self.id
-00058d20: 202b 2027 2066 6574 6368 4f70 656e 496e   + ' fetchOpenIn
-00058d30: 7465 7265 7374 4869 7374 6f72 7928 2920  terestHistory() 
-00058d40: 7379 6d62 6f6c 2064 6f65 7320 6e6f 7420  symbol does not 
-00058d50: 7375 7070 6f72 7420 6d61 726b 6574 2027  support market '
-00058d60: 202b 2073 796d 626f 6c29 0a20 2020 2020   + symbol).     
-00058d70: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
-00058d80: 2020 2020 2020 2020 2020 2027 7379 6d62             'symb
-00058d90: 6f6c 273a 206d 6172 6b65 745b 2769 6427  ol': market['id'
-00058da0: 5d2c 0a20 2020 2020 2020 207d 0a20 2020  ],.        }.   
-00058db0: 2020 2020 2069 6620 6c69 6d69 7420 6973       if limit is
-00058dc0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00058dd0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-00058de0: 6c69 6d69 7427 5d20 3d20 6c69 6d69 740a  limit'] = limit.
-00058df0: 2020 2020 2020 2020 7265 7475 726e 2061          return a
-00058e00: 7761 6974 2073 656c 662e 6665 7463 685f  wait self.fetch_
-00058e10: 6465 7269 7661 7469 7665 735f 6f70 656e  derivatives_open
-00058e20: 5f69 6e74 6572 6573 745f 6869 7374 6f72  _interest_histor
-00058e30: 7928 7379 6d62 6f6c 2c20 7469 6d65 6672  y(symbol, timefr
-00058e40: 616d 652c 2073 696e 6365 2c20 6c69 6d69  ame, since, limi
-00058e50: 742c 2070 6172 616d 7329 0a0a 2020 2020  t, params)..    
-00058e60: 6465 6620 7061 7273 655f 6f70 656e 5f69  def parse_open_i
-00058e70: 6e74 6572 6573 7428 7365 6c66 2c20 696e  nterest(self, in
-00058e80: 7465 7265 7374 2c20 6d61 726b 6574 3d4e  terest, market=N
-00058e90: 6f6e 6529 3a0a 2020 2020 2020 2020 230a  one):.        #.
-00058ea0: 2020 2020 2020 2020 2320 2020 207b 0a20          #    {. 
-00058eb0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00058ec0: 226f 7065 6e49 6e74 6572 6573 7422 3a20  "openInterest": 
-00058ed0: 3634 3735 372e 3632 3430 3030 3030 2c0a  64757.62400000,.
-00058ee0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00058ef0: 2022 7469 6d65 7374 616d 7022 3a20 3136   "timestamp": 16
-00058f00: 3635 3738 3438 3030 3030 302c 0a20 2020  65784800000,.   
-00058f10: 2020 2020 2023 2020 2020 7d0a 2020 2020       #    }.    
-00058f20: 2020 2020 230a 2020 2020 2020 2020 7469      #.        ti
-00058f30: 6d65 7374 616d 7020 3d20 7365 6c66 2e73  mestamp = self.s
-00058f40: 6166 655f 696e 7465 6765 7228 696e 7465  afe_integer(inte
-00058f50: 7265 7374 2c20 2774 696d 6573 7461 6d70  rest, 'timestamp
-00058f60: 2729 0a20 2020 2020 2020 2076 616c 7565  ').        value
-00058f70: 203d 2073 656c 662e 7361 6665 5f6e 756d   = self.safe_num
-00058f80: 6265 725f 3228 696e 7465 7265 7374 2c20  ber_2(interest, 
-00058f90: 276f 7065 6e5f 696e 7465 7265 7374 272c  'open_interest',
-00058fa0: 2027 6f70 656e 496e 7465 7265 7374 2729   'openInterest')
-00058fb0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00058fc0: 7b0a 2020 2020 2020 2020 2020 2020 2773  {.            's
-00058fd0: 796d 626f 6c27 3a20 6d61 726b 6574 5b27  ymbol': market['
-00058fe0: 7379 6d62 6f6c 275d 2c0a 2020 2020 2020  symbol'],.      
-00058ff0: 2020 2020 2020 276f 7065 6e49 6e74 6572        'openInter
-00059000: 6573 7441 6d6f 756e 7427 3a20 4e6f 6e65  estAmount': None
-00059010: 2c0a 2020 2020 2020 2020 2020 2020 276f  ,.            'o
-00059020: 7065 6e49 6e74 6572 6573 7456 616c 7565  penInterestValue
-00059030: 273a 2076 616c 7565 2c0a 2020 2020 2020  ': value,.      
-00059040: 2020 2020 2020 2774 696d 6573 7461 6d70        'timestamp
-00059050: 273a 2074 696d 6573 7461 6d70 2c0a 2020  ': timestamp,.  
-00059060: 2020 2020 2020 2020 2020 2764 6174 6574            'datet
-00059070: 696d 6527 3a20 7365 6c66 2e69 736f 3836  ime': self.iso86
-00059080: 3031 2874 696d 6573 7461 6d70 292c 0a20  01(timestamp),. 
-00059090: 2020 2020 2020 2020 2020 2027 696e 666f             'info
-000590a0: 273a 2069 6e74 6572 6573 742c 0a20 2020  ': interest,.   
-000590b0: 2020 2020 207d 0a0a 2020 2020 6173 796e       }..    asyn
-000590c0: 6320 6465 6620 6665 7463 685f 626f 7272  c def fetch_borr
-000590d0: 6f77 5f72 6174 6528 7365 6c66 2c20 636f  ow_rate(self, co
-000590e0: 6465 3a20 7374 722c 2070 6172 616d 733d  de: str, params=
-000590f0: 7b7d 293a 0a20 2020 2020 2020 2022 2222  {}):.        """
-00059100: 0a20 2020 2020 2020 2066 6574 6368 2074  .        fetch t
-00059110: 6865 2072 6174 6520 6f66 2069 6e74 6572  he rate of inter
-00059120: 6573 7420 746f 2062 6f72 726f 7720 6120  est to borrow a 
-00059130: 6375 7272 656e 6379 2066 6f72 206d 6172  currency for mar
-00059140: 6769 6e20 7472 6164 696e 670a 2020 2020  gin trading.    
-00059150: 2020 2020 7365 6520 6874 7470 733a 2f2f      see https://
-00059160: 6279 6269 742d 6578 6368 616e 6765 2e67  bybit-exchange.g
-00059170: 6974 6875 622e 696f 2f64 6f63 732f 7370  ithub.io/docs/sp
-00059180: 6f74 2f76 332f 2374 2d71 7565 7279 696e  ot/v3/#t-queryin
-00059190: 7465 7265 7374 7175 6f74 610a 2020 2020  terestquota.    
-000591a0: 2020 2020 3a70 6172 616d 2073 7472 2063      :param str c
-000591b0: 6f64 653a 2075 6e69 6669 6564 2063 7572  ode: unified cur
-000591c0: 7265 6e63 7920 636f 6465 0a20 2020 2020  rency code.     
-000591d0: 2020 203a 7061 7261 6d20 6469 6374 2070     :param dict p
-000591e0: 6172 616d 733a 2065 7874 7261 2070 6172  arams: extra par
-000591f0: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
-00059200: 2074 6f20 7468 6520 6279 6269 7420 6170   to the bybit ap
-00059210: 6920 656e 6470 6f69 6e74 0a20 2020 2020  i endpoint.     
-00059220: 2020 203a 7265 7475 726e 7320 6469 6374     :returns dict
-00059230: 3a20 6120 6062 6f72 726f 7720 7261 7465  : a `borrow rate
-00059240: 2073 7472 7563 7475 7265 203c 6874 7470   structure <http
-00059250: 733a 2f2f 646f 6373 2e63 6378 742e 636f  s://docs.ccxt.co
-00059260: 6d2f 232f 3f69 643d 626f 7272 6f77 2d72  m/#/?id=borrow-r
-00059270: 6174 652d 7374 7275 6374 7572 653e 600a  ate-structure>`.
-00059280: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00059290: 2020 2020 6177 6169 7420 7365 6c66 2e6c      await self.l
-000592a0: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
-000592b0: 2020 2020 2020 6375 7272 656e 6379 203d        currency =
-000592c0: 2073 656c 662e 6375 7272 656e 6379 2863   self.currency(c
-000592d0: 6f64 6529 0a20 2020 2020 2020 2072 6571  ode).        req
-000592e0: 7565 7374 203d 207b 0a20 2020 2020 2020  uest = {.       
-000592f0: 2020 2020 2027 636f 696e 273a 2063 7572       'coin': cur
-00059300: 7265 6e63 795b 2769 6427 5d2c 0a20 2020  rency['id'],.   
-00059310: 2020 2020 207d 0a20 2020 2020 2020 2072       }.        r
-00059320: 6573 706f 6e73 6520 3d20 6177 6169 7420  esponse = await 
-00059330: 7365 6c66 2e70 7269 7661 7465 4765 7453  self.privateGetS
-00059340: 706f 7456 3350 7269 7661 7465 4372 6f73  potV3PrivateCros
-00059350: 734d 6172 6769 6e4c 6f61 6e49 6e66 6f28  sMarginLoanInfo(
-00059360: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
-00059370: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
-00059380: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00059390: 2320 2020 207b 0a20 2020 2020 2020 2023  #    {.        #
-000593a0: 2020 2020 2020 2020 2022 7265 7443 6f64           "retCod
-000593b0: 6522 3a20 2230 222c 0a20 2020 2020 2020  e": "0",.       
-000593c0: 2023 2020 2020 2020 2020 2022 7265 744d   #         "retM
-000593d0: 7367 223a 2022 7375 6363 6573 7322 2c0a  sg": "success",.
-000593e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000593f0: 2020 2272 6573 756c 7422 3a20 7b0a 2020    "result": {.  
-00059400: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00059410: 2020 2020 2263 6f69 6e22 3a20 2255 5344      "coin": "USD
-00059420: 5422 2c0a 2020 2020 2020 2020 2320 2020  T",.        #   
-00059430: 2020 2020 2020 2020 2020 2269 6e74 6572            "inter
-00059440: 6573 7452 6174 6522 3a20 2230 2e30 3030  estRate": "0.000
-00059450: 3130 3730 3030 3030 3022 2c0a 2020 2020  107000000",.    
-00059460: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00059470: 2020 226c 6f61 6e41 626c 6541 6d6f 756e    "loanAbleAmoun
-00059480: 7422 3a20 2222 2c0a 2020 2020 2020 2020  t": "",.        
-00059490: 2320 2020 2020 2020 2020 2020 2020 226d  #             "m
-000594a0: 6178 4c6f 616e 416d 6f75 6e74 223a 2022  axLoanAmount": "
-000594b0: 3739 3939 392e 3939 3922 0a20 2020 2020  79999.999".     
-000594c0: 2020 2023 2020 2020 2020 2020 207d 2c0a     #         },.
-000594d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000594e0: 2020 2272 6574 4578 7449 6e66 6f22 3a20    "retExtInfo": 
-000594f0: 6e75 6c6c 2c0a 2020 2020 2020 2020 2320  null,.        # 
-00059500: 2020 2020 2020 2020 2274 696d 6522 3a20          "time": 
-00059510: 2231 3636 3637 3334 3439 3037 3738 220a  "1666734490778".
-00059520: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-00059530: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-00059540: 2020 6461 7461 203d 2073 656c 662e 7361    data = self.sa
-00059550: 6665 5f76 616c 7565 2872 6573 706f 6e73  fe_value(respons
-00059560: 652c 2027 7265 7375 6c74 272c 207b 7d29  e, 'result', {})
-00059570: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00059580: 7365 6c66 2e70 6172 7365 5f62 6f72 726f  self.parse_borro
-00059590: 775f 7261 7465 2864 6174 612c 2063 7572  w_rate(data, cur
-000595a0: 7265 6e63 7929 0a0a 2020 2020 6465 6620  rency)..    def 
-000595b0: 7061 7273 655f 626f 7272 6f77 5f72 6174  parse_borrow_rat
-000595c0: 6528 7365 6c66 2c20 696e 666f 2c20 6375  e(self, info, cu
-000595d0: 7272 656e 6379 3d4e 6f6e 6529 3a0a 2020  rrency=None):.  
-000595e0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-000595f0: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
-00059600: 2320 2020 2020 2020 2020 2263 6f69 6e22  #         "coin"
-00059610: 3a20 2255 5344 5422 2c0a 2020 2020 2020  : "USDT",.      
-00059620: 2020 2320 2020 2020 2020 2020 2269 6e74    #         "int
-00059630: 6572 6573 7452 6174 6522 3a20 2230 2e30  erestRate": "0.0
-00059640: 3030 3130 3730 3030 3030 3022 2c0a 2020  00107000000",.  
-00059650: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00059660: 226c 6f61 6e41 626c 6541 6d6f 756e 7422  "loanAbleAmount"
-00059670: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
-00059680: 2020 2020 2020 2020 226d 6178 4c6f 616e          "maxLoan
-00059690: 416d 6f75 6e74 223a 2022 3739 3939 392e  Amount": "79999.
-000596a0: 3939 3922 0a20 2020 2020 2020 2023 2020  999".        #  
-000596b0: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
-000596c0: 2020 2020 2020 2074 696d 6573 7461 6d70         timestamp
-000596d0: 203d 2073 656c 662e 6d69 6c6c 6973 6563   = self.millisec
-000596e0: 6f6e 6473 2829 0a20 2020 2020 2020 2063  onds().        c
-000596f0: 7572 7265 6e63 7949 6420 3d20 7365 6c66  urrencyId = self
-00059700: 2e73 6166 655f 7374 7269 6e67 2869 6e66  .safe_string(inf
-00059710: 6f2c 2027 636f 696e 2729 0a20 2020 2020  o, 'coin').     
-00059720: 2020 2072 6574 7572 6e20 7b0a 2020 2020     return {.    
-00059730: 2020 2020 2020 2020 2763 7572 7265 6e63          'currenc
-00059740: 7927 3a20 7365 6c66 2e73 6166 655f 6375  y': self.safe_cu
-00059750: 7272 656e 6379 5f63 6f64 6528 6375 7272  rrency_code(curr
-00059760: 656e 6379 4964 2c20 6375 7272 656e 6379  encyId, currency
-00059770: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
-00059780: 7261 7465 273a 2073 656c 662e 7361 6665  rate': self.safe
-00059790: 5f6e 756d 6265 7228 696e 666f 2c20 2769  _number(info, 'i
-000597a0: 6e74 6572 6573 7452 6174 6527 292c 0a20  nterestRate'),. 
-000597b0: 2020 2020 2020 2020 2020 2027 7065 7269             'peri
-000597c0: 6f64 273a 2038 3634 3030 3030 302c 2020  od': 86400000,  
-000597d0: 2320 4461 696c 790a 2020 2020 2020 2020  # Daily.        
-000597e0: 2020 2020 2774 696d 6573 7461 6d70 273a      'timestamp':
-000597f0: 2074 696d 6573 7461 6d70 2c0a 2020 2020   timestamp,.    
-00059800: 2020 2020 2020 2020 2764 6174 6574 696d          'datetim
-00059810: 6527 3a20 7365 6c66 2e69 736f 3836 3031  e': self.iso8601
-00059820: 2874 696d 6573 7461 6d70 292c 0a20 2020  (timestamp),.   
-00059830: 2020 2020 2020 2020 2027 696e 666f 273a           'info':
-00059840: 2069 6e66 6f2c 0a20 2020 2020 2020 207d   info,.        }
-00059850: 0a0a 2020 2020 6173 796e 6320 6465 6620  ..    async def 
-00059860: 6665 7463 685f 626f 7272 6f77 5f69 6e74  fetch_borrow_int
-00059870: 6572 6573 7428 7365 6c66 2c20 636f 6465  erest(self, code
-00059880: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
-00059890: 3d20 4e6f 6e65 2c20 7379 6d62 6f6c 3a20  = None, symbol: 
-000598a0: 4f70 7469 6f6e 616c 5b73 7472 5d20 3d20  Optional[str] = 
-000598b0: 4e6f 6e65 2c20 7369 6e63 653a 204f 7074  None, since: Opt
-000598c0: 696f 6e61 6c5b 696e 745d 203d 204e 6f6e  ional[int] = Non
-000598d0: 652c 206c 696d 6974 3a20 4f70 7469 6f6e  e, limit: Option
-000598e0: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c20  al[int] = None, 
-000598f0: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
-00059900: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00059910: 6665 7463 6820 7468 6520 696e 7465 7265  fetch the intere
-00059920: 7374 206f 7765 6420 6279 2074 6865 2075  st owed by the u
-00059930: 7365 7220 666f 7220 626f 7272 6f77 696e  ser for borrowin
-00059940: 6720 6375 7272 656e 6379 2066 6f72 206d  g currency for m
-00059950: 6172 6769 6e20 7472 6164 696e 670a 2020  argin trading.  
-00059960: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
-00059970: 7c4e 6f6e 6520 636f 6465 3a20 756e 6966  |None code: unif
-00059980: 6965 6420 6375 7272 656e 6379 2063 6f64  ied currency cod
-00059990: 650a 2020 2020 2020 2020 3a70 6172 616d  e.        :param
-000599a0: 2073 7472 7c4e 6f6e 6520 7379 6d62 6f6c   str|None symbol
-000599b0: 3a20 756e 6966 6965 6420 6d61 726b 6574  : unified market
-000599c0: 2073 796d 626f 6c20 7768 656e 2066 6574   symbol when fet
-000599d0: 6368 2069 6e74 6572 6573 7420 696e 2069  ch interest in i
-000599e0: 736f 6c61 7465 6420 6d61 726b 6574 730a  solated markets.
-000599f0: 2020 2020 2020 2020 3a70 6172 616d 206e          :param n
-00059a00: 756d 6265 727c 4e6f 6e65 2073 696e 6365  umber|None since
-00059a10: 3a20 7468 6520 6561 726c 6965 7374 2074  : the earliest t
-00059a20: 696d 6520 696e 206d 7320 746f 2066 6574  ime in ms to fet
-00059a30: 6368 2062 6f72 7272 6f77 2069 6e74 6572  ch borrrow inter
-00059a40: 6573 7420 666f 720a 2020 2020 2020 2020  est for.        
-00059a50: 3a70 6172 616d 206e 756d 6265 727c 4e6f  :param number|No
-00059a60: 6e65 206c 696d 6974 3a20 7468 6520 6d61  ne limit: the ma
-00059a70: 7869 6d75 6d20 6e75 6d62 6572 206f 6620  ximum number of 
-00059a80: 7374 7275 6374 7572 6573 2074 6f20 7265  structures to re
-00059a90: 7472 6965 7665 0a20 2020 2020 2020 203a  trieve.        :
-00059aa0: 7061 7261 6d20 6469 6374 2070 6172 616d  param dict param
-00059ab0: 733a 2065 7874 7261 2070 6172 616d 6574  s: extra paramet
-00059ac0: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
-00059ad0: 7468 6520 6279 6269 7420 6170 6920 656e  the bybit api en
-00059ae0: 6470 6f69 6e74 0a20 2020 2020 2020 203a  dpoint.        :
-00059af0: 7265 7475 726e 7320 5b64 6963 745d 3a20  returns [dict]: 
-00059b00: 6120 6c69 7374 206f 6620 6062 6f72 726f  a list of `borro
-00059b10: 7720 696e 7465 7265 7374 2073 7472 7563  w interest struc
-00059b20: 7475 7265 7320 3c68 7474 7073 3a2f 2f64  tures <https://d
-00059b30: 6f63 732e 6363 7874 2e63 6f6d 2f23 2f3f  ocs.ccxt.com/#/?
-00059b40: 6964 3d62 6f72 726f 772d 696e 7465 7265  id=borrow-intere
-00059b50: 7374 2d73 7472 7563 7475 7265 3e60 0a20  st-structure>`. 
-00059b60: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00059b70: 2020 2061 7761 6974 2073 656c 662e 6c6f     await self.lo
-00059b80: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
-00059b90: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
-00059ba0: 7d0a 2020 2020 2020 2020 7265 7370 6f6e  }.        respon
-00059bb0: 7365 203d 2061 7761 6974 2073 656c 662e  se = await self.
-00059bc0: 7072 6976 6174 6547 6574 5370 6f74 5633  privateGetSpotV3
-00059bd0: 5072 6976 6174 6543 726f 7373 4d61 7267  PrivateCrossMarg
-00059be0: 696e 4163 636f 756e 7428 7365 6c66 2e65  inAccount(self.e
-00059bf0: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
-00059c00: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
-00059c10: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
-00059c20: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-00059c30: 2020 2020 2272 6574 5f63 6f64 6522 3a20      "ret_code": 
-00059c40: 302c 0a20 2020 2020 2020 2023 2020 2020  0,.        #    
-00059c50: 2020 2020 2022 7265 745f 6d73 6722 3a20       "ret_msg": 
-00059c60: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
-00059c70: 2020 2020 2020 2265 7874 5f63 6f64 6522        "ext_code"
-00059c80: 3a20 6e75 6c6c 2c0a 2020 2020 2020 2020  : null,.        
-00059c90: 2320 2020 2020 2020 2020 2265 7874 5f69  #         "ext_i
-00059ca0: 6e66 6f22 3a20 6e75 6c6c 2c0a 2020 2020  nfo": null,.    
-00059cb0: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-00059cc0: 6573 756c 7422 3a20 7b0a 2020 2020 2020  esult": {.      
-00059cd0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00059ce0: 2273 7461 7475 7322 3a20 2231 222c 0a20  "status": "1",. 
-00059cf0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00059d00: 2020 2020 2022 7269 736b 5261 7465 223a       "riskRate":
-00059d10: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
-00059d20: 2020 2020 2020 2020 2020 2020 2261 6363              "acc
-00059d30: 7442 616c 616e 6365 5375 6d22 3a20 2230  tBalanceSum": "0
-00059d40: 2e30 3030 3438 3632 3133 3831 3736 3830  .000486213817680
-00059d50: 3835 3722 2c0a 2020 2020 2020 2020 2320  857",.        # 
-00059d60: 2020 2020 2020 2020 2020 2020 2264 6562              "deb
-00059d70: 7442 616c 616e 6365 5375 6d22 3a20 2230  tBalanceSum": "0
-00059d80: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00059d90: 2020 2020 2020 2020 2022 6c6f 616e 4163           "loanAc
-00059da0: 636f 756e 744c 6973 7422 3a20 5b0a 2020  countList": [.  
-00059db0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00059dc0: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
-00059dd0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00059de0: 2020 2020 2020 2020 2274 6f6b 656e 4964          "tokenId
-00059df0: 223a 2022 4254 4322 2c0a 2020 2020 2020  ": "BTC",.      
-00059e00: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00059e10: 2020 2020 2020 2020 2274 6f74 616c 223a          "total":
-00059e20: 2022 302e 3030 3034 3836 3231 222c 0a20   "0.00048621",. 
-00059e30: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00059e40: 2020 2020 2020 2020 2020 2020 2022 6c6f               "lo
-00059e50: 636b 6564 223a 2022 3022 2c0a 2020 2020  cked": "0",.    
-00059e60: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00059e70: 2020 2020 2020 2020 2020 226c 6f61 6e22            "loan"
-00059e80: 3a20 2230 222c 0a20 2020 2020 2020 2023  : "0",.        #
-00059e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00059ea0: 2020 2020 2022 696e 7465 7265 7374 223a       "interest":
-00059eb0: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
-00059ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00059ed0: 2020 2020 2266 7265 6522 3a20 2230 2e30      "free": "0.0
-00059ee0: 3030 3438 3632 3122 0a20 2020 2020 2020  0048621".       
-00059ef0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00059f00: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
-00059f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00059f20: 2e2e 2e0a 2020 2020 2020 2020 2320 2020  ....        #   
-00059f30: 2020 2020 2020 2020 2020 5d0a 2020 2020            ].    
-00059f40: 2020 2020 2320 2020 2020 2020 2020 7d0a      #         }.
-00059f50: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-00059f60: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-00059f70: 2020 6461 7461 203d 2073 656c 662e 7361    data = self.sa
-00059f80: 6665 5f76 616c 7565 2872 6573 706f 6e73  fe_value(respons
-00059f90: 652c 2027 7265 7375 6c74 272c 207b 7d29  e, 'result', {})
-00059fa0: 0a20 2020 2020 2020 2072 6f77 7320 3d20  .        rows = 
-00059fb0: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
-00059fc0: 6461 7461 2c20 276c 6f61 6e41 6363 6f75  data, 'loanAccou
-00059fd0: 6e74 4c69 7374 272c 205b 5d29 0a20 2020  ntList', []).   
-00059fe0: 2020 2020 2069 6e74 6572 6573 7420 3d20       interest = 
-00059ff0: 7365 6c66 2e70 6172 7365 5f62 6f72 726f  self.parse_borro
-0005a000: 775f 696e 7465 7265 7374 7328 726f 7773  w_interests(rows
-0005a010: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
-0005a020: 7265 7475 726e 2073 656c 662e 6669 6c74  return self.filt
-0005a030: 6572 5f62 795f 6375 7272 656e 6379 5f73  er_by_currency_s
-0005a040: 696e 6365 5f6c 696d 6974 2869 6e74 6572  ince_limit(inter
-0005a050: 6573 742c 2063 6f64 652c 2073 696e 6365  est, code, since
-0005a060: 2c20 6c69 6d69 7429 0a0a 2020 2020 6465  , limit)..    de
-0005a070: 6620 7061 7273 655f 626f 7272 6f77 5f69  f parse_borrow_i
-0005a080: 6e74 6572 6573 7428 7365 6c66 2c20 696e  nterest(self, in
-0005a090: 666f 2c20 6d61 726b 6574 3d4e 6f6e 6529  fo, market=None)
-0005a0a0: 3a0a 2020 2020 2020 2020 230a 2020 2020  :.        #.    
-0005a0b0: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-0005a0c0: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
-0005a0d0: 6f6b 656e 4964 223a 2022 4254 4322 2c0a  okenId": "BTC",.
-0005a0e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0005a0f0: 2020 2274 6f74 616c 223a 2022 302e 3030    "total": "0.00
-0005a100: 3034 3836 3231 222c 0a20 2020 2020 2020  048621",.       
-0005a110: 2023 2020 2020 2020 2020 2022 6c6f 636b   #         "lock
-0005a120: 6564 223a 2022 3022 2c0a 2020 2020 2020  ed": "0",.      
-0005a130: 2020 2320 2020 2020 2020 2020 226c 6f61    #         "loa
-0005a140: 6e22 3a20 2230 222c 0a20 2020 2020 2020  n": "0",.       
-0005a150: 2023 2020 2020 2020 2020 2022 696e 7465   #         "inte
-0005a160: 7265 7374 223a 2022 3022 2c0a 2020 2020  rest": "0",.    
-0005a170: 2020 2020 2320 2020 2020 2020 2020 2266      #         "f
-0005a180: 7265 6522 3a20 2230 2e30 3030 3438 3632  ree": "0.0004862
-0005a190: 3122 0a20 2020 2020 2020 2023 2020 2020  1".        #    
-0005a1a0: 207d 2c0a 2020 2020 2020 2020 230a 2020   },.        #.  
-0005a1b0: 2020 2020 2020 7265 7475 726e 207b 0a20        return {. 
-0005a1c0: 2020 2020 2020 2020 2020 2027 7379 6d62             'symb
-0005a1d0: 6f6c 273a 204e 6f6e 652c 0a20 2020 2020  ol': None,.     
-0005a1e0: 2020 2020 2020 2027 6d61 7267 696e 4d6f         'marginMo
-0005a1f0: 6465 273a 2027 6372 6f73 7327 2c0a 2020  de': 'cross',.  
-0005a200: 2020 2020 2020 2020 2020 2763 7572 7265            'curre
-0005a210: 6e63 7927 3a20 7365 6c66 2e73 6166 655f  ncy': self.safe_
-0005a220: 6375 7272 656e 6379 5f63 6f64 6528 7365  currency_code(se
-0005a230: 6c66 2e73 6166 655f 7374 7269 6e67 2869  lf.safe_string(i
-0005a240: 6e66 6f2c 2027 746f 6b65 6e49 6427 2929  nfo, 'tokenId'))
-0005a250: 2c0a 2020 2020 2020 2020 2020 2020 2769  ,.            'i
-0005a260: 6e74 6572 6573 7427 3a20 7365 6c66 2e73  nterest': self.s
-0005a270: 6166 655f 6e75 6d62 6572 2869 6e66 6f2c  afe_number(info,
-0005a280: 2027 696e 7465 7265 7374 2729 2c0a 2020   'interest'),.  
-0005a290: 2020 2020 2020 2020 2020 2769 6e74 6572            'inter
-0005a2a0: 6573 7452 6174 6527 3a20 4e6f 6e65 2c0a  estRate': None,.
-0005a2b0: 2020 2020 2020 2020 2020 2020 2761 6d6f              'amo
-0005a2c0: 756e 7442 6f72 726f 7765 6427 3a20 7365  untBorrowed': se
-0005a2d0: 6c66 2e73 6166 655f 6e75 6d62 6572 2869  lf.safe_number(i
-0005a2e0: 6e66 6f2c 2027 6c6f 616e 2729 2c0a 2020  nfo, 'loan'),.  
-0005a2f0: 2020 2020 2020 2020 2020 2774 696d 6573            'times
-0005a300: 7461 6d70 273a 204e 6f6e 652c 0a20 2020  tamp': None,.   
-0005a310: 2020 2020 2020 2020 2027 6461 7465 7469           'dateti
-0005a320: 6d65 273a 204e 6f6e 652c 0a20 2020 2020  me': None,.     
-0005a330: 2020 2020 2020 2027 696e 666f 273a 2069         'info': i
-0005a340: 6e66 6f2c 0a20 2020 2020 2020 207d 0a0a  nfo,.        }..
-0005a350: 2020 2020 6173 796e 6320 6465 6620 7472      async def tr
-0005a360: 616e 7366 6572 2873 656c 662c 2063 6f64  ansfer(self, cod
-0005a370: 653a 2073 7472 2c20 616d 6f75 6e74 2c20  e: str, amount, 
-0005a380: 6672 6f6d 4163 636f 756e 742c 2074 6f41  fromAccount, toA
-0005a390: 6363 6f75 6e74 2c20 7061 7261 6d73 3d7b  ccount, params={
-0005a3a0: 7d29 3a0a 2020 2020 2020 2020 2222 220a  }):.        """.
-0005a3b0: 2020 2020 2020 2020 7472 616e 7366 6572          transfer
-0005a3c0: 2063 7572 7265 6e63 7920 696e 7465 726e   currency intern
-0005a3d0: 616c 6c79 2062 6574 7765 656e 2077 616c  ally between wal
-0005a3e0: 6c65 7473 206f 6e20 7468 6520 7361 6d65  lets on the same
-0005a3f0: 2061 6363 6f75 6e74 0a20 2020 2020 2020   account.       
-0005a400: 2073 6565 2068 7474 7073 3a2f 2f62 7962   see https://byb
-0005a410: 6974 2d65 7863 6861 6e67 652e 6769 7468  it-exchange.gith
-0005a420: 7562 2e69 6f2f 646f 6373 2f61 6363 6f75  ub.io/docs/accou
-0005a430: 6e74 5f61 7373 6574 2f23 742d 6372 6561  nt_asset/#t-crea
-0005a440: 7465 696e 7465 726e 616c 7472 616e 7366  teinternaltransf
-0005a450: 6572 0a20 2020 2020 2020 2073 6565 2068  er.        see h
-0005a460: 7474 7073 3a2f 2f62 7962 6974 2d65 7863  ttps://bybit-exc
-0005a470: 6861 6e67 652e 6769 7468 7562 2e69 6f2f  hange.github.io/
-0005a480: 646f 6373 2f61 6363 6f75 6e74 5f61 7373  docs/account_ass
-0005a490: 6574 2f76 332f 2374 2d63 7265 6174 6569  et/v3/#t-createi
-0005a4a0: 6e74 6572 6e61 6c74 7261 6e73 6665 720a  nternaltransfer.
-0005a4b0: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-0005a4c0: 7472 2063 6f64 653a 2075 6e69 6669 6564  tr code: unified
-0005a4d0: 2063 7572 7265 6e63 7920 636f 6465 0a20   currency code. 
-0005a4e0: 2020 2020 2020 203a 7061 7261 6d20 666c         :param fl
-0005a4f0: 6f61 7420 616d 6f75 6e74 3a20 616d 6f75  oat amount: amou
-0005a500: 6e74 2074 6f20 7472 616e 7366 6572 0a20  nt to transfer. 
-0005a510: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
-0005a520: 7220 6672 6f6d 4163 636f 756e 743a 2061  r fromAccount: a
-0005a530: 6363 6f75 6e74 2074 6f20 7472 616e 7366  ccount to transf
-0005a540: 6572 2066 726f 6d0a 2020 2020 2020 2020  er from.        
-0005a550: 3a70 6172 616d 2073 7472 2074 6f41 6363  :param str toAcc
-0005a560: 6f75 6e74 3a20 6163 636f 756e 7420 746f  ount: account to
-0005a570: 2074 7261 6e73 6665 7220 746f 0a20 2020   transfer to.   
-0005a580: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
-0005a590: 2070 6172 616d 733a 2065 7874 7261 2070   params: extra p
-0005a5a0: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
-0005a5b0: 6963 2074 6f20 7468 6520 6279 6269 7420  ic to the bybit 
-0005a5c0: 6170 6920 656e 6470 6f69 6e74 0a20 2020  api endpoint.   
-0005a5d0: 2020 2020 203a 7061 7261 6d20 7374 7220       :param str 
-0005a5e0: 7061 7261 6d73 5b27 7472 616e 7366 6572  params['transfer
-0005a5f0: 4964 275d 3a20 5555 4944 2c20 7768 6963  Id']: UUID, whic
-0005a600: 6820 6973 2075 6e69 7175 6520 6163 726f  h is unique acro
-0005a610: 7373 2074 6865 2070 6c61 7466 6f72 6d0a  ss the platform.
-0005a620: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
-0005a630: 2064 6963 743a 2061 2060 7472 616e 7366   dict: a `transf
-0005a640: 6572 2073 7472 7563 7475 7265 203c 6874  er structure <ht
-0005a650: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
-0005a660: 636f 6d2f 232f 3f69 643d 7472 616e 7366  com/#/?id=transf
-0005a670: 6572 2d73 7472 7563 7475 7265 3e60 0a20  er-structure>`. 
-0005a680: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-0005a690: 2020 2061 7761 6974 2073 656c 662e 6c6f     await self.lo
-0005a6a0: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
-0005a6b0: 2020 2020 2074 7261 6e73 6665 7249 6420       transferId 
-0005a6c0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-0005a6d0: 6e67 2870 6172 616d 732c 2027 7472 616e  ng(params, 'tran
-0005a6e0: 7366 6572 4964 272c 2073 656c 662e 7575  sferId', self.uu
-0005a6f0: 6964 2829 290a 2020 2020 2020 2020 6163  id()).        ac
-0005a700: 636f 756e 7454 7970 6573 203d 2073 656c  countTypes = sel
-0005a710: 662e 7361 6665 5f76 616c 7565 2873 656c  f.safe_value(sel
-0005a720: 662e 6f70 7469 6f6e 732c 2027 6163 636f  f.options, 'acco
-0005a730: 756e 7473 4279 5479 7065 272c 207b 7d29  untsByType', {})
-0005a740: 0a20 2020 2020 2020 2066 726f 6d49 6420  .        fromId 
-0005a750: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-0005a760: 6e67 2861 6363 6f75 6e74 5479 7065 732c  ng(accountTypes,
-0005a770: 2066 726f 6d41 6363 6f75 6e74 2c20 6672   fromAccount, fr
-0005a780: 6f6d 4163 636f 756e 7429 0a20 2020 2020  omAccount).     
-0005a790: 2020 2074 6f49 6420 3d20 7365 6c66 2e73     toId = self.s
-0005a7a0: 6166 655f 7374 7269 6e67 2861 6363 6f75  afe_string(accou
-0005a7b0: 6e74 5479 7065 732c 2074 6f41 6363 6f75  ntTypes, toAccou
-0005a7c0: 6e74 2c20 746f 4163 636f 756e 7429 0a20  nt, toAccount). 
-0005a7d0: 2020 2020 2020 2063 7572 7265 6e63 7920         currency 
-0005a7e0: 3d20 7365 6c66 2e63 7572 7265 6e63 7928  = self.currency(
-0005a7f0: 636f 6465 290a 2020 2020 2020 2020 616d  code).        am
-0005a800: 6f75 6e74 546f 5072 6563 6973 696f 6e20  ountToPrecision 
-0005a810: 3d20 7365 6c66 2e63 7572 7265 6e63 795f  = self.currency_
-0005a820: 746f 5f70 7265 6369 7369 6f6e 2863 6f64  to_precision(cod
-0005a830: 652c 2061 6d6f 756e 7429 0a20 2020 2020  e, amount).     
-0005a840: 2020 206d 6574 686f 6420 3d20 4e6f 6e65     method = None
-0005a850: 0a20 2020 2020 2020 206d 6574 686f 642c  .        method,
-0005a860: 2070 6172 616d 7320 3d20 7365 6c66 2e68   params = self.h
-0005a870: 616e 646c 655f 6f70 7469 6f6e 5f61 6e64  andle_option_and
-0005a880: 5f70 6172 616d 7328 7061 7261 6d73 2c20  _params(params, 
-0005a890: 2774 7261 6e73 6665 7227 2c20 276d 6574  'transfer', 'met
-0005a8a0: 686f 6427 2c20 2770 7269 7661 7465 506f  hod', 'privatePo
-0005a8b0: 7374 4173 7365 7456 3150 7269 7661 7465  stAssetV1Private
-0005a8c0: 5472 616e 7366 6572 2729 2020 2320 7631  Transfer')  # v1
-0005a8d0: 2070 7265 6665 7272 6564 2061 746d 2c20   preferred atm, 
-0005a8e0: 6265 6361 7573 6520 6974 2073 7570 706f  because it suppo
-0005a8f0: 7274 7320 6675 6e64 696e 670a 2020 2020  rts funding.    
-0005a900: 2020 2020 7265 7175 6573 7420 3d20 4e6f      request = No
-0005a910: 6e65 0a20 2020 2020 2020 2069 6620 6d65  ne.        if me
-0005a920: 7468 6f64 203d 3d20 2770 7269 7661 7465  thod == 'private
-0005a930: 506f 7374 4173 7365 7456 3350 7269 7661  PostAssetV3Priva
-0005a940: 7465 5472 616e 7366 6572 496e 7465 7254  teTransferInterT
-0005a950: 7261 6e73 6665 7227 206f 7220 6d65 7468  ransfer' or meth
-0005a960: 6f64 203d 3d20 2770 7269 7661 7465 506f  od == 'privatePo
-0005a970: 7374 5635 4173 7365 7454 7261 6e73 6665  stV5AssetTransfe
-0005a980: 7249 6e74 6572 5472 616e 7366 6572 273a  rInterTransfer':
-0005a990: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-0005a9a0: 7565 7374 203d 207b 0a20 2020 2020 2020  uest = {.       
-0005a9b0: 2020 2020 2020 2020 2027 7472 616e 7366           'transf
-0005a9c0: 6572 4964 273a 2074 7261 6e73 6665 7249  erId': transferI
-0005a9d0: 642c 0a20 2020 2020 2020 2020 2020 2020  d,.             
-0005a9e0: 2020 2027 6672 6f6d 4163 636f 756e 7454     'fromAccountT
-0005a9f0: 7970 6527 3a20 6672 6f6d 4964 2c0a 2020  ype': fromId,.  
-0005aa00: 2020 2020 2020 2020 2020 2020 2020 2774                't
-0005aa10: 6f41 6363 6f75 6e74 5479 7065 273a 2074  oAccountType': t
-0005aa20: 6f49 642c 0a20 2020 2020 2020 2020 2020  oId,.           
-0005aa30: 2020 2020 2027 636f 696e 273a 2063 7572       'coin': cur
-0005aa40: 7265 6e63 795b 2769 6427 5d2c 0a20 2020  rency['id'],.   
-0005aa50: 2020 2020 2020 2020 2020 2020 2027 616d               'am
-0005aa60: 6f75 6e74 273a 2061 6d6f 756e 7454 6f50  ount': amountToP
-0005aa70: 7265 6369 7369 6f6e 2c0a 2020 2020 2020  recision,.      
-0005aa80: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-0005aa90: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0005aaa0: 2020 7265 7175 6573 7420 3d20 7b0a 2020    request = {.  
-0005aab0: 2020 2020 2020 2020 2020 2020 2020 2774                't
-0005aac0: 7261 6e73 6665 725f 6964 273a 2074 7261  ransfer_id': tra
-0005aad0: 6e73 6665 7249 642c 0a20 2020 2020 2020  nsferId,.       
-0005aae0: 2020 2020 2020 2020 2027 6672 6f6d 5f61           'from_a
-0005aaf0: 6363 6f75 6e74 5f74 7970 6527 3a20 6672  ccount_type': fr
-0005ab00: 6f6d 4964 2c0a 2020 2020 2020 2020 2020  omId,.          
-0005ab10: 2020 2020 2020 2774 6f5f 6163 636f 756e        'to_accoun
-0005ab20: 745f 7479 7065 273a 2074 6f49 642c 0a20  t_type': toId,. 
-0005ab30: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-0005ab40: 636f 696e 273a 2063 7572 7265 6e63 795b  coin': currency[
-0005ab50: 2769 6427 5d2c 0a20 2020 2020 2020 2020  'id'],.         
-0005ab60: 2020 2020 2020 2027 616d 6f75 6e74 273a         'amount':
-0005ab70: 2061 6d6f 756e 7454 6f50 7265 6369 7369   amountToPrecisi
-0005ab80: 6f6e 2c0a 2020 2020 2020 2020 2020 2020  on,.            
-0005ab90: 7d0a 2020 2020 2020 2020 7265 7370 6f6e  }.        respon
-0005aba0: 7365 203d 2061 7761 6974 2067 6574 6174  se = await getat
-0005abb0: 7472 2873 656c 662c 206d 6574 686f 6429  tr(self, method)
-0005abc0: 2873 656c 662e 6578 7465 6e64 2872 6571  (self.extend(req
-0005abd0: 7565 7374 2c20 7061 7261 6d73 2929 0a20  uest, params)). 
-0005abe0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-0005abf0: 2023 207b 0a20 2020 2020 2020 2023 2020   # {.        #  
-0005ac00: 2020 2022 7265 7443 6f64 6522 3a20 302c     "retCode": 0,
-0005ac10: 0a20 2020 2020 2020 2023 2020 2020 2022  .        #     "
-0005ac20: 7265 744d 7367 223a 2022 7375 6363 6573  retMsg": "succes
-0005ac30: 7322 2c0a 2020 2020 2020 2020 2320 2020  s",.        #   
-0005ac40: 2020 2272 6573 756c 7422 3a20 7b0a 2020    "result": {.  
-0005ac50: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0005ac60: 2274 7261 6e73 6665 7249 6422 3a20 2234  "transferId": "4
-0005ac70: 3234 3461 6634 342d 6633 6230 2d34 6366  244af44-f3b0-4cf
-0005ac80: 362d 6137 3433 2d62 3536 3536 3065 3938  6-a743-b56560e98
-0005ac90: 3762 6322 2020 2320 7472 616e 7366 6572  7bc"  # transfer
-0005aca0: 5f69 6420 696e 2076 310a 2020 2020 2020  _id in v1.      
-0005acb0: 2020 2320 2020 2020 7d2c 0a20 2020 2020    #     },.     
-0005acc0: 2020 2023 2020 2020 2022 7265 7445 7874     #     "retExt
-0005acd0: 496e 666f 223a 207b 7d2c 0a20 2020 2020  Info": {},.     
-0005ace0: 2020 2023 2020 2020 2022 7469 6d65 223a     #     "time":
-0005acf0: 2031 3636 3638 3735 3835 3732 3035 0a20   1666875857205. 
-0005ad00: 2020 2020 2020 2023 207d 0a20 2020 2020         # }.     
-0005ad10: 2020 2023 0a20 2020 2020 2020 2074 696d     #.        tim
-0005ad20: 6573 7461 6d70 203d 2073 656c 662e 7361  estamp = self.sa
-0005ad30: 6665 5f69 6e74 6567 6572 5f32 2872 6573  fe_integer_2(res
-0005ad40: 706f 6e73 652c 2027 7469 6d65 272c 2027  ponse, 'time', '
-0005ad50: 7469 6d65 5f6e 6f77 2729 0a20 2020 2020  time_now').     
-0005ad60: 2020 2074 7261 6e73 6665 7220 3d20 7365     transfer = se
-0005ad70: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
-0005ad80: 7370 6f6e 7365 2c20 2772 6573 756c 7427  sponse, 'result'
-0005ad90: 2c20 7b7d 290a 2020 2020 2020 2020 7374  , {}).        st
-0005ada0: 6174 7573 5261 7720 3d20 7365 6c66 2e73  atusRaw = self.s
-0005adb0: 6166 655f 7374 7269 6e67 5f6e 2872 6573  afe_string_n(res
-0005adc0: 706f 6e73 652c 205b 2772 6574 436f 6465  ponse, ['retCode
-0005add0: 272c 2027 7265 744d 7367 272c 2027 7265  ', 'retMsg', 're
-0005ade0: 745f 636f 6465 272c 2027 7265 745f 6d73  t_code', 'ret_ms
-0005adf0: 6727 5d29 0a20 2020 2020 2020 2073 7461  g']).        sta
-0005ae00: 7475 7320 3d20 7365 6c66 2e70 6172 7365  tus = self.parse
-0005ae10: 5f74 7261 6e73 6665 725f 7374 6174 7573  _transfer_status
-0005ae20: 2873 7461 7475 7352 6177 290a 2020 2020  (statusRaw).    
-0005ae30: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-0005ae40: 6578 7465 6e64 2873 656c 662e 7061 7273  extend(self.pars
-0005ae50: 655f 7472 616e 7366 6572 2874 7261 6e73  e_transfer(trans
-0005ae60: 6665 722c 2063 7572 7265 6e63 7929 2c20  fer, currency), 
-0005ae70: 7b0a 2020 2020 2020 2020 2020 2020 2774  {.            't
-0005ae80: 696d 6573 7461 6d70 273a 2074 696d 6573  imestamp': times
-0005ae90: 7461 6d70 2c0a 2020 2020 2020 2020 2020  tamp,.          
-0005aea0: 2020 2764 6174 6574 696d 6527 3a20 7365    'datetime': se
-0005aeb0: 6c66 2e69 736f 3836 3031 2874 696d 6573  lf.iso8601(times
-0005aec0: 7461 6d70 292c 0a20 2020 2020 2020 2020  tamp),.         
-0005aed0: 2020 2027 616d 6f75 6e74 273a 2073 656c     'amount': sel
-0005aee0: 662e 7061 7273 655f 6e75 6d62 6572 2861  f.parse_number(a
-0005aef0: 6d6f 756e 7454 6f50 7265 6369 7369 6f6e  mountToPrecision
-0005af00: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
-0005af10: 6672 6f6d 4163 636f 756e 7427 3a20 6672  fromAccount': fr
-0005af20: 6f6d 4163 636f 756e 742c 0a20 2020 2020  omAccount,.     
-0005af30: 2020 2020 2020 2027 746f 4163 636f 756e         'toAccoun
-0005af40: 7427 3a20 746f 4163 636f 756e 742c 0a20  t': toAccount,. 
-0005af50: 2020 2020 2020 2020 2020 2027 7374 6174             'stat
-0005af60: 7573 273a 2073 7461 7475 732c 0a20 2020  us': status,.   
-0005af70: 2020 2020 207d 290a 0a20 2020 2061 7379       })..    asy
-0005af80: 6e63 2064 6566 2066 6574 6368 5f74 7261  nc def fetch_tra
-0005af90: 6e73 6665 7273 2873 656c 662c 2063 6f64  nsfers(self, cod
-0005afa0: 653a 204f 7074 696f 6e61 6c5b 7374 725d  e: Optional[str]
-0005afb0: 203d 204e 6f6e 652c 2073 696e 6365 3a20   = None, since: 
-0005afc0: 4f70 7469 6f6e 616c 5b69 6e74 5d20 3d20  Optional[int] = 
-0005afd0: 4e6f 6e65 2c20 6c69 6d69 743a 204f 7074  None, limit: Opt
-0005afe0: 696f 6e61 6c5b 696e 745d 203d 204e 6f6e  ional[int] = Non
-0005aff0: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
-0005b000: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-0005b010: 2020 2066 6574 6368 2061 2068 6973 746f     fetch a histo
-0005b020: 7279 206f 6620 696e 7465 726e 616c 2074  ry of internal t
-0005b030: 7261 6e73 6665 7273 206d 6164 6520 6f6e  ransfers made on
-0005b040: 2061 6e20 6163 636f 756e 740a 2020 2020   an account.    
-0005b050: 2020 2020 7365 6520 6874 7470 733a 2f2f      see https://
-0005b060: 6279 6269 742d 6578 6368 616e 6765 2e67  bybit-exchange.g
-0005b070: 6974 6875 622e 696f 2f64 6f63 732f 7635  ithub.io/docs/v5
-0005b080: 2f61 7373 6574 2f69 6e74 6572 2d74 7261  /asset/inter-tra
-0005b090: 6e73 6665 722d 6c69 7374 0a20 2020 2020  nsfer-list.     
-0005b0a0: 2020 203a 7061 7261 6d20 7374 727c 4e6f     :param str|No
-0005b0b0: 6e65 2063 6f64 653a 2075 6e69 6669 6564  ne code: unified
-0005b0c0: 2063 7572 7265 6e63 7920 636f 6465 206f   currency code o
-0005b0d0: 6620 7468 6520 6375 7272 656e 6379 2074  f the currency t
-0005b0e0: 7261 6e73 6665 7272 6564 0a20 2020 2020  ransferred.     
-0005b0f0: 2020 203a 7061 7261 6d20 696e 747c 4e6f     :param int|No
-0005b100: 6e65 2073 696e 6365 3a20 7468 6520 6561  ne since: the ea
-0005b110: 726c 6965 7374 2074 696d 6520 696e 206d  rliest time in m
-0005b120: 7320 746f 2066 6574 6368 2074 7261 6e73  s to fetch trans
-0005b130: 6665 7273 2066 6f72 0a20 2020 2020 2020  fers for.       
-0005b140: 203a 7061 7261 6d20 696e 747c 4e6f 6e65   :param int|None
-0005b150: 206c 696d 6974 3a20 7468 6520 6d61 7869   limit: the maxi
-0005b160: 6d75 6d20 6e75 6d62 6572 206f 6620 2074  mum number of  t
-0005b170: 7261 6e73 6665 7273 2073 7472 7563 7475  ransfers structu
-0005b180: 7265 7320 746f 2072 6574 7269 6576 650a  res to retrieve.
-0005b190: 2020 2020 2020 2020 3a70 6172 616d 2064          :param d
-0005b1a0: 6963 7420 7061 7261 6d73 3a20 6578 7472  ict params: extr
-0005b1b0: 6120 7061 7261 6d65 7465 7273 2073 7065  a parameters spe
-0005b1c0: 6369 6669 6320 746f 2074 6865 2062 7962  cific to the byb
-0005b1d0: 6974 2061 7069 2065 6e64 706f 696e 740a  it api endpoint.
-0005b1e0: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
-0005b1f0: 205b 6469 6374 5d3a 2061 206c 6973 7420   [dict]: a list 
-0005b200: 6f66 2060 7472 616e 7366 6572 2073 7472  of `transfer str
-0005b210: 7563 7475 7265 7320 3c68 7474 7073 3a2f  uctures <https:/
-0005b220: 2f64 6f63 732e 6363 7874 2e63 6f6d 2f23  /docs.ccxt.com/#
-0005b230: 2f3f 6964 3d74 7261 6e73 6665 722d 7374  /?id=transfer-st
-0005b240: 7275 6374 7572 653e 600a 2020 2020 2020  ructure>`.      
-0005b250: 2020 2222 220a 2020 2020 2020 2020 6177    """.        aw
-0005b260: 6169 7420 7365 6c66 2e6c 6f61 645f 6d61  ait self.load_ma
-0005b270: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
-0005b280: 6375 7272 656e 6379 203d 204e 6f6e 650a  currency = None.
-0005b290: 2020 2020 2020 2020 7265 7175 6573 7420          request 
-0005b2a0: 3d20 7b7d 0a20 2020 2020 2020 2069 6620  = {}.        if 
-0005b2b0: 636f 6465 2069 7320 6e6f 7420 4e6f 6e65  code is not None
-0005b2c0: 3a0a 2020 2020 2020 2020 2020 2020 6375  :.            cu
-0005b2d0: 7272 656e 6379 203d 2073 656c 662e 7361  rrency = self.sa
-0005b2e0: 6665 5f63 7572 7265 6e63 795f 636f 6465  fe_currency_code
-0005b2f0: 2863 6f64 6529 0a20 2020 2020 2020 2020  (code).         
-0005b300: 2020 2072 6571 7565 7374 5b27 636f 696e     request['coin
-0005b310: 275d 203d 2063 7572 7265 6e63 790a 2020  '] = currency.  
-0005b320: 2020 2020 2020 6966 2073 696e 6365 2069        if since i
-0005b330: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-0005b340: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0005b350: 2773 7461 7274 5469 6d65 275d 203d 2073  'startTime'] = s
-0005b360: 696e 6365 0a20 2020 2020 2020 2069 6620  ince.        if 
-0005b370: 6c69 6d69 7420 6973 206e 6f74 204e 6f6e  limit is not Non
-0005b380: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-0005b390: 6571 7565 7374 5b27 6c69 6d69 7427 5d20  equest['limit'] 
-0005b3a0: 3d20 6c69 6d69 740a 2020 2020 2020 2020  = limit.        
-0005b3b0: 7265 7370 6f6e 7365 203d 2061 7761 6974  response = await
-0005b3c0: 2073 656c 662e 7072 6976 6174 6547 6574   self.privateGet
-0005b3d0: 5635 4173 7365 7454 7261 6e73 6665 7251  V5AssetTransferQ
-0005b3e0: 7565 7279 496e 7465 7254 7261 6e73 6665  ueryInterTransfe
-0005b3f0: 724c 6973 7428 7365 6c66 2e65 7874 656e  rList(self.exten
-0005b400: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
-0005b410: 7329 290a 2020 2020 2020 2020 230a 2020  s)).        #.  
-0005b420: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
-0005b430: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0005b440: 2272 6574 436f 6465 223a 2030 2c0a 2020  "retCode": 0,.  
-0005b450: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0005b460: 2272 6574 4d73 6722 3a20 2273 7563 6365  "retMsg": "succe
-0005b470: 7373 222c 0a20 2020 2020 2020 2023 2020  ss",.        #  
-0005b480: 2020 2020 2020 2022 7265 7375 6c74 223a         "result":
-0005b490: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-0005b4a0: 2020 2020 2020 2020 2022 6c69 7374 223a           "list":
-0005b4b0: 205b 0a20 2020 2020 2020 2023 2020 2020   [.        #    
-0005b4c0: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
-0005b4d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0005b4e0: 2020 2020 2020 2020 2020 2020 2022 7472               "tr
-0005b4f0: 616e 7366 6572 4964 223a 2022 7365 6c66  ansferId": "self
-0005b500: 5472 616e 7366 6572 5f61 3130 3931 6363  Transfer_a1091cc
-0005b510: 372d 3933 3634 2d34 6237 342d 3864 6531  7-9364-4b74-8de1
-0005b520: 2d31 3866 3032 6336 6632 6435 6322 2c0a  -18f02c6f2d5c",.
-0005b530: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0005b540: 2020 2020 2020 2020 2020 2020 2020 2263                "c
-0005b550: 6f69 6e22 3a20 2255 5344 5422 2c0a 2020  oin": "USDT",.  
-0005b560: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0005b570: 2020 2020 2020 2020 2020 2020 2261 6d6f              "amo
-0005b580: 756e 7422 3a20 2235 3030 3022 2c0a 2020  unt": "5000",.  
-0005b590: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0005b5a0: 2020 2020 2020 2020 2020 2020 2266 726f              "fro
-0005b5b0: 6d41 6363 6f75 6e74 5479 7065 223a 2022  mAccountType": "
-0005b5c0: 5350 4f54 222c 0a20 2020 2020 2020 2023  SPOT",.        #
-0005b5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005b5e0: 2020 2020 2022 746f 4163 636f 756e 7454       "toAccountT
-0005b5f0: 7970 6522 3a20 2255 4e49 4649 4544 222c  ype": "UNIFIED",
-0005b600: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0005b610: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0005b620: 7469 6d65 7374 616d 7022 3a20 2231 3636  timestamp": "166
-0005b630: 3732 3833 3236 3330 3030 222c 0a20 2020  7283263000",.   
-0005b640: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0005b650: 2020 2020 2020 2020 2020 2022 7374 6174             "stat
-0005b660: 7573 223a 2022 5355 4343 4553 5322 0a20  us": "SUCCESS". 
-0005b670: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0005b680: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
-0005b690: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0005b6a0: 205d 2c0a 2020 2020 2020 2020 2320 2020   ],.        #   
-0005b6b0: 2020 2020 2020 2020 2020 226e 6578 7450            "nextP
-0005b6c0: 6167 6543 7572 736f 7222 3a20 2265 794a  ageCursor": "eyJ
-0005b6d0: 7461 5735 4a52 4349 364d 544d 314f 4451  taW5JRCI6MTM1ODQ
-0005b6e0: 324f 4377 6962 5746 3453 5551 694f 6a45  2OCwibWF4SUQiOjE
-0005b6f0: 7a4e 5467 304e 6a68 3922 0a20 2020 2020  zNTg0Njh9".     
-0005b700: 2020 2023 2020 2020 2020 2020 207d 2c0a     #         },.
-0005b710: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0005b720: 2020 2272 6574 4578 7449 6e66 6f22 3a20    "retExtInfo": 
-0005b730: 7b7d 2c0a 2020 2020 2020 2020 2320 2020  {},.        #   
-0005b740: 2020 2020 2020 2274 696d 6522 3a20 3136        "time": 16
-0005b750: 3730 3938 3832 3731 3637 370a 2020 2020  70988271677.    
-0005b760: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
-0005b770: 2020 2020 230a 2020 2020 2020 2020 6461      #.        da
-0005b780: 7461 203d 2073 656c 662e 7361 6665 5f76  ta = self.safe_v
-0005b790: 616c 7565 2872 6573 706f 6e73 652c 2027  alue(response, '
-0005b7a0: 7265 7375 6c74 272c 207b 7d29 0a20 2020  result', {}).   
-0005b7b0: 2020 2020 2074 7261 6e73 6665 7273 203d       transfers =
-0005b7c0: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-0005b7d0: 2864 6174 612c 2027 6c69 7374 272c 205b  (data, 'list', [
-0005b7e0: 5d29 0a20 2020 2020 2020 2072 6574 7572  ]).        retur
-0005b7f0: 6e20 7365 6c66 2e70 6172 7365 5f74 7261  n self.parse_tra
-0005b800: 6e73 6665 7273 2874 7261 6e73 6665 7273  nsfers(transfers
-0005b810: 2c20 6375 7272 656e 6379 2c20 7369 6e63  , currency, sinc
-0005b820: 652c 206c 696d 6974 290a 0a20 2020 2061  e, limit)..    a
-0005b830: 7379 6e63 2064 6566 2062 6f72 726f 775f  sync def borrow_
-0005b840: 6d61 7267 696e 2873 656c 662c 2063 6f64  margin(self, cod
-0005b850: 653a 2073 7472 2c20 616d 6f75 6e74 2c20  e: str, amount, 
-0005b860: 7379 6d62 6f6c 3a20 4f70 7469 6f6e 616c  symbol: Optional
-0005b870: 5b73 7472 5d20 3d20 4e6f 6e65 2c20 7061  [str] = None, pa
-0005b880: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
-0005b890: 2020 2222 220a 2020 2020 2020 2020 6372    """.        cr
-0005b8a0: 6561 7465 2061 206c 6f61 6e20 746f 2062  eate a loan to b
-0005b8b0: 6f72 726f 7720 6d61 7267 696e 0a20 2020  orrow margin.   
-0005b8c0: 2020 2020 2073 6565 2068 7474 7073 3a2f       see https:/
-0005b8d0: 2f62 7962 6974 2d65 7863 6861 6e67 652e  /bybit-exchange.
-0005b8e0: 6769 7468 7562 2e69 6f2f 646f 6373 2f73  github.io/docs/s
-0005b8f0: 706f 742f 7633 2f23 742d 626f 7272 6f77  pot/v3/#t-borrow
-0005b900: 6d61 7267 696e 6c6f 616e 0a20 2020 2020  marginloan.     
-0005b910: 2020 203a 7061 7261 6d20 7374 7220 636f     :param str co
-0005b920: 6465 3a20 756e 6966 6965 6420 6375 7272  de: unified curr
-0005b930: 656e 6379 2063 6f64 6520 6f66 2074 6865  ency code of the
-0005b940: 2063 7572 7265 6e63 7920 746f 2062 6f72   currency to bor
-0005b950: 726f 770a 2020 2020 2020 2020 3a70 6172  row.        :par
-0005b960: 616d 2066 6c6f 6174 2061 6d6f 756e 743a  am float amount:
-0005b970: 2074 6865 2061 6d6f 756e 7420 746f 2062   the amount to b
-0005b980: 6f72 726f 770a 2020 2020 2020 2020 3a70  orrow.        :p
-0005b990: 6172 616d 2073 7472 7c4e 6f6e 6520 7379  aram str|None sy
-0005b9a0: 6d62 6f6c 3a20 6e6f 7420 7573 6564 2062  mbol: not used b
-0005b9b0: 7920 6279 6269 742e 626f 7272 6f77 4d61  y bybit.borrowMa
-0005b9c0: 7267 696e 2829 0a20 2020 2020 2020 203a  rgin().        :
-0005b9d0: 7061 7261 6d20 6469 6374 2070 6172 616d  param dict param
-0005b9e0: 733a 2065 7874 7261 2070 6172 616d 6574  s: extra paramet
-0005b9f0: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
-0005ba00: 7468 6520 6279 6269 7420 6170 6920 656e  the bybit api en
-0005ba10: 6470 6f69 6e74 0a20 2020 2020 2020 203a  dpoint.        :
-0005ba20: 7265 7475 726e 7320 6469 6374 3a20 6120  returns dict: a 
-0005ba30: 606d 6172 6769 6e20 6c6f 616e 2073 7472  `margin loan str
-0005ba40: 7563 7475 7265 203c 6874 7470 733a 2f2f  ucture <https://
-0005ba50: 646f 6373 2e63 6378 742e 636f 6d2f 232f  docs.ccxt.com/#/
-0005ba60: 3f69 643d 6d61 7267 696e 2d6c 6f61 6e2d  ?id=margin-loan-
-0005ba70: 7374 7275 6374 7572 653e 600a 2020 2020  structure>`.    
-0005ba80: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-0005ba90: 6177 6169 7420 7365 6c66 2e6c 6f61 645f  await self.load_
-0005baa0: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
-0005bab0: 2020 6375 7272 656e 6379 203d 2073 656c    currency = sel
-0005bac0: 662e 6375 7272 656e 6379 2863 6f64 6529  f.currency(code)
-0005bad0: 0a20 2020 2020 2020 206d 6172 6769 6e4d  .        marginM
-0005bae0: 6f64 652c 2071 7565 7279 203d 2073 656c  ode, query = sel
-0005baf0: 662e 6861 6e64 6c65 5f6d 6172 6769 6e5f  f.handle_margin_
-0005bb00: 6d6f 6465 5f61 6e64 5f70 6172 616d 7328  mode_and_params(
-0005bb10: 2762 6f72 726f 774d 6172 6769 6e27 2c20  'borrowMargin', 
-0005bb20: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
-0005bb30: 6966 206d 6172 6769 6e4d 6f64 6520 3d3d  if marginMode ==
-0005bb40: 2027 6973 6f6c 6174 6564 273a 0a20 2020   'isolated':.   
-0005bb50: 2020 2020 2020 2020 2072 6169 7365 204e           raise N
-0005bb60: 6f74 5375 7070 6f72 7465 6428 7365 6c66  otSupported(self
-0005bb70: 2e69 6420 2b20 2720 626f 7272 6f77 4d61  .id + ' borrowMa
-0005bb80: 7267 696e 2829 2063 616e 6e6f 7420 7573  rgin() cannot us
-0005bb90: 6520 6973 6f6c 6174 6564 206d 6172 6769  e isolated margi
-0005bba0: 6e27 290a 2020 2020 2020 2020 7265 7175  n').        requ
-0005bbb0: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
-0005bbc0: 2020 2020 2763 6f69 6e27 3a20 6375 7272      'coin': curr
-0005bbd0: 656e 6379 5b27 6964 275d 2c0a 2020 2020  ency['id'],.    
-0005bbe0: 2020 2020 2020 2020 2771 7479 273a 2073          'qty': s
-0005bbf0: 656c 662e 6375 7272 656e 6379 5f74 6f5f  elf.currency_to_
-0005bc00: 7072 6563 6973 696f 6e28 636f 6465 2c20  precision(code, 
-0005bc10: 616d 6f75 6e74 292c 0a20 2020 2020 2020  amount),.       
-0005bc20: 207d 0a20 2020 2020 2020 2072 6573 706f   }.        respo
-0005bc30: 6e73 6520 3d20 6177 6169 7420 7365 6c66  nse = await self
-0005bc40: 2e70 7269 7661 7465 506f 7374 5370 6f74  .privatePostSpot
-0005bc50: 5633 5072 6976 6174 6543 726f 7373 4d61  V3PrivateCrossMa
-0005bc60: 7267 696e 4c6f 616e 2873 656c 662e 6578  rginLoan(self.ex
-0005bc70: 7465 6e64 2872 6571 7565 7374 2c20 7175  tend(request, qu
-0005bc80: 6572 7929 290a 2020 2020 2020 2020 230a  ery)).        #.
-0005bc90: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
-0005bca0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0005bcb0: 2020 2272 6574 436f 6465 223a 2030 2c0a    "retCode": 0,.
-0005bcc0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0005bcd0: 2020 2272 6574 4d73 6722 3a20 2273 7563    "retMsg": "suc
-0005bce0: 6365 7373 222c 0a20 2020 2020 2020 2023  cess",.        #
-0005bcf0: 2020 2020 2020 2020 2022 7265 7375 6c74           "result
-0005bd00: 223a 207b 0a20 2020 2020 2020 2023 2020  ": {.        #  
-0005bd10: 2020 2020 2020 2020 2020 2022 7472 616e             "tran
-0005bd20: 7361 6374 4964 223a 2022 3134 3134 3322  sactId": "14143"
-0005bd30: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0005bd40: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
-0005bd50: 2020 2020 2020 2020 2272 6574 4578 7449          "retExtI
-0005bd60: 6e66 6f22 3a20 6e75 6c6c 2c0a 2020 2020  nfo": null,.    
-0005bd70: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
-0005bd80: 696d 6522 3a20 3136 3632 3631 3738 3438  ime": 1662617848
-0005bd90: 3937 300a 2020 2020 2020 2020 2320 2020  970.        #   
-0005bda0: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-0005bdb0: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
-0005bdc0: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
-0005bdd0: 6573 706f 6e73 652c 2027 7265 7375 6c74  esponse, 'result
-0005bde0: 272c 207b 7d29 0a20 2020 2020 2020 2074  ', {}).        t
-0005bdf0: 7261 6e73 6163 7469 6f6e 203d 2073 656c  ransaction = sel
-0005be00: 662e 7061 7273 655f 6d61 7267 696e 5f6c  f.parse_margin_l
-0005be10: 6f61 6e28 7265 7375 6c74 2c20 6375 7272  oan(result, curr
-0005be20: 656e 6379 290a 2020 2020 2020 2020 7265  ency).        re
-0005be30: 7475 726e 2073 656c 662e 6578 7465 6e64  turn self.extend
-0005be40: 2874 7261 6e73 6163 7469 6f6e 2c20 7b0a  (transaction, {.
-0005be50: 2020 2020 2020 2020 2020 2020 2773 796d              'sym
-0005be60: 626f 6c27 3a20 7379 6d62 6f6c 2c0a 2020  bol': symbol,.  
-0005be70: 2020 2020 2020 2020 2020 2761 6d6f 756e            'amoun
-0005be80: 7427 3a20 616d 6f75 6e74 2c0a 2020 2020  t': amount,.    
-0005be90: 2020 2020 7d29 0a0a 2020 2020 6173 796e      })..    asyn
-0005bea0: 6320 6465 6620 7265 7061 795f 6d61 7267  c def repay_marg
-0005beb0: 696e 2873 656c 662c 2063 6f64 653a 2073  in(self, code: s
-0005bec0: 7472 2c20 616d 6f75 6e74 2c20 7379 6d62  tr, amount, symb
-0005bed0: 6f6c 3a20 4f70 7469 6f6e 616c 5b73 7472  ol: Optional[str
-0005bee0: 5d20 3d20 4e6f 6e65 2c20 7061 7261 6d73  ] = None, params
-0005bef0: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
-0005bf00: 220a 2020 2020 2020 2020 7265 7061 7920  ".        repay 
-0005bf10: 626f 7272 6f77 6564 206d 6172 6769 6e20  borrowed margin 
-0005bf20: 616e 6420 696e 7465 7265 7374 0a20 2020  and interest.   
-0005bf30: 2020 2020 2073 6565 2068 7474 7073 3a2f       see https:/
-0005bf40: 2f62 7962 6974 2d65 7863 6861 6e67 652e  /bybit-exchange.
-0005bf50: 6769 7468 7562 2e69 6f2f 646f 6373 2f73  github.io/docs/s
-0005bf60: 706f 742f 7633 2f23 742d 7265 7061 796d  pot/v3/#t-repaym
-0005bf70: 6172 6769 6e6c 6f61 6e0a 2020 2020 2020  arginloan.      
-0005bf80: 2020 3a70 6172 616d 2073 7472 2063 6f64    :param str cod
-0005bf90: 653a 2075 6e69 6669 6564 2063 7572 7265  e: unified curre
-0005bfa0: 6e63 7920 636f 6465 206f 6620 7468 6520  ncy code of the 
-0005bfb0: 6375 7272 656e 6379 2074 6f20 7265 7061  currency to repa
-0005bfc0: 790a 2020 2020 2020 2020 3a70 6172 616d  y.        :param
-0005bfd0: 2066 6c6f 6174 2061 6d6f 756e 743a 2074   float amount: t
-0005bfe0: 6865 2061 6d6f 756e 7420 746f 2072 6570  he amount to rep
-0005bff0: 6179 0a20 2020 2020 2020 203a 7061 7261  ay.        :para
-0005c000: 6d20 7374 727c 4e6f 6e65 2073 796d 626f  m str|None symbo
-0005c010: 6c3a 206e 6f74 2075 7365 6420 6279 2062  l: not used by b
-0005c020: 7962 6974 2e72 6570 6179 4d61 7267 696e  ybit.repayMargin
-0005c030: 2829 0a20 2020 2020 2020 203a 7061 7261  ().        :para
-0005c040: 6d20 6469 6374 2070 6172 616d 733a 2065  m dict params: e
-0005c050: 7874 7261 2070 6172 616d 6574 6572 7320  xtra parameters 
-0005c060: 7370 6563 6966 6963 2074 6f20 7468 6520  specific to the 
-0005c070: 6279 6269 7420 6170 6920 656e 6470 6f69  bybit api endpoi
-0005c080: 6e74 0a20 2020 2020 2020 203a 7265 7475  nt.        :retu
-0005c090: 726e 7320 6469 6374 3a20 6120 606d 6172  rns dict: a `mar
-0005c0a0: 6769 6e20 6c6f 616e 2073 7472 7563 7475  gin loan structu
-0005c0b0: 7265 203c 6874 7470 733a 2f2f 646f 6373  re <https://docs
-0005c0c0: 2e63 6378 742e 636f 6d2f 232f 3f69 643d  .ccxt.com/#/?id=
-0005c0d0: 6d61 7267 696e 2d6c 6f61 6e2d 7374 7275  margin-loan-stru
-0005c0e0: 6374 7572 653e 600a 2020 2020 2020 2020  cture>`.        
-0005c0f0: 2222 220a 2020 2020 2020 2020 6177 6169  """.        awai
-0005c100: 7420 7365 6c66 2e6c 6f61 645f 6d61 726b  t self.load_mark
-0005c110: 6574 7328 290a 2020 2020 2020 2020 6375  ets().        cu
-0005c120: 7272 656e 6379 203d 2073 656c 662e 6375  rrency = self.cu
-0005c130: 7272 656e 6379 2863 6f64 6529 0a20 2020  rrency(code).   
-0005c140: 2020 2020 206d 6172 6769 6e4d 6f64 652c       marginMode,
-0005c150: 2071 7565 7279 203d 2073 656c 662e 6861   query = self.ha
-0005c160: 6e64 6c65 5f6d 6172 6769 6e5f 6d6f 6465  ndle_margin_mode
-0005c170: 5f61 6e64 5f70 6172 616d 7328 2772 6570  _and_params('rep
-0005c180: 6179 4d61 7267 696e 272c 2070 6172 616d  ayMargin', param
-0005c190: 7329 0a20 2020 2020 2020 2069 6620 6d61  s).        if ma
-0005c1a0: 7267 696e 4d6f 6465 203d 3d20 2769 736f  rginMode == 'iso
-0005c1b0: 6c61 7465 6427 3a0a 2020 2020 2020 2020  lated':.        
-0005c1c0: 2020 2020 7261 6973 6520 4e6f 7453 7570      raise NotSup
-0005c1d0: 706f 7274 6564 2873 656c 662e 6964 202b  ported(self.id +
-0005c1e0: 2027 2072 6570 6179 4d61 7267 696e 2829   ' repayMargin()
-0005c1f0: 2063 616e 6e6f 7420 7573 6520 6973 6f6c   cannot use isol
-0005c200: 6174 6564 206d 6172 6769 6e27 290a 2020  ated margin').  
-0005c210: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-0005c220: 7b0a 2020 2020 2020 2020 2020 2020 2763  {.            'c
-0005c230: 6f69 6e27 3a20 6375 7272 656e 6379 5b27  oin': currency['
-0005c240: 6964 275d 2c0a 2020 2020 2020 2020 2020  id'],.          
-0005c250: 2020 2771 7479 273a 2073 656c 662e 6e75    'qty': self.nu
-0005c260: 6d62 6572 5f74 6f5f 7374 7269 6e67 2861  mber_to_string(a
-0005c270: 6d6f 756e 7429 2c0a 2020 2020 2020 2020  mount),.        
-0005c280: 7d0a 2020 2020 2020 2020 7265 7370 6f6e  }.        respon
-0005c290: 7365 203d 2061 7761 6974 2073 656c 662e  se = await self.
-0005c2a0: 7072 6976 6174 6550 6f73 7453 706f 7456  privatePostSpotV
-0005c2b0: 3350 7269 7661 7465 4372 6f73 734d 6172  3PrivateCrossMar
-0005c2c0: 6769 6e52 6570 6179 2873 656c 662e 6578  ginRepay(self.ex
-0005c2d0: 7465 6e64 2872 6571 7565 7374 2c20 7175  tend(request, qu
-0005c2e0: 6572 7929 290a 2020 2020 2020 2020 230a  ery)).        #.
-0005c2f0: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
-0005c300: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0005c310: 2020 2272 6574 436f 6465 223a 2030 2c0a    "retCode": 0,.
-0005c320: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0005c330: 2020 2272 6574 4d73 6722 3a20 2273 7563    "retMsg": "suc
-0005c340: 6365 7373 222c 0a20 2020 2020 2020 2023  cess",.        #
-0005c350: 2020 2020 2020 2020 2022 7265 7375 6c74           "result
-0005c360: 223a 207b 0a20 2020 2020 2020 2023 2020  ": {.        #  
-0005c370: 2020 2020 2020 2020 2020 2272 6570 6179            "repay
-0005c380: 4964 223a 2022 3132 3132 3822 0a20 2020  Id": "12128".   
-0005c390: 2020 2020 2023 2020 2020 2020 2020 207d       #         }
-0005c3a0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0005c3b0: 2020 2020 2272 6574 4578 7449 6e66 6f22      "retExtInfo"
-0005c3c0: 3a20 6e75 6c6c 2c0a 2020 2020 2020 2020  : null,.        
-0005c3d0: 2320 2020 2020 2020 2020 2274 696d 6522  #         "time"
-0005c3e0: 3a20 3136 3632 3631 3832 3938 3435 320a  : 1662618298452.
-0005c3f0: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-0005c400: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0005c410: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
-0005c420: 7361 6665 5f76 616c 7565 2872 6573 706f  safe_value(respo
-0005c430: 6e73 652c 2027 7265 7375 6c74 272c 207b  nse, 'result', {
-0005c440: 7d29 0a20 2020 2020 2020 2074 7261 6e73  }).        trans
-0005c450: 6163 7469 6f6e 203d 2073 656c 662e 7061  action = self.pa
-0005c460: 7273 655f 6d61 7267 696e 5f6c 6f61 6e28  rse_margin_loan(
-0005c470: 7265 7375 6c74 2c20 6375 7272 656e 6379  result, currency
-0005c480: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-0005c490: 2073 656c 662e 6578 7465 6e64 2874 7261   self.extend(tra
-0005c4a0: 6e73 6163 7469 6f6e 2c20 7b0a 2020 2020  nsaction, {.    
-0005c4b0: 2020 2020 2020 2020 2773 796d 626f 6c27          'symbol'
-0005c4c0: 3a20 7379 6d62 6f6c 2c0a 2020 2020 2020  : symbol,.      
-0005c4d0: 2020 2020 2020 2761 6d6f 756e 7427 3a20        'amount': 
-0005c4e0: 616d 6f75 6e74 2c0a 2020 2020 2020 2020  amount,.        
-0005c4f0: 7d29 0a0a 2020 2020 6465 6620 7061 7273  })..    def pars
-0005c500: 655f 6d61 7267 696e 5f6c 6f61 6e28 7365  e_margin_loan(se
-0005c510: 6c66 2c20 696e 666f 2c20 6375 7272 656e  lf, info, curren
-0005c520: 6379 3d4e 6f6e 6529 3a0a 2020 2020 2020  cy=None):.      
-0005c530: 2020 230a 2020 2020 2020 2020 2320 626f    #.        # bo
-0005c540: 7272 6f77 4d61 7267 696e 0a20 2020 2020  rrowMargin.     
-0005c550: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
-0005c560: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-0005c570: 2020 2020 2020 2022 7472 616e 7361 6374         "transact
-0005c580: 4964 223a 2022 3134 3134 3322 0a20 2020  Id": "14143".   
-0005c590: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
-0005c5a0: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-0005c5b0: 2072 6570 6179 4d61 7267 696e 0a20 2020   repayMargin.   
-0005c5c0: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-0005c5d0: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
-0005c5e0: 2020 2020 2020 2020 2022 7265 7061 7949           "repayI
-0005c5f0: 6422 3a20 2231 3231 3238 220a 2020 2020  d": "12128".    
-0005c600: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
-0005c610: 2020 2020 230a 2020 2020 2020 2020 7265      #.        re
-0005c620: 7475 726e 207b 0a20 2020 2020 2020 2020  turn {.         
-0005c630: 2020 2027 6964 273a 2073 656c 662e 7361     'id': self.sa
-0005c640: 6665 5f73 7472 696e 675f 3228 696e 666f  fe_string_2(info
-0005c650: 2c20 2774 7261 6e73 6163 7449 6427 2c20  , 'transactId', 
-0005c660: 2772 6570 6179 4964 2729 2c0a 2020 2020  'repayId'),.    
-0005c670: 2020 2020 2020 2020 2763 7572 7265 6e63          'currenc
-0005c680: 7927 3a20 7365 6c66 2e73 6166 655f 7374  y': self.safe_st
-0005c690: 7269 6e67 2863 7572 7265 6e63 792c 2027  ring(currency, '
-0005c6a0: 636f 6465 2729 2c0a 2020 2020 2020 2020  code'),.        
-0005c6b0: 2020 2020 2761 6d6f 756e 7427 3a20 4e6f      'amount': No
-0005c6c0: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-0005c6d0: 2773 796d 626f 6c27 3a20 4e6f 6e65 2c0a  'symbol': None,.
-0005c6e0: 2020 2020 2020 2020 2020 2020 2774 696d              'tim
-0005c6f0: 6573 7461 6d70 273a 204e 6f6e 652c 0a20  estamp': None,. 
-0005c700: 2020 2020 2020 2020 2020 2027 6461 7465             'date
-0005c710: 7469 6d65 273a 204e 6f6e 652c 0a20 2020  time': None,.   
-0005c720: 2020 2020 2020 2020 2027 696e 666f 273a           'info':
-0005c730: 2069 6e66 6f2c 0a20 2020 2020 2020 207d   info,.        }
-0005c740: 0a0a 2020 2020 6465 6620 7061 7273 655f  ..    def parse_
-0005c750: 7472 616e 7366 6572 5f73 7461 7475 7328  transfer_status(
-0005c760: 7365 6c66 2c20 7374 6174 7573 293a 0a20  self, status):. 
-0005c770: 2020 2020 2020 2073 7461 7475 7365 7320         statuses 
-0005c780: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-0005c790: 2730 273a 2027 6f6b 272c 0a20 2020 2020  '0': 'ok',.     
-0005c7a0: 2020 2020 2020 2027 4f4b 273a 2027 6f6b         'OK': 'ok
-0005c7b0: 272c 0a20 2020 2020 2020 2020 2020 2027  ',.            '
-0005c7c0: 5355 4343 4553 5327 3a20 276f 6b27 2c0a  SUCCESS': 'ok',.
-0005c7d0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-0005c7e0: 2020 7265 7475 726e 2073 656c 662e 7361    return self.sa
-0005c7f0: 6665 5f73 7472 696e 6728 7374 6174 7573  fe_string(status
-0005c800: 6573 2c20 7374 6174 7573 2c20 7374 6174  es, status, stat
-0005c810: 7573 290a 0a20 2020 2064 6566 2070 6172  us)..    def par
-0005c820: 7365 5f74 7261 6e73 6665 7228 7365 6c66  se_transfer(self
-0005c830: 2c20 7472 616e 7366 6572 2c20 6375 7272  , transfer, curr
-0005c840: 656e 6379 3d4e 6f6e 6529 3a0a 2020 2020  ency=None):.    
-0005c850: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-0005c860: 7472 616e 7366 6572 0a20 2020 2020 2020  transfer.       
-0005c870: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
-0005c880: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-0005c890: 2020 2020 2022 7472 616e 7366 6572 4964       "transferId
-0005c8a0: 223a 2022 3232 6332 6263 3131 2d65 6435  ": "22c2bc11-ed5
-0005c8b0: 622d 3439 6134 2d38 3634 372d 6334 6530  b-49a4-8647-c4e0
-0005c8c0: 6635 6636 6632 6232 2220 2023 2074 7261  f5f6f2b2"  # tra
-0005c8d0: 6e73 6665 725f 6964 2069 6e20 7631 0a20  nsfer_id in v1. 
-0005c8e0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
-0005c8f0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-0005c900: 2023 2066 6574 6368 5472 616e 7366 6572   # fetchTransfer
-0005c910: 730a 2020 2020 2020 2020 230a 2020 2020  s.        #.    
-0005c920: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-0005c930: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
-0005c940: 7261 6e73 6665 7249 6422 3a20 2265 3963  ransferId": "e9c
-0005c950: 3432 3163 342d 6230 3130 2d34 6231 362d  421c4-b010-4b16-
-0005c960: 6162 6436 2d31 3036 3137 3966 3237 3730  abd6-106179f2770
-0005c970: 3222 2c20 2023 2074 7261 6e73 6665 725f  2",  # transfer_
-0005c980: 6964 2069 6e20 7631 0a20 2020 2020 2020  id in v1.       
-0005c990: 2023 2020 2020 2020 2020 2022 636f 696e   #         "coin
-0005c9a0: 223a 2022 5553 4454 222c 0a20 2020 2020  ": "USDT",.     
-0005c9b0: 2020 2023 2020 2020 2020 2020 2022 616d     #         "am
-0005c9c0: 6f75 6e74 223a 2022 3822 2c0a 2020 2020  ount": "8",.    
-0005c9d0: 2020 2020 2320 2020 2020 2020 2020 2266      #         "f
-0005c9e0: 726f 6d41 6363 6f75 6e74 5479 7065 223a  romAccountType":
-0005c9f0: 2022 4655 4e44 222c 2020 2320 6672 6f6d   "FUND",  # from
-0005ca00: 5f61 6363 6f75 6e74 5f74 7970 6520 696e  _account_type in
-0005ca10: 2076 310a 2020 2020 2020 2020 2320 2020   v1.        #   
-0005ca20: 2020 2020 2020 2274 6f41 6363 6f75 6e74        "toAccount
-0005ca30: 5479 7065 223a 2022 5350 4f54 222c 2020  Type": "SPOT",  
-0005ca40: 2320 746f 5f61 6363 6f75 6e74 5f74 7970  # to_account_typ
-0005ca50: 6520 696e 2076 310a 2020 2020 2020 2020  e in v1.        
-0005ca60: 2320 2020 2020 2020 2020 2274 696d 6573  #         "times
-0005ca70: 7461 6d70 223a 2022 3136 3636 3837 3934  tamp": "16668794
-0005ca80: 3236 3030 3022 2c0a 2020 2020 2020 2020  26000",.        
-0005ca90: 2320 2020 2020 2020 2020 2273 7461 7475  #         "statu
-0005caa0: 7322 3a20 2253 5543 4345 5353 220a 2020  s": "SUCCESS".  
-0005cab0: 2020 2020 2020 2320 2020 2020 207d 0a20        #      }. 
-0005cac0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-0005cad0: 2063 7572 7265 6e63 7949 6420 3d20 7365   currencyId = se
-0005cae0: 6c66 2e73 6166 655f 7374 7269 6e67 2874  lf.safe_string(t
-0005caf0: 7261 6e73 6665 722c 2027 636f 696e 2729  ransfer, 'coin')
-0005cb00: 0a20 2020 2020 2020 2074 696d 6573 7461  .        timesta
-0005cb10: 6d70 203d 2073 656c 662e 7361 6665 5f69  mp = self.safe_i
-0005cb20: 6e74 6567 6572 2874 7261 6e73 6665 722c  nteger(transfer,
-0005cb30: 2027 7469 6d65 7374 616d 7027 290a 2020   'timestamp').  
-0005cb40: 2020 2020 2020 6672 6f6d 4163 636f 756e        fromAccoun
-0005cb50: 7449 6420 3d20 7365 6c66 2e73 6166 655f  tId = self.safe_
-0005cb60: 7374 7269 6e67 5f32 2874 7261 6e73 6665  string_2(transfe
-0005cb70: 722c 2027 6672 6f6d 4163 636f 756e 7454  r, 'fromAccountT
-0005cb80: 7970 6527 2c20 2766 726f 6d5f 6163 636f  ype', 'from_acco
-0005cb90: 756e 745f 7479 7065 2729 0a20 2020 2020  unt_type').     
-0005cba0: 2020 2074 6f41 6363 6f75 6e74 4964 203d     toAccountId =
-0005cbb0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-0005cbc0: 675f 3228 7472 616e 7366 6572 2c20 2774  g_2(transfer, 't
-0005cbd0: 6f41 6363 6f75 6e74 5479 7065 272c 2027  oAccountType', '
-0005cbe0: 746f 5f61 6363 6f75 6e74 5f74 7970 6527  to_account_type'
-0005cbf0: 290a 2020 2020 2020 2020 6163 636f 756e  ).        accoun
-0005cc00: 7449 6473 203d 2073 656c 662e 7361 6665  tIds = self.safe
-0005cc10: 5f76 616c 7565 2873 656c 662e 6f70 7469  _value(self.opti
-0005cc20: 6f6e 732c 2027 6163 636f 756e 7473 4279  ons, 'accountsBy
-0005cc30: 4964 272c 207b 7d29 0a20 2020 2020 2020  Id', {}).       
-0005cc40: 2066 726f 6d41 6363 6f75 6e74 203d 2073   fromAccount = s
-0005cc50: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
-0005cc60: 6163 636f 756e 7449 6473 2c20 6672 6f6d  accountIds, from
-0005cc70: 4163 636f 756e 7449 642c 2066 726f 6d41  AccountId, fromA
-0005cc80: 6363 6f75 6e74 4964 290a 2020 2020 2020  ccountId).      
-0005cc90: 2020 746f 4163 636f 756e 7420 3d20 7365    toAccount = se
-0005cca0: 6c66 2e73 6166 655f 7374 7269 6e67 2861  lf.safe_string(a
-0005ccb0: 6363 6f75 6e74 4964 732c 2074 6f41 6363  ccountIds, toAcc
-0005ccc0: 6f75 6e74 4964 2c20 746f 4163 636f 756e  ountId, toAccoun
-0005ccd0: 7449 6429 0a20 2020 2020 2020 2072 6574  tId).        ret
-0005cce0: 7572 6e20 7b0a 2020 2020 2020 2020 2020  urn {.          
-0005ccf0: 2020 2769 6e66 6f27 3a20 7472 616e 7366    'info': transf
-0005cd00: 6572 2c0a 2020 2020 2020 2020 2020 2020  er,.            
-0005cd10: 2769 6427 3a20 7365 6c66 2e73 6166 655f  'id': self.safe_
-0005cd20: 7374 7269 6e67 5f32 2874 7261 6e73 6665  string_2(transfe
-0005cd30: 722c 2027 7472 616e 7366 6572 4964 272c  r, 'transferId',
-0005cd40: 2027 7472 616e 7366 6572 5f69 6427 292c   'transfer_id'),
-0005cd50: 0a20 2020 2020 2020 2020 2020 2027 7469  .            'ti
-0005cd60: 6d65 7374 616d 7027 3a20 7469 6d65 7374  mestamp': timest
-0005cd70: 616d 702c 0a20 2020 2020 2020 2020 2020  amp,.           
-0005cd80: 2027 6461 7465 7469 6d65 273a 2073 656c   'datetime': sel
-0005cd90: 662e 6973 6f38 3630 3128 7469 6d65 7374  f.iso8601(timest
-0005cda0: 616d 7029 2c0a 2020 2020 2020 2020 2020  amp),.          
-0005cdb0: 2020 2763 7572 7265 6e63 7927 3a20 7365    'currency': se
-0005cdc0: 6c66 2e73 6166 655f 6375 7272 656e 6379  lf.safe_currency
-0005cdd0: 5f63 6f64 6528 6375 7272 656e 6379 4964  _code(currencyId
-0005cde0: 2c20 6375 7272 656e 6379 292c 0a20 2020  , currency),.   
-0005cdf0: 2020 2020 2020 2020 2027 616d 6f75 6e74           'amount
-0005ce00: 273a 2073 656c 662e 7361 6665 5f6e 756d  ': self.safe_num
-0005ce10: 6265 7228 7472 616e 7366 6572 2c20 2761  ber(transfer, 'a
-0005ce20: 6d6f 756e 7427 292c 0a20 2020 2020 2020  mount'),.       
-0005ce30: 2020 2020 2027 6672 6f6d 4163 636f 756e       'fromAccoun
-0005ce40: 7427 3a20 6672 6f6d 4163 636f 756e 742c  t': fromAccount,
-0005ce50: 0a20 2020 2020 2020 2020 2020 2027 746f  .            'to
-0005ce60: 4163 636f 756e 7427 3a20 746f 4163 636f  Account': toAcco
-0005ce70: 756e 742c 0a20 2020 2020 2020 2020 2020  unt,.           
-0005ce80: 2027 7374 6174 7573 273a 2073 656c 662e   'status': self.
-0005ce90: 7061 7273 655f 7472 616e 7366 6572 5f73  parse_transfer_s
-0005cea0: 7461 7475 7328 7365 6c66 2e73 6166 655f  tatus(self.safe_
-0005ceb0: 7374 7269 6e67 2874 7261 6e73 6665 722c  string(transfer,
-0005cec0: 2027 7374 6174 7573 2729 292c 0a20 2020   'status')),.   
-0005ced0: 2020 2020 207d 0a0a 2020 2020 6173 796e       }..    asyn
-0005cee0: 6320 6465 6620 6665 7463 685f 6465 7269  c def fetch_deri
-0005cef0: 7661 7469 7665 735f 6d61 726b 6574 5f6c  vatives_market_l
-0005cf00: 6576 6572 6167 655f 7469 6572 7328 7365  everage_tiers(se
-0005cf10: 6c66 2c20 7379 6d62 6f6c 3a20 7374 722c  lf, symbol: str,
-0005cf20: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
-0005cf30: 2020 2020 2061 7761 6974 2073 656c 662e       await self.
-0005cf40: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
-0005cf50: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
-0005cf60: 7365 6c66 2e6d 6172 6b65 7428 7379 6d62  self.market(symb
-0005cf70: 6f6c 290a 2020 2020 2020 2020 7265 7175  ol).        requ
-0005cf80: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
-0005cf90: 2020 2020 2773 796d 626f 6c27 3a20 6d61      'symbol': ma
-0005cfa0: 726b 6574 5b27 6964 275d 2c0a 2020 2020  rket['id'],.    
-0005cfb0: 2020 2020 7d0a 2020 2020 2020 2020 6966      }.        if
-0005cfc0: 206d 6172 6b65 745b 276c 696e 6561 7227   market['linear'
-0005cfd0: 5d3a 0a20 2020 2020 2020 2020 2020 2072  ]:.            r
-0005cfe0: 6571 7565 7374 5b27 6361 7465 676f 7279  equest['category
-0005cff0: 275d 203d 2027 6c69 6e65 6172 270a 2020  '] = 'linear'.  
-0005d000: 2020 2020 2020 656c 6966 206d 6172 6b65        elif marke
-0005d010: 745b 2769 6e76 6572 7365 275d 3a0a 2020  t['inverse']:.  
-0005d020: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-0005d030: 745b 2763 6174 6567 6f72 7927 5d20 3d20  t['category'] = 
-0005d040: 2769 6e76 6572 7365 270a 2020 2020 2020  'inverse'.      
-0005d050: 2020 7265 7370 6f6e 7365 203d 2061 7761    response = awa
-0005d060: 6974 2073 656c 662e 7075 626c 6963 4765  it self.publicGe
-0005d070: 7456 354d 6172 6b65 7452 6973 6b4c 696d  tV5MarketRiskLim
-0005d080: 6974 2873 656c 662e 6578 7465 6e64 2872  it(self.extend(r
-0005d090: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
-0005d0a0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-0005d0b0: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
-0005d0c0: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-0005d0d0: 7443 6f64 6522 3a20 302c 0a20 2020 2020  tCode": 0,.     
-0005d0e0: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-0005d0f0: 744d 7367 223a 2022 4f4b 222c 0a20 2020  tMsg": "OK",.   
-0005d100: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0005d110: 7265 7375 6c74 223a 207b 0a20 2020 2020  result": {.     
-0005d120: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0005d130: 2022 6361 7465 676f 7279 223a 2022 696e   "category": "in
-0005d140: 7665 7273 6522 2c0a 2020 2020 2020 2020  verse",.        
-0005d150: 2320 2020 2020 2020 2020 2020 2020 226c  #             "l
-0005d160: 6973 7422 3a20 5b0a 2020 2020 2020 2020  ist": [.        
-0005d170: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0005d180: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-0005d190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005d1a0: 2020 2269 6422 3a20 312c 0a20 2020 2020    "id": 1,.     
-0005d1b0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0005d1c0: 2020 2020 2020 2020 2022 7379 6d62 6f6c           "symbol
-0005d1d0: 223a 2022 4254 4355 5344 222c 0a20 2020  ": "BTCUSD",.   
-0005d1e0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0005d1f0: 2020 2020 2020 2020 2020 2022 7269 736b             "risk
-0005d200: 4c69 6d69 7456 616c 7565 223a 2022 3135  LimitValue": "15
-0005d210: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-0005d220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005d230: 2020 226d 6169 6e74 656e 616e 6365 4d61    "maintenanceMa
-0005d240: 7267 696e 223a 2022 302e 3522 2c0a 2020  rgin": "0.5",.  
-0005d250: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0005d260: 2020 2020 2020 2020 2020 2020 2269 6e69              "ini
-0005d270: 7469 616c 4d61 7267 696e 223a 2022 3122  tialMargin": "1"
-0005d280: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0005d290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005d2a0: 2269 734c 6f77 6573 7452 6973 6b22 3a20  "isLowestRisk": 
-0005d2b0: 312c 0a20 2020 2020 2020 2023 2020 2020  1,.        #    
-0005d2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005d2d0: 2022 6d61 784c 6576 6572 6167 6522 3a20   "maxLeverage": 
-0005d2e0: 2231 3030 2e30 3022 0a20 2020 2020 2020  "100.00".       
-0005d2f0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0005d300: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
-0005d310: 2020 2020 2020 2020 2020 2020 2e2e 2e2e              ....
-0005d320: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0005d330: 2020 2020 2020 205d 0a20 2020 2020 2020         ].       
-0005d340: 2023 2020 2020 2020 2020 207d 2c0a 2020   #         },.  
-0005d350: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0005d360: 2272 6574 4578 7449 6e66 6f22 3a20 7b7d  "retExtInfo": {}
-0005d370: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0005d380: 2020 2020 2274 696d 6522 3a20 3136 3732      "time": 1672
-0005d390: 3035 3434 3838 3031 300a 2020 2020 2020  054488010.      
-0005d3a0: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
-0005d3b0: 2020 230a 2020 2020 2020 2020 7265 7375    #.        resu
-0005d3c0: 6c74 203d 2073 656c 662e 7361 6665 5f76  lt = self.safe_v
-0005d3d0: 616c 7565 2872 6573 706f 6e73 652c 2027  alue(response, '
-0005d3e0: 7265 7375 6c74 2729 0a20 2020 2020 2020  result').       
-0005d3f0: 2074 6965 7273 203d 2073 656c 662e 7361   tiers = self.sa
-0005d400: 6665 5f76 616c 7565 2872 6573 756c 742c  fe_value(result,
-0005d410: 2027 6c69 7374 2729 0a20 2020 2020 2020   'list').       
-0005d420: 2072 6574 7572 6e20 7365 6c66 2e70 6172   return self.par
-0005d430: 7365 5f6d 6172 6b65 745f 6c65 7665 7261  se_market_levera
-0005d440: 6765 5f74 6965 7273 2874 6965 7273 2c20  ge_tiers(tiers, 
-0005d450: 6d61 726b 6574 290a 0a20 2020 2061 7379  market)..    asy
-0005d460: 6e63 2064 6566 2066 6574 6368 5f6d 6172  nc def fetch_mar
-0005d470: 6b65 745f 6c65 7665 7261 6765 5f74 6965  ket_leverage_tie
-0005d480: 7273 2873 656c 662c 2073 796d 626f 6c3a  rs(self, symbol:
-0005d490: 2073 7472 2c20 7061 7261 6d73 3d7b 7d29   str, params={})
-0005d4a0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-0005d4b0: 2020 2020 2020 7265 7472 6965 7665 2069        retrieve i
-0005d4c0: 6e66 6f72 6d61 7469 6f6e 206f 6e20 7468  nformation on th
-0005d4d0: 6520 6d61 7869 6d75 6d20 6c65 7665 7261  e maximum levera
-0005d4e0: 6765 2c20 616e 6420 6d61 696e 7465 6e61  ge, and maintena
-0005d4f0: 6e63 6520 6d61 7267 696e 2066 6f72 2074  nce margin for t
-0005d500: 7261 6465 7320 6f66 2076 6172 7969 6e67  rades of varying
-0005d510: 2074 7261 6465 2073 697a 6573 2066 6f72   trade sizes for
-0005d520: 2061 2073 696e 676c 6520 6d61 726b 6574   a single market
-0005d530: 0a20 2020 2020 2020 2073 6565 2068 7474  .        see htt
-0005d540: 7073 3a2f 2f62 7962 6974 2d65 7863 6861  ps://bybit-excha
-0005d550: 6e67 652e 6769 7468 7562 2e69 6f2f 646f  nge.github.io/do
-0005d560: 6373 2f76 352f 6d61 726b 6574 2f72 6973  cs/v5/market/ris
-0005d570: 6b2d 6c69 6d69 740a 2020 2020 2020 2020  k-limit.        
-0005d580: 3a70 6172 616d 2073 7472 2073 796d 626f  :param str symbo
-0005d590: 6c3a 2075 6e69 6669 6564 206d 6172 6b65  l: unified marke
-0005d5a0: 7420 7379 6d62 6f6c 0a20 2020 2020 2020  t symbol.       
-0005d5b0: 203a 7061 7261 6d20 6469 6374 2070 6172   :param dict par
-0005d5c0: 616d 733a 2065 7874 7261 2070 6172 616d  ams: extra param
-0005d5d0: 6574 6572 7320 7370 6563 6966 6963 2074  eters specific t
-0005d5e0: 6f20 7468 6520 6279 6269 7420 6170 6920  o the bybit api 
-0005d5f0: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
-0005d600: 203a 7265 7475 726e 7320 6469 6374 3a20   :returns dict: 
-0005d610: 6120 606c 6576 6572 6167 6520 7469 6572  a `leverage tier
-0005d620: 7320 7374 7275 6374 7572 6520 3c68 7474  s structure <htt
-0005d630: 7073 3a2f 2f64 6f63 732e 6363 7874 2e63  ps://docs.ccxt.c
-0005d640: 6f6d 2f23 2f3f 6964 3d6c 6576 6572 6167  om/#/?id=leverag
-0005d650: 652d 7469 6572 732d 7374 7275 6374 7572  e-tiers-structur
-0005d660: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
-0005d670: 2020 2020 2020 2020 6177 6169 7420 7365          await se
-0005d680: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
-0005d690: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
-0005d6a0: 7420 3d20 7b7d 0a20 2020 2020 2020 206d  t = {}.        m
-0005d6b0: 6172 6b65 7420 3d20 4e6f 6e65 0a20 2020  arket = None.   
-0005d6c0: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
-0005d6d0: 6c66 2e6d 6172 6b65 7428 7379 6d62 6f6c  lf.market(symbol
-0005d6e0: 290a 2020 2020 2020 2020 6966 206d 6172  ).        if mar
-0005d6f0: 6b65 745b 2773 706f 7427 5d20 6f72 206d  ket['spot'] or m
-0005d700: 6172 6b65 745b 276f 7074 696f 6e27 5d3a  arket['option']:
-0005d710: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-0005d720: 7365 2042 6164 5265 7175 6573 7428 7365  se BadRequest(se
-0005d730: 6c66 2e69 6420 2b20 2720 6665 7463 684d  lf.id + ' fetchM
-0005d740: 6172 6b65 744c 6576 6572 6167 6554 6965  arketLeverageTie
-0005d750: 7273 2829 2073 796d 626f 6c20 646f 6573  rs() symbol does
-0005d760: 206e 6f74 2073 7570 706f 7274 206d 6172   not support mar
-0005d770: 6b65 7420 2720 2b20 7379 6d62 6f6c 290a  ket ' + symbol).
-0005d780: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0005d790: 2773 796d 626f 6c27 5d20 3d20 6d61 726b  'symbol'] = mark
-0005d7a0: 6574 5b27 6964 275d 0a20 2020 2020 2020  et['id'].       
-0005d7b0: 2072 6574 7572 6e20 6177 6169 7420 7365   return await se
-0005d7c0: 6c66 2e66 6574 6368 5f64 6572 6976 6174  lf.fetch_derivat
-0005d7d0: 6976 6573 5f6d 6172 6b65 745f 6c65 7665  ives_market_leve
-0005d7e0: 7261 6765 5f74 6965 7273 2873 796d 626f  rage_tiers(symbo
-0005d7f0: 6c2c 2070 6172 616d 7329 0a0a 2020 2020  l, params)..    
-0005d800: 6465 6620 7061 7273 655f 6d61 726b 6574  def parse_market
-0005d810: 5f6c 6576 6572 6167 655f 7469 6572 7328  _leverage_tiers(
-0005d820: 7365 6c66 2c20 696e 666f 2c20 6d61 726b  self, info, mark
-0005d830: 6574 3d4e 6f6e 6529 3a0a 2020 2020 2020  et=None):.      
-0005d840: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
-0005d850: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-0005d860: 2020 2020 2020 2269 6422 3a20 312c 0a20        "id": 1,. 
-0005d870: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0005d880: 2022 7379 6d62 6f6c 223a 2022 4254 4355   "symbol": "BTCU
-0005d890: 5344 222c 0a20 2020 2020 2020 2023 2020  SD",.        #  
-0005d8a0: 2020 2020 2020 2022 7269 736b 4c69 6d69         "riskLimi
-0005d8b0: 7456 616c 7565 223a 2022 3135 3022 2c0a  tValue": "150",.
-0005d8c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0005d8d0: 2020 226d 6169 6e74 656e 616e 6365 4d61    "maintenanceMa
-0005d8e0: 7267 696e 223a 2022 302e 3522 2c0a 2020  rgin": "0.5",.  
-0005d8f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0005d900: 2269 6e69 7469 616c 4d61 7267 696e 223a  "initialMargin":
-0005d910: 2022 3122 2c0a 2020 2020 2020 2020 2320   "1",.        # 
-0005d920: 2020 2020 2020 2020 2269 734c 6f77 6573          "isLowes
-0005d930: 7452 6973 6b22 3a20 312c 0a20 2020 2020  tRisk": 1,.     
-0005d940: 2020 2023 2020 2020 2020 2020 2022 6d61     #         "ma
-0005d950: 784c 6576 6572 6167 6522 3a20 2231 3030  xLeverage": "100
-0005d960: 2e30 3022 0a20 2020 2020 2020 2023 2020  .00".        #  
-0005d970: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
-0005d980: 2020 2020 2020 206d 696e 4e6f 7469 6f6e         minNotion
-0005d990: 616c 203d 2030 0a20 2020 2020 2020 2074  al = 0.        t
-0005d9a0: 6965 7273 203d 205b 5d0a 2020 2020 2020  iers = [].      
-0005d9b0: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
-0005d9c0: 2830 2c20 6c65 6e28 696e 666f 2929 3a0a  (0, len(info)):.
-0005d9d0: 2020 2020 2020 2020 2020 2020 6974 656d              item
-0005d9e0: 203d 2069 6e66 6f5b 695d 0a20 2020 2020   = info[i].     
-0005d9f0: 2020 2020 2020 206d 6178 4e6f 7469 6f6e         maxNotion
-0005da00: 616c 203d 2073 656c 662e 7361 6665 5f6e  al = self.safe_n
-0005da10: 756d 6265 7228 6974 656d 2c20 2772 6973  umber(item, 'ris
-0005da20: 6b4c 696d 6974 5661 6c75 6527 290a 2020  kLimitValue').  
-0005da30: 2020 2020 2020 2020 2020 7469 6572 732e            tiers.
-0005da40: 6170 7065 6e64 287b 0a20 2020 2020 2020  append({.       
-0005da50: 2020 2020 2020 2020 2027 7469 6572 273a           'tier':
-0005da60: 2073 656c 662e 7375 6d28 692c 2031 292c   self.sum(i, 1),
-0005da70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0005da80: 2027 6375 7272 656e 6379 273a 206d 6172   'currency': mar
-0005da90: 6b65 745b 2762 6173 6527 5d2c 0a20 2020  ket['base'],.   
-0005daa0: 2020 2020 2020 2020 2020 2020 2027 6d69               'mi
-0005dab0: 6e4e 6f74 696f 6e61 6c27 3a20 6d69 6e4e  nNotional': minN
-0005dac0: 6f74 696f 6e61 6c2c 0a20 2020 2020 2020  otional,.       
-0005dad0: 2020 2020 2020 2020 2027 6d61 784e 6f74           'maxNot
-0005dae0: 696f 6e61 6c27 3a20 6d61 784e 6f74 696f  ional': maxNotio
-0005daf0: 6e61 6c2c 0a20 2020 2020 2020 2020 2020  nal,.           
-0005db00: 2020 2020 2027 6d61 696e 7465 6e61 6e63       'maintenanc
-0005db10: 654d 6172 6769 6e52 6174 6527 3a20 7365  eMarginRate': se
-0005db20: 6c66 2e73 6166 655f 6e75 6d62 6572 2869  lf.safe_number(i
-0005db30: 7465 6d2c 2027 6d61 696e 7465 6e61 6e63  tem, 'maintenanc
-0005db40: 654d 6172 6769 6e27 292c 0a20 2020 2020  eMargin'),.     
-0005db50: 2020 2020 2020 2020 2020 2027 6d61 784c             'maxL
-0005db60: 6576 6572 6167 6527 3a20 7365 6c66 2e73  everage': self.s
-0005db70: 6166 655f 6e75 6d62 6572 2869 7465 6d2c  afe_number(item,
-0005db80: 2027 6d61 784c 6576 6572 6167 6527 292c   'maxLeverage'),
-0005db90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0005dba0: 2027 696e 666f 273a 2069 7465 6d2c 0a20   'info': item,. 
-0005dbb0: 2020 2020 2020 2020 2020 207d 290a 2020             }).  
-0005dbc0: 2020 2020 2020 2020 2020 6d69 6e4e 6f74            minNot
-0005dbd0: 696f 6e61 6c20 3d20 6d61 784e 6f74 696f  ional = maxNotio
-0005dbe0: 6e61 6c0a 2020 2020 2020 2020 7265 7475  nal.        retu
-0005dbf0: 726e 2074 6965 7273 0a0a 2020 2020 6465  rn tiers..    de
-0005dc00: 6620 7061 7273 655f 7472 6164 696e 675f  f parse_trading_
-0005dc10: 6665 6528 7365 6c66 2c20 6665 652c 206d  fee(self, fee, m
-0005dc20: 6172 6b65 743d 4e6f 6e65 293a 0a20 2020  arket=None):.   
-0005dc30: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-0005dc40: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
-0005dc50: 2020 2020 2020 2020 2022 7379 6d62 6f6c           "symbol
-0005dc60: 223a 2022 4554 4855 5344 5422 2c0a 2020  ": "ETHUSDT",.  
-0005dc70: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0005dc80: 226d 616b 6572 4665 6552 6174 6522 3a20  "makerFeeRate": 
-0005dc90: 302e 3030 312c 0a20 2020 2020 2020 2023  0.001,.        #
-0005dca0: 2020 2020 2020 2020 2022 7461 6b65 7246           "takerF
-0005dcb0: 6565 5261 7465 223a 2030 2e30 3031 0a20  eeRate": 0.001. 
-0005dcc0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
-0005dcd0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-0005dce0: 206d 6172 6b65 7449 6420 3d20 7365 6c66   marketId = self
-0005dcf0: 2e73 6166 655f 7374 7269 6e67 2866 6565  .safe_string(fee
-0005dd00: 2c20 2773 796d 626f 6c27 290a 2020 2020  , 'symbol').    
-0005dd10: 2020 2020 7379 6d62 6f6c 203d 2073 656c      symbol = sel
-0005dd20: 662e 7361 6665 5f73 796d 626f 6c28 6d61  f.safe_symbol(ma
-0005dd30: 726b 6574 4964 2c20 4e6f 6e65 2c20 4e6f  rketId, None, No
-0005dd40: 6e65 2c20 2763 6f6e 7472 6163 7427 290a  ne, 'contract').
-0005dd50: 2020 2020 2020 2020 7265 7475 726e 207b          return {
-0005dd60: 0a20 2020 2020 2020 2020 2020 2027 696e  .            'in
-0005dd70: 666f 273a 2066 6565 2c0a 2020 2020 2020  fo': fee,.      
-0005dd80: 2020 2020 2020 2773 796d 626f 6c27 3a20        'symbol': 
-0005dd90: 7379 6d62 6f6c 2c0a 2020 2020 2020 2020  symbol,.        
-0005dda0: 2020 2020 276d 616b 6572 273a 2073 656c      'maker': sel
-0005ddb0: 662e 7361 6665 5f6e 756d 6265 7228 6665  f.safe_number(fe
-0005ddc0: 652c 2027 6d61 6b65 7246 6565 5261 7465  e, 'makerFeeRate
-0005ddd0: 2729 2c0a 2020 2020 2020 2020 2020 2020  '),.            
-0005dde0: 2774 616b 6572 273a 2073 656c 662e 7361  'taker': self.sa
-0005ddf0: 6665 5f6e 756d 6265 7228 6665 652c 2027  fe_number(fee, '
-0005de00: 7461 6b65 7246 6565 5261 7465 2729 2c0a  takerFeeRate'),.
-0005de10: 2020 2020 2020 2020 7d0a 0a20 2020 2061          }..    a
-0005de20: 7379 6e63 2064 6566 2066 6574 6368 5f74  sync def fetch_t
-0005de30: 7261 6469 6e67 5f66 6565 2873 656c 662c  rading_fee(self,
-0005de40: 2073 796d 626f 6c3a 2073 7472 2c20 7061   symbol: str, pa
-0005de50: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
-0005de60: 2020 2222 220a 2020 2020 2020 2020 6665    """.        fe
-0005de70: 7463 6820 7468 6520 7472 6164 696e 6720  tch the trading 
-0005de80: 6665 6573 2066 6f72 2061 206d 6172 6b65  fees for a marke
-0005de90: 740a 2020 2020 2020 2020 7365 6520 6874  t.        see ht
-0005dea0: 7470 733a 2f2f 6279 6269 742d 6578 6368  tps://bybit-exch
-0005deb0: 616e 6765 2e67 6974 6875 622e 696f 2f64  ange.github.io/d
-0005dec0: 6f63 732f 7635 2f61 6363 6f75 6e74 2f66  ocs/v5/account/f
-0005ded0: 6565 2d72 6174 650a 2020 2020 2020 2020  ee-rate.        
-0005dee0: 3a70 6172 616d 2073 7472 2073 796d 626f  :param str symbo
-0005def0: 6c3a 2075 6e69 6669 6564 206d 6172 6b65  l: unified marke
-0005df00: 7420 7379 6d62 6f6c 0a20 2020 2020 2020  t symbol.       
-0005df10: 203a 7061 7261 6d20 6469 6374 2070 6172   :param dict par
-0005df20: 616d 733a 2065 7874 7261 2070 6172 616d  ams: extra param
-0005df30: 6574 6572 7320 7370 6563 6966 6963 2074  eters specific t
-0005df40: 6f20 7468 6520 6279 6269 7420 6170 6920  o the bybit api 
-0005df50: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
-0005df60: 203a 7265 7475 726e 7320 6469 6374 3a20   :returns dict: 
-0005df70: 6120 6066 6565 2073 7472 7563 7475 7265  a `fee structure
-0005df80: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
-0005df90: 6378 742e 636f 6d2f 232f 3f69 643d 6665  cxt.com/#/?id=fe
-0005dfa0: 652d 7374 7275 6374 7572 653e 600a 2020  e-structure>`.  
-0005dfb0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0005dfc0: 2020 6177 6169 7420 7365 6c66 2e6c 6f61    await self.loa
-0005dfd0: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
-0005dfe0: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
-0005dff0: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
-0005e000: 0a20 2020 2020 2020 2069 6620 6d61 726b  .        if mark
-0005e010: 6574 5b27 7370 6f74 275d 3a0a 2020 2020  et['spot']:.    
-0005e020: 2020 2020 2020 2020 7261 6973 6520 4e6f          raise No
-0005e030: 7453 7570 706f 7274 6564 2873 656c 662e  tSupported(self.
-0005e040: 6964 202b 2027 2066 6574 6368 5472 6164  id + ' fetchTrad
-0005e050: 696e 6746 6565 2829 2069 7320 6e6f 7420  ingFee() is not 
-0005e060: 7375 7070 6f72 7465 6420 666f 7220 7370  supported for sp
-0005e070: 6f74 206d 6172 6b65 7427 290a 2020 2020  ot market').    
-0005e080: 2020 2020 7265 7175 6573 7420 3d20 7b0a      request = {.
-0005e090: 2020 2020 2020 2020 2020 2020 2773 796d              'sym
-0005e0a0: 626f 6c27 3a20 6d61 726b 6574 5b27 6964  bol': market['id
-0005e0b0: 275d 2c0a 2020 2020 2020 2020 7d0a 2020  '],.        }.  
-0005e0c0: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
-0005e0d0: 2061 7761 6974 2073 656c 662e 7072 6976   await self.priv
-0005e0e0: 6174 6547 6574 5635 4163 636f 756e 7446  ateGetV5AccountF
-0005e0f0: 6565 5261 7465 2873 656c 662e 6578 7465  eeRate(self.exte
-0005e100: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
-0005e110: 6d73 2929 0a20 2020 2020 2020 2023 0a20  ms)).        #. 
-0005e120: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
-0005e130: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0005e140: 2022 7265 7443 6f64 6522 3a20 302c 0a20   "retCode": 0,. 
-0005e150: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0005e160: 2022 7265 744d 7367 223a 2022 4f4b 222c   "retMsg": "OK",
-0005e170: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0005e180: 2020 2022 7265 7375 6c74 223a 207b 0a20     "result": {. 
-0005e190: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0005e1a0: 2020 2020 2022 6c69 7374 223a 205b 0a20       "list": [. 
-0005e1b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0005e1c0: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-0005e1d0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0005e1e0: 2020 2020 2020 2020 2022 7379 6d62 6f6c           "symbol
-0005e1f0: 223a 2022 4554 4855 5344 5422 2c0a 2020  ": "ETHUSDT",.  
-0005e200: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0005e210: 2020 2020 2020 2020 2020 2020 2274 616b              "tak
-0005e220: 6572 4665 6552 6174 6522 3a20 2230 2e30  erFeeRate": "0.0
-0005e230: 3030 3622 2c0a 2020 2020 2020 2020 2320  006",.        # 
-0005e240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005e250: 2020 2020 226d 616b 6572 4665 6552 6174      "makerFeeRat
-0005e260: 6522 3a20 2230 2e30 3030 3122 0a20 2020  e": "0.0001".   
-0005e270: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0005e280: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-0005e290: 2023 2020 2020 2020 2020 2020 2020 205d   #             ]
-0005e2a0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0005e2b0: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
-0005e2c0: 2020 2020 2020 2020 2272 6574 4578 7449          "retExtI
-0005e2d0: 6e66 6f22 3a20 7b7d 2c0a 2020 2020 2020  nfo": {},.      
-0005e2e0: 2020 2320 2020 2020 2020 2020 2274 696d    #         "tim
-0005e2f0: 6522 3a20 3136 3736 3336 3034 3132 3537  e": 167636041257
-0005e300: 360a 2020 2020 2020 2020 2320 2020 2020  6.        #     
-0005e310: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
-0005e320: 2020 2020 7265 7375 6c74 203d 2073 656c      result = sel
-0005e330: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
-0005e340: 706f 6e73 652c 2027 7265 7375 6c74 272c  ponse, 'result',
-0005e350: 207b 7d29 0a20 2020 2020 2020 2066 6565   {}).        fee
-0005e360: 7320 3d20 7365 6c66 2e73 6166 655f 7661  s = self.safe_va
-0005e370: 6c75 6528 7265 7375 6c74 2c20 276c 6973  lue(result, 'lis
-0005e380: 7427 2c20 5b5d 290a 2020 2020 2020 2020  t', []).        
-0005e390: 6669 7273 7420 3d20 7365 6c66 2e73 6166  first = self.saf
-0005e3a0: 655f 7661 6c75 6528 6665 6573 2c20 302c  e_value(fees, 0,
-0005e3b0: 207b 7d29 0a20 2020 2020 2020 2072 6574   {}).        ret
-0005e3c0: 7572 6e20 7365 6c66 2e70 6172 7365 5f74  urn self.parse_t
-0005e3d0: 7261 6469 6e67 5f66 6565 2866 6972 7374  rading_fee(first
-0005e3e0: 290a 0a20 2020 2061 7379 6e63 2064 6566  )..    async def
-0005e3f0: 2066 6574 6368 5f74 7261 6469 6e67 5f66   fetch_trading_f
-0005e400: 6565 7328 7365 6c66 2c20 7061 7261 6d73  ees(self, params
-0005e410: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
-0005e420: 220a 2020 2020 2020 2020 6665 7463 6820  ".        fetch 
-0005e430: 7468 6520 7472 6164 696e 6720 6665 6573  the trading fees
-0005e440: 2066 6f72 206d 756c 7469 706c 6520 6d61   for multiple ma
-0005e450: 726b 6574 730a 2020 2020 2020 2020 7365  rkets.        se
-0005e460: 6520 6874 7470 733a 2f2f 6279 6269 742d  e https://bybit-
-0005e470: 6578 6368 616e 6765 2e67 6974 6875 622e  exchange.github.
-0005e480: 696f 2f64 6f63 732f 7635 2f61 6363 6f75  io/docs/v5/accou
-0005e490: 6e74 2f66 6565 2d72 6174 650a 2020 2020  nt/fee-rate.    
-0005e4a0: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
-0005e4b0: 7061 7261 6d73 3a20 6578 7472 6120 7061  params: extra pa
-0005e4c0: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
-0005e4d0: 6320 746f 2074 6865 2062 7962 6974 2061  c to the bybit a
-0005e4e0: 7069 2065 6e64 706f 696e 740a 2020 2020  pi endpoint.    
-0005e4f0: 2020 2020 3a72 6574 7572 6e73 2064 6963      :returns dic
-0005e500: 743a 2061 2064 6963 7469 6f6e 6172 7920  t: a dictionary 
-0005e510: 6f66 2060 6665 6520 7374 7275 6374 7572  of `fee structur
-0005e520: 6573 203c 6874 7470 733a 2f2f 646f 6373  es <https://docs
-0005e530: 2e63 6378 742e 636f 6d2f 232f 3f69 643d  .ccxt.com/#/?id=
-0005e540: 6665 652d 7374 7275 6374 7572 653e 6020  fee-structure>` 
-0005e550: 696e 6465 7865 6420 6279 206d 6172 6b65  indexed by marke
-0005e560: 7420 7379 6d62 6f6c 730a 2020 2020 2020  t symbols.      
-0005e570: 2020 2222 220a 2020 2020 2020 2020 6177    """.        aw
-0005e580: 6169 7420 7365 6c66 2e6c 6f61 645f 6d61  ait self.load_ma
-0005e590: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
-0005e5a0: 7479 7065 203d 204e 6f6e 650a 2020 2020  type = None.    
-0005e5b0: 2020 2020 7479 7065 2c20 7061 7261 6d73      type, params
-0005e5c0: 203d 2073 656c 662e 6861 6e64 6c65 5f6f   = self.handle_o
-0005e5d0: 7074 696f 6e5f 616e 645f 7061 7261 6d73  ption_and_params
-0005e5e0: 2870 6172 616d 732c 2027 6665 7463 6854  (params, 'fetchT
-0005e5f0: 7261 6469 6e67 4665 6573 272c 2027 7479  radingFees', 'ty
-0005e600: 7065 272c 2027 6675 7475 7265 2729 0a20  pe', 'future'). 
-0005e610: 2020 2020 2020 2069 6620 7479 7065 203d         if type =
-0005e620: 3d20 2773 706f 7427 3a0a 2020 2020 2020  = 'spot':.      
-0005e630: 2020 2020 2020 7261 6973 6520 4e6f 7453        raise NotS
-0005e640: 7570 706f 7274 6564 2873 656c 662e 6964  upported(self.id
-0005e650: 202b 2027 2066 6574 6368 5472 6164 696e   + ' fetchTradin
-0005e660: 6746 6565 7328 2920 6973 206e 6f74 2073  gFees() is not s
-0005e670: 7570 706f 7274 6564 2066 6f72 2073 706f  upported for spo
-0005e680: 7420 6d61 726b 6574 2729 0a20 2020 2020  t market').     
-0005e690: 2020 2072 6573 706f 6e73 6520 3d20 6177     response = aw
-0005e6a0: 6169 7420 7365 6c66 2e70 7269 7661 7465  ait self.private
-0005e6b0: 4765 7456 3541 6363 6f75 6e74 4665 6552  GetV5AccountFeeR
-0005e6c0: 6174 6528 7061 7261 6d73 290a 2020 2020  ate(params).    
-0005e6d0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-0005e6e0: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-0005e6f0: 2020 2020 2020 2020 2272 6574 436f 6465          "retCode
-0005e700: 223a 2030 2c0a 2020 2020 2020 2020 2320  ": 0,.        # 
-0005e710: 2020 2020 2020 2020 2272 6574 4d73 6722          "retMsg"
-0005e720: 3a20 224f 4b22 2c0a 2020 2020 2020 2020  : "OK",.        
-0005e730: 2320 2020 2020 2020 2020 2272 6573 756c  #         "resul
-0005e740: 7422 3a20 7b0a 2020 2020 2020 2020 2320  t": {.        # 
-0005e750: 2020 2020 2020 2020 2020 2020 226c 6973              "lis
-0005e760: 7422 3a20 5b0a 2020 2020 2020 2020 2320  t": [.        # 
-0005e770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005e780: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-0005e790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005e7a0: 2273 796d 626f 6c22 3a20 2245 5448 5553  "symbol": "ETHUS
-0005e7b0: 4454 222c 0a20 2020 2020 2020 2023 2020  DT",.        #  
-0005e7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005e7d0: 2020 2022 7461 6b65 7246 6565 5261 7465     "takerFeeRate
-0005e7e0: 223a 2022 302e 3030 3036 222c 0a20 2020  ": "0.0006",.   
-0005e7f0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0005e800: 2020 2020 2020 2020 2020 2022 6d61 6b65             "make
-0005e810: 7246 6565 5261 7465 223a 2022 302e 3030  rFeeRate": "0.00
-0005e820: 3031 220a 2020 2020 2020 2020 2320 2020  01".        #   
-0005e830: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
-0005e840: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0005e850: 2020 2020 2020 5d0a 2020 2020 2020 2020        ].        
-0005e860: 2320 2020 2020 2020 2020 7d2c 0a20 2020  #         },.   
-0005e870: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0005e880: 7265 7445 7874 496e 666f 223a 207b 7d2c  retExtInfo": {},
-0005e890: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0005e8a0: 2020 2022 7469 6d65 223a 2031 3637 3633     "time": 16763
-0005e8b0: 3630 3431 3235 3736 0a20 2020 2020 2020  60412576.       
-0005e8c0: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
-0005e8d0: 2023 0a20 2020 2020 2020 2066 6565 7320   #.        fees 
-0005e8e0: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-0005e8f0: 6528 7265 7370 6f6e 7365 2c20 2772 6573  e(response, 'res
-0005e900: 756c 7427 2c20 7b7d 290a 2020 2020 2020  ult', {}).      
-0005e910: 2020 6665 6573 203d 2073 656c 662e 7361    fees = self.sa
-0005e920: 6665 5f76 616c 7565 2866 6565 732c 2027  fe_value(fees, '
-0005e930: 6c69 7374 272c 205b 5d29 0a20 2020 2020  list', []).     
-0005e940: 2020 2072 6573 756c 7420 3d20 7b7d 0a20     result = {}. 
-0005e950: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-0005e960: 7261 6e67 6528 302c 206c 656e 2866 6565  range(0, len(fee
-0005e970: 7329 293a 0a20 2020 2020 2020 2020 2020  s)):.           
-0005e980: 2066 6565 203d 2073 656c 662e 7061 7273   fee = self.pars
-0005e990: 655f 7472 6164 696e 675f 6665 6528 6665  e_trading_fee(fe
-0005e9a0: 6573 5b69 5d29 0a20 2020 2020 2020 2020  es[i]).         
-0005e9b0: 2020 2073 796d 626f 6c20 3d20 6665 655b     symbol = fee[
-0005e9c0: 2773 796d 626f 6c27 5d0a 2020 2020 2020  'symbol'].      
-0005e9d0: 2020 2020 2020 7265 7375 6c74 5b73 796d        result[sym
-0005e9e0: 626f 6c5d 203d 2066 6565 0a20 2020 2020  bol] = fee.     
-0005e9f0: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
-0005ea00: 0a0a 2020 2020 6465 6620 7369 676e 2873  ..    def sign(s
-0005ea10: 656c 662c 2070 6174 682c 2061 7069 3d27  elf, path, api='
-0005ea20: 7075 626c 6963 272c 206d 6574 686f 643d  public', method=
-0005ea30: 2747 4554 272c 2070 6172 616d 733d 7b7d  'GET', params={}
-0005ea40: 2c20 6865 6164 6572 733d 4e6f 6e65 2c20  , headers=None, 
-0005ea50: 626f 6479 3d4e 6f6e 6529 3a0a 2020 2020  body=None):.    
-0005ea60: 2020 2020 7572 6c20 3d20 7365 6c66 2e69      url = self.i
-0005ea70: 6d70 6c6f 6465 5f68 6f73 746e 616d 6528  mplode_hostname(
-0005ea80: 7365 6c66 2e75 726c 735b 2761 7069 275d  self.urls['api']
-0005ea90: 5b61 7069 5d29 202b 2027 2f27 202b 2070  [api]) + '/' + p
-0005eaa0: 6174 680a 2020 2020 2020 2020 6966 2061  ath.        if a
-0005eab0: 7069 203d 3d20 2770 7562 6c69 6327 3a0a  pi == 'public':.
-0005eac0: 2020 2020 2020 2020 2020 2020 6966 2070              if p
-0005ead0: 6172 616d 733a 0a20 2020 2020 2020 2020  arams:.         
-0005eae0: 2020 2020 2020 2075 726c 202b 3d20 273f         url += '?
-0005eaf0: 2720 2b20 7365 6c66 2e72 6177 656e 636f  ' + self.rawenco
-0005eb00: 6465 2870 6172 616d 7329 0a20 2020 2020  de(params).     
-0005eb10: 2020 2065 6c69 6620 6170 6920 3d3d 2027     elif api == '
-0005eb20: 7072 6976 6174 6527 3a0a 2020 2020 2020  private':.      
-0005eb30: 2020 2020 2020 7365 6c66 2e63 6865 636b        self.check
-0005eb40: 5f72 6571 7569 7265 645f 6372 6564 656e  _required_creden
-0005eb50: 7469 616c 7328 290a 2020 2020 2020 2020  tials().        
-0005eb60: 2020 2020 6973 4f70 656e 6170 6920 3d20      isOpenapi = 
-0005eb70: 7572 6c2e 6669 6e64 2827 6f70 656e 6170  url.find('openap
-0005eb80: 6927 2920 3e3d 2030 0a20 2020 2020 2020  i') >= 0.       
-0005eb90: 2020 2020 2069 7356 3355 6e69 6669 6564       isV3Unified
-0005eba0: 4d61 7267 696e 203d 2075 726c 2e66 696e  Margin = url.fin
-0005ebb0: 6428 2775 6e69 6669 6564 2f76 3327 2920  d('unified/v3') 
-0005ebc0: 3e3d 2030 0a20 2020 2020 2020 2020 2020  >= 0.           
-0005ebd0: 2069 7356 3343 6f6e 7472 6163 7420 3d20   isV3Contract = 
-0005ebe0: 7572 6c2e 6669 6e64 2827 636f 6e74 7261  url.find('contra
-0005ebf0: 6374 2f76 3327 2920 3e3d 2030 0a20 2020  ct/v3') >= 0.   
-0005ec00: 2020 2020 2020 2020 2069 7356 3555 6e69           isV5Uni
-0005ec10: 6669 6564 4163 636f 756e 7420 3d20 7572  fiedAccount = ur
-0005ec20: 6c2e 6669 6e64 2827 7635 2729 203e 3d20  l.find('v5') >= 
-0005ec30: 300a 2020 2020 2020 2020 2020 2020 7469  0.            ti
-0005ec40: 6d65 7374 616d 7020 3d20 7374 7228 7365  mestamp = str(se
-0005ec50: 6c66 2e6e 6f6e 6365 2829 290a 2020 2020  lf.nonce()).    
-0005ec60: 2020 2020 2020 2020 6966 2069 734f 7065          if isOpe
-0005ec70: 6e61 7069 3a0a 2020 2020 2020 2020 2020  napi:.          
-0005ec80: 2020 2020 2020 6966 2070 6172 616d 733a        if params:
-0005ec90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0005eca0: 2020 2020 2062 6f64 7920 3d20 7365 6c66       body = self
-0005ecb0: 2e6a 736f 6e28 7061 7261 6d73 290a 2020  .json(params).  
-0005ecc0: 2020 2020 2020 2020 2020 2020 2020 656c                el
-0005ecd0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0005ece0: 2020 2020 2020 2020 2320 7365 6c66 2066          # self f
-0005ecf0: 6978 2066 6f72 2050 4850 2069 7320 7265  ix for PHP is re
-0005ed00: 7175 6972 6564 206f 7468 6572 7769 7365  quired otherwise
-0005ed10: 2069 7420 6765 6e65 7261 7465 730a 2020   it generates.  
-0005ed20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005ed30: 2020 2320 275b 5d27 206f 6e20 656d 7074    # '[]' on empt
-0005ed40: 7920 6172 7261 7973 2065 7665 6e20 7768  y arrays even wh
-0005ed50: 656e 2066 6f72 6365 6420 746f 2075 7365  en forced to use
-0005ed60: 206f 626a 6563 7473 0a20 2020 2020 2020   objects.       
-0005ed70: 2020 2020 2020 2020 2020 2020 2062 6f64               bod
-0005ed80: 7920 3d20 277b 7d27 0a20 2020 2020 2020  y = '{}'.       
-0005ed90: 2020 2020 2020 2020 2070 6179 6c6f 6164           payload
-0005eda0: 203d 2074 696d 6573 7461 6d70 202b 2073   = timestamp + s
-0005edb0: 656c 662e 6170 694b 6579 202b 2062 6f64  elf.apiKey + bod
-0005edc0: 790a 2020 2020 2020 2020 2020 2020 2020  y.              
-0005edd0: 2020 7369 676e 6174 7572 6520 3d20 7365    signature = se
-0005ede0: 6c66 2e68 6d61 6328 7365 6c66 2e65 6e63  lf.hmac(self.enc
-0005edf0: 6f64 6528 7061 796c 6f61 6429 2c20 7365  ode(payload), se
-0005ee00: 6c66 2e65 6e63 6f64 6528 7365 6c66 2e73  lf.encode(self.s
-0005ee10: 6563 7265 7429 2c20 6861 7368 6c69 622e  ecret), hashlib.
-0005ee20: 7368 6132 3536 2c20 2768 6578 2729 0a20  sha256, 'hex'). 
-0005ee30: 2020 2020 2020 2020 2020 2020 2020 2068                 h
-0005ee40: 6561 6465 7273 203d 207b 0a20 2020 2020  eaders = {.     
-0005ee50: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-0005ee60: 436f 6e74 656e 742d 5479 7065 273a 2027  Content-Type': '
-0005ee70: 6170 706c 6963 6174 696f 6e2f 6a73 6f6e  application/json
-0005ee80: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
-0005ee90: 2020 2020 2020 2027 582d 4241 5049 2d41         'X-BAPI-A
-0005eea0: 5049 2d4b 4559 273a 2073 656c 662e 6170  PI-KEY': self.ap
-0005eeb0: 694b 6579 2c0a 2020 2020 2020 2020 2020  iKey,.          
-0005eec0: 2020 2020 2020 2020 2020 2758 2d42 4150            'X-BAP
-0005eed0: 492d 5449 4d45 5354 414d 5027 3a20 7469  I-TIMESTAMP': ti
-0005eee0: 6d65 7374 616d 702c 0a20 2020 2020 2020  mestamp,.       
-0005eef0: 2020 2020 2020 2020 2020 2020 2027 582d               'X-
-0005ef00: 4241 5049 2d53 4947 4e27 3a20 7369 676e  BAPI-SIGN': sign
-0005ef10: 6174 7572 652c 0a20 2020 2020 2020 2020  ature,.         
-0005ef20: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-0005ef30: 2020 2020 2065 6c69 6620 6973 5633 556e       elif isV3Un
-0005ef40: 6966 6965 644d 6172 6769 6e20 6f72 2069  ifiedMargin or i
-0005ef50: 7356 3343 6f6e 7472 6163 7420 6f72 2069  sV3Contract or i
-0005ef60: 7356 3555 6e69 6669 6564 4163 636f 756e  sV5UnifiedAccoun
-0005ef70: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-0005ef80: 2020 2068 6561 6465 7273 203d 207b 0a20     headers = {. 
-0005ef90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005efa0: 2020 2027 436f 6e74 656e 742d 5479 7065     'Content-Type
-0005efb0: 273a 2027 6170 706c 6963 6174 696f 6e2f  ': 'application/
-0005efc0: 6a73 6f6e 272c 0a20 2020 2020 2020 2020  json',.         
-0005efd0: 2020 2020 2020 2020 2020 2027 582d 4241             'X-BA
-0005efe0: 5049 2d41 5049 2d4b 4559 273a 2073 656c  PI-API-KEY': sel
-0005eff0: 662e 6170 694b 6579 2c0a 2020 2020 2020  f.apiKey,.      
-0005f000: 2020 2020 2020 2020 2020 2020 2020 2758                'X
-0005f010: 2d42 4150 492d 5449 4d45 5354 414d 5027  -BAPI-TIMESTAMP'
-0005f020: 3a20 7469 6d65 7374 616d 702c 0a20 2020  : timestamp,.   
-0005f030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005f040: 2027 582d 4241 5049 2d52 4543 562d 5749   'X-BAPI-RECV-WI
-0005f050: 4e44 4f57 273a 2073 7472 2873 656c 662e  NDOW': str(self.
-0005f060: 6f70 7469 6f6e 735b 2772 6563 7657 696e  options['recvWin
-0005f070: 646f 7727 5d29 2c0a 2020 2020 2020 2020  dow']),.        
-0005f080: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-0005f090: 2020 2020 2020 2020 2020 6966 2069 7356            if isV
-0005f0a0: 3355 6e69 6669 6564 4d61 7267 696e 206f  3UnifiedMargin o
-0005f0b0: 7220 6973 5633 436f 6e74 7261 6374 3a0a  r isV3Contract:.
-0005f0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005f0d0: 2020 2020 6865 6164 6572 735b 2758 2d42      headers['X-B
-0005f0e0: 4150 492d 5349 474e 2d54 5950 4527 5d20  API-SIGN-TYPE'] 
-0005f0f0: 3d20 2732 270a 2020 2020 2020 2020 2020  = '2'.          
-0005f100: 2020 2020 2020 7175 6572 7920 3d20 7365        query = se
-0005f110: 6c66 2e65 7874 656e 6428 7b7d 2c20 7061  lf.extend({}, pa
-0005f120: 7261 6d73 290a 2020 2020 2020 2020 2020  rams).          
-0005f130: 2020 2020 2020 7175 6572 7945 6e63 6f64        queryEncod
-0005f140: 6564 203d 2073 656c 662e 7261 7765 6e63  ed = self.rawenc
-0005f150: 6f64 6528 7175 6572 7929 0a20 2020 2020  ode(query).     
-0005f160: 2020 2020 2020 2020 2020 2061 7574 685f             auth_
-0005f170: 6261 7365 203d 2073 7472 2874 696d 6573  base = str(times
-0005f180: 7461 6d70 2920 2b20 7365 6c66 2e61 7069  tamp) + self.api
-0005f190: 4b65 7920 2b20 7374 7228 7365 6c66 2e6f  Key + str(self.o
-0005f1a0: 7074 696f 6e73 5b27 7265 6376 5769 6e64  ptions['recvWind
-0005f1b0: 6f77 275d 290a 2020 2020 2020 2020 2020  ow']).          
-0005f1c0: 2020 2020 2020 6175 7468 4675 6c6c 203d        authFull =
-0005f1d0: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
-0005f1e0: 2020 2020 2020 6966 206d 6574 686f 6420        if method 
-0005f1f0: 3d3d 2027 504f 5354 273a 0a20 2020 2020  == 'POST':.     
-0005f200: 2020 2020 2020 2020 2020 2020 2020 2062                 b
-0005f210: 6f64 7920 3d20 7365 6c66 2e6a 736f 6e28  ody = self.json(
-0005f220: 7175 6572 7929 0a20 2020 2020 2020 2020  query).         
-0005f230: 2020 2020 2020 2020 2020 2061 7574 6846             authF
-0005f240: 756c 6c20 3d20 6175 7468 5f62 6173 6520  ull = auth_base 
-0005f250: 2b20 626f 6479 0a20 2020 2020 2020 2020  + body.         
-0005f260: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0005f270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005f280: 2061 7574 6846 756c 6c20 3d20 6175 7468   authFull = auth
-0005f290: 5f62 6173 6520 2b20 7175 6572 7945 6e63  _base + queryEnc
-0005f2a0: 6f64 6564 0a20 2020 2020 2020 2020 2020  oded.           
-0005f2b0: 2020 2020 2020 2020 2075 726c 202b 3d20           url += 
-0005f2c0: 273f 2720 2b20 7365 6c66 2e72 6177 656e  '?' + self.rawen
-0005f2d0: 636f 6465 2871 7565 7279 290a 2020 2020  code(query).    
-0005f2e0: 2020 2020 2020 2020 2020 2020 7369 676e              sign
-0005f2f0: 6174 7572 6520 3d20 4e6f 6e65 0a20 2020  ature = None.   
-0005f300: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0005f310: 7365 6c66 2e73 6563 7265 742e 6669 6e64  self.secret.find
-0005f320: 2827 5052 4956 4154 4520 4b45 5927 2920  ('PRIVATE KEY') 
-0005f330: 3e20 2d31 3a0a 2020 2020 2020 2020 2020  > -1:.          
-0005f340: 2020 2020 2020 2020 2020 7369 676e 6174            signat
-0005f350: 7572 6520 3d20 7365 6c66 2e72 7361 2861  ure = self.rsa(a
-0005f360: 7574 6846 756c 6c2c 2073 656c 662e 7365  uthFull, self.se
-0005f370: 6372 6574 2c20 2773 6861 3235 3627 290a  cret, 'sha256').
-0005f380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005f390: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0005f3a0: 2020 2020 2020 2020 2020 7369 676e 6174            signat
-0005f3b0: 7572 6520 3d20 7365 6c66 2e68 6d61 6328  ure = self.hmac(
-0005f3c0: 7365 6c66 2e65 6e63 6f64 6528 6175 7468  self.encode(auth
-0005f3d0: 4675 6c6c 292c 2073 656c 662e 656e 636f  Full), self.enco
-0005f3e0: 6465 2873 656c 662e 7365 6372 6574 292c  de(self.secret),
-0005f3f0: 2068 6173 686c 6962 2e73 6861 3235 3629   hashlib.sha256)
-0005f400: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0005f410: 2068 6561 6465 7273 5b27 582d 4241 5049   headers['X-BAPI
-0005f420: 2d53 4947 4e27 5d20 3d20 7369 676e 6174  -SIGN'] = signat
-0005f430: 7572 650a 2020 2020 2020 2020 2020 2020  ure.            
-0005f440: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0005f450: 2020 2020 2020 7175 6572 7920 3d20 7365        query = se
-0005f460: 6c66 2e65 7874 656e 6428 7061 7261 6d73  lf.extend(params
-0005f470: 2c20 7b0a 2020 2020 2020 2020 2020 2020  , {.            
-0005f480: 2020 2020 2020 2020 2761 7069 5f6b 6579          'api_key
-0005f490: 273a 2073 656c 662e 6170 694b 6579 2c0a  ': self.apiKey,.
-0005f4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005f4b0: 2020 2020 2772 6563 765f 7769 6e64 6f77      'recv_window
-0005f4c0: 273a 2073 656c 662e 6f70 7469 6f6e 735b  ': self.options[
-0005f4d0: 2772 6563 7657 696e 646f 7727 5d2c 0a20  'recvWindow'],. 
-0005f4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005f4f0: 2020 2027 7469 6d65 7374 616d 7027 3a20     'timestamp': 
-0005f500: 7469 6d65 7374 616d 702c 0a20 2020 2020  timestamp,.     
-0005f510: 2020 2020 2020 2020 2020 207d 290a 2020             }).  
-0005f520: 2020 2020 2020 2020 2020 2020 2020 736f                so
-0005f530: 7274 6564 5175 6572 7920 3d20 7365 6c66  rtedQuery = self
-0005f540: 2e6b 6579 736f 7274 2871 7565 7279 290a  .keysort(query).
-0005f550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005f560: 6175 7468 203d 2073 656c 662e 7261 7765  auth = self.rawe
-0005f570: 6e63 6f64 6528 736f 7274 6564 5175 6572  ncode(sortedQuer
-0005f580: 7929 0a20 2020 2020 2020 2020 2020 2020  y).             
-0005f590: 2020 2073 6967 6e61 7475 7265 203d 204e     signature = N
-0005f5a0: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
-0005f5b0: 2020 2020 6966 2073 656c 662e 7365 6372      if self.secr
-0005f5c0: 6574 2e66 696e 6428 2750 5249 5641 5445  et.find('PRIVATE
-0005f5d0: 204b 4559 2729 203e 202d 313a 0a20 2020   KEY') > -1:.   
-0005f5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005f5f0: 2073 6967 6e61 7475 7265 203d 2073 656c   signature = sel
-0005f600: 662e 7273 6128 6175 7468 2c20 7365 6c66  f.rsa(auth, self
-0005f610: 2e73 6563 7265 742c 2027 7368 6132 3536  .secret, 'sha256
-0005f620: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
-0005f630: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0005f640: 2020 2020 2020 2020 2020 2020 2073 6967               sig
-0005f650: 6e61 7475 7265 203d 2073 656c 662e 686d  nature = self.hm
-0005f660: 6163 2873 656c 662e 656e 636f 6465 2861  ac(self.encode(a
-0005f670: 7574 6829 2c20 7365 6c66 2e65 6e63 6f64  uth), self.encod
-0005f680: 6528 7365 6c66 2e73 6563 7265 7429 2c20  e(self.secret), 
-0005f690: 6861 7368 6c69 622e 7368 6132 3536 290a  hashlib.sha256).
-0005f6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005f6b0: 6966 206d 6574 686f 6420 3d3d 2027 504f  if method == 'PO
-0005f6c0: 5354 273a 0a20 2020 2020 2020 2020 2020  ST':.           
-0005f6d0: 2020 2020 2020 2020 2069 7353 706f 7420           isSpot 
-0005f6e0: 3d20 7572 6c2e 6669 6e64 2827 7370 6f74  = url.find('spot
-0005f6f0: 2729 203e 3d20 300a 2020 2020 2020 2020  ') >= 0.        
-0005f700: 2020 2020 2020 2020 2020 2020 6578 7465              exte
-0005f710: 6e64 6564 5175 6572 7920 3d20 7365 6c66  ndedQuery = self
-0005f720: 2e65 7874 656e 6428 7175 6572 792c 207b  .extend(query, {
-0005f730: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0005f740: 2020 2020 2020 2020 2027 7369 676e 273a           'sign':
-0005f750: 2073 6967 6e61 7475 7265 2c0a 2020 2020   signature,.    
-0005f760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005f770: 7d29 0a20 2020 2020 2020 2020 2020 2020  }).             
-0005f780: 2020 2020 2020 2069 6620 6973 5370 6f74         if isSpot
-0005f790: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0005f7a0: 2020 2020 2020 2020 2020 626f 6479 203d            body =
-0005f7b0: 2073 656c 662e 7572 6c65 6e63 6f64 6528   self.urlencode(
-0005f7c0: 6578 7465 6e64 6564 5175 6572 7929 0a20  extendedQuery). 
-0005f7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005f7e0: 2020 2020 2020 2068 6561 6465 7273 203d         headers =
-0005f7f0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
-0005f800: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-0005f810: 436f 6e74 656e 742d 5479 7065 273a 2027  Content-Type': '
-0005f820: 6170 706c 6963 6174 696f 6e2f 782d 7777  application/x-ww
-0005f830: 772d 666f 726d 2d75 726c 656e 636f 6465  w-form-urlencode
-0005f840: 6427 2c0a 2020 2020 2020 2020 2020 2020  d',.            
-0005f850: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
-0005f860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005f870: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0005f880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005f890: 626f 6479 203d 2073 656c 662e 6a73 6f6e  body = self.json
-0005f8a0: 2865 7874 656e 6465 6451 7565 7279 290a  (extendedQuery).
-0005f8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005f8c0: 2020 2020 2020 2020 6865 6164 6572 7320          headers 
-0005f8d0: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-0005f8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005f8f0: 2743 6f6e 7465 6e74 2d54 7970 6527 3a20  'Content-Type': 
-0005f900: 2761 7070 6c69 6361 7469 6f6e 2f6a 736f  'application/jso
-0005f910: 6e27 2c0a 2020 2020 2020 2020 2020 2020  n',.            
-0005f920: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
-0005f930: 2020 2020 2020 2020 2020 2020 2020 656c                el
-0005f940: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0005f950: 2020 2020 2020 2020 7572 6c20 2b3d 2027          url += '
-0005f960: 3f27 202b 2073 656c 662e 7261 7765 6e63  ?' + self.rawenc
-0005f970: 6f64 6528 736f 7274 6564 5175 6572 7929  ode(sortedQuery)
-0005f980: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0005f990: 2020 2020 2075 726c 202b 3d20 2726 7369       url += '&si
-0005f9a0: 676e 3d27 202b 2073 6967 6e61 7475 7265  gn=' + signature
-0005f9b0: 0a20 2020 2020 2020 2069 6620 6d65 7468  .        if meth
-0005f9c0: 6f64 203d 3d20 2750 4f53 5427 3a0a 2020  od == 'POST':.  
-0005f9d0: 2020 2020 2020 2020 2020 6272 6f6b 6572            broker
-0005f9e0: 4964 203d 2073 656c 662e 7361 6665 5f73  Id = self.safe_s
-0005f9f0: 7472 696e 6728 7365 6c66 2e6f 7074 696f  tring(self.optio
-0005fa00: 6e73 2c20 2762 726f 6b65 7249 6427 290a  ns, 'brokerId').
-0005fa10: 2020 2020 2020 2020 2020 2020 6966 2062              if b
-0005fa20: 726f 6b65 7249 6420 6973 206e 6f74 204e  rokerId is not N
-0005fa30: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-0005fa40: 2020 2020 2068 6561 6465 7273 5b27 5265       headers['Re
-0005fa50: 6665 7265 7227 5d20 3d20 6272 6f6b 6572  ferer'] = broker
-0005fa60: 4964 0a20 2020 2020 2020 2072 6574 7572  Id.        retur
-0005fa70: 6e20 7b27 7572 6c27 3a20 7572 6c2c 2027  n {'url': url, '
-0005fa80: 6d65 7468 6f64 273a 206d 6574 686f 642c  method': method,
-0005fa90: 2027 626f 6479 273a 2062 6f64 792c 2027   'body': body, '
-0005faa0: 6865 6164 6572 7327 3a20 6865 6164 6572  headers': header
-0005fab0: 737d 0a0a 2020 2020 6465 6620 6861 6e64  s}..    def hand
-0005fac0: 6c65 5f65 7272 6f72 7328 7365 6c66 2c20  le_errors(self, 
-0005fad0: 6874 7470 436f 6465 2c20 7265 6173 6f6e  httpCode, reason
-0005fae0: 2c20 7572 6c2c 206d 6574 686f 642c 2068  , url, method, h
-0005faf0: 6561 6465 7273 2c20 626f 6479 2c20 7265  eaders, body, re
-0005fb00: 7370 6f6e 7365 2c20 7265 7175 6573 7448  sponse, requestH
-0005fb10: 6561 6465 7273 2c20 7265 7175 6573 7442  eaders, requestB
-0005fb20: 6f64 7929 3a0a 2020 2020 2020 2020 6966  ody):.        if
-0005fb30: 206e 6f74 2072 6573 706f 6e73 653a 0a20   not response:. 
-0005fb40: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0005fb50: 6e20 4e6f 6e65 2020 2320 6661 6c6c 6261  n None  # fallba
-0005fb60: 636b 2074 6f20 6465 6661 756c 7420 6572  ck to default er
-0005fb70: 726f 7220 6861 6e64 6c65 720a 2020 2020  ror handler.    
-0005fb80: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-0005fb90: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-0005fba0: 2020 2020 2020 2020 7265 745f 636f 6465          ret_code
-0005fbb0: 3a20 3130 3030 312c 0a20 2020 2020 2020  : 10001,.       
-0005fbc0: 2023 2020 2020 2020 2020 2072 6574 5f6d   #         ret_m
-0005fbd0: 7367 3a20 2752 6561 644d 6170 4342 3a20  sg: 'ReadMapCB: 
-0005fbe0: 6578 7065 6374 207b 6f72 206e 2c20 6275  expect {or n, bu
-0005fbf0: 7420 666f 756e 6420 5c75 3030 3030 2c20  t found \u0000, 
-0005fc00: 6572 726f 7220 2720 2b0a 2020 2020 2020  error ' +.      
-0005fc10: 2020 2320 2020 2020 2020 2020 2766 6f75    #         'fou
-0005fc20: 6e64 2069 6e20 2023 3020 6279 7465 206f  nd in  #0 byte o
-0005fc30: 6620 2e2e 2e7c 7c2e 2e2e 2c20 6269 6767  f ...||..., bigg
-0005fc40: 6572 2063 6f6e 7465 7874 2027 202b 0a20  er context ' +. 
-0005fc50: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0005fc60: 2027 2e2e 2e7c 7c2e 2e2e 272c 0a20 2020   '...||...',.   
-0005fc70: 2020 2020 2023 2020 2020 2020 2020 2065       #         e
-0005fc80: 7874 5f63 6f64 653a 2027 272c 0a20 2020  xt_code: '',.   
-0005fc90: 2020 2020 2023 2020 2020 2020 2020 2065       #         e
-0005fca0: 7874 5f69 6e66 6f3a 2027 272c 0a20 2020  xt_info: '',.   
-0005fcb0: 2020 2020 2023 2020 2020 2020 2020 2072       #         r
-0005fcc0: 6573 756c 743a 206e 756c 6c2c 0a20 2020  esult: null,.   
-0005fcd0: 2020 2020 2023 2020 2020 2020 2020 2074       #         t
-0005fce0: 696d 655f 6e6f 773a 2027 3135 3833 3933  ime_now: '158393
-0005fcf0: 3431 3036 2e35 3930 3433 3627 0a20 2020  4106.590436'.   
-0005fd00: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
-0005fd10: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-0005fd20: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
-0005fd30: 2020 2020 2020 2020 2022 7265 7443 6f64           "retCod
-0005fd40: 6522 3a31 3030 3031 2c0a 2020 2020 2020  e":10001,.      
-0005fd50: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
-0005fd60: 4d73 6722 3a22 7379 6d62 6f6c 2070 6172  Msg":"symbol par
-0005fd70: 616d 7320 6572 7222 2c0a 2020 2020 2020  ams err",.      
-0005fd80: 2020 2320 2020 2020 2020 2020 2272 6573    #         "res
-0005fd90: 756c 7422 3a7b 2273 796d 626f 6c22 3a22  ult":{"symbol":"
-0005fda0: 222c 2262 6964 223a 2222 2c22 6269 6449  ","bid":"","bidI
-0005fdb0: 7622 3a22 222c 2262 6964 5369 7a65 223a  v":"","bidSize":
-0005fdc0: 2222 2c22 6173 6b22 3a22 222c 2261 736b  "","ask":"","ask
-0005fdd0: 4976 223a 2222 2c22 6173 6b53 697a 6522  Iv":"","askSize"
-0005fde0: 3a22 222c 226c 6173 7450 7269 6365 223a  :"","lastPrice":
-0005fdf0: 2222 2c22 6f70 656e 496e 7465 7265 7374  "","openInterest
-0005fe00: 223a 2222 2c22 696e 6465 7850 7269 6365  ":"","indexPrice
-0005fe10: 223a 2222 2c22 6d61 726b 5072 6963 6522  ":"","markPrice"
-0005fe20: 3a22 222c 226d 6172 6b50 7269 6365 4976  :"","markPriceIv
-0005fe30: 223a 2222 2c22 6368 616e 6765 3234 6822  ":"","change24h"
-0005fe40: 3a22 222c 2268 6967 6832 3468 223a 2222  :"","high24h":""
-0005fe50: 2c22 6c6f 7732 3468 223a 2222 2c22 766f  ,"low24h":"","vo
-0005fe60: 6c75 6d65 3234 6822 3a22 222c 2274 7572  lume24h":"","tur
-0005fe70: 6e6f 7665 7232 3468 223a 2222 2c22 746f  nover24h":"","to
-0005fe80: 7461 6c56 6f6c 756d 6522 3a22 222c 2274  talVolume":"","t
-0005fe90: 6f74 616c 5475 726e 6f76 6572 223a 2222  otalTurnover":""
-0005fea0: 2c22 6675 6e64 696e 6752 6174 6522 3a22  ,"fundingRate":"
-0005feb0: 222c 2270 7265 6469 6374 6564 4675 6e64  ","predictedFund
-0005fec0: 696e 6752 6174 6522 3a22 222c 226e 6578  ingRate":"","nex
-0005fed0: 7446 756e 6469 6e67 5469 6d65 223a 2222  tFundingTime":""
-0005fee0: 2c22 636f 756e 7464 6f77 6e48 6f75 7222  ,"countdownHour"
-0005fef0: 3a22 3022 2c22 7072 6564 6963 7465 6444  :"0","predictedD
-0005ff00: 656c 6976 6572 7950 7269 6365 223a 2222  eliveryPrice":""
-0005ff10: 2c22 756e 6465 726c 7969 6e67 5072 6963  ,"underlyingPric
-0005ff20: 6522 3a22 222c 2264 656c 7461 223a 2222  e":"","delta":""
-0005ff30: 2c22 6761 6d6d 6122 3a22 222c 2276 6567  ,"gamma":"","veg
-0005ff40: 6122 3a22 222c 2274 6865 7461 223a 2222  a":"","theta":""
-0005ff50: 7d0a 2020 2020 2020 2020 2320 2020 2020  }.        #     
-0005ff60: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
-0005ff70: 2020 2020 6572 726f 7243 6f64 6520 3d20      errorCode = 
-0005ff80: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0005ff90: 5f32 2872 6573 706f 6e73 652c 2027 7265  _2(response, 're
-0005ffa0: 745f 636f 6465 272c 2027 7265 7443 6f64  t_code', 'retCod
-0005ffb0: 6527 290a 2020 2020 2020 2020 6966 2065  e').        if e
-0005ffc0: 7272 6f72 436f 6465 2021 3d20 2730 273a  rrorCode != '0':
-0005ffd0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0005ffe0: 6572 726f 7243 6f64 6520 3d3d 2027 3330  errorCode == '30
-0005fff0: 3038 3427 3a0a 2020 2020 2020 2020 2020  084':.          
-00060000: 2020 2020 2020 2320 6e6f 7420 616e 2065        # not an e
-00060010: 7272 6f72 0a20 2020 2020 2020 2020 2020  rror.           
-00060020: 2020 2020 2023 2068 7474 7073 3a2f 2f67       # https://g
-00060030: 6974 6875 622e 636f 6d2f 6363 7874 2f63  ithub.com/ccxt/c
-00060040: 6378 742f 6973 7375 6573 2f31 3132 3638  cxt/issues/11268
-00060050: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00060060: 2023 2068 7474 7073 3a2f 2f67 6974 6875   # https://githu
-00060070: 622e 636f 6d2f 6363 7874 2f63 6378 742f  b.com/ccxt/ccxt/
-00060080: 7075 6c6c 2f31 3136 3234 0a20 2020 2020  pull/11624.     
-00060090: 2020 2020 2020 2020 2020 2023 2050 4f53             # POS
-000600a0: 5420 6874 7470 733a 2f2f 6170 692e 6279  T https://api.by
-000600b0: 6269 742e 636f 6d2f 7632 2f70 7269 7661  bit.com/v2/priva
-000600c0: 7465 2f70 6f73 6974 696f 6e2f 7377 6974  te/position/swit
-000600d0: 6368 2d69 736f 6c61 7465 6420 3230 3020  ch-isolated 200 
-000600e0: 4f4b 0a20 2020 2020 2020 2020 2020 2020  OK.             
-000600f0: 2020 2023 207b 2272 6574 5f63 6f64 6522     # {"ret_code"
-00060100: 3a33 3030 3834 2c22 7265 745f 6d73 6722  :30084,"ret_msg"
-00060110: 3a22 4973 6f6c 6174 6564 206e 6f74 206d  :"Isolated not m
-00060120: 6f64 6966 6965 6422 2c22 6578 745f 636f  odified","ext_co
-00060130: 6465 223a 2222 2c22 6578 745f 696e 666f  de":"","ext_info
-00060140: 223a 2222 2c22 7265 7375 6c74 223a 6e75  ":"","result":nu
-00060150: 6c6c 2c22 7469 6d65 5f6e 6f77 223a 2231  ll,"time_now":"1
-00060160: 3634 3230 3035 3231 392e 3933 3739 3838  642005219.937988
-00060170: 222c 2272 6174 655f 6c69 6d69 745f 7374  ","rate_limit_st
-00060180: 6174 7573 223a 3733 2c22 7261 7465 5f6c  atus":73,"rate_l
-00060190: 696d 6974 5f72 6573 6574 5f6d 7322 3a31  imit_reset_ms":1
-000601a0: 3634 3230 3035 3231 3938 3934 2c22 7261  642005219894,"ra
-000601b0: 7465 5f6c 696d 6974 223a 3735 7d0a 2020  te_limit":75}.  
-000601c0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-000601d0: 7475 726e 204e 6f6e 650a 2020 2020 2020  turn None.      
-000601e0: 2020 2020 2020 6665 6564 6261 636b 203d        feedback =
-000601f0: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
-00060200: 2020 6966 2065 7272 6f72 436f 6465 203d    if errorCode =
-00060210: 3d20 2731 3030 3035 273a 0a20 2020 2020  = '10005':.     
-00060220: 2020 2020 2020 2020 2020 2066 6565 6462             feedb
-00060230: 6163 6b20 3d20 7365 6c66 2e69 6420 2b20  ack = self.id + 
-00060240: 2720 7072 6976 6174 6520 6170 6920 7573  ' private api us
-00060250: 6573 202f 7573 6572 2f76 332f 7072 6976  es /user/v3/priv
-00060260: 6174 652f 7175 6572 792d 6170 6920 746f  ate/query-api to
-00060270: 2063 6865 636b 2069 6620 796f 7520 6861   check if you ha
-00060280: 7665 2061 2075 6e69 6669 6564 2061 6363  ve a unified acc
-00060290: 6f75 6e74 2e20 5468 6520 4150 4920 6b65  ount. The API ke
-000602a0: 7920 6f66 2075 7365 7220 6964 206d 7573  y of user id mus
-000602b0: 7420 6f77 6e20 6f6e 6520 6f66 2070 6572  t own one of per
-000602c0: 6d69 7373 696f 6e73 3a20 2241 6363 6f75  missions: "Accou
-000602d0: 6e74 2054 7261 6e73 6665 7222 2c20 2253  nt Transfer", "S
-000602e0: 7562 6163 636f 756e 7420 5472 616e 7366  ubaccount Transf
-000602f0: 6572 222c 2022 5769 7468 6472 6177 616c  er", "Withdrawal
-00060300: 2220 2720 2b20 626f 6479 0a20 2020 2020  " ' + body.     
-00060310: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00060320: 2020 2020 2020 2020 2020 2020 2066 6565               fee
-00060330: 6462 6163 6b20 3d20 7365 6c66 2e69 6420  dback = self.id 
-00060340: 2b20 2720 2720 2b20 626f 6479 0a20 2020  + ' ' + body.   
-00060350: 2020 2020 2020 2020 2073 656c 662e 7468           self.th
-00060360: 726f 775f 6272 6f61 646c 795f 6d61 7463  row_broadly_matc
-00060370: 6865 645f 6578 6365 7074 696f 6e28 7365  hed_exception(se
-00060380: 6c66 2e65 7863 6570 7469 6f6e 735b 2762  lf.exceptions['b
-00060390: 726f 6164 275d 2c20 626f 6479 2c20 6665  road'], body, fe
-000603a0: 6564 6261 636b 290a 2020 2020 2020 2020  edback).        
-000603b0: 2020 2020 7365 6c66 2e74 6872 6f77 5f65      self.throw_e
-000603c0: 7861 6374 6c79 5f6d 6174 6368 6564 5f65  xactly_matched_e
-000603d0: 7863 6570 7469 6f6e 2873 656c 662e 6578  xception(self.ex
-000603e0: 6365 7074 696f 6e73 5b27 6578 6163 7427  ceptions['exact'
-000603f0: 5d2c 2065 7272 6f72 436f 6465 2c20 6665  ], errorCode, fe
-00060400: 6564 6261 636b 290a 2020 2020 2020 2020  edback).        
-00060410: 2020 2020 7261 6973 6520 4578 6368 616e      raise Exchan
-00060420: 6765 4572 726f 7228 6665 6564 6261 636b  geError(feedback
-00060430: 2920 2023 2075 6e6b 6e6f 776e 206d 6573  )  # unknown mes
-00060440: 7361 6765 0a20 2020 2020 2020 2072 6574  sage.        ret
-00060450: 7572 6e20 4e6f 6e65 0a                   urn None.
+000541f0: 2020 2022 6c65 7665 7261 6765 223a 2231     "leverage":"1
+00054200: 2e30 3022 2c0a 2020 2020 2020 2020 2320  .00",.        # 
+00054210: 2020 2020 2020 226f 6363 436c 6f73 696e        "occClosin
+00054220: 6746 6565 223a 2230 2e30 3030 3022 2c0a  gFee":"0.0000",.
+00054230: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00054240: 226c 6971 5072 6963 6522 3a22 222c 0a20  "liqPrice":"",. 
+00054250: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
+00054260: 706f 7369 7469 6f6e 5661 6c75 6522 3a22  positionValue":"
+00054270: 3330 2e38 3130 3022 2c0a 2020 2020 2020  30.8100",.      
+00054280: 2020 2320 2020 2020 2020 2274 616b 6550    #       "takeP
+00054290: 726f 6669 7422 3a22 302e 3022 2c0a 2020  rofit":"0.0",.  
+000542a0: 2020 2020 2020 2320 2020 2020 2020 2272        #       "r
+000542b0: 6973 6b49 6422 3a22 3130 3030 3122 2c0a  iskId":"10001",.
+000542c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000542d0: 2274 7261 696c 696e 6753 746f 7022 3a22  "trailingStop":"
+000542e0: 302e 3030 3030 222c 0a20 2020 2020 2020  0.0000",.       
+000542f0: 2023 2020 2020 2020 2022 756e 7265 616c   #       "unreal
+00054300: 6973 6564 506e 6c22 3a22 302e 3030 3030  isedPnl":"0.0000
+00054310: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00054320: 2020 2022 6372 6561 7465 6441 7422 3a22     "createdAt":"
+00054330: 3136 3532 3435 3137 3935 3330 3522 2c0a  1652451795305",.
+00054340: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00054350: 226d 6172 6b50 7269 6365 223a 2233 3038  "markPrice":"308
+00054360: 3039 2e34 3122 2c0a 2020 2020 2020 2020  09.41",.        
+00054370: 2320 2020 2020 2020 2263 756d 5265 616c  #       "cumReal
+00054380: 6973 6564 506e 6c22 3a22 302e 3030 3030  isedPnl":"0.0000
+00054390: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+000543a0: 2020 2022 706f 7369 7469 6f6e 4d4d 223a     "positionMM":
+000543b0: 2230 2e31 3534 3122 2c0a 2020 2020 2020  "0.1541",.      
+000543c0: 2020 2320 2020 2020 2020 2270 6f73 6974    #       "posit
+000543d0: 696f 6e49 4d22 3a22 3330 2e38 3130 3022  ionIM":"30.8100"
+000543e0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000543f0: 2020 2275 7064 6174 6564 4174 223a 2231    "updatedAt":"1
+00054400: 3635 3234 3531 3739 3533 3035 222c 0a20  652451795305",. 
+00054410: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
+00054420: 7470 534c 4d6f 6465 223a 2255 4e4b 4e4f  tpSLMode":"UNKNO
+00054430: 574e 222c 0a20 2020 2020 2020 2023 2020  WN",.        #  
+00054440: 2020 2020 2022 7369 6465 223a 2242 7579       "side":"Buy
+00054450: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00054460: 2020 2022 6275 7374 5072 6963 6522 3a22     "bustPrice":"
+00054470: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00054480: 2020 2022 6465 6c65 7665 7261 6765 496e     "deleverageIn
+00054490: 6469 6361 746f 7222 3a22 3022 2c0a 2020  dicator":"0",.  
+000544a0: 2020 2020 2020 2320 2020 2020 2020 2265        #       "e
+000544b0: 6e74 7279 5072 6963 6522 3a22 3330 3831  ntryPrice":"3081
+000544c0: 302e 3022 2c0a 2020 2020 2020 2020 2320  0.0",.        # 
+000544d0: 2020 2020 2020 2273 697a 6522 3a22 302e        "size":"0.
+000544e0: 3030 3122 2c0a 2020 2020 2020 2020 2320  001",.        # 
+000544f0: 2020 2020 2020 2273 6573 7369 6f6e 5250        "sessionRP
+00054500: 4c22 3a22 302e 3030 3030 222c 0a20 2020  L":"0.0000",.   
+00054510: 2020 2020 2023 2020 2020 2020 2022 706f       #       "po
+00054520: 7369 7469 6f6e 5374 6174 7573 223a 224e  sitionStatus":"N
+00054530: 4f52 4d41 4c22 2c0a 2020 2020 2020 2020  ORMAL",.        
+00054540: 2320 2020 2020 2020 2273 6573 7369 6f6e  #       "session
+00054550: 5550 4c22 3a22 2d30 2e30 3030 3622 2c0a  UPL":"-0.0006",.
+00054560: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00054570: 2273 746f 704c 6f73 7322 3a22 302e 3022  "stopLoss":"0.0"
+00054580: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00054590: 2020 226f 7264 6572 4d61 7267 696e 223a    "orderMargin":
+000545a0: 2230 2e30 3030 3022 2c0a 2020 2020 2020  "0.0000",.      
+000545b0: 2020 2320 2020 2020 2020 2273 6573 7369    #       "sessi
+000545c0: 6f6e 4176 6750 7269 6365 223a 2233 3038  onAvgPrice":"308
+000545d0: 3130 2e30 220a 2020 2020 2020 2020 2320  10.0".        # 
+000545e0: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
+000545f0: 2020 2020 2020 2023 2075 6e69 6669 6564         # unified
+00054600: 206d 6172 6769 6e0a 2020 2020 2020 2020   margin.        
+00054610: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+00054620: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+00054630: 2020 2020 2273 796d 626f 6c22 3a20 2245      "symbol": "E
+00054640: 5448 5553 4454 222c 0a20 2020 2020 2020  THUSDT",.       
+00054650: 2023 2020 2020 2020 2020 2022 6c65 7665   #         "leve
+00054660: 7261 6765 223a 2022 3130 222c 0a20 2020  rage": "10",.   
+00054670: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00054680: 7570 6461 7465 6454 696d 6522 3a20 3136  updatedTime": 16
+00054690: 3537 3731 3139 3439 3934 352c 0a20 2020  57711949945,.   
+000546a0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+000546b0: 7369 6465 223a 2022 4275 7922 2c0a 2020  side": "Buy",.  
+000546c0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000546d0: 2270 6f73 6974 696f 6e56 616c 7565 223a  "positionValue":
+000546e0: 2022 3533 362e 3932 3530 3030 3030 222c   "536.92500000",
+000546f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00054700: 2020 2022 7461 6b65 5072 6f66 6974 223a     "takeProfit":
+00054710: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
+00054720: 2020 2020 2020 2022 7470 736c 4d6f 6465         "tpslMode
+00054730: 223a 2022 4675 6c6c 222c 0a20 2020 2020  ": "Full",.     
+00054740: 2020 2023 2020 2020 2020 2020 2022 7269     #         "ri
+00054750: 736b 4964 223a 2031 312c 0a20 2020 2020  skId": 11,.     
+00054760: 2020 2023 2020 2020 2020 2020 2022 7472     #         "tr
+00054770: 6169 6c69 6e67 5374 6f70 223a 2022 222c  ailingStop": "",
+00054780: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00054790: 2020 2022 656e 7472 7950 7269 6365 223a     "entryPrice":
+000547a0: 2022 3130 3733 2e38 3530 3030 3030 3022   "1073.85000000"
+000547b0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000547c0: 2020 2020 2275 6e72 6561 6c69 7365 6450      "unrealisedP
+000547d0: 6e6c 223a 2022 222c 0a20 2020 2020 2020  nl": "",.       
+000547e0: 2023 2020 2020 2020 2020 2022 6d61 726b   #         "mark
+000547f0: 5072 6963 6522 3a20 2231 3038 302e 3635  Price": "1080.65
+00054800: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
+00054810: 2023 2020 2020 2020 2020 2022 7369 7a65   #         "size
+00054820: 223a 2022 302e 3530 3030 222c 0a20 2020  ": "0.5000",.   
+00054830: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00054840: 706f 7369 7469 6f6e 5374 6174 7573 223a  positionStatus":
+00054850: 2022 6e6f 726d 616c 222c 0a20 2020 2020   "normal",.     
+00054860: 2020 2023 2020 2020 2020 2020 2022 7374     #         "st
+00054870: 6f70 4c6f 7373 223a 2022 222c 0a20 2020  opLoss": "",.   
+00054880: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00054890: 6375 6d52 6561 6c69 7365 6450 6e6c 223a  cumRealisedPnl":
+000548a0: 2022 2d30 2e33 3232 3135 3530 3022 2c0a   "-0.32215500",.
+000548b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000548c0: 2020 2270 6f73 6974 696f 6e4d 4d22 3a20    "positionMM": 
+000548d0: 2232 2e39 3734 3536 3435 3022 2c0a 2020  "2.97456450",.  
+000548e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000548f0: 2263 7265 6174 6564 5469 6d65 223a 2031  "createdTime": 1
+00054900: 3635 3737 3131 3934 3939 3238 2c0a 2020  657711949928,.  
+00054910: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00054920: 2270 6f73 6974 696f 6e49 6478 223a 2030  "positionIdx": 0
+00054930: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00054940: 2020 2020 2270 6f73 6974 696f 6e49 4d22      "positionIM"
+00054950: 3a20 2235 332e 3938 3234 3339 3530 220a  : "53.98243950".
+00054960: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
+00054970: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+00054980: 2020 2320 756e 6966 6965 6420 6163 636f    # unified acco
+00054990: 756e 740a 2020 2020 2020 2020 230a 2020  unt.        #.  
+000549a0: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
+000549b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000549c0: 2273 796d 626f 6c22 3a20 2258 5250 5553  "symbol": "XRPUS
+000549d0: 4454 222c 0a20 2020 2020 2020 2023 2020  DT",.        #  
+000549e0: 2020 2020 2020 2022 6c65 7665 7261 6765         "leverage
+000549f0: 223a 2022 3130 222c 0a20 2020 2020 2020  ": "10",.       
+00054a00: 2023 2020 2020 2020 2020 2022 6176 6750   #         "avgP
+00054a10: 7269 6365 223a 2022 302e 3336 3135 222c  rice": "0.3615",
+00054a20: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00054a30: 2020 2022 6c69 7150 7269 6365 223a 2022     "liqPrice": "
+00054a40: 302e 3030 3031 222c 0a20 2020 2020 2020  0.0001",.       
+00054a50: 2023 2020 2020 2020 2020 2022 7269 736b   #         "risk
+00054a60: 4c69 6d69 7456 616c 7565 223a 2022 3230  LimitValue": "20
+00054a70: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
+00054a80: 2020 2020 2020 2020 2022 7461 6b65 5072           "takePr
+00054a90: 6f66 6974 223a 2022 222c 0a20 2020 2020  ofit": "",.     
+00054aa0: 2020 2023 2020 2020 2020 2020 2022 706f     #         "po
+00054ab0: 7369 7469 6f6e 5661 6c75 6522 3a20 2233  sitionValue": "3
+00054ac0: 362e 3135 222c 0a20 2020 2020 2020 2023  6.15",.        #
+00054ad0: 2020 2020 2020 2020 2022 7470 736c 4d6f           "tpslMo
+00054ae0: 6465 223a 2022 4675 6c6c 222c 0a20 2020  de": "Full",.   
+00054af0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00054b00: 7269 736b 4964 223a 2034 312c 0a20 2020  riskId": 41,.   
+00054b10: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00054b20: 7472 6169 6c69 6e67 5374 6f70 223a 2022  trailingStop": "
+00054b30: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00054b40: 2020 2020 2020 2275 6e72 6561 6c69 7365        "unrealise
+00054b50: 6450 6e6c 223a 2022 2d31 2e38 3322 2c0a  dPnl": "-1.83",.
+00054b60: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00054b70: 2020 226d 6172 6b50 7269 6365 223a 2022    "markPrice": "
+00054b80: 302e 3334 3332 222c 0a20 2020 2020 2020  0.3432",.       
+00054b90: 2023 2020 2020 2020 2020 2022 6375 6d52   #         "cumR
+00054ba0: 6561 6c69 7365 6450 6e6c 223a 2022 302e  ealisedPnl": "0.
+00054bb0: 3438 3830 3538 3736 222c 0a20 2020 2020  48805876",.     
+00054bc0: 2020 2023 2020 2020 2020 2020 2022 706f     #         "po
+00054bd0: 7369 7469 6f6e 4d4d 223a 2022 302e 3338  sitionMM": "0.38
+00054be0: 3130 3231 222c 0a20 2020 2020 2020 2023  1021",.        #
+00054bf0: 2020 2020 2020 2020 2022 6372 6561 7465           "create
+00054c00: 6454 696d 6522 3a20 2231 3637 3231 3231  dTime": "1672121
+00054c10: 3138 3232 3136 222c 0a20 2020 2020 2020  182216",.       
+00054c20: 2023 2020 2020 2020 2020 2022 706f 7369   #         "posi
+00054c30: 7469 6f6e 4964 7822 3a20 302c 0a20 2020  tionIdx": 0,.   
+00054c40: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00054c50: 706f 7369 7469 6f6e 494d 223a 2022 332e  positionIM": "3.
+00054c60: 3633 3435 3231 222c 0a20 2020 2020 2020  634521",.       
+00054c70: 2023 2020 2020 2020 2020 2022 7570 6461   #         "upda
+00054c80: 7465 6454 696d 6522 3a20 2231 3637 3232  tedTime": "16722
+00054c90: 3739 3332 3236 3638 222c 0a20 2020 2020  79322668",.     
+00054ca0: 2020 2023 2020 2020 2020 2020 2022 7369     #         "si
+00054cb0: 6465 223a 2022 4275 7922 2c0a 2020 2020  de": "Buy",.    
+00054cc0: 2020 2020 2320 2020 2020 2020 2020 2262      #         "b
+00054cd0: 7573 7450 7269 6365 223a 2022 222c 0a20  ustPrice": "",. 
+00054ce0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00054cf0: 2022 7369 7a65 223a 2022 3130 3022 2c0a   "size": "100",.
+00054d00: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00054d10: 2020 2270 6f73 6974 696f 6e53 7461 7475    "positionStatu
+00054d20: 7322 3a20 224e 6f72 6d61 6c22 2c0a 2020  s": "Normal",.  
+00054d30: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00054d40: 2273 746f 704c 6f73 7322 3a20 2222 2c0a  "stopLoss": "",.
+00054d50: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00054d60: 2020 2274 7261 6465 4d6f 6465 223a 2030    "tradeMode": 0
+00054d70: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
+00054d80: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+00054d90: 2020 2063 6f6e 7472 6163 7420 3d20 7365     contract = se
+00054da0: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
+00054db0: 6f73 6974 696f 6e2c 2027 7379 6d62 6f6c  osition, 'symbol
+00054dc0: 2729 0a20 2020 2020 2020 206d 6172 6b65  ').        marke
+00054dd0: 7420 3d20 7365 6c66 2e73 6166 655f 6d61  t = self.safe_ma
+00054de0: 726b 6574 2863 6f6e 7472 6163 742c 206d  rket(contract, m
+00054df0: 6172 6b65 742c 204e 6f6e 652c 2027 636f  arket, None, 'co
+00054e00: 6e74 7261 6374 2729 0a20 2020 2020 2020  ntract').       
+00054e10: 2073 697a 6520 3d20 5072 6563 6973 652e   size = Precise.
+00054e20: 7374 7269 6e67 5f61 6273 2873 656c 662e  string_abs(self.
+00054e30: 7361 6665 5f73 7472 696e 6728 706f 7369  safe_string(posi
+00054e40: 7469 6f6e 2c20 2773 697a 6527 2929 0a20  tion, 'size')). 
+00054e50: 2020 2020 2020 2073 6964 6520 3d20 7365         side = se
+00054e60: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
+00054e70: 6f73 6974 696f 6e2c 2027 7369 6465 2729  osition, 'side')
+00054e80: 0a20 2020 2020 2020 2069 6620 7369 6465  .        if side
+00054e90: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00054ea0: 2020 2020 2020 2020 2020 6966 2073 6964            if sid
+00054eb0: 6520 3d3d 2027 4275 7927 3a0a 2020 2020  e == 'Buy':.    
+00054ec0: 2020 2020 2020 2020 2020 2020 7369 6465              side
+00054ed0: 203d 2027 6c6f 6e67 270a 2020 2020 2020   = 'long'.      
+00054ee0: 2020 2020 2020 656c 6966 2073 6964 6520        elif side 
+00054ef0: 3d3d 2027 5365 6c6c 273a 0a20 2020 2020  == 'Sell':.     
+00054f00: 2020 2020 2020 2020 2020 2073 6964 6520             side 
+00054f10: 3d20 2773 686f 7274 270a 2020 2020 2020  = 'short'.      
+00054f20: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00054f30: 2020 2020 2020 2020 2020 2020 7369 6465              side
+00054f40: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+00054f50: 6e6f 7469 6f6e 616c 203d 2073 656c 662e  notional = self.
+00054f60: 7361 6665 5f73 7472 696e 6728 706f 7369  safe_string(posi
+00054f70: 7469 6f6e 2c20 2770 6f73 6974 696f 6e56  tion, 'positionV
+00054f80: 616c 7565 2729 0a20 2020 2020 2020 2075  alue').        u
+00054f90: 6e72 6561 6c69 7365 6450 6e6c 203d 2073  nrealisedPnl = s
+00054fa0: 656c 662e 6f6d 6974 5f7a 6572 6f28 7365  elf.omit_zero(se
+00054fb0: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
+00054fc0: 6f73 6974 696f 6e2c 2027 756e 7265 616c  osition, 'unreal
+00054fd0: 6973 6564 506e 6c27 2929 0a20 2020 2020  isedPnl')).     
+00054fe0: 2020 2069 6e69 7469 616c 4d61 7267 696e     initialMargin
+00054ff0: 5374 7269 6e67 203d 2073 656c 662e 7361  String = self.sa
+00055000: 6665 5f73 7472 696e 6728 706f 7369 7469  fe_string(positi
+00055010: 6f6e 2c20 2770 6f73 6974 696f 6e49 4d27  on, 'positionIM'
+00055020: 290a 2020 2020 2020 2020 6d61 696e 7465  ).        mainte
+00055030: 6e61 6e63 654d 6172 6769 6e53 7472 696e  nanceMarginStrin
+00055040: 6720 3d20 7365 6c66 2e73 6166 655f 7374  g = self.safe_st
+00055050: 7269 6e67 2870 6f73 6974 696f 6e2c 2027  ring(position, '
+00055060: 706f 7369 7469 6f6e 4d4d 2729 0a20 2020  positionMM').   
+00055070: 2020 2020 2074 696d 6573 7461 6d70 203d       timestamp =
+00055080: 2073 656c 662e 7061 7273 6538 3630 3128   self.parse8601(
+00055090: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+000550a0: 2870 6f73 6974 696f 6e2c 2027 7570 6461  (position, 'upda
+000550b0: 7465 645f 6174 2729 290a 2020 2020 2020  ted_at')).      
+000550c0: 2020 6966 2074 696d 6573 7461 6d70 2069    if timestamp i
+000550d0: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+000550e0: 2020 2020 7469 6d65 7374 616d 7020 3d20      timestamp = 
+000550f0: 7365 6c66 2e73 6166 655f 696e 7465 6765  self.safe_intege
+00055100: 725f 6e28 706f 7369 7469 6f6e 2c20 5b27  r_n(position, ['
+00055110: 7570 6461 7465 6454 696d 6527 2c20 2775  updatedTime', 'u
+00055120: 7064 6174 6564 4174 275d 290a 2020 2020  pdatedAt']).    
+00055130: 2020 2020 2320 6465 6661 756c 7420 746f      # default to
+00055140: 2063 726f 7373 206f 6620 5553 4443 206d   cross of USDC m
+00055150: 6172 6769 6e65 6420 706f 7369 7469 6f6e  argined position
+00055160: 730a 2020 2020 2020 2020 7472 6164 654d  s.        tradeM
+00055170: 6f64 6520 3d20 7365 6c66 2e73 6166 655f  ode = self.safe_
+00055180: 696e 7465 6765 7228 706f 7369 7469 6f6e  integer(position
+00055190: 2c20 2774 7261 6465 4d6f 6465 272c 2030  , 'tradeMode', 0
+000551a0: 290a 2020 2020 2020 2020 6d61 7267 696e  ).        margin
+000551b0: 4d6f 6465 203d 2027 6973 6f6c 6174 6564  Mode = 'isolated
+000551c0: 2720 6966 2074 7261 6465 4d6f 6465 2065  ' if tradeMode e
+000551d0: 6c73 6520 2763 726f 7373 270a 2020 2020  lse 'cross'.    
+000551e0: 2020 2020 636f 6c6c 6174 6572 616c 5374      collateralSt
+000551f0: 7269 6e67 203d 2073 656c 662e 7361 6665  ring = self.safe
+00055200: 5f73 7472 696e 6728 706f 7369 7469 6f6e  _string(position
+00055210: 2c20 2770 6f73 6974 696f 6e42 616c 616e  , 'positionBalan
+00055220: 6365 2729 0a20 2020 2020 2020 2065 6e74  ce').        ent
+00055230: 7279 5072 6963 6520 3d20 7365 6c66 2e6f  ryPrice = self.o
+00055240: 6d69 745f 7a65 726f 2873 656c 662e 7361  mit_zero(self.sa
+00055250: 6665 5f73 7472 696e 675f 3228 706f 7369  fe_string_2(posi
+00055260: 7469 6f6e 2c20 2765 6e74 7279 5072 6963  tion, 'entryPric
+00055270: 6527 2c20 2761 7667 5072 6963 6527 2929  e', 'avgPrice'))
+00055280: 0a20 2020 2020 2020 206c 6971 7569 6461  .        liquida
+00055290: 7469 6f6e 5072 6963 6520 3d20 7365 6c66  tionPrice = self
+000552a0: 2e6f 6d69 745f 7a65 726f 2873 656c 662e  .omit_zero(self.
+000552b0: 7361 6665 5f73 7472 696e 6728 706f 7369  safe_string(posi
+000552c0: 7469 6f6e 2c20 276c 6971 5072 6963 6527  tion, 'liqPrice'
+000552d0: 2929 0a20 2020 2020 2020 206c 6576 6572  )).        lever
+000552e0: 6167 6520 3d20 7365 6c66 2e73 6166 655f  age = self.safe_
+000552f0: 7374 7269 6e67 2870 6f73 6974 696f 6e2c  string(position,
+00055300: 2027 6c65 7665 7261 6765 2729 0a20 2020   'leverage').   
+00055310: 2020 2020 2069 6620 6c69 7175 6964 6174       if liquidat
+00055320: 696f 6e50 7269 6365 2069 7320 6e6f 7420  ionPrice is not 
+00055330: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00055340: 2020 6966 206d 6172 6b65 745b 2773 6574    if market['set
+00055350: 746c 6527 5d20 3d3d 2027 5553 4443 273a  tle'] == 'USDC':
+00055360: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00055370: 2023 2020 2845 6e74 7279 2070 7269 6365   #  (Entry price
+00055380: 202d 204c 6971 2070 7269 6365 2920 2a20   - Liq price) * 
+00055390: 436f 6e74 7261 6374 7320 2b20 4d61 696e  Contracts + Main
+000553a0: 7465 6e61 6e63 6520 4d61 7267 696e 202b  tenance Margin +
+000553b0: 2028 756e 7265 616c 6973 6564 2070 6e6c   (unrealised pnl
+000553c0: 2920 3d20 436f 6c6c 6174 6572 616c 0a20  ) = Collateral. 
+000553d0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+000553e0: 6966 6665 7265 6e63 6520 3d20 5072 6563  ifference = Prec
+000553f0: 6973 652e 7374 7269 6e67 5f61 6273 2850  ise.string_abs(P
+00055400: 7265 6369 7365 2e73 7472 696e 675f 7375  recise.string_su
+00055410: 6228 656e 7472 7950 7269 6365 2c20 6c69  b(entryPrice, li
+00055420: 7175 6964 6174 696f 6e50 7269 6365 2929  quidationPrice))
+00055430: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00055440: 2063 6f6c 6c61 7465 7261 6c53 7472 696e   collateralStrin
+00055450: 6720 3d20 5072 6563 6973 652e 7374 7269  g = Precise.stri
+00055460: 6e67 5f61 6464 2850 7265 6369 7365 2e73  ng_add(Precise.s
+00055470: 7472 696e 675f 6164 6428 5072 6563 6973  tring_add(Precis
+00055480: 652e 7374 7269 6e67 5f6d 756c 2864 6966  e.string_mul(dif
+00055490: 6665 7265 6e63 652c 2073 697a 6529 2c20  ference, size), 
+000554a0: 6d61 696e 7465 6e61 6e63 654d 6172 6769  maintenanceMargi
+000554b0: 6e53 7472 696e 6729 2c20 756e 7265 616c  nString), unreal
+000554c0: 6973 6564 506e 6c29 0a20 2020 2020 2020  isedPnl).       
+000554d0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+000554e0: 2020 2020 2020 2020 2020 2062 7573 7450             bustP
+000554f0: 7269 6365 203d 2073 656c 662e 7361 6665  rice = self.safe
+00055500: 5f73 7472 696e 6728 706f 7369 7469 6f6e  _string(position
+00055510: 2c20 2762 7573 7450 7269 6365 2729 0a20  , 'bustPrice'). 
+00055520: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00055530: 6620 6d61 726b 6574 5b27 6c69 6e65 6172  f market['linear
+00055540: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+00055550: 2020 2020 2020 2020 2320 6465 7269 7665          # derive
+00055560: 6420 6672 6f6d 2074 6865 2066 6f6c 6c6f  d from the follo
+00055570: 7769 6e67 2066 6f72 6d75 6c61 730a 2020  wing formulas.  
+00055580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00055590: 2020 2320 2028 456e 7472 7920 7072 6963    #  (Entry pric
+000555a0: 6520 2d20 4275 7374 2070 7269 6365 2920  e - Bust price) 
+000555b0: 2a20 436f 6e74 7261 6374 7320 3d20 436f  * Contracts = Co
+000555c0: 6c6c 6174 6572 616c 0a20 2020 2020 2020  llateral.       
+000555d0: 2020 2020 2020 2020 2020 2020 2023 2020               #  
+000555e0: 2845 6e74 7279 2070 7269 6365 202d 204c  (Entry price - L
+000555f0: 6971 2070 7269 6365 2920 2a20 436f 6e74  iq price) * Cont
+00055600: 7261 6374 7320 3d20 436f 6c6c 6174 6572  racts = Collater
+00055610: 616c 202d 204d 6169 6e74 656e 616e 6365  al - Maintenance
+00055620: 204d 6172 6769 6e0a 2020 2020 2020 2020   Margin.        
+00055630: 2020 2020 2020 2020 2020 2020 2320 4d61              # Ma
+00055640: 696e 7465 6e61 6e63 6520 4d61 7267 696e  intenance Margin
+00055650: 203d 2028 4275 7374 2070 7269 6365 202d   = (Bust price -
+00055660: 204c 6971 2070 7269 6365 2920 7820 436f   Liq price) x Co
+00055670: 6e74 7261 6374 730a 2020 2020 2020 2020  ntracts.        
+00055680: 2020 2020 2020 2020 2020 2020 6d61 696e              main
+00055690: 7465 6e61 6e63 654d 6172 6769 6e50 7269  tenanceMarginPri
+000556a0: 6365 4469 6666 6572 656e 6365 203d 2050  ceDifference = P
+000556b0: 7265 6369 7365 2e73 7472 696e 675f 6162  recise.string_ab
+000556c0: 7328 5072 6563 6973 652e 7374 7269 6e67  s(Precise.string
+000556d0: 5f73 7562 286c 6971 7569 6461 7469 6f6e  _sub(liquidation
+000556e0: 5072 6963 652c 2062 7573 7450 7269 6365  Price, bustPrice
+000556f0: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
+00055700: 2020 2020 2020 206d 6169 6e74 656e 616e         maintenan
+00055710: 6365 4d61 7267 696e 5374 7269 6e67 203d  ceMarginString =
+00055720: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
+00055730: 6d75 6c28 6d61 696e 7465 6e61 6e63 654d  mul(maintenanceM
+00055740: 6172 6769 6e50 7269 6365 4469 6666 6572  arginPriceDiffer
+00055750: 656e 6365 2c20 7369 7a65 290a 2020 2020  ence, size).    
+00055760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00055770: 2320 496e 6974 6961 6c20 4d61 7267 696e  # Initial Margin
+00055780: 203d 2043 6f6e 7472 6163 7473 2078 2045   = Contracts x E
+00055790: 6e74 7279 2050 7269 6365 202f 204c 6576  ntry Price / Lev
+000557a0: 6572 6167 650a 2020 2020 2020 2020 2020  erage.          
+000557b0: 2020 2020 2020 2020 2020 6966 2065 6e74            if ent
+000557c0: 7279 5072 6963 6520 6973 206e 6f74 204e  ryPrice is not N
+000557d0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+000557e0: 2020 2020 2020 2020 2020 2020 2069 6e69               ini
+000557f0: 7469 616c 4d61 7267 696e 5374 7269 6e67  tialMarginString
+00055800: 203d 2050 7265 6369 7365 2e73 7472 696e   = Precise.strin
+00055810: 675f 6469 7628 5072 6563 6973 652e 7374  g_div(Precise.st
+00055820: 7269 6e67 5f6d 756c 2873 697a 652c 2065  ring_mul(size, e
+00055830: 6e74 7279 5072 6963 6529 2c20 6c65 7665  ntryPrice), leve
+00055840: 7261 6765 290a 2020 2020 2020 2020 2020  rage).          
+00055850: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00055860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00055870: 2320 436f 6e74 7261 6374 7320 2a20 2831  # Contracts * (1
+00055880: 202f 2045 6e74 7279 2070 7269 6365 202d   / Entry price -
+00055890: 2031 202f 2042 7573 7420 7072 6963 6529   1 / Bust price)
+000558a0: 203d 2043 6f6c 6c61 7465 7261 6c0a 2020   = Collateral.  
+000558b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000558c0: 2020 2320 436f 6e74 7261 6374 7320 2a20    # Contracts * 
+000558d0: 2831 202f 2045 6e74 7279 2070 7269 6365  (1 / Entry price
+000558e0: 202d 2031 202f 204c 6971 2070 7269 6365   - 1 / Liq price
+000558f0: 2920 3d20 436f 6c6c 6174 6572 616c 202d  ) = Collateral -
+00055900: 204d 6169 6e74 656e 616e 6365 204d 6172   Maintenance Mar
+00055910: 6769 6e0a 2020 2020 2020 2020 2020 2020  gin.            
+00055920: 2020 2020 2020 2020 2320 4d61 696e 7465          # Mainte
+00055930: 6e61 6e63 6520 4d61 7267 696e 203d 2043  nance Margin = C
+00055940: 6f6e 7472 6163 7473 202a 2028 3120 2f20  ontracts * (1 / 
+00055950: 4c69 7120 7072 6963 6520 2d20 3120 2f20  Liq price - 1 / 
+00055960: 4275 7374 2070 7269 6365 290a 2020 2020  Bust price).    
+00055970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00055980: 2320 4d61 696e 7465 6e61 6e63 6520 4d61  # Maintenance Ma
+00055990: 7267 696e 203d 2043 6f6e 7472 6163 7473  rgin = Contracts
+000559a0: 202a 2028 4275 7374 2070 7269 6365 202d   * (Bust price -
+000559b0: 204c 6971 2070 7269 6365 2920 2f20 284c   Liq price) / (L
+000559c0: 6971 2070 7269 6365 2078 2042 7573 7420  iq price x Bust 
+000559d0: 7072 6963 6529 0a20 2020 2020 2020 2020  price).         
+000559e0: 2020 2020 2020 2020 2020 2064 6966 6665             diffe
+000559f0: 7265 6e63 6520 3d20 5072 6563 6973 652e  rence = Precise.
+00055a00: 7374 7269 6e67 5f61 6273 2850 7265 6369  string_abs(Preci
+00055a10: 7365 2e73 7472 696e 675f 7375 6228 6275  se.string_sub(bu
+00055a20: 7374 5072 6963 652c 206c 6971 7569 6461  stPrice, liquida
+00055a30: 7469 6f6e 5072 6963 6529 290a 2020 2020  tionPrice)).    
+00055a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00055a50: 6d75 6c74 6970 6c79 203d 2050 7265 6369  multiply = Preci
+00055a60: 7365 2e73 7472 696e 675f 6d75 6c28 6275  se.string_mul(bu
+00055a70: 7374 5072 6963 652c 206c 6971 7569 6461  stPrice, liquida
+00055a80: 7469 6f6e 5072 6963 6529 0a20 2020 2020  tionPrice).     
+00055a90: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00055aa0: 6169 6e74 656e 616e 6365 4d61 7267 696e  aintenanceMargin
+00055ab0: 5374 7269 6e67 203d 2050 7265 6369 7365  String = Precise
+00055ac0: 2e73 7472 696e 675f 6469 7628 5072 6563  .string_div(Prec
+00055ad0: 6973 652e 7374 7269 6e67 5f6d 756c 2873  ise.string_mul(s
+00055ae0: 697a 652c 2064 6966 6665 7265 6e63 6529  ize, difference)
+00055af0: 2c20 6d75 6c74 6970 6c79 290a 2020 2020  , multiply).    
+00055b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00055b10: 2320 496e 6974 6961 6c20 4d61 7267 696e  # Initial Margin
+00055b20: 203d 204c 6576 6572 6167 6520 7820 436f   = Leverage x Co
+00055b30: 6e74 7261 6374 7320 2f20 456e 7472 7950  ntracts / EntryP
+00055b40: 7269 6365 0a20 2020 2020 2020 2020 2020  rice.           
+00055b50: 2020 2020 2020 2020 2069 6620 656e 7472           if entr
+00055b60: 7950 7269 6365 2069 7320 6e6f 7420 4e6f  yPrice is not No
+00055b70: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+00055b80: 2020 2020 2020 2020 2020 2020 696e 6974              init
+00055b90: 6961 6c4d 6172 6769 6e53 7472 696e 6720  ialMarginString 
+00055ba0: 3d20 5072 6563 6973 652e 7374 7269 6e67  = Precise.string
+00055bb0: 5f64 6976 2873 697a 652c 2050 7265 6369  _div(size, Preci
+00055bc0: 7365 2e73 7472 696e 675f 6d75 6c28 656e  se.string_mul(en
+00055bd0: 7472 7950 7269 6365 2c20 6c65 7665 7261  tryPrice, levera
+00055be0: 6765 2929 0a20 2020 2020 2020 206d 6169  ge)).        mai
+00055bf0: 6e74 656e 616e 6365 4d61 7267 696e 5065  ntenanceMarginPe
+00055c00: 7263 656e 7461 6765 203d 2050 7265 6369  rcentage = Preci
+00055c10: 7365 2e73 7472 696e 675f 6469 7628 6d61  se.string_div(ma
+00055c20: 696e 7465 6e61 6e63 654d 6172 6769 6e53  intenanceMarginS
+00055c30: 7472 696e 672c 206e 6f74 696f 6e61 6c29  tring, notional)
+00055c40: 0a20 2020 2020 2020 206d 6172 6769 6e52  .        marginR
+00055c50: 6174 696f 203d 2050 7265 6369 7365 2e73  atio = Precise.s
+00055c60: 7472 696e 675f 6469 7628 6d61 696e 7465  tring_div(mainte
+00055c70: 6e61 6e63 654d 6172 6769 6e53 7472 696e  nanceMarginStrin
+00055c80: 672c 2063 6f6c 6c61 7465 7261 6c53 7472  g, collateralStr
+00055c90: 696e 672c 2034 290a 2020 2020 2020 2020  ing, 4).        
+00055ca0: 7265 7475 726e 2073 656c 662e 7361 6665  return self.safe
+00055cb0: 5f70 6f73 6974 696f 6e28 7b0a 2020 2020  _position({.    
+00055cc0: 2020 2020 2020 2020 2769 6e66 6f27 3a20          'info': 
+00055cd0: 706f 7369 7469 6f6e 2c0a 2020 2020 2020  position,.      
+00055ce0: 2020 2020 2020 2769 6427 3a20 4e6f 6e65        'id': None
+00055cf0: 2c0a 2020 2020 2020 2020 2020 2020 2773  ,.            's
+00055d00: 796d 626f 6c27 3a20 6d61 726b 6574 5b27  ymbol': market['
+00055d10: 7379 6d62 6f6c 275d 2c0a 2020 2020 2020  symbol'],.      
+00055d20: 2020 2020 2020 2774 696d 6573 7461 6d70        'timestamp
+00055d30: 273a 2074 696d 6573 7461 6d70 2c0a 2020  ': timestamp,.  
+00055d40: 2020 2020 2020 2020 2020 2764 6174 6574            'datet
+00055d50: 696d 6527 3a20 7365 6c66 2e69 736f 3836  ime': self.iso86
+00055d60: 3031 2874 696d 6573 7461 6d70 292c 0a20  01(timestamp),. 
+00055d70: 2020 2020 2020 2020 2020 2027 6c61 7374             'last
+00055d80: 5570 6461 7465 5469 6d65 7374 616d 7027  UpdateTimestamp'
+00055d90: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
+00055da0: 2020 2020 2769 6e69 7469 616c 4d61 7267      'initialMarg
+00055db0: 696e 273a 2073 656c 662e 7061 7273 655f  in': self.parse_
+00055dc0: 6e75 6d62 6572 2869 6e69 7469 616c 4d61  number(initialMa
+00055dd0: 7267 696e 5374 7269 6e67 292c 0a20 2020  rginString),.   
+00055de0: 2020 2020 2020 2020 2027 696e 6974 6961           'initia
+00055df0: 6c4d 6172 6769 6e50 6572 6365 6e74 6167  lMarginPercentag
+00055e00: 6527 3a20 7365 6c66 2e70 6172 7365 5f6e  e': self.parse_n
+00055e10: 756d 6265 7228 5072 6563 6973 652e 7374  umber(Precise.st
+00055e20: 7269 6e67 5f64 6976 2869 6e69 7469 616c  ring_div(initial
+00055e30: 4d61 7267 696e 5374 7269 6e67 2c20 6e6f  MarginString, no
+00055e40: 7469 6f6e 616c 2929 2c0a 2020 2020 2020  tional)),.      
+00055e50: 2020 2020 2020 276d 6169 6e74 656e 616e        'maintenan
+00055e60: 6365 4d61 7267 696e 273a 2073 656c 662e  ceMargin': self.
+00055e70: 7061 7273 655f 6e75 6d62 6572 286d 6169  parse_number(mai
+00055e80: 6e74 656e 616e 6365 4d61 7267 696e 5374  ntenanceMarginSt
+00055e90: 7269 6e67 292c 0a20 2020 2020 2020 2020  ring),.         
+00055ea0: 2020 2027 6d61 696e 7465 6e61 6e63 654d     'maintenanceM
+00055eb0: 6172 6769 6e50 6572 6365 6e74 6167 6527  arginPercentage'
+00055ec0: 3a20 7365 6c66 2e70 6172 7365 5f6e 756d  : self.parse_num
+00055ed0: 6265 7228 6d61 696e 7465 6e61 6e63 654d  ber(maintenanceM
+00055ee0: 6172 6769 6e50 6572 6365 6e74 6167 6529  arginPercentage)
+00055ef0: 2c0a 2020 2020 2020 2020 2020 2020 2765  ,.            'e
+00055f00: 6e74 7279 5072 6963 6527 3a20 7365 6c66  ntryPrice': self
+00055f10: 2e70 6172 7365 5f6e 756d 6265 7228 656e  .parse_number(en
+00055f20: 7472 7950 7269 6365 292c 0a20 2020 2020  tryPrice),.     
+00055f30: 2020 2020 2020 2027 6e6f 7469 6f6e 616c         'notional
+00055f40: 273a 2073 656c 662e 7061 7273 655f 6e75  ': self.parse_nu
+00055f50: 6d62 6572 286e 6f74 696f 6e61 6c29 2c0a  mber(notional),.
+00055f60: 2020 2020 2020 2020 2020 2020 276c 6576              'lev
+00055f70: 6572 6167 6527 3a20 7365 6c66 2e70 6172  erage': self.par
+00055f80: 7365 5f6e 756d 6265 7228 6c65 7665 7261  se_number(levera
+00055f90: 6765 292c 0a20 2020 2020 2020 2020 2020  ge),.           
+00055fa0: 2027 756e 7265 616c 697a 6564 506e 6c27   'unrealizedPnl'
+00055fb0: 3a20 7365 6c66 2e70 6172 7365 5f6e 756d  : self.parse_num
+00055fc0: 6265 7228 756e 7265 616c 6973 6564 506e  ber(unrealisedPn
+00055fd0: 6c29 2c0a 2020 2020 2020 2020 2020 2020  l),.            
+00055fe0: 2763 6f6e 7472 6163 7473 273a 2073 656c  'contracts': sel
+00055ff0: 662e 7061 7273 655f 6e75 6d62 6572 2873  f.parse_number(s
+00056000: 697a 6529 2c20 2023 2069 6e20 5553 4420  ize),  # in USD 
+00056010: 666f 7220 696e 7665 7273 6520 7377 6170  for inverse swap
+00056020: 730a 2020 2020 2020 2020 2020 2020 2763  s.            'c
+00056030: 6f6e 7472 6163 7453 697a 6527 3a20 7365  ontractSize': se
+00056040: 6c66 2e73 6166 655f 6e75 6d62 6572 286d  lf.safe_number(m
+00056050: 6172 6b65 742c 2027 636f 6e74 7261 6374  arket, 'contract
+00056060: 5369 7a65 2729 2c0a 2020 2020 2020 2020  Size'),.        
+00056070: 2020 2020 276d 6172 6769 6e52 6174 696f      'marginRatio
+00056080: 273a 2073 656c 662e 7061 7273 655f 6e75  ': self.parse_nu
+00056090: 6d62 6572 286d 6172 6769 6e52 6174 696f  mber(marginRatio
+000560a0: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
+000560b0: 6c69 7175 6964 6174 696f 6e50 7269 6365  liquidationPrice
+000560c0: 273a 2073 656c 662e 7061 7273 655f 6e75  ': self.parse_nu
+000560d0: 6d62 6572 286c 6971 7569 6461 7469 6f6e  mber(liquidation
+000560e0: 5072 6963 6529 2c0a 2020 2020 2020 2020  Price),.        
+000560f0: 2020 2020 276d 6172 6b50 7269 6365 273a      'markPrice':
+00056100: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
+00056110: 7228 706f 7369 7469 6f6e 2c20 276d 6172  r(position, 'mar
+00056120: 6b50 7269 6365 2729 2c0a 2020 2020 2020  kPrice'),.      
+00056130: 2020 2020 2020 276c 6173 7450 7269 6365        'lastPrice
+00056140: 273a 204e 6f6e 652c 0a20 2020 2020 2020  ': None,.       
+00056150: 2020 2020 2027 636f 6c6c 6174 6572 616c       'collateral
+00056160: 273a 2073 656c 662e 7061 7273 655f 6e75  ': self.parse_nu
+00056170: 6d62 6572 2863 6f6c 6c61 7465 7261 6c53  mber(collateralS
+00056180: 7472 696e 6729 2c0a 2020 2020 2020 2020  tring),.        
+00056190: 2020 2020 276d 6172 6769 6e4d 6f64 6527      'marginMode'
+000561a0: 3a20 6d61 7267 696e 4d6f 6465 2c0a 2020  : marginMode,.  
+000561b0: 2020 2020 2020 2020 2020 2773 6964 6527            'side'
+000561c0: 3a20 7369 6465 2c0a 2020 2020 2020 2020  : side,.        
+000561d0: 2020 2020 2770 6572 6365 6e74 6167 6527      'percentage'
+000561e0: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
+000561f0: 7d29 0a0a 2020 2020 6173 796e 6320 6465  })..    async de
+00056200: 6620 7365 745f 6d61 7267 696e 5f6d 6f64  f set_margin_mod
+00056210: 6528 7365 6c66 2c20 6d61 7267 696e 4d6f  e(self, marginMo
+00056220: 6465 2c20 7379 6d62 6f6c 3a20 4f70 7469  de, symbol: Opti
+00056230: 6f6e 616c 5b73 7472 5d20 3d20 4e6f 6e65  onal[str] = None
+00056240: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
+00056250: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
+00056260: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
+00056270: 2020 2020 2020 2020 7661 6c75 6573 203d          values =
+00056280: 2061 7761 6974 2073 656c 662e 6973 5f75   await self.is_u
+00056290: 6e69 6669 6564 5f65 6e61 626c 6564 2829  nified_enabled()
+000562a0: 0a20 2020 2020 2020 2069 7355 6e69 6669  .        isUnifi
+000562b0: 6564 4163 636f 756e 7420 3d20 7365 6c66  edAccount = self
+000562c0: 2e73 6166 655f 7661 6c75 6528 7661 6c75  .safe_value(valu
+000562d0: 6573 2c20 3129 0a20 2020 2020 2020 2069  es, 1).        i
+000562e0: 6620 6973 556e 6966 6965 6441 6363 6f75  f isUnifiedAccou
+000562f0: 6e74 3a0a 2020 2020 2020 2020 2020 2020  nt:.            
+00056300: 7265 7475 726e 2061 7761 6974 2073 656c  return await sel
+00056310: 662e 7365 745f 756e 6966 6965 645f 6d61  f.set_unified_ma
+00056320: 7267 696e 5f6d 6f64 6528 6d61 7267 696e  rgin_mode(margin
+00056330: 4d6f 6465 2c20 7379 6d62 6f6c 2c20 7061  Mode, symbol, pa
+00056340: 7261 6d73 290a 2020 2020 2020 2020 7265  rams).        re
+00056350: 7475 726e 2061 7761 6974 2073 656c 662e  turn await self.
+00056360: 7365 745f 6465 7269 7661 7469 7665 735f  set_derivatives_
+00056370: 6d61 7267 696e 5f6d 6f64 6528 6d61 7267  margin_mode(marg
+00056380: 696e 4d6f 6465 2c20 7379 6d62 6f6c 2c20  inMode, symbol, 
+00056390: 7061 7261 6d73 290a 0a20 2020 2061 7379  params)..    asy
+000563a0: 6e63 2064 6566 2073 6574 5f75 6e69 6669  nc def set_unifi
+000563b0: 6564 5f6d 6172 6769 6e5f 6d6f 6465 2873  ed_margin_mode(s
+000563c0: 656c 662c 206d 6172 6769 6e4d 6f64 652c  elf, marginMode,
+000563d0: 2073 796d 626f 6c3a 204f 7074 696f 6e61   symbol: Optiona
+000563e0: 6c5b 7374 725d 203d 204e 6f6e 652c 2070  l[str] = None, p
+000563f0: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
+00056400: 2020 2061 7761 6974 2073 656c 662e 6c6f     await self.lo
+00056410: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
+00056420: 2020 2020 2069 6620 286d 6172 6769 6e4d       if (marginM
+00056430: 6f64 6520 213d 2027 5245 4755 4c41 525f  ode != 'REGULAR_
+00056440: 4d41 5247 494e 2729 2061 6e64 2028 6d61  MARGIN') and (ma
+00056450: 7267 696e 4d6f 6465 2021 3d20 2750 4f52  rginMode != 'POR
+00056460: 5446 4f4c 494f 5f4d 4152 4749 4e27 293a  TFOLIO_MARGIN'):
+00056470: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+00056480: 7365 2042 6164 5265 7175 6573 7428 7365  se BadRequest(se
+00056490: 6c66 2e69 6420 2b20 2720 7365 744d 6172  lf.id + ' setMar
+000564a0: 6769 6e4d 6f64 6528 2920 6d61 7267 696e  ginMode() margin
+000564b0: 4d6f 6465 206d 7573 7420 6265 2065 6974  Mode must be eit
+000564c0: 6865 7220 5245 4755 4c41 525f 4d41 5247  her REGULAR_MARG
+000564d0: 494e 206f 7220 504f 5254 464f 4c49 4f5f  IN or PORTFOLIO_
+000564e0: 4d41 5247 494e 2729 0a20 2020 2020 2020  MARGIN').       
+000564f0: 2072 6571 7565 7374 203d 207b 0a20 2020   request = {.   
+00056500: 2020 2020 2020 2020 2027 7365 744d 6172           'setMar
+00056510: 6769 6e4d 6f64 6527 3a20 6d61 7267 696e  ginMode': margin
+00056520: 4d6f 6465 2c0a 2020 2020 2020 2020 7d0a  Mode,.        }.
+00056530: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
+00056540: 203d 2061 7761 6974 2073 656c 662e 7072   = await self.pr
+00056550: 6976 6174 6550 6f73 7456 3541 6363 6f75  ivatePostV5Accou
+00056560: 6e74 5365 744d 6172 6769 6e4d 6f64 6528  ntSetMarginMode(
+00056570: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
+00056580: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
+00056590: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+000565a0: 2320 207b 0a20 2020 2020 2020 2023 2020  #  {.        #  
+000565b0: 2020 2020 2273 6574 4d61 7267 696e 4d6f      "setMarginMo
+000565c0: 6465 223a 2022 504f 5254 464f 4c49 4f5f  de": "PORTFOLIO_
+000565d0: 4d41 5247 494e 220a 2020 2020 2020 2020  MARGIN".        
+000565e0: 2320 207d 0a20 2020 2020 2020 2023 0a20  #  }.        #. 
+000565f0: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
+00056600: 7370 6f6e 7365 0a0a 2020 2020 6173 796e  sponse..    asyn
+00056610: 6320 6465 6620 7365 745f 6465 7269 7661  c def set_deriva
+00056620: 7469 7665 735f 6d61 7267 696e 5f6d 6f64  tives_margin_mod
+00056630: 6528 7365 6c66 2c20 6d61 7267 696e 4d6f  e(self, marginMo
+00056640: 6465 2c20 7379 6d62 6f6c 3a20 4f70 7469  de, symbol: Opti
+00056650: 6f6e 616c 5b73 7472 5d20 3d20 4e6f 6e65  onal[str] = None
+00056660: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
+00056670: 2020 2020 2020 7365 6c66 2e63 6865 636b        self.check
+00056680: 5f72 6571 7569 7265 645f 7379 6d62 6f6c  _required_symbol
+00056690: 2827 7365 744d 6172 6769 6e4d 6f64 6527  ('setMarginMode'
+000566a0: 2c20 7379 6d62 6f6c 290a 2020 2020 2020  , symbol).      
+000566b0: 2020 6177 6169 7420 7365 6c66 2e6c 6f61    await self.loa
+000566c0: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
+000566d0: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
+000566e0: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
+000566f0: 0a20 2020 2020 2020 2069 6620 6d61 726b  .        if mark
+00056700: 6574 5b27 7365 7474 6c65 275d 203d 3d20  et['settle'] == 
+00056710: 2755 5344 4327 3a0a 2020 2020 2020 2020  'USDC':.        
+00056720: 2020 2020 7261 6973 6520 4e6f 7453 7570      raise NotSup
+00056730: 706f 7274 6564 2873 656c 662e 6964 202b  ported(self.id +
+00056740: 2027 2073 6574 4d61 7267 696e 4d6f 6465   ' setMarginMode
+00056750: 2829 2064 6f65 7320 6e6f 7420 7375 7070  () does not supp
+00056760: 6f72 7420 6d61 726b 6574 2027 202b 2073  ort market ' + s
+00056770: 796d 626f 6c20 2b20 2727 290a 2020 2020  ymbol + '').    
+00056780: 2020 2020 6d61 7267 696e 4d6f 6465 203d      marginMode =
+00056790: 206d 6172 6769 6e4d 6f64 652e 7570 7065   marginMode.uppe
+000567a0: 7228 290a 2020 2020 2020 2020 6966 2028  r().        if (
+000567b0: 6d61 7267 696e 4d6f 6465 2021 3d20 2749  marginMode != 'I
+000567c0: 534f 4c41 5445 4427 2920 616e 6420 286d  SOLATED') and (m
+000567d0: 6172 6769 6e4d 6f64 6520 213d 2027 4352  arginMode != 'CR
+000567e0: 4f53 5327 293a 0a20 2020 2020 2020 2020  OSS'):.         
+000567f0: 2020 2072 6169 7365 2042 6164 5265 7175     raise BadRequ
+00056800: 6573 7428 7365 6c66 2e69 6420 2b20 2720  est(self.id + ' 
+00056810: 7365 744d 6172 6769 6e4d 6f64 6528 2920  setMarginMode() 
+00056820: 6d61 7267 696e 4d6f 6465 206d 7573 7420  marginMode must 
+00056830: 6265 2065 6974 6865 7220 6973 6f6c 6174  be either isolat
+00056840: 6564 206f 7220 6372 6f73 7327 290a 2020  ed or cross').  
+00056850: 2020 2020 2020 6c65 7665 7261 6765 203d        leverage =
+00056860: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+00056870: 6728 7061 7261 6d73 2c20 276c 6576 6572  g(params, 'lever
+00056880: 6167 6527 290a 2020 2020 2020 2020 7365  age').        se
+00056890: 6c6c 4c65 7665 7261 6765 203d 204e 6f6e  llLeverage = Non
+000568a0: 650a 2020 2020 2020 2020 6275 794c 6576  e.        buyLev
+000568b0: 6572 6167 6520 3d20 4e6f 6e65 0a20 2020  erage = None.   
+000568c0: 2020 2020 2069 6620 6c65 7665 7261 6765       if leverage
+000568d0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+000568e0: 2020 2020 2020 7365 6c6c 4c65 7665 7261        sellLevera
+000568f0: 6765 203d 2073 656c 662e 7361 6665 5f73  ge = self.safe_s
+00056900: 7472 696e 675f 3228 7061 7261 6d73 2c20  tring_2(params, 
+00056910: 2773 656c 6c5f 6c65 7665 7261 6765 272c  'sell_leverage',
+00056920: 2027 7365 6c6c 4c65 7665 7261 6765 2729   'sellLeverage')
+00056930: 0a20 2020 2020 2020 2020 2020 2062 7579  .            buy
+00056940: 4c65 7665 7261 6765 203d 2073 656c 662e  Leverage = self.
+00056950: 7361 6665 5f73 7472 696e 675f 3228 7061  safe_string_2(pa
+00056960: 7261 6d73 2c20 2762 7579 5f6c 6576 6572  rams, 'buy_lever
+00056970: 6167 6527 2c20 2762 7579 4c65 7665 7261  age', 'buyLevera
+00056980: 6765 2729 0a20 2020 2020 2020 2020 2020  ge').           
+00056990: 2069 6620 7365 6c6c 4c65 7665 7261 6765   if sellLeverage
+000569a0: 2069 7320 4e6f 6e65 2061 6e64 2062 7579   is None and buy
+000569b0: 4c65 7665 7261 6765 2069 7320 4e6f 6e65  Leverage is None
+000569c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000569d0: 2020 7261 6973 6520 4172 6775 6d65 6e74    raise Argument
+000569e0: 7352 6571 7569 7265 6428 7365 6c66 2e69  sRequired(self.i
+000569f0: 6420 2b20 2720 7365 744d 6172 6769 6e4d  d + ' setMarginM
+00056a00: 6f64 6528 2920 7265 7175 6972 6573 2061  ode() requires a
+00056a10: 206c 6576 6572 6167 6520 7061 7261 6d65   leverage parame
+00056a20: 7465 7220 6f72 2073 656c 6c5f 6c65 7665  ter or sell_leve
+00056a30: 7261 6765 2061 6e64 2062 7579 5f6c 6576  rage and buy_lev
+00056a40: 6572 6167 6520 7061 7261 6d65 7465 7273  erage parameters
+00056a50: 2729 0a20 2020 2020 2020 2020 2020 2069  ').            i
+00056a60: 6620 6275 794c 6576 6572 6167 6520 6973  f buyLeverage is
+00056a70: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00056a80: 2020 2020 2020 2062 7579 4c65 7665 7261         buyLevera
+00056a90: 6765 203d 2073 656c 6c4c 6576 6572 6167  ge = sellLeverag
+00056aa0: 650a 2020 2020 2020 2020 2020 2020 6966  e.            if
+00056ab0: 2073 656c 6c4c 6576 6572 6167 6520 6973   sellLeverage is
+00056ac0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00056ad0: 2020 2020 2020 2073 656c 6c4c 6576 6572         sellLever
+00056ae0: 6167 6520 3d20 6275 794c 6576 6572 6167  age = buyLeverag
+00056af0: 650a 2020 2020 2020 2020 2020 2020 7061  e.            pa
+00056b00: 7261 6d73 203d 2073 656c 662e 6f6d 6974  rams = self.omit
+00056b10: 2870 6172 616d 732c 205b 2762 7579 5f6c  (params, ['buy_l
+00056b20: 6576 6572 6167 6527 2c20 2773 656c 6c5f  everage', 'sell_
+00056b30: 6c65 7665 7261 6765 272c 2027 7365 6c6c  leverage', 'sell
+00056b40: 4c65 7665 7261 6765 272c 2027 6275 794c  Leverage', 'buyL
+00056b50: 6576 6572 6167 6527 5d29 0a20 2020 2020  everage']).     
+00056b60: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00056b70: 2020 2020 2070 6172 616d 7320 3d20 7365       params = se
+00056b80: 6c66 2e6f 6d69 7428 7061 7261 6d73 2c20  lf.omit(params, 
+00056b90: 276c 6576 6572 6167 6527 290a 2020 2020  'leverage').    
+00056ba0: 2020 2020 2020 2020 7365 6c6c 4c65 7665          sellLeve
+00056bb0: 7261 6765 203d 206c 6576 6572 6167 650a  rage = leverage.
+00056bc0: 2020 2020 2020 2020 2020 2020 6275 794c              buyL
+00056bd0: 6576 6572 6167 6520 3d20 6c65 7665 7261  everage = levera
+00056be0: 6765 0a20 2020 2020 2020 2074 7261 6465  ge.        trade
+00056bf0: 4d6f 6465 203d 2031 2069 6620 286d 6172  Mode = 1 if (mar
+00056c00: 6769 6e4d 6f64 6520 3d3d 2027 4953 4f4c  ginMode == 'ISOL
+00056c10: 4154 4544 2729 2065 6c73 6520 300a 2020  ATED') else 0.  
+00056c20: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
+00056c30: 7b0a 2020 2020 2020 2020 2020 2020 2773  {.            's
+00056c40: 796d 626f 6c27 3a20 6d61 726b 6574 5b27  ymbol': market['
+00056c50: 6964 275d 2c0a 2020 2020 2020 2020 2020  id'],.          
+00056c60: 2020 2774 7261 6465 4d6f 6465 273a 2074    'tradeMode': t
+00056c70: 7261 6465 4d6f 6465 2c0a 2020 2020 2020  radeMode,.      
+00056c80: 2020 2020 2020 2762 7579 4c65 7665 7261        'buyLevera
+00056c90: 6765 273a 2062 7579 4c65 7665 7261 6765  ge': buyLeverage
+00056ca0: 2c0a 2020 2020 2020 2020 2020 2020 2773  ,.            's
+00056cb0: 656c 6c4c 6576 6572 6167 6527 3a20 7365  ellLeverage': se
+00056cc0: 6c6c 4c65 7665 7261 6765 2c0a 2020 2020  llLeverage,.    
+00056cd0: 2020 2020 7d0a 2020 2020 2020 2020 7265      }.        re
+00056ce0: 7370 6f6e 7365 203d 2061 7761 6974 2073  sponse = await s
+00056cf0: 656c 662e 7072 6976 6174 6550 6f73 7443  elf.privatePostC
+00056d00: 6f6e 7472 6163 7456 3350 7269 7661 7465  ontractV3Private
+00056d10: 506f 7369 7469 6f6e 5377 6974 6368 4973  PositionSwitchIs
+00056d20: 6f6c 6174 6564 2873 656c 662e 6578 7465  olated(self.exte
+00056d30: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
+00056d40: 6d73 2929 0a20 2020 2020 2020 2023 0a20  ms)).        #. 
+00056d50: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
+00056d60: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00056d70: 2022 7265 7443 6f64 6522 3a20 302c 0a20   "retCode": 0,. 
+00056d80: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00056d90: 2022 7265 744d 7367 223a 2022 4f4b 222c   "retMsg": "OK",
+00056da0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00056db0: 2020 2022 7265 7375 6c74 223a 207b 7d2c     "result": {},
+00056dc0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00056dd0: 2020 2022 7265 7445 7874 496e 666f 223a     "retExtInfo":
+00056de0: 206e 756c 6c2c 0a20 2020 2020 2020 2023   null,.        #
+00056df0: 2020 2020 2020 2020 2022 7469 6d65 223a           "time":
+00056e00: 2031 3635 3839 3038 3533 3235 3830 0a20   1658908532580. 
+00056e10: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+00056e20: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+00056e30: 2072 6574 7572 6e20 7265 7370 6f6e 7365   return response
+00056e40: 0a0a 2020 2020 6173 796e 6320 6465 6620  ..    async def 
+00056e50: 7365 745f 6c65 7665 7261 6765 2873 656c  set_leverage(sel
+00056e60: 662c 206c 6576 6572 6167 652c 2073 796d  f, leverage, sym
+00056e70: 626f 6c3a 204f 7074 696f 6e61 6c5b 7374  bol: Optional[st
+00056e80: 725d 203d 204e 6f6e 652c 2070 6172 616d  r] = None, param
+00056e90: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
+00056ea0: 2222 0a20 2020 2020 2020 2073 6574 2074  "".        set t
+00056eb0: 6865 206c 6576 656c 206f 6620 6c65 7665  he level of leve
+00056ec0: 7261 6765 2066 6f72 2061 206d 6172 6b65  rage for a marke
+00056ed0: 740a 2020 2020 2020 2020 3a70 6172 616d  t.        :param
+00056ee0: 2066 6c6f 6174 206c 6576 6572 6167 653a   float leverage:
+00056ef0: 2074 6865 2072 6174 6520 6f66 206c 6576   the rate of lev
+00056f00: 6572 6167 650a 2020 2020 2020 2020 3a70  erage.        :p
+00056f10: 6172 616d 2073 7472 2073 796d 626f 6c3a  aram str symbol:
+00056f20: 2075 6e69 6669 6564 206d 6172 6b65 7420   unified market 
+00056f30: 7379 6d62 6f6c 0a20 2020 2020 2020 203a  symbol.        :
+00056f40: 7061 7261 6d20 6469 6374 2070 6172 616d  param dict param
+00056f50: 733a 2065 7874 7261 2070 6172 616d 6574  s: extra paramet
+00056f60: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
+00056f70: 7468 6520 6279 6269 7420 6170 6920 656e  the bybit api en
+00056f80: 6470 6f69 6e74 0a20 2020 2020 2020 203a  dpoint.        :
+00056f90: 7265 7475 726e 7320 6469 6374 3a20 7265  returns dict: re
+00056fa0: 7370 6f6e 7365 2066 726f 6d20 7468 6520  sponse from the 
+00056fb0: 6578 6368 616e 6765 0a20 2020 2020 2020  exchange.       
+00056fc0: 2022 2222 0a20 2020 2020 2020 2073 656c   """.        sel
+00056fd0: 662e 6368 6563 6b5f 7265 7175 6972 6564  f.check_required
+00056fe0: 5f73 796d 626f 6c28 2773 6574 4c65 7665  _symbol('setLeve
+00056ff0: 7261 6765 272c 2073 796d 626f 6c29 0a20  rage', symbol). 
+00057000: 2020 2020 2020 2061 7761 6974 2073 656c         await sel
+00057010: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
+00057020: 0a20 2020 2020 2020 206d 6172 6b65 7420  .        market 
+00057030: 3d20 7365 6c66 2e6d 6172 6b65 7428 7379  = self.market(sy
+00057040: 6d62 6f6c 290a 2020 2020 2020 2020 2320  mbol).        # 
+00057050: 5741 524e 494e 473a 2054 4849 5320 5749  WARNING: THIS WI
+00057060: 4c4c 2049 4e43 5245 4153 4520 4c49 5155  LL INCREASE LIQU
+00057070: 4944 4154 494f 4e20 5052 4943 4520 464f  IDATION PRICE FO
+00057080: 5220 4f50 454e 2049 534f 4c41 5445 4420  R OPEN ISOLATED 
+00057090: 4c4f 4e47 2050 4f53 4954 494f 4e53 0a20  LONG POSITIONS. 
+000570a0: 2020 2020 2020 2023 2041 4e44 2044 4543         # AND DEC
+000570b0: 5245 4153 4520 4c49 5155 4944 4154 494f  REASE LIQUIDATIO
+000570c0: 4e20 5052 4943 4520 464f 5220 4f50 454e  N PRICE FOR OPEN
+000570d0: 2049 534f 4c41 5445 4420 5348 4f52 5420   ISOLATED SHORT 
+000570e0: 504f 5349 5449 4f4e 530a 2020 2020 2020  POSITIONS.      
+000570f0: 2020 6973 5573 6463 5365 7474 6c65 6420    isUsdcSettled 
+00057100: 3d20 6d61 726b 6574 5b27 7365 7474 6c65  = market['settle
+00057110: 275d 203d 3d20 2755 5344 4327 0a20 2020  '] == 'USDC'.   
+00057120: 2020 2020 2065 6e61 626c 6555 6e69 6669       enableUnifi
+00057130: 6564 4d61 7267 696e 2c20 656e 6162 6c65  edMargin, enable
+00057140: 556e 6966 6965 6441 6363 6f75 6e74 203d  UnifiedAccount =
+00057150: 2061 7761 6974 2073 656c 662e 6973 5f75   await self.is_u
+00057160: 6e69 6669 6564 5f65 6e61 626c 6564 2829  nified_enabled()
+00057170: 0a20 2020 2020 2020 2023 2065 6e67 6167  .        # engag
+00057180: 6520 696e 206c 6576 6572 6167 6520 7365  e in leverage se
+00057190: 7474 696e 670a 2020 2020 2020 2020 2320  tting.        # 
+000571a0: 7765 2072 6575 7365 2074 6865 2063 6f64  we reuse the cod
+000571b0: 6520 6865 7265 2069 6e73 7465 6164 206f  e here instead o
+000571c0: 6620 6861 7669 6e67 2074 776f 206d 6574  f having two met
+000571d0: 686f 6473 0a20 2020 2020 2020 206c 6576  hods.        lev
+000571e0: 6572 6167 6520 3d20 7365 6c66 2e6e 756d  erage = self.num
+000571f0: 6265 725f 746f 5f73 7472 696e 6728 6c65  ber_to_string(le
+00057200: 7665 7261 6765 290a 2020 2020 2020 2020  verage).        
+00057210: 6d65 7468 6f64 203d 204e 6f6e 650a 2020  method = None.  
+00057220: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
+00057230: 4e6f 6e65 0a20 2020 2020 2020 2069 6620  None.        if 
+00057240: 656e 6162 6c65 556e 6966 6965 644d 6172  enableUnifiedMar
+00057250: 6769 6e20 6f72 2065 6e61 626c 6555 6e69  gin or enableUni
+00057260: 6669 6564 4163 636f 756e 7420 6f72 206e  fiedAccount or n
+00057270: 6f74 2069 7355 7364 6353 6574 746c 6564  ot isUsdcSettled
+00057280: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00057290: 7175 6573 7420 3d20 7b0a 2020 2020 2020  quest = {.      
+000572a0: 2020 2020 2020 2020 2020 2773 796d 626f            'symbo
+000572b0: 6c27 3a20 6d61 726b 6574 5b27 6964 275d  l': market['id']
+000572c0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000572d0: 2020 2762 7579 4c65 7665 7261 6765 273a    'buyLeverage':
+000572e0: 206c 6576 6572 6167 652c 0a20 2020 2020   leverage,.     
+000572f0: 2020 2020 2020 2020 2020 2027 7365 6c6c             'sell
+00057300: 4c65 7665 7261 6765 273a 206c 6576 6572  Leverage': lever
+00057310: 6167 652c 0a20 2020 2020 2020 2020 2020  age,.           
+00057320: 207d 0a20 2020 2020 2020 2020 2020 2069   }.            i
+00057330: 6620 656e 6162 6c65 556e 6966 6965 6441  f enableUnifiedA
+00057340: 6363 6f75 6e74 3a0a 2020 2020 2020 2020  ccount:.        
+00057350: 2020 2020 2020 2020 6966 206d 6172 6b65          if marke
+00057360: 745b 276c 696e 6561 7227 5d3a 0a20 2020  t['linear']:.   
+00057370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00057380: 2072 6571 7565 7374 5b27 6361 7465 676f   request['catego
+00057390: 7279 275d 203d 2027 6c69 6e65 6172 270a  ry'] = 'linear'.
+000573a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000573b0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+000573c0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+000573d0: 4e6f 7453 7570 706f 7274 6564 2873 656c  NotSupported(sel
+000573e0: 662e 6964 202b 2027 2073 6574 556e 6966  f.id + ' setUnif
+000573f0: 6965 644d 6172 6769 6e4c 6576 6572 6167  iedMarginLeverag
+00057400: 6528 2920 6c65 7665 7261 6765 2064 6f65  e() leverage doe
+00057410: 736e 5c27 7420 7375 7070 6f72 7420 696e  sn\'t support in
+00057420: 7665 7273 6520 616e 6420 6f70 7469 6f6e  verse and option
+00057430: 206d 6172 6b65 7420 696e 2075 6e69 6669   market in unifi
+00057440: 6564 2061 6363 6f75 6e74 2729 0a20 2020  ed account').   
+00057450: 2020 2020 2020 2020 2020 2020 206d 6574               met
+00057460: 686f 6420 3d20 2770 7269 7661 7465 506f  hod = 'privatePo
+00057470: 7374 5635 506f 7369 7469 6f6e 5365 744c  stV5PositionSetL
+00057480: 6576 6572 6167 6527 0a20 2020 2020 2020  everage'.       
+00057490: 2020 2020 2065 6c69 6620 656e 6162 6c65       elif enable
+000574a0: 556e 6966 6965 644d 6172 6769 6e3a 0a20  UnifiedMargin:. 
+000574b0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000574c0: 6620 6d61 726b 6574 5b27 6f70 7469 6f6e  f market['option
+000574d0: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+000574e0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+000574f0: 2763 6174 6567 6f72 7927 5d20 3d20 276f  'category'] = 'o
+00057500: 7074 696f 6e27 0a20 2020 2020 2020 2020  ption'.         
+00057510: 2020 2020 2020 2065 6c69 6620 6d61 726b         elif mark
+00057520: 6574 5b27 6c69 6e65 6172 275d 3a0a 2020  et['linear']:.  
+00057530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00057540: 2020 7265 7175 6573 745b 2763 6174 6567    request['categ
+00057550: 6f72 7927 5d20 3d20 276c 696e 6561 7227  ory'] = 'linear'
+00057560: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00057570: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00057580: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00057590: 204e 6f74 5375 7070 6f72 7465 6428 7365   NotSupported(se
+000575a0: 6c66 2e69 6420 2b20 2720 7365 7455 6e69  lf.id + ' setUni
+000575b0: 6669 6564 4d61 7267 696e 4c65 7665 7261  fiedMarginLevera
+000575c0: 6765 2829 206c 6576 6572 6167 6520 646f  ge() leverage do
+000575d0: 6573 6e5c 2774 2073 7570 706f 7274 2069  esn\'t support i
+000575e0: 6e76 6572 7365 206d 6172 6b65 7420 696e  nverse market in
+000575f0: 2075 6e69 6669 6564 206d 6172 6769 6e27   unified margin'
+00057600: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00057610: 2020 6d65 7468 6f64 203d 2027 7072 6976    method = 'priv
+00057620: 6174 6550 6f73 7455 6e69 6669 6564 5633  atePostUnifiedV3
+00057630: 5072 6976 6174 6550 6f73 6974 696f 6e53  PrivatePositionS
+00057640: 6574 4c65 7665 7261 6765 270a 2020 2020  etLeverage'.    
+00057650: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00057660: 2020 2020 2020 2020 2020 2020 2020 6d65                me
+00057670: 7468 6f64 203d 2027 7072 6976 6174 6550  thod = 'privateP
+00057680: 6f73 7443 6f6e 7472 6163 7456 3350 7269  ostContractV3Pri
+00057690: 7661 7465 506f 7369 7469 6f6e 5365 744c  vatePositionSetL
+000576a0: 6576 6572 6167 6527 0a20 2020 2020 2020  everage'.       
+000576b0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+000576c0: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
+000576d0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+000576e0: 7379 6d62 6f6c 273a 206d 6172 6b65 745b  symbol': market[
+000576f0: 2769 6427 5d2c 0a20 2020 2020 2020 2020  'id'],.         
+00057700: 2020 2020 2020 2027 6c65 7665 7261 6765         'leverage
+00057710: 273a 206c 6576 6572 6167 652c 0a20 2020  ': leverage,.   
+00057720: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+00057730: 2020 2020 2020 206d 6574 686f 6420 3d20         method = 
+00057740: 2770 7269 7661 7465 506f 7374 5065 7270  'privatePostPerp
+00057750: 6574 7561 6c55 7364 634f 7065 6e61 7069  etualUsdcOpenapi
+00057760: 5072 6976 6174 6556 3150 6f73 6974 696f  PrivateV1Positio
+00057770: 6e4c 6576 6572 6167 6553 6176 6527 0a20  nLeverageSave'. 
+00057780: 2020 2020 2020 2072 6574 7572 6e20 6177         return aw
+00057790: 6169 7420 6765 7461 7474 7228 7365 6c66  ait getattr(self
+000577a0: 2c20 6d65 7468 6f64 2928 7365 6c66 2e65  , method)(self.e
+000577b0: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
+000577c0: 6172 616d 7329 290a 0a20 2020 2061 7379  arams))..    asy
+000577d0: 6e63 2064 6566 2073 6574 5f70 6f73 6974  nc def set_posit
+000577e0: 696f 6e5f 6d6f 6465 2873 656c 662c 2068  ion_mode(self, h
+000577f0: 6564 6765 642c 2073 796d 626f 6c3a 204f  edged, symbol: O
+00057800: 7074 696f 6e61 6c5b 7374 725d 203d 204e  ptional[str] = N
+00057810: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
+00057820: 0a20 2020 2020 2020 2061 7761 6974 2073  .        await s
+00057830: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
+00057840: 2829 0a20 2020 2020 2020 206d 6f64 6520  ().        mode 
+00057850: 3d20 4e6f 6e65 0a20 2020 2020 2020 2069  = None.        i
+00057860: 6620 6865 6467 6564 3a0a 2020 2020 2020  f hedged:.      
+00057870: 2020 2020 2020 6d6f 6465 203d 2033 0a20        mode = 3. 
+00057880: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00057890: 2020 2020 2020 2020 206d 6f64 6520 3d20           mode = 
+000578a0: 300a 2020 2020 2020 2020 7265 7175 6573  0.        reques
+000578b0: 7420 3d20 7b0a 2020 2020 2020 2020 2020  t = {.          
+000578c0: 2020 276d 6f64 6527 3a20 6d6f 6465 2c0a    'mode': mode,.
+000578d0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+000578e0: 2020 6966 2073 796d 626f 6c20 6973 204e    if symbol is N
+000578f0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00057900: 2072 6571 7565 7374 5b27 636f 696e 275d   request['coin']
+00057910: 203d 2027 5553 4454 270a 2020 2020 2020   = 'USDT'.      
+00057920: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00057930: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
+00057940: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
+00057950: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+00057960: 7565 7374 5b27 7379 6d62 6f6c 275d 203d  uest['symbol'] =
+00057970: 206d 6172 6b65 745b 2769 6427 5d0a 2020   market['id'].  
+00057980: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+00057990: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
+000579a0: 2320 2020 2020 2020 2020 2272 6574 5f63  #         "ret_c
+000579b0: 6f64 6522 3a20 302c 0a20 2020 2020 2020  ode": 0,.       
+000579c0: 2023 2020 2020 2020 2020 2022 7265 745f   #         "ret_
+000579d0: 6d73 6722 3a20 226f 6b22 2c0a 2020 2020  msg": "ok",.    
+000579e0: 2020 2020 2320 2020 2020 2020 2020 2265      #         "e
+000579f0: 7874 5f63 6f64 6522 3a20 2222 2c0a 2020  xt_code": "",.  
+00057a00: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00057a10: 2272 6573 756c 7422 3a20 6e75 6c6c 2c0a  "result": null,.
+00057a20: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00057a30: 2020 2265 7874 5f69 6e66 6f22 3a20 6e75    "ext_info": nu
+00057a40: 6c6c 2c0a 2020 2020 2020 2020 2320 2020  ll,.        #   
+00057a50: 2020 2020 2020 2274 696d 655f 6e6f 7722        "time_now"
+00057a60: 3a20 2231 3537 3734 3737 3936 382e 3137  : "1577477968.17
+00057a70: 3530 3133 222c 0a20 2020 2020 2020 2023  5013",.        #
+00057a80: 2020 2020 2020 2020 2022 7261 7465 5f6c           "rate_l
+00057a90: 696d 6974 5f73 7461 7475 7322 3a20 3734  imit_status": 74
+00057aa0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00057ab0: 2020 2020 2272 6174 655f 6c69 6d69 745f      "rate_limit_
+00057ac0: 7265 7365 745f 6d73 223a 2031 3537 3734  reset_ms": 15774
+00057ad0: 3737 3936 3831 3833 2c0a 2020 2020 2020  77968183,.      
+00057ae0: 2020 2320 2020 2020 2020 2020 2272 6174    #         "rat
+00057af0: 655f 6c69 6d69 7422 3a20 3735 0a20 2020  e_limit": 75.   
+00057b00: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
+00057b10: 2020 2020 2023 0a20 2020 2020 2020 2072       #.        r
+00057b20: 6574 7572 6e20 6177 6169 7420 7365 6c66  eturn await self
+00057b30: 2e70 7269 7661 7465 506f 7374 436f 6e74  .privatePostCont
+00057b40: 7261 6374 5633 5072 6976 6174 6550 6f73  ractV3PrivatePos
+00057b50: 6974 696f 6e53 7769 7463 684d 6f64 6528  itionSwitchMode(
+00057b60: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
+00057b70: 6573 742c 2070 6172 616d 7329 290a 0a20  est, params)).. 
+00057b80: 2020 2061 7379 6e63 2064 6566 2066 6574     async def fet
+00057b90: 6368 5f64 6572 6976 6174 6976 6573 5f6f  ch_derivatives_o
+00057ba0: 7065 6e5f 696e 7465 7265 7374 5f68 6973  pen_interest_his
+00057bb0: 746f 7279 2873 656c 662c 2073 796d 626f  tory(self, symbo
+00057bc0: 6c3a 2073 7472 2c20 7469 6d65 6672 616d  l: str, timefram
+00057bd0: 653d 2731 6827 2c20 7369 6e63 653a 204f  e='1h', since: O
+00057be0: 7074 696f 6e61 6c5b 696e 745d 203d 204e  ptional[int] = N
+00057bf0: 6f6e 652c 206c 696d 6974 3a20 4f70 7469  one, limit: Opti
+00057c00: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
+00057c10: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
+00057c20: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
+00057c30: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
+00057c40: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
+00057c50: 2073 656c 662e 6d61 726b 6574 2873 796d   self.market(sym
+00057c60: 626f 6c29 0a20 2020 2020 2020 2073 7562  bol).        sub
+00057c70: 5479 7065 203d 2027 6c69 6e65 6172 2720  Type = 'linear' 
+00057c80: 6966 206d 6172 6b65 745b 276c 696e 6561  if market['linea
+00057c90: 7227 5d20 656c 7365 2027 696e 7665 7273  r'] else 'invers
+00057ca0: 6527 0a20 2020 2020 2020 2063 6174 6567  e'.        categ
+00057cb0: 6f72 7920 3d20 7365 6c66 2e73 6166 655f  ory = self.safe_
+00057cc0: 7374 7269 6e67 2870 6172 616d 732c 2027  string(params, '
+00057cd0: 6361 7465 676f 7279 272c 2073 7562 5479  category', subTy
+00057ce0: 7065 290a 2020 2020 2020 2020 696e 7465  pe).        inte
+00057cf0: 7276 616c 7320 3d20 7365 6c66 2e73 6166  rvals = self.saf
+00057d00: 655f 7661 6c75 6528 7365 6c66 2e6f 7074  e_value(self.opt
+00057d10: 696f 6e73 2c20 2769 6e74 6572 7661 6c73  ions, 'intervals
+00057d20: 2729 0a20 2020 2020 2020 2069 6e74 6572  ').        inter
+00057d30: 7661 6c20 3d20 7365 6c66 2e73 6166 655f  val = self.safe_
+00057d40: 7374 7269 6e67 2869 6e74 6572 7661 6c73  string(intervals
+00057d50: 2c20 7469 6d65 6672 616d 6529 2020 2320  , timeframe)  # 
+00057d60: 356d 696e 2c31 356d 696e 2c33 306d 696e  5min,15min,30min
+00057d70: 2c31 682c 3468 2c31 640a 2020 2020 2020  ,1h,4h,1d.      
+00057d80: 2020 6966 2069 6e74 6572 7661 6c20 6973    if interval is
+00057d90: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00057da0: 2020 2072 6169 7365 2042 6164 5265 7175     raise BadRequ
+00057db0: 6573 7428 7365 6c66 2e69 6420 2b20 2720  est(self.id + ' 
+00057dc0: 6665 7463 684f 7065 6e49 6e74 6572 6573  fetchOpenInteres
+00057dd0: 7448 6973 746f 7279 2829 2063 616e 6e6f  tHistory() canno
+00057de0: 7420 7573 6520 7468 6520 2720 2b20 7469  t use the ' + ti
+00057df0: 6d65 6672 616d 6520 2b20 2720 7469 6d65  meframe + ' time
+00057e00: 6672 616d 6527 290a 2020 2020 2020 2020  frame').        
+00057e10: 7265 7175 6573 7420 3d20 7b0a 2020 2020  request = {.    
+00057e20: 2020 2020 2020 2020 2773 796d 626f 6c27          'symbol'
+00057e30: 3a20 6d61 726b 6574 5b27 6964 275d 2c0a  : market['id'],.
+00057e40: 2020 2020 2020 2020 2020 2020 2769 6e74              'int
+00057e50: 6572 7661 6c54 696d 6527 3a20 696e 7465  ervalTime': inte
+00057e60: 7276 616c 2c0a 2020 2020 2020 2020 2020  rval,.          
+00057e70: 2020 2763 6174 6567 6f72 7927 3a20 6361    'category': ca
+00057e80: 7465 676f 7279 2c0a 2020 2020 2020 2020  tegory,.        
+00057e90: 7d0a 2020 2020 2020 2020 6966 2073 696e  }.        if sin
+00057ea0: 6365 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ce is not None:.
+00057eb0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+00057ec0: 6573 745b 2773 7461 7274 5469 6d65 275d  est['startTime']
+00057ed0: 203d 2073 696e 6365 0a20 2020 2020 2020   = since.       
+00057ee0: 2069 6620 6c69 6d69 7420 6973 206e 6f74   if limit is not
+00057ef0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00057f00: 2020 2072 6571 7565 7374 5b27 6c69 6d69     request['limi
+00057f10: 7427 5d20 3d20 6c69 6d69 740a 2020 2020  t'] = limit.    
+00057f20: 2020 2020 7265 7370 6f6e 7365 203d 2061      response = a
+00057f30: 7761 6974 2073 656c 662e 7075 626c 6963  wait self.public
+00057f40: 4765 7456 354d 6172 6b65 744f 7065 6e49  GetV5MarketOpenI
+00057f50: 6e74 6572 6573 7428 7365 6c66 2e65 7874  nterest(self.ext
+00057f60: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
+00057f70: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
+00057f80: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+00057f90: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00057fa0: 2020 2272 6574 436f 6465 223a 2030 2c0a    "retCode": 0,.
+00057fb0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00057fc0: 2020 2272 6574 4d73 6722 3a20 224f 4b22    "retMsg": "OK"
+00057fd0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00057fe0: 2020 2020 2272 6573 756c 7422 3a20 7b0a      "result": {.
+00057ff0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00058000: 2020 2020 2020 2273 796d 626f 6c22 3a20        "symbol": 
+00058010: 2242 5443 5553 4422 2c0a 2020 2020 2020  "BTCUSD",.      
+00058020: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00058030: 2263 6174 6567 6f72 7922 3a20 2269 6e76  "category": "inv
+00058040: 6572 7365 222c 0a20 2020 2020 2020 2023  erse",.        #
+00058050: 2020 2020 2020 2020 2020 2020 2022 6c69               "li
+00058060: 7374 223a 205b 0a20 2020 2020 2020 2023  st": [.        #
+00058070: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00058080: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+00058090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000580a0: 2022 6f70 656e 496e 7465 7265 7374 223a   "openInterest":
+000580b0: 2022 3436 3131 3334 3338 342e 3030 3030   "461134384.0000
+000580c0: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
+000580d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000580e0: 2020 2020 2022 7469 6d65 7374 616d 7022       "timestamp"
+000580f0: 3a20 2231 3636 3935 3731 3430 3030 3030  : "1669571400000
+00058100: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
+00058110: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
+00058120: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00058130: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+00058140: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00058150: 2020 2020 2020 2020 2022 6f70 656e 496e           "openIn
+00058160: 7465 7265 7374 223a 2022 3436 3131 3334  terest": "461134
+00058170: 3239 322e 3030 3030 3030 3030 222c 0a20  292.00000000",. 
+00058180: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00058190: 2020 2020 2020 2020 2020 2020 2022 7469               "ti
+000581a0: 6d65 7374 616d 7022 3a20 2231 3636 3935  mestamp": "16695
+000581b0: 3731 3130 3030 3030 220a 2020 2020 2020  71100000".      
+000581c0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+000581d0: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
+000581e0: 2020 2020 2020 2020 2020 2020 5d2c 0a20              ],. 
+000581f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00058200: 2020 2020 2022 6e65 7874 5061 6765 4375       "nextPageCu
+00058210: 7273 6f72 223a 2022 220a 2020 2020 2020  rsor": "".      
+00058220: 2020 2320 2020 2020 2020 2020 7d2c 0a20    #         },. 
+00058230: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00058240: 2022 7265 7445 7874 496e 666f 223a 207b   "retExtInfo": {
+00058250: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
+00058260: 2020 2020 2022 7469 6d65 223a 2031 3637       "time": 167
+00058270: 3230 3533 3534 3835 3739 0a20 2020 2020  2053548579.     
+00058280: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
+00058290: 2020 2023 0a20 2020 2020 2020 2072 6573     #.        res
+000582a0: 756c 7420 3d20 7365 6c66 2e73 6166 655f  ult = self.safe_
+000582b0: 7661 6c75 6528 7265 7370 6f6e 7365 2c20  value(response, 
+000582c0: 2772 6573 756c 7427 2c20 7b7d 290a 2020  'result', {}).  
+000582d0: 2020 2020 2020 6964 203d 2073 656c 662e        id = self.
+000582e0: 7361 6665 5f73 7472 696e 6728 7265 7375  safe_string(resu
+000582f0: 6c74 2c20 2773 796d 626f 6c27 290a 2020  lt, 'symbol').  
+00058300: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
+00058310: 656c 662e 7361 6665 5f6d 6172 6b65 7428  elf.safe_market(
+00058320: 6964 2c20 6d61 726b 6574 2c20 4e6f 6e65  id, market, None
+00058330: 2c20 2763 6f6e 7472 6163 7427 290a 2020  , 'contract').  
+00058340: 2020 2020 2020 6461 7461 203d 2073 656c        data = sel
+00058350: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
+00058360: 756c 742c 2027 6c69 7374 272c 205b 5d29  ult, 'list', [])
+00058370: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00058380: 7365 6c66 2e70 6172 7365 5f6f 7065 6e5f  self.parse_open_
+00058390: 696e 7465 7265 7374 7328 6461 7461 2c20  interests(data, 
+000583a0: 6d61 726b 6574 2c20 7369 6e63 652c 206c  market, since, l
+000583b0: 696d 6974 290a 0a20 2020 2061 7379 6e63  imit)..    async
+000583c0: 2064 6566 2066 6574 6368 5f6f 7065 6e5f   def fetch_open_
+000583d0: 696e 7465 7265 7374 2873 656c 662c 2073  interest(self, s
+000583e0: 796d 626f 6c3a 2073 7472 2c20 7061 7261  ymbol: str, para
+000583f0: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
+00058400: 2222 220a 2020 2020 2020 2020 5265 7472  """.        Retr
+00058410: 6965 7665 7320 7468 6520 6f70 656e 2069  ieves the open i
+00058420: 6e74 6572 6573 7420 6f66 2061 2064 6572  nterest of a der
+00058430: 6976 6174 6976 6520 7472 6164 696e 6720  ivative trading 
+00058440: 7061 6972 0a20 2020 2020 2020 2073 6565  pair.        see
+00058450: 2068 7474 7073 3a2f 2f62 7962 6974 2d65   https://bybit-e
+00058460: 7863 6861 6e67 652e 6769 7468 7562 2e69  xchange.github.i
+00058470: 6f2f 646f 6373 2f76 352f 6d61 726b 6574  o/docs/v5/market
+00058480: 2f6f 7065 6e2d 696e 7465 7265 7374 0a20  /open-interest. 
+00058490: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
+000584a0: 7220 7379 6d62 6f6c 3a20 556e 6966 6965  r symbol: Unifie
+000584b0: 6420 4343 5854 206d 6172 6b65 7420 7379  d CCXT market sy
+000584c0: 6d62 6f6c 0a20 2020 2020 2020 203a 7061  mbol.        :pa
+000584d0: 7261 6d20 6469 6374 2070 6172 616d 733a  ram dict params:
+000584e0: 2065 7863 6861 6e67 6520 7370 6563 6966   exchange specif
+000584f0: 6963 2070 6172 616d 6574 6572 730a 2020  ic parameters.  
+00058500: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+00058510: 7c4e 6f6e 6520 7061 7261 6d73 5b27 696e  |None params['in
+00058520: 7465 7276 616c 275d 3a20 356d 2c20 3135  terval']: 5m, 15
+00058530: 6d2c 2033 306d 2c20 3168 2c20 3468 2c20  m, 30m, 1h, 4h, 
+00058540: 3164 0a20 2020 2020 2020 203a 7061 7261  1d.        :para
+00058550: 6d20 7374 727c 4e6f 6e65 2070 6172 616d  m str|None param
+00058560: 735b 2763 6174 6567 6f72 7927 5d3a 2022  s['category']: "
+00058570: 6c69 6e65 6172 2220 6f72 2022 696e 7665  linear" or "inve
+00058580: 7273 6522 0a20 2020 2020 2020 203a 7265  rse".        :re
+00058590: 7475 726e 7320 6469 6374 7d20 616e 206f  turns dict} an o
+000585a0: 7065 6e20 696e 7465 7265 7374 2073 7472  pen interest str
+000585b0: 7563 7475 7265 7b40 6c69 6e6b 2068 7474  ucture{@link htt
+000585c0: 7073 3a2f 2f64 6f63 732e 6363 7874 2e63  ps://docs.ccxt.c
+000585d0: 6f6d 2f23 2f3f 6964 3d69 6e74 6572 6573  om/#/?id=interes
+000585e0: 742d 6869 7374 6f72 792d 7374 7275 6374  t-history-struct
+000585f0: 7572 653a 0a20 2020 2020 2020 2022 2222  ure:.        """
+00058600: 0a20 2020 2020 2020 2061 7761 6974 2073  .        await s
+00058610: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
+00058620: 2829 0a20 2020 2020 2020 206d 6172 6b65  ().        marke
+00058630: 7420 3d20 7365 6c66 2e6d 6172 6b65 7428  t = self.market(
+00058640: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
+00058650: 6966 206e 6f74 206d 6172 6b65 745b 2763  if not market['c
+00058660: 6f6e 7472 6163 7427 5d3a 0a20 2020 2020  ontract']:.     
+00058670: 2020 2020 2020 2072 6169 7365 2042 6164         raise Bad
+00058680: 5265 7175 6573 7428 7365 6c66 2e69 6420  Request(self.id 
+00058690: 2b20 2720 6665 7463 684f 7065 6e49 6e74  + ' fetchOpenInt
+000586a0: 6572 6573 7428 2920 7375 7070 6f72 7473  erest() supports
+000586b0: 2063 6f6e 7472 6163 7420 6d61 726b 6574   contract market
+000586c0: 7320 6f6e 6c79 2729 0a20 2020 2020 2020  s only').       
+000586d0: 2074 696d 6566 7261 6d65 203d 2073 656c   timeframe = sel
+000586e0: 662e 7361 6665 5f73 7472 696e 6728 7061  f.safe_string(pa
+000586f0: 7261 6d73 2c20 2769 6e74 6572 7661 6c27  rams, 'interval'
+00058700: 2c20 2731 6827 290a 2020 2020 2020 2020  , '1h').        
+00058710: 696e 7465 7276 616c 7320 3d20 7365 6c66  intervals = self
+00058720: 2e73 6166 655f 7661 6c75 6528 7365 6c66  .safe_value(self
+00058730: 2e6f 7074 696f 6e73 2c20 2769 6e74 6572  .options, 'inter
+00058740: 7661 6c73 2729 0a20 2020 2020 2020 2069  vals').        i
+00058750: 6e74 6572 7661 6c20 3d20 7365 6c66 2e73  nterval = self.s
+00058760: 6166 655f 7374 7269 6e67 2869 6e74 6572  afe_string(inter
+00058770: 7661 6c73 2c20 7469 6d65 6672 616d 6529  vals, timeframe)
+00058780: 2020 2320 356d 696e 2c31 356d 696e 2c33    # 5min,15min,3
+00058790: 306d 696e 2c31 682c 3468 2c31 640a 2020  0min,1h,4h,1d.  
+000587a0: 2020 2020 2020 6966 2069 6e74 6572 7661        if interva
+000587b0: 6c20 6973 204e 6f6e 653a 0a20 2020 2020  l is None:.     
+000587c0: 2020 2020 2020 2072 6169 7365 2042 6164         raise Bad
+000587d0: 5265 7175 6573 7428 7365 6c66 2e69 6420  Request(self.id 
+000587e0: 2b20 2720 6665 7463 684f 7065 6e49 6e74  + ' fetchOpenInt
+000587f0: 6572 6573 7428 2920 6361 6e6e 6f74 2075  erest() cannot u
+00058800: 7365 2074 6865 2027 202b 2074 696d 6566  se the ' + timef
+00058810: 7261 6d65 202b 2027 2074 696d 6566 7261  rame + ' timefra
+00058820: 6d65 2729 0a20 2020 2020 2020 2073 7562  me').        sub
+00058830: 5479 7065 203d 2027 6c69 6e65 6172 2720  Type = 'linear' 
+00058840: 6966 206d 6172 6b65 745b 276c 696e 6561  if market['linea
+00058850: 7227 5d20 656c 7365 2027 696e 7665 7273  r'] else 'invers
+00058860: 6527 0a20 2020 2020 2020 2063 6174 6567  e'.        categ
+00058870: 6f72 7920 3d20 7365 6c66 2e73 6166 655f  ory = self.safe_
+00058880: 7374 7269 6e67 2870 6172 616d 732c 2027  string(params, '
+00058890: 6361 7465 676f 7279 272c 2073 7562 5479  category', subTy
+000588a0: 7065 290a 2020 2020 2020 2020 7265 7175  pe).        requ
+000588b0: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
+000588c0: 2020 2020 2773 796d 626f 6c27 3a20 6d61      'symbol': ma
+000588d0: 726b 6574 5b27 6964 275d 2c0a 2020 2020  rket['id'],.    
+000588e0: 2020 2020 2020 2020 2769 6e74 6572 7661          'interva
+000588f0: 6c54 696d 6527 3a20 696e 7465 7276 616c  lTime': interval
+00058900: 2c0a 2020 2020 2020 2020 2020 2020 2763  ,.            'c
+00058910: 6174 6567 6f72 7927 3a20 6361 7465 676f  ategory': catego
+00058920: 7279 2c0a 2020 2020 2020 2020 7d0a 2020  ry,.        }.  
+00058930: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+00058940: 2061 7761 6974 2073 656c 662e 7075 626c   await self.publ
+00058950: 6963 4765 7456 354d 6172 6b65 744f 7065  icGetV5MarketOpe
+00058960: 6e49 6e74 6572 6573 7428 7365 6c66 2e65  nInterest(self.e
+00058970: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
+00058980: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
+00058990: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+000589a0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+000589b0: 2020 2020 2272 6574 436f 6465 223a 2030      "retCode": 0
+000589c0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000589d0: 2020 2020 2272 6574 4d73 6722 3a20 224f      "retMsg": "O
+000589e0: 4b22 2c0a 2020 2020 2020 2020 2320 2020  K",.        #   
+000589f0: 2020 2020 2020 2272 6573 756c 7422 3a20        "result": 
+00058a00: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+00058a10: 2020 2020 2020 2020 2273 796d 626f 6c22          "symbol"
+00058a20: 3a20 2242 5443 5553 4422 2c0a 2020 2020  : "BTCUSD",.    
+00058a30: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00058a40: 2020 2263 6174 6567 6f72 7922 3a20 2269    "category": "i
+00058a50: 6e76 6572 7365 222c 0a20 2020 2020 2020  nverse",.       
+00058a60: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00058a70: 6c69 7374 223a 205b 0a20 2020 2020 2020  list": [.       
+00058a80: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00058a90: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
+00058aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00058ab0: 2020 2022 6f70 656e 496e 7465 7265 7374     "openInterest
+00058ac0: 223a 2022 3436 3131 3334 3338 342e 3030  ": "461134384.00
+00058ad0: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
+00058ae0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00058af0: 2020 2020 2020 2022 7469 6d65 7374 616d         "timestam
+00058b00: 7022 3a20 2231 3636 3935 3731 3430 3030  p": "16695714000
+00058b10: 3030 220a 2020 2020 2020 2020 2320 2020  00".        #   
+00058b20: 2020 2020 2020 2020 2020 2020 2020 7d2c                },
+00058b30: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00058b40: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+00058b50: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00058b60: 2020 2020 2020 2020 2020 2022 6f70 656e             "open
+00058b70: 496e 7465 7265 7374 223a 2022 3436 3131  Interest": "4611
+00058b80: 3334 3239 322e 3030 3030 3030 3030 222c  34292.00000000",
+00058b90: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00058ba0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00058bb0: 7469 6d65 7374 616d 7022 3a20 2231 3636  timestamp": "166
+00058bc0: 3935 3731 3130 3030 3030 220a 2020 2020  9571100000".    
+00058bd0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00058be0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00058bf0: 2320 2020 2020 2020 2020 2020 2020 5d2c  #             ],
+00058c00: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00058c10: 2020 2020 2020 2022 6e65 7874 5061 6765         "nextPage
+00058c20: 4375 7273 6f72 223a 2022 220a 2020 2020  Cursor": "".    
+00058c30: 2020 2020 2320 2020 2020 2020 2020 7d2c      #         },
+00058c40: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00058c50: 2020 2022 7265 7445 7874 496e 666f 223a     "retExtInfo":
+00058c60: 207b 7d2c 0a20 2020 2020 2020 2023 2020   {},.        #  
+00058c70: 2020 2020 2020 2022 7469 6d65 223a 2031         "time": 1
+00058c80: 3637 3230 3533 3534 3835 3739 0a20 2020  672053548579.   
+00058c90: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
+00058ca0: 2020 2020 2023 0a20 2020 2020 2020 2072       #.        r
+00058cb0: 6573 756c 7420 3d20 7365 6c66 2e73 6166  esult = self.saf
+00058cc0: 655f 7661 6c75 6528 7265 7370 6f6e 7365  e_value(response
+00058cd0: 2c20 2772 6573 756c 7427 2c20 7b7d 290a  , 'result', {}).
+00058ce0: 2020 2020 2020 2020 6964 203d 2073 656c          id = sel
+00058cf0: 662e 7361 6665 5f73 7472 696e 6728 7265  f.safe_string(re
+00058d00: 7375 6c74 2c20 2773 796d 626f 6c27 290a  sult, 'symbol').
+00058d10: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
+00058d20: 2073 656c 662e 7361 6665 5f6d 6172 6b65   self.safe_marke
+00058d30: 7428 6964 2c20 6d61 726b 6574 2c20 4e6f  t(id, market, No
+00058d40: 6e65 2c20 2763 6f6e 7472 6163 7427 290a  ne, 'contract').
+00058d50: 2020 2020 2020 2020 6461 7461 203d 2073          data = s
+00058d60: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
+00058d70: 6573 756c 742c 2027 6c69 7374 272c 205b  esult, 'list', [
+00058d80: 5d29 0a20 2020 2020 2020 2072 6574 7572  ]).        retur
+00058d90: 6e20 7365 6c66 2e70 6172 7365 5f6f 7065  n self.parse_ope
+00058da0: 6e5f 696e 7465 7265 7374 2864 6174 615b  n_interest(data[
+00058db0: 305d 2c20 6d61 726b 6574 290a 0a20 2020  0], market)..   
+00058dc0: 2061 7379 6e63 2064 6566 2066 6574 6368   async def fetch
+00058dd0: 5f6f 7065 6e5f 696e 7465 7265 7374 5f68  _open_interest_h
+00058de0: 6973 746f 7279 2873 656c 662c 2073 796d  istory(self, sym
+00058df0: 626f 6c3a 2073 7472 2c20 7469 6d65 6672  bol: str, timefr
+00058e00: 616d 653d 2731 6827 2c20 7369 6e63 653a  ame='1h', since:
+00058e10: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
+00058e20: 204e 6f6e 652c 206c 696d 6974 3a20 4f70   None, limit: Op
+00058e30: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
+00058e40: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
+00058e50: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00058e60: 2020 2020 4765 7473 2074 6865 2074 6f74      Gets the tot
+00058e70: 616c 2061 6d6f 756e 7420 6f66 2075 6e73  al amount of uns
+00058e80: 6574 746c 6564 2063 6f6e 7472 6163 7473  ettled contracts
+00058e90: 2e20 496e 206f 7468 6572 2077 6f72 6473  . In other words
+00058ea0: 2c20 7468 6520 746f 7461 6c20 6e75 6d62  , the total numb
+00058eb0: 6572 206f 6620 636f 6e74 7261 6374 7320  er of contracts 
+00058ec0: 6865 6c64 2069 6e20 6f70 656e 2070 6f73  held in open pos
+00058ed0: 6974 696f 6e73 0a20 2020 2020 2020 2073  itions.        s
+00058ee0: 6565 2068 7474 7073 3a2f 2f62 7962 6974  ee https://bybit
+00058ef0: 2d65 7863 6861 6e67 652e 6769 7468 7562  -exchange.github
+00058f00: 2e69 6f2f 646f 6373 2f76 352f 6d61 726b  .io/docs/v5/mark
+00058f10: 6574 2f6f 7065 6e2d 696e 7465 7265 7374  et/open-interest
+00058f20: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00058f30: 7374 7220 7379 6d62 6f6c 3a20 556e 6966  str symbol: Unif
+00058f40: 6965 6420 6d61 726b 6574 2073 796d 626f  ied market symbo
+00058f50: 6c0a 2020 2020 2020 2020 3a70 6172 616d  l.        :param
+00058f60: 2073 7472 2074 696d 6566 7261 6d65 3a20   str timeframe: 
+00058f70: 2235 6d22 2c20 3135 6d2c 2033 306d 2c20  "5m", 15m, 30m, 
+00058f80: 3168 2c20 3468 2c20 3164 0a20 2020 2020  1h, 4h, 1d.     
+00058f90: 2020 203a 7061 7261 6d20 696e 7420 7369     :param int si
+00058fa0: 6e63 653a 204e 6f74 2075 7365 6420 6279  nce: Not used by
+00058fb0: 2042 7962 6974 0a20 2020 2020 2020 203a   Bybit.        :
+00058fc0: 7061 7261 6d20 696e 7420 6c69 6d69 743a  param int limit:
+00058fd0: 2054 6865 206e 756d 6265 7220 6f66 206f   The number of o
+00058fe0: 7065 6e20 696e 7465 7265 7374 2073 7472  pen interest str
+00058ff0: 7563 7475 7265 7320 746f 2072 6574 7572  uctures to retur
+00059000: 6e2e 204d 6178 2032 3030 2c20 6465 6661  n. Max 200, defa
+00059010: 756c 7420 3530 0a20 2020 2020 2020 203a  ult 50.        :
+00059020: 7061 7261 6d20 6469 6374 2070 6172 616d  param dict param
+00059030: 733a 2045 7863 6861 6e67 6520 7370 6563  s: Exchange spec
+00059040: 6966 6963 2070 6172 616d 6574 6572 730a  ific parameters.
+00059050: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
+00059060: 3a20 416e 2061 7272 6179 206f 6620 6f70  : An array of op
+00059070: 656e 2069 6e74 6572 6573 7420 7374 7275  en interest stru
+00059080: 6374 7572 6573 0a20 2020 2020 2020 2022  ctures.        "
+00059090: 2222 0a20 2020 2020 2020 2069 6620 7469  "".        if ti
+000590a0: 6d65 6672 616d 6520 3d3d 2027 316d 273a  meframe == '1m':
+000590b0: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+000590c0: 7365 2042 6164 5265 7175 6573 7428 7365  se BadRequest(se
+000590d0: 6c66 2e69 6420 2b20 2766 6574 6368 4f70  lf.id + 'fetchOp
+000590e0: 656e 496e 7465 7265 7374 4869 7374 6f72  enInterestHistor
+000590f0: 7920 6361 6e6e 6f74 2075 7365 2074 6865  y cannot use the
+00059100: 2031 6d20 7469 6d65 6672 616d 6527 290a   1m timeframe').
+00059110: 2020 2020 2020 2020 6177 6169 7420 7365          await se
+00059120: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
+00059130: 290a 2020 2020 2020 2020 6d61 726b 6574  ).        market
+00059140: 203d 2073 656c 662e 6d61 726b 6574 2873   = self.market(s
+00059150: 796d 626f 6c29 0a20 2020 2020 2020 2069  ymbol).        i
+00059160: 6620 6d61 726b 6574 5b27 7370 6f74 275d  f market['spot']
+00059170: 206f 7220 6d61 726b 6574 5b27 6f70 7469   or market['opti
+00059180: 6f6e 275d 3a0a 2020 2020 2020 2020 2020  on']:.          
+00059190: 2020 7261 6973 6520 4261 6452 6571 7565    raise BadReque
+000591a0: 7374 2873 656c 662e 6964 202b 2027 2066  st(self.id + ' f
+000591b0: 6574 6368 4f70 656e 496e 7465 7265 7374  etchOpenInterest
+000591c0: 4869 7374 6f72 7928 2920 7379 6d62 6f6c  History() symbol
+000591d0: 2064 6f65 7320 6e6f 7420 7375 7070 6f72   does not suppor
+000591e0: 7420 6d61 726b 6574 2027 202b 2073 796d  t market ' + sym
+000591f0: 626f 6c29 0a20 2020 2020 2020 2072 6571  bol).        req
+00059200: 7565 7374 203d 207b 0a20 2020 2020 2020  uest = {.       
+00059210: 2020 2020 2027 7379 6d62 6f6c 273a 206d       'symbol': m
+00059220: 6172 6b65 745b 2769 6427 5d2c 0a20 2020  arket['id'],.   
+00059230: 2020 2020 207d 0a20 2020 2020 2020 2069       }.        i
+00059240: 6620 6c69 6d69 7420 6973 206e 6f74 204e  f limit is not N
+00059250: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00059260: 2072 6571 7565 7374 5b27 6c69 6d69 7427   request['limit'
+00059270: 5d20 3d20 6c69 6d69 740a 2020 2020 2020  ] = limit.      
+00059280: 2020 7265 7475 726e 2061 7761 6974 2073    return await s
+00059290: 656c 662e 6665 7463 685f 6465 7269 7661  elf.fetch_deriva
+000592a0: 7469 7665 735f 6f70 656e 5f69 6e74 6572  tives_open_inter
+000592b0: 6573 745f 6869 7374 6f72 7928 7379 6d62  est_history(symb
+000592c0: 6f6c 2c20 7469 6d65 6672 616d 652c 2073  ol, timeframe, s
+000592d0: 696e 6365 2c20 6c69 6d69 742c 2070 6172  ince, limit, par
+000592e0: 616d 7329 0a0a 2020 2020 6465 6620 7061  ams)..    def pa
+000592f0: 7273 655f 6f70 656e 5f69 6e74 6572 6573  rse_open_interes
+00059300: 7428 7365 6c66 2c20 696e 7465 7265 7374  t(self, interest
+00059310: 2c20 6d61 726b 6574 3d4e 6f6e 6529 3a0a  , market=None):.
+00059320: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+00059330: 2020 2320 2020 207b 0a20 2020 2020 2020    #    {.       
+00059340: 2023 2020 2020 2020 2020 226f 7065 6e49   #        "openI
+00059350: 6e74 6572 6573 7422 3a20 3634 3735 372e  nterest": 64757.
+00059360: 3632 3430 3030 3030 2c0a 2020 2020 2020  62400000,.      
+00059370: 2020 2320 2020 2020 2020 2022 7469 6d65    #        "time
+00059380: 7374 616d 7022 3a20 3136 3635 3738 3438  stamp": 16657848
+00059390: 3030 3030 302c 0a20 2020 2020 2020 2023  00000,.        #
+000593a0: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
+000593b0: 2020 2020 2020 2020 7469 6d65 7374 616d          timestam
+000593c0: 7020 3d20 7365 6c66 2e73 6166 655f 696e  p = self.safe_in
+000593d0: 7465 6765 7228 696e 7465 7265 7374 2c20  teger(interest, 
+000593e0: 2774 696d 6573 7461 6d70 2729 0a20 2020  'timestamp').   
+000593f0: 2020 2020 2076 616c 7565 203d 2073 656c       value = sel
+00059400: 662e 7361 6665 5f6e 756d 6265 725f 3228  f.safe_number_2(
+00059410: 696e 7465 7265 7374 2c20 276f 7065 6e5f  interest, 'open_
+00059420: 696e 7465 7265 7374 272c 2027 6f70 656e  interest', 'open
+00059430: 496e 7465 7265 7374 2729 0a20 2020 2020  Interest').     
+00059440: 2020 2072 6574 7572 6e20 7b0a 2020 2020     return {.    
+00059450: 2020 2020 2020 2020 2773 796d 626f 6c27          'symbol'
+00059460: 3a20 6d61 726b 6574 5b27 7379 6d62 6f6c  : market['symbol
+00059470: 275d 2c0a 2020 2020 2020 2020 2020 2020  '],.            
+00059480: 276f 7065 6e49 6e74 6572 6573 7441 6d6f  'openInterestAmo
+00059490: 756e 7427 3a20 4e6f 6e65 2c0a 2020 2020  unt': None,.    
+000594a0: 2020 2020 2020 2020 276f 7065 6e49 6e74          'openInt
+000594b0: 6572 6573 7456 616c 7565 273a 2076 616c  erestValue': val
+000594c0: 7565 2c0a 2020 2020 2020 2020 2020 2020  ue,.            
+000594d0: 2774 696d 6573 7461 6d70 273a 2074 696d  'timestamp': tim
+000594e0: 6573 7461 6d70 2c0a 2020 2020 2020 2020  estamp,.        
+000594f0: 2020 2020 2764 6174 6574 696d 6527 3a20      'datetime': 
+00059500: 7365 6c66 2e69 736f 3836 3031 2874 696d  self.iso8601(tim
+00059510: 6573 7461 6d70 292c 0a20 2020 2020 2020  estamp),.       
+00059520: 2020 2020 2027 696e 666f 273a 2069 6e74       'info': int
+00059530: 6572 6573 742c 0a20 2020 2020 2020 207d  erest,.        }
+00059540: 0a0a 2020 2020 6173 796e 6320 6465 6620  ..    async def 
+00059550: 6665 7463 685f 626f 7272 6f77 5f72 6174  fetch_borrow_rat
+00059560: 6528 7365 6c66 2c20 636f 6465 3a20 7374  e(self, code: st
+00059570: 722c 2070 6172 616d 733d 7b7d 293a 0a20  r, params={}):. 
+00059580: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00059590: 2020 2066 6574 6368 2074 6865 2072 6174     fetch the rat
+000595a0: 6520 6f66 2069 6e74 6572 6573 7420 746f  e of interest to
+000595b0: 2062 6f72 726f 7720 6120 6375 7272 656e   borrow a curren
+000595c0: 6379 2066 6f72 206d 6172 6769 6e20 7472  cy for margin tr
+000595d0: 6164 696e 670a 2020 2020 2020 2020 7365  ading.        se
+000595e0: 6520 6874 7470 733a 2f2f 6279 6269 742d  e https://bybit-
+000595f0: 6578 6368 616e 6765 2e67 6974 6875 622e  exchange.github.
+00059600: 696f 2f64 6f63 732f 7370 6f74 2f76 332f  io/docs/spot/v3/
+00059610: 2374 2d71 7565 7279 696e 7465 7265 7374  #t-queryinterest
+00059620: 7175 6f74 610a 2020 2020 2020 2020 3a70  quota.        :p
+00059630: 6172 616d 2073 7472 2063 6f64 653a 2075  aram str code: u
+00059640: 6e69 6669 6564 2063 7572 7265 6e63 7920  nified currency 
+00059650: 636f 6465 0a20 2020 2020 2020 203a 7061  code.        :pa
+00059660: 7261 6d20 6469 6374 2070 6172 616d 733a  ram dict params:
+00059670: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
+00059680: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
+00059690: 6520 6279 6269 7420 6170 6920 656e 6470  e bybit api endp
+000596a0: 6f69 6e74 0a20 2020 2020 2020 203a 7265  oint.        :re
+000596b0: 7475 726e 7320 6469 6374 3a20 6120 6062  turns dict: a `b
+000596c0: 6f72 726f 7720 7261 7465 2073 7472 7563  orrow rate struc
+000596d0: 7475 7265 203c 6874 7470 733a 2f2f 646f  ture <https://do
+000596e0: 6373 2e63 6378 742e 636f 6d2f 232f 3f69  cs.ccxt.com/#/?i
+000596f0: 643d 626f 7272 6f77 2d72 6174 652d 7374  d=borrow-rate-st
+00059700: 7275 6374 7572 653e 600a 2020 2020 2020  ructure>`.      
+00059710: 2020 2222 220a 2020 2020 2020 2020 6177    """.        aw
+00059720: 6169 7420 7365 6c66 2e6c 6f61 645f 6d61  ait self.load_ma
+00059730: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
+00059740: 6375 7272 656e 6379 203d 2073 656c 662e  currency = self.
+00059750: 6375 7272 656e 6379 2863 6f64 6529 0a20  currency(code). 
+00059760: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+00059770: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
+00059780: 636f 696e 273a 2063 7572 7265 6e63 795b  coin': currency[
+00059790: 2769 6427 5d2c 0a20 2020 2020 2020 207d  'id'],.        }
+000597a0: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
+000597b0: 6520 3d20 6177 6169 7420 7365 6c66 2e70  e = await self.p
+000597c0: 7269 7661 7465 4765 7453 706f 7456 3350  rivateGetSpotV3P
+000597d0: 7269 7661 7465 4372 6f73 734d 6172 6769  rivateCrossMargi
+000597e0: 6e4c 6f61 6e49 6e66 6f28 7365 6c66 2e65  nLoanInfo(self.e
+000597f0: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
+00059800: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
+00059810: 230a 2020 2020 2020 2020 2320 2020 207b  #.        #    {
+00059820: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00059830: 2020 2022 7265 7443 6f64 6522 3a20 2230     "retCode": "0
+00059840: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00059850: 2020 2020 2022 7265 744d 7367 223a 2022       "retMsg": "
+00059860: 7375 6363 6573 7322 2c0a 2020 2020 2020  success",.      
+00059870: 2020 2320 2020 2020 2020 2020 2272 6573    #         "res
+00059880: 756c 7422 3a20 7b0a 2020 2020 2020 2020  ult": {.        
+00059890: 2320 2020 2020 2020 2020 2020 2020 2263  #             "c
+000598a0: 6f69 6e22 3a20 2255 5344 5422 2c0a 2020  oin": "USDT",.  
+000598b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000598c0: 2020 2020 2269 6e74 6572 6573 7452 6174      "interestRat
+000598d0: 6522 3a20 2230 2e30 3030 3130 3730 3030  e": "0.000107000
+000598e0: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
+000598f0: 2020 2020 2020 2020 2020 2020 226c 6f61              "loa
+00059900: 6e41 626c 6541 6d6f 756e 7422 3a20 2222  nAbleAmount": ""
+00059910: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00059920: 2020 2020 2020 2020 226d 6178 4c6f 616e          "maxLoan
+00059930: 416d 6f75 6e74 223a 2022 3739 3939 392e  Amount": "79999.
+00059940: 3939 3922 0a20 2020 2020 2020 2023 2020  999".        #  
+00059950: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
+00059960: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
+00059970: 4578 7449 6e66 6f22 3a20 6e75 6c6c 2c0a  ExtInfo": null,.
+00059980: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00059990: 2020 2274 696d 6522 3a20 2231 3636 3637    "time": "16667
+000599a0: 3334 3439 3037 3738 220a 2020 2020 2020  34490778".      
+000599b0: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
+000599c0: 2020 230a 2020 2020 2020 2020 6461 7461    #.        data
+000599d0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+000599e0: 7565 2872 6573 706f 6e73 652c 2027 7265  ue(response, 're
+000599f0: 7375 6c74 272c 207b 7d29 0a20 2020 2020  sult', {}).     
+00059a00: 2020 2072 6574 7572 6e20 7365 6c66 2e70     return self.p
+00059a10: 6172 7365 5f62 6f72 726f 775f 7261 7465  arse_borrow_rate
+00059a20: 2864 6174 612c 2063 7572 7265 6e63 7929  (data, currency)
+00059a30: 0a0a 2020 2020 6465 6620 7061 7273 655f  ..    def parse_
+00059a40: 626f 7272 6f77 5f72 6174 6528 7365 6c66  borrow_rate(self
+00059a50: 2c20 696e 666f 2c20 6375 7272 656e 6379  , info, currency
+00059a60: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
+00059a70: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+00059a80: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+00059a90: 2020 2020 2263 6f69 6e22 3a20 2255 5344      "coin": "USD
+00059aa0: 5422 2c0a 2020 2020 2020 2020 2320 2020  T",.        #   
+00059ab0: 2020 2020 2020 2269 6e74 6572 6573 7452        "interestR
+00059ac0: 6174 6522 3a20 2230 2e30 3030 3130 3730  ate": "0.0001070
+00059ad0: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
+00059ae0: 2320 2020 2020 2020 2020 226c 6f61 6e41  #         "loanA
+00059af0: 626c 6541 6d6f 756e 7422 3a20 2222 2c0a  bleAmount": "",.
+00059b00: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00059b10: 2020 226d 6178 4c6f 616e 416d 6f75 6e74    "maxLoanAmount
+00059b20: 223a 2022 3739 3939 392e 3939 3922 0a20  ": "79999.999". 
+00059b30: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+00059b40: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+00059b50: 2074 696d 6573 7461 6d70 203d 2073 656c   timestamp = sel
+00059b60: 662e 6d69 6c6c 6973 6563 6f6e 6473 2829  f.milliseconds()
+00059b70: 0a20 2020 2020 2020 2063 7572 7265 6e63  .        currenc
+00059b80: 7949 6420 3d20 7365 6c66 2e73 6166 655f  yId = self.safe_
+00059b90: 7374 7269 6e67 2869 6e66 6f2c 2027 636f  string(info, 'co
+00059ba0: 696e 2729 0a20 2020 2020 2020 2072 6574  in').        ret
+00059bb0: 7572 6e20 7b0a 2020 2020 2020 2020 2020  urn {.          
+00059bc0: 2020 2763 7572 7265 6e63 7927 3a20 7365    'currency': se
+00059bd0: 6c66 2e73 6166 655f 6375 7272 656e 6379  lf.safe_currency
+00059be0: 5f63 6f64 6528 6375 7272 656e 6379 4964  _code(currencyId
+00059bf0: 2c20 6375 7272 656e 6379 292c 0a20 2020  , currency),.   
+00059c00: 2020 2020 2020 2020 2027 7261 7465 273a           'rate':
+00059c10: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
+00059c20: 7228 696e 666f 2c20 2769 6e74 6572 6573  r(info, 'interes
+00059c30: 7452 6174 6527 292c 0a20 2020 2020 2020  tRate'),.       
+00059c40: 2020 2020 2027 7065 7269 6f64 273a 2038       'period': 8
+00059c50: 3634 3030 3030 302c 2020 2320 4461 696c  6400000,  # Dail
+00059c60: 790a 2020 2020 2020 2020 2020 2020 2774  y.            't
+00059c70: 696d 6573 7461 6d70 273a 2074 696d 6573  imestamp': times
+00059c80: 7461 6d70 2c0a 2020 2020 2020 2020 2020  tamp,.          
+00059c90: 2020 2764 6174 6574 696d 6527 3a20 7365    'datetime': se
+00059ca0: 6c66 2e69 736f 3836 3031 2874 696d 6573  lf.iso8601(times
+00059cb0: 7461 6d70 292c 0a20 2020 2020 2020 2020  tamp),.         
+00059cc0: 2020 2027 696e 666f 273a 2069 6e66 6f2c     'info': info,
+00059cd0: 0a20 2020 2020 2020 207d 0a0a 2020 2020  .        }..    
+00059ce0: 6173 796e 6320 6465 6620 6665 7463 685f  async def fetch_
+00059cf0: 626f 7272 6f77 5f69 6e74 6572 6573 7428  borrow_interest(
+00059d00: 7365 6c66 2c20 636f 6465 3a20 4f70 7469  self, code: Opti
+00059d10: 6f6e 616c 5b73 7472 5d20 3d20 4e6f 6e65  onal[str] = None
+00059d20: 2c20 7379 6d62 6f6c 3a20 4f70 7469 6f6e  , symbol: Option
+00059d30: 616c 5b73 7472 5d20 3d20 4e6f 6e65 2c20  al[str] = None, 
+00059d40: 7369 6e63 653a 204f 7074 696f 6e61 6c5b  since: Optional[
+00059d50: 696e 745d 203d 204e 6f6e 652c 206c 696d  int] = None, lim
+00059d60: 6974 3a20 4f70 7469 6f6e 616c 5b69 6e74  it: Optional[int
+00059d70: 5d20 3d20 4e6f 6e65 2c20 7061 7261 6d73  ] = None, params
+00059d80: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
+00059d90: 220a 2020 2020 2020 2020 6665 7463 6820  ".        fetch 
+00059da0: 7468 6520 696e 7465 7265 7374 206f 7765  the interest owe
+00059db0: 6420 6279 2074 6865 2075 7365 7220 666f  d by the user fo
+00059dc0: 7220 626f 7272 6f77 696e 6720 6375 7272  r borrowing curr
+00059dd0: 656e 6379 2066 6f72 206d 6172 6769 6e20  ency for margin 
+00059de0: 7472 6164 696e 670a 2020 2020 2020 2020  trading.        
+00059df0: 3a70 6172 616d 2073 7472 7c4e 6f6e 6520  :param str|None 
+00059e00: 636f 6465 3a20 756e 6966 6965 6420 6375  code: unified cu
+00059e10: 7272 656e 6379 2063 6f64 650a 2020 2020  rrency code.    
+00059e20: 2020 2020 3a70 6172 616d 2073 7472 7c4e      :param str|N
+00059e30: 6f6e 6520 7379 6d62 6f6c 3a20 756e 6966  one symbol: unif
+00059e40: 6965 6420 6d61 726b 6574 2073 796d 626f  ied market symbo
+00059e50: 6c20 7768 656e 2066 6574 6368 2069 6e74  l when fetch int
+00059e60: 6572 6573 7420 696e 2069 736f 6c61 7465  erest in isolate
+00059e70: 6420 6d61 726b 6574 730a 2020 2020 2020  d markets.      
+00059e80: 2020 3a70 6172 616d 206e 756d 6265 727c    :param number|
+00059e90: 4e6f 6e65 2073 696e 6365 3a20 7468 6520  None since: the 
+00059ea0: 6561 726c 6965 7374 2074 696d 6520 696e  earliest time in
+00059eb0: 206d 7320 746f 2066 6574 6368 2062 6f72   ms to fetch bor
+00059ec0: 7272 6f77 2069 6e74 6572 6573 7420 666f  rrow interest fo
+00059ed0: 720a 2020 2020 2020 2020 3a70 6172 616d  r.        :param
+00059ee0: 206e 756d 6265 727c 4e6f 6e65 206c 696d   number|None lim
+00059ef0: 6974 3a20 7468 6520 6d61 7869 6d75 6d20  it: the maximum 
+00059f00: 6e75 6d62 6572 206f 6620 7374 7275 6374  number of struct
+00059f10: 7572 6573 2074 6f20 7265 7472 6965 7665  ures to retrieve
+00059f20: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00059f30: 6469 6374 2070 6172 616d 733a 2065 7874  dict params: ext
+00059f40: 7261 2070 6172 616d 6574 6572 7320 7370  ra parameters sp
+00059f50: 6563 6966 6963 2074 6f20 7468 6520 6279  ecific to the by
+00059f60: 6269 7420 6170 6920 656e 6470 6f69 6e74  bit api endpoint
+00059f70: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
+00059f80: 7320 5b64 6963 745d 3a20 6120 6c69 7374  s [dict]: a list
+00059f90: 206f 6620 6062 6f72 726f 7720 696e 7465   of `borrow inte
+00059fa0: 7265 7374 2073 7472 7563 7475 7265 7320  rest structures 
+00059fb0: 3c68 7474 7073 3a2f 2f64 6f63 732e 6363  <https://docs.cc
+00059fc0: 7874 2e63 6f6d 2f23 2f3f 6964 3d62 6f72  xt.com/#/?id=bor
+00059fd0: 726f 772d 696e 7465 7265 7374 2d73 7472  row-interest-str
+00059fe0: 7563 7475 7265 3e60 0a20 2020 2020 2020  ucture>`.       
+00059ff0: 2022 2222 0a20 2020 2020 2020 2061 7761   """.        awa
+0005a000: 6974 2073 656c 662e 6c6f 6164 5f6d 6172  it self.load_mar
+0005a010: 6b65 7473 2829 0a20 2020 2020 2020 2072  kets().        r
+0005a020: 6571 7565 7374 203d 207b 7d0a 2020 2020  equest = {}.    
+0005a030: 2020 2020 7265 7370 6f6e 7365 203d 2061      response = a
+0005a040: 7761 6974 2073 656c 662e 7072 6976 6174  wait self.privat
+0005a050: 6547 6574 5370 6f74 5633 5072 6976 6174  eGetSpotV3Privat
+0005a060: 6543 726f 7373 4d61 7267 696e 4163 636f  eCrossMarginAcco
+0005a070: 756e 7428 7365 6c66 2e65 7874 656e 6428  unt(self.extend(
+0005a080: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
+0005a090: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
+0005a0a0: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
+0005a0b0: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
+0005a0c0: 6574 5f63 6f64 6522 3a20 302c 0a20 2020  et_code": 0,.   
+0005a0d0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0005a0e0: 7265 745f 6d73 6722 3a20 2222 2c0a 2020  ret_msg": "",.  
+0005a0f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0005a100: 2265 7874 5f63 6f64 6522 3a20 6e75 6c6c  "ext_code": null
+0005a110: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0005a120: 2020 2020 2265 7874 5f69 6e66 6f22 3a20      "ext_info": 
+0005a130: 6e75 6c6c 2c0a 2020 2020 2020 2020 2320  null,.        # 
+0005a140: 2020 2020 2020 2020 2272 6573 756c 7422          "result"
+0005a150: 3a20 7b0a 2020 2020 2020 2020 2320 2020  : {.        #   
+0005a160: 2020 2020 2020 2020 2020 2273 7461 7475            "statu
+0005a170: 7322 3a20 2231 222c 0a20 2020 2020 2020  s": "1",.       
+0005a180: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+0005a190: 7269 736b 5261 7465 223a 2022 3022 2c0a  riskRate": "0",.
+0005a1a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005a1b0: 2020 2020 2020 2261 6363 7442 616c 616e        "acctBalan
+0005a1c0: 6365 5375 6d22 3a20 2230 2e30 3030 3438  ceSum": "0.00048
+0005a1d0: 3632 3133 3831 3736 3830 3835 3722 2c0a  6213817680857",.
+0005a1e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005a1f0: 2020 2020 2020 2264 6562 7442 616c 616e        "debtBalan
+0005a200: 6365 5375 6d22 3a20 2230 222c 0a20 2020  ceSum": "0",.   
+0005a210: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0005a220: 2020 2022 6c6f 616e 4163 636f 756e 744c     "loanAccountL
+0005a230: 6973 7422 3a20 5b0a 2020 2020 2020 2020  ist": [.        
+0005a240: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0005a250: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+0005a260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005a270: 2020 2274 6f6b 656e 4964 223a 2022 4254    "tokenId": "BT
+0005a280: 4322 2c0a 2020 2020 2020 2020 2320 2020  C",.        #   
+0005a290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005a2a0: 2020 2274 6f74 616c 223a 2022 302e 3030    "total": "0.00
+0005a2b0: 3034 3836 3231 222c 0a20 2020 2020 2020  048621",.       
+0005a2c0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0005a2d0: 2020 2020 2020 2022 6c6f 636b 6564 223a         "locked":
+0005a2e0: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
+0005a2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005a300: 2020 2020 226c 6f61 6e22 3a20 2230 222c      "loan": "0",
+0005a310: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0005a320: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0005a330: 696e 7465 7265 7374 223a 2022 3022 2c0a  interest": "0",.
+0005a340: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005a350: 2020 2020 2020 2020 2020 2020 2020 2266                "f
+0005a360: 7265 6522 3a20 2230 2e30 3030 3438 3632  ree": "0.0004862
+0005a370: 3122 0a20 2020 2020 2020 2023 2020 2020  1".        #    
+0005a380: 2020 2020 2020 2020 2020 2020 207d 2c0a               },.
+0005a390: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005a3a0: 2020 2020 2020 2020 2020 2e2e 2e0a 2020            ....  
+0005a3b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0005a3c0: 2020 2020 5d0a 2020 2020 2020 2020 2320      ].        # 
+0005a3d0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+0005a3e0: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
+0005a3f0: 2020 230a 2020 2020 2020 2020 6461 7461    #.        data
+0005a400: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+0005a410: 7565 2872 6573 706f 6e73 652c 2027 7265  ue(response, 're
+0005a420: 7375 6c74 272c 207b 7d29 0a20 2020 2020  sult', {}).     
+0005a430: 2020 2072 6f77 7320 3d20 7365 6c66 2e73     rows = self.s
+0005a440: 6166 655f 7661 6c75 6528 6461 7461 2c20  afe_value(data, 
+0005a450: 276c 6f61 6e41 6363 6f75 6e74 4c69 7374  'loanAccountList
+0005a460: 272c 205b 5d29 0a20 2020 2020 2020 2069  ', []).        i
+0005a470: 6e74 6572 6573 7420 3d20 7365 6c66 2e70  nterest = self.p
+0005a480: 6172 7365 5f62 6f72 726f 775f 696e 7465  arse_borrow_inte
+0005a490: 7265 7374 7328 726f 7773 2c20 4e6f 6e65  rests(rows, None
+0005a4a0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+0005a4b0: 2073 656c 662e 6669 6c74 6572 5f62 795f   self.filter_by_
+0005a4c0: 6375 7272 656e 6379 5f73 696e 6365 5f6c  currency_since_l
+0005a4d0: 696d 6974 2869 6e74 6572 6573 742c 2063  imit(interest, c
+0005a4e0: 6f64 652c 2073 696e 6365 2c20 6c69 6d69  ode, since, limi
+0005a4f0: 7429 0a0a 2020 2020 6465 6620 7061 7273  t)..    def pars
+0005a500: 655f 626f 7272 6f77 5f69 6e74 6572 6573  e_borrow_interes
+0005a510: 7428 7365 6c66 2c20 696e 666f 2c20 6d61  t(self, info, ma
+0005a520: 726b 6574 3d4e 6f6e 6529 3a0a 2020 2020  rket=None):.    
+0005a530: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+0005a540: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+0005a550: 2020 2020 2020 2020 2274 6f6b 656e 4964          "tokenId
+0005a560: 223a 2022 4254 4322 2c0a 2020 2020 2020  ": "BTC",.      
+0005a570: 2020 2320 2020 2020 2020 2020 2274 6f74    #         "tot
+0005a580: 616c 223a 2022 302e 3030 3034 3836 3231  al": "0.00048621
+0005a590: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0005a5a0: 2020 2020 2022 6c6f 636b 6564 223a 2022       "locked": "
+0005a5b0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+0005a5c0: 2020 2020 2020 226c 6f61 6e22 3a20 2230        "loan": "0
+0005a5d0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0005a5e0: 2020 2020 2022 696e 7465 7265 7374 223a       "interest":
+0005a5f0: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
+0005a600: 2020 2020 2020 2020 2266 7265 6522 3a20          "free": 
+0005a610: 2230 2e30 3030 3438 3632 3122 0a20 2020  "0.00048621".   
+0005a620: 2020 2020 2023 2020 2020 207d 2c0a 2020       #     },.  
+0005a630: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+0005a640: 7265 7475 726e 207b 0a20 2020 2020 2020  return {.       
+0005a650: 2020 2020 2027 7379 6d62 6f6c 273a 204e       'symbol': N
+0005a660: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
+0005a670: 2027 6d61 7267 696e 4d6f 6465 273a 2027   'marginMode': '
+0005a680: 6372 6f73 7327 2c0a 2020 2020 2020 2020  cross',.        
+0005a690: 2020 2020 2763 7572 7265 6e63 7927 3a20      'currency': 
+0005a6a0: 7365 6c66 2e73 6166 655f 6375 7272 656e  self.safe_curren
+0005a6b0: 6379 5f63 6f64 6528 7365 6c66 2e73 6166  cy_code(self.saf
+0005a6c0: 655f 7374 7269 6e67 2869 6e66 6f2c 2027  e_string(info, '
+0005a6d0: 746f 6b65 6e49 6427 2929 2c0a 2020 2020  tokenId')),.    
+0005a6e0: 2020 2020 2020 2020 2769 6e74 6572 6573          'interes
+0005a6f0: 7427 3a20 7365 6c66 2e73 6166 655f 6e75  t': self.safe_nu
+0005a700: 6d62 6572 2869 6e66 6f2c 2027 696e 7465  mber(info, 'inte
+0005a710: 7265 7374 2729 2c0a 2020 2020 2020 2020  rest'),.        
+0005a720: 2020 2020 2769 6e74 6572 6573 7452 6174      'interestRat
+0005a730: 6527 3a20 4e6f 6e65 2c0a 2020 2020 2020  e': None,.      
+0005a740: 2020 2020 2020 2761 6d6f 756e 7442 6f72        'amountBor
+0005a750: 726f 7765 6427 3a20 7365 6c66 2e73 6166  rowed': self.saf
+0005a760: 655f 6e75 6d62 6572 2869 6e66 6f2c 2027  e_number(info, '
+0005a770: 6c6f 616e 2729 2c0a 2020 2020 2020 2020  loan'),.        
+0005a780: 2020 2020 2774 696d 6573 7461 6d70 273a      'timestamp':
+0005a790: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
+0005a7a0: 2020 2027 6461 7465 7469 6d65 273a 204e     'datetime': N
+0005a7b0: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
+0005a7c0: 2027 696e 666f 273a 2069 6e66 6f2c 0a20   'info': info,. 
+0005a7d0: 2020 2020 2020 207d 0a0a 2020 2020 6173         }..    as
+0005a7e0: 796e 6320 6465 6620 7472 616e 7366 6572  ync def transfer
+0005a7f0: 2873 656c 662c 2063 6f64 653a 2073 7472  (self, code: str
+0005a800: 2c20 616d 6f75 6e74 2c20 6672 6f6d 4163  , amount, fromAc
+0005a810: 636f 756e 742c 2074 6f41 6363 6f75 6e74  count, toAccount
+0005a820: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
+0005a830: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+0005a840: 2020 7472 616e 7366 6572 2063 7572 7265    transfer curre
+0005a850: 6e63 7920 696e 7465 726e 616c 6c79 2062  ncy internally b
+0005a860: 6574 7765 656e 2077 616c 6c65 7473 206f  etween wallets o
+0005a870: 6e20 7468 6520 7361 6d65 2061 6363 6f75  n the same accou
+0005a880: 6e74 0a20 2020 2020 2020 2073 6565 2068  nt.        see h
+0005a890: 7474 7073 3a2f 2f62 7962 6974 2d65 7863  ttps://bybit-exc
+0005a8a0: 6861 6e67 652e 6769 7468 7562 2e69 6f2f  hange.github.io/
+0005a8b0: 646f 6373 2f61 6363 6f75 6e74 5f61 7373  docs/account_ass
+0005a8c0: 6574 2f23 742d 6372 6561 7465 696e 7465  et/#t-createinte
+0005a8d0: 726e 616c 7472 616e 7366 6572 0a20 2020  rnaltransfer.   
+0005a8e0: 2020 2020 2073 6565 2068 7474 7073 3a2f       see https:/
+0005a8f0: 2f62 7962 6974 2d65 7863 6861 6e67 652e  /bybit-exchange.
+0005a900: 6769 7468 7562 2e69 6f2f 646f 6373 2f61  github.io/docs/a
+0005a910: 6363 6f75 6e74 5f61 7373 6574 2f76 332f  ccount_asset/v3/
+0005a920: 2374 2d63 7265 6174 6569 6e74 6572 6e61  #t-createinterna
+0005a930: 6c74 7261 6e73 6665 720a 2020 2020 2020  ltransfer.      
+0005a940: 2020 3a70 6172 616d 2073 7472 2063 6f64    :param str cod
+0005a950: 653a 2075 6e69 6669 6564 2063 7572 7265  e: unified curre
+0005a960: 6e63 7920 636f 6465 0a20 2020 2020 2020  ncy code.       
+0005a970: 203a 7061 7261 6d20 666c 6f61 7420 616d   :param float am
+0005a980: 6f75 6e74 3a20 616d 6f75 6e74 2074 6f20  ount: amount to 
+0005a990: 7472 616e 7366 6572 0a20 2020 2020 2020  transfer.       
+0005a9a0: 203a 7061 7261 6d20 7374 7220 6672 6f6d   :param str from
+0005a9b0: 4163 636f 756e 743a 2061 6363 6f75 6e74  Account: account
+0005a9c0: 2074 6f20 7472 616e 7366 6572 2066 726f   to transfer fro
+0005a9d0: 6d0a 2020 2020 2020 2020 3a70 6172 616d  m.        :param
+0005a9e0: 2073 7472 2074 6f41 6363 6f75 6e74 3a20   str toAccount: 
+0005a9f0: 6163 636f 756e 7420 746f 2074 7261 6e73  account to trans
+0005aa00: 6665 7220 746f 0a20 2020 2020 2020 203a  fer to.        :
+0005aa10: 7061 7261 6d20 6469 6374 2070 6172 616d  param dict param
+0005aa20: 733a 2065 7874 7261 2070 6172 616d 6574  s: extra paramet
+0005aa30: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
+0005aa40: 7468 6520 6279 6269 7420 6170 6920 656e  the bybit api en
+0005aa50: 6470 6f69 6e74 0a20 2020 2020 2020 203a  dpoint.        :
+0005aa60: 7061 7261 6d20 7374 7220 7061 7261 6d73  param str params
+0005aa70: 5b27 7472 616e 7366 6572 4964 275d 3a20  ['transferId']: 
+0005aa80: 5555 4944 2c20 7768 6963 6820 6973 2075  UUID, which is u
+0005aa90: 6e69 7175 6520 6163 726f 7373 2074 6865  nique across the
+0005aaa0: 2070 6c61 7466 6f72 6d0a 2020 2020 2020   platform.      
+0005aab0: 2020 3a72 6574 7572 6e73 2064 6963 743a    :returns dict:
+0005aac0: 2061 2060 7472 616e 7366 6572 2073 7472   a `transfer str
+0005aad0: 7563 7475 7265 203c 6874 7470 733a 2f2f  ucture <https://
+0005aae0: 646f 6373 2e63 6378 742e 636f 6d2f 232f  docs.ccxt.com/#/
+0005aaf0: 3f69 643d 7472 616e 7366 6572 2d73 7472  ?id=transfer-str
+0005ab00: 7563 7475 7265 3e60 0a20 2020 2020 2020  ucture>`.       
+0005ab10: 2022 2222 0a20 2020 2020 2020 2061 7761   """.        awa
+0005ab20: 6974 2073 656c 662e 6c6f 6164 5f6d 6172  it self.load_mar
+0005ab30: 6b65 7473 2829 0a20 2020 2020 2020 2074  kets().        t
+0005ab40: 7261 6e73 6665 7249 6420 3d20 7365 6c66  ransferId = self
+0005ab50: 2e73 6166 655f 7374 7269 6e67 2870 6172  .safe_string(par
+0005ab60: 616d 732c 2027 7472 616e 7366 6572 4964  ams, 'transferId
+0005ab70: 272c 2073 656c 662e 7575 6964 2829 290a  ', self.uuid()).
+0005ab80: 2020 2020 2020 2020 6163 636f 756e 7454          accountT
+0005ab90: 7970 6573 203d 2073 656c 662e 7361 6665  ypes = self.safe
+0005aba0: 5f76 616c 7565 2873 656c 662e 6f70 7469  _value(self.opti
+0005abb0: 6f6e 732c 2027 6163 636f 756e 7473 4279  ons, 'accountsBy
+0005abc0: 5479 7065 272c 207b 7d29 0a20 2020 2020  Type', {}).     
+0005abd0: 2020 2066 726f 6d49 6420 3d20 7365 6c66     fromId = self
+0005abe0: 2e73 6166 655f 7374 7269 6e67 2861 6363  .safe_string(acc
+0005abf0: 6f75 6e74 5479 7065 732c 2066 726f 6d41  ountTypes, fromA
+0005ac00: 6363 6f75 6e74 2c20 6672 6f6d 4163 636f  ccount, fromAcco
+0005ac10: 756e 7429 0a20 2020 2020 2020 2074 6f49  unt).        toI
+0005ac20: 6420 3d20 7365 6c66 2e73 6166 655f 7374  d = self.safe_st
+0005ac30: 7269 6e67 2861 6363 6f75 6e74 5479 7065  ring(accountType
+0005ac40: 732c 2074 6f41 6363 6f75 6e74 2c20 746f  s, toAccount, to
+0005ac50: 4163 636f 756e 7429 0a20 2020 2020 2020  Account).       
+0005ac60: 2063 7572 7265 6e63 7920 3d20 7365 6c66   currency = self
+0005ac70: 2e63 7572 7265 6e63 7928 636f 6465 290a  .currency(code).
+0005ac80: 2020 2020 2020 2020 616d 6f75 6e74 546f          amountTo
+0005ac90: 5072 6563 6973 696f 6e20 3d20 7365 6c66  Precision = self
+0005aca0: 2e63 7572 7265 6e63 795f 746f 5f70 7265  .currency_to_pre
+0005acb0: 6369 7369 6f6e 2863 6f64 652c 2061 6d6f  cision(code, amo
+0005acc0: 756e 7429 0a20 2020 2020 2020 206d 6574  unt).        met
+0005acd0: 686f 6420 3d20 4e6f 6e65 0a20 2020 2020  hod = None.     
+0005ace0: 2020 206d 6574 686f 642c 2070 6172 616d     method, param
+0005acf0: 7320 3d20 7365 6c66 2e68 616e 646c 655f  s = self.handle_
+0005ad00: 6f70 7469 6f6e 5f61 6e64 5f70 6172 616d  option_and_param
+0005ad10: 7328 7061 7261 6d73 2c20 2774 7261 6e73  s(params, 'trans
+0005ad20: 6665 7227 2c20 276d 6574 686f 6427 2c20  fer', 'method', 
+0005ad30: 2770 7269 7661 7465 506f 7374 4173 7365  'privatePostAsse
+0005ad40: 7456 3150 7269 7661 7465 5472 616e 7366  tV1PrivateTransf
+0005ad50: 6572 2729 2020 2320 7631 2070 7265 6665  er')  # v1 prefe
+0005ad60: 7272 6564 2061 746d 2c20 6265 6361 7573  rred atm, becaus
+0005ad70: 6520 6974 2073 7570 706f 7274 7320 6675  e it supports fu
+0005ad80: 6e64 696e 670a 2020 2020 2020 2020 7265  nding.        re
+0005ad90: 7175 6573 7420 3d20 4e6f 6e65 0a20 2020  quest = None.   
+0005ada0: 2020 2020 2069 6620 6d65 7468 6f64 203d       if method =
+0005adb0: 3d20 2770 7269 7661 7465 506f 7374 4173  = 'privatePostAs
+0005adc0: 7365 7456 3350 7269 7661 7465 5472 616e  setV3PrivateTran
+0005add0: 7366 6572 496e 7465 7254 7261 6e73 6665  sferInterTransfe
+0005ade0: 7227 206f 7220 6d65 7468 6f64 203d 3d20  r' or method == 
+0005adf0: 2770 7269 7661 7465 506f 7374 5635 4173  'privatePostV5As
+0005ae00: 7365 7454 7261 6e73 6665 7249 6e74 6572  setTransferInter
+0005ae10: 5472 616e 7366 6572 273a 0a20 2020 2020  Transfer':.     
+0005ae20: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+0005ae30: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+0005ae40: 2020 2027 7472 616e 7366 6572 4964 273a     'transferId':
+0005ae50: 2074 7261 6e73 6665 7249 642c 0a20 2020   transferId,.   
+0005ae60: 2020 2020 2020 2020 2020 2020 2027 6672               'fr
+0005ae70: 6f6d 4163 636f 756e 7454 7970 6527 3a20  omAccountType': 
+0005ae80: 6672 6f6d 4964 2c0a 2020 2020 2020 2020  fromId,.        
+0005ae90: 2020 2020 2020 2020 2774 6f41 6363 6f75          'toAccou
+0005aea0: 6e74 5479 7065 273a 2074 6f49 642c 0a20  ntType': toId,. 
+0005aeb0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+0005aec0: 636f 696e 273a 2063 7572 7265 6e63 795b  coin': currency[
+0005aed0: 2769 6427 5d2c 0a20 2020 2020 2020 2020  'id'],.         
+0005aee0: 2020 2020 2020 2027 616d 6f75 6e74 273a         'amount':
+0005aef0: 2061 6d6f 756e 7454 6f50 7265 6369 7369   amountToPrecisi
+0005af00: 6f6e 2c0a 2020 2020 2020 2020 2020 2020  on,.            
+0005af10: 7d0a 2020 2020 2020 2020 656c 7365 3a0a  }.        else:.
+0005af20: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0005af30: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
+0005af40: 2020 2020 2020 2020 2774 7261 6e73 6665          'transfe
+0005af50: 725f 6964 273a 2074 7261 6e73 6665 7249  r_id': transferI
+0005af60: 642c 0a20 2020 2020 2020 2020 2020 2020  d,.             
+0005af70: 2020 2027 6672 6f6d 5f61 6363 6f75 6e74     'from_account
+0005af80: 5f74 7970 6527 3a20 6672 6f6d 4964 2c0a  _type': fromId,.
+0005af90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005afa0: 2774 6f5f 6163 636f 756e 745f 7479 7065  'to_account_type
+0005afb0: 273a 2074 6f49 642c 0a20 2020 2020 2020  ': toId,.       
+0005afc0: 2020 2020 2020 2020 2027 636f 696e 273a           'coin':
+0005afd0: 2063 7572 7265 6e63 795b 2769 6427 5d2c   currency['id'],
+0005afe0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0005aff0: 2027 616d 6f75 6e74 273a 2061 6d6f 756e   'amount': amoun
+0005b000: 7454 6f50 7265 6369 7369 6f6e 2c0a 2020  tToPrecision,.  
+0005b010: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
+0005b020: 2020 2020 7265 7370 6f6e 7365 203d 2061      response = a
+0005b030: 7761 6974 2067 6574 6174 7472 2873 656c  wait getattr(sel
+0005b040: 662c 206d 6574 686f 6429 2873 656c 662e  f, method)(self.
+0005b050: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
+0005b060: 7061 7261 6d73 2929 0a20 2020 2020 2020  params)).       
+0005b070: 2023 0a20 2020 2020 2020 2023 207b 0a20   #.        # {. 
+0005b080: 2020 2020 2020 2023 2020 2020 2022 7265         #     "re
+0005b090: 7443 6f64 6522 3a20 302c 0a20 2020 2020  tCode": 0,.     
+0005b0a0: 2020 2023 2020 2020 2022 7265 744d 7367     #     "retMsg
+0005b0b0: 223a 2022 7375 6363 6573 7322 2c0a 2020  ": "success",.  
+0005b0c0: 2020 2020 2020 2320 2020 2020 2272 6573        #     "res
+0005b0d0: 756c 7422 3a20 7b0a 2020 2020 2020 2020  ult": {.        
+0005b0e0: 2320 2020 2020 2020 2020 2274 7261 6e73  #         "trans
+0005b0f0: 6665 7249 6422 3a20 2234 3234 3461 6634  ferId": "4244af4
+0005b100: 342d 6633 6230 2d34 6366 362d 6137 3433  4-f3b0-4cf6-a743
+0005b110: 2d62 3536 3536 3065 3938 3762 6322 2020  -b56560e987bc"  
+0005b120: 2320 7472 616e 7366 6572 5f69 6420 696e  # transfer_id in
+0005b130: 2076 310a 2020 2020 2020 2020 2320 2020   v1.        #   
+0005b140: 2020 7d2c 0a20 2020 2020 2020 2023 2020    },.        #  
+0005b150: 2020 2022 7265 7445 7874 496e 666f 223a     "retExtInfo":
+0005b160: 207b 7d2c 0a20 2020 2020 2020 2023 2020   {},.        #  
+0005b170: 2020 2022 7469 6d65 223a 2031 3636 3638     "time": 16668
+0005b180: 3735 3835 3732 3035 0a20 2020 2020 2020  75857205.       
+0005b190: 2023 207d 0a20 2020 2020 2020 2023 0a20   # }.        #. 
+0005b1a0: 2020 2020 2020 2074 696d 6573 7461 6d70         timestamp
+0005b1b0: 203d 2073 656c 662e 7361 6665 5f69 6e74   = self.safe_int
+0005b1c0: 6567 6572 5f32 2872 6573 706f 6e73 652c  eger_2(response,
+0005b1d0: 2027 7469 6d65 272c 2027 7469 6d65 5f6e   'time', 'time_n
+0005b1e0: 6f77 2729 0a20 2020 2020 2020 2074 7261  ow').        tra
+0005b1f0: 6e73 6665 7220 3d20 7365 6c66 2e73 6166  nsfer = self.saf
+0005b200: 655f 7661 6c75 6528 7265 7370 6f6e 7365  e_value(response
+0005b210: 2c20 2772 6573 756c 7427 2c20 7b7d 290a  , 'result', {}).
+0005b220: 2020 2020 2020 2020 7374 6174 7573 5261          statusRa
+0005b230: 7720 3d20 7365 6c66 2e73 6166 655f 7374  w = self.safe_st
+0005b240: 7269 6e67 5f6e 2872 6573 706f 6e73 652c  ring_n(response,
+0005b250: 205b 2772 6574 436f 6465 272c 2027 7265   ['retCode', 're
+0005b260: 744d 7367 272c 2027 7265 745f 636f 6465  tMsg', 'ret_code
+0005b270: 272c 2027 7265 745f 6d73 6727 5d29 0a20  ', 'ret_msg']). 
+0005b280: 2020 2020 2020 2073 7461 7475 7320 3d20         status = 
+0005b290: 7365 6c66 2e70 6172 7365 5f74 7261 6e73  self.parse_trans
+0005b2a0: 6665 725f 7374 6174 7573 2873 7461 7475  fer_status(statu
+0005b2b0: 7352 6177 290a 2020 2020 2020 2020 7265  sRaw).        re
+0005b2c0: 7475 726e 2073 656c 662e 6578 7465 6e64  turn self.extend
+0005b2d0: 2873 656c 662e 7061 7273 655f 7472 616e  (self.parse_tran
+0005b2e0: 7366 6572 2874 7261 6e73 6665 722c 2063  sfer(transfer, c
+0005b2f0: 7572 7265 6e63 7929 2c20 7b0a 2020 2020  urrency), {.    
+0005b300: 2020 2020 2020 2020 2774 696d 6573 7461          'timesta
+0005b310: 6d70 273a 2074 696d 6573 7461 6d70 2c0a  mp': timestamp,.
+0005b320: 2020 2020 2020 2020 2020 2020 2764 6174              'dat
+0005b330: 6574 696d 6527 3a20 7365 6c66 2e69 736f  etime': self.iso
+0005b340: 3836 3031 2874 696d 6573 7461 6d70 292c  8601(timestamp),
+0005b350: 0a20 2020 2020 2020 2020 2020 2027 616d  .            'am
+0005b360: 6f75 6e74 273a 2073 656c 662e 7061 7273  ount': self.pars
+0005b370: 655f 6e75 6d62 6572 2861 6d6f 756e 7454  e_number(amountT
+0005b380: 6f50 7265 6369 7369 6f6e 292c 0a20 2020  oPrecision),.   
+0005b390: 2020 2020 2020 2020 2027 6672 6f6d 4163           'fromAc
+0005b3a0: 636f 756e 7427 3a20 6672 6f6d 4163 636f  count': fromAcco
+0005b3b0: 756e 742c 0a20 2020 2020 2020 2020 2020  unt,.           
+0005b3c0: 2027 746f 4163 636f 756e 7427 3a20 746f   'toAccount': to
+0005b3d0: 4163 636f 756e 742c 0a20 2020 2020 2020  Account,.       
+0005b3e0: 2020 2020 2027 7374 6174 7573 273a 2073       'status': s
+0005b3f0: 7461 7475 732c 0a20 2020 2020 2020 207d  tatus,.        }
+0005b400: 290a 0a20 2020 2061 7379 6e63 2064 6566  )..    async def
+0005b410: 2066 6574 6368 5f74 7261 6e73 6665 7273   fetch_transfers
+0005b420: 2873 656c 662c 2063 6f64 653a 204f 7074  (self, code: Opt
+0005b430: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
+0005b440: 652c 2073 696e 6365 3a20 4f70 7469 6f6e  e, since: Option
+0005b450: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c20  al[int] = None, 
+0005b460: 6c69 6d69 743a 204f 7074 696f 6e61 6c5b  limit: Optional[
+0005b470: 696e 745d 203d 204e 6f6e 652c 2070 6172  int] = None, par
+0005b480: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
+0005b490: 2022 2222 0a20 2020 2020 2020 2066 6574   """.        fet
+0005b4a0: 6368 2061 2068 6973 746f 7279 206f 6620  ch a history of 
+0005b4b0: 696e 7465 726e 616c 2074 7261 6e73 6665  internal transfe
+0005b4c0: 7273 206d 6164 6520 6f6e 2061 6e20 6163  rs made on an ac
+0005b4d0: 636f 756e 740a 2020 2020 2020 2020 7365  count.        se
+0005b4e0: 6520 6874 7470 733a 2f2f 6279 6269 742d  e https://bybit-
+0005b4f0: 6578 6368 616e 6765 2e67 6974 6875 622e  exchange.github.
+0005b500: 696f 2f64 6f63 732f 7635 2f61 7373 6574  io/docs/v5/asset
+0005b510: 2f69 6e74 6572 2d74 7261 6e73 6665 722d  /inter-transfer-
+0005b520: 6c69 7374 0a20 2020 2020 2020 203a 7061  list.        :pa
+0005b530: 7261 6d20 7374 727c 4e6f 6e65 2063 6f64  ram str|None cod
+0005b540: 653a 2075 6e69 6669 6564 2063 7572 7265  e: unified curre
+0005b550: 6e63 7920 636f 6465 206f 6620 7468 6520  ncy code of the 
+0005b560: 6375 7272 656e 6379 2074 7261 6e73 6665  currency transfe
+0005b570: 7272 6564 0a20 2020 2020 2020 203a 7061  rred.        :pa
+0005b580: 7261 6d20 696e 747c 4e6f 6e65 2073 696e  ram int|None sin
+0005b590: 6365 3a20 7468 6520 6561 726c 6965 7374  ce: the earliest
+0005b5a0: 2074 696d 6520 696e 206d 7320 746f 2066   time in ms to f
+0005b5b0: 6574 6368 2074 7261 6e73 6665 7273 2066  etch transfers f
+0005b5c0: 6f72 0a20 2020 2020 2020 203a 7061 7261  or.        :para
+0005b5d0: 6d20 696e 747c 4e6f 6e65 206c 696d 6974  m int|None limit
+0005b5e0: 3a20 7468 6520 6d61 7869 6d75 6d20 6e75  : the maximum nu
+0005b5f0: 6d62 6572 206f 6620 2074 7261 6e73 6665  mber of  transfe
+0005b600: 7273 2073 7472 7563 7475 7265 7320 746f  rs structures to
+0005b610: 2072 6574 7269 6576 650a 2020 2020 2020   retrieve.      
+0005b620: 2020 3a70 6172 616d 2064 6963 7420 7061    :param dict pa
+0005b630: 7261 6d73 3a20 6578 7472 6120 7061 7261  rams: extra para
+0005b640: 6d65 7465 7273 2073 7065 6369 6669 6320  meters specific 
+0005b650: 746f 2074 6865 2062 7962 6974 2061 7069  to the bybit api
+0005b660: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
+0005b670: 2020 3a72 6574 7572 6e73 205b 6469 6374    :returns [dict
+0005b680: 5d3a 2061 206c 6973 7420 6f66 2060 7472  ]: a list of `tr
+0005b690: 616e 7366 6572 2073 7472 7563 7475 7265  ansfer structure
+0005b6a0: 7320 3c68 7474 7073 3a2f 2f64 6f63 732e  s <https://docs.
+0005b6b0: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d74  ccxt.com/#/?id=t
+0005b6c0: 7261 6e73 6665 722d 7374 7275 6374 7572  ransfer-structur
+0005b6d0: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
+0005b6e0: 2020 2020 2020 2020 6177 6169 7420 7365          await se
+0005b6f0: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
+0005b700: 290a 2020 2020 2020 2020 6375 7272 656e  ).        curren
+0005b710: 6379 203d 204e 6f6e 650a 2020 2020 2020  cy = None.      
+0005b720: 2020 7265 7175 6573 7420 3d20 7b7d 0a20    request = {}. 
+0005b730: 2020 2020 2020 2069 6620 636f 6465 2069         if code i
+0005b740: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0005b750: 2020 2020 2020 2020 6375 7272 656e 6379          currency
+0005b760: 203d 2073 656c 662e 7361 6665 5f63 7572   = self.safe_cur
+0005b770: 7265 6e63 795f 636f 6465 2863 6f64 6529  rency_code(code)
+0005b780: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+0005b790: 7565 7374 5b27 636f 696e 275d 203d 2063  uest['coin'] = c
+0005b7a0: 7572 7265 6e63 790a 2020 2020 2020 2020  urrency.        
+0005b7b0: 6966 2073 696e 6365 2069 7320 6e6f 7420  if since is not 
+0005b7c0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+0005b7d0: 2020 7265 7175 6573 745b 2773 7461 7274    request['start
+0005b7e0: 5469 6d65 275d 203d 2073 696e 6365 0a20  Time'] = since. 
+0005b7f0: 2020 2020 2020 2069 6620 6c69 6d69 7420         if limit 
+0005b800: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0005b810: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0005b820: 5b27 6c69 6d69 7427 5d20 3d20 6c69 6d69  ['limit'] = limi
+0005b830: 740a 2020 2020 2020 2020 7265 7370 6f6e  t.        respon
+0005b840: 7365 203d 2061 7761 6974 2073 656c 662e  se = await self.
+0005b850: 7072 6976 6174 6547 6574 5635 4173 7365  privateGetV5Asse
+0005b860: 7454 7261 6e73 6665 7251 7565 7279 496e  tTransferQueryIn
+0005b870: 7465 7254 7261 6e73 6665 724c 6973 7428  terTransferList(
+0005b880: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
+0005b890: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
+0005b8a0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+0005b8b0: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
+0005b8c0: 2320 2020 2020 2020 2020 2272 6574 436f  #         "retCo
+0005b8d0: 6465 223a 2030 2c0a 2020 2020 2020 2020  de": 0,.        
+0005b8e0: 2320 2020 2020 2020 2020 2272 6574 4d73  #         "retMs
+0005b8f0: 6722 3a20 2273 7563 6365 7373 222c 0a20  g": "success",. 
+0005b900: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0005b910: 2022 7265 7375 6c74 223a 207b 0a20 2020   "result": {.   
+0005b920: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0005b930: 2020 2022 6c69 7374 223a 205b 0a20 2020     "list": [.   
+0005b940: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0005b950: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
+0005b960: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0005b970: 2020 2020 2020 2022 7472 616e 7366 6572         "transfer
+0005b980: 4964 223a 2022 7365 6c66 5472 616e 7366  Id": "selfTransf
+0005b990: 6572 5f61 3130 3931 6363 372d 3933 3634  er_a1091cc7-9364
+0005b9a0: 2d34 6237 342d 3864 6531 2d31 3866 3032  -4b74-8de1-18f02
+0005b9b0: 6336 6632 6435 6322 2c0a 2020 2020 2020  c6f2d5c",.      
+0005b9c0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0005b9d0: 2020 2020 2020 2020 2263 6f69 6e22 3a20          "coin": 
+0005b9e0: 2255 5344 5422 2c0a 2020 2020 2020 2020  "USDT",.        
+0005b9f0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0005ba00: 2020 2020 2020 2261 6d6f 756e 7422 3a20        "amount": 
+0005ba10: 2235 3030 3022 2c0a 2020 2020 2020 2020  "5000",.        
+0005ba20: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0005ba30: 2020 2020 2020 2266 726f 6d41 6363 6f75        "fromAccou
+0005ba40: 6e74 5479 7065 223a 2022 5350 4f54 222c  ntType": "SPOT",
+0005ba50: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0005ba60: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0005ba70: 746f 4163 636f 756e 7454 7970 6522 3a20  toAccountType": 
+0005ba80: 2255 4e49 4649 4544 222c 0a20 2020 2020  "UNIFIED",.     
+0005ba90: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0005baa0: 2020 2020 2020 2020 2022 7469 6d65 7374           "timest
+0005bab0: 616d 7022 3a20 2231 3636 3732 3833 3236  amp": "166728326
+0005bac0: 3330 3030 222c 0a20 2020 2020 2020 2023  3000",.        #
+0005bad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005bae0: 2020 2020 2022 7374 6174 7573 223a 2022       "status": "
+0005baf0: 5355 4343 4553 5322 0a20 2020 2020 2020  SUCCESS".       
+0005bb00: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0005bb10: 2020 207d 0a20 2020 2020 2020 2023 2020     }.        #  
+0005bb20: 2020 2020 2020 2020 2020 205d 2c0a 2020             ],.  
+0005bb30: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0005bb40: 2020 2020 226e 6578 7450 6167 6543 7572      "nextPageCur
+0005bb50: 736f 7222 3a20 2265 794a 7461 5735 4a52  sor": "eyJtaW5JR
+0005bb60: 4349 364d 544d 314f 4451 324f 4377 6962  CI6MTM1ODQ2OCwib
+0005bb70: 5746 3453 5551 694f 6a45 7a4e 5467 304e  WF4SUQiOjEzNTg0N
+0005bb80: 6a68 3922 0a20 2020 2020 2020 2023 2020  jh9".        #  
+0005bb90: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
+0005bba0: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
+0005bbb0: 4578 7449 6e66 6f22 3a20 7b7d 2c0a 2020  ExtInfo": {},.  
+0005bbc0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0005bbd0: 2274 696d 6522 3a20 3136 3730 3938 3832  "time": 16709882
+0005bbe0: 3731 3637 370a 2020 2020 2020 2020 2320  71677.        # 
+0005bbf0: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
+0005bc00: 2020 2020 2020 2020 6461 7461 203d 2073          data = s
+0005bc10: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
+0005bc20: 6573 706f 6e73 652c 2027 7265 7375 6c74  esponse, 'result
+0005bc30: 272c 207b 7d29 0a20 2020 2020 2020 2074  ', {}).        t
+0005bc40: 7261 6e73 6665 7273 203d 2073 656c 662e  ransfers = self.
+0005bc50: 7361 6665 5f76 616c 7565 2864 6174 612c  safe_value(data,
+0005bc60: 2027 6c69 7374 272c 205b 5d29 0a20 2020   'list', []).   
+0005bc70: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+0005bc80: 2e70 6172 7365 5f74 7261 6e73 6665 7273  .parse_transfers
+0005bc90: 2874 7261 6e73 6665 7273 2c20 6375 7272  (transfers, curr
+0005bca0: 656e 6379 2c20 7369 6e63 652c 206c 696d  ency, since, lim
+0005bcb0: 6974 290a 0a20 2020 2061 7379 6e63 2064  it)..    async d
+0005bcc0: 6566 2062 6f72 726f 775f 6d61 7267 696e  ef borrow_margin
+0005bcd0: 2873 656c 662c 2063 6f64 653a 2073 7472  (self, code: str
+0005bce0: 2c20 616d 6f75 6e74 2c20 7379 6d62 6f6c  , amount, symbol
+0005bcf0: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
+0005bd00: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
+0005bd10: 7d29 3a0a 2020 2020 2020 2020 2222 220a  }):.        """.
+0005bd20: 2020 2020 2020 2020 6372 6561 7465 2061          create a
+0005bd30: 206c 6f61 6e20 746f 2062 6f72 726f 7720   loan to borrow 
+0005bd40: 6d61 7267 696e 0a20 2020 2020 2020 2073  margin.        s
+0005bd50: 6565 2068 7474 7073 3a2f 2f62 7962 6974  ee https://bybit
+0005bd60: 2d65 7863 6861 6e67 652e 6769 7468 7562  -exchange.github
+0005bd70: 2e69 6f2f 646f 6373 2f73 706f 742f 7633  .io/docs/spot/v3
+0005bd80: 2f23 742d 626f 7272 6f77 6d61 7267 696e  /#t-borrowmargin
+0005bd90: 6c6f 616e 0a20 2020 2020 2020 203a 7061  loan.        :pa
+0005bda0: 7261 6d20 7374 7220 636f 6465 3a20 756e  ram str code: un
+0005bdb0: 6966 6965 6420 6375 7272 656e 6379 2063  ified currency c
+0005bdc0: 6f64 6520 6f66 2074 6865 2063 7572 7265  ode of the curre
+0005bdd0: 6e63 7920 746f 2062 6f72 726f 770a 2020  ncy to borrow.  
+0005bde0: 2020 2020 2020 3a70 6172 616d 2066 6c6f        :param flo
+0005bdf0: 6174 2061 6d6f 756e 743a 2074 6865 2061  at amount: the a
+0005be00: 6d6f 756e 7420 746f 2062 6f72 726f 770a  mount to borrow.
+0005be10: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+0005be20: 7472 7c4e 6f6e 6520 7379 6d62 6f6c 3a20  tr|None symbol: 
+0005be30: 6e6f 7420 7573 6564 2062 7920 6279 6269  not used by bybi
+0005be40: 742e 626f 7272 6f77 4d61 7267 696e 2829  t.borrowMargin()
+0005be50: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+0005be60: 6469 6374 2070 6172 616d 733a 2065 7874  dict params: ext
+0005be70: 7261 2070 6172 616d 6574 6572 7320 7370  ra parameters sp
+0005be80: 6563 6966 6963 2074 6f20 7468 6520 6279  ecific to the by
+0005be90: 6269 7420 6170 6920 656e 6470 6f69 6e74  bit api endpoint
+0005bea0: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
+0005beb0: 7320 6469 6374 3a20 6120 606d 6172 6769  s dict: a `margi
+0005bec0: 6e20 6c6f 616e 2073 7472 7563 7475 7265  n loan structure
+0005bed0: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
+0005bee0: 6378 742e 636f 6d2f 232f 3f69 643d 6d61  cxt.com/#/?id=ma
+0005bef0: 7267 696e 2d6c 6f61 6e2d 7374 7275 6374  rgin-loan-struct
+0005bf00: 7572 653e 600a 2020 2020 2020 2020 2222  ure>`.        ""
+0005bf10: 220a 2020 2020 2020 2020 6177 6169 7420  ".        await 
+0005bf20: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
+0005bf30: 7328 290a 2020 2020 2020 2020 6375 7272  s().        curr
+0005bf40: 656e 6379 203d 2073 656c 662e 6375 7272  ency = self.curr
+0005bf50: 656e 6379 2863 6f64 6529 0a20 2020 2020  ency(code).     
+0005bf60: 2020 206d 6172 6769 6e4d 6f64 652c 2071     marginMode, q
+0005bf70: 7565 7279 203d 2073 656c 662e 6861 6e64  uery = self.hand
+0005bf80: 6c65 5f6d 6172 6769 6e5f 6d6f 6465 5f61  le_margin_mode_a
+0005bf90: 6e64 5f70 6172 616d 7328 2762 6f72 726f  nd_params('borro
+0005bfa0: 774d 6172 6769 6e27 2c20 7061 7261 6d73  wMargin', params
+0005bfb0: 290a 2020 2020 2020 2020 6966 206d 6172  ).        if mar
+0005bfc0: 6769 6e4d 6f64 6520 3d3d 2027 6973 6f6c  ginMode == 'isol
+0005bfd0: 6174 6564 273a 0a20 2020 2020 2020 2020  ated':.         
+0005bfe0: 2020 2072 6169 7365 204e 6f74 5375 7070     raise NotSupp
+0005bff0: 6f72 7465 6428 7365 6c66 2e69 6420 2b20  orted(self.id + 
+0005c000: 2720 626f 7272 6f77 4d61 7267 696e 2829  ' borrowMargin()
+0005c010: 2063 616e 6e6f 7420 7573 6520 6973 6f6c   cannot use isol
+0005c020: 6174 6564 206d 6172 6769 6e27 290a 2020  ated margin').  
+0005c030: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
+0005c040: 7b0a 2020 2020 2020 2020 2020 2020 2763  {.            'c
+0005c050: 6f69 6e27 3a20 6375 7272 656e 6379 5b27  oin': currency['
+0005c060: 6964 275d 2c0a 2020 2020 2020 2020 2020  id'],.          
+0005c070: 2020 2771 7479 273a 2073 656c 662e 6375    'qty': self.cu
+0005c080: 7272 656e 6379 5f74 6f5f 7072 6563 6973  rrency_to_precis
+0005c090: 696f 6e28 636f 6465 2c20 616d 6f75 6e74  ion(code, amount
+0005c0a0: 292c 0a20 2020 2020 2020 207d 0a20 2020  ),.        }.   
+0005c0b0: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
+0005c0c0: 6177 6169 7420 7365 6c66 2e70 7269 7661  await self.priva
+0005c0d0: 7465 506f 7374 5370 6f74 5633 5072 6976  tePostSpotV3Priv
+0005c0e0: 6174 6543 726f 7373 4d61 7267 696e 4c6f  ateCrossMarginLo
+0005c0f0: 616e 2873 656c 662e 6578 7465 6e64 2872  an(self.extend(r
+0005c100: 6571 7565 7374 2c20 7175 6572 7929 290a  equest, query)).
+0005c110: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+0005c120: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
+0005c130: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
+0005c140: 436f 6465 223a 2030 2c0a 2020 2020 2020  Code": 0,.      
+0005c150: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
+0005c160: 4d73 6722 3a20 2273 7563 6365 7373 222c  Msg": "success",
+0005c170: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0005c180: 2020 2022 7265 7375 6c74 223a 207b 0a20     "result": {. 
+0005c190: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0005c1a0: 2020 2020 2022 7472 616e 7361 6374 4964       "transactId
+0005c1b0: 223a 2022 3134 3134 3322 0a20 2020 2020  ": "14143".     
+0005c1c0: 2020 2023 2020 2020 2020 2020 207d 2c0a     #         },.
+0005c1d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005c1e0: 2020 2272 6574 4578 7449 6e66 6f22 3a20    "retExtInfo": 
+0005c1f0: 6e75 6c6c 2c0a 2020 2020 2020 2020 2320  null,.        # 
+0005c200: 2020 2020 2020 2020 2274 696d 6522 3a20          "time": 
+0005c210: 3136 3632 3631 3738 3438 3937 300a 2020  1662617848970.  
+0005c220: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
+0005c230: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+0005c240: 7265 7375 6c74 203d 2073 656c 662e 7361  result = self.sa
+0005c250: 6665 5f76 616c 7565 2872 6573 706f 6e73  fe_value(respons
+0005c260: 652c 2027 7265 7375 6c74 272c 207b 7d29  e, 'result', {})
+0005c270: 0a20 2020 2020 2020 2074 7261 6e73 6163  .        transac
+0005c280: 7469 6f6e 203d 2073 656c 662e 7061 7273  tion = self.pars
+0005c290: 655f 6d61 7267 696e 5f6c 6f61 6e28 7265  e_margin_loan(re
+0005c2a0: 7375 6c74 2c20 6375 7272 656e 6379 290a  sult, currency).
+0005c2b0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0005c2c0: 656c 662e 6578 7465 6e64 2874 7261 6e73  elf.extend(trans
+0005c2d0: 6163 7469 6f6e 2c20 7b0a 2020 2020 2020  action, {.      
+0005c2e0: 2020 2020 2020 2773 796d 626f 6c27 3a20        'symbol': 
+0005c2f0: 7379 6d62 6f6c 2c0a 2020 2020 2020 2020  symbol,.        
+0005c300: 2020 2020 2761 6d6f 756e 7427 3a20 616d      'amount': am
+0005c310: 6f75 6e74 2c0a 2020 2020 2020 2020 7d29  ount,.        })
+0005c320: 0a0a 2020 2020 6173 796e 6320 6465 6620  ..    async def 
+0005c330: 7265 7061 795f 6d61 7267 696e 2873 656c  repay_margin(sel
+0005c340: 662c 2063 6f64 653a 2073 7472 2c20 616d  f, code: str, am
+0005c350: 6f75 6e74 2c20 7379 6d62 6f6c 3a20 4f70  ount, symbol: Op
+0005c360: 7469 6f6e 616c 5b73 7472 5d20 3d20 4e6f  tional[str] = No
+0005c370: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
+0005c380: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0005c390: 2020 2020 7265 7061 7920 626f 7272 6f77      repay borrow
+0005c3a0: 6564 206d 6172 6769 6e20 616e 6420 696e  ed margin and in
+0005c3b0: 7465 7265 7374 0a20 2020 2020 2020 2073  terest.        s
+0005c3c0: 6565 2068 7474 7073 3a2f 2f62 7962 6974  ee https://bybit
+0005c3d0: 2d65 7863 6861 6e67 652e 6769 7468 7562  -exchange.github
+0005c3e0: 2e69 6f2f 646f 6373 2f73 706f 742f 7633  .io/docs/spot/v3
+0005c3f0: 2f23 742d 7265 7061 796d 6172 6769 6e6c  /#t-repaymarginl
+0005c400: 6f61 6e0a 2020 2020 2020 2020 3a70 6172  oan.        :par
+0005c410: 616d 2073 7472 2063 6f64 653a 2075 6e69  am str code: uni
+0005c420: 6669 6564 2063 7572 7265 6e63 7920 636f  fied currency co
+0005c430: 6465 206f 6620 7468 6520 6375 7272 656e  de of the curren
+0005c440: 6379 2074 6f20 7265 7061 790a 2020 2020  cy to repay.    
+0005c450: 2020 2020 3a70 6172 616d 2066 6c6f 6174      :param float
+0005c460: 2061 6d6f 756e 743a 2074 6865 2061 6d6f   amount: the amo
+0005c470: 756e 7420 746f 2072 6570 6179 0a20 2020  unt to repay.   
+0005c480: 2020 2020 203a 7061 7261 6d20 7374 727c       :param str|
+0005c490: 4e6f 6e65 2073 796d 626f 6c3a 206e 6f74  None symbol: not
+0005c4a0: 2075 7365 6420 6279 2062 7962 6974 2e72   used by bybit.r
+0005c4b0: 6570 6179 4d61 7267 696e 2829 0a20 2020  epayMargin().   
+0005c4c0: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
+0005c4d0: 2070 6172 616d 733a 2065 7874 7261 2070   params: extra p
+0005c4e0: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
+0005c4f0: 6963 2074 6f20 7468 6520 6279 6269 7420  ic to the bybit 
+0005c500: 6170 6920 656e 6470 6f69 6e74 0a20 2020  api endpoint.   
+0005c510: 2020 2020 203a 7265 7475 726e 7320 6469       :returns di
+0005c520: 6374 3a20 6120 606d 6172 6769 6e20 6c6f  ct: a `margin lo
+0005c530: 616e 2073 7472 7563 7475 7265 203c 6874  an structure <ht
+0005c540: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
+0005c550: 636f 6d2f 232f 3f69 643d 6d61 7267 696e  com/#/?id=margin
+0005c560: 2d6c 6f61 6e2d 7374 7275 6374 7572 653e  -loan-structure>
+0005c570: 600a 2020 2020 2020 2020 2222 220a 2020  `.        """.  
+0005c580: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
+0005c590: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
+0005c5a0: 2020 2020 2020 2020 6375 7272 656e 6379          currency
+0005c5b0: 203d 2073 656c 662e 6375 7272 656e 6379   = self.currency
+0005c5c0: 2863 6f64 6529 0a20 2020 2020 2020 206d  (code).        m
+0005c5d0: 6172 6769 6e4d 6f64 652c 2071 7565 7279  arginMode, query
+0005c5e0: 203d 2073 656c 662e 6861 6e64 6c65 5f6d   = self.handle_m
+0005c5f0: 6172 6769 6e5f 6d6f 6465 5f61 6e64 5f70  argin_mode_and_p
+0005c600: 6172 616d 7328 2772 6570 6179 4d61 7267  arams('repayMarg
+0005c610: 696e 272c 2070 6172 616d 7329 0a20 2020  in', params).   
+0005c620: 2020 2020 2069 6620 6d61 7267 696e 4d6f       if marginMo
+0005c630: 6465 203d 3d20 2769 736f 6c61 7465 6427  de == 'isolated'
+0005c640: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
+0005c650: 6973 6520 4e6f 7453 7570 706f 7274 6564  ise NotSupported
+0005c660: 2873 656c 662e 6964 202b 2027 2072 6570  (self.id + ' rep
+0005c670: 6179 4d61 7267 696e 2829 2063 616e 6e6f  ayMargin() canno
+0005c680: 7420 7573 6520 6973 6f6c 6174 6564 206d  t use isolated m
+0005c690: 6172 6769 6e27 290a 2020 2020 2020 2020  argin').        
+0005c6a0: 7265 7175 6573 7420 3d20 7b0a 2020 2020  request = {.    
+0005c6b0: 2020 2020 2020 2020 2763 6f69 6e27 3a20          'coin': 
+0005c6c0: 6375 7272 656e 6379 5b27 6964 275d 2c0a  currency['id'],.
+0005c6d0: 2020 2020 2020 2020 2020 2020 2771 7479              'qty
+0005c6e0: 273a 2073 656c 662e 6e75 6d62 6572 5f74  ': self.number_t
+0005c6f0: 6f5f 7374 7269 6e67 2861 6d6f 756e 7429  o_string(amount)
+0005c700: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
+0005c710: 2020 2020 7265 7370 6f6e 7365 203d 2061      response = a
+0005c720: 7761 6974 2073 656c 662e 7072 6976 6174  wait self.privat
+0005c730: 6550 6f73 7453 706f 7456 3350 7269 7661  ePostSpotV3Priva
+0005c740: 7465 4372 6f73 734d 6172 6769 6e52 6570  teCrossMarginRep
+0005c750: 6179 2873 656c 662e 6578 7465 6e64 2872  ay(self.extend(r
+0005c760: 6571 7565 7374 2c20 7175 6572 7929 290a  equest, query)).
+0005c770: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+0005c780: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
+0005c790: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
+0005c7a0: 436f 6465 223a 2030 2c0a 2020 2020 2020  Code": 0,.      
+0005c7b0: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
+0005c7c0: 4d73 6722 3a20 2273 7563 6365 7373 222c  Msg": "success",
+0005c7d0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0005c7e0: 2020 2022 7265 7375 6c74 223a 207b 0a20     "result": {. 
+0005c7f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0005c800: 2020 2020 2272 6570 6179 4964 223a 2022      "repayId": "
+0005c810: 3132 3132 3822 0a20 2020 2020 2020 2023  12128".        #
+0005c820: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
+0005c830: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
+0005c840: 6574 4578 7449 6e66 6f22 3a20 6e75 6c6c  etExtInfo": null
+0005c850: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0005c860: 2020 2020 2274 696d 6522 3a20 3136 3632      "time": 1662
+0005c870: 3631 3832 3938 3435 320a 2020 2020 2020  618298452.      
+0005c880: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
+0005c890: 2020 230a 2020 2020 2020 2020 7265 7375    #.        resu
+0005c8a0: 6c74 203d 2073 656c 662e 7361 6665 5f76  lt = self.safe_v
+0005c8b0: 616c 7565 2872 6573 706f 6e73 652c 2027  alue(response, '
+0005c8c0: 7265 7375 6c74 272c 207b 7d29 0a20 2020  result', {}).   
+0005c8d0: 2020 2020 2074 7261 6e73 6163 7469 6f6e       transaction
+0005c8e0: 203d 2073 656c 662e 7061 7273 655f 6d61   = self.parse_ma
+0005c8f0: 7267 696e 5f6c 6f61 6e28 7265 7375 6c74  rgin_loan(result
+0005c900: 2c20 6375 7272 656e 6379 290a 2020 2020  , currency).    
+0005c910: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+0005c920: 6578 7465 6e64 2874 7261 6e73 6163 7469  extend(transacti
+0005c930: 6f6e 2c20 7b0a 2020 2020 2020 2020 2020  on, {.          
+0005c940: 2020 2773 796d 626f 6c27 3a20 7379 6d62    'symbol': symb
+0005c950: 6f6c 2c0a 2020 2020 2020 2020 2020 2020  ol,.            
+0005c960: 2761 6d6f 756e 7427 3a20 616d 6f75 6e74  'amount': amount
+0005c970: 2c0a 2020 2020 2020 2020 7d29 0a0a 2020  ,.        })..  
+0005c980: 2020 6465 6620 7061 7273 655f 6d61 7267    def parse_marg
+0005c990: 696e 5f6c 6f61 6e28 7365 6c66 2c20 696e  in_loan(self, in
+0005c9a0: 666f 2c20 6375 7272 656e 6379 3d4e 6f6e  fo, currency=Non
+0005c9b0: 6529 3a0a 2020 2020 2020 2020 230a 2020  e):.        #.  
+0005c9c0: 2020 2020 2020 2320 626f 7272 6f77 4d61        # borrowMa
+0005c9d0: 7267 696e 0a20 2020 2020 2020 2023 0a20  rgin.        #. 
+0005c9e0: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
+0005c9f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0005ca00: 2022 7472 616e 7361 6374 4964 223a 2022   "transactId": "
+0005ca10: 3134 3134 3322 0a20 2020 2020 2020 2023  14143".        #
+0005ca20: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+0005ca30: 0a20 2020 2020 2020 2023 2072 6570 6179  .        # repay
+0005ca40: 4d61 7267 696e 0a20 2020 2020 2020 2023  Margin.        #
+0005ca50: 0a20 2020 2020 2020 2023 2020 2020 207b  .        #     {
+0005ca60: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0005ca70: 2020 2022 7265 7061 7949 6422 3a20 2231     "repayId": "1
+0005ca80: 3231 3238 220a 2020 2020 2020 2020 2320  2128".        # 
+0005ca90: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
+0005caa0: 2020 2020 2020 2020 7265 7475 726e 207b          return {
+0005cab0: 0a20 2020 2020 2020 2020 2020 2027 6964  .            'id
+0005cac0: 273a 2073 656c 662e 7361 6665 5f73 7472  ': self.safe_str
+0005cad0: 696e 675f 3228 696e 666f 2c20 2774 7261  ing_2(info, 'tra
+0005cae0: 6e73 6163 7449 6427 2c20 2772 6570 6179  nsactId', 'repay
+0005caf0: 4964 2729 2c0a 2020 2020 2020 2020 2020  Id'),.          
+0005cb00: 2020 2763 7572 7265 6e63 7927 3a20 7365    'currency': se
+0005cb10: 6c66 2e73 6166 655f 7374 7269 6e67 2863  lf.safe_string(c
+0005cb20: 7572 7265 6e63 792c 2027 636f 6465 2729  urrency, 'code')
+0005cb30: 2c0a 2020 2020 2020 2020 2020 2020 2761  ,.            'a
+0005cb40: 6d6f 756e 7427 3a20 4e6f 6e65 2c0a 2020  mount': None,.  
+0005cb50: 2020 2020 2020 2020 2020 2773 796d 626f            'symbo
+0005cb60: 6c27 3a20 4e6f 6e65 2c0a 2020 2020 2020  l': None,.      
+0005cb70: 2020 2020 2020 2774 696d 6573 7461 6d70        'timestamp
+0005cb80: 273a 204e 6f6e 652c 0a20 2020 2020 2020  ': None,.       
+0005cb90: 2020 2020 2027 6461 7465 7469 6d65 273a       'datetime':
+0005cba0: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
+0005cbb0: 2020 2027 696e 666f 273a 2069 6e66 6f2c     'info': info,
+0005cbc0: 0a20 2020 2020 2020 207d 0a0a 2020 2020  .        }..    
+0005cbd0: 6465 6620 7061 7273 655f 7472 616e 7366  def parse_transf
+0005cbe0: 6572 5f73 7461 7475 7328 7365 6c66 2c20  er_status(self, 
+0005cbf0: 7374 6174 7573 293a 0a20 2020 2020 2020  status):.       
+0005cc00: 2073 7461 7475 7365 7320 3d20 7b0a 2020   statuses = {.  
+0005cc10: 2020 2020 2020 2020 2020 2730 273a 2027            '0': '
+0005cc20: 6f6b 272c 0a20 2020 2020 2020 2020 2020  ok',.           
+0005cc30: 2027 4f4b 273a 2027 6f6b 272c 0a20 2020   'OK': 'ok',.   
+0005cc40: 2020 2020 2020 2020 2027 5355 4343 4553           'SUCCES
+0005cc50: 5327 3a20 276f 6b27 2c0a 2020 2020 2020  S': 'ok',.      
+0005cc60: 2020 7d0a 2020 2020 2020 2020 7265 7475    }.        retu
+0005cc70: 726e 2073 656c 662e 7361 6665 5f73 7472  rn self.safe_str
+0005cc80: 696e 6728 7374 6174 7573 6573 2c20 7374  ing(statuses, st
+0005cc90: 6174 7573 2c20 7374 6174 7573 290a 0a20  atus, status).. 
+0005cca0: 2020 2064 6566 2070 6172 7365 5f74 7261     def parse_tra
+0005ccb0: 6e73 6665 7228 7365 6c66 2c20 7472 616e  nsfer(self, tran
+0005ccc0: 7366 6572 2c20 6375 7272 656e 6379 3d4e  sfer, currency=N
+0005ccd0: 6f6e 6529 3a0a 2020 2020 2020 2020 230a  one):.        #.
+0005cce0: 2020 2020 2020 2020 2320 7472 616e 7366          # transf
+0005ccf0: 6572 0a20 2020 2020 2020 2023 0a20 2020  er.        #.   
+0005cd00: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
+0005cd10: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0005cd20: 7472 616e 7366 6572 4964 223a 2022 3232  transferId": "22
+0005cd30: 6332 6263 3131 2d65 6435 622d 3439 6134  c2bc11-ed5b-49a4
+0005cd40: 2d38 3634 372d 6334 6530 6635 6636 6632  -8647-c4e0f5f6f2
+0005cd50: 6232 2220 2023 2074 7261 6e73 6665 725f  b2"  # transfer_
+0005cd60: 6964 2069 6e20 7631 0a20 2020 2020 2020  id in v1.       
+0005cd70: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
+0005cd80: 2023 0a20 2020 2020 2020 2023 2066 6574   #.        # fet
+0005cd90: 6368 5472 616e 7366 6572 730a 2020 2020  chTransfers.    
+0005cda0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+0005cdb0: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+0005cdc0: 2020 2020 2020 2020 2274 7261 6e73 6665          "transfe
+0005cdd0: 7249 6422 3a20 2265 3963 3432 3163 342d  rId": "e9c421c4-
+0005cde0: 6230 3130 2d34 6231 362d 6162 6436 2d31  b010-4b16-abd6-1
+0005cdf0: 3036 3137 3966 3237 3730 3222 2c20 2023  06179f27702",  #
+0005ce00: 2074 7261 6e73 6665 725f 6964 2069 6e20   transfer_id in 
+0005ce10: 7631 0a20 2020 2020 2020 2023 2020 2020  v1.        #    
+0005ce20: 2020 2020 2022 636f 696e 223a 2022 5553       "coin": "US
+0005ce30: 4454 222c 0a20 2020 2020 2020 2023 2020  DT",.        #  
+0005ce40: 2020 2020 2020 2022 616d 6f75 6e74 223a         "amount":
+0005ce50: 2022 3822 2c0a 2020 2020 2020 2020 2320   "8",.        # 
+0005ce60: 2020 2020 2020 2020 2266 726f 6d41 6363          "fromAcc
+0005ce70: 6f75 6e74 5479 7065 223a 2022 4655 4e44  ountType": "FUND
+0005ce80: 222c 2020 2320 6672 6f6d 5f61 6363 6f75  ",  # from_accou
+0005ce90: 6e74 5f74 7970 6520 696e 2076 310a 2020  nt_type in v1.  
+0005cea0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0005ceb0: 2274 6f41 6363 6f75 6e74 5479 7065 223a  "toAccountType":
+0005cec0: 2022 5350 4f54 222c 2020 2320 746f 5f61   "SPOT",  # to_a
+0005ced0: 6363 6f75 6e74 5f74 7970 6520 696e 2076  ccount_type in v
+0005cee0: 310a 2020 2020 2020 2020 2320 2020 2020  1.        #     
+0005cef0: 2020 2020 2274 696d 6573 7461 6d70 223a      "timestamp":
+0005cf00: 2022 3136 3636 3837 3934 3236 3030 3022   "1666879426000"
+0005cf10: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0005cf20: 2020 2020 2273 7461 7475 7322 3a20 2253      "status": "S
+0005cf30: 5543 4345 5353 220a 2020 2020 2020 2020  UCCESS".        
+0005cf40: 2320 2020 2020 207d 0a20 2020 2020 2020  #      }.       
+0005cf50: 2023 0a20 2020 2020 2020 2063 7572 7265   #.        curre
+0005cf60: 6e63 7949 6420 3d20 7365 6c66 2e73 6166  ncyId = self.saf
+0005cf70: 655f 7374 7269 6e67 2874 7261 6e73 6665  e_string(transfe
+0005cf80: 722c 2027 636f 696e 2729 0a20 2020 2020  r, 'coin').     
+0005cf90: 2020 2074 696d 6573 7461 6d70 203d 2073     timestamp = s
+0005cfa0: 656c 662e 7361 6665 5f69 6e74 6567 6572  elf.safe_integer
+0005cfb0: 2874 7261 6e73 6665 722c 2027 7469 6d65  (transfer, 'time
+0005cfc0: 7374 616d 7027 290a 2020 2020 2020 2020  stamp').        
+0005cfd0: 6672 6f6d 4163 636f 756e 7449 6420 3d20  fromAccountId = 
+0005cfe0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+0005cff0: 5f32 2874 7261 6e73 6665 722c 2027 6672  _2(transfer, 'fr
+0005d000: 6f6d 4163 636f 756e 7454 7970 6527 2c20  omAccountType', 
+0005d010: 2766 726f 6d5f 6163 636f 756e 745f 7479  'from_account_ty
+0005d020: 7065 2729 0a20 2020 2020 2020 2074 6f41  pe').        toA
+0005d030: 6363 6f75 6e74 4964 203d 2073 656c 662e  ccountId = self.
+0005d040: 7361 6665 5f73 7472 696e 675f 3228 7472  safe_string_2(tr
+0005d050: 616e 7366 6572 2c20 2774 6f41 6363 6f75  ansfer, 'toAccou
+0005d060: 6e74 5479 7065 272c 2027 746f 5f61 6363  ntType', 'to_acc
+0005d070: 6f75 6e74 5f74 7970 6527 290a 2020 2020  ount_type').    
+0005d080: 2020 2020 6163 636f 756e 7449 6473 203d      accountIds =
+0005d090: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+0005d0a0: 2873 656c 662e 6f70 7469 6f6e 732c 2027  (self.options, '
+0005d0b0: 6163 636f 756e 7473 4279 4964 272c 207b  accountsById', {
+0005d0c0: 7d29 0a20 2020 2020 2020 2066 726f 6d41  }).        fromA
+0005d0d0: 6363 6f75 6e74 203d 2073 656c 662e 7361  ccount = self.sa
+0005d0e0: 6665 5f73 7472 696e 6728 6163 636f 756e  fe_string(accoun
+0005d0f0: 7449 6473 2c20 6672 6f6d 4163 636f 756e  tIds, fromAccoun
+0005d100: 7449 642c 2066 726f 6d41 6363 6f75 6e74  tId, fromAccount
+0005d110: 4964 290a 2020 2020 2020 2020 746f 4163  Id).        toAc
+0005d120: 636f 756e 7420 3d20 7365 6c66 2e73 6166  count = self.saf
+0005d130: 655f 7374 7269 6e67 2861 6363 6f75 6e74  e_string(account
+0005d140: 4964 732c 2074 6f41 6363 6f75 6e74 4964  Ids, toAccountId
+0005d150: 2c20 746f 4163 636f 756e 7449 6429 0a20  , toAccountId). 
+0005d160: 2020 2020 2020 2072 6574 7572 6e20 7b0a         return {.
+0005d170: 2020 2020 2020 2020 2020 2020 2769 6e66              'inf
+0005d180: 6f27 3a20 7472 616e 7366 6572 2c0a 2020  o': transfer,.  
+0005d190: 2020 2020 2020 2020 2020 2769 6427 3a20            'id': 
+0005d1a0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+0005d1b0: 5f32 2874 7261 6e73 6665 722c 2027 7472  _2(transfer, 'tr
+0005d1c0: 616e 7366 6572 4964 272c 2027 7472 616e  ansferId', 'tran
+0005d1d0: 7366 6572 5f69 6427 292c 0a20 2020 2020  sfer_id'),.     
+0005d1e0: 2020 2020 2020 2027 7469 6d65 7374 616d         'timestam
+0005d1f0: 7027 3a20 7469 6d65 7374 616d 702c 0a20  p': timestamp,. 
+0005d200: 2020 2020 2020 2020 2020 2027 6461 7465             'date
+0005d210: 7469 6d65 273a 2073 656c 662e 6973 6f38  time': self.iso8
+0005d220: 3630 3128 7469 6d65 7374 616d 7029 2c0a  601(timestamp),.
+0005d230: 2020 2020 2020 2020 2020 2020 2763 7572              'cur
+0005d240: 7265 6e63 7927 3a20 7365 6c66 2e73 6166  rency': self.saf
+0005d250: 655f 6375 7272 656e 6379 5f63 6f64 6528  e_currency_code(
+0005d260: 6375 7272 656e 6379 4964 2c20 6375 7272  currencyId, curr
+0005d270: 656e 6379 292c 0a20 2020 2020 2020 2020  ency),.         
+0005d280: 2020 2027 616d 6f75 6e74 273a 2073 656c     'amount': sel
+0005d290: 662e 7361 6665 5f6e 756d 6265 7228 7472  f.safe_number(tr
+0005d2a0: 616e 7366 6572 2c20 2761 6d6f 756e 7427  ansfer, 'amount'
+0005d2b0: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
+0005d2c0: 6672 6f6d 4163 636f 756e 7427 3a20 6672  fromAccount': fr
+0005d2d0: 6f6d 4163 636f 756e 742c 0a20 2020 2020  omAccount,.     
+0005d2e0: 2020 2020 2020 2027 746f 4163 636f 756e         'toAccoun
+0005d2f0: 7427 3a20 746f 4163 636f 756e 742c 0a20  t': toAccount,. 
+0005d300: 2020 2020 2020 2020 2020 2027 7374 6174             'stat
+0005d310: 7573 273a 2073 656c 662e 7061 7273 655f  us': self.parse_
+0005d320: 7472 616e 7366 6572 5f73 7461 7475 7328  transfer_status(
+0005d330: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+0005d340: 2874 7261 6e73 6665 722c 2027 7374 6174  (transfer, 'stat
+0005d350: 7573 2729 292c 0a20 2020 2020 2020 207d  us')),.        }
+0005d360: 0a0a 2020 2020 6173 796e 6320 6465 6620  ..    async def 
+0005d370: 6665 7463 685f 6465 7269 7661 7469 7665  fetch_derivative
+0005d380: 735f 6d61 726b 6574 5f6c 6576 6572 6167  s_market_leverag
+0005d390: 655f 7469 6572 7328 7365 6c66 2c20 7379  e_tiers(self, sy
+0005d3a0: 6d62 6f6c 3a20 7374 722c 2070 6172 616d  mbol: str, param
+0005d3b0: 733d 7b7d 293a 0a20 2020 2020 2020 2061  s={}):.        a
+0005d3c0: 7761 6974 2073 656c 662e 6c6f 6164 5f6d  wait self.load_m
+0005d3d0: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
+0005d3e0: 206d 6172 6b65 7420 3d20 7365 6c66 2e6d   market = self.m
+0005d3f0: 6172 6b65 7428 7379 6d62 6f6c 290a 2020  arket(symbol).  
+0005d400: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
+0005d410: 7b0a 2020 2020 2020 2020 2020 2020 2773  {.            's
+0005d420: 796d 626f 6c27 3a20 6d61 726b 6574 5b27  ymbol': market['
+0005d430: 6964 275d 2c0a 2020 2020 2020 2020 7d0a  id'],.        }.
+0005d440: 2020 2020 2020 2020 6966 206d 6172 6b65          if marke
+0005d450: 745b 276c 696e 6561 7227 5d3a 0a20 2020  t['linear']:.   
+0005d460: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0005d470: 5b27 6361 7465 676f 7279 275d 203d 2027  ['category'] = '
+0005d480: 6c69 6e65 6172 270a 2020 2020 2020 2020  linear'.        
+0005d490: 656c 6966 206d 6172 6b65 745b 2769 6e76  elif market['inv
+0005d4a0: 6572 7365 275d 3a0a 2020 2020 2020 2020  erse']:.        
+0005d4b0: 2020 2020 7265 7175 6573 745b 2763 6174      request['cat
+0005d4c0: 6567 6f72 7927 5d20 3d20 2769 6e76 6572  egory'] = 'inver
+0005d4d0: 7365 270a 2020 2020 2020 2020 7265 7370  se'.        resp
+0005d4e0: 6f6e 7365 203d 2061 7761 6974 2073 656c  onse = await sel
+0005d4f0: 662e 7075 626c 6963 4765 7456 354d 6172  f.publicGetV5Mar
+0005d500: 6b65 7452 6973 6b4c 696d 6974 2873 656c  ketRiskLimit(sel
+0005d510: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
+0005d520: 2c20 7061 7261 6d73 2929 0a20 2020 2020  , params)).     
+0005d530: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
+0005d540: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
+0005d550: 2020 2020 2020 2022 7265 7443 6f64 6522         "retCode"
+0005d560: 3a20 302c 0a20 2020 2020 2020 2023 2020  : 0,.        #  
+0005d570: 2020 2020 2020 2022 7265 744d 7367 223a         "retMsg":
+0005d580: 2022 4f4b 222c 0a20 2020 2020 2020 2023   "OK",.        #
+0005d590: 2020 2020 2020 2020 2022 7265 7375 6c74           "result
+0005d5a0: 223a 207b 0a20 2020 2020 2020 2023 2020  ": {.        #  
+0005d5b0: 2020 2020 2020 2020 2020 2022 6361 7465             "cate
+0005d5c0: 676f 7279 223a 2022 696e 7665 7273 6522  gory": "inverse"
+0005d5d0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0005d5e0: 2020 2020 2020 2020 226c 6973 7422 3a20          "list": 
+0005d5f0: 5b0a 2020 2020 2020 2020 2320 2020 2020  [.        #     
+0005d600: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+0005d610: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0005d620: 2020 2020 2020 2020 2020 2020 2269 6422              "id"
+0005d630: 3a20 312c 0a20 2020 2020 2020 2023 2020  : 1,.        #  
+0005d640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005d650: 2020 2022 7379 6d62 6f6c 223a 2022 4254     "symbol": "BT
+0005d660: 4355 5344 222c 0a20 2020 2020 2020 2023  CUSD",.        #
+0005d670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005d680: 2020 2020 2022 7269 736b 4c69 6d69 7456       "riskLimitV
+0005d690: 616c 7565 223a 2022 3135 3022 2c0a 2020  alue": "150",.  
+0005d6a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0005d6b0: 2020 2020 2020 2020 2020 2020 226d 6169              "mai
+0005d6c0: 6e74 656e 616e 6365 4d61 7267 696e 223a  ntenanceMargin":
+0005d6d0: 2022 302e 3522 2c0a 2020 2020 2020 2020   "0.5",.        
+0005d6e0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0005d6f0: 2020 2020 2020 2269 6e69 7469 616c 4d61        "initialMa
+0005d700: 7267 696e 223a 2022 3122 2c0a 2020 2020  rgin": "1",.    
+0005d710: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0005d720: 2020 2020 2020 2020 2020 2269 734c 6f77            "isLow
+0005d730: 6573 7452 6973 6b22 3a20 312c 0a20 2020  estRisk": 1,.   
+0005d740: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0005d750: 2020 2020 2020 2020 2020 2022 6d61 784c             "maxL
+0005d760: 6576 6572 6167 6522 3a20 2231 3030 2e30  everage": "100.0
+0005d770: 3022 0a20 2020 2020 2020 2023 2020 2020  0".        #    
+0005d780: 2020 2020 2020 2020 2020 2020 207d 2c0a               },.
+0005d790: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005d7a0: 2020 2020 2020 2e2e 2e2e 0a20 2020 2020        .....     
+0005d7b0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0005d7c0: 205d 0a20 2020 2020 2020 2023 2020 2020   ].        #    
+0005d7d0: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
+0005d7e0: 2320 2020 2020 2020 2020 2272 6574 4578  #         "retEx
+0005d7f0: 7449 6e66 6f22 3a20 7b7d 2c0a 2020 2020  tInfo": {},.    
+0005d800: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
+0005d810: 696d 6522 3a20 3136 3732 3035 3434 3838  ime": 1672054488
+0005d820: 3031 300a 2020 2020 2020 2020 2320 2020  010.        #   
+0005d830: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
+0005d840: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
+0005d850: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
+0005d860: 6573 706f 6e73 652c 2027 7265 7375 6c74  esponse, 'result
+0005d870: 2729 0a20 2020 2020 2020 2074 6965 7273  ').        tiers
+0005d880: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+0005d890: 7565 2872 6573 756c 742c 2027 6c69 7374  ue(result, 'list
+0005d8a0: 2729 0a20 2020 2020 2020 2072 6574 7572  ').        retur
+0005d8b0: 6e20 7365 6c66 2e70 6172 7365 5f6d 6172  n self.parse_mar
+0005d8c0: 6b65 745f 6c65 7665 7261 6765 5f74 6965  ket_leverage_tie
+0005d8d0: 7273 2874 6965 7273 2c20 6d61 726b 6574  rs(tiers, market
+0005d8e0: 290a 0a20 2020 2061 7379 6e63 2064 6566  )..    async def
+0005d8f0: 2066 6574 6368 5f6d 6172 6b65 745f 6c65   fetch_market_le
+0005d900: 7665 7261 6765 5f74 6965 7273 2873 656c  verage_tiers(sel
+0005d910: 662c 2073 796d 626f 6c3a 2073 7472 2c20  f, symbol: str, 
+0005d920: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
+0005d930: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+0005d940: 7265 7472 6965 7665 2069 6e66 6f72 6d61  retrieve informa
+0005d950: 7469 6f6e 206f 6e20 7468 6520 6d61 7869  tion on the maxi
+0005d960: 6d75 6d20 6c65 7665 7261 6765 2c20 616e  mum leverage, an
+0005d970: 6420 6d61 696e 7465 6e61 6e63 6520 6d61  d maintenance ma
+0005d980: 7267 696e 2066 6f72 2074 7261 6465 7320  rgin for trades 
+0005d990: 6f66 2076 6172 7969 6e67 2074 7261 6465  of varying trade
+0005d9a0: 2073 697a 6573 2066 6f72 2061 2073 696e   sizes for a sin
+0005d9b0: 676c 6520 6d61 726b 6574 0a20 2020 2020  gle market.     
+0005d9c0: 2020 2073 6565 2068 7474 7073 3a2f 2f62     see https://b
+0005d9d0: 7962 6974 2d65 7863 6861 6e67 652e 6769  ybit-exchange.gi
+0005d9e0: 7468 7562 2e69 6f2f 646f 6373 2f76 352f  thub.io/docs/v5/
+0005d9f0: 6d61 726b 6574 2f72 6973 6b2d 6c69 6d69  market/risk-limi
+0005da00: 740a 2020 2020 2020 2020 3a70 6172 616d  t.        :param
+0005da10: 2073 7472 2073 796d 626f 6c3a 2075 6e69   str symbol: uni
+0005da20: 6669 6564 206d 6172 6b65 7420 7379 6d62  fied market symb
+0005da30: 6f6c 0a20 2020 2020 2020 203a 7061 7261  ol.        :para
+0005da40: 6d20 6469 6374 2070 6172 616d 733a 2065  m dict params: e
+0005da50: 7874 7261 2070 6172 616d 6574 6572 7320  xtra parameters 
+0005da60: 7370 6563 6966 6963 2074 6f20 7468 6520  specific to the 
+0005da70: 6279 6269 7420 6170 6920 656e 6470 6f69  bybit api endpoi
+0005da80: 6e74 0a20 2020 2020 2020 203a 7265 7475  nt.        :retu
+0005da90: 726e 7320 6469 6374 3a20 6120 606c 6576  rns dict: a `lev
+0005daa0: 6572 6167 6520 7469 6572 7320 7374 7275  erage tiers stru
+0005dab0: 6374 7572 6520 3c68 7474 7073 3a2f 2f64  cture <https://d
+0005dac0: 6f63 732e 6363 7874 2e63 6f6d 2f23 2f3f  ocs.ccxt.com/#/?
+0005dad0: 6964 3d6c 6576 6572 6167 652d 7469 6572  id=leverage-tier
+0005dae0: 732d 7374 7275 6374 7572 653e 600a 2020  s-structure>`.  
+0005daf0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+0005db00: 2020 6177 6169 7420 7365 6c66 2e6c 6f61    await self.loa
+0005db10: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
+0005db20: 2020 2020 7265 7175 6573 7420 3d20 7b7d      request = {}
+0005db30: 0a20 2020 2020 2020 206d 6172 6b65 7420  .        market 
+0005db40: 3d20 4e6f 6e65 0a20 2020 2020 2020 206d  = None.        m
+0005db50: 6172 6b65 7420 3d20 7365 6c66 2e6d 6172  arket = self.mar
+0005db60: 6b65 7428 7379 6d62 6f6c 290a 2020 2020  ket(symbol).    
+0005db70: 2020 2020 6966 206d 6172 6b65 745b 2773      if market['s
+0005db80: 706f 7427 5d20 6f72 206d 6172 6b65 745b  pot'] or market[
+0005db90: 276f 7074 696f 6e27 5d3a 0a20 2020 2020  'option']:.     
+0005dba0: 2020 2020 2020 2072 6169 7365 2042 6164         raise Bad
+0005dbb0: 5265 7175 6573 7428 7365 6c66 2e69 6420  Request(self.id 
+0005dbc0: 2b20 2720 6665 7463 684d 6172 6b65 744c  + ' fetchMarketL
+0005dbd0: 6576 6572 6167 6554 6965 7273 2829 2073  everageTiers() s
+0005dbe0: 796d 626f 6c20 646f 6573 206e 6f74 2073  ymbol does not s
+0005dbf0: 7570 706f 7274 206d 6172 6b65 7420 2720  upport market ' 
+0005dc00: 2b20 7379 6d62 6f6c 290a 2020 2020 2020  + symbol).      
+0005dc10: 2020 7265 7175 6573 745b 2773 796d 626f    request['symbo
+0005dc20: 6c27 5d20 3d20 6d61 726b 6574 5b27 6964  l'] = market['id
+0005dc30: 275d 0a20 2020 2020 2020 2072 6574 7572  '].        retur
+0005dc40: 6e20 6177 6169 7420 7365 6c66 2e66 6574  n await self.fet
+0005dc50: 6368 5f64 6572 6976 6174 6976 6573 5f6d  ch_derivatives_m
+0005dc60: 6172 6b65 745f 6c65 7665 7261 6765 5f74  arket_leverage_t
+0005dc70: 6965 7273 2873 796d 626f 6c2c 2070 6172  iers(symbol, par
+0005dc80: 616d 7329 0a0a 2020 2020 6465 6620 7061  ams)..    def pa
+0005dc90: 7273 655f 6d61 726b 6574 5f6c 6576 6572  rse_market_lever
+0005dca0: 6167 655f 7469 6572 7328 7365 6c66 2c20  age_tiers(self, 
+0005dcb0: 696e 666f 2c20 6d61 726b 6574 3d4e 6f6e  info, market=Non
+0005dcc0: 6529 3a0a 2020 2020 2020 2020 230a 2020  e):.        #.  
+0005dcd0: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
+0005dce0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0005dcf0: 2269 6422 3a20 312c 0a20 2020 2020 2020  "id": 1,.       
+0005dd00: 2023 2020 2020 2020 2020 2022 7379 6d62   #         "symb
+0005dd10: 6f6c 223a 2022 4254 4355 5344 222c 0a20  ol": "BTCUSD",. 
+0005dd20: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0005dd30: 2022 7269 736b 4c69 6d69 7456 616c 7565   "riskLimitValue
+0005dd40: 223a 2022 3135 3022 2c0a 2020 2020 2020  ": "150",.      
+0005dd50: 2020 2320 2020 2020 2020 2020 226d 6169    #         "mai
+0005dd60: 6e74 656e 616e 6365 4d61 7267 696e 223a  ntenanceMargin":
+0005dd70: 2022 302e 3522 2c0a 2020 2020 2020 2020   "0.5",.        
+0005dd80: 2320 2020 2020 2020 2020 2269 6e69 7469  #         "initi
+0005dd90: 616c 4d61 7267 696e 223a 2022 3122 2c0a  alMargin": "1",.
+0005dda0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005ddb0: 2020 2269 734c 6f77 6573 7452 6973 6b22    "isLowestRisk"
+0005ddc0: 3a20 312c 0a20 2020 2020 2020 2023 2020  : 1,.        #  
+0005ddd0: 2020 2020 2020 2022 6d61 784c 6576 6572         "maxLever
+0005dde0: 6167 6522 3a20 2231 3030 2e30 3022 0a20  age": "100.00". 
+0005ddf0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+0005de00: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+0005de10: 206d 696e 4e6f 7469 6f6e 616c 203d 2030   minNotional = 0
+0005de20: 0a20 2020 2020 2020 2074 6965 7273 203d  .        tiers =
+0005de30: 205b 5d0a 2020 2020 2020 2020 666f 7220   [].        for 
+0005de40: 6920 696e 2072 616e 6765 2830 2c20 6c65  i in range(0, le
+0005de50: 6e28 696e 666f 2929 3a0a 2020 2020 2020  n(info)):.      
+0005de60: 2020 2020 2020 6974 656d 203d 2069 6e66        item = inf
+0005de70: 6f5b 695d 0a20 2020 2020 2020 2020 2020  o[i].           
+0005de80: 206d 6178 4e6f 7469 6f6e 616c 203d 2073   maxNotional = s
+0005de90: 656c 662e 7361 6665 5f6e 756d 6265 7228  elf.safe_number(
+0005dea0: 6974 656d 2c20 2772 6973 6b4c 696d 6974  item, 'riskLimit
+0005deb0: 5661 6c75 6527 290a 2020 2020 2020 2020  Value').        
+0005dec0: 2020 2020 7469 6572 732e 6170 7065 6e64      tiers.append
+0005ded0: 287b 0a20 2020 2020 2020 2020 2020 2020  ({.             
+0005dee0: 2020 2027 7469 6572 273a 2073 656c 662e     'tier': self.
+0005def0: 7375 6d28 692c 2031 292c 0a20 2020 2020  sum(i, 1),.     
+0005df00: 2020 2020 2020 2020 2020 2027 6375 7272             'curr
+0005df10: 656e 6379 273a 206d 6172 6b65 745b 2762  ency': market['b
+0005df20: 6173 6527 5d2c 0a20 2020 2020 2020 2020  ase'],.         
+0005df30: 2020 2020 2020 2027 6d69 6e4e 6f74 696f         'minNotio
+0005df40: 6e61 6c27 3a20 6d69 6e4e 6f74 696f 6e61  nal': minNotiona
+0005df50: 6c2c 0a20 2020 2020 2020 2020 2020 2020  l,.             
+0005df60: 2020 2027 6d61 784e 6f74 696f 6e61 6c27     'maxNotional'
+0005df70: 3a20 6d61 784e 6f74 696f 6e61 6c2c 0a20  : maxNotional,. 
+0005df80: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+0005df90: 6d61 696e 7465 6e61 6e63 654d 6172 6769  maintenanceMargi
+0005dfa0: 6e52 6174 6527 3a20 7365 6c66 2e73 6166  nRate': self.saf
+0005dfb0: 655f 6e75 6d62 6572 2869 7465 6d2c 2027  e_number(item, '
+0005dfc0: 6d61 696e 7465 6e61 6e63 654d 6172 6769  maintenanceMargi
+0005dfd0: 6e27 292c 0a20 2020 2020 2020 2020 2020  n'),.           
+0005dfe0: 2020 2020 2027 6d61 784c 6576 6572 6167       'maxLeverag
+0005dff0: 6527 3a20 7365 6c66 2e73 6166 655f 6e75  e': self.safe_nu
+0005e000: 6d62 6572 2869 7465 6d2c 2027 6d61 784c  mber(item, 'maxL
+0005e010: 6576 6572 6167 6527 292c 0a20 2020 2020  everage'),.     
+0005e020: 2020 2020 2020 2020 2020 2027 696e 666f             'info
+0005e030: 273a 2069 7465 6d2c 0a20 2020 2020 2020  ': item,.       
+0005e040: 2020 2020 207d 290a 2020 2020 2020 2020       }).        
+0005e050: 2020 2020 6d69 6e4e 6f74 696f 6e61 6c20      minNotional 
+0005e060: 3d20 6d61 784e 6f74 696f 6e61 6c0a 2020  = maxNotional.  
+0005e070: 2020 2020 2020 7265 7475 726e 2074 6965        return tie
+0005e080: 7273 0a0a 2020 2020 6465 6620 7061 7273  rs..    def pars
+0005e090: 655f 7472 6164 696e 675f 6665 6528 7365  e_trading_fee(se
+0005e0a0: 6c66 2c20 6665 652c 206d 6172 6b65 743d  lf, fee, market=
+0005e0b0: 4e6f 6e65 293a 0a20 2020 2020 2020 2023  None):.        #
+0005e0c0: 0a20 2020 2020 2020 2023 2020 2020 207b  .        #     {
+0005e0d0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0005e0e0: 2020 2022 7379 6d62 6f6c 223a 2022 4554     "symbol": "ET
+0005e0f0: 4855 5344 5422 2c0a 2020 2020 2020 2020  HUSDT",.        
+0005e100: 2320 2020 2020 2020 2020 226d 616b 6572  #         "maker
+0005e110: 4665 6552 6174 6522 3a20 302e 3030 312c  FeeRate": 0.001,
+0005e120: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0005e130: 2020 2022 7461 6b65 7246 6565 5261 7465     "takerFeeRate
+0005e140: 223a 2030 2e30 3031 0a20 2020 2020 2020  ": 0.001.       
+0005e150: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
+0005e160: 2023 0a20 2020 2020 2020 206d 6172 6b65   #.        marke
+0005e170: 7449 6420 3d20 7365 6c66 2e73 6166 655f  tId = self.safe_
+0005e180: 7374 7269 6e67 2866 6565 2c20 2773 796d  string(fee, 'sym
+0005e190: 626f 6c27 290a 2020 2020 2020 2020 7379  bol').        sy
+0005e1a0: 6d62 6f6c 203d 2073 656c 662e 7361 6665  mbol = self.safe
+0005e1b0: 5f73 796d 626f 6c28 6d61 726b 6574 4964  _symbol(marketId
+0005e1c0: 2c20 4e6f 6e65 2c20 4e6f 6e65 2c20 2763  , None, None, 'c
+0005e1d0: 6f6e 7472 6163 7427 290a 2020 2020 2020  ontract').      
+0005e1e0: 2020 7265 7475 726e 207b 0a20 2020 2020    return {.     
+0005e1f0: 2020 2020 2020 2027 696e 666f 273a 2066         'info': f
+0005e200: 6565 2c0a 2020 2020 2020 2020 2020 2020  ee,.            
+0005e210: 2773 796d 626f 6c27 3a20 7379 6d62 6f6c  'symbol': symbol
+0005e220: 2c0a 2020 2020 2020 2020 2020 2020 276d  ,.            'm
+0005e230: 616b 6572 273a 2073 656c 662e 7361 6665  aker': self.safe
+0005e240: 5f6e 756d 6265 7228 6665 652c 2027 6d61  _number(fee, 'ma
+0005e250: 6b65 7246 6565 5261 7465 2729 2c0a 2020  kerFeeRate'),.  
+0005e260: 2020 2020 2020 2020 2020 2774 616b 6572            'taker
+0005e270: 273a 2073 656c 662e 7361 6665 5f6e 756d  ': self.safe_num
+0005e280: 6265 7228 6665 652c 2027 7461 6b65 7246  ber(fee, 'takerF
+0005e290: 6565 5261 7465 2729 2c0a 2020 2020 2020  eeRate'),.      
+0005e2a0: 2020 7d0a 0a20 2020 2061 7379 6e63 2064    }..    async d
+0005e2b0: 6566 2066 6574 6368 5f74 7261 6469 6e67  ef fetch_trading
+0005e2c0: 5f66 6565 2873 656c 662c 2073 796d 626f  _fee(self, symbo
+0005e2d0: 6c3a 2073 7472 2c20 7061 7261 6d73 3d7b  l: str, params={
+0005e2e0: 7d29 3a0a 2020 2020 2020 2020 2222 220a  }):.        """.
+0005e2f0: 2020 2020 2020 2020 6665 7463 6820 7468          fetch th
+0005e300: 6520 7472 6164 696e 6720 6665 6573 2066  e trading fees f
+0005e310: 6f72 2061 206d 6172 6b65 740a 2020 2020  or a market.    
+0005e320: 2020 2020 7365 6520 6874 7470 733a 2f2f      see https://
+0005e330: 6279 6269 742d 6578 6368 616e 6765 2e67  bybit-exchange.g
+0005e340: 6974 6875 622e 696f 2f64 6f63 732f 7635  ithub.io/docs/v5
+0005e350: 2f61 6363 6f75 6e74 2f66 6565 2d72 6174  /account/fee-rat
+0005e360: 650a 2020 2020 2020 2020 3a70 6172 616d  e.        :param
+0005e370: 2073 7472 2073 796d 626f 6c3a 2075 6e69   str symbol: uni
+0005e380: 6669 6564 206d 6172 6b65 7420 7379 6d62  fied market symb
+0005e390: 6f6c 0a20 2020 2020 2020 203a 7061 7261  ol.        :para
+0005e3a0: 6d20 6469 6374 2070 6172 616d 733a 2065  m dict params: e
+0005e3b0: 7874 7261 2070 6172 616d 6574 6572 7320  xtra parameters 
+0005e3c0: 7370 6563 6966 6963 2074 6f20 7468 6520  specific to the 
+0005e3d0: 6279 6269 7420 6170 6920 656e 6470 6f69  bybit api endpoi
+0005e3e0: 6e74 0a20 2020 2020 2020 203a 7265 7475  nt.        :retu
+0005e3f0: 726e 7320 6469 6374 3a20 6120 6066 6565  rns dict: a `fee
+0005e400: 2073 7472 7563 7475 7265 203c 6874 7470   structure <http
+0005e410: 733a 2f2f 646f 6373 2e63 6378 742e 636f  s://docs.ccxt.co
+0005e420: 6d2f 232f 3f69 643d 6665 652d 7374 7275  m/#/?id=fee-stru
+0005e430: 6374 7572 653e 600a 2020 2020 2020 2020  cture>`.        
+0005e440: 2222 220a 2020 2020 2020 2020 6177 6169  """.        awai
+0005e450: 7420 7365 6c66 2e6c 6f61 645f 6d61 726b  t self.load_mark
+0005e460: 6574 7328 290a 2020 2020 2020 2020 6d61  ets().        ma
+0005e470: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
+0005e480: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
+0005e490: 2020 2069 6620 6d61 726b 6574 5b27 7370     if market['sp
+0005e4a0: 6f74 275d 3a0a 2020 2020 2020 2020 2020  ot']:.          
+0005e4b0: 2020 7261 6973 6520 4e6f 7453 7570 706f    raise NotSuppo
+0005e4c0: 7274 6564 2873 656c 662e 6964 202b 2027  rted(self.id + '
+0005e4d0: 2066 6574 6368 5472 6164 696e 6746 6565   fetchTradingFee
+0005e4e0: 2829 2069 7320 6e6f 7420 7375 7070 6f72  () is not suppor
+0005e4f0: 7465 6420 666f 7220 7370 6f74 206d 6172  ted for spot mar
+0005e500: 6b65 7427 290a 2020 2020 2020 2020 7265  ket').        re
+0005e510: 7175 6573 7420 3d20 7b0a 2020 2020 2020  quest = {.      
+0005e520: 2020 2020 2020 2773 796d 626f 6c27 3a20        'symbol': 
+0005e530: 6d61 726b 6574 5b27 6964 275d 2c0a 2020  market['id'],.  
+0005e540: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+0005e550: 7265 7370 6f6e 7365 203d 2061 7761 6974  response = await
+0005e560: 2073 656c 662e 7072 6976 6174 6547 6574   self.privateGet
+0005e570: 5635 4163 636f 756e 7446 6565 5261 7465  V5AccountFeeRate
+0005e580: 2873 656c 662e 6578 7465 6e64 2872 6571  (self.extend(req
+0005e590: 7565 7374 2c20 7061 7261 6d73 2929 0a20  uest, params)). 
+0005e5a0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+0005e5b0: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
+0005e5c0: 2023 2020 2020 2020 2020 2022 7265 7443   #         "retC
+0005e5d0: 6f64 6522 3a20 302c 0a20 2020 2020 2020  ode": 0,.       
+0005e5e0: 2023 2020 2020 2020 2020 2022 7265 744d   #         "retM
+0005e5f0: 7367 223a 2022 4f4b 222c 0a20 2020 2020  sg": "OK",.     
+0005e600: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+0005e610: 7375 6c74 223a 207b 0a20 2020 2020 2020  sult": {.       
+0005e620: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+0005e630: 6c69 7374 223a 205b 0a20 2020 2020 2020  list": [.       
+0005e640: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0005e650: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
+0005e660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005e670: 2020 2022 7379 6d62 6f6c 223a 2022 4554     "symbol": "ET
+0005e680: 4855 5344 5422 2c0a 2020 2020 2020 2020  HUSDT",.        
+0005e690: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0005e6a0: 2020 2020 2020 2274 616b 6572 4665 6552        "takerFeeR
+0005e6b0: 6174 6522 3a20 2230 2e30 3030 3622 2c0a  ate": "0.0006",.
+0005e6c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005e6d0: 2020 2020 2020 2020 2020 2020 2020 226d                "m
+0005e6e0: 616b 6572 4665 6552 6174 6522 3a20 2230  akerFeeRate": "0
+0005e6f0: 2e30 3030 3122 0a20 2020 2020 2020 2023  .0001".        #
+0005e700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005e710: 207d 0a20 2020 2020 2020 2023 2020 2020   }.        #    
+0005e720: 2020 2020 2020 2020 205d 0a20 2020 2020           ].     
+0005e730: 2020 2023 2020 2020 2020 2020 207d 2c0a     #         },.
+0005e740: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005e750: 2020 2272 6574 4578 7449 6e66 6f22 3a20    "retExtInfo": 
+0005e760: 7b7d 2c0a 2020 2020 2020 2020 2320 2020  {},.        #   
+0005e770: 2020 2020 2020 2274 696d 6522 3a20 3136        "time": 16
+0005e780: 3736 3336 3034 3132 3537 360a 2020 2020  76360412576.    
+0005e790: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+0005e7a0: 2020 2020 230a 2020 2020 2020 2020 7265      #.        re
+0005e7b0: 7375 6c74 203d 2073 656c 662e 7361 6665  sult = self.safe
+0005e7c0: 5f76 616c 7565 2872 6573 706f 6e73 652c  _value(response,
+0005e7d0: 2027 7265 7375 6c74 272c 207b 7d29 0a20   'result', {}). 
+0005e7e0: 2020 2020 2020 2066 6565 7320 3d20 7365         fees = se
+0005e7f0: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
+0005e800: 7375 6c74 2c20 276c 6973 7427 2c20 5b5d  sult, 'list', []
+0005e810: 290a 2020 2020 2020 2020 6669 7273 7420  ).        first 
+0005e820: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+0005e830: 6528 6665 6573 2c20 302c 207b 7d29 0a20  e(fees, 0, {}). 
+0005e840: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+0005e850: 6c66 2e70 6172 7365 5f74 7261 6469 6e67  lf.parse_trading
+0005e860: 5f66 6565 2866 6972 7374 290a 0a20 2020  _fee(first)..   
+0005e870: 2061 7379 6e63 2064 6566 2066 6574 6368   async def fetch
+0005e880: 5f74 7261 6469 6e67 5f66 6565 7328 7365  _trading_fees(se
+0005e890: 6c66 2c20 7061 7261 6d73 3d7b 7d29 3a0a  lf, params={}):.
+0005e8a0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0005e8b0: 2020 2020 6665 7463 6820 7468 6520 7472      fetch the tr
+0005e8c0: 6164 696e 6720 6665 6573 2066 6f72 206d  ading fees for m
+0005e8d0: 756c 7469 706c 6520 6d61 726b 6574 730a  ultiple markets.
+0005e8e0: 2020 2020 2020 2020 7365 6520 6874 7470          see http
+0005e8f0: 733a 2f2f 6279 6269 742d 6578 6368 616e  s://bybit-exchan
+0005e900: 6765 2e67 6974 6875 622e 696f 2f64 6f63  ge.github.io/doc
+0005e910: 732f 7635 2f61 6363 6f75 6e74 2f66 6565  s/v5/account/fee
+0005e920: 2d72 6174 650a 2020 2020 2020 2020 3a70  -rate.        :p
+0005e930: 6172 616d 2064 6963 7420 7061 7261 6d73  aram dict params
+0005e940: 3a20 6578 7472 6120 7061 7261 6d65 7465  : extra paramete
+0005e950: 7273 2073 7065 6369 6669 6320 746f 2074  rs specific to t
+0005e960: 6865 2062 7962 6974 2061 7069 2065 6e64  he bybit api end
+0005e970: 706f 696e 740a 2020 2020 2020 2020 3a72  point.        :r
+0005e980: 6574 7572 6e73 2064 6963 743a 2061 2064  eturns dict: a d
+0005e990: 6963 7469 6f6e 6172 7920 6f66 2060 6665  ictionary of `fe
+0005e9a0: 6520 7374 7275 6374 7572 6573 203c 6874  e structures <ht
+0005e9b0: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
+0005e9c0: 636f 6d2f 232f 3f69 643d 6665 652d 7374  com/#/?id=fee-st
+0005e9d0: 7275 6374 7572 653e 6020 696e 6465 7865  ructure>` indexe
+0005e9e0: 6420 6279 206d 6172 6b65 7420 7379 6d62  d by market symb
+0005e9f0: 6f6c 730a 2020 2020 2020 2020 2222 220a  ols.        """.
+0005ea00: 2020 2020 2020 2020 6177 6169 7420 7365          await se
+0005ea10: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
+0005ea20: 290a 2020 2020 2020 2020 7479 7065 203d  ).        type =
+0005ea30: 204e 6f6e 650a 2020 2020 2020 2020 7479   None.        ty
+0005ea40: 7065 2c20 7061 7261 6d73 203d 2073 656c  pe, params = sel
+0005ea50: 662e 6861 6e64 6c65 5f6f 7074 696f 6e5f  f.handle_option_
+0005ea60: 616e 645f 7061 7261 6d73 2870 6172 616d  and_params(param
+0005ea70: 732c 2027 6665 7463 6854 7261 6469 6e67  s, 'fetchTrading
+0005ea80: 4665 6573 272c 2027 7479 7065 272c 2027  Fees', 'type', '
+0005ea90: 6675 7475 7265 2729 0a20 2020 2020 2020  future').       
+0005eaa0: 2069 6620 7479 7065 203d 3d20 2773 706f   if type == 'spo
+0005eab0: 7427 3a0a 2020 2020 2020 2020 2020 2020  t':.            
+0005eac0: 7261 6973 6520 4e6f 7453 7570 706f 7274  raise NotSupport
+0005ead0: 6564 2873 656c 662e 6964 202b 2027 2066  ed(self.id + ' f
+0005eae0: 6574 6368 5472 6164 696e 6746 6565 7328  etchTradingFees(
+0005eaf0: 2920 6973 206e 6f74 2073 7570 706f 7274  ) is not support
+0005eb00: 6564 2066 6f72 2073 706f 7420 6d61 726b  ed for spot mark
+0005eb10: 6574 2729 0a20 2020 2020 2020 2072 6573  et').        res
+0005eb20: 706f 6e73 6520 3d20 6177 6169 7420 7365  ponse = await se
+0005eb30: 6c66 2e70 7269 7661 7465 4765 7456 3541  lf.privateGetV5A
+0005eb40: 6363 6f75 6e74 4665 6552 6174 6528 7061  ccountFeeRate(pa
+0005eb50: 7261 6d73 290a 2020 2020 2020 2020 230a  rams).        #.
+0005eb60: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+0005eb70: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005eb80: 2020 2272 6574 436f 6465 223a 2030 2c0a    "retCode": 0,.
+0005eb90: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005eba0: 2020 2272 6574 4d73 6722 3a20 224f 4b22    "retMsg": "OK"
+0005ebb0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0005ebc0: 2020 2020 2272 6573 756c 7422 3a20 7b0a      "result": {.
+0005ebd0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005ebe0: 2020 2020 2020 226c 6973 7422 3a20 5b0a        "list": [.
+0005ebf0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005ec00: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
+0005ec10: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0005ec20: 2020 2020 2020 2020 2020 2273 796d 626f            "symbo
+0005ec30: 6c22 3a20 2245 5448 5553 4454 222c 0a20  l": "ETHUSDT",. 
+0005ec40: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0005ec50: 2020 2020 2020 2020 2020 2020 2022 7461               "ta
+0005ec60: 6b65 7246 6565 5261 7465 223a 2022 302e  kerFeeRate": "0.
+0005ec70: 3030 3036 222c 0a20 2020 2020 2020 2023  0006",.        #
+0005ec80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005ec90: 2020 2020 2022 6d61 6b65 7246 6565 5261       "makerFeeRa
+0005eca0: 7465 223a 2022 302e 3030 3031 220a 2020  te": "0.0001".  
+0005ecb0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0005ecc0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+0005ecd0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0005ece0: 5d0a 2020 2020 2020 2020 2320 2020 2020  ].        #     
+0005ecf0: 2020 2020 7d2c 0a20 2020 2020 2020 2023      },.        #
+0005ed00: 2020 2020 2020 2020 2022 7265 7445 7874           "retExt
+0005ed10: 496e 666f 223a 207b 7d2c 0a20 2020 2020  Info": {},.     
+0005ed20: 2020 2023 2020 2020 2020 2020 2022 7469     #         "ti
+0005ed30: 6d65 223a 2031 3637 3633 3630 3431 3235  me": 16763604125
+0005ed40: 3736 0a20 2020 2020 2020 2023 2020 2020  76.        #    
+0005ed50: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
+0005ed60: 2020 2020 2066 6565 7320 3d20 7365 6c66       fees = self
+0005ed70: 2e73 6166 655f 7661 6c75 6528 7265 7370  .safe_value(resp
+0005ed80: 6f6e 7365 2c20 2772 6573 756c 7427 2c20  onse, 'result', 
+0005ed90: 7b7d 290a 2020 2020 2020 2020 6665 6573  {}).        fees
+0005eda0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+0005edb0: 7565 2866 6565 732c 2027 6c69 7374 272c  ue(fees, 'list',
+0005edc0: 205b 5d29 0a20 2020 2020 2020 2072 6573   []).        res
+0005edd0: 756c 7420 3d20 7b7d 0a20 2020 2020 2020  ult = {}.       
+0005ede0: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
+0005edf0: 302c 206c 656e 2866 6565 7329 293a 0a20  0, len(fees)):. 
+0005ee00: 2020 2020 2020 2020 2020 2066 6565 203d             fee =
+0005ee10: 2073 656c 662e 7061 7273 655f 7472 6164   self.parse_trad
+0005ee20: 696e 675f 6665 6528 6665 6573 5b69 5d29  ing_fee(fees[i])
+0005ee30: 0a20 2020 2020 2020 2020 2020 2073 796d  .            sym
+0005ee40: 626f 6c20 3d20 6665 655b 2773 796d 626f  bol = fee['symbo
+0005ee50: 6c27 5d0a 2020 2020 2020 2020 2020 2020  l'].            
+0005ee60: 7265 7375 6c74 5b73 796d 626f 6c5d 203d  result[symbol] =
+0005ee70: 2066 6565 0a20 2020 2020 2020 2072 6574   fee.        ret
+0005ee80: 7572 6e20 7265 7375 6c74 0a0a 2020 2020  urn result..    
+0005ee90: 6465 6620 7369 676e 2873 656c 662c 2070  def sign(self, p
+0005eea0: 6174 682c 2061 7069 3d27 7075 626c 6963  ath, api='public
+0005eeb0: 272c 206d 6574 686f 643d 2747 4554 272c  ', method='GET',
+0005eec0: 2070 6172 616d 733d 7b7d 2c20 6865 6164   params={}, head
+0005eed0: 6572 733d 4e6f 6e65 2c20 626f 6479 3d4e  ers=None, body=N
+0005eee0: 6f6e 6529 3a0a 2020 2020 2020 2020 7572  one):.        ur
+0005eef0: 6c20 3d20 7365 6c66 2e69 6d70 6c6f 6465  l = self.implode
+0005ef00: 5f68 6f73 746e 616d 6528 7365 6c66 2e75  _hostname(self.u
+0005ef10: 726c 735b 2761 7069 275d 5b61 7069 5d29  rls['api'][api])
+0005ef20: 202b 2027 2f27 202b 2070 6174 680a 2020   + '/' + path.  
+0005ef30: 2020 2020 2020 6966 2061 7069 203d 3d20        if api == 
+0005ef40: 2770 7562 6c69 6327 3a0a 2020 2020 2020  'public':.      
+0005ef50: 2020 2020 2020 6966 2070 6172 616d 733a        if params:
+0005ef60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0005ef70: 2075 726c 202b 3d20 273f 2720 2b20 7365   url += '?' + se
+0005ef80: 6c66 2e72 6177 656e 636f 6465 2870 6172  lf.rawencode(par
+0005ef90: 616d 7329 0a20 2020 2020 2020 2065 6c69  ams).        eli
+0005efa0: 6620 6170 6920 3d3d 2027 7072 6976 6174  f api == 'privat
+0005efb0: 6527 3a0a 2020 2020 2020 2020 2020 2020  e':.            
+0005efc0: 7365 6c66 2e63 6865 636b 5f72 6571 7569  self.check_requi
+0005efd0: 7265 645f 6372 6564 656e 7469 616c 7328  red_credentials(
+0005efe0: 290a 2020 2020 2020 2020 2020 2020 6973  ).            is
+0005eff0: 4f70 656e 6170 6920 3d20 7572 6c2e 6669  Openapi = url.fi
+0005f000: 6e64 2827 6f70 656e 6170 6927 2920 3e3d  nd('openapi') >=
+0005f010: 2030 0a20 2020 2020 2020 2020 2020 2069   0.            i
+0005f020: 7356 3355 6e69 6669 6564 4d61 7267 696e  sV3UnifiedMargin
+0005f030: 203d 2075 726c 2e66 696e 6428 2775 6e69   = url.find('uni
+0005f040: 6669 6564 2f76 3327 2920 3e3d 2030 0a20  fied/v3') >= 0. 
+0005f050: 2020 2020 2020 2020 2020 2069 7356 3343             isV3C
+0005f060: 6f6e 7472 6163 7420 3d20 7572 6c2e 6669  ontract = url.fi
+0005f070: 6e64 2827 636f 6e74 7261 6374 2f76 3327  nd('contract/v3'
+0005f080: 2920 3e3d 2030 0a20 2020 2020 2020 2020  ) >= 0.         
+0005f090: 2020 2069 7356 3555 6e69 6669 6564 4163     isV5UnifiedAc
+0005f0a0: 636f 756e 7420 3d20 7572 6c2e 6669 6e64  count = url.find
+0005f0b0: 2827 7635 2729 203e 3d20 300a 2020 2020  ('v5') >= 0.    
+0005f0c0: 2020 2020 2020 2020 7469 6d65 7374 616d          timestam
+0005f0d0: 7020 3d20 7374 7228 7365 6c66 2e6e 6f6e  p = str(self.non
+0005f0e0: 6365 2829 290a 2020 2020 2020 2020 2020  ce()).          
+0005f0f0: 2020 6966 2069 734f 7065 6e61 7069 3a0a    if isOpenapi:.
+0005f100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005f110: 6966 2070 6172 616d 733a 0a20 2020 2020  if params:.     
+0005f120: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+0005f130: 6f64 7920 3d20 7365 6c66 2e6a 736f 6e28  ody = self.json(
+0005f140: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
+0005f150: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0005f160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005f170: 2020 2320 7365 6c66 2066 6978 2066 6f72    # self fix for
+0005f180: 2050 4850 2069 7320 7265 7175 6972 6564   PHP is required
+0005f190: 206f 7468 6572 7769 7365 2069 7420 6765   otherwise it ge
+0005f1a0: 6e65 7261 7465 730a 2020 2020 2020 2020  nerates.        
+0005f1b0: 2020 2020 2020 2020 2020 2020 2320 275b              # '[
+0005f1c0: 5d27 206f 6e20 656d 7074 7920 6172 7261  ]' on empty arra
+0005f1d0: 7973 2065 7665 6e20 7768 656e 2066 6f72  ys even when for
+0005f1e0: 6365 6420 746f 2075 7365 206f 626a 6563  ced to use objec
+0005f1f0: 7473 0a20 2020 2020 2020 2020 2020 2020  ts.             
+0005f200: 2020 2020 2020 2062 6f64 7920 3d20 277b         body = '{
+0005f210: 7d27 0a20 2020 2020 2020 2020 2020 2020  }'.             
+0005f220: 2020 2070 6179 6c6f 6164 203d 2074 696d     payload = tim
+0005f230: 6573 7461 6d70 202b 2073 656c 662e 6170  estamp + self.ap
+0005f240: 694b 6579 202b 2062 6f64 790a 2020 2020  iKey + body.    
+0005f250: 2020 2020 2020 2020 2020 2020 7369 676e              sign
+0005f260: 6174 7572 6520 3d20 7365 6c66 2e68 6d61  ature = self.hma
+0005f270: 6328 7365 6c66 2e65 6e63 6f64 6528 7061  c(self.encode(pa
+0005f280: 796c 6f61 6429 2c20 7365 6c66 2e65 6e63  yload), self.enc
+0005f290: 6f64 6528 7365 6c66 2e73 6563 7265 7429  ode(self.secret)
+0005f2a0: 2c20 6861 7368 6c69 622e 7368 6132 3536  , hashlib.sha256
+0005f2b0: 2c20 2768 6578 2729 0a20 2020 2020 2020  , 'hex').       
+0005f2c0: 2020 2020 2020 2020 2068 6561 6465 7273           headers
+0005f2d0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+0005f2e0: 2020 2020 2020 2020 2027 436f 6e74 656e           'Conten
+0005f2f0: 742d 5479 7065 273a 2027 6170 706c 6963  t-Type': 'applic
+0005f300: 6174 696f 6e2f 6a73 6f6e 272c 0a20 2020  ation/json',.   
+0005f310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005f320: 2027 582d 4241 5049 2d41 5049 2d4b 4559   'X-BAPI-API-KEY
+0005f330: 273a 2073 656c 662e 6170 694b 6579 2c0a  ': self.apiKey,.
+0005f340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005f350: 2020 2020 2758 2d42 4150 492d 5449 4d45      'X-BAPI-TIME
+0005f360: 5354 414d 5027 3a20 7469 6d65 7374 616d  STAMP': timestam
+0005f370: 702c 0a20 2020 2020 2020 2020 2020 2020  p,.             
+0005f380: 2020 2020 2020 2027 582d 4241 5049 2d53         'X-BAPI-S
+0005f390: 4947 4e27 3a20 7369 676e 6174 7572 652c  IGN': signature,
+0005f3a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0005f3b0: 207d 0a20 2020 2020 2020 2020 2020 2065   }.            e
+0005f3c0: 6c69 6620 6973 5633 556e 6966 6965 644d  lif isV3UnifiedM
+0005f3d0: 6172 6769 6e20 6f72 2069 7356 3343 6f6e  argin or isV3Con
+0005f3e0: 7472 6163 7420 6f72 2069 7356 3555 6e69  tract or isV5Uni
+0005f3f0: 6669 6564 4163 636f 756e 743a 0a20 2020  fiedAccount:.   
+0005f400: 2020 2020 2020 2020 2020 2020 2068 6561               hea
+0005f410: 6465 7273 203d 207b 0a20 2020 2020 2020  ders = {.       
+0005f420: 2020 2020 2020 2020 2020 2020 2027 436f               'Co
+0005f430: 6e74 656e 742d 5479 7065 273a 2027 6170  ntent-Type': 'ap
+0005f440: 706c 6963 6174 696f 6e2f 6a73 6f6e 272c  plication/json',
+0005f450: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0005f460: 2020 2020 2027 582d 4241 5049 2d41 5049       'X-BAPI-API
+0005f470: 2d4b 4559 273a 2073 656c 662e 6170 694b  -KEY': self.apiK
+0005f480: 6579 2c0a 2020 2020 2020 2020 2020 2020  ey,.            
+0005f490: 2020 2020 2020 2020 2758 2d42 4150 492d          'X-BAPI-
+0005f4a0: 5449 4d45 5354 414d 5027 3a20 7469 6d65  TIMESTAMP': time
+0005f4b0: 7374 616d 702c 0a20 2020 2020 2020 2020  stamp,.         
+0005f4c0: 2020 2020 2020 2020 2020 2027 582d 4241             'X-BA
+0005f4d0: 5049 2d52 4543 562d 5749 4e44 4f57 273a  PI-RECV-WINDOW':
+0005f4e0: 2073 7472 2873 656c 662e 6f70 7469 6f6e   str(self.option
+0005f4f0: 735b 2772 6563 7657 696e 646f 7727 5d29  s['recvWindow'])
+0005f500: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0005f510: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
+0005f520: 2020 2020 6966 2069 7356 3355 6e69 6669      if isV3Unifi
+0005f530: 6564 4d61 7267 696e 206f 7220 6973 5633  edMargin or isV3
+0005f540: 436f 6e74 7261 6374 3a0a 2020 2020 2020  Contract:.      
+0005f550: 2020 2020 2020 2020 2020 2020 2020 6865                he
+0005f560: 6164 6572 735b 2758 2d42 4150 492d 5349  aders['X-BAPI-SI
+0005f570: 474e 2d54 5950 4527 5d20 3d20 2732 270a  GN-TYPE'] = '2'.
+0005f580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005f590: 7175 6572 7920 3d20 7365 6c66 2e65 7874  query = self.ext
+0005f5a0: 656e 6428 7b7d 2c20 7061 7261 6d73 290a  end({}, params).
+0005f5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005f5c0: 7175 6572 7945 6e63 6f64 6564 203d 2073  queryEncoded = s
+0005f5d0: 656c 662e 7261 7765 6e63 6f64 6528 7175  elf.rawencode(qu
+0005f5e0: 6572 7929 0a20 2020 2020 2020 2020 2020  ery).           
+0005f5f0: 2020 2020 2061 7574 685f 6261 7365 203d       auth_base =
+0005f600: 2073 7472 2874 696d 6573 7461 6d70 2920   str(timestamp) 
+0005f610: 2b20 7365 6c66 2e61 7069 4b65 7920 2b20  + self.apiKey + 
+0005f620: 7374 7228 7365 6c66 2e6f 7074 696f 6e73  str(self.options
+0005f630: 5b27 7265 6376 5769 6e64 6f77 275d 290a  ['recvWindow']).
+0005f640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005f650: 6175 7468 4675 6c6c 203d 204e 6f6e 650a  authFull = None.
+0005f660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005f670: 6966 206d 6574 686f 6420 3d3d 2027 504f  if method == 'PO
+0005f680: 5354 273a 0a20 2020 2020 2020 2020 2020  ST':.           
+0005f690: 2020 2020 2020 2020 2062 6f64 7920 3d20           body = 
+0005f6a0: 7365 6c66 2e6a 736f 6e28 7175 6572 7929  self.json(query)
+0005f6b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0005f6c0: 2020 2020 2061 7574 6846 756c 6c20 3d20       authFull = 
+0005f6d0: 6175 7468 5f62 6173 6520 2b20 626f 6479  auth_base + body
+0005f6e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0005f6f0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0005f700: 2020 2020 2020 2020 2020 2061 7574 6846             authF
+0005f710: 756c 6c20 3d20 6175 7468 5f62 6173 6520  ull = auth_base 
+0005f720: 2b20 7175 6572 7945 6e63 6f64 6564 0a20  + queryEncoded. 
+0005f730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005f740: 2020 2075 726c 202b 3d20 273f 2720 2b20     url += '?' + 
+0005f750: 7365 6c66 2e72 6177 656e 636f 6465 2871  self.rawencode(q
+0005f760: 7565 7279 290a 2020 2020 2020 2020 2020  uery).          
+0005f770: 2020 2020 2020 7369 676e 6174 7572 6520        signature 
+0005f780: 3d20 4e6f 6e65 0a20 2020 2020 2020 2020  = None.         
+0005f790: 2020 2020 2020 2069 6620 7365 6c66 2e73         if self.s
+0005f7a0: 6563 7265 742e 6669 6e64 2827 5052 4956  ecret.find('PRIV
+0005f7b0: 4154 4520 4b45 5927 2920 3e20 2d31 3a0a  ATE KEY') > -1:.
+0005f7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005f7d0: 2020 2020 7369 676e 6174 7572 6520 3d20      signature = 
+0005f7e0: 7365 6c66 2e72 7361 2861 7574 6846 756c  self.rsa(authFul
+0005f7f0: 6c2c 2073 656c 662e 7365 6372 6574 2c20  l, self.secret, 
+0005f800: 2773 6861 3235 3627 290a 2020 2020 2020  'sha256').      
+0005f810: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+0005f820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005f830: 2020 2020 7369 676e 6174 7572 6520 3d20      signature = 
+0005f840: 7365 6c66 2e68 6d61 6328 7365 6c66 2e65  self.hmac(self.e
+0005f850: 6e63 6f64 6528 6175 7468 4675 6c6c 292c  ncode(authFull),
+0005f860: 2073 656c 662e 656e 636f 6465 2873 656c   self.encode(sel
+0005f870: 662e 7365 6372 6574 292c 2068 6173 686c  f.secret), hashl
+0005f880: 6962 2e73 6861 3235 3629 0a20 2020 2020  ib.sha256).     
+0005f890: 2020 2020 2020 2020 2020 2068 6561 6465             heade
+0005f8a0: 7273 5b27 582d 4241 5049 2d53 4947 4e27  rs['X-BAPI-SIGN'
+0005f8b0: 5d20 3d20 7369 676e 6174 7572 650a 2020  ] = signature.  
+0005f8c0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+0005f8d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005f8e0: 7175 6572 7920 3d20 7365 6c66 2e65 7874  query = self.ext
+0005f8f0: 656e 6428 7061 7261 6d73 2c20 7b0a 2020  end(params, {.  
+0005f900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005f910: 2020 2761 7069 5f6b 6579 273a 2073 656c    'api_key': sel
+0005f920: 662e 6170 694b 6579 2c0a 2020 2020 2020  f.apiKey,.      
+0005f930: 2020 2020 2020 2020 2020 2020 2020 2772                'r
+0005f940: 6563 765f 7769 6e64 6f77 273a 2073 656c  ecv_window': sel
+0005f950: 662e 6f70 7469 6f6e 735b 2772 6563 7657  f.options['recvW
+0005f960: 696e 646f 7727 5d2c 0a20 2020 2020 2020  indow'],.       
+0005f970: 2020 2020 2020 2020 2020 2020 2027 7469               'ti
+0005f980: 6d65 7374 616d 7027 3a20 7469 6d65 7374  mestamp': timest
+0005f990: 616d 702c 0a20 2020 2020 2020 2020 2020  amp,.           
+0005f9a0: 2020 2020 207d 290a 2020 2020 2020 2020       }).        
+0005f9b0: 2020 2020 2020 2020 736f 7274 6564 5175          sortedQu
+0005f9c0: 6572 7920 3d20 7365 6c66 2e6b 6579 736f  ery = self.keyso
+0005f9d0: 7274 2871 7565 7279 290a 2020 2020 2020  rt(query).      
+0005f9e0: 2020 2020 2020 2020 2020 6175 7468 203d            auth =
+0005f9f0: 2073 656c 662e 7261 7765 6e63 6f64 6528   self.rawencode(
+0005fa00: 736f 7274 6564 5175 6572 7929 0a20 2020  sortedQuery).   
+0005fa10: 2020 2020 2020 2020 2020 2020 2073 6967               sig
+0005fa20: 6e61 7475 7265 203d 204e 6f6e 650a 2020  nature = None.  
+0005fa30: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0005fa40: 2073 656c 662e 7365 6372 6574 2e66 696e   self.secret.fin
+0005fa50: 6428 2750 5249 5641 5445 204b 4559 2729  d('PRIVATE KEY')
+0005fa60: 203e 202d 313a 0a20 2020 2020 2020 2020   > -1:.         
+0005fa70: 2020 2020 2020 2020 2020 2073 6967 6e61             signa
+0005fa80: 7475 7265 203d 2073 656c 662e 7273 6128  ture = self.rsa(
+0005fa90: 6175 7468 2c20 7365 6c66 2e73 6563 7265  auth, self.secre
+0005faa0: 742c 2027 7368 6132 3536 2729 0a20 2020  t, 'sha256').   
+0005fab0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0005fac0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0005fad0: 2020 2020 2020 2073 6967 6e61 7475 7265         signature
+0005fae0: 203d 2073 656c 662e 686d 6163 2873 656c   = self.hmac(sel
+0005faf0: 662e 656e 636f 6465 2861 7574 6829 2c20  f.encode(auth), 
+0005fb00: 7365 6c66 2e65 6e63 6f64 6528 7365 6c66  self.encode(self
+0005fb10: 2e73 6563 7265 7429 2c20 6861 7368 6c69  .secret), hashli
+0005fb20: 622e 7368 6132 3536 290a 2020 2020 2020  b.sha256).      
+0005fb30: 2020 2020 2020 2020 2020 6966 206d 6574            if met
+0005fb40: 686f 6420 3d3d 2027 504f 5354 273a 0a20  hod == 'POST':. 
+0005fb50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005fb60: 2020 2069 7353 706f 7420 3d20 7572 6c2e     isSpot = url.
+0005fb70: 6669 6e64 2827 7370 6f74 2729 203e 3d20  find('spot') >= 
+0005fb80: 300a 2020 2020 2020 2020 2020 2020 2020  0.              
+0005fb90: 2020 2020 2020 6578 7465 6e64 6564 5175        extendedQu
+0005fba0: 6572 7920 3d20 7365 6c66 2e65 7874 656e  ery = self.exten
+0005fbb0: 6428 7175 6572 792c 207b 0a20 2020 2020  d(query, {.     
+0005fbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005fbd0: 2020 2027 7369 676e 273a 2073 6967 6e61     'sign': signa
+0005fbe0: 7475 7265 2c0a 2020 2020 2020 2020 2020  ture,.          
+0005fbf0: 2020 2020 2020 2020 2020 7d29 0a20 2020            }).   
+0005fc00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005fc10: 2069 6620 6973 5370 6f74 3a0a 2020 2020   if isSpot:.    
+0005fc20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005fc30: 2020 2020 626f 6479 203d 2073 656c 662e      body = self.
+0005fc40: 7572 6c65 6e63 6f64 6528 6578 7465 6e64  urlencode(extend
+0005fc50: 6564 5175 6572 7929 0a20 2020 2020 2020  edQuery).       
+0005fc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005fc70: 2068 6561 6465 7273 203d 207b 0a20 2020   headers = {.   
+0005fc80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005fc90: 2020 2020 2020 2020 2027 436f 6e74 656e           'Conten
+0005fca0: 742d 5479 7065 273a 2027 6170 706c 6963  t-Type': 'applic
+0005fcb0: 6174 696f 6e2f 782d 7777 772d 666f 726d  ation/x-www-form
+0005fcc0: 2d75 726c 656e 636f 6465 6427 2c0a 2020  -urlencoded',.  
+0005fcd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005fce0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+0005fcf0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0005fd00: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0005fd10: 2020 2020 2020 2020 2020 626f 6479 203d            body =
+0005fd20: 2073 656c 662e 6a73 6f6e 2865 7874 656e   self.json(exten
+0005fd30: 6465 6451 7565 7279 290a 2020 2020 2020  dedQuery).      
+0005fd40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005fd50: 2020 6865 6164 6572 7320 3d20 7b0a 2020    headers = {.  
+0005fd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005fd70: 2020 2020 2020 2020 2020 2743 6f6e 7465            'Conte
+0005fd80: 6e74 2d54 7970 6527 3a20 2761 7070 6c69  nt-Type': 'appli
+0005fd90: 6361 7469 6f6e 2f6a 736f 6e27 2c0a 2020  cation/json',.  
+0005fda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005fdb0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+0005fdc0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0005fdd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005fde0: 2020 7572 6c20 2b3d 2027 3f27 202b 2073    url += '?' + s
+0005fdf0: 656c 662e 7261 7765 6e63 6f64 6528 736f  elf.rawencode(so
+0005fe00: 7274 6564 5175 6572 7929 0a20 2020 2020  rtedQuery).     
+0005fe10: 2020 2020 2020 2020 2020 2020 2020 2075                 u
+0005fe20: 726c 202b 3d20 2726 7369 676e 3d27 202b  rl += '&sign=' +
+0005fe30: 2073 6967 6e61 7475 7265 0a20 2020 2020   signature.     
+0005fe40: 2020 2069 6620 6d65 7468 6f64 203d 3d20     if method == 
+0005fe50: 2750 4f53 5427 3a0a 2020 2020 2020 2020  'POST':.        
+0005fe60: 2020 2020 6272 6f6b 6572 4964 203d 2073      brokerId = s
+0005fe70: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+0005fe80: 7365 6c66 2e6f 7074 696f 6e73 2c20 2762  self.options, 'b
+0005fe90: 726f 6b65 7249 6427 290a 2020 2020 2020  rokerId').      
+0005fea0: 2020 2020 2020 6966 2062 726f 6b65 7249        if brokerI
+0005feb0: 6420 6973 206e 6f74 204e 6f6e 653a 0a20  d is not None:. 
+0005fec0: 2020 2020 2020 2020 2020 2020 2020 2068                 h
+0005fed0: 6561 6465 7273 5b27 5265 6665 7265 7227  eaders['Referer'
+0005fee0: 5d20 3d20 6272 6f6b 6572 4964 0a20 2020  ] = brokerId.   
+0005fef0: 2020 2020 2072 6574 7572 6e20 7b27 7572       return {'ur
+0005ff00: 6c27 3a20 7572 6c2c 2027 6d65 7468 6f64  l': url, 'method
+0005ff10: 273a 206d 6574 686f 642c 2027 626f 6479  ': method, 'body
+0005ff20: 273a 2062 6f64 792c 2027 6865 6164 6572  ': body, 'header
+0005ff30: 7327 3a20 6865 6164 6572 737d 0a0a 2020  s': headers}..  
+0005ff40: 2020 6465 6620 6861 6e64 6c65 5f65 7272    def handle_err
+0005ff50: 6f72 7328 7365 6c66 2c20 6874 7470 436f  ors(self, httpCo
+0005ff60: 6465 2c20 7265 6173 6f6e 2c20 7572 6c2c  de, reason, url,
+0005ff70: 206d 6574 686f 642c 2068 6561 6465 7273   method, headers
+0005ff80: 2c20 626f 6479 2c20 7265 7370 6f6e 7365  , body, response
+0005ff90: 2c20 7265 7175 6573 7448 6561 6465 7273  , requestHeaders
+0005ffa0: 2c20 7265 7175 6573 7442 6f64 7929 3a0a  , requestBody):.
+0005ffb0: 2020 2020 2020 2020 6966 206e 6f74 2072          if not r
+0005ffc0: 6573 706f 6e73 653a 0a20 2020 2020 2020  esponse:.       
+0005ffd0: 2020 2020 2072 6574 7572 6e20 4e6f 6e65       return None
+0005ffe0: 2020 2320 6661 6c6c 6261 636b 2074 6f20    # fallback to 
+0005fff0: 6465 6661 756c 7420 6572 726f 7220 6861  default error ha
+00060000: 6e64 6c65 720a 2020 2020 2020 2020 230a  ndler.        #.
+00060010: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+00060020: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00060030: 2020 7265 745f 636f 6465 3a20 3130 3030    ret_code: 1000
+00060040: 312c 0a20 2020 2020 2020 2023 2020 2020  1,.        #    
+00060050: 2020 2020 2072 6574 5f6d 7367 3a20 2752       ret_msg: 'R
+00060060: 6561 644d 6170 4342 3a20 6578 7065 6374  eadMapCB: expect
+00060070: 207b 6f72 206e 2c20 6275 7420 666f 756e   {or n, but foun
+00060080: 6420 5c75 3030 3030 2c20 6572 726f 7220  d \u0000, error 
+00060090: 2720 2b0a 2020 2020 2020 2020 2320 2020  ' +.        #   
+000600a0: 2020 2020 2020 2766 6f75 6e64 2069 6e20        'found in 
+000600b0: 2023 3020 6279 7465 206f 6620 2e2e 2e7c   #0 byte of ...|
+000600c0: 7c2e 2e2e 2c20 6269 6767 6572 2063 6f6e  |..., bigger con
+000600d0: 7465 7874 2027 202b 0a20 2020 2020 2020  text ' +.       
+000600e0: 2023 2020 2020 2020 2020 2027 2e2e 2e7c   #         '...|
+000600f0: 7c2e 2e2e 272c 0a20 2020 2020 2020 2023  |...',.        #
+00060100: 2020 2020 2020 2020 2065 7874 5f63 6f64           ext_cod
+00060110: 653a 2027 272c 0a20 2020 2020 2020 2023  e: '',.        #
+00060120: 2020 2020 2020 2020 2065 7874 5f69 6e66           ext_inf
+00060130: 6f3a 2027 272c 0a20 2020 2020 2020 2023  o: '',.        #
+00060140: 2020 2020 2020 2020 2072 6573 756c 743a           result:
+00060150: 206e 756c 6c2c 0a20 2020 2020 2020 2023   null,.        #
+00060160: 2020 2020 2020 2020 2074 696d 655f 6e6f           time_no
+00060170: 773a 2027 3135 3833 3933 3431 3036 2e35  w: '1583934106.5
+00060180: 3930 3433 3627 0a20 2020 2020 2020 2023  90436'.        #
+00060190: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+000601a0: 0a20 2020 2020 2020 2023 2020 2020 207b  .        #     {
+000601b0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000601c0: 2020 2022 7265 7443 6f64 6522 3a31 3030     "retCode":100
+000601d0: 3031 2c0a 2020 2020 2020 2020 2320 2020  01,.        #   
+000601e0: 2020 2020 2020 2272 6574 4d73 6722 3a22        "retMsg":"
+000601f0: 7379 6d62 6f6c 2070 6172 616d 7320 6572  symbol params er
+00060200: 7222 2c0a 2020 2020 2020 2020 2320 2020  r",.        #   
+00060210: 2020 2020 2020 2272 6573 756c 7422 3a7b        "result":{
+00060220: 2273 796d 626f 6c22 3a22 222c 2262 6964  "symbol":"","bid
+00060230: 223a 2222 2c22 6269 6449 7622 3a22 222c  ":"","bidIv":"",
+00060240: 2262 6964 5369 7a65 223a 2222 2c22 6173  "bidSize":"","as
+00060250: 6b22 3a22 222c 2261 736b 4976 223a 2222  k":"","askIv":""
+00060260: 2c22 6173 6b53 697a 6522 3a22 222c 226c  ,"askSize":"","l
+00060270: 6173 7450 7269 6365 223a 2222 2c22 6f70  astPrice":"","op
+00060280: 656e 496e 7465 7265 7374 223a 2222 2c22  enInterest":"","
+00060290: 696e 6465 7850 7269 6365 223a 2222 2c22  indexPrice":"","
+000602a0: 6d61 726b 5072 6963 6522 3a22 222c 226d  markPrice":"","m
+000602b0: 6172 6b50 7269 6365 4976 223a 2222 2c22  arkPriceIv":"","
+000602c0: 6368 616e 6765 3234 6822 3a22 222c 2268  change24h":"","h
+000602d0: 6967 6832 3468 223a 2222 2c22 6c6f 7732  igh24h":"","low2
+000602e0: 3468 223a 2222 2c22 766f 6c75 6d65 3234  4h":"","volume24
+000602f0: 6822 3a22 222c 2274 7572 6e6f 7665 7232  h":"","turnover2
+00060300: 3468 223a 2222 2c22 746f 7461 6c56 6f6c  4h":"","totalVol
+00060310: 756d 6522 3a22 222c 2274 6f74 616c 5475  ume":"","totalTu
+00060320: 726e 6f76 6572 223a 2222 2c22 6675 6e64  rnover":"","fund
+00060330: 696e 6752 6174 6522 3a22 222c 2270 7265  ingRate":"","pre
+00060340: 6469 6374 6564 4675 6e64 696e 6752 6174  dictedFundingRat
+00060350: 6522 3a22 222c 226e 6578 7446 756e 6469  e":"","nextFundi
+00060360: 6e67 5469 6d65 223a 2222 2c22 636f 756e  ngTime":"","coun
+00060370: 7464 6f77 6e48 6f75 7222 3a22 3022 2c22  tdownHour":"0","
+00060380: 7072 6564 6963 7465 6444 656c 6976 6572  predictedDeliver
+00060390: 7950 7269 6365 223a 2222 2c22 756e 6465  yPrice":"","unde
+000603a0: 726c 7969 6e67 5072 6963 6522 3a22 222c  rlyingPrice":"",
+000603b0: 2264 656c 7461 223a 2222 2c22 6761 6d6d  "delta":"","gamm
+000603c0: 6122 3a22 222c 2276 6567 6122 3a22 222c  a":"","vega":"",
+000603d0: 2274 6865 7461 223a 2222 7d0a 2020 2020  "theta":""}.    
+000603e0: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+000603f0: 2020 2020 230a 2020 2020 2020 2020 6572      #.        er
+00060400: 726f 7243 6f64 6520 3d20 7365 6c66 2e73  rorCode = self.s
+00060410: 6166 655f 7374 7269 6e67 5f32 2872 6573  afe_string_2(res
+00060420: 706f 6e73 652c 2027 7265 745f 636f 6465  ponse, 'ret_code
+00060430: 272c 2027 7265 7443 6f64 6527 290a 2020  ', 'retCode').  
+00060440: 2020 2020 2020 6966 2065 7272 6f72 436f        if errorCo
+00060450: 6465 2021 3d20 2730 273a 0a20 2020 2020  de != '0':.     
+00060460: 2020 2020 2020 2069 6620 6572 726f 7243         if errorC
+00060470: 6f64 6520 3d3d 2027 3330 3038 3427 3a0a  ode == '30084':.
+00060480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00060490: 2320 6e6f 7420 616e 2065 7272 6f72 0a20  # not an error. 
+000604a0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+000604b0: 2068 7474 7073 3a2f 2f67 6974 6875 622e   https://github.
+000604c0: 636f 6d2f 6363 7874 2f63 6378 742f 6973  com/ccxt/ccxt/is
+000604d0: 7375 6573 2f31 3132 3638 0a20 2020 2020  sues/11268.     
+000604e0: 2020 2020 2020 2020 2020 2023 2068 7474             # htt
+000604f0: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
+00060500: 6363 7874 2f63 6378 742f 7075 6c6c 2f31  ccxt/ccxt/pull/1
+00060510: 3136 3234 0a20 2020 2020 2020 2020 2020  1624.           
+00060520: 2020 2020 2023 2050 4f53 5420 6874 7470       # POST http
+00060530: 733a 2f2f 6170 692e 6279 6269 742e 636f  s://api.bybit.co
+00060540: 6d2f 7632 2f70 7269 7661 7465 2f70 6f73  m/v2/private/pos
+00060550: 6974 696f 6e2f 7377 6974 6368 2d69 736f  ition/switch-iso
+00060560: 6c61 7465 6420 3230 3020 4f4b 0a20 2020  lated 200 OK.   
+00060570: 2020 2020 2020 2020 2020 2020 2023 207b               # {
+00060580: 2272 6574 5f63 6f64 6522 3a33 3030 3834  "ret_code":30084
+00060590: 2c22 7265 745f 6d73 6722 3a22 4973 6f6c  ,"ret_msg":"Isol
+000605a0: 6174 6564 206e 6f74 206d 6f64 6966 6965  ated not modifie
+000605b0: 6422 2c22 6578 745f 636f 6465 223a 2222  d","ext_code":""
+000605c0: 2c22 6578 745f 696e 666f 223a 2222 2c22  ,"ext_info":"","
+000605d0: 7265 7375 6c74 223a 6e75 6c6c 2c22 7469  result":null,"ti
+000605e0: 6d65 5f6e 6f77 223a 2231 3634 3230 3035  me_now":"1642005
+000605f0: 3231 392e 3933 3739 3838 222c 2272 6174  219.937988","rat
+00060600: 655f 6c69 6d69 745f 7374 6174 7573 223a  e_limit_status":
+00060610: 3733 2c22 7261 7465 5f6c 696d 6974 5f72  73,"rate_limit_r
+00060620: 6573 6574 5f6d 7322 3a31 3634 3230 3035  eset_ms":1642005
+00060630: 3231 3938 3934 2c22 7261 7465 5f6c 696d  219894,"rate_lim
+00060640: 6974 223a 3735 7d0a 2020 2020 2020 2020  it":75}.        
+00060650: 2020 2020 2020 2020 7265 7475 726e 204e          return N
+00060660: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+00060670: 6665 6564 6261 636b 203d 204e 6f6e 650a  feedback = None.
+00060680: 2020 2020 2020 2020 2020 2020 6966 2065              if e
+00060690: 7272 6f72 436f 6465 203d 3d20 2731 3030  rrorCode == '100
+000606a0: 3035 273a 0a20 2020 2020 2020 2020 2020  05':.           
+000606b0: 2020 2020 2066 6565 6462 6163 6b20 3d20       feedback = 
+000606c0: 7365 6c66 2e69 6420 2b20 2720 7072 6976  self.id + ' priv
+000606d0: 6174 6520 6170 6920 7573 6573 202f 7573  ate api uses /us
+000606e0: 6572 2f76 332f 7072 6976 6174 652f 7175  er/v3/private/qu
+000606f0: 6572 792d 6170 6920 746f 2063 6865 636b  ery-api to check
+00060700: 2069 6620 796f 7520 6861 7665 2061 2075   if you have a u
+00060710: 6e69 6669 6564 2061 6363 6f75 6e74 2e20  nified account. 
+00060720: 5468 6520 4150 4920 6b65 7920 6f66 2075  The API key of u
+00060730: 7365 7220 6964 206d 7573 7420 6f77 6e20  ser id must own 
+00060740: 6f6e 6520 6f66 2070 6572 6d69 7373 696f  one of permissio
+00060750: 6e73 3a20 2241 6363 6f75 6e74 2054 7261  ns: "Account Tra
+00060760: 6e73 6665 7222 2c20 2253 7562 6163 636f  nsfer", "Subacco
+00060770: 756e 7420 5472 616e 7366 6572 222c 2022  unt Transfer", "
+00060780: 5769 7468 6472 6177 616c 2220 2720 2b20  Withdrawal" ' + 
+00060790: 626f 6479 0a20 2020 2020 2020 2020 2020  body.           
+000607a0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+000607b0: 2020 2020 2020 2066 6565 6462 6163 6b20         feedback 
+000607c0: 3d20 7365 6c66 2e69 6420 2b20 2720 2720  = self.id + ' ' 
+000607d0: 2b20 626f 6479 0a20 2020 2020 2020 2020  + body.         
+000607e0: 2020 2073 656c 662e 7468 726f 775f 6272     self.throw_br
+000607f0: 6f61 646c 795f 6d61 7463 6865 645f 6578  oadly_matched_ex
+00060800: 6365 7074 696f 6e28 7365 6c66 2e65 7863  ception(self.exc
+00060810: 6570 7469 6f6e 735b 2762 726f 6164 275d  eptions['broad']
+00060820: 2c20 626f 6479 2c20 6665 6564 6261 636b  , body, feedback
+00060830: 290a 2020 2020 2020 2020 2020 2020 7365  ).            se
+00060840: 6c66 2e74 6872 6f77 5f65 7861 6374 6c79  lf.throw_exactly
+00060850: 5f6d 6174 6368 6564 5f65 7863 6570 7469  _matched_excepti
+00060860: 6f6e 2873 656c 662e 6578 6365 7074 696f  on(self.exceptio
+00060870: 6e73 5b27 6578 6163 7427 5d2c 2065 7272  ns['exact'], err
+00060880: 6f72 436f 6465 2c20 6665 6564 6261 636b  orCode, feedback
+00060890: 290a 2020 2020 2020 2020 2020 2020 7261  ).            ra
+000608a0: 6973 6520 4578 6368 616e 6765 4572 726f  ise ExchangeErro
+000608b0: 7228 6665 6564 6261 636b 2920 2023 2075  r(feedback)  # u
+000608c0: 6e6b 6e6f 776e 206d 6573 7361 6765 0a20  nknown message. 
+000608d0: 2020 2020 2020 2072 6574 7572 6e20 4e6f         return No
+000608e0: 6e65 0a                                  ne.
```

### Comparing `ccxt-3.0.95/ccxt/async_support/cex.py` & `ccxt-3.0.96/ccxt/async_support/cex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/coinbase.py` & `ccxt-3.0.96/ccxt/async_support/coinbase.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/coinbaseprime.py` & `ccxt-3.0.96/ccxt/async_support/coinbaseprime.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/coinbasepro.py` & `ccxt-3.0.96/ccxt/async_support/coinbasepro.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/coincheck.py` & `ccxt-3.0.96/ccxt/async_support/coincheck.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/coinex.py` & `ccxt-3.0.96/ccxt/async_support/coinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/coinfalcon.py` & `ccxt-3.0.96/ccxt/async_support/coinfalcon.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/coinmate.py` & `ccxt-3.0.96/ccxt/async_support/coinmate.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/coinone.py` & `ccxt-3.0.96/ccxt/async_support/coinone.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/coinsph.py` & `ccxt-3.0.96/ccxt/async_support/coinsph.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/coinspot.py` & `ccxt-3.0.96/ccxt/async_support/coinspot.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/cryptocom.py` & `ccxt-3.0.96/ccxt/async_support/cryptocom.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/currencycom.py` & `ccxt-3.0.96/ccxt/async_support/currencycom.py`

 * *Files 0% similar despite different names*

```diff
@@ -457,15 +457,15 @@
             quote = self.safe_currency_code(quoteId)
             symbol = base + '/' + quote
             typeRaw = self.safe_string(market, 'marketType')
             spot = (typeRaw == 'SPOT')
             futures = False
             swap = (typeRaw == 'LEVERAGE')
             type = 'swap' if swap else 'spot'
-            margin = swap  # decided to set
+            margin = None
             if swap:
                 symbol = symbol.replace(self.options['leverage_markets_suffix'], '')
                 symbol += ':' + quote
             active = self.safe_string(market, 'status') == 'TRADING'
             # to set taker & maker fees, we use one from the below data - pairs either have 'exchangeFee' or 'tradingFee', if none of them(rare cases), then they should have 'takerFee & makerFee'
             exchangeFee = self.safe_string_2(market, 'exchangeFee', 'tradingFee')
             makerFee = self.safe_string(market, 'makerFee', exchangeFee)
```

### Comparing `ccxt-3.0.95/ccxt/async_support/delta.py` & `ccxt-3.0.96/ccxt/async_support/delta.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/deribit.py` & `ccxt-3.0.96/ccxt/async_support/deribit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/digifinex.py` & `ccxt-3.0.96/ccxt/async_support/digifinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/exmo.py` & `ccxt-3.0.96/ccxt/async_support/exmo.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/flowbtc.py` & `ccxt-3.0.96/ccxt/async_support/flowbtc.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/fmfwio.py` & `ccxt-3.0.96/ccxt/async_support/fmfwio.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/gate.py` & `ccxt-3.0.96/ccxt/async_support/gate.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/gemini.py` & `ccxt-3.0.96/ccxt/async_support/gemini.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/hitbtc.py` & `ccxt-3.0.96/ccxt/async_support/hitbtc.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/hitbtc3.py` & `ccxt-3.0.96/ccxt/async_support/hitbtc3.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/hollaex.py` & `ccxt-3.0.96/ccxt/async_support/hollaex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/huobi.py` & `ccxt-3.0.96/ccxt/async_support/huobi.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/huobijp.py` & `ccxt-3.0.96/ccxt/async_support/huobijp.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/huobipro.py` & `ccxt-3.0.96/ccxt/async_support/huobipro.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/idex.py` & `ccxt-3.0.96/ccxt/async_support/idex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/independentreserve.py` & `ccxt-3.0.96/ccxt/async_support/independentreserve.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/indodax.py` & `ccxt-3.0.96/ccxt/async_support/indodax.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/itbit.py` & `ccxt-3.0.96/ccxt/async_support/itbit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/kraken.py` & `ccxt-3.0.96/ccxt/async_support/kraken.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/krakenfutures.py` & `ccxt-3.0.96/ccxt/async_support/krakenfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/kucoin.py` & `ccxt-3.0.96/ccxt/async_support/kucoin.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/kucoinfutures.py` & `ccxt-3.0.96/ccxt/async_support/kucoinfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/kuna.py` & `ccxt-3.0.96/ccxt/async_support/kuna.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/latoken.py` & `ccxt-3.0.96/ccxt/async_support/latoken.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/lbank.py` & `ccxt-3.0.96/ccxt/async_support/lbank.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/lbank2.py` & `ccxt-3.0.96/ccxt/async_support/lbank2.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/luno.py` & `ccxt-3.0.96/ccxt/async_support/luno.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/lykke.py` & `ccxt-3.0.96/ccxt/async_support/lykke.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/mercado.py` & `ccxt-3.0.96/ccxt/async_support/mercado.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/mexc.py` & `ccxt-3.0.96/ccxt/async_support/mexc.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/ndax.py` & `ccxt-3.0.96/ccxt/async_support/ndax.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/novadax.py` & `ccxt-3.0.96/ccxt/async_support/novadax.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/oceanex.py` & `ccxt-3.0.96/ccxt/async_support/oceanex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/okcoin.py` & `ccxt-3.0.96/ccxt/async_support/okcoin.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/okx.py` & `ccxt-3.0.96/ccxt/async_support/okx.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/paymium.py` & `ccxt-3.0.96/ccxt/async_support/paymium.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/phemex.py` & `ccxt-3.0.96/ccxt/async_support/phemex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/poloniex.py` & `ccxt-3.0.96/ccxt/async_support/poloniex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/poloniexfutures.py` & `ccxt-3.0.96/ccxt/async_support/poloniexfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/probit.py` & `ccxt-3.0.96/ccxt/async_support/probit.py`

 * *Files 2% similar despite different names*

```diff
@@ -252,14 +252,15 @@
                 'UNI': 'UNICORN Token',
                 'UNISWAP': 'UNI',
             },
         })
 
     async def fetch_markets(self, params={}):
         """
+        see https://docs-en.probit.com/reference/market
         retrieves data on all markets for probit
         :param dict params: extra parameters specific to the exchange api endpoint
         :returns [dict]: an array of objects representing market data
         """
         response = await self.publicGetMarket(params)
         #
         #     {
@@ -350,14 +351,15 @@
                 },
                 'info': market,
             })
         return result
 
     async def fetch_currencies(self, params={}):
         """
+        see https://docs-en.probit.com/reference/currency
         fetches all available currencies on an exchange
         :param dict params: extra parameters specific to the probit api endpoint
         :returns dict: an associative dictionary of currencies
         """
         response = await self.publicGetCurrencyWithPlatform(params)
         #
         #     {
@@ -524,14 +526,15 @@
             account['total'] = self.safe_string(balance, 'total')
             account['free'] = self.safe_string(balance, 'available')
             result[code] = account
         return self.safe_balance(result)
 
     async def fetch_balance(self, params={}):
         """
+        see https://docs-en.probit.com/reference/balance
         query for balance and get the amount of funds available for trading or funds locked in orders
         :param dict params: extra parameters specific to the probit api endpoint
         :returns dict: a `balance structure <https://docs.ccxt.com/en/latest/manual.html?#balance-structure>`
         """
         await self.load_markets()
         response = await self.privateGetBalance(params)
         #
@@ -545,14 +548,15 @@
         #         ]
         #     }
         #
         return self.parse_balance(response)
 
     async def fetch_order_book(self, symbol: str, limit: Optional[int] = None, params={}):
         """
+        see https://docs-en.probit.com/reference/order_book
         fetches information on open orders with bid(buy) and ask(sell) prices, volumes and other data
         :param str symbol: unified symbol of the market to fetch the order book for
         :param int|None limit: the maximum amount of order book entries to return
         :param dict params: extra parameters specific to the probit api endpoint
         :returns dict: A dictionary of `order book structures <https://docs.ccxt.com/#/?id=order-book-structure>` indexed by market symbols
         """
         await self.load_markets()
@@ -572,14 +576,15 @@
         #
         data = self.safe_value(response, 'data', [])
         dataBySide = self.group_by(data, 'side')
         return self.parse_order_book(dataBySide, market['symbol'], None, 'buy', 'sell', 'price', 'quantity')
 
     async def fetch_tickers(self, symbols: Optional[List[str]] = None, params={}):
         """
+        see https://docs-en.probit.com/reference/ticker
         fetches price tickers for multiple markets, statistical calculations with the information calculated over the past 24 hours each market
         :param [str]|None symbols: unified symbols of the markets to fetch the ticker for, all market tickers are returned if not assigned
         :param dict params: extra parameters specific to the probit api endpoint
         :returns dict: a dictionary of `ticker structures <https://docs.ccxt.com/#/?id=ticker-structure>`
         """
         await self.load_markets()
         request = {}
@@ -604,14 +609,15 @@
         #     }
         #
         data = self.safe_value(response, 'data', [])
         return self.parse_tickers(data, symbols)
 
     async def fetch_ticker(self, symbol: str, params={}):
         """
+        see https://docs-en.probit.com/reference/ticker
         fetches a price ticker, a statistical calculation with the information calculated over the past 24 hours for a specific market
         :param str symbol: unified symbol of the market to fetch the ticker for
         :param dict params: extra parameters specific to the probit api endpoint
         :returns dict: a `ticker structure <https://docs.ccxt.com/#/?id=ticker-structure>`
         """
         await self.load_markets()
         market = self.market(symbol)
@@ -682,14 +688,15 @@
             'baseVolume': baseVolume,
             'quoteVolume': quoteVolume,
             'info': ticker,
         }, market)
 
     async def fetch_my_trades(self, symbol: Optional[str] = None, since: Optional[int] = None, limit: Optional[int] = None, params={}):
         """
+        see https://docs-en.probit.com/reference/trade
         fetch all trades made by the user
         :param str|None symbol: unified market symbol
         :param int|None since: the earliest time in ms to fetch trades for
         :param int|None limit: the maximum number of trades structures to retrieve
         :param dict params: extra parameters specific to the probit api endpoint
         :returns [dict]: a list of `trade structures <https://docs.ccxt.com/#/?id=trade-structure>`
         """
@@ -728,14 +735,15 @@
         #     }
         #
         data = self.safe_value(response, 'data', [])
         return self.parse_trades(data, market, since, limit)
 
     async def fetch_trades(self, symbol: str, since: Optional[int] = None, limit: Optional[int] = None, params={}):
         """
+        see https://docs-en.probit.com/reference/trade-1
         get the list of most recent trades for a particular symbol
         :param str symbol: unified symbol of the market to fetch trades for
         :param int|None since: timestamp in ms of the earliest trade to fetch
         :param int|None limit: the maximum amount of trades to fetch
         :param dict params: extra parameters specific to the probit api endpoint
         :returns [dict]: a list of `trade structures <https://docs.ccxt.com/en/latest/manual.html?#public-trades>`
         """
@@ -841,14 +849,15 @@
             'amount': amountString,
             'cost': None,
             'fee': fee,
         }, market)
 
     async def fetch_time(self, params={}):
         """
+        see https://docs-en.probit.com/reference/time
         fetches the current integer timestamp in milliseconds from the exchange server
         :param dict params: extra parameters specific to the probit api endpoint
         :returns int: the current integer timestamp in milliseconds from the exchange server
         """
         response = await self.publicGetTime(params)
         #
         #     {"data":"2020-04-12T18:54:25.390Z"}
@@ -883,14 +892,15 @@
             timestamp = duration * self.parse_to_int(timestamp / duration)
             if after:
                 timestamp = self.sum(timestamp, duration)
             return self.iso8601(timestamp * 1000)
 
     async def fetch_ohlcv(self, symbol: str, timeframe='1m', since: Optional[int] = None, limit: Optional[int] = None, params={}):
         """
+        see https://docs-en.probit.com/reference/candle
         fetches historical candlestick data containing the open, high, low, and close price, and the volume of a market
         :param str symbol: unified symbol of the market to fetch OHLCV data for
         :param str timeframe: the length of time each candle represents
         :param int|None since: timestamp in ms of the earliest candle to fetch
         :param int|None limit: the maximum amount of candles to fetch
         :param dict params: extra parameters specific to the probit api endpoint
         :returns [[int]]: A list of candles ordered, open, high, low, close, volume
@@ -966,14 +976,15 @@
             self.safe_number(ohlcv, 'low'),
             self.safe_number(ohlcv, 'close'),
             self.safe_number(ohlcv, 'base_volume'),
         ]
 
     async def fetch_open_orders(self, symbol: Optional[str] = None, since: Optional[int] = None, limit: Optional[int] = None, params={}):
         """
+        see https://docs-en.probit.com/reference/open_order-1
         fetch all unfilled currently open orders
         :param str|None symbol: unified market symbol
         :param int|None since: the earliest time in ms to fetch open orders for
         :param int|None limit: the maximum number of  open orders structures to retrieve
         :param dict params: extra parameters specific to the probit api endpoint
         :returns [dict]: a list of `order structures <https://docs.ccxt.com/#/?id=order-structure>`
         """
@@ -986,14 +997,15 @@
             request['market_id'] = market['id']
         response = await self.privateGetOpenOrder(self.extend(request, params))
         data = self.safe_value(response, 'data')
         return self.parse_orders(data, market, since, limit)
 
     async def fetch_closed_orders(self, symbol: Optional[str] = None, since: Optional[int] = None, limit: Optional[int] = None, params={}):
         """
+        see https://docs-en.probit.com/reference/order
         fetches information on multiple closed orders made by the user
         :param str|None symbol: unified market symbol of the market orders were made in
         :param int|None since: the earliest time in ms to fetch orders for
         :param int|None limit: the maximum number of  orde structures to retrieve
         :param dict params: extra parameters specific to the probit api endpoint
         :returns [dict]: a list of `order structures <https://docs.ccxt.com/#/?id=order-structure>`
         """
@@ -1013,14 +1025,15 @@
             request['limit'] = limit
         response = await self.privateGetOrderHistory(self.extend(request, params))
         data = self.safe_value(response, 'data')
         return self.parse_orders(data, market, since, limit)
 
     async def fetch_order(self, id: str, symbol: Optional[str] = None, params={}):
         """
+        see https://docs-en.probit.com/reference/order-3
         fetches information on an order made by the user
         :param str symbol: unified symbol of the market the order was made in
         :param dict params: extra parameters specific to the probit api endpoint
         :returns dict: An `order structure <https://docs.ccxt.com/#/?id=order-structure>`
         """
         if symbol is None:
             raise ArgumentsRequired(self.id + ' fetchOrder() requires a symbol argument')
@@ -1112,14 +1125,15 @@
         }, market)
 
     def cost_to_precision(self, symbol, cost):
         return self.decimal_to_precision(cost, TRUNCATE, self.markets[symbol]['precision']['cost'], self.precisionMode)
 
     async def create_order(self, symbol: str, type, side: OrderSide, amount, price=None, params={}):
         """
+        see https://docs-en.probit.com/reference/order-1
         create a trade order
         :param str symbol: unified symbol of the market to create an order in
         :param str type: 'market' or 'limit'
         :param str side: 'buy' or 'sell'
         :param float amount: how much of currency you want to trade in units of base currency
         :param float|None price: the price at which the order is to be fullfilled, in units of the quote currency, ignored in market orders
         :param dict params: extra parameters specific to the probit api endpoint
@@ -1191,14 +1205,15 @@
             order['amount'] = None
             order['cost'] = self.parse_number(costToPrecision)
             order['remaining'] = None
         return order
 
     async def cancel_order(self, id: str, symbol: Optional[str] = None, params={}):
         """
+        see https://docs-en.probit.com/reference/order-2
         cancels an open order
         :param str id: order id
         :param str symbol: unified symbol of the market the order was made in
         :param dict params: extra parameters specific to the probit api endpoint
         :returns dict: An `order structure <https://docs.ccxt.com/#/?id=order-structure>`
         """
         if symbol is None:
@@ -1227,14 +1242,15 @@
             'tag': tag,
             'network': network,
             'info': depositAddress,
         }
 
     async def fetch_deposit_address(self, code: str, params={}):
         """
+        see https://docs-en.probit.com/reference/deposit_address
         fetch the deposit address for a currency associated with self account
         :param str code: unified currency code
         :param dict params: extra parameters specific to the probit api endpoint
         :returns dict: an `address structure <https://docs.ccxt.com/#/?id=address-structure>`
         """
         await self.load_markets()
         currency = self.currency(code)
@@ -1276,14 +1292,15 @@
         firstAddress = self.safe_value(data, 0)
         if firstAddress is None:
             raise InvalidAddress(self.id + ' fetchDepositAddress() returned an empty response')
         return self.parse_deposit_address(firstAddress, currency)
 
     async def fetch_deposit_addresses(self, codes=None, params={}):
         """
+        see https://docs-en.probit.com/reference/deposit_address
         fetch deposit addresses for multiple currencies and chain types
         :param [str]|None codes: list of unified currency codes, default is None
         :param dict params: extra parameters specific to the probit api endpoint
         :returns dict: a list of `address structures <https://docs.ccxt.com/#/?id=address-structure>`
         """
         await self.load_markets()
         request = {}
@@ -1295,14 +1312,15 @@
             request['currency_id'] = ','.join(codes)
         response = await self.privateGetDepositAddress(self.extend(request, params))
         data = self.safe_value(response, 'data', [])
         return self.parse_deposit_addresses(data, codes)
 
     async def withdraw(self, code: str, amount, address, tag=None, params={}):
         """
+        see https://docs-en.probit.com/reference/withdrawal
         make a withdrawal
         :param str code: unified currency code
         :param float amount: the amount to withdraw
         :param str address: the address to withdraw to
         :param str|None tag:
         :param dict params: extra parameters specific to the probit api endpoint
         :returns dict: a `transaction structure <https://docs.ccxt.com/#/?id=transaction-structure>`
@@ -1389,14 +1407,15 @@
             'cancelled': 'canceled',
             'cancelling': 'canceled',
         }
         return self.safe_string(statuses, status, status)
 
     async def fetch_deposit_withdraw_fees(self, codes=None, params={}):
         """
+        see https://docs-en.probit.com/reference/currency
         fetch deposit and withdraw fees
         see https://docs.poloniex.com/#public-endpoints-reference-data-currency-information
         :param [str]|None codes: list of unified currency codes
         :param dict params: extra parameters specific to the poloniex api endpoint
         :returns [dict]: a list of `fees structures <https://docs.ccxt.com/#/?id=fee-structure>`
         """
         await self.load_markets()
@@ -1560,14 +1579,15 @@
                 elif query:
                     body = self.json(query)
                     headers['Content-Type'] = 'application/json'
         return {'url': url, 'method': method, 'body': body, 'headers': headers}
 
     async def sign_in(self, params={}):
         """
+        see https://docs-en.probit.com/reference/token
         sign in, must be called prior to using other authenticated methods
         :param dict params: extra parameters specific to the probit api endpoint
         :returns: response from exchange
         """
         self.check_required_credentials()
         request = {
             'grant_type': 'client_credentials',  # the only supported value
```

### Comparing `ccxt-3.0.95/ccxt/async_support/ripio.py` & `ccxt-3.0.96/ccxt/async_support/ripio.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/stex.py` & `ccxt-3.0.96/ccxt/async_support/stex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/tidex.py` & `ccxt-3.0.96/ccxt/async_support/tidex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/timex.py` & `ccxt-3.0.96/ccxt/async_support/timex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/tokocrypto.py` & `ccxt-3.0.96/ccxt/async_support/tokocrypto.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/upbit.py` & `ccxt-3.0.96/ccxt/async_support/upbit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/wavesexchange.py` & `ccxt-3.0.96/ccxt/async_support/wavesexchange.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/wazirx.py` & `ccxt-3.0.96/ccxt/async_support/wazirx.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/whitebit.py` & `ccxt-3.0.96/ccxt/async_support/whitebit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/woo.py` & `ccxt-3.0.96/ccxt/async_support/woo.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/xt.py` & `ccxt-3.0.96/ccxt/async_support/xt.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/yobit.py` & `ccxt-3.0.96/ccxt/async_support/yobit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/zaif.py` & `ccxt-3.0.96/ccxt/async_support/zaif.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/zb.py` & `ccxt-3.0.96/ccxt/async_support/zb.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/async_support/zonda.py` & `ccxt-3.0.96/ccxt/async_support/zonda.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/base/__init__.py` & `ccxt-3.0.96/ccxt/base/__init__.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/base/decimal_to_precision.py` & `ccxt-3.0.96/ccxt/base/decimal_to_precision.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/base/errors.py` & `ccxt-3.0.96/ccxt/base/errors.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/base/exchange.py` & `ccxt-3.0.96/ccxt/base/exchange.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 # -*- coding: utf-8 -*-
 
 """Base exchange class"""
 
 # -----------------------------------------------------------------------------
 
-__version__ = '3.0.95'
+__version__ = '3.0.96'
 
 # -----------------------------------------------------------------------------
 
 from ccxt.base.errors import ExchangeError
 from ccxt.base.errors import NetworkError
 from ccxt.base.errors import NotSupported
 from ccxt.base.errors import AuthenticationError
```

### Comparing `ccxt-3.0.95/ccxt/base/precise.py` & `ccxt-3.0.96/ccxt/base/precise.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/base/types.py` & `ccxt-3.0.96/ccxt/base/types.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/bequant.py` & `ccxt-3.0.96/ccxt/bequant.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/bigone.py` & `ccxt-3.0.96/ccxt/bigone.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/binance.py` & `ccxt-3.0.96/ccxt/binance.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/binancecoinm.py` & `ccxt-3.0.96/ccxt/binancecoinm.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/binanceus.py` & `ccxt-3.0.96/ccxt/binanceus.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/binanceusdm.py` & `ccxt-3.0.96/ccxt/binanceusdm.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/bit2c.py` & `ccxt-3.0.96/ccxt/bit2c.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/bitbank.py` & `ccxt-3.0.96/ccxt/bitbank.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/bitbns.py` & `ccxt-3.0.96/ccxt/bitbns.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/bitfinex.py` & `ccxt-3.0.96/ccxt/bitfinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/bitfinex2.py` & `ccxt-3.0.96/ccxt/bitfinex2.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/bitflyer.py` & `ccxt-3.0.96/ccxt/bitflyer.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/bitforex.py` & `ccxt-3.0.96/ccxt/bitforex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/bitget.py` & `ccxt-3.0.96/ccxt/bitget.py`

 * *Files 0% similar despite different names*

```diff
@@ -1017,15 +1017,15 @@
             amountPrecision = self.parse_number(self.parse_precision(self.safe_string(market, 'quantityScale')))
         else:
             expiryString = self.safe_string(parts, 2)
             if expiryString is not None:
                 year = '20' + expiryString[0:2]
                 month = expiryString[2:4]
                 day = expiryString[4:6]
-                expiryDatetime = year + '-' + month + '-' + day + 'T00:00:000Z'
+                expiryDatetime = year + '-' + month + '-' + day + 'T00:00:00.000Z'
                 expiry = self.parse8601(expiryDatetime)
                 type = 'future'
                 future = True
                 symbol = symbol + ':' + settle + '-' + expiryString
             else:
                 type = 'swap'
                 swap = True
```

### Comparing `ccxt-3.0.95/ccxt/bithumb.py` & `ccxt-3.0.96/ccxt/bithumb.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/bitmart.py` & `ccxt-3.0.96/ccxt/bitmart.py`

 * *Files 0% similar despite different names*

```diff
@@ -626,30 +626,33 @@
             quoteId = self.safe_string(market, 'quote_currency')
             base = self.safe_currency_code(baseId)
             quote = self.safe_currency_code(quoteId)
             settleId = 'USDT'  # self is bitmart's ID for usdt
             settle = self.safe_currency_code(settleId)
             symbol = base + '/' + quote + ':' + settle
             productType = self.safe_number(market, 'product_type')
+            isFutures = (productType == 2)
             expiry = self.safe_integer(market, 'expire_timestamp')
+            if not isFutures and (expiry == 0):
+                expiry = None
             result.append({
                 'id': id,
                 'numericId': None,
                 'symbol': symbol,
                 'base': base,
                 'quote': quote,
                 'settle': settle,
                 'baseId': baseId,
                 'quoteId': quoteId,
                 'settleId': settleId,
                 'type': 'swap',
                 'spot': False,
                 'margin': False,
                 'swap': (productType == 1),
-                'future': (productType == 2),
+                'future': isFutures,
                 'option': False,
                 'active': True,
                 'contract': True,
                 'linear': True,
                 'inverse': False,
                 'contractSize': self.safe_number(market, 'contract_size'),
                 'expiry': expiry,
```

### Comparing `ccxt-3.0.95/ccxt/bitmex.py` & `ccxt-3.0.96/ccxt/bitmex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/bitopro.py` & `ccxt-3.0.96/ccxt/bitopro.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/bitpanda.py` & `ccxt-3.0.96/ccxt/bitpanda.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/bitrue.py` & `ccxt-3.0.96/ccxt/bitrue.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/bitso.py` & `ccxt-3.0.96/ccxt/bitso.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/bitstamp.py` & `ccxt-3.0.96/ccxt/bitstamp.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/bitstamp1.py` & `ccxt-3.0.96/ccxt/bitstamp1.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/bittrex.py` & `ccxt-3.0.96/ccxt/bittrex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/bitvavo.py` & `ccxt-3.0.96/ccxt/bitvavo.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/bkex.py` & `ccxt-3.0.96/ccxt/bkex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/bl3p.py` & `ccxt-3.0.96/ccxt/bl3p.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/blockchaincom.py` & `ccxt-3.0.96/ccxt/blockchaincom.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/btcalpha.py` & `ccxt-3.0.96/ccxt/btcalpha.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/btcbox.py` & `ccxt-3.0.96/ccxt/btcbox.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/btcex.py` & `ccxt-3.0.96/ccxt/btcex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/btcmarkets.py` & `ccxt-3.0.96/ccxt/btcmarkets.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/btctradeua.py` & `ccxt-3.0.96/ccxt/btctradeua.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/btcturk.py` & `ccxt-3.0.96/ccxt/btcturk.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/buda.py` & `ccxt-3.0.96/ccxt/buda.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/bybit.py` & `ccxt-3.0.96/ccxt/bybit.py`

 * *Files 1% similar despite different names*

```diff
@@ -10363,14167 +10363,14239 @@
 000287a0: 223a 2054 7275 652c 0a20 2020 2020 2020  ": True,.       
 000287b0: 2023 2020 2020 2020 2020 2022 7472 6967   #         "trig
 000287c0: 6765 7244 6972 6563 7469 6f6e 223a 2030  gerDirection": 0
 000287d0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
 000287e0: 2020 2020 2270 6f73 6974 696f 6e49 6478      "positionIdx
 000287f0: 223a 2032 0a20 2020 2020 2020 2023 2020  ": 2.        #  
 00028800: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
-00028810: 2020 2020 2020 206d 6172 6b65 7449 6420         marketId 
-00028820: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-00028830: 6e67 286f 7264 6572 2c20 2773 796d 626f  ng(order, 'symbo
-00028840: 6c27 290a 2020 2020 2020 2020 6d61 726b  l').        mark
-00028850: 6574 5479 7065 203d 2027 636f 6e74 7261  etType = 'contra
-00028860: 6374 270a 2020 2020 2020 2020 6966 206d  ct'.        if m
-00028870: 6172 6b65 7420 6973 206e 6f74 204e 6f6e  arket is not Non
-00028880: 653a 0a20 2020 2020 2020 2020 2020 206d  e:.            m
-00028890: 6172 6b65 7454 7970 6520 3d20 6d61 726b  arketType = mark
-000288a0: 6574 5b27 7479 7065 275d 0a20 2020 2020  et['type'].     
-000288b0: 2020 2063 6174 6567 6f72 7920 3d20 7365     category = se
-000288c0: 6c66 2e73 6166 655f 7374 7269 6e67 286f  lf.safe_string(o
-000288d0: 7264 6572 2c20 2763 6174 6567 6f72 7927  rder, 'category'
-000288e0: 290a 2020 2020 2020 2020 6966 2063 6174  ).        if cat
-000288f0: 6567 6f72 7920 6973 206e 6f74 204e 6f6e  egory is not Non
-00028900: 653a 0a20 2020 2020 2020 2020 2020 2069  e:.            i
-00028910: 6620 6361 7465 676f 7279 203d 3d20 2773  f category == 's
-00028920: 706f 7427 3a0a 2020 2020 2020 2020 2020  pot':.          
-00028930: 2020 2020 2020 6d61 726b 6574 5479 7065        marketType
-00028940: 203d 2027 7370 6f74 270a 2020 2020 2020   = 'spot'.      
-00028950: 2020 6d61 726b 6574 203d 2073 656c 662e    market = self.
-00028960: 7361 6665 5f6d 6172 6b65 7428 6d61 726b  safe_market(mark
-00028970: 6574 4964 2c20 6d61 726b 6574 2c20 4e6f  etId, market, No
-00028980: 6e65 2c20 6d61 726b 6574 5479 7065 290a  ne, marketType).
-00028990: 2020 2020 2020 2020 7379 6d62 6f6c 203d          symbol =
-000289a0: 206d 6172 6b65 745b 2773 796d 626f 6c27   market['symbol'
-000289b0: 5d0a 2020 2020 2020 2020 7469 6d65 7374  ].        timest
-000289c0: 616d 7020 3d20 7365 6c66 2e73 6166 655f  amp = self.safe_
-000289d0: 696e 7465 6765 7228 6f72 6465 722c 2027  integer(order, '
-000289e0: 6372 6561 7465 6454 696d 6527 290a 2020  createdTime').  
-000289f0: 2020 2020 2020 6964 203d 2073 656c 662e        id = self.
-00028a00: 7361 6665 5f73 7472 696e 6728 6f72 6465  safe_string(orde
-00028a10: 722c 2027 6f72 6465 7249 6427 290a 2020  r, 'orderId').  
-00028a20: 2020 2020 2020 7479 7065 203d 2073 656c        type = sel
-00028a30: 662e 7361 6665 5f73 7472 696e 675f 6c6f  f.safe_string_lo
-00028a40: 7765 7228 6f72 6465 722c 2027 6f72 6465  wer(order, 'orde
-00028a50: 7254 7970 6527 290a 2020 2020 2020 2020  rType').        
-00028a60: 7072 6963 6520 3d20 7365 6c66 2e73 6166  price = self.saf
-00028a70: 655f 7374 7269 6e67 286f 7264 6572 2c20  e_string(order, 
-00028a80: 2770 7269 6365 2729 0a20 2020 2020 2020  'price').       
-00028a90: 2061 6d6f 756e 7420 3d20 7365 6c66 2e73   amount = self.s
-00028aa0: 6166 655f 7374 7269 6e67 286f 7264 6572  afe_string(order
-00028ab0: 2c20 2771 7479 2729 0a20 2020 2020 2020  , 'qty').       
-00028ac0: 2063 6f73 7420 3d20 7365 6c66 2e73 6166   cost = self.saf
-00028ad0: 655f 7374 7269 6e67 286f 7264 6572 2c20  e_string(order, 
-00028ae0: 2763 756d 4578 6563 5661 6c75 6527 290a  'cumExecValue').
-00028af0: 2020 2020 2020 2020 6669 6c6c 6564 203d          filled =
-00028b00: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-00028b10: 6728 6f72 6465 722c 2027 6375 6d45 7865  g(order, 'cumExe
-00028b20: 6351 7479 2729 0a20 2020 2020 2020 2072  cQty').        r
-00028b30: 656d 6169 6e69 6e67 203d 2073 656c 662e  emaining = self.
-00028b40: 7361 6665 5f73 7472 696e 6728 6f72 6465  safe_string(orde
-00028b50: 722c 2027 6c65 6176 6573 5174 7927 290a  r, 'leavesQty').
-00028b60: 2020 2020 2020 2020 6c61 7374 5472 6164          lastTrad
-00028b70: 6554 696d 6573 7461 6d70 203d 2073 656c  eTimestamp = sel
-00028b80: 662e 7361 6665 5f69 6e74 6567 6572 286f  f.safe_integer(o
-00028b90: 7264 6572 2c20 2775 7064 6174 6564 5469  rder, 'updatedTi
-00028ba0: 6d65 2729 0a20 2020 2020 2020 2072 6177  me').        raw
-00028bb0: 5374 6174 7573 203d 2073 656c 662e 7361  Status = self.sa
-00028bc0: 6665 5f73 7472 696e 6728 6f72 6465 722c  fe_string(order,
-00028bd0: 2027 6f72 6465 7253 7461 7475 7327 290a   'orderStatus').
-00028be0: 2020 2020 2020 2020 7374 6174 7573 203d          status =
-00028bf0: 2073 656c 662e 7061 7273 655f 6f72 6465   self.parse_orde
-00028c00: 725f 7374 6174 7573 2872 6177 5374 6174  r_status(rawStat
-00028c10: 7573 290a 2020 2020 2020 2020 7369 6465  us).        side
-00028c20: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-00028c30: 696e 675f 6c6f 7765 7228 6f72 6465 722c  ing_lower(order,
-00028c40: 2027 7369 6465 2729 0a20 2020 2020 2020   'side').       
-00028c50: 2066 6565 203d 204e 6f6e 650a 2020 2020   fee = None.    
-00028c60: 2020 2020 6665 6543 6f73 7453 7472 696e      feeCostStrin
-00028c70: 6720 3d20 7365 6c66 2e73 6166 655f 7374  g = self.safe_st
-00028c80: 7269 6e67 286f 7264 6572 2c20 2763 756d  ring(order, 'cum
-00028c90: 4578 6563 4665 6527 290a 2020 2020 2020  ExecFee').      
-00028ca0: 2020 6966 2066 6565 436f 7374 5374 7269    if feeCostStri
-00028cb0: 6e67 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ng is not None:.
-00028cc0: 2020 2020 2020 2020 2020 2020 6665 6520              fee 
-00028cd0: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-00028ce0: 2020 2020 2763 6f73 7427 3a20 6665 6543      'cost': feeC
-00028cf0: 6f73 7453 7472 696e 672c 0a20 2020 2020  ostString,.     
-00028d00: 2020 2020 2020 2020 2020 2027 6375 7272             'curr
-00028d10: 656e 6379 273a 206d 6172 6b65 745b 2773  ency': market['s
-00028d20: 6574 746c 6527 5d2c 0a20 2020 2020 2020  ettle'],.       
-00028d30: 2020 2020 207d 0a20 2020 2020 2020 2063       }.        c
-00028d40: 6c69 656e 744f 7264 6572 4964 203d 2073  lientOrderId = s
-00028d50: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
-00028d60: 6f72 6465 722c 2027 6f72 6465 724c 696e  order, 'orderLin
-00028d70: 6b49 6427 290a 2020 2020 2020 2020 6966  kId').        if
-00028d80: 2028 636c 6965 6e74 4f72 6465 7249 6420   (clientOrderId 
-00028d90: 6973 206e 6f74 204e 6f6e 6529 2061 6e64  is not None) and
-00028da0: 2028 6c65 6e28 636c 6965 6e74 4f72 6465   (len(clientOrde
-00028db0: 7249 6429 203c 2031 293a 0a20 2020 2020  rId) < 1):.     
-00028dc0: 2020 2020 2020 2063 6c69 656e 744f 7264         clientOrd
-00028dd0: 6572 4964 203d 204e 6f6e 650a 2020 2020  erId = None.    
-00028de0: 2020 2020 7261 7754 696d 6549 6e46 6f72      rawTimeInFor
-00028df0: 6365 203d 2073 656c 662e 7361 6665 5f73  ce = self.safe_s
-00028e00: 7472 696e 6728 6f72 6465 722c 2027 7469  tring(order, 'ti
-00028e10: 6d65 496e 466f 7263 6527 290a 2020 2020  meInForce').    
-00028e20: 2020 2020 7469 6d65 496e 466f 7263 6520      timeInForce 
-00028e30: 3d20 7365 6c66 2e70 6172 7365 5f74 696d  = self.parse_tim
-00028e40: 655f 696e 5f66 6f72 6365 2872 6177 5469  e_in_force(rawTi
-00028e50: 6d65 496e 466f 7263 6529 0a20 2020 2020  meInForce).     
-00028e60: 2020 2073 746f 7050 7269 6365 203d 2073     stopPrice = s
-00028e70: 656c 662e 6f6d 6974 5f7a 6572 6f28 7365  elf.omit_zero(se
-00028e80: 6c66 2e73 6166 655f 7374 7269 6e67 286f  lf.safe_string(o
-00028e90: 7264 6572 2c20 2774 7269 6767 6572 5072  rder, 'triggerPr
-00028ea0: 6963 6527 2929 0a20 2020 2020 2020 2072  ice')).        r
-00028eb0: 6574 7572 6e20 7365 6c66 2e73 6166 655f  eturn self.safe_
-00028ec0: 6f72 6465 7228 7b0a 2020 2020 2020 2020  order({.        
-00028ed0: 2020 2020 2769 6e66 6f27 3a20 6f72 6465      'info': orde
-00028ee0: 722c 0a20 2020 2020 2020 2020 2020 2027  r,.            '
-00028ef0: 6964 273a 2069 642c 0a20 2020 2020 2020  id': id,.       
-00028f00: 2020 2020 2027 636c 6965 6e74 4f72 6465       'clientOrde
-00028f10: 7249 6427 3a20 636c 6965 6e74 4f72 6465  rId': clientOrde
-00028f20: 7249 642c 0a20 2020 2020 2020 2020 2020  rId,.           
-00028f30: 2027 7469 6d65 7374 616d 7027 3a20 7469   'timestamp': ti
-00028f40: 6d65 7374 616d 702c 0a20 2020 2020 2020  mestamp,.       
-00028f50: 2020 2020 2027 6461 7465 7469 6d65 273a       'datetime':
-00028f60: 2073 656c 662e 6973 6f38 3630 3128 7469   self.iso8601(ti
-00028f70: 6d65 7374 616d 7029 2c0a 2020 2020 2020  mestamp),.      
-00028f80: 2020 2020 2020 276c 6173 7454 7261 6465        'lastTrade
-00028f90: 5469 6d65 7374 616d 7027 3a20 6c61 7374  Timestamp': last
-00028fa0: 5472 6164 6554 696d 6573 7461 6d70 2c0a  TradeTimestamp,.
-00028fb0: 2020 2020 2020 2020 2020 2020 2773 796d              'sym
-00028fc0: 626f 6c27 3a20 7379 6d62 6f6c 2c0a 2020  bol': symbol,.  
-00028fd0: 2020 2020 2020 2020 2020 2774 7970 6527            'type'
-00028fe0: 3a20 7479 7065 2c0a 2020 2020 2020 2020  : type,.        
-00028ff0: 2020 2020 2774 696d 6549 6e46 6f72 6365      'timeInForce
-00029000: 273a 2074 696d 6549 6e46 6f72 6365 2c0a  ': timeInForce,.
-00029010: 2020 2020 2020 2020 2020 2020 2770 6f73              'pos
-00029020: 744f 6e6c 7927 3a20 4e6f 6e65 2c0a 2020  tOnly': None,.  
-00029030: 2020 2020 2020 2020 2020 2772 6564 7563            'reduc
-00029040: 654f 6e6c 7927 3a20 7365 6c66 2e73 6166  eOnly': self.saf
-00029050: 655f 7661 6c75 6528 6f72 6465 722c 2027  e_value(order, '
-00029060: 7265 6475 6365 4f6e 6c79 2729 2c0a 2020  reduceOnly'),.  
-00029070: 2020 2020 2020 2020 2020 2773 6964 6527            'side'
-00029080: 3a20 7369 6465 2c0a 2020 2020 2020 2020  : side,.        
-00029090: 2020 2020 2770 7269 6365 273a 2070 7269      'price': pri
-000290a0: 6365 2c0a 2020 2020 2020 2020 2020 2020  ce,.            
-000290b0: 2773 746f 7050 7269 6365 273a 2073 746f  'stopPrice': sto
-000290c0: 7050 7269 6365 2c0a 2020 2020 2020 2020  pPrice,.        
-000290d0: 2020 2020 2774 7269 6767 6572 5072 6963      'triggerPric
-000290e0: 6527 3a20 7374 6f70 5072 6963 652c 0a20  e': stopPrice,. 
-000290f0: 2020 2020 2020 2020 2020 2027 616d 6f75             'amou
-00029100: 6e74 273a 2061 6d6f 756e 742c 0a20 2020  nt': amount,.   
-00029110: 2020 2020 2020 2020 2027 636f 7374 273a           'cost':
-00029120: 2063 6f73 742c 0a20 2020 2020 2020 2020   cost,.         
-00029130: 2020 2027 6176 6572 6167 6527 3a20 4e6f     'average': No
-00029140: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-00029150: 2766 696c 6c65 6427 3a20 6669 6c6c 6564  'filled': filled
-00029160: 2c0a 2020 2020 2020 2020 2020 2020 2772  ,.            'r
-00029170: 656d 6169 6e69 6e67 273a 2072 656d 6169  emaining': remai
-00029180: 6e69 6e67 2c0a 2020 2020 2020 2020 2020  ning,.          
-00029190: 2020 2773 7461 7475 7327 3a20 7374 6174    'status': stat
-000291a0: 7573 2c0a 2020 2020 2020 2020 2020 2020  us,.            
-000291b0: 2766 6565 273a 2066 6565 2c0a 2020 2020  'fee': fee,.    
-000291c0: 2020 2020 2020 2020 2774 7261 6465 7327          'trades'
-000291d0: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
-000291e0: 7d2c 206d 6172 6b65 7429 0a0a 2020 2020  }, market)..    
-000291f0: 6465 6620 7061 7273 655f 7370 6f74 5f6f  def parse_spot_o
-00029200: 7264 6572 2873 656c 662c 206f 7264 6572  rder(self, order
-00029210: 2c20 6d61 726b 6574 3d4e 6f6e 6529 3a0a  , market=None):.
-00029220: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-00029230: 2020 2320 2063 7265 6174 654f 7264 6572    #  createOrder
-00029240: 2c20 6361 6e63 656c 4f72 6572 0a20 2020  , cancelOrer.   
-00029250: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-00029260: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
-00029270: 2020 2020 2020 2020 2022 6f72 6465 7249           "orderI
-00029280: 6422 3a20 2231 3237 3437 3534 3931 3632  d": "12747549162
-00029290: 3837 3334 3632 3830 222c 0a20 2020 2020  87346280",.     
-000292a0: 2020 2023 2020 2020 2020 2020 2022 6f72     #         "or
-000292b0: 6465 724c 696e 6b49 6422 3a20 2231 3636  derLinkId": "166
-000292c0: 3637 3938 3632 3730 3135 3733 3022 2c0a  6798627015730",.
-000292d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000292e0: 2020 2273 796d 626f 6c22 3a20 2241 4156    "symbol": "AAV
-000292f0: 4555 5344 5422 2c0a 2020 2020 2020 2020  EUSDT",.        
-00029300: 2320 2020 2020 2020 2020 2263 7265 6174  #         "creat
-00029310: 6554 696d 6522 3a20 2231 3636 3636 3938  eTime": "1666698
-00029320: 3632 3938 3231 222c 0a20 2020 2020 2020  629821",.       
-00029330: 2023 2020 2020 2020 2020 2022 6f72 6465   #         "orde
-00029340: 7250 7269 6365 223a 2022 3830 222c 0a20  rPrice": "80",. 
-00029350: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00029360: 2022 6f72 6465 7251 7479 223a 2022 302e   "orderQty": "0.
-00029370: 3131 222c 0a20 2020 2020 2020 2023 2020  11",.        #  
-00029380: 2020 2020 2020 2022 6f72 6465 7254 7970         "orderTyp
-00029390: 6522 3a20 224c 494d 4954 222c 0a20 2020  e": "LIMIT",.   
-000293a0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-000293b0: 7369 6465 223a 2022 4255 5922 2c0a 2020  side": "BUY",.  
-000293c0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000293d0: 2273 7461 7475 7322 3a20 224e 4557 222c  "status": "NEW",
-000293e0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000293f0: 2020 2022 7469 6d65 496e 466f 7263 6522     "timeInForce"
-00029400: 3a20 2247 5443 222c 0a20 2020 2020 2020  : "GTC",.       
-00029410: 2023 2020 2020 2020 2020 2022 6163 636f   #         "acco
-00029420: 756e 7449 6422 3a20 2231 3333 3830 3433  untId": "1338043
-00029430: 3422 2c0a 2020 2020 2020 2020 2320 2020  4",.        #   
-00029440: 2020 2020 2020 2265 7865 6351 7479 223a        "execQty":
-00029450: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
-00029460: 2020 2020 2020 2020 226f 7264 6572 4361          "orderCa
-00029470: 7465 676f 7279 223a 2022 3022 0a20 2020  tegory": "0".   
-00029480: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
-00029490: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-000294a0: 2020 2020 2066 6574 6368 4f72 6465 722c       fetchOrder,
-000294b0: 2066 6574 6368 4f70 656e 4f72 6465 7273   fetchOpenOrders
-000294c0: 2c20 6665 7463 6843 6c6f 7365 644f 7264  , fetchClosedOrd
-000294d0: 6572 7328 616e 6420 616c 736f 2066 6f72  ers(and also for
-000294e0: 2063 6f6e 6469 7469 6f6e 616c 206f 7264   conditional ord
-000294f0: 6572 7329 2074 6865 7265 2061 7265 2061  ers) there are a
-00029500: 6c73 6f20 7072 6573 656e 7420 7468 6573  lso present thes
-00029510: 6520 6164 6469 7469 6f6e 616c 2066 6965  e additional fie
-00029520: 6c64 733a 0a20 2020 2020 2020 2023 2020  lds:.        #  
-00029530: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-00029540: 2020 2020 2020 2022 6375 6d6d 756c 6174         "cummulat
-00029550: 6976 6551 756f 7465 5174 7922 3a20 2230  iveQuoteQty": "0
-00029560: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00029570: 2020 2020 2022 6176 6750 7269 6365 223a       "avgPrice":
-00029580: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
-00029590: 2020 2020 2020 2020 2273 746f 7050 7269          "stopPri
-000295a0: 6365 223a 2022 302e 3022 2c0a 2020 2020  ce": "0.0",.    
-000295b0: 2020 2020 2320 2020 2020 2020 2020 2269      #         "i
-000295c0: 6365 6265 7267 5174 7922 3a20 2230 2e30  cebergQty": "0.0
-000295d0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-000295e0: 2020 2020 2022 7570 6461 7465 5469 6d65       "updateTime
-000295f0: 223a 2022 3136 3636 3733 3333 3537 3434  ": "166673335744
-00029600: 3422 2c0a 2020 2020 2020 2020 2320 2020  4",.        #   
-00029610: 2020 2020 2020 2269 7357 6f72 6b69 6e67        "isWorking
-00029620: 223a 2022 3122 2c0a 2020 2020 2020 2020  ": "1",.        
-00029630: 2320 2020 2020 2020 2020 226c 6f63 6b65  #         "locke
-00029640: 6422 3a20 2238 2e38 222c 0a20 2020 2020  d": "8.8",.     
-00029650: 2020 2023 2020 2020 2020 2020 2022 6578     #         "ex
-00029660: 6563 7574 6564 4f72 6465 7249 6422 3a20  ecutedOrderId": 
-00029670: 2231 3237 3930 3934 3033 3735 3433 3936  "127909403754396
-00029680: 3231 3133 222c 2020 2320 696e 2063 6f6e  2113",  # in con
-00029690: 6469 7469 6f6e 616c 206f 7264 6572 0a20  ditional order. 
-000296a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000296b0: 2022 7472 6967 6765 7250 7269 6365 223a   "triggerPrice":
-000296c0: 2022 302e 3939 222c 2020 2320 696e 2063   "0.99",  # in c
-000296d0: 6f6e 6469 7469 6f6e 616c 206f 7264 6572  onditional order
-000296e0: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
-000296f0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00029700: 2020 206d 6172 6b65 7449 6420 3d20 7365     marketId = se
-00029710: 6c66 2e73 6166 655f 7374 7269 6e67 286f  lf.safe_string(o
-00029720: 7264 6572 2c20 2773 796d 626f 6c27 290a  rder, 'symbol').
-00029730: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
-00029740: 2073 656c 662e 7361 6665 5f6d 6172 6b65   self.safe_marke
-00029750: 7428 6d61 726b 6574 4964 2c20 6d61 726b  t(marketId, mark
-00029760: 6574 2c20 4e6f 6e65 2c20 2773 706f 7427  et, None, 'spot'
-00029770: 290a 2020 2020 2020 2020 7469 6d65 7374  ).        timest
-00029780: 616d 7020 3d20 7365 6c66 2e73 6166 655f  amp = self.safe_
-00029790: 696e 7465 6765 7228 6f72 6465 722c 2027  integer(order, '
-000297a0: 6372 6561 7465 5469 6d65 2729 0a20 2020  createTime').   
-000297b0: 2020 2020 2074 7970 6520 3d20 7365 6c66       type = self
-000297c0: 2e73 6166 655f 7374 7269 6e67 5f6c 6f77  .safe_string_low
-000297d0: 6572 286f 7264 6572 2c20 276f 7264 6572  er(order, 'order
-000297e0: 5479 7065 2729 0a20 2020 2020 2020 2070  Type').        p
-000297f0: 7269 6365 203d 2073 656c 662e 7361 6665  rice = self.safe
-00029800: 5f73 7472 696e 6728 6f72 6465 722c 2027  _string(order, '
-00029810: 6f72 6465 7250 7269 6365 2729 0a20 2020  orderPrice').   
-00029820: 2020 2020 2069 6620 7072 6963 6520 3d3d       if price ==
-00029830: 2027 3027 2061 6e64 2074 7970 6520 3d3d   '0' and type ==
-00029840: 2027 6d61 726b 6574 273a 0a20 2020 2020   'market':.     
-00029850: 2020 2020 2020 2070 7269 6365 203d 204e         price = N
-00029860: 6f6e 650a 2020 2020 2020 2020 6669 6c6c  one.        fill
-00029870: 6564 203d 2073 656c 662e 7361 6665 5f73  ed = self.safe_s
-00029880: 7472 696e 6728 6f72 6465 722c 2027 6578  tring(order, 'ex
-00029890: 6563 5174 7927 290a 2020 2020 2020 2020  ecQty').        
-000298a0: 7369 6465 203d 2073 656c 662e 7361 6665  side = self.safe
-000298b0: 5f73 7472 696e 675f 6c6f 7765 7228 6f72  _string_lower(or
-000298c0: 6465 722c 2027 7369 6465 2729 0a20 2020  der, 'side').   
-000298d0: 2020 2020 2074 696d 6549 6e46 6f72 6365       timeInForce
-000298e0: 203d 2073 656c 662e 7061 7273 655f 7469   = self.parse_ti
-000298f0: 6d65 5f69 6e5f 666f 7263 6528 7365 6c66  me_in_force(self
-00029900: 2e73 6166 655f 7374 7269 6e67 286f 7264  .safe_string(ord
-00029910: 6572 2c20 2774 696d 6549 6e46 6f72 6365  er, 'timeInForce
-00029920: 2729 290a 2020 2020 2020 2020 7472 6967  ')).        trig
-00029930: 6765 7250 7269 6365 203d 2073 656c 662e  gerPrice = self.
-00029940: 7361 6665 5f73 7472 696e 6728 6f72 6465  safe_string(orde
-00029950: 722c 2027 7472 6967 6765 7250 7269 6365  r, 'triggerPrice
-00029960: 2729 0a20 2020 2020 2020 2070 6f73 744f  ').        postO
-00029970: 6e6c 7920 3d20 2874 696d 6549 6e46 6f72  nly = (timeInFor
-00029980: 6365 203d 3d20 2750 4f27 290a 2020 2020  ce == 'PO').    
-00029990: 2020 2020 616d 6f75 6e74 203d 204e 6f6e      amount = Non
-000299a0: 650a 2020 2020 2020 2020 6966 206d 6172  e.        if mar
-000299b0: 6b65 745b 2773 706f 7427 5d20 616e 6420  ket['spot'] and 
-000299c0: 7479 7065 203d 3d20 276d 6172 6b65 7427  type == 'market'
-000299d0: 2061 6e64 2073 6964 6520 3d3d 2027 6275   and side == 'bu
-000299e0: 7927 3a0a 2020 2020 2020 2020 2020 2020  y':.            
-000299f0: 616d 6f75 6e74 203d 2066 696c 6c65 640a  amount = filled.
-00029a00: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00029a10: 2020 2020 2020 2020 2020 616d 6f75 6e74            amount
-00029a20: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-00029a30: 696e 6728 6f72 6465 722c 2027 6f72 6465  ing(order, 'orde
-00029a40: 7251 7479 2729 0a20 2020 2020 2020 2072  rQty').        r
-00029a50: 6574 7572 6e20 7365 6c66 2e73 6166 655f  eturn self.safe_
-00029a60: 6f72 6465 7228 7b0a 2020 2020 2020 2020  order({.        
-00029a70: 2020 2020 2769 6427 3a20 7365 6c66 2e73      'id': self.s
-00029a80: 6166 655f 7374 7269 6e67 286f 7264 6572  afe_string(order
-00029a90: 2c20 276f 7264 6572 4964 2729 2c0a 2020  , 'orderId'),.  
-00029aa0: 2020 2020 2020 2020 2020 2763 6c69 656e            'clien
-00029ab0: 744f 7264 6572 4964 273a 2073 656c 662e  tOrderId': self.
-00029ac0: 7361 6665 5f73 7472 696e 6728 6f72 6465  safe_string(orde
-00029ad0: 722c 2027 6f72 6465 724c 696e 6b49 6427  r, 'orderLinkId'
-00029ae0: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
-00029af0: 7469 6d65 7374 616d 7027 3a20 7469 6d65  timestamp': time
-00029b00: 7374 616d 702c 0a20 2020 2020 2020 2020  stamp,.         
-00029b10: 2020 2027 6461 7465 7469 6d65 273a 2073     'datetime': s
-00029b20: 656c 662e 6973 6f38 3630 3128 7469 6d65  elf.iso8601(time
-00029b30: 7374 616d 7029 2c0a 2020 2020 2020 2020  stamp),.        
-00029b40: 2020 2020 276c 6173 7454 7261 6465 5469      'lastTradeTi
-00029b50: 6d65 7374 616d 7027 3a20 7365 6c66 2e73  mestamp': self.s
-00029b60: 6166 655f 696e 7465 6765 7228 6f72 6465  afe_integer(orde
-00029b70: 722c 2027 7570 6461 7465 5469 6d65 2729  r, 'updateTime')
-00029b80: 2c0a 2020 2020 2020 2020 2020 2020 2773  ,.            's
-00029b90: 796d 626f 6c27 3a20 6d61 726b 6574 5b27  ymbol': market['
-00029ba0: 7379 6d62 6f6c 275d 2c0a 2020 2020 2020  symbol'],.      
-00029bb0: 2020 2020 2020 2774 7970 6527 3a20 7479        'type': ty
-00029bc0: 7065 2c0a 2020 2020 2020 2020 2020 2020  pe,.            
-00029bd0: 2774 696d 6549 6e46 6f72 6365 273a 2074  'timeInForce': t
-00029be0: 696d 6549 6e46 6f72 6365 2c0a 2020 2020  imeInForce,.    
-00029bf0: 2020 2020 2020 2020 2770 6f73 744f 6e6c          'postOnl
-00029c00: 7927 3a20 706f 7374 4f6e 6c79 2c0a 2020  y': postOnly,.  
-00029c10: 2020 2020 2020 2020 2020 2773 6964 6527            'side'
-00029c20: 3a20 7369 6465 2c0a 2020 2020 2020 2020  : side,.        
-00029c30: 2020 2020 2770 7269 6365 273a 2070 7269      'price': pri
-00029c40: 6365 2c0a 2020 2020 2020 2020 2020 2020  ce,.            
-00029c50: 2774 7269 6767 6572 5072 6963 6527 3a20  'triggerPrice': 
-00029c60: 7472 6967 6765 7250 7269 6365 2c0a 2020  triggerPrice,.  
-00029c70: 2020 2020 2020 2020 2020 2773 746f 7050            'stopP
-00029c80: 7269 6365 273a 2074 7269 6767 6572 5072  rice': triggerPr
-00029c90: 6963 652c 2020 2320 6465 7072 6563 6174  ice,  # deprecat
-00029ca0: 6564 2066 6965 6c64 0a20 2020 2020 2020  ed field.       
-00029cb0: 2020 2020 2027 616d 6f75 6e74 273a 2061       'amount': a
-00029cc0: 6d6f 756e 742c 0a20 2020 2020 2020 2020  mount,.         
-00029cd0: 2020 2027 636f 7374 273a 2073 656c 662e     'cost': self.
-00029ce0: 7361 6665 5f73 7472 696e 6728 6f72 6465  safe_string(orde
-00029cf0: 722c 2027 6375 6d6d 756c 6174 6976 6551  r, 'cummulativeQ
-00029d00: 756f 7465 5174 7927 292c 0a20 2020 2020  uoteQty'),.     
-00029d10: 2020 2020 2020 2027 6176 6572 6167 6527         'average'
-00029d20: 3a20 7365 6c66 2e73 6166 655f 7374 7269  : self.safe_stri
-00029d30: 6e67 286f 7264 6572 2c20 2761 7667 5072  ng(order, 'avgPr
-00029d40: 6963 6527 292c 0a20 2020 2020 2020 2020  ice'),.         
-00029d50: 2020 2027 6669 6c6c 6564 273a 2066 696c     'filled': fil
-00029d60: 6c65 642c 0a20 2020 2020 2020 2020 2020  led,.           
-00029d70: 2027 7265 6d61 696e 696e 6727 3a20 4e6f   'remaining': No
-00029d80: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-00029d90: 2773 7461 7475 7327 3a20 7365 6c66 2e70  'status': self.p
-00029da0: 6172 7365 5f6f 7264 6572 5f73 7461 7475  arse_order_statu
-00029db0: 7328 7365 6c66 2e73 6166 655f 7374 7269  s(self.safe_stri
-00029dc0: 6e67 286f 7264 6572 2c20 2773 7461 7475  ng(order, 'statu
-00029dd0: 7327 2929 2c0a 2020 2020 2020 2020 2020  s')),.          
-00029de0: 2020 2766 6565 273a 204e 6f6e 652c 0a20    'fee': None,. 
-00029df0: 2020 2020 2020 2020 2020 2027 7472 6164             'trad
-00029e00: 6573 273a 204e 6f6e 652c 0a20 2020 2020  es': None,.     
-00029e10: 2020 2020 2020 2027 696e 666f 273a 206f         'info': o
-00029e20: 7264 6572 2c0a 2020 2020 2020 2020 7d2c  rder,.        },
-00029e30: 206d 6172 6b65 7429 0a0a 2020 2020 6465   market)..    de
-00029e40: 6620 6665 7463 685f 6f72 6465 7228 7365  f fetch_order(se
-00029e50: 6c66 2c20 6964 3a20 7374 722c 2073 796d  lf, id: str, sym
-00029e60: 626f 6c3a 204f 7074 696f 6e61 6c5b 7374  bol: Optional[st
-00029e70: 725d 203d 204e 6f6e 652c 2070 6172 616d  r] = None, param
-00029e80: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
-00029e90: 2222 0a20 2020 2020 2020 2066 6574 6368  "".        fetch
-00029ea0: 6573 2069 6e66 6f72 6d61 7469 6f6e 206f  es information o
-00029eb0: 6e20 616e 206f 7264 6572 206d 6164 6520  n an order made 
-00029ec0: 6279 2074 6865 2075 7365 720a 2020 2020  by the user.    
-00029ed0: 2020 2020 3a70 6172 616d 2073 7472 7c4e      :param str|N
-00029ee0: 6f6e 6520 7379 6d62 6f6c 3a20 756e 6966  one symbol: unif
-00029ef0: 6965 6420 7379 6d62 6f6c 206f 6620 7468  ied symbol of th
-00029f00: 6520 6d61 726b 6574 2074 6865 206f 7264  e market the ord
-00029f10: 6572 2077 6173 206d 6164 6520 696e 0a20  er was made in. 
-00029f20: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
-00029f30: 6374 2070 6172 616d 733a 2065 7874 7261  ct params: extra
-00029f40: 2070 6172 616d 6574 6572 7320 7370 6563   parameters spec
-00029f50: 6966 6963 2074 6f20 7468 6520 6279 6269  ific to the bybi
-00029f60: 7420 6170 6920 656e 6470 6f69 6e74 0a20  t api endpoint. 
-00029f70: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
-00029f80: 6469 6374 3a20 416e 2060 6f72 6465 7220  dict: An `order 
-00029f90: 7374 7275 6374 7572 6520 3c68 7474 7073  structure <https
-00029fa0: 3a2f 2f64 6f63 732e 6363 7874 2e63 6f6d  ://docs.ccxt.com
-00029fb0: 2f23 2f3f 6964 3d6f 7264 6572 2d73 7472  /#/?id=order-str
-00029fc0: 7563 7475 7265 3e60 0a20 2020 2020 2020  ucture>`.       
-00029fd0: 2022 2222 0a20 2020 2020 2020 2073 656c   """.        sel
-00029fe0: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
-00029ff0: 0a20 2020 2020 2020 206d 6172 6b65 7420  .        market 
-0002a000: 3d20 4e6f 6e65 0a20 2020 2020 2020 2069  = None.        i
-0002a010: 6620 7379 6d62 6f6c 2069 7320 6e6f 7420  f symbol is not 
-0002a020: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0002a030: 2020 6d61 726b 6574 203d 2073 656c 662e    market = self.
-0002a040: 6d61 726b 6574 2873 796d 626f 6c29 0a20  market(symbol). 
-0002a050: 2020 2020 2020 2074 7970 6520 3d20 4e6f         type = No
-0002a060: 6e65 0a20 2020 2020 2020 2074 7970 652c  ne.        type,
-0002a070: 2070 6172 616d 7320 3d20 7365 6c66 2e68   params = self.h
-0002a080: 616e 646c 655f 6d61 726b 6574 5f74 7970  andle_market_typ
-0002a090: 655f 616e 645f 7061 7261 6d73 2827 6665  e_and_params('fe
-0002a0a0: 7463 684f 7264 6572 272c 206d 6172 6b65  tchOrder', marke
-0002a0b0: 742c 2070 6172 616d 7329 0a20 2020 2020  t, params).     
-0002a0c0: 2020 2061 6363 6f75 6e74 7320 3d20 7365     accounts = se
-0002a0d0: 6c66 2e69 735f 756e 6966 6965 645f 656e  lf.is_unified_en
-0002a0e0: 6162 6c65 6428 290a 2020 2020 2020 2020  abled().        
-0002a0f0: 6973 556e 6966 6965 6441 6363 6f75 6e74  isUnifiedAccount
-0002a100: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
-0002a110: 7565 2861 6363 6f75 6e74 732c 2031 2c20  ue(accounts, 1, 
-0002a120: 4661 6c73 6529 0a20 2020 2020 2020 2069  False).        i
-0002a130: 6620 6973 556e 6966 6965 6441 6363 6f75  f isUnifiedAccou
-0002a140: 6e74 3a0a 2020 2020 2020 2020 2020 2020  nt:.            
-0002a150: 7261 6973 6520 4e6f 7453 7570 706f 7274  raise NotSupport
-0002a160: 6564 2873 656c 662e 6964 202b 2027 2066  ed(self.id + ' f
-0002a170: 6574 6368 4f72 6465 7228 2920 646f 6573  etchOrder() does
-0002a180: 206e 6f74 2073 7570 706f 7274 2075 6e69   not support uni
-0002a190: 6669 6564 2061 6363 6f75 6e74 2e20 506c  fied account. Pl
-0002a1a0: 6561 7365 2063 6f6e 7369 6465 7220 7573  ease consider us
-0002a1b0: 696e 6720 6665 7463 684f 7065 6e4f 7264  ing fetchOpenOrd
-0002a1c0: 6572 7328 2920 6f72 2066 6574 6368 436c  ers() or fetchCl
-0002a1d0: 6f73 6564 4f72 6465 7273 2829 2729 0a20  osedOrders()'). 
-0002a1e0: 2020 2020 2020 2069 6620 7479 7065 203d         if type =
-0002a1f0: 3d20 2773 706f 7427 3a0a 2020 2020 2020  = 'spot':.      
-0002a200: 2020 2020 2020 2320 6f6e 6c79 2073 706f        # only spo
-0002a210: 7420 6d61 726b 6574 7320 6861 7665 2061  t markets have a
-0002a220: 2064 6564 6963 6174 6564 2065 6e64 706f   dedicated endpo
-0002a230: 696e 7420 666f 7220 6665 7463 6869 6e67  int for fetching
-0002a240: 2061 206f 7264 6572 0a20 2020 2020 2020   a order.       
-0002a250: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
-0002a260: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002a270: 2027 6f72 6465 7249 6427 3a20 6964 2c0a   'orderId': id,.
-0002a280: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
-0002a290: 2020 2020 2020 2020 2020 7265 7370 6f6e            respon
-0002a2a0: 7365 203d 2073 656c 662e 7072 6976 6174  se = self.privat
-0002a2b0: 6547 6574 5370 6f74 5633 5072 6976 6174  eGetSpotV3Privat
-0002a2c0: 654f 7264 6572 2873 656c 662e 6578 7465  eOrder(self.exte
-0002a2d0: 6e64 2870 6172 616d 732c 2072 6571 7565  nd(params, reque
-0002a2e0: 7374 2929 0a20 2020 2020 2020 2020 2020  st)).           
-0002a2f0: 2023 0a20 2020 2020 2020 2020 2020 2023   #.            #
-0002a300: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
-0002a310: 2020 2320 2020 2020 2020 2022 7265 7443    #        "retC
-0002a320: 6f64 6522 3a20 2230 222c 0a20 2020 2020  ode": "0",.     
-0002a330: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0002a340: 2272 6574 4d73 6722 3a20 224f 4b22 2c0a  "retMsg": "OK",.
-0002a350: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-0002a360: 2020 2020 2022 7265 7375 6c74 223a 207b       "result": {
-0002a370: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-0002a380: 2020 2020 2020 2020 2020 2261 6363 6f75            "accou
-0002a390: 6e74 4964 223a 2022 3133 3338 3034 3334  ntId": "13380434
-0002a3a0: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
-0002a3b0: 2020 2020 2020 2020 2020 2020 2273 796d              "sym
-0002a3c0: 626f 6c22 3a20 2241 4156 4555 5344 5422  bol": "AAVEUSDT"
-0002a3d0: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
-0002a3e0: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
-0002a3f0: 724c 696e 6b49 6422 3a20 2231 3636 3637  rLinkId": "16667
-0002a400: 3333 3335 3734 3334 3631 3722 2c0a 2020  33357434617",.  
-0002a410: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-0002a420: 2020 2020 2020 2022 6f72 6465 7249 6422         "orderId"
-0002a430: 3a20 2231 3237 3530 3436 3234 3835 3835  : "1275046248585
-0002a440: 3431 3431 3434 222c 0a20 2020 2020 2020  414144",.       
-0002a450: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0002a460: 2020 226f 7264 6572 5072 6963 6522 3a20    "orderPrice": 
-0002a470: 2238 3022 2c0a 2020 2020 2020 2020 2020  "80",.          
-0002a480: 2020 2320 2020 2020 2020 2020 2020 2022    #            "
-0002a490: 6f72 6465 7251 7479 223a 2022 302e 3131  orderQty": "0.11
-0002a4a0: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
-0002a4b0: 2020 2020 2020 2020 2020 2020 2265 7865              "exe
-0002a4c0: 6351 7479 223a 2022 3022 2c0a 2020 2020  cQty": "0",.    
-0002a4d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0002a4e0: 2020 2020 2022 6375 6d6d 756c 6174 6976       "cummulativ
-0002a4f0: 6551 756f 7465 5174 7922 3a20 2230 222c  eQuoteQty": "0",
-0002a500: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-0002a510: 2020 2020 2020 2020 2020 2261 7667 5072            "avgPr
-0002a520: 6963 6522 3a20 2230 222c 0a20 2020 2020  ice": "0",.     
-0002a530: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0002a540: 2020 2020 2273 7461 7475 7322 3a20 224e      "status": "N
-0002a550: 4557 222c 0a20 2020 2020 2020 2020 2020  EW",.           
-0002a560: 2023 2020 2020 2020 2020 2020 2020 2274   #            "t
-0002a570: 696d 6549 6e46 6f72 6365 223a 2022 4754  imeInForce": "GT
-0002a580: 4322 2c0a 2020 2020 2020 2020 2020 2020  C",.            
-0002a590: 2320 2020 2020 2020 2020 2020 2022 6f72  #            "or
-0002a5a0: 6465 7254 7970 6522 3a20 224c 494d 4954  derType": "LIMIT
-0002a5b0: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
-0002a5c0: 2020 2020 2020 2020 2020 2020 2273 6964              "sid
-0002a5d0: 6522 3a20 2242 5559 222c 0a20 2020 2020  e": "BUY",.     
-0002a5e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0002a5f0: 2020 2020 2273 746f 7050 7269 6365 223a      "stopPrice":
-0002a600: 2022 302e 3022 2c0a 2020 2020 2020 2020   "0.0",.        
-0002a610: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0002a620: 2022 6963 6562 6572 6751 7479 223a 2022   "icebergQty": "
-0002a630: 302e 3022 2c0a 2020 2020 2020 2020 2020  0.0",.          
-0002a640: 2020 2320 2020 2020 2020 2020 2020 2022    #            "
-0002a650: 6372 6561 7465 5469 6d65 223a 2022 3136  createTime": "16
-0002a660: 3636 3733 3333 3537 3433 3822 2c0a 2020  66733357438",.  
-0002a670: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-0002a680: 2020 2020 2020 2022 7570 6461 7465 5469         "updateTi
-0002a690: 6d65 223a 2022 3136 3636 3733 3333 3537  me": "1666733357
-0002a6a0: 3434 3422 2c0a 2020 2020 2020 2020 2020  444",.          
-0002a6b0: 2020 2320 2020 2020 2020 2020 2020 2022    #            "
-0002a6c0: 6973 576f 726b 696e 6722 3a20 2231 222c  isWorking": "1",
-0002a6d0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-0002a6e0: 2020 2020 2020 2020 2020 226c 6f63 6b65            "locke
-0002a6f0: 6422 3a20 2238 2e38 222c 0a20 2020 2020  d": "8.8",.     
-0002a700: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0002a710: 2020 2020 226f 7264 6572 4361 7465 676f      "orderCatego
-0002a720: 7279 223a 2022 3022 0a20 2020 2020 2020  ry": "0".       
-0002a730: 2020 2020 2023 2020 2020 2020 2020 7d2c       #        },
-0002a740: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-0002a750: 2020 2020 2020 2272 6574 4578 744d 6170        "retExtMap
-0002a760: 223a 207b 7d2c 0a20 2020 2020 2020 2020  ": {},.         
-0002a770: 2020 2023 2020 2020 2020 2020 2272 6574     #        "ret
-0002a780: 4578 7449 6e66 6f22 3a20 6e75 6c6c 2c0a  ExtInfo": null,.
-0002a790: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-0002a7a0: 2020 2020 2022 7469 6d65 223a 2022 3136       "time": "16
-0002a7b0: 3636 3733 3333 3537 3734 3422 0a20 2020  66733357744".   
-0002a7c0: 2020 2020 2020 2020 2023 2020 2020 7d0a           #    }.
-0002a7d0: 2020 2020 2020 2020 2020 2020 230a 2020              #.  
-0002a7e0: 2020 2020 2020 2020 2020 7265 7375 6c74            result
-0002a7f0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
-0002a800: 7565 2872 6573 706f 6e73 652c 2027 7265  ue(response, 're
-0002a810: 7375 6c74 272c 207b 7d29 0a20 2020 2020  sult', {}).     
-0002a820: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-0002a830: 6c66 2e70 6172 7365 5f6f 7264 6572 2872  lf.parse_order(r
-0002a840: 6573 756c 742c 206d 6172 6b65 7429 0a20  esult, market). 
-0002a850: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0002a860: 2020 2020 2020 2020 2073 656c 662e 6368           self.ch
-0002a870: 6563 6b5f 7265 7175 6972 6564 5f73 796d  eck_required_sym
-0002a880: 626f 6c28 2766 6574 6368 4f72 6465 7227  bol('fetchOrder'
-0002a890: 2c20 7379 6d62 6f6c 290a 2020 2020 2020  , symbol).      
-0002a8a0: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-0002a8b0: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-0002a8c0: 2020 276f 7264 6572 4964 273a 2069 642c    'orderId': id,
-0002a8d0: 0a20 2020 2020 2020 2020 2020 207d 0a20  .            }. 
-0002a8e0: 2020 2020 2020 2020 2020 2072 6573 756c             resul
-0002a8f0: 7420 3d20 7365 6c66 2e66 6574 6368 5f6f  t = self.fetch_o
-0002a900: 7264 6572 7328 7379 6d62 6f6c 2c20 4e6f  rders(symbol, No
-0002a910: 6e65 2c20 4e6f 6e65 2c20 7365 6c66 2e65  ne, None, self.e
-0002a920: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
-0002a930: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
-0002a940: 2020 2020 6c65 6e67 7468 203d 206c 656e      length = len
-0002a950: 2872 6573 756c 7429 0a20 2020 2020 2020  (result).       
-0002a960: 2020 2020 2069 6620 6c65 6e67 7468 203d       if length =
-0002a970: 3d20 303a 0a20 2020 2020 2020 2020 2020  = 0:.           
-0002a980: 2020 2020 2072 6169 7365 204f 7264 6572       raise Order
-0002a990: 4e6f 7446 6f75 6e64 2827 4f72 6465 7220  NotFound('Order 
-0002a9a0: 2720 2b20 6964 202b 2027 2064 6f65 7320  ' + id + ' does 
-0002a9b0: 6e6f 7420 6578 6973 742e 2729 0a20 2020  not exist.').   
-0002a9c0: 2020 2020 2020 2020 2069 6620 6c65 6e67           if leng
-0002a9d0: 7468 203e 2031 3a0a 2020 2020 2020 2020  th > 1:.        
-0002a9e0: 2020 2020 2020 2020 7261 6973 6520 496e          raise In
-0002a9f0: 7661 6c69 644f 7264 6572 2873 656c 662e  validOrder(self.
-0002aa00: 6964 202b 2027 2072 6574 7572 6e65 6420  id + ' returned 
-0002aa10: 6d6f 7265 2074 6861 6e20 6f6e 6520 6f72  more than one or
-0002aa20: 6465 7227 290a 2020 2020 2020 2020 2020  der').          
-0002aa30: 2020 7265 7475 726e 2073 656c 662e 7361    return self.sa
-0002aa40: 6665 5f76 616c 7565 2872 6573 756c 742c  fe_value(result,
-0002aa50: 2030 290a 0a20 2020 2064 6566 2063 7265   0)..    def cre
-0002aa60: 6174 655f 6f72 6465 7228 7365 6c66 2c20  ate_order(self, 
-0002aa70: 7379 6d62 6f6c 3a20 7374 722c 2074 7970  symbol: str, typ
-0002aa80: 652c 2073 6964 653a 204f 7264 6572 5369  e, side: OrderSi
-0002aa90: 6465 2c20 616d 6f75 6e74 2c20 7072 6963  de, amount, pric
-0002aaa0: 653d 4e6f 6e65 2c20 7061 7261 6d73 3d7b  e=None, params={
-0002aab0: 7d29 3a0a 2020 2020 2020 2020 2222 220a  }):.        """.
-0002aac0: 2020 2020 2020 2020 6372 6561 7465 2061          create a
-0002aad0: 2074 7261 6465 206f 7264 6572 0a20 2020   trade order.   
-0002aae0: 2020 2020 2073 6565 2068 7474 7073 3a2f       see https:/
-0002aaf0: 2f62 7962 6974 2d65 7863 6861 6e67 652e  /bybit-exchange.
-0002ab00: 6769 7468 7562 2e69 6f2f 646f 6373 2f76  github.io/docs/v
-0002ab10: 352f 6f72 6465 722f 6372 6561 7465 2d6f  5/order/create-o
-0002ab20: 7264 6572 0a20 2020 2020 2020 2073 6565  rder.        see
-0002ab30: 2068 7474 7073 3a2f 2f62 7962 6974 2d65   https://bybit-e
-0002ab40: 7863 6861 6e67 652e 6769 7468 7562 2e69  xchange.github.i
-0002ab50: 6f2f 646f 6373 2f73 706f 742f 7472 6164  o/docs/spot/trad
-0002ab60: 652f 706c 6163 652d 6f72 6465 720a 2020  e/place-order.  
-0002ab70: 2020 2020 2020 7365 6520 6874 7470 733a        see https:
-0002ab80: 2f2f 6279 6269 742d 6578 6368 616e 6765  //bybit-exchange
-0002ab90: 2e67 6974 6875 622e 696f 2f64 6f63 732f  .github.io/docs/
-0002aba0: 6465 7269 7661 7469 7665 732f 756e 6966  derivatives/unif
-0002abb0: 6965 642f 706c 6163 652d 6f72 6465 720a  ied/place-order.
-0002abc0: 2020 2020 2020 2020 7365 6520 6874 7470          see http
-0002abd0: 733a 2f2f 6279 6269 742d 6578 6368 616e  s://bybit-exchan
-0002abe0: 6765 2e67 6974 6875 622e 696f 2f64 6f63  ge.github.io/doc
-0002abf0: 732f 6465 7269 7661 7469 7665 732f 636f  s/derivatives/co
-0002ac00: 6e74 7261 6374 2f70 6c61 6365 2d6f 7264  ntract/place-ord
-0002ac10: 6572 0a20 2020 2020 2020 203a 7061 7261  er.        :para
-0002ac20: 6d20 7374 7220 7379 6d62 6f6c 3a20 756e  m str symbol: un
-0002ac30: 6966 6965 6420 7379 6d62 6f6c 206f 6620  ified symbol of 
-0002ac40: 7468 6520 6d61 726b 6574 2074 6f20 6372  the market to cr
-0002ac50: 6561 7465 2061 6e20 6f72 6465 7220 696e  eate an order in
-0002ac60: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0002ac70: 7374 7220 7479 7065 3a20 276d 6172 6b65  str type: 'marke
-0002ac80: 7427 206f 7220 276c 696d 6974 270a 2020  t' or 'limit'.  
-0002ac90: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
-0002aca0: 2073 6964 653a 2027 6275 7927 206f 7220   side: 'buy' or 
-0002acb0: 2773 656c 6c27 0a20 2020 2020 2020 203a  'sell'.        :
-0002acc0: 7061 7261 6d20 666c 6f61 7420 616d 6f75  param float amou
-0002acd0: 6e74 3a20 686f 7720 6d75 6368 206f 6620  nt: how much of 
-0002ace0: 6375 7272 656e 6379 2079 6f75 2077 616e  currency you wan
-0002acf0: 7420 746f 2074 7261 6465 2069 6e20 756e  t to trade in un
-0002ad00: 6974 7320 6f66 2062 6173 6520 6375 7272  its of base curr
-0002ad10: 656e 6379 0a20 2020 2020 2020 203a 7061  ency.        :pa
-0002ad20: 7261 6d20 666c 6f61 747c 4e6f 6e65 2070  ram float|None p
-0002ad30: 7269 6365 3a20 7468 6520 7072 6963 6520  rice: the price 
-0002ad40: 6174 2077 6869 6368 2074 6865 206f 7264  at which the ord
-0002ad50: 6572 2069 7320 746f 2062 6520 6675 6c6c  er is to be full
-0002ad60: 6669 6c6c 6564 2c20 696e 2075 6e69 7473  filled, in units
-0002ad70: 206f 6620 7468 6520 7175 6f74 6520 6375   of the quote cu
-0002ad80: 7272 656e 6379 2c20 6967 6e6f 7265 6420  rrency, ignored 
-0002ad90: 696e 206d 6172 6b65 7420 6f72 6465 7273  in market orders
-0002ada0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0002adb0: 6469 6374 2070 6172 616d 733a 2065 7874  dict params: ext
-0002adc0: 7261 2070 6172 616d 6574 6572 7320 7370  ra parameters sp
-0002add0: 6563 6966 6963 2074 6f20 7468 6520 6279  ecific to the by
-0002ade0: 6269 7420 6170 6920 656e 6470 6f69 6e74  bit api endpoint
-0002adf0: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
-0002ae00: 7320 6469 6374 3a20 616e 2060 6f72 6465  s dict: an `orde
-0002ae10: 7220 7374 7275 6374 7572 6520 3c68 7474  r structure <htt
-0002ae20: 7073 3a2f 2f64 6f63 732e 6363 7874 2e63  ps://docs.ccxt.c
-0002ae30: 6f6d 2f23 2f3f 6964 3d6f 7264 6572 2d73  om/#/?id=order-s
-0002ae40: 7472 7563 7475 7265 3e60 0a20 2020 2020  tructure>`.     
-0002ae50: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
-0002ae60: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
-0002ae70: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
-0002ae80: 6368 6563 6b5f 7265 7175 6972 6564 5f73  check_required_s
-0002ae90: 796d 626f 6c28 2763 7265 6174 654f 7264  ymbol('createOrd
-0002aea0: 6572 272c 2073 796d 626f 6c29 0a20 2020  er', symbol).   
-0002aeb0: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
-0002aec0: 6c66 2e6d 6172 6b65 7428 7379 6d62 6f6c  lf.market(symbol
-0002aed0: 290a 2020 2020 2020 2020 7379 6d62 6f6c  ).        symbol
-0002aee0: 203d 206d 6172 6b65 745b 2773 796d 626f   = market['symbo
-0002aef0: 6c27 5d0a 2020 2020 2020 2020 656e 6162  l'].        enab
-0002af00: 6c65 556e 6966 6965 644d 6172 6769 6e2c  leUnifiedMargin,
-0002af10: 2065 6e61 626c 6555 6e69 6669 6564 4163   enableUnifiedAc
-0002af20: 636f 756e 7420 3d20 7365 6c66 2e69 735f  count = self.is_
-0002af30: 756e 6966 6965 645f 656e 6162 6c65 6428  unified_enabled(
-0002af40: 290a 2020 2020 2020 2020 6973 5553 4443  ).        isUSDC
-0002af50: 5365 7474 6c65 6420 3d20 6d61 726b 6574  Settled = market
-0002af60: 5b27 7365 7474 6c65 275d 203d 3d20 2755  ['settle'] == 'U
-0002af70: 5344 4327 0a20 2020 2020 2020 2069 6620  SDC'.        if 
-0002af80: 656e 6162 6c65 556e 6966 6965 6441 6363  enableUnifiedAcc
-0002af90: 6f75 6e74 2061 6e64 206e 6f74 206d 6172  ount and not mar
-0002afa0: 6b65 745b 2769 6e76 6572 7365 275d 3a0a  ket['inverse']:.
-0002afb0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0002afc0: 726e 2073 656c 662e 6372 6561 7465 5f75  rn self.create_u
-0002afd0: 6e69 6669 6564 5f61 6363 6f75 6e74 5f6f  nified_account_o
-0002afe0: 7264 6572 2873 796d 626f 6c2c 2074 7970  rder(symbol, typ
-0002aff0: 652c 2073 6964 652c 2061 6d6f 756e 742c  e, side, amount,
-0002b000: 2070 7269 6365 2c20 7061 7261 6d73 290a   price, params).
-0002b010: 2020 2020 2020 2020 656c 6966 206d 6172          elif mar
-0002b020: 6b65 745b 2773 706f 7427 5d3a 0a20 2020  ket['spot']:.   
-0002b030: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0002b040: 7365 6c66 2e63 7265 6174 655f 7370 6f74  self.create_spot
-0002b050: 5f6f 7264 6572 2873 796d 626f 6c2c 2074  _order(symbol, t
-0002b060: 7970 652c 2073 6964 652c 2061 6d6f 756e  ype, side, amoun
-0002b070: 742c 2070 7269 6365 2c20 7061 7261 6d73  t, price, params
-0002b080: 290a 2020 2020 2020 2020 656c 6966 2065  ).        elif e
-0002b090: 6e61 626c 6555 6e69 6669 6564 4d61 7267  nableUnifiedMarg
-0002b0a0: 696e 2061 6e64 206e 6f74 206d 6172 6b65  in and not marke
-0002b0b0: 745b 2769 6e76 6572 7365 275d 3a0a 2020  t['inverse']:.  
-0002b0c0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0002b0d0: 2073 656c 662e 6372 6561 7465 5f75 6e69   self.create_uni
-0002b0e0: 6669 6564 5f6d 6172 6769 6e5f 6f72 6465  fied_margin_orde
-0002b0f0: 7228 7379 6d62 6f6c 2c20 7479 7065 2c20  r(symbol, type, 
-0002b100: 7369 6465 2c20 616d 6f75 6e74 2c20 7072  side, amount, pr
-0002b110: 6963 652c 2070 6172 616d 7329 0a20 2020  ice, params).   
-0002b120: 2020 2020 2065 6c69 6620 6973 5553 4443       elif isUSDC
-0002b130: 5365 7474 6c65 643a 0a20 2020 2020 2020  Settled:.       
-0002b140: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-0002b150: 2e63 7265 6174 655f 7573 6463 5f6f 7264  .create_usdc_ord
-0002b160: 6572 2873 796d 626f 6c2c 2074 7970 652c  er(symbol, type,
-0002b170: 2073 6964 652c 2061 6d6f 756e 742c 2070   side, amount, p
-0002b180: 7269 6365 2c20 7061 7261 6d73 290a 2020  rice, params).  
-0002b190: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0002b1a0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0002b1b0: 656c 662e 6372 6561 7465 5f63 6f6e 7472  elf.create_contr
-0002b1c0: 6163 745f 7633 5f6f 7264 6572 2873 796d  act_v3_order(sym
-0002b1d0: 626f 6c2c 2074 7970 652c 2073 6964 652c  bol, type, side,
-0002b1e0: 2061 6d6f 756e 742c 2070 7269 6365 2c20   amount, price, 
-0002b1f0: 7061 7261 6d73 290a 0a20 2020 2064 6566  params)..    def
-0002b200: 2063 7265 6174 655f 756e 6966 6965 645f   create_unified_
-0002b210: 6163 636f 756e 745f 6f72 6465 7228 7365  account_order(se
-0002b220: 6c66 2c20 7379 6d62 6f6c 3a20 7374 722c  lf, symbol: str,
-0002b230: 2074 7970 652c 2073 6964 652c 2061 6d6f   type, side, amo
-0002b240: 756e 742c 2070 7269 6365 3d4e 6f6e 652c  unt, price=None,
-0002b250: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
-0002b260: 2020 2020 2073 656c 662e 6c6f 6164 5f6d       self.load_m
-0002b270: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
-0002b280: 206d 6172 6b65 7420 3d20 7365 6c66 2e6d   market = self.m
-0002b290: 6172 6b65 7428 7379 6d62 6f6c 290a 2020  arket(symbol).  
-0002b2a0: 2020 2020 2020 6c6f 7765 7243 6173 6554        lowerCaseT
-0002b2b0: 7970 6520 3d20 7479 7065 2e6c 6f77 6572  ype = type.lower
-0002b2c0: 2829 0a20 2020 2020 2020 2069 6620 2870  ().        if (p
-0002b2d0: 7269 6365 2069 7320 4e6f 6e65 2920 616e  rice is None) an
-0002b2e0: 6420 286c 6f77 6572 4361 7365 5479 7065  d (lowerCaseType
-0002b2f0: 203d 3d20 276c 696d 6974 2729 3a0a 2020   == 'limit'):.  
-0002b300: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-0002b310: 4172 6775 6d65 6e74 7352 6571 7569 7265  ArgumentsRequire
-0002b320: 6428 7365 6c66 2e69 6420 2b20 2720 6372  d(self.id + ' cr
-0002b330: 6561 7465 4f72 6465 7220 7265 7175 6972  eateOrder requir
-0002b340: 6573 2061 2070 7269 6365 2061 7267 756d  es a price argum
-0002b350: 656e 7420 666f 7220 6c69 6d69 7420 6f72  ent for limit or
-0002b360: 6465 7273 2729 0a20 2020 2020 2020 2072  ders').        r
-0002b370: 6571 7565 7374 203d 207b 0a20 2020 2020  equest = {.     
-0002b380: 2020 2020 2020 2027 7379 6d62 6f6c 273a         'symbol':
-0002b390: 206d 6172 6b65 745b 2769 6427 5d2c 0a20   market['id'],. 
-0002b3a0: 2020 2020 2020 2020 2020 2027 7369 6465             'side
-0002b3b0: 273a 2073 656c 662e 6361 7069 7461 6c69  ': self.capitali
-0002b3c0: 7a65 2873 6964 6529 2c0a 2020 2020 2020  ze(side),.      
-0002b3d0: 2020 2020 2020 276f 7264 6572 5479 7065        'orderType
-0002b3e0: 273a 2073 656c 662e 6361 7069 7461 6c69  ': self.capitali
-0002b3f0: 7a65 286c 6f77 6572 4361 7365 5479 7065  ze(lowerCaseType
-0002b400: 292c 2020 2320 6c69 6d69 7420 6f72 206d  ),  # limit or m
-0002b410: 6172 6b65 740a 2020 2020 2020 2020 2020  arket.          
-0002b420: 2020 2320 2774 696d 6549 6e46 6f72 6365    # 'timeInForce
-0002b430: 273a 2027 4754 4327 2c20 2023 2049 4f43  ': 'GTC',  # IOC
-0002b440: 2c20 464f 4b2c 2050 6f73 744f 6e6c 790a  , FOK, PostOnly.
-0002b450: 2020 2020 2020 2020 2020 2020 2320 2774              # 't
-0002b460: 616b 6550 726f 6669 7427 3a20 3132 332e  akeProfit': 123.
-0002b470: 3435 2c20 2023 2074 616b 6520 7072 6f66  45,  # take prof
-0002b480: 6974 2070 7269 6365 2c20 6f6e 6c79 2074  it price, only t
-0002b490: 616b 6520 6566 6665 6374 2075 706f 6e20  ake effect upon 
-0002b4a0: 6f70 656e 696e 6720 7468 6520 706f 7369  opening the posi
-0002b4b0: 7469 6f6e 0a20 2020 2020 2020 2020 2020  tion.           
-0002b4c0: 2023 2027 7374 6f70 4c6f 7373 273a 2031   # 'stopLoss': 1
-0002b4d0: 3233 2e34 352c 2020 2320 7374 6f70 206c  23.45,  # stop l
-0002b4e0: 6f73 7320 7072 6963 652c 206f 6e6c 7920  oss price, only 
-0002b4f0: 7461 6b65 2065 6666 6563 7420 7570 6f6e  take effect upon
-0002b500: 206f 7065 6e69 6e67 2074 6865 2070 6f73   opening the pos
-0002b510: 6974 696f 6e0a 2020 2020 2020 2020 2020  ition.          
-0002b520: 2020 2320 2772 6564 7563 654f 6e6c 7927    # 'reduceOnly'
-0002b530: 3a20 4661 6c73 652c 2020 2320 7265 6475  : False,  # redu
-0002b540: 6365 206f 6e6c 792c 2072 6571 7569 7265  ce only, require
-0002b550: 6420 666f 7220 6c69 6e65 6172 206f 7264  d for linear ord
-0002b560: 6572 730a 2020 2020 2020 2020 2020 2020  ers.            
-0002b570: 2320 7768 656e 2063 7265 6174 696e 6720  # when creating 
-0002b580: 6120 636c 6f73 696e 6720 6f72 6465 722c  a closing order,
-0002b590: 2062 7962 6974 2072 6563 6f6d 6d65 6e64   bybit recommend
-0002b5a0: 7320 6120 5472 7565 2076 616c 7565 2066  s a True value f
-0002b5b0: 6f72 0a20 2020 2020 2020 2020 2020 2023  or.            #
-0002b5c0: 2020 636c 6f73 654f 6e54 7269 6767 6572    closeOnTrigger
-0002b5d0: 2074 6f20 6176 6f69 6420 6661 696c 696e   to avoid failin
-0002b5e0: 6720 6475 6520 746f 2069 6e73 7566 6669  g due to insuffi
-0002b5f0: 6369 656e 7420 6176 6169 6c61 626c 6520  cient available 
-0002b600: 6d61 7267 696e 0a20 2020 2020 2020 2020  margin.         
-0002b610: 2020 2023 2027 636c 6f73 654f 6e54 7269     # 'closeOnTri
-0002b620: 6767 6572 273a 2046 616c 7365 2c20 7265  gger': False, re
-0002b630: 7175 6972 6564 2066 6f72 206c 696e 6561  quired for linea
-0002b640: 7220 6f72 6465 7273 0a20 2020 2020 2020  r orders.       
-0002b650: 2020 2020 2023 2027 6f72 6465 724c 696e       # 'orderLin
-0002b660: 6b49 6427 3a20 2773 7472 696e 6727 2c20  kId': 'string', 
-0002b670: 2023 2075 6e69 7175 6520 636c 6965 6e74   # unique client
-0002b680: 206f 7264 6572 2069 642c 206d 6178 2033   order id, max 3
-0002b690: 3620 6368 6172 6163 7465 7273 0a20 2020  6 characters.   
-0002b6a0: 2020 2020 2020 2020 2023 2027 7472 6967           # 'trig
-0002b6b0: 6765 7250 7269 6365 273a 2031 3233 2e34  gerPrice': 123.4
-0002b6c0: 352c 2020 2320 7472 6967 6765 7220 7072  5,  # trigger pr
-0002b6d0: 6963 652c 2072 6571 7569 7265 6420 666f  ice, required fo
-0002b6e0: 7220 636f 6e64 6974 696f 6e61 6c20 6f72  r conditional or
-0002b6f0: 6465 7273 0a20 2020 2020 2020 2020 2020  ders.           
-0002b700: 2023 2027 7472 6967 6765 7242 7927 3a20   # 'triggerBy': 
-0002b710: 274d 6172 6b50 7269 6365 272c 2020 2320  'MarkPrice',  # 
-0002b720: 496e 6465 7850 7269 6365 2c20 4d61 726b  IndexPrice, Mark
-0002b730: 5072 6963 652c 204c 6173 7450 7269 6365  Price, LastPrice
-0002b740: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
-0002b750: 7470 5472 6967 6765 7262 7927 3a20 274d  tpTriggerby': 'M
-0002b760: 6172 6b50 7269 6365 272c 2020 2320 496e  arkPrice',  # In
-0002b770: 6465 7850 7269 6365 2c20 4d61 726b 5072  dexPrice, MarkPr
-0002b780: 6963 652c 204c 6173 7450 7269 6365 0a20  ice, LastPrice. 
-0002b790: 2020 2020 2020 2020 2020 2023 2027 736c             # 'sl
-0002b7a0: 5472 6967 6765 7242 7927 3a20 274d 6172  TriggerBy': 'Mar
-0002b7b0: 6b50 7269 6365 272c 2020 2320 496e 6465  kPrice',  # Inde
-0002b7c0: 7850 7269 6365 2c20 4d61 726b 5072 6963  xPrice, MarkPric
-0002b7d0: 652c 204c 6173 7450 7269 6365 0a20 2020  e, LastPrice.   
-0002b7e0: 2020 2020 2020 2020 2023 2027 6d6d 7027           # 'mmp'
-0002b7f0: 3a20 4661 6c73 6520 2023 206d 6172 6b65  : False  # marke
-0002b800: 7420 6d61 6b65 7220 7072 6f74 6563 7469  t maker protecti
-0002b810: 6f6e 0a20 2020 2020 2020 2020 2020 2023  on.            #
-0002b820: 2027 706f 7369 7469 6f6e 4964 7827 3a20   'positionIdx': 
-0002b830: 302c 2020 2320 506f 7369 7469 6f6e 206d  0,  # Position m
-0002b840: 6f64 652e 2055 6e69 6669 6564 2061 6363  ode. Unified acc
-0002b850: 6f75 6e74 2068 6173 206f 6e65 2d77 6179  ount has one-way
-0002b860: 206d 6f64 6520 6f6e 6c79 2830 290a 2020   mode only(0).  
-0002b870: 2020 2020 2020 2020 2020 2320 2774 7269            # 'tri
-0002b880: 6767 6572 4469 7265 6374 696f 6e27 3a20  ggerDirection': 
-0002b890: 312c 2020 2320 436f 6e64 6974 696f 6e61  1,  # Conditiona
-0002b8a0: 6c20 6f72 6465 7220 7061 7261 6d2e 2055  l order param. U
-0002b8b0: 7365 6420 746f 2069 6465 6e74 6966 7920  sed to identify 
-0002b8c0: 7468 6520 6578 7065 6374 6564 2064 6972  the expected dir
-0002b8d0: 6563 7469 6f6e 206f 6620 7468 6520 636f  ection of the co
-0002b8e0: 6e64 6974 696f 6e61 6c20 6f72 6465 722e  nditional order.
-0002b8f0: 2031 3a20 7472 6967 6765 7265 6420 7768   1: triggered wh
-0002b900: 656e 206d 6172 6b65 7420 7072 6963 6520  en market price 
-0002b910: 7269 7365 7320 746f 2074 7269 6767 6572  rises to trigger
-0002b920: 5072 6963 6520 323a 2074 7269 6767 6572  Price 2: trigger
-0002b930: 6564 2077 6865 6e20 6d61 726b 6574 2070  ed when market p
-0002b940: 7269 6365 2066 616c 6c73 2074 6f20 7472  rice falls to tr
-0002b950: 6967 6765 7250 7269 6365 0a20 2020 2020  iggerPrice.     
-0002b960: 2020 2020 2020 2023 2056 616c 6964 2066         # Valid f
-0002b970: 6f72 2073 706f 7420 6f6e 6c79 2e0a 2020  or spot only..  
-0002b980: 2020 2020 2020 2020 2020 2320 2769 734c            # 'isL
-0002b990: 6576 6572 6167 6527 3a20 302c 2020 2320  everage': 0,  # 
-0002b9a0: 5768 6574 6865 7220 746f 2062 6f72 726f  Whether to borro
-0002b9b0: 772e 2030 2864 6566 6175 6c74 293a 2046  w. 0(default): F
-0002b9c0: 616c 7365 2c20 313a 2054 7275 650a 2020  alse, 1: True.  
-0002b9d0: 2020 2020 2020 2020 2020 2320 276f 7264            # 'ord
-0002b9e0: 6572 4669 6c74 6572 273a 2027 4f72 6465  erFilter': 'Orde
-0002b9f0: 7227 2020 2320 4f72 6465 722c 7470 736c  r'  # Order,tpsl
-0002ba00: 4f72 6465 722e 2049 6620 6e6f 7420 7061  Order. If not pa
-0002ba10: 7373 6564 2c20 4f72 6465 7220 6279 2064  ssed, Order by d
-0002ba20: 6566 6175 6c74 0a20 2020 2020 2020 2020  efault.         
-0002ba30: 2020 2023 2056 616c 6964 2066 6f72 206f     # Valid for o
-0002ba40: 7074 696f 6e20 6f6e 6c79 2e0a 2020 2020  ption only..    
-0002ba50: 2020 2020 2020 2020 2320 276f 7264 6572          # 'order
-0002ba60: 4976 273a 2027 3027 2c20 2023 2049 6d70  Iv': '0',  # Imp
-0002ba70: 6c69 6564 2076 6f6c 6174 696c 6974 793b  lied volatility;
-0002ba80: 2070 6172 616d 6574 6572 7320 6172 6520   parameters are 
-0002ba90: 7061 7373 6564 2061 6363 6f72 6469 6e67  passed according
-0002baa0: 2074 6f20 7468 6520 7265 616c 2076 616c   to the real val
-0002bab0: 7565 3b20 666f 7220 6578 616d 706c 652c  ue; for example,
-0002bac0: 2066 6f72 2031 3025 2c20 302e 3120 6973   for 10%, 0.1 is
-0002bad0: 2070 6173 7365 640a 2020 2020 2020 2020   passed.        
-0002bae0: 7d0a 2020 2020 2020 2020 6966 206d 6172  }.        if mar
-0002baf0: 6b65 745b 2773 706f 7427 5d3a 0a20 2020  ket['spot']:.   
-0002bb00: 2020 2020 2020 2020 2072 6571 7565 7374           request
-0002bb10: 5b27 6361 7465 676f 7279 275d 203d 2027  ['category'] = '
-0002bb20: 7370 6f74 270a 2020 2020 2020 2020 656c  spot'.        el
-0002bb30: 6966 206d 6172 6b65 745b 276c 696e 6561  if market['linea
-0002bb40: 7227 5d3a 0a20 2020 2020 2020 2020 2020  r']:.           
-0002bb50: 2072 6571 7565 7374 5b27 6361 7465 676f   request['catego
-0002bb60: 7279 275d 203d 2027 6c69 6e65 6172 270a  ry'] = 'linear'.
-0002bb70: 2020 2020 2020 2020 656c 6966 206d 6172          elif mar
-0002bb80: 6b65 745b 276f 7074 696f 6e27 5d3a 0a20  ket['option']:. 
-0002bb90: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-0002bba0: 7374 5b27 6361 7465 676f 7279 275d 203d  st['category'] =
-0002bbb0: 2027 6f70 7469 6f6e 270a 2020 2020 2020   'option'.      
-0002bbc0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0002bbd0: 2020 2020 7261 6973 6520 4e6f 7453 7570      raise NotSup
-0002bbe0: 706f 7274 6564 2873 656c 662e 6964 202b  ported(self.id +
-0002bbf0: 2027 2063 7265 6174 654f 7264 6572 2064   ' createOrder d
-0002bc00: 6f65 7320 6e6f 7420 616c 6c6f 7720 696e  oes not allow in
-0002bc10: 7665 7273 6520 6d61 726b 6574 206f 7264  verse market ord
-0002bc20: 6572 7320 666f 7220 2720 2b20 7379 6d62  ers for ' + symb
-0002bc30: 6f6c 202b 2027 206d 6172 6b65 7473 2729  ol + ' markets')
-0002bc40: 0a20 2020 2020 2020 2069 6620 6d61 726b  .        if mark
-0002bc50: 6574 5b27 7370 6f74 275d 2061 6e64 2028  et['spot'] and (
-0002bc60: 7479 7065 203d 3d20 276d 6172 6b65 7427  type == 'market'
-0002bc70: 2920 616e 6420 2873 6964 6520 3d3d 2027  ) and (side == '
-0002bc80: 6275 7927 293a 0a20 2020 2020 2020 2020  buy'):.         
-0002bc90: 2020 2023 2066 6f72 206d 6172 6b65 7420     # for market 
-0002bca0: 6275 7920 6974 2072 6571 7569 7265 7320  buy it requires 
-0002bcb0: 7468 6520 616d 6f75 6e74 206f 6620 7175  the amount of qu
-0002bcc0: 6f74 6520 6375 7272 656e 6379 2074 6f20  ote currency to 
-0002bcd0: 7370 656e 640a 2020 2020 2020 2020 2020  spend.          
-0002bce0: 2020 6966 2073 656c 662e 6f70 7469 6f6e    if self.option
-0002bcf0: 735b 2763 7265 6174 654d 6172 6b65 7442  s['createMarketB
-0002bd00: 7579 4f72 6465 7252 6571 7569 7265 7350  uyOrderRequiresP
-0002bd10: 7269 6365 275d 3a0a 2020 2020 2020 2020  rice']:.        
-0002bd20: 2020 2020 2020 2020 636f 7374 203d 2073          cost = s
-0002bd30: 656c 662e 7361 6665 5f6e 756d 6265 7228  elf.safe_number(
-0002bd40: 7061 7261 6d73 2c20 2763 6f73 7427 290a  params, 'cost').
-0002bd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bd60: 7061 7261 6d73 203d 2073 656c 662e 6f6d  params = self.om
-0002bd70: 6974 2870 6172 616d 732c 2027 636f 7374  it(params, 'cost
-0002bd80: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
-0002bd90: 2020 2069 6620 7072 6963 6520 6973 204e     if price is N
-0002bda0: 6f6e 6520 616e 6420 636f 7374 2069 7320  one and cost is 
-0002bdb0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0002bdc0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-0002bdd0: 496e 7661 6c69 644f 7264 6572 2873 656c  InvalidOrder(sel
-0002bde0: 662e 6964 202b 2022 2063 7265 6174 654f  f.id + " createO
-0002bdf0: 7264 6572 2829 2072 6571 7569 7265 7320  rder() requires 
-0002be00: 7468 6520 7072 6963 6520 6172 6775 6d65  the price argume
-0002be10: 6e74 2077 6974 6820 6d61 726b 6574 2062  nt with market b
-0002be20: 7579 206f 7264 6572 7320 746f 2063 616c  uy orders to cal
-0002be30: 6375 6c61 7465 2074 6f74 616c 206f 7264  culate total ord
-0002be40: 6572 2063 6f73 7428 616d 6f75 6e74 2074  er cost(amount t
-0002be50: 6f20 7370 656e 6429 2c20 7768 6572 6520  o spend), where 
-0002be60: 636f 7374 203d 2061 6d6f 756e 7420 2a20  cost = amount * 
-0002be70: 7072 6963 652e 2053 7570 706c 7920 6120  price. Supply a 
-0002be80: 7072 6963 6520 6172 6775 6d65 6e74 2074  price argument t
-0002be90: 6f20 6372 6561 7465 4f72 6465 7228 2920  o createOrder() 
-0002bea0: 6361 6c6c 2069 6620 796f 7520 7761 6e74  call if you want
-0002beb0: 2074 6865 2063 6f73 7420 746f 2062 6520   the cost to be 
-0002bec0: 6361 6c63 756c 6174 6564 2066 6f72 2079  calculated for y
-0002bed0: 6f75 2066 726f 6d20 7072 6963 6520 616e  ou from price an
-0002bee0: 6420 616d 6f75 6e74 2c20 6f72 2c20 616c  d amount, or, al
-0002bef0: 7465 726e 6174 6976 656c 792c 2061 6464  ternatively, add
-0002bf00: 202e 6f70 7469 6f6e 735b 2763 7265 6174   .options['creat
-0002bf10: 654d 6172 6b65 7442 7579 4f72 6465 7252  eMarketBuyOrderR
-0002bf20: 6571 7569 7265 7350 7269 6365 275d 203d  equiresPrice'] =
-0002bf30: 2046 616c 7365 2074 6f20 7375 7070 6c79   False to supply
-0002bf40: 2074 6865 2063 6f73 7420 696e 2074 6865   the cost in the
-0002bf50: 2061 6d6f 756e 7420 6172 6775 6d65 6e74   amount argument
-0002bf60: 2874 6865 2065 7863 6861 6e67 652d 7370  (the exchange-sp
-0002bf70: 6563 6966 6963 2062 6568 6176 696f 7572  ecific behaviour
-0002bf80: 2922 290a 2020 2020 2020 2020 2020 2020  )").            
-0002bf90: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0002bfa0: 2020 2020 2020 2020 2020 2020 2020 616d                am
-0002bfb0: 6f75 6e74 5374 7269 6e67 203d 2073 656c  ountString = sel
-0002bfc0: 662e 6e75 6d62 6572 5f74 6f5f 7374 7269  f.number_to_stri
-0002bfd0: 6e67 2861 6d6f 756e 7429 0a20 2020 2020  ng(amount).     
-0002bfe0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0002bff0: 7269 6365 5374 7269 6e67 203d 2073 656c  riceString = sel
-0002c000: 662e 6e75 6d62 6572 5f74 6f5f 7374 7269  f.number_to_stri
-0002c010: 6e67 2870 7269 6365 290a 2020 2020 2020  ng(price).      
-0002c020: 2020 2020 2020 2020 2020 2020 2020 7175                qu
-0002c030: 6f74 6541 6d6f 756e 7420 3d20 5072 6563  oteAmount = Prec
-0002c040: 6973 652e 7374 7269 6e67 5f6d 756c 2861  ise.string_mul(a
-0002c050: 6d6f 756e 7453 7472 696e 672c 2070 7269  mountString, pri
-0002c060: 6365 5374 7269 6e67 290a 2020 2020 2020  ceString).      
-0002c070: 2020 2020 2020 2020 2020 2020 2020 616d                am
-0002c080: 6f75 6e74 203d 2063 6f73 7420 6966 2028  ount = cost if (
-0002c090: 636f 7374 2069 7320 6e6f 7420 4e6f 6e65  cost is not None
-0002c0a0: 2920 656c 7365 2073 656c 662e 7061 7273  ) else self.pars
-0002c0b0: 655f 6e75 6d62 6572 2871 756f 7465 416d  e_number(quoteAm
-0002c0c0: 6f75 6e74 290a 2020 2020 2020 2020 2020  ount).          
-0002c0d0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-0002c0e0: 745b 2771 7479 275d 203d 2073 656c 662e  t['qty'] = self.
-0002c0f0: 636f 7374 5f74 6f5f 7072 6563 6973 696f  cost_to_precisio
-0002c100: 6e28 7379 6d62 6f6c 2c20 616d 6f75 6e74  n(symbol, amount
-0002c110: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-0002c120: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0002c130: 2020 2020 7265 7175 6573 745b 2771 7479      request['qty
-0002c140: 275d 203d 2073 656c 662e 636f 7374 5f74  '] = self.cost_t
-0002c150: 6f5f 7072 6563 6973 696f 6e28 7379 6d62  o_precision(symb
-0002c160: 6f6c 2c20 616d 6f75 6e74 290a 2020 2020  ol, amount).    
-0002c170: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0002c180: 2020 2020 2020 7265 7175 6573 745b 2771        request['q
-0002c190: 7479 275d 203d 2073 656c 662e 616d 6f75  ty'] = self.amou
-0002c1a0: 6e74 5f74 6f5f 7072 6563 6973 696f 6e28  nt_to_precision(
-0002c1b0: 7379 6d62 6f6c 2c20 616d 6f75 6e74 290a  symbol, amount).
-0002c1c0: 2020 2020 2020 2020 6973 4d61 726b 6574          isMarket
-0002c1d0: 203d 206c 6f77 6572 4361 7365 5479 7065   = lowerCaseType
-0002c1e0: 203d 3d20 276d 6172 6b65 7427 0a20 2020   == 'market'.   
-0002c1f0: 2020 2020 2069 734c 696d 6974 203d 206c       isLimit = l
-0002c200: 6f77 6572 4361 7365 5479 7065 203d 3d20  owerCaseType == 
-0002c210: 276c 696d 6974 270a 2020 2020 2020 2020  'limit'.        
-0002c220: 6966 2069 734c 696d 6974 3a0a 2020 2020  if isLimit:.    
-0002c230: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0002c240: 2770 7269 6365 275d 203d 2073 656c 662e  'price'] = self.
-0002c250: 7072 6963 655f 746f 5f70 7265 6369 7369  price_to_precisi
-0002c260: 6f6e 2873 796d 626f 6c2c 2070 7269 6365  on(symbol, price
-0002c270: 290a 2020 2020 2020 2020 7469 6d65 496e  ).        timeIn
-0002c280: 466f 7263 6520 3d20 7365 6c66 2e73 6166  Force = self.saf
-0002c290: 655f 7374 7269 6e67 5f6c 6f77 6572 2870  e_string_lower(p
-0002c2a0: 6172 616d 732c 2027 7469 6d65 496e 466f  arams, 'timeInFo
-0002c2b0: 7263 6527 2920 2023 2073 656c 6620 6973  rce')  # self is
-0002c2c0: 2073 616d 6520 7370 6563 6966 6963 2070   same specific p
-0002c2d0: 6172 616d 0a20 2020 2020 2020 2070 6f73  aram.        pos
-0002c2e0: 744f 6e6c 7920 3d20 4e6f 6e65 0a20 2020  tOnly = None.   
-0002c2f0: 2020 2020 2070 6f73 744f 6e6c 792c 2070       postOnly, p
-0002c300: 6172 616d 7320 3d20 7365 6c66 2e68 616e  arams = self.han
-0002c310: 646c 655f 706f 7374 5f6f 6e6c 7928 6973  dle_post_only(is
-0002c320: 4d61 726b 6574 2c20 7469 6d65 496e 466f  Market, timeInFo
-0002c330: 7263 6520 3d3d 2027 506f 7374 4f6e 6c79  rce == 'PostOnly
-0002c340: 272c 2070 6172 616d 7329 0a20 2020 2020  ', params).     
-0002c350: 2020 2069 6620 706f 7374 4f6e 6c79 3a0a     if postOnly:.
-0002c360: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-0002c370: 6573 745b 2774 696d 6549 6e46 6f72 6365  est['timeInForce
-0002c380: 275d 203d 2027 506f 7374 4f6e 6c79 270a  '] = 'PostOnly'.
-0002c390: 2020 2020 2020 2020 656c 6966 2074 696d          elif tim
-0002c3a0: 6549 6e46 6f72 6365 203d 3d20 2767 7463  eInForce == 'gtc
-0002c3b0: 273a 0a20 2020 2020 2020 2020 2020 2072  ':.            r
-0002c3c0: 6571 7565 7374 5b27 7469 6d65 496e 466f  equest['timeInFo
-0002c3d0: 7263 6527 5d20 3d20 2747 5443 270a 2020  rce'] = 'GTC'.  
-0002c3e0: 2020 2020 2020 656c 6966 2074 696d 6549        elif timeI
-0002c3f0: 6e46 6f72 6365 203d 3d20 2766 6f6b 273a  nForce == 'fok':
-0002c400: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-0002c410: 7565 7374 5b27 7469 6d65 496e 466f 7263  uest['timeInForc
-0002c420: 6527 5d20 3d20 2746 4f4b 270a 2020 2020  e'] = 'FOK'.    
-0002c430: 2020 2020 656c 6966 2074 696d 6549 6e46      elif timeInF
-0002c440: 6f72 6365 203d 3d20 2769 6f63 273a 0a20  orce == 'ioc':. 
-0002c450: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-0002c460: 7374 5b27 7469 6d65 496e 466f 7263 6527  st['timeInForce'
-0002c470: 5d20 3d20 2749 4f43 270a 2020 2020 2020  ] = 'IOC'.      
-0002c480: 2020 7472 6967 6765 7250 7269 6365 203d    triggerPrice =
-0002c490: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
-0002c4a0: 725f 3228 7061 7261 6d73 2c20 2774 7269  r_2(params, 'tri
-0002c4b0: 6767 6572 5072 6963 6527 2c20 2773 746f  ggerPrice', 'sto
-0002c4c0: 7050 7269 6365 2729 0a20 2020 2020 2020  pPrice').       
-0002c4d0: 2073 746f 704c 6f73 7354 7269 6767 6572   stopLossTrigger
-0002c4e0: 5072 6963 6520 3d20 7365 6c66 2e73 6166  Price = self.saf
-0002c4f0: 655f 6e75 6d62 6572 2870 6172 616d 732c  e_number(params,
-0002c500: 2027 7374 6f70 4c6f 7373 5072 6963 6527   'stopLossPrice'
-0002c510: 290a 2020 2020 2020 2020 7461 6b65 5072  ).        takePr
-0002c520: 6f66 6974 5472 6967 6765 7250 7269 6365  ofitTriggerPrice
-0002c530: 203d 2073 656c 662e 7361 6665 5f6e 756d   = self.safe_num
-0002c540: 6265 7228 7061 7261 6d73 2c20 2774 616b  ber(params, 'tak
-0002c550: 6550 726f 6669 7450 7269 6365 2729 0a20  eProfitPrice'). 
-0002c560: 2020 2020 2020 2073 746f 704c 6f73 7320         stopLoss 
-0002c570: 3d20 7365 6c66 2e73 6166 655f 6e75 6d62  = self.safe_numb
-0002c580: 6572 2870 6172 616d 732c 2027 7374 6f70  er(params, 'stop
-0002c590: 4c6f 7373 2729 0a20 2020 2020 2020 2074  Loss').        t
-0002c5a0: 616b 6550 726f 6669 7420 3d20 7365 6c66  akeProfit = self
-0002c5b0: 2e73 6166 655f 6e75 6d62 6572 2870 6172  .safe_number(par
-0002c5c0: 616d 732c 2027 7461 6b65 5072 6f66 6974  ams, 'takeProfit
-0002c5d0: 2729 0a20 2020 2020 2020 2069 7353 746f  ').        isSto
-0002c5e0: 704c 6f73 7354 7269 6767 6572 4f72 6465  pLossTriggerOrde
-0002c5f0: 7220 3d20 7374 6f70 4c6f 7373 5472 6967  r = stopLossTrig
-0002c600: 6765 7250 7269 6365 2069 7320 6e6f 7420  gerPrice is not 
-0002c610: 4e6f 6e65 0a20 2020 2020 2020 2069 7354  None.        isT
-0002c620: 616b 6550 726f 6669 7454 7269 6767 6572  akeProfitTrigger
-0002c630: 4f72 6465 7220 3d20 7461 6b65 5072 6f66  Order = takeProf
-0002c640: 6974 5472 6967 6765 7250 7269 6365 2069  itTriggerPrice i
-0002c650: 7320 6e6f 7420 4e6f 6e65 0a20 2020 2020  s not None.     
-0002c660: 2020 2069 7353 746f 704c 6f73 7320 3d20     isStopLoss = 
-0002c670: 7374 6f70 4c6f 7373 2069 7320 6e6f 7420  stopLoss is not 
-0002c680: 4e6f 6e65 0a20 2020 2020 2020 2069 7354  None.        isT
-0002c690: 616b 6550 726f 6669 7420 3d20 7461 6b65  akeProfit = take
-0002c6a0: 5072 6f66 6974 2069 7320 6e6f 7420 4e6f  Profit is not No
-0002c6b0: 6e65 0a20 2020 2020 2020 2069 7342 7579  ne.        isBuy
-0002c6c0: 203d 2073 6964 6520 3d3d 2027 6275 7927   = side == 'buy'
-0002c6d0: 0a20 2020 2020 2020 2061 7363 656e 6469  .        ascendi
-0002c6e0: 6e67 203d 206e 6f74 2069 7342 7579 2069  ng = not isBuy i
-0002c6f0: 6620 7374 6f70 4c6f 7373 5472 6967 6765  f stopLossTrigge
-0002c700: 7250 7269 6365 2065 6c73 6520 6973 4275  rPrice else isBu
-0002c710: 790a 2020 2020 2020 2020 6966 2074 7269  y.        if tri
-0002c720: 6767 6572 5072 6963 6520 6973 206e 6f74  ggerPrice is not
-0002c730: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-0002c740: 2020 2072 6571 7565 7374 5b27 7472 6967     request['trig
-0002c750: 6765 7244 6972 6563 7469 6f6e 275d 203d  gerDirection'] =
-0002c760: 2032 2069 6620 6173 6365 6e64 696e 6720   2 if ascending 
-0002c770: 656c 7365 2031 0a20 2020 2020 2020 2020  else 1.         
-0002c780: 2020 2072 6571 7565 7374 5b27 7472 6967     request['trig
-0002c790: 6765 7250 7269 6365 275d 203d 2073 656c  gerPrice'] = sel
-0002c7a0: 662e 7072 6963 655f 746f 5f70 7265 6369  f.price_to_preci
-0002c7b0: 7369 6f6e 2873 796d 626f 6c2c 2074 7269  sion(symbol, tri
-0002c7c0: 6767 6572 5072 6963 6529 0a20 2020 2020  ggerPrice).     
-0002c7d0: 2020 2065 6c69 6620 6973 5374 6f70 4c6f     elif isStopLo
-0002c7e0: 7373 5472 6967 6765 724f 7264 6572 206f  ssTriggerOrder o
-0002c7f0: 7220 6973 5461 6b65 5072 6f66 6974 5472  r isTakeProfitTr
-0002c800: 6967 6765 724f 7264 6572 3a0a 2020 2020  iggerOrder:.    
-0002c810: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0002c820: 2774 7269 6767 6572 4469 7265 6374 696f  'triggerDirectio
-0002c830: 6e27 5d20 3d20 3220 6966 2061 7363 656e  n'] = 2 if ascen
-0002c840: 6469 6e67 2065 6c73 6520 310a 2020 2020  ding else 1.    
-0002c850: 2020 2020 2020 2020 7472 6967 6765 7250          triggerP
-0002c860: 7269 6365 203d 2073 746f 704c 6f73 7354  rice = stopLossT
-0002c870: 7269 6767 6572 5072 6963 6520 6966 2069  riggerPrice if i
-0002c880: 7353 746f 704c 6f73 7354 7269 6767 6572  sStopLossTrigger
-0002c890: 4f72 6465 7220 656c 7365 2074 616b 6550  Order else takeP
-0002c8a0: 726f 6669 7454 7269 6767 6572 5072 6963  rofitTriggerPric
-0002c8b0: 650a 2020 2020 2020 2020 2020 2020 7265  e.            re
-0002c8c0: 7175 6573 745b 2774 7269 6767 6572 5072  quest['triggerPr
-0002c8d0: 6963 6527 5d20 3d20 7365 6c66 2e70 7269  ice'] = self.pri
-0002c8e0: 6365 5f74 6f5f 7072 6563 6973 696f 6e28  ce_to_precision(
-0002c8f0: 7379 6d62 6f6c 2c20 7472 6967 6765 7250  symbol, triggerP
-0002c900: 7269 6365 290a 2020 2020 2020 2020 2020  rice).          
-0002c910: 2020 7265 7175 6573 745b 2772 6564 7563    request['reduc
-0002c920: 654f 6e6c 7927 5d20 3d20 5472 7565 0a20  eOnly'] = True. 
-0002c930: 2020 2020 2020 2065 6c69 6620 6973 5374         elif isSt
-0002c940: 6f70 4c6f 7373 206f 7220 6973 5461 6b65  opLoss or isTake
-0002c950: 5072 6f66 6974 3a0a 2020 2020 2020 2020  Profit:.        
-0002c960: 2020 2020 6966 2069 7353 746f 704c 6f73      if isStopLos
-0002c970: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
-0002c980: 2020 2072 6571 7565 7374 5b27 7374 6f70     request['stop
-0002c990: 4c6f 7373 275d 203d 2073 656c 662e 7072  Loss'] = self.pr
-0002c9a0: 6963 655f 746f 5f70 7265 6369 7369 6f6e  ice_to_precision
-0002c9b0: 2873 796d 626f 6c2c 2073 746f 704c 6f73  (symbol, stopLos
-0002c9c0: 7329 0a20 2020 2020 2020 2020 2020 2069  s).            i
-0002c9d0: 6620 6973 5461 6b65 5072 6f66 6974 3a0a  f isTakeProfit:.
-0002c9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c9f0: 7265 7175 6573 745b 2774 616b 6550 726f  request['takePro
-0002ca00: 6669 7427 5d20 3d20 7365 6c66 2e70 7269  fit'] = self.pri
-0002ca10: 6365 5f74 6f5f 7072 6563 6973 696f 6e28  ce_to_precision(
-0002ca20: 7379 6d62 6f6c 2c20 7461 6b65 5072 6f66  symbol, takeProf
-0002ca30: 6974 290a 2020 2020 2020 2020 6966 206d  it).        if m
-0002ca40: 6172 6b65 745b 2773 706f 7427 5d3a 0a20  arket['spot']:. 
-0002ca50: 2020 2020 2020 2020 2020 2023 206f 6e6c             # onl
-0002ca60: 7920 776f 726b 7320 666f 7220 7370 6f74  y works for spot
-0002ca70: 206d 6172 6b65 740a 2020 2020 2020 2020   market.        
-0002ca80: 2020 2020 6966 2074 7269 6767 6572 5072      if triggerPr
-0002ca90: 6963 6520 6973 206e 6f74 204e 6f6e 6520  ice is not None 
-0002caa0: 6f72 2073 746f 704c 6f73 7354 7269 6767  or stopLossTrigg
-0002cab0: 6572 5072 6963 6520 6973 206e 6f74 204e  erPrice is not N
-0002cac0: 6f6e 6520 6f72 2074 616b 6550 726f 6669  one or takeProfi
-0002cad0: 7454 7269 6767 6572 5072 6963 6520 6973  tTriggerPrice is
-0002cae0: 206e 6f74 204e 6f6e 6520 6f72 2069 7353   not None or isS
-0002caf0: 746f 704c 6f73 7320 6f72 2069 7354 616b  topLoss or isTak
-0002cb00: 6550 726f 6669 743a 0a20 2020 2020 2020  eProfit:.       
-0002cb10: 2020 2020 2020 2020 2072 6571 7565 7374           request
-0002cb20: 5b27 6f72 6465 7246 696c 7465 7227 5d20  ['orderFilter'] 
-0002cb30: 3d20 2774 7073 6c4f 7264 6572 270a 2020  = 'tpslOrder'.  
-0002cb40: 2020 2020 2020 636c 6965 6e74 4f72 6465        clientOrde
-0002cb50: 7249 6420 3d20 7365 6c66 2e73 6166 655f  rId = self.safe_
-0002cb60: 7374 7269 6e67 2870 6172 616d 732c 2027  string(params, '
-0002cb70: 636c 6965 6e74 4f72 6465 7249 6427 290a  clientOrderId').
-0002cb80: 2020 2020 2020 2020 6966 2063 6c69 656e          if clien
-0002cb90: 744f 7264 6572 4964 2069 7320 6e6f 7420  tOrderId is not 
-0002cba0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0002cbb0: 2020 7265 7175 6573 745b 276f 7264 6572    request['order
-0002cbc0: 4c69 6e6b 4964 275d 203d 2063 6c69 656e  LinkId'] = clien
-0002cbd0: 744f 7264 6572 4964 0a20 2020 2020 2020  tOrderId.       
-0002cbe0: 2065 6c69 6620 6d61 726b 6574 5b27 6f70   elif market['op
-0002cbf0: 7469 6f6e 275d 3a0a 2020 2020 2020 2020  tion']:.        
-0002cc00: 2020 2020 2320 6d61 6e64 6174 6f72 7920      # mandatory 
-0002cc10: 6669 656c 6420 666f 7220 6f70 7469 6f6e  field for option
-0002cc20: 730a 2020 2020 2020 2020 2020 2020 7265  s.            re
-0002cc30: 7175 6573 745b 276f 7264 6572 4c69 6e6b  quest['orderLink
-0002cc40: 4964 275d 203d 2073 656c 662e 7575 6964  Id'] = self.uuid
-0002cc50: 3136 2829 0a20 2020 2020 2020 2070 6172  16().        par
-0002cc60: 616d 7320 3d20 7365 6c66 2e6f 6d69 7428  ams = self.omit(
-0002cc70: 7061 7261 6d73 2c20 5b27 7374 6f70 5072  params, ['stopPr
-0002cc80: 6963 6527 2c20 2774 696d 6549 6e46 6f72  ice', 'timeInFor
-0002cc90: 6365 272c 2027 7374 6f70 4c6f 7373 5072  ce', 'stopLossPr
-0002cca0: 6963 6527 2c20 2774 616b 6550 726f 6669  ice', 'takeProfi
-0002ccb0: 7450 7269 6365 272c 2027 706f 7374 4f6e  tPrice', 'postOn
-0002ccc0: 6c79 272c 2027 636c 6965 6e74 4f72 6465  ly', 'clientOrde
-0002ccd0: 7249 6427 2c20 2774 7269 6767 6572 5072  rId', 'triggerPr
-0002cce0: 6963 6527 2c20 2773 746f 704c 6f73 7327  ice', 'stopLoss'
-0002ccf0: 2c20 2774 616b 6550 726f 6669 7427 5d29  , 'takeProfit'])
-0002cd00: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
-0002cd10: 6520 3d20 7365 6c66 2e70 7269 7661 7465  e = self.private
-0002cd20: 506f 7374 5635 4f72 6465 7243 7265 6174  PostV5OrderCreat
-0002cd30: 6528 7365 6c66 2e65 7874 656e 6428 7265  e(self.extend(re
-0002cd40: 7175 6573 742c 2070 6172 616d 7329 290a  quest, params)).
-0002cd50: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0002cd60: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
-0002cd70: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
-0002cd80: 436f 6465 223a 2030 2c0a 2020 2020 2020  Code": 0,.      
-0002cd90: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
-0002cda0: 4d73 6722 3a20 224f 4b22 2c0a 2020 2020  Msg": "OK",.    
-0002cdb0: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-0002cdc0: 6573 756c 7422 3a20 7b0a 2020 2020 2020  esult": {.      
-0002cdd0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0002cde0: 226f 7264 6572 4964 223a 2022 3133 3231  "orderId": "1321
-0002cdf0: 3030 3337 3439 3338 3633 3237 3535 3222  003749386327552"
-0002ce00: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0002ce10: 2020 2020 2020 2020 226f 7264 6572 4c69          "orderLi
-0002ce20: 6e6b 4964 223a 2022 7370 6f74 2d74 6573  nkId": "spot-tes
-0002ce30: 742d 706f 7374 6f6e 6c79 220a 2020 2020  t-postonly".    
-0002ce40: 2020 2020 2320 2020 2020 2020 2020 7d2c      #         },
-0002ce50: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0002ce60: 2020 2022 7265 7445 7874 496e 666f 223a     "retExtInfo":
-0002ce70: 207b 7d2c 0a20 2020 2020 2020 2023 2020   {},.        #  
-0002ce80: 2020 2020 2020 2022 7469 6d65 223a 2031         "time": 1
-0002ce90: 3637 3232 3131 3931 3834 3731 0a20 2020  672211918471.   
-0002cea0: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
-0002ceb0: 2020 2020 2023 0a20 2020 2020 2020 206f       #.        o
-0002cec0: 7264 6572 203d 2073 656c 662e 7361 6665  rder = self.safe
-0002ced0: 5f76 616c 7565 2872 6573 706f 6e73 652c  _value(response,
-0002cee0: 2027 7265 7375 6c74 272c 207b 7d29 0a20   'result', {}). 
-0002cef0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-0002cf00: 6c66 2e70 6172 7365 5f6f 7264 6572 286f  lf.parse_order(o
-0002cf10: 7264 6572 290a 0a20 2020 2064 6566 2063  rder)..    def c
-0002cf20: 7265 6174 655f 7370 6f74 5f6f 7264 6572  reate_spot_order
-0002cf30: 2873 656c 662c 2073 796d 626f 6c3a 2073  (self, symbol: s
-0002cf40: 7472 2c20 7479 7065 2c20 7369 6465 2c20  tr, type, side, 
-0002cf50: 616d 6f75 6e74 2c20 7072 6963 653d 4e6f  amount, price=No
-0002cf60: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
-0002cf70: 2020 2020 2020 2020 7365 6c66 2e6c 6f61          self.loa
-0002cf80: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
-0002cf90: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
-0002cfa0: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
-0002cfb0: 0a20 2020 2020 2020 2075 7070 6572 4361  .        upperCa
-0002cfc0: 7365 5479 7065 203d 2074 7970 652e 7570  seType = type.up
-0002cfd0: 7065 7228 290a 2020 2020 2020 2020 7265  per().        re
-0002cfe0: 7175 6573 7420 3d20 7b0a 2020 2020 2020  quest = {.      
-0002cff0: 2020 2020 2020 2773 796d 626f 6c27 3a20        'symbol': 
-0002d000: 6d61 726b 6574 5b27 6964 275d 2c0a 2020  market['id'],.  
-0002d010: 2020 2020 2020 2020 2020 2773 6964 6527            'side'
-0002d020: 3a20 7365 6c66 2e63 6170 6974 616c 697a  : self.capitaliz
-0002d030: 6528 7369 6465 292c 0a20 2020 2020 2020  e(side),.       
-0002d040: 2020 2020 2027 6f72 6465 7254 7970 6527       'orderType'
-0002d050: 3a20 7570 7065 7243 6173 6554 7970 652c  : upperCaseType,
-0002d060: 2020 2320 6c69 6d69 742c 206d 6172 6b65    # limit, marke
-0002d070: 7420 6f72 206c 696d 6974 5f6d 616b 6572  t or limit_maker
-0002d080: 0a20 2020 2020 2020 2020 2020 2027 7469  .            'ti
-0002d090: 6d65 496e 466f 7263 6527 3a20 2747 5443  meInForce': 'GTC
-0002d0a0: 272c 2020 2320 464f 4b2c 2049 4f43 0a20  ',  # FOK, IOC. 
-0002d0b0: 2020 2020 2020 2020 2020 2023 2027 6f72             # 'or
-0002d0c0: 6465 724c 696e 6b49 6427 3a20 2773 7472  derLinkId': 'str
-0002d0d0: 696e 6727 2c20 2023 2075 6e69 7175 6520  ing',  # unique 
-0002d0e0: 636c 6965 6e74 206f 7264 6572 2069 642c  client order id,
-0002d0f0: 206d 6178 2033 3620 6368 6172 6163 7465   max 36 characte
-0002d100: 7273 0a20 2020 2020 2020 207d 0a20 2020  rs.        }.   
-0002d110: 2020 2020 2069 6620 2874 7970 6520 3d3d       if (type ==
-0002d120: 2027 6d61 726b 6574 2729 2061 6e64 2028   'market') and (
-0002d130: 7369 6465 203d 3d20 2762 7579 2729 3a0a  side == 'buy'):.
-0002d140: 2020 2020 2020 2020 2020 2020 2320 666f              # fo
-0002d150: 7220 6d61 726b 6574 2062 7579 2069 7420  r market buy it 
-0002d160: 7265 7175 6972 6573 2074 6865 2061 6d6f  requires the amo
-0002d170: 756e 7420 6f66 2071 756f 7465 2063 7572  unt of quote cur
-0002d180: 7265 6e63 7920 746f 2073 7065 6e64 0a20  rency to spend. 
-0002d190: 2020 2020 2020 2020 2020 2069 6620 7365             if se
-0002d1a0: 6c66 2e6f 7074 696f 6e73 5b27 6372 6561  lf.options['crea
-0002d1b0: 7465 4d61 726b 6574 4275 794f 7264 6572  teMarketBuyOrder
-0002d1c0: 5265 7175 6972 6573 5072 6963 6527 5d3a  RequiresPrice']:
-0002d1d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002d1e0: 2063 6f73 7420 3d20 7365 6c66 2e73 6166   cost = self.saf
-0002d1f0: 655f 6e75 6d62 6572 2870 6172 616d 732c  e_number(params,
-0002d200: 2027 636f 7374 2729 0a20 2020 2020 2020   'cost').       
-0002d210: 2020 2020 2020 2020 2070 6172 616d 7320           params 
-0002d220: 3d20 7365 6c66 2e6f 6d69 7428 7061 7261  = self.omit(para
-0002d230: 6d73 2c20 2763 6f73 7427 290a 2020 2020  ms, 'cost').    
-0002d240: 2020 2020 2020 2020 2020 2020 6966 2070              if p
-0002d250: 7269 6365 2069 7320 4e6f 6e65 2061 6e64  rice is None and
-0002d260: 2063 6f73 7420 6973 204e 6f6e 653a 0a20   cost is None:. 
-0002d270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d280: 2020 2072 6169 7365 2049 6e76 616c 6964     raise Invalid
-0002d290: 4f72 6465 7228 7365 6c66 2e69 6420 2b20  Order(self.id + 
-0002d2a0: 2220 6372 6561 7465 4f72 6465 7228 2920  " createOrder() 
-0002d2b0: 7265 7175 6972 6573 2074 6865 2070 7269  requires the pri
-0002d2c0: 6365 2061 7267 756d 656e 7420 7769 7468  ce argument with
-0002d2d0: 206d 6172 6b65 7420 6275 7920 6f72 6465   market buy orde
-0002d2e0: 7273 2074 6f20 6361 6c63 756c 6174 6520  rs to calculate 
-0002d2f0: 746f 7461 6c20 6f72 6465 7220 636f 7374  total order cost
-0002d300: 2861 6d6f 756e 7420 746f 2073 7065 6e64  (amount to spend
-0002d310: 292c 2077 6865 7265 2063 6f73 7420 3d20  ), where cost = 
-0002d320: 616d 6f75 6e74 202a 2070 7269 6365 2e20  amount * price. 
-0002d330: 5375 7070 6c79 2061 2070 7269 6365 2061  Supply a price a
-0002d340: 7267 756d 656e 7420 746f 2063 7265 6174  rgument to creat
-0002d350: 654f 7264 6572 2829 2063 616c 6c20 6966  eOrder() call if
-0002d360: 2079 6f75 2077 616e 7420 7468 6520 636f   you want the co
-0002d370: 7374 2074 6f20 6265 2063 616c 6375 6c61  st to be calcula
-0002d380: 7465 6420 666f 7220 796f 7520 6672 6f6d  ted for you from
-0002d390: 2070 7269 6365 2061 6e64 2061 6d6f 756e   price and amoun
-0002d3a0: 742c 206f 722c 2061 6c74 6572 6e61 7469  t, or, alternati
-0002d3b0: 7665 6c79 2c20 6164 6420 2e6f 7074 696f  vely, add .optio
-0002d3c0: 6e73 5b27 6372 6561 7465 4d61 726b 6574  ns['createMarket
-0002d3d0: 4275 794f 7264 6572 5265 7175 6972 6573  BuyOrderRequires
-0002d3e0: 5072 6963 6527 5d20 3d20 4661 6c73 6520  Price'] = False 
-0002d3f0: 746f 2073 7570 706c 7920 7468 6520 636f  to supply the co
-0002d400: 7374 2069 6e20 7468 6520 616d 6f75 6e74  st in the amount
-0002d410: 2061 7267 756d 656e 7428 7468 6520 6578   argument(the ex
-0002d420: 6368 616e 6765 2d73 7065 6369 6669 6320  change-specific 
-0002d430: 6265 6861 7669 6f75 7229 2229 0a20 2020  behaviour)").   
-0002d440: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-0002d450: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0002d460: 2020 2020 2020 2061 6d6f 756e 7453 7472         amountStr
-0002d470: 696e 6720 3d20 7365 6c66 2e6e 756d 6265  ing = self.numbe
-0002d480: 725f 746f 5f73 7472 696e 6728 616d 6f75  r_to_string(amou
-0002d490: 6e74 290a 2020 2020 2020 2020 2020 2020  nt).            
-0002d4a0: 2020 2020 2020 2020 7072 6963 6553 7472          priceStr
-0002d4b0: 696e 6720 3d20 7365 6c66 2e6e 756d 6265  ing = self.numbe
-0002d4c0: 725f 746f 5f73 7472 696e 6728 7072 6963  r_to_string(pric
-0002d4d0: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
-0002d4e0: 2020 2020 2020 2071 756f 7465 416d 6f75         quoteAmou
-0002d4f0: 6e74 203d 2050 7265 6369 7365 2e73 7472  nt = Precise.str
-0002d500: 696e 675f 6d75 6c28 616d 6f75 6e74 5374  ing_mul(amountSt
-0002d510: 7269 6e67 2c20 7072 6963 6553 7472 696e  ring, priceStrin
-0002d520: 6729 0a20 2020 2020 2020 2020 2020 2020  g).             
-0002d530: 2020 2020 2020 2061 6d6f 756e 7420 3d20         amount = 
-0002d540: 636f 7374 2069 6620 2863 6f73 7420 6973  cost if (cost is
-0002d550: 206e 6f74 204e 6f6e 6529 2065 6c73 6520   not None) else 
-0002d560: 7365 6c66 2e70 6172 7365 5f6e 756d 6265  self.parse_numbe
-0002d570: 7228 7175 6f74 6541 6d6f 756e 7429 0a20  r(quoteAmount). 
-0002d580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d590: 2020 2072 6571 7565 7374 5b27 6f72 6465     request['orde
-0002d5a0: 7251 7479 275d 203d 2073 656c 662e 636f  rQty'] = self.co
-0002d5b0: 7374 5f74 6f5f 7072 6563 6973 696f 6e28  st_to_precision(
-0002d5c0: 7379 6d62 6f6c 2c20 616d 6f75 6e74 290a  symbol, amount).
-0002d5d0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0002d5e0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0002d5f0: 2020 7265 7175 6573 745b 276f 7264 6572    request['order
-0002d600: 5174 7927 5d20 3d20 7365 6c66 2e63 6f73  Qty'] = self.cos
-0002d610: 745f 746f 5f70 7265 6369 7369 6f6e 2873  t_to_precision(s
-0002d620: 796d 626f 6c2c 2061 6d6f 756e 7429 0a20  ymbol, amount). 
-0002d630: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0002d640: 2020 2020 2020 2020 2072 6571 7565 7374           request
-0002d650: 5b27 6f72 6465 7251 7479 275d 203d 2073  ['orderQty'] = s
-0002d660: 656c 662e 616d 6f75 6e74 5f74 6f5f 7072  elf.amount_to_pr
-0002d670: 6563 6973 696f 6e28 7379 6d62 6f6c 2c20  ecision(symbol, 
-0002d680: 616d 6f75 6e74 290a 2020 2020 2020 2020  amount).        
-0002d690: 6966 2028 7570 7065 7243 6173 6554 7970  if (upperCaseTyp
-0002d6a0: 6520 3d3d 2027 4c49 4d49 5427 2920 6f72  e == 'LIMIT') or
-0002d6b0: 2028 7570 7065 7243 6173 6554 7970 6520   (upperCaseType 
-0002d6c0: 3d3d 2027 4c49 4d49 545f 4d41 4b45 5227  == 'LIMIT_MAKER'
-0002d6d0: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
-0002d6e0: 6620 7072 6963 6520 6973 204e 6f6e 653a  f price is None:
-0002d6f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002d700: 2072 6169 7365 2049 6e76 616c 6964 4f72   raise InvalidOr
-0002d710: 6465 7228 7365 6c66 2e69 6420 2b20 2720  der(self.id + ' 
-0002d720: 6372 6561 7465 4f72 6465 7220 7265 7175  createOrder requ
-0002d730: 6972 6573 2061 2070 7269 6365 2061 7267  ires a price arg
-0002d740: 756d 656e 7420 666f 7220 6120 2720 2b20  ument for a ' + 
-0002d750: 7479 7065 202b 2027 206f 7264 6572 2729  type + ' order')
-0002d760: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-0002d770: 7565 7374 5b27 6f72 6465 7250 7269 6365  uest['orderPrice
-0002d780: 275d 203d 2073 656c 662e 7072 6963 655f  '] = self.price_
-0002d790: 746f 5f70 7265 6369 7369 6f6e 2873 796d  to_precision(sym
-0002d7a0: 626f 6c2c 2070 7269 6365 290a 2020 2020  bol, price).    
-0002d7b0: 2020 2020 6973 4d61 726b 6574 203d 2028      isMarket = (
-0002d7c0: 7570 7065 7243 6173 6554 7970 6520 3d3d  upperCaseType ==
-0002d7d0: 2027 4d41 524b 4554 2729 0a20 2020 2020   'MARKET').     
-0002d7e0: 2020 2070 6f73 744f 6e6c 7920 3d20 4e6f     postOnly = No
-0002d7f0: 6e65 0a20 2020 2020 2020 2070 6f73 744f  ne.        postO
-0002d800: 6e6c 792c 2070 6172 616d 7320 3d20 7365  nly, params = se
-0002d810: 6c66 2e68 616e 646c 655f 706f 7374 5f6f  lf.handle_post_o
-0002d820: 6e6c 7928 6973 4d61 726b 6574 2c20 7479  nly(isMarket, ty
-0002d830: 7065 203d 3d20 274c 494d 4954 5f4d 414b  pe == 'LIMIT_MAK
-0002d840: 4552 272c 2070 6172 616d 7329 0a20 2020  ER', params).   
-0002d850: 2020 2020 2069 6620 706f 7374 4f6e 6c79       if postOnly
-0002d860: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0002d870: 7175 6573 745b 276f 7264 6572 5479 7065  quest['orderType
-0002d880: 275d 203d 2027 4c49 4d49 545f 4d41 4b45  '] = 'LIMIT_MAKE
-0002d890: 5227 0a20 2020 2020 2020 2063 6c69 656e  R'.        clien
-0002d8a0: 744f 7264 6572 4964 203d 2073 656c 662e  tOrderId = self.
-0002d8b0: 7361 6665 5f73 7472 696e 675f 3228 7061  safe_string_2(pa
-0002d8c0: 7261 6d73 2c20 2763 6c69 656e 744f 7264  rams, 'clientOrd
-0002d8d0: 6572 4964 272c 2027 6f72 6465 724c 696e  erId', 'orderLin
-0002d8e0: 6b49 6427 290a 2020 2020 2020 2020 6966  kId').        if
-0002d8f0: 2063 6c69 656e 744f 7264 6572 4964 2069   clientOrderId i
-0002d900: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-0002d910: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0002d920: 276f 7264 6572 4c69 6e6b 4964 275d 203d  'orderLinkId'] =
-0002d930: 2063 6c69 656e 744f 7264 6572 4964 0a20   clientOrderId. 
-0002d940: 2020 2020 2020 2070 6172 616d 7320 3d20         params = 
-0002d950: 7365 6c66 2e6f 6d69 7428 7061 7261 6d73  self.omit(params
-0002d960: 2c20 5b27 636c 6965 6e74 4f72 6465 7249  , ['clientOrderI
-0002d970: 6427 2c20 276f 7264 6572 4c69 6e6b 4964  d', 'orderLinkId
-0002d980: 272c 2027 706f 7374 4f6e 6c79 275d 290a  ', 'postOnly']).
-0002d990: 2020 2020 2020 2020 6272 6f6b 6572 4964          brokerId
-0002d9a0: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-0002d9b0: 696e 6728 7365 6c66 2e6f 7074 696f 6e73  ing(self.options
-0002d9c0: 2c20 2762 726f 6b65 7249 6427 290a 2020  , 'brokerId').  
-0002d9d0: 2020 2020 2020 6966 2062 726f 6b65 7249        if brokerI
-0002d9e0: 6420 6973 206e 6f74 204e 6f6e 653a 0a20  d is not None:. 
-0002d9f0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-0002da00: 7374 5b27 6167 656e 7453 6f75 7263 6527  st['agentSource'
-0002da10: 5d20 3d20 6272 6f6b 6572 4964 0a20 2020  ] = brokerId.   
-0002da20: 2020 2020 2074 7269 6767 6572 5072 6963       triggerPric
-0002da30: 6520 3d20 7365 6c66 2e73 6166 655f 6e75  e = self.safe_nu
-0002da40: 6d62 6572 5f32 2870 6172 616d 732c 2027  mber_2(params, '
-0002da50: 7472 6967 6765 7250 7269 6365 272c 2027  triggerPrice', '
-0002da60: 7374 6f70 5072 6963 6527 290a 2020 2020  stopPrice').    
-0002da70: 2020 2020 6966 2074 7269 6767 6572 5072      if triggerPr
-0002da80: 6963 6520 6973 206e 6f74 204e 6f6e 653a  ice is not None:
-0002da90: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-0002daa0: 7565 7374 5b27 7472 6967 6765 7250 7269  uest['triggerPri
-0002dab0: 6365 275d 203d 2073 656c 662e 7072 6963  ce'] = self.pric
-0002dac0: 655f 746f 5f70 7265 6369 7369 6f6e 2873  e_to_precision(s
-0002dad0: 796d 626f 6c2c 2074 7269 6767 6572 5072  ymbol, triggerPr
-0002dae0: 6963 6529 0a20 2020 2020 2020 2070 6172  ice).        par
-0002daf0: 616d 7320 3d20 7365 6c66 2e6f 6d69 7428  ams = self.omit(
-0002db00: 7061 7261 6d73 2c20 2773 746f 7050 7269  params, 'stopPri
-0002db10: 6365 2729 0a20 2020 2020 2020 2072 6573  ce').        res
-0002db20: 706f 6e73 6520 3d20 7365 6c66 2e70 7269  ponse = self.pri
-0002db30: 7661 7465 506f 7374 5370 6f74 5633 5072  vatePostSpotV3Pr
-0002db40: 6976 6174 654f 7264 6572 2873 656c 662e  ivateOrder(self.
-0002db50: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
-0002db60: 7061 7261 6d73 2929 0a20 2020 2020 2020  params)).       
-0002db70: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
-0002db80: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-0002db90: 2020 2022 7265 7443 6f64 6522 3a20 2230     "retCode": "0
-0002dba0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0002dbb0: 2020 2020 2272 6574 4d73 6722 3a20 224f      "retMsg": "O
-0002dbc0: 4b22 2c0a 2020 2020 2020 2020 2320 2020  K",.        #   
-0002dbd0: 2020 2020 2022 7265 7375 6c74 223a 207b       "result": {
-0002dbe0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0002dbf0: 2020 2020 2020 226f 7264 6572 4964 223a        "orderId":
-0002dc00: 2022 3132 3734 3735 3439 3136 3238 3733   "12747549162873
-0002dc10: 3436 3238 3022 2c0a 2020 2020 2020 2020  46280",.        
-0002dc20: 2320 2020 2020 2020 2020 2020 2022 6f72  #            "or
-0002dc30: 6465 724c 696e 6b49 6422 3a20 2231 3636  derLinkId": "166
-0002dc40: 3637 3938 3632 3730 3135 3733 3022 2c0a  6798627015730",.
-0002dc50: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0002dc60: 2020 2020 2022 7379 6d62 6f6c 223a 2022       "symbol": "
-0002dc70: 4141 5645 5553 4454 222c 0a20 2020 2020  AAVEUSDT",.     
-0002dc80: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0002dc90: 2263 7265 6174 6554 696d 6522 3a20 2231  "createTime": "1
-0002dca0: 3636 3636 3938 3632 3938 3231 222c 0a20  666698629821",. 
-0002dcb0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0002dcc0: 2020 2020 226f 7264 6572 5072 6963 6522      "orderPrice"
-0002dcd0: 3a20 2238 3022 2c0a 2020 2020 2020 2020  : "80",.        
-0002dce0: 2320 2020 2020 2020 2020 2020 2022 6f72  #            "or
-0002dcf0: 6465 7251 7479 223a 2022 302e 3131 222c  derQty": "0.11",
-0002dd00: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0002dd10: 2020 2020 2020 226f 7264 6572 5479 7065        "orderType
-0002dd20: 223a 2022 4c49 4d49 5422 2c0a 2020 2020  ": "LIMIT",.    
-0002dd30: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0002dd40: 2022 7369 6465 223a 2022 4255 5922 2c0a   "side": "BUY",.
-0002dd50: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0002dd60: 2020 2020 2022 7374 6174 7573 223a 2022       "status": "
-0002dd70: 4e45 5722 2c0a 2020 2020 2020 2020 2320  NEW",.        # 
-0002dd80: 2020 2020 2020 2020 2020 2022 7469 6d65             "time
-0002dd90: 496e 466f 7263 6522 3a20 2247 5443 222c  InForce": "GTC",
-0002dda0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0002ddb0: 2020 2020 2020 2261 6363 6f75 6e74 4964        "accountId
-0002ddc0: 223a 2022 3133 3338 3034 3334 222c 0a20  ": "13380434",. 
-0002ddd0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0002dde0: 2020 2020 2265 7865 6351 7479 223a 2022      "execQty": "
-0002ddf0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-0002de00: 2020 2020 2020 2020 2022 6f72 6465 7243           "orderC
-0002de10: 6174 6567 6f72 7922 3a20 2230 220a 2020  ategory": "0".  
-0002de20: 2020 2020 2020 2320 2020 2020 2020 207d        #        }
-0002de30: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0002de40: 2020 2022 7265 7445 7874 4d61 7022 3a20     "retExtMap": 
-0002de50: 7b7d 2c0a 2020 2020 2020 2020 2320 2020  {},.        #   
-0002de60: 2020 2020 2022 7265 7445 7874 496e 666f       "retExtInfo
-0002de70: 223a 206e 756c 6c2c 0a20 2020 2020 2020  ": null,.       
-0002de80: 2023 2020 2020 2020 2020 2274 696d 6522   #        "time"
-0002de90: 3a20 2231 3636 3636 3938 3632 3739 3236  : "1666698627926
-0002dea0: 220a 2020 2020 2020 2020 2320 2020 207d  ".        #    }
-0002deb0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-0002dec0: 2020 206f 7264 6572 203d 2073 656c 662e     order = self.
-0002ded0: 7361 6665 5f76 616c 7565 2872 6573 706f  safe_value(respo
-0002dee0: 6e73 652c 2027 7265 7375 6c74 272c 207b  nse, 'result', {
-0002def0: 7d29 0a20 2020 2020 2020 2072 6574 7572  }).        retur
-0002df00: 6e20 7365 6c66 2e70 6172 7365 5f6f 7264  n self.parse_ord
-0002df10: 6572 286f 7264 6572 290a 0a20 2020 2064  er(order)..    d
-0002df20: 6566 2063 7265 6174 655f 756e 6966 6965  ef create_unifie
-0002df30: 645f 6d61 7267 696e 5f6f 7264 6572 2873  d_margin_order(s
-0002df40: 656c 662c 2073 796d 626f 6c3a 2073 7472  elf, symbol: str
-0002df50: 2c20 7479 7065 2c20 7369 6465 2c20 616d  , type, side, am
-0002df60: 6f75 6e74 2c20 7072 6963 653d 4e6f 6e65  ount, price=None
-0002df70: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
-0002df80: 2020 2020 2020 7365 6c66 2e6c 6f61 645f        self.load_
-0002df90: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
-0002dfa0: 2020 6d61 726b 6574 203d 2073 656c 662e    market = self.
-0002dfb0: 6d61 726b 6574 2873 796d 626f 6c29 0a20  market(symbol). 
-0002dfc0: 2020 2020 2020 2069 6620 6e6f 7420 6d61         if not ma
-0002dfd0: 726b 6574 5b27 6c69 6e65 6172 275d 2061  rket['linear'] a
-0002dfe0: 6e64 206e 6f74 206d 6172 6b65 745b 276f  nd not market['o
-0002dff0: 7074 696f 6e27 5d3a 0a20 2020 2020 2020  ption']:.       
-0002e000: 2020 2020 2072 6169 7365 204e 6f74 5375       raise NotSu
-0002e010: 7070 6f72 7465 6428 7365 6c66 2e69 6420  pported(self.id 
-0002e020: 2b20 2720 6372 6561 7465 4f72 6465 7220  + ' createOrder 
-0002e030: 646f 6573 206e 6f74 2061 6c6c 6f77 2069  does not allow i
-0002e040: 6e76 6572 7365 206d 6172 6b65 7420 6f72  nverse market or
-0002e050: 6465 7273 2066 6f72 2027 202b 2073 796d  ders for ' + sym
-0002e060: 626f 6c20 2b20 2720 6d61 726b 6574 7327  bol + ' markets'
-0002e070: 290a 2020 2020 2020 2020 6c6f 7765 7243  ).        lowerC
-0002e080: 6173 6554 7970 6520 3d20 7479 7065 2e6c  aseType = type.l
-0002e090: 6f77 6572 2829 0a20 2020 2020 2020 2069  ower().        i
-0002e0a0: 6620 2870 7269 6365 2069 7320 4e6f 6e65  f (price is None
-0002e0b0: 2920 616e 6420 286c 6f77 6572 4361 7365  ) and (lowerCase
-0002e0c0: 5479 7065 203d 3d20 276c 696d 6974 2729  Type == 'limit')
-0002e0d0: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-0002e0e0: 6973 6520 4172 6775 6d65 6e74 7352 6571  ise ArgumentsReq
-0002e0f0: 7569 7265 6428 7365 6c66 2e69 6420 2b20  uired(self.id + 
-0002e100: 2720 6372 6561 7465 4f72 6465 7220 7265  ' createOrder re
-0002e110: 7175 6972 6573 2061 2070 7269 6365 2061  quires a price a
-0002e120: 7267 756d 656e 7420 666f 7220 6c69 6d69  rgument for limi
-0002e130: 7420 6f72 6465 7273 2729 0a20 2020 2020  t orders').     
-0002e140: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
-0002e150: 2020 2020 2020 2020 2020 2027 7379 6d62             'symb
-0002e160: 6f6c 273a 206d 6172 6b65 745b 2769 6427  ol': market['id'
-0002e170: 5d2c 0a20 2020 2020 2020 2020 2020 2027  ],.            '
-0002e180: 7369 6465 273a 2073 656c 662e 6361 7069  side': self.capi
-0002e190: 7461 6c69 7a65 2873 6964 6529 2c0a 2020  talize(side),.  
-0002e1a0: 2020 2020 2020 2020 2020 276f 7264 6572            'order
-0002e1b0: 5479 7065 273a 2073 656c 662e 6361 7069  Type': self.capi
-0002e1c0: 7461 6c69 7a65 286c 6f77 6572 4361 7365  talize(lowerCase
-0002e1d0: 5479 7065 292c 2020 2320 6c69 6d69 7420  Type),  # limit 
-0002e1e0: 6f72 206d 6172 6b65 740a 2020 2020 2020  or market.      
-0002e1f0: 2020 2020 2020 2774 696d 6549 6e46 6f72        'timeInFor
-0002e200: 6365 273a 2027 476f 6f64 5469 6c6c 4361  ce': 'GoodTillCa
-0002e210: 6e63 656c 272c 2020 2320 496d 6d65 6469  ncel',  # Immedi
-0002e220: 6174 654f 7243 616e 6365 6c2c 2046 696c  ateOrCancel, Fil
-0002e230: 6c4f 724b 696c 6c2c 2050 6f73 744f 6e6c  lOrKill, PostOnl
-0002e240: 790a 2020 2020 2020 2020 2020 2020 2771  y.            'q
-0002e250: 7479 273a 2073 656c 662e 616d 6f75 6e74  ty': self.amount
-0002e260: 5f74 6f5f 7072 6563 6973 696f 6e28 7379  _to_precision(sy
-0002e270: 6d62 6f6c 2c20 616d 6f75 6e74 292c 0a20  mbol, amount),. 
-0002e280: 2020 2020 2020 2020 2020 2023 2027 7461             # 'ta
-0002e290: 6b65 5072 6f66 6974 273a 2031 3233 2e34  keProfit': 123.4
-0002e2a0: 352c 2020 2320 7461 6b65 2070 726f 6669  5,  # take profi
-0002e2b0: 7420 7072 6963 652c 206f 6e6c 7920 7461  t price, only ta
-0002e2c0: 6b65 2065 6666 6563 7420 7570 6f6e 206f  ke effect upon o
-0002e2d0: 7065 6e69 6e67 2074 6865 2070 6f73 6974  pening the posit
-0002e2e0: 696f 6e0a 2020 2020 2020 2020 2020 2020  ion.            
-0002e2f0: 2320 2773 746f 704c 6f73 7327 3a20 3132  # 'stopLoss': 12
-0002e300: 332e 3435 2c20 2023 2073 746f 7020 6c6f  3.45,  # stop lo
-0002e310: 7373 2070 7269 6365 2c20 6f6e 6c79 2074  ss price, only t
-0002e320: 616b 6520 6566 6665 6374 2075 706f 6e20  ake effect upon 
-0002e330: 6f70 656e 696e 6720 7468 6520 706f 7369  opening the posi
-0002e340: 7469 6f6e 0a20 2020 2020 2020 2020 2020  tion.           
-0002e350: 2023 2027 7265 6475 6365 4f6e 6c79 273a   # 'reduceOnly':
-0002e360: 2046 616c 7365 2c20 2023 2072 6564 7563   False,  # reduc
-0002e370: 6520 6f6e 6c79 2c20 7265 7175 6972 6564  e only, required
-0002e380: 2066 6f72 206c 696e 6561 7220 6f72 6465   for linear orde
-0002e390: 7273 0a20 2020 2020 2020 2020 2020 2023  rs.            #
-0002e3a0: 2077 6865 6e20 6372 6561 7469 6e67 2061   when creating a
-0002e3b0: 2063 6c6f 7369 6e67 206f 7264 6572 2c20   closing order, 
-0002e3c0: 6279 6269 7420 7265 636f 6d6d 656e 6473  bybit recommends
-0002e3d0: 2061 2054 7275 6520 7661 6c75 6520 666f   a True value fo
-0002e3e0: 720a 2020 2020 2020 2020 2020 2020 2320  r.            # 
-0002e3f0: 2063 6c6f 7365 4f6e 5472 6967 6765 7220   closeOnTrigger 
-0002e400: 746f 2061 766f 6964 2066 6169 6c69 6e67  to avoid failing
-0002e410: 2064 7565 2074 6f20 696e 7375 6666 6963   due to insuffic
-0002e420: 6965 6e74 2061 7661 696c 6162 6c65 206d  ient available m
-0002e430: 6172 6769 6e0a 2020 2020 2020 2020 2020  argin.          
-0002e440: 2020 2320 2763 6c6f 7365 4f6e 5472 6967    # 'closeOnTrig
-0002e450: 6765 7227 3a20 4661 6c73 652c 2072 6571  ger': False, req
-0002e460: 7569 7265 6420 666f 7220 6c69 6e65 6172  uired for linear
-0002e470: 206f 7264 6572 730a 2020 2020 2020 2020   orders.        
-0002e480: 2020 2020 2320 276f 7264 6572 4c69 6e6b      # 'orderLink
-0002e490: 4964 273a 2027 7374 7269 6e67 272c 2020  Id': 'string',  
-0002e4a0: 2320 756e 6971 7565 2063 6c69 656e 7420  # unique client 
-0002e4b0: 6f72 6465 7220 6964 2c20 6d61 7820 3336  order id, max 36
-0002e4c0: 2063 6861 7261 6374 6572 730a 2020 2020   characters.    
-0002e4d0: 2020 2020 2020 2020 2320 2774 7269 6767          # 'trigg
-0002e4e0: 6572 5072 6963 6527 3a20 3132 332e 3435  erPrice': 123.45
-0002e4f0: 2c20 2023 2074 7269 6767 6572 2070 7269  ,  # trigger pri
-0002e500: 6365 2c20 7265 7175 6972 6564 2066 6f72  ce, required for
-0002e510: 2063 6f6e 6469 7469 6f6e 616c 206f 7264   conditional ord
-0002e520: 6572 730a 2020 2020 2020 2020 2020 2020  ers.            
-0002e530: 2320 2774 7269 6767 6572 4279 273a 2027  # 'triggerBy': '
-0002e540: 4d61 726b 5072 6963 6527 2c20 2023 2049  MarkPrice',  # I
-0002e550: 6e64 6578 5072 6963 652c 204d 6172 6b50  ndexPrice, MarkP
-0002e560: 7269 6365 0a20 2020 2020 2020 2020 2020  rice.           
-0002e570: 2023 2027 7470 7472 6967 6765 7262 7927   # 'tptriggerby'
-0002e580: 3a20 274d 6172 6b50 7269 6365 272c 2020  : 'MarkPrice',  
-0002e590: 2320 496e 6465 7850 7269 6365 2c20 4d61  # IndexPrice, Ma
-0002e5a0: 726b 5072 6963 650a 2020 2020 2020 2020  rkPrice.        
-0002e5b0: 2020 2020 2320 2773 6c54 7269 6767 6572      # 'slTrigger
-0002e5c0: 4279 273a 2027 4d61 726b 5072 6963 6527  By': 'MarkPrice'
-0002e5d0: 2c20 2023 2049 6e64 6578 5072 6963 652c  ,  # IndexPrice,
-0002e5e0: 204d 6172 6b50 7269 6365 0a20 2020 2020   MarkPrice.     
-0002e5f0: 2020 2020 2020 2023 2027 6d6d 7027 3a20         # 'mmp': 
-0002e600: 4661 6c73 6520 2023 206d 6172 6b65 7420  False  # market 
-0002e610: 6d61 6b65 7220 7072 6f74 6563 7469 6f6e  maker protection
-0002e620: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
-0002e630: 706f 7369 7469 6f6e 4964 7827 3a20 302c  positionIdx': 0,
-0002e640: 2020 2320 506f 7369 7469 6f6e 206d 6f64    # Position mod
-0002e650: 652e 2075 6e69 6669 6564 206d 6172 6769  e. unified margi
-0002e660: 6e20 6163 636f 756e 7420 6973 206f 6e6c  n account is onl
-0002e670: 7920 6176 6169 6c61 626c 6520 696e 204f  y available in O
-0002e680: 6e65 2d57 6179 206d 6f64 652c 2077 6869  ne-Way mode, whi
-0002e690: 6368 2069 7320 300a 2020 2020 2020 2020  ch is 0.        
-0002e6a0: 2020 2020 2320 2762 6173 6550 7269 6365      # 'basePrice
-0002e6b0: 273a 2027 3027 2c20 2023 2049 7420 7769  ': '0',  # It wi
-0002e6c0: 6c6c 2062 6520 7573 6564 2074 6f20 636f  ll be used to co
-0002e6d0: 6d70 6172 6520 7769 7468 2074 6865 2076  mpare with the v
-0002e6e0: 616c 7565 206f 6620 7472 6967 6765 7250  alue of triggerP
-0002e6f0: 7269 6365 2c20 746f 2064 6563 6964 6520  rice, to decide 
-0002e700: 7768 6574 6865 7220 796f 7572 2063 6f6e  whether your con
-0002e710: 6469 7469 6f6e 616c 206f 7264 6572 2077  ditional order w
-0002e720: 696c 6c20 6265 2074 7269 6767 6572 6564  ill be triggered
-0002e730: 2062 7920 6372 6f73 7369 6e67 2074 7269   by crossing tri
-0002e740: 6767 6572 2070 7269 6365 2066 726f 6d20  gger price from 
-0002e750: 7570 7065 7220 7369 6465 206f 7220 6c6f  upper side or lo
-0002e760: 7765 7220 7369 6465 2e20 4d61 696e 6c79  wer side. Mainly
-0002e770: 2075 7365 6420 746f 2069 6465 6e74 6966   used to identif
-0002e780: 7920 7468 6520 6578 7065 6374 6564 2064  y the expected d
-0002e790: 6972 6563 7469 6f6e 206f 6620 7468 6520  irection of the 
-0002e7a0: 6375 7272 656e 7420 636f 6e64 6974 696f  current conditio
-0002e7b0: 6e61 6c20 6f72 6465 722e 0a20 2020 2020  nal order..     
-0002e7c0: 2020 2020 2020 2023 2027 6976 273a 2027         # 'iv': '
-0002e7d0: 3027 2c20 2023 2049 6d70 6c69 6564 2076  0',  # Implied v
-0002e7e0: 6f6c 6174 696c 6974 792c 2066 6f72 206f  olatility, for o
-0002e7f0: 7074 696f 6e73 206f 6e6c 793b 2070 6172  ptions only; par
-0002e800: 616d 6574 6572 7320 6172 6520 7061 7373  ameters are pass
-0002e810: 6564 2061 6363 6f72 6469 6e67 2074 6f20  ed according to 
-0002e820: 7468 6520 7265 616c 2076 616c 7565 3b20  the real value; 
-0002e830: 666f 7220 6578 616d 706c 652c 2066 6f72  for example, for
-0002e840: 2031 3025 2c20 302e 3120 6973 2070 6173   10%, 0.1 is pas
-0002e850: 7365 640a 2020 2020 2020 2020 7d0a 2020  sed.        }.  
-0002e860: 2020 2020 2020 6966 206d 6172 6b65 745b        if market[
-0002e870: 276c 696e 6561 7227 5d3a 0a20 2020 2020  'linear']:.     
-0002e880: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-0002e890: 6361 7465 676f 7279 275d 203d 2027 6c69  category'] = 'li
-0002e8a0: 6e65 6172 270a 2020 2020 2020 2020 656c  near'.        el
-0002e8b0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0002e8c0: 7265 7175 6573 745b 2763 6174 6567 6f72  request['categor
-0002e8d0: 7927 5d20 3d20 276f 7074 696f 6e27 0a20  y'] = 'option'. 
-0002e8e0: 2020 2020 2020 2069 734d 6172 6b65 7420         isMarket 
-0002e8f0: 3d20 6c6f 7765 7243 6173 6554 7970 6520  = lowerCaseType 
-0002e900: 3d3d 2027 6d61 726b 6574 270a 2020 2020  == 'market'.    
-0002e910: 2020 2020 6973 4c69 6d69 7420 3d20 6c6f      isLimit = lo
-0002e920: 7765 7243 6173 6554 7970 6520 3d3d 2027  werCaseType == '
-0002e930: 6c69 6d69 7427 0a20 2020 2020 2020 2069  limit'.        i
-0002e940: 6620 6973 4c69 6d69 743a 0a20 2020 2020  f isLimit:.     
-0002e950: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-0002e960: 7072 6963 6527 5d20 3d20 7365 6c66 2e70  price'] = self.p
-0002e970: 7269 6365 5f74 6f5f 7072 6563 6973 696f  rice_to_precisio
-0002e980: 6e28 7379 6d62 6f6c 2c20 7072 6963 6529  n(symbol, price)
-0002e990: 0a20 2020 2020 2020 2065 7863 6861 6e67  .        exchang
-0002e9a0: 6553 7065 6369 6669 6350 6172 616d 203d  eSpecificParam =
-0002e9b0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-0002e9c0: 6728 7061 7261 6d73 2c20 2774 696d 655f  g(params, 'time_
-0002e9d0: 696e 5f66 6f72 6365 2729 0a20 2020 2020  in_force').     
-0002e9e0: 2020 2074 696d 6549 6e46 6f72 6365 203d     timeInForce =
-0002e9f0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-0002ea00: 675f 6c6f 7765 7228 7061 7261 6d73 2c20  g_lower(params, 
-0002ea10: 2774 696d 6549 6e46 6f72 6365 2729 0a20  'timeInForce'). 
-0002ea20: 2020 2020 2020 2070 6f73 744f 6e6c 7920         postOnly 
-0002ea30: 3d20 4e6f 6e65 0a20 2020 2020 2020 2070  = None.        p
-0002ea40: 6f73 744f 6e6c 792c 2070 6172 616d 7320  ostOnly, params 
-0002ea50: 3d20 7365 6c66 2e68 616e 646c 655f 706f  = self.handle_po
-0002ea60: 7374 5f6f 6e6c 7928 6973 4d61 726b 6574  st_only(isMarket
-0002ea70: 2c20 6578 6368 616e 6765 5370 6563 6966  , exchangeSpecif
-0002ea80: 6963 5061 7261 6d20 3d3d 2027 506f 7374  icParam == 'Post
-0002ea90: 4f6e 6c79 272c 2070 6172 616d 7329 0a20  Only', params). 
-0002eaa0: 2020 2020 2020 2069 6620 706f 7374 4f6e         if postOn
-0002eab0: 6c79 3a0a 2020 2020 2020 2020 2020 2020  ly:.            
-0002eac0: 7265 7175 6573 745b 2774 696d 6549 6e46  request['timeInF
-0002ead0: 6f72 6365 275d 203d 2027 506f 7374 4f6e  orce'] = 'PostOn
-0002eae0: 6c79 270a 2020 2020 2020 2020 656c 6966  ly'.        elif
-0002eaf0: 2074 696d 6549 6e46 6f72 6365 203d 3d20   timeInForce == 
-0002eb00: 2767 7463 273a 0a20 2020 2020 2020 2020  'gtc':.         
-0002eb10: 2020 2072 6571 7565 7374 5b27 7469 6d65     request['time
-0002eb20: 496e 466f 7263 6527 5d20 3d20 2747 6f6f  InForce'] = 'Goo
-0002eb30: 6454 696c 6c43 616e 6365 6c27 0a20 2020  dTillCancel'.   
-0002eb40: 2020 2020 2065 6c69 6620 7469 6d65 496e       elif timeIn
-0002eb50: 466f 7263 6520 3d3d 2027 666f 6b27 3a0a  Force == 'fok':.
-0002eb60: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-0002eb70: 6573 745b 2774 696d 6549 6e46 6f72 6365  est['timeInForce
-0002eb80: 275d 203d 2027 4669 6c6c 4f72 4b69 6c6c  '] = 'FillOrKill
-0002eb90: 270a 2020 2020 2020 2020 656c 6966 2074  '.        elif t
-0002eba0: 696d 6549 6e46 6f72 6365 203d 3d20 2769  imeInForce == 'i
-0002ebb0: 6f63 273a 0a20 2020 2020 2020 2020 2020  oc':.           
-0002ebc0: 2072 6571 7565 7374 5b27 7469 6d65 496e   request['timeIn
-0002ebd0: 466f 7263 6527 5d20 3d20 2749 6d6d 6564  Force'] = 'Immed
-0002ebe0: 6961 7465 4f72 4361 6e63 656c 270a 2020  iateOrCancel'.  
-0002ebf0: 2020 2020 2020 7472 6967 6765 7250 7269        triggerPri
-0002ec00: 6365 203d 2073 656c 662e 7361 6665 5f6e  ce = self.safe_n
-0002ec10: 756d 6265 725f 3228 7061 7261 6d73 2c20  umber_2(params, 
-0002ec20: 2773 746f 7050 7269 6365 272c 2027 7472  'stopPrice', 'tr
-0002ec30: 6967 6765 7250 7269 6365 2729 0a20 2020  iggerPrice').   
-0002ec40: 2020 2020 2073 746f 704c 6f73 7354 7269       stopLossTri
-0002ec50: 6767 6572 5072 6963 6520 3d20 7365 6c66  ggerPrice = self
-0002ec60: 2e73 6166 655f 6e75 6d62 6572 2870 6172  .safe_number(par
-0002ec70: 616d 732c 2027 7374 6f70 4c6f 7373 5072  ams, 'stopLossPr
-0002ec80: 6963 6527 2c20 7472 6967 6765 7250 7269  ice', triggerPri
-0002ec90: 6365 290a 2020 2020 2020 2020 7461 6b65  ce).        take
-0002eca0: 5072 6f66 6974 5472 6967 6765 7250 7269  ProfitTriggerPri
-0002ecb0: 6365 203d 2073 656c 662e 7361 6665 5f6e  ce = self.safe_n
-0002ecc0: 756d 6265 7228 7061 7261 6d73 2c20 2774  umber(params, 't
-0002ecd0: 616b 6550 726f 6669 7450 7269 6365 2729  akeProfitPrice')
-0002ece0: 0a20 2020 2020 2020 2073 746f 704c 6f73  .        stopLos
-0002ecf0: 7320 3d20 7365 6c66 2e73 6166 655f 6e75  s = self.safe_nu
-0002ed00: 6d62 6572 2870 6172 616d 732c 2027 7374  mber(params, 'st
-0002ed10: 6f70 4c6f 7373 2729 0a20 2020 2020 2020  opLoss').       
-0002ed20: 2074 616b 6550 726f 6669 7420 3d20 7365   takeProfit = se
-0002ed30: 6c66 2e73 6166 655f 6e75 6d62 6572 2870  lf.safe_number(p
-0002ed40: 6172 616d 732c 2027 7461 6b65 5072 6f66  arams, 'takeProf
-0002ed50: 6974 2729 0a20 2020 2020 2020 2069 7353  it').        isS
-0002ed60: 746f 704c 6f73 7354 7269 6767 6572 4f72  topLossTriggerOr
-0002ed70: 6465 7220 3d20 7374 6f70 4c6f 7373 5472  der = stopLossTr
-0002ed80: 6967 6765 7250 7269 6365 2069 7320 6e6f  iggerPrice is no
-0002ed90: 7420 4e6f 6e65 0a20 2020 2020 2020 2069  t None.        i
-0002eda0: 7354 616b 6550 726f 6669 7454 7269 6767  sTakeProfitTrigg
-0002edb0: 6572 4f72 6465 7220 3d20 7461 6b65 5072  erOrder = takePr
-0002edc0: 6f66 6974 5472 6967 6765 7250 7269 6365  ofitTriggerPrice
-0002edd0: 2069 7320 6e6f 7420 4e6f 6e65 0a20 2020   is not None.   
-0002ede0: 2020 2020 2069 7353 746f 704c 6f73 7320       isStopLoss 
-0002edf0: 3d20 7374 6f70 4c6f 7373 2069 7320 6e6f  = stopLoss is no
-0002ee00: 7420 4e6f 6e65 0a20 2020 2020 2020 2069  t None.        i
-0002ee10: 7354 616b 6550 726f 6669 7420 3d20 7461  sTakeProfit = ta
-0002ee20: 6b65 5072 6f66 6974 2069 7320 6e6f 7420  keProfit is not 
-0002ee30: 4e6f 6e65 0a20 2020 2020 2020 2069 6620  None.        if 
-0002ee40: 6973 5374 6f70 4c6f 7373 5472 6967 6765  isStopLossTrigge
-0002ee50: 724f 7264 6572 206f 7220 6973 5461 6b65  rOrder or isTake
-0002ee60: 5072 6f66 6974 5472 6967 6765 724f 7264  ProfitTriggerOrd
-0002ee70: 6572 3a0a 2020 2020 2020 2020 2020 2020  er:.            
-0002ee80: 7265 7175 6573 745b 2774 7269 6767 6572  request['trigger
-0002ee90: 4279 275d 203d 2027 4c61 7374 5072 6963  By'] = 'LastPric
-0002eea0: 6527 0a20 2020 2020 2020 2020 2020 2074  e'.            t
-0002eeb0: 7269 6767 6572 4174 203d 2073 746f 704c  riggerAt = stopL
-0002eec0: 6f73 7354 7269 6767 6572 5072 6963 6520  ossTriggerPrice 
-0002eed0: 6966 2069 7353 746f 704c 6f73 7354 7269  if isStopLossTri
-0002eee0: 6767 6572 4f72 6465 7220 656c 7365 2074  ggerOrder else t
-0002eef0: 616b 6550 726f 6669 7454 7269 6767 6572  akeProfitTrigger
-0002ef00: 5072 6963 650a 2020 2020 2020 2020 2020  Price.          
-0002ef10: 2020 7072 6563 6973 6554 7269 6767 6572    preciseTrigger
-0002ef20: 5072 6963 6520 3d20 7365 6c66 2e70 7269  Price = self.pri
-0002ef30: 6365 5f74 6f5f 7072 6563 6973 696f 6e28  ce_to_precision(
-0002ef40: 7379 6d62 6f6c 2c20 7472 6967 6765 7241  symbol, triggerA
-0002ef50: 7429 0a20 2020 2020 2020 2020 2020 2072  t).            r
-0002ef60: 6571 7565 7374 5b27 7472 6967 6765 7250  equest['triggerP
-0002ef70: 7269 6365 275d 203d 2070 7265 6369 7365  rice'] = precise
-0002ef80: 5472 6967 6765 7250 7269 6365 0a20 2020  TriggerPrice.   
-0002ef90: 2020 2020 2020 2020 2069 7342 7579 203d           isBuy =
-0002efa0: 2073 6964 6520 3d3d 2027 6275 7927 0a20   side == 'buy'. 
-0002efb0: 2020 2020 2020 2020 2020 2023 206c 6f67             # log
-0002efc0: 6963 616c 2078 6f72 0a20 2020 2020 2020  ical xor.       
-0002efd0: 2020 2020 2061 7363 656e 6469 6e67 203d       ascending =
-0002efe0: 206e 6f74 2069 7342 7579 2069 6620 7374   not isBuy if st
-0002eff0: 6f70 4c6f 7373 5472 6967 6765 7250 7269  opLossTriggerPri
-0002f000: 6365 2065 6c73 6520 6973 4275 790a 2020  ce else isBuy.  
-0002f010: 2020 2020 2020 2020 2020 6465 6c74 6120            delta 
-0002f020: 3d20 7365 6c66 2e6e 756d 6265 725f 746f  = self.number_to
-0002f030: 5f73 7472 696e 6728 6d61 726b 6574 5b27  _string(market['
-0002f040: 7072 6563 6973 696f 6e27 5d5b 2770 7269  precision']['pri
-0002f050: 6365 275d 290a 2020 2020 2020 2020 2020  ce']).          
-0002f060: 2020 7265 7175 6573 745b 2762 6173 6550    request['baseP
-0002f070: 7269 6365 275d 203d 2050 7265 6369 7365  rice'] = Precise
-0002f080: 2e73 7472 696e 675f 6164 6428 7072 6563  .string_add(prec
-0002f090: 6973 6554 7269 6767 6572 5072 6963 652c  iseTriggerPrice,
-0002f0a0: 2064 656c 7461 2920 6966 2061 7363 656e   delta) if ascen
-0002f0b0: 6469 6e67 2065 6c73 6520 5072 6563 6973  ding else Precis
-0002f0c0: 652e 7374 7269 6e67 5f73 7562 2870 7265  e.string_sub(pre
-0002f0d0: 6369 7365 5472 6967 6765 7250 7269 6365  ciseTriggerPrice
-0002f0e0: 2c20 6465 6c74 6129 0a20 2020 2020 2020  , delta).       
-0002f0f0: 2065 6c69 6620 6973 5374 6f70 4c6f 7373   elif isStopLoss
-0002f100: 206f 7220 6973 5461 6b65 5072 6f66 6974   or isTakeProfit
-0002f110: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-0002f120: 2069 7353 746f 704c 6f73 733a 0a20 2020   isStopLoss:.   
-0002f130: 2020 2020 2020 2020 2020 2020 2072 6571               req
-0002f140: 7565 7374 5b27 7374 6f70 4c6f 7373 275d  uest['stopLoss']
-0002f150: 203d 2073 656c 662e 7072 6963 655f 746f   = self.price_to
-0002f160: 5f70 7265 6369 7369 6f6e 2873 796d 626f  _precision(symbo
-0002f170: 6c2c 2073 746f 704c 6f73 7329 0a20 2020  l, stopLoss).   
-0002f180: 2020 2020 2020 2020 2069 6620 6973 5461           if isTa
-0002f190: 6b65 5072 6f66 6974 3a0a 2020 2020 2020  keProfit:.      
-0002f1a0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-0002f1b0: 745b 2774 616b 6550 726f 6669 7427 5d20  t['takeProfit'] 
-0002f1c0: 3d20 7365 6c66 2e70 7269 6365 5f74 6f5f  = self.price_to_
-0002f1d0: 7072 6563 6973 696f 6e28 7379 6d62 6f6c  precision(symbol
-0002f1e0: 2c20 7461 6b65 5072 6f66 6974 290a 2020  , takeProfit).  
-0002f1f0: 2020 2020 2020 636c 6965 6e74 4f72 6465        clientOrde
-0002f200: 7249 6420 3d20 7365 6c66 2e73 6166 655f  rId = self.safe_
-0002f210: 7374 7269 6e67 2870 6172 616d 732c 2027  string(params, '
-0002f220: 636c 6965 6e74 4f72 6465 7249 6427 290a  clientOrderId').
-0002f230: 2020 2020 2020 2020 6966 2063 6c69 656e          if clien
-0002f240: 744f 7264 6572 4964 2069 7320 6e6f 7420  tOrderId is not 
-0002f250: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0002f260: 2020 7265 7175 6573 745b 276f 7264 6572    request['order
-0002f270: 4c69 6e6b 4964 275d 203d 2063 6c69 656e  LinkId'] = clien
-0002f280: 744f 7264 6572 4964 0a20 2020 2020 2020  tOrderId.       
-0002f290: 2065 6c69 6620 6d61 726b 6574 5b27 6f70   elif market['op
-0002f2a0: 7469 6f6e 275d 3a0a 2020 2020 2020 2020  tion']:.        
-0002f2b0: 2020 2020 2320 6d61 6e64 6174 6f72 7920      # mandatory 
-0002f2c0: 6669 656c 6420 666f 7220 6f70 7469 6f6e  field for option
-0002f2d0: 730a 2020 2020 2020 2020 2020 2020 7265  s.            re
-0002f2e0: 7175 6573 745b 276f 7264 6572 4c69 6e6b  quest['orderLink
-0002f2f0: 4964 275d 203d 2073 656c 662e 7575 6964  Id'] = self.uuid
-0002f300: 3136 2829 0a20 2020 2020 2020 2070 6172  16().        par
-0002f310: 616d 7320 3d20 7365 6c66 2e6f 6d69 7428  ams = self.omit(
-0002f320: 7061 7261 6d73 2c20 5b27 7374 6f70 5072  params, ['stopPr
-0002f330: 6963 6527 2c20 2774 696d 6549 6e46 6f72  ice', 'timeInFor
-0002f340: 6365 272c 2027 7472 6967 6765 7250 7269  ce', 'triggerPri
-0002f350: 6365 272c 2027 7374 6f70 4c6f 7373 5072  ce', 'stopLossPr
-0002f360: 6963 6527 2c20 2774 616b 6550 726f 6669  ice', 'takeProfi
-0002f370: 7450 7269 6365 272c 2027 706f 7374 4f6e  tPrice', 'postOn
-0002f380: 6c79 272c 2027 636c 6965 6e74 4f72 6465  ly', 'clientOrde
-0002f390: 7249 6427 2c20 2773 746f 704c 6f73 7327  rId', 'stopLoss'
-0002f3a0: 2c20 2774 616b 6550 726f 6669 7427 5d29  , 'takeProfit'])
-0002f3b0: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
-0002f3c0: 6520 3d20 7365 6c66 2e70 7269 7661 7465  e = self.private
-0002f3d0: 506f 7374 556e 6966 6965 6456 3350 7269  PostUnifiedV3Pri
-0002f3e0: 7661 7465 4f72 6465 7243 7265 6174 6528  vateOrderCreate(
-0002f3f0: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
-0002f400: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
-0002f410: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-0002f420: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
-0002f430: 2320 2020 2020 2020 2020 2272 6574 436f  #         "retCo
-0002f440: 6465 223a 2030 2c0a 2020 2020 2020 2020  de": 0,.        
-0002f450: 2320 2020 2020 2020 2020 2272 6574 4d73  #         "retMs
-0002f460: 6722 3a20 224f 4b22 2c0a 2020 2020 2020  g": "OK",.      
-0002f470: 2020 2320 2020 2020 2020 2020 2272 6573    #         "res
-0002f480: 756c 7422 3a20 7b0a 2020 2020 2020 2020  ult": {.        
-0002f490: 2320 2020 2020 2020 2020 2020 2020 226f  #             "o
-0002f4a0: 7264 6572 4964 223a 2022 6531 3062 3037  rderId": "e10b07
-0002f4b0: 3136 2d37 6339 312d 3430 3931 2d62 3938  16-7c91-4091-b98
-0002f4c0: 612d 3166 6130 6634 3031 6337 6435 222c  a-1fa0f401c7d5",
-0002f4d0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0002f4e0: 2020 2020 2020 2022 6f72 6465 724c 696e         "orderLin
-0002f4f0: 6b49 6422 3a20 2274 6573 7430 3030 3030  kId": "test00000
-0002f500: 3033 220a 2020 2020 2020 2020 2320 2020  03".        #   
-0002f510: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
-0002f520: 2023 2020 2020 2020 2020 2022 7265 7445   #         "retE
-0002f530: 7874 496e 666f 223a 206e 756c 6c2c 0a20  xtInfo": null,. 
-0002f540: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0002f550: 2022 7469 6d65 223a 2031 3636 3434 3431   "time": 1664441
-0002f560: 3334 3432 3338 0a20 2020 2020 2020 2023  344238.        #
-0002f570: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
-0002f580: 0a20 2020 2020 2020 206f 7264 6572 203d  .        order =
-0002f590: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-0002f5a0: 2872 6573 706f 6e73 652c 2027 7265 7375  (response, 'resu
-0002f5b0: 6c74 272c 207b 7d29 0a20 2020 2020 2020  lt', {}).       
-0002f5c0: 2072 6574 7572 6e20 7365 6c66 2e70 6172   return self.par
-0002f5d0: 7365 5f6f 7264 6572 286f 7264 6572 290a  se_order(order).
-0002f5e0: 0a20 2020 2064 6566 2063 7265 6174 655f  .    def create_
-0002f5f0: 636f 6e74 7261 6374 5f76 335f 6f72 6465  contract_v3_orde
-0002f600: 7228 7365 6c66 2c20 7379 6d62 6f6c 3a20  r(self, symbol: 
-0002f610: 7374 722c 2074 7970 652c 2073 6964 652c  str, type, side,
-0002f620: 2061 6d6f 756e 742c 2070 7269 6365 3d4e   amount, price=N
-0002f630: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
-0002f640: 0a20 2020 2020 2020 2073 656c 662e 6c6f  .        self.lo
-0002f650: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
-0002f660: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
-0002f670: 6c66 2e6d 6172 6b65 7428 7379 6d62 6f6c  lf.market(symbol
-0002f680: 290a 2020 2020 2020 2020 6c6f 7765 7243  ).        lowerC
-0002f690: 6173 6554 7970 6520 3d20 7479 7065 2e6c  aseType = type.l
-0002f6a0: 6f77 6572 2829 0a20 2020 2020 2020 2069  ower().        i
-0002f6b0: 6620 2870 7269 6365 2069 7320 4e6f 6e65  f (price is None
-0002f6c0: 2920 616e 6420 286c 6f77 6572 4361 7365  ) and (lowerCase
-0002f6d0: 5479 7065 203d 3d20 276c 696d 6974 2729  Type == 'limit')
-0002f6e0: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-0002f6f0: 6973 6520 4172 6775 6d65 6e74 7352 6571  ise ArgumentsReq
-0002f700: 7569 7265 6428 7365 6c66 2e69 6420 2b20  uired(self.id + 
-0002f710: 2720 6372 6561 7465 436f 6e74 7261 6374  ' createContract
-0002f720: 5633 4f72 6465 7220 7265 7175 6972 6573  V3Order requires
-0002f730: 2061 2070 7269 6365 2061 7267 756d 656e   a price argumen
-0002f740: 7420 666f 7220 6c69 6d69 7420 6f72 6465  t for limit orde
-0002f750: 7273 2729 0a20 2020 2020 2020 2072 6571  rs').        req
-0002f760: 7565 7374 203d 207b 0a20 2020 2020 2020  uest = {.       
-0002f770: 2020 2020 2027 7379 6d62 6f6c 273a 206d       'symbol': m
-0002f780: 6172 6b65 745b 2769 6427 5d2c 0a20 2020  arket['id'],.   
-0002f790: 2020 2020 2020 2020 2027 7369 6465 273a           'side':
-0002f7a0: 2073 656c 662e 6361 7069 7461 6c69 7a65   self.capitalize
-0002f7b0: 2873 6964 6529 2c0a 2020 2020 2020 2020  (side),.        
-0002f7c0: 2020 2020 276f 7264 6572 5479 7065 273a      'orderType':
-0002f7d0: 2073 656c 662e 6361 7069 7461 6c69 7a65   self.capitalize
-0002f7e0: 286c 6f77 6572 4361 7365 5479 7065 292c  (lowerCaseType),
-0002f7f0: 2020 2320 6c69 6d69 7420 6f72 206d 6172    # limit or mar
-0002f800: 6b65 740a 2020 2020 2020 2020 2020 2020  ket.            
-0002f810: 2774 696d 6549 6e46 6f72 6365 273a 2027  'timeInForce': '
-0002f820: 476f 6f64 5469 6c6c 4361 6e63 656c 272c  GoodTillCancel',
-0002f830: 2020 2320 496d 6d65 6469 6174 654f 7243    # ImmediateOrC
-0002f840: 616e 6365 6c2c 2046 696c 6c4f 724b 696c  ancel, FillOrKil
-0002f850: 6c2c 2050 6f73 744f 6e6c 790a 2020 2020  l, PostOnly.    
-0002f860: 2020 2020 2020 2020 2771 7479 273a 2073          'qty': s
-0002f870: 656c 662e 616d 6f75 6e74 5f74 6f5f 7072  elf.amount_to_pr
-0002f880: 6563 6973 696f 6e28 7379 6d62 6f6c 2c20  ecision(symbol, 
-0002f890: 616d 6f75 6e74 292c 0a20 2020 2020 2020  amount),.       
-0002f8a0: 2020 2020 2023 2027 7461 6b65 5072 6f66       # 'takeProf
-0002f8b0: 6974 273a 2031 3233 2e34 352c 2020 2320  it': 123.45,  # 
-0002f8c0: 7461 6b65 2070 726f 6669 7420 7072 6963  take profit pric
-0002f8d0: 652c 206f 6e6c 7920 7461 6b65 2065 6666  e, only take eff
-0002f8e0: 6563 7420 7570 6f6e 206f 7065 6e69 6e67  ect upon opening
-0002f8f0: 2074 6865 2070 6f73 6974 696f 6e0a 2020   the position.  
-0002f900: 2020 2020 2020 2020 2020 2320 2773 746f            # 'sto
-0002f910: 704c 6f73 7327 3a20 3132 332e 3435 2c20  pLoss': 123.45, 
-0002f920: 2023 2073 746f 7020 6c6f 7373 2070 7269   # stop loss pri
-0002f930: 6365 2c20 6f6e 6c79 2074 616b 6520 6566  ce, only take ef
-0002f940: 6665 6374 2075 706f 6e20 6f70 656e 696e  fect upon openin
-0002f950: 6720 7468 6520 706f 7369 7469 6f6e 0a20  g the position. 
-0002f960: 2020 2020 2020 2020 2020 2023 2027 7265             # 're
-0002f970: 6475 6365 4f6e 6c79 273a 2046 616c 7365  duceOnly': False
-0002f980: 2c20 2023 2072 6564 7563 6520 6f6e 6c79  ,  # reduce only
-0002f990: 2c20 7265 7175 6972 6564 2066 6f72 206c  , required for l
-0002f9a0: 696e 6561 7220 6f72 6465 7273 0a20 2020  inear orders.   
-0002f9b0: 2020 2020 2020 2020 2023 2077 6865 6e20           # when 
-0002f9c0: 6372 6561 7469 6e67 2061 2063 6c6f 7369  creating a closi
-0002f9d0: 6e67 206f 7264 6572 2c20 6279 6269 7420  ng order, bybit 
-0002f9e0: 7265 636f 6d6d 656e 6473 2061 2054 7275  recommends a Tru
-0002f9f0: 6520 7661 6c75 6520 666f 720a 2020 2020  e value for.    
-0002fa00: 2020 2020 2020 2020 2320 2063 6c6f 7365          #  close
-0002fa10: 4f6e 5472 6967 6765 7220 746f 2061 766f  OnTrigger to avo
-0002fa20: 6964 2066 6169 6c69 6e67 2064 7565 2074  id failing due t
-0002fa30: 6f20 696e 7375 6666 6963 6965 6e74 2061  o insufficient a
-0002fa40: 7661 696c 6162 6c65 206d 6172 6769 6e0a  vailable margin.
-0002fa50: 2020 2020 2020 2020 2020 2020 2320 2763              # 'c
-0002fa60: 6c6f 7365 4f6e 5472 6967 6765 7227 3a20  loseOnTrigger': 
-0002fa70: 4661 6c73 652c 2072 6571 7569 7265 6420  False, required 
-0002fa80: 666f 7220 6c69 6e65 6172 206f 7264 6572  for linear order
-0002fa90: 730a 2020 2020 2020 2020 2020 2020 2320  s.            # 
-0002faa0: 276f 7264 6572 4c69 6e6b 4964 273a 2027  'orderLinkId': '
-0002fab0: 7374 7269 6e67 272c 2020 2320 756e 6971  string',  # uniq
-0002fac0: 7565 2063 6c69 656e 7420 6f72 6465 7220  ue client order 
-0002fad0: 6964 2c20 6d61 7820 3336 2063 6861 7261  id, max 36 chara
-0002fae0: 6374 6572 730a 2020 2020 2020 2020 2020  cters.          
-0002faf0: 2020 2320 2774 7269 6767 6572 5072 6963    # 'triggerPric
-0002fb00: 6527 3a20 3132 332e 3435 2c20 2023 2074  e': 123.45,  # t
-0002fb10: 7269 6767 6572 2070 7269 6365 2c20 7265  rigger price, re
-0002fb20: 7175 6972 6564 2066 6f72 2063 6f6e 6469  quired for condi
-0002fb30: 7469 6f6e 616c 206f 7264 6572 730a 2020  tional orders.  
-0002fb40: 2020 2020 2020 2020 2020 2320 2774 7269            # 'tri
-0002fb50: 6767 6572 4279 273a 2027 4d61 726b 5072  ggerBy': 'MarkPr
-0002fb60: 6963 6527 2c20 2023 2049 6e64 6578 5072  ice',  # IndexPr
-0002fb70: 6963 652c 204d 6172 6b50 7269 6365 0a20  ice, MarkPrice. 
-0002fb80: 2020 2020 2020 2020 2020 2023 2027 7470             # 'tp
-0002fb90: 7472 6967 6765 7262 7927 3a20 274d 6172  triggerby': 'Mar
-0002fba0: 6b50 7269 6365 272c 2020 2320 496e 6465  kPrice',  # Inde
-0002fbb0: 7850 7269 6365 2c20 4d61 726b 5072 6963  xPrice, MarkPric
-0002fbc0: 650a 2020 2020 2020 2020 2020 2020 2320  e.            # 
-0002fbd0: 2773 6c54 7269 6767 6572 4279 273a 2027  'slTriggerBy': '
-0002fbe0: 4d61 726b 5072 6963 6527 2c20 2023 2049  MarkPrice',  # I
-0002fbf0: 6e64 6578 5072 6963 652c 204d 6172 6b50  ndexPrice, MarkP
-0002fc00: 7269 6365 0a20 2020 2020 2020 2020 2020  rice.           
-0002fc10: 2023 2027 706f 7369 7469 6f6e 4964 7827   # 'positionIdx'
-0002fc20: 3a20 302c 2020 2320 506f 7369 7469 6f6e  : 0,  # Position
-0002fc30: 206d 6f64 652e 2075 6e69 6669 6564 206d   mode. unified m
-0002fc40: 6172 6769 6e20 6163 636f 756e 7420 6973  argin account is
-0002fc50: 206f 6e6c 7920 6176 6169 6c61 626c 6520   only available 
-0002fc60: 696e 204f 6e65 2d57 6179 206d 6f64 652c  in One-Way mode,
-0002fc70: 2077 6869 6368 2069 7320 300a 2020 2020   which is 0.    
-0002fc80: 2020 2020 2020 2020 2320 2774 7269 6767          # 'trigg
-0002fc90: 6572 4469 7265 6374 696f 6e27 3a20 312c  erDirection': 1,
-0002fca0: 2020 2320 5472 6967 6765 7220 6469 7265    # Trigger dire
-0002fcb0: 6374 696f 6e2e 204d 6169 6e6c 7920 7573  ction. Mainly us
-0002fcc0: 6564 2069 6e20 636f 6e64 6974 696f 6e61  ed in conditiona
-0002fcd0: 6c20 6f72 6465 722e 2054 7269 6767 6572  l order. Trigger
-0002fce0: 2074 6865 206f 7264 6572 2077 6865 6e20   the order when 
-0002fcf0: 6d61 726b 6574 2070 7269 6365 2072 6973  market price ris
-0002fd00: 6573 2074 6f20 7472 6967 6765 7250 7269  es to triggerPri
-0002fd10: 6365 206f 7220 6661 6c6c 7320 746f 2074  ce or falls to t
-0002fd20: 7269 6767 6572 5072 6963 652e 2031 3a20  riggerPrice. 1: 
-0002fd30: 7269 7365 3b20 323a 2066 616c 6c0a 2020  rise; 2: fall.  
-0002fd40: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-0002fd50: 6966 206d 6172 6b65 745b 2766 7574 7572  if market['futur
-0002fd60: 6527 5d3a 0a20 2020 2020 2020 2020 2020  e']:.           
-0002fd70: 2070 6f73 6974 696f 6e49 6478 203d 2073   positionIdx = s
-0002fd80: 656c 662e 7361 6665 5f69 6e74 6567 6572  elf.safe_integer
-0002fd90: 2870 6172 616d 732c 2027 706f 7369 7469  (params, 'positi
-0002fda0: 6f6e 5f69 6478 272c 2030 2920 2023 2030  on_idx', 0)  # 0
-0002fdb0: 204f 6e65 2d57 6179 204d 6f64 652c 2031   One-Way Mode, 1
-0002fdc0: 2042 7579 2d73 6964 652c 2032 2053 656c   Buy-side, 2 Sel
-0002fdd0: 6c2d 7369 6465 0a20 2020 2020 2020 2020  l-side.         
-0002fde0: 2020 2072 6571 7565 7374 5b27 706f 7369     request['posi
-0002fdf0: 7469 6f6e 5f69 6478 275d 203d 2070 6f73  tion_idx'] = pos
-0002fe00: 6974 696f 6e49 6478 0a20 2020 2020 2020  itionIdx.       
-0002fe10: 2020 2020 2070 6172 616d 7320 3d20 7365       params = se
-0002fe20: 6c66 2e6f 6d69 7428 7061 7261 6d73 2c20  lf.omit(params, 
-0002fe30: 2770 6f73 6974 696f 6e5f 6964 7827 290a  'position_idx').
-0002fe40: 2020 2020 2020 2020 6973 4d61 726b 6574          isMarket
-0002fe50: 203d 206c 6f77 6572 4361 7365 5479 7065   = lowerCaseType
-0002fe60: 203d 3d20 276d 6172 6b65 7427 0a20 2020   == 'market'.   
-0002fe70: 2020 2020 2069 734c 696d 6974 203d 206c       isLimit = l
-0002fe80: 6f77 6572 4361 7365 5479 7065 203d 3d20  owerCaseType == 
-0002fe90: 276c 696d 6974 270a 2020 2020 2020 2020  'limit'.        
-0002fea0: 6966 2069 734c 696d 6974 3a0a 2020 2020  if isLimit:.    
-0002feb0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0002fec0: 2770 7269 6365 275d 203d 2073 656c 662e  'price'] = self.
-0002fed0: 7072 6963 655f 746f 5f70 7265 6369 7369  price_to_precisi
-0002fee0: 6f6e 2873 796d 626f 6c2c 2070 7269 6365  on(symbol, price
-0002fef0: 290a 2020 2020 2020 2020 7469 6d65 496e  ).        timeIn
-0002ff00: 466f 7263 6520 3d20 7365 6c66 2e73 6166  Force = self.saf
-0002ff10: 655f 7374 7269 6e67 5f6c 6f77 6572 2870  e_string_lower(p
-0002ff20: 6172 616d 732c 2027 7469 6d65 496e 466f  arams, 'timeInFo
-0002ff30: 7263 6527 2920 2023 2073 616d 6520 7370  rce')  # same sp
-0002ff40: 6563 6966 6963 2070 6172 616d 0a20 2020  ecific param.   
-0002ff50: 2020 2020 2070 6f73 744f 6e6c 7920 3d20       postOnly = 
-0002ff60: 4e6f 6e65 0a20 2020 2020 2020 2070 6f73  None.        pos
-0002ff70: 744f 6e6c 792c 2070 6172 616d 7320 3d20  tOnly, params = 
-0002ff80: 7365 6c66 2e68 616e 646c 655f 706f 7374  self.handle_post
-0002ff90: 5f6f 6e6c 7928 6973 4d61 726b 6574 2c20  _only(isMarket, 
-0002ffa0: 7469 6d65 496e 466f 7263 6520 3d3d 2027  timeInForce == '
-0002ffb0: 506f 7374 4f6e 6c79 272c 2070 6172 616d  PostOnly', param
-0002ffc0: 7329 0a20 2020 2020 2020 2069 6620 706f  s).        if po
-0002ffd0: 7374 4f6e 6c79 3a0a 2020 2020 2020 2020  stOnly:.        
-0002ffe0: 2020 2020 7265 7175 6573 745b 2774 696d      request['tim
-0002fff0: 6549 6e46 6f72 6365 275d 203d 2027 506f  eInForce'] = 'Po
-00030000: 7374 4f6e 6c79 270a 2020 2020 2020 2020  stOnly'.        
-00030010: 656c 6966 2074 696d 6549 6e46 6f72 6365  elif timeInForce
-00030020: 203d 3d20 2767 7463 273a 0a20 2020 2020   == 'gtc':.     
-00030030: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-00030040: 7469 6d65 496e 466f 7263 6527 5d20 3d20  timeInForce'] = 
-00030050: 2747 6f6f 6454 696c 6c43 616e 6365 6c27  'GoodTillCancel'
-00030060: 0a20 2020 2020 2020 2065 6c69 6620 7469  .        elif ti
-00030070: 6d65 496e 466f 7263 6520 3d3d 2027 666f  meInForce == 'fo
-00030080: 6b27 3a0a 2020 2020 2020 2020 2020 2020  k':.            
-00030090: 7265 7175 6573 745b 2774 696d 6549 6e46  request['timeInF
-000300a0: 6f72 6365 275d 203d 2027 4669 6c6c 4f72  orce'] = 'FillOr
-000300b0: 4b69 6c6c 270a 2020 2020 2020 2020 656c  Kill'.        el
-000300c0: 6966 2074 696d 6549 6e46 6f72 6365 203d  if timeInForce =
-000300d0: 3d20 2769 6f63 273a 0a20 2020 2020 2020  = 'ioc':.       
-000300e0: 2020 2020 2072 6571 7565 7374 5b27 7469       request['ti
-000300f0: 6d65 496e 466f 7263 6527 5d20 3d20 2749  meInForce'] = 'I
-00030100: 6d6d 6564 6961 7465 4f72 4361 6e63 656c  mmediateOrCancel
-00030110: 270a 2020 2020 2020 2020 7472 6967 6765  '.        trigge
-00030120: 7250 7269 6365 203d 2073 656c 662e 7361  rPrice = self.sa
-00030130: 6665 5f6e 756d 6265 725f 3228 7061 7261  fe_number_2(para
-00030140: 6d73 2c20 2774 7269 6767 6572 5072 6963  ms, 'triggerPric
-00030150: 6527 2c20 2773 746f 7050 7269 6365 2729  e', 'stopPrice')
-00030160: 0a20 2020 2020 2020 2073 746f 704c 6f73  .        stopLos
-00030170: 7354 7269 6767 6572 5072 6963 6520 3d20  sTriggerPrice = 
-00030180: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
-00030190: 2870 6172 616d 732c 2027 7374 6f70 4c6f  (params, 'stopLo
-000301a0: 7373 5072 6963 6527 2c20 7472 6967 6765  ssPrice', trigge
-000301b0: 7250 7269 6365 290a 2020 2020 2020 2020  rPrice).        
-000301c0: 7461 6b65 5072 6f66 6974 5472 6967 6765  takeProfitTrigge
-000301d0: 7250 7269 6365 203d 2073 656c 662e 7361  rPrice = self.sa
-000301e0: 6665 5f6e 756d 6265 7228 7061 7261 6d73  fe_number(params
-000301f0: 2c20 2774 616b 6550 726f 6669 7450 7269  , 'takeProfitPri
-00030200: 6365 2729 0a20 2020 2020 2020 2073 746f  ce').        sto
-00030210: 704c 6f73 7320 3d20 7365 6c66 2e73 6166  pLoss = self.saf
-00030220: 655f 6e75 6d62 6572 2870 6172 616d 732c  e_number(params,
-00030230: 2027 7374 6f70 4c6f 7373 2729 0a20 2020   'stopLoss').   
-00030240: 2020 2020 2074 616b 6550 726f 6669 7420       takeProfit 
-00030250: 3d20 7365 6c66 2e73 6166 655f 6e75 6d62  = self.safe_numb
-00030260: 6572 2870 6172 616d 732c 2027 7461 6b65  er(params, 'take
-00030270: 5072 6f66 6974 2729 0a20 2020 2020 2020  Profit').       
-00030280: 2069 7353 746f 704c 6f73 7354 7269 6767   isStopLossTrigg
-00030290: 6572 4f72 6465 7220 3d20 7374 6f70 4c6f  erOrder = stopLo
-000302a0: 7373 5472 6967 6765 7250 7269 6365 2069  ssTriggerPrice i
-000302b0: 7320 6e6f 7420 4e6f 6e65 0a20 2020 2020  s not None.     
-000302c0: 2020 2069 7354 616b 6550 726f 6669 7454     isTakeProfitT
-000302d0: 7269 6767 6572 4f72 6465 7220 3d20 7461  riggerOrder = ta
-000302e0: 6b65 5072 6f66 6974 5472 6967 6765 7250  keProfitTriggerP
-000302f0: 7269 6365 2069 7320 6e6f 7420 4e6f 6e65  rice is not None
-00030300: 0a20 2020 2020 2020 2069 7353 746f 704c  .        isStopL
-00030310: 6f73 7320 3d20 7374 6f70 4c6f 7373 2069  oss = stopLoss i
-00030320: 7320 6e6f 7420 4e6f 6e65 0a20 2020 2020  s not None.     
-00030330: 2020 2069 7354 616b 6550 726f 6669 7420     isTakeProfit 
-00030340: 3d20 7461 6b65 5072 6f66 6974 2069 7320  = takeProfit is 
-00030350: 6e6f 7420 4e6f 6e65 0a20 2020 2020 2020  not None.       
-00030360: 2069 7342 7579 203d 2073 6964 6520 3d3d   isBuy = side ==
-00030370: 2027 6275 7927 0a20 2020 2020 2020 2061   'buy'.        a
-00030380: 7363 656e 6469 6e67 203d 206e 6f74 2069  scending = not i
-00030390: 7342 7579 2069 6620 7374 6f70 4c6f 7373  sBuy if stopLoss
-000303a0: 5472 6967 6765 7250 7269 6365 2065 6c73  TriggerPrice els
-000303b0: 6520 6973 4275 790a 2020 2020 2020 2020  e isBuy.        
-000303c0: 6966 2074 7269 6767 6572 5072 6963 6520  if triggerPrice 
-000303d0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-000303e0: 2020 2020 2020 2020 2072 6571 7565 7374           request
-000303f0: 5b27 7472 6967 6765 7244 6972 6563 7469  ['triggerDirecti
-00030400: 6f6e 275d 203d 2032 2069 6620 6173 6365  on'] = 2 if asce
-00030410: 6e64 696e 6720 656c 7365 2031 0a20 2020  nding else 1.   
-00030420: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00030430: 5b27 7472 6967 6765 7250 7269 6365 275d  ['triggerPrice']
-00030440: 203d 2073 656c 662e 7072 6963 655f 746f   = self.price_to
-00030450: 5f70 7265 6369 7369 6f6e 2873 796d 626f  _precision(symbo
-00030460: 6c2c 2074 7269 6767 6572 5072 6963 6529  l, triggerPrice)
-00030470: 0a20 2020 2020 2020 2065 6c69 6620 6973  .        elif is
-00030480: 5374 6f70 4c6f 7373 5472 6967 6765 724f  StopLossTriggerO
-00030490: 7264 6572 206f 7220 6973 5461 6b65 5072  rder or isTakePr
-000304a0: 6f66 6974 5472 6967 6765 724f 7264 6572  ofitTriggerOrder
-000304b0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-000304c0: 7175 6573 745b 2774 7269 6767 6572 4469  quest['triggerDi
-000304d0: 7265 6374 696f 6e27 5d20 3d20 3220 6966  rection'] = 2 if
-000304e0: 2061 7363 656e 6469 6e67 2065 6c73 6520   ascending else 
-000304f0: 310a 2020 2020 2020 2020 2020 2020 7472  1.            tr
-00030500: 6967 6765 7250 7269 6365 203d 2073 746f  iggerPrice = sto
-00030510: 704c 6f73 7354 7269 6767 6572 5072 6963  pLossTriggerPric
-00030520: 6520 6966 2069 7353 746f 704c 6f73 7354  e if isStopLossT
-00030530: 7269 6767 6572 4f72 6465 7220 656c 7365  riggerOrder else
-00030540: 2074 616b 6550 726f 6669 7454 7269 6767   takeProfitTrigg
-00030550: 6572 5072 6963 650a 2020 2020 2020 2020  erPrice.        
-00030560: 2020 2020 7265 7175 6573 745b 2774 7269      request['tri
-00030570: 6767 6572 5072 6963 6527 5d20 3d20 7365  ggerPrice'] = se
-00030580: 6c66 2e70 7269 6365 5f74 6f5f 7072 6563  lf.price_to_prec
-00030590: 6973 696f 6e28 7379 6d62 6f6c 2c20 7472  ision(symbol, tr
-000305a0: 6967 6765 7250 7269 6365 290a 2020 2020  iggerPrice).    
-000305b0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-000305c0: 2772 6564 7563 654f 6e6c 7927 5d20 3d20  'reduceOnly'] = 
-000305d0: 5472 7565 0a20 2020 2020 2020 2065 6c69  True.        eli
-000305e0: 6620 6973 5374 6f70 4c6f 7373 206f 7220  f isStopLoss or 
-000305f0: 6973 5461 6b65 5072 6f66 6974 3a0a 2020  isTakeProfit:.  
-00030600: 2020 2020 2020 2020 2020 6966 2069 7353            if isS
-00030610: 746f 704c 6f73 733a 0a20 2020 2020 2020  topLoss:.       
-00030620: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00030630: 5b27 7374 6f70 4c6f 7373 275d 203d 2073  ['stopLoss'] = s
-00030640: 656c 662e 7072 6963 655f 746f 5f70 7265  elf.price_to_pre
-00030650: 6369 7369 6f6e 2873 796d 626f 6c2c 2073  cision(symbol, s
-00030660: 746f 704c 6f73 7329 0a20 2020 2020 2020  topLoss).       
-00030670: 2020 2020 2069 6620 6973 5461 6b65 5072       if isTakePr
-00030680: 6f66 6974 3a0a 2020 2020 2020 2020 2020  ofit:.          
-00030690: 2020 2020 2020 7265 7175 6573 745b 2774        request['t
-000306a0: 616b 6550 726f 6669 7427 5d20 3d20 7365  akeProfit'] = se
-000306b0: 6c66 2e70 7269 6365 5f74 6f5f 7072 6563  lf.price_to_prec
-000306c0: 6973 696f 6e28 7379 6d62 6f6c 2c20 7461  ision(symbol, ta
-000306d0: 6b65 5072 6f66 6974 290a 2020 2020 2020  keProfit).      
-000306e0: 2020 636c 6965 6e74 4f72 6465 7249 6420    clientOrderId 
-000306f0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-00030700: 6e67 2870 6172 616d 732c 2027 636c 6965  ng(params, 'clie
-00030710: 6e74 4f72 6465 7249 6427 290a 2020 2020  ntOrderId').    
-00030720: 2020 2020 6966 2063 6c69 656e 744f 7264      if clientOrd
-00030730: 6572 4964 2069 7320 6e6f 7420 4e6f 6e65  erId is not None
-00030740: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00030750: 7175 6573 745b 276f 7264 6572 4c69 6e6b  quest['orderLink
-00030760: 4964 275d 203d 2063 6c69 656e 744f 7264  Id'] = clientOrd
-00030770: 6572 4964 0a20 2020 2020 2020 2065 6c69  erId.        eli
-00030780: 6620 6d61 726b 6574 5b27 6f70 7469 6f6e  f market['option
-00030790: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
-000307a0: 2320 6d61 6e64 6174 6f72 7920 6669 656c  # mandatory fiel
-000307b0: 6420 666f 7220 6f70 7469 6f6e 730a 2020  d for options.  
-000307c0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-000307d0: 745b 276f 7264 6572 4c69 6e6b 4964 275d  t['orderLinkId']
-000307e0: 203d 2073 656c 662e 7575 6964 3136 2829   = self.uuid16()
-000307f0: 0a20 2020 2020 2020 2070 6172 616d 7320  .        params 
-00030800: 3d20 7365 6c66 2e6f 6d69 7428 7061 7261  = self.omit(para
-00030810: 6d73 2c20 5b27 7374 6f70 5072 6963 6527  ms, ['stopPrice'
-00030820: 2c20 2774 696d 6549 6e46 6f72 6365 272c  , 'timeInForce',
-00030830: 2027 7374 6f70 4c6f 7373 5072 6963 6527   'stopLossPrice'
-00030840: 2c20 2774 616b 6550 726f 6669 7450 7269  , 'takeProfitPri
-00030850: 6365 272c 2027 706f 7374 4f6e 6c79 272c  ce', 'postOnly',
-00030860: 2027 636c 6965 6e74 4f72 6465 7249 6427   'clientOrderId'
-00030870: 2c20 2774 7269 6767 6572 5072 6963 6527  , 'triggerPrice'
-00030880: 2c20 2773 746f 704c 6f73 7327 2c20 2774  , 'stopLoss', 't
-00030890: 616b 6550 726f 6669 7427 5d29 0a20 2020  akeProfit']).   
-000308a0: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
-000308b0: 7365 6c66 2e70 7269 7661 7465 506f 7374  self.privatePost
-000308c0: 436f 6e74 7261 6374 5633 5072 6976 6174  ContractV3Privat
-000308d0: 654f 7264 6572 4372 6561 7465 2873 656c  eOrderCreate(sel
-000308e0: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
-000308f0: 2c20 7061 7261 6d73 2929 0a20 2020 2020  , params)).     
-00030900: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
-00030910: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-00030920: 2020 2020 2020 2022 7265 7443 6f64 6522         "retCode"
-00030930: 3a20 302c 0a20 2020 2020 2020 2023 2020  : 0,.        #  
-00030940: 2020 2020 2020 2022 7265 744d 7367 223a         "retMsg":
-00030950: 2022 4f4b 222c 0a20 2020 2020 2020 2023   "OK",.        #
-00030960: 2020 2020 2020 2020 2022 7265 7375 6c74           "result
-00030970: 223a 207b 0a20 2020 2020 2020 2023 2020  ": {.        #  
-00030980: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
-00030990: 7249 6422 3a20 2265 3130 6230 3731 362d  rId": "e10b0716-
-000309a0: 3763 3931 2d34 3039 312d 6239 3861 2d31  7c91-4091-b98a-1
-000309b0: 6661 3066 3430 3163 3764 3522 2c0a 2020  fa0f401c7d5",.  
-000309c0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000309d0: 2020 2020 226f 7264 6572 4c69 6e6b 4964      "orderLinkId
-000309e0: 223a 2022 7465 7374 3030 3030 3030 3322  ": "test0000003"
-000309f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00030a00: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
-00030a10: 2020 2020 2020 2020 2272 6574 4578 7449          "retExtI
-00030a20: 6e66 6f22 3a20 6e75 6c6c 2c0a 2020 2020  nfo": null,.    
-00030a30: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
-00030a40: 696d 6522 3a20 3136 3634 3434 3133 3434  ime": 1664441344
-00030a50: 3233 380a 2020 2020 2020 2020 2320 2020  238.        #   
-00030a60: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-00030a70: 2020 2020 2020 6f72 6465 7220 3d20 7365        order = se
-00030a80: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
-00030a90: 7370 6f6e 7365 2c20 2772 6573 756c 7427  sponse, 'result'
-00030aa0: 2c20 7b7d 290a 2020 2020 2020 2020 7265  , {}).        re
-00030ab0: 7475 726e 2073 656c 662e 7061 7273 655f  turn self.parse_
-00030ac0: 6f72 6465 7228 6f72 6465 7229 0a0a 2020  order(order)..  
-00030ad0: 2020 6465 6620 6372 6561 7465 5f75 7364    def create_usd
-00030ae0: 635f 6f72 6465 7228 7365 6c66 2c20 7379  c_order(self, sy
-00030af0: 6d62 6f6c 3a20 7374 722c 2074 7970 652c  mbol: str, type,
-00030b00: 2073 6964 652c 2061 6d6f 756e 742c 2070   side, amount, p
-00030b10: 7269 6365 3d4e 6f6e 652c 2070 6172 616d  rice=None, param
-00030b20: 733d 7b7d 293a 0a20 2020 2020 2020 2073  s={}):.        s
-00030b30: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
-00030b40: 2829 0a20 2020 2020 2020 206d 6172 6b65  ().        marke
-00030b50: 7420 3d20 7365 6c66 2e6d 6172 6b65 7428  t = self.market(
-00030b60: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
-00030b70: 6966 2074 7970 6520 3d3d 2027 6d61 726b  if type == 'mark
-00030b80: 6574 273a 0a20 2020 2020 2020 2020 2020  et':.           
-00030b90: 2072 6169 7365 204e 6f74 5375 7070 6f72   raise NotSuppor
-00030ba0: 7465 6428 7365 6c66 2e69 6420 2b20 2763  ted(self.id + 'c
-00030bb0: 7265 6174 654f 7264 6572 2064 6f65 7320  reateOrder does 
-00030bc0: 6e6f 7420 616c 6c6f 7720 6d61 726b 6574  not allow market
-00030bd0: 206f 7264 6572 7320 666f 7220 2720 2b20   orders for ' + 
-00030be0: 7379 6d62 6f6c 202b 2027 206d 6172 6b65  symbol + ' marke
-00030bf0: 7473 2729 0a20 2020 2020 2020 206c 6f77  ts').        low
-00030c00: 6572 4361 7365 5479 7065 203d 2074 7970  erCaseType = typ
-00030c10: 652e 6c6f 7765 7228 290a 2020 2020 2020  e.lower().      
-00030c20: 2020 6966 2028 7072 6963 6520 6973 204e    if (price is N
-00030c30: 6f6e 6529 2061 6e64 2028 6c6f 7765 7243  one) and (lowerC
-00030c40: 6173 6554 7970 6520 3d3d 2027 6c69 6d69  aseType == 'limi
-00030c50: 7427 293a 0a20 2020 2020 2020 2020 2020  t'):.           
-00030c60: 2072 6169 7365 2041 7267 756d 656e 7473   raise Arguments
-00030c70: 5265 7175 6972 6564 2873 656c 662e 6964  Required(self.id
-00030c80: 202b 2027 2063 7265 6174 654f 7264 6572   + ' createOrder
-00030c90: 2072 6571 7569 7265 7320 6120 7072 6963   requires a pric
-00030ca0: 6520 6172 6775 6d65 6e74 2066 6f72 206c  e argument for l
-00030cb0: 696d 6974 206f 7264 6572 7327 290a 2020  imit orders').  
-00030cc0: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-00030cd0: 7b0a 2020 2020 2020 2020 2020 2020 2773  {.            's
-00030ce0: 796d 626f 6c27 3a20 6d61 726b 6574 5b27  ymbol': market['
-00030cf0: 6964 275d 2c0a 2020 2020 2020 2020 2020  id'],.          
-00030d00: 2020 2773 6964 6527 3a20 7365 6c66 2e63    'side': self.c
-00030d10: 6170 6974 616c 697a 6528 7369 6465 292c  apitalize(side),
-00030d20: 0a20 2020 2020 2020 2020 2020 2027 6f72  .            'or
-00030d30: 6465 7254 7970 6527 3a20 7365 6c66 2e63  derType': self.c
-00030d40: 6170 6974 616c 697a 6528 6c6f 7765 7243  apitalize(lowerC
-00030d50: 6173 6554 7970 6529 2c20 2023 206c 696d  aseType),  # lim
-00030d60: 6974 206f 7220 6d61 726b 6574 0a20 2020  it or market.   
-00030d70: 2020 2020 2020 2020 2027 7469 6d65 496e           'timeIn
-00030d80: 466f 7263 6527 3a20 2747 6f6f 6454 696c  Force': 'GoodTil
-00030d90: 6c43 616e 6365 6c27 2c20 2023 2049 6d6d  lCancel',  # Imm
-00030da0: 6564 6961 7465 4f72 4361 6e63 656c 2c20  ediateOrCancel, 
-00030db0: 4669 6c6c 4f72 4b69 6c6c 2c20 506f 7374  FillOrKill, Post
-00030dc0: 4f6e 6c79 0a20 2020 2020 2020 2020 2020  Only.           
-00030dd0: 2027 6f72 6465 7251 7479 273a 2073 656c   'orderQty': sel
-00030de0: 662e 616d 6f75 6e74 5f74 6f5f 7072 6563  f.amount_to_prec
-00030df0: 6973 696f 6e28 7379 6d62 6f6c 2c20 616d  ision(symbol, am
-00030e00: 6f75 6e74 292c 0a20 2020 2020 2020 2020  ount),.         
-00030e10: 2020 2023 2027 7461 6b65 5072 6f66 6974     # 'takeProfit
-00030e20: 273a 2031 3233 2e34 352c 2020 2320 7461  ': 123.45,  # ta
-00030e30: 6b65 2070 726f 6669 7420 7072 6963 652c  ke profit price,
-00030e40: 206f 6e6c 7920 7461 6b65 2065 6666 6563   only take effec
-00030e50: 7420 7570 6f6e 206f 7065 6e69 6e67 2074  t upon opening t
-00030e60: 6865 2070 6f73 6974 696f 6e0a 2020 2020  he position.    
-00030e70: 2020 2020 2020 2020 2320 2773 746f 704c          # 'stopL
-00030e80: 6f73 7327 3a20 3132 332e 3435 2c20 2023  oss': 123.45,  #
-00030e90: 2073 746f 7020 6c6f 7373 2070 7269 6365   stop loss price
-00030ea0: 2c20 6f6e 6c79 2074 616b 6520 6566 6665  , only take effe
-00030eb0: 6374 2075 706f 6e20 6f70 656e 696e 6720  ct upon opening 
-00030ec0: 7468 6520 706f 7369 7469 6f6e 0a20 2020  the position.   
-00030ed0: 2020 2020 2020 2020 2023 2027 7265 6475           # 'redu
-00030ee0: 6365 4f6e 6c79 273a 2046 616c 7365 2c20  ceOnly': False, 
-00030ef0: 2023 2072 6564 7563 6520 6f6e 6c79 2c20   # reduce only, 
-00030f00: 7265 7175 6972 6564 2066 6f72 206c 696e  required for lin
-00030f10: 6561 7220 6f72 6465 7273 0a20 2020 2020  ear orders.     
-00030f20: 2020 2020 2020 2023 2077 6865 6e20 6372         # when cr
-00030f30: 6561 7469 6e67 2061 2063 6c6f 7369 6e67  eating a closing
-00030f40: 206f 7264 6572 2c20 6279 6269 7420 7265   order, bybit re
-00030f50: 636f 6d6d 656e 6473 2061 2054 7275 6520  commends a True 
-00030f60: 7661 6c75 6520 666f 720a 2020 2020 2020  value for.      
-00030f70: 2020 2020 2020 2320 2063 6c6f 7365 4f6e        #  closeOn
-00030f80: 5472 6967 6765 7220 746f 2061 766f 6964  Trigger to avoid
-00030f90: 2066 6169 6c69 6e67 2064 7565 2074 6f20   failing due to 
-00030fa0: 696e 7375 6666 6963 6965 6e74 2061 7661  insufficient ava
-00030fb0: 696c 6162 6c65 206d 6172 6769 6e0a 2020  ilable margin.  
-00030fc0: 2020 2020 2020 2020 2020 2320 2763 6c6f            # 'clo
-00030fd0: 7365 4f6e 5472 6967 6765 7227 3a20 4661  seOnTrigger': Fa
-00030fe0: 6c73 652c 2072 6571 7569 7265 6420 666f  lse, required fo
-00030ff0: 7220 6c69 6e65 6172 206f 7264 6572 730a  r linear orders.
-00031000: 2020 2020 2020 2020 2020 2020 2320 276f              # 'o
-00031010: 7264 6572 4c69 6e6b 4964 273a 2027 7374  rderLinkId': 'st
-00031020: 7269 6e67 272c 2020 2320 756e 6971 7565  ring',  # unique
-00031030: 2063 6c69 656e 7420 6f72 6465 7220 6964   client order id
-00031040: 2c20 6d61 7820 3336 2063 6861 7261 6374  , max 36 charact
-00031050: 6572 730a 2020 2020 2020 2020 2020 2020  ers.            
-00031060: 2320 2774 7269 6767 6572 5072 6963 6527  # 'triggerPrice'
-00031070: 3a20 3132 332e 3435 2c20 2023 2074 7269  : 123.45,  # tri
-00031080: 6767 6572 2070 7269 6365 2c20 7265 7175  gger price, requ
-00031090: 6972 6564 2066 6f72 2063 6f6e 6469 7469  ired for conditi
-000310a0: 6f6e 616c 206f 7264 6572 730a 2020 2020  onal orders.    
-000310b0: 2020 2020 2020 2020 2320 2774 7269 6767          # 'trigg
-000310c0: 6572 5f62 7927 3a20 274d 6172 6b50 7269  er_by': 'MarkPri
-000310d0: 6365 272c 2020 2320 496e 6465 7850 7269  ce',  # IndexPri
-000310e0: 6365 2c20 4d61 726b 5072 6963 650a 2020  ce, MarkPrice.  
-000310f0: 2020 2020 2020 2020 2020 2320 2774 7074            # 'tpt
-00031100: 7269 6767 6572 6279 273a 2027 4d61 726b  riggerby': 'Mark
-00031110: 5072 6963 6527 2c20 2023 2049 6e64 6578  Price',  # Index
-00031120: 5072 6963 652c 204d 6172 6b50 7269 6365  Price, MarkPrice
-00031130: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
-00031140: 736c 5472 6967 6765 7242 7927 3a20 274d  slTriggerBy': 'M
-00031150: 6172 6b50 7269 6365 272c 2020 2320 496e  arkPrice',  # In
-00031160: 6465 7850 7269 6365 2c20 4d61 726b 5072  dexPrice, MarkPr
-00031170: 6963 650a 2020 2020 2020 2020 2020 2020  ice.            
-00031180: 2320 276f 7264 6572 4669 6c74 6572 273a  # 'orderFilter':
-00031190: 2027 4f72 6465 7227 206f 7220 2753 746f   'Order' or 'Sto
-000311a0: 704f 7264 6572 270a 2020 2020 2020 2020  pOrder'.        
-000311b0: 2020 2020 2320 276d 6d70 273a 2046 616c      # 'mmp': Fal
-000311c0: 7365 2020 2320 6d61 726b 6574 206d 616b  se  # market mak
-000311d0: 6572 2070 726f 7465 6374 696f 6e0a 2020  er protection.  
-000311e0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-000311f0: 6973 4d61 726b 6574 203d 206c 6f77 6572  isMarket = lower
-00031200: 4361 7365 5479 7065 203d 3d20 276d 6172  CaseType == 'mar
-00031210: 6b65 7427 0a20 2020 2020 2020 2069 734c  ket'.        isL
-00031220: 696d 6974 203d 206c 6f77 6572 4361 7365  imit = lowerCase
-00031230: 5479 7065 203d 3d20 276c 696d 6974 270a  Type == 'limit'.
-00031240: 2020 2020 2020 2020 6966 2069 734c 696d          if isLim
-00031250: 6974 2069 7320 6e6f 7420 4e6f 6e65 3a0a  it is not None:.
-00031260: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00031270: 6573 745b 276f 7264 6572 5072 6963 6527  est['orderPrice'
-00031280: 5d20 3d20 7365 6c66 2e70 7269 6365 5f74  ] = self.price_t
-00031290: 6f5f 7072 6563 6973 696f 6e28 7379 6d62  o_precision(symb
-000312a0: 6f6c 2c20 7072 6963 6529 0a20 2020 2020  ol, price).     
-000312b0: 2020 2065 7863 6861 6e67 6553 7065 6369     exchangeSpeci
-000312c0: 6669 6350 6172 616d 203d 2073 656c 662e  ficParam = self.
-000312d0: 7361 6665 5f73 7472 696e 6728 7061 7261  safe_string(para
-000312e0: 6d73 2c20 2774 696d 655f 696e 5f66 6f72  ms, 'time_in_for
-000312f0: 6365 2729 0a20 2020 2020 2020 2074 696d  ce').        tim
-00031300: 6549 6e46 6f72 6365 203d 2073 656c 662e  eInForce = self.
-00031310: 7361 6665 5f73 7472 696e 675f 6c6f 7765  safe_string_lowe
-00031320: 7228 7061 7261 6d73 2c20 2774 696d 6549  r(params, 'timeI
-00031330: 6e46 6f72 6365 2729 0a20 2020 2020 2020  nForce').       
-00031340: 2070 6f73 744f 6e6c 7920 3d20 4e6f 6e65   postOnly = None
-00031350: 0a20 2020 2020 2020 2070 6f73 744f 6e6c  .        postOnl
-00031360: 792c 2070 6172 616d 7320 3d20 7365 6c66  y, params = self
-00031370: 2e68 616e 646c 655f 706f 7374 5f6f 6e6c  .handle_post_onl
-00031380: 7928 6973 4d61 726b 6574 2c20 6578 6368  y(isMarket, exch
-00031390: 616e 6765 5370 6563 6966 6963 5061 7261  angeSpecificPara
-000313a0: 6d20 3d3d 2027 506f 7374 4f6e 6c79 272c  m == 'PostOnly',
-000313b0: 2070 6172 616d 7329 0a20 2020 2020 2020   params).       
-000313c0: 2069 6620 706f 7374 4f6e 6c79 3a0a 2020   if postOnly:.  
-000313d0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-000313e0: 745b 2774 696d 655f 696e 5f66 6f72 6365  t['time_in_force
-000313f0: 275d 203d 2027 506f 7374 4f6e 6c79 270a  '] = 'PostOnly'.
-00031400: 2020 2020 2020 2020 656c 6966 2074 696d          elif tim
-00031410: 6549 6e46 6f72 6365 203d 3d20 2767 7463  eInForce == 'gtc
-00031420: 273a 0a20 2020 2020 2020 2020 2020 2072  ':.            r
-00031430: 6571 7565 7374 5b27 7469 6d65 5f69 6e5f  equest['time_in_
-00031440: 666f 7263 6527 5d20 3d20 2747 6f6f 6454  force'] = 'GoodT
-00031450: 696c 6c43 616e 6365 6c27 0a20 2020 2020  illCancel'.     
-00031460: 2020 2065 6c69 6620 7469 6d65 496e 466f     elif timeInFo
-00031470: 7263 6520 3d3d 2027 666f 6b27 3a0a 2020  rce == 'fok':.  
-00031480: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-00031490: 745b 2774 696d 655f 696e 5f66 6f72 6365  t['time_in_force
-000314a0: 275d 203d 2027 4669 6c6c 4f72 4b69 6c6c  '] = 'FillOrKill
-000314b0: 270a 2020 2020 2020 2020 656c 6966 2074  '.        elif t
-000314c0: 696d 6549 6e46 6f72 6365 203d 3d20 2769  imeInForce == 'i
-000314d0: 6f63 273a 0a20 2020 2020 2020 2020 2020  oc':.           
-000314e0: 2072 6571 7565 7374 5b27 7469 6d65 5f69   request['time_i
-000314f0: 6e5f 666f 7263 6527 5d20 3d20 2749 6d6d  n_force'] = 'Imm
-00031500: 6564 6961 7465 4f72 4361 6e63 656c 270a  ediateOrCancel'.
-00031510: 2020 2020 2020 2020 6966 206d 6172 6b65          if marke
-00031520: 745b 2773 7761 7027 5d3a 0a20 2020 2020  t['swap']:.     
-00031530: 2020 2020 2020 2074 7269 6767 6572 5072         triggerPr
-00031540: 6963 6520 3d20 7365 6c66 2e73 6166 655f  ice = self.safe_
-00031550: 6e75 6d62 6572 5f32 2870 6172 616d 732c  number_2(params,
-00031560: 2027 7374 6f70 5072 6963 6527 2c20 2774   'stopPrice', 't
-00031570: 7269 6767 6572 5072 6963 6527 290a 2020  riggerPrice').  
-00031580: 2020 2020 2020 2020 2020 7374 6f70 4c6f            stopLo
-00031590: 7373 5472 6967 6765 7250 7269 6365 203d  ssTriggerPrice =
-000315a0: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
-000315b0: 7228 7061 7261 6d73 2c20 2773 746f 704c  r(params, 'stopL
-000315c0: 6f73 7350 7269 6365 272c 2074 7269 6767  ossPrice', trigg
-000315d0: 6572 5072 6963 6529 0a20 2020 2020 2020  erPrice).       
-000315e0: 2020 2020 2074 616b 6550 726f 6669 7454       takeProfitT
-000315f0: 7269 6767 6572 5072 6963 6520 3d20 7365  riggerPrice = se
-00031600: 6c66 2e73 6166 655f 6e75 6d62 6572 2870  lf.safe_number(p
-00031610: 6172 616d 732c 2027 7461 6b65 5072 6f66  arams, 'takeProf
-00031620: 6974 5072 6963 6527 290a 2020 2020 2020  itPrice').      
-00031630: 2020 2020 2020 7374 6f70 4c6f 7373 203d        stopLoss =
-00031640: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
-00031650: 7228 7061 7261 6d73 2c20 2773 746f 704c  r(params, 'stopL
-00031660: 6f73 7327 290a 2020 2020 2020 2020 2020  oss').          
-00031670: 2020 7461 6b65 5072 6f66 6974 203d 2073    takeProfit = s
-00031680: 656c 662e 7361 6665 5f6e 756d 6265 7228  elf.safe_number(
-00031690: 7061 7261 6d73 2c20 2774 616b 6550 726f  params, 'takePro
-000316a0: 6669 7427 290a 2020 2020 2020 2020 2020  fit').          
-000316b0: 2020 6973 5374 6f70 4c6f 7373 5472 6967    isStopLossTrig
-000316c0: 6765 724f 7264 6572 203d 2073 746f 704c  gerOrder = stopL
-000316d0: 6f73 7354 7269 6767 6572 5072 6963 6520  ossTriggerPrice 
-000316e0: 6973 206e 6f74 204e 6f6e 650a 2020 2020  is not None.    
-000316f0: 2020 2020 2020 2020 6973 5461 6b65 5072          isTakePr
-00031700: 6f66 6974 5472 6967 6765 724f 7264 6572  ofitTriggerOrder
-00031710: 203d 2074 616b 6550 726f 6669 7454 7269   = takeProfitTri
-00031720: 6767 6572 5072 6963 6520 6973 206e 6f74  ggerPrice is not
-00031730: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
-00031740: 2020 6973 5374 6f70 4c6f 7373 203d 2073    isStopLoss = s
-00031750: 746f 704c 6f73 7320 6973 206e 6f74 204e  topLoss is not N
-00031760: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
-00031770: 6973 5461 6b65 5072 6f66 6974 203d 2074  isTakeProfit = t
-00031780: 616b 6550 726f 6669 7420 6973 206e 6f74  akeProfit is not
-00031790: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
-000317a0: 2020 6973 5374 6f70 4f72 6465 7220 3d20    isStopOrder = 
-000317b0: 6973 5374 6f70 4c6f 7373 5472 6967 6765  isStopLossTrigge
-000317c0: 724f 7264 6572 206f 7220 6973 5461 6b65  rOrder or isTake
-000317d0: 5072 6f66 6974 5472 6967 6765 724f 7264  ProfitTriggerOrd
-000317e0: 6572 0a20 2020 2020 2020 2020 2020 2069  er.            i
-000317f0: 6620 6973 5374 6f70 4f72 6465 723a 0a20  f isStopOrder:. 
-00031800: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00031810: 6571 7565 7374 5b27 6f72 6465 7246 696c  equest['orderFil
-00031820: 7465 7227 5d20 3d20 2753 746f 704f 7264  ter'] = 'StopOrd
-00031830: 6572 270a 2020 2020 2020 2020 2020 2020  er'.            
-00031840: 2020 2020 7265 7175 6573 745b 2774 7269      request['tri
-00031850: 6767 6572 5f62 7927 5d20 3d20 274c 6173  gger_by'] = 'Las
-00031860: 7450 7269 6365 270a 2020 2020 2020 2020  tPrice'.        
-00031870: 2020 2020 2020 2020 7374 6f70 5078 203d          stopPx =
-00031880: 2073 746f 704c 6f73 7354 7269 6767 6572   stopLossTrigger
-00031890: 5072 6963 6520 6966 2069 7353 746f 704c  Price if isStopL
-000318a0: 6f73 7354 7269 6767 6572 4f72 6465 7220  ossTriggerOrder 
-000318b0: 656c 7365 2074 616b 6550 726f 6669 7454  else takeProfitT
-000318c0: 7269 6767 6572 5072 6963 650a 2020 2020  riggerPrice.    
-000318d0: 2020 2020 2020 2020 2020 2020 7072 6563              prec
-000318e0: 6973 6553 746f 7050 7269 6365 203d 2073  iseStopPrice = s
-000318f0: 656c 662e 7072 6963 655f 746f 5f70 7265  elf.price_to_pre
-00031900: 6369 7369 6f6e 2873 796d 626f 6c2c 2073  cision(symbol, s
-00031910: 746f 7050 7829 0a20 2020 2020 2020 2020  topPx).         
-00031920: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-00031930: 7472 6967 6765 7250 7269 6365 275d 203d  triggerPrice'] =
-00031940: 2070 7265 6369 7365 5374 6f70 5072 6963   preciseStopPric
-00031950: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00031960: 2020 6465 6c74 6120 3d20 7365 6c66 2e6e    delta = self.n
-00031970: 756d 6265 725f 746f 5f73 7472 696e 6728  umber_to_string(
-00031980: 6d61 726b 6574 5b27 7072 6563 6973 696f  market['precisio
-00031990: 6e27 5d5b 2770 7269 6365 275d 290a 2020  n']['price']).  
-000319a0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-000319b0: 7175 6573 745b 2762 6173 6550 7269 6365  quest['basePrice
-000319c0: 275d 203d 2050 7265 6369 7365 2e73 7472  '] = Precise.str
-000319d0: 696e 675f 7375 6228 7072 6563 6973 6553  ing_sub(preciseS
-000319e0: 746f 7050 7269 6365 2c20 6465 6c74 6129  topPrice, delta)
-000319f0: 2069 6620 6973 5374 6f70 4c6f 7373 5472   if isStopLossTr
-00031a00: 6967 6765 724f 7264 6572 2065 6c73 6520  iggerOrder else 
-00031a10: 5072 6563 6973 652e 7374 7269 6e67 5f61  Precise.string_a
-00031a20: 6464 2870 7265 6369 7365 5374 6f70 5072  dd(preciseStopPr
-00031a30: 6963 652c 2064 656c 7461 290a 2020 2020  ice, delta).    
-00031a40: 2020 2020 2020 2020 656c 6966 2069 7353          elif isS
-00031a50: 746f 704c 6f73 7320 6f72 2069 7354 616b  topLoss or isTak
-00031a60: 6550 726f 6669 743a 0a20 2020 2020 2020  eProfit:.       
-00031a70: 2020 2020 2020 2020 2069 6620 6973 5374           if isSt
-00031a80: 6f70 4c6f 7373 3a0a 2020 2020 2020 2020  opLoss:.        
-00031a90: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00031aa0: 6573 745b 2773 746f 704c 6f73 7327 5d20  est['stopLoss'] 
-00031ab0: 3d20 7365 6c66 2e70 7269 6365 5f74 6f5f  = self.price_to_
-00031ac0: 7072 6563 6973 696f 6e28 7379 6d62 6f6c  precision(symbol
-00031ad0: 2c20 7374 6f70 4c6f 7373 290a 2020 2020  , stopLoss).    
-00031ae0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00031af0: 7354 616b 6550 726f 6669 743a 0a20 2020  sTakeProfit:.   
-00031b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031b10: 2072 6571 7565 7374 5b27 7461 6b65 5072   request['takePr
-00031b20: 6f66 6974 275d 203d 2073 656c 662e 7072  ofit'] = self.pr
-00031b30: 6963 655f 746f 5f70 7265 6369 7369 6f6e  ice_to_precision
-00031b40: 2873 796d 626f 6c2c 2074 616b 6550 726f  (symbol, takePro
-00031b50: 6669 7429 0a20 2020 2020 2020 2020 2020  fit).           
-00031b60: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00031b70: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-00031b80: 6f72 6465 7246 696c 7465 7227 5d20 3d20  orderFilter'] = 
-00031b90: 274f 7264 6572 270a 2020 2020 2020 2020  'Order'.        
-00031ba0: 636c 6965 6e74 4f72 6465 7249 6420 3d20  clientOrderId = 
-00031bb0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-00031bc0: 2870 6172 616d 732c 2027 636c 6965 6e74  (params, 'client
-00031bd0: 4f72 6465 7249 6427 290a 2020 2020 2020  OrderId').      
-00031be0: 2020 6966 2063 6c69 656e 744f 7264 6572    if clientOrder
-00031bf0: 4964 2069 7320 6e6f 7420 4e6f 6e65 3a0a  Id is not None:.
-00031c00: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00031c10: 6573 745b 276f 7264 6572 4c69 6e6b 4964  est['orderLinkId
-00031c20: 275d 203d 2063 6c69 656e 744f 7264 6572  '] = clientOrder
-00031c30: 4964 0a20 2020 2020 2020 2065 6c69 6620  Id.        elif 
-00031c40: 6d61 726b 6574 5b27 6f70 7469 6f6e 275d  market['option']
-00031c50: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
-00031c60: 6d61 6e64 6174 6f72 7920 6669 656c 6420  mandatory field 
-00031c70: 666f 7220 6f70 7469 6f6e 730a 2020 2020  for options.    
-00031c80: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-00031c90: 276f 7264 6572 4c69 6e6b 4964 275d 203d  'orderLinkId'] =
-00031ca0: 2073 656c 662e 7575 6964 3136 2829 0a20   self.uuid16(). 
-00031cb0: 2020 2020 2020 2070 6172 616d 7320 3d20         params = 
-00031cc0: 7365 6c66 2e6f 6d69 7428 7061 7261 6d73  self.omit(params
-00031cd0: 2c20 5b27 7374 6f70 5072 6963 6527 2c20  , ['stopPrice', 
-00031ce0: 2774 696d 6549 6e46 6f72 6365 272c 2027  'timeInForce', '
-00031cf0: 7472 6967 6765 7250 7269 6365 272c 2027  triggerPrice', '
-00031d00: 7374 6f70 4c6f 7373 5072 6963 6527 2c20  stopLossPrice', 
-00031d10: 2774 616b 6550 726f 6669 7450 7269 6365  'takeProfitPrice
-00031d20: 272c 2027 706f 7374 4f6e 6c79 272c 2027  ', 'postOnly', '
-00031d30: 636c 6965 6e74 4f72 6465 7249 6427 2c20  clientOrderId', 
-00031d40: 2773 746f 704c 6f73 7327 2c20 2774 616b  'stopLoss', 'tak
-00031d50: 6550 726f 6669 7427 5d29 0a20 2020 2020  eProfit']).     
-00031d60: 2020 206d 6574 686f 6420 3d20 2770 7269     method = 'pri
-00031d70: 7661 7465 506f 7374 4f70 7469 6f6e 5573  vatePostOptionUs
-00031d80: 6463 4f70 656e 6170 6950 7269 7661 7465  dcOpenapiPrivate
-00031d90: 5631 506c 6163 654f 7264 6572 2720 6966  V1PlaceOrder' if
-00031da0: 206d 6172 6b65 745b 276f 7074 696f 6e27   market['option'
-00031db0: 5d20 656c 7365 2027 7072 6976 6174 6550  ] else 'privateP
-00031dc0: 6f73 7450 6572 7065 7475 616c 5573 6463  ostPerpetualUsdc
-00031dd0: 4f70 656e 6170 6950 7269 7661 7465 5631  OpenapiPrivateV1
-00031de0: 506c 6163 654f 7264 6572 270a 2020 2020  PlaceOrder'.    
-00031df0: 2020 2020 7265 7370 6f6e 7365 203d 2067      response = g
-00031e00: 6574 6174 7472 2873 656c 662c 206d 6574  etattr(self, met
-00031e10: 686f 6429 2873 656c 662e 6578 7465 6e64  hod)(self.extend
-00031e20: 2872 6571 7565 7374 2c20 7061 7261 6d73  (request, params
-00031e30: 2929 0a20 2020 2020 2020 2023 0a20 2020  )).        #.   
-00031e40: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
-00031e50: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00031e60: 7265 7443 6f64 6522 3a30 2c0a 2020 2020  retCode":0,.    
-00031e70: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-00031e80: 6574 4d73 6722 3a22 222c 0a20 2020 2020  etMsg":"",.     
-00031e90: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-00031ea0: 7375 6c74 223a 7b0a 2020 2020 2020 2020  sult":{.        
-00031eb0: 2320 2020 2020 2020 2020 2020 2022 6f72  #            "or
-00031ec0: 6465 7249 6422 3a22 3334 3435 3061 3539  derId":"34450a59
-00031ed0: 2d33 3235 652d 3432 3936 2d38 6166 302d  -325e-4296-8af0-
-00031ee0: 3633 6337 6335 3234 6165 3333 222c 0a20  63c7c524ae33",. 
-00031ef0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00031f00: 2020 2020 226f 7264 6572 4c69 6e6b 4964      "orderLinkId
-00031f10: 223a 2222 2c0a 2020 2020 2020 2020 2320  ":"",.        # 
-00031f20: 2020 2020 2020 2020 2020 2022 6d6d 7022             "mmp"
-00031f30: 3a66 616c 7365 2c0a 2020 2020 2020 2020  :false,.        
-00031f40: 2320 2020 2020 2020 2020 2020 2022 7379  #            "sy
-00031f50: 6d62 6f6c 223a 2242 5443 5045 5250 222c  mbol":"BTCPERP",
-00031f60: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00031f70: 2020 2020 2020 226f 7264 6572 5479 7065        "orderType
-00031f80: 223a 224c 696d 6974 222c 0a20 2020 2020  ":"Limit",.     
-00031f90: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00031fa0: 2273 6964 6522 3a22 4275 7922 2c0a 2020  "side":"Buy",.  
-00031fb0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00031fc0: 2020 2022 6f72 6465 7251 7479 223a 2230     "orderQty":"0
-00031fd0: 2e30 3031 3030 3030 3022 2c0a 2020 2020  .00100000",.    
-00031fe0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00031ff0: 2022 6f72 6465 7250 7269 6365 223a 2232   "orderPrice":"2
-00032000: 3030 3030 2e30 3022 2c0a 2020 2020 2020  0000.00",.      
-00032010: 2020 2320 2020 2020 2020 2020 2020 2022    #            "
-00032020: 6976 223a 2230 222c 0a20 2020 2020 2020  iv":"0",.       
-00032030: 2023 2020 2020 2020 2020 2020 2020 2274   #            "t
-00032040: 696d 6549 6e46 6f72 6365 223a 2247 6f6f  imeInForce":"Goo
-00032050: 6454 696c 6c43 616e 6365 6c22 2c0a 2020  dTillCancel",.  
-00032060: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00032070: 2020 2022 6f72 6465 7253 7461 7475 7322     "orderStatus"
-00032080: 3a22 4372 6561 7465 6422 2c0a 2020 2020  :"Created",.    
-00032090: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000320a0: 2022 6372 6561 7465 6441 7422 3a22 3136   "createdAt":"16
-000320b0: 3532 3236 3137 3436 3030 3738 3733 222c  52261746007873",
-000320c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000320d0: 2020 2020 2020 2262 6173 6550 7269 6365        "basePrice
-000320e0: 223a 2230 2e30 3022 2c0a 2020 2020 2020  ":"0.00",.      
-000320f0: 2020 2320 2020 2020 2020 2020 2020 2022    #            "
-00032100: 7472 6967 6765 7250 7269 6365 223a 2230  triggerPrice":"0
-00032110: 2e30 3022 2c0a 2020 2020 2020 2020 2320  .00",.        # 
-00032120: 2020 2020 2020 2020 2020 2022 7461 6b65             "take
-00032130: 5072 6f66 6974 223a 2230 2e30 3022 2c0a  Profit":"0.00",.
-00032140: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00032150: 2020 2020 2022 7374 6f70 4c6f 7373 223a       "stopLoss":
-00032160: 2230 2e30 3022 2c0a 2020 2020 2020 2020  "0.00",.        
-00032170: 2320 2020 2020 2020 2020 2020 2022 736c  #            "sl
-00032180: 5472 6967 6765 7242 7922 3a22 554e 4b4e  TriggerBy":"UNKN
-00032190: 4f57 4e22 2c0a 2020 2020 2020 2020 2320  OWN",.        # 
-000321a0: 2020 2020 2020 2020 2020 2022 7470 5472             "tpTr
-000321b0: 6967 6765 7242 7922 3a22 554e 4b4e 4f57  iggerBy":"UNKNOW
-000321c0: 4e22 0a20 2020 2020 2020 2023 2020 2020  N".        #    
-000321d0: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
-000321e0: 2020 2020 206f 7264 6572 203d 2073 656c       order = sel
-000321f0: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
-00032200: 706f 6e73 652c 2027 7265 7375 6c74 272c  ponse, 'result',
-00032210: 207b 7d29 0a20 2020 2020 2020 2072 6574   {}).        ret
-00032220: 7572 6e20 7365 6c66 2e70 6172 7365 5f6f  urn self.parse_o
-00032230: 7264 6572 286f 7264 6572 290a 0a20 2020  rder(order)..   
-00032240: 2064 6566 2065 6469 745f 756e 6966 6965   def edit_unifie
-00032250: 645f 6163 636f 756e 745f 6f72 6465 7228  d_account_order(
-00032260: 7365 6c66 2c20 6964 3a20 7374 722c 2073  self, id: str, s
-00032270: 796d 626f 6c2c 2074 7970 652c 2073 6964  ymbol, type, sid
-00032280: 652c 2061 6d6f 756e 743d 4e6f 6e65 2c20  e, amount=None, 
-00032290: 7072 6963 653d 4e6f 6e65 2c20 7061 7261  price=None, para
-000322a0: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
-000322b0: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
-000322c0: 7328 290a 2020 2020 2020 2020 6d61 726b  s().        mark
-000322d0: 6574 203d 2073 656c 662e 6d61 726b 6574  et = self.market
-000322e0: 2873 796d 626f 6c29 0a20 2020 2020 2020  (symbol).       
-000322f0: 2069 6620 6e6f 7420 6d61 726b 6574 5b27   if not market['
-00032300: 6c69 6e65 6172 275d 2061 6e64 206e 6f74  linear'] and not
-00032310: 206d 6172 6b65 745b 276f 7074 696f 6e27   market['option'
-00032320: 5d3a 0a20 2020 2020 2020 2020 2020 2072  ]:.            r
-00032330: 6169 7365 204e 6f74 5375 7070 6f72 7465  aise NotSupporte
-00032340: 6428 7365 6c66 2e69 6420 2b20 2720 6564  d(self.id + ' ed
-00032350: 6974 4f72 6465 7220 646f 6573 206e 6f74  itOrder does not
-00032360: 2061 6c6c 6f77 2069 6e76 6572 7365 206d   allow inverse m
-00032370: 6172 6b65 7420 6f72 6465 7273 2066 6f72  arket orders for
-00032380: 2027 202b 2073 796d 626f 6c20 2b20 2720   ' + symbol + ' 
-00032390: 6d61 726b 6574 7327 290a 2020 2020 2020  markets').      
-000323a0: 2020 7265 7175 6573 7420 3d20 7b0a 2020    request = {.  
-000323b0: 2020 2020 2020 2020 2020 2773 796d 626f            'symbo
-000323c0: 6c27 3a20 6d61 726b 6574 5b27 6964 275d  l': market['id']
-000323d0: 2c0a 2020 2020 2020 2020 2020 2020 276f  ,.            'o
-000323e0: 7264 6572 4964 273a 2069 642c 0a20 2020  rderId': id,.   
-000323f0: 2020 2020 2020 2020 2027 7174 7927 3a20           'qty': 
-00032400: 7365 6c66 2e61 6d6f 756e 745f 746f 5f70  self.amount_to_p
-00032410: 7265 6369 7369 6f6e 2873 796d 626f 6c2c  recision(symbol,
-00032420: 2061 6d6f 756e 7429 2c0a 2020 2020 2020   amount),.      
-00032430: 2020 2020 2020 2320 276f 7264 6572 4c69        # 'orderLi
-00032440: 6e6b 4964 273a 2027 7374 7269 6e67 272c  nkId': 'string',
-00032450: 2020 2320 756e 6971 7565 2063 6c69 656e    # unique clien
-00032460: 7420 6f72 6465 7220 6964 2c20 6d61 7820  t order id, max 
-00032470: 3336 2063 6861 7261 6374 6572 730a 2020  36 characters.  
-00032480: 2020 2020 2020 2020 2020 2320 2774 616b            # 'tak
-00032490: 6550 726f 6669 7427 3a20 3132 332e 3435  eProfit': 123.45
-000324a0: 2c20 2023 2074 616b 6520 7072 6f66 6974  ,  # take profit
-000324b0: 2070 7269 6365 2c20 6f6e 6c79 2074 616b   price, only tak
-000324c0: 6520 6566 6665 6374 2075 706f 6e20 6f70  e effect upon op
-000324d0: 656e 696e 6720 7468 6520 706f 7369 7469  ening the positi
-000324e0: 6f6e 0a20 2020 2020 2020 2020 2020 2023  on.            #
-000324f0: 2027 7374 6f70 4c6f 7373 273a 2031 3233   'stopLoss': 123
-00032500: 2e34 352c 2020 2320 7374 6f70 206c 6f73  .45,  # stop los
-00032510: 7320 7072 6963 652c 206f 6e6c 7920 7461  s price, only ta
-00032520: 6b65 2065 6666 6563 7420 7570 6f6e 206f  ke effect upon o
-00032530: 7065 6e69 6e67 2074 6865 2070 6f73 6974  pening the posit
-00032540: 696f 6e0a 2020 2020 2020 2020 2020 2020  ion.            
-00032550: 2320 2774 7269 6767 6572 5072 6963 6527  # 'triggerPrice'
-00032560: 3a20 3132 332e 3435 2c20 2023 2074 7269  : 123.45,  # tri
-00032570: 6767 6572 2070 7269 6365 2c20 7265 7175  gger price, requ
-00032580: 6972 6564 2066 6f72 2063 6f6e 6469 7469  ired for conditi
-00032590: 6f6e 616c 206f 7264 6572 730a 2020 2020  onal orders.    
-000325a0: 2020 2020 2020 2020 2320 2774 7269 6767          # 'trigg
-000325b0: 6572 4279 273a 2027 4d61 726b 5072 6963  erBy': 'MarkPric
-000325c0: 6527 2c20 2023 2049 6e64 6578 5072 6963  e',  # IndexPric
-000325d0: 652c 204d 6172 6b50 7269 6365 2c20 4c61  e, MarkPrice, La
-000325e0: 7374 5072 6963 650a 2020 2020 2020 2020  stPrice.        
-000325f0: 2020 2020 2320 2774 7054 7269 6767 6572      # 'tpTrigger
-00032600: 6279 273a 2027 4d61 726b 5072 6963 6527  by': 'MarkPrice'
-00032610: 2c20 2023 2049 6e64 6578 5072 6963 652c  ,  # IndexPrice,
-00032620: 204d 6172 6b50 7269 6365 2c20 4c61 7374   MarkPrice, Last
-00032630: 5072 6963 650a 2020 2020 2020 2020 2020  Price.          
-00032640: 2020 2320 2773 6c54 7269 6767 6572 4279    # 'slTriggerBy
-00032650: 273a 2027 4d61 726b 5072 6963 6527 2c20  ': 'MarkPrice', 
-00032660: 2023 2049 6e64 6578 5072 6963 652c 204d   # IndexPrice, M
-00032670: 6172 6b50 7269 6365 2c20 4c61 7374 5072  arkPrice, LastPr
-00032680: 6963 650a 2020 2020 2020 2020 2020 2020  ice.            
-00032690: 2320 5661 6c69 6420 666f 7220 6f70 7469  # Valid for opti
-000326a0: 6f6e 206f 6e6c 792e 0a20 2020 2020 2020  on only..       
-000326b0: 2020 2020 2023 2027 6f72 6465 7249 7627       # 'orderIv'
-000326c0: 3a20 2730 272c 2020 2320 496d 706c 6965  : '0',  # Implie
-000326d0: 6420 766f 6c61 7469 6c69 7479 3b20 7061  d volatility; pa
-000326e0: 7261 6d65 7465 7273 2061 7265 2070 6173  rameters are pas
-000326f0: 7365 6420 6163 636f 7264 696e 6720 746f  sed according to
-00032700: 2074 6865 2072 6561 6c20 7661 6c75 653b   the real value;
-00032710: 2066 6f72 2065 7861 6d70 6c65 2c20 666f   for example, fo
-00032720: 7220 3130 252c 2030 2e31 2069 7320 7061  r 10%, 0.1 is pa
-00032730: 7373 6564 0a20 2020 2020 2020 207d 0a20  ssed.        }. 
-00032740: 2020 2020 2020 2069 6620 6d61 726b 6574         if market
-00032750: 5b27 6c69 6e65 6172 275d 3a0a 2020 2020  ['linear']:.    
-00032760: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-00032770: 2763 6174 6567 6f72 7927 5d20 3d20 276c  'category'] = 'l
-00032780: 696e 6561 7227 0a20 2020 2020 2020 2065  inear'.        e
-00032790: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-000327a0: 2072 6571 7565 7374 5b27 6361 7465 676f   request['catego
-000327b0: 7279 275d 203d 2027 6f70 7469 6f6e 270a  ry'] = 'option'.
-000327c0: 2020 2020 2020 2020 6966 2070 7269 6365          if price
-000327d0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-000327e0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-000327f0: 745b 2770 7269 6365 275d 203d 2073 656c  t['price'] = sel
-00032800: 662e 7072 6963 655f 746f 5f70 7265 6369  f.price_to_preci
-00032810: 7369 6f6e 2873 796d 626f 6c2c 2070 7269  sion(symbol, pri
-00032820: 6365 290a 2020 2020 2020 2020 7472 6967  ce).        trig
-00032830: 6765 7250 7269 6365 203d 2073 656c 662e  gerPrice = self.
-00032840: 7361 6665 5f6e 756d 6265 725f 3228 7061  safe_number_2(pa
-00032850: 7261 6d73 2c20 2774 7269 6767 6572 5072  rams, 'triggerPr
-00032860: 6963 6527 2c20 2773 746f 7050 7269 6365  ice', 'stopPrice
-00032870: 2729 0a20 2020 2020 2020 2073 746f 704c  ').        stopL
-00032880: 6f73 7354 7269 6767 6572 5072 6963 6520  ossTriggerPrice 
-00032890: 3d20 7365 6c66 2e73 6166 655f 6e75 6d62  = self.safe_numb
-000328a0: 6572 2870 6172 616d 732c 2027 7374 6f70  er(params, 'stop
-000328b0: 4c6f 7373 5072 6963 6527 290a 2020 2020  LossPrice').    
-000328c0: 2020 2020 7461 6b65 5072 6f66 6974 5472      takeProfitTr
-000328d0: 6967 6765 7250 7269 6365 203d 2073 656c  iggerPrice = sel
-000328e0: 662e 7361 6665 5f6e 756d 6265 7228 7061  f.safe_number(pa
-000328f0: 7261 6d73 2c20 2774 616b 6550 726f 6669  rams, 'takeProfi
-00032900: 7450 7269 6365 2729 0a20 2020 2020 2020  tPrice').       
-00032910: 2073 746f 704c 6f73 7320 3d20 7365 6c66   stopLoss = self
-00032920: 2e73 6166 655f 6e75 6d62 6572 2870 6172  .safe_number(par
-00032930: 616d 732c 2027 7374 6f70 4c6f 7373 2729  ams, 'stopLoss')
-00032940: 0a20 2020 2020 2020 2074 616b 6550 726f  .        takePro
-00032950: 6669 7420 3d20 7365 6c66 2e73 6166 655f  fit = self.safe_
-00032960: 6e75 6d62 6572 2870 6172 616d 732c 2027  number(params, '
-00032970: 7461 6b65 5072 6f66 6974 2729 0a20 2020  takeProfit').   
-00032980: 2020 2020 2069 7353 746f 704c 6f73 7354       isStopLossT
-00032990: 7269 6767 6572 4f72 6465 7220 3d20 7374  riggerOrder = st
-000329a0: 6f70 4c6f 7373 5472 6967 6765 7250 7269  opLossTriggerPri
-000329b0: 6365 2069 7320 6e6f 7420 4e6f 6e65 0a20  ce is not None. 
-000329c0: 2020 2020 2020 2069 7354 616b 6550 726f         isTakePro
-000329d0: 6669 7454 7269 6767 6572 4f72 6465 7220  fitTriggerOrder 
-000329e0: 3d20 7461 6b65 5072 6f66 6974 5472 6967  = takeProfitTrig
-000329f0: 6765 7250 7269 6365 2069 7320 6e6f 7420  gerPrice is not 
-00032a00: 4e6f 6e65 0a20 2020 2020 2020 2069 7353  None.        isS
-00032a10: 746f 704c 6f73 7320 3d20 7374 6f70 4c6f  topLoss = stopLo
-00032a20: 7373 2069 7320 6e6f 7420 4e6f 6e65 0a20  ss is not None. 
-00032a30: 2020 2020 2020 2069 7354 616b 6550 726f         isTakePro
-00032a40: 6669 7420 3d20 7461 6b65 5072 6f66 6974  fit = takeProfit
-00032a50: 2069 7320 6e6f 7420 4e6f 6e65 0a20 2020   is not None.   
-00032a60: 2020 2020 2069 6620 6973 5374 6f70 4c6f       if isStopLo
-00032a70: 7373 5472 6967 6765 724f 7264 6572 206f  ssTriggerOrder o
-00032a80: 7220 6973 5461 6b65 5072 6f66 6974 5472  r isTakeProfitTr
-00032a90: 6967 6765 724f 7264 6572 3a0a 2020 2020  iggerOrder:.    
-00032aa0: 2020 2020 2020 2020 7472 6967 6765 7250          triggerP
-00032ab0: 7269 6365 203d 2073 746f 704c 6f73 7354  rice = stopLossT
-00032ac0: 7269 6767 6572 5072 6963 6520 6966 2069  riggerPrice if i
-00032ad0: 7353 746f 704c 6f73 7354 7269 6767 6572  sStopLossTrigger
-00032ae0: 4f72 6465 7220 656c 7365 2074 616b 6550  Order else takeP
-00032af0: 726f 6669 7454 7269 6767 6572 5072 6963  rofitTriggerPric
-00032b00: 650a 2020 2020 2020 2020 6966 2074 7269  e.        if tri
-00032b10: 6767 6572 5072 6963 6520 6973 206e 6f74  ggerPrice is not
-00032b20: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00032b30: 2020 2072 6571 7565 7374 5b27 7472 6967     request['trig
-00032b40: 6765 7250 7269 6365 275d 203d 2073 656c  gerPrice'] = sel
-00032b50: 662e 7072 6963 655f 746f 5f70 7265 6369  f.price_to_preci
-00032b60: 7369 6f6e 2873 796d 626f 6c2c 2074 7269  sion(symbol, tri
-00032b70: 6767 6572 5072 6963 6529 0a20 2020 2020  ggerPrice).     
-00032b80: 2020 2069 6620 6973 5374 6f70 4c6f 7373     if isStopLoss
-00032b90: 206f 7220 6973 5461 6b65 5072 6f66 6974   or isTakeProfit
-00032ba0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-00032bb0: 2069 7353 746f 704c 6f73 733a 0a20 2020   isStopLoss:.   
-00032bc0: 2020 2020 2020 2020 2020 2020 2072 6571               req
-00032bd0: 7565 7374 5b27 7374 6f70 4c6f 7373 275d  uest['stopLoss']
-00032be0: 203d 2073 656c 662e 7072 6963 655f 746f   = self.price_to
-00032bf0: 5f70 7265 6369 7369 6f6e 2873 796d 626f  _precision(symbo
-00032c00: 6c2c 2073 746f 704c 6f73 7329 0a20 2020  l, stopLoss).   
-00032c10: 2020 2020 2020 2020 2069 6620 6973 5461           if isTa
-00032c20: 6b65 5072 6f66 6974 3a0a 2020 2020 2020  keProfit:.      
-00032c30: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-00032c40: 745b 2774 616b 6550 726f 6669 7427 5d20  t['takeProfit'] 
-00032c50: 3d20 7365 6c66 2e70 7269 6365 5f74 6f5f  = self.price_to_
-00032c60: 7072 6563 6973 696f 6e28 7379 6d62 6f6c  precision(symbol
-00032c70: 2c20 7461 6b65 5072 6f66 6974 290a 2020  , takeProfit).  
-00032c80: 2020 2020 2020 636c 6965 6e74 4f72 6465        clientOrde
-00032c90: 7249 6420 3d20 7365 6c66 2e73 6166 655f  rId = self.safe_
-00032ca0: 7374 7269 6e67 2870 6172 616d 732c 2027  string(params, '
-00032cb0: 636c 6965 6e74 4f72 6465 7249 6427 290a  clientOrderId').
-00032cc0: 2020 2020 2020 2020 6966 2063 6c69 656e          if clien
-00032cd0: 744f 7264 6572 4964 2069 7320 6e6f 7420  tOrderId is not 
-00032ce0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-00032cf0: 2020 7265 7175 6573 745b 276f 7264 6572    request['order
-00032d00: 4c69 6e6b 4964 275d 203d 2063 6c69 656e  LinkId'] = clien
-00032d10: 744f 7264 6572 4964 0a20 2020 2020 2020  tOrderId.       
-00032d20: 2070 6172 616d 7320 3d20 7365 6c66 2e6f   params = self.o
-00032d30: 6d69 7428 7061 7261 6d73 2c20 5b27 7374  mit(params, ['st
-00032d40: 6f70 5072 6963 6527 2c20 2773 746f 704c  opPrice', 'stopL
-00032d50: 6f73 7350 7269 6365 272c 2027 7461 6b65  ossPrice', 'take
-00032d60: 5072 6f66 6974 5072 6963 6527 2c20 2774  ProfitPrice', 't
-00032d70: 7269 6767 6572 5072 6963 6527 2c20 2763  riggerPrice', 'c
-00032d80: 6c69 656e 744f 7264 6572 4964 272c 2027  lientOrderId', '
-00032d90: 7374 6f70 4c6f 7373 272c 2027 7461 6b65  stopLoss', 'take
-00032da0: 5072 6f66 6974 275d 290a 2020 2020 2020  Profit']).      
-00032db0: 2020 7265 7370 6f6e 7365 203d 2073 656c    response = sel
-00032dc0: 662e 7072 6976 6174 6550 6f73 7456 354f  f.privatePostV5O
-00032dd0: 7264 6572 416d 656e 6428 7365 6c66 2e65  rderAmend(self.e
-00032de0: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
-00032df0: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
-00032e00: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
-00032e10: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-00032e20: 2020 2020 2272 6574 436f 6465 223a 2030      "retCode": 0
-00032e30: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00032e40: 2020 2020 2272 6574 4d73 6722 3a20 224f      "retMsg": "O
-00032e50: 4b22 2c0a 2020 2020 2020 2020 2320 2020  K",.        #   
-00032e60: 2020 2020 2020 2272 6573 756c 7422 3a20        "result": 
-00032e70: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-00032e80: 2020 2020 2020 2020 226f 7264 6572 4964          "orderId
-00032e90: 223a 2022 6336 6630 3535 6439 2d37 6632  ": "c6f055d9-7f2
-00032ea0: 312d 3430 3739 2d39 3133 642d 6536 3532  1-4079-913d-e652
-00032eb0: 3361 3963 6666 6661 222c 0a20 2020 2020  3a9cfffa",.     
-00032ec0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00032ed0: 2022 6f72 6465 724c 696e 6b49 6422 3a20   "orderLinkId": 
-00032ee0: 226c 696e 6561 722d 3030 3422 0a20 2020  "linear-004".   
-00032ef0: 2020 2020 2023 2020 2020 2020 2020 207d       #         }
-00032f00: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00032f10: 2020 2020 2272 6574 4578 7449 6e66 6f22      "retExtInfo"
-00032f20: 3a20 7b7d 2c0a 2020 2020 2020 2020 2320  : {},.        # 
-00032f30: 2020 2020 2020 2020 2274 696d 6522 3a20          "time": 
-00032f40: 3136 3732 3231 3730 3933 3436 310a 2020  1672217093461.  
-00032f50: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
-00032f60: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00032f70: 7265 7375 6c74 203d 2073 656c 662e 7361  result = self.sa
-00032f80: 6665 5f76 616c 7565 2872 6573 706f 6e73  fe_value(respons
-00032f90: 652c 2027 7265 7375 6c74 272c 207b 7d29  e, 'result', {})
-00032fa0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00032fb0: 7b0a 2020 2020 2020 2020 2020 2020 2769  {.            'i
-00032fc0: 6e66 6f27 3a20 7265 7370 6f6e 7365 2c0a  nfo': response,.
-00032fd0: 2020 2020 2020 2020 2020 2020 2769 6427              'id'
-00032fe0: 3a20 7365 6c66 2e73 6166 655f 7374 7269  : self.safe_stri
-00032ff0: 6e67 2872 6573 756c 742c 2027 6f72 6465  ng(result, 'orde
-00033000: 7249 6427 292c 0a20 2020 2020 2020 207d  rId'),.        }
-00033010: 0a0a 2020 2020 6465 6620 6564 6974 5f75  ..    def edit_u
-00033020: 6e69 6669 6564 5f6d 6172 6769 6e5f 6f72  nified_margin_or
-00033030: 6465 7228 7365 6c66 2c20 6964 3a20 7374  der(self, id: st
-00033040: 722c 2073 796d 626f 6c2c 2074 7970 652c  r, symbol, type,
-00033050: 2073 6964 652c 2061 6d6f 756e 742c 2070   side, amount, p
-00033060: 7269 6365 3d4e 6f6e 652c 2070 6172 616d  rice=None, param
-00033070: 733d 7b7d 293a 0a20 2020 2020 2020 2073  s={}):.        s
-00033080: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
-00033090: 2829 0a20 2020 2020 2020 206d 6172 6b65  ().        marke
-000330a0: 7420 3d20 7365 6c66 2e6d 6172 6b65 7428  t = self.market(
-000330b0: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
-000330c0: 6966 206e 6f74 206d 6172 6b65 745b 276c  if not market['l
-000330d0: 696e 6561 7227 5d20 616e 6420 6e6f 7420  inear'] and not 
-000330e0: 6d61 726b 6574 5b27 6f70 7469 6f6e 275d  market['option']
-000330f0: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-00033100: 6973 6520 4e6f 7453 7570 706f 7274 6564  ise NotSupported
-00033110: 2873 656c 662e 6964 202b 2027 2065 6469  (self.id + ' edi
-00033120: 744f 7264 6572 2064 6f65 7320 6e6f 7420  tOrder does not 
-00033130: 616c 6c6f 7720 696e 7665 7273 6520 6d61  allow inverse ma
-00033140: 726b 6574 206f 7264 6572 7320 666f 7220  rket orders for 
-00033150: 2720 2b20 7379 6d62 6f6c 202b 2027 206d  ' + symbol + ' m
-00033160: 6172 6b65 7473 2729 0a20 2020 2020 2020  arkets').       
-00033170: 206c 6f77 6572 4361 7365 5479 7065 203d   lowerCaseType =
-00033180: 2074 7970 652e 6c6f 7765 7228 290a 2020   type.lower().  
-00033190: 2020 2020 2020 6966 2028 7072 6963 6520        if (price 
-000331a0: 6973 204e 6f6e 6529 2061 6e64 2028 6c6f  is None) and (lo
-000331b0: 7765 7243 6173 6554 7970 6520 3d3d 2027  werCaseType == '
-000331c0: 6c69 6d69 7427 293a 0a20 2020 2020 2020  limit'):.       
-000331d0: 2020 2020 2072 6169 7365 2041 7267 756d       raise Argum
-000331e0: 656e 7473 5265 7175 6972 6564 2873 656c  entsRequired(sel
-000331f0: 662e 6964 202b 2027 2065 6469 744f 7264  f.id + ' editOrd
-00033200: 6572 2072 6571 7569 7265 7320 6120 7072  er requires a pr
-00033210: 6963 6520 6172 6775 6d65 6e74 2066 6f72  ice argument for
-00033220: 206c 696d 6974 206f 7264 6572 7327 290a   limit orders').
-00033230: 2020 2020 2020 2020 7265 7175 6573 7420          request 
-00033240: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-00033250: 276f 7264 6572 4964 273a 2069 642c 0a20  'orderId': id,. 
-00033260: 2020 2020 2020 2020 2020 2027 7379 6d62             'symb
-00033270: 6f6c 273a 206d 6172 6b65 745b 2769 6427  ol': market['id'
-00033280: 5d2c 0a20 2020 2020 2020 2020 2020 2027  ],.            '
-00033290: 7369 6465 273a 2073 656c 662e 6361 7069  side': self.capi
-000332a0: 7461 6c69 7a65 2873 6964 6529 2c0a 2020  talize(side),.  
-000332b0: 2020 2020 2020 2020 2020 276f 7264 6572            'order
-000332c0: 5479 7065 273a 2073 656c 662e 6361 7069  Type': self.capi
-000332d0: 7461 6c69 7a65 286c 6f77 6572 4361 7365  talize(lowerCase
-000332e0: 5479 7065 292c 2020 2320 6c69 6d69 7420  Type),  # limit 
-000332f0: 6f72 206d 6172 6b65 740a 2020 2020 2020  or market.      
-00033300: 2020 2020 2020 2774 696d 6549 6e46 6f72        'timeInFor
-00033310: 6365 273a 2027 476f 6f64 5469 6c6c 4361  ce': 'GoodTillCa
-00033320: 6e63 656c 272c 2020 2320 496d 6d65 6469  ncel',  # Immedi
-00033330: 6174 654f 7243 616e 6365 6c2c 2046 696c  ateOrCancel, Fil
-00033340: 6c4f 724b 696c 6c2c 2050 6f73 744f 6e6c  lOrKill, PostOnl
-00033350: 790a 2020 2020 2020 2020 2020 2020 2771  y.            'q
-00033360: 7479 273a 2073 656c 662e 616d 6f75 6e74  ty': self.amount
-00033370: 5f74 6f5f 7072 6563 6973 696f 6e28 7379  _to_precision(sy
-00033380: 6d62 6f6c 2c20 616d 6f75 6e74 292c 0a20  mbol, amount),. 
-00033390: 2020 2020 2020 2020 2020 2023 2027 7461             # 'ta
-000333a0: 6b65 5072 6f66 6974 273a 2031 3233 2e34  keProfit': 123.4
-000333b0: 352c 2020 2320 7461 6b65 2070 726f 6669  5,  # take profi
-000333c0: 7420 7072 6963 652c 206f 6e6c 7920 7461  t price, only ta
-000333d0: 6b65 2065 6666 6563 7420 7570 6f6e 206f  ke effect upon o
-000333e0: 7065 6e69 6e67 2074 6865 2070 6f73 6974  pening the posit
-000333f0: 696f 6e0a 2020 2020 2020 2020 2020 2020  ion.            
-00033400: 2320 2773 746f 704c 6f73 7327 3a20 3132  # 'stopLoss': 12
-00033410: 332e 3435 2c20 2023 2073 746f 7020 6c6f  3.45,  # stop lo
-00033420: 7373 2070 7269 6365 2c20 6f6e 6c79 2074  ss price, only t
-00033430: 616b 6520 6566 6665 6374 2075 706f 6e20  ake effect upon 
-00033440: 6f70 656e 696e 6720 7468 6520 706f 7369  opening the posi
-00033450: 7469 6f6e 0a20 2020 2020 2020 2020 2020  tion.           
-00033460: 2023 2027 6f72 6465 724c 696e 6b49 6427   # 'orderLinkId'
-00033470: 3a20 2773 7472 696e 6727 2c20 2023 2075  : 'string',  # u
-00033480: 6e69 7175 6520 636c 6965 6e74 206f 7264  nique client ord
-00033490: 6572 2069 642c 206d 6178 2033 3620 6368  er id, max 36 ch
-000334a0: 6172 6163 7465 7273 0a20 2020 2020 2020  aracters.       
-000334b0: 2020 2020 2023 2027 7472 6967 6765 7250       # 'triggerP
-000334c0: 7269 6365 273a 2031 3233 2e34 352c 2020  rice': 123.45,  
-000334d0: 2320 7472 6967 6765 7220 7072 6963 652c  # trigger price,
-000334e0: 2072 6571 7569 7265 6420 666f 7220 636f   required for co
-000334f0: 6e64 6974 696f 6e61 6c20 6f72 6465 7273  nditional orders
-00033500: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
-00033510: 7472 6967 6765 7242 7927 3a20 274d 6172  triggerBy': 'Mar
-00033520: 6b50 7269 6365 272c 2020 2320 496e 6465  kPrice',  # Inde
-00033530: 7850 7269 6365 2c20 4d61 726b 5072 6963  xPrice, MarkPric
-00033540: 650a 2020 2020 2020 2020 2020 2020 2320  e.            # 
-00033550: 2774 7074 7269 6767 6572 6279 273a 2027  'tptriggerby': '
-00033560: 4d61 726b 5072 6963 6527 2c20 2023 2049  MarkPrice',  # I
-00033570: 6e64 6578 5072 6963 652c 204d 6172 6b50  ndexPrice, MarkP
-00033580: 7269 6365 0a20 2020 2020 2020 2020 2020  rice.           
-00033590: 2023 2027 736c 5472 6967 6765 7242 7927   # 'slTriggerBy'
-000335a0: 3a20 274d 6172 6b50 7269 6365 272c 2020  : 'MarkPrice',  
-000335b0: 2320 496e 6465 7850 7269 6365 2c20 4d61  # IndexPrice, Ma
-000335c0: 726b 5072 6963 650a 2020 2020 2020 2020  rkPrice.        
-000335d0: 2020 2020 2320 2769 7627 3a20 2730 272c      # 'iv': '0',
-000335e0: 2020 2320 496d 706c 6965 6420 766f 6c61    # Implied vola
-000335f0: 7469 6c69 7479 2c20 666f 7220 6f70 7469  tility, for opti
-00033600: 6f6e 7320 6f6e 6c79 3b20 7061 7261 6d65  ons only; parame
-00033610: 7465 7273 2061 7265 2070 6173 7365 6420  ters are passed 
-00033620: 6163 636f 7264 696e 6720 746f 2074 6865  according to the
-00033630: 2072 6561 6c20 7661 6c75 653b 2066 6f72   real value; for
-00033640: 2065 7861 6d70 6c65 2c20 666f 7220 3130   example, for 10
-00033650: 252c 2030 2e31 2069 7320 7061 7373 6564  %, 0.1 is passed
-00033660: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
-00033670: 2020 2069 6620 6d61 726b 6574 5b27 6c69     if market['li
-00033680: 6e65 6172 275d 3a0a 2020 2020 2020 2020  near']:.        
-00033690: 2020 2020 7265 7175 6573 745b 2763 6174      request['cat
-000336a0: 6567 6f72 7927 5d20 3d20 276c 696e 6561  egory'] = 'linea
-000336b0: 7227 0a20 2020 2020 2020 2065 6c73 653a  r'.        else:
-000336c0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-000336d0: 7565 7374 5b27 6361 7465 676f 7279 275d  uest['category']
-000336e0: 203d 2027 6f70 7469 6f6e 270a 2020 2020   = 'option'.    
-000336f0: 2020 2020 6973 4d61 726b 6574 203d 206c      isMarket = l
-00033700: 6f77 6572 4361 7365 5479 7065 203d 3d20  owerCaseType == 
-00033710: 276d 6172 6b65 7427 0a20 2020 2020 2020  'market'.       
-00033720: 2069 734c 696d 6974 203d 206c 6f77 6572   isLimit = lower
-00033730: 4361 7365 5479 7065 203d 3d20 276c 696d  CaseType == 'lim
-00033740: 6974 270a 2020 2020 2020 2020 6966 2069  it'.        if i
-00033750: 734c 696d 6974 3a0a 2020 2020 2020 2020  sLimit:.        
-00033760: 2020 2020 7265 7175 6573 745b 2770 7269      request['pri
-00033770: 6365 275d 203d 2073 656c 662e 7072 6963  ce'] = self.pric
-00033780: 655f 746f 5f70 7265 6369 7369 6f6e 2873  e_to_precision(s
-00033790: 796d 626f 6c2c 2070 7269 6365 290a 2020  ymbol, price).  
-000337a0: 2020 2020 2020 6578 6368 616e 6765 5370        exchangeSp
-000337b0: 6563 6966 6963 5061 7261 6d20 3d20 7365  ecificParam = se
-000337c0: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
-000337d0: 6172 616d 732c 2027 7469 6d65 5f69 6e5f  arams, 'time_in_
-000337e0: 666f 7263 6527 290a 2020 2020 2020 2020  force').        
-000337f0: 7469 6d65 496e 466f 7263 6520 3d20 7365  timeInForce = se
-00033800: 6c66 2e73 6166 655f 7374 7269 6e67 5f6c  lf.safe_string_l
-00033810: 6f77 6572 2870 6172 616d 732c 2027 7469  ower(params, 'ti
-00033820: 6d65 496e 466f 7263 6527 290a 2020 2020  meInForce').    
-00033830: 2020 2020 706f 7374 4f6e 6c79 203d 2073      postOnly = s
-00033840: 656c 662e 6973 5f70 6f73 745f 6f6e 6c79  elf.is_post_only
-00033850: 2869 734d 6172 6b65 742c 2065 7863 6861  (isMarket, excha
-00033860: 6e67 6553 7065 6369 6669 6350 6172 616d  ngeSpecificParam
-00033870: 203d 3d20 2750 6f73 744f 6e6c 7927 2c20   == 'PostOnly', 
-00033880: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
-00033890: 6966 2070 6f73 744f 6e6c 793a 0a20 2020  if postOnly:.   
-000338a0: 2020 2020 2020 2020 2072 6571 7565 7374           request
-000338b0: 5b27 7469 6d65 496e 466f 7263 6527 5d20  ['timeInForce'] 
-000338c0: 3d20 2750 6f73 744f 6e6c 7927 0a20 2020  = 'PostOnly'.   
-000338d0: 2020 2020 2065 6c69 6620 7469 6d65 496e       elif timeIn
-000338e0: 466f 7263 6520 3d3d 2027 6774 6327 3a0a  Force == 'gtc':.
-000338f0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00033900: 6573 745b 2774 696d 6549 6e46 6f72 6365  est['timeInForce
-00033910: 275d 203d 2027 476f 6f64 5469 6c6c 4361  '] = 'GoodTillCa
-00033920: 6e63 656c 270a 2020 2020 2020 2020 656c  ncel'.        el
-00033930: 6966 2074 696d 6549 6e46 6f72 6365 203d  if timeInForce =
-00033940: 3d20 2766 6f6b 273a 0a20 2020 2020 2020  = 'fok':.       
-00033950: 2020 2020 2072 6571 7565 7374 5b27 7469       request['ti
-00033960: 6d65 496e 466f 7263 6527 5d20 3d20 2746  meInForce'] = 'F
-00033970: 696c 6c4f 724b 696c 6c27 0a20 2020 2020  illOrKill'.     
-00033980: 2020 2065 6c69 6620 7469 6d65 496e 466f     elif timeInFo
-00033990: 7263 6520 3d3d 2027 696f 6327 3a0a 2020  rce == 'ioc':.  
-000339a0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-000339b0: 745b 2774 696d 6549 6e46 6f72 6365 275d  t['timeInForce']
-000339c0: 203d 2027 496d 6d65 6469 6174 654f 7243   = 'ImmediateOrC
-000339d0: 616e 6365 6c27 0a20 2020 2020 2020 2074  ancel'.        t
-000339e0: 7269 6767 6572 5072 6963 6520 3d20 7365  riggerPrice = se
-000339f0: 6c66 2e73 6166 655f 6e75 6d62 6572 5f32  lf.safe_number_2
-00033a00: 2870 6172 616d 732c 2027 7472 6967 6765  (params, 'trigge
-00033a10: 7250 7269 6365 272c 2027 7374 6f70 5072  rPrice', 'stopPr
-00033a20: 6963 6527 290a 2020 2020 2020 2020 7374  ice').        st
-00033a30: 6f70 4c6f 7373 5472 6967 6765 7250 7269  opLossTriggerPri
-00033a40: 6365 203d 2073 656c 662e 7361 6665 5f6e  ce = self.safe_n
-00033a50: 756d 6265 7228 7061 7261 6d73 2c20 2773  umber(params, 's
-00033a60: 746f 704c 6f73 7350 7269 6365 2729 0a20  topLossPrice'). 
-00033a70: 2020 2020 2020 2074 616b 6550 726f 6669         takeProfi
-00033a80: 7454 7269 6767 6572 5072 6963 6520 3d20  tTriggerPrice = 
-00033a90: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
-00033aa0: 2870 6172 616d 732c 2027 7461 6b65 5072  (params, 'takePr
-00033ab0: 6f66 6974 5072 6963 6527 290a 2020 2020  ofitPrice').    
-00033ac0: 2020 2020 7374 6f70 4c6f 7373 203d 2073      stopLoss = s
-00033ad0: 656c 662e 7361 6665 5f6e 756d 6265 7228  elf.safe_number(
-00033ae0: 7061 7261 6d73 2c20 2773 746f 704c 6f73  params, 'stopLos
-00033af0: 7327 290a 2020 2020 2020 2020 7461 6b65  s').        take
-00033b00: 5072 6f66 6974 203d 2073 656c 662e 7361  Profit = self.sa
-00033b10: 6665 5f6e 756d 6265 7228 7061 7261 6d73  fe_number(params
-00033b20: 2c20 2774 616b 6550 726f 6669 7427 290a  , 'takeProfit').
-00033b30: 2020 2020 2020 2020 6973 5374 6f70 4c6f          isStopLo
-00033b40: 7373 5472 6967 6765 724f 7264 6572 203d  ssTriggerOrder =
-00033b50: 2073 746f 704c 6f73 7354 7269 6767 6572   stopLossTrigger
-00033b60: 5072 6963 6520 6973 206e 6f74 204e 6f6e  Price is not Non
-00033b70: 650a 2020 2020 2020 2020 6973 5461 6b65  e.        isTake
-00033b80: 5072 6f66 6974 5472 6967 6765 724f 7264  ProfitTriggerOrd
-00033b90: 6572 203d 2074 616b 6550 726f 6669 7454  er = takeProfitT
-00033ba0: 7269 6767 6572 5072 6963 6520 6973 206e  riggerPrice is n
-00033bb0: 6f74 204e 6f6e 650a 2020 2020 2020 2020  ot None.        
-00033bc0: 6973 5374 6f70 4c6f 7373 203d 2073 746f  isStopLoss = sto
-00033bd0: 704c 6f73 7320 6973 206e 6f74 204e 6f6e  pLoss is not Non
-00033be0: 650a 2020 2020 2020 2020 6973 5461 6b65  e.        isTake
-00033bf0: 5072 6f66 6974 203d 2074 616b 6550 726f  Profit = takePro
-00033c00: 6669 7420 6973 206e 6f74 204e 6f6e 650a  fit is not None.
-00033c10: 2020 2020 2020 2020 6966 2069 7353 746f          if isSto
-00033c20: 704c 6f73 7354 7269 6767 6572 4f72 6465  pLossTriggerOrde
-00033c30: 7220 6f72 2069 7354 616b 6550 726f 6669  r or isTakeProfi
-00033c40: 7454 7269 6767 6572 4f72 6465 723a 0a20  tTriggerOrder:. 
-00033c50: 2020 2020 2020 2020 2020 2074 7269 6767             trigg
-00033c60: 6572 5072 6963 6520 3d20 7374 6f70 4c6f  erPrice = stopLo
-00033c70: 7373 5472 6967 6765 7250 7269 6365 2069  ssTriggerPrice i
-00033c80: 6620 6973 5374 6f70 4c6f 7373 5472 6967  f isStopLossTrig
-00033c90: 6765 724f 7264 6572 2065 6c73 6520 7461  gerOrder else ta
-00033ca0: 6b65 5072 6f66 6974 5472 6967 6765 7250  keProfitTriggerP
-00033cb0: 7269 6365 0a20 2020 2020 2020 2069 6620  rice.        if 
-00033cc0: 7472 6967 6765 7250 7269 6365 2069 7320  triggerPrice is 
-00033cd0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00033ce0: 2020 2020 2020 7265 7175 6573 745b 2774        request['t
-00033cf0: 7269 6767 6572 5072 6963 6527 5d20 3d20  riggerPrice'] = 
-00033d00: 7365 6c66 2e70 7269 6365 5f74 6f5f 7072  self.price_to_pr
-00033d10: 6563 6973 696f 6e28 7379 6d62 6f6c 2c20  ecision(symbol, 
-00033d20: 7472 6967 6765 7250 7269 6365 290a 2020  triggerPrice).  
-00033d30: 2020 2020 2020 6966 2069 7353 746f 704c        if isStopL
-00033d40: 6f73 7320 6f72 2069 7354 616b 6550 726f  oss or isTakePro
-00033d50: 6669 743a 0a20 2020 2020 2020 2020 2020  fit:.           
-00033d60: 2069 6620 6973 5374 6f70 4c6f 7373 3a0a   if isStopLoss:.
-00033d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00033d80: 7265 7175 6573 745b 2773 746f 704c 6f73  request['stopLos
-00033d90: 7327 5d20 3d20 7365 6c66 2e70 7269 6365  s'] = self.price
-00033da0: 5f74 6f5f 7072 6563 6973 696f 6e28 7379  _to_precision(sy
-00033db0: 6d62 6f6c 2c20 7374 6f70 4c6f 7373 290a  mbol, stopLoss).
-00033dc0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00033dd0: 7354 616b 6550 726f 6669 743a 0a20 2020  sTakeProfit:.   
-00033de0: 2020 2020 2020 2020 2020 2020 2072 6571               req
-00033df0: 7565 7374 5b27 7461 6b65 5072 6f66 6974  uest['takeProfit
-00033e00: 275d 203d 2073 656c 662e 7072 6963 655f  '] = self.price_
-00033e10: 746f 5f70 7265 6369 7369 6f6e 2873 796d  to_precision(sym
-00033e20: 626f 6c2c 2074 616b 6550 726f 6669 7429  bol, takeProfit)
-00033e30: 0a20 2020 2020 2020 2063 6c69 656e 744f  .        clientO
-00033e40: 7264 6572 4964 203d 2073 656c 662e 7361  rderId = self.sa
-00033e50: 6665 5f73 7472 696e 6728 7061 7261 6d73  fe_string(params
-00033e60: 2c20 2763 6c69 656e 744f 7264 6572 4964  , 'clientOrderId
-00033e70: 2729 0a20 2020 2020 2020 2069 6620 636c  ').        if cl
-00033e80: 6965 6e74 4f72 6465 7249 6420 6973 206e  ientOrderId is n
-00033e90: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00033ea0: 2020 2020 2072 6571 7565 7374 5b27 6f72       request['or
-00033eb0: 6465 724c 696e 6b49 6427 5d20 3d20 636c  derLinkId'] = cl
-00033ec0: 6965 6e74 4f72 6465 7249 640a 2020 2020  ientOrderId.    
-00033ed0: 2020 2020 7061 7261 6d73 203d 2073 656c      params = sel
-00033ee0: 662e 6f6d 6974 2870 6172 616d 732c 205b  f.omit(params, [
-00033ef0: 2773 746f 7050 7269 6365 272c 2027 7469  'stopPrice', 'ti
-00033f00: 6d65 496e 466f 7263 6527 2c20 2774 7269  meInForce', 'tri
-00033f10: 6767 6572 5072 6963 6527 2c20 2773 746f  ggerPrice', 'sto
-00033f20: 704c 6f73 7350 7269 6365 272c 2027 7461  pLossPrice', 'ta
-00033f30: 6b65 5072 6f66 6974 5072 6963 6527 2c20  keProfitPrice', 
-00033f40: 2770 6f73 744f 6e6c 7927 2c20 2763 6c69  'postOnly', 'cli
-00033f50: 656e 744f 7264 6572 4964 272c 2027 7374  entOrderId', 'st
-00033f60: 6f70 4c6f 7373 272c 2027 7461 6b65 5072  opLoss', 'takePr
-00033f70: 6f66 6974 275d 290a 2020 2020 2020 2020  ofit']).        
-00033f80: 7265 7370 6f6e 7365 203d 2073 656c 662e  response = self.
-00033f90: 7072 6976 6174 6550 6f73 7455 6e69 6669  privatePostUnifi
-00033fa0: 6564 5633 5072 6976 6174 654f 7264 6572  edV3PrivateOrder
-00033fb0: 5265 706c 6163 6528 7365 6c66 2e65 7874  Replace(self.ext
-00033fc0: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
-00033fd0: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
-00033fe0: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
-00033ff0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00034000: 2020 2272 6574 436f 6465 223a 2030 2c0a    "retCode": 0,.
-00034010: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00034020: 2020 2272 6574 4d73 6722 3a20 224f 4b22    "retMsg": "OK"
-00034030: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00034040: 2020 2020 2272 6573 756c 7422 3a20 7b0a      "result": {.
-00034050: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00034060: 2020 2020 2020 226f 7264 6572 4964 223a        "orderId":
-00034070: 2022 3432 6338 3664 3636 3333 3165 3431   "42c86d66331e41
-00034080: 3939 3864 3132 6332 3434 3063 6539 3063  998d12c2440ce90c
-00034090: 3161 222c 0a20 2020 2020 2020 2023 2020  1a",.        #  
-000340a0: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
-000340b0: 724c 696e 6b49 6422 3a20 2265 3830 6435  rLinkId": "e80d5
-000340c0: 3538 652d 6564 220a 2020 2020 2020 2020  58e-ed".        
-000340d0: 2320 2020 2020 2020 2020 7d0a 2020 2020  #         }.    
-000340e0: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
-000340f0: 2020 2020 230a 2020 2020 2020 2020 6f72      #.        or
-00034100: 6465 7220 3d20 7365 6c66 2e73 6166 655f  der = self.safe_
-00034110: 7661 6c75 6528 7265 7370 6f6e 7365 2c20  value(response, 
-00034120: 2772 6573 756c 7427 2c20 7b7d 290a 2020  'result', {}).  
-00034130: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00034140: 662e 7061 7273 655f 6f72 6465 7228 6f72  f.parse_order(or
-00034150: 6465 7229 0a0a 2020 2020 6465 6620 6564  der)..    def ed
-00034160: 6974 5f63 6f6e 7472 6163 745f 7633 5f6f  it_contract_v3_o
-00034170: 7264 6572 2873 656c 662c 2069 643a 2073  rder(self, id: s
-00034180: 7472 2c20 7379 6d62 6f6c 2c20 7479 7065  tr, symbol, type
-00034190: 2c20 7369 6465 2c20 616d 6f75 6e74 3d4e  , side, amount=N
-000341a0: 6f6e 652c 2070 7269 6365 3d4e 6f6e 652c  one, price=None,
-000341b0: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
-000341c0: 2020 2020 2073 656c 662e 6c6f 6164 5f6d       self.load_m
-000341d0: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
-000341e0: 206d 6172 6b65 7420 3d20 7365 6c66 2e6d   market = self.m
-000341f0: 6172 6b65 7428 7379 6d62 6f6c 290a 2020  arket(symbol).  
-00034200: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-00034210: 7b0a 2020 2020 2020 2020 2020 2020 2773  {.            's
-00034220: 796d 626f 6c27 3a20 6d61 726b 6574 5b27  ymbol': market['
-00034230: 6964 275d 2c0a 2020 2020 2020 2020 2020  id'],.          
-00034240: 2020 276f 7264 6572 4964 273a 2069 642c    'orderId': id,
-00034250: 0a20 2020 2020 2020 2020 2020 2027 7174  .            'qt
-00034260: 7927 3a20 7365 6c66 2e61 6d6f 756e 745f  y': self.amount_
-00034270: 746f 5f70 7265 6369 7369 6f6e 2873 796d  to_precision(sym
-00034280: 626f 6c2c 2061 6d6f 756e 7429 2c0a 2020  bol, amount),.  
-00034290: 2020 2020 2020 2020 2020 2320 276f 7264            # 'ord
-000342a0: 6572 4c69 6e6b 4964 273a 2027 272c 2020  erLinkId': '',  
-000342b0: 2320 5573 6572 2063 7573 746f 6d69 7365  # User customise
-000342c0: 6420 6f72 6465 7220 6964 2e20 4569 7468  d order id. Eith
-000342d0: 6572 206f 7264 6572 4964 206f 7220 6f72  er orderId or or
-000342e0: 6465 724c 696e 6b49 6420 6973 2072 6571  derLinkId is req
-000342f0: 7569 7265 640a 2020 2020 2020 2020 2020  uired.          
-00034300: 2020 2320 2774 7269 6767 6572 5072 6963    # 'triggerPric
-00034310: 6527 3a20 2727 2c20 2023 2054 7269 6767  e': '',  # Trigg
-00034320: 6572 2070 7269 6365 2e20 446f 6e27 7420  er price. Don't 
-00034330: 7061 7373 2069 7420 6966 206e 6f74 206d  pass it if not m
-00034340: 6f64 6966 7920 7468 6520 7174 790a 2020  odify the qty.  
-00034350: 2020 2020 2020 2020 2020 2320 2774 616b            # 'tak
-00034360: 6550 726f 6669 7427 3a20 2727 2c20 2023  eProfit': '',  #
-00034370: 2054 616b 6520 7072 6f66 6974 2070 7269   Take profit pri
-00034380: 6365 2061 6674 6572 206d 6f64 6966 6963  ce after modific
-00034390: 6174 696f 6e2e 2044 6f6e 2774 2070 6173  ation. Don't pas
-000343a0: 7320 6974 2069 6620 6e6f 7420 6d6f 6469  s it if not modi
-000343b0: 6679 2074 6865 2074 616b 6520 7072 6f66  fy the take prof
-000343c0: 6974 0a20 2020 2020 2020 2020 2020 2023  it.            #
-000343d0: 2027 7374 6f70 4c6f 7373 273a 2027 272c   'stopLoss': '',
-000343e0: 2020 2320 5374 6f70 206c 6f73 7320 7072    # Stop loss pr
-000343f0: 6963 6520 6166 7465 7220 6d6f 6469 6669  ice after modifi
-00034400: 6361 7469 6f6e 2e20 446f 6e27 7420 7061  cation. Don't pa
-00034410: 7373 2069 7420 6966 206e 6f74 206d 6f64  ss it if not mod
-00034420: 6966 7920 7468 6520 5374 6f70 206c 6f73  ify the Stop los
-00034430: 730a 2020 2020 2020 2020 2020 2020 2320  s.            # 
-00034440: 2774 7054 7269 6767 6572 4279 273a 2027  'tpTriggerBy': '
-00034450: 272c 2020 2320 5468 6520 7072 6963 6520  ',  # The price 
-00034460: 7479 7065 2074 6f20 7472 6967 6765 7220  type to trigger 
-00034470: 7461 6b65 2070 726f 6669 742e 2057 6865  take profit. Whe
-00034480: 6e20 7365 7420 6120 7461 6b65 2070 726f  n set a take pro
-00034490: 6669 742c 2073 656c 6620 7061 7261 6d20  fit, self param 
-000344a0: 6973 2072 6571 7569 7265 6420 6966 206e  is required if n
-000344b0: 6f20 696e 6974 6961 6c20 7661 6c75 6520  o initial value 
-000344c0: 666f 7220 7468 6520 6f72 6465 720a 2020  for the order.  
-000344d0: 2020 2020 2020 2020 2020 2320 2773 6c54            # 'slT
-000344e0: 7269 6767 6572 4279 273a 2027 272c 2020  riggerBy': '',  
-000344f0: 2320 5468 6520 7072 6963 6520 7479 7065  # The price type
-00034500: 2074 6f20 7472 6967 6765 7220 7374 6f70   to trigger stop
-00034510: 206c 6f73 732e 2057 6865 6e20 7365 7420   loss. When set 
-00034520: 6120 7374 6f70 206c 6f73 732c 2073 656c  a stop loss, sel
-00034530: 6620 7061 7261 6d20 6973 2072 6571 7569  f param is requi
-00034540: 7265 6420 6966 206e 6f20 696e 6974 6961  red if no initia
-00034550: 6c20 7661 6c75 6520 666f 7220 7468 6520  l value for the 
-00034560: 6f72 6465 720a 2020 2020 2020 2020 2020  order.          
-00034570: 2020 2320 2774 7269 6767 6572 4279 273a    # 'triggerBy':
-00034580: 2027 272c 2020 2320 5472 6967 6765 7220   '',  # Trigger 
-00034590: 7072 6963 6520 7479 7065 2e20 4c61 7374  price type. Last
-000345a0: 5072 6963 652c 2049 6e64 6578 5072 6963  Price, IndexPric
-000345b0: 652c 204d 6172 6b50 7269 6365 2c20 4c61  e, MarkPrice, La
-000345c0: 7374 5072 6963 650a 2020 2020 2020 2020  stPrice.        
-000345d0: 7d0a 2020 2020 2020 2020 6966 2070 7269  }.        if pri
-000345e0: 6365 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ce is not None:.
-000345f0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00034600: 6573 745b 2770 7269 6365 275d 203d 2073  est['price'] = s
-00034610: 656c 662e 7072 6963 655f 746f 5f70 7265  elf.price_to_pre
-00034620: 6369 7369 6f6e 2873 796d 626f 6c2c 2070  cision(symbol, p
-00034630: 7269 6365 290a 2020 2020 2020 2020 7472  rice).        tr
-00034640: 6967 6765 7250 7269 6365 203d 2073 656c  iggerPrice = sel
-00034650: 662e 7361 6665 5f6e 756d 6265 725f 3228  f.safe_number_2(
-00034660: 7061 7261 6d73 2c20 2774 7269 6767 6572  params, 'trigger
-00034670: 5072 6963 6527 2c20 2773 746f 7050 7269  Price', 'stopPri
-00034680: 6365 2729 0a20 2020 2020 2020 2073 746f  ce').        sto
-00034690: 704c 6f73 7354 7269 6767 6572 5072 6963  pLossTriggerPric
-000346a0: 6520 3d20 7365 6c66 2e73 6166 655f 6e75  e = self.safe_nu
-000346b0: 6d62 6572 2870 6172 616d 732c 2027 7374  mber(params, 'st
-000346c0: 6f70 4c6f 7373 5072 6963 6527 290a 2020  opLossPrice').  
-000346d0: 2020 2020 2020 7461 6b65 5072 6f66 6974        takeProfit
-000346e0: 5472 6967 6765 7250 7269 6365 203d 2073  TriggerPrice = s
-000346f0: 656c 662e 7361 6665 5f6e 756d 6265 7228  elf.safe_number(
-00034700: 7061 7261 6d73 2c20 2774 616b 6550 726f  params, 'takePro
-00034710: 6669 7450 7269 6365 2729 0a20 2020 2020  fitPrice').     
-00034720: 2020 2073 746f 704c 6f73 7320 3d20 7365     stopLoss = se
-00034730: 6c66 2e73 6166 655f 6e75 6d62 6572 2870  lf.safe_number(p
-00034740: 6172 616d 732c 2027 7374 6f70 4c6f 7373  arams, 'stopLoss
-00034750: 2729 0a20 2020 2020 2020 2074 616b 6550  ').        takeP
-00034760: 726f 6669 7420 3d20 7365 6c66 2e73 6166  rofit = self.saf
-00034770: 655f 6e75 6d62 6572 2870 6172 616d 732c  e_number(params,
-00034780: 2027 7461 6b65 5072 6f66 6974 2729 0a20   'takeProfit'). 
-00034790: 2020 2020 2020 2069 7353 746f 704c 6f73         isStopLos
-000347a0: 7354 7269 6767 6572 4f72 6465 7220 3d20  sTriggerOrder = 
-000347b0: 7374 6f70 4c6f 7373 5472 6967 6765 7250  stopLossTriggerP
-000347c0: 7269 6365 2069 7320 6e6f 7420 4e6f 6e65  rice is not None
-000347d0: 0a20 2020 2020 2020 2069 7354 616b 6550  .        isTakeP
-000347e0: 726f 6669 7454 7269 6767 6572 4f72 6465  rofitTriggerOrde
-000347f0: 7220 3d20 7461 6b65 5072 6f66 6974 5472  r = takeProfitTr
-00034800: 6967 6765 7250 7269 6365 2069 7320 6e6f  iggerPrice is no
-00034810: 7420 4e6f 6e65 0a20 2020 2020 2020 2069  t None.        i
-00034820: 7353 746f 704c 6f73 7320 3d20 7374 6f70  sStopLoss = stop
-00034830: 4c6f 7373 2069 7320 6e6f 7420 4e6f 6e65  Loss is not None
-00034840: 0a20 2020 2020 2020 2069 7354 616b 6550  .        isTakeP
-00034850: 726f 6669 7420 3d20 7461 6b65 5072 6f66  rofit = takeProf
-00034860: 6974 2069 7320 6e6f 7420 4e6f 6e65 0a20  it is not None. 
-00034870: 2020 2020 2020 2069 6620 6973 5374 6f70         if isStop
-00034880: 4c6f 7373 5472 6967 6765 724f 7264 6572  LossTriggerOrder
-00034890: 206f 7220 6973 5461 6b65 5072 6f66 6974   or isTakeProfit
-000348a0: 5472 6967 6765 724f 7264 6572 3a0a 2020  TriggerOrder:.  
-000348b0: 2020 2020 2020 2020 2020 7472 6967 6765            trigge
-000348c0: 7250 7269 6365 203d 2073 746f 704c 6f73  rPrice = stopLos
-000348d0: 7354 7269 6767 6572 5072 6963 6520 6966  sTriggerPrice if
-000348e0: 2069 7353 746f 704c 6f73 7354 7269 6767   isStopLossTrigg
-000348f0: 6572 4f72 6465 7220 656c 7365 2074 616b  erOrder else tak
-00034900: 6550 726f 6669 7454 7269 6767 6572 5072  eProfitTriggerPr
-00034910: 6963 650a 2020 2020 2020 2020 6966 2074  ice.        if t
-00034920: 7269 6767 6572 5072 6963 6520 6973 206e  riggerPrice is n
-00034930: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00034940: 2020 2020 2072 6571 7565 7374 5b27 7472       request['tr
-00034950: 6967 6765 7250 7269 6365 275d 203d 2073  iggerPrice'] = s
-00034960: 656c 662e 7072 6963 655f 746f 5f70 7265  elf.price_to_pre
-00034970: 6369 7369 6f6e 2873 796d 626f 6c2c 2074  cision(symbol, t
-00034980: 7269 6767 6572 5072 6963 6529 0a20 2020  riggerPrice).   
-00034990: 2020 2020 2069 6620 6973 5374 6f70 4c6f       if isStopLo
-000349a0: 7373 206f 7220 6973 5461 6b65 5072 6f66  ss or isTakeProf
-000349b0: 6974 3a0a 2020 2020 2020 2020 2020 2020  it:.            
-000349c0: 6966 2069 7353 746f 704c 6f73 733a 0a20  if isStopLoss:. 
-000349d0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000349e0: 6571 7565 7374 5b27 7374 6f70 4c6f 7373  equest['stopLoss
-000349f0: 275d 203d 2073 656c 662e 7072 6963 655f  '] = self.price_
-00034a00: 746f 5f70 7265 6369 7369 6f6e 2873 796d  to_precision(sym
-00034a10: 626f 6c2c 2073 746f 704c 6f73 7329 0a20  bol, stopLoss). 
-00034a20: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-00034a30: 5461 6b65 5072 6f66 6974 3a0a 2020 2020  TakeProfit:.    
-00034a40: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00034a50: 6573 745b 2774 616b 6550 726f 6669 7427  est['takeProfit'
-00034a60: 5d20 3d20 7365 6c66 2e70 7269 6365 5f74  ] = self.price_t
-00034a70: 6f5f 7072 6563 6973 696f 6e28 7379 6d62  o_precision(symb
-00034a80: 6f6c 2c20 7461 6b65 5072 6f66 6974 290a  ol, takeProfit).
-00034a90: 2020 2020 2020 2020 636c 6965 6e74 4f72          clientOr
-00034aa0: 6465 7249 6420 3d20 7365 6c66 2e73 6166  derId = self.saf
-00034ab0: 655f 7374 7269 6e67 2870 6172 616d 732c  e_string(params,
-00034ac0: 2027 636c 6965 6e74 4f72 6465 7249 6427   'clientOrderId'
-00034ad0: 290a 2020 2020 2020 2020 6966 2063 6c69  ).        if cli
-00034ae0: 656e 744f 7264 6572 4964 2069 7320 6e6f  entOrderId is no
-00034af0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00034b00: 2020 2020 7265 7175 6573 745b 276f 7264      request['ord
-00034b10: 6572 4c69 6e6b 4964 275d 203d 2063 6c69  erLinkId'] = cli
-00034b20: 656e 744f 7264 6572 4964 0a20 2020 2020  entOrderId.     
-00034b30: 2020 2070 6172 616d 7320 3d20 7365 6c66     params = self
-00034b40: 2e6f 6d69 7428 7061 7261 6d73 2c20 5b27  .omit(params, ['
-00034b50: 7374 6f70 5072 6963 6527 2c20 2773 746f  stopPrice', 'sto
-00034b60: 704c 6f73 7350 7269 6365 272c 2027 7461  pLossPrice', 'ta
-00034b70: 6b65 5072 6f66 6974 5072 6963 6527 2c20  keProfitPrice', 
-00034b80: 2774 7269 6767 6572 5072 6963 6527 2c20  'triggerPrice', 
-00034b90: 2763 6c69 656e 744f 7264 6572 4964 272c  'clientOrderId',
-00034ba0: 2027 7374 6f70 4c6f 7373 272c 2027 7461   'stopLoss', 'ta
-00034bb0: 6b65 5072 6f66 6974 275d 290a 2020 2020  keProfit']).    
-00034bc0: 2020 2020 7265 7370 6f6e 7365 203d 2073      response = s
-00034bd0: 656c 662e 7072 6976 6174 6550 6f73 7443  elf.privatePostC
-00034be0: 6f6e 7472 6163 7456 3350 7269 7661 7465  ontractV3Private
-00034bf0: 4f72 6465 7252 6570 6c61 6365 2873 656c  OrderReplace(sel
-00034c00: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
-00034c10: 2c20 7061 7261 6d73 2929 0a20 2020 2020  , params)).     
-00034c20: 2020 2023 0a20 2020 2020 2020 2023 2063     #.        # c
-00034c30: 6f6e 7472 6163 7420 7633 0a20 2020 2020  ontract v3.     
-00034c40: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
-00034c50: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-00034c60: 2020 2020 2020 2022 7265 7443 6f64 6522         "retCode"
-00034c70: 3a20 302c 0a20 2020 2020 2020 2023 2020  : 0,.        #  
-00034c80: 2020 2020 2020 2022 7265 744d 7367 223a         "retMsg":
-00034c90: 2022 4f4b 222c 0a20 2020 2020 2020 2023   "OK",.        #
-00034ca0: 2020 2020 2020 2020 2022 7265 7375 6c74           "result
-00034cb0: 223a 207b 0a20 2020 2020 2020 2023 2020  ": {.        #  
-00034cc0: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
-00034cd0: 7249 6422 3a20 2264 6238 6237 3462 332d  rId": "db8b74b3-
-00034ce0: 3732 6433 2d34 3236 342d 6266 3366 2d35  72d3-4264-bf3f-5
-00034cf0: 3264 3339 6234 3139 3536 6522 2c0a 2020  2d39b41956e",.  
-00034d00: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00034d10: 2020 2020 226f 7264 6572 4c69 6e6b 4964      "orderLinkId
-00034d20: 223a 2022 7830 3032 220a 2020 2020 2020  ": "x002".      
-00034d30: 2020 2320 2020 2020 2020 2020 7d2c 0a20    #         },. 
-00034d40: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00034d50: 2022 7265 7445 7874 496e 666f 223a 207b   "retExtInfo": {
-00034d60: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
-00034d70: 2020 2020 2022 7469 6d65 223a 2031 3635       "time": 165
-00034d80: 3839 3032 3631 3037 3439 0a20 2020 2020  8902610749.     
-00034d90: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
-00034da0: 2020 2023 0a20 2020 2020 2020 2072 6573     #.        res
-00034db0: 756c 7420 3d20 7365 6c66 2e73 6166 655f  ult = self.safe_
-00034dc0: 7661 6c75 6528 7265 7370 6f6e 7365 2c20  value(response, 
-00034dd0: 2772 6573 756c 7427 2c20 7b7d 290a 2020  'result', {}).  
-00034de0: 2020 2020 2020 7265 7475 726e 207b 0a20        return {. 
-00034df0: 2020 2020 2020 2020 2020 2027 696e 666f             'info
-00034e00: 273a 2072 6573 706f 6e73 652c 0a20 2020  ': response,.   
-00034e10: 2020 2020 2020 2020 2027 6964 273a 2073           'id': s
-00034e20: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
-00034e30: 7265 7375 6c74 2c20 276f 7264 6572 4964  result, 'orderId
-00034e40: 2729 2c0a 2020 2020 2020 2020 7d0a 0a20  '),.        }.. 
-00034e50: 2020 2064 6566 2065 6469 745f 6f72 6465     def edit_orde
-00034e60: 7228 7365 6c66 2c20 6964 3a20 7374 722c  r(self, id: str,
-00034e70: 2073 796d 626f 6c2c 2074 7970 652c 2073   symbol, type, s
-00034e80: 6964 652c 2061 6d6f 756e 743d 4e6f 6e65  ide, amount=None
-00034e90: 2c20 7072 6963 653d 4e6f 6e65 2c20 7061  , price=None, pa
-00034ea0: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
-00034eb0: 2020 6966 2073 796d 626f 6c20 6973 204e    if symbol is N
-00034ec0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-00034ed0: 2072 6169 7365 2041 7267 756d 656e 7473   raise Arguments
-00034ee0: 5265 7175 6972 6564 2873 656c 662e 6964  Required(self.id
-00034ef0: 202b 2027 2065 6469 744f 7264 6572 2829   + ' editOrder()
-00034f00: 2072 6571 7569 7265 7320 616e 2073 796d   requires an sym
-00034f10: 626f 6c20 6172 6775 6d65 6e74 2729 0a20  bol argument'). 
-00034f20: 2020 2020 2020 2073 656c 662e 6c6f 6164         self.load
-00034f30: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
-00034f40: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
-00034f50: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
-00034f60: 2020 2020 2020 2020 656e 6162 6c65 556e          enableUn
-00034f70: 6966 6965 644d 6172 6769 6e2c 2065 6e61  ifiedMargin, ena
-00034f80: 626c 6555 6e69 6669 6564 4163 636f 756e  bleUnifiedAccoun
-00034f90: 7420 3d20 7365 6c66 2e69 735f 756e 6966  t = self.is_unif
-00034fa0: 6965 645f 656e 6162 6c65 6428 290a 2020  ied_enabled().  
-00034fb0: 2020 2020 2020 6966 2065 6e61 626c 6555        if enableU
-00034fc0: 6e69 6669 6564 4163 636f 756e 743a 0a20  nifiedAccount:. 
-00034fd0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00034fe0: 6e20 7365 6c66 2e65 6469 745f 756e 6966  n self.edit_unif
-00034ff0: 6965 645f 6163 636f 756e 745f 6f72 6465  ied_account_orde
-00035000: 7228 6964 2c20 7379 6d62 6f6c 2c20 7479  r(id, symbol, ty
-00035010: 7065 2c20 7369 6465 2c20 616d 6f75 6e74  pe, side, amount
-00035020: 2c20 7072 6963 652c 2070 6172 616d 7329  , price, params)
-00035030: 0a20 2020 2020 2020 2065 6c69 6620 6d61  .        elif ma
-00035040: 726b 6574 5b27 7370 6f74 275d 3a0a 2020  rket['spot']:.  
-00035050: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00035060: 4e6f 7453 7570 706f 7274 6564 2873 656c  NotSupported(sel
-00035070: 662e 6964 202b 2027 2065 6469 744f 7264  f.id + ' editOrd
-00035080: 6572 2829 2064 6f65 7320 6e6f 7420 7375  er() does not su
-00035090: 7070 6f72 7420 7370 6f74 206d 6172 6b65  pport spot marke
-000350a0: 7473 2729 0a20 2020 2020 2020 2065 6c69  ts').        eli
-000350b0: 6620 656e 6162 6c65 556e 6966 6965 644d  f enableUnifiedM
-000350c0: 6172 6769 6e20 616e 6420 6e6f 7420 6d61  argin and not ma
-000350d0: 726b 6574 5b27 696e 7665 7273 6527 5d3a  rket['inverse']:
-000350e0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-000350f0: 7572 6e20 7365 6c66 2e65 6469 745f 756e  urn self.edit_un
-00035100: 6966 6965 645f 6d61 7267 696e 5f6f 7264  ified_margin_ord
-00035110: 6572 2869 642c 2073 796d 626f 6c2c 2074  er(id, symbol, t
-00035120: 7970 652c 2073 6964 652c 2061 6d6f 756e  ype, side, amoun
-00035130: 742c 2070 7269 6365 2c20 7061 7261 6d73  t, price, params
-00035140: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00035150: 2073 656c 662e 6564 6974 5f63 6f6e 7472   self.edit_contr
-00035160: 6163 745f 7633 5f6f 7264 6572 2869 642c  act_v3_order(id,
-00035170: 2073 796d 626f 6c2c 2074 7970 652c 2073   symbol, type, s
-00035180: 6964 652c 2061 6d6f 756e 742c 2070 7269  ide, amount, pri
-00035190: 6365 2c20 7061 7261 6d73 290a 0a20 2020  ce, params)..   
-000351a0: 2064 6566 2063 616e 6365 6c5f 756e 6966   def cancel_unif
-000351b0: 6965 645f 6163 636f 756e 745f 6f72 6465  ied_account_orde
-000351c0: 7228 7365 6c66 2c20 6964 3a20 7374 722c  r(self, id: str,
-000351d0: 2073 796d 626f 6c3a 204f 7074 696f 6e61   symbol: Optiona
-000351e0: 6c5b 7374 725d 203d 204e 6f6e 652c 2070  l[str] = None, p
-000351f0: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
-00035200: 2020 2069 6620 7379 6d62 6f6c 2069 7320     if symbol is 
-00035210: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-00035220: 2020 7261 6973 6520 4172 6775 6d65 6e74    raise Argument
-00035230: 7352 6571 7569 7265 6428 7365 6c66 2e69  sRequired(self.i
-00035240: 6420 2b20 2720 6361 6e63 656c 4f72 6465  d + ' cancelOrde
-00035250: 7228 2920 7265 7175 6972 6573 2061 2073  r() requires a s
-00035260: 796d 626f 6c20 6172 6775 6d65 6e74 2729  ymbol argument')
-00035270: 0a20 2020 2020 2020 2073 656c 662e 6c6f  .        self.lo
-00035280: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
-00035290: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
-000352a0: 6c66 2e6d 6172 6b65 7428 7379 6d62 6f6c  lf.market(symbol
-000352b0: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
-000352c0: 7420 3d20 7b0a 2020 2020 2020 2020 2020  t = {.          
-000352d0: 2020 2773 796d 626f 6c27 3a20 6d61 726b    'symbol': mark
-000352e0: 6574 5b27 6964 275d 2c0a 2020 2020 2020  et['id'],.      
-000352f0: 2020 2020 2020 2320 276f 7264 6572 4c69        # 'orderLi
-00035300: 6e6b 4964 273a 2027 7374 7269 6e67 272c  nkId': 'string',
-00035310: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
-00035320: 6f72 6465 7249 6427 3a20 6964 2c0a 2020  orderId': id,.  
-00035330: 2020 2020 2020 2020 2020 2320 636f 6e64            # cond
-00035340: 6974 696f 6e61 6c20 6f72 6465 7273 0a20  itional orders. 
-00035350: 2020 2020 2020 2020 2020 2023 2027 6f72             # 'or
-00035360: 6465 7246 696c 7465 7227 3a20 2727 2c20  derFilter': '', 
-00035370: 2023 2056 616c 6964 2066 6f72 2073 706f   # Valid for spo
-00035380: 7420 6f6e 6c79 2e20 4f72 6465 722c 7470  t only. Order,tp
-00035390: 736c 4f72 6465 722e 2049 6620 6e6f 7420  slOrder. If not 
-000353a0: 7061 7373 6564 2c20 4f72 6465 7220 6279  passed, Order by
-000353b0: 2064 6566 6175 6c74 0a20 2020 2020 2020   default.       
-000353c0: 207d 0a20 2020 2020 2020 2069 6620 6d61   }.        if ma
-000353d0: 726b 6574 5b27 7370 6f74 275d 3a0a 2020  rket['spot']:.  
-000353e0: 2020 2020 2020 2020 2020 2320 6f6e 6c79            # only
-000353f0: 2077 6f72 6b73 2066 6f72 2073 706f 7420   works for spot 
-00035400: 6d61 726b 6574 0a20 2020 2020 2020 2020  market.         
-00035410: 2020 2069 7353 746f 7020 3d20 7365 6c66     isStop = self
-00035420: 2e73 6166 655f 7661 6c75 6528 7061 7261  .safe_value(para
-00035430: 6d73 2c20 2773 746f 7027 2c20 4661 6c73  ms, 'stop', Fals
-00035440: 6529 0a20 2020 2020 2020 2020 2020 2070  e).            p
-00035450: 6172 616d 7320 3d20 7365 6c66 2e6f 6d69  arams = self.omi
-00035460: 7428 7061 7261 6d73 2c20 5b27 7374 6f70  t(params, ['stop
-00035470: 275d 290a 2020 2020 2020 2020 2020 2020  ']).            
-00035480: 7265 7175 6573 745b 276f 7264 6572 4669  request['orderFi
-00035490: 6c74 6572 275d 203d 2027 7470 736c 4f72  lter'] = 'tpslOr
-000354a0: 6465 7227 2069 6620 6973 5374 6f70 2065  der' if isStop e
-000354b0: 6c73 6520 274f 7264 6572 270a 2020 2020  lse 'Order'.    
-000354c0: 2020 2020 6966 2069 6420 6973 206e 6f74      if id is not
-000354d0: 204e 6f6e 653a 2020 2320 5468 6520 7573   None:  # The us
-000354e0: 6572 2063 616e 2061 6c73 6f20 7573 6520  er can also use 
-000354f0: 6172 6775 6d65 6e74 2070 6172 616d 735b  argument params[
-00035500: 226f 7264 6572 4c69 6e6b 4964 225d 0a20  "orderLinkId"]. 
-00035510: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-00035520: 7374 5b27 6f72 6465 7249 6427 5d20 3d20  st['orderId'] = 
-00035530: 6964 0a20 2020 2020 2020 2069 6620 6d61  id.        if ma
-00035540: 726b 6574 5b27 7370 6f74 275d 3a0a 2020  rket['spot']:.  
-00035550: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-00035560: 745b 2763 6174 6567 6f72 7927 5d20 3d20  t['category'] = 
-00035570: 2773 706f 7427 0a20 2020 2020 2020 2065  'spot'.        e
-00035580: 6c69 6620 6d61 726b 6574 5b27 6f70 7469  lif market['opti
-00035590: 6f6e 275d 3a0a 2020 2020 2020 2020 2020  on']:.          
-000355a0: 2020 7265 7175 6573 745b 2763 6174 6567    request['categ
-000355b0: 6f72 7927 5d20 3d20 276f 7074 696f 6e27  ory'] = 'option'
-000355c0: 0a20 2020 2020 2020 2065 6c69 6620 6d61  .        elif ma
-000355d0: 726b 6574 5b27 6c69 6e65 6172 275d 3a0a  rket['linear']:.
-000355e0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-000355f0: 6573 745b 2763 6174 6567 6f72 7927 5d20  est['category'] 
-00035600: 3d20 276c 696e 6561 7227 0a20 2020 2020  = 'linear'.     
-00035610: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00035620: 2020 2020 2072 6169 7365 204e 6f74 5375       raise NotSu
-00035630: 7070 6f72 7465 6428 7365 6c66 2e69 6420  pported(self.id 
-00035640: 2b20 2720 6361 6e63 656c 4f72 6465 7228  + ' cancelOrder(
-00035650: 2920 646f 6573 206e 6f74 2061 6c6c 6f77  ) does not allow
-00035660: 2069 6e76 6572 7365 206d 6172 6b65 7420   inverse market 
-00035670: 6f72 6465 7273 2066 6f72 2027 202b 2073  orders for ' + s
-00035680: 796d 626f 6c20 2b20 2720 6d61 726b 6574  ymbol + ' market
-00035690: 7327 290a 2020 2020 2020 2020 7265 7370  s').        resp
-000356a0: 6f6e 7365 203d 2073 656c 662e 7072 6976  onse = self.priv
-000356b0: 6174 6550 6f73 7456 354f 7264 6572 4361  atePostV5OrderCa
-000356c0: 6e63 656c 2873 656c 662e 6578 7465 6e64  ncel(self.extend
-000356d0: 2872 6571 7565 7374 2c20 7061 7261 6d73  (request, params
-000356e0: 2929 0a20 2020 2020 2020 2023 0a20 2020  )).        #.   
-000356f0: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
-00035700: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00035710: 7265 7443 6f64 6522 3a20 302c 0a20 2020  retCode": 0,.   
-00035720: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00035730: 7265 744d 7367 223a 2022 4f4b 222c 0a20  retMsg": "OK",. 
-00035740: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00035750: 2022 7265 7375 6c74 223a 207b 0a20 2020   "result": {.   
-00035760: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00035770: 2020 2022 6f72 6465 7249 6422 3a20 2263     "orderId": "c
-00035780: 3666 3035 3564 392d 3766 3231 2d34 3037  6f055d9-7f21-407
-00035790: 392d 3931 3364 2d65 3635 3233 6139 6366  9-913d-e6523a9cf
-000357a0: 6666 6122 2c0a 2020 2020 2020 2020 2320  ffa",.        # 
-000357b0: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
-000357c0: 6572 4c69 6e6b 4964 223a 2022 6c69 6e65  erLinkId": "line
-000357d0: 6172 2d30 3034 220a 2020 2020 2020 2020  ar-004".        
-000357e0: 2320 2020 2020 2020 2020 7d2c 0a20 2020  #         },.   
-000357f0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00035800: 7265 7445 7874 496e 666f 223a 207b 7d2c  retExtInfo": {},
-00035810: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00035820: 2020 2022 7469 6d65 223a 2031 3637 3232     "time": 16722
-00035830: 3137 3337 3731 3634 0a20 2020 2020 2020  17377164.       
-00035840: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
-00035850: 2023 0a20 2020 2020 2020 2072 6573 756c   #.        resul
-00035860: 7420 3d20 7365 6c66 2e73 6166 655f 7661  t = self.safe_va
-00035870: 6c75 6528 7265 7370 6f6e 7365 2c20 2772  lue(response, 'r
-00035880: 6573 756c 7427 2c20 7b7d 290a 2020 2020  esult', {}).    
-00035890: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-000358a0: 7061 7273 655f 6f72 6465 7228 7265 7375  parse_order(resu
-000358b0: 6c74 2c20 6d61 726b 6574 290a 0a20 2020  lt, market)..   
-000358c0: 2064 6566 2063 616e 6365 6c5f 7370 6f74   def cancel_spot
-000358d0: 5f6f 7264 6572 2873 656c 662c 2069 643a  _order(self, id:
-000358e0: 2073 7472 2c20 7379 6d62 6f6c 3a20 4f70   str, symbol: Op
-000358f0: 7469 6f6e 616c 5b73 7472 5d20 3d20 4e6f  tional[str] = No
-00035900: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
-00035910: 2020 2020 2020 2020 7365 6c66 2e6c 6f61          self.loa
-00035920: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
-00035930: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
-00035940: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
-00035950: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
-00035960: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-00035970: 2023 2027 6f72 6465 725f 6c69 6e6b 5f69   # 'order_link_i
-00035980: 6427 3a20 2773 7472 696e 6727 2c20 2023  d': 'string',  #
-00035990: 206f 6e65 206f 6620 6f72 6465 725f 6964   one of order_id
-000359a0: 2c20 7374 6f70 5f6f 7264 6572 5f69 6420  , stop_order_id 
-000359b0: 6f72 206f 7264 6572 5f6c 696e 6b5f 6964  or order_link_id
-000359c0: 2069 7320 7265 7175 6972 6564 0a20 2020   is required.   
-000359d0: 2020 2020 2020 2020 2023 2027 6f72 6465           # 'orde
-000359e0: 7249 6427 3a20 6964 0a20 2020 2020 2020  rId': id.       
-000359f0: 207d 0a20 2020 2020 2020 2069 6620 6964   }.        if id
-00035a00: 2069 7320 6e6f 7420 4e6f 6e65 3a20 2023   is not None:  #
-00035a10: 2054 6865 2075 7365 7220 6361 6e20 616c   The user can al
-00035a20: 736f 2075 7365 2061 7267 756d 656e 7420  so use argument 
-00035a30: 7061 7261 6d73 5b22 6f72 6465 725f 6c69  params["order_li
-00035a40: 6e6b 5f69 6422 5d0a 2020 2020 2020 2020  nk_id"].        
-00035a50: 2020 2020 7265 7175 6573 745b 276f 7264      request['ord
-00035a60: 6572 4964 275d 203d 2069 640a 2020 2020  erId'] = id.    
-00035a70: 2020 2020 7265 7370 6f6e 7365 203d 2073      response = s
-00035a80: 656c 662e 7072 6976 6174 6550 6f73 7453  elf.privatePostS
-00035a90: 706f 7456 3350 7269 7661 7465 4361 6e63  potV3PrivateCanc
-00035aa0: 656c 4f72 6465 7228 7365 6c66 2e65 7874  elOrder(self.ext
-00035ab0: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
-00035ac0: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
-00035ad0: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
-00035ae0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00035af0: 2020 2272 6574 436f 6465 223a 2022 3022    "retCode": "0"
-00035b00: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00035b10: 2020 2020 2272 6574 4d73 6722 3a20 224f      "retMsg": "O
-00035b20: 4b22 2c0a 2020 2020 2020 2020 2320 2020  K",.        #   
-00035b30: 2020 2020 2020 2272 6573 756c 7422 3a20        "result": 
-00035b40: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-00035b50: 2020 2020 2020 2020 226f 7264 6572 4964          "orderId
-00035b60: 223a 2022 3132 3735 3034 3632 3438 3538  ": "127504624858
-00035b70: 3534 3134 3134 3422 2c0a 2020 2020 2020  5414144",.      
-00035b80: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00035b90: 226f 7264 6572 4c69 6e6b 4964 223a 2022  "orderLinkId": "
-00035ba0: 3136 3636 3733 3333 3537 3433 3436 3137  1666733357434617
-00035bb0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00035bc0: 2020 2020 2020 2020 2022 7379 6d62 6f6c           "symbol
-00035bd0: 223a 2022 4141 5645 5553 4454 222c 0a20  ": "AAVEUSDT",. 
-00035be0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00035bf0: 2020 2020 2022 7374 6174 7573 223a 2022       "status": "
-00035c00: 4e45 5722 2c0a 2020 2020 2020 2020 2320  NEW",.        # 
-00035c10: 2020 2020 2020 2020 2020 2020 2261 6363              "acc
-00035c20: 6f75 6e74 4964 223a 2022 3133 3338 3034  ountId": "133804
-00035c30: 3334 222c 0a20 2020 2020 2020 2023 2020  34",.        #  
-00035c40: 2020 2020 2020 2020 2020 2022 6372 6561             "crea
-00035c50: 7465 5469 6d65 223a 2022 3136 3636 3733  teTime": "166673
-00035c60: 3333 3537 3433 3822 2c0a 2020 2020 2020  3357438",.      
-00035c70: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00035c80: 226f 7264 6572 5072 6963 6522 3a20 2238  "orderPrice": "8
-00035c90: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-00035ca0: 2020 2020 2020 2020 2020 226f 7264 6572            "order
-00035cb0: 5174 7922 3a20 2230 2e31 3122 2c0a 2020  Qty": "0.11",.  
-00035cc0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00035cd0: 2020 2020 2265 7865 6351 7479 223a 2022      "execQty": "
-00035ce0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-00035cf0: 2020 2020 2020 2020 2020 2274 696d 6549            "timeI
-00035d00: 6e46 6f72 6365 223a 2022 4754 4322 2c0a  nForce": "GTC",.
-00035d10: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00035d20: 2020 2020 2020 226f 7264 6572 5479 7065        "orderType
-00035d30: 223a 2022 4c49 4d49 5422 2c0a 2020 2020  ": "LIMIT",.    
-00035d40: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00035d50: 2020 2273 6964 6522 3a20 2242 5559 222c    "side": "BUY",
-00035d60: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00035d70: 2020 2020 2020 2022 6f72 6465 7243 6174         "orderCat
-00035d80: 6567 6f72 7922 3a20 2230 220a 2020 2020  egory": "0".    
-00035d90: 2020 2020 2320 2020 2020 2020 2020 7d2c      #         },
-00035da0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00035db0: 2020 2022 7265 7445 7874 4d61 7022 3a20     "retExtMap": 
-00035dc0: 7b7d 2c0a 2020 2020 2020 2020 2320 2020  {},.        #   
-00035dd0: 2020 2020 2020 2272 6574 4578 7449 6e66        "retExtInf
-00035de0: 6f22 3a20 6e75 6c6c 2c0a 2020 2020 2020  o": null,.      
-00035df0: 2020 2320 2020 2020 2020 2020 2274 696d    #         "tim
-00035e00: 6522 3a20 2231 3636 3637 3333 3833 3934  e": "16667338394
-00035e10: 3933 220a 2020 2020 2020 2020 2320 2020  93".        #   
-00035e20: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-00035e30: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
-00035e40: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
-00035e50: 6573 706f 6e73 652c 2027 7265 7375 6c74  esponse, 'result
-00035e60: 272c 207b 7d29 0a20 2020 2020 2020 2072  ', {}).        r
-00035e70: 6574 7572 6e20 7365 6c66 2e70 6172 7365  eturn self.parse
-00035e80: 5f6f 7264 6572 2872 6573 756c 742c 206d  _order(result, m
-00035e90: 6172 6b65 7429 0a0a 2020 2020 6465 6620  arket)..    def 
-00035ea0: 6361 6e63 656c 5f75 6e69 6669 6564 5f6d  cancel_unified_m
-00035eb0: 6172 6769 6e5f 6f72 6465 7228 7365 6c66  argin_order(self
-00035ec0: 2c20 6964 3a20 7374 722c 2073 796d 626f  , id: str, symbo
-00035ed0: 6c3a 204f 7074 696f 6e61 6c5b 7374 725d  l: Optional[str]
-00035ee0: 203d 204e 6f6e 652c 2070 6172 616d 733d   = None, params=
-00035ef0: 7b7d 293a 0a20 2020 2020 2020 2069 6620  {}):.        if 
-00035f00: 7379 6d62 6f6c 2069 7320 4e6f 6e65 3a0a  symbol is None:.
-00035f10: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00035f20: 6520 4172 6775 6d65 6e74 7352 6571 7569  e ArgumentsRequi
-00035f30: 7265 6428 7365 6c66 2e69 6420 2b20 2720  red(self.id + ' 
-00035f40: 6361 6e63 656c 556e 6966 6965 644d 6172  cancelUnifiedMar
-00035f50: 6769 6e4f 7264 6572 2829 2072 6571 7569  ginOrder() requi
-00035f60: 7265 7320 6120 7379 6d62 6f6c 2061 7267  res a symbol arg
-00035f70: 756d 656e 7427 290a 2020 2020 2020 2020  ument').        
-00035f80: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
-00035f90: 7328 290a 2020 2020 2020 2020 6d61 726b  s().        mark
-00035fa0: 6574 203d 2073 656c 662e 6d61 726b 6574  et = self.market
-00035fb0: 2873 796d 626f 6c29 0a20 2020 2020 2020  (symbol).       
-00035fc0: 2072 6571 7565 7374 203d 207b 0a20 2020   request = {.   
-00035fd0: 2020 2020 2020 2020 2027 7379 6d62 6f6c           'symbol
-00035fe0: 273a 206d 6172 6b65 745b 2769 6427 5d2c  ': market['id'],
-00035ff0: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
-00036000: 6f72 6465 724c 696e 6b49 6427 3a20 2773  orderLinkId': 's
-00036010: 7472 696e 6727 2c0a 2020 2020 2020 2020  tring',.        
-00036020: 2020 2020 2320 276f 7264 6572 4964 273a      # 'orderId':
-00036030: 2069 642c 0a20 2020 2020 2020 2020 2020   id,.           
-00036040: 2023 2063 6f6e 6469 7469 6f6e 616c 206f   # conditional o
-00036050: 7264 6572 730a 2020 2020 2020 2020 2020  rders.          
-00036060: 2020 2320 276f 7264 6572 4669 6c74 6572    # 'orderFilter
-00036070: 273a 2027 272c 0a20 2020 2020 2020 2020  ': '',.         
-00036080: 2020 2023 2027 6361 7465 676f 7279 273a     # 'category':
-00036090: 2027 272c 0a20 2020 2020 2020 207d 0a20   '',.        }. 
-000360a0: 2020 2020 2020 2069 7353 746f 7020 3d20         isStop = 
-000360b0: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
-000360c0: 7061 7261 6d73 2c20 2773 746f 7027 2c20  params, 'stop', 
-000360d0: 4661 6c73 6529 0a20 2020 2020 2020 2070  False).        p
-000360e0: 6172 616d 7320 3d20 7365 6c66 2e6f 6d69  arams = self.omi
-000360f0: 7428 7061 7261 6d73 2c20 5b27 7374 6f70  t(params, ['stop
-00036100: 275d 290a 2020 2020 2020 2020 7265 7175  ']).        requ
-00036110: 6573 745b 276f 7264 6572 4669 6c74 6572  est['orderFilter
-00036120: 275d 203d 2027 5374 6f70 4f72 6465 7227  '] = 'StopOrder'
-00036130: 2069 6620 6973 5374 6f70 2065 6c73 6520   if isStop else 
-00036140: 274f 7264 6572 270a 2020 2020 2020 2020  'Order'.        
-00036150: 6966 2069 6420 6973 206e 6f74 204e 6f6e  if id is not Non
-00036160: 653a 2020 2320 5468 6520 7573 6572 2063  e:  # The user c
-00036170: 616e 2061 6c73 6f20 7573 6520 6172 6775  an also use argu
-00036180: 6d65 6e74 2070 6172 616d 735b 226f 7264  ment params["ord
-00036190: 6572 4c69 6e6b 4964 225d 0a20 2020 2020  erLinkId"].     
-000361a0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-000361b0: 6f72 6465 7249 6427 5d20 3d20 6964 0a20  orderId'] = id. 
-000361c0: 2020 2020 2020 2069 6620 6d61 726b 6574         if market
-000361d0: 5b27 6f70 7469 6f6e 275d 3a0a 2020 2020  ['option']:.    
-000361e0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-000361f0: 2763 6174 6567 6f72 7927 5d20 3d20 276f  'category'] = 'o
-00036200: 7074 696f 6e27 0a20 2020 2020 2020 2065  ption'.        e
-00036210: 6c69 6620 6d61 726b 6574 5b27 6c69 6e65  lif market['line
-00036220: 6172 275d 3a0a 2020 2020 2020 2020 2020  ar']:.          
-00036230: 2020 7265 7175 6573 745b 2763 6174 6567    request['categ
-00036240: 6f72 7927 5d20 3d20 276c 696e 6561 7227  ory'] = 'linear'
-00036250: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-00036260: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00036270: 204e 6f74 5375 7070 6f72 7465 6428 7365   NotSupported(se
-00036280: 6c66 2e69 6420 2b20 2720 6361 6e63 656c  lf.id + ' cancel
-00036290: 556e 6966 6965 644d 6172 6769 6e4f 7264  UnifiedMarginOrd
-000362a0: 6572 2829 2064 6f65 7320 6e6f 7420 616c  er() does not al
-000362b0: 6c6f 7720 696e 7665 7273 6520 6d61 726b  low inverse mark
-000362c0: 6574 206f 7264 6572 7320 666f 7220 2720  et orders for ' 
-000362d0: 2b20 7379 6d62 6f6c 202b 2027 206d 6172  + symbol + ' mar
-000362e0: 6b65 7473 2729 0a20 2020 2020 2020 2072  kets').        r
-000362f0: 6573 706f 6e73 6520 3d20 7365 6c66 2e70  esponse = self.p
-00036300: 7269 7661 7465 506f 7374 556e 6966 6965  rivatePostUnifie
-00036310: 6456 3350 7269 7661 7465 4f72 6465 7243  dV3PrivateOrderC
-00036320: 616e 6365 6c28 7365 6c66 2e65 7874 656e  ancel(self.exten
-00036330: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
-00036340: 7329 290a 2020 2020 2020 2020 230a 2020  s)).        #.  
-00036350: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
-00036360: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00036370: 2272 6574 436f 6465 223a 2030 2c0a 2020  "retCode": 0,.  
-00036380: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00036390: 2272 6574 4d73 6722 3a20 224f 4b22 2c0a  "retMsg": "OK",.
-000363a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000363b0: 2020 2272 6573 756c 7422 3a20 7b0a 2020    "result": {.  
-000363c0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000363d0: 2020 2020 226f 7264 6572 4964 223a 2022      "orderId": "
-000363e0: 3432 6338 3664 3636 3333 3165 3431 3939  42c86d66331e4199
-000363f0: 3864 3132 6332 3434 3063 6539 3063 3161  8d12c2440ce90c1a
-00036400: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00036410: 2020 2020 2020 2020 2022 6f72 6465 724c           "orderL
-00036420: 696e 6b49 6422 3a20 2265 3830 6435 3538  inkId": "e80d558
-00036430: 652d 6564 220a 2020 2020 2020 2020 2320  e-ed".        # 
-00036440: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-00036450: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
-00036460: 2020 230a 2020 2020 2020 2020 7265 7375    #.        resu
-00036470: 6c74 203d 2073 656c 662e 7361 6665 5f76  lt = self.safe_v
-00036480: 616c 7565 2872 6573 706f 6e73 652c 2027  alue(response, '
-00036490: 7265 7375 6c74 272c 207b 7d29 0a20 2020  result', {}).   
-000364a0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-000364b0: 2e70 6172 7365 5f6f 7264 6572 2872 6573  .parse_order(res
-000364c0: 756c 742c 206d 6172 6b65 7429 0a0a 2020  ult, market)..  
-000364d0: 2020 6465 6620 6361 6e63 656c 5f75 7364    def cancel_usd
-000364e0: 635f 6f72 6465 7228 7365 6c66 2c20 6964  c_order(self, id
-000364f0: 3a20 7374 722c 2073 796d 626f 6c3a 204f  : str, symbol: O
-00036500: 7074 696f 6e61 6c5b 7374 725d 203d 204e  ptional[str] = N
-00036510: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
-00036520: 0a20 2020 2020 2020 2069 6620 7379 6d62  .        if symb
-00036530: 6f6c 2069 7320 4e6f 6e65 3a0a 2020 2020  ol is None:.    
-00036540: 2020 2020 2020 2020 7261 6973 6520 4172          raise Ar
-00036550: 6775 6d65 6e74 7352 6571 7569 7265 6428  gumentsRequired(
-00036560: 7365 6c66 2e69 6420 2b20 2720 6361 6e63  self.id + ' canc
-00036570: 656c 5553 4443 4f72 6465 7228 2920 7265  elUSDCOrder() re
-00036580: 7175 6972 6573 2061 2073 796d 626f 6c20  quires a symbol 
-00036590: 6172 6775 6d65 6e74 2729 0a20 2020 2020  argument').     
-000365a0: 2020 2073 656c 662e 6c6f 6164 5f6d 6172     self.load_mar
-000365b0: 6b65 7473 2829 0a20 2020 2020 2020 206d  kets().        m
-000365c0: 6172 6b65 7420 3d20 7365 6c66 2e6d 6172  arket = self.mar
-000365d0: 6b65 7428 7379 6d62 6f6c 290a 2020 2020  ket(symbol).    
-000365e0: 2020 2020 7265 7175 6573 7420 3d20 7b0a      request = {.
-000365f0: 2020 2020 2020 2020 2020 2020 2773 796d              'sym
-00036600: 626f 6c27 3a20 6d61 726b 6574 5b27 6964  bol': market['id
-00036610: 275d 2c0a 2020 2020 2020 2020 2020 2020  '],.            
-00036620: 2320 276f 7264 6572 4c69 6e6b 4964 273a  # 'orderLinkId':
-00036630: 2027 7374 7269 6e67 272c 2020 2320 6f6e   'string',  # on
-00036640: 6520 6f66 206f 7264 6572 5f69 642c 2073  e of order_id, s
-00036650: 746f 705f 6f72 6465 725f 6964 206f 7220  top_order_id or 
-00036660: 6f72 6465 725f 6c69 6e6b 5f69 6420 6973  order_link_id is
-00036670: 2072 6571 7569 7265 640a 2020 2020 2020   required.      
-00036680: 2020 2020 2020 2320 276f 7264 6572 4964        # 'orderId
-00036690: 273a 2069 642c 0a20 2020 2020 2020 207d  ': id,.        }
-000366a0: 0a20 2020 2020 2020 2069 7353 746f 7020  .        isStop 
-000366b0: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-000366c0: 6528 7061 7261 6d73 2c20 2773 746f 7027  e(params, 'stop'
-000366d0: 2c20 4661 6c73 6529 0a20 2020 2020 2020  , False).       
-000366e0: 2070 6172 616d 7320 3d20 7365 6c66 2e6f   params = self.o
-000366f0: 6d69 7428 7061 7261 6d73 2c20 5b27 7374  mit(params, ['st
-00036700: 6f70 275d 290a 2020 2020 2020 2020 6d65  op']).        me
-00036710: 7468 6f64 203d 204e 6f6e 650a 2020 2020  thod = None.    
-00036720: 2020 2020 6966 2069 6420 6973 206e 6f74      if id is not
-00036730: 204e 6f6e 653a 2020 2320 5468 6520 7573   None:  # The us
-00036740: 6572 2063 616e 2061 6c73 6f20 7573 6520  er can also use 
-00036750: 6172 6775 6d65 6e74 2070 6172 616d 735b  argument params[
-00036760: 226f 7264 6572 5f6c 696e 6b5f 6964 225d  "order_link_id"]
-00036770: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-00036780: 7565 7374 5b27 6f72 6465 7249 6427 5d20  uest['orderId'] 
-00036790: 3d20 6964 0a20 2020 2020 2020 2069 6620  = id.        if 
-000367a0: 6d61 726b 6574 5b27 6f70 7469 6f6e 275d  market['option']
-000367b0: 3a0a 2020 2020 2020 2020 2020 2020 6d65  :.            me
-000367c0: 7468 6f64 203d 2027 7072 6976 6174 6550  thod = 'privateP
-000367d0: 6f73 744f 7074 696f 6e55 7364 634f 7065  ostOptionUsdcOpe
-000367e0: 6e61 7069 5072 6976 6174 6556 3143 616e  napiPrivateV1Can
-000367f0: 6365 6c4f 7264 6572 270a 2020 2020 2020  celOrder'.      
-00036800: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00036810: 2020 2020 6d65 7468 6f64 203d 2027 7072      method = 'pr
-00036820: 6976 6174 6550 6f73 7450 6572 7065 7475  ivatePostPerpetu
-00036830: 616c 5573 6463 4f70 656e 6170 6950 7269  alUsdcOpenapiPri
-00036840: 7661 7465 5631 4361 6e63 656c 4f72 6465  vateV1CancelOrde
-00036850: 7227 0a20 2020 2020 2020 2020 2020 2072  r'.            r
-00036860: 6571 7565 7374 5b27 6f72 6465 7246 696c  equest['orderFil
-00036870: 7465 7227 5d20 3d20 2753 746f 704f 7264  ter'] = 'StopOrd
-00036880: 6572 2720 6966 2069 7353 746f 7020 656c  er' if isStop el
-00036890: 7365 2027 4f72 6465 7227 0a20 2020 2020  se 'Order'.     
-000368a0: 2020 2072 6573 706f 6e73 6520 3d20 6765     response = ge
-000368b0: 7461 7474 7228 7365 6c66 2c20 6d65 7468  tattr(self, meth
-000368c0: 6f64 2928 7365 6c66 2e65 7874 656e 6428  od)(self.extend(
-000368d0: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
-000368e0: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
-000368f0: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-00036900: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-00036910: 6574 436f 6465 223a 2030 2c0a 2020 2020  etCode": 0,.    
-00036920: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-00036930: 6574 4d73 6722 3a20 224f 4b22 2c0a 2020  etMsg": "OK",.  
-00036940: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00036950: 2272 6573 756c 7422 3a20 7b0a 2020 2020  "result": {.    
-00036960: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00036970: 2020 226f 7574 5265 7175 6573 7449 6422    "outRequestId"
-00036980: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
-00036990: 2020 2020 2020 2020 2020 2020 2273 796d              "sym
-000369a0: 626f 6c22 3a20 2242 5443 2d31 334d 4159  bol": "BTC-13MAY
-000369b0: 3232 2d34 3030 3030 2d43 222c 0a20 2020  22-40000-C",.   
-000369c0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000369d0: 2020 2022 6f72 6465 7249 6422 3a20 2238     "orderId": "8
-000369e0: 6336 3564 6639 312d 3931 6663 2d34 3631  c65df91-91fc-461
-000369f0: 642d 3962 3134 2d37 3836 3337 3965 6631  d-9b14-786379ef1
-00036a00: 3338 6322 2c0a 2020 2020 2020 2020 2320  38c",.        # 
-00036a10: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
-00036a20: 6572 4c69 6e6b 4964 223a 2022 220a 2020  erLinkId": "".  
-00036a30: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00036a40: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
-00036a50: 2020 2020 2022 7265 7445 7874 4d61 7022       "retExtMap"
-00036a60: 3a20 7b7d 0a20 2020 2020 2020 2023 2020  : {}.        #  
-00036a70: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
-00036a80: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
-00036a90: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
-00036aa0: 7265 7370 6f6e 7365 2c20 2772 6573 756c  response, 'resul
-00036ab0: 7427 2c20 7b7d 290a 2020 2020 2020 2020  t', {}).        
-00036ac0: 7265 7475 726e 2073 656c 662e 7061 7273  return self.pars
-00036ad0: 655f 6f72 6465 7228 7265 7375 6c74 2c20  e_order(result, 
-00036ae0: 6d61 726b 6574 290a 0a20 2020 2064 6566  market)..    def
-00036af0: 2063 616e 6365 6c5f 6465 7269 7661 7469   cancel_derivati
-00036b00: 7665 735f 6f72 6465 7228 7365 6c66 2c20  ves_order(self, 
-00036b10: 6964 3a20 7374 722c 2073 796d 626f 6c3a  id: str, symbol:
-00036b20: 204f 7074 696f 6e61 6c5b 7374 725d 203d   Optional[str] =
-00036b30: 204e 6f6e 652c 2070 6172 616d 733d 7b7d   None, params={}
-00036b40: 293a 0a20 2020 2020 2020 2069 6620 7379  ):.        if sy
-00036b50: 6d62 6f6c 2069 7320 4e6f 6e65 3a0a 2020  mbol is None:.  
-00036b60: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00036b70: 4172 6775 6d65 6e74 7352 6571 7569 7265  ArgumentsRequire
-00036b80: 6428 7365 6c66 2e69 6420 2b20 2720 6361  d(self.id + ' ca
-00036b90: 6e63 656c 4465 7269 7661 7469 7665 734f  ncelDerivativesO
-00036ba0: 7264 6572 2829 2072 6571 7569 7265 7320  rder() requires 
-00036bb0: 6120 7379 6d62 6f6c 2061 7267 756d 656e  a symbol argumen
-00036bc0: 7427 290a 2020 2020 2020 2020 7365 6c66  t').        self
-00036bd0: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
-00036be0: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
-00036bf0: 2073 656c 662e 6d61 726b 6574 2873 796d   self.market(sym
-00036c00: 626f 6c29 0a20 2020 2020 2020 2072 6571  bol).        req
-00036c10: 7565 7374 203d 207b 0a20 2020 2020 2020  uest = {.       
-00036c20: 2020 2020 2027 7379 6d62 6f6c 273a 206d       'symbol': m
-00036c30: 6172 6b65 745b 2769 6427 5d2c 0a20 2020  arket['id'],.   
-00036c40: 2020 2020 2020 2020 2027 6f72 6465 7249           'orderI
-00036c50: 6427 3a20 6964 2c0a 2020 2020 2020 2020  d': id,.        
-00036c60: 7d0a 2020 2020 2020 2020 7265 7370 6f6e  }.        respon
-00036c70: 7365 203d 2073 656c 662e 7072 6976 6174  se = self.privat
-00036c80: 6550 6f73 7443 6f6e 7472 6163 7456 3350  ePostContractV3P
-00036c90: 7269 7661 7465 4f72 6465 7243 616e 6365  rivateOrderCance
-00036ca0: 6c28 7365 6c66 2e65 7874 656e 6428 7265  l(self.extend(re
-00036cb0: 7175 6573 742c 2070 6172 616d 7329 290a  quest, params)).
-00036cc0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-00036cd0: 2020 2320 636f 6e74 7261 6374 2076 330a    # contract v3.
-00036ce0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-00036cf0: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
-00036d00: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
-00036d10: 436f 6465 223a 302c 0a20 2020 2020 2020  Code":0,.       
-00036d20: 2023 2020 2020 2020 2020 2022 7265 744d   #         "retM
-00036d30: 7367 223a 224f 4b22 2c0a 2020 2020 2020  sg":"OK",.      
-00036d40: 2020 2320 2020 2020 2020 2020 2272 6573    #         "res
-00036d50: 756c 7422 3a7b 0a20 2020 2020 2020 2023  ult":{.        #
-00036d60: 2020 2020 2020 2020 2020 2020 2022 6f72               "or
-00036d70: 6465 7249 6422 3a20 2234 3033 3034 3330  derId": "4030430
-00036d80: 642d 3164 6261 2d34 3133 342d 6163 3737  d-1dba-4134-ac77
-00036d90: 2d33 6438 3163 3134 6161 6130 3022 2c0a  -3d81c14aaa00",.
+00028810: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
+00028820: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00028830: 2022 6f72 6465 7249 6422 3a22 3062 3334   "orderId":"0b34
+00028840: 3939 6134 2d39 3639 312d 3430 6563 2d62  99a4-9691-40ec-b
+00028850: 3262 392d 3764 3934 6565 3031 3635 6666  2b9-7d94ee0165ff
+00028860: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00028870: 2020 2020 2022 6f72 6465 724c 696e 6b49       "orderLinkI
+00028880: 6422 3a22 222c 0a20 2020 2020 2020 2023  d":"",.        #
+00028890: 2020 2020 2020 2020 2022 6d6d 7022 3a66           "mmp":f
+000288a0: 616c 7365 2c0a 2020 2020 2020 2020 2320  alse,.        # 
+000288b0: 2020 2020 2020 2020 2273 796d 626f 6c22          "symbol"
+000288c0: 3a22 534f 4c50 4552 5022 2c0a 2020 2020  :"SOLPERP",.    
+000288d0: 2020 2020 2320 2020 2020 2020 2020 226f      #         "o
+000288e0: 7264 6572 5479 7065 223a 224d 6172 6b65  rderType":"Marke
+000288f0: 7422 2c0a 2020 2020 2020 2020 2320 2020  t",.        #   
+00028900: 2020 2020 2020 2273 6964 6522 3a22 4275        "side":"Bu
+00028910: 7922 2c0a 2020 2020 2020 2020 2320 2020  y",.        #   
+00028920: 2020 2020 2020 226f 7264 6572 5174 7922        "orderQty"
+00028930: 3a22 302e 3130 3030 3030 3030 222c 0a20  :"0.10000000",. 
+00028940: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00028950: 2022 6f72 6465 7250 7269 6365 223a 2232   "orderPrice":"2
+00028960: 332e 3033 3022 2c0a 2020 2020 2020 2020  3.030",.        
+00028970: 2320 2020 2020 2020 2020 2269 7622 3a22  #         "iv":"
+00028980: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00028990: 2020 2020 2020 2274 696d 6549 6e46 6f72        "timeInFor
+000289a0: 6365 223a 2249 6d6d 6564 6961 7465 4f72  ce":"ImmediateOr
+000289b0: 4361 6e63 656c 222c 0a20 2020 2020 2020  Cancel",.       
+000289c0: 2023 2020 2020 2020 2020 2022 6f72 6465   #         "orde
+000289d0: 7253 7461 7475 7322 3a22 4372 6561 7465  rStatus":"Create
+000289e0: 6422 2c0a 2020 2020 2020 2020 2320 2020  d",.        #   
+000289f0: 2020 2020 2020 2263 7265 6174 6564 4174        "createdAt
+00028a00: 223a 2231 3638 3333 3830 3735 3231 3436  ":"1683380752146
+00028a10: 3536 3822 2c0a 2020 2020 2020 2020 2320  568",.        # 
+00028a20: 2020 2020 2020 2020 2262 6173 6550 7269          "basePri
+00028a30: 6365 223a 2230 2e30 3030 222c 0a20 2020  ce":"0.000",.   
+00028a40: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00028a50: 7472 6967 6765 7250 7269 6365 223a 2230  triggerPrice":"0
+00028a60: 2e30 3030 222c 0a20 2020 2020 2020 2023  .000",.        #
+00028a70: 2020 2020 2020 2020 2022 7461 6b65 5072           "takePr
+00028a80: 6f66 6974 223a 2230 2e30 3030 222c 0a20  ofit":"0.000",. 
+00028a90: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00028aa0: 2022 7374 6f70 4c6f 7373 223a 2230 2e30   "stopLoss":"0.0
+00028ab0: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+00028ac0: 2020 2020 2020 2022 736c 5472 6967 6765         "slTrigge
+00028ad0: 7242 7922 3a22 554e 4b4e 4f57 4e22 2c0a  rBy":"UNKNOWN",.
+00028ae0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00028af0: 2020 2274 7054 7269 6767 6572 4279 223a    "tpTriggerBy":
+00028b00: 2255 4e4b 4e4f 574e 220a 2020 2020 2020  "UNKNOWN".      
+00028b10: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
+00028b20: 2020 230a 2020 2020 2020 2020 6d61 726b    #.        mark
+00028b30: 6574 4964 203d 2073 656c 662e 7361 6665  etId = self.safe
+00028b40: 5f73 7472 696e 6728 6f72 6465 722c 2027  _string(order, '
+00028b50: 7379 6d62 6f6c 2729 0a20 2020 2020 2020  symbol').       
+00028b60: 206d 6172 6b65 7454 7970 6520 3d20 2763   marketType = 'c
+00028b70: 6f6e 7472 6163 7427 0a20 2020 2020 2020  ontract'.       
+00028b80: 2069 6620 6d61 726b 6574 2069 7320 6e6f   if market is no
+00028b90: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00028ba0: 2020 2020 6d61 726b 6574 5479 7065 203d      marketType =
+00028bb0: 206d 6172 6b65 745b 2774 7970 6527 5d0a   market['type'].
+00028bc0: 2020 2020 2020 2020 6361 7465 676f 7279          category
+00028bd0: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+00028be0: 696e 6728 6f72 6465 722c 2027 6361 7465  ing(order, 'cate
+00028bf0: 676f 7279 2729 0a20 2020 2020 2020 2069  gory').        i
+00028c00: 6620 6361 7465 676f 7279 2069 7320 6e6f  f category is no
+00028c10: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00028c20: 2020 2020 6966 2063 6174 6567 6f72 7920      if category 
+00028c30: 3d3d 2027 7370 6f74 273a 0a20 2020 2020  == 'spot':.     
+00028c40: 2020 2020 2020 2020 2020 206d 6172 6b65             marke
+00028c50: 7454 7970 6520 3d20 2773 706f 7427 0a20  tType = 'spot'. 
+00028c60: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
+00028c70: 7365 6c66 2e73 6166 655f 6d61 726b 6574  self.safe_market
+00028c80: 286d 6172 6b65 7449 642c 206d 6172 6b65  (marketId, marke
+00028c90: 742c 204e 6f6e 652c 206d 6172 6b65 7454  t, None, marketT
+00028ca0: 7970 6529 0a20 2020 2020 2020 2073 796d  ype).        sym
+00028cb0: 626f 6c20 3d20 6d61 726b 6574 5b27 7379  bol = market['sy
+00028cc0: 6d62 6f6c 275d 0a20 2020 2020 2020 2074  mbol'].        t
+00028cd0: 696d 6573 7461 6d70 203d 204e 6f6e 650a  imestamp = None.
+00028ce0: 2020 2020 2020 2020 6966 2027 6372 6561          if 'crea
+00028cf0: 7465 6454 696d 6527 2069 6e20 6f72 6465  tedTime' in orde
+00028d00: 723a 0a20 2020 2020 2020 2020 2020 2074  r:.            t
+00028d10: 696d 6573 7461 6d70 203d 2073 656c 662e  imestamp = self.
+00028d20: 7361 6665 5f69 6e74 6567 6572 286f 7264  safe_integer(ord
+00028d30: 6572 2c20 2763 7265 6174 6564 5469 6d65  er, 'createdTime
+00028d40: 2729 0a20 2020 2020 2020 2065 6c69 6620  ').        elif 
+00028d50: 2763 7265 6174 6564 4174 2720 696e 206f  'createdAt' in o
+00028d60: 7264 6572 3a0a 2020 2020 2020 2020 2020  rder:.          
+00028d70: 2020 7469 6d65 7374 616d 7020 3d20 7365    timestamp = se
+00028d80: 6c66 2e73 6166 655f 696e 7465 6765 725f  lf.safe_integer_
+00028d90: 7072 6f64 7563 7428 6f72 6465 722c 2027  product(order, '
+00028da0: 6372 6561 7465 6441 7427 2c20 302e 3030  createdAt', 0.00
+00028db0: 3129 0a20 2020 2020 2020 2069 6420 3d20  1).        id = 
+00028dc0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+00028dd0: 286f 7264 6572 2c20 276f 7264 6572 4964  (order, 'orderId
+00028de0: 2729 0a20 2020 2020 2020 2074 7970 6520  ').        type 
+00028df0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+00028e00: 6e67 5f6c 6f77 6572 286f 7264 6572 2c20  ng_lower(order, 
+00028e10: 276f 7264 6572 5479 7065 2729 0a20 2020  'orderType').   
+00028e20: 2020 2020 2070 7269 6365 203d 2073 656c       price = sel
+00028e30: 662e 7361 6665 5f73 7472 696e 675f 3228  f.safe_string_2(
+00028e40: 6f72 6465 722c 2027 7072 6963 6527 2c20  order, 'price', 
+00028e50: 276f 7264 6572 5072 6963 6527 290a 2020  'orderPrice').  
+00028e60: 2020 2020 2020 616d 6f75 6e74 203d 2073        amount = s
+00028e70: 656c 662e 7361 6665 5f73 7472 696e 675f  elf.safe_string_
+00028e80: 3228 6f72 6465 722c 2027 7174 7927 2c20  2(order, 'qty', 
+00028e90: 276f 7264 6572 5174 7927 290a 2020 2020  'orderQty').    
+00028ea0: 2020 2020 636f 7374 203d 2073 656c 662e      cost = self.
+00028eb0: 7361 6665 5f73 7472 696e 6728 6f72 6465  safe_string(orde
+00028ec0: 722c 2027 6375 6d45 7865 6356 616c 7565  r, 'cumExecValue
+00028ed0: 2729 0a20 2020 2020 2020 2066 696c 6c65  ').        fille
+00028ee0: 6420 3d20 7365 6c66 2e73 6166 655f 7374  d = self.safe_st
+00028ef0: 7269 6e67 286f 7264 6572 2c20 2763 756d  ring(order, 'cum
+00028f00: 4578 6563 5174 7927 290a 2020 2020 2020  ExecQty').      
+00028f10: 2020 7265 6d61 696e 696e 6720 3d20 7365    remaining = se
+00028f20: 6c66 2e73 6166 655f 7374 7269 6e67 286f  lf.safe_string(o
+00028f30: 7264 6572 2c20 276c 6561 7665 7351 7479  rder, 'leavesQty
+00028f40: 2729 0a20 2020 2020 2020 206c 6173 7454  ').        lastT
+00028f50: 7261 6465 5469 6d65 7374 616d 7020 3d20  radeTimestamp = 
+00028f60: 7365 6c66 2e73 6166 655f 696e 7465 6765  self.safe_intege
+00028f70: 7228 6f72 6465 722c 2027 7570 6461 7465  r(order, 'update
+00028f80: 6454 696d 6527 290a 2020 2020 2020 2020  dTime').        
+00028f90: 7261 7753 7461 7475 7320 3d20 7365 6c66  rawStatus = self
+00028fa0: 2e73 6166 655f 7374 7269 6e67 286f 7264  .safe_string(ord
+00028fb0: 6572 2c20 276f 7264 6572 5374 6174 7573  er, 'orderStatus
+00028fc0: 2729 0a20 2020 2020 2020 2073 7461 7475  ').        statu
+00028fd0: 7320 3d20 7365 6c66 2e70 6172 7365 5f6f  s = self.parse_o
+00028fe0: 7264 6572 5f73 7461 7475 7328 7261 7753  rder_status(rawS
+00028ff0: 7461 7475 7329 0a20 2020 2020 2020 2073  tatus).        s
+00029000: 6964 6520 3d20 7365 6c66 2e73 6166 655f  ide = self.safe_
+00029010: 7374 7269 6e67 5f6c 6f77 6572 286f 7264  string_lower(ord
+00029020: 6572 2c20 2773 6964 6527 290a 2020 2020  er, 'side').    
+00029030: 2020 2020 6665 6520 3d20 4e6f 6e65 0a20      fee = None. 
+00029040: 2020 2020 2020 2066 6565 436f 7374 5374         feeCostSt
+00029050: 7269 6e67 203d 2073 656c 662e 7361 6665  ring = self.safe
+00029060: 5f73 7472 696e 6728 6f72 6465 722c 2027  _string(order, '
+00029070: 6375 6d45 7865 6346 6565 2729 0a20 2020  cumExecFee').   
+00029080: 2020 2020 2069 6620 6665 6543 6f73 7453       if feeCostS
+00029090: 7472 696e 6720 6973 206e 6f74 204e 6f6e  tring is not Non
+000290a0: 653a 0a20 2020 2020 2020 2020 2020 2066  e:.            f
+000290b0: 6565 203d 207b 0a20 2020 2020 2020 2020  ee = {.         
+000290c0: 2020 2020 2020 2027 636f 7374 273a 2066         'cost': f
+000290d0: 6565 436f 7374 5374 7269 6e67 2c0a 2020  eeCostString,.  
+000290e0: 2020 2020 2020 2020 2020 2020 2020 2763                'c
+000290f0: 7572 7265 6e63 7927 3a20 6d61 726b 6574  urrency': market
+00029100: 5b27 7365 7474 6c65 275d 2c0a 2020 2020  ['settle'],.    
+00029110: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00029120: 2020 636c 6965 6e74 4f72 6465 7249 6420    clientOrderId 
+00029130: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+00029140: 6e67 286f 7264 6572 2c20 276f 7264 6572  ng(order, 'order
+00029150: 4c69 6e6b 4964 2729 0a20 2020 2020 2020  LinkId').       
+00029160: 2069 6620 2863 6c69 656e 744f 7264 6572   if (clientOrder
+00029170: 4964 2069 7320 6e6f 7420 4e6f 6e65 2920  Id is not None) 
+00029180: 616e 6420 286c 656e 2863 6c69 656e 744f  and (len(clientO
+00029190: 7264 6572 4964 2920 3c20 3129 3a0a 2020  rderId) < 1):.  
+000291a0: 2020 2020 2020 2020 2020 636c 6965 6e74            client
+000291b0: 4f72 6465 7249 6420 3d20 4e6f 6e65 0a20  OrderId = None. 
+000291c0: 2020 2020 2020 2072 6177 5469 6d65 496e         rawTimeIn
+000291d0: 466f 7263 6520 3d20 7365 6c66 2e73 6166  Force = self.saf
+000291e0: 655f 7374 7269 6e67 286f 7264 6572 2c20  e_string(order, 
+000291f0: 2774 696d 6549 6e46 6f72 6365 2729 0a20  'timeInForce'). 
+00029200: 2020 2020 2020 2074 696d 6549 6e46 6f72         timeInFor
+00029210: 6365 203d 2073 656c 662e 7061 7273 655f  ce = self.parse_
+00029220: 7469 6d65 5f69 6e5f 666f 7263 6528 7261  time_in_force(ra
+00029230: 7754 696d 6549 6e46 6f72 6365 290a 2020  wTimeInForce).  
+00029240: 2020 2020 2020 7374 6f70 5072 6963 6520        stopPrice 
+00029250: 3d20 7365 6c66 2e6f 6d69 745f 7a65 726f  = self.omit_zero
+00029260: 2873 656c 662e 7361 6665 5f73 7472 696e  (self.safe_strin
+00029270: 6728 6f72 6465 722c 2027 7472 6967 6765  g(order, 'trigge
+00029280: 7250 7269 6365 2729 290a 2020 2020 2020  rPrice')).      
+00029290: 2020 7461 6b65 5072 6f66 6974 5072 6963    takeProfitPric
+000292a0: 6520 3d20 7365 6c66 2e6f 6d69 745f 7a65  e = self.omit_ze
+000292b0: 726f 2873 656c 662e 7361 6665 5f73 7472  ro(self.safe_str
+000292c0: 696e 6728 6f72 6465 722c 2027 7461 6b65  ing(order, 'take
+000292d0: 5072 6f66 6974 2729 290a 2020 2020 2020  Profit')).      
+000292e0: 2020 7374 6f70 4c6f 7373 5072 6963 6520    stopLossPrice 
+000292f0: 3d20 7365 6c66 2e6f 6d69 745f 7a65 726f  = self.omit_zero
+00029300: 2873 656c 662e 7361 6665 5f73 7472 696e  (self.safe_strin
+00029310: 6728 6f72 6465 722c 2027 7374 6f70 4c6f  g(order, 'stopLo
+00029320: 7373 2729 290a 2020 2020 2020 2020 7265  ss')).        re
+00029330: 7475 726e 2073 656c 662e 7361 6665 5f6f  turn self.safe_o
+00029340: 7264 6572 287b 0a20 2020 2020 2020 2020  rder({.         
+00029350: 2020 2027 696e 666f 273a 206f 7264 6572     'info': order
+00029360: 2c0a 2020 2020 2020 2020 2020 2020 2769  ,.            'i
+00029370: 6427 3a20 6964 2c0a 2020 2020 2020 2020  d': id,.        
+00029380: 2020 2020 2763 6c69 656e 744f 7264 6572      'clientOrder
+00029390: 4964 273a 2063 6c69 656e 744f 7264 6572  Id': clientOrder
+000293a0: 4964 2c0a 2020 2020 2020 2020 2020 2020  Id,.            
+000293b0: 2774 696d 6573 7461 6d70 273a 2074 696d  'timestamp': tim
+000293c0: 6573 7461 6d70 2c0a 2020 2020 2020 2020  estamp,.        
+000293d0: 2020 2020 2764 6174 6574 696d 6527 3a20      'datetime': 
+000293e0: 7365 6c66 2e69 736f 3836 3031 2874 696d  self.iso8601(tim
+000293f0: 6573 7461 6d70 292c 0a20 2020 2020 2020  estamp),.       
+00029400: 2020 2020 2027 6c61 7374 5472 6164 6554       'lastTradeT
+00029410: 696d 6573 7461 6d70 273a 206c 6173 7454  imestamp': lastT
+00029420: 7261 6465 5469 6d65 7374 616d 702c 0a20  radeTimestamp,. 
+00029430: 2020 2020 2020 2020 2020 2027 7379 6d62             'symb
+00029440: 6f6c 273a 2073 796d 626f 6c2c 0a20 2020  ol': symbol,.   
+00029450: 2020 2020 2020 2020 2027 7479 7065 273a           'type':
+00029460: 2074 7970 652c 0a20 2020 2020 2020 2020   type,.         
+00029470: 2020 2027 7469 6d65 496e 466f 7263 6527     'timeInForce'
+00029480: 3a20 7469 6d65 496e 466f 7263 652c 0a20  : timeInForce,. 
+00029490: 2020 2020 2020 2020 2020 2027 706f 7374             'post
+000294a0: 4f6e 6c79 273a 204e 6f6e 652c 0a20 2020  Only': None,.   
+000294b0: 2020 2020 2020 2020 2027 7265 6475 6365           'reduce
+000294c0: 4f6e 6c79 273a 2073 656c 662e 7361 6665  Only': self.safe
+000294d0: 5f76 616c 7565 286f 7264 6572 2c20 2772  _value(order, 'r
+000294e0: 6564 7563 654f 6e6c 7927 292c 0a20 2020  educeOnly'),.   
+000294f0: 2020 2020 2020 2020 2027 7369 6465 273a           'side':
+00029500: 2073 6964 652c 0a20 2020 2020 2020 2020   side,.         
+00029510: 2020 2027 7072 6963 6527 3a20 7072 6963     'price': pric
+00029520: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
+00029530: 7374 6f70 5072 6963 6527 3a20 7374 6f70  stopPrice': stop
+00029540: 5072 6963 652c 0a20 2020 2020 2020 2020  Price,.         
+00029550: 2020 2027 7472 6967 6765 7250 7269 6365     'triggerPrice
+00029560: 273a 2073 746f 7050 7269 6365 2c0a 2020  ': stopPrice,.  
+00029570: 2020 2020 2020 2020 2020 2774 616b 6550            'takeP
+00029580: 726f 6669 7450 7269 6365 273a 2074 616b  rofitPrice': tak
+00029590: 6550 726f 6669 7450 7269 6365 2c0a 2020  eProfitPrice,.  
+000295a0: 2020 2020 2020 2020 2020 2773 746f 704c            'stopL
+000295b0: 6f73 7350 7269 6365 273a 2073 746f 704c  ossPrice': stopL
+000295c0: 6f73 7350 7269 6365 2c0a 2020 2020 2020  ossPrice,.      
+000295d0: 2020 2020 2020 2761 6d6f 756e 7427 3a20        'amount': 
+000295e0: 616d 6f75 6e74 2c0a 2020 2020 2020 2020  amount,.        
+000295f0: 2020 2020 2763 6f73 7427 3a20 636f 7374      'cost': cost
+00029600: 2c0a 2020 2020 2020 2020 2020 2020 2761  ,.            'a
+00029610: 7665 7261 6765 273a 204e 6f6e 652c 0a20  verage': None,. 
+00029620: 2020 2020 2020 2020 2020 2027 6669 6c6c             'fill
+00029630: 6564 273a 2066 696c 6c65 642c 0a20 2020  ed': filled,.   
+00029640: 2020 2020 2020 2020 2027 7265 6d61 696e           'remain
+00029650: 696e 6727 3a20 7265 6d61 696e 696e 672c  ing': remaining,
+00029660: 0a20 2020 2020 2020 2020 2020 2027 7374  .            'st
+00029670: 6174 7573 273a 2073 7461 7475 732c 0a20  atus': status,. 
+00029680: 2020 2020 2020 2020 2020 2027 6665 6527             'fee'
+00029690: 3a20 6665 652c 0a20 2020 2020 2020 2020  : fee,.         
+000296a0: 2020 2027 7472 6164 6573 273a 204e 6f6e     'trades': Non
+000296b0: 652c 0a20 2020 2020 2020 207d 2c20 6d61  e,.        }, ma
+000296c0: 726b 6574 290a 0a20 2020 2064 6566 2070  rket)..    def p
+000296d0: 6172 7365 5f73 706f 745f 6f72 6465 7228  arse_spot_order(
+000296e0: 7365 6c66 2c20 6f72 6465 722c 206d 6172  self, order, mar
+000296f0: 6b65 743d 4e6f 6e65 293a 0a20 2020 2020  ket=None):.     
+00029700: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
+00029710: 6372 6561 7465 4f72 6465 722c 2063 616e  createOrder, can
+00029720: 6365 6c4f 7265 720a 2020 2020 2020 2020  celOrer.        
+00029730: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+00029740: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+00029750: 2020 2020 226f 7264 6572 4964 223a 2022      "orderId": "
+00029760: 3132 3734 3735 3439 3136 3238 3733 3436  1274754916287346
+00029770: 3238 3022 2c0a 2020 2020 2020 2020 2320  280",.        # 
+00029780: 2020 2020 2020 2020 226f 7264 6572 4c69          "orderLi
+00029790: 6e6b 4964 223a 2022 3136 3636 3739 3836  nkId": "16667986
+000297a0: 3237 3031 3537 3330 222c 0a20 2020 2020  27015730",.     
+000297b0: 2020 2023 2020 2020 2020 2020 2022 7379     #         "sy
+000297c0: 6d62 6f6c 223a 2022 4141 5645 5553 4454  mbol": "AAVEUSDT
+000297d0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+000297e0: 2020 2020 2022 6372 6561 7465 5469 6d65       "createTime
+000297f0: 223a 2022 3136 3636 3639 3836 3239 3832  ": "166669862982
+00029800: 3122 2c0a 2020 2020 2020 2020 2320 2020  1",.        #   
+00029810: 2020 2020 2020 226f 7264 6572 5072 6963        "orderPric
+00029820: 6522 3a20 2238 3022 2c0a 2020 2020 2020  e": "80",.      
+00029830: 2020 2320 2020 2020 2020 2020 226f 7264    #         "ord
+00029840: 6572 5174 7922 3a20 2230 2e31 3122 2c0a  erQty": "0.11",.
+00029850: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00029860: 2020 226f 7264 6572 5479 7065 223a 2022    "orderType": "
+00029870: 4c49 4d49 5422 2c0a 2020 2020 2020 2020  LIMIT",.        
+00029880: 2320 2020 2020 2020 2020 2273 6964 6522  #         "side"
+00029890: 3a20 2242 5559 222c 0a20 2020 2020 2020  : "BUY",.       
+000298a0: 2023 2020 2020 2020 2020 2022 7374 6174   #         "stat
+000298b0: 7573 223a 2022 4e45 5722 2c0a 2020 2020  us": "NEW",.    
+000298c0: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
+000298d0: 696d 6549 6e46 6f72 6365 223a 2022 4754  imeInForce": "GT
+000298e0: 4322 2c0a 2020 2020 2020 2020 2320 2020  C",.        #   
+000298f0: 2020 2020 2020 2261 6363 6f75 6e74 4964        "accountId
+00029900: 223a 2022 3133 3338 3034 3334 222c 0a20  ": "13380434",. 
+00029910: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00029920: 2022 6578 6563 5174 7922 3a20 2230 222c   "execQty": "0",
+00029930: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00029940: 2020 2022 6f72 6465 7243 6174 6567 6f72     "orderCategor
+00029950: 7922 3a20 2230 220a 2020 2020 2020 2020  y": "0".        
+00029960: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
+00029970: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+00029980: 6665 7463 684f 7264 6572 2c20 6665 7463  fetchOrder, fetc
+00029990: 684f 7065 6e4f 7264 6572 732c 2066 6574  hOpenOrders, fet
+000299a0: 6368 436c 6f73 6564 4f72 6465 7273 2861  chClosedOrders(a
+000299b0: 6e64 2061 6c73 6f20 666f 7220 636f 6e64  nd also for cond
+000299c0: 6974 696f 6e61 6c20 6f72 6465 7273 2920  itional orders) 
+000299d0: 7468 6572 6520 6172 6520 616c 736f 2070  there are also p
+000299e0: 7265 7365 6e74 2074 6865 7365 2061 6464  resent these add
+000299f0: 6974 696f 6e61 6c20 6669 656c 6473 3a0a  itional fields:.
+00029a00: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+00029a10: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00029a20: 2020 2263 756d 6d75 6c61 7469 7665 5175    "cummulativeQu
+00029a30: 6f74 6551 7479 223a 2022 3022 2c0a 2020  oteQty": "0",.  
+00029a40: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00029a50: 2261 7667 5072 6963 6522 3a20 2230 222c  "avgPrice": "0",
+00029a60: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00029a70: 2020 2022 7374 6f70 5072 6963 6522 3a20     "stopPrice": 
+00029a80: 2230 2e30 222c 0a20 2020 2020 2020 2023  "0.0",.        #
+00029a90: 2020 2020 2020 2020 2022 6963 6562 6572           "iceber
+00029aa0: 6751 7479 223a 2022 302e 3022 2c0a 2020  gQty": "0.0",.  
+00029ab0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00029ac0: 2275 7064 6174 6554 696d 6522 3a20 2231  "updateTime": "1
+00029ad0: 3636 3637 3333 3335 3734 3434 222c 0a20  666733357444",. 
+00029ae0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00029af0: 2022 6973 576f 726b 696e 6722 3a20 2231   "isWorking": "1
+00029b00: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00029b10: 2020 2020 2022 6c6f 636b 6564 223a 2022       "locked": "
+00029b20: 382e 3822 2c0a 2020 2020 2020 2020 2320  8.8",.        # 
+00029b30: 2020 2020 2020 2020 2265 7865 6375 7465          "execute
+00029b40: 644f 7264 6572 4964 223a 2022 3132 3739  dOrderId": "1279
+00029b50: 3039 3430 3337 3534 3339 3632 3131 3322  094037543962113"
+00029b60: 2c20 2023 2069 6e20 636f 6e64 6974 696f  ,  # in conditio
+00029b70: 6e61 6c20 6f72 6465 720a 2020 2020 2020  nal order.      
+00029b80: 2020 2320 2020 2020 2020 2020 2274 7269    #         "tri
+00029b90: 6767 6572 5072 6963 6522 3a20 2230 2e39  ggerPrice": "0.9
+00029ba0: 3922 2c20 2023 2069 6e20 636f 6e64 6974  9",  # in condit
+00029bb0: 696f 6e61 6c20 6f72 6465 720a 2020 2020  ional order.    
+00029bc0: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+00029bd0: 2020 2020 230a 2020 2020 2020 2020 6d61      #.        ma
+00029be0: 726b 6574 4964 203d 2073 656c 662e 7361  rketId = self.sa
+00029bf0: 6665 5f73 7472 696e 6728 6f72 6465 722c  fe_string(order,
+00029c00: 2027 7379 6d62 6f6c 2729 0a20 2020 2020   'symbol').     
+00029c10: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
+00029c20: 2e73 6166 655f 6d61 726b 6574 286d 6172  .safe_market(mar
+00029c30: 6b65 7449 642c 206d 6172 6b65 742c 204e  ketId, market, N
+00029c40: 6f6e 652c 2027 7370 6f74 2729 0a20 2020  one, 'spot').   
+00029c50: 2020 2020 2074 696d 6573 7461 6d70 203d       timestamp =
+00029c60: 2073 656c 662e 7361 6665 5f69 6e74 6567   self.safe_integ
+00029c70: 6572 286f 7264 6572 2c20 2763 7265 6174  er(order, 'creat
+00029c80: 6554 696d 6527 290a 2020 2020 2020 2020  eTime').        
+00029c90: 7479 7065 203d 2073 656c 662e 7361 6665  type = self.safe
+00029ca0: 5f73 7472 696e 675f 6c6f 7765 7228 6f72  _string_lower(or
+00029cb0: 6465 722c 2027 6f72 6465 7254 7970 6527  der, 'orderType'
+00029cc0: 290a 2020 2020 2020 2020 7072 6963 6520  ).        price 
+00029cd0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+00029ce0: 6e67 286f 7264 6572 2c20 276f 7264 6572  ng(order, 'order
+00029cf0: 5072 6963 6527 290a 2020 2020 2020 2020  Price').        
+00029d00: 6966 2070 7269 6365 203d 3d20 2730 2720  if price == '0' 
+00029d10: 616e 6420 7479 7065 203d 3d20 276d 6172  and type == 'mar
+00029d20: 6b65 7427 3a0a 2020 2020 2020 2020 2020  ket':.          
+00029d30: 2020 7072 6963 6520 3d20 4e6f 6e65 0a20    price = None. 
+00029d40: 2020 2020 2020 2066 696c 6c65 6420 3d20         filled = 
+00029d50: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+00029d60: 286f 7264 6572 2c20 2765 7865 6351 7479  (order, 'execQty
+00029d70: 2729 0a20 2020 2020 2020 2073 6964 6520  ').        side 
+00029d80: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+00029d90: 6e67 5f6c 6f77 6572 286f 7264 6572 2c20  ng_lower(order, 
+00029da0: 2773 6964 6527 290a 2020 2020 2020 2020  'side').        
+00029db0: 7469 6d65 496e 466f 7263 6520 3d20 7365  timeInForce = se
+00029dc0: 6c66 2e70 6172 7365 5f74 696d 655f 696e  lf.parse_time_in
+00029dd0: 5f66 6f72 6365 2873 656c 662e 7361 6665  _force(self.safe
+00029de0: 5f73 7472 696e 6728 6f72 6465 722c 2027  _string(order, '
+00029df0: 7469 6d65 496e 466f 7263 6527 2929 0a20  timeInForce')). 
+00029e00: 2020 2020 2020 2074 7269 6767 6572 5072         triggerPr
+00029e10: 6963 6520 3d20 7365 6c66 2e73 6166 655f  ice = self.safe_
+00029e20: 7374 7269 6e67 286f 7264 6572 2c20 2774  string(order, 't
+00029e30: 7269 6767 6572 5072 6963 6527 290a 2020  riggerPrice').  
+00029e40: 2020 2020 2020 706f 7374 4f6e 6c79 203d        postOnly =
+00029e50: 2028 7469 6d65 496e 466f 7263 6520 3d3d   (timeInForce ==
+00029e60: 2027 504f 2729 0a20 2020 2020 2020 2061   'PO').        a
+00029e70: 6d6f 756e 7420 3d20 4e6f 6e65 0a20 2020  mount = None.   
+00029e80: 2020 2020 2069 6620 6d61 726b 6574 5b27       if market['
+00029e90: 7370 6f74 275d 2061 6e64 2074 7970 6520  spot'] and type 
+00029ea0: 3d3d 2027 6d61 726b 6574 2720 616e 6420  == 'market' and 
+00029eb0: 7369 6465 203d 3d20 2762 7579 273a 0a20  side == 'buy':. 
+00029ec0: 2020 2020 2020 2020 2020 2061 6d6f 756e             amoun
+00029ed0: 7420 3d20 6669 6c6c 6564 0a20 2020 2020  t = filled.     
+00029ee0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00029ef0: 2020 2020 2061 6d6f 756e 7420 3d20 7365       amount = se
+00029f00: 6c66 2e73 6166 655f 7374 7269 6e67 286f  lf.safe_string(o
+00029f10: 7264 6572 2c20 276f 7264 6572 5174 7927  rder, 'orderQty'
+00029f20: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00029f30: 2073 656c 662e 7361 6665 5f6f 7264 6572   self.safe_order
+00029f40: 287b 0a20 2020 2020 2020 2020 2020 2027  ({.            '
+00029f50: 6964 273a 2073 656c 662e 7361 6665 5f73  id': self.safe_s
+00029f60: 7472 696e 6728 6f72 6465 722c 2027 6f72  tring(order, 'or
+00029f70: 6465 7249 6427 292c 0a20 2020 2020 2020  derId'),.       
+00029f80: 2020 2020 2027 636c 6965 6e74 4f72 6465       'clientOrde
+00029f90: 7249 6427 3a20 7365 6c66 2e73 6166 655f  rId': self.safe_
+00029fa0: 7374 7269 6e67 286f 7264 6572 2c20 276f  string(order, 'o
+00029fb0: 7264 6572 4c69 6e6b 4964 2729 2c0a 2020  rderLinkId'),.  
+00029fc0: 2020 2020 2020 2020 2020 2774 696d 6573            'times
+00029fd0: 7461 6d70 273a 2074 696d 6573 7461 6d70  tamp': timestamp
+00029fe0: 2c0a 2020 2020 2020 2020 2020 2020 2764  ,.            'd
+00029ff0: 6174 6574 696d 6527 3a20 7365 6c66 2e69  atetime': self.i
+0002a000: 736f 3836 3031 2874 696d 6573 7461 6d70  so8601(timestamp
+0002a010: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
+0002a020: 6c61 7374 5472 6164 6554 696d 6573 7461  lastTradeTimesta
+0002a030: 6d70 273a 2073 656c 662e 7361 6665 5f69  mp': self.safe_i
+0002a040: 6e74 6567 6572 286f 7264 6572 2c20 2775  nteger(order, 'u
+0002a050: 7064 6174 6554 696d 6527 292c 0a20 2020  pdateTime'),.   
+0002a060: 2020 2020 2020 2020 2027 7379 6d62 6f6c           'symbol
+0002a070: 273a 206d 6172 6b65 745b 2773 796d 626f  ': market['symbo
+0002a080: 6c27 5d2c 0a20 2020 2020 2020 2020 2020  l'],.           
+0002a090: 2027 7479 7065 273a 2074 7970 652c 0a20   'type': type,. 
+0002a0a0: 2020 2020 2020 2020 2020 2027 7469 6d65             'time
+0002a0b0: 496e 466f 7263 6527 3a20 7469 6d65 496e  InForce': timeIn
+0002a0c0: 466f 7263 652c 0a20 2020 2020 2020 2020  Force,.         
+0002a0d0: 2020 2027 706f 7374 4f6e 6c79 273a 2070     'postOnly': p
+0002a0e0: 6f73 744f 6e6c 792c 0a20 2020 2020 2020  ostOnly,.       
+0002a0f0: 2020 2020 2027 7369 6465 273a 2073 6964       'side': sid
+0002a100: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
+0002a110: 7072 6963 6527 3a20 7072 6963 652c 0a20  price': price,. 
+0002a120: 2020 2020 2020 2020 2020 2027 7472 6967             'trig
+0002a130: 6765 7250 7269 6365 273a 2074 7269 6767  gerPrice': trigg
+0002a140: 6572 5072 6963 652c 0a20 2020 2020 2020  erPrice,.       
+0002a150: 2020 2020 2027 7374 6f70 5072 6963 6527       'stopPrice'
+0002a160: 3a20 7472 6967 6765 7250 7269 6365 2c20  : triggerPrice, 
+0002a170: 2023 2064 6570 7265 6361 7465 6420 6669   # deprecated fi
+0002a180: 656c 640a 2020 2020 2020 2020 2020 2020  eld.            
+0002a190: 2761 6d6f 756e 7427 3a20 616d 6f75 6e74  'amount': amount
+0002a1a0: 2c0a 2020 2020 2020 2020 2020 2020 2763  ,.            'c
+0002a1b0: 6f73 7427 3a20 7365 6c66 2e73 6166 655f  ost': self.safe_
+0002a1c0: 7374 7269 6e67 286f 7264 6572 2c20 2763  string(order, 'c
+0002a1d0: 756d 6d75 6c61 7469 7665 5175 6f74 6551  ummulativeQuoteQ
+0002a1e0: 7479 2729 2c0a 2020 2020 2020 2020 2020  ty'),.          
+0002a1f0: 2020 2761 7665 7261 6765 273a 2073 656c    'average': sel
+0002a200: 662e 7361 6665 5f73 7472 696e 6728 6f72  f.safe_string(or
+0002a210: 6465 722c 2027 6176 6750 7269 6365 2729  der, 'avgPrice')
+0002a220: 2c0a 2020 2020 2020 2020 2020 2020 2766  ,.            'f
+0002a230: 696c 6c65 6427 3a20 6669 6c6c 6564 2c0a  illed': filled,.
+0002a240: 2020 2020 2020 2020 2020 2020 2772 656d              'rem
+0002a250: 6169 6e69 6e67 273a 204e 6f6e 652c 0a20  aining': None,. 
+0002a260: 2020 2020 2020 2020 2020 2027 7374 6174             'stat
+0002a270: 7573 273a 2073 656c 662e 7061 7273 655f  us': self.parse_
+0002a280: 6f72 6465 725f 7374 6174 7573 2873 656c  order_status(sel
+0002a290: 662e 7361 6665 5f73 7472 696e 6728 6f72  f.safe_string(or
+0002a2a0: 6465 722c 2027 7374 6174 7573 2729 292c  der, 'status')),
+0002a2b0: 0a20 2020 2020 2020 2020 2020 2027 6665  .            'fe
+0002a2c0: 6527 3a20 4e6f 6e65 2c0a 2020 2020 2020  e': None,.      
+0002a2d0: 2020 2020 2020 2774 7261 6465 7327 3a20        'trades': 
+0002a2e0: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
+0002a2f0: 2020 2769 6e66 6f27 3a20 6f72 6465 722c    'info': order,
+0002a300: 0a20 2020 2020 2020 207d 2c20 6d61 726b  .        }, mark
+0002a310: 6574 290a 0a20 2020 2064 6566 2066 6574  et)..    def fet
+0002a320: 6368 5f6f 7264 6572 2873 656c 662c 2069  ch_order(self, i
+0002a330: 643a 2073 7472 2c20 7379 6d62 6f6c 3a20  d: str, symbol: 
+0002a340: 4f70 7469 6f6e 616c 5b73 7472 5d20 3d20  Optional[str] = 
+0002a350: 4e6f 6e65 2c20 7061 7261 6d73 3d7b 7d29  None, params={})
+0002a360: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+0002a370: 2020 2020 2020 6665 7463 6865 7320 696e        fetches in
+0002a380: 666f 726d 6174 696f 6e20 6f6e 2061 6e20  formation on an 
+0002a390: 6f72 6465 7220 6d61 6465 2062 7920 7468  order made by th
+0002a3a0: 6520 7573 6572 0a20 2020 2020 2020 203a  e user.        :
+0002a3b0: 7061 7261 6d20 7374 727c 4e6f 6e65 2073  param str|None s
+0002a3c0: 796d 626f 6c3a 2075 6e69 6669 6564 2073  ymbol: unified s
+0002a3d0: 796d 626f 6c20 6f66 2074 6865 206d 6172  ymbol of the mar
+0002a3e0: 6b65 7420 7468 6520 6f72 6465 7220 7761  ket the order wa
+0002a3f0: 7320 6d61 6465 2069 6e0a 2020 2020 2020  s made in.      
+0002a400: 2020 3a70 6172 616d 2064 6963 7420 7061    :param dict pa
+0002a410: 7261 6d73 3a20 6578 7472 6120 7061 7261  rams: extra para
+0002a420: 6d65 7465 7273 2073 7065 6369 6669 6320  meters specific 
+0002a430: 746f 2074 6865 2062 7962 6974 2061 7069  to the bybit api
+0002a440: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
+0002a450: 2020 3a72 6574 7572 6e73 2064 6963 743a    :returns dict:
+0002a460: 2041 6e20 606f 7264 6572 2073 7472 7563   An `order struc
+0002a470: 7475 7265 203c 6874 7470 733a 2f2f 646f  ture <https://do
+0002a480: 6373 2e63 6378 742e 636f 6d2f 232f 3f69  cs.ccxt.com/#/?i
+0002a490: 643d 6f72 6465 722d 7374 7275 6374 7572  d=order-structur
+0002a4a0: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
+0002a4b0: 2020 2020 2020 2020 7365 6c66 2e6c 6f61          self.loa
+0002a4c0: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
+0002a4d0: 2020 2020 6d61 726b 6574 203d 204e 6f6e      market = Non
+0002a4e0: 650a 2020 2020 2020 2020 6966 2073 796d  e.        if sym
+0002a4f0: 626f 6c20 6973 206e 6f74 204e 6f6e 653a  bol is not None:
+0002a500: 0a20 2020 2020 2020 2020 2020 206d 6172  .            mar
+0002a510: 6b65 7420 3d20 7365 6c66 2e6d 6172 6b65  ket = self.marke
+0002a520: 7428 7379 6d62 6f6c 290a 2020 2020 2020  t(symbol).      
+0002a530: 2020 7479 7065 203d 204e 6f6e 650a 2020    type = None.  
+0002a540: 2020 2020 2020 7479 7065 2c20 7061 7261        type, para
+0002a550: 6d73 203d 2073 656c 662e 6861 6e64 6c65  ms = self.handle
+0002a560: 5f6d 6172 6b65 745f 7479 7065 5f61 6e64  _market_type_and
+0002a570: 5f70 6172 616d 7328 2766 6574 6368 4f72  _params('fetchOr
+0002a580: 6465 7227 2c20 6d61 726b 6574 2c20 7061  der', market, pa
+0002a590: 7261 6d73 290a 2020 2020 2020 2020 6163  rams).        ac
+0002a5a0: 636f 756e 7473 203d 2073 656c 662e 6973  counts = self.is
+0002a5b0: 5f75 6e69 6669 6564 5f65 6e61 626c 6564  _unified_enabled
+0002a5c0: 2829 0a20 2020 2020 2020 2069 7355 6e69  ().        isUni
+0002a5d0: 6669 6564 4163 636f 756e 7420 3d20 7365  fiedAccount = se
+0002a5e0: 6c66 2e73 6166 655f 7661 6c75 6528 6163  lf.safe_value(ac
+0002a5f0: 636f 756e 7473 2c20 312c 2046 616c 7365  counts, 1, False
+0002a600: 290a 2020 2020 2020 2020 6966 2069 7355  ).        if isU
+0002a610: 6e69 6669 6564 4163 636f 756e 743a 0a20  nifiedAccount:. 
+0002a620: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+0002a630: 204e 6f74 5375 7070 6f72 7465 6428 7365   NotSupported(se
+0002a640: 6c66 2e69 6420 2b20 2720 6665 7463 684f  lf.id + ' fetchO
+0002a650: 7264 6572 2829 2064 6f65 7320 6e6f 7420  rder() does not 
+0002a660: 7375 7070 6f72 7420 756e 6966 6965 6420  support unified 
+0002a670: 6163 636f 756e 742e 2050 6c65 6173 6520  account. Please 
+0002a680: 636f 6e73 6964 6572 2075 7369 6e67 2066  consider using f
+0002a690: 6574 6368 4f70 656e 4f72 6465 7273 2829  etchOpenOrders()
+0002a6a0: 206f 7220 6665 7463 6843 6c6f 7365 644f   or fetchClosedO
+0002a6b0: 7264 6572 7328 2927 290a 2020 2020 2020  rders()').      
+0002a6c0: 2020 6966 2074 7970 6520 3d3d 2027 7370    if type == 'sp
+0002a6d0: 6f74 273a 0a20 2020 2020 2020 2020 2020  ot':.           
+0002a6e0: 2023 206f 6e6c 7920 7370 6f74 206d 6172   # only spot mar
+0002a6f0: 6b65 7473 2068 6176 6520 6120 6465 6469  kets have a dedi
+0002a700: 6361 7465 6420 656e 6470 6f69 6e74 2066  cated endpoint f
+0002a710: 6f72 2066 6574 6368 696e 6720 6120 6f72  or fetching a or
+0002a720: 6465 720a 2020 2020 2020 2020 2020 2020  der.            
+0002a730: 7265 7175 6573 7420 3d20 7b0a 2020 2020  request = {.    
+0002a740: 2020 2020 2020 2020 2020 2020 276f 7264              'ord
+0002a750: 6572 4964 273a 2069 642c 0a20 2020 2020  erId': id,.     
+0002a760: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+0002a770: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
+0002a780: 7365 6c66 2e70 7269 7661 7465 4765 7453  self.privateGetS
+0002a790: 706f 7456 3350 7269 7661 7465 4f72 6465  potV3PrivateOrde
+0002a7a0: 7228 7365 6c66 2e65 7874 656e 6428 7061  r(self.extend(pa
+0002a7b0: 7261 6d73 2c20 7265 7175 6573 7429 290a  rams, request)).
+0002a7c0: 2020 2020 2020 2020 2020 2020 230a 2020              #.  
+0002a7d0: 2020 2020 2020 2020 2020 2320 2020 207b            #    {
+0002a7e0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+0002a7f0: 2020 2020 2020 2272 6574 436f 6465 223a        "retCode":
+0002a800: 2022 3022 2c0a 2020 2020 2020 2020 2020   "0",.          
+0002a810: 2020 2320 2020 2020 2020 2022 7265 744d    #        "retM
+0002a820: 7367 223a 2022 4f4b 222c 0a20 2020 2020  sg": "OK",.     
+0002a830: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0002a840: 2272 6573 756c 7422 3a20 7b0a 2020 2020  "result": {.    
+0002a850: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0002a860: 2020 2020 2022 6163 636f 756e 7449 6422       "accountId"
+0002a870: 3a20 2231 3333 3830 3433 3422 2c0a 2020  : "13380434",.  
+0002a880: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+0002a890: 2020 2020 2020 2022 7379 6d62 6f6c 223a         "symbol":
+0002a8a0: 2022 4141 5645 5553 4454 222c 0a20 2020   "AAVEUSDT",.   
+0002a8b0: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+0002a8c0: 2020 2020 2020 226f 7264 6572 4c69 6e6b        "orderLink
+0002a8d0: 4964 223a 2022 3136 3636 3733 3333 3537  Id": "1666733357
+0002a8e0: 3433 3436 3137 222c 0a20 2020 2020 2020  434617",.       
+0002a8f0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0002a900: 2020 226f 7264 6572 4964 223a 2022 3132    "orderId": "12
+0002a910: 3735 3034 3632 3438 3538 3534 3134 3134  7504624858541414
+0002a920: 3422 2c0a 2020 2020 2020 2020 2020 2020  4",.            
+0002a930: 2320 2020 2020 2020 2020 2020 2022 6f72  #            "or
+0002a940: 6465 7250 7269 6365 223a 2022 3830 222c  derPrice": "80",
+0002a950: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+0002a960: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+0002a970: 5174 7922 3a20 2230 2e31 3122 2c0a 2020  Qty": "0.11",.  
+0002a980: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+0002a990: 2020 2020 2020 2022 6578 6563 5174 7922         "execQty"
+0002a9a0: 3a20 2230 222c 0a20 2020 2020 2020 2020  : "0",.         
+0002a9b0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0002a9c0: 2263 756d 6d75 6c61 7469 7665 5175 6f74  "cummulativeQuot
+0002a9d0: 6551 7479 223a 2022 3022 2c0a 2020 2020  eQty": "0",.    
+0002a9e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0002a9f0: 2020 2020 2022 6176 6750 7269 6365 223a       "avgPrice":
+0002aa00: 2022 3022 2c0a 2020 2020 2020 2020 2020   "0",.          
+0002aa10: 2020 2320 2020 2020 2020 2020 2020 2022    #            "
+0002aa20: 7374 6174 7573 223a 2022 4e45 5722 2c0a  status": "NEW",.
+0002aa30: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+0002aa40: 2020 2020 2020 2020 2022 7469 6d65 496e           "timeIn
+0002aa50: 466f 7263 6522 3a20 2247 5443 222c 0a20  Force": "GTC",. 
+0002aa60: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+0002aa70: 2020 2020 2020 2020 226f 7264 6572 5479          "orderTy
+0002aa80: 7065 223a 2022 4c49 4d49 5422 2c0a 2020  pe": "LIMIT",.  
+0002aa90: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+0002aaa0: 2020 2020 2020 2022 7369 6465 223a 2022         "side": "
+0002aab0: 4255 5922 2c0a 2020 2020 2020 2020 2020  BUY",.          
+0002aac0: 2020 2320 2020 2020 2020 2020 2020 2022    #            "
+0002aad0: 7374 6f70 5072 6963 6522 3a20 2230 2e30  stopPrice": "0.0
+0002aae0: 222c 0a20 2020 2020 2020 2020 2020 2023  ",.            #
+0002aaf0: 2020 2020 2020 2020 2020 2020 2269 6365              "ice
+0002ab00: 6265 7267 5174 7922 3a20 2230 2e30 222c  bergQty": "0.0",
+0002ab10: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+0002ab20: 2020 2020 2020 2020 2020 2263 7265 6174            "creat
+0002ab30: 6554 696d 6522 3a20 2231 3636 3637 3333  eTime": "1666733
+0002ab40: 3335 3734 3338 222c 0a20 2020 2020 2020  357438",.       
+0002ab50: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0002ab60: 2020 2275 7064 6174 6554 696d 6522 3a20    "updateTime": 
+0002ab70: 2231 3636 3637 3333 3335 3734 3434 222c  "1666733357444",
+0002ab80: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+0002ab90: 2020 2020 2020 2020 2020 2269 7357 6f72            "isWor
+0002aba0: 6b69 6e67 223a 2022 3122 2c0a 2020 2020  king": "1",.    
+0002abb0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0002abc0: 2020 2020 2022 6c6f 636b 6564 223a 2022       "locked": "
+0002abd0: 382e 3822 2c0a 2020 2020 2020 2020 2020  8.8",.          
+0002abe0: 2020 2320 2020 2020 2020 2020 2020 2022    #            "
+0002abf0: 6f72 6465 7243 6174 6567 6f72 7922 3a20  orderCategory": 
+0002ac00: 2230 220a 2020 2020 2020 2020 2020 2020  "0".            
+0002ac10: 2320 2020 2020 2020 207d 2c0a 2020 2020  #        },.    
+0002ac20: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0002ac30: 2022 7265 7445 7874 4d61 7022 3a20 7b7d   "retExtMap": {}
+0002ac40: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+0002ac50: 2020 2020 2020 2022 7265 7445 7874 496e         "retExtIn
+0002ac60: 666f 223a 206e 756c 6c2c 0a20 2020 2020  fo": null,.     
+0002ac70: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0002ac80: 2274 696d 6522 3a20 2231 3636 3637 3333  "time": "1666733
+0002ac90: 3335 3737 3434 220a 2020 2020 2020 2020  357744".        
+0002aca0: 2020 2020 2320 2020 207d 0a20 2020 2020      #    }.     
+0002acb0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+0002acc0: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
+0002acd0: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
+0002ace0: 7370 6f6e 7365 2c20 2772 6573 756c 7427  sponse, 'result'
+0002acf0: 2c20 7b7d 290a 2020 2020 2020 2020 2020  , {}).          
+0002ad00: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
+0002ad10: 7273 655f 6f72 6465 7228 7265 7375 6c74  rse_order(result
+0002ad20: 2c20 6d61 726b 6574 290a 2020 2020 2020  , market).      
+0002ad30: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0002ad40: 2020 2020 7365 6c66 2e63 6865 636b 5f72      self.check_r
+0002ad50: 6571 7569 7265 645f 7379 6d62 6f6c 2827  equired_symbol('
+0002ad60: 6665 7463 684f 7264 6572 272c 2073 796d  fetchOrder', sym
+0002ad70: 626f 6c29 0a20 2020 2020 2020 2020 2020  bol).           
+0002ad80: 2072 6571 7565 7374 203d 207b 0a20 2020   request = {.   
+0002ad90: 2020 2020 2020 2020 2020 2020 2027 6f72               'or
+0002ada0: 6465 7249 6427 3a20 6964 2c0a 2020 2020  derId': id,.    
+0002adb0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+0002adc0: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
+0002add0: 656c 662e 6665 7463 685f 6f72 6465 7273  elf.fetch_orders
+0002ade0: 2873 796d 626f 6c2c 204e 6f6e 652c 204e  (symbol, None, N
+0002adf0: 6f6e 652c 2073 656c 662e 6578 7465 6e64  one, self.extend
+0002ae00: 2872 6571 7565 7374 2c20 7061 7261 6d73  (request, params
+0002ae10: 2929 0a20 2020 2020 2020 2020 2020 206c  )).            l
+0002ae20: 656e 6774 6820 3d20 6c65 6e28 7265 7375  ength = len(resu
+0002ae30: 6c74 290a 2020 2020 2020 2020 2020 2020  lt).            
+0002ae40: 6966 206c 656e 6774 6820 3d3d 2030 3a0a  if length == 0:.
+0002ae50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ae60: 7261 6973 6520 4f72 6465 724e 6f74 466f  raise OrderNotFo
+0002ae70: 756e 6428 274f 7264 6572 2027 202b 2069  und('Order ' + i
+0002ae80: 6420 2b20 2720 646f 6573 206e 6f74 2065  d + ' does not e
+0002ae90: 7869 7374 2e27 290a 2020 2020 2020 2020  xist.').        
+0002aea0: 2020 2020 6966 206c 656e 6774 6820 3e20      if length > 
+0002aeb0: 313a 0a20 2020 2020 2020 2020 2020 2020  1:.             
+0002aec0: 2020 2072 6169 7365 2049 6e76 616c 6964     raise Invalid
+0002aed0: 4f72 6465 7228 7365 6c66 2e69 6420 2b20  Order(self.id + 
+0002aee0: 2720 7265 7475 726e 6564 206d 6f72 6520  ' returned more 
+0002aef0: 7468 616e 206f 6e65 206f 7264 6572 2729  than one order')
+0002af00: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0002af10: 7572 6e20 7365 6c66 2e73 6166 655f 7661  urn self.safe_va
+0002af20: 6c75 6528 7265 7375 6c74 2c20 3029 0a0a  lue(result, 0)..
+0002af30: 2020 2020 6465 6620 6372 6561 7465 5f6f      def create_o
+0002af40: 7264 6572 2873 656c 662c 2073 796d 626f  rder(self, symbo
+0002af50: 6c3a 2073 7472 2c20 7479 7065 2c20 7369  l: str, type, si
+0002af60: 6465 3a20 4f72 6465 7253 6964 652c 2061  de: OrderSide, a
+0002af70: 6d6f 756e 742c 2070 7269 6365 3d4e 6f6e  mount, price=Non
+0002af80: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
+0002af90: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0002afa0: 2020 2063 7265 6174 6520 6120 7472 6164     create a trad
+0002afb0: 6520 6f72 6465 720a 2020 2020 2020 2020  e order.        
+0002afc0: 7365 6520 6874 7470 733a 2f2f 6279 6269  see https://bybi
+0002afd0: 742d 6578 6368 616e 6765 2e67 6974 6875  t-exchange.githu
+0002afe0: 622e 696f 2f64 6f63 732f 7635 2f6f 7264  b.io/docs/v5/ord
+0002aff0: 6572 2f63 7265 6174 652d 6f72 6465 720a  er/create-order.
+0002b000: 2020 2020 2020 2020 7365 6520 6874 7470          see http
+0002b010: 733a 2f2f 6279 6269 742d 6578 6368 616e  s://bybit-exchan
+0002b020: 6765 2e67 6974 6875 622e 696f 2f64 6f63  ge.github.io/doc
+0002b030: 732f 7370 6f74 2f74 7261 6465 2f70 6c61  s/spot/trade/pla
+0002b040: 6365 2d6f 7264 6572 0a20 2020 2020 2020  ce-order.       
+0002b050: 2073 6565 2068 7474 7073 3a2f 2f62 7962   see https://byb
+0002b060: 6974 2d65 7863 6861 6e67 652e 6769 7468  it-exchange.gith
+0002b070: 7562 2e69 6f2f 646f 6373 2f64 6572 6976  ub.io/docs/deriv
+0002b080: 6174 6976 6573 2f75 6e69 6669 6564 2f70  atives/unified/p
+0002b090: 6c61 6365 2d6f 7264 6572 0a20 2020 2020  lace-order.     
+0002b0a0: 2020 2073 6565 2068 7474 7073 3a2f 2f62     see https://b
+0002b0b0: 7962 6974 2d65 7863 6861 6e67 652e 6769  ybit-exchange.gi
+0002b0c0: 7468 7562 2e69 6f2f 646f 6373 2f64 6572  thub.io/docs/der
+0002b0d0: 6976 6174 6976 6573 2f63 6f6e 7472 6163  ivatives/contrac
+0002b0e0: 742f 706c 6163 652d 6f72 6465 720a 2020  t/place-order.  
+0002b0f0: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+0002b100: 2073 796d 626f 6c3a 2075 6e69 6669 6564   symbol: unified
+0002b110: 2073 796d 626f 6c20 6f66 2074 6865 206d   symbol of the m
+0002b120: 6172 6b65 7420 746f 2063 7265 6174 6520  arket to create 
+0002b130: 616e 206f 7264 6572 2069 6e0a 2020 2020  an order in.    
+0002b140: 2020 2020 3a70 6172 616d 2073 7472 2074      :param str t
+0002b150: 7970 653a 2027 6d61 726b 6574 2720 6f72  ype: 'market' or
+0002b160: 2027 6c69 6d69 7427 0a20 2020 2020 2020   'limit'.       
+0002b170: 203a 7061 7261 6d20 7374 7220 7369 6465   :param str side
+0002b180: 3a20 2762 7579 2720 6f72 2027 7365 6c6c  : 'buy' or 'sell
+0002b190: 270a 2020 2020 2020 2020 3a70 6172 616d  '.        :param
+0002b1a0: 2066 6c6f 6174 2061 6d6f 756e 743a 2068   float amount: h
+0002b1b0: 6f77 206d 7563 6820 6f66 2063 7572 7265  ow much of curre
+0002b1c0: 6e63 7920 796f 7520 7761 6e74 2074 6f20  ncy you want to 
+0002b1d0: 7472 6164 6520 696e 2075 6e69 7473 206f  trade in units o
+0002b1e0: 6620 6261 7365 2063 7572 7265 6e63 790a  f base currency.
+0002b1f0: 2020 2020 2020 2020 3a70 6172 616d 2066          :param f
+0002b200: 6c6f 6174 7c4e 6f6e 6520 7072 6963 653a  loat|None price:
+0002b210: 2074 6865 2070 7269 6365 2061 7420 7768   the price at wh
+0002b220: 6963 6820 7468 6520 6f72 6465 7220 6973  ich the order is
+0002b230: 2074 6f20 6265 2066 756c 6c66 696c 6c65   to be fullfille
+0002b240: 642c 2069 6e20 756e 6974 7320 6f66 2074  d, in units of t
+0002b250: 6865 2071 756f 7465 2063 7572 7265 6e63  he quote currenc
+0002b260: 792c 2069 676e 6f72 6564 2069 6e20 6d61  y, ignored in ma
+0002b270: 726b 6574 206f 7264 6572 730a 2020 2020  rket orders.    
+0002b280: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
+0002b290: 7061 7261 6d73 3a20 6578 7472 6120 7061  params: extra pa
+0002b2a0: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
+0002b2b0: 6320 746f 2074 6865 2062 7962 6974 2061  c to the bybit a
+0002b2c0: 7069 2065 6e64 706f 696e 740a 2020 2020  pi endpoint.    
+0002b2d0: 2020 2020 3a72 6574 7572 6e73 2064 6963      :returns dic
+0002b2e0: 743a 2061 6e20 606f 7264 6572 2073 7472  t: an `order str
+0002b2f0: 7563 7475 7265 203c 6874 7470 733a 2f2f  ucture <https://
+0002b300: 646f 6373 2e63 6378 742e 636f 6d2f 232f  docs.ccxt.com/#/
+0002b310: 3f69 643d 6f72 6465 722d 7374 7275 6374  ?id=order-struct
+0002b320: 7572 653e 600a 2020 2020 2020 2020 2222  ure>`.        ""
+0002b330: 220a 2020 2020 2020 2020 7365 6c66 2e6c  ".        self.l
+0002b340: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
+0002b350: 2020 2020 2020 7365 6c66 2e63 6865 636b        self.check
+0002b360: 5f72 6571 7569 7265 645f 7379 6d62 6f6c  _required_symbol
+0002b370: 2827 6372 6561 7465 4f72 6465 7227 2c20  ('createOrder', 
+0002b380: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
+0002b390: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
+0002b3a0: 726b 6574 2873 796d 626f 6c29 0a20 2020  rket(symbol).   
+0002b3b0: 2020 2020 2073 796d 626f 6c20 3d20 6d61       symbol = ma
+0002b3c0: 726b 6574 5b27 7379 6d62 6f6c 275d 0a20  rket['symbol']. 
+0002b3d0: 2020 2020 2020 2065 6e61 626c 6555 6e69         enableUni
+0002b3e0: 6669 6564 4d61 7267 696e 2c20 656e 6162  fiedMargin, enab
+0002b3f0: 6c65 556e 6966 6965 6441 6363 6f75 6e74  leUnifiedAccount
+0002b400: 203d 2073 656c 662e 6973 5f75 6e69 6669   = self.is_unifi
+0002b410: 6564 5f65 6e61 626c 6564 2829 0a20 2020  ed_enabled().   
+0002b420: 2020 2020 2069 7355 5344 4353 6574 746c       isUSDCSettl
+0002b430: 6564 203d 206d 6172 6b65 745b 2773 6574  ed = market['set
+0002b440: 746c 6527 5d20 3d3d 2027 5553 4443 270a  tle'] == 'USDC'.
+0002b450: 2020 2020 2020 2020 6966 2065 6e61 626c          if enabl
+0002b460: 6555 6e69 6669 6564 4163 636f 756e 7420  eUnifiedAccount 
+0002b470: 616e 6420 6e6f 7420 6d61 726b 6574 5b27  and not market['
+0002b480: 696e 7665 7273 6527 5d3a 0a20 2020 2020  inverse']:.     
+0002b490: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+0002b4a0: 6c66 2e63 7265 6174 655f 756e 6966 6965  lf.create_unifie
+0002b4b0: 645f 6163 636f 756e 745f 6f72 6465 7228  d_account_order(
+0002b4c0: 7379 6d62 6f6c 2c20 7479 7065 2c20 7369  symbol, type, si
+0002b4d0: 6465 2c20 616d 6f75 6e74 2c20 7072 6963  de, amount, pric
+0002b4e0: 652c 2070 6172 616d 7329 0a20 2020 2020  e, params).     
+0002b4f0: 2020 2065 6c69 6620 6d61 726b 6574 5b27     elif market['
+0002b500: 7370 6f74 275d 3a0a 2020 2020 2020 2020  spot']:.        
+0002b510: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+0002b520: 6372 6561 7465 5f73 706f 745f 6f72 6465  create_spot_orde
+0002b530: 7228 7379 6d62 6f6c 2c20 7479 7065 2c20  r(symbol, type, 
+0002b540: 7369 6465 2c20 616d 6f75 6e74 2c20 7072  side, amount, pr
+0002b550: 6963 652c 2070 6172 616d 7329 0a20 2020  ice, params).   
+0002b560: 2020 2020 2065 6c69 6620 656e 6162 6c65       elif enable
+0002b570: 556e 6966 6965 644d 6172 6769 6e20 616e  UnifiedMargin an
+0002b580: 6420 6e6f 7420 6d61 726b 6574 5b27 696e  d not market['in
+0002b590: 7665 7273 6527 5d3a 0a20 2020 2020 2020  verse']:.       
+0002b5a0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+0002b5b0: 2e63 7265 6174 655f 756e 6966 6965 645f  .create_unified_
+0002b5c0: 6d61 7267 696e 5f6f 7264 6572 2873 796d  margin_order(sym
+0002b5d0: 626f 6c2c 2074 7970 652c 2073 6964 652c  bol, type, side,
+0002b5e0: 2061 6d6f 756e 742c 2070 7269 6365 2c20   amount, price, 
+0002b5f0: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
+0002b600: 656c 6966 2069 7355 5344 4353 6574 746c  elif isUSDCSettl
+0002b610: 6564 3a0a 2020 2020 2020 2020 2020 2020  ed:.            
+0002b620: 7265 7475 726e 2073 656c 662e 6372 6561  return self.crea
+0002b630: 7465 5f75 7364 635f 6f72 6465 7228 7379  te_usdc_order(sy
+0002b640: 6d62 6f6c 2c20 7479 7065 2c20 7369 6465  mbol, type, side
+0002b650: 2c20 616d 6f75 6e74 2c20 7072 6963 652c  , amount, price,
+0002b660: 2070 6172 616d 7329 0a20 2020 2020 2020   params).       
+0002b670: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0002b680: 2020 2072 6574 7572 6e20 7365 6c66 2e63     return self.c
+0002b690: 7265 6174 655f 636f 6e74 7261 6374 5f76  reate_contract_v
+0002b6a0: 335f 6f72 6465 7228 7379 6d62 6f6c 2c20  3_order(symbol, 
+0002b6b0: 7479 7065 2c20 7369 6465 2c20 616d 6f75  type, side, amou
+0002b6c0: 6e74 2c20 7072 6963 652c 2070 6172 616d  nt, price, param
+0002b6d0: 7329 0a0a 2020 2020 6465 6620 6372 6561  s)..    def crea
+0002b6e0: 7465 5f75 6e69 6669 6564 5f61 6363 6f75  te_unified_accou
+0002b6f0: 6e74 5f6f 7264 6572 2873 656c 662c 2073  nt_order(self, s
+0002b700: 796d 626f 6c3a 2073 7472 2c20 7479 7065  ymbol: str, type
+0002b710: 2c20 7369 6465 2c20 616d 6f75 6e74 2c20  , side, amount, 
+0002b720: 7072 6963 653d 4e6f 6e65 2c20 7061 7261  price=None, para
+0002b730: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
+0002b740: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
+0002b750: 7328 290a 2020 2020 2020 2020 6d61 726b  s().        mark
+0002b760: 6574 203d 2073 656c 662e 6d61 726b 6574  et = self.market
+0002b770: 2873 796d 626f 6c29 0a20 2020 2020 2020  (symbol).       
+0002b780: 206c 6f77 6572 4361 7365 5479 7065 203d   lowerCaseType =
+0002b790: 2074 7970 652e 6c6f 7765 7228 290a 2020   type.lower().  
+0002b7a0: 2020 2020 2020 6966 2028 7072 6963 6520        if (price 
+0002b7b0: 6973 204e 6f6e 6529 2061 6e64 2028 6c6f  is None) and (lo
+0002b7c0: 7765 7243 6173 6554 7970 6520 3d3d 2027  werCaseType == '
+0002b7d0: 6c69 6d69 7427 293a 0a20 2020 2020 2020  limit'):.       
+0002b7e0: 2020 2020 2072 6169 7365 2041 7267 756d       raise Argum
+0002b7f0: 656e 7473 5265 7175 6972 6564 2873 656c  entsRequired(sel
+0002b800: 662e 6964 202b 2027 2063 7265 6174 654f  f.id + ' createO
+0002b810: 7264 6572 2072 6571 7569 7265 7320 6120  rder requires a 
+0002b820: 7072 6963 6520 6172 6775 6d65 6e74 2066  price argument f
+0002b830: 6f72 206c 696d 6974 206f 7264 6572 7327  or limit orders'
+0002b840: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
+0002b850: 7420 3d20 7b0a 2020 2020 2020 2020 2020  t = {.          
+0002b860: 2020 2773 796d 626f 6c27 3a20 6d61 726b    'symbol': mark
+0002b870: 6574 5b27 6964 275d 2c0a 2020 2020 2020  et['id'],.      
+0002b880: 2020 2020 2020 2773 6964 6527 3a20 7365        'side': se
+0002b890: 6c66 2e63 6170 6974 616c 697a 6528 7369  lf.capitalize(si
+0002b8a0: 6465 292c 0a20 2020 2020 2020 2020 2020  de),.           
+0002b8b0: 2027 6f72 6465 7254 7970 6527 3a20 7365   'orderType': se
+0002b8c0: 6c66 2e63 6170 6974 616c 697a 6528 6c6f  lf.capitalize(lo
+0002b8d0: 7765 7243 6173 6554 7970 6529 2c20 2023  werCaseType),  #
+0002b8e0: 206c 696d 6974 206f 7220 6d61 726b 6574   limit or market
+0002b8f0: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+0002b900: 7469 6d65 496e 466f 7263 6527 3a20 2747  timeInForce': 'G
+0002b910: 5443 272c 2020 2320 494f 432c 2046 4f4b  TC',  # IOC, FOK
+0002b920: 2c20 506f 7374 4f6e 6c79 0a20 2020 2020  , PostOnly.     
+0002b930: 2020 2020 2020 2023 2027 7461 6b65 5072         # 'takePr
+0002b940: 6f66 6974 273a 2031 3233 2e34 352c 2020  ofit': 123.45,  
+0002b950: 2320 7461 6b65 2070 726f 6669 7420 7072  # take profit pr
+0002b960: 6963 652c 206f 6e6c 7920 7461 6b65 2065  ice, only take e
+0002b970: 6666 6563 7420 7570 6f6e 206f 7065 6e69  ffect upon openi
+0002b980: 6e67 2074 6865 2070 6f73 6974 696f 6e0a  ng the position.
+0002b990: 2020 2020 2020 2020 2020 2020 2320 2773              # 's
+0002b9a0: 746f 704c 6f73 7327 3a20 3132 332e 3435  topLoss': 123.45
+0002b9b0: 2c20 2023 2073 746f 7020 6c6f 7373 2070  ,  # stop loss p
+0002b9c0: 7269 6365 2c20 6f6e 6c79 2074 616b 6520  rice, only take 
+0002b9d0: 6566 6665 6374 2075 706f 6e20 6f70 656e  effect upon open
+0002b9e0: 696e 6720 7468 6520 706f 7369 7469 6f6e  ing the position
+0002b9f0: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+0002ba00: 7265 6475 6365 4f6e 6c79 273a 2046 616c  reduceOnly': Fal
+0002ba10: 7365 2c20 2023 2072 6564 7563 6520 6f6e  se,  # reduce on
+0002ba20: 6c79 2c20 7265 7175 6972 6564 2066 6f72  ly, required for
+0002ba30: 206c 696e 6561 7220 6f72 6465 7273 0a20   linear orders. 
+0002ba40: 2020 2020 2020 2020 2020 2023 2077 6865             # whe
+0002ba50: 6e20 6372 6561 7469 6e67 2061 2063 6c6f  n creating a clo
+0002ba60: 7369 6e67 206f 7264 6572 2c20 6279 6269  sing order, bybi
+0002ba70: 7420 7265 636f 6d6d 656e 6473 2061 2054  t recommends a T
+0002ba80: 7275 6520 7661 6c75 6520 666f 720a 2020  rue value for.  
+0002ba90: 2020 2020 2020 2020 2020 2320 2063 6c6f            #  clo
+0002baa0: 7365 4f6e 5472 6967 6765 7220 746f 2061  seOnTrigger to a
+0002bab0: 766f 6964 2066 6169 6c69 6e67 2064 7565  void failing due
+0002bac0: 2074 6f20 696e 7375 6666 6963 6965 6e74   to insufficient
+0002bad0: 2061 7661 696c 6162 6c65 206d 6172 6769   available margi
+0002bae0: 6e0a 2020 2020 2020 2020 2020 2020 2320  n.            # 
+0002baf0: 2763 6c6f 7365 4f6e 5472 6967 6765 7227  'closeOnTrigger'
+0002bb00: 3a20 4661 6c73 652c 2072 6571 7569 7265  : False, require
+0002bb10: 6420 666f 7220 6c69 6e65 6172 206f 7264  d for linear ord
+0002bb20: 6572 730a 2020 2020 2020 2020 2020 2020  ers.            
+0002bb30: 2320 276f 7264 6572 4c69 6e6b 4964 273a  # 'orderLinkId':
+0002bb40: 2027 7374 7269 6e67 272c 2020 2320 756e   'string',  # un
+0002bb50: 6971 7565 2063 6c69 656e 7420 6f72 6465  ique client orde
+0002bb60: 7220 6964 2c20 6d61 7820 3336 2063 6861  r id, max 36 cha
+0002bb70: 7261 6374 6572 730a 2020 2020 2020 2020  racters.        
+0002bb80: 2020 2020 2320 2774 7269 6767 6572 5072      # 'triggerPr
+0002bb90: 6963 6527 3a20 3132 332e 3435 2c20 2023  ice': 123.45,  #
+0002bba0: 2074 7269 6767 6572 2070 7269 6365 2c20   trigger price, 
+0002bbb0: 7265 7175 6972 6564 2066 6f72 2063 6f6e  required for con
+0002bbc0: 6469 7469 6f6e 616c 206f 7264 6572 730a  ditional orders.
+0002bbd0: 2020 2020 2020 2020 2020 2020 2320 2774              # 't
+0002bbe0: 7269 6767 6572 4279 273a 2027 4d61 726b  riggerBy': 'Mark
+0002bbf0: 5072 6963 6527 2c20 2023 2049 6e64 6578  Price',  # Index
+0002bc00: 5072 6963 652c 204d 6172 6b50 7269 6365  Price, MarkPrice
+0002bc10: 2c20 4c61 7374 5072 6963 650a 2020 2020  , LastPrice.    
+0002bc20: 2020 2020 2020 2020 2320 2774 7054 7269          # 'tpTri
+0002bc30: 6767 6572 6279 273a 2027 4d61 726b 5072  ggerby': 'MarkPr
+0002bc40: 6963 6527 2c20 2023 2049 6e64 6578 5072  ice',  # IndexPr
+0002bc50: 6963 652c 204d 6172 6b50 7269 6365 2c20  ice, MarkPrice, 
+0002bc60: 4c61 7374 5072 6963 650a 2020 2020 2020  LastPrice.      
+0002bc70: 2020 2020 2020 2320 2773 6c54 7269 6767        # 'slTrigg
+0002bc80: 6572 4279 273a 2027 4d61 726b 5072 6963  erBy': 'MarkPric
+0002bc90: 6527 2c20 2023 2049 6e64 6578 5072 6963  e',  # IndexPric
+0002bca0: 652c 204d 6172 6b50 7269 6365 2c20 4c61  e, MarkPrice, La
+0002bcb0: 7374 5072 6963 650a 2020 2020 2020 2020  stPrice.        
+0002bcc0: 2020 2020 2320 276d 6d70 273a 2046 616c      # 'mmp': Fal
+0002bcd0: 7365 2020 2320 6d61 726b 6574 206d 616b  se  # market mak
+0002bce0: 6572 2070 726f 7465 6374 696f 6e0a 2020  er protection.  
+0002bcf0: 2020 2020 2020 2020 2020 2320 2770 6f73            # 'pos
+0002bd00: 6974 696f 6e49 6478 273a 2030 2c20 2023  itionIdx': 0,  #
+0002bd10: 2050 6f73 6974 696f 6e20 6d6f 6465 2e20   Position mode. 
+0002bd20: 556e 6966 6965 6420 6163 636f 756e 7420  Unified account 
+0002bd30: 6861 7320 6f6e 652d 7761 7920 6d6f 6465  has one-way mode
+0002bd40: 206f 6e6c 7928 3029 0a20 2020 2020 2020   only(0).       
+0002bd50: 2020 2020 2023 2027 7472 6967 6765 7244       # 'triggerD
+0002bd60: 6972 6563 7469 6f6e 273a 2031 2c20 2023  irection': 1,  #
+0002bd70: 2043 6f6e 6469 7469 6f6e 616c 206f 7264   Conditional ord
+0002bd80: 6572 2070 6172 616d 2e20 5573 6564 2074  er param. Used t
+0002bd90: 6f20 6964 656e 7469 6679 2074 6865 2065  o identify the e
+0002bda0: 7870 6563 7465 6420 6469 7265 6374 696f  xpected directio
+0002bdb0: 6e20 6f66 2074 6865 2063 6f6e 6469 7469  n of the conditi
+0002bdc0: 6f6e 616c 206f 7264 6572 2e20 313a 2074  onal order. 1: t
+0002bdd0: 7269 6767 6572 6564 2077 6865 6e20 6d61  riggered when ma
+0002bde0: 726b 6574 2070 7269 6365 2072 6973 6573  rket price rises
+0002bdf0: 2074 6f20 7472 6967 6765 7250 7269 6365   to triggerPrice
+0002be00: 2032 3a20 7472 6967 6765 7265 6420 7768   2: triggered wh
+0002be10: 656e 206d 6172 6b65 7420 7072 6963 6520  en market price 
+0002be20: 6661 6c6c 7320 746f 2074 7269 6767 6572  falls to trigger
+0002be30: 5072 6963 650a 2020 2020 2020 2020 2020  Price.          
+0002be40: 2020 2320 5661 6c69 6420 666f 7220 7370    # Valid for sp
+0002be50: 6f74 206f 6e6c 792e 0a20 2020 2020 2020  ot only..       
+0002be60: 2020 2020 2023 2027 6973 4c65 7665 7261       # 'isLevera
+0002be70: 6765 273a 2030 2c20 2023 2057 6865 7468  ge': 0,  # Wheth
+0002be80: 6572 2074 6f20 626f 7272 6f77 2e20 3028  er to borrow. 0(
+0002be90: 6465 6661 756c 7429 3a20 4661 6c73 652c  default): False,
+0002bea0: 2031 3a20 5472 7565 0a20 2020 2020 2020   1: True.       
+0002beb0: 2020 2020 2023 2027 6f72 6465 7246 696c       # 'orderFil
+0002bec0: 7465 7227 3a20 274f 7264 6572 2720 2023  ter': 'Order'  #
+0002bed0: 204f 7264 6572 2c74 7073 6c4f 7264 6572   Order,tpslOrder
+0002bee0: 2e20 4966 206e 6f74 2070 6173 7365 642c  . If not passed,
+0002bef0: 204f 7264 6572 2062 7920 6465 6661 756c   Order by defaul
+0002bf00: 740a 2020 2020 2020 2020 2020 2020 2320  t.            # 
+0002bf10: 5661 6c69 6420 666f 7220 6f70 7469 6f6e  Valid for option
+0002bf20: 206f 6e6c 792e 0a20 2020 2020 2020 2020   only..         
+0002bf30: 2020 2023 2027 6f72 6465 7249 7627 3a20     # 'orderIv': 
+0002bf40: 2730 272c 2020 2320 496d 706c 6965 6420  '0',  # Implied 
+0002bf50: 766f 6c61 7469 6c69 7479 3b20 7061 7261  volatility; para
+0002bf60: 6d65 7465 7273 2061 7265 2070 6173 7365  meters are passe
+0002bf70: 6420 6163 636f 7264 696e 6720 746f 2074  d according to t
+0002bf80: 6865 2072 6561 6c20 7661 6c75 653b 2066  he real value; f
+0002bf90: 6f72 2065 7861 6d70 6c65 2c20 666f 7220  or example, for 
+0002bfa0: 3130 252c 2030 2e31 2069 7320 7061 7373  10%, 0.1 is pass
+0002bfb0: 6564 0a20 2020 2020 2020 207d 0a20 2020  ed.        }.   
+0002bfc0: 2020 2020 2069 6620 6d61 726b 6574 5b27       if market['
+0002bfd0: 7370 6f74 275d 3a0a 2020 2020 2020 2020  spot']:.        
+0002bfe0: 2020 2020 7265 7175 6573 745b 2763 6174      request['cat
+0002bff0: 6567 6f72 7927 5d20 3d20 2773 706f 7427  egory'] = 'spot'
+0002c000: 0a20 2020 2020 2020 2065 6c69 6620 6d61  .        elif ma
+0002c010: 726b 6574 5b27 6c69 6e65 6172 275d 3a0a  rket['linear']:.
+0002c020: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0002c030: 6573 745b 2763 6174 6567 6f72 7927 5d20  est['category'] 
+0002c040: 3d20 276c 696e 6561 7227 0a20 2020 2020  = 'linear'.     
+0002c050: 2020 2065 6c69 6620 6d61 726b 6574 5b27     elif market['
+0002c060: 6f70 7469 6f6e 275d 3a0a 2020 2020 2020  option']:.      
+0002c070: 2020 2020 2020 7265 7175 6573 745b 2763        request['c
+0002c080: 6174 6567 6f72 7927 5d20 3d20 276f 7074  ategory'] = 'opt
+0002c090: 696f 6e27 0a20 2020 2020 2020 2065 6c73  ion'.        els
+0002c0a0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+0002c0b0: 6169 7365 204e 6f74 5375 7070 6f72 7465  aise NotSupporte
+0002c0c0: 6428 7365 6c66 2e69 6420 2b20 2720 6372  d(self.id + ' cr
+0002c0d0: 6561 7465 4f72 6465 7220 646f 6573 206e  eateOrder does n
+0002c0e0: 6f74 2061 6c6c 6f77 2069 6e76 6572 7365  ot allow inverse
+0002c0f0: 206d 6172 6b65 7420 6f72 6465 7273 2066   market orders f
+0002c100: 6f72 2027 202b 2073 796d 626f 6c20 2b20  or ' + symbol + 
+0002c110: 2720 6d61 726b 6574 7327 290a 2020 2020  ' markets').    
+0002c120: 2020 2020 6966 206d 6172 6b65 745b 2773      if market['s
+0002c130: 706f 7427 5d20 616e 6420 2874 7970 6520  pot'] and (type 
+0002c140: 3d3d 2027 6d61 726b 6574 2729 2061 6e64  == 'market') and
+0002c150: 2028 7369 6465 203d 3d20 2762 7579 2729   (side == 'buy')
+0002c160: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
+0002c170: 666f 7220 6d61 726b 6574 2062 7579 2069  for market buy i
+0002c180: 7420 7265 7175 6972 6573 2074 6865 2061  t requires the a
+0002c190: 6d6f 756e 7420 6f66 2071 756f 7465 2063  mount of quote c
+0002c1a0: 7572 7265 6e63 7920 746f 2073 7065 6e64  urrency to spend
+0002c1b0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0002c1c0: 7365 6c66 2e6f 7074 696f 6e73 5b27 6372  self.options['cr
+0002c1d0: 6561 7465 4d61 726b 6574 4275 794f 7264  eateMarketBuyOrd
+0002c1e0: 6572 5265 7175 6972 6573 5072 6963 6527  erRequiresPrice'
+0002c1f0: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+0002c200: 2020 2063 6f73 7420 3d20 7365 6c66 2e73     cost = self.s
+0002c210: 6166 655f 6e75 6d62 6572 2870 6172 616d  afe_number(param
+0002c220: 732c 2027 636f 7374 2729 0a20 2020 2020  s, 'cost').     
+0002c230: 2020 2020 2020 2020 2020 2070 6172 616d             param
+0002c240: 7320 3d20 7365 6c66 2e6f 6d69 7428 7061  s = self.omit(pa
+0002c250: 7261 6d73 2c20 2763 6f73 7427 290a 2020  rams, 'cost').  
+0002c260: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0002c270: 2070 7269 6365 2069 7320 4e6f 6e65 2061   price is None a
+0002c280: 6e64 2063 6f73 7420 6973 204e 6f6e 653a  nd cost is None:
+0002c290: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002c2a0: 2020 2020 2072 6169 7365 2049 6e76 616c       raise Inval
+0002c2b0: 6964 4f72 6465 7228 7365 6c66 2e69 6420  idOrder(self.id 
+0002c2c0: 2b20 2220 6372 6561 7465 4f72 6465 7228  + " createOrder(
+0002c2d0: 2920 7265 7175 6972 6573 2074 6865 2070  ) requires the p
+0002c2e0: 7269 6365 2061 7267 756d 656e 7420 7769  rice argument wi
+0002c2f0: 7468 206d 6172 6b65 7420 6275 7920 6f72  th market buy or
+0002c300: 6465 7273 2074 6f20 6361 6c63 756c 6174  ders to calculat
+0002c310: 6520 746f 7461 6c20 6f72 6465 7220 636f  e total order co
+0002c320: 7374 2861 6d6f 756e 7420 746f 2073 7065  st(amount to spe
+0002c330: 6e64 292c 2077 6865 7265 2063 6f73 7420  nd), where cost 
+0002c340: 3d20 616d 6f75 6e74 202a 2070 7269 6365  = amount * price
+0002c350: 2e20 5375 7070 6c79 2061 2070 7269 6365  . Supply a price
+0002c360: 2061 7267 756d 656e 7420 746f 2063 7265   argument to cre
+0002c370: 6174 654f 7264 6572 2829 2063 616c 6c20  ateOrder() call 
+0002c380: 6966 2079 6f75 2077 616e 7420 7468 6520  if you want the 
+0002c390: 636f 7374 2074 6f20 6265 2063 616c 6375  cost to be calcu
+0002c3a0: 6c61 7465 6420 666f 7220 796f 7520 6672  lated for you fr
+0002c3b0: 6f6d 2070 7269 6365 2061 6e64 2061 6d6f  om price and amo
+0002c3c0: 756e 742c 206f 722c 2061 6c74 6572 6e61  unt, or, alterna
+0002c3d0: 7469 7665 6c79 2c20 6164 6420 2e6f 7074  tively, add .opt
+0002c3e0: 696f 6e73 5b27 6372 6561 7465 4d61 726b  ions['createMark
+0002c3f0: 6574 4275 794f 7264 6572 5265 7175 6972  etBuyOrderRequir
+0002c400: 6573 5072 6963 6527 5d20 3d20 4661 6c73  esPrice'] = Fals
+0002c410: 6520 746f 2073 7570 706c 7920 7468 6520  e to supply the 
+0002c420: 636f 7374 2069 6e20 7468 6520 616d 6f75  cost in the amou
+0002c430: 6e74 2061 7267 756d 656e 7428 7468 6520  nt argument(the 
+0002c440: 6578 6368 616e 6765 2d73 7065 6369 6669  exchange-specifi
+0002c450: 6320 6265 6861 7669 6f75 7229 2229 0a20  c behaviour)"). 
+0002c460: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0002c470: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0002c480: 2020 2020 2020 2020 2061 6d6f 756e 7453           amountS
+0002c490: 7472 696e 6720 3d20 7365 6c66 2e6e 756d  tring = self.num
+0002c4a0: 6265 725f 746f 5f73 7472 696e 6728 616d  ber_to_string(am
+0002c4b0: 6f75 6e74 290a 2020 2020 2020 2020 2020  ount).          
+0002c4c0: 2020 2020 2020 2020 2020 7072 6963 6553            priceS
+0002c4d0: 7472 696e 6720 3d20 7365 6c66 2e6e 756d  tring = self.num
+0002c4e0: 6265 725f 746f 5f73 7472 696e 6728 7072  ber_to_string(pr
+0002c4f0: 6963 6529 0a20 2020 2020 2020 2020 2020  ice).           
+0002c500: 2020 2020 2020 2020 2071 756f 7465 416d           quoteAm
+0002c510: 6f75 6e74 203d 2050 7265 6369 7365 2e73  ount = Precise.s
+0002c520: 7472 696e 675f 6d75 6c28 616d 6f75 6e74  tring_mul(amount
+0002c530: 5374 7269 6e67 2c20 7072 6963 6553 7472  String, priceStr
+0002c540: 696e 6729 0a20 2020 2020 2020 2020 2020  ing).           
+0002c550: 2020 2020 2020 2020 2061 6d6f 756e 7420           amount 
+0002c560: 3d20 636f 7374 2069 6620 2863 6f73 7420  = cost if (cost 
+0002c570: 6973 206e 6f74 204e 6f6e 6529 2065 6c73  is not None) els
+0002c580: 6520 7365 6c66 2e70 6172 7365 5f6e 756d  e self.parse_num
+0002c590: 6265 7228 7175 6f74 6541 6d6f 756e 7429  ber(quoteAmount)
+0002c5a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002c5b0: 2020 2020 2072 6571 7565 7374 5b27 7174       request['qt
+0002c5c0: 7927 5d20 3d20 7365 6c66 2e63 6f73 745f  y'] = self.cost_
+0002c5d0: 746f 5f70 7265 6369 7369 6f6e 2873 796d  to_precision(sym
+0002c5e0: 626f 6c2c 2061 6d6f 756e 7429 0a20 2020  bol, amount).   
+0002c5f0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+0002c600: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0002c610: 6571 7565 7374 5b27 7174 7927 5d20 3d20  equest['qty'] = 
+0002c620: 7365 6c66 2e63 6f73 745f 746f 5f70 7265  self.cost_to_pre
+0002c630: 6369 7369 6f6e 2873 796d 626f 6c2c 2061  cision(symbol, a
+0002c640: 6d6f 756e 7429 0a20 2020 2020 2020 2065  mount).        e
+0002c650: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0002c660: 2072 6571 7565 7374 5b27 7174 7927 5d20   request['qty'] 
+0002c670: 3d20 7365 6c66 2e61 6d6f 756e 745f 746f  = self.amount_to
+0002c680: 5f70 7265 6369 7369 6f6e 2873 796d 626f  _precision(symbo
+0002c690: 6c2c 2061 6d6f 756e 7429 0a20 2020 2020  l, amount).     
+0002c6a0: 2020 2069 734d 6172 6b65 7420 3d20 6c6f     isMarket = lo
+0002c6b0: 7765 7243 6173 6554 7970 6520 3d3d 2027  werCaseType == '
+0002c6c0: 6d61 726b 6574 270a 2020 2020 2020 2020  market'.        
+0002c6d0: 6973 4c69 6d69 7420 3d20 6c6f 7765 7243  isLimit = lowerC
+0002c6e0: 6173 6554 7970 6520 3d3d 2027 6c69 6d69  aseType == 'limi
+0002c6f0: 7427 0a20 2020 2020 2020 2069 6620 6973  t'.        if is
+0002c700: 4c69 6d69 743a 0a20 2020 2020 2020 2020  Limit:.         
+0002c710: 2020 2072 6571 7565 7374 5b27 7072 6963     request['pric
+0002c720: 6527 5d20 3d20 7365 6c66 2e70 7269 6365  e'] = self.price
+0002c730: 5f74 6f5f 7072 6563 6973 696f 6e28 7379  _to_precision(sy
+0002c740: 6d62 6f6c 2c20 7072 6963 6529 0a20 2020  mbol, price).   
+0002c750: 2020 2020 2074 696d 6549 6e46 6f72 6365       timeInForce
+0002c760: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+0002c770: 696e 675f 6c6f 7765 7228 7061 7261 6d73  ing_lower(params
+0002c780: 2c20 2774 696d 6549 6e46 6f72 6365 2729  , 'timeInForce')
+0002c790: 2020 2320 7365 6c66 2069 7320 7361 6d65    # self is same
+0002c7a0: 2073 7065 6369 6669 6320 7061 7261 6d0a   specific param.
+0002c7b0: 2020 2020 2020 2020 706f 7374 4f6e 6c79          postOnly
+0002c7c0: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+0002c7d0: 706f 7374 4f6e 6c79 2c20 7061 7261 6d73  postOnly, params
+0002c7e0: 203d 2073 656c 662e 6861 6e64 6c65 5f70   = self.handle_p
+0002c7f0: 6f73 745f 6f6e 6c79 2869 734d 6172 6b65  ost_only(isMarke
+0002c800: 742c 2074 696d 6549 6e46 6f72 6365 203d  t, timeInForce =
+0002c810: 3d20 2750 6f73 744f 6e6c 7927 2c20 7061  = 'PostOnly', pa
+0002c820: 7261 6d73 290a 2020 2020 2020 2020 6966  rams).        if
+0002c830: 2070 6f73 744f 6e6c 793a 0a20 2020 2020   postOnly:.     
+0002c840: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+0002c850: 7469 6d65 496e 466f 7263 6527 5d20 3d20  timeInForce'] = 
+0002c860: 2750 6f73 744f 6e6c 7927 0a20 2020 2020  'PostOnly'.     
+0002c870: 2020 2065 6c69 6620 7469 6d65 496e 466f     elif timeInFo
+0002c880: 7263 6520 3d3d 2027 6774 6327 3a0a 2020  rce == 'gtc':.  
+0002c890: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+0002c8a0: 745b 2774 696d 6549 6e46 6f72 6365 275d  t['timeInForce']
+0002c8b0: 203d 2027 4754 4327 0a20 2020 2020 2020   = 'GTC'.       
+0002c8c0: 2065 6c69 6620 7469 6d65 496e 466f 7263   elif timeInForc
+0002c8d0: 6520 3d3d 2027 666f 6b27 3a0a 2020 2020  e == 'fok':.    
+0002c8e0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+0002c8f0: 2774 696d 6549 6e46 6f72 6365 275d 203d  'timeInForce'] =
+0002c900: 2027 464f 4b27 0a20 2020 2020 2020 2065   'FOK'.        e
+0002c910: 6c69 6620 7469 6d65 496e 466f 7263 6520  lif timeInForce 
+0002c920: 3d3d 2027 696f 6327 3a0a 2020 2020 2020  == 'ioc':.      
+0002c930: 2020 2020 2020 7265 7175 6573 745b 2774        request['t
+0002c940: 696d 6549 6e46 6f72 6365 275d 203d 2027  imeInForce'] = '
+0002c950: 494f 4327 0a20 2020 2020 2020 2074 7269  IOC'.        tri
+0002c960: 6767 6572 5072 6963 6520 3d20 7365 6c66  ggerPrice = self
+0002c970: 2e73 6166 655f 6e75 6d62 6572 5f32 2870  .safe_number_2(p
+0002c980: 6172 616d 732c 2027 7472 6967 6765 7250  arams, 'triggerP
+0002c990: 7269 6365 272c 2027 7374 6f70 5072 6963  rice', 'stopPric
+0002c9a0: 6527 290a 2020 2020 2020 2020 7374 6f70  e').        stop
+0002c9b0: 4c6f 7373 5472 6967 6765 7250 7269 6365  LossTriggerPrice
+0002c9c0: 203d 2073 656c 662e 7361 6665 5f6e 756d   = self.safe_num
+0002c9d0: 6265 7228 7061 7261 6d73 2c20 2773 746f  ber(params, 'sto
+0002c9e0: 704c 6f73 7350 7269 6365 2729 0a20 2020  pLossPrice').   
+0002c9f0: 2020 2020 2074 616b 6550 726f 6669 7454       takeProfitT
+0002ca00: 7269 6767 6572 5072 6963 6520 3d20 7365  riggerPrice = se
+0002ca10: 6c66 2e73 6166 655f 6e75 6d62 6572 2870  lf.safe_number(p
+0002ca20: 6172 616d 732c 2027 7461 6b65 5072 6f66  arams, 'takeProf
+0002ca30: 6974 5072 6963 6527 290a 2020 2020 2020  itPrice').      
+0002ca40: 2020 7374 6f70 4c6f 7373 203d 2073 656c    stopLoss = sel
+0002ca50: 662e 7361 6665 5f6e 756d 6265 7228 7061  f.safe_number(pa
+0002ca60: 7261 6d73 2c20 2773 746f 704c 6f73 7327  rams, 'stopLoss'
+0002ca70: 290a 2020 2020 2020 2020 7461 6b65 5072  ).        takePr
+0002ca80: 6f66 6974 203d 2073 656c 662e 7361 6665  ofit = self.safe
+0002ca90: 5f6e 756d 6265 7228 7061 7261 6d73 2c20  _number(params, 
+0002caa0: 2774 616b 6550 726f 6669 7427 290a 2020  'takeProfit').  
+0002cab0: 2020 2020 2020 6973 5374 6f70 4c6f 7373        isStopLoss
+0002cac0: 5472 6967 6765 724f 7264 6572 203d 2073  TriggerOrder = s
+0002cad0: 746f 704c 6f73 7354 7269 6767 6572 5072  topLossTriggerPr
+0002cae0: 6963 6520 6973 206e 6f74 204e 6f6e 650a  ice is not None.
+0002caf0: 2020 2020 2020 2020 6973 5461 6b65 5072          isTakePr
+0002cb00: 6f66 6974 5472 6967 6765 724f 7264 6572  ofitTriggerOrder
+0002cb10: 203d 2074 616b 6550 726f 6669 7454 7269   = takeProfitTri
+0002cb20: 6767 6572 5072 6963 6520 6973 206e 6f74  ggerPrice is not
+0002cb30: 204e 6f6e 650a 2020 2020 2020 2020 6973   None.        is
+0002cb40: 5374 6f70 4c6f 7373 203d 2073 746f 704c  StopLoss = stopL
+0002cb50: 6f73 7320 6973 206e 6f74 204e 6f6e 650a  oss is not None.
+0002cb60: 2020 2020 2020 2020 6973 5461 6b65 5072          isTakePr
+0002cb70: 6f66 6974 203d 2074 616b 6550 726f 6669  ofit = takeProfi
+0002cb80: 7420 6973 206e 6f74 204e 6f6e 650a 2020  t is not None.  
+0002cb90: 2020 2020 2020 6973 4275 7920 3d20 7369        isBuy = si
+0002cba0: 6465 203d 3d20 2762 7579 270a 2020 2020  de == 'buy'.    
+0002cbb0: 2020 2020 6173 6365 6e64 696e 6720 3d20      ascending = 
+0002cbc0: 6e6f 7420 6973 4275 7920 6966 2073 746f  not isBuy if sto
+0002cbd0: 704c 6f73 7354 7269 6767 6572 5072 6963  pLossTriggerPric
+0002cbe0: 6520 656c 7365 2069 7342 7579 0a20 2020  e else isBuy.   
+0002cbf0: 2020 2020 2069 6620 7472 6967 6765 7250       if triggerP
+0002cc00: 7269 6365 2069 7320 6e6f 7420 4e6f 6e65  rice is not None
+0002cc10: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+0002cc20: 7175 6573 745b 2774 7269 6767 6572 4469  quest['triggerDi
+0002cc30: 7265 6374 696f 6e27 5d20 3d20 3220 6966  rection'] = 2 if
+0002cc40: 2061 7363 656e 6469 6e67 2065 6c73 6520   ascending else 
+0002cc50: 310a 2020 2020 2020 2020 2020 2020 7265  1.            re
+0002cc60: 7175 6573 745b 2774 7269 6767 6572 5072  quest['triggerPr
+0002cc70: 6963 6527 5d20 3d20 7365 6c66 2e70 7269  ice'] = self.pri
+0002cc80: 6365 5f74 6f5f 7072 6563 6973 696f 6e28  ce_to_precision(
+0002cc90: 7379 6d62 6f6c 2c20 7472 6967 6765 7250  symbol, triggerP
+0002cca0: 7269 6365 290a 2020 2020 2020 2020 656c  rice).        el
+0002ccb0: 6966 2069 7353 746f 704c 6f73 7354 7269  if isStopLossTri
+0002ccc0: 6767 6572 4f72 6465 7220 6f72 2069 7354  ggerOrder or isT
+0002ccd0: 616b 6550 726f 6669 7454 7269 6767 6572  akeProfitTrigger
+0002cce0: 4f72 6465 723a 0a20 2020 2020 2020 2020  Order:.         
+0002ccf0: 2020 2072 6571 7565 7374 5b27 7472 6967     request['trig
+0002cd00: 6765 7244 6972 6563 7469 6f6e 275d 203d  gerDirection'] =
+0002cd10: 2032 2069 6620 6173 6365 6e64 696e 6720   2 if ascending 
+0002cd20: 656c 7365 2031 0a20 2020 2020 2020 2020  else 1.         
+0002cd30: 2020 2074 7269 6767 6572 5072 6963 6520     triggerPrice 
+0002cd40: 3d20 7374 6f70 4c6f 7373 5472 6967 6765  = stopLossTrigge
+0002cd50: 7250 7269 6365 2069 6620 6973 5374 6f70  rPrice if isStop
+0002cd60: 4c6f 7373 5472 6967 6765 724f 7264 6572  LossTriggerOrder
+0002cd70: 2065 6c73 6520 7461 6b65 5072 6f66 6974   else takeProfit
+0002cd80: 5472 6967 6765 7250 7269 6365 0a20 2020  TriggerPrice.   
+0002cd90: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0002cda0: 5b27 7472 6967 6765 7250 7269 6365 275d  ['triggerPrice']
+0002cdb0: 203d 2073 656c 662e 7072 6963 655f 746f   = self.price_to
+0002cdc0: 5f70 7265 6369 7369 6f6e 2873 796d 626f  _precision(symbo
+0002cdd0: 6c2c 2074 7269 6767 6572 5072 6963 6529  l, triggerPrice)
+0002cde0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+0002cdf0: 7565 7374 5b27 7265 6475 6365 4f6e 6c79  uest['reduceOnly
+0002ce00: 275d 203d 2054 7275 650a 2020 2020 2020  '] = True.      
+0002ce10: 2020 656c 6966 2069 7353 746f 704c 6f73    elif isStopLos
+0002ce20: 7320 6f72 2069 7354 616b 6550 726f 6669  s or isTakeProfi
+0002ce30: 743a 0a20 2020 2020 2020 2020 2020 2069  t:.            i
+0002ce40: 6620 6973 5374 6f70 4c6f 7373 3a0a 2020  f isStopLoss:.  
+0002ce50: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0002ce60: 7175 6573 745b 2773 746f 704c 6f73 7327  quest['stopLoss'
+0002ce70: 5d20 3d20 7365 6c66 2e70 7269 6365 5f74  ] = self.price_t
+0002ce80: 6f5f 7072 6563 6973 696f 6e28 7379 6d62  o_precision(symb
+0002ce90: 6f6c 2c20 7374 6f70 4c6f 7373 290a 2020  ol, stopLoss).  
+0002cea0: 2020 2020 2020 2020 2020 6966 2069 7354            if isT
+0002ceb0: 616b 6550 726f 6669 743a 0a20 2020 2020  akeProfit:.     
+0002cec0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+0002ced0: 7374 5b27 7461 6b65 5072 6f66 6974 275d  st['takeProfit']
+0002cee0: 203d 2073 656c 662e 7072 6963 655f 746f   = self.price_to
+0002cef0: 5f70 7265 6369 7369 6f6e 2873 796d 626f  _precision(symbo
+0002cf00: 6c2c 2074 616b 6550 726f 6669 7429 0a20  l, takeProfit). 
+0002cf10: 2020 2020 2020 2069 6620 6d61 726b 6574         if market
+0002cf20: 5b27 7370 6f74 275d 3a0a 2020 2020 2020  ['spot']:.      
+0002cf30: 2020 2020 2020 2320 6f6e 6c79 2077 6f72        # only wor
+0002cf40: 6b73 2066 6f72 2073 706f 7420 6d61 726b  ks for spot mark
+0002cf50: 6574 0a20 2020 2020 2020 2020 2020 2069  et.            i
+0002cf60: 6620 7472 6967 6765 7250 7269 6365 2069  f triggerPrice i
+0002cf70: 7320 6e6f 7420 4e6f 6e65 206f 7220 7374  s not None or st
+0002cf80: 6f70 4c6f 7373 5472 6967 6765 7250 7269  opLossTriggerPri
+0002cf90: 6365 2069 7320 6e6f 7420 4e6f 6e65 206f  ce is not None o
+0002cfa0: 7220 7461 6b65 5072 6f66 6974 5472 6967  r takeProfitTrig
+0002cfb0: 6765 7250 7269 6365 2069 7320 6e6f 7420  gerPrice is not 
+0002cfc0: 4e6f 6e65 206f 7220 6973 5374 6f70 4c6f  None or isStopLo
+0002cfd0: 7373 206f 7220 6973 5461 6b65 5072 6f66  ss or isTakeProf
+0002cfe0: 6974 3a0a 2020 2020 2020 2020 2020 2020  it:.            
+0002cff0: 2020 2020 7265 7175 6573 745b 276f 7264      request['ord
+0002d000: 6572 4669 6c74 6572 275d 203d 2027 7470  erFilter'] = 'tp
+0002d010: 736c 4f72 6465 7227 0a20 2020 2020 2020  slOrder'.       
+0002d020: 2063 6c69 656e 744f 7264 6572 4964 203d   clientOrderId =
+0002d030: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+0002d040: 6728 7061 7261 6d73 2c20 2763 6c69 656e  g(params, 'clien
+0002d050: 744f 7264 6572 4964 2729 0a20 2020 2020  tOrderId').     
+0002d060: 2020 2069 6620 636c 6965 6e74 4f72 6465     if clientOrde
+0002d070: 7249 6420 6973 206e 6f74 204e 6f6e 653a  rId is not None:
+0002d080: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+0002d090: 7565 7374 5b27 6f72 6465 724c 696e 6b49  uest['orderLinkI
+0002d0a0: 6427 5d20 3d20 636c 6965 6e74 4f72 6465  d'] = clientOrde
+0002d0b0: 7249 640a 2020 2020 2020 2020 656c 6966  rId.        elif
+0002d0c0: 206d 6172 6b65 745b 276f 7074 696f 6e27   market['option'
+0002d0d0: 5d3a 0a20 2020 2020 2020 2020 2020 2023  ]:.            #
+0002d0e0: 206d 616e 6461 746f 7279 2066 6965 6c64   mandatory field
+0002d0f0: 2066 6f72 206f 7074 696f 6e73 0a20 2020   for options.   
+0002d100: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0002d110: 5b27 6f72 6465 724c 696e 6b49 6427 5d20  ['orderLinkId'] 
+0002d120: 3d20 7365 6c66 2e75 7569 6431 3628 290a  = self.uuid16().
+0002d130: 2020 2020 2020 2020 7061 7261 6d73 203d          params =
+0002d140: 2073 656c 662e 6f6d 6974 2870 6172 616d   self.omit(param
+0002d150: 732c 205b 2773 746f 7050 7269 6365 272c  s, ['stopPrice',
+0002d160: 2027 7469 6d65 496e 466f 7263 6527 2c20   'timeInForce', 
+0002d170: 2773 746f 704c 6f73 7350 7269 6365 272c  'stopLossPrice',
+0002d180: 2027 7461 6b65 5072 6f66 6974 5072 6963   'takeProfitPric
+0002d190: 6527 2c20 2770 6f73 744f 6e6c 7927 2c20  e', 'postOnly', 
+0002d1a0: 2763 6c69 656e 744f 7264 6572 4964 272c  'clientOrderId',
+0002d1b0: 2027 7472 6967 6765 7250 7269 6365 272c   'triggerPrice',
+0002d1c0: 2027 7374 6f70 4c6f 7373 272c 2027 7461   'stopLoss', 'ta
+0002d1d0: 6b65 5072 6f66 6974 275d 290a 2020 2020  keProfit']).    
+0002d1e0: 2020 2020 7265 7370 6f6e 7365 203d 2073      response = s
+0002d1f0: 656c 662e 7072 6976 6174 6550 6f73 7456  elf.privatePostV
+0002d200: 354f 7264 6572 4372 6561 7465 2873 656c  5OrderCreate(sel
+0002d210: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
+0002d220: 2c20 7061 7261 6d73 2929 0a20 2020 2020  , params)).     
+0002d230: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
+0002d240: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
+0002d250: 2020 2020 2020 2022 7265 7443 6f64 6522         "retCode"
+0002d260: 3a20 302c 0a20 2020 2020 2020 2023 2020  : 0,.        #  
+0002d270: 2020 2020 2020 2022 7265 744d 7367 223a         "retMsg":
+0002d280: 2022 4f4b 222c 0a20 2020 2020 2020 2023   "OK",.        #
+0002d290: 2020 2020 2020 2020 2022 7265 7375 6c74           "result
+0002d2a0: 223a 207b 0a20 2020 2020 2020 2023 2020  ": {.        #  
+0002d2b0: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
+0002d2c0: 7249 6422 3a20 2231 3332 3130 3033 3734  rId": "132100374
+0002d2d0: 3933 3836 3332 3735 3532 222c 0a20 2020  9386327552",.   
+0002d2e0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0002d2f0: 2020 2022 6f72 6465 724c 696e 6b49 6422     "orderLinkId"
+0002d300: 3a20 2273 706f 742d 7465 7374 2d70 6f73  : "spot-test-pos
+0002d310: 746f 6e6c 7922 0a20 2020 2020 2020 2023  tonly".        #
+0002d320: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
+0002d330: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
+0002d340: 6574 4578 7449 6e66 6f22 3a20 7b7d 2c0a  etExtInfo": {},.
+0002d350: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0002d360: 2020 2274 696d 6522 3a20 3136 3732 3231    "time": 167221
+0002d370: 3139 3138 3437 310a 2020 2020 2020 2020  1918471.        
+0002d380: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
+0002d390: 230a 2020 2020 2020 2020 6f72 6465 7220  #.        order 
+0002d3a0: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+0002d3b0: 6528 7265 7370 6f6e 7365 2c20 2772 6573  e(response, 'res
+0002d3c0: 756c 7427 2c20 7b7d 290a 2020 2020 2020  ult', {}).      
+0002d3d0: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
+0002d3e0: 7273 655f 6f72 6465 7228 6f72 6465 7229  rse_order(order)
+0002d3f0: 0a0a 2020 2020 6465 6620 6372 6561 7465  ..    def create
+0002d400: 5f73 706f 745f 6f72 6465 7228 7365 6c66  _spot_order(self
+0002d410: 2c20 7379 6d62 6f6c 3a20 7374 722c 2074  , symbol: str, t
+0002d420: 7970 652c 2073 6964 652c 2061 6d6f 756e  ype, side, amoun
+0002d430: 742c 2070 7269 6365 3d4e 6f6e 652c 2070  t, price=None, p
+0002d440: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
+0002d450: 2020 2073 656c 662e 6c6f 6164 5f6d 6172     self.load_mar
+0002d460: 6b65 7473 2829 0a20 2020 2020 2020 206d  kets().        m
+0002d470: 6172 6b65 7420 3d20 7365 6c66 2e6d 6172  arket = self.mar
+0002d480: 6b65 7428 7379 6d62 6f6c 290a 2020 2020  ket(symbol).    
+0002d490: 2020 2020 7570 7065 7243 6173 6554 7970      upperCaseTyp
+0002d4a0: 6520 3d20 7479 7065 2e75 7070 6572 2829  e = type.upper()
+0002d4b0: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
+0002d4c0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+0002d4d0: 2027 7379 6d62 6f6c 273a 206d 6172 6b65   'symbol': marke
+0002d4e0: 745b 2769 6427 5d2c 0a20 2020 2020 2020  t['id'],.       
+0002d4f0: 2020 2020 2027 7369 6465 273a 2073 656c       'side': sel
+0002d500: 662e 6361 7069 7461 6c69 7a65 2873 6964  f.capitalize(sid
+0002d510: 6529 2c0a 2020 2020 2020 2020 2020 2020  e),.            
+0002d520: 276f 7264 6572 5479 7065 273a 2075 7070  'orderType': upp
+0002d530: 6572 4361 7365 5479 7065 2c20 2023 206c  erCaseType,  # l
+0002d540: 696d 6974 2c20 6d61 726b 6574 206f 7220  imit, market or 
+0002d550: 6c69 6d69 745f 6d61 6b65 720a 2020 2020  limit_maker.    
+0002d560: 2020 2020 2020 2020 2774 696d 6549 6e46          'timeInF
+0002d570: 6f72 6365 273a 2027 4754 4327 2c20 2023  orce': 'GTC',  #
+0002d580: 2046 4f4b 2c20 494f 430a 2020 2020 2020   FOK, IOC.      
+0002d590: 2020 2020 2020 2320 276f 7264 6572 4c69        # 'orderLi
+0002d5a0: 6e6b 4964 273a 2027 7374 7269 6e67 272c  nkId': 'string',
+0002d5b0: 2020 2320 756e 6971 7565 2063 6c69 656e    # unique clien
+0002d5c0: 7420 6f72 6465 7220 6964 2c20 6d61 7820  t order id, max 
+0002d5d0: 3336 2063 6861 7261 6374 6572 730a 2020  36 characters.  
+0002d5e0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+0002d5f0: 6966 2028 7479 7065 203d 3d20 276d 6172  if (type == 'mar
+0002d600: 6b65 7427 2920 616e 6420 2873 6964 6520  ket') and (side 
+0002d610: 3d3d 2027 6275 7927 293a 0a20 2020 2020  == 'buy'):.     
+0002d620: 2020 2020 2020 2023 2066 6f72 206d 6172         # for mar
+0002d630: 6b65 7420 6275 7920 6974 2072 6571 7569  ket buy it requi
+0002d640: 7265 7320 7468 6520 616d 6f75 6e74 206f  res the amount o
+0002d650: 6620 7175 6f74 6520 6375 7272 656e 6379  f quote currency
+0002d660: 2074 6f20 7370 656e 640a 2020 2020 2020   to spend.      
+0002d670: 2020 2020 2020 6966 2073 656c 662e 6f70        if self.op
+0002d680: 7469 6f6e 735b 2763 7265 6174 654d 6172  tions['createMar
+0002d690: 6b65 7442 7579 4f72 6465 7252 6571 7569  ketBuyOrderRequi
+0002d6a0: 7265 7350 7269 6365 275d 3a0a 2020 2020  resPrice']:.    
+0002d6b0: 2020 2020 2020 2020 2020 2020 636f 7374              cost
+0002d6c0: 203d 2073 656c 662e 7361 6665 5f6e 756d   = self.safe_num
+0002d6d0: 6265 7228 7061 7261 6d73 2c20 2763 6f73  ber(params, 'cos
+0002d6e0: 7427 290a 2020 2020 2020 2020 2020 2020  t').            
+0002d6f0: 2020 2020 7061 7261 6d73 203d 2073 656c      params = sel
+0002d700: 662e 6f6d 6974 2870 6172 616d 732c 2027  f.omit(params, '
+0002d710: 636f 7374 2729 0a20 2020 2020 2020 2020  cost').         
+0002d720: 2020 2020 2020 2069 6620 7072 6963 6520         if price 
+0002d730: 6973 204e 6f6e 6520 616e 6420 636f 7374  is None and cost
+0002d740: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+0002d750: 2020 2020 2020 2020 2020 2020 2020 7261                ra
+0002d760: 6973 6520 496e 7661 6c69 644f 7264 6572  ise InvalidOrder
+0002d770: 2873 656c 662e 6964 202b 2022 2063 7265  (self.id + " cre
+0002d780: 6174 654f 7264 6572 2829 2072 6571 7569  ateOrder() requi
+0002d790: 7265 7320 7468 6520 7072 6963 6520 6172  res the price ar
+0002d7a0: 6775 6d65 6e74 2077 6974 6820 6d61 726b  gument with mark
+0002d7b0: 6574 2062 7579 206f 7264 6572 7320 746f  et buy orders to
+0002d7c0: 2063 616c 6375 6c61 7465 2074 6f74 616c   calculate total
+0002d7d0: 206f 7264 6572 2063 6f73 7428 616d 6f75   order cost(amou
+0002d7e0: 6e74 2074 6f20 7370 656e 6429 2c20 7768  nt to spend), wh
+0002d7f0: 6572 6520 636f 7374 203d 2061 6d6f 756e  ere cost = amoun
+0002d800: 7420 2a20 7072 6963 652e 2053 7570 706c  t * price. Suppl
+0002d810: 7920 6120 7072 6963 6520 6172 6775 6d65  y a price argume
+0002d820: 6e74 2074 6f20 6372 6561 7465 4f72 6465  nt to createOrde
+0002d830: 7228 2920 6361 6c6c 2069 6620 796f 7520  r() call if you 
+0002d840: 7761 6e74 2074 6865 2063 6f73 7420 746f  want the cost to
+0002d850: 2062 6520 6361 6c63 756c 6174 6564 2066   be calculated f
+0002d860: 6f72 2079 6f75 2066 726f 6d20 7072 6963  or you from pric
+0002d870: 6520 616e 6420 616d 6f75 6e74 2c20 6f72  e and amount, or
+0002d880: 2c20 616c 7465 726e 6174 6976 656c 792c  , alternatively,
+0002d890: 2061 6464 202e 6f70 7469 6f6e 735b 2763   add .options['c
+0002d8a0: 7265 6174 654d 6172 6b65 7442 7579 4f72  reateMarketBuyOr
+0002d8b0: 6465 7252 6571 7569 7265 7350 7269 6365  derRequiresPrice
+0002d8c0: 275d 203d 2046 616c 7365 2074 6f20 7375  '] = False to su
+0002d8d0: 7070 6c79 2074 6865 2063 6f73 7420 696e  pply the cost in
+0002d8e0: 2074 6865 2061 6d6f 756e 7420 6172 6775   the amount argu
+0002d8f0: 6d65 6e74 2874 6865 2065 7863 6861 6e67  ment(the exchang
+0002d900: 652d 7370 6563 6966 6963 2062 6568 6176  e-specific behav
+0002d910: 696f 7572 2922 290a 2020 2020 2020 2020  iour)").        
+0002d920: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0002d930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d940: 2020 616d 6f75 6e74 5374 7269 6e67 203d    amountString =
+0002d950: 2073 656c 662e 6e75 6d62 6572 5f74 6f5f   self.number_to_
+0002d960: 7374 7269 6e67 2861 6d6f 756e 7429 0a20  string(amount). 
+0002d970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d980: 2020 2070 7269 6365 5374 7269 6e67 203d     priceString =
+0002d990: 2073 656c 662e 6e75 6d62 6572 5f74 6f5f   self.number_to_
+0002d9a0: 7374 7269 6e67 2870 7269 6365 290a 2020  string(price).  
+0002d9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d9c0: 2020 7175 6f74 6541 6d6f 756e 7420 3d20    quoteAmount = 
+0002d9d0: 5072 6563 6973 652e 7374 7269 6e67 5f6d  Precise.string_m
+0002d9e0: 756c 2861 6d6f 756e 7453 7472 696e 672c  ul(amountString,
+0002d9f0: 2070 7269 6365 5374 7269 6e67 290a 2020   priceString).  
+0002da00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002da10: 2020 616d 6f75 6e74 203d 2063 6f73 7420    amount = cost 
+0002da20: 6966 2028 636f 7374 2069 7320 6e6f 7420  if (cost is not 
+0002da30: 4e6f 6e65 2920 656c 7365 2073 656c 662e  None) else self.
+0002da40: 7061 7273 655f 6e75 6d62 6572 2871 756f  parse_number(quo
+0002da50: 7465 416d 6f75 6e74 290a 2020 2020 2020  teAmount).      
+0002da60: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0002da70: 7175 6573 745b 276f 7264 6572 5174 7927  quest['orderQty'
+0002da80: 5d20 3d20 7365 6c66 2e63 6f73 745f 746f  ] = self.cost_to
+0002da90: 5f70 7265 6369 7369 6f6e 2873 796d 626f  _precision(symbo
+0002daa0: 6c2c 2061 6d6f 756e 7429 0a20 2020 2020  l, amount).     
+0002dab0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0002dac0: 2020 2020 2020 2020 2020 2020 2072 6571               req
+0002dad0: 7565 7374 5b27 6f72 6465 7251 7479 275d  uest['orderQty']
+0002dae0: 203d 2073 656c 662e 636f 7374 5f74 6f5f   = self.cost_to_
+0002daf0: 7072 6563 6973 696f 6e28 7379 6d62 6f6c  precision(symbol
+0002db00: 2c20 616d 6f75 6e74 290a 2020 2020 2020  , amount).      
+0002db10: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0002db20: 2020 2020 7265 7175 6573 745b 276f 7264      request['ord
+0002db30: 6572 5174 7927 5d20 3d20 7365 6c66 2e61  erQty'] = self.a
+0002db40: 6d6f 756e 745f 746f 5f70 7265 6369 7369  mount_to_precisi
+0002db50: 6f6e 2873 796d 626f 6c2c 2061 6d6f 756e  on(symbol, amoun
+0002db60: 7429 0a20 2020 2020 2020 2069 6620 2875  t).        if (u
+0002db70: 7070 6572 4361 7365 5479 7065 203d 3d20  pperCaseType == 
+0002db80: 274c 494d 4954 2729 206f 7220 2875 7070  'LIMIT') or (upp
+0002db90: 6572 4361 7365 5479 7065 203d 3d20 274c  erCaseType == 'L
+0002dba0: 494d 4954 5f4d 414b 4552 2729 3a0a 2020  IMIT_MAKER'):.  
+0002dbb0: 2020 2020 2020 2020 2020 6966 2070 7269            if pri
+0002dbc0: 6365 2069 7320 4e6f 6e65 3a0a 2020 2020  ce is None:.    
+0002dbd0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+0002dbe0: 6520 496e 7661 6c69 644f 7264 6572 2873  e InvalidOrder(s
+0002dbf0: 656c 662e 6964 202b 2027 2063 7265 6174  elf.id + ' creat
+0002dc00: 654f 7264 6572 2072 6571 7569 7265 7320  eOrder requires 
+0002dc10: 6120 7072 6963 6520 6172 6775 6d65 6e74  a price argument
+0002dc20: 2066 6f72 2061 2027 202b 2074 7970 6520   for a ' + type 
+0002dc30: 2b20 2720 6f72 6465 7227 290a 2020 2020  + ' order').    
+0002dc40: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+0002dc50: 276f 7264 6572 5072 6963 6527 5d20 3d20  'orderPrice'] = 
+0002dc60: 7365 6c66 2e70 7269 6365 5f74 6f5f 7072  self.price_to_pr
+0002dc70: 6563 6973 696f 6e28 7379 6d62 6f6c 2c20  ecision(symbol, 
+0002dc80: 7072 6963 6529 0a20 2020 2020 2020 2069  price).        i
+0002dc90: 734d 6172 6b65 7420 3d20 2875 7070 6572  sMarket = (upper
+0002dca0: 4361 7365 5479 7065 203d 3d20 274d 4152  CaseType == 'MAR
+0002dcb0: 4b45 5427 290a 2020 2020 2020 2020 706f  KET').        po
+0002dcc0: 7374 4f6e 6c79 203d 204e 6f6e 650a 2020  stOnly = None.  
+0002dcd0: 2020 2020 2020 706f 7374 4f6e 6c79 2c20        postOnly, 
+0002dce0: 7061 7261 6d73 203d 2073 656c 662e 6861  params = self.ha
+0002dcf0: 6e64 6c65 5f70 6f73 745f 6f6e 6c79 2869  ndle_post_only(i
+0002dd00: 734d 6172 6b65 742c 2074 7970 6520 3d3d  sMarket, type ==
+0002dd10: 2027 4c49 4d49 545f 4d41 4b45 5227 2c20   'LIMIT_MAKER', 
+0002dd20: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
+0002dd30: 6966 2070 6f73 744f 6e6c 793a 0a20 2020  if postOnly:.   
+0002dd40: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0002dd50: 5b27 6f72 6465 7254 7970 6527 5d20 3d20  ['orderType'] = 
+0002dd60: 274c 494d 4954 5f4d 414b 4552 270a 2020  'LIMIT_MAKER'.  
+0002dd70: 2020 2020 2020 636c 6965 6e74 4f72 6465        clientOrde
+0002dd80: 7249 6420 3d20 7365 6c66 2e73 6166 655f  rId = self.safe_
+0002dd90: 7374 7269 6e67 5f32 2870 6172 616d 732c  string_2(params,
+0002dda0: 2027 636c 6965 6e74 4f72 6465 7249 6427   'clientOrderId'
+0002ddb0: 2c20 276f 7264 6572 4c69 6e6b 4964 2729  , 'orderLinkId')
+0002ddc0: 0a20 2020 2020 2020 2069 6620 636c 6965  .        if clie
+0002ddd0: 6e74 4f72 6465 7249 6420 6973 206e 6f74  ntOrderId is not
+0002dde0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0002ddf0: 2020 2072 6571 7565 7374 5b27 6f72 6465     request['orde
+0002de00: 724c 696e 6b49 6427 5d20 3d20 636c 6965  rLinkId'] = clie
+0002de10: 6e74 4f72 6465 7249 640a 2020 2020 2020  ntOrderId.      
+0002de20: 2020 7061 7261 6d73 203d 2073 656c 662e    params = self.
+0002de30: 6f6d 6974 2870 6172 616d 732c 205b 2763  omit(params, ['c
+0002de40: 6c69 656e 744f 7264 6572 4964 272c 2027  lientOrderId', '
+0002de50: 6f72 6465 724c 696e 6b49 6427 2c20 2770  orderLinkId', 'p
+0002de60: 6f73 744f 6e6c 7927 5d29 0a20 2020 2020  ostOnly']).     
+0002de70: 2020 2062 726f 6b65 7249 6420 3d20 7365     brokerId = se
+0002de80: 6c66 2e73 6166 655f 7374 7269 6e67 2873  lf.safe_string(s
+0002de90: 656c 662e 6f70 7469 6f6e 732c 2027 6272  elf.options, 'br
+0002dea0: 6f6b 6572 4964 2729 0a20 2020 2020 2020  okerId').       
+0002deb0: 2069 6620 6272 6f6b 6572 4964 2069 7320   if brokerId is 
+0002dec0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+0002ded0: 2020 2020 2020 7265 7175 6573 745b 2761        request['a
+0002dee0: 6765 6e74 536f 7572 6365 275d 203d 2062  gentSource'] = b
+0002def0: 726f 6b65 7249 640a 2020 2020 2020 2020  rokerId.        
+0002df00: 7472 6967 6765 7250 7269 6365 203d 2073  triggerPrice = s
+0002df10: 656c 662e 7361 6665 5f6e 756d 6265 725f  elf.safe_number_
+0002df20: 3228 7061 7261 6d73 2c20 2774 7269 6767  2(params, 'trigg
+0002df30: 6572 5072 6963 6527 2c20 2773 746f 7050  erPrice', 'stopP
+0002df40: 7269 6365 2729 0a20 2020 2020 2020 2069  rice').        i
+0002df50: 6620 7472 6967 6765 7250 7269 6365 2069  f triggerPrice i
+0002df60: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0002df70: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+0002df80: 2774 7269 6767 6572 5072 6963 6527 5d20  'triggerPrice'] 
+0002df90: 3d20 7365 6c66 2e70 7269 6365 5f74 6f5f  = self.price_to_
+0002dfa0: 7072 6563 6973 696f 6e28 7379 6d62 6f6c  precision(symbol
+0002dfb0: 2c20 7472 6967 6765 7250 7269 6365 290a  , triggerPrice).
+0002dfc0: 2020 2020 2020 2020 7061 7261 6d73 203d          params =
+0002dfd0: 2073 656c 662e 6f6d 6974 2870 6172 616d   self.omit(param
+0002dfe0: 732c 2027 7374 6f70 5072 6963 6527 290a  s, 'stopPrice').
+0002dff0: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
+0002e000: 203d 2073 656c 662e 7072 6976 6174 6550   = self.privateP
+0002e010: 6f73 7453 706f 7456 3350 7269 7661 7465  ostSpotV3Private
+0002e020: 4f72 6465 7228 7365 6c66 2e65 7874 656e  Order(self.exten
+0002e030: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
+0002e040: 7329 290a 2020 2020 2020 2020 230a 2020  s)).        #.  
+0002e050: 2020 2020 2020 2320 2020 207b 0a20 2020        #    {.   
+0002e060: 2020 2020 2023 2020 2020 2020 2020 2272       #        "r
+0002e070: 6574 436f 6465 223a 2022 3022 2c0a 2020  etCode": "0",.  
+0002e080: 2020 2020 2020 2320 2020 2020 2020 2022        #        "
+0002e090: 7265 744d 7367 223a 2022 4f4b 222c 0a20  retMsg": "OK",. 
+0002e0a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0002e0b0: 2272 6573 756c 7422 3a20 7b0a 2020 2020  "result": {.    
+0002e0c0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0002e0d0: 2022 6f72 6465 7249 6422 3a20 2231 3237   "orderId": "127
+0002e0e0: 3437 3534 3931 3632 3837 3334 3632 3830  4754916287346280
+0002e0f0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0002e100: 2020 2020 2020 2020 226f 7264 6572 4c69          "orderLi
+0002e110: 6e6b 4964 223a 2022 3136 3636 3739 3836  nkId": "16667986
+0002e120: 3237 3031 3537 3330 222c 0a20 2020 2020  27015730",.     
+0002e130: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0002e140: 2273 796d 626f 6c22 3a20 2241 4156 4555  "symbol": "AAVEU
+0002e150: 5344 5422 2c0a 2020 2020 2020 2020 2320  SDT",.        # 
+0002e160: 2020 2020 2020 2020 2020 2022 6372 6561             "crea
+0002e170: 7465 5469 6d65 223a 2022 3136 3636 3639  teTime": "166669
+0002e180: 3836 3239 3832 3122 2c0a 2020 2020 2020  8629821",.      
+0002e190: 2020 2320 2020 2020 2020 2020 2020 2022    #            "
+0002e1a0: 6f72 6465 7250 7269 6365 223a 2022 3830  orderPrice": "80
+0002e1b0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0002e1c0: 2020 2020 2020 2020 226f 7264 6572 5174          "orderQt
+0002e1d0: 7922 3a20 2230 2e31 3122 2c0a 2020 2020  y": "0.11",.    
+0002e1e0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0002e1f0: 2022 6f72 6465 7254 7970 6522 3a20 224c   "orderType": "L
+0002e200: 494d 4954 222c 0a20 2020 2020 2020 2023  IMIT",.        #
+0002e210: 2020 2020 2020 2020 2020 2020 2273 6964              "sid
+0002e220: 6522 3a20 2242 5559 222c 0a20 2020 2020  e": "BUY",.     
+0002e230: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0002e240: 2273 7461 7475 7322 3a20 224e 4557 222c  "status": "NEW",
+0002e250: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0002e260: 2020 2020 2020 2274 696d 6549 6e46 6f72        "timeInFor
+0002e270: 6365 223a 2022 4754 4322 2c0a 2020 2020  ce": "GTC",.    
+0002e280: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0002e290: 2022 6163 636f 756e 7449 6422 3a20 2231   "accountId": "1
+0002e2a0: 3333 3830 3433 3422 2c0a 2020 2020 2020  3380434",.      
+0002e2b0: 2020 2320 2020 2020 2020 2020 2020 2022    #            "
+0002e2c0: 6578 6563 5174 7922 3a20 2230 222c 0a20  execQty": "0",. 
+0002e2d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0002e2e0: 2020 2020 226f 7264 6572 4361 7465 676f      "orderCatego
+0002e2f0: 7279 223a 2022 3022 0a20 2020 2020 2020  ry": "0".       
+0002e300: 2023 2020 2020 2020 2020 7d2c 0a20 2020   #        },.   
+0002e310: 2020 2020 2023 2020 2020 2020 2020 2272       #        "r
+0002e320: 6574 4578 744d 6170 223a 207b 7d2c 0a20  etExtMap": {},. 
+0002e330: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0002e340: 2272 6574 4578 7449 6e66 6f22 3a20 6e75  "retExtInfo": nu
+0002e350: 6c6c 2c0a 2020 2020 2020 2020 2320 2020  ll,.        #   
+0002e360: 2020 2020 2022 7469 6d65 223a 2022 3136       "time": "16
+0002e370: 3636 3639 3836 3237 3932 3622 0a20 2020  66698627926".   
+0002e380: 2020 2020 2023 2020 2020 7d0a 2020 2020       #    }.    
+0002e390: 2020 2020 230a 2020 2020 2020 2020 6f72      #.        or
+0002e3a0: 6465 7220 3d20 7365 6c66 2e73 6166 655f  der = self.safe_
+0002e3b0: 7661 6c75 6528 7265 7370 6f6e 7365 2c20  value(response, 
+0002e3c0: 2772 6573 756c 7427 2c20 7b7d 290a 2020  'result', {}).  
+0002e3d0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+0002e3e0: 662e 7061 7273 655f 6f72 6465 7228 6f72  f.parse_order(or
+0002e3f0: 6465 7229 0a0a 2020 2020 6465 6620 6372  der)..    def cr
+0002e400: 6561 7465 5f75 6e69 6669 6564 5f6d 6172  eate_unified_mar
+0002e410: 6769 6e5f 6f72 6465 7228 7365 6c66 2c20  gin_order(self, 
+0002e420: 7379 6d62 6f6c 3a20 7374 722c 2074 7970  symbol: str, typ
+0002e430: 652c 2073 6964 652c 2061 6d6f 756e 742c  e, side, amount,
+0002e440: 2070 7269 6365 3d4e 6f6e 652c 2070 6172   price=None, par
+0002e450: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
+0002e460: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
+0002e470: 7473 2829 0a20 2020 2020 2020 206d 6172  ts().        mar
+0002e480: 6b65 7420 3d20 7365 6c66 2e6d 6172 6b65  ket = self.marke
+0002e490: 7428 7379 6d62 6f6c 290a 2020 2020 2020  t(symbol).      
+0002e4a0: 2020 6966 206e 6f74 206d 6172 6b65 745b    if not market[
+0002e4b0: 276c 696e 6561 7227 5d20 616e 6420 6e6f  'linear'] and no
+0002e4c0: 7420 6d61 726b 6574 5b27 6f70 7469 6f6e  t market['option
+0002e4d0: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+0002e4e0: 7261 6973 6520 4e6f 7453 7570 706f 7274  raise NotSupport
+0002e4f0: 6564 2873 656c 662e 6964 202b 2027 2063  ed(self.id + ' c
+0002e500: 7265 6174 654f 7264 6572 2064 6f65 7320  reateOrder does 
+0002e510: 6e6f 7420 616c 6c6f 7720 696e 7665 7273  not allow invers
+0002e520: 6520 6d61 726b 6574 206f 7264 6572 7320  e market orders 
+0002e530: 666f 7220 2720 2b20 7379 6d62 6f6c 202b  for ' + symbol +
+0002e540: 2027 206d 6172 6b65 7473 2729 0a20 2020   ' markets').   
+0002e550: 2020 2020 206c 6f77 6572 4361 7365 5479       lowerCaseTy
+0002e560: 7065 203d 2074 7970 652e 6c6f 7765 7228  pe = type.lower(
+0002e570: 290a 2020 2020 2020 2020 6966 2028 7072  ).        if (pr
+0002e580: 6963 6520 6973 204e 6f6e 6529 2061 6e64  ice is None) and
+0002e590: 2028 6c6f 7765 7243 6173 6554 7970 6520   (lowerCaseType 
+0002e5a0: 3d3d 2027 6c69 6d69 7427 293a 0a20 2020  == 'limit'):.   
+0002e5b0: 2020 2020 2020 2020 2072 6169 7365 2041           raise A
+0002e5c0: 7267 756d 656e 7473 5265 7175 6972 6564  rgumentsRequired
+0002e5d0: 2873 656c 662e 6964 202b 2027 2063 7265  (self.id + ' cre
+0002e5e0: 6174 654f 7264 6572 2072 6571 7569 7265  ateOrder require
+0002e5f0: 7320 6120 7072 6963 6520 6172 6775 6d65  s a price argume
+0002e600: 6e74 2066 6f72 206c 696d 6974 206f 7264  nt for limit ord
+0002e610: 6572 7327 290a 2020 2020 2020 2020 7265  ers').        re
+0002e620: 7175 6573 7420 3d20 7b0a 2020 2020 2020  quest = {.      
+0002e630: 2020 2020 2020 2773 796d 626f 6c27 3a20        'symbol': 
+0002e640: 6d61 726b 6574 5b27 6964 275d 2c0a 2020  market['id'],.  
+0002e650: 2020 2020 2020 2020 2020 2773 6964 6527            'side'
+0002e660: 3a20 7365 6c66 2e63 6170 6974 616c 697a  : self.capitaliz
+0002e670: 6528 7369 6465 292c 0a20 2020 2020 2020  e(side),.       
+0002e680: 2020 2020 2027 6f72 6465 7254 7970 6527       'orderType'
+0002e690: 3a20 7365 6c66 2e63 6170 6974 616c 697a  : self.capitaliz
+0002e6a0: 6528 6c6f 7765 7243 6173 6554 7970 6529  e(lowerCaseType)
+0002e6b0: 2c20 2023 206c 696d 6974 206f 7220 6d61  ,  # limit or ma
+0002e6c0: 726b 6574 0a20 2020 2020 2020 2020 2020  rket.           
+0002e6d0: 2027 7469 6d65 496e 466f 7263 6527 3a20   'timeInForce': 
+0002e6e0: 2747 6f6f 6454 696c 6c43 616e 6365 6c27  'GoodTillCancel'
+0002e6f0: 2c20 2023 2049 6d6d 6564 6961 7465 4f72  ,  # ImmediateOr
+0002e700: 4361 6e63 656c 2c20 4669 6c6c 4f72 4b69  Cancel, FillOrKi
+0002e710: 6c6c 2c20 506f 7374 4f6e 6c79 0a20 2020  ll, PostOnly.   
+0002e720: 2020 2020 2020 2020 2027 7174 7927 3a20           'qty': 
+0002e730: 7365 6c66 2e61 6d6f 756e 745f 746f 5f70  self.amount_to_p
+0002e740: 7265 6369 7369 6f6e 2873 796d 626f 6c2c  recision(symbol,
+0002e750: 2061 6d6f 756e 7429 2c0a 2020 2020 2020   amount),.      
+0002e760: 2020 2020 2020 2320 2774 616b 6550 726f        # 'takePro
+0002e770: 6669 7427 3a20 3132 332e 3435 2c20 2023  fit': 123.45,  #
+0002e780: 2074 616b 6520 7072 6f66 6974 2070 7269   take profit pri
+0002e790: 6365 2c20 6f6e 6c79 2074 616b 6520 6566  ce, only take ef
+0002e7a0: 6665 6374 2075 706f 6e20 6f70 656e 696e  fect upon openin
+0002e7b0: 6720 7468 6520 706f 7369 7469 6f6e 0a20  g the position. 
+0002e7c0: 2020 2020 2020 2020 2020 2023 2027 7374             # 'st
+0002e7d0: 6f70 4c6f 7373 273a 2031 3233 2e34 352c  opLoss': 123.45,
+0002e7e0: 2020 2320 7374 6f70 206c 6f73 7320 7072    # stop loss pr
+0002e7f0: 6963 652c 206f 6e6c 7920 7461 6b65 2065  ice, only take e
+0002e800: 6666 6563 7420 7570 6f6e 206f 7065 6e69  ffect upon openi
+0002e810: 6e67 2074 6865 2070 6f73 6974 696f 6e0a  ng the position.
+0002e820: 2020 2020 2020 2020 2020 2020 2320 2772              # 'r
+0002e830: 6564 7563 654f 6e6c 7927 3a20 4661 6c73  educeOnly': Fals
+0002e840: 652c 2020 2320 7265 6475 6365 206f 6e6c  e,  # reduce onl
+0002e850: 792c 2072 6571 7569 7265 6420 666f 7220  y, required for 
+0002e860: 6c69 6e65 6172 206f 7264 6572 730a 2020  linear orders.  
+0002e870: 2020 2020 2020 2020 2020 2320 7768 656e            # when
+0002e880: 2063 7265 6174 696e 6720 6120 636c 6f73   creating a clos
+0002e890: 696e 6720 6f72 6465 722c 2062 7962 6974  ing order, bybit
+0002e8a0: 2072 6563 6f6d 6d65 6e64 7320 6120 5472   recommends a Tr
+0002e8b0: 7565 2076 616c 7565 2066 6f72 0a20 2020  ue value for.   
+0002e8c0: 2020 2020 2020 2020 2023 2020 636c 6f73           #  clos
+0002e8d0: 654f 6e54 7269 6767 6572 2074 6f20 6176  eOnTrigger to av
+0002e8e0: 6f69 6420 6661 696c 696e 6720 6475 6520  oid failing due 
+0002e8f0: 746f 2069 6e73 7566 6669 6369 656e 7420  to insufficient 
+0002e900: 6176 6169 6c61 626c 6520 6d61 7267 696e  available margin
+0002e910: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+0002e920: 636c 6f73 654f 6e54 7269 6767 6572 273a  closeOnTrigger':
+0002e930: 2046 616c 7365 2c20 7265 7175 6972 6564   False, required
+0002e940: 2066 6f72 206c 696e 6561 7220 6f72 6465   for linear orde
+0002e950: 7273 0a20 2020 2020 2020 2020 2020 2023  rs.            #
+0002e960: 2027 6f72 6465 724c 696e 6b49 6427 3a20   'orderLinkId': 
+0002e970: 2773 7472 696e 6727 2c20 2023 2075 6e69  'string',  # uni
+0002e980: 7175 6520 636c 6965 6e74 206f 7264 6572  que client order
+0002e990: 2069 642c 206d 6178 2033 3620 6368 6172   id, max 36 char
+0002e9a0: 6163 7465 7273 0a20 2020 2020 2020 2020  acters.         
+0002e9b0: 2020 2023 2027 7472 6967 6765 7250 7269     # 'triggerPri
+0002e9c0: 6365 273a 2031 3233 2e34 352c 2020 2320  ce': 123.45,  # 
+0002e9d0: 7472 6967 6765 7220 7072 6963 652c 2072  trigger price, r
+0002e9e0: 6571 7569 7265 6420 666f 7220 636f 6e64  equired for cond
+0002e9f0: 6974 696f 6e61 6c20 6f72 6465 7273 0a20  itional orders. 
+0002ea00: 2020 2020 2020 2020 2020 2023 2027 7472             # 'tr
+0002ea10: 6967 6765 7242 7927 3a20 274d 6172 6b50  iggerBy': 'MarkP
+0002ea20: 7269 6365 272c 2020 2320 496e 6465 7850  rice',  # IndexP
+0002ea30: 7269 6365 2c20 4d61 726b 5072 6963 650a  rice, MarkPrice.
+0002ea40: 2020 2020 2020 2020 2020 2020 2320 2774              # 't
+0002ea50: 7074 7269 6767 6572 6279 273a 2027 4d61  ptriggerby': 'Ma
+0002ea60: 726b 5072 6963 6527 2c20 2023 2049 6e64  rkPrice',  # Ind
+0002ea70: 6578 5072 6963 652c 204d 6172 6b50 7269  exPrice, MarkPri
+0002ea80: 6365 0a20 2020 2020 2020 2020 2020 2023  ce.            #
+0002ea90: 2027 736c 5472 6967 6765 7242 7927 3a20   'slTriggerBy': 
+0002eaa0: 274d 6172 6b50 7269 6365 272c 2020 2320  'MarkPrice',  # 
+0002eab0: 496e 6465 7850 7269 6365 2c20 4d61 726b  IndexPrice, Mark
+0002eac0: 5072 6963 650a 2020 2020 2020 2020 2020  Price.          
+0002ead0: 2020 2320 276d 6d70 273a 2046 616c 7365    # 'mmp': False
+0002eae0: 2020 2320 6d61 726b 6574 206d 616b 6572    # market maker
+0002eaf0: 2070 726f 7465 6374 696f 6e0a 2020 2020   protection.    
+0002eb00: 2020 2020 2020 2020 2320 2770 6f73 6974          # 'posit
+0002eb10: 696f 6e49 6478 273a 2030 2c20 2023 2050  ionIdx': 0,  # P
+0002eb20: 6f73 6974 696f 6e20 6d6f 6465 2e20 756e  osition mode. un
+0002eb30: 6966 6965 6420 6d61 7267 696e 2061 6363  ified margin acc
+0002eb40: 6f75 6e74 2069 7320 6f6e 6c79 2061 7661  ount is only ava
+0002eb50: 696c 6162 6c65 2069 6e20 4f6e 652d 5761  ilable in One-Wa
+0002eb60: 7920 6d6f 6465 2c20 7768 6963 6820 6973  y mode, which is
+0002eb70: 2030 0a20 2020 2020 2020 2020 2020 2023   0.            #
+0002eb80: 2027 6261 7365 5072 6963 6527 3a20 2730   'basePrice': '0
+0002eb90: 272c 2020 2320 4974 2077 696c 6c20 6265  ',  # It will be
+0002eba0: 2075 7365 6420 746f 2063 6f6d 7061 7265   used to compare
+0002ebb0: 2077 6974 6820 7468 6520 7661 6c75 6520   with the value 
+0002ebc0: 6f66 2074 7269 6767 6572 5072 6963 652c  of triggerPrice,
+0002ebd0: 2074 6f20 6465 6369 6465 2077 6865 7468   to decide wheth
+0002ebe0: 6572 2079 6f75 7220 636f 6e64 6974 696f  er your conditio
+0002ebf0: 6e61 6c20 6f72 6465 7220 7769 6c6c 2062  nal order will b
+0002ec00: 6520 7472 6967 6765 7265 6420 6279 2063  e triggered by c
+0002ec10: 726f 7373 696e 6720 7472 6967 6765 7220  rossing trigger 
+0002ec20: 7072 6963 6520 6672 6f6d 2075 7070 6572  price from upper
+0002ec30: 2073 6964 6520 6f72 206c 6f77 6572 2073   side or lower s
+0002ec40: 6964 652e 204d 6169 6e6c 7920 7573 6564  ide. Mainly used
+0002ec50: 2074 6f20 6964 656e 7469 6679 2074 6865   to identify the
+0002ec60: 2065 7870 6563 7465 6420 6469 7265 6374   expected direct
+0002ec70: 696f 6e20 6f66 2074 6865 2063 7572 7265  ion of the curre
+0002ec80: 6e74 2063 6f6e 6469 7469 6f6e 616c 206f  nt conditional o
+0002ec90: 7264 6572 2e0a 2020 2020 2020 2020 2020  rder..          
+0002eca0: 2020 2320 2769 7627 3a20 2730 272c 2020    # 'iv': '0',  
+0002ecb0: 2320 496d 706c 6965 6420 766f 6c61 7469  # Implied volati
+0002ecc0: 6c69 7479 2c20 666f 7220 6f70 7469 6f6e  lity, for option
+0002ecd0: 7320 6f6e 6c79 3b20 7061 7261 6d65 7465  s only; paramete
+0002ece0: 7273 2061 7265 2070 6173 7365 6420 6163  rs are passed ac
+0002ecf0: 636f 7264 696e 6720 746f 2074 6865 2072  cording to the r
+0002ed00: 6561 6c20 7661 6c75 653b 2066 6f72 2065  eal value; for e
+0002ed10: 7861 6d70 6c65 2c20 666f 7220 3130 252c  xample, for 10%,
+0002ed20: 2030 2e31 2069 7320 7061 7373 6564 0a20   0.1 is passed. 
+0002ed30: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+0002ed40: 2069 6620 6d61 726b 6574 5b27 6c69 6e65   if market['line
+0002ed50: 6172 275d 3a0a 2020 2020 2020 2020 2020  ar']:.          
+0002ed60: 2020 7265 7175 6573 745b 2763 6174 6567    request['categ
+0002ed70: 6f72 7927 5d20 3d20 276c 696e 6561 7227  ory'] = 'linear'
+0002ed80: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+0002ed90: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+0002eda0: 7374 5b27 6361 7465 676f 7279 275d 203d  st['category'] =
+0002edb0: 2027 6f70 7469 6f6e 270a 2020 2020 2020   'option'.      
+0002edc0: 2020 6973 4d61 726b 6574 203d 206c 6f77    isMarket = low
+0002edd0: 6572 4361 7365 5479 7065 203d 3d20 276d  erCaseType == 'm
+0002ede0: 6172 6b65 7427 0a20 2020 2020 2020 2069  arket'.        i
+0002edf0: 734c 696d 6974 203d 206c 6f77 6572 4361  sLimit = lowerCa
+0002ee00: 7365 5479 7065 203d 3d20 276c 696d 6974  seType == 'limit
+0002ee10: 270a 2020 2020 2020 2020 6966 2069 734c  '.        if isL
+0002ee20: 696d 6974 3a0a 2020 2020 2020 2020 2020  imit:.          
+0002ee30: 2020 7265 7175 6573 745b 2770 7269 6365    request['price
+0002ee40: 275d 203d 2073 656c 662e 7072 6963 655f  '] = self.price_
+0002ee50: 746f 5f70 7265 6369 7369 6f6e 2873 796d  to_precision(sym
+0002ee60: 626f 6c2c 2070 7269 6365 290a 2020 2020  bol, price).    
+0002ee70: 2020 2020 6578 6368 616e 6765 5370 6563      exchangeSpec
+0002ee80: 6966 6963 5061 7261 6d20 3d20 7365 6c66  ificParam = self
+0002ee90: 2e73 6166 655f 7374 7269 6e67 2870 6172  .safe_string(par
+0002eea0: 616d 732c 2027 7469 6d65 5f69 6e5f 666f  ams, 'time_in_fo
+0002eeb0: 7263 6527 290a 2020 2020 2020 2020 7469  rce').        ti
+0002eec0: 6d65 496e 466f 7263 6520 3d20 7365 6c66  meInForce = self
+0002eed0: 2e73 6166 655f 7374 7269 6e67 5f6c 6f77  .safe_string_low
+0002eee0: 6572 2870 6172 616d 732c 2027 7469 6d65  er(params, 'time
+0002eef0: 496e 466f 7263 6527 290a 2020 2020 2020  InForce').      
+0002ef00: 2020 706f 7374 4f6e 6c79 203d 204e 6f6e    postOnly = Non
+0002ef10: 650a 2020 2020 2020 2020 706f 7374 4f6e  e.        postOn
+0002ef20: 6c79 2c20 7061 7261 6d73 203d 2073 656c  ly, params = sel
+0002ef30: 662e 6861 6e64 6c65 5f70 6f73 745f 6f6e  f.handle_post_on
+0002ef40: 6c79 2869 734d 6172 6b65 742c 2065 7863  ly(isMarket, exc
+0002ef50: 6861 6e67 6553 7065 6369 6669 6350 6172  hangeSpecificPar
+0002ef60: 616d 203d 3d20 2750 6f73 744f 6e6c 7927  am == 'PostOnly'
+0002ef70: 2c20 7061 7261 6d73 290a 2020 2020 2020  , params).      
+0002ef80: 2020 6966 2070 6f73 744f 6e6c 793a 0a20    if postOnly:. 
+0002ef90: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+0002efa0: 7374 5b27 7469 6d65 496e 466f 7263 6527  st['timeInForce'
+0002efb0: 5d20 3d20 2750 6f73 744f 6e6c 7927 0a20  ] = 'PostOnly'. 
+0002efc0: 2020 2020 2020 2065 6c69 6620 7469 6d65         elif time
+0002efd0: 496e 466f 7263 6520 3d3d 2027 6774 6327  InForce == 'gtc'
+0002efe0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+0002eff0: 7175 6573 745b 2774 696d 6549 6e46 6f72  quest['timeInFor
+0002f000: 6365 275d 203d 2027 476f 6f64 5469 6c6c  ce'] = 'GoodTill
+0002f010: 4361 6e63 656c 270a 2020 2020 2020 2020  Cancel'.        
+0002f020: 656c 6966 2074 696d 6549 6e46 6f72 6365  elif timeInForce
+0002f030: 203d 3d20 2766 6f6b 273a 0a20 2020 2020   == 'fok':.     
+0002f040: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+0002f050: 7469 6d65 496e 466f 7263 6527 5d20 3d20  timeInForce'] = 
+0002f060: 2746 696c 6c4f 724b 696c 6c27 0a20 2020  'FillOrKill'.   
+0002f070: 2020 2020 2065 6c69 6620 7469 6d65 496e       elif timeIn
+0002f080: 466f 7263 6520 3d3d 2027 696f 6327 3a0a  Force == 'ioc':.
+0002f090: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0002f0a0: 6573 745b 2774 696d 6549 6e46 6f72 6365  est['timeInForce
+0002f0b0: 275d 203d 2027 496d 6d65 6469 6174 654f  '] = 'ImmediateO
+0002f0c0: 7243 616e 6365 6c27 0a20 2020 2020 2020  rCancel'.       
+0002f0d0: 2074 7269 6767 6572 5072 6963 6520 3d20   triggerPrice = 
+0002f0e0: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
+0002f0f0: 5f32 2870 6172 616d 732c 2027 7374 6f70  _2(params, 'stop
+0002f100: 5072 6963 6527 2c20 2774 7269 6767 6572  Price', 'trigger
+0002f110: 5072 6963 6527 290a 2020 2020 2020 2020  Price').        
+0002f120: 7374 6f70 4c6f 7373 5472 6967 6765 7250  stopLossTriggerP
+0002f130: 7269 6365 203d 2073 656c 662e 7361 6665  rice = self.safe
+0002f140: 5f6e 756d 6265 7228 7061 7261 6d73 2c20  _number(params, 
+0002f150: 2773 746f 704c 6f73 7350 7269 6365 272c  'stopLossPrice',
+0002f160: 2074 7269 6767 6572 5072 6963 6529 0a20   triggerPrice). 
+0002f170: 2020 2020 2020 2074 616b 6550 726f 6669         takeProfi
+0002f180: 7454 7269 6767 6572 5072 6963 6520 3d20  tTriggerPrice = 
+0002f190: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
+0002f1a0: 2870 6172 616d 732c 2027 7461 6b65 5072  (params, 'takePr
+0002f1b0: 6f66 6974 5072 6963 6527 290a 2020 2020  ofitPrice').    
+0002f1c0: 2020 2020 7374 6f70 4c6f 7373 203d 2073      stopLoss = s
+0002f1d0: 656c 662e 7361 6665 5f6e 756d 6265 7228  elf.safe_number(
+0002f1e0: 7061 7261 6d73 2c20 2773 746f 704c 6f73  params, 'stopLos
+0002f1f0: 7327 290a 2020 2020 2020 2020 7461 6b65  s').        take
+0002f200: 5072 6f66 6974 203d 2073 656c 662e 7361  Profit = self.sa
+0002f210: 6665 5f6e 756d 6265 7228 7061 7261 6d73  fe_number(params
+0002f220: 2c20 2774 616b 6550 726f 6669 7427 290a  , 'takeProfit').
+0002f230: 2020 2020 2020 2020 6973 5374 6f70 4c6f          isStopLo
+0002f240: 7373 5472 6967 6765 724f 7264 6572 203d  ssTriggerOrder =
+0002f250: 2073 746f 704c 6f73 7354 7269 6767 6572   stopLossTrigger
+0002f260: 5072 6963 6520 6973 206e 6f74 204e 6f6e  Price is not Non
+0002f270: 650a 2020 2020 2020 2020 6973 5461 6b65  e.        isTake
+0002f280: 5072 6f66 6974 5472 6967 6765 724f 7264  ProfitTriggerOrd
+0002f290: 6572 203d 2074 616b 6550 726f 6669 7454  er = takeProfitT
+0002f2a0: 7269 6767 6572 5072 6963 6520 6973 206e  riggerPrice is n
+0002f2b0: 6f74 204e 6f6e 650a 2020 2020 2020 2020  ot None.        
+0002f2c0: 6973 5374 6f70 4c6f 7373 203d 2073 746f  isStopLoss = sto
+0002f2d0: 704c 6f73 7320 6973 206e 6f74 204e 6f6e  pLoss is not Non
+0002f2e0: 650a 2020 2020 2020 2020 6973 5461 6b65  e.        isTake
+0002f2f0: 5072 6f66 6974 203d 2074 616b 6550 726f  Profit = takePro
+0002f300: 6669 7420 6973 206e 6f74 204e 6f6e 650a  fit is not None.
+0002f310: 2020 2020 2020 2020 6966 2069 7353 746f          if isSto
+0002f320: 704c 6f73 7354 7269 6767 6572 4f72 6465  pLossTriggerOrde
+0002f330: 7220 6f72 2069 7354 616b 6550 726f 6669  r or isTakeProfi
+0002f340: 7454 7269 6767 6572 4f72 6465 723a 0a20  tTriggerOrder:. 
+0002f350: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+0002f360: 7374 5b27 7472 6967 6765 7242 7927 5d20  st['triggerBy'] 
+0002f370: 3d20 274c 6173 7450 7269 6365 270a 2020  = 'LastPrice'.  
+0002f380: 2020 2020 2020 2020 2020 7472 6967 6765            trigge
+0002f390: 7241 7420 3d20 7374 6f70 4c6f 7373 5472  rAt = stopLossTr
+0002f3a0: 6967 6765 7250 7269 6365 2069 6620 6973  iggerPrice if is
+0002f3b0: 5374 6f70 4c6f 7373 5472 6967 6765 724f  StopLossTriggerO
+0002f3c0: 7264 6572 2065 6c73 6520 7461 6b65 5072  rder else takePr
+0002f3d0: 6f66 6974 5472 6967 6765 7250 7269 6365  ofitTriggerPrice
+0002f3e0: 0a20 2020 2020 2020 2020 2020 2070 7265  .            pre
+0002f3f0: 6369 7365 5472 6967 6765 7250 7269 6365  ciseTriggerPrice
+0002f400: 203d 2073 656c 662e 7072 6963 655f 746f   = self.price_to
+0002f410: 5f70 7265 6369 7369 6f6e 2873 796d 626f  _precision(symbo
+0002f420: 6c2c 2074 7269 6767 6572 4174 290a 2020  l, triggerAt).  
+0002f430: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+0002f440: 745b 2774 7269 6767 6572 5072 6963 6527  t['triggerPrice'
+0002f450: 5d20 3d20 7072 6563 6973 6554 7269 6767  ] = preciseTrigg
+0002f460: 6572 5072 6963 650a 2020 2020 2020 2020  erPrice.        
+0002f470: 2020 2020 6973 4275 7920 3d20 7369 6465      isBuy = side
+0002f480: 203d 3d20 2762 7579 270a 2020 2020 2020   == 'buy'.      
+0002f490: 2020 2020 2020 2320 6c6f 6769 6361 6c20        # logical 
+0002f4a0: 786f 720a 2020 2020 2020 2020 2020 2020  xor.            
+0002f4b0: 6173 6365 6e64 696e 6720 3d20 6e6f 7420  ascending = not 
+0002f4c0: 6973 4275 7920 6966 2073 746f 704c 6f73  isBuy if stopLos
+0002f4d0: 7354 7269 6767 6572 5072 6963 6520 656c  sTriggerPrice el
+0002f4e0: 7365 2069 7342 7579 0a20 2020 2020 2020  se isBuy.       
+0002f4f0: 2020 2020 2064 656c 7461 203d 2073 656c       delta = sel
+0002f500: 662e 6e75 6d62 6572 5f74 6f5f 7374 7269  f.number_to_stri
+0002f510: 6e67 286d 6172 6b65 745b 2770 7265 6369  ng(market['preci
+0002f520: 7369 6f6e 275d 5b27 7072 6963 6527 5d29  sion']['price'])
+0002f530: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+0002f540: 7565 7374 5b27 6261 7365 5072 6963 6527  uest['basePrice'
+0002f550: 5d20 3d20 5072 6563 6973 652e 7374 7269  ] = Precise.stri
+0002f560: 6e67 5f61 6464 2870 7265 6369 7365 5472  ng_add(preciseTr
+0002f570: 6967 6765 7250 7269 6365 2c20 6465 6c74  iggerPrice, delt
+0002f580: 6129 2069 6620 6173 6365 6e64 696e 6720  a) if ascending 
+0002f590: 656c 7365 2050 7265 6369 7365 2e73 7472  else Precise.str
+0002f5a0: 696e 675f 7375 6228 7072 6563 6973 6554  ing_sub(preciseT
+0002f5b0: 7269 6767 6572 5072 6963 652c 2064 656c  riggerPrice, del
+0002f5c0: 7461 290a 2020 2020 2020 2020 656c 6966  ta).        elif
+0002f5d0: 2069 7353 746f 704c 6f73 7320 6f72 2069   isStopLoss or i
+0002f5e0: 7354 616b 6550 726f 6669 743a 0a20 2020  sTakeProfit:.   
+0002f5f0: 2020 2020 2020 2020 2069 6620 6973 5374           if isSt
+0002f600: 6f70 4c6f 7373 3a0a 2020 2020 2020 2020  opLoss:.        
+0002f610: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+0002f620: 2773 746f 704c 6f73 7327 5d20 3d20 7365  'stopLoss'] = se
+0002f630: 6c66 2e70 7269 6365 5f74 6f5f 7072 6563  lf.price_to_prec
+0002f640: 6973 696f 6e28 7379 6d62 6f6c 2c20 7374  ision(symbol, st
+0002f650: 6f70 4c6f 7373 290a 2020 2020 2020 2020  opLoss).        
+0002f660: 2020 2020 6966 2069 7354 616b 6550 726f      if isTakePro
+0002f670: 6669 743a 0a20 2020 2020 2020 2020 2020  fit:.           
+0002f680: 2020 2020 2072 6571 7565 7374 5b27 7461       request['ta
+0002f690: 6b65 5072 6f66 6974 275d 203d 2073 656c  keProfit'] = sel
+0002f6a0: 662e 7072 6963 655f 746f 5f70 7265 6369  f.price_to_preci
+0002f6b0: 7369 6f6e 2873 796d 626f 6c2c 2074 616b  sion(symbol, tak
+0002f6c0: 6550 726f 6669 7429 0a20 2020 2020 2020  eProfit).       
+0002f6d0: 2063 6c69 656e 744f 7264 6572 4964 203d   clientOrderId =
+0002f6e0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+0002f6f0: 6728 7061 7261 6d73 2c20 2763 6c69 656e  g(params, 'clien
+0002f700: 744f 7264 6572 4964 2729 0a20 2020 2020  tOrderId').     
+0002f710: 2020 2069 6620 636c 6965 6e74 4f72 6465     if clientOrde
+0002f720: 7249 6420 6973 206e 6f74 204e 6f6e 653a  rId is not None:
+0002f730: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+0002f740: 7565 7374 5b27 6f72 6465 724c 696e 6b49  uest['orderLinkI
+0002f750: 6427 5d20 3d20 636c 6965 6e74 4f72 6465  d'] = clientOrde
+0002f760: 7249 640a 2020 2020 2020 2020 656c 6966  rId.        elif
+0002f770: 206d 6172 6b65 745b 276f 7074 696f 6e27   market['option'
+0002f780: 5d3a 0a20 2020 2020 2020 2020 2020 2023  ]:.            #
+0002f790: 206d 616e 6461 746f 7279 2066 6965 6c64   mandatory field
+0002f7a0: 2066 6f72 206f 7074 696f 6e73 0a20 2020   for options.   
+0002f7b0: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0002f7c0: 5b27 6f72 6465 724c 696e 6b49 6427 5d20  ['orderLinkId'] 
+0002f7d0: 3d20 7365 6c66 2e75 7569 6431 3628 290a  = self.uuid16().
+0002f7e0: 2020 2020 2020 2020 7061 7261 6d73 203d          params =
+0002f7f0: 2073 656c 662e 6f6d 6974 2870 6172 616d   self.omit(param
+0002f800: 732c 205b 2773 746f 7050 7269 6365 272c  s, ['stopPrice',
+0002f810: 2027 7469 6d65 496e 466f 7263 6527 2c20   'timeInForce', 
+0002f820: 2774 7269 6767 6572 5072 6963 6527 2c20  'triggerPrice', 
+0002f830: 2773 746f 704c 6f73 7350 7269 6365 272c  'stopLossPrice',
+0002f840: 2027 7461 6b65 5072 6f66 6974 5072 6963   'takeProfitPric
+0002f850: 6527 2c20 2770 6f73 744f 6e6c 7927 2c20  e', 'postOnly', 
+0002f860: 2763 6c69 656e 744f 7264 6572 4964 272c  'clientOrderId',
+0002f870: 2027 7374 6f70 4c6f 7373 272c 2027 7461   'stopLoss', 'ta
+0002f880: 6b65 5072 6f66 6974 275d 290a 2020 2020  keProfit']).    
+0002f890: 2020 2020 7265 7370 6f6e 7365 203d 2073      response = s
+0002f8a0: 656c 662e 7072 6976 6174 6550 6f73 7455  elf.privatePostU
+0002f8b0: 6e69 6669 6564 5633 5072 6976 6174 654f  nifiedV3PrivateO
+0002f8c0: 7264 6572 4372 6561 7465 2873 656c 662e  rderCreate(self.
+0002f8d0: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
+0002f8e0: 7061 7261 6d73 2929 0a20 2020 2020 2020  params)).       
+0002f8f0: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
+0002f900: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+0002f910: 2020 2020 2022 7265 7443 6f64 6522 3a20       "retCode": 
+0002f920: 302c 0a20 2020 2020 2020 2023 2020 2020  0,.        #    
+0002f930: 2020 2020 2022 7265 744d 7367 223a 2022       "retMsg": "
+0002f940: 4f4b 222c 0a20 2020 2020 2020 2023 2020  OK",.        #  
+0002f950: 2020 2020 2020 2022 7265 7375 6c74 223a         "result":
+0002f960: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+0002f970: 2020 2020 2020 2020 2022 6f72 6465 7249           "orderI
+0002f980: 6422 3a20 2265 3130 6230 3731 362d 3763  d": "e10b0716-7c
+0002f990: 3931 2d34 3039 312d 6239 3861 2d31 6661  91-4091-b98a-1fa
+0002f9a0: 3066 3430 3163 3764 3522 2c0a 2020 2020  0f401c7d5",.    
+0002f9b0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0002f9c0: 2020 226f 7264 6572 4c69 6e6b 4964 223a    "orderLinkId":
+0002f9d0: 2022 7465 7374 3030 3030 3030 3322 0a20   "test0000003". 
+0002f9e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0002f9f0: 207d 2c0a 2020 2020 2020 2020 2320 2020   },.        #   
+0002fa00: 2020 2020 2020 2272 6574 4578 7449 6e66        "retExtInf
+0002fa10: 6f22 3a20 6e75 6c6c 2c0a 2020 2020 2020  o": null,.      
+0002fa20: 2020 2320 2020 2020 2020 2020 2274 696d    #         "tim
+0002fa30: 6522 3a20 3136 3634 3434 3133 3434 3233  e": 166444134423
+0002fa40: 380a 2020 2020 2020 2020 2320 2020 2020  8.        #     
+0002fa50: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
+0002fa60: 2020 2020 6f72 6465 7220 3d20 7365 6c66      order = self
+0002fa70: 2e73 6166 655f 7661 6c75 6528 7265 7370  .safe_value(resp
+0002fa80: 6f6e 7365 2c20 2772 6573 756c 7427 2c20  onse, 'result', 
+0002fa90: 7b7d 290a 2020 2020 2020 2020 7265 7475  {}).        retu
+0002faa0: 726e 2073 656c 662e 7061 7273 655f 6f72  rn self.parse_or
+0002fab0: 6465 7228 6f72 6465 7229 0a0a 2020 2020  der(order)..    
+0002fac0: 6465 6620 6372 6561 7465 5f63 6f6e 7472  def create_contr
+0002fad0: 6163 745f 7633 5f6f 7264 6572 2873 656c  act_v3_order(sel
+0002fae0: 662c 2073 796d 626f 6c3a 2073 7472 2c20  f, symbol: str, 
+0002faf0: 7479 7065 2c20 7369 6465 2c20 616d 6f75  type, side, amou
+0002fb00: 6e74 2c20 7072 6963 653d 4e6f 6e65 2c20  nt, price=None, 
+0002fb10: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
+0002fb20: 2020 2020 7365 6c66 2e6c 6f61 645f 6d61      self.load_ma
+0002fb30: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
+0002fb40: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
+0002fb50: 726b 6574 2873 796d 626f 6c29 0a20 2020  rket(symbol).   
+0002fb60: 2020 2020 206c 6f77 6572 4361 7365 5479       lowerCaseTy
+0002fb70: 7065 203d 2074 7970 652e 6c6f 7765 7228  pe = type.lower(
+0002fb80: 290a 2020 2020 2020 2020 6966 2028 7072  ).        if (pr
+0002fb90: 6963 6520 6973 204e 6f6e 6529 2061 6e64  ice is None) and
+0002fba0: 2028 6c6f 7765 7243 6173 6554 7970 6520   (lowerCaseType 
+0002fbb0: 3d3d 2027 6c69 6d69 7427 293a 0a20 2020  == 'limit'):.   
+0002fbc0: 2020 2020 2020 2020 2072 6169 7365 2041           raise A
+0002fbd0: 7267 756d 656e 7473 5265 7175 6972 6564  rgumentsRequired
+0002fbe0: 2873 656c 662e 6964 202b 2027 2063 7265  (self.id + ' cre
+0002fbf0: 6174 6543 6f6e 7472 6163 7456 334f 7264  ateContractV3Ord
+0002fc00: 6572 2072 6571 7569 7265 7320 6120 7072  er requires a pr
+0002fc10: 6963 6520 6172 6775 6d65 6e74 2066 6f72  ice argument for
+0002fc20: 206c 696d 6974 206f 7264 6572 7327 290a   limit orders').
+0002fc30: 2020 2020 2020 2020 7265 7175 6573 7420          request 
+0002fc40: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+0002fc50: 2773 796d 626f 6c27 3a20 6d61 726b 6574  'symbol': market
+0002fc60: 5b27 6964 275d 2c0a 2020 2020 2020 2020  ['id'],.        
+0002fc70: 2020 2020 2773 6964 6527 3a20 7365 6c66      'side': self
+0002fc80: 2e63 6170 6974 616c 697a 6528 7369 6465  .capitalize(side
+0002fc90: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
+0002fca0: 6f72 6465 7254 7970 6527 3a20 7365 6c66  orderType': self
+0002fcb0: 2e63 6170 6974 616c 697a 6528 6c6f 7765  .capitalize(lowe
+0002fcc0: 7243 6173 6554 7970 6529 2c20 2023 206c  rCaseType),  # l
+0002fcd0: 696d 6974 206f 7220 6d61 726b 6574 0a20  imit or market. 
+0002fce0: 2020 2020 2020 2020 2020 2027 7469 6d65             'time
+0002fcf0: 496e 466f 7263 6527 3a20 2747 6f6f 6454  InForce': 'GoodT
+0002fd00: 696c 6c43 616e 6365 6c27 2c20 2023 2049  illCancel',  # I
+0002fd10: 6d6d 6564 6961 7465 4f72 4361 6e63 656c  mmediateOrCancel
+0002fd20: 2c20 4669 6c6c 4f72 4b69 6c6c 2c20 506f  , FillOrKill, Po
+0002fd30: 7374 4f6e 6c79 0a20 2020 2020 2020 2020  stOnly.         
+0002fd40: 2020 2027 7174 7927 3a20 7365 6c66 2e61     'qty': self.a
+0002fd50: 6d6f 756e 745f 746f 5f70 7265 6369 7369  mount_to_precisi
+0002fd60: 6f6e 2873 796d 626f 6c2c 2061 6d6f 756e  on(symbol, amoun
+0002fd70: 7429 2c0a 2020 2020 2020 2020 2020 2020  t),.            
+0002fd80: 2320 2774 616b 6550 726f 6669 7427 3a20  # 'takeProfit': 
+0002fd90: 3132 332e 3435 2c20 2023 2074 616b 6520  123.45,  # take 
+0002fda0: 7072 6f66 6974 2070 7269 6365 2c20 6f6e  profit price, on
+0002fdb0: 6c79 2074 616b 6520 6566 6665 6374 2075  ly take effect u
+0002fdc0: 706f 6e20 6f70 656e 696e 6720 7468 6520  pon opening the 
+0002fdd0: 706f 7369 7469 6f6e 0a20 2020 2020 2020  position.       
+0002fde0: 2020 2020 2023 2027 7374 6f70 4c6f 7373       # 'stopLoss
+0002fdf0: 273a 2031 3233 2e34 352c 2020 2320 7374  ': 123.45,  # st
+0002fe00: 6f70 206c 6f73 7320 7072 6963 652c 206f  op loss price, o
+0002fe10: 6e6c 7920 7461 6b65 2065 6666 6563 7420  nly take effect 
+0002fe20: 7570 6f6e 206f 7065 6e69 6e67 2074 6865  upon opening the
+0002fe30: 2070 6f73 6974 696f 6e0a 2020 2020 2020   position.      
+0002fe40: 2020 2020 2020 2320 2772 6564 7563 654f        # 'reduceO
+0002fe50: 6e6c 7927 3a20 4661 6c73 652c 2020 2320  nly': False,  # 
+0002fe60: 7265 6475 6365 206f 6e6c 792c 2072 6571  reduce only, req
+0002fe70: 7569 7265 6420 666f 7220 6c69 6e65 6172  uired for linear
+0002fe80: 206f 7264 6572 730a 2020 2020 2020 2020   orders.        
+0002fe90: 2020 2020 2320 7768 656e 2063 7265 6174      # when creat
+0002fea0: 696e 6720 6120 636c 6f73 696e 6720 6f72  ing a closing or
+0002feb0: 6465 722c 2062 7962 6974 2072 6563 6f6d  der, bybit recom
+0002fec0: 6d65 6e64 7320 6120 5472 7565 2076 616c  mends a True val
+0002fed0: 7565 2066 6f72 0a20 2020 2020 2020 2020  ue for.         
+0002fee0: 2020 2023 2020 636c 6f73 654f 6e54 7269     #  closeOnTri
+0002fef0: 6767 6572 2074 6f20 6176 6f69 6420 6661  gger to avoid fa
+0002ff00: 696c 696e 6720 6475 6520 746f 2069 6e73  iling due to ins
+0002ff10: 7566 6669 6369 656e 7420 6176 6169 6c61  ufficient availa
+0002ff20: 626c 6520 6d61 7267 696e 0a20 2020 2020  ble margin.     
+0002ff30: 2020 2020 2020 2023 2027 636c 6f73 654f         # 'closeO
+0002ff40: 6e54 7269 6767 6572 273a 2046 616c 7365  nTrigger': False
+0002ff50: 2c20 7265 7175 6972 6564 2066 6f72 206c  , required for l
+0002ff60: 696e 6561 7220 6f72 6465 7273 0a20 2020  inear orders.   
+0002ff70: 2020 2020 2020 2020 2023 2027 6f72 6465           # 'orde
+0002ff80: 724c 696e 6b49 6427 3a20 2773 7472 696e  rLinkId': 'strin
+0002ff90: 6727 2c20 2023 2075 6e69 7175 6520 636c  g',  # unique cl
+0002ffa0: 6965 6e74 206f 7264 6572 2069 642c 206d  ient order id, m
+0002ffb0: 6178 2033 3620 6368 6172 6163 7465 7273  ax 36 characters
+0002ffc0: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+0002ffd0: 7472 6967 6765 7250 7269 6365 273a 2031  triggerPrice': 1
+0002ffe0: 3233 2e34 352c 2020 2320 7472 6967 6765  23.45,  # trigge
+0002fff0: 7220 7072 6963 652c 2072 6571 7569 7265  r price, require
+00030000: 6420 666f 7220 636f 6e64 6974 696f 6e61  d for conditiona
+00030010: 6c20 6f72 6465 7273 0a20 2020 2020 2020  l orders.       
+00030020: 2020 2020 2023 2027 7472 6967 6765 7242       # 'triggerB
+00030030: 7927 3a20 274d 6172 6b50 7269 6365 272c  y': 'MarkPrice',
+00030040: 2020 2320 496e 6465 7850 7269 6365 2c20    # IndexPrice, 
+00030050: 4d61 726b 5072 6963 650a 2020 2020 2020  MarkPrice.      
+00030060: 2020 2020 2020 2320 2774 7074 7269 6767        # 'tptrigg
+00030070: 6572 6279 273a 2027 4d61 726b 5072 6963  erby': 'MarkPric
+00030080: 6527 2c20 2023 2049 6e64 6578 5072 6963  e',  # IndexPric
+00030090: 652c 204d 6172 6b50 7269 6365 0a20 2020  e, MarkPrice.   
+000300a0: 2020 2020 2020 2020 2023 2027 736c 5472           # 'slTr
+000300b0: 6967 6765 7242 7927 3a20 274d 6172 6b50  iggerBy': 'MarkP
+000300c0: 7269 6365 272c 2020 2320 496e 6465 7850  rice',  # IndexP
+000300d0: 7269 6365 2c20 4d61 726b 5072 6963 650a  rice, MarkPrice.
+000300e0: 2020 2020 2020 2020 2020 2020 2320 2770              # 'p
+000300f0: 6f73 6974 696f 6e49 6478 273a 2030 2c20  ositionIdx': 0, 
+00030100: 2023 2050 6f73 6974 696f 6e20 6d6f 6465   # Position mode
+00030110: 2e20 756e 6966 6965 6420 6d61 7267 696e  . unified margin
+00030120: 2061 6363 6f75 6e74 2069 7320 6f6e 6c79   account is only
+00030130: 2061 7661 696c 6162 6c65 2069 6e20 4f6e   available in On
+00030140: 652d 5761 7920 6d6f 6465 2c20 7768 6963  e-Way mode, whic
+00030150: 6820 6973 2030 0a20 2020 2020 2020 2020  h is 0.         
+00030160: 2020 2023 2027 7472 6967 6765 7244 6972     # 'triggerDir
+00030170: 6563 7469 6f6e 273a 2031 2c20 2023 2054  ection': 1,  # T
+00030180: 7269 6767 6572 2064 6972 6563 7469 6f6e  rigger direction
+00030190: 2e20 4d61 696e 6c79 2075 7365 6420 696e  . Mainly used in
+000301a0: 2063 6f6e 6469 7469 6f6e 616c 206f 7264   conditional ord
+000301b0: 6572 2e20 5472 6967 6765 7220 7468 6520  er. Trigger the 
+000301c0: 6f72 6465 7220 7768 656e 206d 6172 6b65  order when marke
+000301d0: 7420 7072 6963 6520 7269 7365 7320 746f  t price rises to
+000301e0: 2074 7269 6767 6572 5072 6963 6520 6f72   triggerPrice or
+000301f0: 2066 616c 6c73 2074 6f20 7472 6967 6765   falls to trigge
+00030200: 7250 7269 6365 2e20 313a 2072 6973 653b  rPrice. 1: rise;
+00030210: 2032 3a20 6661 6c6c 0a20 2020 2020 2020   2: fall.       
+00030220: 207d 0a20 2020 2020 2020 2069 6620 6d61   }.        if ma
+00030230: 726b 6574 5b27 6675 7475 7265 275d 3a0a  rket['future']:.
+00030240: 2020 2020 2020 2020 2020 2020 706f 7369              posi
+00030250: 7469 6f6e 4964 7820 3d20 7365 6c66 2e73  tionIdx = self.s
+00030260: 6166 655f 696e 7465 6765 7228 7061 7261  afe_integer(para
+00030270: 6d73 2c20 2770 6f73 6974 696f 6e5f 6964  ms, 'position_id
+00030280: 7827 2c20 3029 2020 2320 3020 4f6e 652d  x', 0)  # 0 One-
+00030290: 5761 7920 4d6f 6465 2c20 3120 4275 792d  Way Mode, 1 Buy-
+000302a0: 7369 6465 2c20 3220 5365 6c6c 2d73 6964  side, 2 Sell-sid
+000302b0: 650a 2020 2020 2020 2020 2020 2020 7265  e.            re
+000302c0: 7175 6573 745b 2770 6f73 6974 696f 6e5f  quest['position_
+000302d0: 6964 7827 5d20 3d20 706f 7369 7469 6f6e  idx'] = position
+000302e0: 4964 780a 2020 2020 2020 2020 2020 2020  Idx.            
+000302f0: 7061 7261 6d73 203d 2073 656c 662e 6f6d  params = self.om
+00030300: 6974 2870 6172 616d 732c 2027 706f 7369  it(params, 'posi
+00030310: 7469 6f6e 5f69 6478 2729 0a20 2020 2020  tion_idx').     
+00030320: 2020 2069 734d 6172 6b65 7420 3d20 6c6f     isMarket = lo
+00030330: 7765 7243 6173 6554 7970 6520 3d3d 2027  werCaseType == '
+00030340: 6d61 726b 6574 270a 2020 2020 2020 2020  market'.        
+00030350: 6973 4c69 6d69 7420 3d20 6c6f 7765 7243  isLimit = lowerC
+00030360: 6173 6554 7970 6520 3d3d 2027 6c69 6d69  aseType == 'limi
+00030370: 7427 0a20 2020 2020 2020 2069 6620 6973  t'.        if is
+00030380: 4c69 6d69 743a 0a20 2020 2020 2020 2020  Limit:.         
+00030390: 2020 2072 6571 7565 7374 5b27 7072 6963     request['pric
+000303a0: 6527 5d20 3d20 7365 6c66 2e70 7269 6365  e'] = self.price
+000303b0: 5f74 6f5f 7072 6563 6973 696f 6e28 7379  _to_precision(sy
+000303c0: 6d62 6f6c 2c20 7072 6963 6529 0a20 2020  mbol, price).   
+000303d0: 2020 2020 2074 696d 6549 6e46 6f72 6365       timeInForce
+000303e0: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+000303f0: 696e 675f 6c6f 7765 7228 7061 7261 6d73  ing_lower(params
+00030400: 2c20 2774 696d 6549 6e46 6f72 6365 2729  , 'timeInForce')
+00030410: 2020 2320 7361 6d65 2073 7065 6369 6669    # same specifi
+00030420: 6320 7061 7261 6d0a 2020 2020 2020 2020  c param.        
+00030430: 706f 7374 4f6e 6c79 203d 204e 6f6e 650a  postOnly = None.
+00030440: 2020 2020 2020 2020 706f 7374 4f6e 6c79          postOnly
+00030450: 2c20 7061 7261 6d73 203d 2073 656c 662e  , params = self.
+00030460: 6861 6e64 6c65 5f70 6f73 745f 6f6e 6c79  handle_post_only
+00030470: 2869 734d 6172 6b65 742c 2074 696d 6549  (isMarket, timeI
+00030480: 6e46 6f72 6365 203d 3d20 2750 6f73 744f  nForce == 'PostO
+00030490: 6e6c 7927 2c20 7061 7261 6d73 290a 2020  nly', params).  
+000304a0: 2020 2020 2020 6966 2070 6f73 744f 6e6c        if postOnl
+000304b0: 793a 0a20 2020 2020 2020 2020 2020 2072  y:.            r
+000304c0: 6571 7565 7374 5b27 7469 6d65 496e 466f  equest['timeInFo
+000304d0: 7263 6527 5d20 3d20 2750 6f73 744f 6e6c  rce'] = 'PostOnl
+000304e0: 7927 0a20 2020 2020 2020 2065 6c69 6620  y'.        elif 
+000304f0: 7469 6d65 496e 466f 7263 6520 3d3d 2027  timeInForce == '
+00030500: 6774 6327 3a0a 2020 2020 2020 2020 2020  gtc':.          
+00030510: 2020 7265 7175 6573 745b 2774 696d 6549    request['timeI
+00030520: 6e46 6f72 6365 275d 203d 2027 476f 6f64  nForce'] = 'Good
+00030530: 5469 6c6c 4361 6e63 656c 270a 2020 2020  TillCancel'.    
+00030540: 2020 2020 656c 6966 2074 696d 6549 6e46      elif timeInF
+00030550: 6f72 6365 203d 3d20 2766 6f6b 273a 0a20  orce == 'fok':. 
+00030560: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+00030570: 7374 5b27 7469 6d65 496e 466f 7263 6527  st['timeInForce'
+00030580: 5d20 3d20 2746 696c 6c4f 724b 696c 6c27  ] = 'FillOrKill'
+00030590: 0a20 2020 2020 2020 2065 6c69 6620 7469  .        elif ti
+000305a0: 6d65 496e 466f 7263 6520 3d3d 2027 696f  meInForce == 'io
+000305b0: 6327 3a0a 2020 2020 2020 2020 2020 2020  c':.            
+000305c0: 7265 7175 6573 745b 2774 696d 6549 6e46  request['timeInF
+000305d0: 6f72 6365 275d 203d 2027 496d 6d65 6469  orce'] = 'Immedi
+000305e0: 6174 654f 7243 616e 6365 6c27 0a20 2020  ateOrCancel'.   
+000305f0: 2020 2020 2074 7269 6767 6572 5072 6963       triggerPric
+00030600: 6520 3d20 7365 6c66 2e73 6166 655f 6e75  e = self.safe_nu
+00030610: 6d62 6572 5f32 2870 6172 616d 732c 2027  mber_2(params, '
+00030620: 7472 6967 6765 7250 7269 6365 272c 2027  triggerPrice', '
+00030630: 7374 6f70 5072 6963 6527 290a 2020 2020  stopPrice').    
+00030640: 2020 2020 7374 6f70 4c6f 7373 5472 6967      stopLossTrig
+00030650: 6765 7250 7269 6365 203d 2073 656c 662e  gerPrice = self.
+00030660: 7361 6665 5f6e 756d 6265 7228 7061 7261  safe_number(para
+00030670: 6d73 2c20 2773 746f 704c 6f73 7350 7269  ms, 'stopLossPri
+00030680: 6365 272c 2074 7269 6767 6572 5072 6963  ce', triggerPric
+00030690: 6529 0a20 2020 2020 2020 2074 616b 6550  e).        takeP
+000306a0: 726f 6669 7454 7269 6767 6572 5072 6963  rofitTriggerPric
+000306b0: 6520 3d20 7365 6c66 2e73 6166 655f 6e75  e = self.safe_nu
+000306c0: 6d62 6572 2870 6172 616d 732c 2027 7461  mber(params, 'ta
+000306d0: 6b65 5072 6f66 6974 5072 6963 6527 290a  keProfitPrice').
+000306e0: 2020 2020 2020 2020 7374 6f70 4c6f 7373          stopLoss
+000306f0: 203d 2073 656c 662e 7361 6665 5f6e 756d   = self.safe_num
+00030700: 6265 7228 7061 7261 6d73 2c20 2773 746f  ber(params, 'sto
+00030710: 704c 6f73 7327 290a 2020 2020 2020 2020  pLoss').        
+00030720: 7461 6b65 5072 6f66 6974 203d 2073 656c  takeProfit = sel
+00030730: 662e 7361 6665 5f6e 756d 6265 7228 7061  f.safe_number(pa
+00030740: 7261 6d73 2c20 2774 616b 6550 726f 6669  rams, 'takeProfi
+00030750: 7427 290a 2020 2020 2020 2020 6973 5374  t').        isSt
+00030760: 6f70 4c6f 7373 5472 6967 6765 724f 7264  opLossTriggerOrd
+00030770: 6572 203d 2073 746f 704c 6f73 7354 7269  er = stopLossTri
+00030780: 6767 6572 5072 6963 6520 6973 206e 6f74  ggerPrice is not
+00030790: 204e 6f6e 650a 2020 2020 2020 2020 6973   None.        is
+000307a0: 5461 6b65 5072 6f66 6974 5472 6967 6765  TakeProfitTrigge
+000307b0: 724f 7264 6572 203d 2074 616b 6550 726f  rOrder = takePro
+000307c0: 6669 7454 7269 6767 6572 5072 6963 6520  fitTriggerPrice 
+000307d0: 6973 206e 6f74 204e 6f6e 650a 2020 2020  is not None.    
+000307e0: 2020 2020 6973 5374 6f70 4c6f 7373 203d      isStopLoss =
+000307f0: 2073 746f 704c 6f73 7320 6973 206e 6f74   stopLoss is not
+00030800: 204e 6f6e 650a 2020 2020 2020 2020 6973   None.        is
+00030810: 5461 6b65 5072 6f66 6974 203d 2074 616b  TakeProfit = tak
+00030820: 6550 726f 6669 7420 6973 206e 6f74 204e  eProfit is not N
+00030830: 6f6e 650a 2020 2020 2020 2020 6973 4275  one.        isBu
+00030840: 7920 3d20 7369 6465 203d 3d20 2762 7579  y = side == 'buy
+00030850: 270a 2020 2020 2020 2020 6173 6365 6e64  '.        ascend
+00030860: 696e 6720 3d20 6e6f 7420 6973 4275 7920  ing = not isBuy 
+00030870: 6966 2073 746f 704c 6f73 7354 7269 6767  if stopLossTrigg
+00030880: 6572 5072 6963 6520 656c 7365 2069 7342  erPrice else isB
+00030890: 7579 0a20 2020 2020 2020 2069 6620 7472  uy.        if tr
+000308a0: 6967 6765 7250 7269 6365 2069 7320 6e6f  iggerPrice is no
+000308b0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+000308c0: 2020 2020 7265 7175 6573 745b 2774 7269      request['tri
+000308d0: 6767 6572 4469 7265 6374 696f 6e27 5d20  ggerDirection'] 
+000308e0: 3d20 3220 6966 2061 7363 656e 6469 6e67  = 2 if ascending
+000308f0: 2065 6c73 6520 310a 2020 2020 2020 2020   else 1.        
+00030900: 2020 2020 7265 7175 6573 745b 2774 7269      request['tri
+00030910: 6767 6572 5072 6963 6527 5d20 3d20 7365  ggerPrice'] = se
+00030920: 6c66 2e70 7269 6365 5f74 6f5f 7072 6563  lf.price_to_prec
+00030930: 6973 696f 6e28 7379 6d62 6f6c 2c20 7472  ision(symbol, tr
+00030940: 6967 6765 7250 7269 6365 290a 2020 2020  iggerPrice).    
+00030950: 2020 2020 656c 6966 2069 7353 746f 704c      elif isStopL
+00030960: 6f73 7354 7269 6767 6572 4f72 6465 7220  ossTriggerOrder 
+00030970: 6f72 2069 7354 616b 6550 726f 6669 7454  or isTakeProfitT
+00030980: 7269 6767 6572 4f72 6465 723a 0a20 2020  riggerOrder:.   
+00030990: 2020 2020 2020 2020 2072 6571 7565 7374           request
+000309a0: 5b27 7472 6967 6765 7244 6972 6563 7469  ['triggerDirecti
+000309b0: 6f6e 275d 203d 2032 2069 6620 6173 6365  on'] = 2 if asce
+000309c0: 6e64 696e 6720 656c 7365 2031 0a20 2020  nding else 1.   
+000309d0: 2020 2020 2020 2020 2074 7269 6767 6572           trigger
+000309e0: 5072 6963 6520 3d20 7374 6f70 4c6f 7373  Price = stopLoss
+000309f0: 5472 6967 6765 7250 7269 6365 2069 6620  TriggerPrice if 
+00030a00: 6973 5374 6f70 4c6f 7373 5472 6967 6765  isStopLossTrigge
+00030a10: 724f 7264 6572 2065 6c73 6520 7461 6b65  rOrder else take
+00030a20: 5072 6f66 6974 5472 6967 6765 7250 7269  ProfitTriggerPri
+00030a30: 6365 0a20 2020 2020 2020 2020 2020 2072  ce.            r
+00030a40: 6571 7565 7374 5b27 7472 6967 6765 7250  equest['triggerP
+00030a50: 7269 6365 275d 203d 2073 656c 662e 7072  rice'] = self.pr
+00030a60: 6963 655f 746f 5f70 7265 6369 7369 6f6e  ice_to_precision
+00030a70: 2873 796d 626f 6c2c 2074 7269 6767 6572  (symbol, trigger
+00030a80: 5072 6963 6529 0a20 2020 2020 2020 2020  Price).         
+00030a90: 2020 2072 6571 7565 7374 5b27 7265 6475     request['redu
+00030aa0: 6365 4f6e 6c79 275d 203d 2054 7275 650a  ceOnly'] = True.
+00030ab0: 2020 2020 2020 2020 656c 6966 2069 7353          elif isS
+00030ac0: 746f 704c 6f73 7320 6f72 2069 7354 616b  topLoss or isTak
+00030ad0: 6550 726f 6669 743a 0a20 2020 2020 2020  eProfit:.       
+00030ae0: 2020 2020 2069 6620 6973 5374 6f70 4c6f       if isStopLo
+00030af0: 7373 3a0a 2020 2020 2020 2020 2020 2020  ss:.            
+00030b00: 2020 2020 7265 7175 6573 745b 2773 746f      request['sto
+00030b10: 704c 6f73 7327 5d20 3d20 7365 6c66 2e70  pLoss'] = self.p
+00030b20: 7269 6365 5f74 6f5f 7072 6563 6973 696f  rice_to_precisio
+00030b30: 6e28 7379 6d62 6f6c 2c20 7374 6f70 4c6f  n(symbol, stopLo
+00030b40: 7373 290a 2020 2020 2020 2020 2020 2020  ss).            
+00030b50: 6966 2069 7354 616b 6550 726f 6669 743a  if isTakeProfit:
+00030b60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00030b70: 2072 6571 7565 7374 5b27 7461 6b65 5072   request['takePr
+00030b80: 6f66 6974 275d 203d 2073 656c 662e 7072  ofit'] = self.pr
+00030b90: 6963 655f 746f 5f70 7265 6369 7369 6f6e  ice_to_precision
+00030ba0: 2873 796d 626f 6c2c 2074 616b 6550 726f  (symbol, takePro
+00030bb0: 6669 7429 0a20 2020 2020 2020 2063 6c69  fit).        cli
+00030bc0: 656e 744f 7264 6572 4964 203d 2073 656c  entOrderId = sel
+00030bd0: 662e 7361 6665 5f73 7472 696e 6728 7061  f.safe_string(pa
+00030be0: 7261 6d73 2c20 2763 6c69 656e 744f 7264  rams, 'clientOrd
+00030bf0: 6572 4964 2729 0a20 2020 2020 2020 2069  erId').        i
+00030c00: 6620 636c 6965 6e74 4f72 6465 7249 6420  f clientOrderId 
+00030c10: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00030c20: 2020 2020 2020 2020 2072 6571 7565 7374           request
+00030c30: 5b27 6f72 6465 724c 696e 6b49 6427 5d20  ['orderLinkId'] 
+00030c40: 3d20 636c 6965 6e74 4f72 6465 7249 640a  = clientOrderId.
+00030c50: 2020 2020 2020 2020 656c 6966 206d 6172          elif mar
+00030c60: 6b65 745b 276f 7074 696f 6e27 5d3a 0a20  ket['option']:. 
+00030c70: 2020 2020 2020 2020 2020 2023 206d 616e             # man
+00030c80: 6461 746f 7279 2066 6965 6c64 2066 6f72  datory field for
+00030c90: 206f 7074 696f 6e73 0a20 2020 2020 2020   options.       
+00030ca0: 2020 2020 2072 6571 7565 7374 5b27 6f72       request['or
+00030cb0: 6465 724c 696e 6b49 6427 5d20 3d20 7365  derLinkId'] = se
+00030cc0: 6c66 2e75 7569 6431 3628 290a 2020 2020  lf.uuid16().    
+00030cd0: 2020 2020 7061 7261 6d73 203d 2073 656c      params = sel
+00030ce0: 662e 6f6d 6974 2870 6172 616d 732c 205b  f.omit(params, [
+00030cf0: 2773 746f 7050 7269 6365 272c 2027 7469  'stopPrice', 'ti
+00030d00: 6d65 496e 466f 7263 6527 2c20 2773 746f  meInForce', 'sto
+00030d10: 704c 6f73 7350 7269 6365 272c 2027 7461  pLossPrice', 'ta
+00030d20: 6b65 5072 6f66 6974 5072 6963 6527 2c20  keProfitPrice', 
+00030d30: 2770 6f73 744f 6e6c 7927 2c20 2763 6c69  'postOnly', 'cli
+00030d40: 656e 744f 7264 6572 4964 272c 2027 7472  entOrderId', 'tr
+00030d50: 6967 6765 7250 7269 6365 272c 2027 7374  iggerPrice', 'st
+00030d60: 6f70 4c6f 7373 272c 2027 7461 6b65 5072  opLoss', 'takePr
+00030d70: 6f66 6974 275d 290a 2020 2020 2020 2020  ofit']).        
+00030d80: 7265 7370 6f6e 7365 203d 2073 656c 662e  response = self.
+00030d90: 7072 6976 6174 6550 6f73 7443 6f6e 7472  privatePostContr
+00030da0: 6163 7456 3350 7269 7661 7465 4f72 6465  actV3PrivateOrde
+00030db0: 7243 7265 6174 6528 7365 6c66 2e65 7874  rCreate(self.ext
+00030dc0: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
+00030dd0: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
+00030de0: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+00030df0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00030e00: 2020 2272 6574 436f 6465 223a 2030 2c0a    "retCode": 0,.
+00030e10: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00030e20: 2020 2272 6574 4d73 6722 3a20 224f 4b22    "retMsg": "OK"
+00030e30: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00030e40: 2020 2020 2272 6573 756c 7422 3a20 7b0a      "result": {.
+00030e50: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00030e60: 2020 2020 2020 226f 7264 6572 4964 223a        "orderId":
+00030e70: 2022 6531 3062 3037 3136 2d37 6339 312d   "e10b0716-7c91-
+00030e80: 3430 3931 2d62 3938 612d 3166 6130 6634  4091-b98a-1fa0f4
+00030e90: 3031 6337 6435 222c 0a20 2020 2020 2020  01c7d5",.       
+00030ea0: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00030eb0: 6f72 6465 724c 696e 6b49 6422 3a20 2274  orderLinkId": "t
+00030ec0: 6573 7430 3030 3030 3033 220a 2020 2020  est0000003".    
+00030ed0: 2020 2020 2320 2020 2020 2020 2020 7d2c      #         },
+00030ee0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00030ef0: 2020 2022 7265 7445 7874 496e 666f 223a     "retExtInfo":
+00030f00: 206e 756c 6c2c 0a20 2020 2020 2020 2023   null,.        #
+00030f10: 2020 2020 2020 2020 2022 7469 6d65 223a           "time":
+00030f20: 2031 3636 3434 3431 3334 3432 3338 0a20   1664441344238. 
+00030f30: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+00030f40: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+00030f50: 206f 7264 6572 203d 2073 656c 662e 7361   order = self.sa
+00030f60: 6665 5f76 616c 7565 2872 6573 706f 6e73  fe_value(respons
+00030f70: 652c 2027 7265 7375 6c74 272c 207b 7d29  e, 'result', {})
+00030f80: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00030f90: 7365 6c66 2e70 6172 7365 5f6f 7264 6572  self.parse_order
+00030fa0: 286f 7264 6572 290a 0a20 2020 2064 6566  (order)..    def
+00030fb0: 2063 7265 6174 655f 7573 6463 5f6f 7264   create_usdc_ord
+00030fc0: 6572 2873 656c 662c 2073 796d 626f 6c3a  er(self, symbol:
+00030fd0: 2073 7472 2c20 7479 7065 2c20 7369 6465   str, type, side
+00030fe0: 2c20 616d 6f75 6e74 2c20 7072 6963 653d  , amount, price=
+00030ff0: 4e6f 6e65 2c20 7061 7261 6d73 3d7b 7d29  None, params={})
+00031000: 3a0a 2020 2020 2020 2020 7365 6c66 2e6c  :.        self.l
+00031010: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
+00031020: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
+00031030: 656c 662e 6d61 726b 6574 2873 796d 626f  elf.market(symbo
+00031040: 6c29 0a20 2020 2020 2020 206c 6f77 6572  l).        lower
+00031050: 4361 7365 5479 7065 203d 2074 7970 652e  CaseType = type.
+00031060: 6c6f 7765 7228 290a 2020 2020 2020 2020  lower().        
+00031070: 6966 2028 7072 6963 6520 6973 204e 6f6e  if (price is Non
+00031080: 6529 2061 6e64 2028 6c6f 7765 7243 6173  e) and (lowerCas
+00031090: 6554 7970 6520 3d3d 2027 6c69 6d69 7427  eType == 'limit'
+000310a0: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+000310b0: 6169 7365 2041 7267 756d 656e 7473 5265  aise ArgumentsRe
+000310c0: 7175 6972 6564 2873 656c 662e 6964 202b  quired(self.id +
+000310d0: 2027 2063 7265 6174 654f 7264 6572 2072   ' createOrder r
+000310e0: 6571 7569 7265 7320 6120 7072 6963 6520  equires a price 
+000310f0: 6172 6775 6d65 6e74 2066 6f72 206c 696d  argument for lim
+00031100: 6974 206f 7264 6572 7327 290a 2020 2020  it orders').    
+00031110: 2020 2020 7265 7175 6573 7420 3d20 7b0a      request = {.
+00031120: 2020 2020 2020 2020 2020 2020 2773 796d              'sym
+00031130: 626f 6c27 3a20 6d61 726b 6574 5b27 6964  bol': market['id
+00031140: 275d 2c0a 2020 2020 2020 2020 2020 2020  '],.            
+00031150: 2773 6964 6527 3a20 7365 6c66 2e63 6170  'side': self.cap
+00031160: 6974 616c 697a 6528 7369 6465 292c 0a20  italize(side),. 
+00031170: 2020 2020 2020 2020 2020 2027 6f72 6465             'orde
+00031180: 7254 7970 6527 3a20 7365 6c66 2e63 6170  rType': self.cap
+00031190: 6974 616c 697a 6528 6c6f 7765 7243 6173  italize(lowerCas
+000311a0: 6554 7970 6529 2c20 2023 206c 696d 6974  eType),  # limit
+000311b0: 206f 7220 6d61 726b 6574 0a20 2020 2020   or market.     
+000311c0: 2020 2020 2020 2027 7469 6d65 496e 466f         'timeInFo
+000311d0: 7263 6527 3a20 2747 6f6f 6454 696c 6c43  rce': 'GoodTillC
+000311e0: 616e 6365 6c27 2c20 2023 2049 6d6d 6564  ancel',  # Immed
+000311f0: 6961 7465 4f72 4361 6e63 656c 2c20 4669  iateOrCancel, Fi
+00031200: 6c6c 4f72 4b69 6c6c 2c20 506f 7374 4f6e  llOrKill, PostOn
+00031210: 6c79 0a20 2020 2020 2020 2020 2020 2027  ly.            '
+00031220: 6f72 6465 7251 7479 273a 2073 656c 662e  orderQty': self.
+00031230: 616d 6f75 6e74 5f74 6f5f 7072 6563 6973  amount_to_precis
+00031240: 696f 6e28 7379 6d62 6f6c 2c20 616d 6f75  ion(symbol, amou
+00031250: 6e74 292c 0a20 2020 2020 2020 2020 2020  nt),.           
+00031260: 2023 2027 7461 6b65 5072 6f66 6974 273a   # 'takeProfit':
+00031270: 2031 3233 2e34 352c 2020 2320 7461 6b65   123.45,  # take
+00031280: 2070 726f 6669 7420 7072 6963 652c 206f   profit price, o
+00031290: 6e6c 7920 7461 6b65 2065 6666 6563 7420  nly take effect 
+000312a0: 7570 6f6e 206f 7065 6e69 6e67 2074 6865  upon opening the
+000312b0: 2070 6f73 6974 696f 6e0a 2020 2020 2020   position.      
+000312c0: 2020 2020 2020 2320 2773 746f 704c 6f73        # 'stopLos
+000312d0: 7327 3a20 3132 332e 3435 2c20 2023 2073  s': 123.45,  # s
+000312e0: 746f 7020 6c6f 7373 2070 7269 6365 2c20  top loss price, 
+000312f0: 6f6e 6c79 2074 616b 6520 6566 6665 6374  only take effect
+00031300: 2075 706f 6e20 6f70 656e 696e 6720 7468   upon opening th
+00031310: 6520 706f 7369 7469 6f6e 0a20 2020 2020  e position.     
+00031320: 2020 2020 2020 2023 2027 7265 6475 6365         # 'reduce
+00031330: 4f6e 6c79 273a 2046 616c 7365 2c20 2023  Only': False,  #
+00031340: 2072 6564 7563 6520 6f6e 6c79 2c20 7265   reduce only, re
+00031350: 7175 6972 6564 2066 6f72 206c 696e 6561  quired for linea
+00031360: 7220 6f72 6465 7273 0a20 2020 2020 2020  r orders.       
+00031370: 2020 2020 2023 2077 6865 6e20 6372 6561       # when crea
+00031380: 7469 6e67 2061 2063 6c6f 7369 6e67 206f  ting a closing o
+00031390: 7264 6572 2c20 6279 6269 7420 7265 636f  rder, bybit reco
+000313a0: 6d6d 656e 6473 2061 2054 7275 6520 7661  mmends a True va
+000313b0: 6c75 6520 666f 720a 2020 2020 2020 2020  lue for.        
+000313c0: 2020 2020 2320 2063 6c6f 7365 4f6e 5472      #  closeOnTr
+000313d0: 6967 6765 7220 746f 2061 766f 6964 2066  igger to avoid f
+000313e0: 6169 6c69 6e67 2064 7565 2074 6f20 696e  ailing due to in
+000313f0: 7375 6666 6963 6965 6e74 2061 7661 696c  sufficient avail
+00031400: 6162 6c65 206d 6172 6769 6e0a 2020 2020  able margin.    
+00031410: 2020 2020 2020 2020 2320 2763 6c6f 7365          # 'close
+00031420: 4f6e 5472 6967 6765 7227 3a20 4661 6c73  OnTrigger': Fals
+00031430: 652c 2072 6571 7569 7265 6420 666f 7220  e, required for 
+00031440: 6c69 6e65 6172 206f 7264 6572 730a 2020  linear orders.  
+00031450: 2020 2020 2020 2020 2020 2320 276f 7264            # 'ord
+00031460: 6572 4c69 6e6b 4964 273a 2027 7374 7269  erLinkId': 'stri
+00031470: 6e67 272c 2020 2320 756e 6971 7565 2063  ng',  # unique c
+00031480: 6c69 656e 7420 6f72 6465 7220 6964 2c20  lient order id, 
+00031490: 6d61 7820 3336 2063 6861 7261 6374 6572  max 36 character
+000314a0: 730a 2020 2020 2020 2020 2020 2020 2320  s.            # 
+000314b0: 2774 7269 6767 6572 5072 6963 6527 3a20  'triggerPrice': 
+000314c0: 3132 332e 3435 2c20 2023 2074 7269 6767  123.45,  # trigg
+000314d0: 6572 2070 7269 6365 2c20 7265 7175 6972  er price, requir
+000314e0: 6564 2066 6f72 2063 6f6e 6469 7469 6f6e  ed for condition
+000314f0: 616c 206f 7264 6572 730a 2020 2020 2020  al orders.      
+00031500: 2020 2020 2020 2320 2774 7269 6767 6572        # 'trigger
+00031510: 5f62 7927 3a20 274d 6172 6b50 7269 6365  _by': 'MarkPrice
+00031520: 272c 2020 2320 496e 6465 7850 7269 6365  ',  # IndexPrice
+00031530: 2c20 4d61 726b 5072 6963 650a 2020 2020  , MarkPrice.    
+00031540: 2020 2020 2020 2020 2320 2774 7074 7269          # 'tptri
+00031550: 6767 6572 6279 273a 2027 4d61 726b 5072  ggerby': 'MarkPr
+00031560: 6963 6527 2c20 2023 2049 6e64 6578 5072  ice',  # IndexPr
+00031570: 6963 652c 204d 6172 6b50 7269 6365 0a20  ice, MarkPrice. 
+00031580: 2020 2020 2020 2020 2020 2023 2027 736c             # 'sl
+00031590: 5472 6967 6765 7242 7927 3a20 274d 6172  TriggerBy': 'Mar
+000315a0: 6b50 7269 6365 272c 2020 2320 496e 6465  kPrice',  # Inde
+000315b0: 7850 7269 6365 2c20 4d61 726b 5072 6963  xPrice, MarkPric
+000315c0: 650a 2020 2020 2020 2020 2020 2020 2320  e.            # 
+000315d0: 276f 7264 6572 4669 6c74 6572 273a 2027  'orderFilter': '
+000315e0: 4f72 6465 7227 206f 7220 2753 746f 704f  Order' or 'StopO
+000315f0: 7264 6572 270a 2020 2020 2020 2020 2020  rder'.          
+00031600: 2020 2320 276d 6d70 273a 2046 616c 7365    # 'mmp': False
+00031610: 2020 2320 6d61 726b 6574 206d 616b 6572    # market maker
+00031620: 2070 726f 7465 6374 696f 6e0a 2020 2020   protection.    
+00031630: 2020 2020 7d0a 2020 2020 2020 2020 6973      }.        is
+00031640: 4d61 726b 6574 203d 206c 6f77 6572 4361  Market = lowerCa
+00031650: 7365 5479 7065 203d 3d20 276d 6172 6b65  seType == 'marke
+00031660: 7427 0a20 2020 2020 2020 2069 734c 696d  t'.        isLim
+00031670: 6974 203d 206c 6f77 6572 4361 7365 5479  it = lowerCaseTy
+00031680: 7065 203d 3d20 276c 696d 6974 270a 2020  pe == 'limit'.  
+00031690: 2020 2020 2020 6966 2069 734c 696d 6974        if isLimit
+000316a0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+000316b0: 7175 6573 745b 276f 7264 6572 5072 6963  quest['orderPric
+000316c0: 6527 5d20 3d20 7365 6c66 2e70 7269 6365  e'] = self.price
+000316d0: 5f74 6f5f 7072 6563 6973 696f 6e28 7379  _to_precision(sy
+000316e0: 6d62 6f6c 2c20 7072 6963 6529 0a20 2020  mbol, price).   
+000316f0: 2020 2020 2065 7863 6861 6e67 6553 7065       exchangeSpe
+00031700: 6369 6669 6350 6172 616d 203d 2073 656c  cificParam = sel
+00031710: 662e 7361 6665 5f73 7472 696e 6728 7061  f.safe_string(pa
+00031720: 7261 6d73 2c20 2774 696d 655f 696e 5f66  rams, 'time_in_f
+00031730: 6f72 6365 2729 0a20 2020 2020 2020 2074  orce').        t
+00031740: 696d 6549 6e46 6f72 6365 203d 2073 656c  imeInForce = sel
+00031750: 662e 7361 6665 5f73 7472 696e 675f 6c6f  f.safe_string_lo
+00031760: 7765 7228 7061 7261 6d73 2c20 2774 696d  wer(params, 'tim
+00031770: 6549 6e46 6f72 6365 2729 0a20 2020 2020  eInForce').     
+00031780: 2020 2070 6f73 744f 6e6c 7920 3d20 4e6f     postOnly = No
+00031790: 6e65 0a20 2020 2020 2020 2070 6f73 744f  ne.        postO
+000317a0: 6e6c 792c 2070 6172 616d 7320 3d20 7365  nly, params = se
+000317b0: 6c66 2e68 616e 646c 655f 706f 7374 5f6f  lf.handle_post_o
+000317c0: 6e6c 7928 6973 4d61 726b 6574 2c20 6578  nly(isMarket, ex
+000317d0: 6368 616e 6765 5370 6563 6966 6963 5061  changeSpecificPa
+000317e0: 7261 6d20 3d3d 2027 506f 7374 4f6e 6c79  ram == 'PostOnly
+000317f0: 272c 2070 6172 616d 7329 0a20 2020 2020  ', params).     
+00031800: 2020 2069 6620 706f 7374 4f6e 6c79 3a0a     if postOnly:.
+00031810: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+00031820: 6573 745b 2774 696d 655f 696e 5f66 6f72  est['time_in_for
+00031830: 6365 275d 203d 2027 506f 7374 4f6e 6c79  ce'] = 'PostOnly
+00031840: 270a 2020 2020 2020 2020 656c 6966 2074  '.        elif t
+00031850: 696d 6549 6e46 6f72 6365 203d 3d20 2767  imeInForce == 'g
+00031860: 7463 273a 0a20 2020 2020 2020 2020 2020  tc':.           
+00031870: 2072 6571 7565 7374 5b27 7469 6d65 5f69   request['time_i
+00031880: 6e5f 666f 7263 6527 5d20 3d20 2747 6f6f  n_force'] = 'Goo
+00031890: 6454 696c 6c43 616e 6365 6c27 0a20 2020  dTillCancel'.   
+000318a0: 2020 2020 2065 6c69 6620 7469 6d65 496e       elif timeIn
+000318b0: 466f 7263 6520 3d3d 2027 666f 6b27 3a0a  Force == 'fok':.
+000318c0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+000318d0: 6573 745b 2774 696d 655f 696e 5f66 6f72  est['time_in_for
+000318e0: 6365 275d 203d 2027 4669 6c6c 4f72 4b69  ce'] = 'FillOrKi
+000318f0: 6c6c 270a 2020 2020 2020 2020 656c 6966  ll'.        elif
+00031900: 2074 696d 6549 6e46 6f72 6365 203d 3d20   timeInForce == 
+00031910: 2769 6f63 273a 0a20 2020 2020 2020 2020  'ioc':.         
+00031920: 2020 2072 6571 7565 7374 5b27 7469 6d65     request['time
+00031930: 5f69 6e5f 666f 7263 6527 5d20 3d20 2749  _in_force'] = 'I
+00031940: 6d6d 6564 6961 7465 4f72 4361 6e63 656c  mmediateOrCancel
+00031950: 270a 2020 2020 2020 2020 6966 206d 6172  '.        if mar
+00031960: 6b65 745b 2773 7761 7027 5d3a 0a20 2020  ket['swap']:.   
+00031970: 2020 2020 2020 2020 2074 7269 6767 6572           trigger
+00031980: 5072 6963 6520 3d20 7365 6c66 2e73 6166  Price = self.saf
+00031990: 655f 6e75 6d62 6572 5f32 2870 6172 616d  e_number_2(param
+000319a0: 732c 2027 7374 6f70 5072 6963 6527 2c20  s, 'stopPrice', 
+000319b0: 2774 7269 6767 6572 5072 6963 6527 290a  'triggerPrice').
+000319c0: 2020 2020 2020 2020 2020 2020 7374 6f70              stop
+000319d0: 4c6f 7373 5472 6967 6765 7250 7269 6365  LossTriggerPrice
+000319e0: 203d 2073 656c 662e 7361 6665 5f6e 756d   = self.safe_num
+000319f0: 6265 7228 7061 7261 6d73 2c20 2773 746f  ber(params, 'sto
+00031a00: 704c 6f73 7350 7269 6365 272c 2074 7269  pLossPrice', tri
+00031a10: 6767 6572 5072 6963 6529 0a20 2020 2020  ggerPrice).     
+00031a20: 2020 2020 2020 2074 616b 6550 726f 6669         takeProfi
+00031a30: 7454 7269 6767 6572 5072 6963 6520 3d20  tTriggerPrice = 
+00031a40: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
+00031a50: 2870 6172 616d 732c 2027 7461 6b65 5072  (params, 'takePr
+00031a60: 6f66 6974 5072 6963 6527 290a 2020 2020  ofitPrice').    
+00031a70: 2020 2020 2020 2020 7374 6f70 4c6f 7373          stopLoss
+00031a80: 203d 2073 656c 662e 7361 6665 5f6e 756d   = self.safe_num
+00031a90: 6265 7228 7061 7261 6d73 2c20 2773 746f  ber(params, 'sto
+00031aa0: 704c 6f73 7327 290a 2020 2020 2020 2020  pLoss').        
+00031ab0: 2020 2020 7461 6b65 5072 6f66 6974 203d      takeProfit =
+00031ac0: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
+00031ad0: 7228 7061 7261 6d73 2c20 2774 616b 6550  r(params, 'takeP
+00031ae0: 726f 6669 7427 290a 2020 2020 2020 2020  rofit').        
+00031af0: 2020 2020 6973 5374 6f70 4c6f 7373 5472      isStopLossTr
+00031b00: 6967 6765 724f 7264 6572 203d 2073 746f  iggerOrder = sto
+00031b10: 704c 6f73 7354 7269 6767 6572 5072 6963  pLossTriggerPric
+00031b20: 6520 6973 206e 6f74 204e 6f6e 650a 2020  e is not None.  
+00031b30: 2020 2020 2020 2020 2020 6973 5461 6b65            isTake
+00031b40: 5072 6f66 6974 5472 6967 6765 724f 7264  ProfitTriggerOrd
+00031b50: 6572 203d 2074 616b 6550 726f 6669 7454  er = takeProfitT
+00031b60: 7269 6767 6572 5072 6963 6520 6973 206e  riggerPrice is n
+00031b70: 6f74 204e 6f6e 650a 2020 2020 2020 2020  ot None.        
+00031b80: 2020 2020 6973 5374 6f70 4c6f 7373 203d      isStopLoss =
+00031b90: 2073 746f 704c 6f73 7320 6973 206e 6f74   stopLoss is not
+00031ba0: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
+00031bb0: 2020 6973 5461 6b65 5072 6f66 6974 203d    isTakeProfit =
+00031bc0: 2074 616b 6550 726f 6669 7420 6973 206e   takeProfit is n
+00031bd0: 6f74 204e 6f6e 650a 2020 2020 2020 2020  ot None.        
+00031be0: 2020 2020 6973 5374 6f70 4f72 6465 7220      isStopOrder 
+00031bf0: 3d20 6973 5374 6f70 4c6f 7373 5472 6967  = isStopLossTrig
+00031c00: 6765 724f 7264 6572 206f 7220 6973 5461  gerOrder or isTa
+00031c10: 6b65 5072 6f66 6974 5472 6967 6765 724f  keProfitTriggerO
+00031c20: 7264 6572 0a20 2020 2020 2020 2020 2020  rder.           
+00031c30: 2069 6620 6973 5374 6f70 4f72 6465 723a   if isStopOrder:
+00031c40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00031c50: 2072 6571 7565 7374 5b27 6f72 6465 7246   request['orderF
+00031c60: 696c 7465 7227 5d20 3d20 2753 746f 704f  ilter'] = 'StopO
+00031c70: 7264 6572 270a 2020 2020 2020 2020 2020  rder'.          
+00031c80: 2020 2020 2020 7265 7175 6573 745b 2774        request['t
+00031c90: 7269 6767 6572 5f62 7927 5d20 3d20 274c  rigger_by'] = 'L
+00031ca0: 6173 7450 7269 6365 270a 2020 2020 2020  astPrice'.      
+00031cb0: 2020 2020 2020 2020 2020 7374 6f70 5078            stopPx
+00031cc0: 203d 2073 746f 704c 6f73 7354 7269 6767   = stopLossTrigg
+00031cd0: 6572 5072 6963 6520 6966 2069 7353 746f  erPrice if isSto
+00031ce0: 704c 6f73 7354 7269 6767 6572 4f72 6465  pLossTriggerOrde
+00031cf0: 7220 656c 7365 2074 616b 6550 726f 6669  r else takeProfi
+00031d00: 7454 7269 6767 6572 5072 6963 650a 2020  tTriggerPrice.  
+00031d10: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+00031d20: 6563 6973 6553 746f 7050 7269 6365 203d  eciseStopPrice =
+00031d30: 2073 656c 662e 7072 6963 655f 746f 5f70   self.price_to_p
+00031d40: 7265 6369 7369 6f6e 2873 796d 626f 6c2c  recision(symbol,
+00031d50: 2073 746f 7050 7829 0a20 2020 2020 2020   stopPx).       
+00031d60: 2020 2020 2020 2020 2072 6571 7565 7374           request
+00031d70: 5b27 7472 6967 6765 7250 7269 6365 275d  ['triggerPrice']
+00031d80: 203d 2070 7265 6369 7365 5374 6f70 5072   = preciseStopPr
+00031d90: 6963 650a 2020 2020 2020 2020 2020 2020  ice.            
+00031da0: 2020 2020 6465 6c74 6120 3d20 7365 6c66      delta = self
+00031db0: 2e6e 756d 6265 725f 746f 5f73 7472 696e  .number_to_strin
+00031dc0: 6728 6d61 726b 6574 5b27 7072 6563 6973  g(market['precis
+00031dd0: 696f 6e27 5d5b 2770 7269 6365 275d 290a  ion']['price']).
+00031de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031df0: 7265 7175 6573 745b 2762 6173 6550 7269  request['basePri
+00031e00: 6365 275d 203d 2050 7265 6369 7365 2e73  ce'] = Precise.s
+00031e10: 7472 696e 675f 7375 6228 7072 6563 6973  tring_sub(precis
+00031e20: 6553 746f 7050 7269 6365 2c20 6465 6c74  eStopPrice, delt
+00031e30: 6129 2069 6620 6973 5374 6f70 4c6f 7373  a) if isStopLoss
+00031e40: 5472 6967 6765 724f 7264 6572 2065 6c73  TriggerOrder els
+00031e50: 6520 5072 6563 6973 652e 7374 7269 6e67  e Precise.string
+00031e60: 5f61 6464 2870 7265 6369 7365 5374 6f70  _add(preciseStop
+00031e70: 5072 6963 652c 2064 656c 7461 290a 2020  Price, delta).  
+00031e80: 2020 2020 2020 2020 2020 656c 6966 2069            elif i
+00031e90: 7353 746f 704c 6f73 7320 6f72 2069 7354  sStopLoss or isT
+00031ea0: 616b 6550 726f 6669 743a 0a20 2020 2020  akeProfit:.     
+00031eb0: 2020 2020 2020 2020 2020 2069 6620 6973             if is
+00031ec0: 5374 6f70 4c6f 7373 3a0a 2020 2020 2020  StopLoss:.      
+00031ed0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00031ee0: 7175 6573 745b 2773 746f 704c 6f73 7327  quest['stopLoss'
+00031ef0: 5d20 3d20 7365 6c66 2e70 7269 6365 5f74  ] = self.price_t
+00031f00: 6f5f 7072 6563 6973 696f 6e28 7379 6d62  o_precision(symb
+00031f10: 6f6c 2c20 7374 6f70 4c6f 7373 290a 2020  ol, stopLoss).  
+00031f20: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00031f30: 2069 7354 616b 6550 726f 6669 743a 0a20   isTakeProfit:. 
+00031f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031f50: 2020 2072 6571 7565 7374 5b27 7461 6b65     request['take
+00031f60: 5072 6f66 6974 275d 203d 2073 656c 662e  Profit'] = self.
+00031f70: 7072 6963 655f 746f 5f70 7265 6369 7369  price_to_precisi
+00031f80: 6f6e 2873 796d 626f 6c2c 2074 616b 6550  on(symbol, takeP
+00031f90: 726f 6669 7429 0a20 2020 2020 2020 2020  rofit).         
+00031fa0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00031fb0: 2020 2020 2020 2020 2072 6571 7565 7374           request
+00031fc0: 5b27 6f72 6465 7246 696c 7465 7227 5d20  ['orderFilter'] 
+00031fd0: 3d20 274f 7264 6572 270a 2020 2020 2020  = 'Order'.      
+00031fe0: 2020 636c 6965 6e74 4f72 6465 7249 6420    clientOrderId 
+00031ff0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+00032000: 6e67 2870 6172 616d 732c 2027 636c 6965  ng(params, 'clie
+00032010: 6e74 4f72 6465 7249 6427 290a 2020 2020  ntOrderId').    
+00032020: 2020 2020 6966 2063 6c69 656e 744f 7264      if clientOrd
+00032030: 6572 4964 2069 7320 6e6f 7420 4e6f 6e65  erId is not None
+00032040: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00032050: 7175 6573 745b 276f 7264 6572 4c69 6e6b  quest['orderLink
+00032060: 4964 275d 203d 2063 6c69 656e 744f 7264  Id'] = clientOrd
+00032070: 6572 4964 0a20 2020 2020 2020 2065 6c69  erId.        eli
+00032080: 6620 6d61 726b 6574 5b27 6f70 7469 6f6e  f market['option
+00032090: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+000320a0: 2320 6d61 6e64 6174 6f72 7920 6669 656c  # mandatory fiel
+000320b0: 6420 666f 7220 6f70 7469 6f6e 730a 2020  d for options.  
+000320c0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+000320d0: 745b 276f 7264 6572 4c69 6e6b 4964 275d  t['orderLinkId']
+000320e0: 203d 2073 656c 662e 7575 6964 3136 2829   = self.uuid16()
+000320f0: 0a20 2020 2020 2020 2070 6172 616d 7320  .        params 
+00032100: 3d20 7365 6c66 2e6f 6d69 7428 7061 7261  = self.omit(para
+00032110: 6d73 2c20 5b27 7374 6f70 5072 6963 6527  ms, ['stopPrice'
+00032120: 2c20 2774 696d 6549 6e46 6f72 6365 272c  , 'timeInForce',
+00032130: 2027 7472 6967 6765 7250 7269 6365 272c   'triggerPrice',
+00032140: 2027 7374 6f70 4c6f 7373 5072 6963 6527   'stopLossPrice'
+00032150: 2c20 2774 616b 6550 726f 6669 7450 7269  , 'takeProfitPri
+00032160: 6365 272c 2027 706f 7374 4f6e 6c79 272c  ce', 'postOnly',
+00032170: 2027 636c 6965 6e74 4f72 6465 7249 6427   'clientOrderId'
+00032180: 2c20 2773 746f 704c 6f73 7327 2c20 2774  , 'stopLoss', 't
+00032190: 616b 6550 726f 6669 7427 5d29 0a20 2020  akeProfit']).   
+000321a0: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
+000321b0: 4e6f 6e65 0a20 2020 2020 2020 2069 6620  None.        if 
+000321c0: 6d61 726b 6574 5b27 6f70 7469 6f6e 275d  market['option']
+000321d0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+000321e0: 7370 6f6e 7365 203d 2073 656c 662e 7072  sponse = self.pr
+000321f0: 6976 6174 6550 6f73 744f 7074 696f 6e55  ivatePostOptionU
+00032200: 7364 634f 7065 6e61 7069 5072 6976 6174  sdcOpenapiPrivat
+00032210: 6556 3150 6c61 6365 4f72 6465 7228 7365  eV1PlaceOrder(se
+00032220: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
+00032230: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
+00032240: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00032250: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+00032260: 2073 656c 662e 7072 6976 6174 6550 6f73   self.privatePos
+00032270: 7450 6572 7065 7475 616c 5573 6463 4f70  tPerpetualUsdcOp
+00032280: 656e 6170 6950 7269 7661 7465 5631 506c  enapiPrivateV1Pl
+00032290: 6163 654f 7264 6572 2873 656c 662e 6578  aceOrder(self.ex
+000322a0: 7465 6e64 2872 6571 7565 7374 2c20 7061  tend(request, pa
+000322b0: 7261 6d73 2929 0a20 2020 2020 2020 2023  rams)).        #
+000322c0: 0a20 2020 2020 2020 2023 2020 2020 207b  .        #     {
+000322d0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000322e0: 2020 2022 7265 7443 6f64 6522 3a30 2c0a     "retCode":0,.
+000322f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00032300: 2020 2272 6574 4d73 6722 3a22 222c 0a20    "retMsg":"",. 
+00032310: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00032320: 2022 7265 7375 6c74 223a 7b0a 2020 2020   "result":{.    
+00032330: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00032340: 2022 6f72 6465 7249 6422 3a22 3334 3435   "orderId":"3445
+00032350: 3061 3539 2d33 3235 652d 3432 3936 2d38  0a59-325e-4296-8
+00032360: 6166 302d 3633 6337 6335 3234 6165 3333  af0-63c7c524ae33
+00032370: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00032380: 2020 2020 2020 2020 226f 7264 6572 4c69          "orderLi
+00032390: 6e6b 4964 223a 2222 2c0a 2020 2020 2020  nkId":"",.      
+000323a0: 2020 2320 2020 2020 2020 2020 2020 2022    #            "
+000323b0: 6d6d 7022 3a66 616c 7365 2c0a 2020 2020  mmp":false,.    
+000323c0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+000323d0: 2022 7379 6d62 6f6c 223a 2242 5443 5045   "symbol":"BTCPE
+000323e0: 5250 222c 0a20 2020 2020 2020 2023 2020  RP",.        #  
+000323f0: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+00032400: 5479 7065 223a 224c 696d 6974 222c 0a20  Type":"Limit",. 
+00032410: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00032420: 2020 2020 2273 6964 6522 3a22 4275 7922      "side":"Buy"
+00032430: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00032440: 2020 2020 2020 2022 6f72 6465 7251 7479         "orderQty
+00032450: 223a 2230 2e30 3031 3030 3030 3022 2c0a  ":"0.00100000",.
+00032460: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00032470: 2020 2020 2022 6f72 6465 7250 7269 6365       "orderPrice
+00032480: 223a 2232 3030 3030 2e30 3022 2c0a 2020  ":"20000.00",.  
+00032490: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000324a0: 2020 2022 6976 223a 2230 222c 0a20 2020     "iv":"0",.   
+000324b0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+000324c0: 2020 2274 696d 6549 6e46 6f72 6365 223a    "timeInForce":
+000324d0: 2247 6f6f 6454 696c 6c43 616e 6365 6c22  "GoodTillCancel"
+000324e0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000324f0: 2020 2020 2020 2022 6f72 6465 7253 7461         "orderSta
+00032500: 7475 7322 3a22 4372 6561 7465 6422 2c0a  tus":"Created",.
+00032510: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00032520: 2020 2020 2022 6372 6561 7465 6441 7422       "createdAt"
+00032530: 3a22 3136 3532 3236 3137 3436 3030 3738  :"16522617460078
+00032540: 3733 222c 0a20 2020 2020 2020 2023 2020  73",.        #  
+00032550: 2020 2020 2020 2020 2020 2262 6173 6550            "baseP
+00032560: 7269 6365 223a 2230 2e30 3022 2c0a 2020  rice":"0.00",.  
+00032570: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00032580: 2020 2022 7472 6967 6765 7250 7269 6365     "triggerPrice
+00032590: 223a 2230 2e30 3022 2c0a 2020 2020 2020  ":"0.00",.      
+000325a0: 2020 2320 2020 2020 2020 2020 2020 2022    #            "
+000325b0: 7461 6b65 5072 6f66 6974 223a 2230 2e30  takeProfit":"0.0
+000325c0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+000325d0: 2020 2020 2020 2020 2022 7374 6f70 4c6f           "stopLo
+000325e0: 7373 223a 2230 2e30 3022 2c0a 2020 2020  ss":"0.00",.    
+000325f0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00032600: 2022 736c 5472 6967 6765 7242 7922 3a22   "slTriggerBy":"
+00032610: 554e 4b4e 4f57 4e22 2c0a 2020 2020 2020  UNKNOWN",.      
+00032620: 2020 2320 2020 2020 2020 2020 2020 2022    #            "
+00032630: 7470 5472 6967 6765 7242 7922 3a22 554e  tpTriggerBy":"UN
+00032640: 4b4e 4f57 4e22 0a20 2020 2020 2020 2023  KNOWN".        #
+00032650: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+00032660: 0a20 2020 2020 2020 206f 7264 6572 203d  .        order =
+00032670: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+00032680: 2872 6573 706f 6e73 652c 2027 7265 7375  (response, 'resu
+00032690: 6c74 272c 207b 7d29 0a20 2020 2020 2020  lt', {}).       
+000326a0: 2072 6574 7572 6e20 7365 6c66 2e70 6172   return self.par
+000326b0: 7365 5f6f 7264 6572 286f 7264 6572 290a  se_order(order).
+000326c0: 0a20 2020 2064 6566 2065 6469 745f 756e  .    def edit_un
+000326d0: 6966 6965 645f 6163 636f 756e 745f 6f72  ified_account_or
+000326e0: 6465 7228 7365 6c66 2c20 6964 3a20 7374  der(self, id: st
+000326f0: 722c 2073 796d 626f 6c2c 2074 7970 652c  r, symbol, type,
+00032700: 2073 6964 652c 2061 6d6f 756e 743d 4e6f   side, amount=No
+00032710: 6e65 2c20 7072 6963 653d 4e6f 6e65 2c20  ne, price=None, 
+00032720: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
+00032730: 2020 2020 7365 6c66 2e6c 6f61 645f 6d61      self.load_ma
+00032740: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
+00032750: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
+00032760: 726b 6574 2873 796d 626f 6c29 0a20 2020  rket(symbol).   
+00032770: 2020 2020 2069 6620 6e6f 7420 6d61 726b       if not mark
+00032780: 6574 5b27 6c69 6e65 6172 275d 2061 6e64  et['linear'] and
+00032790: 206e 6f74 206d 6172 6b65 745b 276f 7074   not market['opt
+000327a0: 696f 6e27 5d3a 0a20 2020 2020 2020 2020  ion']:.         
+000327b0: 2020 2072 6169 7365 204e 6f74 5375 7070     raise NotSupp
+000327c0: 6f72 7465 6428 7365 6c66 2e69 6420 2b20  orted(self.id + 
+000327d0: 2720 6564 6974 4f72 6465 7220 646f 6573  ' editOrder does
+000327e0: 206e 6f74 2061 6c6c 6f77 2069 6e76 6572   not allow inver
+000327f0: 7365 206d 6172 6b65 7420 6f72 6465 7273  se market orders
+00032800: 2066 6f72 2027 202b 2073 796d 626f 6c20   for ' + symbol 
+00032810: 2b20 2720 6d61 726b 6574 7327 290a 2020  + ' markets').  
+00032820: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
+00032830: 7b0a 2020 2020 2020 2020 2020 2020 2773  {.            's
+00032840: 796d 626f 6c27 3a20 6d61 726b 6574 5b27  ymbol': market['
+00032850: 6964 275d 2c0a 2020 2020 2020 2020 2020  id'],.          
+00032860: 2020 276f 7264 6572 4964 273a 2069 642c    'orderId': id,
+00032870: 0a20 2020 2020 2020 2020 2020 2027 7174  .            'qt
+00032880: 7927 3a20 7365 6c66 2e61 6d6f 756e 745f  y': self.amount_
+00032890: 746f 5f70 7265 6369 7369 6f6e 2873 796d  to_precision(sym
+000328a0: 626f 6c2c 2061 6d6f 756e 7429 2c0a 2020  bol, amount),.  
+000328b0: 2020 2020 2020 2020 2020 2320 276f 7264            # 'ord
+000328c0: 6572 4c69 6e6b 4964 273a 2027 7374 7269  erLinkId': 'stri
+000328d0: 6e67 272c 2020 2320 756e 6971 7565 2063  ng',  # unique c
+000328e0: 6c69 656e 7420 6f72 6465 7220 6964 2c20  lient order id, 
+000328f0: 6d61 7820 3336 2063 6861 7261 6374 6572  max 36 character
+00032900: 730a 2020 2020 2020 2020 2020 2020 2320  s.            # 
+00032910: 2774 616b 6550 726f 6669 7427 3a20 3132  'takeProfit': 12
+00032920: 332e 3435 2c20 2023 2074 616b 6520 7072  3.45,  # take pr
+00032930: 6f66 6974 2070 7269 6365 2c20 6f6e 6c79  ofit price, only
+00032940: 2074 616b 6520 6566 6665 6374 2075 706f   take effect upo
+00032950: 6e20 6f70 656e 696e 6720 7468 6520 706f  n opening the po
+00032960: 7369 7469 6f6e 0a20 2020 2020 2020 2020  sition.         
+00032970: 2020 2023 2027 7374 6f70 4c6f 7373 273a     # 'stopLoss':
+00032980: 2031 3233 2e34 352c 2020 2320 7374 6f70   123.45,  # stop
+00032990: 206c 6f73 7320 7072 6963 652c 206f 6e6c   loss price, onl
+000329a0: 7920 7461 6b65 2065 6666 6563 7420 7570  y take effect up
+000329b0: 6f6e 206f 7065 6e69 6e67 2074 6865 2070  on opening the p
+000329c0: 6f73 6974 696f 6e0a 2020 2020 2020 2020  osition.        
+000329d0: 2020 2020 2320 2774 7269 6767 6572 5072      # 'triggerPr
+000329e0: 6963 6527 3a20 3132 332e 3435 2c20 2023  ice': 123.45,  #
+000329f0: 2074 7269 6767 6572 2070 7269 6365 2c20   trigger price, 
+00032a00: 7265 7175 6972 6564 2066 6f72 2063 6f6e  required for con
+00032a10: 6469 7469 6f6e 616c 206f 7264 6572 730a  ditional orders.
+00032a20: 2020 2020 2020 2020 2020 2020 2320 2774              # 't
+00032a30: 7269 6767 6572 4279 273a 2027 4d61 726b  riggerBy': 'Mark
+00032a40: 5072 6963 6527 2c20 2023 2049 6e64 6578  Price',  # Index
+00032a50: 5072 6963 652c 204d 6172 6b50 7269 6365  Price, MarkPrice
+00032a60: 2c20 4c61 7374 5072 6963 650a 2020 2020  , LastPrice.    
+00032a70: 2020 2020 2020 2020 2320 2774 7054 7269          # 'tpTri
+00032a80: 6767 6572 6279 273a 2027 4d61 726b 5072  ggerby': 'MarkPr
+00032a90: 6963 6527 2c20 2023 2049 6e64 6578 5072  ice',  # IndexPr
+00032aa0: 6963 652c 204d 6172 6b50 7269 6365 2c20  ice, MarkPrice, 
+00032ab0: 4c61 7374 5072 6963 650a 2020 2020 2020  LastPrice.      
+00032ac0: 2020 2020 2020 2320 2773 6c54 7269 6767        # 'slTrigg
+00032ad0: 6572 4279 273a 2027 4d61 726b 5072 6963  erBy': 'MarkPric
+00032ae0: 6527 2c20 2023 2049 6e64 6578 5072 6963  e',  # IndexPric
+00032af0: 652c 204d 6172 6b50 7269 6365 2c20 4c61  e, MarkPrice, La
+00032b00: 7374 5072 6963 650a 2020 2020 2020 2020  stPrice.        
+00032b10: 2020 2020 2320 5661 6c69 6420 666f 7220      # Valid for 
+00032b20: 6f70 7469 6f6e 206f 6e6c 792e 0a20 2020  option only..   
+00032b30: 2020 2020 2020 2020 2023 2027 6f72 6465           # 'orde
+00032b40: 7249 7627 3a20 2730 272c 2020 2320 496d  rIv': '0',  # Im
+00032b50: 706c 6965 6420 766f 6c61 7469 6c69 7479  plied volatility
+00032b60: 3b20 7061 7261 6d65 7465 7273 2061 7265  ; parameters are
+00032b70: 2070 6173 7365 6420 6163 636f 7264 696e   passed accordin
+00032b80: 6720 746f 2074 6865 2072 6561 6c20 7661  g to the real va
+00032b90: 6c75 653b 2066 6f72 2065 7861 6d70 6c65  lue; for example
+00032ba0: 2c20 666f 7220 3130 252c 2030 2e31 2069  , for 10%, 0.1 i
+00032bb0: 7320 7061 7373 6564 0a20 2020 2020 2020  s passed.       
+00032bc0: 207d 0a20 2020 2020 2020 2069 6620 6d61   }.        if ma
+00032bd0: 726b 6574 5b27 6c69 6e65 6172 275d 3a0a  rket['linear']:.
+00032be0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+00032bf0: 6573 745b 2763 6174 6567 6f72 7927 5d20  est['category'] 
+00032c00: 3d20 276c 696e 6561 7227 0a20 2020 2020  = 'linear'.     
+00032c10: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00032c20: 2020 2020 2072 6571 7565 7374 5b27 6361       request['ca
+00032c30: 7465 676f 7279 275d 203d 2027 6f70 7469  tegory'] = 'opti
+00032c40: 6f6e 270a 2020 2020 2020 2020 6966 2070  on'.        if p
+00032c50: 7269 6365 2069 7320 6e6f 7420 4e6f 6e65  rice is not None
+00032c60: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00032c70: 7175 6573 745b 2770 7269 6365 275d 203d  quest['price'] =
+00032c80: 2073 656c 662e 7072 6963 655f 746f 5f70   self.price_to_p
+00032c90: 7265 6369 7369 6f6e 2873 796d 626f 6c2c  recision(symbol,
+00032ca0: 2070 7269 6365 290a 2020 2020 2020 2020   price).        
+00032cb0: 7472 6967 6765 7250 7269 6365 203d 2073  triggerPrice = s
+00032cc0: 656c 662e 7361 6665 5f6e 756d 6265 725f  elf.safe_number_
+00032cd0: 3228 7061 7261 6d73 2c20 2774 7269 6767  2(params, 'trigg
+00032ce0: 6572 5072 6963 6527 2c20 2773 746f 7050  erPrice', 'stopP
+00032cf0: 7269 6365 2729 0a20 2020 2020 2020 2073  rice').        s
+00032d00: 746f 704c 6f73 7354 7269 6767 6572 5072  topLossTriggerPr
+00032d10: 6963 6520 3d20 7365 6c66 2e73 6166 655f  ice = self.safe_
+00032d20: 6e75 6d62 6572 2870 6172 616d 732c 2027  number(params, '
+00032d30: 7374 6f70 4c6f 7373 5072 6963 6527 290a  stopLossPrice').
+00032d40: 2020 2020 2020 2020 7461 6b65 5072 6f66          takeProf
+00032d50: 6974 5472 6967 6765 7250 7269 6365 203d  itTriggerPrice =
+00032d60: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
+00032d70: 7228 7061 7261 6d73 2c20 2774 616b 6550  r(params, 'takeP
+00032d80: 726f 6669 7450 7269 6365 2729 0a20 2020  rofitPrice').   
+00032d90: 2020 2020 2073 746f 704c 6f73 7320 3d20       stopLoss = 
+00032da0: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
+00032db0: 2870 6172 616d 732c 2027 7374 6f70 4c6f  (params, 'stopLo
+00032dc0: 7373 2729 0a20 2020 2020 2020 2074 616b  ss').        tak
+00032dd0: 6550 726f 6669 7420 3d20 7365 6c66 2e73  eProfit = self.s
+00032de0: 6166 655f 6e75 6d62 6572 2870 6172 616d  afe_number(param
+00032df0: 732c 2027 7461 6b65 5072 6f66 6974 2729  s, 'takeProfit')
+00032e00: 0a20 2020 2020 2020 2069 7353 746f 704c  .        isStopL
+00032e10: 6f73 7354 7269 6767 6572 4f72 6465 7220  ossTriggerOrder 
+00032e20: 3d20 7374 6f70 4c6f 7373 5472 6967 6765  = stopLossTrigge
+00032e30: 7250 7269 6365 2069 7320 6e6f 7420 4e6f  rPrice is not No
+00032e40: 6e65 0a20 2020 2020 2020 2069 7354 616b  ne.        isTak
+00032e50: 6550 726f 6669 7454 7269 6767 6572 4f72  eProfitTriggerOr
+00032e60: 6465 7220 3d20 7461 6b65 5072 6f66 6974  der = takeProfit
+00032e70: 5472 6967 6765 7250 7269 6365 2069 7320  TriggerPrice is 
+00032e80: 6e6f 7420 4e6f 6e65 0a20 2020 2020 2020  not None.       
+00032e90: 2069 7353 746f 704c 6f73 7320 3d20 7374   isStopLoss = st
+00032ea0: 6f70 4c6f 7373 2069 7320 6e6f 7420 4e6f  opLoss is not No
+00032eb0: 6e65 0a20 2020 2020 2020 2069 7354 616b  ne.        isTak
+00032ec0: 6550 726f 6669 7420 3d20 7461 6b65 5072  eProfit = takePr
+00032ed0: 6f66 6974 2069 7320 6e6f 7420 4e6f 6e65  ofit is not None
+00032ee0: 0a20 2020 2020 2020 2069 6620 6973 5374  .        if isSt
+00032ef0: 6f70 4c6f 7373 5472 6967 6765 724f 7264  opLossTriggerOrd
+00032f00: 6572 206f 7220 6973 5461 6b65 5072 6f66  er or isTakeProf
+00032f10: 6974 5472 6967 6765 724f 7264 6572 3a0a  itTriggerOrder:.
+00032f20: 2020 2020 2020 2020 2020 2020 7472 6967              trig
+00032f30: 6765 7250 7269 6365 203d 2073 746f 704c  gerPrice = stopL
+00032f40: 6f73 7354 7269 6767 6572 5072 6963 6520  ossTriggerPrice 
+00032f50: 6966 2069 7353 746f 704c 6f73 7354 7269  if isStopLossTri
+00032f60: 6767 6572 4f72 6465 7220 656c 7365 2074  ggerOrder else t
+00032f70: 616b 6550 726f 6669 7454 7269 6767 6572  akeProfitTrigger
+00032f80: 5072 6963 650a 2020 2020 2020 2020 6966  Price.        if
+00032f90: 2074 7269 6767 6572 5072 6963 6520 6973   triggerPrice is
+00032fa0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00032fb0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+00032fc0: 7472 6967 6765 7250 7269 6365 275d 203d  triggerPrice'] =
+00032fd0: 2073 656c 662e 7072 6963 655f 746f 5f70   self.price_to_p
+00032fe0: 7265 6369 7369 6f6e 2873 796d 626f 6c2c  recision(symbol,
+00032ff0: 2074 7269 6767 6572 5072 6963 6529 0a20   triggerPrice). 
+00033000: 2020 2020 2020 2069 6620 6973 5374 6f70         if isStop
+00033010: 4c6f 7373 206f 7220 6973 5461 6b65 5072  Loss or isTakePr
+00033020: 6f66 6974 3a0a 2020 2020 2020 2020 2020  ofit:.          
+00033030: 2020 6966 2069 7353 746f 704c 6f73 733a    if isStopLoss:
+00033040: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00033050: 2072 6571 7565 7374 5b27 7374 6f70 4c6f   request['stopLo
+00033060: 7373 275d 203d 2073 656c 662e 7072 6963  ss'] = self.pric
+00033070: 655f 746f 5f70 7265 6369 7369 6f6e 2873  e_to_precision(s
+00033080: 796d 626f 6c2c 2073 746f 704c 6f73 7329  ymbol, stopLoss)
+00033090: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000330a0: 6973 5461 6b65 5072 6f66 6974 3a0a 2020  isTakeProfit:.  
+000330b0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+000330c0: 7175 6573 745b 2774 616b 6550 726f 6669  quest['takeProfi
+000330d0: 7427 5d20 3d20 7365 6c66 2e70 7269 6365  t'] = self.price
+000330e0: 5f74 6f5f 7072 6563 6973 696f 6e28 7379  _to_precision(sy
+000330f0: 6d62 6f6c 2c20 7461 6b65 5072 6f66 6974  mbol, takeProfit
+00033100: 290a 2020 2020 2020 2020 636c 6965 6e74  ).        client
+00033110: 4f72 6465 7249 6420 3d20 7365 6c66 2e73  OrderId = self.s
+00033120: 6166 655f 7374 7269 6e67 2870 6172 616d  afe_string(param
+00033130: 732c 2027 636c 6965 6e74 4f72 6465 7249  s, 'clientOrderI
+00033140: 6427 290a 2020 2020 2020 2020 6966 2063  d').        if c
+00033150: 6c69 656e 744f 7264 6572 4964 2069 7320  lientOrderId is 
+00033160: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00033170: 2020 2020 2020 7265 7175 6573 745b 276f        request['o
+00033180: 7264 6572 4c69 6e6b 4964 275d 203d 2063  rderLinkId'] = c
+00033190: 6c69 656e 744f 7264 6572 4964 0a20 2020  lientOrderId.   
+000331a0: 2020 2020 2070 6172 616d 7320 3d20 7365       params = se
+000331b0: 6c66 2e6f 6d69 7428 7061 7261 6d73 2c20  lf.omit(params, 
+000331c0: 5b27 7374 6f70 5072 6963 6527 2c20 2773  ['stopPrice', 's
+000331d0: 746f 704c 6f73 7350 7269 6365 272c 2027  topLossPrice', '
+000331e0: 7461 6b65 5072 6f66 6974 5072 6963 6527  takeProfitPrice'
+000331f0: 2c20 2774 7269 6767 6572 5072 6963 6527  , 'triggerPrice'
+00033200: 2c20 2763 6c69 656e 744f 7264 6572 4964  , 'clientOrderId
+00033210: 272c 2027 7374 6f70 4c6f 7373 272c 2027  ', 'stopLoss', '
+00033220: 7461 6b65 5072 6f66 6974 275d 290a 2020  takeProfit']).  
+00033230: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+00033240: 2073 656c 662e 7072 6976 6174 6550 6f73   self.privatePos
+00033250: 7456 354f 7264 6572 416d 656e 6428 7365  tV5OrderAmend(se
+00033260: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
+00033270: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
+00033280: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+00033290: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+000332a0: 2020 2020 2020 2020 2272 6574 436f 6465          "retCode
+000332b0: 223a 2030 2c0a 2020 2020 2020 2020 2320  ": 0,.        # 
+000332c0: 2020 2020 2020 2020 2272 6574 4d73 6722          "retMsg"
+000332d0: 3a20 224f 4b22 2c0a 2020 2020 2020 2020  : "OK",.        
+000332e0: 2320 2020 2020 2020 2020 2272 6573 756c  #         "resul
+000332f0: 7422 3a20 7b0a 2020 2020 2020 2020 2320  t": {.        # 
+00033300: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+00033310: 6572 4964 223a 2022 6336 6630 3535 6439  erId": "c6f055d9
+00033320: 2d37 6632 312d 3430 3739 2d39 3133 642d  -7f21-4079-913d-
+00033330: 6536 3532 3361 3963 6666 6661 222c 0a20  e6523a9cfffa",. 
+00033340: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00033350: 2020 2020 2022 6f72 6465 724c 696e 6b49       "orderLinkI
+00033360: 6422 3a20 226c 696e 6561 722d 3030 3422  d": "linear-004"
+00033370: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00033380: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
+00033390: 2020 2020 2020 2020 2272 6574 4578 7449          "retExtI
+000333a0: 6e66 6f22 3a20 7b7d 2c0a 2020 2020 2020  nfo": {},.      
+000333b0: 2020 2320 2020 2020 2020 2020 2274 696d    #         "tim
+000333c0: 6522 3a20 3136 3732 3231 3730 3933 3436  e": 167221709346
+000333d0: 310a 2020 2020 2020 2020 2320 2020 2020  1.        #     
+000333e0: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
+000333f0: 2020 2020 7265 7375 6c74 203d 2073 656c      result = sel
+00033400: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
+00033410: 706f 6e73 652c 2027 7265 7375 6c74 272c  ponse, 'result',
+00033420: 207b 7d29 0a20 2020 2020 2020 2072 6574   {}).        ret
+00033430: 7572 6e20 7b0a 2020 2020 2020 2020 2020  urn {.          
+00033440: 2020 2769 6e66 6f27 3a20 7265 7370 6f6e    'info': respon
+00033450: 7365 2c0a 2020 2020 2020 2020 2020 2020  se,.            
+00033460: 2769 6427 3a20 7365 6c66 2e73 6166 655f  'id': self.safe_
+00033470: 7374 7269 6e67 2872 6573 756c 742c 2027  string(result, '
+00033480: 6f72 6465 7249 6427 292c 0a20 2020 2020  orderId'),.     
+00033490: 2020 207d 0a0a 2020 2020 6465 6620 6564     }..    def ed
+000334a0: 6974 5f75 6e69 6669 6564 5f6d 6172 6769  it_unified_margi
+000334b0: 6e5f 6f72 6465 7228 7365 6c66 2c20 6964  n_order(self, id
+000334c0: 3a20 7374 722c 2073 796d 626f 6c2c 2074  : str, symbol, t
+000334d0: 7970 652c 2073 6964 652c 2061 6d6f 756e  ype, side, amoun
+000334e0: 742c 2070 7269 6365 3d4e 6f6e 652c 2070  t, price=None, p
+000334f0: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
+00033500: 2020 2073 656c 662e 6c6f 6164 5f6d 6172     self.load_mar
+00033510: 6b65 7473 2829 0a20 2020 2020 2020 206d  kets().        m
+00033520: 6172 6b65 7420 3d20 7365 6c66 2e6d 6172  arket = self.mar
+00033530: 6b65 7428 7379 6d62 6f6c 290a 2020 2020  ket(symbol).    
+00033540: 2020 2020 6966 206e 6f74 206d 6172 6b65      if not marke
+00033550: 745b 276c 696e 6561 7227 5d20 616e 6420  t['linear'] and 
+00033560: 6e6f 7420 6d61 726b 6574 5b27 6f70 7469  not market['opti
+00033570: 6f6e 275d 3a0a 2020 2020 2020 2020 2020  on']:.          
+00033580: 2020 7261 6973 6520 4e6f 7453 7570 706f    raise NotSuppo
+00033590: 7274 6564 2873 656c 662e 6964 202b 2027  rted(self.id + '
+000335a0: 2065 6469 744f 7264 6572 2064 6f65 7320   editOrder does 
+000335b0: 6e6f 7420 616c 6c6f 7720 696e 7665 7273  not allow invers
+000335c0: 6520 6d61 726b 6574 206f 7264 6572 7320  e market orders 
+000335d0: 666f 7220 2720 2b20 7379 6d62 6f6c 202b  for ' + symbol +
+000335e0: 2027 206d 6172 6b65 7473 2729 0a20 2020   ' markets').   
+000335f0: 2020 2020 206c 6f77 6572 4361 7365 5479       lowerCaseTy
+00033600: 7065 203d 2074 7970 652e 6c6f 7765 7228  pe = type.lower(
+00033610: 290a 2020 2020 2020 2020 6966 2028 7072  ).        if (pr
+00033620: 6963 6520 6973 204e 6f6e 6529 2061 6e64  ice is None) and
+00033630: 2028 6c6f 7765 7243 6173 6554 7970 6520   (lowerCaseType 
+00033640: 3d3d 2027 6c69 6d69 7427 293a 0a20 2020  == 'limit'):.   
+00033650: 2020 2020 2020 2020 2072 6169 7365 2041           raise A
+00033660: 7267 756d 656e 7473 5265 7175 6972 6564  rgumentsRequired
+00033670: 2873 656c 662e 6964 202b 2027 2065 6469  (self.id + ' edi
+00033680: 744f 7264 6572 2072 6571 7569 7265 7320  tOrder requires 
+00033690: 6120 7072 6963 6520 6172 6775 6d65 6e74  a price argument
+000336a0: 2066 6f72 206c 696d 6974 206f 7264 6572   for limit order
+000336b0: 7327 290a 2020 2020 2020 2020 7265 7175  s').        requ
+000336c0: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
+000336d0: 2020 2020 276f 7264 6572 4964 273a 2069      'orderId': i
+000336e0: 642c 0a20 2020 2020 2020 2020 2020 2027  d,.            '
+000336f0: 7379 6d62 6f6c 273a 206d 6172 6b65 745b  symbol': market[
+00033700: 2769 6427 5d2c 0a20 2020 2020 2020 2020  'id'],.         
+00033710: 2020 2027 7369 6465 273a 2073 656c 662e     'side': self.
+00033720: 6361 7069 7461 6c69 7a65 2873 6964 6529  capitalize(side)
+00033730: 2c0a 2020 2020 2020 2020 2020 2020 276f  ,.            'o
+00033740: 7264 6572 5479 7065 273a 2073 656c 662e  rderType': self.
+00033750: 6361 7069 7461 6c69 7a65 286c 6f77 6572  capitalize(lower
+00033760: 4361 7365 5479 7065 292c 2020 2320 6c69  CaseType),  # li
+00033770: 6d69 7420 6f72 206d 6172 6b65 740a 2020  mit or market.  
+00033780: 2020 2020 2020 2020 2020 2774 696d 6549            'timeI
+00033790: 6e46 6f72 6365 273a 2027 476f 6f64 5469  nForce': 'GoodTi
+000337a0: 6c6c 4361 6e63 656c 272c 2020 2320 496d  llCancel',  # Im
+000337b0: 6d65 6469 6174 654f 7243 616e 6365 6c2c  mediateOrCancel,
+000337c0: 2046 696c 6c4f 724b 696c 6c2c 2050 6f73   FillOrKill, Pos
+000337d0: 744f 6e6c 790a 2020 2020 2020 2020 2020  tOnly.          
+000337e0: 2020 2771 7479 273a 2073 656c 662e 616d    'qty': self.am
+000337f0: 6f75 6e74 5f74 6f5f 7072 6563 6973 696f  ount_to_precisio
+00033800: 6e28 7379 6d62 6f6c 2c20 616d 6f75 6e74  n(symbol, amount
+00033810: 292c 0a20 2020 2020 2020 2020 2020 2023  ),.            #
+00033820: 2027 7461 6b65 5072 6f66 6974 273a 2031   'takeProfit': 1
+00033830: 3233 2e34 352c 2020 2320 7461 6b65 2070  23.45,  # take p
+00033840: 726f 6669 7420 7072 6963 652c 206f 6e6c  rofit price, onl
+00033850: 7920 7461 6b65 2065 6666 6563 7420 7570  y take effect up
+00033860: 6f6e 206f 7065 6e69 6e67 2074 6865 2070  on opening the p
+00033870: 6f73 6974 696f 6e0a 2020 2020 2020 2020  osition.        
+00033880: 2020 2020 2320 2773 746f 704c 6f73 7327      # 'stopLoss'
+00033890: 3a20 3132 332e 3435 2c20 2023 2073 746f  : 123.45,  # sto
+000338a0: 7020 6c6f 7373 2070 7269 6365 2c20 6f6e  p loss price, on
+000338b0: 6c79 2074 616b 6520 6566 6665 6374 2075  ly take effect u
+000338c0: 706f 6e20 6f70 656e 696e 6720 7468 6520  pon opening the 
+000338d0: 706f 7369 7469 6f6e 0a20 2020 2020 2020  position.       
+000338e0: 2020 2020 2023 2027 6f72 6465 724c 696e       # 'orderLin
+000338f0: 6b49 6427 3a20 2773 7472 696e 6727 2c20  kId': 'string', 
+00033900: 2023 2075 6e69 7175 6520 636c 6965 6e74   # unique client
+00033910: 206f 7264 6572 2069 642c 206d 6178 2033   order id, max 3
+00033920: 3620 6368 6172 6163 7465 7273 0a20 2020  6 characters.   
+00033930: 2020 2020 2020 2020 2023 2027 7472 6967           # 'trig
+00033940: 6765 7250 7269 6365 273a 2031 3233 2e34  gerPrice': 123.4
+00033950: 352c 2020 2320 7472 6967 6765 7220 7072  5,  # trigger pr
+00033960: 6963 652c 2072 6571 7569 7265 6420 666f  ice, required fo
+00033970: 7220 636f 6e64 6974 696f 6e61 6c20 6f72  r conditional or
+00033980: 6465 7273 0a20 2020 2020 2020 2020 2020  ders.           
+00033990: 2023 2027 7472 6967 6765 7242 7927 3a20   # 'triggerBy': 
+000339a0: 274d 6172 6b50 7269 6365 272c 2020 2320  'MarkPrice',  # 
+000339b0: 496e 6465 7850 7269 6365 2c20 4d61 726b  IndexPrice, Mark
+000339c0: 5072 6963 650a 2020 2020 2020 2020 2020  Price.          
+000339d0: 2020 2320 2774 7074 7269 6767 6572 6279    # 'tptriggerby
+000339e0: 273a 2027 4d61 726b 5072 6963 6527 2c20  ': 'MarkPrice', 
+000339f0: 2023 2049 6e64 6578 5072 6963 652c 204d   # IndexPrice, M
+00033a00: 6172 6b50 7269 6365 0a20 2020 2020 2020  arkPrice.       
+00033a10: 2020 2020 2023 2027 736c 5472 6967 6765       # 'slTrigge
+00033a20: 7242 7927 3a20 274d 6172 6b50 7269 6365  rBy': 'MarkPrice
+00033a30: 272c 2020 2320 496e 6465 7850 7269 6365  ',  # IndexPrice
+00033a40: 2c20 4d61 726b 5072 6963 650a 2020 2020  , MarkPrice.    
+00033a50: 2020 2020 2020 2020 2320 2769 7627 3a20          # 'iv': 
+00033a60: 2730 272c 2020 2320 496d 706c 6965 6420  '0',  # Implied 
+00033a70: 766f 6c61 7469 6c69 7479 2c20 666f 7220  volatility, for 
+00033a80: 6f70 7469 6f6e 7320 6f6e 6c79 3b20 7061  options only; pa
+00033a90: 7261 6d65 7465 7273 2061 7265 2070 6173  rameters are pas
+00033aa0: 7365 6420 6163 636f 7264 696e 6720 746f  sed according to
+00033ab0: 2074 6865 2072 6561 6c20 7661 6c75 653b   the real value;
+00033ac0: 2066 6f72 2065 7861 6d70 6c65 2c20 666f   for example, fo
+00033ad0: 7220 3130 252c 2030 2e31 2069 7320 7061  r 10%, 0.1 is pa
+00033ae0: 7373 6564 0a20 2020 2020 2020 207d 0a20  ssed.        }. 
+00033af0: 2020 2020 2020 2069 6620 6d61 726b 6574         if market
+00033b00: 5b27 6c69 6e65 6172 275d 3a0a 2020 2020  ['linear']:.    
+00033b10: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+00033b20: 2763 6174 6567 6f72 7927 5d20 3d20 276c  'category'] = 'l
+00033b30: 696e 6561 7227 0a20 2020 2020 2020 2065  inear'.        e
+00033b40: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00033b50: 2072 6571 7565 7374 5b27 6361 7465 676f   request['catego
+00033b60: 7279 275d 203d 2027 6f70 7469 6f6e 270a  ry'] = 'option'.
+00033b70: 2020 2020 2020 2020 6973 4d61 726b 6574          isMarket
+00033b80: 203d 206c 6f77 6572 4361 7365 5479 7065   = lowerCaseType
+00033b90: 203d 3d20 276d 6172 6b65 7427 0a20 2020   == 'market'.   
+00033ba0: 2020 2020 2069 734c 696d 6974 203d 206c       isLimit = l
+00033bb0: 6f77 6572 4361 7365 5479 7065 203d 3d20  owerCaseType == 
+00033bc0: 276c 696d 6974 270a 2020 2020 2020 2020  'limit'.        
+00033bd0: 6966 2069 734c 696d 6974 3a0a 2020 2020  if isLimit:.    
+00033be0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+00033bf0: 2770 7269 6365 275d 203d 2073 656c 662e  'price'] = self.
+00033c00: 7072 6963 655f 746f 5f70 7265 6369 7369  price_to_precisi
+00033c10: 6f6e 2873 796d 626f 6c2c 2070 7269 6365  on(symbol, price
+00033c20: 290a 2020 2020 2020 2020 6578 6368 616e  ).        exchan
+00033c30: 6765 5370 6563 6966 6963 5061 7261 6d20  geSpecificParam 
+00033c40: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+00033c50: 6e67 2870 6172 616d 732c 2027 7469 6d65  ng(params, 'time
+00033c60: 5f69 6e5f 666f 7263 6527 290a 2020 2020  _in_force').    
+00033c70: 2020 2020 7469 6d65 496e 466f 7263 6520      timeInForce 
+00033c80: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+00033c90: 6e67 5f6c 6f77 6572 2870 6172 616d 732c  ng_lower(params,
+00033ca0: 2027 7469 6d65 496e 466f 7263 6527 290a   'timeInForce').
+00033cb0: 2020 2020 2020 2020 706f 7374 4f6e 6c79          postOnly
+00033cc0: 203d 2073 656c 662e 6973 5f70 6f73 745f   = self.is_post_
+00033cd0: 6f6e 6c79 2869 734d 6172 6b65 742c 2065  only(isMarket, e
+00033ce0: 7863 6861 6e67 6553 7065 6369 6669 6350  xchangeSpecificP
+00033cf0: 6172 616d 203d 3d20 2750 6f73 744f 6e6c  aram == 'PostOnl
+00033d00: 7927 2c20 7061 7261 6d73 290a 2020 2020  y', params).    
+00033d10: 2020 2020 6966 2070 6f73 744f 6e6c 793a      if postOnly:
+00033d20: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+00033d30: 7565 7374 5b27 7469 6d65 496e 466f 7263  uest['timeInForc
+00033d40: 6527 5d20 3d20 2750 6f73 744f 6e6c 7927  e'] = 'PostOnly'
+00033d50: 0a20 2020 2020 2020 2065 6c69 6620 7469  .        elif ti
+00033d60: 6d65 496e 466f 7263 6520 3d3d 2027 6774  meInForce == 'gt
+00033d70: 6327 3a0a 2020 2020 2020 2020 2020 2020  c':.            
+00033d80: 7265 7175 6573 745b 2774 696d 6549 6e46  request['timeInF
+00033d90: 6f72 6365 275d 203d 2027 476f 6f64 5469  orce'] = 'GoodTi
+00033da0: 6c6c 4361 6e63 656c 270a 2020 2020 2020  llCancel'.      
+00033db0: 2020 656c 6966 2074 696d 6549 6e46 6f72    elif timeInFor
+00033dc0: 6365 203d 3d20 2766 6f6b 273a 0a20 2020  ce == 'fok':.   
+00033dd0: 2020 2020 2020 2020 2072 6571 7565 7374           request
+00033de0: 5b27 7469 6d65 496e 466f 7263 6527 5d20  ['timeInForce'] 
+00033df0: 3d20 2746 696c 6c4f 724b 696c 6c27 0a20  = 'FillOrKill'. 
+00033e00: 2020 2020 2020 2065 6c69 6620 7469 6d65         elif time
+00033e10: 496e 466f 7263 6520 3d3d 2027 696f 6327  InForce == 'ioc'
+00033e20: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00033e30: 7175 6573 745b 2774 696d 6549 6e46 6f72  quest['timeInFor
+00033e40: 6365 275d 203d 2027 496d 6d65 6469 6174  ce'] = 'Immediat
+00033e50: 654f 7243 616e 6365 6c27 0a20 2020 2020  eOrCancel'.     
+00033e60: 2020 2074 7269 6767 6572 5072 6963 6520     triggerPrice 
+00033e70: 3d20 7365 6c66 2e73 6166 655f 6e75 6d62  = self.safe_numb
+00033e80: 6572 5f32 2870 6172 616d 732c 2027 7472  er_2(params, 'tr
+00033e90: 6967 6765 7250 7269 6365 272c 2027 7374  iggerPrice', 'st
+00033ea0: 6f70 5072 6963 6527 290a 2020 2020 2020  opPrice').      
+00033eb0: 2020 7374 6f70 4c6f 7373 5472 6967 6765    stopLossTrigge
+00033ec0: 7250 7269 6365 203d 2073 656c 662e 7361  rPrice = self.sa
+00033ed0: 6665 5f6e 756d 6265 7228 7061 7261 6d73  fe_number(params
+00033ee0: 2c20 2773 746f 704c 6f73 7350 7269 6365  , 'stopLossPrice
+00033ef0: 2729 0a20 2020 2020 2020 2074 616b 6550  ').        takeP
+00033f00: 726f 6669 7454 7269 6767 6572 5072 6963  rofitTriggerPric
+00033f10: 6520 3d20 7365 6c66 2e73 6166 655f 6e75  e = self.safe_nu
+00033f20: 6d62 6572 2870 6172 616d 732c 2027 7461  mber(params, 'ta
+00033f30: 6b65 5072 6f66 6974 5072 6963 6527 290a  keProfitPrice').
+00033f40: 2020 2020 2020 2020 7374 6f70 4c6f 7373          stopLoss
+00033f50: 203d 2073 656c 662e 7361 6665 5f6e 756d   = self.safe_num
+00033f60: 6265 7228 7061 7261 6d73 2c20 2773 746f  ber(params, 'sto
+00033f70: 704c 6f73 7327 290a 2020 2020 2020 2020  pLoss').        
+00033f80: 7461 6b65 5072 6f66 6974 203d 2073 656c  takeProfit = sel
+00033f90: 662e 7361 6665 5f6e 756d 6265 7228 7061  f.safe_number(pa
+00033fa0: 7261 6d73 2c20 2774 616b 6550 726f 6669  rams, 'takeProfi
+00033fb0: 7427 290a 2020 2020 2020 2020 6973 5374  t').        isSt
+00033fc0: 6f70 4c6f 7373 5472 6967 6765 724f 7264  opLossTriggerOrd
+00033fd0: 6572 203d 2073 746f 704c 6f73 7354 7269  er = stopLossTri
+00033fe0: 6767 6572 5072 6963 6520 6973 206e 6f74  ggerPrice is not
+00033ff0: 204e 6f6e 650a 2020 2020 2020 2020 6973   None.        is
+00034000: 5461 6b65 5072 6f66 6974 5472 6967 6765  TakeProfitTrigge
+00034010: 724f 7264 6572 203d 2074 616b 6550 726f  rOrder = takePro
+00034020: 6669 7454 7269 6767 6572 5072 6963 6520  fitTriggerPrice 
+00034030: 6973 206e 6f74 204e 6f6e 650a 2020 2020  is not None.    
+00034040: 2020 2020 6973 5374 6f70 4c6f 7373 203d      isStopLoss =
+00034050: 2073 746f 704c 6f73 7320 6973 206e 6f74   stopLoss is not
+00034060: 204e 6f6e 650a 2020 2020 2020 2020 6973   None.        is
+00034070: 5461 6b65 5072 6f66 6974 203d 2074 616b  TakeProfit = tak
+00034080: 6550 726f 6669 7420 6973 206e 6f74 204e  eProfit is not N
+00034090: 6f6e 650a 2020 2020 2020 2020 6966 2069  one.        if i
+000340a0: 7353 746f 704c 6f73 7354 7269 6767 6572  sStopLossTrigger
+000340b0: 4f72 6465 7220 6f72 2069 7354 616b 6550  Order or isTakeP
+000340c0: 726f 6669 7454 7269 6767 6572 4f72 6465  rofitTriggerOrde
+000340d0: 723a 0a20 2020 2020 2020 2020 2020 2074  r:.            t
+000340e0: 7269 6767 6572 5072 6963 6520 3d20 7374  riggerPrice = st
+000340f0: 6f70 4c6f 7373 5472 6967 6765 7250 7269  opLossTriggerPri
+00034100: 6365 2069 6620 6973 5374 6f70 4c6f 7373  ce if isStopLoss
+00034110: 5472 6967 6765 724f 7264 6572 2065 6c73  TriggerOrder els
+00034120: 6520 7461 6b65 5072 6f66 6974 5472 6967  e takeProfitTrig
+00034130: 6765 7250 7269 6365 0a20 2020 2020 2020  gerPrice.       
+00034140: 2069 6620 7472 6967 6765 7250 7269 6365   if triggerPrice
+00034150: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00034160: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+00034170: 745b 2774 7269 6767 6572 5072 6963 6527  t['triggerPrice'
+00034180: 5d20 3d20 7365 6c66 2e70 7269 6365 5f74  ] = self.price_t
+00034190: 6f5f 7072 6563 6973 696f 6e28 7379 6d62  o_precision(symb
+000341a0: 6f6c 2c20 7472 6967 6765 7250 7269 6365  ol, triggerPrice
+000341b0: 290a 2020 2020 2020 2020 6966 2069 7353  ).        if isS
+000341c0: 746f 704c 6f73 7320 6f72 2069 7354 616b  topLoss or isTak
+000341d0: 6550 726f 6669 743a 0a20 2020 2020 2020  eProfit:.       
+000341e0: 2020 2020 2069 6620 6973 5374 6f70 4c6f       if isStopLo
+000341f0: 7373 3a0a 2020 2020 2020 2020 2020 2020  ss:.            
+00034200: 2020 2020 7265 7175 6573 745b 2773 746f      request['sto
+00034210: 704c 6f73 7327 5d20 3d20 7365 6c66 2e70  pLoss'] = self.p
+00034220: 7269 6365 5f74 6f5f 7072 6563 6973 696f  rice_to_precisio
+00034230: 6e28 7379 6d62 6f6c 2c20 7374 6f70 4c6f  n(symbol, stopLo
+00034240: 7373 290a 2020 2020 2020 2020 2020 2020  ss).            
+00034250: 6966 2069 7354 616b 6550 726f 6669 743a  if isTakeProfit:
+00034260: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00034270: 2072 6571 7565 7374 5b27 7461 6b65 5072   request['takePr
+00034280: 6f66 6974 275d 203d 2073 656c 662e 7072  ofit'] = self.pr
+00034290: 6963 655f 746f 5f70 7265 6369 7369 6f6e  ice_to_precision
+000342a0: 2873 796d 626f 6c2c 2074 616b 6550 726f  (symbol, takePro
+000342b0: 6669 7429 0a20 2020 2020 2020 2063 6c69  fit).        cli
+000342c0: 656e 744f 7264 6572 4964 203d 2073 656c  entOrderId = sel
+000342d0: 662e 7361 6665 5f73 7472 696e 6728 7061  f.safe_string(pa
+000342e0: 7261 6d73 2c20 2763 6c69 656e 744f 7264  rams, 'clientOrd
+000342f0: 6572 4964 2729 0a20 2020 2020 2020 2069  erId').        i
+00034300: 6620 636c 6965 6e74 4f72 6465 7249 6420  f clientOrderId 
+00034310: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00034320: 2020 2020 2020 2020 2072 6571 7565 7374           request
+00034330: 5b27 6f72 6465 724c 696e 6b49 6427 5d20  ['orderLinkId'] 
+00034340: 3d20 636c 6965 6e74 4f72 6465 7249 640a  = clientOrderId.
+00034350: 2020 2020 2020 2020 7061 7261 6d73 203d          params =
+00034360: 2073 656c 662e 6f6d 6974 2870 6172 616d   self.omit(param
+00034370: 732c 205b 2773 746f 7050 7269 6365 272c  s, ['stopPrice',
+00034380: 2027 7469 6d65 496e 466f 7263 6527 2c20   'timeInForce', 
+00034390: 2774 7269 6767 6572 5072 6963 6527 2c20  'triggerPrice', 
+000343a0: 2773 746f 704c 6f73 7350 7269 6365 272c  'stopLossPrice',
+000343b0: 2027 7461 6b65 5072 6f66 6974 5072 6963   'takeProfitPric
+000343c0: 6527 2c20 2770 6f73 744f 6e6c 7927 2c20  e', 'postOnly', 
+000343d0: 2763 6c69 656e 744f 7264 6572 4964 272c  'clientOrderId',
+000343e0: 2027 7374 6f70 4c6f 7373 272c 2027 7461   'stopLoss', 'ta
+000343f0: 6b65 5072 6f66 6974 275d 290a 2020 2020  keProfit']).    
+00034400: 2020 2020 7265 7370 6f6e 7365 203d 2073      response = s
+00034410: 656c 662e 7072 6976 6174 6550 6f73 7455  elf.privatePostU
+00034420: 6e69 6669 6564 5633 5072 6976 6174 654f  nifiedV3PrivateO
+00034430: 7264 6572 5265 706c 6163 6528 7365 6c66  rderReplace(self
+00034440: 2e65 7874 656e 6428 7265 7175 6573 742c  .extend(request,
+00034450: 2070 6172 616d 7329 290a 2020 2020 2020   params)).      
+00034460: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
+00034470: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+00034480: 2020 2020 2020 2272 6574 436f 6465 223a        "retCode":
+00034490: 2030 2c0a 2020 2020 2020 2020 2320 2020   0,.        #   
+000344a0: 2020 2020 2020 2272 6574 4d73 6722 3a20        "retMsg": 
+000344b0: 224f 4b22 2c0a 2020 2020 2020 2020 2320  "OK",.        # 
+000344c0: 2020 2020 2020 2020 2272 6573 756c 7422          "result"
+000344d0: 3a20 7b0a 2020 2020 2020 2020 2320 2020  : {.        #   
+000344e0: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+000344f0: 4964 223a 2022 3432 6338 3664 3636 3333  Id": "42c86d6633
+00034500: 3165 3431 3939 3864 3132 6332 3434 3063  1e41998d12c2440c
+00034510: 6539 3063 3161 222c 0a20 2020 2020 2020  e90c1a",.       
+00034520: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00034530: 6f72 6465 724c 696e 6b49 6422 3a20 2265  orderLinkId": "e
+00034540: 3830 6435 3538 652d 6564 220a 2020 2020  80d558e-ed".    
+00034550: 2020 2020 2320 2020 2020 2020 2020 7d0a      #         }.
+00034560: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
+00034570: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+00034580: 2020 6f72 6465 7220 3d20 7365 6c66 2e73    order = self.s
+00034590: 6166 655f 7661 6c75 6528 7265 7370 6f6e  afe_value(respon
+000345a0: 7365 2c20 2772 6573 756c 7427 2c20 7b7d  se, 'result', {}
+000345b0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+000345c0: 2073 656c 662e 7061 7273 655f 6f72 6465   self.parse_orde
+000345d0: 7228 6f72 6465 7229 0a0a 2020 2020 6465  r(order)..    de
+000345e0: 6620 6564 6974 5f63 6f6e 7472 6163 745f  f edit_contract_
+000345f0: 7633 5f6f 7264 6572 2873 656c 662c 2069  v3_order(self, i
+00034600: 643a 2073 7472 2c20 7379 6d62 6f6c 2c20  d: str, symbol, 
+00034610: 7479 7065 2c20 7369 6465 2c20 616d 6f75  type, side, amou
+00034620: 6e74 3d4e 6f6e 652c 2070 7269 6365 3d4e  nt=None, price=N
+00034630: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
+00034640: 0a20 2020 2020 2020 2073 656c 662e 6c6f  .        self.lo
+00034650: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
+00034660: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
+00034670: 6c66 2e6d 6172 6b65 7428 7379 6d62 6f6c  lf.market(symbol
+00034680: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
+00034690: 7420 3d20 7b0a 2020 2020 2020 2020 2020  t = {.          
+000346a0: 2020 2773 796d 626f 6c27 3a20 6d61 726b    'symbol': mark
+000346b0: 6574 5b27 6964 275d 2c0a 2020 2020 2020  et['id'],.      
+000346c0: 2020 2020 2020 276f 7264 6572 4964 273a        'orderId':
+000346d0: 2069 642c 0a20 2020 2020 2020 2020 2020   id,.           
+000346e0: 2027 7174 7927 3a20 7365 6c66 2e61 6d6f   'qty': self.amo
+000346f0: 756e 745f 746f 5f70 7265 6369 7369 6f6e  unt_to_precision
+00034700: 2873 796d 626f 6c2c 2061 6d6f 756e 7429  (symbol, amount)
+00034710: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+00034720: 276f 7264 6572 4c69 6e6b 4964 273a 2027  'orderLinkId': '
+00034730: 272c 2020 2320 5573 6572 2063 7573 746f  ',  # User custo
+00034740: 6d69 7365 6420 6f72 6465 7220 6964 2e20  mised order id. 
+00034750: 4569 7468 6572 206f 7264 6572 4964 206f  Either orderId o
+00034760: 7220 6f72 6465 724c 696e 6b49 6420 6973  r orderLinkId is
+00034770: 2072 6571 7569 7265 640a 2020 2020 2020   required.      
+00034780: 2020 2020 2020 2320 2774 7269 6767 6572        # 'trigger
+00034790: 5072 6963 6527 3a20 2727 2c20 2023 2054  Price': '',  # T
+000347a0: 7269 6767 6572 2070 7269 6365 2e20 446f  rigger price. Do
+000347b0: 6e27 7420 7061 7373 2069 7420 6966 206e  n't pass it if n
+000347c0: 6f74 206d 6f64 6966 7920 7468 6520 7174  ot modify the qt
+000347d0: 790a 2020 2020 2020 2020 2020 2020 2320  y.            # 
+000347e0: 2774 616b 6550 726f 6669 7427 3a20 2727  'takeProfit': ''
+000347f0: 2c20 2023 2054 616b 6520 7072 6f66 6974  ,  # Take profit
+00034800: 2070 7269 6365 2061 6674 6572 206d 6f64   price after mod
+00034810: 6966 6963 6174 696f 6e2e 2044 6f6e 2774  ification. Don't
+00034820: 2070 6173 7320 6974 2069 6620 6e6f 7420   pass it if not 
+00034830: 6d6f 6469 6679 2074 6865 2074 616b 6520  modify the take 
+00034840: 7072 6f66 6974 0a20 2020 2020 2020 2020  profit.         
+00034850: 2020 2023 2027 7374 6f70 4c6f 7373 273a     # 'stopLoss':
+00034860: 2027 272c 2020 2320 5374 6f70 206c 6f73   '',  # Stop los
+00034870: 7320 7072 6963 6520 6166 7465 7220 6d6f  s price after mo
+00034880: 6469 6669 6361 7469 6f6e 2e20 446f 6e27  dification. Don'
+00034890: 7420 7061 7373 2069 7420 6966 206e 6f74  t pass it if not
+000348a0: 206d 6f64 6966 7920 7468 6520 5374 6f70   modify the Stop
+000348b0: 206c 6f73 730a 2020 2020 2020 2020 2020   loss.          
+000348c0: 2020 2320 2774 7054 7269 6767 6572 4279    # 'tpTriggerBy
+000348d0: 273a 2027 272c 2020 2320 5468 6520 7072  ': '',  # The pr
+000348e0: 6963 6520 7479 7065 2074 6f20 7472 6967  ice type to trig
+000348f0: 6765 7220 7461 6b65 2070 726f 6669 742e  ger take profit.
+00034900: 2057 6865 6e20 7365 7420 6120 7461 6b65   When set a take
+00034910: 2070 726f 6669 742c 2073 656c 6620 7061   profit, self pa
+00034920: 7261 6d20 6973 2072 6571 7569 7265 6420  ram is required 
+00034930: 6966 206e 6f20 696e 6974 6961 6c20 7661  if no initial va
+00034940: 6c75 6520 666f 7220 7468 6520 6f72 6465  lue for the orde
+00034950: 720a 2020 2020 2020 2020 2020 2020 2320  r.            # 
+00034960: 2773 6c54 7269 6767 6572 4279 273a 2027  'slTriggerBy': '
+00034970: 272c 2020 2320 5468 6520 7072 6963 6520  ',  # The price 
+00034980: 7479 7065 2074 6f20 7472 6967 6765 7220  type to trigger 
+00034990: 7374 6f70 206c 6f73 732e 2057 6865 6e20  stop loss. When 
+000349a0: 7365 7420 6120 7374 6f70 206c 6f73 732c  set a stop loss,
+000349b0: 2073 656c 6620 7061 7261 6d20 6973 2072   self param is r
+000349c0: 6571 7569 7265 6420 6966 206e 6f20 696e  equired if no in
+000349d0: 6974 6961 6c20 7661 6c75 6520 666f 7220  itial value for 
+000349e0: 7468 6520 6f72 6465 720a 2020 2020 2020  the order.      
+000349f0: 2020 2020 2020 2320 2774 7269 6767 6572        # 'trigger
+00034a00: 4279 273a 2027 272c 2020 2320 5472 6967  By': '',  # Trig
+00034a10: 6765 7220 7072 6963 6520 7479 7065 2e20  ger price type. 
+00034a20: 4c61 7374 5072 6963 652c 2049 6e64 6578  LastPrice, Index
+00034a30: 5072 6963 652c 204d 6172 6b50 7269 6365  Price, MarkPrice
+00034a40: 2c20 4c61 7374 5072 6963 650a 2020 2020  , LastPrice.    
+00034a50: 2020 2020 7d0a 2020 2020 2020 2020 6966      }.        if
+00034a60: 2070 7269 6365 2069 7320 6e6f 7420 4e6f   price is not No
+00034a70: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+00034a80: 7265 7175 6573 745b 2770 7269 6365 275d  request['price']
+00034a90: 203d 2073 656c 662e 7072 6963 655f 746f   = self.price_to
+00034aa0: 5f70 7265 6369 7369 6f6e 2873 796d 626f  _precision(symbo
+00034ab0: 6c2c 2070 7269 6365 290a 2020 2020 2020  l, price).      
+00034ac0: 2020 7472 6967 6765 7250 7269 6365 203d    triggerPrice =
+00034ad0: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
+00034ae0: 725f 3228 7061 7261 6d73 2c20 2774 7269  r_2(params, 'tri
+00034af0: 6767 6572 5072 6963 6527 2c20 2773 746f  ggerPrice', 'sto
+00034b00: 7050 7269 6365 2729 0a20 2020 2020 2020  pPrice').       
+00034b10: 2073 746f 704c 6f73 7354 7269 6767 6572   stopLossTrigger
+00034b20: 5072 6963 6520 3d20 7365 6c66 2e73 6166  Price = self.saf
+00034b30: 655f 6e75 6d62 6572 2870 6172 616d 732c  e_number(params,
+00034b40: 2027 7374 6f70 4c6f 7373 5072 6963 6527   'stopLossPrice'
+00034b50: 290a 2020 2020 2020 2020 7461 6b65 5072  ).        takePr
+00034b60: 6f66 6974 5472 6967 6765 7250 7269 6365  ofitTriggerPrice
+00034b70: 203d 2073 656c 662e 7361 6665 5f6e 756d   = self.safe_num
+00034b80: 6265 7228 7061 7261 6d73 2c20 2774 616b  ber(params, 'tak
+00034b90: 6550 726f 6669 7450 7269 6365 2729 0a20  eProfitPrice'). 
+00034ba0: 2020 2020 2020 2073 746f 704c 6f73 7320         stopLoss 
+00034bb0: 3d20 7365 6c66 2e73 6166 655f 6e75 6d62  = self.safe_numb
+00034bc0: 6572 2870 6172 616d 732c 2027 7374 6f70  er(params, 'stop
+00034bd0: 4c6f 7373 2729 0a20 2020 2020 2020 2074  Loss').        t
+00034be0: 616b 6550 726f 6669 7420 3d20 7365 6c66  akeProfit = self
+00034bf0: 2e73 6166 655f 6e75 6d62 6572 2870 6172  .safe_number(par
+00034c00: 616d 732c 2027 7461 6b65 5072 6f66 6974  ams, 'takeProfit
+00034c10: 2729 0a20 2020 2020 2020 2069 7353 746f  ').        isSto
+00034c20: 704c 6f73 7354 7269 6767 6572 4f72 6465  pLossTriggerOrde
+00034c30: 7220 3d20 7374 6f70 4c6f 7373 5472 6967  r = stopLossTrig
+00034c40: 6765 7250 7269 6365 2069 7320 6e6f 7420  gerPrice is not 
+00034c50: 4e6f 6e65 0a20 2020 2020 2020 2069 7354  None.        isT
+00034c60: 616b 6550 726f 6669 7454 7269 6767 6572  akeProfitTrigger
+00034c70: 4f72 6465 7220 3d20 7461 6b65 5072 6f66  Order = takeProf
+00034c80: 6974 5472 6967 6765 7250 7269 6365 2069  itTriggerPrice i
+00034c90: 7320 6e6f 7420 4e6f 6e65 0a20 2020 2020  s not None.     
+00034ca0: 2020 2069 7353 746f 704c 6f73 7320 3d20     isStopLoss = 
+00034cb0: 7374 6f70 4c6f 7373 2069 7320 6e6f 7420  stopLoss is not 
+00034cc0: 4e6f 6e65 0a20 2020 2020 2020 2069 7354  None.        isT
+00034cd0: 616b 6550 726f 6669 7420 3d20 7461 6b65  akeProfit = take
+00034ce0: 5072 6f66 6974 2069 7320 6e6f 7420 4e6f  Profit is not No
+00034cf0: 6e65 0a20 2020 2020 2020 2069 6620 6973  ne.        if is
+00034d00: 5374 6f70 4c6f 7373 5472 6967 6765 724f  StopLossTriggerO
+00034d10: 7264 6572 206f 7220 6973 5461 6b65 5072  rder or isTakePr
+00034d20: 6f66 6974 5472 6967 6765 724f 7264 6572  ofitTriggerOrder
+00034d30: 3a0a 2020 2020 2020 2020 2020 2020 7472  :.            tr
+00034d40: 6967 6765 7250 7269 6365 203d 2073 746f  iggerPrice = sto
+00034d50: 704c 6f73 7354 7269 6767 6572 5072 6963  pLossTriggerPric
+00034d60: 6520 6966 2069 7353 746f 704c 6f73 7354  e if isStopLossT
+00034d70: 7269 6767 6572 4f72 6465 7220 656c 7365  riggerOrder else
+00034d80: 2074 616b 6550 726f 6669 7454 7269 6767   takeProfitTrigg
+00034d90: 6572 5072 6963 650a 2020 2020 2020 2020  erPrice.        
+00034da0: 6966 2074 7269 6767 6572 5072 6963 6520  if triggerPrice 
+00034db0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00034dc0: 2020 2020 2020 2020 2072 6571 7565 7374           request
+00034dd0: 5b27 7472 6967 6765 7250 7269 6365 275d  ['triggerPrice']
+00034de0: 203d 2073 656c 662e 7072 6963 655f 746f   = self.price_to
+00034df0: 5f70 7265 6369 7369 6f6e 2873 796d 626f  _precision(symbo
+00034e00: 6c2c 2074 7269 6767 6572 5072 6963 6529  l, triggerPrice)
+00034e10: 0a20 2020 2020 2020 2069 6620 6973 5374  .        if isSt
+00034e20: 6f70 4c6f 7373 206f 7220 6973 5461 6b65  opLoss or isTake
+00034e30: 5072 6f66 6974 3a0a 2020 2020 2020 2020  Profit:.        
+00034e40: 2020 2020 6966 2069 7353 746f 704c 6f73      if isStopLos
+00034e50: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
+00034e60: 2020 2072 6571 7565 7374 5b27 7374 6f70     request['stop
+00034e70: 4c6f 7373 275d 203d 2073 656c 662e 7072  Loss'] = self.pr
+00034e80: 6963 655f 746f 5f70 7265 6369 7369 6f6e  ice_to_precision
+00034e90: 2873 796d 626f 6c2c 2073 746f 704c 6f73  (symbol, stopLos
+00034ea0: 7329 0a20 2020 2020 2020 2020 2020 2069  s).            i
+00034eb0: 6620 6973 5461 6b65 5072 6f66 6974 3a0a  f isTakeProfit:.
+00034ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034ed0: 7265 7175 6573 745b 2774 616b 6550 726f  request['takePro
+00034ee0: 6669 7427 5d20 3d20 7365 6c66 2e70 7269  fit'] = self.pri
+00034ef0: 6365 5f74 6f5f 7072 6563 6973 696f 6e28  ce_to_precision(
+00034f00: 7379 6d62 6f6c 2c20 7461 6b65 5072 6f66  symbol, takeProf
+00034f10: 6974 290a 2020 2020 2020 2020 636c 6965  it).        clie
+00034f20: 6e74 4f72 6465 7249 6420 3d20 7365 6c66  ntOrderId = self
+00034f30: 2e73 6166 655f 7374 7269 6e67 2870 6172  .safe_string(par
+00034f40: 616d 732c 2027 636c 6965 6e74 4f72 6465  ams, 'clientOrde
+00034f50: 7249 6427 290a 2020 2020 2020 2020 6966  rId').        if
+00034f60: 2063 6c69 656e 744f 7264 6572 4964 2069   clientOrderId i
+00034f70: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00034f80: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+00034f90: 276f 7264 6572 4c69 6e6b 4964 275d 203d  'orderLinkId'] =
+00034fa0: 2063 6c69 656e 744f 7264 6572 4964 0a20   clientOrderId. 
+00034fb0: 2020 2020 2020 2070 6172 616d 7320 3d20         params = 
+00034fc0: 7365 6c66 2e6f 6d69 7428 7061 7261 6d73  self.omit(params
+00034fd0: 2c20 5b27 7374 6f70 5072 6963 6527 2c20  , ['stopPrice', 
+00034fe0: 2773 746f 704c 6f73 7350 7269 6365 272c  'stopLossPrice',
+00034ff0: 2027 7461 6b65 5072 6f66 6974 5072 6963   'takeProfitPric
+00035000: 6527 2c20 2774 7269 6767 6572 5072 6963  e', 'triggerPric
+00035010: 6527 2c20 2763 6c69 656e 744f 7264 6572  e', 'clientOrder
+00035020: 4964 272c 2027 7374 6f70 4c6f 7373 272c  Id', 'stopLoss',
+00035030: 2027 7461 6b65 5072 6f66 6974 275d 290a   'takeProfit']).
+00035040: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
+00035050: 203d 2073 656c 662e 7072 6976 6174 6550   = self.privateP
+00035060: 6f73 7443 6f6e 7472 6163 7456 3350 7269  ostContractV3Pri
+00035070: 7661 7465 4f72 6465 7252 6570 6c61 6365  vateOrderReplace
+00035080: 2873 656c 662e 6578 7465 6e64 2872 6571  (self.extend(req
+00035090: 7565 7374 2c20 7061 7261 6d73 2929 0a20  uest, params)). 
+000350a0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+000350b0: 2023 2063 6f6e 7472 6163 7420 7633 0a20   # contract v3. 
+000350c0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+000350d0: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
+000350e0: 2023 2020 2020 2020 2020 2022 7265 7443   #         "retC
+000350f0: 6f64 6522 3a20 302c 0a20 2020 2020 2020  ode": 0,.       
+00035100: 2023 2020 2020 2020 2020 2022 7265 744d   #         "retM
+00035110: 7367 223a 2022 4f4b 222c 0a20 2020 2020  sg": "OK",.     
+00035120: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+00035130: 7375 6c74 223a 207b 0a20 2020 2020 2020  sult": {.       
+00035140: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00035150: 6f72 6465 7249 6422 3a20 2264 6238 6237  orderId": "db8b7
+00035160: 3462 332d 3732 6433 2d34 3236 342d 6266  4b3-72d3-4264-bf
+00035170: 3366 2d35 3264 3339 6234 3139 3536 6522  3f-52d39b41956e"
+00035180: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00035190: 2020 2020 2020 2020 226f 7264 6572 4c69          "orderLi
+000351a0: 6e6b 4964 223a 2022 7830 3032 220a 2020  nkId": "x002".  
+000351b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000351c0: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
+000351d0: 2020 2020 2022 7265 7445 7874 496e 666f       "retExtInfo
+000351e0: 223a 207b 7d2c 0a20 2020 2020 2020 2023  ": {},.        #
+000351f0: 2020 2020 2020 2020 2022 7469 6d65 223a           "time":
+00035200: 2031 3635 3839 3032 3631 3037 3439 0a20   1658902610749. 
+00035210: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+00035220: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+00035230: 2072 6573 756c 7420 3d20 7365 6c66 2e73   result = self.s
+00035240: 6166 655f 7661 6c75 6528 7265 7370 6f6e  afe_value(respon
+00035250: 7365 2c20 2772 6573 756c 7427 2c20 7b7d  se, 'result', {}
+00035260: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00035270: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
+00035280: 696e 666f 273a 2072 6573 706f 6e73 652c  info': response,
+00035290: 0a20 2020 2020 2020 2020 2020 2027 6964  .            'id
+000352a0: 273a 2073 656c 662e 7361 6665 5f73 7472  ': self.safe_str
+000352b0: 696e 6728 7265 7375 6c74 2c20 276f 7264  ing(result, 'ord
+000352c0: 6572 4964 2729 2c0a 2020 2020 2020 2020  erId'),.        
+000352d0: 7d0a 0a20 2020 2064 6566 2065 6469 745f  }..    def edit_
+000352e0: 6f72 6465 7228 7365 6c66 2c20 6964 3a20  order(self, id: 
+000352f0: 7374 722c 2073 796d 626f 6c2c 2074 7970  str, symbol, typ
+00035300: 652c 2073 6964 652c 2061 6d6f 756e 743d  e, side, amount=
+00035310: 4e6f 6e65 2c20 7072 6963 653d 4e6f 6e65  None, price=None
+00035320: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
+00035330: 2020 2020 2020 6966 2073 796d 626f 6c20        if symbol 
+00035340: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
+00035350: 2020 2020 2072 6169 7365 2041 7267 756d       raise Argum
+00035360: 656e 7473 5265 7175 6972 6564 2873 656c  entsRequired(sel
+00035370: 662e 6964 202b 2027 2065 6469 744f 7264  f.id + ' editOrd
+00035380: 6572 2829 2072 6571 7569 7265 7320 616e  er() requires an
+00035390: 2073 796d 626f 6c20 6172 6775 6d65 6e74   symbol argument
+000353a0: 2729 0a20 2020 2020 2020 2073 656c 662e  ').        self.
+000353b0: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
+000353c0: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
+000353d0: 7365 6c66 2e6d 6172 6b65 7428 7379 6d62  self.market(symb
+000353e0: 6f6c 290a 2020 2020 2020 2020 656e 6162  ol).        enab
+000353f0: 6c65 556e 6966 6965 644d 6172 6769 6e2c  leUnifiedMargin,
+00035400: 2065 6e61 626c 6555 6e69 6669 6564 4163   enableUnifiedAc
+00035410: 636f 756e 7420 3d20 7365 6c66 2e69 735f  count = self.is_
+00035420: 756e 6966 6965 645f 656e 6162 6c65 6428  unified_enabled(
+00035430: 290a 2020 2020 2020 2020 6966 2065 6e61  ).        if ena
+00035440: 626c 6555 6e69 6669 6564 4163 636f 756e  bleUnifiedAccoun
+00035450: 743a 0a20 2020 2020 2020 2020 2020 2072  t:.            r
+00035460: 6574 7572 6e20 7365 6c66 2e65 6469 745f  eturn self.edit_
+00035470: 756e 6966 6965 645f 6163 636f 756e 745f  unified_account_
+00035480: 6f72 6465 7228 6964 2c20 7379 6d62 6f6c  order(id, symbol
+00035490: 2c20 7479 7065 2c20 7369 6465 2c20 616d  , type, side, am
+000354a0: 6f75 6e74 2c20 7072 6963 652c 2070 6172  ount, price, par
+000354b0: 616d 7329 0a20 2020 2020 2020 2065 6c69  ams).        eli
+000354c0: 6620 6d61 726b 6574 5b27 7370 6f74 275d  f market['spot']
+000354d0: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
+000354e0: 6973 6520 4e6f 7453 7570 706f 7274 6564  ise NotSupported
+000354f0: 2873 656c 662e 6964 202b 2027 2065 6469  (self.id + ' edi
+00035500: 744f 7264 6572 2829 2064 6f65 7320 6e6f  tOrder() does no
+00035510: 7420 7375 7070 6f72 7420 7370 6f74 206d  t support spot m
+00035520: 6172 6b65 7473 2729 0a20 2020 2020 2020  arkets').       
+00035530: 2065 6c69 6620 656e 6162 6c65 556e 6966   elif enableUnif
+00035540: 6965 644d 6172 6769 6e20 616e 6420 6e6f  iedMargin and no
+00035550: 7420 6d61 726b 6574 5b27 696e 7665 7273  t market['invers
+00035560: 6527 5d3a 0a20 2020 2020 2020 2020 2020  e']:.           
+00035570: 2072 6574 7572 6e20 7365 6c66 2e65 6469   return self.edi
+00035580: 745f 756e 6966 6965 645f 6d61 7267 696e  t_unified_margin
+00035590: 5f6f 7264 6572 2869 642c 2073 796d 626f  _order(id, symbo
+000355a0: 6c2c 2074 7970 652c 2073 6964 652c 2061  l, type, side, a
+000355b0: 6d6f 756e 742c 2070 7269 6365 2c20 7061  mount, price, pa
+000355c0: 7261 6d73 290a 2020 2020 2020 2020 7265  rams).        re
+000355d0: 7475 726e 2073 656c 662e 6564 6974 5f63  turn self.edit_c
+000355e0: 6f6e 7472 6163 745f 7633 5f6f 7264 6572  ontract_v3_order
+000355f0: 2869 642c 2073 796d 626f 6c2c 2074 7970  (id, symbol, typ
+00035600: 652c 2073 6964 652c 2061 6d6f 756e 742c  e, side, amount,
+00035610: 2070 7269 6365 2c20 7061 7261 6d73 290a   price, params).
+00035620: 0a20 2020 2064 6566 2063 616e 6365 6c5f  .    def cancel_
+00035630: 756e 6966 6965 645f 6163 636f 756e 745f  unified_account_
+00035640: 6f72 6465 7228 7365 6c66 2c20 6964 3a20  order(self, id: 
+00035650: 7374 722c 2073 796d 626f 6c3a 204f 7074  str, symbol: Opt
+00035660: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
+00035670: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
+00035680: 2020 2020 2020 2069 6620 7379 6d62 6f6c         if symbol
+00035690: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+000356a0: 2020 2020 2020 7261 6973 6520 4172 6775        raise Argu
+000356b0: 6d65 6e74 7352 6571 7569 7265 6428 7365  mentsRequired(se
+000356c0: 6c66 2e69 6420 2b20 2720 6361 6e63 656c  lf.id + ' cancel
+000356d0: 4f72 6465 7228 2920 7265 7175 6972 6573  Order() requires
+000356e0: 2061 2073 796d 626f 6c20 6172 6775 6d65   a symbol argume
+000356f0: 6e74 2729 0a20 2020 2020 2020 2073 656c  nt').        sel
+00035700: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
+00035710: 0a20 2020 2020 2020 206d 6172 6b65 7420  .        market 
+00035720: 3d20 7365 6c66 2e6d 6172 6b65 7428 7379  = self.market(sy
+00035730: 6d62 6f6c 290a 2020 2020 2020 2020 7265  mbol).        re
+00035740: 7175 6573 7420 3d20 7b0a 2020 2020 2020  quest = {.      
+00035750: 2020 2020 2020 2773 796d 626f 6c27 3a20        'symbol': 
+00035760: 6d61 726b 6574 5b27 6964 275d 2c0a 2020  market['id'],.  
+00035770: 2020 2020 2020 2020 2020 2320 276f 7264            # 'ord
+00035780: 6572 4c69 6e6b 4964 273a 2027 7374 7269  erLinkId': 'stri
+00035790: 6e67 272c 0a20 2020 2020 2020 2020 2020  ng',.           
+000357a0: 2023 2027 6f72 6465 7249 6427 3a20 6964   # 'orderId': id
+000357b0: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+000357c0: 636f 6e64 6974 696f 6e61 6c20 6f72 6465  conditional orde
+000357d0: 7273 0a20 2020 2020 2020 2020 2020 2023  rs.            #
+000357e0: 2027 6f72 6465 7246 696c 7465 7227 3a20   'orderFilter': 
+000357f0: 2727 2c20 2023 2056 616c 6964 2066 6f72  '',  # Valid for
+00035800: 2073 706f 7420 6f6e 6c79 2e20 4f72 6465   spot only. Orde
+00035810: 722c 7470 736c 4f72 6465 722e 2049 6620  r,tpslOrder. If 
+00035820: 6e6f 7420 7061 7373 6564 2c20 4f72 6465  not passed, Orde
+00035830: 7220 6279 2064 6566 6175 6c74 0a20 2020  r by default.   
+00035840: 2020 2020 207d 0a20 2020 2020 2020 2069       }.        i
+00035850: 6620 6d61 726b 6574 5b27 7370 6f74 275d  f market['spot']
+00035860: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
+00035870: 6f6e 6c79 2077 6f72 6b73 2066 6f72 2073  only works for s
+00035880: 706f 7420 6d61 726b 6574 0a20 2020 2020  pot market.     
+00035890: 2020 2020 2020 2069 7353 746f 7020 3d20         isStop = 
+000358a0: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
+000358b0: 7061 7261 6d73 2c20 2773 746f 7027 2c20  params, 'stop', 
+000358c0: 4661 6c73 6529 0a20 2020 2020 2020 2020  False).         
+000358d0: 2020 2070 6172 616d 7320 3d20 7365 6c66     params = self
+000358e0: 2e6f 6d69 7428 7061 7261 6d73 2c20 5b27  .omit(params, ['
+000358f0: 7374 6f70 275d 290a 2020 2020 2020 2020  stop']).        
+00035900: 2020 2020 7265 7175 6573 745b 276f 7264      request['ord
+00035910: 6572 4669 6c74 6572 275d 203d 2027 7470  erFilter'] = 'tp
+00035920: 736c 4f72 6465 7227 2069 6620 6973 5374  slOrder' if isSt
+00035930: 6f70 2065 6c73 6520 274f 7264 6572 270a  op else 'Order'.
+00035940: 2020 2020 2020 2020 6966 2069 6420 6973          if id is
+00035950: 206e 6f74 204e 6f6e 653a 2020 2320 5468   not None:  # Th
+00035960: 6520 7573 6572 2063 616e 2061 6c73 6f20  e user can also 
+00035970: 7573 6520 6172 6775 6d65 6e74 2070 6172  use argument par
+00035980: 616d 735b 226f 7264 6572 4c69 6e6b 4964  ams["orderLinkId
+00035990: 225d 0a20 2020 2020 2020 2020 2020 2072  "].            r
+000359a0: 6571 7565 7374 5b27 6f72 6465 7249 6427  equest['orderId'
+000359b0: 5d20 3d20 6964 0a20 2020 2020 2020 2069  ] = id.        i
+000359c0: 6620 6d61 726b 6574 5b27 7370 6f74 275d  f market['spot']
+000359d0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+000359e0: 7175 6573 745b 2763 6174 6567 6f72 7927  quest['category'
+000359f0: 5d20 3d20 2773 706f 7427 0a20 2020 2020  ] = 'spot'.     
+00035a00: 2020 2065 6c69 6620 6d61 726b 6574 5b27     elif market['
+00035a10: 6f70 7469 6f6e 275d 3a0a 2020 2020 2020  option']:.      
+00035a20: 2020 2020 2020 7265 7175 6573 745b 2763        request['c
+00035a30: 6174 6567 6f72 7927 5d20 3d20 276f 7074  ategory'] = 'opt
+00035a40: 696f 6e27 0a20 2020 2020 2020 2065 6c69  ion'.        eli
+00035a50: 6620 6d61 726b 6574 5b27 6c69 6e65 6172  f market['linear
+00035a60: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+00035a70: 7265 7175 6573 745b 2763 6174 6567 6f72  request['categor
+00035a80: 7927 5d20 3d20 276c 696e 6561 7227 0a20  y'] = 'linear'. 
+00035a90: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00035aa0: 2020 2020 2020 2020 2072 6169 7365 204e           raise N
+00035ab0: 6f74 5375 7070 6f72 7465 6428 7365 6c66  otSupported(self
+00035ac0: 2e69 6420 2b20 2720 6361 6e63 656c 4f72  .id + ' cancelOr
+00035ad0: 6465 7228 2920 646f 6573 206e 6f74 2061  der() does not a
+00035ae0: 6c6c 6f77 2069 6e76 6572 7365 206d 6172  llow inverse mar
+00035af0: 6b65 7420 6f72 6465 7273 2066 6f72 2027  ket orders for '
+00035b00: 202b 2073 796d 626f 6c20 2b20 2720 6d61   + symbol + ' ma
+00035b10: 726b 6574 7327 290a 2020 2020 2020 2020  rkets').        
+00035b20: 7265 7370 6f6e 7365 203d 2073 656c 662e  response = self.
+00035b30: 7072 6976 6174 6550 6f73 7456 354f 7264  privatePostV5Ord
+00035b40: 6572 4361 6e63 656c 2873 656c 662e 6578  erCancel(self.ex
+00035b50: 7465 6e64 2872 6571 7565 7374 2c20 7061  tend(request, pa
+00035b60: 7261 6d73 2929 0a20 2020 2020 2020 2023  rams)).        #
+00035b70: 0a20 2020 2020 2020 2023 2020 2020 207b  .        #     {
+00035b80: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00035b90: 2020 2022 7265 7443 6f64 6522 3a20 302c     "retCode": 0,
+00035ba0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00035bb0: 2020 2022 7265 744d 7367 223a 2022 4f4b     "retMsg": "OK
+00035bc0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00035bd0: 2020 2020 2022 7265 7375 6c74 223a 207b       "result": {
+00035be0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00035bf0: 2020 2020 2020 2022 6f72 6465 7249 6422         "orderId"
+00035c00: 3a20 2263 3666 3035 3564 392d 3766 3231  : "c6f055d9-7f21
+00035c10: 2d34 3037 392d 3931 3364 2d65 3635 3233  -4079-913d-e6523
+00035c20: 6139 6366 6666 6122 2c0a 2020 2020 2020  a9cfffa",.      
+00035c30: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00035c40: 226f 7264 6572 4c69 6e6b 4964 223a 2022  "orderLinkId": "
+00035c50: 6c69 6e65 6172 2d30 3034 220a 2020 2020  linear-004".    
+00035c60: 2020 2020 2320 2020 2020 2020 2020 7d2c      #         },
+00035c70: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00035c80: 2020 2022 7265 7445 7874 496e 666f 223a     "retExtInfo":
+00035c90: 207b 7d2c 0a20 2020 2020 2020 2023 2020   {},.        #  
+00035ca0: 2020 2020 2020 2022 7469 6d65 223a 2031         "time": 1
+00035cb0: 3637 3232 3137 3337 3731 3634 0a20 2020  672217377164.   
+00035cc0: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
+00035cd0: 2020 2020 2023 0a20 2020 2020 2020 2072       #.        r
+00035ce0: 6573 756c 7420 3d20 7365 6c66 2e73 6166  esult = self.saf
+00035cf0: 655f 7661 6c75 6528 7265 7370 6f6e 7365  e_value(response
+00035d00: 2c20 2772 6573 756c 7427 2c20 7b7d 290a  , 'result', {}).
+00035d10: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00035d20: 656c 662e 7061 7273 655f 6f72 6465 7228  elf.parse_order(
+00035d30: 7265 7375 6c74 2c20 6d61 726b 6574 290a  result, market).
+00035d40: 0a20 2020 2064 6566 2063 616e 6365 6c5f  .    def cancel_
+00035d50: 7370 6f74 5f6f 7264 6572 2873 656c 662c  spot_order(self,
+00035d60: 2069 643a 2073 7472 2c20 7379 6d62 6f6c   id: str, symbol
+00035d70: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
+00035d80: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
+00035d90: 7d29 3a0a 2020 2020 2020 2020 7365 6c66  }):.        self
+00035da0: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
+00035db0: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
+00035dc0: 2073 656c 662e 6d61 726b 6574 2873 796d   self.market(sym
+00035dd0: 626f 6c29 0a20 2020 2020 2020 2072 6571  bol).        req
+00035de0: 7565 7374 203d 207b 0a20 2020 2020 2020  uest = {.       
+00035df0: 2020 2020 2023 2027 6f72 6465 725f 6c69       # 'order_li
+00035e00: 6e6b 5f69 6427 3a20 2773 7472 696e 6727  nk_id': 'string'
+00035e10: 2c20 2023 206f 6e65 206f 6620 6f72 6465  ,  # one of orde
+00035e20: 725f 6964 2c20 7374 6f70 5f6f 7264 6572  r_id, stop_order
+00035e30: 5f69 6420 6f72 206f 7264 6572 5f6c 696e  _id or order_lin
+00035e40: 6b5f 6964 2069 7320 7265 7175 6972 6564  k_id is required
+00035e50: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+00035e60: 6f72 6465 7249 6427 3a20 6964 0a20 2020  orderId': id.   
+00035e70: 2020 2020 207d 0a20 2020 2020 2020 2069       }.        i
+00035e80: 6620 6964 2069 7320 6e6f 7420 4e6f 6e65  f id is not None
+00035e90: 3a20 2023 2054 6865 2075 7365 7220 6361  :  # The user ca
+00035ea0: 6e20 616c 736f 2075 7365 2061 7267 756d  n also use argum
+00035eb0: 656e 7420 7061 7261 6d73 5b22 6f72 6465  ent params["orde
+00035ec0: 725f 6c69 6e6b 5f69 6422 5d0a 2020 2020  r_link_id"].    
+00035ed0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+00035ee0: 276f 7264 6572 4964 275d 203d 2069 640a  'orderId'] = id.
+00035ef0: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
+00035f00: 203d 2073 656c 662e 7072 6976 6174 6550   = self.privateP
+00035f10: 6f73 7453 706f 7456 3350 7269 7661 7465  ostSpotV3Private
+00035f20: 4361 6e63 656c 4f72 6465 7228 7365 6c66  CancelOrder(self
+00035f30: 2e65 7874 656e 6428 7265 7175 6573 742c  .extend(request,
+00035f40: 2070 6172 616d 7329 290a 2020 2020 2020   params)).      
+00035f50: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
+00035f60: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+00035f70: 2020 2020 2020 2272 6574 436f 6465 223a        "retCode":
+00035f80: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
+00035f90: 2020 2020 2020 2020 2272 6574 4d73 6722          "retMsg"
+00035fa0: 3a20 224f 4b22 2c0a 2020 2020 2020 2020  : "OK",.        
+00035fb0: 2320 2020 2020 2020 2020 2272 6573 756c  #         "resul
+00035fc0: 7422 3a20 7b0a 2020 2020 2020 2020 2320  t": {.        # 
+00035fd0: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+00035fe0: 6572 4964 223a 2022 3132 3735 3034 3632  erId": "12750462
+00035ff0: 3438 3538 3534 3134 3134 3422 2c0a 2020  48585414144",.  
+00036000: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00036010: 2020 2020 226f 7264 6572 4c69 6e6b 4964      "orderLinkId
+00036020: 223a 2022 3136 3636 3733 3333 3537 3433  ": "166673335743
+00036030: 3436 3137 222c 0a20 2020 2020 2020 2023  4617",.        #
+00036040: 2020 2020 2020 2020 2020 2020 2022 7379               "sy
+00036050: 6d62 6f6c 223a 2022 4141 5645 5553 4454  mbol": "AAVEUSDT
+00036060: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00036070: 2020 2020 2020 2020 2022 7374 6174 7573           "status
+00036080: 223a 2022 4e45 5722 2c0a 2020 2020 2020  ": "NEW",.      
+00036090: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+000360a0: 2261 6363 6f75 6e74 4964 223a 2022 3133  "accountId": "13
+000360b0: 3338 3034 3334 222c 0a20 2020 2020 2020  380434",.       
+000360c0: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+000360d0: 6372 6561 7465 5469 6d65 223a 2022 3136  createTime": "16
+000360e0: 3636 3733 3333 3537 3433 3822 2c0a 2020  66733357438",.  
+000360f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00036100: 2020 2020 226f 7264 6572 5072 6963 6522      "orderPrice"
+00036110: 3a20 2238 3022 2c0a 2020 2020 2020 2020  : "80",.        
+00036120: 2320 2020 2020 2020 2020 2020 2020 226f  #             "o
+00036130: 7264 6572 5174 7922 3a20 2230 2e31 3122  rderQty": "0.11"
+00036140: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00036150: 2020 2020 2020 2020 2265 7865 6351 7479          "execQty
+00036160: 223a 2022 3022 2c0a 2020 2020 2020 2020  ": "0",.        
+00036170: 2320 2020 2020 2020 2020 2020 2020 2274  #             "t
+00036180: 696d 6549 6e46 6f72 6365 223a 2022 4754  imeInForce": "GT
+00036190: 4322 2c0a 2020 2020 2020 2020 2320 2020  C",.        #   
+000361a0: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+000361b0: 5479 7065 223a 2022 4c49 4d49 5422 2c0a  Type": "LIMIT",.
+000361c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000361d0: 2020 2020 2020 2273 6964 6522 3a20 2242        "side": "B
+000361e0: 5559 222c 0a20 2020 2020 2020 2023 2020  UY",.        #  
+000361f0: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
+00036200: 7243 6174 6567 6f72 7922 3a20 2230 220a  rCategory": "0".
+00036210: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00036220: 2020 7d2c 0a20 2020 2020 2020 2023 2020    },.        #  
+00036230: 2020 2020 2020 2022 7265 7445 7874 4d61         "retExtMa
+00036240: 7022 3a20 7b7d 2c0a 2020 2020 2020 2020  p": {},.        
+00036250: 2320 2020 2020 2020 2020 2272 6574 4578  #         "retEx
+00036260: 7449 6e66 6f22 3a20 6e75 6c6c 2c0a 2020  tInfo": null,.  
+00036270: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00036280: 2274 696d 6522 3a20 2231 3636 3637 3333  "time": "1666733
+00036290: 3833 3934 3933 220a 2020 2020 2020 2020  839493".        
+000362a0: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
+000362b0: 230a 2020 2020 2020 2020 7265 7375 6c74  #.        result
+000362c0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+000362d0: 7565 2872 6573 706f 6e73 652c 2027 7265  ue(response, 're
+000362e0: 7375 6c74 272c 207b 7d29 0a20 2020 2020  sult', {}).     
+000362f0: 2020 2072 6574 7572 6e20 7365 6c66 2e70     return self.p
+00036300: 6172 7365 5f6f 7264 6572 2872 6573 756c  arse_order(resul
+00036310: 742c 206d 6172 6b65 7429 0a0a 2020 2020  t, market)..    
+00036320: 6465 6620 6361 6e63 656c 5f75 6e69 6669  def cancel_unifi
+00036330: 6564 5f6d 6172 6769 6e5f 6f72 6465 7228  ed_margin_order(
+00036340: 7365 6c66 2c20 6964 3a20 7374 722c 2073  self, id: str, s
+00036350: 796d 626f 6c3a 204f 7074 696f 6e61 6c5b  ymbol: Optional[
+00036360: 7374 725d 203d 204e 6f6e 652c 2070 6172  str] = None, par
+00036370: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
+00036380: 2069 6620 7379 6d62 6f6c 2069 7320 4e6f   if symbol is No
+00036390: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+000363a0: 7261 6973 6520 4172 6775 6d65 6e74 7352  raise ArgumentsR
+000363b0: 6571 7569 7265 6428 7365 6c66 2e69 6420  equired(self.id 
+000363c0: 2b20 2720 6361 6e63 656c 556e 6966 6965  + ' cancelUnifie
+000363d0: 644d 6172 6769 6e4f 7264 6572 2829 2072  dMarginOrder() r
+000363e0: 6571 7569 7265 7320 6120 7379 6d62 6f6c  equires a symbol
+000363f0: 2061 7267 756d 656e 7427 290a 2020 2020   argument').    
+00036400: 2020 2020 7365 6c66 2e6c 6f61 645f 6d61      self.load_ma
+00036410: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
+00036420: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
+00036430: 726b 6574 2873 796d 626f 6c29 0a20 2020  rket(symbol).   
+00036440: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
+00036450: 0a20 2020 2020 2020 2020 2020 2027 7379  .            'sy
+00036460: 6d62 6f6c 273a 206d 6172 6b65 745b 2769  mbol': market['i
+00036470: 6427 5d2c 0a20 2020 2020 2020 2020 2020  d'],.           
+00036480: 2023 2027 6f72 6465 724c 696e 6b49 6427   # 'orderLinkId'
+00036490: 3a20 2773 7472 696e 6727 2c0a 2020 2020  : 'string',.    
+000364a0: 2020 2020 2020 2020 2320 276f 7264 6572          # 'order
+000364b0: 4964 273a 2069 642c 0a20 2020 2020 2020  Id': id,.       
+000364c0: 2020 2020 2023 2063 6f6e 6469 7469 6f6e       # condition
+000364d0: 616c 206f 7264 6572 730a 2020 2020 2020  al orders.      
+000364e0: 2020 2020 2020 2320 276f 7264 6572 4669        # 'orderFi
+000364f0: 6c74 6572 273a 2027 272c 0a20 2020 2020  lter': '',.     
+00036500: 2020 2020 2020 2023 2027 6361 7465 676f         # 'catego
+00036510: 7279 273a 2027 272c 0a20 2020 2020 2020  ry': '',.       
+00036520: 207d 0a20 2020 2020 2020 2069 7353 746f   }.        isSto
+00036530: 7020 3d20 7365 6c66 2e73 6166 655f 7661  p = self.safe_va
+00036540: 6c75 6528 7061 7261 6d73 2c20 2773 746f  lue(params, 'sto
+00036550: 7027 2c20 4661 6c73 6529 0a20 2020 2020  p', False).     
+00036560: 2020 2070 6172 616d 7320 3d20 7365 6c66     params = self
+00036570: 2e6f 6d69 7428 7061 7261 6d73 2c20 5b27  .omit(params, ['
+00036580: 7374 6f70 275d 290a 2020 2020 2020 2020  stop']).        
+00036590: 7265 7175 6573 745b 276f 7264 6572 4669  request['orderFi
+000365a0: 6c74 6572 275d 203d 2027 5374 6f70 4f72  lter'] = 'StopOr
+000365b0: 6465 7227 2069 6620 6973 5374 6f70 2065  der' if isStop e
+000365c0: 6c73 6520 274f 7264 6572 270a 2020 2020  lse 'Order'.    
+000365d0: 2020 2020 6966 2069 6420 6973 206e 6f74      if id is not
+000365e0: 204e 6f6e 653a 2020 2320 5468 6520 7573   None:  # The us
+000365f0: 6572 2063 616e 2061 6c73 6f20 7573 6520  er can also use 
+00036600: 6172 6775 6d65 6e74 2070 6172 616d 735b  argument params[
+00036610: 226f 7264 6572 4c69 6e6b 4964 225d 0a20  "orderLinkId"]. 
+00036620: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+00036630: 7374 5b27 6f72 6465 7249 6427 5d20 3d20  st['orderId'] = 
+00036640: 6964 0a20 2020 2020 2020 2069 6620 6d61  id.        if ma
+00036650: 726b 6574 5b27 6f70 7469 6f6e 275d 3a0a  rket['option']:.
+00036660: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+00036670: 6573 745b 2763 6174 6567 6f72 7927 5d20  est['category'] 
+00036680: 3d20 276f 7074 696f 6e27 0a20 2020 2020  = 'option'.     
+00036690: 2020 2065 6c69 6620 6d61 726b 6574 5b27     elif market['
+000366a0: 6c69 6e65 6172 275d 3a0a 2020 2020 2020  linear']:.      
+000366b0: 2020 2020 2020 7265 7175 6573 745b 2763        request['c
+000366c0: 6174 6567 6f72 7927 5d20 3d20 276c 696e  ategory'] = 'lin
+000366d0: 6561 7227 0a20 2020 2020 2020 2065 6c73  ear'.        els
+000366e0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+000366f0: 6169 7365 204e 6f74 5375 7070 6f72 7465  aise NotSupporte
+00036700: 6428 7365 6c66 2e69 6420 2b20 2720 6361  d(self.id + ' ca
+00036710: 6e63 656c 556e 6966 6965 644d 6172 6769  ncelUnifiedMargi
+00036720: 6e4f 7264 6572 2829 2064 6f65 7320 6e6f  nOrder() does no
+00036730: 7420 616c 6c6f 7720 696e 7665 7273 6520  t allow inverse 
+00036740: 6d61 726b 6574 206f 7264 6572 7320 666f  market orders fo
+00036750: 7220 2720 2b20 7379 6d62 6f6c 202b 2027  r ' + symbol + '
+00036760: 206d 6172 6b65 7473 2729 0a20 2020 2020   markets').     
+00036770: 2020 2072 6573 706f 6e73 6520 3d20 7365     response = se
+00036780: 6c66 2e70 7269 7661 7465 506f 7374 556e  lf.privatePostUn
+00036790: 6966 6965 6456 3350 7269 7661 7465 4f72  ifiedV3PrivateOr
+000367a0: 6465 7243 616e 6365 6c28 7365 6c66 2e65  derCancel(self.e
+000367b0: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
+000367c0: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
+000367d0: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+000367e0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+000367f0: 2020 2020 2272 6574 436f 6465 223a 2030      "retCode": 0
+00036800: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00036810: 2020 2020 2272 6574 4d73 6722 3a20 224f      "retMsg": "O
+00036820: 4b22 2c0a 2020 2020 2020 2020 2320 2020  K",.        #   
+00036830: 2020 2020 2020 2272 6573 756c 7422 3a20        "result": 
+00036840: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+00036850: 2020 2020 2020 2020 226f 7264 6572 4964          "orderId
+00036860: 223a 2022 3432 6338 3664 3636 3333 3165  ": "42c86d66331e
+00036870: 3431 3939 3864 3132 6332 3434 3063 6539  41998d12c2440ce9
+00036880: 3063 3161 222c 0a20 2020 2020 2020 2023  0c1a",.        #
+00036890: 2020 2020 2020 2020 2020 2020 2022 6f72               "or
+000368a0: 6465 724c 696e 6b49 6422 3a20 2265 3830  derLinkId": "e80
+000368b0: 6435 3538 652d 6564 220a 2020 2020 2020  d558e-ed".      
+000368c0: 2020 2320 2020 2020 2020 2020 7d0a 2020    #         }.  
+000368d0: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
+000368e0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+000368f0: 7265 7375 6c74 203d 2073 656c 662e 7361  result = self.sa
+00036900: 6665 5f76 616c 7565 2872 6573 706f 6e73  fe_value(respons
+00036910: 652c 2027 7265 7375 6c74 272c 207b 7d29  e, 'result', {})
+00036920: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00036930: 7365 6c66 2e70 6172 7365 5f6f 7264 6572  self.parse_order
+00036940: 2872 6573 756c 742c 206d 6172 6b65 7429  (result, market)
+00036950: 0a0a 2020 2020 6465 6620 6361 6e63 656c  ..    def cancel
+00036960: 5f75 7364 635f 6f72 6465 7228 7365 6c66  _usdc_order(self
+00036970: 2c20 6964 3a20 7374 722c 2073 796d 626f  , id: str, symbo
+00036980: 6c3a 204f 7074 696f 6e61 6c5b 7374 725d  l: Optional[str]
+00036990: 203d 204e 6f6e 652c 2070 6172 616d 733d   = None, params=
+000369a0: 7b7d 293a 0a20 2020 2020 2020 2069 6620  {}):.        if 
+000369b0: 7379 6d62 6f6c 2069 7320 4e6f 6e65 3a0a  symbol is None:.
+000369c0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+000369d0: 6520 4172 6775 6d65 6e74 7352 6571 7569  e ArgumentsRequi
+000369e0: 7265 6428 7365 6c66 2e69 6420 2b20 2720  red(self.id + ' 
+000369f0: 6361 6e63 656c 5553 4443 4f72 6465 7228  cancelUSDCOrder(
+00036a00: 2920 7265 7175 6972 6573 2061 2073 796d  ) requires a sym
+00036a10: 626f 6c20 6172 6775 6d65 6e74 2729 0a20  bol argument'). 
+00036a20: 2020 2020 2020 2073 656c 662e 6c6f 6164         self.load
+00036a30: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
+00036a40: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
+00036a50: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
+00036a60: 2020 2020 2020 2020 7265 7175 6573 7420          request 
+00036a70: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+00036a80: 2773 796d 626f 6c27 3a20 6d61 726b 6574  'symbol': market
+00036a90: 5b27 6964 275d 2c0a 2020 2020 2020 2020  ['id'],.        
+00036aa0: 2020 2020 2320 276f 7264 6572 4c69 6e6b      # 'orderLink
+00036ab0: 4964 273a 2027 7374 7269 6e67 272c 2020  Id': 'string',  
+00036ac0: 2320 6f6e 6520 6f66 206f 7264 6572 5f69  # one of order_i
+00036ad0: 642c 2073 746f 705f 6f72 6465 725f 6964  d, stop_order_id
+00036ae0: 206f 7220 6f72 6465 725f 6c69 6e6b 5f69   or order_link_i
+00036af0: 6420 6973 2072 6571 7569 7265 640a 2020  d is required.  
+00036b00: 2020 2020 2020 2020 2020 2320 276f 7264            # 'ord
+00036b10: 6572 4964 273a 2069 642c 0a20 2020 2020  erId': id,.     
+00036b20: 2020 207d 0a20 2020 2020 2020 2069 7353     }.        isS
+00036b30: 746f 7020 3d20 7365 6c66 2e73 6166 655f  top = self.safe_
+00036b40: 7661 6c75 6528 7061 7261 6d73 2c20 2773  value(params, 's
+00036b50: 746f 7027 2c20 4661 6c73 6529 0a20 2020  top', False).   
+00036b60: 2020 2020 2070 6172 616d 7320 3d20 7365       params = se
+00036b70: 6c66 2e6f 6d69 7428 7061 7261 6d73 2c20  lf.omit(params, 
+00036b80: 5b27 7374 6f70 275d 290a 2020 2020 2020  ['stop']).      
+00036b90: 2020 6d65 7468 6f64 203d 204e 6f6e 650a    method = None.
+00036ba0: 2020 2020 2020 2020 6966 2069 6420 6973          if id is
+00036bb0: 206e 6f74 204e 6f6e 653a 2020 2320 5468   not None:  # Th
+00036bc0: 6520 7573 6572 2063 616e 2061 6c73 6f20  e user can also 
+00036bd0: 7573 6520 6172 6775 6d65 6e74 2070 6172  use argument par
+00036be0: 616d 735b 226f 7264 6572 5f6c 696e 6b5f  ams["order_link_
+00036bf0: 6964 225d 0a20 2020 2020 2020 2020 2020  id"].           
+00036c00: 2072 6571 7565 7374 5b27 6f72 6465 7249   request['orderI
+00036c10: 6427 5d20 3d20 6964 0a20 2020 2020 2020  d'] = id.       
+00036c20: 2069 6620 6d61 726b 6574 5b27 6f70 7469   if market['opti
+00036c30: 6f6e 275d 3a0a 2020 2020 2020 2020 2020  on']:.          
+00036c40: 2020 6d65 7468 6f64 203d 2027 7072 6976    method = 'priv
+00036c50: 6174 6550 6f73 744f 7074 696f 6e55 7364  atePostOptionUsd
+00036c60: 634f 7065 6e61 7069 5072 6976 6174 6556  cOpenapiPrivateV
+00036c70: 3143 616e 6365 6c4f 7264 6572 270a 2020  1CancelOrder'.  
+00036c80: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00036c90: 2020 2020 2020 2020 6d65 7468 6f64 203d          method =
+00036ca0: 2027 7072 6976 6174 6550 6f73 7450 6572   'privatePostPer
+00036cb0: 7065 7475 616c 5573 6463 4f70 656e 6170  petualUsdcOpenap
+00036cc0: 6950 7269 7661 7465 5631 4361 6e63 656c  iPrivateV1Cancel
+00036cd0: 4f72 6465 7227 0a20 2020 2020 2020 2020  Order'.         
+00036ce0: 2020 2072 6571 7565 7374 5b27 6f72 6465     request['orde
+00036cf0: 7246 696c 7465 7227 5d20 3d20 2753 746f  rFilter'] = 'Sto
+00036d00: 704f 7264 6572 2720 6966 2069 7353 746f  pOrder' if isSto
+00036d10: 7020 656c 7365 2027 4f72 6465 7227 0a20  p else 'Order'. 
+00036d20: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+00036d30: 3d20 6765 7461 7474 7228 7365 6c66 2c20  = getattr(self, 
+00036d40: 6d65 7468 6f64 2928 7365 6c66 2e65 7874  method)(self.ext
+00036d50: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
+00036d60: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
+00036d70: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+00036d80: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00036d90: 2020 2272 6574 436f 6465 223a 2030 2c0a    "retCode": 0,.
 00036da0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00036db0: 2020 2020 2020 226f 7264 6572 4c69 6e6b        "orderLink
-00036dc0: 4964 223a 2022 220a 2020 2020 2020 2020  Id": "".        
-00036dd0: 2320 2020 2020 2020 2020 7d2c 0a20 2020  #         },.   
-00036de0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00036df0: 7265 7445 7874 496e 666f 223a 6e75 6c6c  retExtInfo":null
-00036e00: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00036e10: 2020 2020 2274 696d 6522 3a31 3635 3838      "time":16588
-00036e20: 3530 3332 3138 3631 0a20 2020 2020 2020  50321861.       
-00036e30: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
-00036e40: 2023 0a20 2020 2020 2020 2072 6573 756c   #.        resul
-00036e50: 7420 3d20 7365 6c66 2e73 6166 655f 7661  t = self.safe_va
-00036e60: 6c75 6528 7265 7370 6f6e 7365 2c20 2772  lue(response, 'r
-00036e70: 6573 756c 7427 2c20 7b7d 290a 2020 2020  esult', {}).    
-00036e80: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00036e90: 7061 7273 655f 6f72 6465 7228 7265 7375  parse_order(resu
-00036ea0: 6c74 2c20 6d61 726b 6574 290a 0a20 2020  lt, market)..   
-00036eb0: 2064 6566 2063 616e 6365 6c5f 6f72 6465   def cancel_orde
-00036ec0: 7228 7365 6c66 2c20 6964 3a20 7374 722c  r(self, id: str,
-00036ed0: 2073 796d 626f 6c3a 204f 7074 696f 6e61   symbol: Optiona
-00036ee0: 6c5b 7374 725d 203d 204e 6f6e 652c 2070  l[str] = None, p
-00036ef0: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
-00036f00: 2020 2022 2222 0a20 2020 2020 2020 2063     """.        c
-00036f10: 616e 6365 6c73 2061 6e20 6f70 656e 206f  ancels an open o
-00036f20: 7264 6572 0a20 2020 2020 2020 203a 7061  rder.        :pa
-00036f30: 7261 6d20 7374 7220 6964 3a20 6f72 6465  ram str id: orde
-00036f40: 7220 6964 0a20 2020 2020 2020 203a 7061  r id.        :pa
-00036f50: 7261 6d20 7374 7220 7379 6d62 6f6c 3a20  ram str symbol: 
-00036f60: 756e 6966 6965 6420 7379 6d62 6f6c 206f  unified symbol o
-00036f70: 6620 7468 6520 6d61 726b 6574 2074 6865  f the market the
-00036f80: 206f 7264 6572 2077 6173 206d 6164 6520   order was made 
-00036f90: 696e 0a20 2020 2020 2020 203a 7061 7261  in.        :para
-00036fa0: 6d20 6469 6374 2070 6172 616d 733a 2065  m dict params: e
-00036fb0: 7874 7261 2070 6172 616d 6574 6572 7320  xtra parameters 
-00036fc0: 7370 6563 6966 6963 2074 6f20 7468 6520  specific to the 
-00036fd0: 6279 6269 7420 6170 6920 656e 6470 6f69  bybit api endpoi
-00036fe0: 6e74 0a20 2020 2020 2020 203a 7265 7475  nt.        :retu
-00036ff0: 726e 7320 6469 6374 3a20 416e 2060 6f72  rns dict: An `or
-00037000: 6465 7220 7374 7275 6374 7572 6520 3c68  der structure <h
-00037010: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
-00037020: 2e63 6f6d 2f23 2f3f 6964 3d6f 7264 6572  .com/#/?id=order
-00037030: 2d73 7472 7563 7475 7265 3e60 0a20 2020  -structure>`.   
-00037040: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00037050: 2069 6620 7379 6d62 6f6c 2069 7320 4e6f   if symbol is No
-00037060: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00037070: 7261 6973 6520 4172 6775 6d65 6e74 7352  raise ArgumentsR
-00037080: 6571 7569 7265 6428 7365 6c66 2e69 6420  equired(self.id 
-00037090: 2b20 2720 6361 6e63 656c 4f72 6465 7228  + ' cancelOrder(
-000370a0: 2920 7265 7175 6972 6573 2061 2073 796d  ) requires a sym
-000370b0: 626f 6c20 6172 6775 6d65 6e74 2729 0a20  bol argument'). 
-000370c0: 2020 2020 2020 2073 656c 662e 6c6f 6164         self.load
-000370d0: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
-000370e0: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
-000370f0: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
-00037100: 2020 2020 2020 2020 656e 6162 6c65 556e          enableUn
-00037110: 6966 6965 644d 6172 6769 6e2c 2065 6e61  ifiedMargin, ena
-00037120: 626c 6555 6e69 6669 6564 4163 636f 756e  bleUnifiedAccoun
-00037130: 7420 3d20 7365 6c66 2e69 735f 756e 6966  t = self.is_unif
-00037140: 6965 645f 656e 6162 6c65 6428 290a 2020  ied_enabled().  
-00037150: 2020 2020 2020 6973 5573 6463 5365 7474        isUsdcSett
-00037160: 6c65 6420 3d20 6d61 726b 6574 5b27 7365  led = market['se
-00037170: 7474 6c65 275d 203d 3d20 2755 5344 4327  ttle'] == 'USDC'
-00037180: 0a20 2020 2020 2020 2069 6620 656e 6162  .        if enab
-00037190: 6c65 556e 6966 6965 6441 6363 6f75 6e74  leUnifiedAccount
-000371a0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-000371b0: 7475 726e 2073 656c 662e 6361 6e63 656c  turn self.cancel
-000371c0: 5f75 6e69 6669 6564 5f61 6363 6f75 6e74  _unified_account
-000371d0: 5f6f 7264 6572 2869 642c 2073 796d 626f  _order(id, symbo
-000371e0: 6c2c 2070 6172 616d 7329 0a20 2020 2020  l, params).     
-000371f0: 2020 2065 6c69 6620 6d61 726b 6574 5b27     elif market['
-00037200: 7370 6f74 275d 3a0a 2020 2020 2020 2020  spot']:.        
-00037210: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00037220: 6361 6e63 656c 5f73 706f 745f 6f72 6465  cancel_spot_orde
-00037230: 7228 6964 2c20 7379 6d62 6f6c 2c20 7061  r(id, symbol, pa
-00037240: 7261 6d73 290a 2020 2020 2020 2020 656c  rams).        el
-00037250: 6966 2065 6e61 626c 6555 6e69 6669 6564  if enableUnified
-00037260: 4d61 7267 696e 2061 6e64 206e 6f74 206d  Margin and not m
-00037270: 6172 6b65 745b 2769 6e76 6572 7365 275d  arket['inverse']
-00037280: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00037290: 7475 726e 2073 656c 662e 6361 6e63 656c  turn self.cancel
-000372a0: 5f75 6e69 6669 6564 5f6d 6172 6769 6e5f  _unified_margin_
-000372b0: 6f72 6465 7228 6964 2c20 7379 6d62 6f6c  order(id, symbol
-000372c0: 2c20 7061 7261 6d73 290a 2020 2020 2020  , params).      
-000372d0: 2020 656c 6966 2069 7355 7364 6353 6574    elif isUsdcSet
-000372e0: 746c 6564 3a0a 2020 2020 2020 2020 2020  tled:.          
-000372f0: 2020 7265 7475 726e 2073 656c 662e 6361    return self.ca
-00037300: 6e63 656c 5f75 7364 635f 6f72 6465 7228  ncel_usdc_order(
-00037310: 6964 2c20 7379 6d62 6f6c 2c20 7061 7261  id, symbol, para
-00037320: 6d73 290a 2020 2020 2020 2020 7265 7475  ms).        retu
-00037330: 726e 2073 656c 662e 6361 6e63 656c 5f64  rn self.cancel_d
-00037340: 6572 6976 6174 6976 6573 5f6f 7264 6572  erivatives_order
-00037350: 2869 642c 2073 796d 626f 6c2c 2070 6172  (id, symbol, par
-00037360: 616d 7329 0a0a 2020 2020 6465 6620 6361  ams)..    def ca
-00037370: 6e63 656c 5f61 6c6c 5f75 6e69 6669 6564  ncel_all_unified
-00037380: 5f61 6363 6f75 6e74 5f6f 7264 6572 7328  _account_orders(
-00037390: 7365 6c66 2c20 7379 6d62 6f6c 3a20 4f70  self, symbol: Op
-000373a0: 7469 6f6e 616c 5b73 7472 5d20 3d20 4e6f  tional[str] = No
-000373b0: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
-000373c0: 2020 2020 2020 2020 7365 6c66 2e6c 6f61          self.loa
-000373d0: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
-000373e0: 2020 2020 6d61 726b 6574 203d 204e 6f6e      market = Non
-000373f0: 650a 2020 2020 2020 2020 7365 7474 6c65  e.        settle
-00037400: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-00037410: 7479 7065 203d 204e 6f6e 650a 2020 2020  type = None.    
-00037420: 2020 2020 7375 6254 7970 6520 3d20 4e6f      subType = No
-00037430: 6e65 0a20 2020 2020 2020 2072 6571 7565  ne.        reque
-00037440: 7374 203d 207b 7d0a 2020 2020 2020 2020  st = {}.        
-00037450: 6966 2073 796d 626f 6c20 6973 206e 6f74  if symbol is not
-00037460: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00037470: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
-00037480: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
-00037490: 2020 2020 2020 2020 2020 2020 7365 7474              sett
-000374a0: 6c65 203d 206d 6172 6b65 745b 2773 6574  le = market['set
-000374b0: 746c 6527 5d0a 2020 2020 2020 2020 2020  tle'].          
-000374c0: 2020 7265 7175 6573 745b 2773 796d 626f    request['symbo
-000374d0: 6c27 5d20 3d20 6d61 726b 6574 5b27 6964  l'] = market['id
-000374e0: 275d 0a20 2020 2020 2020 2065 6c73 653a  '].        else:
-000374f0: 0a20 2020 2020 2020 2020 2020 2073 6574  .            set
-00037500: 746c 652c 2070 6172 616d 7320 3d20 7365  tle, params = se
-00037510: 6c66 2e68 616e 646c 655f 6f70 7469 6f6e  lf.handle_option
-00037520: 5f61 6e64 5f70 6172 616d 7328 7061 7261  _and_params(para
-00037530: 6d73 2c20 2763 616e 6365 6c41 6c6c 4f72  ms, 'cancelAllOr
-00037540: 6465 7273 272c 2027 7365 7474 6c65 272c  ders', 'settle',
-00037550: 2027 5553 4454 2729 0a20 2020 2020 2020   'USDT').       
-00037560: 2074 7970 652c 2070 6172 616d 7320 3d20   type, params = 
-00037570: 7365 6c66 2e68 616e 646c 655f 6d61 726b  self.handle_mark
-00037580: 6574 5f74 7970 655f 616e 645f 7061 7261  et_type_and_para
-00037590: 6d73 2827 6361 6e63 656c 416c 6c4f 7264  ms('cancelAllOrd
-000375a0: 6572 7327 2c20 6d61 726b 6574 2c20 7061  ers', market, pa
-000375b0: 7261 6d73 290a 2020 2020 2020 2020 7375  rams).        su
-000375c0: 6254 7970 652c 2070 6172 616d 7320 3d20  bType, params = 
-000375d0: 7365 6c66 2e68 616e 646c 655f 7375 625f  self.handle_sub_
-000375e0: 7479 7065 5f61 6e64 5f70 6172 616d 7328  type_and_params(
-000375f0: 2763 616e 6365 6c41 6c6c 4f72 6465 7273  'cancelAllOrders
-00037600: 272c 206d 6172 6b65 742c 2070 6172 616d  ', market, param
-00037610: 732c 2027 6c69 6e65 6172 2729 0a20 2020  s, 'linear').   
-00037620: 2020 2020 2069 6620 7479 7065 203d 3d20       if type == 
-00037630: 2773 706f 7427 3a0a 2020 2020 2020 2020  'spot':.        
-00037640: 2020 2020 7265 7175 6573 745b 2763 6174      request['cat
-00037650: 6567 6f72 7927 5d20 3d20 2773 706f 7427  egory'] = 'spot'
-00037660: 0a20 2020 2020 2020 2065 6c69 6620 7479  .        elif ty
-00037670: 7065 203d 3d20 276f 7074 696f 6e27 3a0a  pe == 'option':.
-00037680: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00037690: 6573 745b 2763 6174 6567 6f72 7927 5d20  est['category'] 
-000376a0: 3d20 276f 7074 696f 6e27 0a20 2020 2020  = 'option'.     
-000376b0: 2020 2065 6c69 6620 7375 6254 7970 6520     elif subType 
-000376c0: 3d3d 2027 6c69 6e65 6172 273a 0a20 2020  == 'linear':.   
-000376d0: 2020 2020 2020 2020 2072 6571 7565 7374           request
-000376e0: 5b27 6361 7465 676f 7279 275d 203d 2027  ['category'] = '
-000376f0: 6c69 6e65 6172 270a 2020 2020 2020 2020  linear'.        
-00037700: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00037710: 2020 7261 6973 6520 4e6f 7453 7570 706f    raise NotSuppo
-00037720: 7274 6564 2873 656c 662e 6964 202b 2027  rted(self.id + '
-00037730: 2063 616e 6365 6c41 6c6c 4f72 6465 7273   cancelAllOrders
-00037740: 2829 2064 6f65 7320 6e6f 7420 616c 6c6f  () does not allo
-00037750: 7720 696e 7665 7273 6520 6d61 726b 6574  w inverse market
-00037760: 206f 7264 6572 7320 666f 7220 2720 2b20   orders for ' + 
-00037770: 7479 7065 202b 2027 206d 6172 6b65 7473  type + ' markets
-00037780: 2729 0a20 2020 2020 2020 2072 6571 7565  ').        reque
-00037790: 7374 5b27 7365 7474 6c65 436f 696e 275d  st['settleCoin']
-000377a0: 203d 2073 6574 746c 650a 2020 2020 2020   = settle.      
-000377b0: 2020 6973 5374 6f70 203d 2073 656c 662e    isStop = self.
-000377c0: 7361 6665 5f76 616c 7565 2870 6172 616d  safe_value(param
-000377d0: 732c 2027 7374 6f70 272c 2046 616c 7365  s, 'stop', False
-000377e0: 290a 2020 2020 2020 2020 7061 7261 6d73  ).        params
-000377f0: 203d 2073 656c 662e 6f6d 6974 2870 6172   = self.omit(par
-00037800: 616d 732c 205b 2773 746f 7027 5d29 0a20  ams, ['stop']). 
-00037810: 2020 2020 2020 2069 6620 6973 5374 6f70         if isStop
-00037820: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00037830: 7175 6573 745b 276f 7264 6572 4669 6c74  quest['orderFilt
-00037840: 6572 275d 203d 2027 7470 736c 4f72 6465  er'] = 'tpslOrde
-00037850: 7227 0a20 2020 2020 2020 2072 6573 706f  r'.        respo
-00037860: 6e73 6520 3d20 7365 6c66 2e70 7269 7661  nse = self.priva
-00037870: 7465 506f 7374 5635 4f72 6465 7243 616e  tePostV5OrderCan
-00037880: 6365 6c41 6c6c 2873 656c 662e 6578 7465  celAll(self.exte
-00037890: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
-000378a0: 6d73 2929 0a20 2020 2020 2020 2023 0a20  ms)).        #. 
-000378b0: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
-000378c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000378d0: 2022 7265 7443 6f64 6522 3a20 302c 0a20   "retCode": 0,. 
-000378e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000378f0: 2022 7265 744d 7367 223a 2022 4f4b 222c   "retMsg": "OK",
-00037900: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00037910: 2020 2022 7265 7375 6c74 223a 207b 0a20     "result": {. 
-00037920: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00037930: 2020 2020 2022 6c69 7374 223a 205b 0a20       "list": [. 
-00037940: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00037950: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-00037960: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00037970: 2020 2020 2020 2020 2022 6f72 6465 7249           "orderI
-00037980: 6422 3a20 2266 3661 3733 6531 662d 3339  d": "f6a73e1f-39
-00037990: 6235 2d34 6465 652d 6166 3231 2d31 3436  b5-4dee-af21-146
-000379a0: 3062 3265 3362 3237 6322 2c0a 2020 2020  0b2e3b27c",.    
-000379b0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000379c0: 2020 2020 2020 2020 2020 226f 7264 6572            "order
-000379d0: 4c69 6e6b 4964 223a 2022 6130 3031 220a  LinkId": "a001".
-000379e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000379f0: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-00037a00: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00037a10: 2020 5d0a 2020 2020 2020 2020 2320 2020    ].        #   
-00037a20: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
-00037a30: 2023 2020 2020 2020 2020 2022 7265 7445   #         "retE
-00037a40: 7874 496e 666f 223a 207b 7d2c 0a20 2020  xtInfo": {},.   
-00037a50: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00037a60: 7469 6d65 223a 2031 3637 3232 3139 3738  time": 167221978
-00037a70: 3034 3633 0a20 2020 2020 2020 2023 2020  0463.        #  
-00037a80: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
-00037a90: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
-00037aa0: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
-00037ab0: 7265 7370 6f6e 7365 2c20 2772 6573 756c  response, 'resul
-00037ac0: 7427 2c20 5b5d 290a 2020 2020 2020 2020  t', []).        
-00037ad0: 6f72 6465 7273 203d 2073 656c 662e 7361  orders = self.sa
-00037ae0: 6665 5f76 616c 7565 2872 6573 756c 742c  fe_value(result,
-00037af0: 2027 6c69 7374 2729 0a20 2020 2020 2020   'list').       
-00037b00: 2069 6620 6e6f 7420 6973 696e 7374 616e   if not isinstan
-00037b10: 6365 286f 7264 6572 732c 206c 6973 7429  ce(orders, list)
-00037b20: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00037b30: 7475 726e 2072 6573 706f 6e73 650a 2020  turn response.  
-00037b40: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00037b50: 662e 7061 7273 655f 6f72 6465 7273 286f  f.parse_orders(o
-00037b60: 7264 6572 732c 206d 6172 6b65 7429 0a0a  rders, market)..
-00037b70: 2020 2020 6465 6620 6361 6e63 656c 5f61      def cancel_a
-00037b80: 6c6c 5f73 706f 745f 6f72 6465 7273 2873  ll_spot_orders(s
-00037b90: 656c 662c 2073 796d 626f 6c3a 204f 7074  elf, symbol: Opt
-00037ba0: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
-00037bb0: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
-00037bc0: 2020 2020 2020 2069 6620 7379 6d62 6f6c         if symbol
-00037bd0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-00037be0: 2020 2020 2020 7261 6973 6520 4172 6775        raise Argu
-00037bf0: 6d65 6e74 7352 6571 7569 7265 6428 7365  mentsRequired(se
-00037c00: 6c66 2e69 6420 2b20 2720 6361 6e63 656c  lf.id + ' cancel
-00037c10: 416c 6c53 706f 744f 7264 6572 7328 2920  AllSpotOrders() 
-00037c20: 7265 7175 6972 6573 2061 2073 796d 626f  requires a symbo
-00037c30: 6c20 6172 6775 6d65 6e74 2729 0a20 2020  l argument').   
-00037c40: 2020 2020 2073 656c 662e 6c6f 6164 5f6d       self.load_m
-00037c50: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
-00037c60: 206d 6172 6b65 7420 3d20 7365 6c66 2e6d   market = self.m
-00037c70: 6172 6b65 7428 7379 6d62 6f6c 290a 2020  arket(symbol).  
-00037c80: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-00037c90: 7b0a 2020 2020 2020 2020 2020 2020 2773  {.            's
-00037ca0: 796d 626f 6c27 3a20 6d61 726b 6574 5b27  ymbol': market['
-00037cb0: 6964 275d 2c0a 2020 2020 2020 2020 7d0a  id'],.        }.
-00037cc0: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
-00037cd0: 203d 2073 656c 662e 7072 6976 6174 6544   = self.privateD
-00037ce0: 656c 6574 6553 706f 744f 7264 6572 4261  eleteSpotOrderBa
-00037cf0: 7463 6843 616e 6365 6c28 7365 6c66 2e65  tchCancel(self.e
-00037d00: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
-00037d10: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
-00037d20: 230a 2020 2020 2020 2020 2320 2020 207b  #.        #    {
-00037d30: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00037d40: 2020 2272 6574 5f63 6f64 6522 3a20 302c    "ret_code": 0,
-00037d50: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00037d60: 2020 2272 6574 5f6d 7367 223a 2022 222c    "ret_msg": "",
-00037d70: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00037d80: 2020 2265 7874 5f63 6f64 6522 3a20 6e75    "ext_code": nu
-00037d90: 6c6c 2c0a 2020 2020 2020 2020 2320 2020  ll,.        #   
-00037da0: 2020 2020 2022 6578 745f 696e 666f 223a       "ext_info":
-00037db0: 206e 756c 6c2c 0a20 2020 2020 2020 2023   null,.        #
-00037dc0: 2020 2020 2020 2020 2272 6573 756c 7422          "result"
-00037dd0: 3a20 7b0a 2020 2020 2020 2020 2320 2020  : {.        #   
-00037de0: 2020 2020 2020 2020 2022 7375 6363 6573           "succes
-00037df0: 7322 3a20 5472 7565 0a20 2020 2020 2020  s": True.       
-00037e00: 2023 2020 2020 2020 2020 7d0a 2020 2020   #        }.    
-00037e10: 2020 2020 2320 2020 207d 0a20 2020 2020      #    }.     
-00037e20: 2020 2023 0a20 2020 2020 2020 2072 6573     #.        res
-00037e30: 756c 7420 3d20 7365 6c66 2e73 6166 655f  ult = self.safe_
-00037e40: 7661 6c75 6528 7265 7370 6f6e 7365 2c20  value(response, 
-00037e50: 2772 6573 756c 7427 2c20 5b5d 290a 2020  'result', []).  
-00037e60: 2020 2020 2020 6966 206e 6f74 2069 7369        if not isi
-00037e70: 6e73 7461 6e63 6528 7265 7375 6c74 2c20  nstance(result, 
-00037e80: 6c69 7374 293a 0a20 2020 2020 2020 2020  list):.         
-00037e90: 2020 2072 6574 7572 6e20 7265 7370 6f6e     return respon
-00037ea0: 7365 0a20 2020 2020 2020 2072 6574 7572  se.        retur
-00037eb0: 6e20 7365 6c66 2e70 6172 7365 5f6f 7264  n self.parse_ord
-00037ec0: 6572 7328 7265 7375 6c74 2c20 6d61 726b  ers(result, mark
-00037ed0: 6574 290a 0a20 2020 2064 6566 2063 616e  et)..    def can
-00037ee0: 6365 6c5f 616c 6c5f 756e 6966 6965 645f  cel_all_unified_
-00037ef0: 6d61 7267 696e 5f6f 7264 6572 7328 7365  margin_orders(se
-00037f00: 6c66 2c20 7379 6d62 6f6c 3a20 4f70 7469  lf, symbol: Opti
-00037f10: 6f6e 616c 5b73 7472 5d20 3d20 4e6f 6e65  onal[str] = None
-00037f20: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
-00037f30: 2020 2020 2020 7365 6c66 2e6c 6f61 645f        self.load_
-00037f40: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
-00037f50: 2020 6d61 726b 6574 203d 204e 6f6e 650a    market = None.
-00037f60: 2020 2020 2020 2020 7365 7474 6c65 203d          settle =
-00037f70: 204e 6f6e 650a 2020 2020 2020 2020 7265   None.        re
-00037f80: 7175 6573 7420 3d20 7b7d 0a20 2020 2020  quest = {}.     
-00037f90: 2020 2069 6620 7379 6d62 6f6c 2069 7320     if symbol is 
-00037fa0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00037fb0: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
-00037fc0: 656c 662e 6d61 726b 6574 2873 796d 626f  elf.market(symbo
-00037fd0: 6c29 0a20 2020 2020 2020 2020 2020 2073  l).            s
-00037fe0: 6574 746c 6520 3d20 6d61 726b 6574 5b27  ettle = market['
-00037ff0: 7365 7474 6c65 275d 0a20 2020 2020 2020  settle'].       
-00038000: 2020 2020 2072 6571 7565 7374 5b27 7379       request['sy
-00038010: 6d62 6f6c 275d 203d 206d 6172 6b65 745b  mbol'] = market[
-00038020: 2769 6427 5d0a 2020 2020 2020 2020 7375  'id'].        su
-00038030: 6254 7970 6520 3d20 4e6f 6e65 0a20 2020  bType = None.   
-00038040: 2020 2020 2073 7562 5479 7065 2c20 7061       subType, pa
-00038050: 7261 6d73 203d 2073 656c 662e 6861 6e64  rams = self.hand
-00038060: 6c65 5f73 7562 5f74 7970 655f 616e 645f  le_sub_type_and_
-00038070: 7061 7261 6d73 2827 6361 6e63 656c 416c  params('cancelAl
-00038080: 6c4f 7264 6572 7327 2c20 6d61 726b 6574  lOrders', market
-00038090: 2c20 7061 7261 6d73 2c20 276c 696e 6561  , params, 'linea
-000380a0: 7227 290a 2020 2020 2020 2020 7265 7175  r').        requ
-000380b0: 6573 745b 2763 6174 6567 6f72 7927 5d20  est['category'] 
-000380c0: 3d20 7375 6254 7970 650a 2020 2020 2020  = subType.      
-000380d0: 2020 7365 7474 6c65 2c20 7061 7261 6d73    settle, params
-000380e0: 203d 2073 656c 662e 6861 6e64 6c65 5f6f   = self.handle_o
-000380f0: 7074 696f 6e5f 616e 645f 7061 7261 6d73  ption_and_params
-00038100: 2870 6172 616d 732c 2027 6361 6e63 656c  (params, 'cancel
-00038110: 416c 6c4f 7264 6572 7327 2c20 2773 6574  AllOrders', 'set
-00038120: 746c 6527 2c20 7365 7474 6c65 290a 2020  tle', settle).  
-00038130: 2020 2020 2020 6966 2073 6574 746c 6520        if settle 
-00038140: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00038150: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00038160: 5b27 7365 7474 6c65 436f 696e 275d 203d  ['settleCoin'] =
-00038170: 2073 6574 746c 650a 2020 2020 2020 2020   settle.        
-00038180: 6973 5374 6f70 203d 2073 656c 662e 7361  isStop = self.sa
-00038190: 6665 5f76 616c 7565 2870 6172 616d 732c  fe_value(params,
-000381a0: 2027 7374 6f70 272c 2046 616c 7365 290a   'stop', False).
-000381b0: 2020 2020 2020 2020 7061 7261 6d73 203d          params =
-000381c0: 2073 656c 662e 6f6d 6974 2870 6172 616d   self.omit(param
-000381d0: 732c 205b 2773 746f 7027 5d29 0a20 2020  s, ['stop']).   
-000381e0: 2020 2020 2069 6620 6973 5374 6f70 3a0a       if isStop:.
-000381f0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00038200: 6573 745b 276f 7264 6572 4669 6c74 6572  est['orderFilter
-00038210: 275d 203d 2027 5374 6f70 4f72 6465 7227  '] = 'StopOrder'
-00038220: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
-00038230: 6520 3d20 7365 6c66 2e70 7269 7661 7465  e = self.private
-00038240: 506f 7374 556e 6966 6965 6456 3350 7269  PostUnifiedV3Pri
-00038250: 7661 7465 4f72 6465 7243 616e 6365 6c41  vateOrderCancelA
-00038260: 6c6c 2873 656c 662e 6578 7465 6e64 2872  ll(self.extend(r
-00038270: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
-00038280: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00038290: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
-000382a0: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-000382b0: 7443 6f64 6522 3a20 302c 0a20 2020 2020  tCode": 0,.     
-000382c0: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-000382d0: 744d 7367 223a 2022 4f4b 222c 0a20 2020  tMsg": "OK",.   
-000382e0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-000382f0: 7265 7375 6c74 223a 207b 0a20 2020 2020  result": {.     
-00038300: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00038310: 2022 6c69 7374 223a 205b 7b0a 2020 2020   "list": [{.    
-00038320: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00038330: 2020 2020 2020 2020 2020 2263 6174 6567            "categ
-00038340: 6f72 7922 3a20 226f 7074 696f 6e22 2c0a  ory": "option",.
-00038350: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00038360: 2020 2020 2020 2020 2020 2020 2020 2273                "s
-00038370: 796d 626f 6c22 3a20 2242 5443 2d32 344a  ymbol": "BTC-24J
-00038380: 554e 3232 2d34 3530 3030 2d50 222c 0a20  UN22-45000-P",. 
-00038390: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000383a0: 2020 2020 2020 2020 2020 2020 2022 6f72               "or
-000383b0: 6465 7249 6422 3a20 2262 6435 6633 6233  derId": "bd5f3b3
-000383c0: 342d 6436 3464 2d34 6236 302d 3831 3838  4-d64d-4b60-8188
-000383d0: 2d34 3338 6662 6561 3463 3535 3222 2c0a  -438fbea4c552",.
-000383e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000383f0: 2020 2020 2020 2020 2020 2020 2020 226f                "o
-00038400: 7264 6572 4c69 6e6b 4964 223a 2022 6163  rderLinkId": "ac
-00038410: 3465 3362 3334 2d64 3634 642d 3462 3630  4e3b34-d64d-4b60
-00038420: 2d38 3138 382d 3433 3866 6265 6134 6335  -8188-438fbea4c5
-00038430: 3532 222c 0a20 2020 2020 2020 2023 2020  52",.        #  
-00038440: 2020 2020 2020 2020 2020 2020 2020 207d                 }
-00038450: 2c20 7b0a 2020 2020 2020 2020 2320 2020  , {.        #   
-00038460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038470: 2020 2263 6174 6567 6f72 7922 3a20 226f    "category": "o
-00038480: 7074 696f 6e22 2c0a 2020 2020 2020 2020  ption",.        
-00038490: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-000384a0: 2020 2020 2020 2273 796d 626f 6c22 3a20        "symbol": 
-000384b0: 2242 5443 2d32 344a 554e 3232 2d34 3530  "BTC-24JUN22-450
-000384c0: 3030 2d50 222c 0a20 2020 2020 2020 2023  00-P",.        #
-000384d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000384e0: 2020 2020 2022 6f72 6465 7249 6422 3a20       "orderId": 
-000384f0: 2234 6464 6437 3237 612d 3261 6638 2d34  "4ddd727a-2af8-4
-00038500: 3330 652d 6132 3933 2d34 3238 3935 6535  30e-a293-42895e5
-00038510: 3934 6431 3822 2c0a 2020 2020 2020 2020  94d18",.        
-00038520: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00038530: 2020 2020 2020 226f 7264 6572 4c69 6e6b        "orderLink
-00038540: 4964 223a 2022 3563 6565 3732 3761 2d32  Id": "5cee727a-2
-00038550: 6166 382d 3433 3065 2d61 3239 332d 3432  af8-430e-a293-42
-00038560: 3839 3565 3539 3464 3138 222c 0a20 2020  895e594d18",.   
-00038570: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00038580: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-00038590: 2023 2020 2020 2020 2020 2020 2020 205d   #             ]
-000385a0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000385b0: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
-000385c0: 2020 2020 2020 2020 2272 6574 4578 7449          "retExtI
-000385d0: 6e66 6f22 3a20 7b0a 2020 2020 2020 2020  nfo": {.        
-000385e0: 2320 2020 2020 2020 2020 2020 2020 226c  #             "l
-000385f0: 6973 7422 3a20 5b7b 0a20 2020 2020 2020  ist": [{.       
-00038600: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00038610: 2020 2022 636f 6465 223a 2030 2c0a 2020     "code": 0,.  
-00038620: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00038630: 2020 2020 2020 2020 226d 7367 223a 2022          "msg": "
-00038640: 4f4b 220a 2020 2020 2020 2020 2320 2020  OK".        #   
-00038650: 2020 2020 2020 2020 2020 7d2c 207b 0a20            }, {. 
-00038660: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00038670: 2020 2020 2020 2020 2022 636f 6465 223a           "code":
-00038680: 2030 2c0a 2020 2020 2020 2020 2320 2020   0,.        #   
-00038690: 2020 2020 2020 2020 2020 2020 2020 226d                "m
-000386a0: 7367 223a 2022 4f4b 220a 2020 2020 2020  sg": "OK".      
-000386b0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000386c0: 7d5d 0a20 2020 2020 2020 2023 2020 2020  }].        #    
-000386d0: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
-000386e0: 2320 2020 2020 2020 2020 2274 696d 6522  #         "time"
-000386f0: 3a20 3136 3537 3230 3037 3336 3537 300a  : 1657200736570.
-00038700: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-00038710: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-00038720: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
-00038730: 7361 6665 5f76 616c 7565 2872 6573 706f  safe_value(respo
-00038740: 6e73 652c 2027 7265 7375 6c74 272c 205b  nse, 'result', [
-00038750: 5d29 0a20 2020 2020 2020 206f 7264 6572  ]).        order
-00038760: 7320 3d20 7365 6c66 2e73 6166 655f 7661  s = self.safe_va
-00038770: 6c75 6528 7265 7375 6c74 2c20 276c 6973  lue(result, 'lis
-00038780: 7427 290a 2020 2020 2020 2020 6966 206e  t').        if n
-00038790: 6f74 2069 7369 6e73 7461 6e63 6528 6f72  ot isinstance(or
-000387a0: 6465 7273 2c20 6c69 7374 293a 0a20 2020  ders, list):.   
-000387b0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000387c0: 7265 7370 6f6e 7365 0a20 2020 2020 2020  response.       
-000387d0: 2072 6574 7572 6e20 7365 6c66 2e70 6172   return self.par
-000387e0: 7365 5f6f 7264 6572 7328 6f72 6465 7273  se_orders(orders
-000387f0: 2c20 6d61 726b 6574 290a 0a20 2020 2064  , market)..    d
-00038800: 6566 2063 616e 6365 6c5f 616c 6c5f 7573  ef cancel_all_us
-00038810: 6463 5f6f 7264 6572 7328 7365 6c66 2c20  dc_orders(self, 
-00038820: 7379 6d62 6f6c 3a20 4f70 7469 6f6e 616c  symbol: Optional
-00038830: 5b73 7472 5d20 3d20 4e6f 6e65 2c20 7061  [str] = None, pa
-00038840: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
-00038850: 2020 6966 2073 796d 626f 6c20 6973 204e    if symbol is N
-00038860: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-00038870: 2072 6169 7365 2041 7267 756d 656e 7473   raise Arguments
-00038880: 5265 7175 6972 6564 2873 656c 662e 6964  Required(self.id
-00038890: 202b 2027 2063 616e 6365 6c41 6c6c 5553   + ' cancelAllUS
-000388a0: 4443 4f72 6465 7273 2829 2072 6571 7569  DCOrders() requi
-000388b0: 7265 7320 6120 7379 6d62 6f6c 2061 7267  res a symbol arg
-000388c0: 756d 656e 7427 290a 2020 2020 2020 2020  ument').        
-000388d0: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
-000388e0: 7328 290a 2020 2020 2020 2020 6d61 726b  s().        mark
-000388f0: 6574 203d 2073 656c 662e 6d61 726b 6574  et = self.market
-00038900: 2873 796d 626f 6c29 0a20 2020 2020 2020  (symbol).       
-00038910: 206d 6574 686f 6420 3d20 4e6f 6e65 0a20   method = None. 
-00038920: 2020 2020 2020 2072 6571 7565 7374 203d         request =
-00038930: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
-00038940: 7379 6d62 6f6c 273a 206d 6172 6b65 745b  symbol': market[
-00038950: 2769 6427 5d2c 0a20 2020 2020 2020 207d  'id'],.        }
-00038960: 0a20 2020 2020 2020 2069 6620 6d61 726b  .        if mark
-00038970: 6574 5b27 6f70 7469 6f6e 275d 3a0a 2020  et['option']:.  
-00038980: 2020 2020 2020 2020 2020 6d65 7468 6f64            method
-00038990: 203d 2027 7072 6976 6174 6550 6f73 744f   = 'privatePostO
-000389a0: 7074 696f 6e55 7364 634f 7065 6e61 7069  ptionUsdcOpenapi
-000389b0: 5072 6976 6174 6556 3143 616e 6365 6c41  PrivateV1CancelA
-000389c0: 6c6c 270a 2020 2020 2020 2020 656c 7365  ll'.        else
-000389d0: 3a0a 2020 2020 2020 2020 2020 2020 6d65  :.            me
-000389e0: 7468 6f64 203d 2027 7072 6976 6174 6550  thod = 'privateP
-000389f0: 6f73 7450 6572 7065 7475 616c 5573 6463  ostPerpetualUsdc
-00038a00: 4f70 656e 6170 6950 7269 7661 7465 5631  OpenapiPrivateV1
-00038a10: 4361 6e63 656c 416c 6c27 0a20 2020 2020  CancelAll'.     
-00038a20: 2020 2020 2020 2069 7353 746f 7020 3d20         isStop = 
-00038a30: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
-00038a40: 7061 7261 6d73 2c20 2773 746f 7027 2c20  params, 'stop', 
-00038a50: 4661 6c73 6529 0a20 2020 2020 2020 2020  False).         
-00038a60: 2020 2069 6620 6973 5374 6f70 3a0a 2020     if isStop:.  
-00038a70: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00038a80: 7175 6573 745b 276f 7264 6572 4669 6c74  quest['orderFilt
-00038a90: 6572 275d 203d 2027 5374 6f70 4f72 6465  er'] = 'StopOrde
-00038aa0: 7227 0a20 2020 2020 2020 2020 2020 2065  r'.            e
-00038ab0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00038ac0: 2020 2020 2072 6571 7565 7374 5b27 6f72       request['or
-00038ad0: 6465 7246 696c 7465 7227 5d20 3d20 274f  derFilter'] = 'O
-00038ae0: 7264 6572 270a 2020 2020 2020 2020 2020  rder'.          
-00038af0: 2020 7061 7261 6d73 203d 2073 656c 662e    params = self.
-00038b00: 6f6d 6974 2870 6172 616d 732c 205b 2773  omit(params, ['s
-00038b10: 746f 7027 5d29 0a20 2020 2020 2020 2072  top']).        r
-00038b20: 6573 706f 6e73 6520 3d20 6765 7461 7474  esponse = getatt
-00038b30: 7228 7365 6c66 2c20 6d65 7468 6f64 2928  r(self, method)(
-00038b40: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
-00038b50: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
-00038b60: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00038b70: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
-00038b80: 2320 2020 2020 2020 2020 2272 6574 436f  #         "retCo
-00038b90: 6465 223a 2030 2c0a 2020 2020 2020 2020  de": 0,.        
-00038ba0: 2320 2020 2020 2020 2020 2272 6574 4d73  #         "retMs
-00038bb0: 6722 3a20 224f 4b22 2c0a 2020 2020 2020  g": "OK",.      
-00038bc0: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
-00038bd0: 4578 744d 6170 223a 207b 7d2c 0a20 2020  ExtMap": {},.   
-00038be0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00038bf0: 7265 7375 6c74 223a 205b 0a20 2020 2020  result": [.     
-00038c00: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00038c10: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-00038c20: 2020 2020 2020 2020 2020 2020 2022 6f75               "ou
-00038c30: 7452 6571 7565 7374 4964 223a 2022 6361  tRequestId": "ca
-00038c40: 6e63 656c 416c 6c2d 3239 3031 3139 2d31  ncelAll-290119-1
-00038c50: 3635 3231 3736 3434 3331 3134 2d30 222c  652176443114-0",
-00038c60: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00038c70: 2020 2020 2020 2020 2020 2022 7379 6d62             "symb
-00038c80: 6f6c 223a 2022 4254 432d 3133 4d41 5932  ol": "BTC-13MAY2
-00038c90: 322d 3430 3030 302d 4322 2c0a 2020 2020  2-40000-C",.    
-00038ca0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00038cb0: 2020 2020 2020 226f 7264 6572 4964 223a        "orderId":
-00038cc0: 2022 6661 3663 6437 3430 2d35 3665 642d   "fa6cd740-56ed-
-00038cd0: 3437 3764 2d39 3338 352d 3930 6363 6266  477d-9385-90ccbf
-00038ce0: 6565 3439 6361 222c 0a20 2020 2020 2020  ee49ca",.       
-00038cf0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00038d00: 2020 2022 6f72 6465 724c 696e 6b49 6422     "orderLinkId"
-00038d10: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
-00038d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038d30: 2265 7272 6f72 436f 6465 223a 2030 2c0a  "errorCode": 0,.
-00038d40: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00038d50: 2020 2020 2020 2020 2020 2265 7272 6f72            "error
-00038d60: 4465 7363 223a 2022 220a 2020 2020 2020  Desc": "".      
-00038d70: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00038d80: 7d0a 2020 2020 2020 2020 2320 2020 2020  }.        #     
-00038d90: 2020 2020 5d0a 2020 2020 2020 2020 2320      ].        # 
-00038da0: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
-00038db0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-00038dc0: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-00038dd0: 2872 6573 706f 6e73 652c 2027 7265 7375  (response, 'resu
-00038de0: 6c74 272c 205b 5d29 0a20 2020 2020 2020  lt', []).       
-00038df0: 2069 6620 6e6f 7420 6973 696e 7374 616e   if not isinstan
-00038e00: 6365 2872 6573 756c 742c 206c 6973 7429  ce(result, list)
-00038e10: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00038e20: 7475 726e 2072 6573 706f 6e73 650a 2020  turn response.  
-00038e30: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00038e40: 662e 7061 7273 655f 6f72 6465 7273 2872  f.parse_orders(r
-00038e50: 6573 756c 742c 206d 6172 6b65 7429 0a0a  esult, market)..
-00038e60: 2020 2020 6465 6620 6361 6e63 656c 5f61      def cancel_a
-00038e70: 6c6c 5f64 6572 6976 6174 6976 6573 5f6f  ll_derivatives_o
-00038e80: 7264 6572 7328 7365 6c66 2c20 7379 6d62  rders(self, symb
-00038e90: 6f6c 3a20 4f70 7469 6f6e 616c 5b73 7472  ol: Optional[str
-00038ea0: 5d20 3d20 4e6f 6e65 2c20 7061 7261 6d73  ] = None, params
-00038eb0: 3d7b 7d29 3a0a 2020 2020 2020 2020 7365  ={}):.        se
-00038ec0: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
-00038ed0: 290a 2020 2020 2020 2020 6d61 726b 6574  ).        market
-00038ee0: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-00038ef0: 7365 7474 6c65 203d 204e 6f6e 650a 2020  settle = None.  
-00038f00: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-00038f10: 7b7d 0a20 2020 2020 2020 2069 6620 7379  {}.        if sy
-00038f20: 6d62 6f6c 2069 7320 6e6f 7420 4e6f 6e65  mbol is not None
-00038f30: 3a0a 2020 2020 2020 2020 2020 2020 6d61  :.            ma
-00038f40: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
-00038f50: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
-00038f60: 2020 2020 2020 2073 6574 746c 6520 3d20         settle = 
-00038f70: 6d61 726b 6574 5b27 7365 7474 6c65 275d  market['settle']
-00038f80: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-00038f90: 7565 7374 5b27 7379 6d62 6f6c 275d 203d  uest['symbol'] =
-00038fa0: 206d 6172 6b65 745b 2769 6427 5d0a 2020   market['id'].  
-00038fb0: 2020 2020 2020 7365 7474 6c65 2c20 7061        settle, pa
-00038fc0: 7261 6d73 203d 2073 656c 662e 6861 6e64  rams = self.hand
-00038fd0: 6c65 5f6f 7074 696f 6e5f 616e 645f 7061  le_option_and_pa
-00038fe0: 7261 6d73 2870 6172 616d 732c 2027 6361  rams(params, 'ca
-00038ff0: 6e63 656c 416c 6c4f 7264 6572 7327 2c20  ncelAllOrders', 
-00039000: 2773 6574 746c 6527 2c20 7365 7474 6c65  'settle', settle
-00039010: 290a 2020 2020 2020 2020 6966 2073 6574  ).        if set
-00039020: 746c 6520 6973 206e 6f74 204e 6f6e 653a  tle is not None:
-00039030: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-00039040: 7565 7374 5b27 7365 7474 6c65 436f 696e  uest['settleCoin
-00039050: 275d 203d 2073 6574 746c 650a 2020 2020  '] = settle.    
-00039060: 2020 2020 7265 7370 6f6e 7365 203d 2073      response = s
-00039070: 656c 662e 7072 6976 6174 6550 6f73 7443  elf.privatePostC
-00039080: 6f6e 7472 6163 7456 3350 7269 7661 7465  ontractV3Private
-00039090: 4f72 6465 7243 616e 6365 6c41 6c6c 2873  OrderCancelAll(s
-000390a0: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
-000390b0: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
-000390c0: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-000390d0: 2063 6f6e 7472 6163 7420 7633 0a20 2020   contract v3.   
-000390e0: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-000390f0: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
-00039100: 2020 2020 2020 2020 2022 7265 7443 6f64           "retCod
-00039110: 6522 3a20 302c 0a20 2020 2020 2020 2023  e": 0,.        #
-00039120: 2020 2020 2020 2020 2022 7265 744d 7367           "retMsg
-00039130: 223a 2022 4f4b 222c 0a20 2020 2020 2020  ": "OK",.       
-00039140: 2023 2020 2020 2020 2020 2022 7265 7375   #         "resu
-00039150: 6c74 223a 207b 0a20 2020 2020 2020 2023  lt": {.        #
-00039160: 2020 2020 2020 2020 2020 2020 2022 6c69               "li
-00039170: 7374 223a 205b 0a20 2020 2020 2020 2023  st": [.        #
-00039180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00039190: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-000391a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000391b0: 2022 6f72 6465 7249 6422 3a20 2234 3033   "orderId": "403
-000391c0: 3034 3330 642d 3164 6261 2d34 3133 342d  0430d-1dba-4134-
-000391d0: 6163 3737 2d33 6438 3163 3134 6161 6130  ac77-3d81c14aaa0
-000391e0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-000391f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00039200: 2020 226f 7264 6572 4c69 6e6b 4964 223a    "orderLinkId":
-00039210: 2022 7830 3031 220a 2020 2020 2020 2020   "x001".        
-00039220: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00039230: 2020 7d0a 2020 2020 2020 2020 2320 2020    }.        #   
-00039240: 2020 2020 2020 2020 2020 5d0a 2020 2020            ].    
-00039250: 2020 2020 2320 2020 2020 2020 2020 7d2c      #         },
-00039260: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00039270: 2020 2022 7265 7445 7874 496e 666f 223a     "retExtInfo":
-00039280: 207b 7d2c 0a20 2020 2020 2020 2023 2020   {},.        #  
-00039290: 2020 2020 2020 2022 7469 6d65 223a 2031         "time": 1
-000392a0: 3635 3839 3031 3335 3932 3235 0a20 2020  658901359225.   
-000392b0: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
-000392c0: 2020 2020 2023 0a20 2020 2020 2020 2072       #.        r
-000392d0: 6573 756c 7420 3d20 7365 6c66 2e73 6166  esult = self.saf
-000392e0: 655f 7661 6c75 6528 7265 7370 6f6e 7365  e_value(response
-000392f0: 2c20 2772 6573 756c 7427 2c20 5b5d 290a  , 'result', []).
-00039300: 2020 2020 2020 2020 6f72 6465 7273 203d          orders =
-00039310: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-00039320: 2872 6573 756c 742c 2027 6c69 7374 272c  (result, 'list',
-00039330: 205b 5d29 0a20 2020 2020 2020 2072 6574   []).        ret
-00039340: 7572 6e20 7365 6c66 2e70 6172 7365 5f6f  urn self.parse_o
-00039350: 7264 6572 7328 6f72 6465 7273 2c20 6d61  rders(orders, ma
-00039360: 726b 6574 290a 0a20 2020 2064 6566 2063  rket)..    def c
-00039370: 616e 6365 6c5f 616c 6c5f 6f72 6465 7273  ancel_all_orders
-00039380: 2873 656c 662c 2073 796d 626f 6c3a 204f  (self, symbol: O
-00039390: 7074 696f 6e61 6c5b 7374 725d 203d 204e  ptional[str] = N
-000393a0: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
-000393b0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-000393c0: 2020 2020 2063 616e 6365 6c20 616c 6c20       cancel all 
-000393d0: 6f70 656e 206f 7264 6572 730a 2020 2020  open orders.    
-000393e0: 2020 2020 3a70 6172 616d 2073 7472 7c4e      :param str|N
-000393f0: 6f6e 6520 7379 6d62 6f6c 3a20 756e 6966  one symbol: unif
-00039400: 6965 6420 6d61 726b 6574 2073 796d 626f  ied market symbo
-00039410: 6c2c 206f 6e6c 7920 6f72 6465 7273 2069  l, only orders i
-00039420: 6e20 7468 6520 6d61 726b 6574 206f 6620  n the market of 
-00039430: 7365 6c66 2073 796d 626f 6c20 6172 6520  self symbol are 
-00039440: 6361 6e63 656c 6c65 6420 7768 656e 2073  cancelled when s
-00039450: 796d 626f 6c20 6973 206e 6f74 204e 6f6e  ymbol is not Non
-00039460: 650a 2020 2020 2020 2020 3a70 6172 616d  e.        :param
-00039470: 2064 6963 7420 7061 7261 6d73 3a20 6578   dict params: ex
-00039480: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
-00039490: 7065 6369 6669 6320 746f 2074 6865 2062  pecific to the b
-000394a0: 7962 6974 2061 7069 2065 6e64 706f 696e  ybit api endpoin
-000394b0: 740a 2020 2020 2020 2020 3a72 6574 7572  t.        :retur
-000394c0: 6e73 205b 6469 6374 5d3a 2061 206c 6973  ns [dict]: a lis
-000394d0: 7420 6f66 2060 6f72 6465 7220 7374 7275  t of `order stru
-000394e0: 6374 7572 6573 203c 6874 7470 733a 2f2f  ctures <https://
-000394f0: 646f 6373 2e63 6378 742e 636f 6d2f 232f  docs.ccxt.com/#/
-00039500: 3f69 643d 6f72 6465 722d 7374 7275 6374  ?id=order-struct
-00039510: 7572 653e 600a 2020 2020 2020 2020 2222  ure>`.        ""
-00039520: 220a 2020 2020 2020 2020 7365 6c66 2e6c  ".        self.l
-00039530: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
-00039540: 2020 2020 2020 6d61 726b 6574 203d 204e        market = N
-00039550: 6f6e 650a 2020 2020 2020 2020 7365 7474  one.        sett
-00039560: 6c65 203d 2073 656c 662e 7361 6665 5f73  le = self.safe_s
-00039570: 7472 696e 6728 7061 7261 6d73 2c20 2773  tring(params, 's
-00039580: 6574 746c 6543 6f69 6e27 290a 2020 2020  ettleCoin').    
-00039590: 2020 2020 6966 2073 6574 746c 6520 6973      if settle is
-000395a0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-000395b0: 2020 2073 6574 746c 652c 2070 6172 616d     settle, param
-000395c0: 7320 3d20 7365 6c66 2e68 616e 646c 655f  s = self.handle_
-000395d0: 6f70 7469 6f6e 5f61 6e64 5f70 6172 616d  option_and_param
-000395e0: 7328 7061 7261 6d73 2c20 2763 616e 6365  s(params, 'cance
-000395f0: 6c41 6c6c 4f72 6465 7273 272c 2027 7365  lAllOrders', 'se
-00039600: 7474 6c65 272c 2073 6574 746c 6529 0a20  ttle', settle). 
-00039610: 2020 2020 2020 2069 6620 7379 6d62 6f6c         if symbol
-00039620: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00039630: 2020 2020 2020 2020 2020 6d61 726b 6574            market
-00039640: 203d 2073 656c 662e 6d61 726b 6574 2873   = self.market(s
-00039650: 796d 626f 6c29 0a20 2020 2020 2020 2020  ymbol).         
-00039660: 2020 2073 6574 746c 6520 3d20 6d61 726b     settle = mark
-00039670: 6574 5b27 7365 7474 6c65 275d 0a20 2020  et['settle'].   
-00039680: 2020 2020 2073 7562 5479 7065 203d 204e       subType = N
-00039690: 6f6e 650a 2020 2020 2020 2020 7375 6254  one.        subT
-000396a0: 7970 652c 2070 6172 616d 7320 3d20 7365  ype, params = se
-000396b0: 6c66 2e68 616e 646c 655f 7375 625f 7479  lf.handle_sub_ty
-000396c0: 7065 5f61 6e64 5f70 6172 616d 7328 2763  pe_and_params('c
-000396d0: 616e 6365 6c41 6c6c 4f72 6465 7273 272c  ancelAllOrders',
-000396e0: 206d 6172 6b65 742c 2070 6172 616d 7329   market, params)
-000396f0: 0a20 2020 2020 2020 2069 7355 7364 6353  .        isUsdcS
-00039700: 6574 746c 6564 203d 2073 6574 746c 6520  ettled = settle 
-00039710: 3d3d 2027 5553 4443 270a 2020 2020 2020  == 'USDC'.      
-00039720: 2020 6973 496e 7665 7273 6520 3d20 7375    isInverse = su
-00039730: 6254 7970 6520 3d3d 2027 696e 7665 7273  bType == 'invers
-00039740: 6527 0a20 2020 2020 2020 2069 734c 696e  e'.        isLin
-00039750: 6561 7253 6574 746c 6520 3d20 6973 5573  earSettle = isUs
-00039760: 6463 5365 7474 6c65 6420 6f72 2028 7365  dcSettled or (se
-00039770: 7474 6c65 203d 3d20 2755 5344 5427 290a  ttle == 'USDT').
-00039780: 2020 2020 2020 2020 6966 2069 7349 6e76          if isInv
-00039790: 6572 7365 2061 6e64 2069 734c 696e 6561  erse and isLinea
-000397a0: 7253 6574 746c 653a 0a20 2020 2020 2020  rSettle:.       
-000397b0: 2020 2020 2072 6169 7365 2041 7267 756d       raise Argum
-000397c0: 656e 7473 5265 7175 6972 6564 2873 656c  entsRequired(sel
-000397d0: 662e 6964 202b 2027 2063 616e 6365 6c41  f.id + ' cancelA
-000397e0: 6c6c 4f72 6465 7273 2077 6974 6820 696e  llOrders with in
-000397f0: 7665 7273 6520 7375 6254 7970 6520 7265  verse subType re
-00039800: 7175 6972 6573 2073 6574 746c 6520 746f  quires settle to
-00039810: 206e 6f74 2062 6520 5553 4454 206f 7220   not be USDT or 
-00039820: 5553 4443 2729 0a20 2020 2020 2020 2074  USDC').        t
-00039830: 7970 652c 2071 7565 7279 203d 2073 656c  ype, query = sel
-00039840: 662e 6861 6e64 6c65 5f6d 6172 6b65 745f  f.handle_market_
-00039850: 7479 7065 5f61 6e64 5f70 6172 616d 7328  type_and_params(
-00039860: 2763 616e 6365 6c41 6c6c 4f72 6465 7273  'cancelAllOrders
-00039870: 272c 206d 6172 6b65 742c 2070 6172 616d  ', market, param
-00039880: 7329 0a20 2020 2020 2020 2065 6e61 626c  s).        enabl
-00039890: 6555 6e69 6669 6564 4d61 7267 696e 2c20  eUnifiedMargin, 
-000398a0: 656e 6162 6c65 556e 6966 6965 6441 6363  enableUnifiedAcc
-000398b0: 6f75 6e74 203d 2073 656c 662e 6973 5f75  ount = self.is_u
-000398c0: 6e69 6669 6564 5f65 6e61 626c 6564 2829  nified_enabled()
-000398d0: 0a20 2020 2020 2020 2069 6620 656e 6162  .        if enab
-000398e0: 6c65 556e 6966 6965 6441 6363 6f75 6e74  leUnifiedAccount
-000398f0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00039900: 7475 726e 2073 656c 662e 6361 6e63 656c  turn self.cancel
-00039910: 5f61 6c6c 5f75 6e69 6669 6564 5f61 6363  _all_unified_acc
-00039920: 6f75 6e74 5f6f 7264 6572 7328 7379 6d62  ount_orders(symb
-00039930: 6f6c 2c20 7175 6572 7929 0a20 2020 2020  ol, query).     
-00039940: 2020 2065 6c69 6620 7479 7065 203d 3d20     elif type == 
-00039950: 2773 706f 7427 3a0a 2020 2020 2020 2020  'spot':.        
-00039960: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00039970: 6361 6e63 656c 5f61 6c6c 5f73 706f 745f  cancel_all_spot_
-00039980: 6f72 6465 7273 2873 796d 626f 6c2c 2071  orders(symbol, q
-00039990: 7565 7279 290a 2020 2020 2020 2020 656c  uery).        el
-000399a0: 6966 2065 6e61 626c 6555 6e69 6669 6564  if enableUnified
-000399b0: 4d61 7267 696e 2061 6e64 206e 6f74 2069  Margin and not i
-000399c0: 7349 6e76 6572 7365 3a0a 2020 2020 2020  sInverse:.      
-000399d0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-000399e0: 662e 6361 6e63 656c 5f61 6c6c 5f75 6e69  f.cancel_all_uni
-000399f0: 6669 6564 5f6d 6172 6769 6e5f 6f72 6465  fied_margin_orde
-00039a00: 7273 2873 796d 626f 6c2c 2071 7565 7279  rs(symbol, query
-00039a10: 290a 2020 2020 2020 2020 656c 6966 2069  ).        elif i
-00039a20: 7355 7364 6353 6574 746c 6564 3a0a 2020  sUsdcSettled:.  
-00039a30: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00039a40: 2073 656c 662e 6361 6e63 656c 5f61 6c6c   self.cancel_all
-00039a50: 5f75 7364 635f 6f72 6465 7273 2873 796d  _usdc_orders(sym
-00039a60: 626f 6c2c 2071 7565 7279 290a 2020 2020  bol, query).    
-00039a70: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00039a80: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00039a90: 662e 6361 6e63 656c 5f61 6c6c 5f64 6572  f.cancel_all_der
-00039aa0: 6976 6174 6976 6573 5f6f 7264 6572 7328  ivatives_orders(
-00039ab0: 7379 6d62 6f6c 2c20 7175 6572 7929 0a0a  symbol, query)..
-00039ac0: 2020 2020 6465 6620 6665 7463 685f 756e      def fetch_un
-00039ad0: 6966 6965 645f 6163 636f 756e 745f 6f72  ified_account_or
-00039ae0: 6465 7273 2873 656c 662c 2073 796d 626f  ders(self, symbo
-00039af0: 6c3a 204f 7074 696f 6e61 6c5b 7374 725d  l: Optional[str]
-00039b00: 203d 204e 6f6e 652c 2073 696e 6365 3a20   = None, since: 
-00039b10: 4f70 7469 6f6e 616c 5b69 6e74 5d20 3d20  Optional[int] = 
-00039b20: 4e6f 6e65 2c20 6c69 6d69 743a 204f 7074  None, limit: Opt
-00039b30: 696f 6e61 6c5b 696e 745d 203d 204e 6f6e  ional[int] = Non
-00039b40: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
-00039b50: 2020 2020 2020 2073 656c 662e 6c6f 6164         self.load
-00039b60: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
-00039b70: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
-00039b80: 2020 2020 2020 2020 2020 2023 2027 7379             # 'sy
-00039b90: 6d62 6f6c 273a 206d 6172 6b65 745b 2769  mbol': market['i
-00039ba0: 6427 5d2c 0a20 2020 2020 2020 2020 2020  d'],.           
-00039bb0: 2023 2027 6361 7465 676f 7279 272c 2054   # 'category', T
-00039bc0: 7970 6520 6f66 2064 6572 6976 6174 6976  ype of derivativ
-00039bd0: 6573 2070 726f 6475 6374 3a20 7370 6f74  es product: spot
-00039be0: 2c20 6c69 6e65 6172 206f 7220 6f70 7469  , linear or opti
-00039bf0: 6f6e 2e0a 2020 2020 2020 2020 2020 2020  on..            
-00039c00: 2320 2762 6173 6543 6f69 6e27 2c20 4261  # 'baseCoin', Ba
-00039c10: 7365 2063 6f69 6e2e 2057 6865 6e20 6361  se coin. When ca
-00039c20: 7465 676f 7279 3d6f 7074 696f 6e2e 2049  tegory=option. I
-00039c30: 6620 6e6f 7420 7061 7373 6564 2c20 4254  f not passed, BT
-00039c40: 4320 6279 2064 6566 6175 6c74 3b20 7768  C by default; wh
-00039c50: 656e 2063 6174 6567 6f72 793d 6c69 6e65  en category=line
-00039c60: 6172 2c20 6966 2042 5443 2070 6173 7365  ar, if BTC passe
-00039c70: 642c 2042 5443 5045 5250 2026 2042 5443  d, BTCPERP & BTC
-00039c80: 5553 4454 2072 6574 7572 6e65 642e 0a20  USDT returned.. 
-00039c90: 2020 2020 2020 2020 2020 2023 2027 6f72             # 'or
-00039ca0: 6465 7249 6427 2c20 4f72 6465 7220 4944  derId', Order ID
-00039cb0: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
-00039cc0: 6f72 6465 724c 696e 6b49 6427 2c20 556e  orderLinkId', Un
-00039cd0: 6971 7565 2075 7365 722d 7365 7420 6f72  ique user-set or
-00039ce0: 6465 7220 4944 0a20 2020 2020 2020 2020  der ID.         
-00039cf0: 2020 2023 2027 6f72 6465 7253 7461 7475     # 'orderStatu
-00039d00: 7327 2c20 2023 2052 6574 7572 6e20 616c  s',  # Return al
-00039d10: 6c20 7374 6174 7573 206f 7264 6572 7320  l status orders 
-00039d20: 6966 206e 6f74 2070 6173 7365 640a 2020  if not passed.  
-00039d30: 2020 2020 2020 2020 2020 2320 276f 7264            # 'ord
-00039d40: 6572 4669 6c74 6572 272c 2043 6f6e 6469  erFilter', Condi
-00039d50: 7469 6f6e 616c 206f 7264 6572 206f 7220  tional order or 
-00039d60: 6163 7469 7665 206f 7264 6572 0a20 2020  active order.   
-00039d70: 2020 2020 2020 2020 2023 2027 6c69 6d69           # 'limi
-00039d80: 7427 3a20 6e75 6d62 6572 2c20 4461 7461  t': number, Data
-00039d90: 2071 7561 6e74 6974 7920 7065 7220 7061   quantity per pa
-00039da0: 6765 3a20 4d61 7820 6461 7461 2076 616c  ge: Max data val
-00039db0: 7565 2070 6572 2070 6167 6520 6973 2035  ue per page is 5
-00039dc0: 302c 2061 6e64 2064 6566 6175 6c74 2076  0, and default v
-00039dd0: 616c 7565 2061 7420 3230 2e0a 2020 2020  alue at 20..    
-00039de0: 2020 2020 2020 2020 2320 2763 7572 736f          # 'curso
-00039df0: 7227 2c20 4150 4920 7061 7373 2d74 6872  r', API pass-thr
-00039e00: 6f75 6768 2e20 6163 636f 756e 7454 7970  ough. accountTyp
-00039e10: 6520 2b20 6361 7465 676f 7279 202b 2063  e + category + c
-00039e20: 7572 736f 7220 2b2e 2049 6620 696e 636f  ursor +. If inco
-00039e30: 6e73 6973 7465 6e74 2c20 7468 6520 666f  nsistent, the fo
-00039e40: 6c6c 6f77 696e 6720 7368 6f75 6c64 2062  llowing should b
-00039e50: 6520 7265 7475 726e 6564 3a20 5468 6520  e returned: The 
-00039e60: 6163 636f 756e 7420 7479 7065 2064 6f65  account type doe
-00039e70: 7320 6e6f 7420 6d61 7463 6820 7468 6520  s not match the 
-00039e80: 7365 7276 6963 6520 696e 7175 6972 792e  service inquiry.
-00039e90: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
-00039ea0: 7374 6172 7454 696d 6527 3a20 302c 2020  startTime': 0,  
-00039eb0: 2320 5468 6520 7374 6172 7420 7469 6d65  # The start time
-00039ec0: 7374 616d 7028 6d73 2920 5375 7070 6f72  stamp(ms) Suppor
-00039ed0: 7420 5554 4120 6f6e 6c79 2074 656d 706f  t UTA only tempo
-00039ee0: 7261 7269 6c79 2073 7461 7274 5469 6d65  rarily startTime
-00039ef0: 2061 6e64 2065 6e64 5469 6d65 206d 7573   and endTime mus
-00039f00: 7420 6265 2070 6173 7365 6420 746f 6765  t be passed toge
-00039f10: 7468 6572 2049 6620 6e6f 7420 7061 7373  ther If not pass
-00039f20: 6564 2c20 7175 6572 7920 7468 6520 7061  ed, query the pa
-00039f30: 7374 2037 2064 6179 7320 6461 7461 2062  st 7 days data b
-00039f40: 7920 6465 6661 756c 740a 2020 2020 2020  y default.      
-00039f50: 2020 2020 2020 2320 2765 6e64 5469 6d65        # 'endTime
-00039f60: 273a 2030 2c20 2023 2054 6865 2065 6e64  ': 0,  # The end
-00039f70: 2074 696d 6573 7461 6d70 286d 7329 0a20   timestamp(ms). 
-00039f80: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-00039f90: 206d 6172 6b65 7420 3d20 4e6f 6e65 0a20   market = None. 
-00039fa0: 2020 2020 2020 2069 6620 7379 6d62 6f6c         if symbol
-00039fb0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-00039fc0: 2020 2020 2020 7479 7065 203d 204e 6f6e        type = Non
-00039fd0: 650a 2020 2020 2020 2020 2020 2020 7479  e.            ty
-00039fe0: 7065 2c20 7061 7261 6d73 203d 2073 656c  pe, params = sel
-00039ff0: 662e 6861 6e64 6c65 5f6d 6172 6b65 745f  f.handle_market_
-0003a000: 7479 7065 5f61 6e64 5f70 6172 616d 7328  type_and_params(
-0003a010: 2766 6574 6368 4f72 6465 7273 272c 206d  'fetchOrders', m
-0003a020: 6172 6b65 742c 2070 6172 616d 7329 0a20  arket, params). 
-0003a030: 2020 2020 2020 2020 2020 2023 206f 7074             # opt
-0003a040: 696f 6e2c 2073 706f 740a 2020 2020 2020  ion, spot.      
-0003a050: 2020 2020 2020 7265 7175 6573 745b 2763        request['c
-0003a060: 6174 6567 6f72 7927 5d20 3d20 7479 7065  ategory'] = type
-0003a070: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0003a080: 7479 7065 203d 3d20 2773 7761 7027 3a0a  type == 'swap':.
-0003a090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003a0a0: 7375 6254 7970 6520 3d20 4e6f 6e65 0a20  subType = None. 
-0003a0b0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0003a0c0: 7562 5479 7065 2c20 7061 7261 6d73 203d  ubType, params =
-0003a0d0: 2073 656c 662e 6861 6e64 6c65 5f73 7562   self.handle_sub
-0003a0e0: 5f74 7970 655f 616e 645f 7061 7261 6d73  _type_and_params
-0003a0f0: 2827 6665 7463 684f 7264 6572 7327 2c20  ('fetchOrders', 
-0003a100: 6d61 726b 6574 2c20 7061 7261 6d73 2c20  market, params, 
-0003a110: 276c 696e 6561 7227 290a 2020 2020 2020  'linear').      
-0003a120: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-0003a130: 745b 2763 6174 6567 6f72 7927 5d20 3d20  t['category'] = 
-0003a140: 7375 6254 7970 650a 2020 2020 2020 2020  subType.        
-0003a150: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0003a160: 2020 6d61 726b 6574 203d 2073 656c 662e    market = self.
-0003a170: 6d61 726b 6574 2873 796d 626f 6c29 0a20  market(symbol). 
-0003a180: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-0003a190: 7374 5b27 7379 6d62 6f6c 275d 203d 206d  st['symbol'] = m
-0003a1a0: 6172 6b65 745b 2769 6427 5d0a 2020 2020  arket['id'].    
-0003a1b0: 2020 2020 2020 2020 6966 206d 6172 6b65          if marke
-0003a1c0: 745b 2773 706f 7427 5d3a 0a20 2020 2020  t['spot']:.     
-0003a1d0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-0003a1e0: 7374 5b27 6361 7465 676f 7279 275d 203d  st['category'] =
-0003a1f0: 2027 7370 6f74 270a 2020 2020 2020 2020   'spot'.        
-0003a200: 2020 2020 656c 6966 206d 6172 6b65 745b      elif market[
-0003a210: 276f 7074 696f 6e27 5d3a 0a20 2020 2020  'option']:.     
-0003a220: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-0003a230: 7374 5b27 6361 7465 676f 7279 275d 203d  st['category'] =
-0003a240: 2027 6f70 7469 6f6e 270a 2020 2020 2020   'option'.      
-0003a250: 2020 2020 2020 656c 6966 206d 6172 6b65        elif marke
-0003a260: 745b 276c 696e 6561 7227 5d3a 0a20 2020  t['linear']:.   
-0003a270: 2020 2020 2020 2020 2020 2020 2072 6571               req
-0003a280: 7565 7374 5b27 6361 7465 676f 7279 275d  uest['category']
-0003a290: 203d 2027 6c69 6e65 6172 270a 2020 2020   = 'linear'.    
-0003a2a0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0003a2b0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
-0003a2c0: 6973 6520 4e6f 7453 7570 706f 7274 6564  ise NotSupported
-0003a2d0: 2873 656c 662e 6964 202b 2027 2066 6574  (self.id + ' fet
-0003a2e0: 6368 4f72 6465 7273 2829 2064 6f65 7320  chOrders() does 
-0003a2f0: 6e6f 7420 616c 6c6f 7720 696e 7665 7273  not allow invers
-0003a300: 6520 6d61 726b 6574 206f 7264 6572 7320  e market orders 
-0003a310: 666f 7220 2720 2b20 7379 6d62 6f6c 202b  for ' + symbol +
-0003a320: 2027 206d 6172 6b65 7473 2729 0a20 2020   ' markets').   
-0003a330: 2020 2020 2069 7353 746f 7020 3d20 7365       isStop = se
-0003a340: 6c66 2e73 6166 655f 7661 6c75 6528 7061  lf.safe_value(pa
-0003a350: 7261 6d73 2c20 2773 746f 7027 2c20 4661  rams, 'stop', Fa
-0003a360: 6c73 6529 0a20 2020 2020 2020 2070 6172  lse).        par
-0003a370: 616d 7320 3d20 7365 6c66 2e6f 6d69 7428  ams = self.omit(
-0003a380: 7061 7261 6d73 2c20 5b27 7374 6f70 275d  params, ['stop']
-0003a390: 290a 2020 2020 2020 2020 6966 2069 7353  ).        if isS
-0003a3a0: 746f 703a 0a20 2020 2020 2020 2020 2020  top:.           
-0003a3b0: 2069 6620 6d61 726b 6574 5b27 7370 6f74   if market['spot
-0003a3c0: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
-0003a3d0: 2020 2020 7265 7175 6573 745b 276f 7264      request['ord
-0003a3e0: 6572 4669 6c74 6572 275d 203d 2027 7470  erFilter'] = 'tp
-0003a3f0: 736c 4f72 6465 7227 0a20 2020 2020 2020  slOrder'.       
-0003a400: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0003a410: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-0003a420: 7374 5b27 6f72 6465 7246 696c 7465 7227  st['orderFilter'
-0003a430: 5d20 3d20 2753 746f 704f 7264 6572 270a  ] = 'StopOrder'.
-0003a440: 2020 2020 2020 2020 6966 206c 696d 6974          if limit
-0003a450: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0003a460: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-0003a470: 745b 276c 696d 6974 275d 203d 206c 696d  t['limit'] = lim
-0003a480: 6974 0a20 2020 2020 2020 2069 6620 7369  it.        if si
-0003a490: 6e63 6520 6973 206e 6f74 204e 6f6e 653a  nce is not None:
-0003a4a0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-0003a4b0: 7565 7374 5b27 7374 6172 7454 696d 6527  uest['startTime'
-0003a4c0: 5d20 3d20 7369 6e63 650a 2020 2020 2020  ] = since.      
-0003a4d0: 2020 756e 7469 6c20 3d20 7365 6c66 2e73    until = self.s
-0003a4e0: 6166 655f 696e 7465 6765 725f 3228 7061  afe_integer_2(pa
-0003a4f0: 7261 6d73 2c20 2775 6e74 696c 272c 2027  rams, 'until', '
-0003a500: 7469 6c6c 2729 2020 2320 756e 6966 6965  till')  # unifie
-0003a510: 6420 696e 206d 696c 6c69 7365 636f 6e64  d in millisecond
-0003a520: 730a 2020 2020 2020 2020 656e 6454 696d  s.        endTim
-0003a530: 6520 3d20 7365 6c66 2e73 6166 655f 696e  e = self.safe_in
-0003a540: 7465 6765 7228 7061 7261 6d73 2c20 2765  teger(params, 'e
-0003a550: 6e64 5469 6d65 272c 2075 6e74 696c 2920  ndTime', until) 
-0003a560: 2023 2065 7863 6861 6e67 652d 7370 6563   # exchange-spec
-0003a570: 6966 6963 2069 6e20 6d69 6c6c 6973 6563  ific in millisec
-0003a580: 6f6e 6473 0a20 2020 2020 2020 2070 6172  onds.        par
-0003a590: 616d 7320 3d20 7365 6c66 2e6f 6d69 7428  ams = self.omit(
-0003a5a0: 7061 7261 6d73 2c20 5b27 656e 6454 696d  params, ['endTim
-0003a5b0: 6527 2c20 2774 696c 6c27 2c20 2775 6e74  e', 'till', 'unt
-0003a5c0: 696c 275d 290a 2020 2020 2020 2020 6966  il']).        if
-0003a5d0: 2065 6e64 5469 6d65 2069 7320 6e6f 7420   endTime is not 
-0003a5e0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0003a5f0: 2020 7265 7175 6573 745b 2765 6e64 5469    request['endTi
-0003a600: 6d65 275d 203d 2065 6e64 5469 6d65 0a20  me'] = endTime. 
-0003a610: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0003a620: 2020 2020 2020 2020 2069 6620 7369 6e63           if sinc
-0003a630: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
-0003a640: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0003a650: 6169 7365 2042 6164 5265 7175 6573 7428  aise BadRequest(
-0003a660: 7365 6c66 2e69 6420 2b20 2720 6665 7463  self.id + ' fetc
-0003a670: 684f 7264 6572 7328 2920 7265 7175 6972  hOrders() requir
-0003a680: 6573 2075 6e74 696c 2f65 6e64 5469 6d65  es until/endTime
-0003a690: 2077 6865 6e20 7369 6e63 6520 6973 2070   when since is p
-0003a6a0: 726f 7669 6465 642e 2729 0a20 2020 2020  rovided.').     
-0003a6b0: 2020 2072 6573 706f 6e73 6520 3d20 7365     response = se
-0003a6c0: 6c66 2e70 7269 7661 7465 4765 7456 354f  lf.privateGetV5O
-0003a6d0: 7264 6572 4869 7374 6f72 7928 7365 6c66  rderHistory(self
-0003a6e0: 2e65 7874 656e 6428 7265 7175 6573 742c  .extend(request,
-0003a6f0: 2070 6172 616d 7329 290a 2020 2020 2020   params)).      
-0003a700: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
-0003a710: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-0003a720: 2020 2020 2020 2272 6574 436f 6465 223a        "retCode":
-0003a730: 2030 2c0a 2020 2020 2020 2020 2320 2020   0,.        #   
-0003a740: 2020 2020 2020 2272 6574 4d73 6722 3a20        "retMsg": 
-0003a750: 224f 4b22 2c0a 2020 2020 2020 2020 2320  "OK",.        # 
-0003a760: 2020 2020 2020 2020 2272 6573 756c 7422          "result"
-0003a770: 3a20 7b0a 2020 2020 2020 2020 2320 2020  : {.        #   
-0003a780: 2020 2020 2020 2020 2020 226e 6578 7450            "nextP
-0003a790: 6167 6543 7572 736f 7222 3a20 2230 3332  ageCursor": "032
-0003a7a0: 3334 6465 392d 3133 3332 2d34 3165 622d  34de9-1332-41eb-
-0003a7b0: 6238 3035 2d34 6139 6634 3263 3133 3661  b805-4a9f42c136a
-0003a7c0: 3325 3341 3136 3732 3232 3031 3039 3338  3%3A167222010938
-0003a7d0: 3725 3243 3033 3233 3464 6539 2d31 3333  7%2C03234de9-133
-0003a7e0: 322d 3431 6562 2d62 3830 352d 3461 3966  2-41eb-b805-4a9f
-0003a7f0: 3432 6331 3336 6133 2533 4131 3637 3232  42c136a3%3A16722
-0003a800: 3230 3130 3933 3837 222c 0a20 2020 2020  20109387",.     
-0003a810: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0003a820: 2022 6361 7465 676f 7279 223a 2022 6c69   "category": "li
-0003a830: 6e65 6172 222c 0a20 2020 2020 2020 2023  near",.        #
-0003a840: 2020 2020 2020 2020 2020 2020 2022 6c69               "li
-0003a850: 7374 223a 205b 0a20 2020 2020 2020 2023  st": [.        #
-0003a860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003a870: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-0003a880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003a890: 2022 7379 6d62 6f6c 223a 2022 4254 4355   "symbol": "BTCU
-0003a8a0: 5344 5422 2c0a 2020 2020 2020 2020 2320  SDT",.        # 
-0003a8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003a8c0: 2020 2020 226f 7264 6572 5479 7065 223a      "orderType":
-0003a8d0: 2022 4c69 6d69 7422 2c0a 2020 2020 2020   "Limit",.      
-0003a8e0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0003a8f0: 2020 2020 2020 2020 226f 7264 6572 4c69          "orderLi
-0003a900: 6e6b 4964 223a 2022 7465 7374 2d30 3031  nkId": "test-001
-0003a910: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0003a920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003a930: 2022 6f72 6465 7249 6422 3a20 2230 3332   "orderId": "032
-0003a940: 3334 6465 392d 3133 3332 2d34 3165 622d  34de9-1332-41eb-
-0003a950: 6238 3035 2d34 6139 6634 3263 3133 3661  b805-4a9f42c136a
-0003a960: 3322 2c0a 2020 2020 2020 2020 2320 2020  3",.        #   
-0003a970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003a980: 2020 2263 616e 6365 6c54 7970 6522 3a20    "cancelType": 
-0003a990: 2243 616e 6365 6c42 7955 7365 7222 2c0a  "CancelByUser",.
-0003a9a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003a9b0: 2020 2020 2020 2020 2020 2020 2020 2261                "a
-0003a9c0: 7667 5072 6963 6522 3a20 2230 222c 0a20  vgPrice": "0",. 
-0003a9d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003a9e0: 2020 2020 2020 2020 2020 2020 2022 7374               "st
-0003a9f0: 6f70 4f72 6465 7254 7970 6522 3a20 2255  opOrderType": "U
-0003aa00: 4e4b 4e4f 574e 222c 0a20 2020 2020 2020  NKNOWN",.       
-0003aa10: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0003aa20: 2020 2020 2020 2022 6c61 7374 5072 6963         "lastPric
-0003aa30: 654f 6e43 7265 6174 6564 223a 2022 3136  eOnCreated": "16
-0003aa40: 3635 362e 3522 2c0a 2020 2020 2020 2020  656.5",.        
-0003aa50: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0003aa60: 2020 2020 2020 226f 7264 6572 5374 6174        "orderStat
-0003aa70: 7573 223a 2022 4361 6e63 656c 6c65 6422  us": "Cancelled"
-0003aa80: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0003aa90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003aaa0: 2274 616b 6550 726f 6669 7422 3a20 2222  "takeProfit": ""
-0003aab0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0003aac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003aad0: 2263 756d 4578 6563 5661 6c75 6522 3a20  "cumExecValue": 
-0003aae0: 2230 222c 0a20 2020 2020 2020 2023 2020  "0",.        #  
-0003aaf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003ab00: 2020 2022 7472 6967 6765 7244 6972 6563     "triggerDirec
-0003ab10: 7469 6f6e 223a 2030 2c0a 2020 2020 2020  tion": 0,.      
-0003ab20: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0003ab30: 2020 2020 2020 2020 2262 6c6f 636b 5472          "blockTr
-0003ab40: 6164 6549 6422 3a20 2222 2c0a 2020 2020  adeId": "",.    
-0003ab50: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003ab60: 2020 2020 2020 2020 2020 2272 656a 6563            "rejec
-0003ab70: 7452 6561 736f 6e22 3a20 2245 435f 5065  tReason": "EC_Pe
-0003ab80: 7243 616e 6365 6c52 6571 7565 7374 222c  rCancelRequest",
-0003ab90: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0003aba0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0003abb0: 6973 4c65 7665 7261 6765 223a 2022 222c  isLeverage": "",
-0003abc0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0003abd0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0003abe0: 7072 6963 6522 3a20 2231 3830 3030 222c  price": "18000",
-0003abf0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0003ac00: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0003ac10: 6f72 6465 7249 7622 3a20 2222 2c0a 2020  orderIv": "",.  
-0003ac20: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003ac30: 2020 2020 2020 2020 2020 2020 2263 7265              "cre
-0003ac40: 6174 6564 5469 6d65 223a 2022 3136 3732  atedTime": "1672
-0003ac50: 3232 3031 3039 3338 3722 2c0a 2020 2020  220109387",.    
-0003ac60: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003ac70: 2020 2020 2020 2020 2020 2274 7054 7269            "tpTri
-0003ac80: 6767 6572 4279 223a 2022 554e 4b4e 4f57  ggerBy": "UNKNOW
-0003ac90: 4e22 2c0a 2020 2020 2020 2020 2320 2020  N",.        #   
-0003aca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003acb0: 2020 2270 6f73 6974 696f 6e49 6478 223a    "positionIdx":
-0003acc0: 2030 2c0a 2020 2020 2020 2020 2320 2020   0,.        #   
-0003acd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003ace0: 2020 2274 696d 6549 6e46 6f72 6365 223a    "timeInForce":
-0003acf0: 2022 476f 6f64 5469 6c6c 4361 6e63 656c   "GoodTillCancel
-0003ad00: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0003ad10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003ad20: 2022 6c65 6176 6573 5661 6c75 6522 3a20   "leavesValue": 
-0003ad30: 2230 222c 0a20 2020 2020 2020 2023 2020  "0",.        #  
-0003ad40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003ad50: 2020 2022 7570 6461 7465 6454 696d 6522     "updatedTime"
-0003ad60: 3a20 2231 3637 3232 3230 3131 3431 3233  : "1672220114123
-0003ad70: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0003ad80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003ad90: 2022 7369 6465 223a 2022 5365 6c6c 222c   "side": "Sell",
-0003ada0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0003adb0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0003adc0: 7472 6967 6765 7250 7269 6365 223a 2022  triggerPrice": "
-0003add0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0003ade0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003adf0: 2022 6375 6d45 7865 6346 6565 223a 2022   "cumExecFee": "
-0003ae00: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-0003ae10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003ae20: 2020 2273 6c54 7269 6767 6572 4279 223a    "slTriggerBy":
-0003ae30: 2022 554e 4b4e 4f57 4e22 2c0a 2020 2020   "UNKNOWN",.    
-0003ae40: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003ae50: 2020 2020 2020 2020 2020 226c 6561 7665            "leave
-0003ae60: 7351 7479 223a 2022 3022 2c0a 2020 2020  sQty": "0",.    
-0003ae70: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003ae80: 2020 2020 2020 2020 2020 2263 6c6f 7365            "close
-0003ae90: 4f6e 5472 6967 6765 7222 3a20 4661 6c73  OnTrigger": Fals
-0003aea0: 652c 0a20 2020 2020 2020 2023 2020 2020  e,.        #    
-0003aeb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003aec0: 2022 6375 6d45 7865 6351 7479 223a 2022   "cumExecQty": "
-0003aed0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-0003aee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003aef0: 2020 2272 6564 7563 654f 6e6c 7922 3a20    "reduceOnly": 
-0003af00: 4661 6c73 652c 0a20 2020 2020 2020 2023  False,.        #
+00036db0: 2020 2272 6574 4d73 6722 3a20 224f 4b22    "retMsg": "OK"
+00036dc0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00036dd0: 2020 2020 2272 6573 756c 7422 3a20 7b0a      "result": {.
+00036de0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00036df0: 2020 2020 2020 226f 7574 5265 7175 6573        "outReques
+00036e00: 7449 6422 3a20 2222 2c0a 2020 2020 2020  tId": "",.      
+00036e10: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00036e20: 2273 796d 626f 6c22 3a20 2242 5443 2d31  "symbol": "BTC-1
+00036e30: 334d 4159 3232 2d34 3030 3030 2d43 222c  3MAY22-40000-C",
+00036e40: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00036e50: 2020 2020 2020 2022 6f72 6465 7249 6422         "orderId"
+00036e60: 3a20 2238 6336 3564 6639 312d 3931 6663  : "8c65df91-91fc
+00036e70: 2d34 3631 642d 3962 3134 2d37 3836 3337  -461d-9b14-78637
+00036e80: 3965 6631 3338 6322 2c0a 2020 2020 2020  9ef138c",.      
+00036e90: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00036ea0: 226f 7264 6572 4c69 6e6b 4964 223a 2022  "orderLinkId": "
+00036eb0: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
+00036ec0: 2020 2020 7d2c 0a20 2020 2020 2020 2023      },.        #
+00036ed0: 2020 2020 2020 2020 2022 7265 7445 7874           "retExt
+00036ee0: 4d61 7022 3a20 7b7d 0a20 2020 2020 2020  Map": {}.       
+00036ef0: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
+00036f00: 2023 0a20 2020 2020 2020 2072 6573 756c   #.        resul
+00036f10: 7420 3d20 7365 6c66 2e73 6166 655f 7661  t = self.safe_va
+00036f20: 6c75 6528 7265 7370 6f6e 7365 2c20 2772  lue(response, 'r
+00036f30: 6573 756c 7427 2c20 7b7d 290a 2020 2020  esult', {}).    
+00036f40: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00036f50: 7061 7273 655f 6f72 6465 7228 7265 7375  parse_order(resu
+00036f60: 6c74 2c20 6d61 726b 6574 290a 0a20 2020  lt, market)..   
+00036f70: 2064 6566 2063 616e 6365 6c5f 6465 7269   def cancel_deri
+00036f80: 7661 7469 7665 735f 6f72 6465 7228 7365  vatives_order(se
+00036f90: 6c66 2c20 6964 3a20 7374 722c 2073 796d  lf, id: str, sym
+00036fa0: 626f 6c3a 204f 7074 696f 6e61 6c5b 7374  bol: Optional[st
+00036fb0: 725d 203d 204e 6f6e 652c 2070 6172 616d  r] = None, param
+00036fc0: 733d 7b7d 293a 0a20 2020 2020 2020 2069  s={}):.        i
+00036fd0: 6620 7379 6d62 6f6c 2069 7320 4e6f 6e65  f symbol is None
+00036fe0: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
+00036ff0: 6973 6520 4172 6775 6d65 6e74 7352 6571  ise ArgumentsReq
+00037000: 7569 7265 6428 7365 6c66 2e69 6420 2b20  uired(self.id + 
+00037010: 2720 6361 6e63 656c 4465 7269 7661 7469  ' cancelDerivati
+00037020: 7665 734f 7264 6572 2829 2072 6571 7569  vesOrder() requi
+00037030: 7265 7320 6120 7379 6d62 6f6c 2061 7267  res a symbol arg
+00037040: 756d 656e 7427 290a 2020 2020 2020 2020  ument').        
+00037050: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
+00037060: 7328 290a 2020 2020 2020 2020 6d61 726b  s().        mark
+00037070: 6574 203d 2073 656c 662e 6d61 726b 6574  et = self.market
+00037080: 2873 796d 626f 6c29 0a20 2020 2020 2020  (symbol).       
+00037090: 2072 6571 7565 7374 203d 207b 0a20 2020   request = {.   
+000370a0: 2020 2020 2020 2020 2027 7379 6d62 6f6c           'symbol
+000370b0: 273a 206d 6172 6b65 745b 2769 6427 5d2c  ': market['id'],
+000370c0: 0a20 2020 2020 2020 2020 2020 2027 6f72  .            'or
+000370d0: 6465 7249 6427 3a20 6964 2c0a 2020 2020  derId': id,.    
+000370e0: 2020 2020 7d0a 2020 2020 2020 2020 7265      }.        re
+000370f0: 7370 6f6e 7365 203d 2073 656c 662e 7072  sponse = self.pr
+00037100: 6976 6174 6550 6f73 7443 6f6e 7472 6163  ivatePostContrac
+00037110: 7456 3350 7269 7661 7465 4f72 6465 7243  tV3PrivateOrderC
+00037120: 616e 6365 6c28 7365 6c66 2e65 7874 656e  ancel(self.exten
+00037130: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
+00037140: 7329 290a 2020 2020 2020 2020 230a 2020  s)).        #.  
+00037150: 2020 2020 2020 2320 636f 6e74 7261 6374        # contract
+00037160: 2076 330a 2020 2020 2020 2020 230a 2020   v3.        #.  
+00037170: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
+00037180: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00037190: 2272 6574 436f 6465 223a 302c 0a20 2020  "retCode":0,.   
+000371a0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+000371b0: 7265 744d 7367 223a 224f 4b22 2c0a 2020  retMsg":"OK",.  
+000371c0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000371d0: 2272 6573 756c 7422 3a7b 0a20 2020 2020  "result":{.     
+000371e0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+000371f0: 2022 6f72 6465 7249 6422 3a20 2234 3033   "orderId": "403
+00037200: 3034 3330 642d 3164 6261 2d34 3133 342d  0430d-1dba-4134-
+00037210: 6163 3737 2d33 6438 3163 3134 6161 6130  ac77-3d81c14aaa0
+00037220: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00037230: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+00037240: 4c69 6e6b 4964 223a 2022 220a 2020 2020  LinkId": "".    
+00037250: 2020 2020 2320 2020 2020 2020 2020 7d2c      #         },
+00037260: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00037270: 2020 2022 7265 7445 7874 496e 666f 223a     "retExtInfo":
+00037280: 6e75 6c6c 2c0a 2020 2020 2020 2020 2320  null,.        # 
+00037290: 2020 2020 2020 2020 2274 696d 6522 3a31          "time":1
+000372a0: 3635 3838 3530 3332 3138 3631 0a20 2020  658850321861.   
+000372b0: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
+000372c0: 2020 2020 2023 0a20 2020 2020 2020 2072       #.        r
+000372d0: 6573 756c 7420 3d20 7365 6c66 2e73 6166  esult = self.saf
+000372e0: 655f 7661 6c75 6528 7265 7370 6f6e 7365  e_value(response
+000372f0: 2c20 2772 6573 756c 7427 2c20 7b7d 290a  , 'result', {}).
+00037300: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00037310: 656c 662e 7061 7273 655f 6f72 6465 7228  elf.parse_order(
+00037320: 7265 7375 6c74 2c20 6d61 726b 6574 290a  result, market).
+00037330: 0a20 2020 2064 6566 2063 616e 6365 6c5f  .    def cancel_
+00037340: 6f72 6465 7228 7365 6c66 2c20 6964 3a20  order(self, id: 
+00037350: 7374 722c 2073 796d 626f 6c3a 204f 7074  str, symbol: Opt
+00037360: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
+00037370: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
+00037380: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00037390: 2020 2063 616e 6365 6c73 2061 6e20 6f70     cancels an op
+000373a0: 656e 206f 7264 6572 0a20 2020 2020 2020  en order.       
+000373b0: 203a 7061 7261 6d20 7374 7220 6964 3a20   :param str id: 
+000373c0: 6f72 6465 7220 6964 0a20 2020 2020 2020  order id.       
+000373d0: 203a 7061 7261 6d20 7374 7220 7379 6d62   :param str symb
+000373e0: 6f6c 3a20 756e 6966 6965 6420 7379 6d62  ol: unified symb
+000373f0: 6f6c 206f 6620 7468 6520 6d61 726b 6574  ol of the market
+00037400: 2074 6865 206f 7264 6572 2077 6173 206d   the order was m
+00037410: 6164 6520 696e 0a20 2020 2020 2020 203a  ade in.        :
+00037420: 7061 7261 6d20 6469 6374 2070 6172 616d  param dict param
+00037430: 733a 2065 7874 7261 2070 6172 616d 6574  s: extra paramet
+00037440: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
+00037450: 7468 6520 6279 6269 7420 6170 6920 656e  the bybit api en
+00037460: 6470 6f69 6e74 0a20 2020 2020 2020 203a  dpoint.        :
+00037470: 7265 7475 726e 7320 6469 6374 3a20 416e  returns dict: An
+00037480: 2060 6f72 6465 7220 7374 7275 6374 7572   `order structur
+00037490: 6520 3c68 7474 7073 3a2f 2f64 6f63 732e  e <https://docs.
+000374a0: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d6f  ccxt.com/#/?id=o
+000374b0: 7264 6572 2d73 7472 7563 7475 7265 3e60  rder-structure>`
+000374c0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+000374d0: 2020 2020 2069 6620 7379 6d62 6f6c 2069       if symbol i
+000374e0: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+000374f0: 2020 2020 7261 6973 6520 4172 6775 6d65      raise Argume
+00037500: 6e74 7352 6571 7569 7265 6428 7365 6c66  ntsRequired(self
+00037510: 2e69 6420 2b20 2720 6361 6e63 656c 4f72  .id + ' cancelOr
+00037520: 6465 7228 2920 7265 7175 6972 6573 2061  der() requires a
+00037530: 2073 796d 626f 6c20 6172 6775 6d65 6e74   symbol argument
+00037540: 2729 0a20 2020 2020 2020 2073 656c 662e  ').        self.
+00037550: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
+00037560: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
+00037570: 7365 6c66 2e6d 6172 6b65 7428 7379 6d62  self.market(symb
+00037580: 6f6c 290a 2020 2020 2020 2020 656e 6162  ol).        enab
+00037590: 6c65 556e 6966 6965 644d 6172 6769 6e2c  leUnifiedMargin,
+000375a0: 2065 6e61 626c 6555 6e69 6669 6564 4163   enableUnifiedAc
+000375b0: 636f 756e 7420 3d20 7365 6c66 2e69 735f  count = self.is_
+000375c0: 756e 6966 6965 645f 656e 6162 6c65 6428  unified_enabled(
+000375d0: 290a 2020 2020 2020 2020 6973 5573 6463  ).        isUsdc
+000375e0: 5365 7474 6c65 6420 3d20 6d61 726b 6574  Settled = market
+000375f0: 5b27 7365 7474 6c65 275d 203d 3d20 2755  ['settle'] == 'U
+00037600: 5344 4327 0a20 2020 2020 2020 2069 6620  SDC'.        if 
+00037610: 656e 6162 6c65 556e 6966 6965 6441 6363  enableUnifiedAcc
+00037620: 6f75 6e74 3a0a 2020 2020 2020 2020 2020  ount:.          
+00037630: 2020 7265 7475 726e 2073 656c 662e 6361    return self.ca
+00037640: 6e63 656c 5f75 6e69 6669 6564 5f61 6363  ncel_unified_acc
+00037650: 6f75 6e74 5f6f 7264 6572 2869 642c 2073  ount_order(id, s
+00037660: 796d 626f 6c2c 2070 6172 616d 7329 0a20  ymbol, params). 
+00037670: 2020 2020 2020 2065 6c69 6620 6d61 726b         elif mark
+00037680: 6574 5b27 7370 6f74 275d 3a0a 2020 2020  et['spot']:.    
+00037690: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+000376a0: 656c 662e 6361 6e63 656c 5f73 706f 745f  elf.cancel_spot_
+000376b0: 6f72 6465 7228 6964 2c20 7379 6d62 6f6c  order(id, symbol
+000376c0: 2c20 7061 7261 6d73 290a 2020 2020 2020  , params).      
+000376d0: 2020 656c 6966 2065 6e61 626c 6555 6e69    elif enableUni
+000376e0: 6669 6564 4d61 7267 696e 2061 6e64 206e  fiedMargin and n
+000376f0: 6f74 206d 6172 6b65 745b 2769 6e76 6572  ot market['inver
+00037700: 7365 275d 3a0a 2020 2020 2020 2020 2020  se']:.          
+00037710: 2020 7265 7475 726e 2073 656c 662e 6361    return self.ca
+00037720: 6e63 656c 5f75 6e69 6669 6564 5f6d 6172  ncel_unified_mar
+00037730: 6769 6e5f 6f72 6465 7228 6964 2c20 7379  gin_order(id, sy
+00037740: 6d62 6f6c 2c20 7061 7261 6d73 290a 2020  mbol, params).  
+00037750: 2020 2020 2020 656c 6966 2069 7355 7364        elif isUsd
+00037760: 6353 6574 746c 6564 3a0a 2020 2020 2020  cSettled:.      
+00037770: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00037780: 662e 6361 6e63 656c 5f75 7364 635f 6f72  f.cancel_usdc_or
+00037790: 6465 7228 6964 2c20 7379 6d62 6f6c 2c20  der(id, symbol, 
+000377a0: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
+000377b0: 7265 7475 726e 2073 656c 662e 6361 6e63  return self.canc
+000377c0: 656c 5f64 6572 6976 6174 6976 6573 5f6f  el_derivatives_o
+000377d0: 7264 6572 2869 642c 2073 796d 626f 6c2c  rder(id, symbol,
+000377e0: 2070 6172 616d 7329 0a0a 2020 2020 6465   params)..    de
+000377f0: 6620 6361 6e63 656c 5f61 6c6c 5f75 6e69  f cancel_all_uni
+00037800: 6669 6564 5f61 6363 6f75 6e74 5f6f 7264  fied_account_ord
+00037810: 6572 7328 7365 6c66 2c20 7379 6d62 6f6c  ers(self, symbol
+00037820: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
+00037830: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
+00037840: 7d29 3a0a 2020 2020 2020 2020 7365 6c66  }):.        self
+00037850: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
+00037860: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
+00037870: 204e 6f6e 650a 2020 2020 2020 2020 7365   None.        se
+00037880: 7474 6c65 203d 204e 6f6e 650a 2020 2020  ttle = None.    
+00037890: 2020 2020 7479 7065 203d 204e 6f6e 650a      type = None.
+000378a0: 2020 2020 2020 2020 7375 6254 7970 6520          subType 
+000378b0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2072  = None.        r
+000378c0: 6571 7565 7374 203d 207b 7d0a 2020 2020  equest = {}.    
+000378d0: 2020 2020 6966 2073 796d 626f 6c20 6973      if symbol is
+000378e0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+000378f0: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
+00037900: 7365 6c66 2e6d 6172 6b65 7428 7379 6d62  self.market(symb
+00037910: 6f6c 290a 2020 2020 2020 2020 2020 2020  ol).            
+00037920: 7365 7474 6c65 203d 206d 6172 6b65 745b  settle = market[
+00037930: 2773 6574 746c 6527 5d0a 2020 2020 2020  'settle'].      
+00037940: 2020 2020 2020 7265 7175 6573 745b 2773        request['s
+00037950: 796d 626f 6c27 5d20 3d20 6d61 726b 6574  ymbol'] = market
+00037960: 5b27 6964 275d 0a20 2020 2020 2020 2065  ['id'].        e
+00037970: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00037980: 2073 6574 746c 652c 2070 6172 616d 7320   settle, params 
+00037990: 3d20 7365 6c66 2e68 616e 646c 655f 6f70  = self.handle_op
+000379a0: 7469 6f6e 5f61 6e64 5f70 6172 616d 7328  tion_and_params(
+000379b0: 7061 7261 6d73 2c20 2763 616e 6365 6c41  params, 'cancelA
+000379c0: 6c6c 4f72 6465 7273 272c 2027 7365 7474  llOrders', 'sett
+000379d0: 6c65 272c 2027 5553 4454 2729 0a20 2020  le', 'USDT').   
+000379e0: 2020 2020 2074 7970 652c 2070 6172 616d       type, param
+000379f0: 7320 3d20 7365 6c66 2e68 616e 646c 655f  s = self.handle_
+00037a00: 6d61 726b 6574 5f74 7970 655f 616e 645f  market_type_and_
+00037a10: 7061 7261 6d73 2827 6361 6e63 656c 416c  params('cancelAl
+00037a20: 6c4f 7264 6572 7327 2c20 6d61 726b 6574  lOrders', market
+00037a30: 2c20 7061 7261 6d73 290a 2020 2020 2020  , params).      
+00037a40: 2020 7375 6254 7970 652c 2070 6172 616d    subType, param
+00037a50: 7320 3d20 7365 6c66 2e68 616e 646c 655f  s = self.handle_
+00037a60: 7375 625f 7479 7065 5f61 6e64 5f70 6172  sub_type_and_par
+00037a70: 616d 7328 2763 616e 6365 6c41 6c6c 4f72  ams('cancelAllOr
+00037a80: 6465 7273 272c 206d 6172 6b65 742c 2070  ders', market, p
+00037a90: 6172 616d 732c 2027 6c69 6e65 6172 2729  arams, 'linear')
+00037aa0: 0a20 2020 2020 2020 2069 6620 7479 7065  .        if type
+00037ab0: 203d 3d20 2773 706f 7427 3a0a 2020 2020   == 'spot':.    
+00037ac0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+00037ad0: 2763 6174 6567 6f72 7927 5d20 3d20 2773  'category'] = 's
+00037ae0: 706f 7427 0a20 2020 2020 2020 2065 6c69  pot'.        eli
+00037af0: 6620 7479 7065 203d 3d20 276f 7074 696f  f type == 'optio
+00037b00: 6e27 3a0a 2020 2020 2020 2020 2020 2020  n':.            
+00037b10: 7265 7175 6573 745b 2763 6174 6567 6f72  request['categor
+00037b20: 7927 5d20 3d20 276f 7074 696f 6e27 0a20  y'] = 'option'. 
+00037b30: 2020 2020 2020 2065 6c69 6620 7375 6254         elif subT
+00037b40: 7970 6520 3d3d 2027 6c69 6e65 6172 273a  ype == 'linear':
+00037b50: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+00037b60: 7565 7374 5b27 6361 7465 676f 7279 275d  uest['category']
+00037b70: 203d 2027 6c69 6e65 6172 270a 2020 2020   = 'linear'.    
+00037b80: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00037b90: 2020 2020 2020 7261 6973 6520 4e6f 7453        raise NotS
+00037ba0: 7570 706f 7274 6564 2873 656c 662e 6964  upported(self.id
+00037bb0: 202b 2027 2063 616e 6365 6c41 6c6c 4f72   + ' cancelAllOr
+00037bc0: 6465 7273 2829 2064 6f65 7320 6e6f 7420  ders() does not 
+00037bd0: 616c 6c6f 7720 696e 7665 7273 6520 6d61  allow inverse ma
+00037be0: 726b 6574 206f 7264 6572 7320 666f 7220  rket orders for 
+00037bf0: 2720 2b20 7479 7065 202b 2027 206d 6172  ' + type + ' mar
+00037c00: 6b65 7473 2729 0a20 2020 2020 2020 2072  kets').        r
+00037c10: 6571 7565 7374 5b27 7365 7474 6c65 436f  equest['settleCo
+00037c20: 696e 275d 203d 2073 6574 746c 650a 2020  in'] = settle.  
+00037c30: 2020 2020 2020 6973 5374 6f70 203d 2073        isStop = s
+00037c40: 656c 662e 7361 6665 5f76 616c 7565 2870  elf.safe_value(p
+00037c50: 6172 616d 732c 2027 7374 6f70 272c 2046  arams, 'stop', F
+00037c60: 616c 7365 290a 2020 2020 2020 2020 7061  alse).        pa
+00037c70: 7261 6d73 203d 2073 656c 662e 6f6d 6974  rams = self.omit
+00037c80: 2870 6172 616d 732c 205b 2773 746f 7027  (params, ['stop'
+00037c90: 5d29 0a20 2020 2020 2020 2069 6620 6973  ]).        if is
+00037ca0: 5374 6f70 3a0a 2020 2020 2020 2020 2020  Stop:.          
+00037cb0: 2020 7265 7175 6573 745b 276f 7264 6572    request['order
+00037cc0: 4669 6c74 6572 275d 203d 2027 7470 736c  Filter'] = 'tpsl
+00037cd0: 4f72 6465 7227 0a20 2020 2020 2020 2072  Order'.        r
+00037ce0: 6573 706f 6e73 6520 3d20 7365 6c66 2e70  esponse = self.p
+00037cf0: 7269 7661 7465 506f 7374 5635 4f72 6465  rivatePostV5Orde
+00037d00: 7243 616e 6365 6c41 6c6c 2873 656c 662e  rCancelAll(self.
+00037d10: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
+00037d20: 7061 7261 6d73 2929 0a20 2020 2020 2020  params)).       
+00037d30: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
+00037d40: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+00037d50: 2020 2020 2022 7265 7443 6f64 6522 3a20       "retCode": 
+00037d60: 302c 0a20 2020 2020 2020 2023 2020 2020  0,.        #    
+00037d70: 2020 2020 2022 7265 744d 7367 223a 2022       "retMsg": "
+00037d80: 4f4b 222c 0a20 2020 2020 2020 2023 2020  OK",.        #  
+00037d90: 2020 2020 2020 2022 7265 7375 6c74 223a         "result":
+00037da0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+00037db0: 2020 2020 2020 2020 2022 6c69 7374 223a           "list":
+00037dc0: 205b 0a20 2020 2020 2020 2023 2020 2020   [.        #    
+00037dd0: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
+00037de0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00037df0: 2020 2020 2020 2020 2020 2020 2022 6f72               "or
+00037e00: 6465 7249 6422 3a20 2266 3661 3733 6531  derId": "f6a73e1
+00037e10: 662d 3339 6235 2d34 6465 652d 6166 3231  f-39b5-4dee-af21
+00037e20: 2d31 3436 3062 3265 3362 3237 6322 2c0a  -1460b2e3b27c",.
+00037e30: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00037e40: 2020 2020 2020 2020 2020 2020 2020 226f                "o
+00037e50: 7264 6572 4c69 6e6b 4964 223a 2022 6130  rderLinkId": "a0
+00037e60: 3031 220a 2020 2020 2020 2020 2320 2020  01".        #   
+00037e70: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
+00037e80: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00037e90: 2020 2020 2020 5d0a 2020 2020 2020 2020        ].        
+00037ea0: 2320 2020 2020 2020 2020 7d2c 0a20 2020  #         },.   
+00037eb0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00037ec0: 7265 7445 7874 496e 666f 223a 207b 7d2c  retExtInfo": {},
+00037ed0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00037ee0: 2020 2022 7469 6d65 223a 2031 3637 3232     "time": 16722
+00037ef0: 3139 3738 3034 3633 0a20 2020 2020 2020  19780463.       
+00037f00: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
+00037f10: 2023 0a20 2020 2020 2020 2072 6573 756c   #.        resul
+00037f20: 7420 3d20 7365 6c66 2e73 6166 655f 7661  t = self.safe_va
+00037f30: 6c75 6528 7265 7370 6f6e 7365 2c20 2772  lue(response, 'r
+00037f40: 6573 756c 7427 2c20 5b5d 290a 2020 2020  esult', []).    
+00037f50: 2020 2020 6f72 6465 7273 203d 2073 656c      orders = sel
+00037f60: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
+00037f70: 756c 742c 2027 6c69 7374 2729 0a20 2020  ult, 'list').   
+00037f80: 2020 2020 2069 6620 6e6f 7420 6973 696e       if not isin
+00037f90: 7374 616e 6365 286f 7264 6572 732c 206c  stance(orders, l
+00037fa0: 6973 7429 3a0a 2020 2020 2020 2020 2020  ist):.          
+00037fb0: 2020 7265 7475 726e 2072 6573 706f 6e73    return respons
+00037fc0: 650a 2020 2020 2020 2020 7265 7475 726e  e.        return
+00037fd0: 2073 656c 662e 7061 7273 655f 6f72 6465   self.parse_orde
+00037fe0: 7273 286f 7264 6572 732c 206d 6172 6b65  rs(orders, marke
+00037ff0: 7429 0a0a 2020 2020 6465 6620 6361 6e63  t)..    def canc
+00038000: 656c 5f61 6c6c 5f73 706f 745f 6f72 6465  el_all_spot_orde
+00038010: 7273 2873 656c 662c 2073 796d 626f 6c3a  rs(self, symbol:
+00038020: 204f 7074 696f 6e61 6c5b 7374 725d 203d   Optional[str] =
+00038030: 204e 6f6e 652c 2070 6172 616d 733d 7b7d   None, params={}
+00038040: 293a 0a20 2020 2020 2020 2069 6620 7379  ):.        if sy
+00038050: 6d62 6f6c 2069 7320 4e6f 6e65 3a0a 2020  mbol is None:.  
+00038060: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00038070: 4172 6775 6d65 6e74 7352 6571 7569 7265  ArgumentsRequire
+00038080: 6428 7365 6c66 2e69 6420 2b20 2720 6361  d(self.id + ' ca
+00038090: 6e63 656c 416c 6c53 706f 744f 7264 6572  ncelAllSpotOrder
+000380a0: 7328 2920 7265 7175 6972 6573 2061 2073  s() requires a s
+000380b0: 796d 626f 6c20 6172 6775 6d65 6e74 2729  ymbol argument')
+000380c0: 0a20 2020 2020 2020 2073 656c 662e 6c6f  .        self.lo
+000380d0: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
+000380e0: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
+000380f0: 6c66 2e6d 6172 6b65 7428 7379 6d62 6f6c  lf.market(symbol
+00038100: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
+00038110: 7420 3d20 7b0a 2020 2020 2020 2020 2020  t = {.          
+00038120: 2020 2773 796d 626f 6c27 3a20 6d61 726b    'symbol': mark
+00038130: 6574 5b27 6964 275d 2c0a 2020 2020 2020  et['id'],.      
+00038140: 2020 7d0a 2020 2020 2020 2020 7265 7370    }.        resp
+00038150: 6f6e 7365 203d 2073 656c 662e 7072 6976  onse = self.priv
+00038160: 6174 6544 656c 6574 6553 706f 744f 7264  ateDeleteSpotOrd
+00038170: 6572 4261 7463 6843 616e 6365 6c28 7365  erBatchCancel(se
+00038180: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
+00038190: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
+000381a0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+000381b0: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
+000381c0: 2020 2020 2020 2272 6574 5f63 6f64 6522        "ret_code"
+000381d0: 3a20 302c 0a20 2020 2020 2020 2023 2020  : 0,.        #  
+000381e0: 2020 2020 2020 2272 6574 5f6d 7367 223a        "ret_msg":
+000381f0: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
+00038200: 2020 2020 2020 2265 7874 5f63 6f64 6522        "ext_code"
+00038210: 3a20 6e75 6c6c 2c0a 2020 2020 2020 2020  : null,.        
+00038220: 2320 2020 2020 2020 2022 6578 745f 696e  #        "ext_in
+00038230: 666f 223a 206e 756c 6c2c 0a20 2020 2020  fo": null,.     
+00038240: 2020 2023 2020 2020 2020 2020 2272 6573     #        "res
+00038250: 756c 7422 3a20 7b0a 2020 2020 2020 2020  ult": {.        
+00038260: 2320 2020 2020 2020 2020 2020 2022 7375  #            "su
+00038270: 6363 6573 7322 3a20 5472 7565 0a20 2020  ccess": True.   
+00038280: 2020 2020 2023 2020 2020 2020 2020 7d0a       #        }.
+00038290: 2020 2020 2020 2020 2320 2020 207d 0a20          #    }. 
+000382a0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+000382b0: 2072 6573 756c 7420 3d20 7365 6c66 2e73   result = self.s
+000382c0: 6166 655f 7661 6c75 6528 7265 7370 6f6e  afe_value(respon
+000382d0: 7365 2c20 2772 6573 756c 7427 2c20 5b5d  se, 'result', []
+000382e0: 290a 2020 2020 2020 2020 6966 206e 6f74  ).        if not
+000382f0: 2069 7369 6e73 7461 6e63 6528 7265 7375   isinstance(resu
+00038300: 6c74 2c20 6c69 7374 293a 0a20 2020 2020  lt, list):.     
+00038310: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
+00038320: 7370 6f6e 7365 0a20 2020 2020 2020 2072  sponse.        r
+00038330: 6574 7572 6e20 7365 6c66 2e70 6172 7365  eturn self.parse
+00038340: 5f6f 7264 6572 7328 7265 7375 6c74 2c20  _orders(result, 
+00038350: 6d61 726b 6574 290a 0a20 2020 2064 6566  market)..    def
+00038360: 2063 616e 6365 6c5f 616c 6c5f 756e 6966   cancel_all_unif
+00038370: 6965 645f 6d61 7267 696e 5f6f 7264 6572  ied_margin_order
+00038380: 7328 7365 6c66 2c20 7379 6d62 6f6c 3a20  s(self, symbol: 
+00038390: 4f70 7469 6f6e 616c 5b73 7472 5d20 3d20  Optional[str] = 
+000383a0: 4e6f 6e65 2c20 7061 7261 6d73 3d7b 7d29  None, params={})
+000383b0: 3a0a 2020 2020 2020 2020 7365 6c66 2e6c  :.        self.l
+000383c0: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
+000383d0: 2020 2020 2020 6d61 726b 6574 203d 204e        market = N
+000383e0: 6f6e 650a 2020 2020 2020 2020 7365 7474  one.        sett
+000383f0: 6c65 203d 204e 6f6e 650a 2020 2020 2020  le = None.      
+00038400: 2020 7265 7175 6573 7420 3d20 7b7d 0a20    request = {}. 
+00038410: 2020 2020 2020 2069 6620 7379 6d62 6f6c         if symbol
+00038420: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00038430: 2020 2020 2020 2020 2020 6d61 726b 6574            market
+00038440: 203d 2073 656c 662e 6d61 726b 6574 2873   = self.market(s
+00038450: 796d 626f 6c29 0a20 2020 2020 2020 2020  ymbol).         
+00038460: 2020 2073 6574 746c 6520 3d20 6d61 726b     settle = mark
+00038470: 6574 5b27 7365 7474 6c65 275d 0a20 2020  et['settle'].   
+00038480: 2020 2020 2020 2020 2072 6571 7565 7374           request
+00038490: 5b27 7379 6d62 6f6c 275d 203d 206d 6172  ['symbol'] = mar
+000384a0: 6b65 745b 2769 6427 5d0a 2020 2020 2020  ket['id'].      
+000384b0: 2020 7375 6254 7970 6520 3d20 4e6f 6e65    subType = None
+000384c0: 0a20 2020 2020 2020 2073 7562 5479 7065  .        subType
+000384d0: 2c20 7061 7261 6d73 203d 2073 656c 662e  , params = self.
+000384e0: 6861 6e64 6c65 5f73 7562 5f74 7970 655f  handle_sub_type_
+000384f0: 616e 645f 7061 7261 6d73 2827 6361 6e63  and_params('canc
+00038500: 656c 416c 6c4f 7264 6572 7327 2c20 6d61  elAllOrders', ma
+00038510: 726b 6574 2c20 7061 7261 6d73 2c20 276c  rket, params, 'l
+00038520: 696e 6561 7227 290a 2020 2020 2020 2020  inear').        
+00038530: 7265 7175 6573 745b 2763 6174 6567 6f72  request['categor
+00038540: 7927 5d20 3d20 7375 6254 7970 650a 2020  y'] = subType.  
+00038550: 2020 2020 2020 7365 7474 6c65 2c20 7061        settle, pa
+00038560: 7261 6d73 203d 2073 656c 662e 6861 6e64  rams = self.hand
+00038570: 6c65 5f6f 7074 696f 6e5f 616e 645f 7061  le_option_and_pa
+00038580: 7261 6d73 2870 6172 616d 732c 2027 6361  rams(params, 'ca
+00038590: 6e63 656c 416c 6c4f 7264 6572 7327 2c20  ncelAllOrders', 
+000385a0: 2773 6574 746c 6527 2c20 7365 7474 6c65  'settle', settle
+000385b0: 290a 2020 2020 2020 2020 6966 2073 6574  ).        if set
+000385c0: 746c 6520 6973 206e 6f74 204e 6f6e 653a  tle is not None:
+000385d0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+000385e0: 7565 7374 5b27 7365 7474 6c65 436f 696e  uest['settleCoin
+000385f0: 275d 203d 2073 6574 746c 650a 2020 2020  '] = settle.    
+00038600: 2020 2020 6973 5374 6f70 203d 2073 656c      isStop = sel
+00038610: 662e 7361 6665 5f76 616c 7565 2870 6172  f.safe_value(par
+00038620: 616d 732c 2027 7374 6f70 272c 2046 616c  ams, 'stop', Fal
+00038630: 7365 290a 2020 2020 2020 2020 7061 7261  se).        para
+00038640: 6d73 203d 2073 656c 662e 6f6d 6974 2870  ms = self.omit(p
+00038650: 6172 616d 732c 205b 2773 746f 7027 5d29  arams, ['stop'])
+00038660: 0a20 2020 2020 2020 2069 6620 6973 5374  .        if isSt
+00038670: 6f70 3a0a 2020 2020 2020 2020 2020 2020  op:.            
+00038680: 7265 7175 6573 745b 276f 7264 6572 4669  request['orderFi
+00038690: 6c74 6572 275d 203d 2027 5374 6f70 4f72  lter'] = 'StopOr
+000386a0: 6465 7227 0a20 2020 2020 2020 2072 6573  der'.        res
+000386b0: 706f 6e73 6520 3d20 7365 6c66 2e70 7269  ponse = self.pri
+000386c0: 7661 7465 506f 7374 556e 6966 6965 6456  vatePostUnifiedV
+000386d0: 3350 7269 7661 7465 4f72 6465 7243 616e  3PrivateOrderCan
+000386e0: 6365 6c41 6c6c 2873 656c 662e 6578 7465  celAll(self.exte
+000386f0: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
+00038700: 6d73 2929 0a20 2020 2020 2020 2023 0a20  ms)).        #. 
+00038710: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
+00038720: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00038730: 2022 7265 7443 6f64 6522 3a20 302c 0a20   "retCode": 0,. 
+00038740: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00038750: 2022 7265 744d 7367 223a 2022 4f4b 222c   "retMsg": "OK",
+00038760: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00038770: 2020 2022 7265 7375 6c74 223a 207b 0a20     "result": {. 
+00038780: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00038790: 2020 2020 2022 6c69 7374 223a 205b 7b0a       "list": [{.
+000387a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000387b0: 2020 2020 2020 2020 2020 2020 2020 2263                "c
+000387c0: 6174 6567 6f72 7922 3a20 226f 7074 696f  ategory": "optio
+000387d0: 6e22 2c0a 2020 2020 2020 2020 2320 2020  n",.        #   
+000387e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000387f0: 2020 2273 796d 626f 6c22 3a20 2242 5443    "symbol": "BTC
+00038800: 2d32 344a 554e 3232 2d34 3530 3030 2d50  -24JUN22-45000-P
+00038810: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00038820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038830: 2022 6f72 6465 7249 6422 3a20 2262 6435   "orderId": "bd5
+00038840: 6633 6233 342d 6436 3464 2d34 6236 302d  f3b34-d64d-4b60-
+00038850: 3831 3838 2d34 3338 6662 6561 3463 3535  8188-438fbea4c55
+00038860: 3222 2c0a 2020 2020 2020 2020 2320 2020  2",.        #   
+00038870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038880: 2020 226f 7264 6572 4c69 6e6b 4964 223a    "orderLinkId":
+00038890: 2022 6163 3465 3362 3334 2d64 3634 642d   "ac4e3b34-d64d-
+000388a0: 3462 3630 2d38 3138 382d 3433 3866 6265  4b60-8188-438fbe
+000388b0: 6134 6335 3532 222c 0a20 2020 2020 2020  a4c552",.       
+000388c0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+000388d0: 2020 207d 2c20 7b0a 2020 2020 2020 2020     }, {.        
+000388e0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000388f0: 2020 2020 2020 2263 6174 6567 6f72 7922        "category"
+00038900: 3a20 226f 7074 696f 6e22 2c0a 2020 2020  : "option",.    
+00038910: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00038920: 2020 2020 2020 2020 2020 2273 796d 626f            "symbo
+00038930: 6c22 3a20 2242 5443 2d32 344a 554e 3232  l": "BTC-24JUN22
+00038940: 2d34 3530 3030 2d50 222c 0a20 2020 2020  -45000-P",.     
+00038950: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00038960: 2020 2020 2020 2020 2022 6f72 6465 7249           "orderI
+00038970: 6422 3a20 2234 6464 6437 3237 612d 3261  d": "4ddd727a-2a
+00038980: 6638 2d34 3330 652d 6132 3933 2d34 3238  f8-430e-a293-428
+00038990: 3935 6535 3934 6431 3822 2c0a 2020 2020  95e594d18",.    
+000389a0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+000389b0: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+000389c0: 4c69 6e6b 4964 223a 2022 3563 6565 3732  LinkId": "5cee72
+000389d0: 3761 2d32 6166 382d 3433 3065 2d61 3239  7a-2af8-430e-a29
+000389e0: 332d 3432 3839 3565 3539 3464 3138 222c  3-42895e594d18",
+000389f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00038a00: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
+00038a10: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00038a20: 2020 205d 0a20 2020 2020 2020 2023 2020     ].        #  
+00038a30: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
+00038a40: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
+00038a50: 4578 7449 6e66 6f22 3a20 7b0a 2020 2020  ExtInfo": {.    
+00038a60: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00038a70: 2020 226c 6973 7422 3a20 5b7b 0a20 2020    "list": [{.   
+00038a80: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00038a90: 2020 2020 2020 2022 636f 6465 223a 2030         "code": 0
+00038aa0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00038ab0: 2020 2020 2020 2020 2020 2020 226d 7367              "msg
+00038ac0: 223a 2022 4f4b 220a 2020 2020 2020 2020  ": "OK".        
+00038ad0: 2320 2020 2020 2020 2020 2020 2020 7d2c  #             },
+00038ae0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+00038af0: 2020 2020 2020 2020 2020 2020 2022 636f               "co
+00038b00: 6465 223a 2030 2c0a 2020 2020 2020 2020  de": 0,.        
+00038b10: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00038b20: 2020 226d 7367 223a 2022 4f4b 220a 2020    "msg": "OK".  
+00038b30: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00038b40: 2020 2020 7d5d 0a20 2020 2020 2020 2023      }].        #
+00038b50: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
+00038b60: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
+00038b70: 696d 6522 3a20 3136 3537 3230 3037 3336  ime": 1657200736
+00038b80: 3537 300a 2020 2020 2020 2020 2320 2020  570.        #   
+00038b90: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
+00038ba0: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
+00038bb0: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
+00038bc0: 6573 706f 6e73 652c 2027 7265 7375 6c74  esponse, 'result
+00038bd0: 272c 205b 5d29 0a20 2020 2020 2020 206f  ', []).        o
+00038be0: 7264 6572 7320 3d20 7365 6c66 2e73 6166  rders = self.saf
+00038bf0: 655f 7661 6c75 6528 7265 7375 6c74 2c20  e_value(result, 
+00038c00: 276c 6973 7427 290a 2020 2020 2020 2020  'list').        
+00038c10: 6966 206e 6f74 2069 7369 6e73 7461 6e63  if not isinstanc
+00038c20: 6528 6f72 6465 7273 2c20 6c69 7374 293a  e(orders, list):
+00038c30: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00038c40: 7572 6e20 7265 7370 6f6e 7365 0a20 2020  urn response.   
+00038c50: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00038c60: 2e70 6172 7365 5f6f 7264 6572 7328 6f72  .parse_orders(or
+00038c70: 6465 7273 2c20 6d61 726b 6574 290a 0a20  ders, market).. 
+00038c80: 2020 2064 6566 2063 616e 6365 6c5f 616c     def cancel_al
+00038c90: 6c5f 7573 6463 5f6f 7264 6572 7328 7365  l_usdc_orders(se
+00038ca0: 6c66 2c20 7379 6d62 6f6c 3a20 4f70 7469  lf, symbol: Opti
+00038cb0: 6f6e 616c 5b73 7472 5d20 3d20 4e6f 6e65  onal[str] = None
+00038cc0: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
+00038cd0: 2020 2020 2020 6966 2073 796d 626f 6c20        if symbol 
+00038ce0: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
+00038cf0: 2020 2020 2072 6169 7365 2041 7267 756d       raise Argum
+00038d00: 656e 7473 5265 7175 6972 6564 2873 656c  entsRequired(sel
+00038d10: 662e 6964 202b 2027 2063 616e 6365 6c41  f.id + ' cancelA
+00038d20: 6c6c 5553 4443 4f72 6465 7273 2829 2072  llUSDCOrders() r
+00038d30: 6571 7569 7265 7320 6120 7379 6d62 6f6c  equires a symbol
+00038d40: 2061 7267 756d 656e 7427 290a 2020 2020   argument').    
+00038d50: 2020 2020 7365 6c66 2e6c 6f61 645f 6d61      self.load_ma
+00038d60: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
+00038d70: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
+00038d80: 726b 6574 2873 796d 626f 6c29 0a20 2020  rket(symbol).   
+00038d90: 2020 2020 206d 6574 686f 6420 3d20 4e6f       method = No
+00038da0: 6e65 0a20 2020 2020 2020 2072 6571 7565  ne.        reque
+00038db0: 7374 203d 207b 0a20 2020 2020 2020 2020  st = {.         
+00038dc0: 2020 2027 7379 6d62 6f6c 273a 206d 6172     'symbol': mar
+00038dd0: 6b65 745b 2769 6427 5d2c 0a20 2020 2020  ket['id'],.     
+00038de0: 2020 207d 0a20 2020 2020 2020 2069 6620     }.        if 
+00038df0: 6d61 726b 6574 5b27 6f70 7469 6f6e 275d  market['option']
+00038e00: 3a0a 2020 2020 2020 2020 2020 2020 6d65  :.            me
+00038e10: 7468 6f64 203d 2027 7072 6976 6174 6550  thod = 'privateP
+00038e20: 6f73 744f 7074 696f 6e55 7364 634f 7065  ostOptionUsdcOpe
+00038e30: 6e61 7069 5072 6976 6174 6556 3143 616e  napiPrivateV1Can
+00038e40: 6365 6c41 6c6c 270a 2020 2020 2020 2020  celAll'.        
+00038e50: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00038e60: 2020 6d65 7468 6f64 203d 2027 7072 6976    method = 'priv
+00038e70: 6174 6550 6f73 7450 6572 7065 7475 616c  atePostPerpetual
+00038e80: 5573 6463 4f70 656e 6170 6950 7269 7661  UsdcOpenapiPriva
+00038e90: 7465 5631 4361 6e63 656c 416c 6c27 0a20  teV1CancelAll'. 
+00038ea0: 2020 2020 2020 2020 2020 2069 7353 746f             isSto
+00038eb0: 7020 3d20 7365 6c66 2e73 6166 655f 7661  p = self.safe_va
+00038ec0: 6c75 6528 7061 7261 6d73 2c20 2773 746f  lue(params, 'sto
+00038ed0: 7027 2c20 4661 6c73 6529 0a20 2020 2020  p', False).     
+00038ee0: 2020 2020 2020 2069 6620 6973 5374 6f70         if isStop
+00038ef0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00038f00: 2020 7265 7175 6573 745b 276f 7264 6572    request['order
+00038f10: 4669 6c74 6572 275d 203d 2027 5374 6f70  Filter'] = 'Stop
+00038f20: 4f72 6465 7227 0a20 2020 2020 2020 2020  Order'.         
+00038f30: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00038f40: 2020 2020 2020 2020 2072 6571 7565 7374           request
+00038f50: 5b27 6f72 6465 7246 696c 7465 7227 5d20  ['orderFilter'] 
+00038f60: 3d20 274f 7264 6572 270a 2020 2020 2020  = 'Order'.      
+00038f70: 2020 2020 2020 7061 7261 6d73 203d 2073        params = s
+00038f80: 656c 662e 6f6d 6974 2870 6172 616d 732c  elf.omit(params,
+00038f90: 205b 2773 746f 7027 5d29 0a20 2020 2020   ['stop']).     
+00038fa0: 2020 2072 6573 706f 6e73 6520 3d20 6765     response = ge
+00038fb0: 7461 7474 7228 7365 6c66 2c20 6d65 7468  tattr(self, meth
+00038fc0: 6f64 2928 7365 6c66 2e65 7874 656e 6428  od)(self.extend(
+00038fd0: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
+00038fe0: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
+00038ff0: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
+00039000: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
+00039010: 6574 436f 6465 223a 2030 2c0a 2020 2020  etCode": 0,.    
+00039020: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
+00039030: 6574 4d73 6722 3a20 224f 4b22 2c0a 2020  etMsg": "OK",.  
+00039040: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00039050: 2272 6574 4578 744d 6170 223a 207b 7d2c  "retExtMap": {},
+00039060: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00039070: 2020 2022 7265 7375 6c74 223a 205b 0a20     "result": [. 
+00039080: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00039090: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+000390a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000390b0: 2022 6f75 7452 6571 7565 7374 4964 223a   "outRequestId":
+000390c0: 2022 6361 6e63 656c 416c 6c2d 3239 3031   "cancelAll-2901
+000390d0: 3139 2d31 3635 3231 3736 3434 3331 3134  19-1652176443114
+000390e0: 2d30 222c 0a20 2020 2020 2020 2023 2020  -0",.        #  
+000390f0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00039100: 7379 6d62 6f6c 223a 2022 4254 432d 3133  symbol": "BTC-13
+00039110: 4d41 5932 322d 3430 3030 302d 4322 2c0a  MAY22-40000-C",.
+00039120: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00039130: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+00039140: 4964 223a 2022 6661 3663 6437 3430 2d35  Id": "fa6cd740-5
+00039150: 3665 642d 3437 3764 2d39 3338 352d 3930  6ed-477d-9385-90
+00039160: 6363 6266 6565 3439 6361 222c 0a20 2020  ccbfee49ca",.   
+00039170: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00039180: 2020 2020 2020 2022 6f72 6465 724c 696e         "orderLin
+00039190: 6b49 6422 3a20 2222 2c0a 2020 2020 2020  kId": "",.      
+000391a0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+000391b0: 2020 2020 2265 7272 6f72 436f 6465 223a      "errorCode":
+000391c0: 2030 2c0a 2020 2020 2020 2020 2320 2020   0,.        #   
+000391d0: 2020 2020 2020 2020 2020 2020 2020 2265                "e
+000391e0: 7272 6f72 4465 7363 223a 2022 220a 2020  rrorDesc": "".  
+000391f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00039200: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
+00039210: 2020 2020 2020 2020 5d0a 2020 2020 2020          ].      
+00039220: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
+00039230: 2020 230a 2020 2020 2020 2020 7265 7375    #.        resu
+00039240: 6c74 203d 2073 656c 662e 7361 6665 5f76  lt = self.safe_v
+00039250: 616c 7565 2872 6573 706f 6e73 652c 2027  alue(response, '
+00039260: 7265 7375 6c74 272c 205b 5d29 0a20 2020  result', []).   
+00039270: 2020 2020 2069 6620 6e6f 7420 6973 696e       if not isin
+00039280: 7374 616e 6365 2872 6573 756c 742c 206c  stance(result, l
+00039290: 6973 7429 3a0a 2020 2020 2020 2020 2020  ist):.          
+000392a0: 2020 7265 7475 726e 2072 6573 706f 6e73    return respons
+000392b0: 650a 2020 2020 2020 2020 7265 7475 726e  e.        return
+000392c0: 2073 656c 662e 7061 7273 655f 6f72 6465   self.parse_orde
+000392d0: 7273 2872 6573 756c 742c 206d 6172 6b65  rs(result, marke
+000392e0: 7429 0a0a 2020 2020 6465 6620 6361 6e63  t)..    def canc
+000392f0: 656c 5f61 6c6c 5f64 6572 6976 6174 6976  el_all_derivativ
+00039300: 6573 5f6f 7264 6572 7328 7365 6c66 2c20  es_orders(self, 
+00039310: 7379 6d62 6f6c 3a20 4f70 7469 6f6e 616c  symbol: Optional
+00039320: 5b73 7472 5d20 3d20 4e6f 6e65 2c20 7061  [str] = None, pa
+00039330: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
+00039340: 2020 7365 6c66 2e6c 6f61 645f 6d61 726b    self.load_mark
+00039350: 6574 7328 290a 2020 2020 2020 2020 6d61  ets().        ma
+00039360: 726b 6574 203d 204e 6f6e 650a 2020 2020  rket = None.    
+00039370: 2020 2020 7365 7474 6c65 203d 204e 6f6e      settle = Non
+00039380: 650a 2020 2020 2020 2020 7265 7175 6573  e.        reques
+00039390: 7420 3d20 7b7d 0a20 2020 2020 2020 2069  t = {}.        i
+000393a0: 6620 7379 6d62 6f6c 2069 7320 6e6f 7420  f symbol is not 
+000393b0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+000393c0: 2020 6d61 726b 6574 203d 2073 656c 662e    market = self.
+000393d0: 6d61 726b 6574 2873 796d 626f 6c29 0a20  market(symbol). 
+000393e0: 2020 2020 2020 2020 2020 2073 6574 746c             settl
+000393f0: 6520 3d20 6d61 726b 6574 5b27 7365 7474  e = market['sett
+00039400: 6c65 275d 0a20 2020 2020 2020 2020 2020  le'].           
+00039410: 2072 6571 7565 7374 5b27 7379 6d62 6f6c   request['symbol
+00039420: 275d 203d 206d 6172 6b65 745b 2769 6427  '] = market['id'
+00039430: 5d0a 2020 2020 2020 2020 7365 7474 6c65  ].        settle
+00039440: 2c20 7061 7261 6d73 203d 2073 656c 662e  , params = self.
+00039450: 6861 6e64 6c65 5f6f 7074 696f 6e5f 616e  handle_option_an
+00039460: 645f 7061 7261 6d73 2870 6172 616d 732c  d_params(params,
+00039470: 2027 6361 6e63 656c 416c 6c4f 7264 6572   'cancelAllOrder
+00039480: 7327 2c20 2773 6574 746c 6527 2c20 7365  s', 'settle', se
+00039490: 7474 6c65 290a 2020 2020 2020 2020 6966  ttle).        if
+000394a0: 2073 6574 746c 6520 6973 206e 6f74 204e   settle is not N
+000394b0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+000394c0: 2072 6571 7565 7374 5b27 7365 7474 6c65   request['settle
+000394d0: 436f 696e 275d 203d 2073 6574 746c 650a  Coin'] = settle.
+000394e0: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
+000394f0: 203d 2073 656c 662e 7072 6976 6174 6550   = self.privateP
+00039500: 6f73 7443 6f6e 7472 6163 7456 3350 7269  ostContractV3Pri
+00039510: 7661 7465 4f72 6465 7243 616e 6365 6c41  vateOrderCancelA
+00039520: 6c6c 2873 656c 662e 6578 7465 6e64 2872  ll(self.extend(r
+00039530: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
+00039540: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+00039550: 2020 2023 2063 6f6e 7472 6163 7420 7633     # contract v3
+00039560: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+00039570: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
+00039580: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+00039590: 7443 6f64 6522 3a20 302c 0a20 2020 2020  tCode": 0,.     
+000395a0: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+000395b0: 744d 7367 223a 2022 4f4b 222c 0a20 2020  tMsg": "OK",.   
+000395c0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+000395d0: 7265 7375 6c74 223a 207b 0a20 2020 2020  result": {.     
+000395e0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+000395f0: 2022 6c69 7374 223a 205b 0a20 2020 2020   "list": [.     
+00039600: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00039610: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+00039620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00039630: 2020 2020 2022 6f72 6465 7249 6422 3a20       "orderId": 
+00039640: 2234 3033 3034 3330 642d 3164 6261 2d34  "4030430d-1dba-4
+00039650: 3133 342d 6163 3737 2d33 6438 3163 3134  134-ac77-3d81c14
+00039660: 6161 6130 3022 2c0a 2020 2020 2020 2020  aaa00",.        
+00039670: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00039680: 2020 2020 2020 226f 7264 6572 4c69 6e6b        "orderLink
+00039690: 4964 223a 2022 7830 3031 220a 2020 2020  Id": "x001".    
+000396a0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+000396b0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+000396c0: 2320 2020 2020 2020 2020 2020 2020 5d0a  #             ].
+000396d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000396e0: 2020 7d2c 0a20 2020 2020 2020 2023 2020    },.        #  
+000396f0: 2020 2020 2020 2022 7265 7445 7874 496e         "retExtIn
+00039700: 666f 223a 207b 7d2c 0a20 2020 2020 2020  fo": {},.       
+00039710: 2023 2020 2020 2020 2020 2022 7469 6d65   #         "time
+00039720: 223a 2031 3635 3839 3031 3335 3932 3235  ": 1658901359225
+00039730: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
+00039740: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+00039750: 2020 2072 6573 756c 7420 3d20 7365 6c66     result = self
+00039760: 2e73 6166 655f 7661 6c75 6528 7265 7370  .safe_value(resp
+00039770: 6f6e 7365 2c20 2772 6573 756c 7427 2c20  onse, 'result', 
+00039780: 5b5d 290a 2020 2020 2020 2020 6f72 6465  []).        orde
+00039790: 7273 203d 2073 656c 662e 7361 6665 5f76  rs = self.safe_v
+000397a0: 616c 7565 2872 6573 756c 742c 2027 6c69  alue(result, 'li
+000397b0: 7374 272c 205b 5d29 0a20 2020 2020 2020  st', []).       
+000397c0: 2072 6574 7572 6e20 7365 6c66 2e70 6172   return self.par
+000397d0: 7365 5f6f 7264 6572 7328 6f72 6465 7273  se_orders(orders
+000397e0: 2c20 6d61 726b 6574 290a 0a20 2020 2064  , market)..    d
+000397f0: 6566 2063 616e 6365 6c5f 616c 6c5f 6f72  ef cancel_all_or
+00039800: 6465 7273 2873 656c 662c 2073 796d 626f  ders(self, symbo
+00039810: 6c3a 204f 7074 696f 6e61 6c5b 7374 725d  l: Optional[str]
+00039820: 203d 204e 6f6e 652c 2070 6172 616d 733d   = None, params=
+00039830: 7b7d 293a 0a20 2020 2020 2020 2022 2222  {}):.        """
+00039840: 0a20 2020 2020 2020 2063 616e 6365 6c20  .        cancel 
+00039850: 616c 6c20 6f70 656e 206f 7264 6572 730a  all open orders.
+00039860: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+00039870: 7472 7c4e 6f6e 6520 7379 6d62 6f6c 3a20  tr|None symbol: 
+00039880: 756e 6966 6965 6420 6d61 726b 6574 2073  unified market s
+00039890: 796d 626f 6c2c 206f 6e6c 7920 6f72 6465  ymbol, only orde
+000398a0: 7273 2069 6e20 7468 6520 6d61 726b 6574  rs in the market
+000398b0: 206f 6620 7365 6c66 2073 796d 626f 6c20   of self symbol 
+000398c0: 6172 6520 6361 6e63 656c 6c65 6420 7768  are cancelled wh
+000398d0: 656e 2073 796d 626f 6c20 6973 206e 6f74  en symbol is not
+000398e0: 204e 6f6e 650a 2020 2020 2020 2020 3a70   None.        :p
+000398f0: 6172 616d 2064 6963 7420 7061 7261 6d73  aram dict params
+00039900: 3a20 6578 7472 6120 7061 7261 6d65 7465  : extra paramete
+00039910: 7273 2073 7065 6369 6669 6320 746f 2074  rs specific to t
+00039920: 6865 2062 7962 6974 2061 7069 2065 6e64  he bybit api end
+00039930: 706f 696e 740a 2020 2020 2020 2020 3a72  point.        :r
+00039940: 6574 7572 6e73 205b 6469 6374 5d3a 2061  eturns [dict]: a
+00039950: 206c 6973 7420 6f66 2060 6f72 6465 7220   list of `order 
+00039960: 7374 7275 6374 7572 6573 203c 6874 7470  structures <http
+00039970: 733a 2f2f 646f 6373 2e63 6378 742e 636f  s://docs.ccxt.co
+00039980: 6d2f 232f 3f69 643d 6f72 6465 722d 7374  m/#/?id=order-st
+00039990: 7275 6374 7572 653e 600a 2020 2020 2020  ructure>`.      
+000399a0: 2020 2222 220a 2020 2020 2020 2020 7365    """.        se
+000399b0: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
+000399c0: 290a 2020 2020 2020 2020 6d61 726b 6574  ).        market
+000399d0: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+000399e0: 7365 7474 6c65 203d 2073 656c 662e 7361  settle = self.sa
+000399f0: 6665 5f73 7472 696e 6728 7061 7261 6d73  fe_string(params
+00039a00: 2c20 2773 6574 746c 6543 6f69 6e27 290a  , 'settleCoin').
+00039a10: 2020 2020 2020 2020 6966 2073 6574 746c          if settl
+00039a20: 6520 6973 204e 6f6e 653a 0a20 2020 2020  e is None:.     
+00039a30: 2020 2020 2020 2073 6574 746c 652c 2070         settle, p
+00039a40: 6172 616d 7320 3d20 7365 6c66 2e68 616e  arams = self.han
+00039a50: 646c 655f 6f70 7469 6f6e 5f61 6e64 5f70  dle_option_and_p
+00039a60: 6172 616d 7328 7061 7261 6d73 2c20 2763  arams(params, 'c
+00039a70: 616e 6365 6c41 6c6c 4f72 6465 7273 272c  ancelAllOrders',
+00039a80: 2027 7365 7474 6c65 272c 2073 6574 746c   'settle', settl
+00039a90: 6529 0a20 2020 2020 2020 2069 6620 7379  e).        if sy
+00039aa0: 6d62 6f6c 2069 7320 6e6f 7420 4e6f 6e65  mbol is not None
+00039ab0: 3a0a 2020 2020 2020 2020 2020 2020 6d61  :.            ma
+00039ac0: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
+00039ad0: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
+00039ae0: 2020 2020 2020 2073 6574 746c 6520 3d20         settle = 
+00039af0: 6d61 726b 6574 5b27 7365 7474 6c65 275d  market['settle']
+00039b00: 0a20 2020 2020 2020 2073 7562 5479 7065  .        subType
+00039b10: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+00039b20: 7375 6254 7970 652c 2070 6172 616d 7320  subType, params 
+00039b30: 3d20 7365 6c66 2e68 616e 646c 655f 7375  = self.handle_su
+00039b40: 625f 7479 7065 5f61 6e64 5f70 6172 616d  b_type_and_param
+00039b50: 7328 2763 616e 6365 6c41 6c6c 4f72 6465  s('cancelAllOrde
+00039b60: 7273 272c 206d 6172 6b65 742c 2070 6172  rs', market, par
+00039b70: 616d 7329 0a20 2020 2020 2020 2069 7355  ams).        isU
+00039b80: 7364 6353 6574 746c 6564 203d 2073 6574  sdcSettled = set
+00039b90: 746c 6520 3d3d 2027 5553 4443 270a 2020  tle == 'USDC'.  
+00039ba0: 2020 2020 2020 6973 496e 7665 7273 6520        isInverse 
+00039bb0: 3d20 7375 6254 7970 6520 3d3d 2027 696e  = subType == 'in
+00039bc0: 7665 7273 6527 0a20 2020 2020 2020 2069  verse'.        i
+00039bd0: 734c 696e 6561 7253 6574 746c 6520 3d20  sLinearSettle = 
+00039be0: 6973 5573 6463 5365 7474 6c65 6420 6f72  isUsdcSettled or
+00039bf0: 2028 7365 7474 6c65 203d 3d20 2755 5344   (settle == 'USD
+00039c00: 5427 290a 2020 2020 2020 2020 6966 2069  T').        if i
+00039c10: 7349 6e76 6572 7365 2061 6e64 2069 734c  sInverse and isL
+00039c20: 696e 6561 7253 6574 746c 653a 0a20 2020  inearSettle:.   
+00039c30: 2020 2020 2020 2020 2072 6169 7365 2041           raise A
+00039c40: 7267 756d 656e 7473 5265 7175 6972 6564  rgumentsRequired
+00039c50: 2873 656c 662e 6964 202b 2027 2063 616e  (self.id + ' can
+00039c60: 6365 6c41 6c6c 4f72 6465 7273 2077 6974  celAllOrders wit
+00039c70: 6820 696e 7665 7273 6520 7375 6254 7970  h inverse subTyp
+00039c80: 6520 7265 7175 6972 6573 2073 6574 746c  e requires settl
+00039c90: 6520 746f 206e 6f74 2062 6520 5553 4454  e to not be USDT
+00039ca0: 206f 7220 5553 4443 2729 0a20 2020 2020   or USDC').     
+00039cb0: 2020 2074 7970 652c 2071 7565 7279 203d     type, query =
+00039cc0: 2073 656c 662e 6861 6e64 6c65 5f6d 6172   self.handle_mar
+00039cd0: 6b65 745f 7479 7065 5f61 6e64 5f70 6172  ket_type_and_par
+00039ce0: 616d 7328 2763 616e 6365 6c41 6c6c 4f72  ams('cancelAllOr
+00039cf0: 6465 7273 272c 206d 6172 6b65 742c 2070  ders', market, p
+00039d00: 6172 616d 7329 0a20 2020 2020 2020 2065  arams).        e
+00039d10: 6e61 626c 6555 6e69 6669 6564 4d61 7267  nableUnifiedMarg
+00039d20: 696e 2c20 656e 6162 6c65 556e 6966 6965  in, enableUnifie
+00039d30: 6441 6363 6f75 6e74 203d 2073 656c 662e  dAccount = self.
+00039d40: 6973 5f75 6e69 6669 6564 5f65 6e61 626c  is_unified_enabl
+00039d50: 6564 2829 0a20 2020 2020 2020 2069 6620  ed().        if 
+00039d60: 656e 6162 6c65 556e 6966 6965 6441 6363  enableUnifiedAcc
+00039d70: 6f75 6e74 3a0a 2020 2020 2020 2020 2020  ount:.          
+00039d80: 2020 7265 7475 726e 2073 656c 662e 6361    return self.ca
+00039d90: 6e63 656c 5f61 6c6c 5f75 6e69 6669 6564  ncel_all_unified
+00039da0: 5f61 6363 6f75 6e74 5f6f 7264 6572 7328  _account_orders(
+00039db0: 7379 6d62 6f6c 2c20 7175 6572 7929 0a20  symbol, query). 
+00039dc0: 2020 2020 2020 2065 6c69 6620 7479 7065         elif type
+00039dd0: 203d 3d20 2773 706f 7427 3a0a 2020 2020   == 'spot':.    
+00039de0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00039df0: 656c 662e 6361 6e63 656c 5f61 6c6c 5f73  elf.cancel_all_s
+00039e00: 706f 745f 6f72 6465 7273 2873 796d 626f  pot_orders(symbo
+00039e10: 6c2c 2071 7565 7279 290a 2020 2020 2020  l, query).      
+00039e20: 2020 656c 6966 2065 6e61 626c 6555 6e69    elif enableUni
+00039e30: 6669 6564 4d61 7267 696e 2061 6e64 206e  fiedMargin and n
+00039e40: 6f74 2069 7349 6e76 6572 7365 3a0a 2020  ot isInverse:.  
+00039e50: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00039e60: 2073 656c 662e 6361 6e63 656c 5f61 6c6c   self.cancel_all
+00039e70: 5f75 6e69 6669 6564 5f6d 6172 6769 6e5f  _unified_margin_
+00039e80: 6f72 6465 7273 2873 796d 626f 6c2c 2071  orders(symbol, q
+00039e90: 7565 7279 290a 2020 2020 2020 2020 656c  uery).        el
+00039ea0: 6966 2069 7355 7364 6353 6574 746c 6564  if isUsdcSettled
+00039eb0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00039ec0: 7475 726e 2073 656c 662e 6361 6e63 656c  turn self.cancel
+00039ed0: 5f61 6c6c 5f75 7364 635f 6f72 6465 7273  _all_usdc_orders
+00039ee0: 2873 796d 626f 6c2c 2071 7565 7279 290a  (symbol, query).
+00039ef0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00039f00: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00039f10: 2073 656c 662e 6361 6e63 656c 5f61 6c6c   self.cancel_all
+00039f20: 5f64 6572 6976 6174 6976 6573 5f6f 7264  _derivatives_ord
+00039f30: 6572 7328 7379 6d62 6f6c 2c20 7175 6572  ers(symbol, quer
+00039f40: 7929 0a0a 2020 2020 6465 6620 6665 7463  y)..    def fetc
+00039f50: 685f 756e 6966 6965 645f 6163 636f 756e  h_unified_accoun
+00039f60: 745f 6f72 6465 7273 2873 656c 662c 2073  t_orders(self, s
+00039f70: 796d 626f 6c3a 204f 7074 696f 6e61 6c5b  ymbol: Optional[
+00039f80: 7374 725d 203d 204e 6f6e 652c 2073 696e  str] = None, sin
+00039f90: 6365 3a20 4f70 7469 6f6e 616c 5b69 6e74  ce: Optional[int
+00039fa0: 5d20 3d20 4e6f 6e65 2c20 6c69 6d69 743a  ] = None, limit:
+00039fb0: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
+00039fc0: 204e 6f6e 652c 2070 6172 616d 733d 7b7d   None, params={}
+00039fd0: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
+00039fe0: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
+00039ff0: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+0003a000: 207b 0a20 2020 2020 2020 2020 2020 2023   {.            #
+0003a010: 2027 7379 6d62 6f6c 273a 206d 6172 6b65   'symbol': marke
+0003a020: 745b 2769 6427 5d2c 0a20 2020 2020 2020  t['id'],.       
+0003a030: 2020 2020 2023 2027 6361 7465 676f 7279       # 'category
+0003a040: 272c 2054 7970 6520 6f66 2064 6572 6976  ', Type of deriv
+0003a050: 6174 6976 6573 2070 726f 6475 6374 3a20  atives product: 
+0003a060: 7370 6f74 2c20 6c69 6e65 6172 206f 7220  spot, linear or 
+0003a070: 6f70 7469 6f6e 2e0a 2020 2020 2020 2020  option..        
+0003a080: 2020 2020 2320 2762 6173 6543 6f69 6e27      # 'baseCoin'
+0003a090: 2c20 4261 7365 2063 6f69 6e2e 2057 6865  , Base coin. Whe
+0003a0a0: 6e20 6361 7465 676f 7279 3d6f 7074 696f  n category=optio
+0003a0b0: 6e2e 2049 6620 6e6f 7420 7061 7373 6564  n. If not passed
+0003a0c0: 2c20 4254 4320 6279 2064 6566 6175 6c74  , BTC by default
+0003a0d0: 3b20 7768 656e 2063 6174 6567 6f72 793d  ; when category=
+0003a0e0: 6c69 6e65 6172 2c20 6966 2042 5443 2070  linear, if BTC p
+0003a0f0: 6173 7365 642c 2042 5443 5045 5250 2026  assed, BTCPERP &
+0003a100: 2042 5443 5553 4454 2072 6574 7572 6e65   BTCUSDT returne
+0003a110: 642e 0a20 2020 2020 2020 2020 2020 2023  d..            #
+0003a120: 2027 6f72 6465 7249 6427 2c20 4f72 6465   'orderId', Orde
+0003a130: 7220 4944 0a20 2020 2020 2020 2020 2020  r ID.           
+0003a140: 2023 2027 6f72 6465 724c 696e 6b49 6427   # 'orderLinkId'
+0003a150: 2c20 556e 6971 7565 2075 7365 722d 7365  , Unique user-se
+0003a160: 7420 6f72 6465 7220 4944 0a20 2020 2020  t order ID.     
+0003a170: 2020 2020 2020 2023 2027 6f72 6465 7253         # 'orderS
+0003a180: 7461 7475 7327 2c20 2023 2052 6574 7572  tatus',  # Retur
+0003a190: 6e20 616c 6c20 7374 6174 7573 206f 7264  n all status ord
+0003a1a0: 6572 7320 6966 206e 6f74 2070 6173 7365  ers if not passe
+0003a1b0: 640a 2020 2020 2020 2020 2020 2020 2320  d.            # 
+0003a1c0: 276f 7264 6572 4669 6c74 6572 272c 2043  'orderFilter', C
+0003a1d0: 6f6e 6469 7469 6f6e 616c 206f 7264 6572  onditional order
+0003a1e0: 206f 7220 6163 7469 7665 206f 7264 6572   or active order
+0003a1f0: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+0003a200: 6c69 6d69 7427 3a20 6e75 6d62 6572 2c20  limit': number, 
+0003a210: 4461 7461 2071 7561 6e74 6974 7920 7065  Data quantity pe
+0003a220: 7220 7061 6765 3a20 4d61 7820 6461 7461  r page: Max data
+0003a230: 2076 616c 7565 2070 6572 2070 6167 6520   value per page 
+0003a240: 6973 2035 302c 2061 6e64 2064 6566 6175  is 50, and defau
+0003a250: 6c74 2076 616c 7565 2061 7420 3230 2e0a  lt value at 20..
+0003a260: 2020 2020 2020 2020 2020 2020 2320 2763              # 'c
+0003a270: 7572 736f 7227 2c20 4150 4920 7061 7373  ursor', API pass
+0003a280: 2d74 6872 6f75 6768 2e20 6163 636f 756e  -through. accoun
+0003a290: 7454 7970 6520 2b20 6361 7465 676f 7279  tType + category
+0003a2a0: 202b 2063 7572 736f 7220 2b2e 2049 6620   + cursor +. If 
+0003a2b0: 696e 636f 6e73 6973 7465 6e74 2c20 7468  inconsistent, th
+0003a2c0: 6520 666f 6c6c 6f77 696e 6720 7368 6f75  e following shou
+0003a2d0: 6c64 2062 6520 7265 7475 726e 6564 3a20  ld be returned: 
+0003a2e0: 5468 6520 6163 636f 756e 7420 7479 7065  The account type
+0003a2f0: 2064 6f65 7320 6e6f 7420 6d61 7463 6820   does not match 
+0003a300: 7468 6520 7365 7276 6963 6520 696e 7175  the service inqu
+0003a310: 6972 792e 0a20 2020 2020 2020 2020 2020  iry..           
+0003a320: 2023 2027 7374 6172 7454 696d 6527 3a20   # 'startTime': 
+0003a330: 302c 2020 2320 5468 6520 7374 6172 7420  0,  # The start 
+0003a340: 7469 6d65 7374 616d 7028 6d73 2920 5375  timestamp(ms) Su
+0003a350: 7070 6f72 7420 5554 4120 6f6e 6c79 2074  pport UTA only t
+0003a360: 656d 706f 7261 7269 6c79 2073 7461 7274  emporarily start
+0003a370: 5469 6d65 2061 6e64 2065 6e64 5469 6d65  Time and endTime
+0003a380: 206d 7573 7420 6265 2070 6173 7365 6420   must be passed 
+0003a390: 746f 6765 7468 6572 2049 6620 6e6f 7420  together If not 
+0003a3a0: 7061 7373 6564 2c20 7175 6572 7920 7468  passed, query th
+0003a3b0: 6520 7061 7374 2037 2064 6179 7320 6461  e past 7 days da
+0003a3c0: 7461 2062 7920 6465 6661 756c 740a 2020  ta by default.  
+0003a3d0: 2020 2020 2020 2020 2020 2320 2765 6e64            # 'end
+0003a3e0: 5469 6d65 273a 2030 2c20 2023 2054 6865  Time': 0,  # The
+0003a3f0: 2065 6e64 2074 696d 6573 7461 6d70 286d   end timestamp(m
+0003a400: 7329 0a20 2020 2020 2020 207d 0a20 2020  s).        }.   
+0003a410: 2020 2020 206d 6172 6b65 7420 3d20 4e6f       market = No
+0003a420: 6e65 0a20 2020 2020 2020 2069 6620 7379  ne.        if sy
+0003a430: 6d62 6f6c 2069 7320 4e6f 6e65 3a0a 2020  mbol is None:.  
+0003a440: 2020 2020 2020 2020 2020 7479 7065 203d            type =
+0003a450: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
+0003a460: 2020 7479 7065 2c20 7061 7261 6d73 203d    type, params =
+0003a470: 2073 656c 662e 6861 6e64 6c65 5f6d 6172   self.handle_mar
+0003a480: 6b65 745f 7479 7065 5f61 6e64 5f70 6172  ket_type_and_par
+0003a490: 616d 7328 2766 6574 6368 4f72 6465 7273  ams('fetchOrders
+0003a4a0: 272c 206d 6172 6b65 742c 2070 6172 616d  ', market, param
+0003a4b0: 7329 0a20 2020 2020 2020 2020 2020 2023  s).            #
+0003a4c0: 206f 7074 696f 6e2c 2073 706f 740a 2020   option, spot.  
+0003a4d0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+0003a4e0: 745b 2763 6174 6567 6f72 7927 5d20 3d20  t['category'] = 
+0003a4f0: 7479 7065 0a20 2020 2020 2020 2020 2020  type.           
+0003a500: 2069 6620 7479 7065 203d 3d20 2773 7761   if type == 'swa
+0003a510: 7027 3a0a 2020 2020 2020 2020 2020 2020  p':.            
+0003a520: 2020 2020 7375 6254 7970 6520 3d20 4e6f      subType = No
+0003a530: 6e65 0a20 2020 2020 2020 2020 2020 2020  ne.             
+0003a540: 2020 2073 7562 5479 7065 2c20 7061 7261     subType, para
+0003a550: 6d73 203d 2073 656c 662e 6861 6e64 6c65  ms = self.handle
+0003a560: 5f73 7562 5f74 7970 655f 616e 645f 7061  _sub_type_and_pa
+0003a570: 7261 6d73 2827 6665 7463 684f 7264 6572  rams('fetchOrder
+0003a580: 7327 2c20 6d61 726b 6574 2c20 7061 7261  s', market, para
+0003a590: 6d73 2c20 276c 696e 6561 7227 290a 2020  ms, 'linear').  
+0003a5a0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0003a5b0: 7175 6573 745b 2763 6174 6567 6f72 7927  quest['category'
+0003a5c0: 5d20 3d20 7375 6254 7970 650a 2020 2020  ] = subType.    
+0003a5d0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0003a5e0: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
+0003a5f0: 656c 662e 6d61 726b 6574 2873 796d 626f  elf.market(symbo
+0003a600: 6c29 0a20 2020 2020 2020 2020 2020 2072  l).            r
+0003a610: 6571 7565 7374 5b27 7379 6d62 6f6c 275d  equest['symbol']
+0003a620: 203d 206d 6172 6b65 745b 2769 6427 5d0a   = market['id'].
+0003a630: 2020 2020 2020 2020 2020 2020 6966 206d              if m
+0003a640: 6172 6b65 745b 2773 706f 7427 5d3a 0a20  arket['spot']:. 
+0003a650: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0003a660: 6571 7565 7374 5b27 6361 7465 676f 7279  equest['category
+0003a670: 275d 203d 2027 7370 6f74 270a 2020 2020  '] = 'spot'.    
+0003a680: 2020 2020 2020 2020 656c 6966 206d 6172          elif mar
+0003a690: 6b65 745b 276f 7074 696f 6e27 5d3a 0a20  ket['option']:. 
+0003a6a0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0003a6b0: 6571 7565 7374 5b27 6361 7465 676f 7279  equest['category
+0003a6c0: 275d 203d 2027 6f70 7469 6f6e 270a 2020  '] = 'option'.  
+0003a6d0: 2020 2020 2020 2020 2020 656c 6966 206d            elif m
+0003a6e0: 6172 6b65 745b 276c 696e 6561 7227 5d3a  arket['linear']:
+0003a6f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003a700: 2072 6571 7565 7374 5b27 6361 7465 676f   request['catego
+0003a710: 7279 275d 203d 2027 6c69 6e65 6172 270a  ry'] = 'linear'.
+0003a720: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0003a730: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0003a740: 2020 7261 6973 6520 4e6f 7453 7570 706f    raise NotSuppo
+0003a750: 7274 6564 2873 656c 662e 6964 202b 2027  rted(self.id + '
+0003a760: 2066 6574 6368 4f72 6465 7273 2829 2064   fetchOrders() d
+0003a770: 6f65 7320 6e6f 7420 616c 6c6f 7720 696e  oes not allow in
+0003a780: 7665 7273 6520 6d61 726b 6574 206f 7264  verse market ord
+0003a790: 6572 7320 666f 7220 2720 2b20 7379 6d62  ers for ' + symb
+0003a7a0: 6f6c 202b 2027 206d 6172 6b65 7473 2729  ol + ' markets')
+0003a7b0: 0a20 2020 2020 2020 2069 7353 746f 7020  .        isStop 
+0003a7c0: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+0003a7d0: 6528 7061 7261 6d73 2c20 2773 746f 7027  e(params, 'stop'
+0003a7e0: 2c20 4661 6c73 6529 0a20 2020 2020 2020  , False).       
+0003a7f0: 2070 6172 616d 7320 3d20 7365 6c66 2e6f   params = self.o
+0003a800: 6d69 7428 7061 7261 6d73 2c20 5b27 7374  mit(params, ['st
+0003a810: 6f70 275d 290a 2020 2020 2020 2020 6966  op']).        if
+0003a820: 2069 7353 746f 703a 0a20 2020 2020 2020   isStop:.       
+0003a830: 2020 2020 2069 6620 6d61 726b 6574 5b27       if market['
+0003a840: 7370 6f74 275d 3a0a 2020 2020 2020 2020  spot']:.        
+0003a850: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+0003a860: 276f 7264 6572 4669 6c74 6572 275d 203d  'orderFilter'] =
+0003a870: 2027 7470 736c 4f72 6465 7227 0a20 2020   'tpslOrder'.   
+0003a880: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+0003a890: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0003a8a0: 6571 7565 7374 5b27 6f72 6465 7246 696c  equest['orderFil
+0003a8b0: 7465 7227 5d20 3d20 2753 746f 704f 7264  ter'] = 'StopOrd
+0003a8c0: 6572 270a 2020 2020 2020 2020 6966 206c  er'.        if l
+0003a8d0: 696d 6974 2069 7320 6e6f 7420 4e6f 6e65  imit is not None
+0003a8e0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+0003a8f0: 7175 6573 745b 276c 696d 6974 275d 203d  quest['limit'] =
+0003a900: 206c 696d 6974 0a20 2020 2020 2020 2069   limit.        i
+0003a910: 6620 7369 6e63 6520 6973 206e 6f74 204e  f since is not N
+0003a920: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+0003a930: 2072 6571 7565 7374 5b27 7374 6172 7454   request['startT
+0003a940: 696d 6527 5d20 3d20 7369 6e63 650a 2020  ime'] = since.  
+0003a950: 2020 2020 2020 756e 7469 6c20 3d20 7365        until = se
+0003a960: 6c66 2e73 6166 655f 696e 7465 6765 725f  lf.safe_integer_
+0003a970: 3228 7061 7261 6d73 2c20 2775 6e74 696c  2(params, 'until
+0003a980: 272c 2027 7469 6c6c 2729 2020 2320 756e  ', 'till')  # un
+0003a990: 6966 6965 6420 696e 206d 696c 6c69 7365  ified in millise
+0003a9a0: 636f 6e64 730a 2020 2020 2020 2020 656e  conds.        en
+0003a9b0: 6454 696d 6520 3d20 7365 6c66 2e73 6166  dTime = self.saf
+0003a9c0: 655f 696e 7465 6765 7228 7061 7261 6d73  e_integer(params
+0003a9d0: 2c20 2765 6e64 5469 6d65 272c 2075 6e74  , 'endTime', unt
+0003a9e0: 696c 2920 2023 2065 7863 6861 6e67 652d  il)  # exchange-
+0003a9f0: 7370 6563 6966 6963 2069 6e20 6d69 6c6c  specific in mill
+0003aa00: 6973 6563 6f6e 6473 0a20 2020 2020 2020  iseconds.       
+0003aa10: 2070 6172 616d 7320 3d20 7365 6c66 2e6f   params = self.o
+0003aa20: 6d69 7428 7061 7261 6d73 2c20 5b27 656e  mit(params, ['en
+0003aa30: 6454 696d 6527 2c20 2774 696c 6c27 2c20  dTime', 'till', 
+0003aa40: 2775 6e74 696c 275d 290a 2020 2020 2020  'until']).      
+0003aa50: 2020 6966 2065 6e64 5469 6d65 2069 7320    if endTime is 
+0003aa60: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+0003aa70: 2020 2020 2020 7265 7175 6573 745b 2765        request['e
+0003aa80: 6e64 5469 6d65 275d 203d 2065 6e64 5469  ndTime'] = endTi
+0003aa90: 6d65 0a20 2020 2020 2020 2065 6c73 653a  me.        else:
+0003aaa0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0003aab0: 7369 6e63 6520 6973 206e 6f74 204e 6f6e  since is not Non
+0003aac0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0003aad0: 2020 2072 6169 7365 2042 6164 5265 7175     raise BadRequ
+0003aae0: 6573 7428 7365 6c66 2e69 6420 2b20 2720  est(self.id + ' 
+0003aaf0: 6665 7463 684f 7264 6572 7328 2920 7265  fetchOrders() re
+0003ab00: 7175 6972 6573 2075 6e74 696c 2f65 6e64  quires until/end
+0003ab10: 5469 6d65 2077 6865 6e20 7369 6e63 6520  Time when since 
+0003ab20: 6973 2070 726f 7669 6465 642e 2729 0a20  is provided.'). 
+0003ab30: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+0003ab40: 3d20 7365 6c66 2e70 7269 7661 7465 4765  = self.privateGe
+0003ab50: 7456 354f 7264 6572 4869 7374 6f72 7928  tV5OrderHistory(
+0003ab60: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
+0003ab70: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
+0003ab80: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+0003ab90: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
+0003aba0: 2320 2020 2020 2020 2020 2272 6574 436f  #         "retCo
+0003abb0: 6465 223a 2030 2c0a 2020 2020 2020 2020  de": 0,.        
+0003abc0: 2320 2020 2020 2020 2020 2272 6574 4d73  #         "retMs
+0003abd0: 6722 3a20 224f 4b22 2c0a 2020 2020 2020  g": "OK",.      
+0003abe0: 2020 2320 2020 2020 2020 2020 2272 6573    #         "res
+0003abf0: 756c 7422 3a20 7b0a 2020 2020 2020 2020  ult": {.        
+0003ac00: 2320 2020 2020 2020 2020 2020 2020 226e  #             "n
+0003ac10: 6578 7450 6167 6543 7572 736f 7222 3a20  extPageCursor": 
+0003ac20: 2230 3332 3334 6465 392d 3133 3332 2d34  "03234de9-1332-4
+0003ac30: 3165 622d 6238 3035 2d34 6139 6634 3263  1eb-b805-4a9f42c
+0003ac40: 3133 3661 3325 3341 3136 3732 3232 3031  136a3%3A16722201
+0003ac50: 3039 3338 3725 3243 3033 3233 3464 6539  09387%2C03234de9
+0003ac60: 2d31 3333 322d 3431 6562 2d62 3830 352d  -1332-41eb-b805-
+0003ac70: 3461 3966 3432 6331 3336 6133 2533 4131  4a9f42c136a3%3A1
+0003ac80: 3637 3232 3230 3130 3933 3837 222c 0a20  672220109387",. 
+0003ac90: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003aca0: 2020 2020 2022 6361 7465 676f 7279 223a       "category":
+0003acb0: 2022 6c69 6e65 6172 222c 0a20 2020 2020   "linear",.     
+0003acc0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0003acd0: 2022 6c69 7374 223a 205b 0a20 2020 2020   "list": [.     
+0003ace0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0003acf0: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+0003ad00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003ad10: 2020 2020 2022 7379 6d62 6f6c 223a 2022       "symbol": "
+0003ad20: 4254 4355 5344 5422 2c0a 2020 2020 2020  BTCUSDT",.      
+0003ad30: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0003ad40: 2020 2020 2020 2020 226f 7264 6572 5479          "orderTy
+0003ad50: 7065 223a 2022 4c69 6d69 7422 2c0a 2020  pe": "Limit",.  
+0003ad60: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003ad70: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+0003ad80: 6572 4c69 6e6b 4964 223a 2022 7465 7374  erLinkId": "test
+0003ad90: 2d30 3031 222c 0a20 2020 2020 2020 2023  -001",.        #
+0003ada0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003adb0: 2020 2020 2022 6f72 6465 7249 6422 3a20       "orderId": 
+0003adc0: 2230 3332 3334 6465 392d 3133 3332 2d34  "03234de9-1332-4
+0003add0: 3165 622d 6238 3035 2d34 6139 6634 3263  1eb-b805-4a9f42c
+0003ade0: 3133 3661 3322 2c0a 2020 2020 2020 2020  136a3",.        
+0003adf0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0003ae00: 2020 2020 2020 2263 616e 6365 6c54 7970        "cancelTyp
+0003ae10: 6522 3a20 2243 616e 6365 6c42 7955 7365  e": "CancelByUse
+0003ae20: 7222 2c0a 2020 2020 2020 2020 2320 2020  r",.        #   
+0003ae30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003ae40: 2020 2261 7667 5072 6963 6522 3a20 2230    "avgPrice": "0
+0003ae50: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0003ae60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003ae70: 2022 7374 6f70 4f72 6465 7254 7970 6522   "stopOrderType"
+0003ae80: 3a20 2255 4e4b 4e4f 574e 222c 0a20 2020  : "UNKNOWN",.   
+0003ae90: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003aea0: 2020 2020 2020 2020 2020 2022 6c61 7374             "last
+0003aeb0: 5072 6963 654f 6e43 7265 6174 6564 223a  PriceOnCreated":
+0003aec0: 2022 3136 3635 362e 3522 2c0a 2020 2020   "16656.5",.    
+0003aed0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0003aee0: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+0003aef0: 5374 6174 7573 223a 2022 4361 6e63 656c  Status": "Cancel
+0003af00: 6c65 6422 2c0a 2020 2020 2020 2020 2320  led",.        # 
 0003af10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003af20: 2020 2020 2022 7174 7922 3a20 2230 2e31       "qty": "0.1
-0003af30: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0003af20: 2020 2020 2274 616b 6550 726f 6669 7422      "takeProfit"
+0003af30: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
 0003af40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003af50: 2022 7374 6f70 4c6f 7373 223a 2022 222c   "stopLoss": "",
-0003af60: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0003af70: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0003af80: 7472 6967 6765 7242 7922 3a20 2255 4e4b  triggerBy": "UNK
-0003af90: 4e4f 574e 220a 2020 2020 2020 2020 2320  NOWN".        # 
-0003afa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003afb0: 7d0a 2020 2020 2020 2020 2320 2020 2020  }.        #     
-0003afc0: 2020 2020 2020 2020 5d0a 2020 2020 2020          ].      
-0003afd0: 2020 2320 2020 2020 2020 2020 7d2c 0a20    #         },. 
-0003afe0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003aff0: 2022 7265 7445 7874 496e 666f 223a 207b   "retExtInfo": {
-0003b000: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
-0003b010: 2020 2020 2022 7469 6d65 223a 2031 3637       "time": 167
-0003b020: 3232 3231 3236 3338 3632 0a20 2020 2020  2221263862.     
-0003b030: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
-0003b040: 2020 2023 0a20 2020 2020 2020 2072 6573     #.        res
-0003b050: 756c 7420 3d20 7365 6c66 2e73 6166 655f  ult = self.safe_
-0003b060: 7661 6c75 6528 7265 7370 6f6e 7365 2c20  value(response, 
-0003b070: 2772 6573 756c 7427 2c20 7b7d 290a 2020  'result', {}).  
-0003b080: 2020 2020 2020 6461 7461 203d 2073 656c        data = sel
-0003b090: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
-0003b0a0: 756c 742c 2027 6c69 7374 272c 205b 5d29  ult, 'list', [])
-0003b0b0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0003b0c0: 7365 6c66 2e70 6172 7365 5f6f 7264 6572  self.parse_order
-0003b0d0: 7328 6461 7461 2c20 6d61 726b 6574 2c20  s(data, market, 
-0003b0e0: 7369 6e63 652c 206c 696d 6974 290a 0a20  since, limit).. 
-0003b0f0: 2020 2064 6566 2066 6574 6368 5f75 6e69     def fetch_uni
-0003b100: 6669 6564 5f6d 6172 6769 6e5f 6f72 6465  fied_margin_orde
-0003b110: 7273 2873 656c 662c 2073 796d 626f 6c3a  rs(self, symbol:
-0003b120: 204f 7074 696f 6e61 6c5b 7374 725d 203d   Optional[str] =
-0003b130: 204e 6f6e 652c 2073 696e 6365 3a20 4f70   None, since: Op
-0003b140: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
-0003b150: 6e65 2c20 6c69 6d69 743a 204f 7074 696f  ne, limit: Optio
-0003b160: 6e61 6c5b 696e 745d 203d 204e 6f6e 652c  nal[int] = None,
-0003b170: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
-0003b180: 2020 2020 2073 656c 662e 6c6f 6164 5f6d       self.load_m
-0003b190: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
-0003b1a0: 2072 6571 7565 7374 203d 207b 0a20 2020   request = {.   
-0003b1b0: 2020 2020 2020 2020 2023 2027 7379 6d62           # 'symb
-0003b1c0: 6f6c 273a 206d 6172 6b65 745b 2769 6427  ol': market['id'
-0003b1d0: 5d2c 0a20 2020 2020 2020 2020 2020 2023  ],.            #
-0003b1e0: 2027 6361 7465 676f 7279 272c 2054 7970   'category', Typ
-0003b1f0: 6520 6f66 2064 6572 6976 6174 6976 6573  e of derivatives
-0003b200: 2070 726f 6475 6374 3a20 6c69 6e65 6172   product: linear
-0003b210: 206f 7220 6f70 7469 6f6e 2e0a 2020 2020   or option..    
-0003b220: 2020 2020 2020 2020 2320 2762 6173 6543          # 'baseC
-0003b230: 6f69 6e27 2c20 4261 7365 2063 6f69 6e2e  oin', Base coin.
-0003b240: 2057 6865 6e20 6361 7465 676f 7279 3d6f   When category=o
-0003b250: 7074 696f 6e2e 2049 6620 6e6f 7420 7061  ption. If not pa
-0003b260: 7373 6564 2c20 4254 4320 6279 2064 6566  ssed, BTC by def
-0003b270: 6175 6c74 3b20 7768 656e 2063 6174 6567  ault; when categ
-0003b280: 6f72 793d 6c69 6e65 6172 2c20 6966 2042  ory=linear, if B
-0003b290: 5443 2070 6173 7365 642c 2042 5443 5045  TC passed, BTCPE
-0003b2a0: 5250 2026 2042 5443 5553 4454 2072 6574  RP & BTCUSDT ret
-0003b2b0: 7572 6e65 642e 0a20 2020 2020 2020 2020  urned..         
-0003b2c0: 2020 2023 2027 6f72 6465 7249 6427 2c20     # 'orderId', 
-0003b2d0: 4f72 6465 7220 4944 0a20 2020 2020 2020  Order ID.       
-0003b2e0: 2020 2020 2023 2027 6f72 6465 724c 696e       # 'orderLin
-0003b2f0: 6b49 6427 2c20 556e 6971 7565 2075 7365  kId', Unique use
-0003b300: 722d 7365 7420 6f72 6465 7220 4944 0a20  r-set order ID. 
-0003b310: 2020 2020 2020 2020 2020 2023 2027 6f72             # 'or
-0003b320: 6465 7253 7461 7475 7327 2c20 5175 6572  derStatus', Quer
-0003b330: 7920 6c69 7374 206f 6620 6f72 6465 7273  y list of orders
-0003b340: 2069 6e20 6465 7369 676e 6174 6564 2073   in designated s
-0003b350: 7461 7465 732e 2049 6620 7365 6c66 2070  tates. If self p
-0003b360: 6172 616d 6574 6572 2069 7320 6e6f 7420  arameter is not 
-0003b370: 7061 7373 6564 2c20 7468 6520 6f72 6465  passed, the orde
-0003b380: 7273 2069 6e20 616c 6c20 7374 6174 6573  rs in all states
-0003b390: 2073 6861 6c6c 2062 6520 656e 7175 6972   shall be enquir
-0003b3a0: 6564 2062 7920 6465 6661 756c 742e 2054  ed by default. T
-0003b3b0: 6869 7320 7061 7261 6d65 7465 7220 7375  his parameter su
-0003b3c0: 7070 6f72 7473 206d 756c 7469 2d73 7461  pports multi-sta
-0003b3d0: 7465 2069 6e71 7569 7279 2e20 5374 6174  te inquiry. Stat
-0003b3e0: 6573 2073 686f 756c 6420 6265 2073 6570  es should be sep
-0003b3f0: 6172 6174 6564 2077 6974 6820 456e 676c  arated with Engl
-0003b400: 6973 6820 636f 6d6d 6173 2e0a 2020 2020  ish commas..    
-0003b410: 2020 2020 2020 2020 2320 276f 7264 6572          # 'order
-0003b420: 4669 6c74 6572 272c 2043 6f6e 6469 7469  Filter', Conditi
-0003b430: 6f6e 616c 206f 7264 6572 206f 7220 6163  onal order or ac
-0003b440: 7469 7665 206f 7264 6572 0a20 2020 2020  tive order.     
-0003b450: 2020 2020 2020 2023 2027 6469 7265 6374         # 'direct
-0003b460: 696f 6e27 2c20 7072 6576 3a20 7072 6576  ion', prev: prev
-0003b470: 2c20 6e65 7874 3a20 6e65 7874 2e0a 2020  , next: next..  
-0003b480: 2020 2020 2020 2020 2020 2320 276c 696d            # 'lim
-0003b490: 6974 273a 206e 756d 6265 722c 2044 6174  it': number, Dat
-0003b4a0: 6120 7175 616e 7469 7479 2070 6572 2070  a quantity per p
-0003b4b0: 6167 653a 204d 6178 2064 6174 6120 7661  age: Max data va
-0003b4c0: 6c75 6520 7065 7220 7061 6765 2069 7320  lue per page is 
-0003b4d0: 3530 2c20 616e 6420 6465 6661 756c 7420  50, and default 
-0003b4e0: 7661 6c75 6520 6174 2032 302e 0a20 2020  value at 20..   
-0003b4f0: 2020 2020 2020 2020 2023 2027 6375 7273           # 'curs
-0003b500: 6f72 272c 2041 5049 2070 6173 732d 7468  or', API pass-th
-0003b510: 726f 7567 682e 2061 6363 6f75 6e74 5479  rough. accountTy
-0003b520: 7065 202b 2063 6174 6567 6f72 7920 2b20  pe + category + 
-0003b530: 6375 7273 6f72 202b 2e20 4966 2069 6e63  cursor +. If inc
-0003b540: 6f6e 7369 7374 656e 742c 2074 6865 2066  onsistent, the f
-0003b550: 6f6c 6c6f 7769 6e67 2073 686f 756c 6420  ollowing should 
-0003b560: 6265 2072 6574 7572 6e65 643a 2054 6865  be returned: The
-0003b570: 2061 6363 6f75 6e74 2074 7970 6520 646f   account type do
-0003b580: 6573 206e 6f74 206d 6174 6368 2074 6865  es not match the
-0003b590: 2073 6572 7669 6365 2069 6e71 7569 7279   service inquiry
-0003b5a0: 2e0a 2020 2020 2020 2020 7d0a 2020 2020  ..        }.    
-0003b5b0: 2020 2020 6d61 726b 6574 203d 204e 6f6e      market = Non
-0003b5c0: 650a 2020 2020 2020 2020 6966 2073 796d  e.        if sym
-0003b5d0: 626f 6c20 6973 204e 6f6e 653a 0a20 2020  bol is None:.   
-0003b5e0: 2020 2020 2020 2020 2073 7562 5479 7065           subType
-0003b5f0: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-0003b600: 2020 2020 7375 6254 7970 652c 2070 6172      subType, par
-0003b610: 616d 7320 3d20 7365 6c66 2e68 616e 646c  ams = self.handl
-0003b620: 655f 7375 625f 7479 7065 5f61 6e64 5f70  e_sub_type_and_p
-0003b630: 6172 616d 7328 2766 6574 6368 556e 6966  arams('fetchUnif
-0003b640: 6965 644d 6172 6769 6e4f 7264 6572 7327  iedMarginOrders'
-0003b650: 2c20 6d61 726b 6574 2c20 7061 7261 6d73  , market, params
-0003b660: 2c20 276c 696e 6561 7227 290a 2020 2020  , 'linear').    
-0003b670: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0003b680: 2763 6174 6567 6f72 7927 5d20 3d20 7375  'category'] = su
-0003b690: 6254 7970 650a 2020 2020 2020 2020 656c  bType.        el
-0003b6a0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0003b6b0: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
-0003b6c0: 726b 6574 2873 796d 626f 6c29 0a20 2020  rket(symbol).   
-0003b6d0: 2020 2020 2020 2020 2072 6571 7565 7374           request
-0003b6e0: 5b27 7379 6d62 6f6c 275d 203d 206d 6172  ['symbol'] = mar
-0003b6f0: 6b65 745b 2769 6427 5d0a 2020 2020 2020  ket['id'].      
-0003b700: 2020 2020 2020 6966 206d 6172 6b65 745b        if market[
-0003b710: 276f 7074 696f 6e27 5d3a 0a20 2020 2020  'option']:.     
-0003b720: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-0003b730: 7374 5b27 6361 7465 676f 7279 275d 203d  st['category'] =
-0003b740: 2027 6f70 7469 6f6e 270a 2020 2020 2020   'option'.      
-0003b750: 2020 2020 2020 656c 6966 206d 6172 6b65        elif marke
-0003b760: 745b 276c 696e 6561 7227 5d3a 0a20 2020  t['linear']:.   
-0003b770: 2020 2020 2020 2020 2020 2020 2072 6571               req
-0003b780: 7565 7374 5b27 6361 7465 676f 7279 275d  uest['category']
-0003b790: 203d 2027 6c69 6e65 6172 270a 2020 2020   = 'linear'.    
-0003b7a0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0003b7b0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
-0003b7c0: 6973 6520 4e6f 7453 7570 706f 7274 6564  ise NotSupported
-0003b7d0: 2873 656c 662e 6964 202b 2027 2066 6574  (self.id + ' fet
-0003b7e0: 6368 556e 6966 6965 644d 6172 6769 6e4f  chUnifiedMarginO
-0003b7f0: 7264 6572 7328 2920 646f 6573 206e 6f74  rders() does not
-0003b800: 2061 6c6c 6f77 2069 6e76 6572 7365 206d   allow inverse m
-0003b810: 6172 6b65 7420 6f72 6465 7273 2066 6f72  arket orders for
-0003b820: 2027 202b 2073 796d 626f 6c20 2b20 2720   ' + symbol + ' 
-0003b830: 6d61 726b 6574 7327 290a 2020 2020 2020  markets').      
-0003b840: 2020 6973 5374 6f70 203d 2073 656c 662e    isStop = self.
-0003b850: 7361 6665 5f76 616c 7565 2870 6172 616d  safe_value(param
-0003b860: 732c 2027 7374 6f70 272c 2046 616c 7365  s, 'stop', False
-0003b870: 290a 2020 2020 2020 2020 7061 7261 6d73  ).        params
-0003b880: 203d 2073 656c 662e 6f6d 6974 2870 6172   = self.omit(par
-0003b890: 616d 732c 205b 2773 746f 7027 5d29 0a20  ams, ['stop']). 
-0003b8a0: 2020 2020 2020 2069 6620 6973 5374 6f70         if isStop
-0003b8b0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0003b8c0: 7175 6573 745b 276f 7264 6572 4669 6c74  quest['orderFilt
-0003b8d0: 6572 275d 203d 2027 5374 6f70 4f72 6465  er'] = 'StopOrde
-0003b8e0: 7227 0a20 2020 2020 2020 2069 6620 6c69  r'.        if li
-0003b8f0: 6d69 7420 6973 206e 6f74 204e 6f6e 653a  mit is not None:
-0003b900: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-0003b910: 7565 7374 5b27 6c69 6d69 7427 5d20 3d20  uest['limit'] = 
-0003b920: 6c69 6d69 740a 2020 2020 2020 2020 7265  limit.        re
-0003b930: 7370 6f6e 7365 203d 2073 656c 662e 7072  sponse = self.pr
-0003b940: 6976 6174 6547 6574 556e 6966 6965 6456  ivateGetUnifiedV
-0003b950: 3350 7269 7661 7465 4f72 6465 724c 6973  3PrivateOrderLis
-0003b960: 7428 7365 6c66 2e65 7874 656e 6428 7265  t(self.extend(re
-0003b970: 7175 6573 742c 2070 6172 616d 7329 290a  quest, params)).
-0003b980: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0003b990: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
-0003b9a0: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
-0003b9b0: 436f 6465 223a 2030 2c0a 2020 2020 2020  Code": 0,.      
-0003b9c0: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
-0003b9d0: 4d73 6722 3a20 2253 7563 6365 7373 222c  Msg": "Success",
-0003b9e0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0003b9f0: 2020 2022 7265 7375 6c74 223a 207b 0a20     "result": {. 
-0003ba00: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003ba10: 2022 6e65 7874 5061 6765 4375 7273 6f72   "nextPageCursor
-0003ba20: 223a 2022 3764 3137 6433 3539 2d34 6533  ": "7d17d359-4e3
-0003ba30: 382d 3464 3361 2d39 6133 312d 3239 3739  8-4d3a-9a31-2979
-0003ba40: 3165 6632 6466 6437 2533 4131 3635 3737  1ef2dfd7%3A16577
-0003ba50: 3131 3934 3939 3238 2532 4337 6431 3764  11949928%2C7d17d
-0003ba60: 3335 392d 3465 3338 2d34 6433 612d 3961  359-4e38-4d3a-9a
-0003ba70: 3331 2d32 3937 3931 6566 3264 6664 3725  31-29791ef2dfd7%
-0003ba80: 3341 3136 3537 3731 3139 3439 3932 3822  3A1657711949928"
-0003ba90: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0003baa0: 2020 2020 2263 6174 6567 6f72 7922 3a20      "category": 
-0003bab0: 226c 696e 6561 7222 2c0a 2020 2020 2020  "linear",.      
-0003bac0: 2020 2320 2020 2020 2020 2020 226c 6973    #         "lis
-0003bad0: 7422 3a20 5b0a 2020 2020 2020 2020 2320  t": [.        # 
-0003bae0: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-0003baf0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003bb00: 2020 2020 2020 2020 2273 796d 626f 6c22          "symbol"
-0003bb10: 3a20 2245 5448 5553 4454 222c 0a20 2020  : "ETHUSDT",.   
-0003bb20: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0003bb30: 2020 2020 2020 2022 6f72 6465 7254 7970         "orderTyp
-0003bb40: 6522 3a20 224d 6172 6b65 7422 2c0a 2020  e": "Market",.  
-0003bb50: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003bb60: 2020 2020 2020 2020 226f 7264 6572 4c69          "orderLi
-0003bb70: 6e6b 4964 223a 2022 222c 0a20 2020 2020  nkId": "",.     
-0003bb80: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0003bb90: 2020 2020 2022 6f72 6465 7249 6422 3a20       "orderId": 
-0003bba0: 2237 6431 3764 3335 392d 3465 3338 2d34  "7d17d359-4e38-4
-0003bbb0: 6433 612d 3961 3331 2d32 3937 3931 6566  d3a-9a31-29791ef
-0003bbc0: 3264 6664 3722 2c0a 2020 2020 2020 2020  2dfd7",.        
-0003bbd0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0003bbe0: 2020 2273 746f 704f 7264 6572 5479 7065    "stopOrderType
-0003bbf0: 223a 2022 554e 4b4e 4f57 4e22 2c0a 2020  ": "UNKNOWN",.  
-0003bc00: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003bc10: 2020 2020 2020 2020 226f 7264 6572 5374          "orderSt
-0003bc20: 6174 7573 223a 2022 4669 6c6c 6564 222c  atus": "Filled",
-0003bc30: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0003bc40: 2020 2020 2020 2020 2020 2022 7461 6b65             "take
-0003bc50: 5072 6f66 6974 223a 2022 222c 0a20 2020  Profit": "",.   
-0003bc60: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0003bc70: 2020 2020 2020 2022 6375 6d45 7865 6356         "cumExecV
-0003bc80: 616c 7565 223a 2022 3533 362e 3932 3530  alue": "536.9250
-0003bc90: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
-0003bca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003bcb0: 2022 626c 6f63 6b54 7261 6465 4964 223a   "blockTradeId":
-0003bcc0: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
-0003bcd0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0003bce0: 7265 6a65 6374 5265 6173 6f6e 223a 2022  rejectReason": "
-0003bcf0: 4543 5f4e 6f45 7272 6f72 222c 0a20 2020  EC_NoError",.   
-0003bd00: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0003bd10: 2020 2020 2020 2022 7072 6963 6522 3a20         "price": 
-0003bd20: 2231 3132 372e 3130 3030 3030 3030 222c  "1127.10000000",
-0003bd30: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0003bd40: 2020 2020 2020 2020 2020 2022 6372 6561             "crea
-0003bd50: 7465 6454 696d 6522 3a20 3136 3537 3731  tedTime": 165771
-0003bd60: 3139 3439 3932 382c 0a20 2020 2020 2020  1949928,.       
-0003bd70: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0003bd80: 2020 2022 7470 5472 6967 6765 7242 7922     "tpTriggerBy"
-0003bd90: 3a20 2255 4e4b 4e4f 574e 222c 0a20 2020  : "UNKNOWN",.   
-0003bda0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0003bdb0: 2020 2020 2020 2022 7469 6d65 496e 466f         "timeInFo
-0003bdc0: 7263 6522 3a20 2249 6d6d 6564 6961 7465  rce": "Immediate
-0003bdd0: 4f72 4361 6e63 656c 222c 0a20 2020 2020  OrCancel",.     
-0003bde0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0003bdf0: 2020 2020 2022 6261 7365 5072 6963 6522       "basePrice"
-0003be00: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
-0003be10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003be20: 226c 6561 7665 7356 616c 7565 223a 2022  "leavesValue": "
-0003be30: 302e 3030 3030 3030 3030 222c 0a20 2020  0.00000000",.   
-0003be40: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0003be50: 2020 2020 2020 2022 7570 6461 7465 6454         "updatedT
-0003be60: 696d 6522 3a20 3136 3537 3731 3139 3439  ime": 1657711949
-0003be70: 3934 352c 0a20 2020 2020 2020 2023 2020  945,.        #  
-0003be80: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0003be90: 7369 6465 223a 2022 4275 7922 2c0a 2020  side": "Buy",.  
-0003bea0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003beb0: 2020 2020 2020 2020 2274 7269 6767 6572          "trigger
-0003bec0: 5072 6963 6522 3a20 2222 2c0a 2020 2020  Price": "",.    
-0003bed0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003bee0: 2020 2020 2020 2263 756d 4578 6563 4665        "cumExecFe
-0003bef0: 6522 3a20 2230 2e33 3232 3135 3530 3022  e": "0.32215500"
-0003bf00: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0003bf10: 2020 2020 2020 2020 2020 2020 2273 6c54              "slT
-0003bf20: 7269 6767 6572 4279 223a 2022 554e 4b4e  riggerBy": "UNKN
-0003bf30: 4f57 4e22 2c0a 2020 2020 2020 2020 2320  OWN",.        # 
-0003bf40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003bf50: 226c 6561 7665 7351 7479 223a 2022 302e  "leavesQty": "0.
-0003bf60: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
-0003bf70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003bf80: 2022 636c 6f73 654f 6e54 7269 6767 6572   "closeOnTrigger
-0003bf90: 223a 2046 616c 7365 2c0a 2020 2020 2020  ": False,.      
-0003bfa0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0003bfb0: 2020 2020 2263 756d 4578 6563 5174 7922      "cumExecQty"
-0003bfc0: 3a20 2230 2e35 3030 3022 2c0a 2020 2020  : "0.5000",.    
-0003bfd0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003bfe0: 2020 2020 2020 2272 6564 7563 654f 6e6c        "reduceOnl
-0003bff0: 7922 3a20 4661 6c73 652c 0a20 2020 2020  y": False,.     
-0003c000: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0003c010: 2020 2020 2022 7174 7922 3a20 2230 2e35       "qty": "0.5
-0003c020: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
-0003c030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c040: 2273 746f 704c 6f73 7322 3a20 2222 2c0a  "stopLoss": "",.
-0003c050: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003c060: 2020 2020 2020 2020 2020 2274 7269 6767            "trigg
-0003c070: 6572 4279 223a 2022 554e 4b4e 4f57 4e22  erBy": "UNKNOWN"
+0003af50: 2020 2020 2263 756d 4578 6563 5661 6c75      "cumExecValu
+0003af60: 6522 3a20 2230 222c 0a20 2020 2020 2020  e": "0",.       
+0003af70: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0003af80: 2020 2020 2020 2022 7472 6967 6765 7244         "triggerD
+0003af90: 6972 6563 7469 6f6e 223a 2030 2c0a 2020  irection": 0,.  
+0003afa0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003afb0: 2020 2020 2020 2020 2020 2020 2262 6c6f              "blo
+0003afc0: 636b 5472 6164 6549 6422 3a20 2222 2c0a  ckTradeId": "",.
+0003afd0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003afe0: 2020 2020 2020 2020 2020 2020 2020 2272                "r
+0003aff0: 656a 6563 7452 6561 736f 6e22 3a20 2245  ejectReason": "E
+0003b000: 435f 5065 7243 616e 6365 6c52 6571 7565  C_PerCancelReque
+0003b010: 7374 222c 0a20 2020 2020 2020 2023 2020  st",.        #  
+0003b020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b030: 2020 2022 6973 4c65 7665 7261 6765 223a     "isLeverage":
+0003b040: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
+0003b050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b060: 2020 2022 7072 6963 6522 3a20 2231 3830     "price": "180
+0003b070: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+0003b080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b090: 2020 2022 6f72 6465 7249 7622 3a20 2222     "orderIv": ""
+0003b0a0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003b0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b0c0: 2263 7265 6174 6564 5469 6d65 223a 2022  "createdTime": "
+0003b0d0: 3136 3732 3232 3031 3039 3338 3722 2c0a  1672220109387",.
+0003b0e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003b0f0: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+0003b100: 7054 7269 6767 6572 4279 223a 2022 554e  pTriggerBy": "UN
+0003b110: 4b4e 4f57 4e22 2c0a 2020 2020 2020 2020  KNOWN",.        
+0003b120: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0003b130: 2020 2020 2020 2270 6f73 6974 696f 6e49        "positionI
+0003b140: 6478 223a 2030 2c0a 2020 2020 2020 2020  dx": 0,.        
+0003b150: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0003b160: 2020 2020 2020 2274 696d 6549 6e46 6f72        "timeInFor
+0003b170: 6365 223a 2022 476f 6f64 5469 6c6c 4361  ce": "GoodTillCa
+0003b180: 6e63 656c 222c 0a20 2020 2020 2020 2023  ncel",.        #
+0003b190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b1a0: 2020 2020 2022 6c65 6176 6573 5661 6c75       "leavesValu
+0003b1b0: 6522 3a20 2230 222c 0a20 2020 2020 2020  e": "0",.       
+0003b1c0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0003b1d0: 2020 2020 2020 2022 7570 6461 7465 6454         "updatedT
+0003b1e0: 696d 6522 3a20 2231 3637 3232 3230 3131  ime": "167222011
+0003b1f0: 3431 3233 222c 0a20 2020 2020 2020 2023  4123",.        #
+0003b200: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b210: 2020 2020 2022 7369 6465 223a 2022 5365       "side": "Se
+0003b220: 6c6c 222c 0a20 2020 2020 2020 2023 2020  ll",.        #  
+0003b230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b240: 2020 2022 7472 6967 6765 7250 7269 6365     "triggerPrice
+0003b250: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
+0003b260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b270: 2020 2020 2022 6375 6d45 7865 6346 6565       "cumExecFee
+0003b280: 223a 2022 3022 2c0a 2020 2020 2020 2020  ": "0",.        
+0003b290: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0003b2a0: 2020 2020 2020 2273 6c54 7269 6767 6572        "slTrigger
+0003b2b0: 4279 223a 2022 554e 4b4e 4f57 4e22 2c0a  By": "UNKNOWN",.
+0003b2c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003b2d0: 2020 2020 2020 2020 2020 2020 2020 226c                "l
+0003b2e0: 6561 7665 7351 7479 223a 2022 3022 2c0a  eavesQty": "0",.
+0003b2f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003b300: 2020 2020 2020 2020 2020 2020 2020 2263                "c
+0003b310: 6c6f 7365 4f6e 5472 6967 6765 7222 3a20  loseOnTrigger": 
+0003b320: 4661 6c73 652c 0a20 2020 2020 2020 2023  False,.        #
+0003b330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b340: 2020 2020 2022 6375 6d45 7865 6351 7479       "cumExecQty
+0003b350: 223a 2022 3022 2c0a 2020 2020 2020 2020  ": "0",.        
+0003b360: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0003b370: 2020 2020 2020 2272 6564 7563 654f 6e6c        "reduceOnl
+0003b380: 7922 3a20 4661 6c73 652c 0a20 2020 2020  y": False,.     
+0003b390: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0003b3a0: 2020 2020 2020 2020 2022 7174 7922 3a20           "qty": 
+0003b3b0: 2230 2e31 222c 0a20 2020 2020 2020 2023  "0.1",.        #
+0003b3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b3d0: 2020 2020 2022 7374 6f70 4c6f 7373 223a       "stopLoss":
+0003b3e0: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
+0003b3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b400: 2020 2022 7472 6967 6765 7242 7922 3a20     "triggerBy": 
+0003b410: 2255 4e4b 4e4f 574e 220a 2020 2020 2020  "UNKNOWN".      
+0003b420: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0003b430: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
+0003b440: 2020 2020 2020 2020 2020 2020 5d0a 2020              ].  
+0003b450: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003b460: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
+0003b470: 2020 2020 2022 7265 7445 7874 496e 666f       "retExtInfo
+0003b480: 223a 207b 7d2c 0a20 2020 2020 2020 2023  ": {},.        #
+0003b490: 2020 2020 2020 2020 2022 7469 6d65 223a           "time":
+0003b4a0: 2031 3637 3232 3231 3236 3338 3632 0a20   1672221263862. 
+0003b4b0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+0003b4c0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+0003b4d0: 2072 6573 756c 7420 3d20 7365 6c66 2e73   result = self.s
+0003b4e0: 6166 655f 7661 6c75 6528 7265 7370 6f6e  afe_value(respon
+0003b4f0: 7365 2c20 2772 6573 756c 7427 2c20 7b7d  se, 'result', {}
+0003b500: 290a 2020 2020 2020 2020 6461 7461 203d  ).        data =
+0003b510: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+0003b520: 2872 6573 756c 742c 2027 6c69 7374 272c  (result, 'list',
+0003b530: 205b 5d29 0a20 2020 2020 2020 2072 6574   []).        ret
+0003b540: 7572 6e20 7365 6c66 2e70 6172 7365 5f6f  urn self.parse_o
+0003b550: 7264 6572 7328 6461 7461 2c20 6d61 726b  rders(data, mark
+0003b560: 6574 2c20 7369 6e63 652c 206c 696d 6974  et, since, limit
+0003b570: 290a 0a20 2020 2064 6566 2066 6574 6368  )..    def fetch
+0003b580: 5f75 6e69 6669 6564 5f6d 6172 6769 6e5f  _unified_margin_
+0003b590: 6f72 6465 7273 2873 656c 662c 2073 796d  orders(self, sym
+0003b5a0: 626f 6c3a 204f 7074 696f 6e61 6c5b 7374  bol: Optional[st
+0003b5b0: 725d 203d 204e 6f6e 652c 2073 696e 6365  r] = None, since
+0003b5c0: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
+0003b5d0: 3d20 4e6f 6e65 2c20 6c69 6d69 743a 204f  = None, limit: O
+0003b5e0: 7074 696f 6e61 6c5b 696e 745d 203d 204e  ptional[int] = N
+0003b5f0: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
+0003b600: 0a20 2020 2020 2020 2073 656c 662e 6c6f  .        self.lo
+0003b610: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
+0003b620: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
+0003b630: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+0003b640: 7379 6d62 6f6c 273a 206d 6172 6b65 745b  symbol': market[
+0003b650: 2769 6427 5d2c 0a20 2020 2020 2020 2020  'id'],.         
+0003b660: 2020 2023 2027 6361 7465 676f 7279 272c     # 'category',
+0003b670: 2054 7970 6520 6f66 2064 6572 6976 6174   Type of derivat
+0003b680: 6976 6573 2070 726f 6475 6374 3a20 6c69  ives product: li
+0003b690: 6e65 6172 206f 7220 6f70 7469 6f6e 2e0a  near or option..
+0003b6a0: 2020 2020 2020 2020 2020 2020 2320 2762              # 'b
+0003b6b0: 6173 6543 6f69 6e27 2c20 4261 7365 2063  aseCoin', Base c
+0003b6c0: 6f69 6e2e 2057 6865 6e20 6361 7465 676f  oin. When catego
+0003b6d0: 7279 3d6f 7074 696f 6e2e 2049 6620 6e6f  ry=option. If no
+0003b6e0: 7420 7061 7373 6564 2c20 4254 4320 6279  t passed, BTC by
+0003b6f0: 2064 6566 6175 6c74 3b20 7768 656e 2063   default; when c
+0003b700: 6174 6567 6f72 793d 6c69 6e65 6172 2c20  ategory=linear, 
+0003b710: 6966 2042 5443 2070 6173 7365 642c 2042  if BTC passed, B
+0003b720: 5443 5045 5250 2026 2042 5443 5553 4454  TCPERP & BTCUSDT
+0003b730: 2072 6574 7572 6e65 642e 0a20 2020 2020   returned..     
+0003b740: 2020 2020 2020 2023 2027 6f72 6465 7249         # 'orderI
+0003b750: 6427 2c20 4f72 6465 7220 4944 0a20 2020  d', Order ID.   
+0003b760: 2020 2020 2020 2020 2023 2027 6f72 6465           # 'orde
+0003b770: 724c 696e 6b49 6427 2c20 556e 6971 7565  rLinkId', Unique
+0003b780: 2075 7365 722d 7365 7420 6f72 6465 7220   user-set order 
+0003b790: 4944 0a20 2020 2020 2020 2020 2020 2023  ID.            #
+0003b7a0: 2027 6f72 6465 7253 7461 7475 7327 2c20   'orderStatus', 
+0003b7b0: 5175 6572 7920 6c69 7374 206f 6620 6f72  Query list of or
+0003b7c0: 6465 7273 2069 6e20 6465 7369 676e 6174  ders in designat
+0003b7d0: 6564 2073 7461 7465 732e 2049 6620 7365  ed states. If se
+0003b7e0: 6c66 2070 6172 616d 6574 6572 2069 7320  lf parameter is 
+0003b7f0: 6e6f 7420 7061 7373 6564 2c20 7468 6520  not passed, the 
+0003b800: 6f72 6465 7273 2069 6e20 616c 6c20 7374  orders in all st
+0003b810: 6174 6573 2073 6861 6c6c 2062 6520 656e  ates shall be en
+0003b820: 7175 6972 6564 2062 7920 6465 6661 756c  quired by defaul
+0003b830: 742e 2054 6869 7320 7061 7261 6d65 7465  t. This paramete
+0003b840: 7220 7375 7070 6f72 7473 206d 756c 7469  r supports multi
+0003b850: 2d73 7461 7465 2069 6e71 7569 7279 2e20  -state inquiry. 
+0003b860: 5374 6174 6573 2073 686f 756c 6420 6265  States should be
+0003b870: 2073 6570 6172 6174 6564 2077 6974 6820   separated with 
+0003b880: 456e 676c 6973 6820 636f 6d6d 6173 2e0a  English commas..
+0003b890: 2020 2020 2020 2020 2020 2020 2320 276f              # 'o
+0003b8a0: 7264 6572 4669 6c74 6572 272c 2043 6f6e  rderFilter', Con
+0003b8b0: 6469 7469 6f6e 616c 206f 7264 6572 206f  ditional order o
+0003b8c0: 7220 6163 7469 7665 206f 7264 6572 0a20  r active order. 
+0003b8d0: 2020 2020 2020 2020 2020 2023 2027 6469             # 'di
+0003b8e0: 7265 6374 696f 6e27 2c20 7072 6576 3a20  rection', prev: 
+0003b8f0: 7072 6576 2c20 6e65 7874 3a20 6e65 7874  prev, next: next
+0003b900: 2e0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+0003b910: 276c 696d 6974 273a 206e 756d 6265 722c  'limit': number,
+0003b920: 2044 6174 6120 7175 616e 7469 7479 2070   Data quantity p
+0003b930: 6572 2070 6167 653a 204d 6178 2064 6174  er page: Max dat
+0003b940: 6120 7661 6c75 6520 7065 7220 7061 6765  a value per page
+0003b950: 2069 7320 3530 2c20 616e 6420 6465 6661   is 50, and defa
+0003b960: 756c 7420 7661 6c75 6520 6174 2032 302e  ult value at 20.
+0003b970: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+0003b980: 6375 7273 6f72 272c 2041 5049 2070 6173  cursor', API pas
+0003b990: 732d 7468 726f 7567 682e 2061 6363 6f75  s-through. accou
+0003b9a0: 6e74 5479 7065 202b 2063 6174 6567 6f72  ntType + categor
+0003b9b0: 7920 2b20 6375 7273 6f72 202b 2e20 4966  y + cursor +. If
+0003b9c0: 2069 6e63 6f6e 7369 7374 656e 742c 2074   inconsistent, t
+0003b9d0: 6865 2066 6f6c 6c6f 7769 6e67 2073 686f  he following sho
+0003b9e0: 756c 6420 6265 2072 6574 7572 6e65 643a  uld be returned:
+0003b9f0: 2054 6865 2061 6363 6f75 6e74 2074 7970   The account typ
+0003ba00: 6520 646f 6573 206e 6f74 206d 6174 6368  e does not match
+0003ba10: 2074 6865 2073 6572 7669 6365 2069 6e71   the service inq
+0003ba20: 7569 7279 2e0a 2020 2020 2020 2020 7d0a  uiry..        }.
+0003ba30: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
+0003ba40: 204e 6f6e 650a 2020 2020 2020 2020 6966   None.        if
+0003ba50: 2073 796d 626f 6c20 6973 204e 6f6e 653a   symbol is None:
+0003ba60: 0a20 2020 2020 2020 2020 2020 2073 7562  .            sub
+0003ba70: 5479 7065 203d 204e 6f6e 650a 2020 2020  Type = None.    
+0003ba80: 2020 2020 2020 2020 7375 6254 7970 652c          subType,
+0003ba90: 2070 6172 616d 7320 3d20 7365 6c66 2e68   params = self.h
+0003baa0: 616e 646c 655f 7375 625f 7479 7065 5f61  andle_sub_type_a
+0003bab0: 6e64 5f70 6172 616d 7328 2766 6574 6368  nd_params('fetch
+0003bac0: 556e 6966 6965 644d 6172 6769 6e4f 7264  UnifiedMarginOrd
+0003bad0: 6572 7327 2c20 6d61 726b 6574 2c20 7061  ers', market, pa
+0003bae0: 7261 6d73 2c20 276c 696e 6561 7227 290a  rams, 'linear').
+0003baf0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0003bb00: 6573 745b 2763 6174 6567 6f72 7927 5d20  est['category'] 
+0003bb10: 3d20 7375 6254 7970 650a 2020 2020 2020  = subType.      
+0003bb20: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0003bb30: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
+0003bb40: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
+0003bb50: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+0003bb60: 7565 7374 5b27 7379 6d62 6f6c 275d 203d  uest['symbol'] =
+0003bb70: 206d 6172 6b65 745b 2769 6427 5d0a 2020   market['id'].  
+0003bb80: 2020 2020 2020 2020 2020 6966 206d 6172            if mar
+0003bb90: 6b65 745b 276f 7074 696f 6e27 5d3a 0a20  ket['option']:. 
+0003bba0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0003bbb0: 6571 7565 7374 5b27 6361 7465 676f 7279  equest['category
+0003bbc0: 275d 203d 2027 6f70 7469 6f6e 270a 2020  '] = 'option'.  
+0003bbd0: 2020 2020 2020 2020 2020 656c 6966 206d            elif m
+0003bbe0: 6172 6b65 745b 276c 696e 6561 7227 5d3a  arket['linear']:
+0003bbf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003bc00: 2072 6571 7565 7374 5b27 6361 7465 676f   request['catego
+0003bc10: 7279 275d 203d 2027 6c69 6e65 6172 270a  ry'] = 'linear'.
+0003bc20: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0003bc30: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0003bc40: 2020 7261 6973 6520 4e6f 7453 7570 706f    raise NotSuppo
+0003bc50: 7274 6564 2873 656c 662e 6964 202b 2027  rted(self.id + '
+0003bc60: 2066 6574 6368 556e 6966 6965 644d 6172   fetchUnifiedMar
+0003bc70: 6769 6e4f 7264 6572 7328 2920 646f 6573  ginOrders() does
+0003bc80: 206e 6f74 2061 6c6c 6f77 2069 6e76 6572   not allow inver
+0003bc90: 7365 206d 6172 6b65 7420 6f72 6465 7273  se market orders
+0003bca0: 2066 6f72 2027 202b 2073 796d 626f 6c20   for ' + symbol 
+0003bcb0: 2b20 2720 6d61 726b 6574 7327 290a 2020  + ' markets').  
+0003bcc0: 2020 2020 2020 6973 5374 6f70 203d 2073        isStop = s
+0003bcd0: 656c 662e 7361 6665 5f76 616c 7565 2870  elf.safe_value(p
+0003bce0: 6172 616d 732c 2027 7374 6f70 272c 2046  arams, 'stop', F
+0003bcf0: 616c 7365 290a 2020 2020 2020 2020 7061  alse).        pa
+0003bd00: 7261 6d73 203d 2073 656c 662e 6f6d 6974  rams = self.omit
+0003bd10: 2870 6172 616d 732c 205b 2773 746f 7027  (params, ['stop'
+0003bd20: 5d29 0a20 2020 2020 2020 2069 6620 6973  ]).        if is
+0003bd30: 5374 6f70 3a0a 2020 2020 2020 2020 2020  Stop:.          
+0003bd40: 2020 7265 7175 6573 745b 276f 7264 6572    request['order
+0003bd50: 4669 6c74 6572 275d 203d 2027 5374 6f70  Filter'] = 'Stop
+0003bd60: 4f72 6465 7227 0a20 2020 2020 2020 2069  Order'.        i
+0003bd70: 6620 6c69 6d69 7420 6973 206e 6f74 204e  f limit is not N
+0003bd80: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+0003bd90: 2072 6571 7565 7374 5b27 6c69 6d69 7427   request['limit'
+0003bda0: 5d20 3d20 6c69 6d69 740a 2020 2020 2020  ] = limit.      
+0003bdb0: 2020 7265 7370 6f6e 7365 203d 2073 656c    response = sel
+0003bdc0: 662e 7072 6976 6174 6547 6574 556e 6966  f.privateGetUnif
+0003bdd0: 6965 6456 3350 7269 7661 7465 4f72 6465  iedV3PrivateOrde
+0003bde0: 724c 6973 7428 7365 6c66 2e65 7874 656e  rList(self.exten
+0003bdf0: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
+0003be00: 7329 290a 2020 2020 2020 2020 230a 2020  s)).        #.  
+0003be10: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
+0003be20: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003be30: 2272 6574 436f 6465 223a 2030 2c0a 2020  "retCode": 0,.  
+0003be40: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003be50: 2272 6574 4d73 6722 3a20 2253 7563 6365  "retMsg": "Succe
+0003be60: 7373 222c 0a20 2020 2020 2020 2023 2020  ss",.        #  
+0003be70: 2020 2020 2020 2022 7265 7375 6c74 223a         "result":
+0003be80: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+0003be90: 2020 2020 2022 6e65 7874 5061 6765 4375       "nextPageCu
+0003bea0: 7273 6f72 223a 2022 3764 3137 6433 3539  rsor": "7d17d359
+0003beb0: 2d34 6533 382d 3464 3361 2d39 6133 312d  -4e38-4d3a-9a31-
+0003bec0: 3239 3739 3165 6632 6466 6437 2533 4131  29791ef2dfd7%3A1
+0003bed0: 3635 3737 3131 3934 3939 3238 2532 4337  657711949928%2C7
+0003bee0: 6431 3764 3335 392d 3465 3338 2d34 6433  d17d359-4e38-4d3
+0003bef0: 612d 3961 3331 2d32 3937 3931 6566 3264  a-9a31-29791ef2d
+0003bf00: 6664 3725 3341 3136 3537 3731 3139 3439  fd7%3A1657711949
+0003bf10: 3932 3822 2c0a 2020 2020 2020 2020 2320  928",.        # 
+0003bf20: 2020 2020 2020 2020 2263 6174 6567 6f72          "categor
+0003bf30: 7922 3a20 226c 696e 6561 7222 2c0a 2020  y": "linear",.  
+0003bf40: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003bf50: 226c 6973 7422 3a20 5b0a 2020 2020 2020  "list": [.      
+0003bf60: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0003bf70: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0003bf80: 2020 2020 2020 2020 2020 2020 2273 796d              "sym
+0003bf90: 626f 6c22 3a20 2245 5448 5553 4454 222c  bol": "ETHUSDT",
+0003bfa0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003bfb0: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
+0003bfc0: 7254 7970 6522 3a20 224d 6172 6b65 7422  rType": "Market"
+0003bfd0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003bfe0: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+0003bff0: 6572 4c69 6e6b 4964 223a 2022 222c 0a20  erLinkId": "",. 
+0003c000: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003c010: 2020 2020 2020 2020 2022 6f72 6465 7249           "orderI
+0003c020: 6422 3a20 2237 6431 3764 3335 392d 3465  d": "7d17d359-4e
+0003c030: 3338 2d34 6433 612d 3961 3331 2d32 3937  38-4d3a-9a31-297
+0003c040: 3931 6566 3264 6664 3722 2c0a 2020 2020  91ef2dfd7",.    
+0003c050: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0003c060: 2020 2020 2020 2273 746f 704f 7264 6572        "stopOrder
+0003c070: 5479 7065 223a 2022 554e 4b4e 4f57 4e22  Type": "UNKNOWN"
 0003c080: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
 0003c090: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
-0003c0a0: 6572 494d 223a 2022 220a 2020 2020 2020  erIM": "".      
-0003c0b0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0003c0c0: 7d5d 0a20 2020 2020 2020 2023 2020 2020  }].        #    
-0003c0d0: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
-0003c0e0: 2320 2020 2020 2020 2020 2274 696d 6522  #         "time"
-0003c0f0: 3a20 3136 3537 3731 3334 3531 3734 310a  : 1657713451741.
-0003c100: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-0003c110: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0003c120: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
-0003c130: 7361 6665 5f76 616c 7565 2872 6573 706f  safe_value(respo
-0003c140: 6e73 652c 2027 7265 7375 6c74 272c 207b  nse, 'result', {
-0003c150: 7d29 0a20 2020 2020 2020 2064 6174 6120  }).        data 
-0003c160: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-0003c170: 6528 7265 7375 6c74 2c20 276c 6973 7427  e(result, 'list'
-0003c180: 2c20 5b5d 290a 2020 2020 2020 2020 7265  , []).        re
-0003c190: 7475 726e 2073 656c 662e 7061 7273 655f  turn self.parse_
-0003c1a0: 6f72 6465 7273 2864 6174 612c 206d 6172  orders(data, mar
-0003c1b0: 6b65 742c 2073 696e 6365 2c20 6c69 6d69  ket, since, limi
-0003c1c0: 7429 0a0a 2020 2020 6465 6620 6665 7463  t)..    def fetc
-0003c1d0: 685f 6465 7269 7661 7469 7665 735f 6f72  h_derivatives_or
-0003c1e0: 6465 7273 2873 656c 662c 2073 796d 626f  ders(self, symbo
-0003c1f0: 6c3a 204f 7074 696f 6e61 6c5b 7374 725d  l: Optional[str]
-0003c200: 203d 204e 6f6e 652c 2073 696e 6365 3a20   = None, since: 
-0003c210: 4f70 7469 6f6e 616c 5b69 6e74 5d20 3d20  Optional[int] = 
-0003c220: 4e6f 6e65 2c20 6c69 6d69 743a 204f 7074  None, limit: Opt
-0003c230: 696f 6e61 6c5b 696e 745d 203d 204e 6f6e  ional[int] = Non
-0003c240: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
-0003c250: 2020 2020 2020 2073 656c 662e 6c6f 6164         self.load
-0003c260: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
-0003c270: 2020 206d 6172 6b65 7420 3d20 4e6f 6e65     market = None
-0003c280: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
-0003c290: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-0003c2a0: 2023 2027 7379 6d62 6f6c 273a 206d 6172   # 'symbol': mar
-0003c2b0: 6b65 745b 2769 6427 5d2c 0a20 2020 2020  ket['id'],.     
-0003c2c0: 2020 2020 2020 2023 2027 6361 7465 676f         # 'catego
-0003c2d0: 7279 272c 2054 7970 6520 6f66 2064 6572  ry', Type of der
-0003c2e0: 6976 6174 6976 6573 2070 726f 6475 6374  ivatives product
-0003c2f0: 3a20 7370 6f74 2c20 6c69 6e65 6172 206f  : spot, linear o
-0003c300: 7220 6f70 7469 6f6e 2e0a 2020 2020 2020  r option..      
-0003c310: 2020 2020 2020 2320 2762 6173 6543 6f69        # 'baseCoi
-0003c320: 6e27 2c20 4261 7365 2063 6f69 6e2e 2057  n', Base coin. W
-0003c330: 6865 6e20 6361 7465 676f 7279 3d6f 7074  hen category=opt
-0003c340: 696f 6e2e 2049 6620 6e6f 7420 7061 7373  ion. If not pass
-0003c350: 6564 2c20 4254 4320 6279 2064 6566 6175  ed, BTC by defau
-0003c360: 6c74 3b20 7768 656e 2063 6174 6567 6f72  lt; when categor
-0003c370: 793d 6c69 6e65 6172 2c20 6966 2042 5443  y=linear, if BTC
-0003c380: 2070 6173 7365 642c 2042 5443 5045 5250   passed, BTCPERP
-0003c390: 2026 2042 5443 5553 4454 2072 6574 7572   & BTCUSDT retur
-0003c3a0: 6e65 642e 0a20 2020 2020 2020 2020 2020  ned..           
-0003c3b0: 2023 2027 6f72 6465 7249 6427 2c20 4f72   # 'orderId', Or
-0003c3c0: 6465 7220 4944 0a20 2020 2020 2020 2020  der ID.         
-0003c3d0: 2020 2023 2027 6f72 6465 724c 696e 6b49     # 'orderLinkI
-0003c3e0: 6427 2c20 556e 6971 7565 2075 7365 722d  d', Unique user-
-0003c3f0: 7365 7420 6f72 6465 7220 4944 0a20 2020  set order ID.   
-0003c400: 2020 2020 2020 2020 2023 2027 6f72 6465           # 'orde
-0003c410: 7253 7461 7475 7327 2c20 2023 2052 6574  rStatus',  # Ret
-0003c420: 7572 6e20 616c 6c20 7374 6174 7573 206f  urn all status o
-0003c430: 7264 6572 7320 6966 206e 6f74 2070 6173  rders if not pas
-0003c440: 7365 640a 2020 2020 2020 2020 2020 2020  sed.            
-0003c450: 2320 276f 7264 6572 4669 6c74 6572 272c  # 'orderFilter',
-0003c460: 2043 6f6e 6469 7469 6f6e 616c 206f 7264   Conditional ord
-0003c470: 6572 206f 7220 6163 7469 7665 206f 7264  er or active ord
-0003c480: 6572 0a20 2020 2020 2020 2020 2020 2023  er.            #
-0003c490: 2027 6c69 6d69 7427 3a20 6e75 6d62 6572   'limit': number
-0003c4a0: 2c20 4461 7461 2071 7561 6e74 6974 7920  , Data quantity 
-0003c4b0: 7065 7220 7061 6765 3a20 4d61 7820 6461  per page: Max da
-0003c4c0: 7461 2076 616c 7565 2070 6572 2070 6167  ta value per pag
-0003c4d0: 6520 6973 2035 302c 2061 6e64 2064 6566  e is 50, and def
-0003c4e0: 6175 6c74 2076 616c 7565 2061 7420 3230  ault value at 20
-0003c4f0: 2e0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-0003c500: 2763 7572 736f 7227 2c20 4150 4920 7061  'cursor', API pa
-0003c510: 7373 2d74 6872 6f75 6768 2e20 6163 636f  ss-through. acco
-0003c520: 756e 7454 7970 6520 2b20 6361 7465 676f  untType + catego
-0003c530: 7279 202b 2063 7572 736f 7220 2b2e 2049  ry + cursor +. I
-0003c540: 6620 696e 636f 6e73 6973 7465 6e74 2c20  f inconsistent, 
-0003c550: 7468 6520 666f 6c6c 6f77 696e 6720 7368  the following sh
-0003c560: 6f75 6c64 2062 6520 7265 7475 726e 6564  ould be returned
-0003c570: 3a20 5468 6520 6163 636f 756e 7420 7479  : The account ty
-0003c580: 7065 2064 6f65 7320 6e6f 7420 6d61 7463  pe does not matc
-0003c590: 6820 7468 6520 7365 7276 6963 6520 696e  h the service in
-0003c5a0: 7175 6972 792e 0a20 2020 2020 2020 207d  quiry..        }
-0003c5b0: 0a20 2020 2020 2020 2069 6620 7379 6d62  .        if symb
-0003c5c0: 6f6c 2069 7320 4e6f 6e65 3a0a 2020 2020  ol is None:.    
-0003c5d0: 2020 2020 2020 2020 7479 7065 203d 204e          type = N
-0003c5e0: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
-0003c5f0: 7479 7065 2c20 7061 7261 6d73 203d 2073  type, params = s
-0003c600: 656c 662e 6861 6e64 6c65 5f6d 6172 6b65  elf.handle_marke
-0003c610: 745f 7479 7065 5f61 6e64 5f70 6172 616d  t_type_and_param
-0003c620: 7328 2766 6574 6368 4f72 6465 7273 272c  s('fetchOrders',
-0003c630: 206d 6172 6b65 742c 2070 6172 616d 7329   market, params)
-0003c640: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-0003c650: 7565 7374 5b27 6361 7465 676f 7279 275d  uest['category']
-0003c660: 203d 2074 7970 650a 2020 2020 2020 2020   = type.        
-0003c670: 2020 2020 6966 2074 7970 6520 3d3d 2027      if type == '
-0003c680: 7377 6170 273a 0a20 2020 2020 2020 2020  swap':.         
-0003c690: 2020 2020 2020 2073 7562 5479 7065 203d         subType =
-0003c6a0: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
-0003c6b0: 2020 2020 2020 7375 6254 7970 652c 2070        subType, p
-0003c6c0: 6172 616d 7320 3d20 7365 6c66 2e68 616e  arams = self.han
-0003c6d0: 646c 655f 7375 625f 7479 7065 5f61 6e64  dle_sub_type_and
-0003c6e0: 5f70 6172 616d 7328 2766 6574 6368 4f72  _params('fetchOr
-0003c6f0: 6465 7273 272c 206d 6172 6b65 742c 2070  ders', market, p
-0003c700: 6172 616d 732c 2027 6c69 6e65 6172 2729  arams, 'linear')
-0003c710: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003c720: 2072 6571 7565 7374 5b27 6361 7465 676f   request['catego
-0003c730: 7279 275d 203d 2073 7562 5479 7065 0a20  ry'] = subType. 
-0003c740: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0003c750: 2020 2020 2020 2020 206d 6172 6b65 7420           market 
-0003c760: 3d20 7365 6c66 2e6d 6172 6b65 7428 7379  = self.market(sy
-0003c770: 6d62 6f6c 290a 2020 2020 2020 2020 2020  mbol).          
-0003c780: 2020 7265 7175 6573 745b 2773 796d 626f    request['symbo
-0003c790: 6c27 5d20 3d20 6d61 726b 6574 5b27 6964  l'] = market['id
-0003c7a0: 275d 0a20 2020 2020 2020 2020 2020 2069  '].            i
-0003c7b0: 6620 6d61 726b 6574 5b27 6c69 6e65 6172  f market['linear
-0003c7c0: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
-0003c7d0: 2020 2020 7265 7175 6573 745b 2763 6174      request['cat
-0003c7e0: 6567 6f72 7927 5d20 3d20 276c 696e 6561  egory'] = 'linea
-0003c7f0: 7227 0a20 2020 2020 2020 2020 2020 2065  r'.            e
-0003c800: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0003c810: 2020 2020 2072 6571 7565 7374 5b27 6361       request['ca
-0003c820: 7465 676f 7279 275d 203d 2027 696e 7665  tegory'] = 'inve
-0003c830: 7273 6527 0a20 2020 2020 2020 2069 7353  rse'.        isS
-0003c840: 746f 7020 3d20 7365 6c66 2e73 6166 655f  top = self.safe_
-0003c850: 7661 6c75 6528 7061 7261 6d73 2c20 2773  value(params, 's
-0003c860: 746f 7027 2c20 4661 6c73 6529 0a20 2020  top', False).   
-0003c870: 2020 2020 2070 6172 616d 7320 3d20 7365       params = se
-0003c880: 6c66 2e6f 6d69 7428 7061 7261 6d73 2c20  lf.omit(params, 
-0003c890: 5b27 7374 6f70 275d 290a 2020 2020 2020  ['stop']).      
-0003c8a0: 2020 6966 2069 7353 746f 703a 0a20 2020    if isStop:.   
-0003c8b0: 2020 2020 2020 2020 2072 6571 7565 7374           request
-0003c8c0: 5b27 6f72 6465 7246 696c 7465 7227 5d20  ['orderFilter'] 
-0003c8d0: 3d20 2753 746f 704f 7264 6572 270a 2020  = 'StopOrder'.  
-0003c8e0: 2020 2020 2020 6966 206c 696d 6974 2069        if limit i
-0003c8f0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-0003c900: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0003c910: 276c 696d 6974 275d 203d 206c 696d 6974  'limit'] = limit
-0003c920: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
-0003c930: 6520 3d20 7365 6c66 2e70 7269 7661 7465  e = self.private
-0003c940: 4765 7456 354f 7264 6572 4869 7374 6f72  GetV5OrderHistor
-0003c950: 7928 7365 6c66 2e65 7874 656e 6428 7265  y(self.extend(re
-0003c960: 7175 6573 742c 2070 6172 616d 7329 290a  quest, params)).
-0003c970: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0003c980: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
-0003c990: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
-0003c9a0: 436f 6465 223a 2030 2c0a 2020 2020 2020  Code": 0,.      
-0003c9b0: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
-0003c9c0: 4d73 6722 3a20 224f 4b22 2c0a 2020 2020  Msg": "OK",.    
-0003c9d0: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-0003c9e0: 6573 756c 7422 3a20 7b0a 2020 2020 2020  esult": {.      
-0003c9f0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0003ca00: 226e 6578 7450 6167 6543 7572 736f 7222  "nextPageCursor"
-0003ca10: 3a20 2230 3332 3334 6465 392d 3133 3332  : "03234de9-1332
-0003ca20: 2d34 3165 622d 6238 3035 2d34 6139 6634  -41eb-b805-4a9f4
-0003ca30: 3263 3133 3661 3325 3341 3136 3732 3232  2c136a3%3A167222
-0003ca40: 3031 3039 3338 3725 3243 3033 3233 3464  0109387%2C03234d
-0003ca50: 6539 2d31 3333 322d 3431 6562 2d62 3830  e9-1332-41eb-b80
-0003ca60: 352d 3461 3966 3432 6331 3336 6133 2533  5-4a9f42c136a3%3
-0003ca70: 4131 3637 3232 3230 3130 3933 3837 222c  A1672220109387",
-0003ca80: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0003ca90: 2020 2020 2020 2022 6361 7465 676f 7279         "category
-0003caa0: 223a 2022 6c69 6e65 6172 222c 0a20 2020  ": "linear",.   
-0003cab0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0003cac0: 2020 2022 6c69 7374 223a 205b 0a20 2020     "list": [.   
-0003cad0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0003cae0: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
-0003caf0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0003cb00: 2020 2020 2020 2022 7379 6d62 6f6c 223a         "symbol":
-0003cb10: 2022 4254 4355 5344 5422 2c0a 2020 2020   "BTCUSDT",.    
-0003cb20: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003cb30: 2020 2020 2020 2020 2020 226f 7264 6572            "order
-0003cb40: 5479 7065 223a 2022 4c69 6d69 7422 2c0a  Type": "Limit",.
-0003cb50: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003cb60: 2020 2020 2020 2020 2020 2020 2020 226f                "o
-0003cb70: 7264 6572 4c69 6e6b 4964 223a 2022 7465  rderLinkId": "te
-0003cb80: 7374 2d30 3031 222c 0a20 2020 2020 2020  st-001",.       
-0003cb90: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0003cba0: 2020 2020 2020 2022 6f72 6465 7249 6422         "orderId"
-0003cbb0: 3a20 2230 3332 3334 6465 392d 3133 3332  : "03234de9-1332
-0003cbc0: 2d34 3165 622d 6238 3035 2d34 6139 6634  -41eb-b805-4a9f4
-0003cbd0: 3263 3133 3661 3322 2c0a 2020 2020 2020  2c136a3",.      
-0003cbe0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0003cbf0: 2020 2020 2020 2020 2263 616e 6365 6c54          "cancelT
-0003cc00: 7970 6522 3a20 2243 616e 6365 6c42 7955  ype": "CancelByU
-0003cc10: 7365 7222 2c0a 2020 2020 2020 2020 2320  ser",.        # 
-0003cc20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003cc30: 2020 2020 2261 7667 5072 6963 6522 3a20      "avgPrice": 
-0003cc40: 2230 222c 0a20 2020 2020 2020 2023 2020  "0",.        #  
-0003cc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003cc60: 2020 2022 7374 6f70 4f72 6465 7254 7970     "stopOrderTyp
-0003cc70: 6522 3a20 2255 4e4b 4e4f 574e 222c 0a20  e": "UNKNOWN",. 
-0003cc80: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003cc90: 2020 2020 2020 2020 2020 2020 2022 6c61               "la
-0003cca0: 7374 5072 6963 654f 6e43 7265 6174 6564  stPriceOnCreated
-0003ccb0: 223a 2022 3136 3635 362e 3522 2c0a 2020  ": "16656.5",.  
-0003ccc0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003ccd0: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
-0003cce0: 6572 5374 6174 7573 223a 2022 4361 6e63  erStatus": "Canc
-0003ccf0: 656c 6c65 6422 2c0a 2020 2020 2020 2020  elled",.        
-0003cd00: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0003cd10: 2020 2020 2020 2274 616b 6550 726f 6669        "takeProfi
-0003cd20: 7422 3a20 2222 2c0a 2020 2020 2020 2020  t": "",.        
-0003cd30: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0003cd40: 2020 2020 2020 2263 756d 4578 6563 5661        "cumExecVa
-0003cd50: 6c75 6522 3a20 2230 222c 0a20 2020 2020  lue": "0",.     
-0003cd60: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0003cd70: 2020 2020 2020 2020 2022 7472 6967 6765           "trigge
-0003cd80: 7244 6972 6563 7469 6f6e 223a 2030 2c0a  rDirection": 0,.
-0003cd90: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003cda0: 2020 2020 2020 2020 2020 2020 2020 2262                "b
-0003cdb0: 6c6f 636b 5472 6164 6549 6422 3a20 2222  lockTradeId": ""
-0003cdc0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0003cdd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003cde0: 2272 656a 6563 7452 6561 736f 6e22 3a20  "rejectReason": 
-0003cdf0: 2245 435f 5065 7243 616e 6365 6c52 6571  "EC_PerCancelReq
-0003ce00: 7565 7374 222c 0a20 2020 2020 2020 2023  uest",.        #
-0003ce10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003ce20: 2020 2020 2022 6973 4c65 7665 7261 6765       "isLeverage
-0003ce30: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
-0003ce40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003ce50: 2020 2020 2022 7072 6963 6522 3a20 2231       "price": "1
-0003ce60: 3830 3030 222c 0a20 2020 2020 2020 2023  8000",.        #
-0003ce70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003ce80: 2020 2020 2022 6f72 6465 7249 7622 3a20       "orderIv": 
-0003ce90: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
-0003cea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003ceb0: 2020 2263 7265 6174 6564 5469 6d65 223a    "createdTime":
-0003cec0: 2022 3136 3732 3232 3031 3039 3338 3722   "1672220109387"
-0003ced0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0003cee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003cef0: 2274 7054 7269 6767 6572 4279 223a 2022  "tpTriggerBy": "
-0003cf00: 554e 4b4e 4f57 4e22 2c0a 2020 2020 2020  UNKNOWN",.      
-0003cf10: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0003cf20: 2020 2020 2020 2020 2270 6f73 6974 696f          "positio
-0003cf30: 6e49 6478 223a 2030 2c0a 2020 2020 2020  nIdx": 0,.      
-0003cf40: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0003cf50: 2020 2020 2020 2020 2274 696d 6549 6e46          "timeInF
-0003cf60: 6f72 6365 223a 2022 476f 6f64 5469 6c6c  orce": "GoodTill
-0003cf70: 4361 6e63 656c 222c 0a20 2020 2020 2020  Cancel",.       
-0003cf80: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0003cf90: 2020 2020 2020 2022 6c65 6176 6573 5661         "leavesVa
-0003cfa0: 6c75 6522 3a20 2230 222c 0a20 2020 2020  lue": "0",.     
-0003cfb0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0003cfc0: 2020 2020 2020 2020 2022 7570 6461 7465           "update
-0003cfd0: 6454 696d 6522 3a20 2231 3637 3232 3230  dTime": "1672220
-0003cfe0: 3131 3431 3233 222c 0a20 2020 2020 2020  114123",.       
-0003cff0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0003d000: 2020 2020 2020 2022 7369 6465 223a 2022         "side": "
-0003d010: 5365 6c6c 222c 0a20 2020 2020 2020 2023  Sell",.        #
-0003d020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d030: 2020 2020 2022 7472 6967 6765 7250 7269       "triggerPri
-0003d040: 6365 223a 2022 222c 0a20 2020 2020 2020  ce": "",.       
-0003d050: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0003d060: 2020 2020 2020 2022 6375 6d45 7865 6346         "cumExecF
-0003d070: 6565 223a 2022 3022 2c0a 2020 2020 2020  ee": "0",.      
-0003d080: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0003d090: 2020 2020 2020 2020 2273 6c54 7269 6767          "slTrigg
-0003d0a0: 6572 4279 223a 2022 554e 4b4e 4f57 4e22  erBy": "UNKNOWN"
-0003d0b0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0003d0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d0d0: 226c 6561 7665 7351 7479 223a 2022 3022  "leavesQty": "0"
-0003d0e0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0003d0f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d100: 2263 6c6f 7365 4f6e 5472 6967 6765 7222  "closeOnTrigger"
-0003d110: 3a20 4661 6c73 652c 0a20 2020 2020 2020  : False,.       
-0003d120: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0003d130: 2020 2020 2020 2022 6375 6d45 7865 6351         "cumExecQ
-0003d140: 7479 223a 2022 3022 2c0a 2020 2020 2020  ty": "0",.      
-0003d150: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0003d160: 2020 2020 2020 2020 2272 6564 7563 654f          "reduceO
-0003d170: 6e6c 7922 3a20 4661 6c73 652c 0a20 2020  nly": False,.   
-0003d180: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0003d190: 2020 2020 2020 2020 2020 2022 7174 7922             "qty"
-0003d1a0: 3a20 2230 2e31 222c 0a20 2020 2020 2020  : "0.1",.       
-0003d1b0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0003d1c0: 2020 2020 2020 2022 7374 6f70 4c6f 7373         "stopLoss
-0003d1d0: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
-0003d1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d1f0: 2020 2020 2022 7472 6967 6765 7242 7922       "triggerBy"
-0003d200: 3a20 2255 4e4b 4e4f 574e 220a 2020 2020  : "UNKNOWN".    
-0003d210: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003d220: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-0003d230: 2320 2020 2020 2020 2020 2020 2020 5d0a  #             ].
-0003d240: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003d250: 2020 7d2c 0a20 2020 2020 2020 2023 2020    },.        #  
-0003d260: 2020 2020 2020 2022 7265 7445 7874 496e         "retExtIn
-0003d270: 666f 223a 207b 7d2c 0a20 2020 2020 2020  fo": {},.       
-0003d280: 2023 2020 2020 2020 2020 2022 7469 6d65   #         "time
-0003d290: 223a 2031 3637 3232 3231 3236 3338 3632  ": 1672221263862
-0003d2a0: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
-0003d2b0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-0003d2c0: 2020 2072 6573 756c 7420 3d20 7365 6c66     result = self
-0003d2d0: 2e73 6166 655f 7661 6c75 6528 7265 7370  .safe_value(resp
-0003d2e0: 6f6e 7365 2c20 2772 6573 756c 7427 2c20  onse, 'result', 
-0003d2f0: 7b7d 290a 2020 2020 2020 2020 6461 7461  {}).        data
-0003d300: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
-0003d310: 7565 2872 6573 756c 742c 2027 6c69 7374  ue(result, 'list
-0003d320: 272c 205b 5d29 0a20 2020 2020 2020 2072  ', []).        r
-0003d330: 6574 7572 6e20 7365 6c66 2e70 6172 7365  eturn self.parse
-0003d340: 5f6f 7264 6572 7328 6461 7461 2c20 6d61  _orders(data, ma
-0003d350: 726b 6574 2c20 7369 6e63 652c 206c 696d  rket, since, lim
-0003d360: 6974 290a 0a20 2020 2064 6566 2066 6574  it)..    def fet
-0003d370: 6368 5f6f 7264 6572 7328 7365 6c66 2c20  ch_orders(self, 
-0003d380: 7379 6d62 6f6c 3a20 4f70 7469 6f6e 616c  symbol: Optional
-0003d390: 5b73 7472 5d20 3d20 4e6f 6e65 2c20 7369  [str] = None, si
-0003d3a0: 6e63 653a 204f 7074 696f 6e61 6c5b 696e  nce: Optional[in
-0003d3b0: 745d 203d 204e 6f6e 652c 206c 696d 6974  t] = None, limit
-0003d3c0: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
-0003d3d0: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
-0003d3e0: 7d29 3a0a 2020 2020 2020 2020 2222 220a  }):.        """.
-0003d3f0: 2020 2020 2020 2020 6665 7463 6865 7320          fetches 
-0003d400: 696e 666f 726d 6174 696f 6e20 6f6e 206d  information on m
-0003d410: 756c 7469 706c 6520 6f72 6465 7273 206d  ultiple orders m
-0003d420: 6164 6520 6279 2074 6865 2075 7365 720a  ade by the user.
-0003d430: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-0003d440: 7472 2073 796d 626f 6c3a 2075 6e69 6669  tr symbol: unifi
-0003d450: 6564 206d 6172 6b65 7420 7379 6d62 6f6c  ed market symbol
-0003d460: 206f 6620 7468 6520 6d61 726b 6574 206f   of the market o
-0003d470: 7264 6572 7320 7765 7265 206d 6164 6520  rders were made 
-0003d480: 696e 0a20 2020 2020 2020 203a 7061 7261  in.        :para
-0003d490: 6d20 696e 747c 4e6f 6e65 2073 696e 6365  m int|None since
-0003d4a0: 3a20 7468 6520 6561 726c 6965 7374 2074  : the earliest t
-0003d4b0: 696d 6520 696e 206d 7320 746f 2066 6574  ime in ms to fet
-0003d4c0: 6368 206f 7264 6572 7320 666f 720a 2020  ch orders for.  
-0003d4d0: 2020 2020 2020 3a70 6172 616d 2069 6e74        :param int
-0003d4e0: 7c4e 6f6e 6520 6c69 6d69 743a 2074 6865  |None limit: the
-0003d4f0: 206d 6178 696d 756d 206e 756d 6265 7220   maximum number 
-0003d500: 6f66 2020 6f72 6465 2073 7472 7563 7475  of  orde structu
-0003d510: 7265 7320 746f 2072 6574 7269 6576 650a  res to retrieve.
-0003d520: 2020 2020 2020 2020 3a70 6172 616d 2064          :param d
-0003d530: 6963 7420 7061 7261 6d73 3a20 6578 7472  ict params: extr
-0003d540: 6120 7061 7261 6d65 7465 7273 2073 7065  a parameters spe
-0003d550: 6369 6669 6320 746f 2074 6865 2062 7962  cific to the byb
-0003d560: 6974 2061 7069 2065 6e64 706f 696e 740a  it api endpoint.
-0003d570: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
-0003d580: 205b 6469 6374 5d3a 2061 206c 6973 7420   [dict]: a list 
-0003d590: 6f66 2060 6f72 6465 7220 7374 7275 6374  of `order struct
-0003d5a0: 7572 6573 203c 6874 7470 733a 2f2f 646f  ures <https://do
-0003d5b0: 6373 2e63 6378 742e 636f 6d2f 232f 3f69  cs.ccxt.com/#/?i
-0003d5c0: 643d 6f72 6465 722d 7374 7275 6374 7572  d=order-structur
-0003d5d0: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
-0003d5e0: 2020 2020 2020 2020 7365 6c66 2e6c 6f61          self.loa
-0003d5f0: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
-0003d600: 2020 2020 6d61 726b 6574 203d 204e 6f6e      market = Non
-0003d610: 650a 2020 2020 2020 2020 7365 7474 6c65  e.        settle
-0003d620: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-0003d630: 696e 6728 7061 7261 6d73 2c20 2773 6574  ing(params, 'set
-0003d640: 746c 6543 6f69 6e27 290a 2020 2020 2020  tleCoin').      
-0003d650: 2020 6966 2073 6574 746c 6520 6973 204e    if settle is N
-0003d660: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-0003d670: 2073 6574 746c 652c 2070 6172 616d 7320   settle, params 
-0003d680: 3d20 7365 6c66 2e68 616e 646c 655f 6f70  = self.handle_op
-0003d690: 7469 6f6e 5f61 6e64 5f70 6172 616d 7328  tion_and_params(
-0003d6a0: 7061 7261 6d73 2c20 2766 6574 6368 4f72  params, 'fetchOr
-0003d6b0: 6465 7273 272c 2027 7365 7474 6c65 272c  ders', 'settle',
-0003d6c0: 2073 6574 746c 6529 0a20 2020 2020 2020   settle).       
-0003d6d0: 2069 6620 7379 6d62 6f6c 2069 7320 6e6f   if symbol is no
-0003d6e0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0003d6f0: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
-0003d700: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
-0003d710: 0a20 2020 2020 2020 2020 2020 2073 6574  .            set
-0003d720: 746c 6520 3d20 6d61 726b 6574 5b27 7365  tle = market['se
-0003d730: 7474 6c65 275d 0a20 2020 2020 2020 2073  ttle'].        s
-0003d740: 7562 5479 7065 203d 204e 6f6e 650a 2020  ubType = None.  
-0003d750: 2020 2020 2020 7375 6254 7970 652c 2070        subType, p
-0003d760: 6172 616d 7320 3d20 7365 6c66 2e68 616e  arams = self.han
-0003d770: 646c 655f 7375 625f 7479 7065 5f61 6e64  dle_sub_type_and
-0003d780: 5f70 6172 616d 7328 2766 6574 6368 4f72  _params('fetchOr
-0003d790: 6465 7273 272c 206d 6172 6b65 742c 2070  ders', market, p
-0003d7a0: 6172 616d 7329 0a20 2020 2020 2020 2069  arams).        i
-0003d7b0: 7349 6e76 6572 7365 203d 2073 7562 5479  sInverse = subTy
-0003d7c0: 7065 203d 3d20 2769 6e76 6572 7365 270a  pe == 'inverse'.
-0003d7d0: 2020 2020 2020 2020 6973 5573 6463 5365          isUsdcSe
-0003d7e0: 7474 6c65 6420 3d20 7365 7474 6c65 203d  ttled = settle =
-0003d7f0: 3d20 2755 5344 4327 0a20 2020 2020 2020  = 'USDC'.       
-0003d800: 2069 734c 696e 6561 7253 6574 746c 6520   isLinearSettle 
-0003d810: 3d20 6973 5573 6463 5365 7474 6c65 6420  = isUsdcSettled 
-0003d820: 6f72 2028 7365 7474 6c65 203d 3d20 2755  or (settle == 'U
-0003d830: 5344 5427 290a 2020 2020 2020 2020 6966  SDT').        if
-0003d840: 2069 7349 6e76 6572 7365 2061 6e64 2069   isInverse and i
-0003d850: 734c 696e 6561 7253 6574 746c 653a 0a20  sLinearSettle:. 
-0003d860: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-0003d870: 2041 7267 756d 656e 7473 5265 7175 6972   ArgumentsRequir
-0003d880: 6564 2873 656c 662e 6964 202b 2027 2066  ed(self.id + ' f
-0003d890: 6574 6368 4f72 6465 7273 2077 6974 6820  etchOrders with 
-0003d8a0: 696e 7665 7273 6520 7375 6254 7970 6520  inverse subType 
-0003d8b0: 7265 7175 6972 6573 2073 6574 746c 6520  requires settle 
-0003d8c0: 746f 206e 6f74 2062 6520 5553 4454 206f  to not be USDT o
-0003d8d0: 7220 5553 4443 2729 0a20 2020 2020 2020  r USDC').       
-0003d8e0: 2074 7970 652c 2071 7565 7279 203d 2073   type, query = s
-0003d8f0: 656c 662e 6861 6e64 6c65 5f6d 6172 6b65  elf.handle_marke
-0003d900: 745f 7479 7065 5f61 6e64 5f70 6172 616d  t_type_and_param
-0003d910: 7328 2766 6574 6368 4f72 6465 7273 272c  s('fetchOrders',
-0003d920: 206d 6172 6b65 742c 2070 6172 616d 7329   market, params)
-0003d930: 0a20 2020 2020 2020 2065 6e61 626c 6555  .        enableU
-0003d940: 6e69 6669 6564 4d61 7267 696e 2c20 656e  nifiedMargin, en
-0003d950: 6162 6c65 556e 6966 6965 6441 6363 6f75  ableUnifiedAccou
-0003d960: 6e74 203d 2073 656c 662e 6973 5f75 6e69  nt = self.is_uni
-0003d970: 6669 6564 5f65 6e61 626c 6564 2829 0a20  fied_enabled(). 
-0003d980: 2020 2020 2020 2069 6620 656e 6162 6c65         if enable
-0003d990: 556e 6966 6965 6441 6363 6f75 6e74 2061  UnifiedAccount a
-0003d9a0: 6e64 206e 6f74 2069 7349 6e76 6572 7365  nd not isInverse
-0003d9b0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0003d9c0: 7475 726e 2073 656c 662e 6665 7463 685f  turn self.fetch_
-0003d9d0: 756e 6966 6965 645f 6163 636f 756e 745f  unified_account_
-0003d9e0: 6f72 6465 7273 2873 796d 626f 6c2c 2073  orders(symbol, s
-0003d9f0: 696e 6365 2c20 6c69 6d69 742c 2071 7565  ince, limit, que
-0003da00: 7279 290a 2020 2020 2020 2020 656c 6966  ry).        elif
-0003da10: 2074 7970 6520 3d3d 2027 7370 6f74 273a   type == 'spot':
-0003da20: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-0003da30: 7365 204e 6f74 5375 7070 6f72 7465 6428  se NotSupported(
-0003da40: 7365 6c66 2e69 6420 2b20 2720 6665 7463  self.id + ' fetc
-0003da50: 684f 7264 6572 7328 2920 6f6e 6c79 2073  hOrders() only s
-0003da60: 7570 706f 7274 2027 202b 2074 7970 6520  upport ' + type 
-0003da70: 2b20 2720 6d61 726b 6574 7320 666f 7220  + ' markets for 
-0003da80: 756e 6966 6965 6420 7472 6164 6520 6163  unified trade ac
-0003da90: 636f 756e 742c 2075 7365 2065 7863 6861  count, use excha
-0003daa0: 6e67 652e 6665 7463 685f 6f70 656e 5f6f  nge.fetch_open_o
-0003dab0: 7264 6572 7328 2920 616e 6420 6578 6368  rders() and exch
-0003dac0: 616e 6765 2e66 6574 6368 436c 6f73 6564  ange.fetchClosed
-0003dad0: 4f72 6465 7273 2829 2069 6e73 7465 6164  Orders() instead
-0003dae0: 2729 0a20 2020 2020 2020 2065 6c69 6620  ').        elif 
-0003daf0: 656e 6162 6c65 556e 6966 6965 644d 6172  enableUnifiedMar
-0003db00: 6769 6e20 616e 6420 6e6f 7420 6973 496e  gin and not isIn
-0003db10: 7665 7273 653a 0a20 2020 2020 2020 2020  verse:.         
-0003db20: 2020 2072 6574 7572 6e20 7365 6c66 2e66     return self.f
-0003db30: 6574 6368 5f75 6e69 6669 6564 5f6d 6172  etch_unified_mar
-0003db40: 6769 6e5f 6f72 6465 7273 2873 796d 626f  gin_orders(symbo
-0003db50: 6c2c 2073 696e 6365 2c20 6c69 6d69 742c  l, since, limit,
-0003db60: 2071 7565 7279 290a 2020 2020 2020 2020   query).        
-0003db70: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0003db80: 2020 7265 7475 726e 2073 656c 662e 6665    return self.fe
-0003db90: 7463 685f 6465 7269 7661 7469 7665 735f  tch_derivatives_
-0003dba0: 6f72 6465 7273 2873 796d 626f 6c2c 2073  orders(symbol, s
-0003dbb0: 696e 6365 2c20 6c69 6d69 742c 2071 7565  ince, limit, que
-0003dbc0: 7279 290a 0a20 2020 2064 6566 2066 6574  ry)..    def fet
-0003dbd0: 6368 5f73 706f 745f 636c 6f73 6564 5f6f  ch_spot_closed_o
-0003dbe0: 7264 6572 7328 7365 6c66 2c20 7379 6d62  rders(self, symb
-0003dbf0: 6f6c 3a20 4f70 7469 6f6e 616c 5b73 7472  ol: Optional[str
-0003dc00: 5d20 3d20 4e6f 6e65 2c20 7369 6e63 653a  ] = None, since:
-0003dc10: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
-0003dc20: 204e 6f6e 652c 206c 696d 6974 3a20 4f70   None, limit: Op
-0003dc30: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
-0003dc40: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
-0003dc50: 2020 2020 2020 2020 7365 6c66 2e6c 6f61          self.loa
-0003dc60: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
-0003dc70: 2020 2020 6d61 726b 6574 203d 204e 6f6e      market = Non
-0003dc80: 650a 2020 2020 2020 2020 6966 2073 796d  e.        if sym
-0003dc90: 626f 6c20 6973 206e 6f74 204e 6f6e 653a  bol is not None:
-0003dca0: 0a20 2020 2020 2020 2020 2020 206d 6172  .            mar
-0003dcb0: 6b65 7420 3d20 7365 6c66 2e6d 6172 6b65  ket = self.marke
-0003dcc0: 7428 7379 6d62 6f6c 290a 2020 2020 2020  t(symbol).      
-0003dcd0: 2020 7265 7175 6573 7420 3d20 7b7d 0a20    request = {}. 
-0003dce0: 2020 2020 2020 2069 6620 7379 6d62 6f6c         if symbol
-0003dcf0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0003dd00: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-0003dd10: 745b 2773 796d 626f 6c27 5d20 3d20 6d61  t['symbol'] = ma
-0003dd20: 726b 6574 5b27 6964 275d 0a20 2020 2020  rket['id'].     
-0003dd30: 2020 2069 6620 6c69 6d69 7420 6973 206e     if limit is n
-0003dd40: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0003dd50: 2020 2020 2072 6571 7565 7374 5b27 6c69       request['li
-0003dd60: 6d69 7427 5d20 3d20 6c69 6d69 740a 2020  mit'] = limit.  
-0003dd70: 2020 2020 2020 6966 2073 696e 6365 2069        if since i
-0003dd80: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-0003dd90: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0003dda0: 2773 7461 7274 5469 6d65 275d 203d 2073  'startTime'] = s
-0003ddb0: 696e 6365 0a20 2020 2020 2020 2072 6573  ince.        res
-0003ddc0: 706f 6e73 6520 3d20 7365 6c66 2e70 7269  ponse = self.pri
-0003ddd0: 7661 7465 4765 7453 706f 7456 3350 7269  vateGetSpotV3Pri
-0003dde0: 7661 7465 4869 7374 6f72 794f 7264 6572  vateHistoryOrder
-0003ddf0: 7328 7365 6c66 2e65 7874 656e 6428 7265  s(self.extend(re
-0003de00: 7175 6573 742c 2070 6172 616d 7329 290a  quest, params)).
-0003de10: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-0003de20: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-0003de30: 2872 6573 706f 6e73 652c 2027 7265 7375  (response, 'resu
-0003de40: 6c74 272c 207b 7d29 0a20 2020 2020 2020  lt', {}).       
-0003de50: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
-0003de60: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-0003de70: 2020 2022 7265 7443 6f64 6522 3a20 2230     "retCode": "0
-0003de80: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0003de90: 2020 2020 2272 6574 4d73 6722 3a20 224f      "retMsg": "O
-0003dea0: 4b22 2c0a 2020 2020 2020 2020 2320 2020  K",.        #   
-0003deb0: 2020 2020 2022 7265 7375 6c74 223a 207b       "result": {
-0003dec0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0003ded0: 2020 2020 2020 226c 6973 7422 3a20 5b0a        "list": [.
-0003dee0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003def0: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-0003df00: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0003df10: 2020 2020 2020 2020 2261 6363 6f75 6e74          "account
-0003df20: 4964 223a 2022 3133 3338 3034 3334 222c  Id": "13380434",
-0003df30: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0003df40: 2020 2020 2020 2020 2020 2020 2020 2273                "s
-0003df50: 796d 626f 6c22 3a20 2241 4156 4555 5344  ymbol": "AAVEUSD
-0003df60: 5422 2c0a 2020 2020 2020 2020 2320 2020  T",.        #   
-0003df70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003df80: 2022 6f72 6465 724c 696e 6b49 6422 3a20   "orderLinkId": 
-0003df90: 2231 3636 3636 3937 3834 3739 3636 3630  "166669784796660
-0003dfa0: 3422 2c0a 2020 2020 2020 2020 2320 2020  4",.        #   
-0003dfb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003dfc0: 2022 6f72 6465 7249 6422 3a20 2231 3237   "orderId": "127
-0003dfd0: 3437 3438 3337 3335 3934 3832 3832 3838  4748373594828288
-0003dfe0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0003dff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003e000: 226f 7264 6572 5072 6963 6522 3a20 2238  "orderPrice": "8
-0003e010: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-0003e020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003e030: 2022 6f72 6465 7251 7479 223a 2022 302e   "orderQty": "0.
-0003e040: 3131 222c 0a20 2020 2020 2020 2023 2020  11",.        #  
-0003e050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003e060: 2020 2265 7865 6351 7479 223a 2022 3022    "execQty": "0"
-0003e070: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0003e080: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0003e090: 6375 6d6d 756c 6174 6976 6551 756f 7465  cummulativeQuote
-0003e0a0: 5174 7922 3a20 2230 222c 0a20 2020 2020  Qty": "0",.     
-0003e0b0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0003e0c0: 2020 2020 2020 2020 2261 7667 5072 6963          "avgPric
-0003e0d0: 6522 3a20 2230 222c 0a20 2020 2020 2020  e": "0",.       
-0003e0e0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0003e0f0: 2020 2020 2020 2273 7461 7475 7322 3a20        "status": 
-0003e100: 2243 414e 4345 4c45 4422 2c0a 2020 2020  "CANCELED",.    
-0003e110: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003e120: 2020 2020 2020 2020 2022 7469 6d65 496e           "timeIn
-0003e130: 466f 7263 6522 3a20 2247 5443 222c 0a20  Force": "GTC",. 
-0003e140: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003e150: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
-0003e160: 6572 5479 7065 223a 2022 4c49 4d49 5422  erType": "LIMIT"
-0003e170: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0003e180: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0003e190: 7369 6465 223a 2022 4255 5922 2c0a 2020  side": "BUY",.  
-0003e1a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003e1b0: 2020 2020 2020 2020 2020 2022 7374 6f70             "stop
-0003e1c0: 5072 6963 6522 3a20 2230 2e30 222c 0a20  Price": "0.0",. 
-0003e1d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003e1e0: 2020 2020 2020 2020 2020 2020 2269 6365              "ice
-0003e1f0: 6265 7267 5174 7922 3a20 2230 2e30 222c  bergQty": "0.0",
-0003e200: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0003e210: 2020 2020 2020 2020 2020 2020 2020 2263                "c
-0003e220: 7265 6174 6554 696d 6522 3a20 2231 3636  reateTime": "166
-0003e230: 3636 3937 3834 3739 3732 222c 0a20 2020  6697847972",.   
-0003e240: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0003e250: 2020 2020 2020 2020 2020 2275 7064 6174            "updat
-0003e260: 6554 696d 6522 3a20 2231 3636 3636 3937  eTime": "1666697
-0003e270: 3836 3538 3039 222c 0a20 2020 2020 2020  865809",.       
-0003e280: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0003e290: 2020 2020 2020 2269 7357 6f72 6b69 6e67        "isWorking
-0003e2a0: 223a 2022 3122 2c0a 2020 2020 2020 2020  ": "1",.        
-0003e2b0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0003e2c0: 2020 2020 2022 6f72 6465 7243 6174 6567       "orderCateg
-0003e2d0: 6f72 7922 3a20 2230 220a 2020 2020 2020  ory": "0".      
-0003e2e0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0003e2f0: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
-0003e300: 2020 2020 2020 2020 2020 205d 0a20 2020             ].   
-0003e310: 2020 2020 2023 2020 2020 2020 2020 7d2c       #        },
-0003e320: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0003e330: 2020 2272 6574 4578 7449 6e66 6f22 3a20    "retExtInfo": 
-0003e340: 6e75 6c6c 2c0a 2020 2020 2020 2020 2320  null,.        # 
-0003e350: 2020 2020 2020 2022 7469 6d65 223a 2022         "time": "
-0003e360: 3136 3636 3733 3232 3837 3538 3822 0a20  1666732287588". 
-0003e370: 2020 2020 2020 2023 2020 2020 7d0a 2020         #    }.  
-0003e380: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-0003e390: 6f72 6465 7273 203d 2073 656c 662e 7361  orders = self.sa
-0003e3a0: 6665 5f76 616c 7565 2872 6573 756c 742c  fe_value(result,
-0003e3b0: 2027 6c69 7374 272c 205b 5d29 0a20 2020   'list', []).   
-0003e3c0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-0003e3d0: 2e70 6172 7365 5f6f 7264 6572 7328 6f72  .parse_orders(or
-0003e3e0: 6465 7273 2c20 6d61 726b 6574 2c20 7369  ders, market, si
-0003e3f0: 6e63 652c 206c 696d 6974 290a 0a20 2020  nce, limit)..   
-0003e400: 2064 6566 2066 6574 6368 5f63 6c6f 7365   def fetch_close
-0003e410: 645f 6f72 6465 7273 2873 656c 662c 2073  d_orders(self, s
-0003e420: 796d 626f 6c3a 204f 7074 696f 6e61 6c5b  ymbol: Optional[
-0003e430: 7374 725d 203d 204e 6f6e 652c 2073 696e  str] = None, sin
-0003e440: 6365 3a20 4f70 7469 6f6e 616c 5b69 6e74  ce: Optional[int
-0003e450: 5d20 3d20 4e6f 6e65 2c20 6c69 6d69 743a  ] = None, limit:
-0003e460: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
-0003e470: 204e 6f6e 652c 2070 6172 616d 733d 7b7d   None, params={}
-0003e480: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
-0003e490: 2020 2020 2020 2066 6574 6368 6573 2069         fetches i
-0003e4a0: 6e66 6f72 6d61 7469 6f6e 206f 6e20 6d75  nformation on mu
-0003e4b0: 6c74 6970 6c65 2063 6c6f 7365 6420 6f72  ltiple closed or
-0003e4c0: 6465 7273 206d 6164 6520 6279 2074 6865  ders made by the
-0003e4d0: 2075 7365 720a 2020 2020 2020 2020 3a70   user.        :p
-0003e4e0: 6172 616d 2073 7472 7c4e 6f6e 6520 7379  aram str|None sy
-0003e4f0: 6d62 6f6c 3a20 756e 6966 6965 6420 6d61  mbol: unified ma
-0003e500: 726b 6574 2073 796d 626f 6c20 6f66 2074  rket symbol of t
-0003e510: 6865 206d 6172 6b65 7420 6f72 6465 7273  he market orders
-0003e520: 2077 6572 6520 6d61 6465 2069 6e0a 2020   were made in.  
-0003e530: 2020 2020 2020 3a70 6172 616d 2069 6e74        :param int
-0003e540: 7c4e 6f6e 6520 7369 6e63 653a 2074 6865  |None since: the
-0003e550: 2065 6172 6c69 6573 7420 7469 6d65 2069   earliest time i
-0003e560: 6e20 6d73 2074 6f20 6665 7463 6820 6f72  n ms to fetch or
-0003e570: 6465 7273 2066 6f72 0a20 2020 2020 2020  ders for.       
-0003e580: 203a 7061 7261 6d20 696e 747c 4e6f 6e65   :param int|None
-0003e590: 206c 696d 6974 3a20 7468 6520 6d61 7869   limit: the maxi
-0003e5a0: 6d75 6d20 6e75 6d62 6572 206f 6620 206f  mum number of  o
-0003e5b0: 7264 6520 7374 7275 6374 7572 6573 2074  rde structures t
-0003e5c0: 6f20 7265 7472 6965 7665 0a20 2020 2020  o retrieve.     
-0003e5d0: 2020 203a 7061 7261 6d20 6469 6374 2070     :param dict p
-0003e5e0: 6172 616d 733a 2065 7874 7261 2070 6172  arams: extra par
-0003e5f0: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
-0003e600: 2074 6f20 7468 6520 6279 6269 7420 6170   to the bybit ap
-0003e610: 6920 656e 6470 6f69 6e74 0a20 2020 2020  i endpoint.     
-0003e620: 2020 203a 7265 7475 726e 7320 5b64 6963     :returns [dic
-0003e630: 745d 3a20 6120 6c69 7374 206f 6620 606f  t]: a list of `o
-0003e640: 7264 6572 2073 7472 7563 7475 7265 7320  rder structures 
-0003e650: 3c68 7474 7073 3a2f 2f64 6f63 732e 6363  <https://docs.cc
-0003e660: 7874 2e63 6f6d 2f23 2f3f 6964 3d6f 7264  xt.com/#/?id=ord
-0003e670: 6572 2d73 7472 7563 7475 7265 3e60 0a20  er-structure>`. 
-0003e680: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-0003e690: 2020 2073 656c 662e 6c6f 6164 5f6d 6172     self.load_mar
-0003e6a0: 6b65 7473 2829 0a20 2020 2020 2020 206d  kets().        m
-0003e6b0: 6172 6b65 7420 3d20 4e6f 6e65 0a20 2020  arket = None.   
-0003e6c0: 2020 2020 2069 6620 7379 6d62 6f6c 2069       if symbol i
-0003e6d0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-0003e6e0: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
-0003e6f0: 2073 656c 662e 6d61 726b 6574 2873 796d   self.market(sym
-0003e700: 626f 6c29 0a20 2020 2020 2020 2074 7970  bol).        typ
-0003e710: 6520 3d20 4e6f 6e65 0a20 2020 2020 2020  e = None.       
-0003e720: 2074 7970 652c 2070 6172 616d 7320 3d20   type, params = 
-0003e730: 7365 6c66 2e68 616e 646c 655f 6d61 726b  self.handle_mark
-0003e740: 6574 5f74 7970 655f 616e 645f 7061 7261  et_type_and_para
-0003e750: 6d73 2827 6665 7463 6843 6c6f 7365 644f  ms('fetchClosedO
-0003e760: 7264 6572 7327 2c20 6d61 726b 6574 2c20  rders', market, 
-0003e770: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
-0003e780: 656e 6162 6c65 556e 6966 6965 6420 3d20  enableUnified = 
-0003e790: 7365 6c66 2e69 735f 756e 6966 6965 645f  self.is_unified_
-0003e7a0: 656e 6162 6c65 6428 290a 2020 2020 2020  enabled().      
-0003e7b0: 2020 7265 7175 6573 7420 3d20 7b7d 0a20    request = {}. 
-0003e7c0: 2020 2020 2020 2069 6620 2874 7970 6520         if (type 
-0003e7d0: 3d3d 2027 7370 6f74 2729 2061 6e64 206e  == 'spot') and n
-0003e7e0: 6f74 2065 6e61 626c 6555 6e69 6669 6564  ot enableUnified
-0003e7f0: 5b31 5d3a 0a20 2020 2020 2020 2020 2020  [1]:.           
-0003e800: 2072 6574 7572 6e20 7365 6c66 2e66 6574   return self.fet
-0003e810: 6368 5f73 706f 745f 636c 6f73 6564 5f6f  ch_spot_closed_o
-0003e820: 7264 6572 7328 7379 6d62 6f6c 2c20 7369  rders(symbol, si
-0003e830: 6e63 652c 206c 696d 6974 2c20 7061 7261  nce, limit, para
-0003e840: 6d73 290a 2020 2020 2020 2020 656c 7365  ms).        else
-0003e850: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0003e860: 7175 6573 745b 276f 7264 6572 5374 6174  quest['orderStat
-0003e870: 7573 275d 203d 2027 4669 6c6c 6564 270a  us'] = 'Filled'.
-0003e880: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0003e890: 656c 662e 6665 7463 685f 6f72 6465 7273  elf.fetch_orders
-0003e8a0: 2873 796d 626f 6c2c 2073 696e 6365 2c20  (symbol, since, 
-0003e8b0: 6c69 6d69 742c 2073 656c 662e 6578 7465  limit, self.exte
-0003e8c0: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
-0003e8d0: 6d73 2929 0a0a 2020 2020 6465 6620 6665  ms))..    def fe
-0003e8e0: 7463 685f 6361 6e63 656c 6564 5f6f 7264  tch_canceled_ord
-0003e8f0: 6572 7328 7365 6c66 2c20 7379 6d62 6f6c  ers(self, symbol
-0003e900: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
-0003e910: 3d20 4e6f 6e65 2c20 7369 6e63 653a 204f  = None, since: O
-0003e920: 7074 696f 6e61 6c5b 696e 745d 203d 204e  ptional[int] = N
-0003e930: 6f6e 652c 206c 696d 6974 3a20 4f70 7469  one, limit: Opti
-0003e940: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
-0003e950: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
-0003e960: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0003e970: 2020 6665 7463 6865 7320 696e 666f 726d    fetches inform
-0003e980: 6174 696f 6e20 6f6e 206d 756c 7469 706c  ation on multipl
-0003e990: 6520 6361 6e63 656c 6564 206f 7264 6572  e canceled order
-0003e9a0: 7320 6d61 6465 2062 7920 7468 6520 7573  s made by the us
-0003e9b0: 6572 0a20 2020 2020 2020 203a 7061 7261  er.        :para
-0003e9c0: 6d20 7374 7220 7379 6d62 6f6c 3a20 756e  m str symbol: un
-0003e9d0: 6966 6965 6420 6d61 726b 6574 2073 796d  ified market sym
-0003e9e0: 626f 6c20 6f66 2074 6865 206d 6172 6b65  bol of the marke
-0003e9f0: 7420 6f72 6465 7273 2077 6572 6520 6d61  t orders were ma
-0003ea00: 6465 2069 6e0a 2020 2020 2020 2020 3a70  de in.        :p
-0003ea10: 6172 616d 2069 6e74 7c4e 6f6e 6520 7369  aram int|None si
-0003ea20: 6e63 653a 2074 696d 6573 7461 6d70 2069  nce: timestamp i
-0003ea30: 6e20 6d73 206f 6620 7468 6520 6561 726c  n ms of the earl
-0003ea40: 6965 7374 206f 7264 6572 2c20 6465 6661  iest order, defa
-0003ea50: 756c 7420 6973 204e 6f6e 650a 2020 2020  ult is None.    
-0003ea60: 2020 2020 3a70 6172 616d 2069 6e74 7c4e      :param int|N
-0003ea70: 6f6e 6520 6c69 6d69 743a 206d 6178 206e  one limit: max n
-0003ea80: 756d 6265 7220 6f66 206f 7264 6572 7320  umber of orders 
-0003ea90: 746f 2072 6574 7572 6e2c 2064 6566 6175  to return, defau
-0003eaa0: 6c74 2069 7320 4e6f 6e65 0a20 2020 2020  lt is None.     
-0003eab0: 2020 203a 7061 7261 6d20 6469 6374 2070     :param dict p
-0003eac0: 6172 616d 733a 2065 7874 7261 2070 6172  arams: extra par
-0003ead0: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
-0003eae0: 2074 6f20 7468 6520 6279 6269 7420 6170   to the bybit ap
-0003eaf0: 6920 656e 6470 6f69 6e74 0a20 2020 2020  i endpoint.     
-0003eb00: 2020 203a 7265 7475 726e 7320 6469 6374     :returns dict
-0003eb10: 3a20 6120 6c69 7374 206f 6620 606f 7264  : a list of `ord
-0003eb20: 6572 2073 7472 7563 7475 7265 7320 3c68  er structures <h
-0003eb30: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
-0003eb40: 2e63 6f6d 2f23 2f3f 6964 3d6f 7264 6572  .com/#/?id=order
-0003eb50: 2d73 7472 7563 7475 7265 3e60 0a20 2020  -structure>`.   
-0003eb60: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-0003eb70: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
-0003eb80: 7473 2829 0a20 2020 2020 2020 206d 6172  ts().        mar
-0003eb90: 6b65 7420 3d20 4e6f 6e65 0a20 2020 2020  ket = None.     
-0003eba0: 2020 2069 6620 7379 6d62 6f6c 2069 7320     if symbol is 
-0003ebb0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0003ebc0: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
-0003ebd0: 656c 662e 6d61 726b 6574 2873 796d 626f  elf.market(symbo
-0003ebe0: 6c29 0a20 2020 2020 2020 2074 7970 6520  l).        type 
-0003ebf0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2074  = None.        t
-0003ec00: 7970 652c 2070 6172 616d 7320 3d20 7365  ype, params = se
-0003ec10: 6c66 2e68 616e 646c 655f 6d61 726b 6574  lf.handle_market
-0003ec20: 5f74 7970 655f 616e 645f 7061 7261 6d73  _type_and_params
-0003ec30: 2827 6665 7463 6843 616e 6365 6c65 644f  ('fetchCanceledO
-0003ec40: 7264 6572 7327 2c20 6d61 726b 6574 2c20  rders', market, 
-0003ec50: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
-0003ec60: 656e 6162 6c65 556e 6966 6965 6420 3d20  enableUnified = 
-0003ec70: 7365 6c66 2e69 735f 756e 6966 6965 645f  self.is_unified_
-0003ec80: 656e 6162 6c65 6428 290a 2020 2020 2020  enabled().      
-0003ec90: 2020 7265 7175 6573 7420 3d20 7b7d 0a20    request = {}. 
-0003eca0: 2020 2020 2020 2069 6620 2874 7970 6520         if (type 
-0003ecb0: 3d3d 2027 7370 6f74 2729 2061 6e64 206e  == 'spot') and n
-0003ecc0: 6f74 2065 6e61 626c 6555 6e69 6669 6564  ot enableUnified
-0003ecd0: 5b31 5d3a 0a20 2020 2020 2020 2020 2020  [1]:.           
-0003ece0: 2072 6169 7365 204e 6f74 5375 7070 6f72   raise NotSuppor
-0003ecf0: 7465 6428 7365 6c66 2e69 6420 2b20 2720  ted(self.id + ' 
-0003ed00: 6665 7463 6843 616e 6365 6c65 644f 7264  fetchCanceledOrd
-0003ed10: 6572 7328 2920 6f6e 6c79 2061 6c6c 6f77  ers() only allow
-0003ed20: 2073 706f 7420 6d61 726b 6574 206f 7264   spot market ord
-0003ed30: 6572 7320 666f 7220 756e 6966 6965 6420  ers for unified 
-0003ed40: 7472 6164 6520 6163 636f 756e 742c 2075  trade account, u
-0003ed50: 7365 2065 7863 6861 6e67 652e 6665 7463  se exchange.fetc
-0003ed60: 685f 6f70 656e 5f6f 7264 6572 7328 2920  h_open_orders() 
-0003ed70: 616e 6420 6578 6368 616e 6765 2e66 6574  and exchange.fet
-0003ed80: 6368 436c 6f73 6564 4f72 6465 7273 2829  chClosedOrders()
-0003ed90: 2069 6e73 7465 6164 2729 0a20 2020 2020   instead').     
-0003eda0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0003edb0: 2020 2020 2072 6571 7565 7374 5b27 6f72       request['or
-0003edc0: 6465 7253 7461 7475 7327 5d20 3d20 2743  derStatus'] = 'C
-0003edd0: 616e 6365 6c6c 6564 270a 2020 2020 2020  ancelled'.      
-0003ede0: 2020 7265 7475 726e 2073 656c 662e 6665    return self.fe
-0003edf0: 7463 685f 6f72 6465 7273 2873 796d 626f  tch_orders(symbo
-0003ee00: 6c2c 2073 696e 6365 2c20 6c69 6d69 742c  l, since, limit,
-0003ee10: 2073 656c 662e 6578 7465 6e64 2872 6571   self.extend(req
-0003ee20: 7565 7374 2c20 7061 7261 6d73 2929 0a0a  uest, params))..
-0003ee30: 2020 2020 6465 6620 6665 7463 685f 756e      def fetch_un
-0003ee40: 6966 6965 645f 6163 636f 756e 745f 6f70  ified_account_op
-0003ee50: 656e 5f6f 7264 6572 7328 7365 6c66 2c20  en_orders(self, 
-0003ee60: 7379 6d62 6f6c 3a20 4f70 7469 6f6e 616c  symbol: Optional
-0003ee70: 5b73 7472 5d20 3d20 4e6f 6e65 2c20 7369  [str] = None, si
-0003ee80: 6e63 653a 204f 7074 696f 6e61 6c5b 696e  nce: Optional[in
-0003ee90: 745d 203d 204e 6f6e 652c 206c 696d 6974  t] = None, limit
-0003eea0: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
-0003eeb0: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
-0003eec0: 7d29 3a0a 2020 2020 2020 2020 7365 6c66  }):.        self
-0003eed0: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
-0003eee0: 2020 2020 2020 2020 7265 7175 6573 7420          request 
-0003eef0: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-0003ef00: 2320 2773 796d 626f 6c27 3a20 6d61 726b  # 'symbol': mark
-0003ef10: 6574 5b27 6964 275d 2c0a 2020 2020 2020  et['id'],.      
-0003ef20: 2020 2020 2020 2320 2763 6174 6567 6f72        # 'categor
-0003ef30: 7927 2c20 5479 7065 206f 6620 6465 7269  y', Type of deri
-0003ef40: 7661 7469 7665 7320 7072 6f64 7563 743a  vatives product:
-0003ef50: 206c 696e 6561 7220 6f72 206f 7074 696f   linear or optio
-0003ef60: 6e2e 0a20 2020 2020 2020 2020 2020 2023  n..            #
-0003ef70: 2027 6261 7365 436f 696e 272c 2042 6173   'baseCoin', Bas
-0003ef80: 6520 636f 696e 2e20 5768 656e 2063 6174  e coin. When cat
-0003ef90: 6567 6f72 793d 6f70 7469 6f6e 2e20 4966  egory=option. If
-0003efa0: 206e 6f74 2070 6173 7365 642c 2042 5443   not passed, BTC
-0003efb0: 2062 7920 6465 6661 756c 743b 2077 6865   by default; whe
-0003efc0: 6e20 6361 7465 676f 7279 3d6c 696e 6561  n category=linea
-0003efd0: 722c 2069 6620 4254 4320 7061 7373 6564  r, if BTC passed
-0003efe0: 2c20 4254 4350 4552 5020 2620 4254 4355  , BTCPERP & BTCU
-0003eff0: 5344 5420 7265 7475 726e 6564 2e0a 2020  SDT returned..  
-0003f000: 2020 2020 2020 2020 2020 2320 2773 6574            # 'set
-0003f010: 746c 6543 6f69 6e27 2c20 5365 7474 6c65  tleCoin', Settle
-0003f020: 2063 6f69 6e2e 2046 6f72 206c 696e 6561   coin. For linea
-0003f030: 722c 2065 6974 6865 7220 7379 6d62 6f6c  r, either symbol
-0003f040: 206f 7220 7365 7474 6c65 436f 696e 2069   or settleCoin i
-0003f050: 7320 7265 7175 6972 6564 0a20 2020 2020  s required.     
-0003f060: 2020 2020 2020 2023 2027 6f72 6465 7249         # 'orderI
-0003f070: 6427 2c20 4f72 6465 7220 4944 0a20 2020  d', Order ID.   
-0003f080: 2020 2020 2020 2020 2023 2027 6f72 6465           # 'orde
-0003f090: 724c 696e 6b49 6427 2c20 556e 6971 7565  rLinkId', Unique
-0003f0a0: 2075 7365 722d 7365 7420 6f72 6465 7220   user-set order 
-0003f0b0: 4944 0a20 2020 2020 2020 2020 2020 2023  ID.            #
-0003f0c0: 2027 6f72 6465 7246 696c 7465 7227 2c20   'orderFilter', 
-0003f0d0: 436f 6e64 6974 696f 6e61 6c20 6f72 6465  Conditional orde
-0003f0e0: 7220 6f72 2061 6374 6976 6520 6f72 6465  r or active orde
-0003f0f0: 720a 2020 2020 2020 2020 2020 2020 2320  r.            # 
-0003f100: 276c 696d 6974 273a 206e 756d 6265 722c  'limit': number,
-0003f110: 2044 6174 6120 7175 616e 7469 7479 2070   Data quantity p
-0003f120: 6572 2070 6167 653a 204d 6178 2064 6174  er page: Max dat
-0003f130: 6120 7661 6c75 6520 7065 7220 7061 6765  a value per page
-0003f140: 2069 7320 3530 2c20 616e 6420 6465 6661   is 50, and defa
-0003f150: 756c 7420 7661 6c75 6520 6174 2032 302e  ult value at 20.
-0003f160: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
-0003f170: 6375 7273 6f72 272c 2041 5049 2070 6173  cursor', API pas
-0003f180: 732d 7468 726f 7567 682e 2061 6363 6f75  s-through. accou
-0003f190: 6e74 5479 7065 202b 2063 6174 6567 6f72  ntType + categor
-0003f1a0: 7920 2b20 6375 7273 6f72 202b 2e20 4966  y + cursor +. If
-0003f1b0: 2069 6e63 6f6e 7369 7374 656e 742c 2074   inconsistent, t
-0003f1c0: 6865 2066 6f6c 6c6f 7769 6e67 2073 686f  he following sho
-0003f1d0: 756c 6420 6265 2072 6574 7572 6e65 643a  uld be returned:
-0003f1e0: 2054 6865 2061 6363 6f75 6e74 2074 7970   The account typ
-0003f1f0: 6520 646f 6573 206e 6f74 206d 6174 6368  e does not match
-0003f200: 2074 6865 2073 6572 7669 6365 2069 6e71   the service inq
-0003f210: 7569 7279 2e0a 2020 2020 2020 2020 2020  uiry..          
-0003f220: 2020 2320 276f 7065 6e4f 6e6c 7927 3a20    # 'openOnly': 
-0003f230: 302c 0a20 2020 2020 2020 207d 0a20 2020  0,.        }.   
-0003f240: 2020 2020 206d 6172 6b65 7420 3d20 4e6f       market = No
-0003f250: 6e65 0a20 2020 2020 2020 2069 6620 7379  ne.        if sy
-0003f260: 6d62 6f6c 2069 7320 4e6f 6e65 3a0a 2020  mbol is None:.  
-0003f270: 2020 2020 2020 2020 2020 7479 7065 203d            type =
-0003f280: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
-0003f290: 2020 7479 7065 2c20 7061 7261 6d73 203d    type, params =
-0003f2a0: 2073 656c 662e 6861 6e64 6c65 5f6d 6172   self.handle_mar
-0003f2b0: 6b65 745f 7479 7065 5f61 6e64 5f70 6172  ket_type_and_par
-0003f2c0: 616d 7328 2766 6574 6368 4f70 656e 4f72  ams('fetchOpenOr
-0003f2d0: 6465 7273 272c 206d 6172 6b65 742c 2070  ders', market, p
-0003f2e0: 6172 616d 7329 0a20 2020 2020 2020 2020  arams).         
-0003f2f0: 2020 2073 7562 5479 7065 203d 204e 6f6e     subType = Non
-0003f300: 650a 2020 2020 2020 2020 2020 2020 7375  e.            su
-0003f310: 6254 7970 652c 2070 6172 616d 7320 3d20  bType, params = 
-0003f320: 7365 6c66 2e68 616e 646c 655f 7375 625f  self.handle_sub_
-0003f330: 7479 7065 5f61 6e64 5f70 6172 616d 7328  type_and_params(
-0003f340: 2766 6574 6368 4f70 656e 4f72 6465 7273  'fetchOpenOrders
-0003f350: 272c 206d 6172 6b65 742c 2070 6172 616d  ', market, param
-0003f360: 732c 2027 6c69 6e65 6172 2729 0a20 2020  s, 'linear').   
-0003f370: 2020 2020 2020 2020 2072 6571 7565 7374           request
-0003f380: 5b27 6361 7465 676f 7279 275d 203d 2074  ['category'] = t
-0003f390: 7970 650a 2020 2020 2020 2020 2020 2020  ype.            
-0003f3a0: 6966 2074 7970 6520 3d3d 2027 7377 6170  if type == 'swap
-0003f3b0: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
-0003f3c0: 2020 2069 6620 7375 6254 7970 6520 3d3d     if subType ==
-0003f3d0: 2027 6c69 6e65 6172 273a 0a20 2020 2020   'linear':.     
-0003f3e0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0003f3f0: 656c 662e 6368 6563 6b5f 7265 7175 6972  elf.check_requir
-0003f400: 6564 5f73 796d 626f 6c28 2766 6574 6368  ed_symbol('fetch
-0003f410: 4f70 656e 4f72 6465 7273 272c 2073 796d  OpenOrders', sym
-0003f420: 626f 6c29 0a20 2020 2020 2020 2020 2020  bol).           
-0003f430: 2020 2020 2065 6c69 6620 7375 6254 7970       elif subTyp
-0003f440: 6520 3d3d 2027 696e 7665 7273 6527 3a0a  e == 'inverse':.
-0003f450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003f460: 2020 2020 7261 6973 6520 4e6f 7453 7570      raise NotSup
-0003f470: 706f 7274 6564 2873 656c 662e 6964 202b  ported(self.id +
-0003f480: 2027 2066 6574 6368 4f70 656e 4f72 6465   ' fetchOpenOrde
-0003f490: 7273 2829 2064 6f65 7320 6e6f 7420 616c  rs() does not al
-0003f4a0: 6c6f 7720 696e 7665 7273 6520 6d61 726b  low inverse mark
-0003f4b0: 6574 206f 7264 6572 7320 666f 7220 2720  et orders for ' 
-0003f4c0: 2b20 7379 6d62 6f6c 202b 2027 206d 6172  + symbol + ' mar
-0003f4d0: 6b65 7473 2729 0a20 2020 2020 2020 2020  kets').         
-0003f4e0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-0003f4f0: 6361 7465 676f 7279 275d 203d 2073 7562  category'] = sub
-0003f500: 5479 7065 0a20 2020 2020 2020 2065 6c73  Type.        els
-0003f510: 653a 0a20 2020 2020 2020 2020 2020 206d  e:.            m
-0003f520: 6172 6b65 7420 3d20 7365 6c66 2e6d 6172  arket = self.mar
-0003f530: 6b65 7428 7379 6d62 6f6c 290a 2020 2020  ket(symbol).    
-0003f540: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0003f550: 2773 796d 626f 6c27 5d20 3d20 6d61 726b  'symbol'] = mark
-0003f560: 6574 5b27 6964 275d 0a20 2020 2020 2020  et['id'].       
-0003f570: 2020 2020 2069 6620 6d61 726b 6574 5b27       if market['
-0003f580: 7370 6f74 275d 3a0a 2020 2020 2020 2020  spot']:.        
-0003f590: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0003f5a0: 2763 6174 6567 6f72 7927 5d20 3d20 2773  'category'] = 's
-0003f5b0: 706f 7427 0a20 2020 2020 2020 2020 2020  pot'.           
-0003f5c0: 2065 6c69 6620 6d61 726b 6574 5b27 6f70   elif market['op
-0003f5d0: 7469 6f6e 275d 3a0a 2020 2020 2020 2020  tion']:.        
-0003f5e0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0003f5f0: 2763 6174 6567 6f72 7927 5d20 3d20 276f  'category'] = 'o
-0003f600: 7074 696f 6e27 0a20 2020 2020 2020 2020  ption'.         
-0003f610: 2020 2065 6c69 6620 6d61 726b 6574 5b27     elif market['
-0003f620: 6c69 6e65 6172 275d 3a0a 2020 2020 2020  linear']:.      
-0003f630: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-0003f640: 745b 2763 6174 6567 6f72 7927 5d20 3d20  t['category'] = 
-0003f650: 276c 696e 6561 7227 0a20 2020 2020 2020  'linear'.       
-0003f660: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0003f670: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-0003f680: 204e 6f74 5375 7070 6f72 7465 6428 7365   NotSupported(se
-0003f690: 6c66 2e69 6420 2b20 2720 6665 7463 684f  lf.id + ' fetchO
-0003f6a0: 7065 6e4f 7264 6572 7328 2920 646f 6573  penOrders() does
-0003f6b0: 206e 6f74 2061 6c6c 6f77 2069 6e76 6572   not allow inver
-0003f6c0: 7365 206d 6172 6b65 7420 6f72 6465 7273  se market orders
-0003f6d0: 2066 6f72 2027 202b 2073 796d 626f 6c20   for ' + symbol 
-0003f6e0: 2b20 2720 6d61 726b 6574 7327 290a 2020  + ' markets').  
-0003f6f0: 2020 2020 2020 6973 5374 6f70 203d 2073        isStop = s
-0003f700: 656c 662e 7361 6665 5f76 616c 7565 2870  elf.safe_value(p
-0003f710: 6172 616d 732c 2027 7374 6f70 272c 2046  arams, 'stop', F
-0003f720: 616c 7365 290a 2020 2020 2020 2020 7061  alse).        pa
-0003f730: 7261 6d73 203d 2073 656c 662e 6f6d 6974  rams = self.omit
-0003f740: 2870 6172 616d 732c 205b 2773 746f 7027  (params, ['stop'
-0003f750: 5d29 0a20 2020 2020 2020 2069 6620 6973  ]).        if is
-0003f760: 5374 6f70 3a0a 2020 2020 2020 2020 2020  Stop:.          
-0003f770: 2020 6966 206d 6172 6b65 745b 2773 706f    if market['spo
-0003f780: 7427 5d3a 0a20 2020 2020 2020 2020 2020  t']:.           
-0003f790: 2020 2020 2072 6571 7565 7374 5b27 6f72       request['or
-0003f7a0: 6465 7246 696c 7465 7227 5d20 3d20 2774  derFilter'] = 't
-0003f7b0: 7073 6c4f 7264 6572 270a 2020 2020 2020  pslOrder'.      
-0003f7c0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0003f7d0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-0003f7e0: 6573 745b 276f 7264 6572 4669 6c74 6572  est['orderFilter
-0003f7f0: 275d 203d 2027 5374 6f70 4f72 6465 7227  '] = 'StopOrder'
-0003f800: 0a20 2020 2020 2020 2069 6620 6c69 6d69  .        if limi
-0003f810: 7420 6973 206e 6f74 204e 6f6e 653a 0a20  t is not None:. 
-0003f820: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-0003f830: 7374 5b27 6c69 6d69 7427 5d20 3d20 6c69  st['limit'] = li
-0003f840: 6d69 740a 2020 2020 2020 2020 7265 7370  mit.        resp
-0003f850: 6f6e 7365 203d 2073 656c 662e 7072 6976  onse = self.priv
-0003f860: 6174 6547 6574 5635 4f72 6465 7252 6561  ateGetV5OrderRea
-0003f870: 6c74 696d 6528 7365 6c66 2e65 7874 656e  ltime(self.exten
-0003f880: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
-0003f890: 7329 290a 2020 2020 2020 2020 230a 2020  s)).        #.  
-0003f8a0: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
-0003f8b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003f8c0: 2272 6574 436f 6465 223a 2030 2c0a 2020  "retCode": 0,.  
-0003f8d0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003f8e0: 2272 6574 4d73 6722 3a20 224f 4b22 2c0a  "retMsg": "OK",.
-0003f8f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003f900: 2020 2272 6573 756c 7422 3a20 7b0a 2020    "result": {.  
-0003f910: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003f920: 2020 2020 226e 6578 7450 6167 6543 7572      "nextPageCur
-0003f930: 736f 7222 3a20 2231 3332 3130 3532 3635  sor": "132105265
-0003f940: 3335 3336 3531 3535 3834 2533 4131 3637  3536515584%3A167
-0003f950: 3232 3137 3734 3832 3837 2532 4331 3332  2217748287%2C132
-0003f960: 3130 3532 3635 3335 3336 3531 3535 3834  1052653536515584
-0003f970: 2533 4131 3637 3232 3137 3734 3832 3837  %3A1672217748287
-0003f980: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0003f990: 2020 2020 2020 2020 2022 6361 7465 676f           "catego
-0003f9a0: 7279 223a 2022 7370 6f74 222c 0a20 2020  ry": "spot",.   
-0003f9b0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0003f9c0: 2020 2022 6c69 7374 223a 205b 0a20 2020     "list": [.   
-0003f9d0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0003f9e0: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
-0003f9f0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0003fa00: 2020 2020 2020 2022 7379 6d62 6f6c 223a         "symbol":
-0003fa10: 2022 4554 4855 5344 5422 2c0a 2020 2020   "ETHUSDT",.    
-0003fa20: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003fa30: 2020 2020 2020 2020 2020 226f 7264 6572            "order
-0003fa40: 5479 7065 223a 2022 4c69 6d69 7422 2c0a  Type": "Limit",.
-0003fa50: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003fa60: 2020 2020 2020 2020 2020 2020 2020 226f                "o
-0003fa70: 7264 6572 4c69 6e6b 4964 223a 2022 3136  rderLinkId": "16
-0003fa80: 3732 3231 3737 3438 3237 3736 3532 222c  72217748277652",
-0003fa90: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0003faa0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0003fab0: 6f72 6465 7249 6422 3a20 2231 3332 3130  orderId": "13210
-0003fac0: 3532 3635 3335 3336 3531 3535 3834 222c  52653536515584",
-0003fad0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0003fae0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0003faf0: 6361 6e63 656c 5479 7065 223a 2022 554e  cancelType": "UN
-0003fb00: 4b4e 4f57 4e22 2c0a 2020 2020 2020 2020  KNOWN",.        
-0003fb10: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0003fb20: 2020 2020 2020 2261 7667 5072 6963 6522        "avgPrice"
-0003fb30: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
-0003fb40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003fb50: 2020 2020 2273 746f 704f 7264 6572 5479      "stopOrderTy
-0003fb60: 7065 223a 2022 7470 736c 4f72 6465 7222  pe": "tpslOrder"
-0003fb70: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0003fb80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003fb90: 226c 6173 7450 7269 6365 4f6e 4372 6561  "lastPriceOnCrea
-0003fba0: 7465 6422 3a20 2222 2c0a 2020 2020 2020  ted": "",.      
-0003fbb0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0003fbc0: 2020 2020 2020 2020 226f 7264 6572 5374          "orderSt
-0003fbd0: 6174 7573 223a 2022 4361 6e63 656c 6c65  atus": "Cancelle
-0003fbe0: 6422 2c0a 2020 2020 2020 2020 2320 2020  d",.        #   
-0003fbf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003fc00: 2020 2274 616b 6550 726f 6669 7422 3a20    "takeProfit": 
-0003fc10: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
-0003fc20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003fc30: 2020 2263 756d 4578 6563 5661 6c75 6522    "cumExecValue"
-0003fc40: 3a20 2230 222c 0a20 2020 2020 2020 2023  : "0",.        #
+0003c0a0: 6572 5374 6174 7573 223a 2022 4669 6c6c  erStatus": "Fill
+0003c0b0: 6564 222c 0a20 2020 2020 2020 2023 2020  ed",.        #  
+0003c0c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0003c0d0: 7461 6b65 5072 6f66 6974 223a 2022 222c  takeProfit": "",
+0003c0e0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003c0f0: 2020 2020 2020 2020 2020 2022 6375 6d45             "cumE
+0003c100: 7865 6356 616c 7565 223a 2022 3533 362e  xecValue": "536.
+0003c110: 3932 3530 3030 3030 222c 0a20 2020 2020  92500000",.     
+0003c120: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0003c130: 2020 2020 2022 626c 6f63 6b54 7261 6465       "blockTrade
+0003c140: 4964 223a 2022 222c 0a20 2020 2020 2020  Id": "",.       
+0003c150: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0003c160: 2020 2022 7265 6a65 6374 5265 6173 6f6e     "rejectReason
+0003c170: 223a 2022 4543 5f4e 6f45 7272 6f72 222c  ": "EC_NoError",
+0003c180: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003c190: 2020 2020 2020 2020 2020 2022 7072 6963             "pric
+0003c1a0: 6522 3a20 2231 3132 372e 3130 3030 3030  e": "1127.100000
+0003c1b0: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+0003c1c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0003c1d0: 6372 6561 7465 6454 696d 6522 3a20 3136  createdTime": 16
+0003c1e0: 3537 3731 3139 3439 3932 382c 0a20 2020  57711949928,.   
+0003c1f0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003c200: 2020 2020 2020 2022 7470 5472 6967 6765         "tpTrigge
+0003c210: 7242 7922 3a20 2255 4e4b 4e4f 574e 222c  rBy": "UNKNOWN",
+0003c220: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003c230: 2020 2020 2020 2020 2020 2022 7469 6d65             "time
+0003c240: 496e 466f 7263 6522 3a20 2249 6d6d 6564  InForce": "Immed
+0003c250: 6961 7465 4f72 4361 6e63 656c 222c 0a20  iateOrCancel",. 
+0003c260: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003c270: 2020 2020 2020 2020 2022 6261 7365 5072           "basePr
+0003c280: 6963 6522 3a20 2222 2c0a 2020 2020 2020  ice": "",.      
+0003c290: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0003c2a0: 2020 2020 226c 6561 7665 7356 616c 7565      "leavesValue
+0003c2b0: 223a 2022 302e 3030 3030 3030 3030 222c  ": "0.00000000",
+0003c2c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003c2d0: 2020 2020 2020 2020 2020 2022 7570 6461             "upda
+0003c2e0: 7465 6454 696d 6522 3a20 3136 3537 3731  tedTime": 165771
+0003c2f0: 3139 3439 3934 352c 0a20 2020 2020 2020  1949945,.       
+0003c300: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0003c310: 2020 2022 7369 6465 223a 2022 4275 7922     "side": "Buy"
+0003c320: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003c330: 2020 2020 2020 2020 2020 2020 2274 7269              "tri
+0003c340: 6767 6572 5072 6963 6522 3a20 2222 2c0a  ggerPrice": "",.
+0003c350: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003c360: 2020 2020 2020 2020 2020 2263 756d 4578            "cumEx
+0003c370: 6563 4665 6522 3a20 2230 2e33 3232 3135  ecFee": "0.32215
+0003c380: 3530 3022 2c0a 2020 2020 2020 2020 2320  500",.        # 
+0003c390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003c3a0: 2273 6c54 7269 6767 6572 4279 223a 2022  "slTriggerBy": "
+0003c3b0: 554e 4b4e 4f57 4e22 2c0a 2020 2020 2020  UNKNOWN",.      
+0003c3c0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0003c3d0: 2020 2020 226c 6561 7665 7351 7479 223a      "leavesQty":
+0003c3e0: 2022 302e 3030 3030 222c 0a20 2020 2020   "0.0000",.     
+0003c3f0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0003c400: 2020 2020 2022 636c 6f73 654f 6e54 7269       "closeOnTri
+0003c410: 6767 6572 223a 2046 616c 7365 2c0a 2020  gger": False,.  
+0003c420: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003c430: 2020 2020 2020 2020 2263 756d 4578 6563          "cumExec
+0003c440: 5174 7922 3a20 2230 2e35 3030 3022 2c0a  Qty": "0.5000",.
+0003c450: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003c460: 2020 2020 2020 2020 2020 2272 6564 7563            "reduc
+0003c470: 654f 6e6c 7922 3a20 4661 6c73 652c 0a20  eOnly": False,. 
+0003c480: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003c490: 2020 2020 2020 2020 2022 7174 7922 3a20           "qty": 
+0003c4a0: 2230 2e35 3030 3022 2c0a 2020 2020 2020  "0.5000",.      
+0003c4b0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0003c4c0: 2020 2020 2273 746f 704c 6f73 7322 3a20      "stopLoss": 
+0003c4d0: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
+0003c4e0: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+0003c4f0: 7269 6767 6572 4279 223a 2022 554e 4b4e  riggerBy": "UNKN
+0003c500: 4f57 4e22 2c0a 2020 2020 2020 2020 2320  OWN",.        # 
+0003c510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003c520: 226f 7264 6572 494d 223a 2022 220a 2020  "orderIM": "".  
+0003c530: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003c540: 2020 2020 7d5d 0a20 2020 2020 2020 2023      }].        #
+0003c550: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
+0003c560: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
+0003c570: 696d 6522 3a20 3136 3537 3731 3334 3531  ime": 1657713451
+0003c580: 3734 310a 2020 2020 2020 2020 2320 2020  741.        #   
+0003c590: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
+0003c5a0: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
+0003c5b0: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
+0003c5c0: 6573 706f 6e73 652c 2027 7265 7375 6c74  esponse, 'result
+0003c5d0: 272c 207b 7d29 0a20 2020 2020 2020 2064  ', {}).        d
+0003c5e0: 6174 6120 3d20 7365 6c66 2e73 6166 655f  ata = self.safe_
+0003c5f0: 7661 6c75 6528 7265 7375 6c74 2c20 276c  value(result, 'l
+0003c600: 6973 7427 2c20 5b5d 290a 2020 2020 2020  ist', []).      
+0003c610: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
+0003c620: 7273 655f 6f72 6465 7273 2864 6174 612c  rse_orders(data,
+0003c630: 206d 6172 6b65 742c 2073 696e 6365 2c20   market, since, 
+0003c640: 6c69 6d69 7429 0a0a 2020 2020 6465 6620  limit)..    def 
+0003c650: 6665 7463 685f 6465 7269 7661 7469 7665  fetch_derivative
+0003c660: 735f 6f72 6465 7273 2873 656c 662c 2073  s_orders(self, s
+0003c670: 796d 626f 6c3a 204f 7074 696f 6e61 6c5b  ymbol: Optional[
+0003c680: 7374 725d 203d 204e 6f6e 652c 2073 696e  str] = None, sin
+0003c690: 6365 3a20 4f70 7469 6f6e 616c 5b69 6e74  ce: Optional[int
+0003c6a0: 5d20 3d20 4e6f 6e65 2c20 6c69 6d69 743a  ] = None, limit:
+0003c6b0: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
+0003c6c0: 204e 6f6e 652c 2070 6172 616d 733d 7b7d   None, params={}
+0003c6d0: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
+0003c6e0: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
+0003c6f0: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
+0003c700: 4e6f 6e65 0a20 2020 2020 2020 2072 6571  None.        req
+0003c710: 7565 7374 203d 207b 0a20 2020 2020 2020  uest = {.       
+0003c720: 2020 2020 2023 2027 7379 6d62 6f6c 273a       # 'symbol':
+0003c730: 206d 6172 6b65 745b 2769 6427 5d2c 0a20   market['id'],. 
+0003c740: 2020 2020 2020 2020 2020 2023 2027 6361             # 'ca
+0003c750: 7465 676f 7279 272c 2054 7970 6520 6f66  tegory', Type of
+0003c760: 2064 6572 6976 6174 6976 6573 2070 726f   derivatives pro
+0003c770: 6475 6374 3a20 7370 6f74 2c20 6c69 6e65  duct: spot, line
+0003c780: 6172 206f 7220 6f70 7469 6f6e 2e0a 2020  ar or option..  
+0003c790: 2020 2020 2020 2020 2020 2320 2762 6173            # 'bas
+0003c7a0: 6543 6f69 6e27 2c20 4261 7365 2063 6f69  eCoin', Base coi
+0003c7b0: 6e2e 2057 6865 6e20 6361 7465 676f 7279  n. When category
+0003c7c0: 3d6f 7074 696f 6e2e 2049 6620 6e6f 7420  =option. If not 
+0003c7d0: 7061 7373 6564 2c20 4254 4320 6279 2064  passed, BTC by d
+0003c7e0: 6566 6175 6c74 3b20 7768 656e 2063 6174  efault; when cat
+0003c7f0: 6567 6f72 793d 6c69 6e65 6172 2c20 6966  egory=linear, if
+0003c800: 2042 5443 2070 6173 7365 642c 2042 5443   BTC passed, BTC
+0003c810: 5045 5250 2026 2042 5443 5553 4454 2072  PERP & BTCUSDT r
+0003c820: 6574 7572 6e65 642e 0a20 2020 2020 2020  eturned..       
+0003c830: 2020 2020 2023 2027 6f72 6465 7249 6427       # 'orderId'
+0003c840: 2c20 4f72 6465 7220 4944 0a20 2020 2020  , Order ID.     
+0003c850: 2020 2020 2020 2023 2027 6f72 6465 724c         # 'orderL
+0003c860: 696e 6b49 6427 2c20 556e 6971 7565 2075  inkId', Unique u
+0003c870: 7365 722d 7365 7420 6f72 6465 7220 4944  ser-set order ID
+0003c880: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+0003c890: 6f72 6465 7253 7461 7475 7327 2c20 2023  orderStatus',  #
+0003c8a0: 2052 6574 7572 6e20 616c 6c20 7374 6174   Return all stat
+0003c8b0: 7573 206f 7264 6572 7320 6966 206e 6f74  us orders if not
+0003c8c0: 2070 6173 7365 640a 2020 2020 2020 2020   passed.        
+0003c8d0: 2020 2020 2320 276f 7264 6572 4669 6c74      # 'orderFilt
+0003c8e0: 6572 272c 2043 6f6e 6469 7469 6f6e 616c  er', Conditional
+0003c8f0: 206f 7264 6572 206f 7220 6163 7469 7665   order or active
+0003c900: 206f 7264 6572 0a20 2020 2020 2020 2020   order.         
+0003c910: 2020 2023 2027 6c69 6d69 7427 3a20 6e75     # 'limit': nu
+0003c920: 6d62 6572 2c20 4461 7461 2071 7561 6e74  mber, Data quant
+0003c930: 6974 7920 7065 7220 7061 6765 3a20 4d61  ity per page: Ma
+0003c940: 7820 6461 7461 2076 616c 7565 2070 6572  x data value per
+0003c950: 2070 6167 6520 6973 2035 302c 2061 6e64   page is 50, and
+0003c960: 2064 6566 6175 6c74 2076 616c 7565 2061   default value a
+0003c970: 7420 3230 2e0a 2020 2020 2020 2020 2020  t 20..          
+0003c980: 2020 2320 2763 7572 736f 7227 2c20 4150    # 'cursor', AP
+0003c990: 4920 7061 7373 2d74 6872 6f75 6768 2e20  I pass-through. 
+0003c9a0: 6163 636f 756e 7454 7970 6520 2b20 6361  accountType + ca
+0003c9b0: 7465 676f 7279 202b 2063 7572 736f 7220  tegory + cursor 
+0003c9c0: 2b2e 2049 6620 696e 636f 6e73 6973 7465  +. If inconsiste
+0003c9d0: 6e74 2c20 7468 6520 666f 6c6c 6f77 696e  nt, the followin
+0003c9e0: 6720 7368 6f75 6c64 2062 6520 7265 7475  g should be retu
+0003c9f0: 726e 6564 3a20 5468 6520 6163 636f 756e  rned: The accoun
+0003ca00: 7420 7479 7065 2064 6f65 7320 6e6f 7420  t type does not 
+0003ca10: 6d61 7463 6820 7468 6520 7365 7276 6963  match the servic
+0003ca20: 6520 696e 7175 6972 792e 0a20 2020 2020  e inquiry..     
+0003ca30: 2020 207d 0a20 2020 2020 2020 2069 6620     }.        if 
+0003ca40: 7379 6d62 6f6c 2069 7320 4e6f 6e65 3a0a  symbol is None:.
+0003ca50: 2020 2020 2020 2020 2020 2020 7479 7065              type
+0003ca60: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+0003ca70: 2020 2020 7479 7065 2c20 7061 7261 6d73      type, params
+0003ca80: 203d 2073 656c 662e 6861 6e64 6c65 5f6d   = self.handle_m
+0003ca90: 6172 6b65 745f 7479 7065 5f61 6e64 5f70  arket_type_and_p
+0003caa0: 6172 616d 7328 2766 6574 6368 4f72 6465  arams('fetchOrde
+0003cab0: 7273 272c 206d 6172 6b65 742c 2070 6172  rs', market, par
+0003cac0: 616d 7329 0a20 2020 2020 2020 2020 2020  ams).           
+0003cad0: 2072 6571 7565 7374 5b27 6361 7465 676f   request['catego
+0003cae0: 7279 275d 203d 2074 7970 650a 2020 2020  ry'] = type.    
+0003caf0: 2020 2020 2020 2020 6966 2074 7970 6520          if type 
+0003cb00: 3d3d 2027 7377 6170 273a 0a20 2020 2020  == 'swap':.     
+0003cb10: 2020 2020 2020 2020 2020 2073 7562 5479             subTy
+0003cb20: 7065 203d 204e 6f6e 650a 2020 2020 2020  pe = None.      
+0003cb30: 2020 2020 2020 2020 2020 7375 6254 7970            subTyp
+0003cb40: 652c 2070 6172 616d 7320 3d20 7365 6c66  e, params = self
+0003cb50: 2e68 616e 646c 655f 7375 625f 7479 7065  .handle_sub_type
+0003cb60: 5f61 6e64 5f70 6172 616d 7328 2766 6574  _and_params('fet
+0003cb70: 6368 4f72 6465 7273 272c 206d 6172 6b65  chOrders', marke
+0003cb80: 742c 2070 6172 616d 732c 2027 6c69 6e65  t, params, 'line
+0003cb90: 6172 2729 0a20 2020 2020 2020 2020 2020  ar').           
+0003cba0: 2020 2020 2072 6571 7565 7374 5b27 6361       request['ca
+0003cbb0: 7465 676f 7279 275d 203d 2073 7562 5479  tegory'] = subTy
+0003cbc0: 7065 0a20 2020 2020 2020 2065 6c73 653a  pe.        else:
+0003cbd0: 0a20 2020 2020 2020 2020 2020 206d 6172  .            mar
+0003cbe0: 6b65 7420 3d20 7365 6c66 2e6d 6172 6b65  ket = self.marke
+0003cbf0: 7428 7379 6d62 6f6c 290a 2020 2020 2020  t(symbol).      
+0003cc00: 2020 2020 2020 7265 7175 6573 745b 2773        request['s
+0003cc10: 796d 626f 6c27 5d20 3d20 6d61 726b 6574  ymbol'] = market
+0003cc20: 5b27 6964 275d 0a20 2020 2020 2020 2020  ['id'].         
+0003cc30: 2020 2069 6620 6d61 726b 6574 5b27 6c69     if market['li
+0003cc40: 6e65 6172 275d 3a0a 2020 2020 2020 2020  near']:.        
+0003cc50: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+0003cc60: 2763 6174 6567 6f72 7927 5d20 3d20 276c  'category'] = 'l
+0003cc70: 696e 6561 7227 0a20 2020 2020 2020 2020  inear'.         
+0003cc80: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0003cc90: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0003cca0: 5b27 6361 7465 676f 7279 275d 203d 2027  ['category'] = '
+0003ccb0: 696e 7665 7273 6527 0a20 2020 2020 2020  inverse'.       
+0003ccc0: 2069 7353 746f 7020 3d20 7365 6c66 2e73   isStop = self.s
+0003ccd0: 6166 655f 7661 6c75 6528 7061 7261 6d73  afe_value(params
+0003cce0: 2c20 2773 746f 7027 2c20 4661 6c73 6529  , 'stop', False)
+0003ccf0: 0a20 2020 2020 2020 2070 6172 616d 7320  .        params 
+0003cd00: 3d20 7365 6c66 2e6f 6d69 7428 7061 7261  = self.omit(para
+0003cd10: 6d73 2c20 5b27 7374 6f70 275d 290a 2020  ms, ['stop']).  
+0003cd20: 2020 2020 2020 6966 2069 7353 746f 703a        if isStop:
+0003cd30: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+0003cd40: 7565 7374 5b27 6f72 6465 7246 696c 7465  uest['orderFilte
+0003cd50: 7227 5d20 3d20 2753 746f 704f 7264 6572  r'] = 'StopOrder
+0003cd60: 270a 2020 2020 2020 2020 6966 206c 696d  '.        if lim
+0003cd70: 6974 2069 7320 6e6f 7420 4e6f 6e65 3a0a  it is not None:.
+0003cd80: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0003cd90: 6573 745b 276c 696d 6974 275d 203d 206c  est['limit'] = l
+0003cda0: 696d 6974 0a20 2020 2020 2020 2072 6573  imit.        res
+0003cdb0: 706f 6e73 6520 3d20 7365 6c66 2e70 7269  ponse = self.pri
+0003cdc0: 7661 7465 4765 7456 354f 7264 6572 4869  vateGetV5OrderHi
+0003cdd0: 7374 6f72 7928 7365 6c66 2e65 7874 656e  story(self.exten
+0003cde0: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
+0003cdf0: 7329 290a 2020 2020 2020 2020 230a 2020  s)).        #.  
+0003ce00: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
+0003ce10: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003ce20: 2272 6574 436f 6465 223a 2030 2c0a 2020  "retCode": 0,.  
+0003ce30: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003ce40: 2272 6574 4d73 6722 3a20 224f 4b22 2c0a  "retMsg": "OK",.
+0003ce50: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003ce60: 2020 2272 6573 756c 7422 3a20 7b0a 2020    "result": {.  
+0003ce70: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003ce80: 2020 2020 226e 6578 7450 6167 6543 7572      "nextPageCur
+0003ce90: 736f 7222 3a20 2230 3332 3334 6465 392d  sor": "03234de9-
+0003cea0: 3133 3332 2d34 3165 622d 6238 3035 2d34  1332-41eb-b805-4
+0003ceb0: 6139 6634 3263 3133 3661 3325 3341 3136  a9f42c136a3%3A16
+0003cec0: 3732 3232 3031 3039 3338 3725 3243 3033  72220109387%2C03
+0003ced0: 3233 3464 6539 2d31 3333 322d 3431 6562  234de9-1332-41eb
+0003cee0: 2d62 3830 352d 3461 3966 3432 6331 3336  -b805-4a9f42c136
+0003cef0: 6133 2533 4131 3637 3232 3230 3130 3933  a3%3A16722201093
+0003cf00: 3837 222c 0a20 2020 2020 2020 2023 2020  87",.        #  
+0003cf10: 2020 2020 2020 2020 2020 2022 6361 7465             "cate
+0003cf20: 676f 7279 223a 2022 6c69 6e65 6172 222c  gory": "linear",
+0003cf30: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003cf40: 2020 2020 2020 2022 6c69 7374 223a 205b         "list": [
+0003cf50: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003cf60: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+0003cf70: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003cf80: 2020 2020 2020 2020 2020 2022 7379 6d62             "symb
+0003cf90: 6f6c 223a 2022 4254 4355 5344 5422 2c0a  ol": "BTCUSDT",.
+0003cfa0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003cfb0: 2020 2020 2020 2020 2020 2020 2020 226f                "o
+0003cfc0: 7264 6572 5479 7065 223a 2022 4c69 6d69  rderType": "Limi
+0003cfd0: 7422 2c0a 2020 2020 2020 2020 2320 2020  t",.        #   
+0003cfe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003cff0: 2020 226f 7264 6572 4c69 6e6b 4964 223a    "orderLinkId":
+0003d000: 2022 7465 7374 2d30 3031 222c 0a20 2020   "test-001",.   
+0003d010: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003d020: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
+0003d030: 7249 6422 3a20 2230 3332 3334 6465 392d  rId": "03234de9-
+0003d040: 3133 3332 2d34 3165 622d 6238 3035 2d34  1332-41eb-b805-4
+0003d050: 6139 6634 3263 3133 3661 3322 2c0a 2020  a9f42c136a3",.  
+0003d060: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003d070: 2020 2020 2020 2020 2020 2020 2263 616e              "can
+0003d080: 6365 6c54 7970 6522 3a20 2243 616e 6365  celType": "Cance
+0003d090: 6c42 7955 7365 7222 2c0a 2020 2020 2020  lByUser",.      
+0003d0a0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0003d0b0: 2020 2020 2020 2020 2261 7667 5072 6963          "avgPric
+0003d0c0: 6522 3a20 2230 222c 0a20 2020 2020 2020  e": "0",.       
+0003d0d0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0003d0e0: 2020 2020 2020 2022 7374 6f70 4f72 6465         "stopOrde
+0003d0f0: 7254 7970 6522 3a20 2255 4e4b 4e4f 574e  rType": "UNKNOWN
+0003d100: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0003d110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d120: 2022 6c61 7374 5072 6963 654f 6e43 7265   "lastPriceOnCre
+0003d130: 6174 6564 223a 2022 3136 3635 362e 3522  ated": "16656.5"
+0003d140: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003d150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d160: 226f 7264 6572 5374 6174 7573 223a 2022  "orderStatus": "
+0003d170: 4361 6e63 656c 6c65 6422 2c0a 2020 2020  Cancelled",.    
+0003d180: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0003d190: 2020 2020 2020 2020 2020 2274 616b 6550            "takeP
+0003d1a0: 726f 6669 7422 3a20 2222 2c0a 2020 2020  rofit": "",.    
+0003d1b0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0003d1c0: 2020 2020 2020 2020 2020 2263 756d 4578            "cumEx
+0003d1d0: 6563 5661 6c75 6522 3a20 2230 222c 0a20  ecValue": "0",. 
+0003d1e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003d1f0: 2020 2020 2020 2020 2020 2020 2022 7472               "tr
+0003d200: 6967 6765 7244 6972 6563 7469 6f6e 223a  iggerDirection":
+0003d210: 2030 2c0a 2020 2020 2020 2020 2320 2020   0,.        #   
+0003d220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d230: 2020 2262 6c6f 636b 5472 6164 6549 6422    "blockTradeId"
+0003d240: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
+0003d250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d260: 2020 2020 2272 656a 6563 7452 6561 736f      "rejectReaso
+0003d270: 6e22 3a20 2245 435f 5065 7243 616e 6365  n": "EC_PerCance
+0003d280: 6c52 6571 7565 7374 222c 0a20 2020 2020  lRequest",.     
+0003d290: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0003d2a0: 2020 2020 2020 2020 2022 6973 4c65 7665           "isLeve
+0003d2b0: 7261 6765 223a 2022 222c 0a20 2020 2020  rage": "",.     
+0003d2c0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0003d2d0: 2020 2020 2020 2020 2022 7072 6963 6522           "price"
+0003d2e0: 3a20 2231 3830 3030 222c 0a20 2020 2020  : "18000",.     
+0003d2f0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0003d300: 2020 2020 2020 2020 2022 6f72 6465 7249           "orderI
+0003d310: 7622 3a20 2222 2c0a 2020 2020 2020 2020  v": "",.        
+0003d320: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0003d330: 2020 2020 2020 2263 7265 6174 6564 5469        "createdTi
+0003d340: 6d65 223a 2022 3136 3732 3232 3031 3039  me": "1672220109
+0003d350: 3338 3722 2c0a 2020 2020 2020 2020 2320  387",.        # 
+0003d360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d370: 2020 2020 2274 7054 7269 6767 6572 4279      "tpTriggerBy
+0003d380: 223a 2022 554e 4b4e 4f57 4e22 2c0a 2020  ": "UNKNOWN",.  
+0003d390: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003d3a0: 2020 2020 2020 2020 2020 2020 2270 6f73              "pos
+0003d3b0: 6974 696f 6e49 6478 223a 2030 2c0a 2020  itionIdx": 0,.  
+0003d3c0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003d3d0: 2020 2020 2020 2020 2020 2020 2274 696d              "tim
+0003d3e0: 6549 6e46 6f72 6365 223a 2022 476f 6f64  eInForce": "Good
+0003d3f0: 5469 6c6c 4361 6e63 656c 222c 0a20 2020  TillCancel",.   
+0003d400: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003d410: 2020 2020 2020 2020 2020 2022 6c65 6176             "leav
+0003d420: 6573 5661 6c75 6522 3a20 2230 222c 0a20  esValue": "0",. 
+0003d430: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003d440: 2020 2020 2020 2020 2020 2020 2022 7570               "up
+0003d450: 6461 7465 6454 696d 6522 3a20 2231 3637  datedTime": "167
+0003d460: 3232 3230 3131 3431 3233 222c 0a20 2020  2220114123",.   
+0003d470: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003d480: 2020 2020 2020 2020 2020 2022 7369 6465             "side
+0003d490: 223a 2022 5365 6c6c 222c 0a20 2020 2020  ": "Sell",.     
+0003d4a0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0003d4b0: 2020 2020 2020 2020 2022 7472 6967 6765           "trigge
+0003d4c0: 7250 7269 6365 223a 2022 222c 0a20 2020  rPrice": "",.   
+0003d4d0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003d4e0: 2020 2020 2020 2020 2020 2022 6375 6d45             "cumE
+0003d4f0: 7865 6346 6565 223a 2022 3022 2c0a 2020  xecFee": "0",.  
+0003d500: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003d510: 2020 2020 2020 2020 2020 2020 2273 6c54              "slT
+0003d520: 7269 6767 6572 4279 223a 2022 554e 4b4e  riggerBy": "UNKN
+0003d530: 4f57 4e22 2c0a 2020 2020 2020 2020 2320  OWN",.        # 
+0003d540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d550: 2020 2020 226c 6561 7665 7351 7479 223a      "leavesQty":
+0003d560: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
+0003d570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d580: 2020 2020 2263 6c6f 7365 4f6e 5472 6967      "closeOnTrig
+0003d590: 6765 7222 3a20 4661 6c73 652c 0a20 2020  ger": False,.   
+0003d5a0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003d5b0: 2020 2020 2020 2020 2020 2022 6375 6d45             "cumE
+0003d5c0: 7865 6351 7479 223a 2022 3022 2c0a 2020  xecQty": "0",.  
+0003d5d0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003d5e0: 2020 2020 2020 2020 2020 2020 2272 6564              "red
+0003d5f0: 7563 654f 6e6c 7922 3a20 4661 6c73 652c  uceOnly": False,
+0003d600: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003d610: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0003d620: 7174 7922 3a20 2230 2e31 222c 0a20 2020  qty": "0.1",.   
+0003d630: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003d640: 2020 2020 2020 2020 2020 2022 7374 6f70             "stop
+0003d650: 4c6f 7373 223a 2022 222c 0a20 2020 2020  Loss": "",.     
+0003d660: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0003d670: 2020 2020 2020 2020 2022 7472 6967 6765           "trigge
+0003d680: 7242 7922 3a20 2255 4e4b 4e4f 574e 220a  rBy": "UNKNOWN".
+0003d690: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003d6a0: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
+0003d6b0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0003d6c0: 2020 5d0a 2020 2020 2020 2020 2320 2020    ].        #   
+0003d6d0: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
+0003d6e0: 2023 2020 2020 2020 2020 2022 7265 7445   #         "retE
+0003d6f0: 7874 496e 666f 223a 207b 7d2c 0a20 2020  xtInfo": {},.   
+0003d700: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0003d710: 7469 6d65 223a 2031 3637 3232 3231 3236  time": 167222126
+0003d720: 3338 3632 0a20 2020 2020 2020 2023 2020  3862.        #  
+0003d730: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
+0003d740: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
+0003d750: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
+0003d760: 7265 7370 6f6e 7365 2c20 2772 6573 756c  response, 'resul
+0003d770: 7427 2c20 7b7d 290a 2020 2020 2020 2020  t', {}).        
+0003d780: 6461 7461 203d 2073 656c 662e 7361 6665  data = self.safe
+0003d790: 5f76 616c 7565 2872 6573 756c 742c 2027  _value(result, '
+0003d7a0: 6c69 7374 272c 205b 5d29 0a20 2020 2020  list', []).     
+0003d7b0: 2020 2072 6574 7572 6e20 7365 6c66 2e70     return self.p
+0003d7c0: 6172 7365 5f6f 7264 6572 7328 6461 7461  arse_orders(data
+0003d7d0: 2c20 6d61 726b 6574 2c20 7369 6e63 652c  , market, since,
+0003d7e0: 206c 696d 6974 290a 0a20 2020 2064 6566   limit)..    def
+0003d7f0: 2066 6574 6368 5f6f 7264 6572 7328 7365   fetch_orders(se
+0003d800: 6c66 2c20 7379 6d62 6f6c 3a20 4f70 7469  lf, symbol: Opti
+0003d810: 6f6e 616c 5b73 7472 5d20 3d20 4e6f 6e65  onal[str] = None
+0003d820: 2c20 7369 6e63 653a 204f 7074 696f 6e61  , since: Optiona
+0003d830: 6c5b 696e 745d 203d 204e 6f6e 652c 206c  l[int] = None, l
+0003d840: 696d 6974 3a20 4f70 7469 6f6e 616c 5b69  imit: Optional[i
+0003d850: 6e74 5d20 3d20 4e6f 6e65 2c20 7061 7261  nt] = None, para
+0003d860: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
+0003d870: 2222 220a 2020 2020 2020 2020 6665 7463  """.        fetc
+0003d880: 6865 7320 696e 666f 726d 6174 696f 6e20  hes information 
+0003d890: 6f6e 206d 756c 7469 706c 6520 6f72 6465  on multiple orde
+0003d8a0: 7273 206d 6164 6520 6279 2074 6865 2075  rs made by the u
+0003d8b0: 7365 720a 2020 2020 2020 2020 3a70 6172  ser.        :par
+0003d8c0: 616d 2073 7472 2073 796d 626f 6c3a 2075  am str symbol: u
+0003d8d0: 6e69 6669 6564 206d 6172 6b65 7420 7379  nified market sy
+0003d8e0: 6d62 6f6c 206f 6620 7468 6520 6d61 726b  mbol of the mark
+0003d8f0: 6574 206f 7264 6572 7320 7765 7265 206d  et orders were m
+0003d900: 6164 6520 696e 0a20 2020 2020 2020 203a  ade in.        :
+0003d910: 7061 7261 6d20 696e 747c 4e6f 6e65 2073  param int|None s
+0003d920: 696e 6365 3a20 7468 6520 6561 726c 6965  ince: the earlie
+0003d930: 7374 2074 696d 6520 696e 206d 7320 746f  st time in ms to
+0003d940: 2066 6574 6368 206f 7264 6572 7320 666f   fetch orders fo
+0003d950: 720a 2020 2020 2020 2020 3a70 6172 616d  r.        :param
+0003d960: 2069 6e74 7c4e 6f6e 6520 6c69 6d69 743a   int|None limit:
+0003d970: 2074 6865 206d 6178 696d 756d 206e 756d   the maximum num
+0003d980: 6265 7220 6f66 2020 6f72 6465 2073 7472  ber of  orde str
+0003d990: 7563 7475 7265 7320 746f 2072 6574 7269  uctures to retri
+0003d9a0: 6576 650a 2020 2020 2020 2020 3a70 6172  eve.        :par
+0003d9b0: 616d 2064 6963 7420 7061 7261 6d73 3a20  am dict params: 
+0003d9c0: 6578 7472 6120 7061 7261 6d65 7465 7273  extra parameters
+0003d9d0: 2073 7065 6369 6669 6320 746f 2074 6865   specific to the
+0003d9e0: 2062 7962 6974 2061 7069 2065 6e64 706f   bybit api endpo
+0003d9f0: 696e 740a 2020 2020 2020 2020 3a72 6574  int.        :ret
+0003da00: 7572 6e73 205b 6469 6374 5d3a 2061 206c  urns [dict]: a l
+0003da10: 6973 7420 6f66 2060 6f72 6465 7220 7374  ist of `order st
+0003da20: 7275 6374 7572 6573 203c 6874 7470 733a  ructures <https:
+0003da30: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
+0003da40: 232f 3f69 643d 6f72 6465 722d 7374 7275  #/?id=order-stru
+0003da50: 6374 7572 653e 600a 2020 2020 2020 2020  cture>`.        
+0003da60: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
+0003da70: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
+0003da80: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
+0003da90: 204e 6f6e 650a 2020 2020 2020 2020 7365   None.        se
+0003daa0: 7474 6c65 203d 2073 656c 662e 7361 6665  ttle = self.safe
+0003dab0: 5f73 7472 696e 6728 7061 7261 6d73 2c20  _string(params, 
+0003dac0: 2773 6574 746c 6543 6f69 6e27 290a 2020  'settleCoin').  
+0003dad0: 2020 2020 2020 6966 2073 6574 746c 6520        if settle 
+0003dae0: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
+0003daf0: 2020 2020 2073 6574 746c 652c 2070 6172       settle, par
+0003db00: 616d 7320 3d20 7365 6c66 2e68 616e 646c  ams = self.handl
+0003db10: 655f 6f70 7469 6f6e 5f61 6e64 5f70 6172  e_option_and_par
+0003db20: 616d 7328 7061 7261 6d73 2c20 2766 6574  ams(params, 'fet
+0003db30: 6368 4f72 6465 7273 272c 2027 7365 7474  chOrders', 'sett
+0003db40: 6c65 272c 2073 6574 746c 6529 0a20 2020  le', settle).   
+0003db50: 2020 2020 2069 6620 7379 6d62 6f6c 2069       if symbol i
+0003db60: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0003db70: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
+0003db80: 2073 656c 662e 6d61 726b 6574 2873 796d   self.market(sym
+0003db90: 626f 6c29 0a20 2020 2020 2020 2020 2020  bol).           
+0003dba0: 2073 6574 746c 6520 3d20 6d61 726b 6574   settle = market
+0003dbb0: 5b27 7365 7474 6c65 275d 0a20 2020 2020  ['settle'].     
+0003dbc0: 2020 2073 7562 5479 7065 203d 204e 6f6e     subType = Non
+0003dbd0: 650a 2020 2020 2020 2020 7375 6254 7970  e.        subTyp
+0003dbe0: 652c 2070 6172 616d 7320 3d20 7365 6c66  e, params = self
+0003dbf0: 2e68 616e 646c 655f 7375 625f 7479 7065  .handle_sub_type
+0003dc00: 5f61 6e64 5f70 6172 616d 7328 2766 6574  _and_params('fet
+0003dc10: 6368 4f72 6465 7273 272c 206d 6172 6b65  chOrders', marke
+0003dc20: 742c 2070 6172 616d 7329 0a20 2020 2020  t, params).     
+0003dc30: 2020 2069 7349 6e76 6572 7365 203d 2073     isInverse = s
+0003dc40: 7562 5479 7065 203d 3d20 2769 6e76 6572  ubType == 'inver
+0003dc50: 7365 270a 2020 2020 2020 2020 6973 5573  se'.        isUs
+0003dc60: 6463 5365 7474 6c65 6420 3d20 7365 7474  dcSettled = sett
+0003dc70: 6c65 203d 3d20 2755 5344 4327 0a20 2020  le == 'USDC'.   
+0003dc80: 2020 2020 2069 734c 696e 6561 7253 6574       isLinearSet
+0003dc90: 746c 6520 3d20 6973 5573 6463 5365 7474  tle = isUsdcSett
+0003dca0: 6c65 6420 6f72 2028 7365 7474 6c65 203d  led or (settle =
+0003dcb0: 3d20 2755 5344 5427 290a 2020 2020 2020  = 'USDT').      
+0003dcc0: 2020 6966 2069 7349 6e76 6572 7365 2061    if isInverse a
+0003dcd0: 6e64 2069 734c 696e 6561 7253 6574 746c  nd isLinearSettl
+0003dce0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+0003dcf0: 6169 7365 2041 7267 756d 656e 7473 5265  aise ArgumentsRe
+0003dd00: 7175 6972 6564 2873 656c 662e 6964 202b  quired(self.id +
+0003dd10: 2027 2066 6574 6368 4f72 6465 7273 2077   ' fetchOrders w
+0003dd20: 6974 6820 696e 7665 7273 6520 7375 6254  ith inverse subT
+0003dd30: 7970 6520 7265 7175 6972 6573 2073 6574  ype requires set
+0003dd40: 746c 6520 746f 206e 6f74 2062 6520 5553  tle to not be US
+0003dd50: 4454 206f 7220 5553 4443 2729 0a20 2020  DT or USDC').   
+0003dd60: 2020 2020 2074 7970 652c 2071 7565 7279       type, query
+0003dd70: 203d 2073 656c 662e 6861 6e64 6c65 5f6d   = self.handle_m
+0003dd80: 6172 6b65 745f 7479 7065 5f61 6e64 5f70  arket_type_and_p
+0003dd90: 6172 616d 7328 2766 6574 6368 4f72 6465  arams('fetchOrde
+0003dda0: 7273 272c 206d 6172 6b65 742c 2070 6172  rs', market, par
+0003ddb0: 616d 7329 0a20 2020 2020 2020 2065 6e61  ams).        ena
+0003ddc0: 626c 6555 6e69 6669 6564 4d61 7267 696e  bleUnifiedMargin
+0003ddd0: 2c20 656e 6162 6c65 556e 6966 6965 6441  , enableUnifiedA
+0003dde0: 6363 6f75 6e74 203d 2073 656c 662e 6973  ccount = self.is
+0003ddf0: 5f75 6e69 6669 6564 5f65 6e61 626c 6564  _unified_enabled
+0003de00: 2829 0a20 2020 2020 2020 2069 6620 656e  ().        if en
+0003de10: 6162 6c65 556e 6966 6965 6441 6363 6f75  ableUnifiedAccou
+0003de20: 6e74 2061 6e64 206e 6f74 2069 7349 6e76  nt and not isInv
+0003de30: 6572 7365 3a0a 2020 2020 2020 2020 2020  erse:.          
+0003de40: 2020 7265 7475 726e 2073 656c 662e 6665    return self.fe
+0003de50: 7463 685f 756e 6966 6965 645f 6163 636f  tch_unified_acco
+0003de60: 756e 745f 6f72 6465 7273 2873 796d 626f  unt_orders(symbo
+0003de70: 6c2c 2073 696e 6365 2c20 6c69 6d69 742c  l, since, limit,
+0003de80: 2071 7565 7279 290a 2020 2020 2020 2020   query).        
+0003de90: 656c 6966 2074 7970 6520 3d3d 2027 7370  elif type == 'sp
+0003dea0: 6f74 273a 0a20 2020 2020 2020 2020 2020  ot':.           
+0003deb0: 2072 6169 7365 204e 6f74 5375 7070 6f72   raise NotSuppor
+0003dec0: 7465 6428 7365 6c66 2e69 6420 2b20 2720  ted(self.id + ' 
+0003ded0: 6665 7463 684f 7264 6572 7328 2920 6f6e  fetchOrders() on
+0003dee0: 6c79 2073 7570 706f 7274 2027 202b 2074  ly support ' + t
+0003def0: 7970 6520 2b20 2720 6d61 726b 6574 7320  ype + ' markets 
+0003df00: 666f 7220 756e 6966 6965 6420 7472 6164  for unified trad
+0003df10: 6520 6163 636f 756e 742c 2075 7365 2065  e account, use e
+0003df20: 7863 6861 6e67 652e 6665 7463 685f 6f70  xchange.fetch_op
+0003df30: 656e 5f6f 7264 6572 7328 2920 616e 6420  en_orders() and 
+0003df40: 6578 6368 616e 6765 2e66 6574 6368 436c  exchange.fetchCl
+0003df50: 6f73 6564 4f72 6465 7273 2829 2069 6e73  osedOrders() ins
+0003df60: 7465 6164 2729 0a20 2020 2020 2020 2065  tead').        e
+0003df70: 6c69 6620 656e 6162 6c65 556e 6966 6965  lif enableUnifie
+0003df80: 644d 6172 6769 6e20 616e 6420 6e6f 7420  dMargin and not 
+0003df90: 6973 496e 7665 7273 653a 0a20 2020 2020  isInverse:.     
+0003dfa0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+0003dfb0: 6c66 2e66 6574 6368 5f75 6e69 6669 6564  lf.fetch_unified
+0003dfc0: 5f6d 6172 6769 6e5f 6f72 6465 7273 2873  _margin_orders(s
+0003dfd0: 796d 626f 6c2c 2073 696e 6365 2c20 6c69  ymbol, since, li
+0003dfe0: 6d69 742c 2071 7565 7279 290a 2020 2020  mit, query).    
+0003dff0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0003e000: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+0003e010: 662e 6665 7463 685f 6465 7269 7661 7469  f.fetch_derivati
+0003e020: 7665 735f 6f72 6465 7273 2873 796d 626f  ves_orders(symbo
+0003e030: 6c2c 2073 696e 6365 2c20 6c69 6d69 742c  l, since, limit,
+0003e040: 2071 7565 7279 290a 0a20 2020 2064 6566   query)..    def
+0003e050: 2066 6574 6368 5f73 706f 745f 636c 6f73   fetch_spot_clos
+0003e060: 6564 5f6f 7264 6572 7328 7365 6c66 2c20  ed_orders(self, 
+0003e070: 7379 6d62 6f6c 3a20 4f70 7469 6f6e 616c  symbol: Optional
+0003e080: 5b73 7472 5d20 3d20 4e6f 6e65 2c20 7369  [str] = None, si
+0003e090: 6e63 653a 204f 7074 696f 6e61 6c5b 696e  nce: Optional[in
+0003e0a0: 745d 203d 204e 6f6e 652c 206c 696d 6974  t] = None, limit
+0003e0b0: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
+0003e0c0: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
+0003e0d0: 7d29 3a0a 2020 2020 2020 2020 7365 6c66  }):.        self
+0003e0e0: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
+0003e0f0: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
+0003e100: 204e 6f6e 650a 2020 2020 2020 2020 6966   None.        if
+0003e110: 2073 796d 626f 6c20 6973 206e 6f74 204e   symbol is not N
+0003e120: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+0003e130: 206d 6172 6b65 7420 3d20 7365 6c66 2e6d   market = self.m
+0003e140: 6172 6b65 7428 7379 6d62 6f6c 290a 2020  arket(symbol).  
+0003e150: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
+0003e160: 7b7d 0a20 2020 2020 2020 2069 6620 7379  {}.        if sy
+0003e170: 6d62 6f6c 2069 7320 6e6f 7420 4e6f 6e65  mbol is not None
+0003e180: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+0003e190: 7175 6573 745b 2773 796d 626f 6c27 5d20  quest['symbol'] 
+0003e1a0: 3d20 6d61 726b 6574 5b27 6964 275d 0a20  = market['id']. 
+0003e1b0: 2020 2020 2020 2069 6620 6c69 6d69 7420         if limit 
+0003e1c0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0003e1d0: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0003e1e0: 5b27 6c69 6d69 7427 5d20 3d20 6c69 6d69  ['limit'] = limi
+0003e1f0: 740a 2020 2020 2020 2020 6966 2073 696e  t.        if sin
+0003e200: 6365 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ce is not None:.
+0003e210: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0003e220: 6573 745b 2773 7461 7274 5469 6d65 275d  est['startTime']
+0003e230: 203d 2073 696e 6365 0a20 2020 2020 2020   = since.       
+0003e240: 2072 6573 706f 6e73 6520 3d20 7365 6c66   response = self
+0003e250: 2e70 7269 7661 7465 4765 7453 706f 7456  .privateGetSpotV
+0003e260: 3350 7269 7661 7465 4869 7374 6f72 794f  3PrivateHistoryO
+0003e270: 7264 6572 7328 7365 6c66 2e65 7874 656e  rders(self.exten
+0003e280: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
+0003e290: 7329 290a 2020 2020 2020 2020 7265 7375  s)).        resu
+0003e2a0: 6c74 203d 2073 656c 662e 7361 6665 5f76  lt = self.safe_v
+0003e2b0: 616c 7565 2872 6573 706f 6e73 652c 2027  alue(response, '
+0003e2c0: 7265 7375 6c74 272c 207b 7d29 0a20 2020  result', {}).   
+0003e2d0: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+0003e2e0: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+0003e2f0: 2020 2020 2020 2022 7265 7443 6f64 6522         "retCode"
+0003e300: 3a20 2230 222c 0a20 2020 2020 2020 2023  : "0",.        #
+0003e310: 2020 2020 2020 2020 2272 6574 4d73 6722          "retMsg"
+0003e320: 3a20 224f 4b22 2c0a 2020 2020 2020 2020  : "OK",.        
+0003e330: 2320 2020 2020 2020 2022 7265 7375 6c74  #        "result
+0003e340: 223a 207b 0a20 2020 2020 2020 2023 2020  ": {.        #  
+0003e350: 2020 2020 2020 2020 2020 226c 6973 7422            "list"
+0003e360: 3a20 5b0a 2020 2020 2020 2020 2320 2020  : [.        #   
+0003e370: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
+0003e380: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003e390: 2020 2020 2020 2020 2020 2020 2261 6363              "acc
+0003e3a0: 6f75 6e74 4964 223a 2022 3133 3338 3034  ountId": "133804
+0003e3b0: 3334 222c 0a20 2020 2020 2020 2023 2020  34",.        #  
+0003e3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003e3d0: 2020 2273 796d 626f 6c22 3a20 2241 4156    "symbol": "AAV
+0003e3e0: 4555 5344 5422 2c0a 2020 2020 2020 2020  EUSDT",.        
+0003e3f0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0003e400: 2020 2020 2022 6f72 6465 724c 696e 6b49       "orderLinkI
+0003e410: 6422 3a20 2231 3636 3636 3937 3834 3739  d": "16666978479
+0003e420: 3636 3630 3422 2c0a 2020 2020 2020 2020  66604",.        
+0003e430: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0003e440: 2020 2020 2022 6f72 6465 7249 6422 3a20       "orderId": 
+0003e450: 2231 3237 3437 3438 3337 3335 3934 3832  "127474837359482
+0003e460: 3832 3838 222c 0a20 2020 2020 2020 2023  8288",.        #
+0003e470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003e480: 2020 2020 226f 7264 6572 5072 6963 6522      "orderPrice"
+0003e490: 3a20 2238 3022 2c0a 2020 2020 2020 2020  : "80",.        
+0003e4a0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0003e4b0: 2020 2020 2022 6f72 6465 7251 7479 223a       "orderQty":
+0003e4c0: 2022 302e 3131 222c 0a20 2020 2020 2020   "0.11",.       
+0003e4d0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0003e4e0: 2020 2020 2020 2265 7865 6351 7479 223a        "execQty":
+0003e4f0: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
+0003e500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003e510: 2020 2022 6375 6d6d 756c 6174 6976 6551     "cummulativeQ
+0003e520: 756f 7465 5174 7922 3a20 2230 222c 0a20  uoteQty": "0",. 
+0003e530: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003e540: 2020 2020 2020 2020 2020 2020 2261 7667              "avg
+0003e550: 5072 6963 6522 3a20 2230 222c 0a20 2020  Price": "0",.   
+0003e560: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003e570: 2020 2020 2020 2020 2020 2273 7461 7475            "statu
+0003e580: 7322 3a20 2243 414e 4345 4c45 4422 2c0a  s": "CANCELED",.
+0003e590: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003e5a0: 2020 2020 2020 2020 2020 2020 2022 7469               "ti
+0003e5b0: 6d65 496e 466f 7263 6522 3a20 2247 5443  meInForce": "GTC
+0003e5c0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0003e5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003e5e0: 226f 7264 6572 5479 7065 223a 2022 4c49  "orderType": "LI
+0003e5f0: 4d49 5422 2c0a 2020 2020 2020 2020 2320  MIT",.        # 
+0003e600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003e610: 2020 2022 7369 6465 223a 2022 4255 5922     "side": "BUY"
+0003e620: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003e630: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0003e640: 7374 6f70 5072 6963 6522 3a20 2230 2e30  stopPrice": "0.0
+0003e650: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0003e660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003e670: 2269 6365 6265 7267 5174 7922 3a20 2230  "icebergQty": "0
+0003e680: 2e30 222c 0a20 2020 2020 2020 2023 2020  .0",.        #  
+0003e690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003e6a0: 2020 2263 7265 6174 6554 696d 6522 3a20    "createTime": 
+0003e6b0: 2231 3636 3636 3937 3834 3739 3732 222c  "1666697847972",
+0003e6c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003e6d0: 2020 2020 2020 2020 2020 2020 2020 2275                "u
+0003e6e0: 7064 6174 6554 696d 6522 3a20 2231 3636  pdateTime": "166
+0003e6f0: 3636 3937 3836 3538 3039 222c 0a20 2020  6697865809",.   
+0003e700: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003e710: 2020 2020 2020 2020 2020 2269 7357 6f72            "isWor
+0003e720: 6b69 6e67 223a 2022 3122 2c0a 2020 2020  king": "1",.    
+0003e730: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0003e740: 2020 2020 2020 2020 2022 6f72 6465 7243           "orderC
+0003e750: 6174 6567 6f72 7922 3a20 2230 220a 2020  ategory": "0".  
+0003e760: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0003e770: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
+0003e780: 2020 2320 2020 2020 2020 2020 2020 205d    #            ]
+0003e790: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003e7a0: 2020 7d2c 0a20 2020 2020 2020 2023 2020    },.        #  
+0003e7b0: 2020 2020 2020 2272 6574 4578 7449 6e66        "retExtInf
+0003e7c0: 6f22 3a20 6e75 6c6c 2c0a 2020 2020 2020  o": null,.      
+0003e7d0: 2020 2320 2020 2020 2020 2022 7469 6d65    #        "time
+0003e7e0: 223a 2022 3136 3636 3733 3232 3837 3538  ": "166673228758
+0003e7f0: 3822 0a20 2020 2020 2020 2023 2020 2020  8".        #    
+0003e800: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
+0003e810: 2020 2020 6f72 6465 7273 203d 2073 656c      orders = sel
+0003e820: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
+0003e830: 756c 742c 2027 6c69 7374 272c 205b 5d29  ult, 'list', [])
+0003e840: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0003e850: 7365 6c66 2e70 6172 7365 5f6f 7264 6572  self.parse_order
+0003e860: 7328 6f72 6465 7273 2c20 6d61 726b 6574  s(orders, market
+0003e870: 2c20 7369 6e63 652c 206c 696d 6974 290a  , since, limit).
+0003e880: 0a20 2020 2064 6566 2066 6574 6368 5f63  .    def fetch_c
+0003e890: 6c6f 7365 645f 6f72 6465 7273 2873 656c  losed_orders(sel
+0003e8a0: 662c 2073 796d 626f 6c3a 204f 7074 696f  f, symbol: Optio
+0003e8b0: 6e61 6c5b 7374 725d 203d 204e 6f6e 652c  nal[str] = None,
+0003e8c0: 2073 696e 6365 3a20 4f70 7469 6f6e 616c   since: Optional
+0003e8d0: 5b69 6e74 5d20 3d20 4e6f 6e65 2c20 6c69  [int] = None, li
+0003e8e0: 6d69 743a 204f 7074 696f 6e61 6c5b 696e  mit: Optional[in
+0003e8f0: 745d 203d 204e 6f6e 652c 2070 6172 616d  t] = None, param
+0003e900: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
+0003e910: 2222 0a20 2020 2020 2020 2066 6574 6368  "".        fetch
+0003e920: 6573 2069 6e66 6f72 6d61 7469 6f6e 206f  es information o
+0003e930: 6e20 6d75 6c74 6970 6c65 2063 6c6f 7365  n multiple close
+0003e940: 6420 6f72 6465 7273 206d 6164 6520 6279  d orders made by
+0003e950: 2074 6865 2075 7365 720a 2020 2020 2020   the user.      
+0003e960: 2020 3a70 6172 616d 2073 7472 7c4e 6f6e    :param str|Non
+0003e970: 6520 7379 6d62 6f6c 3a20 756e 6966 6965  e symbol: unifie
+0003e980: 6420 6d61 726b 6574 2073 796d 626f 6c20  d market symbol 
+0003e990: 6f66 2074 6865 206d 6172 6b65 7420 6f72  of the market or
+0003e9a0: 6465 7273 2077 6572 6520 6d61 6465 2069  ders were made i
+0003e9b0: 6e0a 2020 2020 2020 2020 3a70 6172 616d  n.        :param
+0003e9c0: 2069 6e74 7c4e 6f6e 6520 7369 6e63 653a   int|None since:
+0003e9d0: 2074 6865 2065 6172 6c69 6573 7420 7469   the earliest ti
+0003e9e0: 6d65 2069 6e20 6d73 2074 6f20 6665 7463  me in ms to fetc
+0003e9f0: 6820 6f72 6465 7273 2066 6f72 0a20 2020  h orders for.   
+0003ea00: 2020 2020 203a 7061 7261 6d20 696e 747c       :param int|
+0003ea10: 4e6f 6e65 206c 696d 6974 3a20 7468 6520  None limit: the 
+0003ea20: 6d61 7869 6d75 6d20 6e75 6d62 6572 206f  maximum number o
+0003ea30: 6620 206f 7264 6520 7374 7275 6374 7572  f  orde structur
+0003ea40: 6573 2074 6f20 7265 7472 6965 7665 0a20  es to retrieve. 
+0003ea50: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
+0003ea60: 6374 2070 6172 616d 733a 2065 7874 7261  ct params: extra
+0003ea70: 2070 6172 616d 6574 6572 7320 7370 6563   parameters spec
+0003ea80: 6966 6963 2074 6f20 7468 6520 6279 6269  ific to the bybi
+0003ea90: 7420 6170 6920 656e 6470 6f69 6e74 0a20  t api endpoint. 
+0003eaa0: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
+0003eab0: 5b64 6963 745d 3a20 6120 6c69 7374 206f  [dict]: a list o
+0003eac0: 6620 606f 7264 6572 2073 7472 7563 7475  f `order structu
+0003ead0: 7265 7320 3c68 7474 7073 3a2f 2f64 6f63  res <https://doc
+0003eae0: 732e 6363 7874 2e63 6f6d 2f23 2f3f 6964  s.ccxt.com/#/?id
+0003eaf0: 3d6f 7264 6572 2d73 7472 7563 7475 7265  =order-structure
+0003eb00: 3e60 0a20 2020 2020 2020 2022 2222 0a20  >`.        """. 
+0003eb10: 2020 2020 2020 2073 656c 662e 6c6f 6164         self.load
+0003eb20: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
+0003eb30: 2020 206d 6172 6b65 7420 3d20 4e6f 6e65     market = None
+0003eb40: 0a20 2020 2020 2020 2069 6620 7379 6d62  .        if symb
+0003eb50: 6f6c 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ol is not None:.
+0003eb60: 2020 2020 2020 2020 2020 2020 6d61 726b              mark
+0003eb70: 6574 203d 2073 656c 662e 6d61 726b 6574  et = self.market
+0003eb80: 2873 796d 626f 6c29 0a20 2020 2020 2020  (symbol).       
+0003eb90: 2074 7970 6520 3d20 4e6f 6e65 0a20 2020   type = None.   
+0003eba0: 2020 2020 2074 7970 652c 2070 6172 616d       type, param
+0003ebb0: 7320 3d20 7365 6c66 2e68 616e 646c 655f  s = self.handle_
+0003ebc0: 6d61 726b 6574 5f74 7970 655f 616e 645f  market_type_and_
+0003ebd0: 7061 7261 6d73 2827 6665 7463 6843 6c6f  params('fetchClo
+0003ebe0: 7365 644f 7264 6572 7327 2c20 6d61 726b  sedOrders', mark
+0003ebf0: 6574 2c20 7061 7261 6d73 290a 2020 2020  et, params).    
+0003ec00: 2020 2020 656e 6162 6c65 556e 6966 6965      enableUnifie
+0003ec10: 6420 3d20 7365 6c66 2e69 735f 756e 6966  d = self.is_unif
+0003ec20: 6965 645f 656e 6162 6c65 6428 290a 2020  ied_enabled().  
+0003ec30: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
+0003ec40: 7b7d 0a20 2020 2020 2020 2069 6620 2874  {}.        if (t
+0003ec50: 7970 6520 3d3d 2027 7370 6f74 2729 2061  ype == 'spot') a
+0003ec60: 6e64 206e 6f74 2065 6e61 626c 6555 6e69  nd not enableUni
+0003ec70: 6669 6564 5b31 5d3a 0a20 2020 2020 2020  fied[1]:.       
+0003ec80: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+0003ec90: 2e66 6574 6368 5f73 706f 745f 636c 6f73  .fetch_spot_clos
+0003eca0: 6564 5f6f 7264 6572 7328 7379 6d62 6f6c  ed_orders(symbol
+0003ecb0: 2c20 7369 6e63 652c 206c 696d 6974 2c20  , since, limit, 
+0003ecc0: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
+0003ecd0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0003ece0: 2020 7265 7175 6573 745b 276f 7264 6572    request['order
+0003ecf0: 5374 6174 7573 275d 203d 2027 4669 6c6c  Status'] = 'Fill
+0003ed00: 6564 270a 2020 2020 2020 2020 7265 7475  ed'.        retu
+0003ed10: 726e 2073 656c 662e 6665 7463 685f 6f72  rn self.fetch_or
+0003ed20: 6465 7273 2873 796d 626f 6c2c 2073 696e  ders(symbol, sin
+0003ed30: 6365 2c20 6c69 6d69 742c 2073 656c 662e  ce, limit, self.
+0003ed40: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
+0003ed50: 7061 7261 6d73 2929 0a0a 2020 2020 6465  params))..    de
+0003ed60: 6620 6665 7463 685f 6361 6e63 656c 6564  f fetch_canceled
+0003ed70: 5f6f 7264 6572 7328 7365 6c66 2c20 7379  _orders(self, sy
+0003ed80: 6d62 6f6c 3a20 4f70 7469 6f6e 616c 5b73  mbol: Optional[s
+0003ed90: 7472 5d20 3d20 4e6f 6e65 2c20 7369 6e63  tr] = None, sinc
+0003eda0: 653a 204f 7074 696f 6e61 6c5b 696e 745d  e: Optional[int]
+0003edb0: 203d 204e 6f6e 652c 206c 696d 6974 3a20   = None, limit: 
+0003edc0: 4f70 7469 6f6e 616c 5b69 6e74 5d20 3d20  Optional[int] = 
+0003edd0: 4e6f 6e65 2c20 7061 7261 6d73 3d7b 7d29  None, params={})
+0003ede0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+0003edf0: 2020 2020 2020 6665 7463 6865 7320 696e        fetches in
+0003ee00: 666f 726d 6174 696f 6e20 6f6e 206d 756c  formation on mul
+0003ee10: 7469 706c 6520 6361 6e63 656c 6564 206f  tiple canceled o
+0003ee20: 7264 6572 7320 6d61 6465 2062 7920 7468  rders made by th
+0003ee30: 6520 7573 6572 0a20 2020 2020 2020 203a  e user.        :
+0003ee40: 7061 7261 6d20 7374 7220 7379 6d62 6f6c  param str symbol
+0003ee50: 3a20 756e 6966 6965 6420 6d61 726b 6574  : unified market
+0003ee60: 2073 796d 626f 6c20 6f66 2074 6865 206d   symbol of the m
+0003ee70: 6172 6b65 7420 6f72 6465 7273 2077 6572  arket orders wer
+0003ee80: 6520 6d61 6465 2069 6e0a 2020 2020 2020  e made in.      
+0003ee90: 2020 3a70 6172 616d 2069 6e74 7c4e 6f6e    :param int|Non
+0003eea0: 6520 7369 6e63 653a 2074 696d 6573 7461  e since: timesta
+0003eeb0: 6d70 2069 6e20 6d73 206f 6620 7468 6520  mp in ms of the 
+0003eec0: 6561 726c 6965 7374 206f 7264 6572 2c20  earliest order, 
+0003eed0: 6465 6661 756c 7420 6973 204e 6f6e 650a  default is None.
+0003eee0: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+0003eef0: 6e74 7c4e 6f6e 6520 6c69 6d69 743a 206d  nt|None limit: m
+0003ef00: 6178 206e 756d 6265 7220 6f66 206f 7264  ax number of ord
+0003ef10: 6572 7320 746f 2072 6574 7572 6e2c 2064  ers to return, d
+0003ef20: 6566 6175 6c74 2069 7320 4e6f 6e65 0a20  efault is None. 
+0003ef30: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
+0003ef40: 6374 2070 6172 616d 733a 2065 7874 7261  ct params: extra
+0003ef50: 2070 6172 616d 6574 6572 7320 7370 6563   parameters spec
+0003ef60: 6966 6963 2074 6f20 7468 6520 6279 6269  ific to the bybi
+0003ef70: 7420 6170 6920 656e 6470 6f69 6e74 0a20  t api endpoint. 
+0003ef80: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
+0003ef90: 6469 6374 3a20 6120 6c69 7374 206f 6620  dict: a list of 
+0003efa0: 606f 7264 6572 2073 7472 7563 7475 7265  `order structure
+0003efb0: 7320 3c68 7474 7073 3a2f 2f64 6f63 732e  s <https://docs.
+0003efc0: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d6f  ccxt.com/#/?id=o
+0003efd0: 7264 6572 2d73 7472 7563 7475 7265 3e60  rder-structure>`
+0003efe0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0003eff0: 2020 2020 2073 656c 662e 6c6f 6164 5f6d       self.load_m
+0003f000: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
+0003f010: 206d 6172 6b65 7420 3d20 4e6f 6e65 0a20   market = None. 
+0003f020: 2020 2020 2020 2069 6620 7379 6d62 6f6c         if symbol
+0003f030: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0003f040: 2020 2020 2020 2020 2020 6d61 726b 6574            market
+0003f050: 203d 2073 656c 662e 6d61 726b 6574 2873   = self.market(s
+0003f060: 796d 626f 6c29 0a20 2020 2020 2020 2074  ymbol).        t
+0003f070: 7970 6520 3d20 4e6f 6e65 0a20 2020 2020  ype = None.     
+0003f080: 2020 2074 7970 652c 2070 6172 616d 7320     type, params 
+0003f090: 3d20 7365 6c66 2e68 616e 646c 655f 6d61  = self.handle_ma
+0003f0a0: 726b 6574 5f74 7970 655f 616e 645f 7061  rket_type_and_pa
+0003f0b0: 7261 6d73 2827 6665 7463 6843 616e 6365  rams('fetchCance
+0003f0c0: 6c65 644f 7264 6572 7327 2c20 6d61 726b  ledOrders', mark
+0003f0d0: 6574 2c20 7061 7261 6d73 290a 2020 2020  et, params).    
+0003f0e0: 2020 2020 656e 6162 6c65 556e 6966 6965      enableUnifie
+0003f0f0: 6420 3d20 7365 6c66 2e69 735f 756e 6966  d = self.is_unif
+0003f100: 6965 645f 656e 6162 6c65 6428 290a 2020  ied_enabled().  
+0003f110: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
+0003f120: 7b7d 0a20 2020 2020 2020 2069 6620 2874  {}.        if (t
+0003f130: 7970 6520 3d3d 2027 7370 6f74 2729 2061  ype == 'spot') a
+0003f140: 6e64 206e 6f74 2065 6e61 626c 6555 6e69  nd not enableUni
+0003f150: 6669 6564 5b31 5d3a 0a20 2020 2020 2020  fied[1]:.       
+0003f160: 2020 2020 2072 6169 7365 204e 6f74 5375       raise NotSu
+0003f170: 7070 6f72 7465 6428 7365 6c66 2e69 6420  pported(self.id 
+0003f180: 2b20 2720 6665 7463 6843 616e 6365 6c65  + ' fetchCancele
+0003f190: 644f 7264 6572 7328 2920 6f6e 6c79 2061  dOrders() only a
+0003f1a0: 6c6c 6f77 2073 706f 7420 6d61 726b 6574  llow spot market
+0003f1b0: 206f 7264 6572 7320 666f 7220 756e 6966   orders for unif
+0003f1c0: 6965 6420 7472 6164 6520 6163 636f 756e  ied trade accoun
+0003f1d0: 742c 2075 7365 2065 7863 6861 6e67 652e  t, use exchange.
+0003f1e0: 6665 7463 685f 6f70 656e 5f6f 7264 6572  fetch_open_order
+0003f1f0: 7328 2920 616e 6420 6578 6368 616e 6765  s() and exchange
+0003f200: 2e66 6574 6368 436c 6f73 6564 4f72 6465  .fetchClosedOrde
+0003f210: 7273 2829 2069 6e73 7465 6164 2729 0a20  rs() instead'). 
+0003f220: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0003f230: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0003f240: 5b27 6f72 6465 7253 7461 7475 7327 5d20  ['orderStatus'] 
+0003f250: 3d20 2743 616e 6365 6c6c 6564 270a 2020  = 'Cancelled'.  
+0003f260: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+0003f270: 662e 6665 7463 685f 6f72 6465 7273 2873  f.fetch_orders(s
+0003f280: 796d 626f 6c2c 2073 696e 6365 2c20 6c69  ymbol, since, li
+0003f290: 6d69 742c 2073 656c 662e 6578 7465 6e64  mit, self.extend
+0003f2a0: 2872 6571 7565 7374 2c20 7061 7261 6d73  (request, params
+0003f2b0: 2929 0a0a 2020 2020 6465 6620 6665 7463  ))..    def fetc
+0003f2c0: 685f 756e 6966 6965 645f 6163 636f 756e  h_unified_accoun
+0003f2d0: 745f 6f70 656e 5f6f 7264 6572 7328 7365  t_open_orders(se
+0003f2e0: 6c66 2c20 7379 6d62 6f6c 3a20 4f70 7469  lf, symbol: Opti
+0003f2f0: 6f6e 616c 5b73 7472 5d20 3d20 4e6f 6e65  onal[str] = None
+0003f300: 2c20 7369 6e63 653a 204f 7074 696f 6e61  , since: Optiona
+0003f310: 6c5b 696e 745d 203d 204e 6f6e 652c 206c  l[int] = None, l
+0003f320: 696d 6974 3a20 4f70 7469 6f6e 616c 5b69  imit: Optional[i
+0003f330: 6e74 5d20 3d20 4e6f 6e65 2c20 7061 7261  nt] = None, para
+0003f340: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
+0003f350: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
+0003f360: 7328 290a 2020 2020 2020 2020 7265 7175  s().        requ
+0003f370: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
+0003f380: 2020 2020 2320 2773 796d 626f 6c27 3a20      # 'symbol': 
+0003f390: 6d61 726b 6574 5b27 6964 275d 2c0a 2020  market['id'],.  
+0003f3a0: 2020 2020 2020 2020 2020 2320 2763 6174            # 'cat
+0003f3b0: 6567 6f72 7927 2c20 5479 7065 206f 6620  egory', Type of 
+0003f3c0: 6465 7269 7661 7469 7665 7320 7072 6f64  derivatives prod
+0003f3d0: 7563 743a 206c 696e 6561 7220 6f72 206f  uct: linear or o
+0003f3e0: 7074 696f 6e2e 0a20 2020 2020 2020 2020  ption..         
+0003f3f0: 2020 2023 2027 6261 7365 436f 696e 272c     # 'baseCoin',
+0003f400: 2042 6173 6520 636f 696e 2e20 5768 656e   Base coin. When
+0003f410: 2063 6174 6567 6f72 793d 6f70 7469 6f6e   category=option
+0003f420: 2e20 4966 206e 6f74 2070 6173 7365 642c  . If not passed,
+0003f430: 2042 5443 2062 7920 6465 6661 756c 743b   BTC by default;
+0003f440: 2077 6865 6e20 6361 7465 676f 7279 3d6c   when category=l
+0003f450: 696e 6561 722c 2069 6620 4254 4320 7061  inear, if BTC pa
+0003f460: 7373 6564 2c20 4254 4350 4552 5020 2620  ssed, BTCPERP & 
+0003f470: 4254 4355 5344 5420 7265 7475 726e 6564  BTCUSDT returned
+0003f480: 2e0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+0003f490: 2773 6574 746c 6543 6f69 6e27 2c20 5365  'settleCoin', Se
+0003f4a0: 7474 6c65 2063 6f69 6e2e 2046 6f72 206c  ttle coin. For l
+0003f4b0: 696e 6561 722c 2065 6974 6865 7220 7379  inear, either sy
+0003f4c0: 6d62 6f6c 206f 7220 7365 7474 6c65 436f  mbol or settleCo
+0003f4d0: 696e 2069 7320 7265 7175 6972 6564 0a20  in is required. 
+0003f4e0: 2020 2020 2020 2020 2020 2023 2027 6f72             # 'or
+0003f4f0: 6465 7249 6427 2c20 4f72 6465 7220 4944  derId', Order ID
+0003f500: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+0003f510: 6f72 6465 724c 696e 6b49 6427 2c20 556e  orderLinkId', Un
+0003f520: 6971 7565 2075 7365 722d 7365 7420 6f72  ique user-set or
+0003f530: 6465 7220 4944 0a20 2020 2020 2020 2020  der ID.         
+0003f540: 2020 2023 2027 6f72 6465 7246 696c 7465     # 'orderFilte
+0003f550: 7227 2c20 436f 6e64 6974 696f 6e61 6c20  r', Conditional 
+0003f560: 6f72 6465 7220 6f72 2061 6374 6976 6520  order or active 
+0003f570: 6f72 6465 720a 2020 2020 2020 2020 2020  order.          
+0003f580: 2020 2320 276c 696d 6974 273a 206e 756d    # 'limit': num
+0003f590: 6265 722c 2044 6174 6120 7175 616e 7469  ber, Data quanti
+0003f5a0: 7479 2070 6572 2070 6167 653a 204d 6178  ty per page: Max
+0003f5b0: 2064 6174 6120 7661 6c75 6520 7065 7220   data value per 
+0003f5c0: 7061 6765 2069 7320 3530 2c20 616e 6420  page is 50, and 
+0003f5d0: 6465 6661 756c 7420 7661 6c75 6520 6174  default value at
+0003f5e0: 2032 302e 0a20 2020 2020 2020 2020 2020   20..           
+0003f5f0: 2023 2027 6375 7273 6f72 272c 2041 5049   # 'cursor', API
+0003f600: 2070 6173 732d 7468 726f 7567 682e 2061   pass-through. a
+0003f610: 6363 6f75 6e74 5479 7065 202b 2063 6174  ccountType + cat
+0003f620: 6567 6f72 7920 2b20 6375 7273 6f72 202b  egory + cursor +
+0003f630: 2e20 4966 2069 6e63 6f6e 7369 7374 656e  . If inconsisten
+0003f640: 742c 2074 6865 2066 6f6c 6c6f 7769 6e67  t, the following
+0003f650: 2073 686f 756c 6420 6265 2072 6574 7572   should be retur
+0003f660: 6e65 643a 2054 6865 2061 6363 6f75 6e74  ned: The account
+0003f670: 2074 7970 6520 646f 6573 206e 6f74 206d   type does not m
+0003f680: 6174 6368 2074 6865 2073 6572 7669 6365  atch the service
+0003f690: 2069 6e71 7569 7279 2e0a 2020 2020 2020   inquiry..      
+0003f6a0: 2020 2020 2020 2320 276f 7065 6e4f 6e6c        # 'openOnl
+0003f6b0: 7927 3a20 302c 0a20 2020 2020 2020 207d  y': 0,.        }
+0003f6c0: 0a20 2020 2020 2020 206d 6172 6b65 7420  .        market 
+0003f6d0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2069  = None.        i
+0003f6e0: 6620 7379 6d62 6f6c 2069 7320 4e6f 6e65  f symbol is None
+0003f6f0: 3a0a 2020 2020 2020 2020 2020 2020 7479  :.            ty
+0003f700: 7065 203d 204e 6f6e 650a 2020 2020 2020  pe = None.      
+0003f710: 2020 2020 2020 7479 7065 2c20 7061 7261        type, para
+0003f720: 6d73 203d 2073 656c 662e 6861 6e64 6c65  ms = self.handle
+0003f730: 5f6d 6172 6b65 745f 7479 7065 5f61 6e64  _market_type_and
+0003f740: 5f70 6172 616d 7328 2766 6574 6368 4f70  _params('fetchOp
+0003f750: 656e 4f72 6465 7273 272c 206d 6172 6b65  enOrders', marke
+0003f760: 742c 2070 6172 616d 7329 0a20 2020 2020  t, params).     
+0003f770: 2020 2020 2020 2073 7562 5479 7065 203d         subType =
+0003f780: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
+0003f790: 2020 7375 6254 7970 652c 2070 6172 616d    subType, param
+0003f7a0: 7320 3d20 7365 6c66 2e68 616e 646c 655f  s = self.handle_
+0003f7b0: 7375 625f 7479 7065 5f61 6e64 5f70 6172  sub_type_and_par
+0003f7c0: 616d 7328 2766 6574 6368 4f70 656e 4f72  ams('fetchOpenOr
+0003f7d0: 6465 7273 272c 206d 6172 6b65 742c 2070  ders', market, p
+0003f7e0: 6172 616d 732c 2027 6c69 6e65 6172 2729  arams, 'linear')
+0003f7f0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+0003f800: 7565 7374 5b27 6361 7465 676f 7279 275d  uest['category']
+0003f810: 203d 2074 7970 650a 2020 2020 2020 2020   = type.        
+0003f820: 2020 2020 6966 2074 7970 6520 3d3d 2027      if type == '
+0003f830: 7377 6170 273a 0a20 2020 2020 2020 2020  swap':.         
+0003f840: 2020 2020 2020 2069 6620 7375 6254 7970         if subTyp
+0003f850: 6520 3d3d 2027 6c69 6e65 6172 273a 0a20  e == 'linear':. 
+0003f860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003f870: 2020 2073 656c 662e 6368 6563 6b5f 7265     self.check_re
+0003f880: 7175 6972 6564 5f73 796d 626f 6c28 2766  quired_symbol('f
+0003f890: 6574 6368 4f70 656e 4f72 6465 7273 272c  etchOpenOrders',
+0003f8a0: 2073 796d 626f 6c29 0a20 2020 2020 2020   symbol).       
+0003f8b0: 2020 2020 2020 2020 2065 6c69 6620 7375           elif su
+0003f8c0: 6254 7970 6520 3d3d 2027 696e 7665 7273  bType == 'invers
+0003f8d0: 6527 3a0a 2020 2020 2020 2020 2020 2020  e':.            
+0003f8e0: 2020 2020 2020 2020 7261 6973 6520 4e6f          raise No
+0003f8f0: 7453 7570 706f 7274 6564 2873 656c 662e  tSupported(self.
+0003f900: 6964 202b 2027 2066 6574 6368 4f70 656e  id + ' fetchOpen
+0003f910: 4f72 6465 7273 2829 2064 6f65 7320 6e6f  Orders() does no
+0003f920: 7420 616c 6c6f 7720 696e 7665 7273 6520  t allow inverse 
+0003f930: 6d61 726b 6574 206f 7264 6572 7320 666f  market orders fo
+0003f940: 7220 2720 2b20 7379 6d62 6f6c 202b 2027  r ' + symbol + '
+0003f950: 206d 6172 6b65 7473 2729 0a20 2020 2020   markets').     
+0003f960: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+0003f970: 7374 5b27 6361 7465 676f 7279 275d 203d  st['category'] =
+0003f980: 2073 7562 5479 7065 0a20 2020 2020 2020   subType.       
+0003f990: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0003f9a0: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
+0003f9b0: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
+0003f9c0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0003f9d0: 6573 745b 2773 796d 626f 6c27 5d20 3d20  est['symbol'] = 
+0003f9e0: 6d61 726b 6574 5b27 6964 275d 0a20 2020  market['id'].   
+0003f9f0: 2020 2020 2020 2020 2069 6620 6d61 726b           if mark
+0003fa00: 6574 5b27 7370 6f74 275d 3a0a 2020 2020  et['spot']:.    
+0003fa10: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0003fa20: 6573 745b 2763 6174 6567 6f72 7927 5d20  est['category'] 
+0003fa30: 3d20 2773 706f 7427 0a20 2020 2020 2020  = 'spot'.       
+0003fa40: 2020 2020 2065 6c69 6620 6d61 726b 6574       elif market
+0003fa50: 5b27 6f70 7469 6f6e 275d 3a0a 2020 2020  ['option']:.    
+0003fa60: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0003fa70: 6573 745b 2763 6174 6567 6f72 7927 5d20  est['category'] 
+0003fa80: 3d20 276f 7074 696f 6e27 0a20 2020 2020  = 'option'.     
+0003fa90: 2020 2020 2020 2065 6c69 6620 6d61 726b         elif mark
+0003faa0: 6574 5b27 6c69 6e65 6172 275d 3a0a 2020  et['linear']:.  
+0003fab0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0003fac0: 7175 6573 745b 2763 6174 6567 6f72 7927  quest['category'
+0003fad0: 5d20 3d20 276c 696e 6561 7227 0a20 2020  ] = 'linear'.   
+0003fae0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+0003faf0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0003fb00: 6169 7365 204e 6f74 5375 7070 6f72 7465  aise NotSupporte
+0003fb10: 6428 7365 6c66 2e69 6420 2b20 2720 6665  d(self.id + ' fe
+0003fb20: 7463 684f 7065 6e4f 7264 6572 7328 2920  tchOpenOrders() 
+0003fb30: 646f 6573 206e 6f74 2061 6c6c 6f77 2069  does not allow i
+0003fb40: 6e76 6572 7365 206d 6172 6b65 7420 6f72  nverse market or
+0003fb50: 6465 7273 2066 6f72 2027 202b 2073 796d  ders for ' + sym
+0003fb60: 626f 6c20 2b20 2720 6d61 726b 6574 7327  bol + ' markets'
+0003fb70: 290a 2020 2020 2020 2020 6973 5374 6f70  ).        isStop
+0003fb80: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+0003fb90: 7565 2870 6172 616d 732c 2027 7374 6f70  ue(params, 'stop
+0003fba0: 272c 2046 616c 7365 290a 2020 2020 2020  ', False).      
+0003fbb0: 2020 7061 7261 6d73 203d 2073 656c 662e    params = self.
+0003fbc0: 6f6d 6974 2870 6172 616d 732c 205b 2773  omit(params, ['s
+0003fbd0: 746f 7027 5d29 0a20 2020 2020 2020 2069  top']).        i
+0003fbe0: 6620 6973 5374 6f70 3a0a 2020 2020 2020  f isStop:.      
+0003fbf0: 2020 2020 2020 6966 206d 6172 6b65 745b        if market[
+0003fc00: 2773 706f 7427 5d3a 0a20 2020 2020 2020  'spot']:.       
+0003fc10: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0003fc20: 5b27 6f72 6465 7246 696c 7465 7227 5d20  ['orderFilter'] 
+0003fc30: 3d20 2774 7073 6c4f 7264 6572 270a 2020  = 'tpslOrder'.  
+0003fc40: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
 0003fc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003fc60: 2020 2020 2022 7472 6967 6765 7244 6972       "triggerDir
-0003fc70: 6563 7469 6f6e 223a 2030 2c0a 2020 2020  ection": 0,.    
-0003fc80: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003fc90: 2020 2020 2020 2020 2020 2269 734c 6576            "isLev
-0003fca0: 6572 6167 6522 3a20 2230 222c 0a20 2020  erage": "0",.   
-0003fcb0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0003fcc0: 2020 2020 2020 2020 2020 2022 7265 6a65             "reje
-0003fcd0: 6374 5265 6173 6f6e 223a 2022 222c 0a20  ctReason": "",. 
-0003fce0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003fcf0: 2020 2020 2020 2020 2020 2020 2022 7072               "pr
-0003fd00: 6963 6522 3a20 2231 3030 3022 2c0a 2020  ice": "1000",.  
-0003fd10: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003fd20: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
-0003fd30: 6572 4976 223a 2022 222c 0a20 2020 2020  erIv": "",.     
-0003fd40: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0003fd50: 2020 2020 2020 2020 2022 6372 6561 7465           "create
-0003fd60: 6454 696d 6522 3a20 2231 3637 3232 3137  dTime": "1672217
-0003fd70: 3734 3832 3837 222c 0a20 2020 2020 2020  748287",.       
-0003fd80: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0003fd90: 2020 2020 2020 2022 7470 5472 6967 6765         "tpTrigge
-0003fda0: 7242 7922 3a20 2222 2c0a 2020 2020 2020  rBy": "",.      
-0003fdb0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0003fdc0: 2020 2020 2020 2020 2270 6f73 6974 696f          "positio
-0003fdd0: 6e49 6478 223a 2030 2c0a 2020 2020 2020  nIdx": 0,.      
-0003fde0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0003fdf0: 2020 2020 2020 2020 2274 696d 6549 6e46          "timeInF
-0003fe00: 6f72 6365 223a 2022 4754 4322 2c0a 2020  orce": "GTC",.  
-0003fe10: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0003fe20: 2020 2020 2020 2020 2020 2020 226c 6561              "lea
-0003fe30: 7665 7356 616c 7565 223a 2022 3530 3022  vesValue": "500"
-0003fe40: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0003fe50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003fe60: 2275 7064 6174 6564 5469 6d65 223a 2022  "updatedTime": "
-0003fe70: 3136 3732 3231 3737 3438 3238 3722 2c0a  1672217748287",.
-0003fe80: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003fe90: 2020 2020 2020 2020 2020 2020 2020 2273                "s
-0003fea0: 6964 6522 3a20 2242 7579 222c 0a20 2020  ide": "Buy",.   
-0003feb0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0003fec0: 2020 2020 2020 2020 2020 2022 7472 6967             "trig
-0003fed0: 6765 7250 7269 6365 223a 2022 3135 3030  gerPrice": "1500
-0003fee0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0003fef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003ff00: 2022 6375 6d45 7865 6346 6565 223a 2022   "cumExecFee": "
-0003ff10: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+0003fc60: 7265 7175 6573 745b 276f 7264 6572 4669  request['orderFi
+0003fc70: 6c74 6572 275d 203d 2027 5374 6f70 4f72  lter'] = 'StopOr
+0003fc80: 6465 7227 0a20 2020 2020 2020 2069 6620  der'.        if 
+0003fc90: 6c69 6d69 7420 6973 206e 6f74 204e 6f6e  limit is not Non
+0003fca0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+0003fcb0: 6571 7565 7374 5b27 6c69 6d69 7427 5d20  equest['limit'] 
+0003fcc0: 3d20 6c69 6d69 740a 2020 2020 2020 2020  = limit.        
+0003fcd0: 7265 7370 6f6e 7365 203d 2073 656c 662e  response = self.
+0003fce0: 7072 6976 6174 6547 6574 5635 4f72 6465  privateGetV5Orde
+0003fcf0: 7252 6561 6c74 696d 6528 7365 6c66 2e65  rRealtime(self.e
+0003fd00: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
+0003fd10: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
+0003fd20: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+0003fd30: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0003fd40: 2020 2020 2272 6574 436f 6465 223a 2030      "retCode": 0
+0003fd50: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0003fd60: 2020 2020 2272 6574 4d73 6722 3a20 224f      "retMsg": "O
+0003fd70: 4b22 2c0a 2020 2020 2020 2020 2320 2020  K",.        #   
+0003fd80: 2020 2020 2020 2272 6573 756c 7422 3a20        "result": 
+0003fd90: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0003fda0: 2020 2020 2020 2020 226e 6578 7450 6167          "nextPag
+0003fdb0: 6543 7572 736f 7222 3a20 2231 3332 3130  eCursor": "13210
+0003fdc0: 3532 3635 3335 3336 3531 3535 3834 2533  52653536515584%3
+0003fdd0: 4131 3637 3232 3137 3734 3832 3837 2532  A1672217748287%2
+0003fde0: 4331 3332 3130 3532 3635 3335 3336 3531  C132105265353651
+0003fdf0: 3535 3834 2533 4131 3637 3232 3137 3734  5584%3A167221774
+0003fe00: 3832 3837 222c 0a20 2020 2020 2020 2023  8287",.        #
+0003fe10: 2020 2020 2020 2020 2020 2020 2022 6361               "ca
+0003fe20: 7465 676f 7279 223a 2022 7370 6f74 222c  tegory": "spot",
+0003fe30: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003fe40: 2020 2020 2020 2022 6c69 7374 223a 205b         "list": [
+0003fe50: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003fe60: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+0003fe70: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003fe80: 2020 2020 2020 2020 2020 2022 7379 6d62             "symb
+0003fe90: 6f6c 223a 2022 4554 4855 5344 5422 2c0a  ol": "ETHUSDT",.
+0003fea0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003feb0: 2020 2020 2020 2020 2020 2020 2020 226f                "o
+0003fec0: 7264 6572 5479 7065 223a 2022 4c69 6d69  rderType": "Limi
+0003fed0: 7422 2c0a 2020 2020 2020 2020 2320 2020  t",.        #   
+0003fee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003fef0: 2020 226f 7264 6572 4c69 6e6b 4964 223a    "orderLinkId":
+0003ff00: 2022 3136 3732 3231 3737 3438 3237 3736   "16722177482776
+0003ff10: 3532 222c 0a20 2020 2020 2020 2023 2020  52",.        #  
 0003ff20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003ff30: 2020 226c 6561 7665 7351 7479 223a 2022    "leavesQty": "
-0003ff40: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-0003ff50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003ff60: 2020 2273 6c54 7269 6767 6572 4279 223a    "slTriggerBy":
-0003ff70: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
-0003ff80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003ff90: 2020 2022 636c 6f73 654f 6e54 7269 6767     "closeOnTrigg
-0003ffa0: 6572 223a 2046 616c 7365 2c0a 2020 2020  er": False,.    
-0003ffb0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0003ffc0: 2020 2020 2020 2020 2020 2263 756d 4578            "cumEx
-0003ffd0: 6563 5174 7922 3a20 2230 222c 0a20 2020  ecQty": "0",.   
-0003ffe0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0003fff0: 2020 2020 2020 2020 2020 2022 7265 6475             "redu
-00040000: 6365 4f6e 6c79 223a 2046 616c 7365 2c0a  ceOnly": False,.
-00040010: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00040020: 2020 2020 2020 2020 2020 2020 2020 2271                "q
-00040030: 7479 223a 2022 302e 3522 2c0a 2020 2020  ty": "0.5",.    
-00040040: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00040050: 2020 2020 2020 2020 2020 2273 746f 704c            "stopL
-00040060: 6f73 7322 3a20 2222 2c0a 2020 2020 2020  oss": "",.      
-00040070: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00040080: 2020 2020 2020 2020 2274 7269 6767 6572          "trigger
-00040090: 4279 223a 2022 3131 3932 2e35 220a 2020  By": "1192.5".  
-000400a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000400b0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-000400c0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000400d0: 5d0a 2020 2020 2020 2020 2320 2020 2020  ].        #     
-000400e0: 2020 2020 7d2c 0a20 2020 2020 2020 2023      },.        #
-000400f0: 2020 2020 2020 2020 2022 7265 7445 7874           "retExt
-00040100: 496e 666f 223a 207b 7d2c 0a20 2020 2020  Info": {},.     
-00040110: 2020 2023 2020 2020 2020 2020 2022 7469     #         "ti
-00040120: 6d65 223a 2031 3637 3232 3139 3532 3632  me": 16722195262
-00040130: 3934 0a20 2020 2020 2020 2023 2020 2020  94.        #    
-00040140: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
-00040150: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
-00040160: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
-00040170: 7370 6f6e 7365 2c20 2772 6573 756c 7427  sponse, 'result'
-00040180: 2c20 7b7d 290a 2020 2020 2020 2020 6461  , {}).        da
-00040190: 7461 203d 2073 656c 662e 7361 6665 5f76  ta = self.safe_v
-000401a0: 616c 7565 2872 6573 756c 742c 2027 6c69  alue(result, 'li
-000401b0: 7374 272c 205b 5d29 0a20 2020 2020 2020  st', []).       
-000401c0: 2072 6574 7572 6e20 7365 6c66 2e70 6172   return self.par
-000401d0: 7365 5f6f 7264 6572 7328 6461 7461 2c20  se_orders(data, 
-000401e0: 6d61 726b 6574 2c20 7369 6e63 652c 206c  market, since, l
-000401f0: 696d 6974 290a 0a20 2020 2064 6566 2066  imit)..    def f
-00040200: 6574 6368 5f73 706f 745f 6f70 656e 5f6f  etch_spot_open_o
-00040210: 7264 6572 7328 7365 6c66 2c20 7379 6d62  rders(self, symb
-00040220: 6f6c 3a20 4f70 7469 6f6e 616c 5b73 7472  ol: Optional[str
-00040230: 5d20 3d20 4e6f 6e65 2c20 7369 6e63 653a  ] = None, since:
-00040240: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
-00040250: 204e 6f6e 652c 206c 696d 6974 3a20 4f70   None, limit: Op
-00040260: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
-00040270: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
-00040280: 2020 2020 2020 2020 7365 6c66 2e6c 6f61          self.loa
-00040290: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
-000402a0: 2020 2020 7265 7175 6573 7420 3d20 7b7d      request = {}
-000402b0: 0a20 2020 2020 2020 206d 6172 6b65 7420  .        market 
-000402c0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2069  = None.        i
-000402d0: 6620 7379 6d62 6f6c 2069 7320 6e6f 7420  f symbol is not 
-000402e0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-000402f0: 2020 6d61 726b 6574 203d 2073 656c 662e    market = self.
-00040300: 6d61 726b 6574 2873 796d 626f 6c29 0a20  market(symbol). 
-00040310: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-00040320: 7374 5b27 7379 6d62 6f6c 275d 203d 206d  st['symbol'] = m
-00040330: 6172 6b65 745b 2769 6427 5d0a 2020 2020  arket['id'].    
-00040340: 2020 2020 6966 206c 696d 6974 2069 7320      if limit is 
-00040350: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00040360: 2020 2020 2020 7265 7175 6573 745b 276c        request['l
-00040370: 696d 6974 275d 203d 206c 696d 6974 0a20  imit'] = limit. 
-00040380: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
-00040390: 3d20 7365 6c66 2e70 7269 7661 7465 4765  = self.privateGe
-000403a0: 7453 706f 7456 3350 7269 7661 7465 4f70  tSpotV3PrivateOp
-000403b0: 656e 4f72 6465 7273 2873 656c 662e 6578  enOrders(self.ex
-000403c0: 7465 6e64 2872 6571 7565 7374 2c20 7061  tend(request, pa
-000403d0: 7261 6d73 2929 0a20 2020 2020 2020 2023  rams)).        #
-000403e0: 0a20 2020 2020 2020 2023 2020 2020 7b0a  .        #    {.
-000403f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00040400: 2020 2272 6574 436f 6465 223a 2022 3022    "retCode": "0"
-00040410: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00040420: 2020 2020 2272 6574 4d73 6722 3a20 224f      "retMsg": "O
-00040430: 4b22 2c0a 2020 2020 2020 2020 2320 2020  K",.        #   
-00040440: 2020 2020 2020 2272 6573 756c 7422 3a20        "result": 
-00040450: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-00040460: 2020 2020 2020 2020 226c 6973 7422 3a20          "list": 
-00040470: 5b0a 2020 2020 2020 2020 2320 2020 2020  [.        #     
-00040480: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-00040490: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000404a0: 2020 2020 2020 2020 2020 2020 2261 6363              "acc
-000404b0: 6f75 6e74 4964 223a 2022 3133 3338 3034  ountId": "133804
-000404c0: 3334 222c 0a20 2020 2020 2020 2023 2020  34",.        #  
-000404d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000404e0: 2020 2022 7379 6d62 6f6c 223a 2022 4141     "symbol": "AA
-000404f0: 5645 5553 4454 222c 0a20 2020 2020 2020  VEUSDT",.       
-00040500: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00040510: 2020 2020 2020 2022 6f72 6465 724c 696e         "orderLin
-00040520: 6b49 6422 3a20 2231 3636 3637 3334 3030  kId": "166673400
-00040530: 3533 3030 3731 3722 2c0a 2020 2020 2020  5300717",.      
-00040540: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00040550: 2020 2020 2020 2020 226f 7264 6572 4964          "orderId
-00040560: 223a 2022 3132 3735 3035 3136 3833 3237  ": "127505168327
-00040570: 3932 3831 3636 3422 2c0a 2020 2020 2020  9281664",.      
-00040580: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00040590: 2020 2020 2020 2020 226f 7264 6572 5072          "orderPr
-000405a0: 6963 6522 3a20 2238 3022 2c0a 2020 2020  ice": "80",.    
-000405b0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000405c0: 2020 2020 2020 2020 2020 226f 7264 6572            "order
-000405d0: 5174 7922 3a20 2230 2e31 3122 2c0a 2020  Qty": "0.11",.  
-000405e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000405f0: 2020 2020 2020 2020 2020 2020 2265 7865              "exe
-00040600: 6351 7479 223a 2022 3022 2c0a 2020 2020  cQty": "0",.    
-00040610: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00040620: 2020 2020 2020 2020 2020 2263 756d 6d75            "cummu
-00040630: 6c61 7469 7665 5175 6f74 6551 7479 223a  lativeQuoteQty":
-00040640: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
-00040650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040660: 2020 2020 2261 7667 5072 6963 6522 3a20      "avgPrice": 
-00040670: 2230 222c 0a20 2020 2020 2020 2023 2020  "0",.        #  
-00040680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040690: 2020 2022 7374 6174 7573 223a 2022 4e45     "status": "NE
-000406a0: 5722 2c0a 2020 2020 2020 2020 2320 2020  W",.        #   
-000406b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000406c0: 2020 2274 696d 6549 6e46 6f72 6365 223a    "timeInForce":
-000406d0: 2022 4754 4322 2c0a 2020 2020 2020 2020   "GTC",.        
-000406e0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-000406f0: 2020 2020 2020 226f 7264 6572 5479 7065        "orderType
-00040700: 223a 2022 4c49 4d49 5422 2c0a 2020 2020  ": "LIMIT",.    
-00040710: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00040720: 2020 2020 2020 2020 2020 2273 6964 6522            "side"
-00040730: 3a20 2242 5559 222c 0a20 2020 2020 2020  : "BUY",.       
-00040740: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00040750: 2020 2020 2020 2022 7374 6f70 5072 6963         "stopPric
-00040760: 6522 3a20 2230 2e30 222c 0a20 2020 2020  e": "0.0",.     
-00040770: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00040780: 2020 2020 2020 2020 2022 6963 6562 6572           "iceber
-00040790: 6751 7479 223a 2022 302e 3022 2c0a 2020  gQty": "0.0",.  
-000407a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000407b0: 2020 2020 2020 2020 2020 2020 2263 7265              "cre
-000407c0: 6174 6554 696d 6522 3a20 2231 3636 3637  ateTime": "16667
-000407d0: 3334 3030 3533 3034 222c 0a20 2020 2020  34005304",.     
-000407e0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-000407f0: 2020 2020 2020 2020 2022 7570 6461 7465           "update
-00040800: 5469 6d65 223a 2022 3136 3636 3733 3430  Time": "16667340
-00040810: 3035 3330 3922 2c0a 2020 2020 2020 2020  05309",.        
-00040820: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00040830: 2020 2020 2020 2269 7357 6f72 6b69 6e67        "isWorking
-00040840: 223a 2022 3122 2c0a 2020 2020 2020 2020  ": "1",.        
-00040850: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00040860: 2020 2020 2020 226f 7264 6572 4361 7465        "orderCate
-00040870: 676f 7279 223a 2022 3022 0a20 2020 2020  gory": "0".     
-00040880: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00040890: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
-000408a0: 2020 2020 2020 2020 2020 2020 205d 0a20               ]. 
-000408b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000408c0: 207d 2c0a 2020 2020 2020 2020 2320 2020   },.        #   
-000408d0: 2020 2020 2020 2272 6574 4578 7449 6e66        "retExtInf
-000408e0: 6f22 3a20 6e75 6c6c 2c0a 2020 2020 2020  o": null,.      
-000408f0: 2020 2320 2020 2020 2020 2020 2274 696d    #         "tim
-00040900: 6522 3a20 2231 3636 3637 3334 3033 3135  e": "16667340315
-00040910: 3932 220a 2020 2020 2020 2020 2320 2020  92".        #   
-00040920: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-00040930: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
-00040940: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
-00040950: 6573 706f 6e73 652c 2027 7265 7375 6c74  esponse, 'result
-00040960: 272c 207b 7d29 0a20 2020 2020 2020 206f  ', {}).        o
-00040970: 7264 6572 7320 3d20 7365 6c66 2e73 6166  rders = self.saf
-00040980: 655f 7661 6c75 6528 7265 7375 6c74 2c20  e_value(result, 
-00040990: 276c 6973 7427 2c20 5b5d 290a 2020 2020  'list', []).    
-000409a0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-000409b0: 7061 7273 655f 6f72 6465 7273 286f 7264  parse_orders(ord
-000409c0: 6572 732c 206d 6172 6b65 742c 2073 696e  ers, market, sin
-000409d0: 6365 2c20 6c69 6d69 7429 0a0a 2020 2020  ce, limit)..    
-000409e0: 6465 6620 6665 7463 685f 756e 6966 6965  def fetch_unifie
-000409f0: 645f 6d61 7267 696e 5f6f 7065 6e5f 6f72  d_margin_open_or
-00040a00: 6465 7273 2873 656c 662c 2073 796d 626f  ders(self, symbo
-00040a10: 6c3a 204f 7074 696f 6e61 6c5b 7374 725d  l: Optional[str]
-00040a20: 203d 204e 6f6e 652c 2073 696e 6365 3a20   = None, since: 
-00040a30: 4f70 7469 6f6e 616c 5b69 6e74 5d20 3d20  Optional[int] = 
-00040a40: 4e6f 6e65 2c20 6c69 6d69 743a 204f 7074  None, limit: Opt
-00040a50: 696f 6e61 6c5b 696e 745d 203d 204e 6f6e  ional[int] = Non
-00040a60: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
-00040a70: 2020 2020 2020 2073 656c 662e 6c6f 6164         self.load
-00040a80: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
-00040a90: 2020 2072 6571 7565 7374 203d 207b 7d0a     request = {}.
-00040aa0: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
-00040ab0: 204e 6f6e 650a 2020 2020 2020 2020 6966   None.        if
-00040ac0: 2073 796d 626f 6c20 6973 204e 6f6e 653a   symbol is None:
-00040ad0: 0a20 2020 2020 2020 2020 2020 2073 7562  .            sub
-00040ae0: 5479 7065 203d 204e 6f6e 650a 2020 2020  Type = None.    
-00040af0: 2020 2020 2020 2020 7375 6254 7970 652c          subType,
-00040b00: 2070 6172 616d 7320 3d20 7365 6c66 2e68   params = self.h
-00040b10: 616e 646c 655f 7375 625f 7479 7065 5f61  andle_sub_type_a
-00040b20: 6e64 5f70 6172 616d 7328 2766 6574 6368  nd_params('fetch
-00040b30: 556e 6966 6965 644d 6172 6769 6e4f 7264  UnifiedMarginOrd
-00040b40: 6572 7327 2c20 6d61 726b 6574 2c20 7061  ers', market, pa
-00040b50: 7261 6d73 2c20 276c 696e 6561 7227 290a  rams, 'linear').
-00040b60: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00040b70: 6573 745b 2763 6174 6567 6f72 7927 5d20  est['category'] 
-00040b80: 3d20 7375 6254 7970 650a 2020 2020 2020  = subType.      
-00040b90: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00040ba0: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
-00040bb0: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
-00040bc0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-00040bd0: 7565 7374 5b27 7379 6d62 6f6c 275d 203d  uest['symbol'] =
-00040be0: 206d 6172 6b65 745b 2769 6427 5d0a 2020   market['id'].  
-00040bf0: 2020 2020 2020 2020 2020 6966 206d 6172            if mar
-00040c00: 6b65 745b 276f 7074 696f 6e27 5d3a 0a20  ket['option']:. 
-00040c10: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00040c20: 6571 7565 7374 5b27 6361 7465 676f 7279  equest['category
-00040c30: 275d 203d 2027 6f70 7469 6f6e 270a 2020  '] = 'option'.  
-00040c40: 2020 2020 2020 2020 2020 656c 6966 206d            elif m
-00040c50: 6172 6b65 745b 276c 696e 6561 7227 5d3a  arket['linear']:
-00040c60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00040c70: 2072 6571 7565 7374 5b27 6361 7465 676f   request['catego
-00040c80: 7279 275d 203d 2027 6c69 6e65 6172 270a  ry'] = 'linear'.
-00040c90: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00040ca0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00040cb0: 2020 7261 6973 6520 4e6f 7453 7570 706f    raise NotSuppo
-00040cc0: 7274 6564 2873 656c 662e 6964 202b 2027  rted(self.id + '
-00040cd0: 2066 6574 6368 556e 6966 6965 644d 6172   fetchUnifiedMar
-00040ce0: 6769 6e4f 7065 6e4f 7264 6572 7328 2920  ginOpenOrders() 
-00040cf0: 646f 6573 206e 6f74 2061 6c6c 6f77 2069  does not allow i
-00040d00: 6e76 6572 7365 206d 6172 6b65 7420 6f72  nverse market or
-00040d10: 6465 7273 2066 6f72 2027 202b 2073 796d  ders for ' + sym
-00040d20: 626f 6c20 2b20 2720 6d61 726b 6574 7327  bol + ' markets'
-00040d30: 290a 2020 2020 2020 2020 7479 7065 203d  ).        type =
-00040d40: 204e 6f6e 650a 2020 2020 2020 2020 7479   None.        ty
-00040d50: 7065 2c20 7061 7261 6d73 203d 2073 656c  pe, params = sel
-00040d60: 662e 6861 6e64 6c65 5f6d 6172 6b65 745f  f.handle_market_
-00040d70: 7479 7065 5f61 6e64 5f70 6172 616d 7328  type_and_params(
-00040d80: 2766 6574 6368 556e 6966 6965 644d 6172  'fetchUnifiedMar
-00040d90: 6769 6e4f 7065 6e4f 7264 6572 7327 2c20  ginOpenOrders', 
-00040da0: 6d61 726b 6574 2c20 7061 7261 6d73 290a  market, params).
-00040db0: 2020 2020 2020 2020 6973 5374 6f70 203d          isStop =
-00040dc0: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-00040dd0: 2870 6172 616d 732c 2027 7374 6f70 272c  (params, 'stop',
-00040de0: 2046 616c 7365 290a 2020 2020 2020 2020   False).        
-00040df0: 6973 436f 6e64 6974 696f 6e61 6c20 3d20  isConditional = 
-00040e00: 6973 5374 6f70 206f 7220 2874 7970 6520  isStop or (type 
-00040e10: 3d3d 2027 7374 6f70 2729 206f 7220 2874  == 'stop') or (t
-00040e20: 7970 6520 3d3d 2027 636f 6e64 6974 696f  ype == 'conditio
-00040e30: 6e61 6c27 290a 2020 2020 2020 2020 7061  nal').        pa
-00040e40: 7261 6d73 203d 2073 656c 662e 6f6d 6974  rams = self.omit
-00040e50: 2870 6172 616d 732c 205b 2773 746f 7027  (params, ['stop'
-00040e60: 5d29 0a20 2020 2020 2020 2069 6620 6973  ]).        if is
-00040e70: 436f 6e64 6974 696f 6e61 6c3a 0a20 2020  Conditional:.   
-00040e80: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00040e90: 5b27 6f72 6465 7246 696c 7465 7227 5d20  ['orderFilter'] 
-00040ea0: 3d20 2753 746f 704f 7264 6572 270a 2020  = 'StopOrder'.  
-00040eb0: 2020 2020 2020 6966 206c 696d 6974 2069        if limit i
-00040ec0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00040ed0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-00040ee0: 276c 696d 6974 275d 203d 206c 696d 6974  'limit'] = limit
-00040ef0: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
-00040f00: 6520 3d20 7365 6c66 2e70 7269 7661 7465  e = self.private
-00040f10: 4765 7455 6e69 6669 6564 5633 5072 6976  GetUnifiedV3Priv
-00040f20: 6174 654f 7264 6572 556e 6669 6c6c 6564  ateOrderUnfilled
-00040f30: 4f72 6465 7273 2873 656c 662e 6578 7465  Orders(self.exte
-00040f40: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
-00040f50: 6d73 2929 0a20 2020 2020 2020 2023 0a20  ms)).        #. 
-00040f60: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
-00040f70: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00040f80: 2022 7265 7443 6f64 6522 3a20 302c 0a20   "retCode": 0,. 
-00040f90: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00040fa0: 2022 7265 744d 7367 223a 2022 5375 6363   "retMsg": "Succ
-00040fb0: 6573 7322 2c0a 2020 2020 2020 2020 2320  ess",.        # 
-00040fc0: 2020 2020 2020 2020 2272 6573 756c 7422          "result"
-00040fd0: 3a20 7b0a 2020 2020 2020 2020 2320 2020  : {.        #   
-00040fe0: 2020 2020 2020 2020 2020 226e 6578 7450            "nextP
-00040ff0: 6167 6543 7572 736f 7222 3a20 2231 3335  ageCursor": "135
-00041000: 6363 6330 642d 3831 3336 2d34 6531 622d  ccc0d-8136-4e1b-
-00041010: 3861 6633 2d30 3762 3131 6565 3135 3864  8af3-07b11ee158d
-00041020: 3125 3341 3136 3635 3536 3536 3130 3532  1%3A166556561052
-00041030: 3625 3243 3133 3563 6363 3064 2d38 3133  6%2C135ccc0d-813
-00041040: 362d 3465 3162 2d38 6166 332d 3037 6231  6-4e1b-8af3-07b1
-00041050: 3165 6531 3538 6431 2533 4131 3636 3535  1ee158d1%3A16655
-00041060: 3635 3631 3035 3236 222c 0a20 2020 2020  65610526",.     
-00041070: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00041080: 2022 6361 7465 676f 7279 223a 2022 6c69   "category": "li
-00041090: 6e65 6172 222c 0a20 2020 2020 2020 2023  near",.        #
-000410a0: 2020 2020 2020 2020 2020 2020 2022 6c69               "li
-000410b0: 7374 223a 205b 0a20 2020 2020 2020 2023  st": [.        #
-000410c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000410d0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-000410e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000410f0: 2022 7379 6d62 6f6c 223a 2022 4554 4855   "symbol": "ETHU
-00041100: 5344 5422 2c0a 2020 2020 2020 2020 2320  SDT",.        # 
-00041110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041120: 2020 2020 226f 7264 6572 5479 7065 223a      "orderType":
-00041130: 2022 4c69 6d69 7422 2c0a 2020 2020 2020   "Limit",.      
-00041140: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00041150: 2020 2020 2020 2020 226f 7264 6572 4c69          "orderLi
-00041160: 6e6b 4964 223a 2022 7465 7374 3030 3030  nkId": "test0000
-00041170: 3030 3522 2c0a 2020 2020 2020 2020 2320  005",.        # 
-00041180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041190: 2020 2020 226f 7264 6572 4964 223a 2022      "orderId": "
-000411a0: 3133 3563 6363 3064 2d38 3133 362d 3465  135ccc0d-8136-4e
-000411b0: 3162 2d38 6166 332d 3037 6231 3165 6531  1b-8af3-07b11ee1
-000411c0: 3538 6431 222c 0a20 2020 2020 2020 2023  58d1",.        #
-000411d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000411e0: 2020 2020 2022 7374 6f70 4f72 6465 7254       "stopOrderT
-000411f0: 7970 6522 3a20 2255 4e4b 4e4f 574e 222c  ype": "UNKNOWN",
-00041200: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00041210: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00041220: 6f72 6465 7253 7461 7475 7322 3a20 224e  orderStatus": "N
-00041230: 6577 222c 0a20 2020 2020 2020 2023 2020  ew",.        #  
-00041240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041250: 2020 2022 7461 6b65 5072 6f66 6974 223a     "takeProfit":
-00041260: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
-00041270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041280: 2020 2022 6375 6d45 7865 6356 616c 7565     "cumExecValue
-00041290: 223a 2022 302e 3030 3030 3030 3030 222c  ": "0.00000000",
-000412a0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000412b0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000412c0: 626c 6f63 6b54 7261 6465 4964 223a 2022  blockTradeId": "
-000412d0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-000412e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000412f0: 2022 7072 6963 6522 3a20 2237 3030 2e30   "price": "700.0
-00041300: 3030 3030 3030 3022 2c0a 2020 2020 2020  0000000",.      
-00041310: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00041320: 2020 2020 2020 2020 2263 7265 6174 6564          "created
-00041330: 5469 6d65 223a 2031 3636 3535 3635 3631  Time": 166556561
-00041340: 3035 3236 2c0a 2020 2020 2020 2020 2320  0526,.        # 
-00041350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041360: 2020 2020 2274 7054 7269 6767 6572 4279      "tpTriggerBy
-00041370: 223a 2022 554e 4b4e 4f57 4e22 2c0a 2020  ": "UNKNOWN",.  
-00041380: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00041390: 2020 2020 2020 2020 2020 2020 2274 696d              "tim
-000413a0: 6549 6e46 6f72 6365 223a 2022 476f 6f64  eInForce": "Good
-000413b0: 5469 6c6c 4361 6e63 656c 222c 0a20 2020  TillCancel",.   
-000413c0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000413d0: 2020 2020 2020 2020 2020 2022 6261 7365             "base
-000413e0: 5072 6963 6522 3a20 2222 2c0a 2020 2020  Price": "",.    
-000413f0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00041400: 2020 2020 2020 2020 2020 2275 7064 6174            "updat
-00041410: 6564 5469 6d65 223a 2031 3636 3535 3635  edTime": 1665565
-00041420: 3631 3035 3333 2c0a 2020 2020 2020 2020  610533,.        
-00041430: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00041440: 2020 2020 2020 2273 6964 6522 3a20 2242        "side": "B
-00041450: 7579 222c 0a20 2020 2020 2020 2023 2020  uy",.        #  
-00041460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041470: 2020 2022 7472 6967 6765 7250 7269 6365     "triggerPrice
-00041480: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
-00041490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000414a0: 2020 2020 2022 6375 6d45 7865 6346 6565       "cumExecFee
-000414b0: 223a 2022 302e 3030 3030 3030 3030 222c  ": "0.00000000",
-000414c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000414d0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000414e0: 736c 5472 6967 6765 7242 7922 3a20 2255  slTriggerBy": "U
-000414f0: 4e4b 4e4f 574e 222c 0a20 2020 2020 2020  NKNOWN",.       
-00041500: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00041510: 2020 2020 2020 2022 6c65 6176 6573 5174         "leavesQt
-00041520: 7922 3a20 2230 2e31 3030 3022 2c0a 2020  y": "0.1000",.  
-00041530: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00041540: 2020 2020 2020 2020 2020 2020 2263 6c6f              "clo
-00041550: 7365 4f6e 5472 6967 6765 7222 3a20 4661  seOnTrigger": Fa
-00041560: 6c73 652c 0a20 2020 2020 2020 2023 2020  lse,.        #  
-00041570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041580: 2020 2022 6375 6d45 7865 6351 7479 223a     "cumExecQty":
-00041590: 2022 302e 3030 3030 3030 3030 222c 0a20   "0.00000000",. 
-000415a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000415b0: 2020 2020 2020 2020 2020 2020 2022 7265               "re
-000415c0: 6475 6365 4f6e 6c79 223a 2046 616c 7365  duceOnly": False
-000415d0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-000415e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000415f0: 2271 7479 223a 2022 302e 3130 3030 222c  "qty": "0.1000",
-00041600: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00041610: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00041620: 7374 6f70 4c6f 7373 223a 2022 222c 0a20  stopLoss": "",. 
-00041630: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00041640: 2020 2020 2020 2020 2020 2020 2022 7472               "tr
-00041650: 6967 6765 7242 7922 3a20 2255 4e4b 4e4f  iggerBy": "UNKNO
-00041660: 574e 222c 0a20 2020 2020 2020 2023 2020  WN",.        #  
-00041670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041680: 2020 2022 6f72 6465 7249 4d22 3a20 2230     "orderIM": "0
-00041690: 2e30 3030 3030 3030 3022 0a20 2020 2020  .00000000".     
-000416a0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-000416b0: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
-000416c0: 2020 2020 2020 2020 2020 2020 205d 0a20               ]. 
-000416d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000416e0: 207d 2c0a 2020 2020 2020 2020 2320 2020   },.        #   
-000416f0: 2020 2020 2020 2272 6574 4578 7449 6e66        "retExtInf
-00041700: 6f22 3a20 6e75 6c6c 2c0a 2020 2020 2020  o": null,.      
-00041710: 2020 2320 2020 2020 2020 2020 2274 696d    #         "tim
-00041720: 6522 3a20 3136 3635 3536 3536 3134 3332  e": 166556561432
-00041730: 300a 2020 2020 2020 2020 2320 2020 2020  0.        #     
-00041740: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
-00041750: 2020 2020 7265 7375 6c74 203d 2073 656c      result = sel
-00041760: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
-00041770: 706f 6e73 652c 2027 7265 7375 6c74 272c  ponse, 'result',
-00041780: 207b 7d29 0a20 2020 2020 2020 206f 7264   {}).        ord
-00041790: 6572 7320 3d20 7365 6c66 2e73 6166 655f  ers = self.safe_
-000417a0: 7661 6c75 6528 7265 7375 6c74 2c20 276c  value(result, 'l
-000417b0: 6973 7427 2c20 5b5d 290a 2020 2020 2020  ist', []).      
-000417c0: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
-000417d0: 7273 655f 6f72 6465 7273 286f 7264 6572  rse_orders(order
-000417e0: 732c 206d 6172 6b65 742c 2073 696e 6365  s, market, since
-000417f0: 2c20 6c69 6d69 7429 0a0a 2020 2020 6465  , limit)..    de
-00041800: 6620 6665 7463 685f 6465 7269 7661 7469  f fetch_derivati
-00041810: 7665 735f 6f70 656e 5f6f 7264 6572 7328  ves_open_orders(
-00041820: 7365 6c66 2c20 7379 6d62 6f6c 3a20 4f70  self, symbol: Op
-00041830: 7469 6f6e 616c 5b73 7472 5d20 3d20 4e6f  tional[str] = No
-00041840: 6e65 2c20 7369 6e63 653a 204f 7074 696f  ne, since: Optio
-00041850: 6e61 6c5b 696e 745d 203d 204e 6f6e 652c  nal[int] = None,
-00041860: 206c 696d 6974 3a20 4f70 7469 6f6e 616c   limit: Optional
-00041870: 5b69 6e74 5d20 3d20 4e6f 6e65 2c20 7061  [int] = None, pa
-00041880: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
-00041890: 2020 7365 6c66 2e6c 6f61 645f 6d61 726b    self.load_mark
-000418a0: 6574 7328 290a 2020 2020 2020 2020 6d61  ets().        ma
-000418b0: 726b 6574 203d 204e 6f6e 650a 2020 2020  rket = None.    
-000418c0: 2020 2020 7365 7474 6c65 203d 204e 6f6e      settle = Non
-000418d0: 650a 2020 2020 2020 2020 7265 7175 6573  e.        reques
-000418e0: 7420 3d20 7b0a 2020 2020 2020 2020 2020  t = {.          
-000418f0: 2020 2320 2773 796d 626f 6c27 3a20 6d61    # 'symbol': ma
-00041900: 726b 6574 5b27 6964 275d 2c0a 2020 2020  rket['id'],.    
-00041910: 2020 2020 2020 2020 2320 2763 6174 6567          # 'categ
-00041920: 6f72 7927 2c20 5479 7065 206f 6620 6465  ory', Type of de
-00041930: 7269 7661 7469 7665 7320 7072 6f64 7563  rivatives produc
-00041940: 743a 206c 696e 6561 7220 6f72 206f 7074  t: linear or opt
-00041950: 696f 6e2e 0a20 2020 2020 2020 2020 2020  ion..           
-00041960: 2023 2027 6261 7365 436f 696e 272c 2042   # 'baseCoin', B
-00041970: 6173 6520 636f 696e 2e20 5768 656e 2063  ase coin. When c
-00041980: 6174 6567 6f72 793d 6f70 7469 6f6e 2e20  ategory=option. 
-00041990: 4966 206e 6f74 2070 6173 7365 642c 2042  If not passed, B
-000419a0: 5443 2062 7920 6465 6661 756c 743b 2077  TC by default; w
-000419b0: 6865 6e20 6361 7465 676f 7279 3d6c 696e  hen category=lin
-000419c0: 6561 722c 2069 6620 4254 4320 7061 7373  ear, if BTC pass
-000419d0: 6564 2c20 4254 4350 4552 5020 2620 4254  ed, BTCPERP & BT
-000419e0: 4355 5344 5420 7265 7475 726e 6564 2e0a  CUSDT returned..
-000419f0: 2020 2020 2020 2020 2020 2020 2320 2773              # 's
-00041a00: 6574 746c 6543 6f69 6e27 2c20 5365 7474  ettleCoin', Sett
-00041a10: 6c65 2063 6f69 6e2e 2046 6f72 206c 696e  le coin. For lin
-00041a20: 6561 722c 2065 6974 6865 7220 7379 6d62  ear, either symb
-00041a30: 6f6c 206f 7220 7365 7474 6c65 436f 696e  ol or settleCoin
-00041a40: 2069 7320 7265 7175 6972 6564 0a20 2020   is required.   
-00041a50: 2020 2020 2020 2020 2023 2027 6f72 6465           # 'orde
-00041a60: 7249 6427 2c20 4f72 6465 7220 4944 0a20  rId', Order ID. 
-00041a70: 2020 2020 2020 2020 2020 2023 2027 6f72             # 'or
-00041a80: 6465 724c 696e 6b49 6427 2c20 556e 6971  derLinkId', Uniq
-00041a90: 7565 2075 7365 722d 7365 7420 6f72 6465  ue user-set orde
-00041aa0: 7220 4944 0a20 2020 2020 2020 2020 2020  r ID.           
-00041ab0: 2023 2027 6f72 6465 7246 696c 7465 7227   # 'orderFilter'
-00041ac0: 2c20 436f 6e64 6974 696f 6e61 6c20 6f72  , Conditional or
-00041ad0: 6465 7220 6f72 2061 6374 6976 6520 6f72  der or active or
-00041ae0: 6465 720a 2020 2020 2020 2020 2020 2020  der.            
-00041af0: 2320 276c 696d 6974 273a 206e 756d 6265  # 'limit': numbe
-00041b00: 722c 2044 6174 6120 7175 616e 7469 7479  r, Data quantity
-00041b10: 2070 6572 2070 6167 653a 204d 6178 2064   per page: Max d
-00041b20: 6174 6120 7661 6c75 6520 7065 7220 7061  ata value per pa
-00041b30: 6765 2069 7320 3530 2c20 616e 6420 6465  ge is 50, and de
-00041b40: 6661 756c 7420 7661 6c75 6520 6174 2032  fault value at 2
-00041b50: 302e 0a20 2020 2020 2020 2020 2020 2023  0..            #
-00041b60: 2027 6375 7273 6f72 272c 2041 5049 2070   'cursor', API p
-00041b70: 6173 732d 7468 726f 7567 682e 2061 6363  ass-through. acc
-00041b80: 6f75 6e74 5479 7065 202b 2063 6174 6567  ountType + categ
-00041b90: 6f72 7920 2b20 6375 7273 6f72 202b 2e20  ory + cursor +. 
-00041ba0: 4966 2069 6e63 6f6e 7369 7374 656e 742c  If inconsistent,
-00041bb0: 2074 6865 2066 6f6c 6c6f 7769 6e67 2073   the following s
-00041bc0: 686f 756c 6420 6265 2072 6574 7572 6e65  hould be returne
-00041bd0: 643a 2054 6865 2061 6363 6f75 6e74 2074  d: The account t
-00041be0: 7970 6520 646f 6573 206e 6f74 206d 6174  ype does not mat
-00041bf0: 6368 2074 6865 2073 6572 7669 6365 2069  ch the service i
-00041c00: 6e71 7569 7279 2e0a 2020 2020 2020 2020  nquiry..        
-00041c10: 2020 2020 2320 276f 7065 6e4f 6e6c 7927      # 'openOnly'
-00041c20: 3a20 302c 0a20 2020 2020 2020 207d 0a20  : 0,.        }. 
-00041c30: 2020 2020 2020 2069 6620 7379 6d62 6f6c         if symbol
-00041c40: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00041c50: 2020 2020 2020 2020 2020 6d61 726b 6574            market
-00041c60: 203d 2073 656c 662e 6d61 726b 6574 2873   = self.market(s
-00041c70: 796d 626f 6c29 0a20 2020 2020 2020 2020  ymbol).         
-00041c80: 2020 2072 6571 7565 7374 5b27 7379 6d62     request['symb
-00041c90: 6f6c 275d 203d 206d 6172 6b65 745b 2769  ol'] = market['i
-00041ca0: 6427 5d0a 2020 2020 2020 2020 2020 2020  d'].            
-00041cb0: 6966 206d 6172 6b65 745b 276c 696e 6561  if market['linea
-00041cc0: 7227 5d3a 0a20 2020 2020 2020 2020 2020  r']:.           
-00041cd0: 2020 2020 2072 6571 7565 7374 5b27 6361       request['ca
-00041ce0: 7465 676f 7279 275d 203d 2027 6c69 6e65  tegory'] = 'line
-00041cf0: 6172 270a 2020 2020 2020 2020 2020 2020  ar'.            
-00041d00: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00041d10: 2020 2020 2020 7265 7175 6573 745b 2763        request['c
-00041d20: 6174 6567 6f72 7927 5d20 3d20 2769 6e76  ategory'] = 'inv
-00041d30: 6572 7365 270a 2020 2020 2020 2020 656c  erse'.        el
-00041d40: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00041d50: 7479 7065 203d 204e 6f6e 650a 2020 2020  type = None.    
-00041d60: 2020 2020 2020 2020 7479 7065 2c20 7061          type, pa
-00041d70: 7261 6d73 203d 2073 656c 662e 6861 6e64  rams = self.hand
-00041d80: 6c65 5f6d 6172 6b65 745f 7479 7065 5f61  le_market_type_a
-00041d90: 6e64 5f70 6172 616d 7328 2766 6574 6368  nd_params('fetch
-00041da0: 4f70 656e 4f72 6465 7273 272c 206d 6172  OpenOrders', mar
-00041db0: 6b65 742c 2070 6172 616d 7329 0a20 2020  ket, params).   
-00041dc0: 2020 2020 2020 2020 2073 7562 5479 7065           subType
-00041dd0: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-00041de0: 2020 2020 7375 6254 7970 652c 2070 6172      subType, par
-00041df0: 616d 7320 3d20 7365 6c66 2e68 616e 646c  ams = self.handl
-00041e00: 655f 7375 625f 7479 7065 5f61 6e64 5f70  e_sub_type_and_p
-00041e10: 6172 616d 7328 2766 6574 6368 4f70 656e  arams('fetchOpen
-00041e20: 4f72 6465 7273 272c 206d 6172 6b65 742c  Orders', market,
-00041e30: 2070 6172 616d 732c 2027 6c69 6e65 6172   params, 'linear
-00041e40: 2729 0a20 2020 2020 2020 2020 2020 2072  ').            r
-00041e50: 6571 7565 7374 5b27 6361 7465 676f 7279  equest['category
-00041e60: 275d 203d 2074 7970 650a 2020 2020 2020  '] = type.      
-00041e70: 2020 2020 2020 6966 2074 7970 6520 3d3d        if type ==
-00041e80: 2027 7377 6170 273a 0a20 2020 2020 2020   'swap':.       
-00041e90: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00041ea0: 5b27 6361 7465 676f 7279 275d 203d 2073  ['category'] = s
-00041eb0: 7562 5479 7065 0a20 2020 2020 2020 2073  ubType.        s
-00041ec0: 6574 746c 652c 2070 6172 616d 7320 3d20  ettle, params = 
-00041ed0: 7365 6c66 2e68 616e 646c 655f 6f70 7469  self.handle_opti
-00041ee0: 6f6e 5f61 6e64 5f70 6172 616d 7328 7061  on_and_params(pa
-00041ef0: 7261 6d73 2c20 2766 6574 6368 4f70 656e  rams, 'fetchOpen
-00041f00: 4f72 6465 7273 272c 2027 7365 7474 6c65  Orders', 'settle
-00041f10: 272c 2073 6574 746c 6529 0a20 2020 2020  ', settle).     
-00041f20: 2020 2069 6620 7365 7474 6c65 2069 7320     if settle is 
-00041f30: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00041f40: 2020 2020 2020 7265 7175 6573 745b 2773        request['s
-00041f50: 6574 746c 6543 6f69 6e27 5d20 3d20 7365  ettleCoin'] = se
-00041f60: 7474 6c65 0a20 2020 2020 2020 2069 7353  ttle.        isS
-00041f70: 746f 7020 3d20 7365 6c66 2e73 6166 655f  top = self.safe_
-00041f80: 7661 6c75 6528 7061 7261 6d73 2c20 2773  value(params, 's
-00041f90: 746f 7027 2c20 4661 6c73 6529 0a20 2020  top', False).   
-00041fa0: 2020 2020 2070 6172 616d 7320 3d20 7365       params = se
-00041fb0: 6c66 2e6f 6d69 7428 7061 7261 6d73 2c20  lf.omit(params, 
-00041fc0: 5b27 7374 6f70 275d 290a 2020 2020 2020  ['stop']).      
-00041fd0: 2020 6966 2069 7353 746f 703a 0a20 2020    if isStop:.   
-00041fe0: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00041ff0: 5b27 6f72 6465 7246 696c 7465 7227 5d20  ['orderFilter'] 
-00042000: 3d20 2753 746f 704f 7264 6572 270a 2020  = 'StopOrder'.  
-00042010: 2020 2020 2020 6966 206c 696d 6974 2069        if limit i
-00042020: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00042030: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-00042040: 276c 696d 6974 275d 203d 206c 696d 6974  'limit'] = limit
-00042050: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
-00042060: 6520 3d20 7365 6c66 2e70 7269 7661 7465  e = self.private
-00042070: 4765 7456 354f 7264 6572 5265 616c 7469  GetV5OrderRealti
-00042080: 6d65 2873 656c 662e 6578 7465 6e64 2872  me(self.extend(r
-00042090: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
-000420a0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-000420b0: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
-000420c0: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-000420d0: 7443 6f64 6522 3a20 302c 0a20 2020 2020  tCode": 0,.     
-000420e0: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-000420f0: 744d 7367 223a 2022 4f4b 222c 0a20 2020  tMsg": "OK",.   
-00042100: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00042110: 7265 7375 6c74 223a 207b 0a20 2020 2020  result": {.     
-00042120: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00042130: 2022 6e65 7874 5061 6765 4375 7273 6f72   "nextPageCursor
-00042140: 223a 2022 3133 3231 3035 3236 3533 3533  ": "132105265353
-00042150: 3635 3135 3538 3425 3341 3136 3732 3231  6515584%3A167221
-00042160: 3737 3438 3238 3725 3243 3133 3231 3035  7748287%2C132105
-00042170: 3236 3533 3533 3635 3135 3538 3425 3341  2653536515584%3A
-00042180: 3136 3732 3231 3737 3438 3238 3722 2c0a  1672217748287",.
-00042190: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000421a0: 2020 2020 2020 2263 6174 6567 6f72 7922        "category"
-000421b0: 3a20 2273 706f 7422 2c0a 2020 2020 2020  : "spot",.      
-000421c0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000421d0: 226c 6973 7422 3a20 5b0a 2020 2020 2020  "list": [.      
-000421e0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000421f0: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-00042200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042210: 2020 2020 2273 796d 626f 6c22 3a20 2245      "symbol": "E
-00042220: 5448 5553 4454 222c 0a20 2020 2020 2020  THUSDT",.       
-00042230: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00042240: 2020 2020 2020 2022 6f72 6465 7254 7970         "orderTyp
-00042250: 6522 3a20 224c 696d 6974 222c 0a20 2020  e": "Limit",.   
-00042260: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00042270: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
-00042280: 724c 696e 6b49 6422 3a20 2231 3637 3232  rLinkId": "16722
-00042290: 3137 3734 3832 3737 3635 3222 2c0a 2020  17748277652",.  
-000422a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000422b0: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
-000422c0: 6572 4964 223a 2022 3133 3231 3035 3236  erId": "13210526
-000422d0: 3533 3533 3635 3135 3538 3422 2c0a 2020  53536515584",.  
-000422e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000422f0: 2020 2020 2020 2020 2020 2020 2263 616e              "can
-00042300: 6365 6c54 7970 6522 3a20 2255 4e4b 4e4f  celType": "UNKNO
-00042310: 574e 222c 0a20 2020 2020 2020 2023 2020  WN",.        #  
-00042320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042330: 2020 2022 6176 6750 7269 6365 223a 2022     "avgPrice": "
-00042340: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00042350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042360: 2022 7374 6f70 4f72 6465 7254 7970 6522   "stopOrderType"
-00042370: 3a20 2274 7073 6c4f 7264 6572 222c 0a20  : "tpslOrder",. 
-00042380: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00042390: 2020 2020 2020 2020 2020 2020 2022 6c61               "la
-000423a0: 7374 5072 6963 654f 6e43 7265 6174 6564  stPriceOnCreated
-000423b0: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
-000423c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000423d0: 2020 2020 2022 6f72 6465 7253 7461 7475       "orderStatu
-000423e0: 7322 3a20 2243 616e 6365 6c6c 6564 222c  s": "Cancelled",
-000423f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00042400: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00042410: 7461 6b65 5072 6f66 6974 223a 2022 222c  takeProfit": "",
-00042420: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00042430: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00042440: 6375 6d45 7865 6356 616c 7565 223a 2022  cumExecValue": "
-00042450: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-00042460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042470: 2020 2274 7269 6767 6572 4469 7265 6374    "triggerDirect
-00042480: 696f 6e22 3a20 302c 0a20 2020 2020 2020  ion": 0,.       
-00042490: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-000424a0: 2020 2020 2020 2022 6973 4c65 7665 7261         "isLevera
-000424b0: 6765 223a 2022 3022 2c0a 2020 2020 2020  ge": "0",.      
-000424c0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000424d0: 2020 2020 2020 2020 2272 656a 6563 7452          "rejectR
-000424e0: 6561 736f 6e22 3a20 2222 2c0a 2020 2020  eason": "",.    
-000424f0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00042500: 2020 2020 2020 2020 2020 2270 7269 6365            "price
-00042510: 223a 2022 3130 3030 222c 0a20 2020 2020  ": "1000",.     
-00042520: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00042530: 2020 2020 2020 2020 2022 6f72 6465 7249           "orderI
-00042540: 7622 3a20 2222 2c0a 2020 2020 2020 2020  v": "",.        
-00042550: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00042560: 2020 2020 2020 2263 7265 6174 6564 5469        "createdTi
-00042570: 6d65 223a 2022 3136 3732 3231 3737 3438  me": "1672217748
-00042580: 3238 3722 2c0a 2020 2020 2020 2020 2320  287",.        # 
-00042590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000425a0: 2020 2020 2274 7054 7269 6767 6572 4279      "tpTriggerBy
-000425b0: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
-000425c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000425d0: 2020 2020 2022 706f 7369 7469 6f6e 4964       "positionId
-000425e0: 7822 3a20 302c 0a20 2020 2020 2020 2023  x": 0,.        #
-000425f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042600: 2020 2020 2022 7469 6d65 496e 466f 7263       "timeInForc
-00042610: 6522 3a20 2247 5443 222c 0a20 2020 2020  e": "GTC",.     
-00042620: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00042630: 2020 2020 2020 2020 2022 6c65 6176 6573           "leaves
-00042640: 5661 6c75 6522 3a20 2235 3030 222c 0a20  Value": "500",. 
-00042650: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00042660: 2020 2020 2020 2020 2020 2020 2022 7570               "up
-00042670: 6461 7465 6454 696d 6522 3a20 2231 3637  datedTime": "167
-00042680: 3232 3137 3734 3832 3837 222c 0a20 2020  2217748287",.   
-00042690: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000426a0: 2020 2020 2020 2020 2020 2022 7369 6465             "side
-000426b0: 223a 2022 4275 7922 2c0a 2020 2020 2020  ": "Buy",.      
-000426c0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000426d0: 2020 2020 2020 2020 2274 7269 6767 6572          "trigger
-000426e0: 5072 6963 6522 3a20 2231 3530 3022 2c0a  Price": "1500",.
-000426f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00042700: 2020 2020 2020 2020 2020 2020 2020 2263                "c
-00042710: 756d 4578 6563 4665 6522 3a20 2230 222c  umExecFee": "0",
-00042720: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00042730: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00042740: 6c65 6176 6573 5174 7922 3a20 2230 222c  leavesQty": "0",
-00042750: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00042760: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00042770: 736c 5472 6967 6765 7242 7922 3a20 2222  slTriggerBy": ""
-00042780: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00042790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000427a0: 2263 6c6f 7365 4f6e 5472 6967 6765 7222  "closeOnTrigger"
-000427b0: 3a20 4661 6c73 652c 0a20 2020 2020 2020  : False,.       
-000427c0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-000427d0: 2020 2020 2020 2022 6375 6d45 7865 6351         "cumExecQ
-000427e0: 7479 223a 2022 3022 2c0a 2020 2020 2020  ty": "0",.      
-000427f0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00042800: 2020 2020 2020 2020 2272 6564 7563 654f          "reduceO
-00042810: 6e6c 7922 3a20 4661 6c73 652c 0a20 2020  nly": False,.   
-00042820: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00042830: 2020 2020 2020 2020 2020 2022 7174 7922             "qty"
-00042840: 3a20 2230 2e35 222c 0a20 2020 2020 2020  : "0.5",.       
-00042850: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00042860: 2020 2020 2020 2022 7374 6f70 4c6f 7373         "stopLoss
-00042870: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
+0003ff30: 2020 2022 6f72 6465 7249 6422 3a20 2231     "orderId": "1
+0003ff40: 3332 3130 3532 3635 3335 3336 3531 3535  3210526535365155
+0003ff50: 3834 222c 0a20 2020 2020 2020 2023 2020  84",.        #  
+0003ff60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003ff70: 2020 2022 6361 6e63 656c 5479 7065 223a     "cancelType":
+0003ff80: 2022 554e 4b4e 4f57 4e22 2c0a 2020 2020   "UNKNOWN",.    
+0003ff90: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0003ffa0: 2020 2020 2020 2020 2020 2261 7667 5072            "avgPr
+0003ffb0: 6963 6522 3a20 2222 2c0a 2020 2020 2020  ice": "",.      
+0003ffc0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0003ffd0: 2020 2020 2020 2020 2273 746f 704f 7264          "stopOrd
+0003ffe0: 6572 5479 7065 223a 2022 7470 736c 4f72  erType": "tpslOr
+0003fff0: 6465 7222 2c0a 2020 2020 2020 2020 2320  der",.        # 
+00040000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040010: 2020 2020 226c 6173 7450 7269 6365 4f6e      "lastPriceOn
+00040020: 4372 6561 7465 6422 3a20 2222 2c0a 2020  Created": "",.  
+00040030: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00040040: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+00040050: 6572 5374 6174 7573 223a 2022 4361 6e63  erStatus": "Canc
+00040060: 656c 6c65 6422 2c0a 2020 2020 2020 2020  elled",.        
+00040070: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00040080: 2020 2020 2020 2274 616b 6550 726f 6669        "takeProfi
+00040090: 7422 3a20 2222 2c0a 2020 2020 2020 2020  t": "",.        
+000400a0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000400b0: 2020 2020 2020 2263 756d 4578 6563 5661        "cumExecVa
+000400c0: 6c75 6522 3a20 2230 222c 0a20 2020 2020  lue": "0",.     
+000400d0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+000400e0: 2020 2020 2020 2020 2022 7472 6967 6765           "trigge
+000400f0: 7244 6972 6563 7469 6f6e 223a 2030 2c0a  rDirection": 0,.
+00040100: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00040110: 2020 2020 2020 2020 2020 2020 2020 2269                "i
+00040120: 734c 6576 6572 6167 6522 3a20 2230 222c  sLeverage": "0",
+00040130: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00040140: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00040150: 7265 6a65 6374 5265 6173 6f6e 223a 2022  rejectReason": "
+00040160: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00040170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040180: 2022 7072 6963 6522 3a20 2231 3030 3022   "price": "1000"
+00040190: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000401a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000401b0: 226f 7264 6572 4976 223a 2022 222c 0a20  "orderIv": "",. 
+000401c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000401d0: 2020 2020 2020 2020 2020 2020 2022 6372               "cr
+000401e0: 6561 7465 6454 696d 6522 3a20 2231 3637  eatedTime": "167
+000401f0: 3232 3137 3734 3832 3837 222c 0a20 2020  2217748287",.   
+00040200: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00040210: 2020 2020 2020 2020 2020 2022 7470 5472             "tpTr
+00040220: 6967 6765 7242 7922 3a20 2222 2c0a 2020  iggerBy": "",.  
+00040230: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00040240: 2020 2020 2020 2020 2020 2020 2270 6f73              "pos
+00040250: 6974 696f 6e49 6478 223a 2030 2c0a 2020  itionIdx": 0,.  
+00040260: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00040270: 2020 2020 2020 2020 2020 2020 2274 696d              "tim
+00040280: 6549 6e46 6f72 6365 223a 2022 4754 4322  eInForce": "GTC"
+00040290: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000402a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000402b0: 226c 6561 7665 7356 616c 7565 223a 2022  "leavesValue": "
+000402c0: 3530 3022 2c0a 2020 2020 2020 2020 2320  500",.        # 
+000402d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000402e0: 2020 2020 2275 7064 6174 6564 5469 6d65      "updatedTime
+000402f0: 223a 2022 3136 3732 3231 3737 3438 3238  ": "167221774828
+00040300: 3722 2c0a 2020 2020 2020 2020 2320 2020  7",.        #   
+00040310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040320: 2020 2273 6964 6522 3a20 2242 7579 222c    "side": "Buy",
+00040330: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00040340: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00040350: 7472 6967 6765 7250 7269 6365 223a 2022  triggerPrice": "
+00040360: 3135 3030 222c 0a20 2020 2020 2020 2023  1500",.        #
+00040370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040380: 2020 2020 2022 6375 6d45 7865 6346 6565       "cumExecFee
+00040390: 223a 2022 3022 2c0a 2020 2020 2020 2020  ": "0",.        
+000403a0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000403b0: 2020 2020 2020 226c 6561 7665 7351 7479        "leavesQty
+000403c0: 223a 2022 3022 2c0a 2020 2020 2020 2020  ": "0",.        
+000403d0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000403e0: 2020 2020 2020 2273 6c54 7269 6767 6572        "slTrigger
+000403f0: 4279 223a 2022 222c 0a20 2020 2020 2020  By": "",.       
+00040400: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00040410: 2020 2020 2020 2022 636c 6f73 654f 6e54         "closeOnT
+00040420: 7269 6767 6572 223a 2046 616c 7365 2c0a  rigger": False,.
+00040430: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00040440: 2020 2020 2020 2020 2020 2020 2020 2263                "c
+00040450: 756d 4578 6563 5174 7922 3a20 2230 222c  umExecQty": "0",
+00040460: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00040470: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00040480: 7265 6475 6365 4f6e 6c79 223a 2046 616c  reduceOnly": Fal
+00040490: 7365 2c0a 2020 2020 2020 2020 2320 2020  se,.        #   
+000404a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000404b0: 2020 2271 7479 223a 2022 302e 3522 2c0a    "qty": "0.5",.
+000404c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000404d0: 2020 2020 2020 2020 2020 2020 2020 2273                "s
+000404e0: 746f 704c 6f73 7322 3a20 2222 2c0a 2020  topLoss": "",.  
+000404f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00040500: 2020 2020 2020 2020 2020 2020 2274 7269              "tri
+00040510: 6767 6572 4279 223a 2022 3131 3932 2e35  ggerBy": "1192.5
+00040520: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
+00040530: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
+00040540: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00040550: 2020 2020 5d0a 2020 2020 2020 2020 2320      ].        # 
+00040560: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
+00040570: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+00040580: 7445 7874 496e 666f 223a 207b 7d2c 0a20  tExtInfo": {},. 
+00040590: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000405a0: 2022 7469 6d65 223a 2031 3637 3232 3139   "time": 1672219
+000405b0: 3532 3632 3934 0a20 2020 2020 2020 2023  526294.        #
+000405c0: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+000405d0: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
+000405e0: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+000405f0: 6528 7265 7370 6f6e 7365 2c20 2772 6573  e(response, 'res
+00040600: 756c 7427 2c20 7b7d 290a 2020 2020 2020  ult', {}).      
+00040610: 2020 6461 7461 203d 2073 656c 662e 7361    data = self.sa
+00040620: 6665 5f76 616c 7565 2872 6573 756c 742c  fe_value(result,
+00040630: 2027 6c69 7374 272c 205b 5d29 0a20 2020   'list', []).   
+00040640: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00040650: 2e70 6172 7365 5f6f 7264 6572 7328 6461  .parse_orders(da
+00040660: 7461 2c20 6d61 726b 6574 2c20 7369 6e63  ta, market, sinc
+00040670: 652c 206c 696d 6974 290a 0a20 2020 2064  e, limit)..    d
+00040680: 6566 2066 6574 6368 5f73 706f 745f 6f70  ef fetch_spot_op
+00040690: 656e 5f6f 7264 6572 7328 7365 6c66 2c20  en_orders(self, 
+000406a0: 7379 6d62 6f6c 3a20 4f70 7469 6f6e 616c  symbol: Optional
+000406b0: 5b73 7472 5d20 3d20 4e6f 6e65 2c20 7369  [str] = None, si
+000406c0: 6e63 653a 204f 7074 696f 6e61 6c5b 696e  nce: Optional[in
+000406d0: 745d 203d 204e 6f6e 652c 206c 696d 6974  t] = None, limit
+000406e0: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
+000406f0: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
+00040700: 7d29 3a0a 2020 2020 2020 2020 7365 6c66  }):.        self
+00040710: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
+00040720: 2020 2020 2020 2020 7265 7175 6573 7420          request 
+00040730: 3d20 7b7d 0a20 2020 2020 2020 206d 6172  = {}.        mar
+00040740: 6b65 7420 3d20 4e6f 6e65 0a20 2020 2020  ket = None.     
+00040750: 2020 2069 6620 7379 6d62 6f6c 2069 7320     if symbol is 
+00040760: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00040770: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
+00040780: 656c 662e 6d61 726b 6574 2873 796d 626f  elf.market(symbo
+00040790: 6c29 0a20 2020 2020 2020 2020 2020 2072  l).            r
+000407a0: 6571 7565 7374 5b27 7379 6d62 6f6c 275d  equest['symbol']
+000407b0: 203d 206d 6172 6b65 745b 2769 6427 5d0a   = market['id'].
+000407c0: 2020 2020 2020 2020 6966 206c 696d 6974          if limit
+000407d0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+000407e0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+000407f0: 745b 276c 696d 6974 275d 203d 206c 696d  t['limit'] = lim
+00040800: 6974 0a20 2020 2020 2020 2072 6573 706f  it.        respo
+00040810: 6e73 6520 3d20 7365 6c66 2e70 7269 7661  nse = self.priva
+00040820: 7465 4765 7453 706f 7456 3350 7269 7661  teGetSpotV3Priva
+00040830: 7465 4f70 656e 4f72 6465 7273 2873 656c  teOpenOrders(sel
+00040840: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
+00040850: 2c20 7061 7261 6d73 2929 0a20 2020 2020  , params)).     
+00040860: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
+00040870: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+00040880: 2020 2020 2020 2272 6574 436f 6465 223a        "retCode":
+00040890: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
+000408a0: 2020 2020 2020 2020 2272 6574 4d73 6722          "retMsg"
+000408b0: 3a20 224f 4b22 2c0a 2020 2020 2020 2020  : "OK",.        
+000408c0: 2320 2020 2020 2020 2020 2272 6573 756c  #         "resul
+000408d0: 7422 3a20 7b0a 2020 2020 2020 2020 2320  t": {.        # 
+000408e0: 2020 2020 2020 2020 2020 2020 226c 6973              "lis
+000408f0: 7422 3a20 5b0a 2020 2020 2020 2020 2320  t": [.        # 
+00040900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040910: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+00040920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040930: 2261 6363 6f75 6e74 4964 223a 2022 3133  "accountId": "13
+00040940: 3338 3034 3334 222c 0a20 2020 2020 2020  380434",.       
+00040950: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00040960: 2020 2020 2020 2022 7379 6d62 6f6c 223a         "symbol":
+00040970: 2022 4141 5645 5553 4454 222c 0a20 2020   "AAVEUSDT",.   
+00040980: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00040990: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
+000409a0: 724c 696e 6b49 6422 3a20 2231 3636 3637  rLinkId": "16667
+000409b0: 3334 3030 3533 3030 3731 3722 2c0a 2020  34005300717",.  
+000409c0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000409d0: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+000409e0: 6572 4964 223a 2022 3132 3735 3035 3136  erId": "12750516
+000409f0: 3833 3237 3932 3831 3636 3422 2c0a 2020  83279281664",.  
+00040a00: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00040a10: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+00040a20: 6572 5072 6963 6522 3a20 2238 3022 2c0a  erPrice": "80",.
+00040a30: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00040a40: 2020 2020 2020 2020 2020 2020 2020 226f                "o
+00040a50: 7264 6572 5174 7922 3a20 2230 2e31 3122  rderQty": "0.11"
+00040a60: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00040a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040a80: 2265 7865 6351 7479 223a 2022 3022 2c0a  "execQty": "0",.
+00040a90: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00040aa0: 2020 2020 2020 2020 2020 2020 2020 2263                "c
+00040ab0: 756d 6d75 6c61 7469 7665 5175 6f74 6551  ummulativeQuoteQ
+00040ac0: 7479 223a 2022 3022 2c0a 2020 2020 2020  ty": "0",.      
+00040ad0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00040ae0: 2020 2020 2020 2020 2261 7667 5072 6963          "avgPric
+00040af0: 6522 3a20 2230 222c 0a20 2020 2020 2020  e": "0",.       
+00040b00: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00040b10: 2020 2020 2020 2022 7374 6174 7573 223a         "status":
+00040b20: 2022 4e45 5722 2c0a 2020 2020 2020 2020   "NEW",.        
+00040b30: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00040b40: 2020 2020 2020 2274 696d 6549 6e46 6f72        "timeInFor
+00040b50: 6365 223a 2022 4754 4322 2c0a 2020 2020  ce": "GTC",.    
+00040b60: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00040b70: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+00040b80: 5479 7065 223a 2022 4c49 4d49 5422 2c0a  Type": "LIMIT",.
+00040b90: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00040ba0: 2020 2020 2020 2020 2020 2020 2020 2273                "s
+00040bb0: 6964 6522 3a20 2242 5559 222c 0a20 2020  ide": "BUY",.   
+00040bc0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00040bd0: 2020 2020 2020 2020 2020 2022 7374 6f70             "stop
+00040be0: 5072 6963 6522 3a20 2230 2e30 222c 0a20  Price": "0.0",. 
+00040bf0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00040c00: 2020 2020 2020 2020 2020 2020 2022 6963               "ic
+00040c10: 6562 6572 6751 7479 223a 2022 302e 3022  ebergQty": "0.0"
+00040c20: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00040c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040c40: 2263 7265 6174 6554 696d 6522 3a20 2231  "createTime": "1
+00040c50: 3636 3637 3334 3030 3533 3034 222c 0a20  666734005304",. 
+00040c60: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00040c70: 2020 2020 2020 2020 2020 2020 2022 7570               "up
+00040c80: 6461 7465 5469 6d65 223a 2022 3136 3636  dateTime": "1666
+00040c90: 3733 3430 3035 3330 3922 2c0a 2020 2020  734005309",.    
+00040ca0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00040cb0: 2020 2020 2020 2020 2020 2269 7357 6f72            "isWor
+00040cc0: 6b69 6e67 223a 2022 3122 2c0a 2020 2020  king": "1",.    
+00040cd0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00040ce0: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+00040cf0: 4361 7465 676f 7279 223a 2022 3022 0a20  Category": "0". 
+00040d00: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00040d10: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+00040d20: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00040d30: 205d 0a20 2020 2020 2020 2023 2020 2020   ].        #    
+00040d40: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
+00040d50: 2320 2020 2020 2020 2020 2272 6574 4578  #         "retEx
+00040d60: 7449 6e66 6f22 3a20 6e75 6c6c 2c0a 2020  tInfo": null,.  
+00040d70: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00040d80: 2274 696d 6522 3a20 2231 3636 3637 3334  "time": "1666734
+00040d90: 3033 3135 3932 220a 2020 2020 2020 2020  031592".        
+00040da0: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
+00040db0: 230a 2020 2020 2020 2020 7265 7375 6c74  #.        result
+00040dc0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+00040dd0: 7565 2872 6573 706f 6e73 652c 2027 7265  ue(response, 're
+00040de0: 7375 6c74 272c 207b 7d29 0a20 2020 2020  sult', {}).     
+00040df0: 2020 206f 7264 6572 7320 3d20 7365 6c66     orders = self
+00040e00: 2e73 6166 655f 7661 6c75 6528 7265 7375  .safe_value(resu
+00040e10: 6c74 2c20 276c 6973 7427 2c20 5b5d 290a  lt, 'list', []).
+00040e20: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00040e30: 656c 662e 7061 7273 655f 6f72 6465 7273  elf.parse_orders
+00040e40: 286f 7264 6572 732c 206d 6172 6b65 742c  (orders, market,
+00040e50: 2073 696e 6365 2c20 6c69 6d69 7429 0a0a   since, limit)..
+00040e60: 2020 2020 6465 6620 6665 7463 685f 756e      def fetch_un
+00040e70: 6966 6965 645f 6d61 7267 696e 5f6f 7065  ified_margin_ope
+00040e80: 6e5f 6f72 6465 7273 2873 656c 662c 2073  n_orders(self, s
+00040e90: 796d 626f 6c3a 204f 7074 696f 6e61 6c5b  ymbol: Optional[
+00040ea0: 7374 725d 203d 204e 6f6e 652c 2073 696e  str] = None, sin
+00040eb0: 6365 3a20 4f70 7469 6f6e 616c 5b69 6e74  ce: Optional[int
+00040ec0: 5d20 3d20 4e6f 6e65 2c20 6c69 6d69 743a  ] = None, limit:
+00040ed0: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
+00040ee0: 204e 6f6e 652c 2070 6172 616d 733d 7b7d   None, params={}
+00040ef0: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
+00040f00: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
+00040f10: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+00040f20: 207b 7d0a 2020 2020 2020 2020 6d61 726b   {}.        mark
+00040f30: 6574 203d 204e 6f6e 650a 2020 2020 2020  et = None.      
+00040f40: 2020 6966 2073 796d 626f 6c20 6973 204e    if symbol is N
+00040f50: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00040f60: 2073 7562 5479 7065 203d 204e 6f6e 650a   subType = None.
+00040f70: 2020 2020 2020 2020 2020 2020 7375 6254              subT
+00040f80: 7970 652c 2070 6172 616d 7320 3d20 7365  ype, params = se
+00040f90: 6c66 2e68 616e 646c 655f 7375 625f 7479  lf.handle_sub_ty
+00040fa0: 7065 5f61 6e64 5f70 6172 616d 7328 2766  pe_and_params('f
+00040fb0: 6574 6368 556e 6966 6965 644d 6172 6769  etchUnifiedMargi
+00040fc0: 6e4f 7264 6572 7327 2c20 6d61 726b 6574  nOrders', market
+00040fd0: 2c20 7061 7261 6d73 2c20 276c 696e 6561  , params, 'linea
+00040fe0: 7227 290a 2020 2020 2020 2020 2020 2020  r').            
+00040ff0: 7265 7175 6573 745b 2763 6174 6567 6f72  request['categor
+00041000: 7927 5d20 3d20 7375 6254 7970 650a 2020  y'] = subType.  
+00041010: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00041020: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
+00041030: 2073 656c 662e 6d61 726b 6574 2873 796d   self.market(sym
+00041040: 626f 6c29 0a20 2020 2020 2020 2020 2020  bol).           
+00041050: 2072 6571 7565 7374 5b27 7379 6d62 6f6c   request['symbol
+00041060: 275d 203d 206d 6172 6b65 745b 2769 6427  '] = market['id'
+00041070: 5d0a 2020 2020 2020 2020 2020 2020 6966  ].            if
+00041080: 206d 6172 6b65 745b 276f 7074 696f 6e27   market['option'
+00041090: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+000410a0: 2020 2072 6571 7565 7374 5b27 6361 7465     request['cate
+000410b0: 676f 7279 275d 203d 2027 6f70 7469 6f6e  gory'] = 'option
+000410c0: 270a 2020 2020 2020 2020 2020 2020 656c  '.            el
+000410d0: 6966 206d 6172 6b65 745b 276c 696e 6561  if market['linea
+000410e0: 7227 5d3a 0a20 2020 2020 2020 2020 2020  r']:.           
+000410f0: 2020 2020 2072 6571 7565 7374 5b27 6361       request['ca
+00041100: 7465 676f 7279 275d 203d 2027 6c69 6e65  tegory'] = 'line
+00041110: 6172 270a 2020 2020 2020 2020 2020 2020  ar'.            
+00041120: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00041130: 2020 2020 2020 7261 6973 6520 4e6f 7453        raise NotS
+00041140: 7570 706f 7274 6564 2873 656c 662e 6964  upported(self.id
+00041150: 202b 2027 2066 6574 6368 556e 6966 6965   + ' fetchUnifie
+00041160: 644d 6172 6769 6e4f 7065 6e4f 7264 6572  dMarginOpenOrder
+00041170: 7328 2920 646f 6573 206e 6f74 2061 6c6c  s() does not all
+00041180: 6f77 2069 6e76 6572 7365 206d 6172 6b65  ow inverse marke
+00041190: 7420 6f72 6465 7273 2066 6f72 2027 202b  t orders for ' +
+000411a0: 2073 796d 626f 6c20 2b20 2720 6d61 726b   symbol + ' mark
+000411b0: 6574 7327 290a 2020 2020 2020 2020 7479  ets').        ty
+000411c0: 7065 203d 204e 6f6e 650a 2020 2020 2020  pe = None.      
+000411d0: 2020 7479 7065 2c20 7061 7261 6d73 203d    type, params =
+000411e0: 2073 656c 662e 6861 6e64 6c65 5f6d 6172   self.handle_mar
+000411f0: 6b65 745f 7479 7065 5f61 6e64 5f70 6172  ket_type_and_par
+00041200: 616d 7328 2766 6574 6368 556e 6966 6965  ams('fetchUnifie
+00041210: 644d 6172 6769 6e4f 7065 6e4f 7264 6572  dMarginOpenOrder
+00041220: 7327 2c20 6d61 726b 6574 2c20 7061 7261  s', market, para
+00041230: 6d73 290a 2020 2020 2020 2020 6973 5374  ms).        isSt
+00041240: 6f70 203d 2073 656c 662e 7361 6665 5f76  op = self.safe_v
+00041250: 616c 7565 2870 6172 616d 732c 2027 7374  alue(params, 'st
+00041260: 6f70 272c 2046 616c 7365 290a 2020 2020  op', False).    
+00041270: 2020 2020 6973 436f 6e64 6974 696f 6e61      isConditiona
+00041280: 6c20 3d20 6973 5374 6f70 206f 7220 2874  l = isStop or (t
+00041290: 7970 6520 3d3d 2027 7374 6f70 2729 206f  ype == 'stop') o
+000412a0: 7220 2874 7970 6520 3d3d 2027 636f 6e64  r (type == 'cond
+000412b0: 6974 696f 6e61 6c27 290a 2020 2020 2020  itional').      
+000412c0: 2020 7061 7261 6d73 203d 2073 656c 662e    params = self.
+000412d0: 6f6d 6974 2870 6172 616d 732c 205b 2773  omit(params, ['s
+000412e0: 746f 7027 5d29 0a20 2020 2020 2020 2069  top']).        i
+000412f0: 6620 6973 436f 6e64 6974 696f 6e61 6c3a  f isConditional:
+00041300: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+00041310: 7565 7374 5b27 6f72 6465 7246 696c 7465  uest['orderFilte
+00041320: 7227 5d20 3d20 2753 746f 704f 7264 6572  r'] = 'StopOrder
+00041330: 270a 2020 2020 2020 2020 6966 206c 696d  '.        if lim
+00041340: 6974 2069 7320 6e6f 7420 4e6f 6e65 3a0a  it is not None:.
+00041350: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+00041360: 6573 745b 276c 696d 6974 275d 203d 206c  est['limit'] = l
+00041370: 696d 6974 0a20 2020 2020 2020 2072 6573  imit.        res
+00041380: 706f 6e73 6520 3d20 7365 6c66 2e70 7269  ponse = self.pri
+00041390: 7661 7465 4765 7455 6e69 6669 6564 5633  vateGetUnifiedV3
+000413a0: 5072 6976 6174 654f 7264 6572 556e 6669  PrivateOrderUnfi
+000413b0: 6c6c 6564 4f72 6465 7273 2873 656c 662e  lledOrders(self.
+000413c0: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
+000413d0: 7061 7261 6d73 2929 0a20 2020 2020 2020  params)).       
+000413e0: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
+000413f0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+00041400: 2020 2020 2022 7265 7443 6f64 6522 3a20       "retCode": 
+00041410: 302c 0a20 2020 2020 2020 2023 2020 2020  0,.        #    
+00041420: 2020 2020 2022 7265 744d 7367 223a 2022       "retMsg": "
+00041430: 5375 6363 6573 7322 2c0a 2020 2020 2020  Success",.      
+00041440: 2020 2320 2020 2020 2020 2020 2272 6573    #         "res
+00041450: 756c 7422 3a20 7b0a 2020 2020 2020 2020  ult": {.        
+00041460: 2320 2020 2020 2020 2020 2020 2020 226e  #             "n
+00041470: 6578 7450 6167 6543 7572 736f 7222 3a20  extPageCursor": 
+00041480: 2231 3335 6363 6330 642d 3831 3336 2d34  "135ccc0d-8136-4
+00041490: 6531 622d 3861 6633 2d30 3762 3131 6565  e1b-8af3-07b11ee
+000414a0: 3135 3864 3125 3341 3136 3635 3536 3536  158d1%3A16655656
+000414b0: 3130 3532 3625 3243 3133 3563 6363 3064  10526%2C135ccc0d
+000414c0: 2d38 3133 362d 3465 3162 2d38 6166 332d  -8136-4e1b-8af3-
+000414d0: 3037 6231 3165 6531 3538 6431 2533 4131  07b11ee158d1%3A1
+000414e0: 3636 3535 3635 3631 3035 3236 222c 0a20  665565610526",. 
+000414f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00041500: 2020 2020 2022 6361 7465 676f 7279 223a       "category":
+00041510: 2022 6c69 6e65 6172 222c 0a20 2020 2020   "linear",.     
+00041520: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00041530: 2022 6c69 7374 223a 205b 0a20 2020 2020   "list": [.     
+00041540: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00041550: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+00041560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041570: 2020 2020 2022 7379 6d62 6f6c 223a 2022       "symbol": "
+00041580: 4554 4855 5344 5422 2c0a 2020 2020 2020  ETHUSDT",.      
+00041590: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+000415a0: 2020 2020 2020 2020 226f 7264 6572 5479          "orderTy
+000415b0: 7065 223a 2022 4c69 6d69 7422 2c0a 2020  pe": "Limit",.  
+000415c0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000415d0: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+000415e0: 6572 4c69 6e6b 4964 223a 2022 7465 7374  erLinkId": "test
+000415f0: 3030 3030 3030 3522 2c0a 2020 2020 2020  0000005",.      
+00041600: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00041610: 2020 2020 2020 2020 226f 7264 6572 4964          "orderId
+00041620: 223a 2022 3133 3563 6363 3064 2d38 3133  ": "135ccc0d-813
+00041630: 362d 3465 3162 2d38 6166 332d 3037 6231  6-4e1b-8af3-07b1
+00041640: 3165 6531 3538 6431 222c 0a20 2020 2020  1ee158d1",.     
+00041650: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00041660: 2020 2020 2020 2020 2022 7374 6f70 4f72           "stopOr
+00041670: 6465 7254 7970 6522 3a20 2255 4e4b 4e4f  derType": "UNKNO
+00041680: 574e 222c 0a20 2020 2020 2020 2023 2020  WN",.        #  
+00041690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000416a0: 2020 2022 6f72 6465 7253 7461 7475 7322     "orderStatus"
+000416b0: 3a20 224e 6577 222c 0a20 2020 2020 2020  : "New",.       
+000416c0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+000416d0: 2020 2020 2020 2022 7461 6b65 5072 6f66         "takeProf
+000416e0: 6974 223a 2022 222c 0a20 2020 2020 2020  it": "",.       
+000416f0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00041700: 2020 2020 2020 2022 6375 6d45 7865 6356         "cumExecV
+00041710: 616c 7565 223a 2022 302e 3030 3030 3030  alue": "0.000000
+00041720: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+00041730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041740: 2020 2022 626c 6f63 6b54 7261 6465 4964     "blockTradeId
+00041750: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
+00041760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041770: 2020 2020 2022 7072 6963 6522 3a20 2237       "price": "7
+00041780: 3030 2e30 3030 3030 3030 3022 2c0a 2020  00.00000000",.  
+00041790: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000417a0: 2020 2020 2020 2020 2020 2020 2263 7265              "cre
+000417b0: 6174 6564 5469 6d65 223a 2031 3636 3535  atedTime": 16655
+000417c0: 3635 3631 3035 3236 2c0a 2020 2020 2020  65610526,.      
+000417d0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+000417e0: 2020 2020 2020 2020 2274 7054 7269 6767          "tpTrigg
+000417f0: 6572 4279 223a 2022 554e 4b4e 4f57 4e22  erBy": "UNKNOWN"
+00041800: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00041810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041820: 2274 696d 6549 6e46 6f72 6365 223a 2022  "timeInForce": "
+00041830: 476f 6f64 5469 6c6c 4361 6e63 656c 222c  GoodTillCancel",
+00041840: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00041850: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00041860: 6261 7365 5072 6963 6522 3a20 2222 2c0a  basePrice": "",.
+00041870: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00041880: 2020 2020 2020 2020 2020 2020 2020 2275                "u
+00041890: 7064 6174 6564 5469 6d65 223a 2031 3636  pdatedTime": 166
+000418a0: 3535 3635 3631 3035 3333 2c0a 2020 2020  5565610533,.    
+000418b0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+000418c0: 2020 2020 2020 2020 2020 2273 6964 6522            "side"
+000418d0: 3a20 2242 7579 222c 0a20 2020 2020 2020  : "Buy",.       
+000418e0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+000418f0: 2020 2020 2020 2022 7472 6967 6765 7250         "triggerP
+00041900: 7269 6365 223a 2022 222c 0a20 2020 2020  rice": "",.     
+00041910: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00041920: 2020 2020 2020 2020 2022 6375 6d45 7865           "cumExe
+00041930: 6346 6565 223a 2022 302e 3030 3030 3030  cFee": "0.000000
+00041940: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+00041950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041960: 2020 2022 736c 5472 6967 6765 7242 7922     "slTriggerBy"
+00041970: 3a20 2255 4e4b 4e4f 574e 222c 0a20 2020  : "UNKNOWN",.   
+00041980: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00041990: 2020 2020 2020 2020 2020 2022 6c65 6176             "leav
+000419a0: 6573 5174 7922 3a20 2230 2e31 3030 3022  esQty": "0.1000"
+000419b0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000419c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000419d0: 2263 6c6f 7365 4f6e 5472 6967 6765 7222  "closeOnTrigger"
+000419e0: 3a20 4661 6c73 652c 0a20 2020 2020 2020  : False,.       
+000419f0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00041a00: 2020 2020 2020 2022 6375 6d45 7865 6351         "cumExecQ
+00041a10: 7479 223a 2022 302e 3030 3030 3030 3030  ty": "0.00000000
+00041a20: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00041a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041a40: 2022 7265 6475 6365 4f6e 6c79 223a 2046   "reduceOnly": F
+00041a50: 616c 7365 2c0a 2020 2020 2020 2020 2320  alse,.        # 
+00041a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041a70: 2020 2020 2271 7479 223a 2022 302e 3130      "qty": "0.10
+00041a80: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+00041a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041aa0: 2020 2022 7374 6f70 4c6f 7373 223a 2022     "stopLoss": "
+00041ab0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00041ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041ad0: 2022 7472 6967 6765 7242 7922 3a20 2255   "triggerBy": "U
+00041ae0: 4e4b 4e4f 574e 222c 0a20 2020 2020 2020  NKNOWN",.       
+00041af0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00041b00: 2020 2020 2020 2022 6f72 6465 7249 4d22         "orderIM"
+00041b10: 3a20 2230 2e30 3030 3030 3030 3022 0a20  : "0.00000000". 
+00041b20: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00041b30: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+00041b40: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00041b50: 205d 0a20 2020 2020 2020 2023 2020 2020   ].        #    
+00041b60: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
+00041b70: 2320 2020 2020 2020 2020 2272 6574 4578  #         "retEx
+00041b80: 7449 6e66 6f22 3a20 6e75 6c6c 2c0a 2020  tInfo": null,.  
+00041b90: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00041ba0: 2274 696d 6522 3a20 3136 3635 3536 3536  "time": 16655656
+00041bb0: 3134 3332 300a 2020 2020 2020 2020 2320  14320.        # 
+00041bc0: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
+00041bd0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00041be0: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+00041bf0: 2872 6573 706f 6e73 652c 2027 7265 7375  (response, 'resu
+00041c00: 6c74 272c 207b 7d29 0a20 2020 2020 2020  lt', {}).       
+00041c10: 206f 7264 6572 7320 3d20 7365 6c66 2e73   orders = self.s
+00041c20: 6166 655f 7661 6c75 6528 7265 7375 6c74  afe_value(result
+00041c30: 2c20 276c 6973 7427 2c20 5b5d 290a 2020  , 'list', []).  
+00041c40: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00041c50: 662e 7061 7273 655f 6f72 6465 7273 286f  f.parse_orders(o
+00041c60: 7264 6572 732c 206d 6172 6b65 742c 2073  rders, market, s
+00041c70: 696e 6365 2c20 6c69 6d69 7429 0a0a 2020  ince, limit)..  
+00041c80: 2020 6465 6620 6665 7463 685f 6465 7269    def fetch_deri
+00041c90: 7661 7469 7665 735f 6f70 656e 5f6f 7264  vatives_open_ord
+00041ca0: 6572 7328 7365 6c66 2c20 7379 6d62 6f6c  ers(self, symbol
+00041cb0: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
+00041cc0: 3d20 4e6f 6e65 2c20 7369 6e63 653a 204f  = None, since: O
+00041cd0: 7074 696f 6e61 6c5b 696e 745d 203d 204e  ptional[int] = N
+00041ce0: 6f6e 652c 206c 696d 6974 3a20 4f70 7469  one, limit: Opti
+00041cf0: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
+00041d00: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
+00041d10: 2020 2020 2020 7365 6c66 2e6c 6f61 645f        self.load_
+00041d20: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
+00041d30: 2020 6d61 726b 6574 203d 204e 6f6e 650a    market = None.
+00041d40: 2020 2020 2020 2020 7365 7474 6c65 203d          settle =
+00041d50: 204e 6f6e 650a 2020 2020 2020 2020 7265   None.        re
+00041d60: 7175 6573 7420 3d20 7b0a 2020 2020 2020  quest = {.      
+00041d70: 2020 2020 2020 2320 2773 796d 626f 6c27        # 'symbol'
+00041d80: 3a20 6d61 726b 6574 5b27 6964 275d 2c0a  : market['id'],.
+00041d90: 2020 2020 2020 2020 2020 2020 2320 2763              # 'c
+00041da0: 6174 6567 6f72 7927 2c20 5479 7065 206f  ategory', Type o
+00041db0: 6620 6465 7269 7661 7469 7665 7320 7072  f derivatives pr
+00041dc0: 6f64 7563 743a 206c 696e 6561 7220 6f72  oduct: linear or
+00041dd0: 206f 7074 696f 6e2e 0a20 2020 2020 2020   option..       
+00041de0: 2020 2020 2023 2027 6261 7365 436f 696e       # 'baseCoin
+00041df0: 272c 2042 6173 6520 636f 696e 2e20 5768  ', Base coin. Wh
+00041e00: 656e 2063 6174 6567 6f72 793d 6f70 7469  en category=opti
+00041e10: 6f6e 2e20 4966 206e 6f74 2070 6173 7365  on. If not passe
+00041e20: 642c 2042 5443 2062 7920 6465 6661 756c  d, BTC by defaul
+00041e30: 743b 2077 6865 6e20 6361 7465 676f 7279  t; when category
+00041e40: 3d6c 696e 6561 722c 2069 6620 4254 4320  =linear, if BTC 
+00041e50: 7061 7373 6564 2c20 4254 4350 4552 5020  passed, BTCPERP 
+00041e60: 2620 4254 4355 5344 5420 7265 7475 726e  & BTCUSDT return
+00041e70: 6564 2e0a 2020 2020 2020 2020 2020 2020  ed..            
+00041e80: 2320 2773 6574 746c 6543 6f69 6e27 2c20  # 'settleCoin', 
+00041e90: 5365 7474 6c65 2063 6f69 6e2e 2046 6f72  Settle coin. For
+00041ea0: 206c 696e 6561 722c 2065 6974 6865 7220   linear, either 
+00041eb0: 7379 6d62 6f6c 206f 7220 7365 7474 6c65  symbol or settle
+00041ec0: 436f 696e 2069 7320 7265 7175 6972 6564  Coin is required
+00041ed0: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+00041ee0: 6f72 6465 7249 6427 2c20 4f72 6465 7220  orderId', Order 
+00041ef0: 4944 0a20 2020 2020 2020 2020 2020 2023  ID.            #
+00041f00: 2027 6f72 6465 724c 696e 6b49 6427 2c20   'orderLinkId', 
+00041f10: 556e 6971 7565 2075 7365 722d 7365 7420  Unique user-set 
+00041f20: 6f72 6465 7220 4944 0a20 2020 2020 2020  order ID.       
+00041f30: 2020 2020 2023 2027 6f72 6465 7246 696c       # 'orderFil
+00041f40: 7465 7227 2c20 436f 6e64 6974 696f 6e61  ter', Conditiona
+00041f50: 6c20 6f72 6465 7220 6f72 2061 6374 6976  l order or activ
+00041f60: 6520 6f72 6465 720a 2020 2020 2020 2020  e order.        
+00041f70: 2020 2020 2320 276c 696d 6974 273a 206e      # 'limit': n
+00041f80: 756d 6265 722c 2044 6174 6120 7175 616e  umber, Data quan
+00041f90: 7469 7479 2070 6572 2070 6167 653a 204d  tity per page: M
+00041fa0: 6178 2064 6174 6120 7661 6c75 6520 7065  ax data value pe
+00041fb0: 7220 7061 6765 2069 7320 3530 2c20 616e  r page is 50, an
+00041fc0: 6420 6465 6661 756c 7420 7661 6c75 6520  d default value 
+00041fd0: 6174 2032 302e 0a20 2020 2020 2020 2020  at 20..         
+00041fe0: 2020 2023 2027 6375 7273 6f72 272c 2041     # 'cursor', A
+00041ff0: 5049 2070 6173 732d 7468 726f 7567 682e  PI pass-through.
+00042000: 2061 6363 6f75 6e74 5479 7065 202b 2063   accountType + c
+00042010: 6174 6567 6f72 7920 2b20 6375 7273 6f72  ategory + cursor
+00042020: 202b 2e20 4966 2069 6e63 6f6e 7369 7374   +. If inconsist
+00042030: 656e 742c 2074 6865 2066 6f6c 6c6f 7769  ent, the followi
+00042040: 6e67 2073 686f 756c 6420 6265 2072 6574  ng should be ret
+00042050: 7572 6e65 643a 2054 6865 2061 6363 6f75  urned: The accou
+00042060: 6e74 2074 7970 6520 646f 6573 206e 6f74  nt type does not
+00042070: 206d 6174 6368 2074 6865 2073 6572 7669   match the servi
+00042080: 6365 2069 6e71 7569 7279 2e0a 2020 2020  ce inquiry..    
+00042090: 2020 2020 2020 2020 2320 276f 7065 6e4f          # 'openO
+000420a0: 6e6c 7927 3a20 302c 0a20 2020 2020 2020  nly': 0,.       
+000420b0: 207d 0a20 2020 2020 2020 2069 6620 7379   }.        if sy
+000420c0: 6d62 6f6c 2069 7320 6e6f 7420 4e6f 6e65  mbol is not None
+000420d0: 3a0a 2020 2020 2020 2020 2020 2020 6d61  :.            ma
+000420e0: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
+000420f0: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
+00042100: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+00042110: 7379 6d62 6f6c 275d 203d 206d 6172 6b65  symbol'] = marke
+00042120: 745b 2769 6427 5d0a 2020 2020 2020 2020  t['id'].        
+00042130: 2020 2020 6966 206d 6172 6b65 745b 276c      if market['l
+00042140: 696e 6561 7227 5d3a 0a20 2020 2020 2020  inear']:.       
+00042150: 2020 2020 2020 2020 2072 6571 7565 7374           request
+00042160: 5b27 6361 7465 676f 7279 275d 203d 2027  ['category'] = '
+00042170: 6c69 6e65 6172 270a 2020 2020 2020 2020  linear'.        
+00042180: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00042190: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+000421a0: 745b 2763 6174 6567 6f72 7927 5d20 3d20  t['category'] = 
+000421b0: 2769 6e76 6572 7365 270a 2020 2020 2020  'inverse'.      
+000421c0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+000421d0: 2020 2020 7479 7065 203d 204e 6f6e 650a      type = None.
+000421e0: 2020 2020 2020 2020 2020 2020 7479 7065              type
+000421f0: 2c20 7061 7261 6d73 203d 2073 656c 662e  , params = self.
+00042200: 6861 6e64 6c65 5f6d 6172 6b65 745f 7479  handle_market_ty
+00042210: 7065 5f61 6e64 5f70 6172 616d 7328 2766  pe_and_params('f
+00042220: 6574 6368 4f70 656e 4f72 6465 7273 272c  etchOpenOrders',
+00042230: 206d 6172 6b65 742c 2070 6172 616d 7329   market, params)
+00042240: 0a20 2020 2020 2020 2020 2020 2073 7562  .            sub
+00042250: 5479 7065 203d 204e 6f6e 650a 2020 2020  Type = None.    
+00042260: 2020 2020 2020 2020 7375 6254 7970 652c          subType,
+00042270: 2070 6172 616d 7320 3d20 7365 6c66 2e68   params = self.h
+00042280: 616e 646c 655f 7375 625f 7479 7065 5f61  andle_sub_type_a
+00042290: 6e64 5f70 6172 616d 7328 2766 6574 6368  nd_params('fetch
+000422a0: 4f70 656e 4f72 6465 7273 272c 206d 6172  OpenOrders', mar
+000422b0: 6b65 742c 2070 6172 616d 732c 2027 6c69  ket, params, 'li
+000422c0: 6e65 6172 2729 0a20 2020 2020 2020 2020  near').         
+000422d0: 2020 2072 6571 7565 7374 5b27 6361 7465     request['cate
+000422e0: 676f 7279 275d 203d 2074 7970 650a 2020  gory'] = type.  
+000422f0: 2020 2020 2020 2020 2020 6966 2074 7970            if typ
+00042300: 6520 3d3d 2027 7377 6170 273a 0a20 2020  e == 'swap':.   
+00042310: 2020 2020 2020 2020 2020 2020 2072 6571               req
+00042320: 7565 7374 5b27 6361 7465 676f 7279 275d  uest['category']
+00042330: 203d 2073 7562 5479 7065 0a20 2020 2020   = subType.     
+00042340: 2020 2073 6574 746c 652c 2070 6172 616d     settle, param
+00042350: 7320 3d20 7365 6c66 2e68 616e 646c 655f  s = self.handle_
+00042360: 6f70 7469 6f6e 5f61 6e64 5f70 6172 616d  option_and_param
+00042370: 7328 7061 7261 6d73 2c20 2766 6574 6368  s(params, 'fetch
+00042380: 4f70 656e 4f72 6465 7273 272c 2027 7365  OpenOrders', 'se
+00042390: 7474 6c65 272c 2073 6574 746c 6529 0a20  ttle', settle). 
+000423a0: 2020 2020 2020 2069 6620 7365 7474 6c65         if settle
+000423b0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+000423c0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+000423d0: 745b 2773 6574 746c 6543 6f69 6e27 5d20  t['settleCoin'] 
+000423e0: 3d20 7365 7474 6c65 0a20 2020 2020 2020  = settle.       
+000423f0: 2069 7353 746f 7020 3d20 7365 6c66 2e73   isStop = self.s
+00042400: 6166 655f 7661 6c75 6528 7061 7261 6d73  afe_value(params
+00042410: 2c20 2773 746f 7027 2c20 4661 6c73 6529  , 'stop', False)
+00042420: 0a20 2020 2020 2020 2070 6172 616d 7320  .        params 
+00042430: 3d20 7365 6c66 2e6f 6d69 7428 7061 7261  = self.omit(para
+00042440: 6d73 2c20 5b27 7374 6f70 275d 290a 2020  ms, ['stop']).  
+00042450: 2020 2020 2020 6966 2069 7353 746f 703a        if isStop:
+00042460: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+00042470: 7565 7374 5b27 6f72 6465 7246 696c 7465  uest['orderFilte
+00042480: 7227 5d20 3d20 2753 746f 704f 7264 6572  r'] = 'StopOrder
+00042490: 270a 2020 2020 2020 2020 6966 206c 696d  '.        if lim
+000424a0: 6974 2069 7320 6e6f 7420 4e6f 6e65 3a0a  it is not None:.
+000424b0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+000424c0: 6573 745b 276c 696d 6974 275d 203d 206c  est['limit'] = l
+000424d0: 696d 6974 0a20 2020 2020 2020 2072 6573  imit.        res
+000424e0: 706f 6e73 6520 3d20 7365 6c66 2e70 7269  ponse = self.pri
+000424f0: 7661 7465 4765 7456 354f 7264 6572 5265  vateGetV5OrderRe
+00042500: 616c 7469 6d65 2873 656c 662e 6578 7465  altime(self.exte
+00042510: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
+00042520: 6d73 2929 0a20 2020 2020 2020 2023 0a20  ms)).        #. 
+00042530: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
+00042540: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00042550: 2022 7265 7443 6f64 6522 3a20 302c 0a20   "retCode": 0,. 
+00042560: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00042570: 2022 7265 744d 7367 223a 2022 4f4b 222c   "retMsg": "OK",
+00042580: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00042590: 2020 2022 7265 7375 6c74 223a 207b 0a20     "result": {. 
+000425a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000425b0: 2020 2020 2022 6e65 7874 5061 6765 4375       "nextPageCu
+000425c0: 7273 6f72 223a 2022 3133 3231 3035 3236  rsor": "13210526
+000425d0: 3533 3533 3635 3135 3538 3425 3341 3136  53536515584%3A16
+000425e0: 3732 3231 3737 3438 3238 3725 3243 3133  72217748287%2C13
+000425f0: 3231 3035 3236 3533 3533 3635 3135 3538  2105265353651558
+00042600: 3425 3341 3136 3732 3231 3737 3438 3238  4%3A167221774828
+00042610: 3722 2c0a 2020 2020 2020 2020 2320 2020  7",.        #   
+00042620: 2020 2020 2020 2020 2020 2263 6174 6567            "categ
+00042630: 6f72 7922 3a20 2273 706f 7422 2c0a 2020  ory": "spot",.  
+00042640: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00042650: 2020 2020 226c 6973 7422 3a20 5b0a 2020      "list": [.  
+00042660: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00042670: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+00042680: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00042690: 2020 2020 2020 2020 2273 796d 626f 6c22          "symbol"
+000426a0: 3a20 2245 5448 5553 4454 222c 0a20 2020  : "ETHUSDT",.   
+000426b0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+000426c0: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
+000426d0: 7254 7970 6522 3a20 224c 696d 6974 222c  rType": "Limit",
+000426e0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000426f0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00042700: 6f72 6465 724c 696e 6b49 6422 3a20 2231  orderLinkId": "1
+00042710: 3637 3232 3137 3734 3832 3737 3635 3222  672217748277652"
+00042720: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00042730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042740: 226f 7264 6572 4964 223a 2022 3133 3231  "orderId": "1321
+00042750: 3035 3236 3533 3533 3635 3135 3538 3422  052653536515584"
+00042760: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00042770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042780: 2263 616e 6365 6c54 7970 6522 3a20 2255  "cancelType": "U
+00042790: 4e4b 4e4f 574e 222c 0a20 2020 2020 2020  NKNOWN",.       
+000427a0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+000427b0: 2020 2020 2020 2022 6176 6750 7269 6365         "avgPrice
+000427c0: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
+000427d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000427e0: 2020 2020 2022 7374 6f70 4f72 6465 7254       "stopOrderT
+000427f0: 7970 6522 3a20 2274 7073 6c4f 7264 6572  ype": "tpslOrder
+00042800: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00042810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042820: 2022 6c61 7374 5072 6963 654f 6e43 7265   "lastPriceOnCre
+00042830: 6174 6564 223a 2022 222c 0a20 2020 2020  ated": "",.     
+00042840: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00042850: 2020 2020 2020 2020 2022 6f72 6465 7253           "orderS
+00042860: 7461 7475 7322 3a20 2243 616e 6365 6c6c  tatus": "Cancell
+00042870: 6564 222c 0a20 2020 2020 2020 2023 2020  ed",.        #  
 00042880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042890: 2020 2020 2022 7472 6967 6765 7242 7922       "triggerBy"
-000428a0: 3a20 2231 3139 322e 3522 0a20 2020 2020  : "1192.5".     
-000428b0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-000428c0: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
-000428d0: 2020 2020 2020 2020 2020 2020 205d 0a20               ]. 
-000428e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000428f0: 207d 2c0a 2020 2020 2020 2020 2320 2020   },.        #   
-00042900: 2020 2020 2020 2272 6574 4578 7449 6e66        "retExtInf
-00042910: 6f22 3a20 7b7d 2c0a 2020 2020 2020 2020  o": {},.        
-00042920: 2320 2020 2020 2020 2020 2274 696d 6522  #         "time"
-00042930: 3a20 3136 3732 3231 3935 3236 3239 340a  : 1672219526294.
-00042940: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-00042950: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-00042960: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
-00042970: 7361 6665 5f76 616c 7565 2872 6573 706f  safe_value(respo
-00042980: 6e73 652c 2027 7265 7375 6c74 272c 207b  nse, 'result', {
-00042990: 7d29 0a20 2020 2020 2020 206f 7264 6572  }).        order
-000429a0: 7320 3d20 7365 6c66 2e73 6166 655f 7661  s = self.safe_va
-000429b0: 6c75 6528 7265 7375 6c74 2c20 276c 6973  lue(result, 'lis
-000429c0: 7427 2c20 5b5d 290a 2020 2020 2020 2020  t', []).        
-000429d0: 7265 7475 726e 2073 656c 662e 7061 7273  return self.pars
-000429e0: 655f 6f72 6465 7273 286f 7264 6572 732c  e_orders(orders,
-000429f0: 206d 6172 6b65 742c 2073 696e 6365 2c20   market, since, 
-00042a00: 6c69 6d69 7429 0a0a 2020 2020 6465 6620  limit)..    def 
-00042a10: 6665 7463 685f 7573 6463 5f6f 7065 6e5f  fetch_usdc_open_
-00042a20: 6f72 6465 7273 2873 656c 662c 2073 796d  orders(self, sym
-00042a30: 626f 6c3a 204f 7074 696f 6e61 6c5b 7374  bol: Optional[st
-00042a40: 725d 203d 204e 6f6e 652c 2073 696e 6365  r] = None, since
-00042a50: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
-00042a60: 3d20 4e6f 6e65 2c20 6c69 6d69 743a 204f  = None, limit: O
-00042a70: 7074 696f 6e61 6c5b 696e 745d 203d 204e  ptional[int] = N
-00042a80: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
-00042a90: 0a20 2020 2020 2020 2073 656c 662e 6c6f  .        self.lo
-00042aa0: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
-00042ab0: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
-00042ac0: 7d0a 2020 2020 2020 2020 6d61 726b 6574  }.        market
-00042ad0: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-00042ae0: 6966 2073 796d 626f 6c20 6973 206e 6f74  if symbol is not
-00042af0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00042b00: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
-00042b10: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
-00042b20: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00042b30: 6573 745b 2773 796d 626f 6c27 5d20 3d20  est['symbol'] = 
-00042b40: 6d61 726b 6574 5b27 6964 275d 0a20 2020  market['id'].   
-00042b50: 2020 2020 2074 7970 6520 3d20 4e6f 6e65       type = None
-00042b60: 0a20 2020 2020 2020 2074 7970 652c 2070  .        type, p
-00042b70: 6172 616d 7320 3d20 7365 6c66 2e68 616e  arams = self.han
-00042b80: 646c 655f 6d61 726b 6574 5f74 7970 655f  dle_market_type_
-00042b90: 616e 645f 7061 7261 6d73 2827 6665 7463  and_params('fetc
-00042ba0: 6855 5344 434f 7065 6e4f 7264 6572 7327  hUSDCOpenOrders'
-00042bb0: 2c20 6d61 726b 6574 2c20 7061 7261 6d73  , market, params
-00042bc0: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
-00042bd0: 745b 2763 6174 6567 6f72 7927 5d20 3d20  t['category'] = 
-00042be0: 2770 6572 7065 7475 616c 2720 6966 2028  'perpetual' if (
-00042bf0: 7479 7065 203d 3d20 2773 7761 7027 2920  type == 'swap') 
-00042c00: 656c 7365 2027 6f70 7469 6f6e 270a 2020  else 'option'.  
-00042c10: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
-00042c20: 2073 656c 662e 7072 6976 6174 6550 6f73   self.privatePos
-00042c30: 744f 7074 696f 6e55 7364 634f 7065 6e61  tOptionUsdcOpena
-00042c40: 7069 5072 6976 6174 6556 3151 7565 7279  piPrivateV1Query
-00042c50: 4163 7469 7665 4f72 6465 7273 2873 656c  ActiveOrders(sel
-00042c60: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
-00042c70: 2c20 7061 7261 6d73 2929 0a20 2020 2020  , params)).     
-00042c80: 2020 2072 6573 756c 7420 3d20 7365 6c66     result = self
-00042c90: 2e73 6166 655f 7661 6c75 6528 7265 7370  .safe_value(resp
-00042ca0: 6f6e 7365 2c20 2772 6573 756c 7427 2c20  onse, 'result', 
-00042cb0: 7b7d 290a 2020 2020 2020 2020 6f72 6465  {}).        orde
-00042cc0: 7273 203d 2073 656c 662e 7361 6665 5f76  rs = self.safe_v
-00042cd0: 616c 7565 2872 6573 756c 742c 2027 6461  alue(result, 'da
-00042ce0: 7461 4c69 7374 272c 205b 5d29 0a20 2020  taList', []).   
-00042cf0: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-00042d00: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
-00042d10: 2020 2020 2020 2020 2022 7265 7443 6f64           "retCod
-00042d20: 6522 3a20 302c 0a20 2020 2020 2020 2023  e": 0,.        #
-00042d30: 2020 2020 2020 2020 2022 7265 744d 7367           "retMsg
-00042d40: 223a 2022 4f4b 222c 0a20 2020 2020 2020  ": "OK",.       
-00042d50: 2023 2020 2020 2020 2020 2022 7265 7375   #         "resu
-00042d60: 6c74 223a 207b 0a20 2020 2020 2020 2023  lt": {.        #
-00042d70: 2020 2020 2020 2020 2020 2020 2022 7265               "re
-00042d80: 7375 6c74 546f 7461 6c53 697a 6522 3a20  sultTotalSize": 
-00042d90: 312c 0a20 2020 2020 2020 2023 2020 2020  1,.        #    
-00042da0: 2020 2020 2020 2020 2022 6375 7273 6f72           "cursor
-00042db0: 223a 2022 6964 2533 4431 3636 3230 3139  ": "id%3D1662019
-00042dc0: 3831 3835 3639 2532 3364 6633 3165 3033  818569%23df31e03
-00042dd0: 622d 6663 3030 2d34 6234 632d 6264 3163  b-fc00-4b4c-bd1c
-00042de0: 2d62 3937 6664 3732 6235 6335 6322 2c0a  -b97fd72b5c5c",.
-00042df0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00042e00: 2020 2020 2020 2264 6174 614c 6973 7422        "dataList"
-00042e10: 3a20 5b0a 2020 2020 2020 2020 2320 2020  : [.        #   
-00042e20: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
-00042e30: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00042e40: 2020 2020 2020 2020 2020 2020 2020 226f                "o
-00042e50: 7264 6572 4964 223a 2022 6466 3331 6530  rderId": "df31e0
-00042e60: 3362 2d66 6330 302d 3462 3463 2d62 6431  3b-fc00-4b4c-bd1
-00042e70: 632d 6239 3766 6437 3262 3563 3563 222c  c-b97fd72b5c5c",
-00042e80: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00042e90: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00042ea0: 6f72 6465 724c 696e 6b49 6422 3a20 2222  orderLinkId": ""
-00042eb0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00042ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042ed0: 2273 796d 626f 6c22 3a20 2242 5443 2d32  "symbol": "BTC-2
-00042ee0: 5345 5032 322d 3138 3030 302d 4322 2c0a  SEP22-18000-C",.
-00042ef0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00042f00: 2020 2020 2020 2020 2020 2020 2020 226f                "o
-00042f10: 7264 6572 5374 6174 7573 223a 2022 4e65  rderStatus": "Ne
-00042f20: 7722 2c0a 2020 2020 2020 2020 2320 2020  w",.        #   
-00042f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042f40: 2020 226f 7264 6572 5072 6963 6522 3a20    "orderPrice": 
-00042f50: 2235 3030 222c 0a20 2020 2020 2020 2023  "500",.        #
-00042f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042f70: 2020 2020 2022 7369 6465 223a 2022 4275       "side": "Bu
-00042f80: 7922 2c0a 2020 2020 2020 2020 2320 2020  y",.        #   
-00042f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042fa0: 2020 2272 656d 6169 6e69 6e67 5174 7922    "remainingQty"
-00042fb0: 3a20 2230 2e31 222c 0a20 2020 2020 2020  : "0.1",.       
-00042fc0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00042fd0: 2020 2020 2020 2022 6f72 6465 7254 7970         "orderTyp
-00042fe0: 6522 3a20 224c 696d 6974 222c 0a20 2020  e": "Limit",.   
-00042ff0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00043000: 2020 2020 2020 2020 2020 2022 7174 7922             "qty"
-00043010: 3a20 2230 2e31 222c 0a20 2020 2020 2020  : "0.1",.       
-00043020: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00043030: 2020 2020 2020 2022 6976 223a 2022 302e         "iv": "0.
-00043040: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
-00043050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043060: 2020 2020 2022 6361 6e63 656c 5479 7065       "cancelType
-00043070: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
-00043080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043090: 2020 2020 2022 7570 6461 7465 5469 6d65       "updateTime
-000430a0: 7374 616d 7022 3a20 2231 3636 3230 3139  stamp": "1662019
-000430b0: 3831 3835 3739 220a 2020 2020 2020 2020  818579".        
-000430c0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-000430d0: 2020 7d0a 2020 2020 2020 2020 2320 2020    }.        #   
-000430e0: 2020 2020 2020 2020 2020 5d0a 2020 2020            ].    
-000430f0: 2020 2020 2320 2020 2020 2020 2020 7d0a      #         }.
-00043100: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-00043110: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-00043120: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
-00043130: 7273 655f 6f72 6465 7273 286f 7264 6572  rse_orders(order
-00043140: 732c 206d 6172 6b65 742c 2073 696e 6365  s, market, since
-00043150: 2c20 6c69 6d69 7429 0a0a 2020 2020 6465  , limit)..    de
-00043160: 6620 6665 7463 685f 6f70 656e 5f6f 7264  f fetch_open_ord
-00043170: 6572 7328 7365 6c66 2c20 7379 6d62 6f6c  ers(self, symbol
-00043180: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
-00043190: 3d20 4e6f 6e65 2c20 7369 6e63 653a 204f  = None, since: O
-000431a0: 7074 696f 6e61 6c5b 696e 745d 203d 204e  ptional[int] = N
-000431b0: 6f6e 652c 206c 696d 6974 3a20 4f70 7469  one, limit: Opti
-000431c0: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
-000431d0: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
-000431e0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-000431f0: 2020 6665 7463 6820 616c 6c20 756e 6669    fetch all unfi
-00043200: 6c6c 6564 2063 7572 7265 6e74 6c79 206f  lled currently o
-00043210: 7065 6e20 6f72 6465 7273 0a20 2020 2020  pen orders.     
-00043220: 2020 203a 7061 7261 6d20 7374 727c 4e6f     :param str|No
-00043230: 6e65 2073 796d 626f 6c3a 2075 6e69 6669  ne symbol: unifi
-00043240: 6564 206d 6172 6b65 7420 7379 6d62 6f6c  ed market symbol
-00043250: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00043260: 696e 747c 4e6f 6e65 2073 696e 6365 3a20  int|None since: 
-00043270: 7468 6520 6561 726c 6965 7374 2074 696d  the earliest tim
-00043280: 6520 696e 206d 7320 746f 2066 6574 6368  e in ms to fetch
-00043290: 206f 7065 6e20 6f72 6465 7273 2066 6f72   open orders for
-000432a0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-000432b0: 696e 747c 4e6f 6e65 206c 696d 6974 3a20  int|None limit: 
-000432c0: 7468 6520 6d61 7869 6d75 6d20 6e75 6d62  the maximum numb
-000432d0: 6572 206f 6620 206f 7065 6e20 6f72 6465  er of  open orde
-000432e0: 7273 2073 7472 7563 7475 7265 7320 746f  rs structures to
-000432f0: 2072 6574 7269 6576 650a 2020 2020 2020   retrieve.      
-00043300: 2020 3a70 6172 616d 2064 6963 7420 7061    :param dict pa
-00043310: 7261 6d73 3a20 6578 7472 6120 7061 7261  rams: extra para
-00043320: 6d65 7465 7273 2073 7065 6369 6669 6320  meters specific 
-00043330: 746f 2074 6865 2062 7962 6974 2061 7069  to the bybit api
-00043340: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
-00043350: 2020 3a72 6574 7572 6e73 205b 6469 6374    :returns [dict
-00043360: 5d3a 2061 206c 6973 7420 6f66 2060 6f72  ]: a list of `or
-00043370: 6465 7220 7374 7275 6374 7572 6573 203c  der structures <
-00043380: 6874 7470 733a 2f2f 646f 6373 2e63 6378  https://docs.ccx
-00043390: 742e 636f 6d2f 232f 3f69 643d 6f72 6465  t.com/#/?id=orde
-000433a0: 722d 7374 7275 6374 7572 653e 600a 2020  r-structure>`.  
-000433b0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-000433c0: 2020 7365 6c66 2e6c 6f61 645f 6d61 726b    self.load_mark
-000433d0: 6574 7328 290a 2020 2020 2020 2020 6d61  ets().        ma
-000433e0: 726b 6574 203d 204e 6f6e 650a 2020 2020  rket = None.    
-000433f0: 2020 2020 7365 7474 6c65 203d 2073 656c      settle = sel
-00043400: 662e 7361 6665 5f73 7472 696e 6728 7061  f.safe_string(pa
-00043410: 7261 6d73 2c20 2773 6574 746c 6543 6f69  rams, 'settleCoi
-00043420: 6e27 290a 2020 2020 2020 2020 6966 2073  n').        if s
-00043430: 6574 746c 6520 6973 204e 6f6e 653a 0a20  ettle is None:. 
-00043440: 2020 2020 2020 2020 2020 2073 6574 746c             settl
-00043450: 652c 2070 6172 616d 7320 3d20 7365 6c66  e, params = self
-00043460: 2e68 616e 646c 655f 6f70 7469 6f6e 5f61  .handle_option_a
-00043470: 6e64 5f70 6172 616d 7328 7061 7261 6d73  nd_params(params
-00043480: 2c20 2766 6574 6368 4f70 656e 4f72 6465  , 'fetchOpenOrde
-00043490: 7273 272c 2027 7365 7474 6c65 272c 2073  rs', 'settle', s
-000434a0: 6574 746c 6529 0a20 2020 2020 2020 2069  ettle).        i
-000434b0: 6620 7379 6d62 6f6c 2069 7320 6e6f 7420  f symbol is not 
-000434c0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-000434d0: 2020 6d61 726b 6574 203d 2073 656c 662e    market = self.
-000434e0: 6d61 726b 6574 2873 796d 626f 6c29 0a20  market(symbol). 
-000434f0: 2020 2020 2020 2020 2020 2073 6574 746c             settl
-00043500: 6520 3d20 6d61 726b 6574 5b27 7365 7474  e = market['sett
-00043510: 6c65 275d 0a20 2020 2020 2020 2073 7562  le'].        sub
-00043520: 5479 7065 203d 204e 6f6e 650a 2020 2020  Type = None.    
-00043530: 2020 2020 7375 6254 7970 652c 2070 6172      subType, par
-00043540: 616d 7320 3d20 7365 6c66 2e68 616e 646c  ams = self.handl
-00043550: 655f 7375 625f 7479 7065 5f61 6e64 5f70  e_sub_type_and_p
-00043560: 6172 616d 7328 2766 6574 6368 4f70 656e  arams('fetchOpen
-00043570: 4f72 6465 7273 272c 206d 6172 6b65 742c  Orders', market,
-00043580: 2070 6172 616d 7329 0a20 2020 2020 2020   params).       
-00043590: 2069 7349 6e76 6572 7365 203d 2073 7562   isInverse = sub
-000435a0: 5479 7065 203d 3d20 2769 6e76 6572 7365  Type == 'inverse
-000435b0: 270a 2020 2020 2020 2020 6973 5573 6463  '.        isUsdc
-000435c0: 5365 7474 6c65 6420 3d20 7365 7474 6c65  Settled = settle
-000435d0: 203d 3d20 2755 5344 4327 0a20 2020 2020   == 'USDC'.     
-000435e0: 2020 2069 734c 696e 6561 7253 6574 746c     isLinearSettl
-000435f0: 6520 3d20 6973 5573 6463 5365 7474 6c65  e = isUsdcSettle
-00043600: 6420 6f72 2028 7365 7474 6c65 203d 3d20  d or (settle == 
-00043610: 2755 5344 5427 290a 2020 2020 2020 2020  'USDT').        
-00043620: 6966 2069 7349 6e76 6572 7365 2061 6e64  if isInverse and
-00043630: 2069 734c 696e 6561 7253 6574 746c 653a   isLinearSettle:
-00043640: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-00043650: 7365 2041 7267 756d 656e 7473 5265 7175  se ArgumentsRequ
-00043660: 6972 6564 2873 656c 662e 6964 202b 2027  ired(self.id + '
-00043670: 2066 6574 6368 4f70 656e 4f72 6465 7273   fetchOpenOrders
-00043680: 2077 6974 6820 696e 7665 7273 6520 7375   with inverse su
-00043690: 6254 7970 6520 7265 7175 6972 6573 2073  bType requires s
-000436a0: 6574 746c 6520 746f 206e 6f74 2062 6520  ettle to not be 
-000436b0: 5553 4454 206f 7220 5553 4443 2729 0a20  USDT or USDC'). 
-000436c0: 2020 2020 2020 2074 7970 652c 2071 7565         type, que
-000436d0: 7279 203d 2073 656c 662e 6861 6e64 6c65  ry = self.handle
-000436e0: 5f6d 6172 6b65 745f 7479 7065 5f61 6e64  _market_type_and
-000436f0: 5f70 6172 616d 7328 2766 6574 6368 4f70  _params('fetchOp
-00043700: 656e 4f72 6465 7273 272c 206d 6172 6b65  enOrders', marke
-00043710: 742c 2070 6172 616d 7329 0a20 2020 2020  t, params).     
-00043720: 2020 2065 6e61 626c 6555 6e69 6669 6564     enableUnified
-00043730: 4d61 7267 696e 2c20 656e 6162 6c65 556e  Margin, enableUn
-00043740: 6966 6965 6441 6363 6f75 6e74 203d 2073  ifiedAccount = s
-00043750: 656c 662e 6973 5f75 6e69 6669 6564 5f65  elf.is_unified_e
-00043760: 6e61 626c 6564 2829 0a20 2020 2020 2020  nabled().       
-00043770: 2069 6620 656e 6162 6c65 556e 6966 6965   if enableUnifie
-00043780: 6441 6363 6f75 6e74 2061 6e64 206e 6f74  dAccount and not
-00043790: 2069 7349 6e76 6572 7365 3a0a 2020 2020   isInverse:.    
-000437a0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-000437b0: 656c 662e 6665 7463 685f 756e 6966 6965  elf.fetch_unifie
-000437c0: 645f 6163 636f 756e 745f 6f70 656e 5f6f  d_account_open_o
-000437d0: 7264 6572 7328 7379 6d62 6f6c 2c20 7369  rders(symbol, si
-000437e0: 6e63 652c 206c 696d 6974 2c20 7175 6572  nce, limit, quer
-000437f0: 7929 0a20 2020 2020 2020 2065 6c69 6620  y).        elif 
-00043800: 7479 7065 203d 3d20 2773 706f 7427 3a0a  type == 'spot':.
-00043810: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00043820: 726e 2073 656c 662e 6665 7463 685f 7370  rn self.fetch_sp
-00043830: 6f74 5f6f 7065 6e5f 6f72 6465 7273 2873  ot_open_orders(s
-00043840: 796d 626f 6c2c 2073 696e 6365 2c20 6c69  ymbol, since, li
-00043850: 6d69 742c 2071 7565 7279 290a 2020 2020  mit, query).    
-00043860: 2020 2020 656c 6966 2065 6e61 626c 6555      elif enableU
-00043870: 6e69 6669 6564 4d61 7267 696e 2061 6e64  nifiedMargin and
-00043880: 206e 6f74 2069 7349 6e76 6572 7365 3a0a   not isInverse:.
-00043890: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-000438a0: 726e 2073 656c 662e 6665 7463 685f 756e  rn self.fetch_un
-000438b0: 6966 6965 645f 6d61 7267 696e 5f6f 7065  ified_margin_ope
-000438c0: 6e5f 6f72 6465 7273 2873 796d 626f 6c2c  n_orders(symbol,
-000438d0: 2073 696e 6365 2c20 6c69 6d69 742c 2071   since, limit, q
-000438e0: 7565 7279 290a 2020 2020 2020 2020 656c  uery).        el
-000438f0: 6966 2069 7355 7364 6353 6574 746c 6564  if isUsdcSettled
-00043900: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00043910: 7475 726e 2073 656c 662e 6665 7463 685f  turn self.fetch_
-00043920: 7573 6463 5f6f 7065 6e5f 6f72 6465 7273  usdc_open_orders
-00043930: 2873 796d 626f 6c2c 2073 696e 6365 2c20  (symbol, since, 
-00043940: 6c69 6d69 742c 2071 7565 7279 290a 2020  limit, query).  
-00043950: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00043960: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00043970: 656c 662e 6665 7463 685f 6465 7269 7661  elf.fetch_deriva
-00043980: 7469 7665 735f 6f70 656e 5f6f 7264 6572  tives_open_order
-00043990: 7328 7379 6d62 6f6c 2c20 7369 6e63 652c  s(symbol, since,
-000439a0: 206c 696d 6974 2c20 7175 6572 7929 0a0a   limit, query)..
-000439b0: 2020 2020 6465 6620 6665 7463 685f 6f72      def fetch_or
-000439c0: 6465 725f 7472 6164 6573 2873 656c 662c  der_trades(self,
-000439d0: 2069 643a 2073 7472 2c20 7379 6d62 6f6c   id: str, symbol
-000439e0: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
-000439f0: 3d20 4e6f 6e65 2c20 7369 6e63 653a 204f  = None, since: O
-00043a00: 7074 696f 6e61 6c5b 696e 745d 203d 204e  ptional[int] = N
-00043a10: 6f6e 652c 206c 696d 6974 3a20 4f70 7469  one, limit: Opti
-00043a20: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
-00043a30: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
-00043a40: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00043a50: 2020 6665 7463 6820 616c 6c20 7468 6520    fetch all the 
-00043a60: 7472 6164 6573 206d 6164 6520 6672 6f6d  trades made from
-00043a70: 2061 2073 696e 676c 6520 6f72 6465 720a   a single order.
-00043a80: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-00043a90: 7472 2069 643a 206f 7264 6572 2069 640a  tr id: order id.
-00043aa0: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-00043ab0: 7472 7c4e 6f6e 6520 7379 6d62 6f6c 3a20  tr|None symbol: 
-00043ac0: 756e 6966 6965 6420 6d61 726b 6574 2073  unified market s
-00043ad0: 796d 626f 6c0a 2020 2020 2020 2020 3a70  ymbol.        :p
-00043ae0: 6172 616d 2069 6e74 7c4e 6f6e 6520 7369  aram int|None si
-00043af0: 6e63 653a 2074 6865 2065 6172 6c69 6573  nce: the earlies
-00043b00: 7420 7469 6d65 2069 6e20 6d73 2074 6f20  t time in ms to 
-00043b10: 6665 7463 6820 7472 6164 6573 2066 6f72  fetch trades for
-00043b20: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00043b30: 696e 747c 4e6f 6e65 206c 696d 6974 3a20  int|None limit: 
-00043b40: 7468 6520 6d61 7869 6d75 6d20 6e75 6d62  the maximum numb
-00043b50: 6572 206f 6620 7472 6164 6573 2074 6f20  er of trades to 
-00043b60: 7265 7472 6965 7665 0a20 2020 2020 2020  retrieve.       
-00043b70: 203a 7061 7261 6d20 6469 6374 2070 6172   :param dict par
-00043b80: 616d 733a 2065 7874 7261 2070 6172 616d  ams: extra param
-00043b90: 6574 6572 7320 7370 6563 6966 6963 2074  eters specific t
-00043ba0: 6f20 7468 6520 6279 6269 7420 6170 6920  o the bybit api 
-00043bb0: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
-00043bc0: 203a 7265 7475 726e 7320 5b64 6963 745d   :returns [dict]
-00043bd0: 3a20 6120 6c69 7374 206f 6620 6074 7261  : a list of `tra
-00043be0: 6465 2073 7472 7563 7475 7265 7320 3c68  de structures <h
-00043bf0: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
-00043c00: 2e63 6f6d 2f23 2f3f 6964 3d74 7261 6465  .com/#/?id=trade
-00043c10: 2d73 7472 7563 7475 7265 3e60 0a20 2020  -structure>`.   
-00043c20: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00043c30: 2072 6571 7565 7374 203d 207b 0a20 2020   request = {.   
-00043c40: 2020 2020 2020 2020 2027 6f72 6465 7249           'orderI
-00043c50: 6427 3a20 6964 2c0a 2020 2020 2020 2020  d': id,.        
-00043c60: 7d0a 2020 2020 2020 2020 7265 7475 726e  }.        return
-00043c70: 2073 656c 662e 6665 7463 685f 6d79 5f74   self.fetch_my_t
-00043c80: 7261 6465 7328 7379 6d62 6f6c 2c20 7369  rades(symbol, si
-00043c90: 6e63 652c 206c 696d 6974 2c20 7365 6c66  nce, limit, self
-00043ca0: 2e65 7874 656e 6428 7265 7175 6573 742c  .extend(request,
-00043cb0: 2070 6172 616d 7329 290a 0a20 2020 2064   params))..    d
-00043cc0: 6566 2066 6574 6368 5f6d 795f 756e 6966  ef fetch_my_unif
-00043cd0: 6965 645f 7472 6164 6573 2873 656c 662c  ied_trades(self,
-00043ce0: 2073 796d 626f 6c3a 204f 7074 696f 6e61   symbol: Optiona
-00043cf0: 6c5b 7374 725d 203d 204e 6f6e 652c 2073  l[str] = None, s
-00043d00: 696e 6365 3a20 4f70 7469 6f6e 616c 5b69  ince: Optional[i
-00043d10: 6e74 5d20 3d20 4e6f 6e65 2c20 6c69 6d69  nt] = None, limi
-00043d20: 743a 204f 7074 696f 6e61 6c5b 696e 745d  t: Optional[int]
-00043d30: 203d 204e 6f6e 652c 2070 6172 616d 733d   = None, params=
-00043d40: 7b7d 293a 0a20 2020 2020 2020 2073 656c  {}):.        sel
-00043d50: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
-00043d60: 0a20 2020 2020 2020 206d 6172 6b65 7420  .        market 
-00043d70: 3d20 4e6f 6e65 0a20 2020 2020 2020 2072  = None.        r
-00043d80: 6571 7565 7374 203d 207b 0a20 2020 2020  equest = {.     
-00043d90: 2020 2020 2020 2023 2027 7379 6d62 6f6c         # 'symbol
-00043da0: 273a 206d 6172 6b65 745b 2769 6427 5d2c  ': market['id'],
-00043db0: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
-00043dc0: 6361 7465 676f 7279 273a 2027 272c 2020  category': '',  
-00043dd0: 2320 5072 6f64 7563 7420 7479 7065 2e20  # Product type. 
-00043de0: 7370 6f74 2c6c 696e 6561 722c 6f70 7469  spot,linear,opti
-00043df0: 6f6e 0a20 2020 2020 2020 2020 2020 2023  on.            #
-00043e00: 2027 6f72 6465 7249 6427 3a20 2727 2c20   'orderId': '', 
-00043e10: 2023 204f 7264 6572 2049 440a 2020 2020   # Order ID.    
-00043e20: 2020 2020 2020 2020 2320 276f 7264 6572          # 'order
-00043e30: 4c69 6e6b 4964 273a 2027 272c 2020 2320  LinkId': '',  # 
-00043e40: 5573 6572 2063 7573 746f 6d69 7365 6420  User customised 
-00043e50: 6f72 6465 7220 4944 0a20 2020 2020 2020  order ID.       
-00043e60: 2020 2020 2023 2027 6261 7365 436f 696e       # 'baseCoin
-00043e70: 273a 2027 272c 2020 2320 4261 7365 2063  ': '',  # Base c
-00043e80: 6f69 6e0a 2020 2020 2020 2020 2020 2020  oin.            
-00043e90: 2320 2773 7461 7274 5469 6d65 273a 2030  # 'startTime': 0
-00043ea0: 2c20 2023 2054 6865 2073 7461 7274 2074  ,  # The start t
-00043eb0: 696d 6573 7461 6d70 286d 7329 0a20 2020  imestamp(ms).   
-00043ec0: 2020 2020 2020 2020 2023 2027 656e 6454           # 'endT
-00043ed0: 696d 6527 3a20 302c 2020 2320 5468 6520  ime': 0,  # The 
-00043ee0: 656e 6420 7469 6d65 7374 616d 7028 6d73  end timestamp(ms
-00043ef0: 290a 2020 2020 2020 2020 2020 2020 2320  ).            # 
-00043f00: 2765 7865 6354 7970 6527 3a20 2727 2c20  'execType': '', 
-00043f10: 2023 2045 7865 6375 7469 6f6e 2074 7970   # Execution typ
-00043f20: 650a 2020 2020 2020 2020 2020 2020 2320  e.            # 
-00043f30: 276c 696d 6974 273a 2030 2c20 2023 204c  'limit': 0,  # L
-00043f40: 696d 6974 2066 6f72 2064 6174 6120 7369  imit for data si
-00043f50: 7a65 2070 6572 2070 6167 652e 205b 312c  ze per page. [1,
-00043f60: 2031 3030 5d2e 2044 6566 6175 6c74 3a20   100]. Default: 
-00043f70: 3530 0a20 2020 2020 2020 2020 2020 2023  50.            #
-00043f80: 2027 6375 7273 6f72 273a 2027 272c 2020   'cursor': '',  
-00043f90: 2320 4375 7273 6f72 2e20 5573 6564 2066  # Cursor. Used f
-00043fa0: 6f72 2070 6167 696e 6174 696f 6e0a 2020  or pagination.  
-00043fb0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-00043fc0: 6966 2073 796d 626f 6c20 6973 206e 6f74  if symbol is not
-00043fd0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00043fe0: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
-00043ff0: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
-00044000: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00044010: 6573 745b 2773 796d 626f 6c27 5d20 3d20  est['symbol'] = 
-00044020: 6d61 726b 6574 5b27 6964 275d 0a20 2020  market['id'].   
-00044030: 2020 2020 2074 7970 6520 3d20 4e6f 6e65       type = None
-00044040: 0a20 2020 2020 2020 2074 7970 652c 2070  .        type, p
-00044050: 6172 616d 7320 3d20 7365 6c66 2e68 616e  arams = self.han
-00044060: 646c 655f 6d61 726b 6574 5f74 7970 655f  dle_market_type_
-00044070: 616e 645f 7061 7261 6d73 2827 6665 7463  and_params('fetc
-00044080: 684d 7954 7261 6465 7327 2c20 6d61 726b  hMyTrades', mark
-00044090: 6574 2c20 7061 7261 6d73 290a 2020 2020  et, params).    
-000440a0: 2020 2020 6966 2074 7970 6520 3d3d 2027      if type == '
-000440b0: 7370 6f74 273a 0a20 2020 2020 2020 2020  spot':.         
-000440c0: 2020 2072 6571 7565 7374 5b27 6361 7465     request['cate
-000440d0: 676f 7279 275d 203d 2027 7370 6f74 270a  gory'] = 'spot'.
-000440e0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-000440f0: 2020 2020 2020 2020 2020 7375 6254 7970            subTyp
-00044100: 6520 3d20 4e6f 6e65 0a20 2020 2020 2020  e = None.       
-00044110: 2020 2020 2073 7562 5479 7065 2c20 7061       subType, pa
-00044120: 7261 6d73 203d 2073 656c 662e 6861 6e64  rams = self.hand
-00044130: 6c65 5f73 7562 5f74 7970 655f 616e 645f  le_sub_type_and_
-00044140: 7061 7261 6d73 2827 6665 7463 684d 7954  params('fetchMyT
-00044150: 7261 6465 7327 2c20 6d61 726b 6574 2c20  rades', market, 
-00044160: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
-00044170: 2020 2020 6966 2073 7562 5479 7065 203d      if subType =
-00044180: 3d20 2769 6e76 6572 7365 273a 0a20 2020  = 'inverse':.   
-00044190: 2020 2020 2020 2020 2020 2020 2072 6169               rai
-000441a0: 7365 204e 6f74 5375 7070 6f72 7465 6428  se NotSupported(
-000441b0: 7365 6c66 2e69 6420 2b20 2720 6665 7463  self.id + ' fetc
-000441c0: 684d 7954 7261 6465 7328 2920 646f 6573  hMyTrades() does
-000441d0: 206e 6f74 2073 7570 706f 7274 2027 202b   not support ' +
-000441e0: 2073 7562 5479 7065 202b 2027 206d 6172   subType + ' mar
-000441f0: 6b65 7473 2e27 290a 2020 2020 2020 2020  kets.').        
-00044200: 2020 2020 7265 7175 6573 745b 2763 6174      request['cat
-00044210: 6567 6f72 7927 5d20 3d20 7375 6254 7970  egory'] = subTyp
-00044220: 650a 2020 2020 2020 2020 6966 2073 696e  e.        if sin
-00044230: 6365 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ce is not None:.
-00044240: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00044250: 6573 745b 2773 7461 7274 5469 6d65 275d  est['startTime']
-00044260: 203d 2073 696e 6365 0a20 2020 2020 2020   = since.       
-00044270: 2069 6620 6c69 6d69 7420 6973 206e 6f74   if limit is not
-00044280: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00044290: 2020 2072 6571 7565 7374 5b27 6c69 6d69     request['limi
-000442a0: 7427 5d20 3d20 6c69 6d69 7420 2023 2064  t'] = limit  # d
-000442b0: 6566 6175 6c74 2032 302c 206d 6178 2035  efault 20, max 5
-000442c0: 300a 2020 2020 2020 2020 7265 7370 6f6e  0.        respon
-000442d0: 7365 203d 2073 656c 662e 7072 6976 6174  se = self.privat
-000442e0: 6547 6574 5635 4578 6563 7574 696f 6e4c  eGetV5ExecutionL
-000442f0: 6973 7428 7365 6c66 2e65 7874 656e 6428  ist(self.extend(
-00044300: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
-00044310: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
-00044320: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-00044330: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-00044340: 6574 436f 6465 223a 2030 2c0a 2020 2020  etCode": 0,.    
-00044350: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-00044360: 6574 4d73 6722 3a20 224f 4b22 2c0a 2020  etMsg": "OK",.  
-00044370: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00044380: 2272 6573 756c 7422 3a20 7b0a 2020 2020  "result": {.    
-00044390: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000443a0: 2020 226e 6578 7450 6167 6543 7572 736f    "nextPageCurso
-000443b0: 7222 3a20 2231 3332 3736 3625 3341 3225  r": "132766%3A2%
-000443c0: 3243 3133 3237 3636 2533 4132 222c 0a20  2C132766%3A2",. 
-000443d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000443e0: 2020 2020 2022 6361 7465 676f 7279 223a       "category":
-000443f0: 2022 6c69 6e65 6172 222c 0a20 2020 2020   "linear",.     
-00044400: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00044410: 2022 6c69 7374 223a 205b 0a20 2020 2020   "list": [.     
-00044420: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00044430: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
-00044440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044450: 2020 2020 2022 7379 6d62 6f6c 223a 2022       "symbol": "
-00044460: 4554 4850 4552 5022 2c0a 2020 2020 2020  ETHPERP",.      
-00044470: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00044480: 2020 2020 2020 2020 226f 7264 6572 5479          "orderTy
-00044490: 7065 223a 2022 4d61 726b 6574 222c 0a20  pe": "Market",. 
-000444a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000444b0: 2020 2020 2020 2020 2020 2020 2022 756e               "un
-000444c0: 6465 726c 7969 6e67 5072 6963 6522 3a20  derlyingPrice": 
-000444d0: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
-000444e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000444f0: 2020 226f 7264 6572 4c69 6e6b 4964 223a    "orderLinkId":
-00044500: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
-00044510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044520: 2020 2022 7369 6465 223a 2022 4275 7922     "side": "Buy"
-00044530: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00044540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044550: 2269 6e64 6578 5072 6963 6522 3a20 2222  "indexPrice": ""
-00044560: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00044570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044580: 226f 7264 6572 4964 223a 2022 3863 3036  "orderId": "8c06
-00044590: 3533 3431 2d37 6235 322d 3463 6139 2d61  5341-7b52-4ca9-a
-000445a0: 6332 632d 3337 6533 3161 6335 3563 3934  c2c-37e31ac55c94
-000445b0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-000445c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000445d0: 2022 7374 6f70 4f72 6465 7254 7970 6522   "stopOrderType"
-000445e0: 3a20 2255 4e4b 4e4f 574e 222c 0a20 2020  : "UNKNOWN",.   
-000445f0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00044600: 2020 2020 2020 2020 2020 2022 6c65 6176             "leav
-00044610: 6573 5174 7922 3a20 2230 222c 0a20 2020  esQty": "0",.   
-00044620: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00044630: 2020 2020 2020 2020 2020 2022 6578 6563             "exec
-00044640: 5469 6d65 223a 2022 3136 3732 3238 3237  Time": "16722827
-00044650: 3232 3432 3922 2c0a 2020 2020 2020 2020  22429",.        
-00044660: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00044670: 2020 2020 2020 2269 734d 616b 6572 223a        "isMaker":
-00044680: 2046 616c 7365 2c0a 2020 2020 2020 2020   False,.        
-00044690: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-000446a0: 2020 2020 2020 2265 7865 6346 6565 223a        "execFee":
-000446b0: 2022 302e 3037 3134 3039 222c 0a20 2020   "0.071409",.   
-000446c0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000446d0: 2020 2020 2020 2020 2020 2022 6665 6552             "feeR
-000446e0: 6174 6522 3a20 2230 2e30 3030 3622 2c0a  ate": "0.0006",.
-000446f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00044700: 2020 2020 2020 2020 2020 2020 2020 2265                "e
-00044710: 7865 6349 6422 3a20 2265 3063 6265 3831  xecId": "e0cbe81
-00044720: 642d 3066 3138 2d35 3836 362d 3934 3135  d-0f18-5866-9415
-00044730: 2d63 6633 3139 6235 6461 6233 6222 2c0a  -cf319b5dab3b",.
-00044740: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00044750: 2020 2020 2020 2020 2020 2020 2020 2274                "t
-00044760: 7261 6465 4976 223a 2022 222c 0a20 2020  radeIv": "",.   
-00044770: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00044780: 2020 2020 2020 2020 2020 2022 626c 6f63             "bloc
-00044790: 6b54 7261 6465 4964 223a 2022 222c 0a20  kTradeId": "",. 
-000447a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000447b0: 2020 2020 2020 2020 2020 2020 2022 6d61               "ma
-000447c0: 726b 5072 6963 6522 3a20 2231 3138 332e  rkPrice": "1183.
-000447d0: 3534 222c 0a20 2020 2020 2020 2023 2020  54",.        #  
-000447e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000447f0: 2020 2022 6578 6563 5072 6963 6522 3a20     "execPrice": 
-00044800: 2231 3139 302e 3135 222c 0a20 2020 2020  "1190.15",.     
-00044810: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00044820: 2020 2020 2020 2020 2022 6d61 726b 4976           "markIv
-00044830: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
-00044840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044850: 2020 2020 2022 6f72 6465 7251 7479 223a       "orderQty":
-00044860: 2022 302e 3122 2c0a 2020 2020 2020 2020   "0.1",.        
-00044870: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00044880: 2020 2020 2020 226f 7264 6572 5072 6963        "orderPric
-00044890: 6522 3a20 2231 3233 362e 3922 2c0a 2020  e": "1236.9",.  
-000448a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000448b0: 2020 2020 2020 2020 2020 2020 2265 7865              "exe
-000448c0: 6356 616c 7565 223a 2022 3131 392e 3031  cValue": "119.01
-000448d0: 3522 2c0a 2020 2020 2020 2020 2320 2020  5",.        #   
-000448e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000448f0: 2020 2265 7865 6354 7970 6522 3a20 2254    "execType": "T
-00044900: 7261 6465 222c 0a20 2020 2020 2020 2023  rade",.        #
-00044910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044920: 2020 2020 2022 6578 6563 5174 7922 3a20       "execQty": 
-00044930: 2230 2e31 220a 2020 2020 2020 2020 2320  "0.1".        # 
-00044940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044950: 7d0a 2020 2020 2020 2020 2320 2020 2020  }.        #     
-00044960: 2020 2020 2020 2020 5d0a 2020 2020 2020          ].      
-00044970: 2020 2320 2020 2020 2020 2020 7d2c 0a20    #         },. 
-00044980: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00044990: 2022 7265 7445 7874 496e 666f 223a 207b   "retExtInfo": {
-000449a0: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
-000449b0: 2020 2020 2022 7469 6d65 223a 2031 3637       "time": 167
-000449c0: 3232 3833 3735 3435 3130 0a20 2020 2020  2283754510.     
-000449d0: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
-000449e0: 2020 2023 0a20 2020 2020 2020 2072 6573     #.        res
-000449f0: 756c 7420 3d20 7365 6c66 2e73 6166 655f  ult = self.safe_
-00044a00: 7661 6c75 6528 7265 7370 6f6e 7365 2c20  value(response, 
-00044a10: 2772 6573 756c 7427 2c20 7b7d 290a 2020  'result', {}).  
-00044a20: 2020 2020 2020 7472 6164 6573 203d 2073        trades = s
-00044a30: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
-00044a40: 6573 756c 742c 2027 6c69 7374 272c 205b  esult, 'list', [
-00044a50: 5d29 0a20 2020 2020 2020 2072 6574 7572  ]).        retur
-00044a60: 6e20 7365 6c66 2e70 6172 7365 5f74 7261  n self.parse_tra
-00044a70: 6465 7328 7472 6164 6573 2c20 6d61 726b  des(trades, mark
-00044a80: 6574 2c20 7369 6e63 652c 206c 696d 6974  et, since, limit
-00044a90: 290a 0a20 2020 2064 6566 2066 6574 6368  )..    def fetch
-00044aa0: 5f6d 795f 7370 6f74 5f74 7261 6465 7328  _my_spot_trades(
-00044ab0: 7365 6c66 2c20 7379 6d62 6f6c 3a20 4f70  self, symbol: Op
-00044ac0: 7469 6f6e 616c 5b73 7472 5d20 3d20 4e6f  tional[str] = No
-00044ad0: 6e65 2c20 7369 6e63 653a 204f 7074 696f  ne, since: Optio
-00044ae0: 6e61 6c5b 696e 745d 203d 204e 6f6e 652c  nal[int] = None,
-00044af0: 206c 696d 6974 3a20 4f70 7469 6f6e 616c   limit: Optional
-00044b00: 5b69 6e74 5d20 3d20 4e6f 6e65 2c20 7061  [int] = None, pa
-00044b10: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
-00044b20: 2020 6966 2073 796d 626f 6c20 6973 204e    if symbol is N
-00044b30: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-00044b40: 2072 6169 7365 2041 7267 756d 656e 7473   raise Arguments
-00044b50: 5265 7175 6972 6564 2873 656c 662e 6964  Required(self.id
-00044b60: 202b 2027 2066 6574 6368 4d79 5370 6f74   + ' fetchMySpot
-00044b70: 5472 6164 6573 2829 2072 6571 7569 7265  Trades() require
-00044b80: 7320 6120 7379 6d62 6f6c 2061 7267 756d  s a symbol argum
-00044b90: 656e 7427 290a 2020 2020 2020 2020 7365  ent').        se
-00044ba0: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
-00044bb0: 290a 2020 2020 2020 2020 6d61 726b 6574  ).        market
-00044bc0: 203d 2073 656c 662e 6d61 726b 6574 2873   = self.market(s
-00044bd0: 796d 626f 6c29 0a20 2020 2020 2020 2072  ymbol).        r
-00044be0: 6571 7565 7374 203d 207b 0a20 2020 2020  equest = {.     
-00044bf0: 2020 2020 2020 2027 7379 6d62 6f6c 273a         'symbol':
-00044c00: 206d 6172 6b65 745b 2769 6427 5d2c 0a20   market['id'],. 
-00044c10: 2020 2020 2020 2020 2020 2023 2027 6f72             # 'or
-00044c20: 6465 7249 6427 3a20 2766 3138 3538 3036  derId': 'f185806
-00044c30: 622d 6238 3031 2d34 3066 662d 6164 6563  b-b801-40ff-adec
-00044c40: 2d35 3232 3839 3337 3065 6436 3227 2c20  -52289370ed62', 
-00044c50: 2023 2069 6620 6e6f 7420 7072 6f76 6964   # if not provid
-00044c60: 6564 2077 696c 6c20 7265 7475 726e 2075  ed will return u
-00044c70: 7365 7227 7320 7472 6164 696e 6720 7265  ser's trading re
-00044c80: 636f 7264 730a 2020 2020 2020 2020 2020  cords.          
-00044c90: 2020 2320 2773 7461 7274 5469 6d65 273a    # 'startTime':
-00044ca0: 2069 6e74 2873 696e 6365 202f 2031 3030   int(since / 100
-00044cb0: 3029 2c0a 2020 2020 2020 2020 2020 2020  0),.            
-00044cc0: 2320 2765 6e64 5469 6d65 273a 2030 2c0a  # 'endTime': 0,.
-00044cd0: 2020 2020 2020 2020 2020 2020 2320 2766              # 'f
-00044ce0: 726f 6d54 7261 6465 4964 273a 2027 272c  romTradeId': '',
-00044cf0: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
-00044d00: 746f 5472 6164 6549 6427 3a20 2727 2c0a  toTradeId': '',.
-00044d10: 2020 2020 2020 2020 2020 2020 2320 276c              # 'l
-00044d20: 696d 6974 2720 3230 2c20 2023 206d 6178  imit' 20,  # max
-00044d30: 2035 300a 2020 2020 2020 2020 7d0a 2020   50.        }.  
-00044d40: 2020 2020 2020 6966 2073 696e 6365 2069        if since i
-00044d50: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00044d60: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-00044d70: 2773 7461 7274 5469 6d65 275d 203d 2073  'startTime'] = s
-00044d80: 696e 6365 0a20 2020 2020 2020 2069 6620  ince.        if 
-00044d90: 6c69 6d69 7420 6973 206e 6f74 204e 6f6e  limit is not Non
-00044da0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-00044db0: 6571 7565 7374 5b27 6c69 6d69 7427 5d20  equest['limit'] 
-00044dc0: 3d20 6c69 6d69 7420 2023 2064 6566 6175  = limit  # defau
-00044dd0: 6c74 2032 302c 206d 6178 2035 300a 2020  lt 20, max 50.  
-00044de0: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
-00044df0: 2073 656c 662e 7072 6976 6174 6547 6574   self.privateGet
-00044e00: 5370 6f74 5633 5072 6976 6174 654d 7954  SpotV3PrivateMyT
-00044e10: 7261 6465 7328 7365 6c66 2e65 7874 656e  rades(self.exten
-00044e20: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
-00044e30: 7329 290a 2020 2020 2020 2020 230a 2020  s)).        #.  
-00044e40: 2020 2020 2020 2320 2020 207b 0a20 2020        #    {.   
-00044e50: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00044e60: 7265 7443 6f64 6522 3a20 2230 222c 0a20  retCode": "0",. 
-00044e70: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00044e80: 2022 7265 744d 7367 223a 2022 4f4b 222c   "retMsg": "OK",
-00044e90: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00044ea0: 2020 2022 7265 7375 6c74 223a 207b 0a20     "result": {. 
-00044eb0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00044ec0: 2020 2020 2022 6c69 7374 223a 205b 0a20       "list": [. 
-00044ed0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00044ee0: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-00044ef0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00044f00: 2020 2020 2020 2020 2022 7379 6d62 6f6c           "symbol
-00044f10: 223a 2022 4141 5645 5553 4454 222c 0a20  ": "AAVEUSDT",. 
-00044f20: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00044f30: 2020 2020 2020 2020 2020 2020 2022 6964               "id
-00044f40: 223a 2022 3132 3734 3738 3531 3031 3936  ": "127478510196
-00044f50: 3537 3136 3939 3222 2c0a 2020 2020 2020  5716992",.      
-00044f60: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00044f70: 2020 2020 2020 2020 226f 7264 6572 4964          "orderId
-00044f80: 223a 2022 3132 3734 3738 3432 3532 3335  ": "127478425235
-00044f90: 3930 3839 3636 3422 2c0a 2020 2020 2020  9089664",.      
-00044fa0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00044fb0: 2020 2020 2020 2020 2274 7261 6465 4964          "tradeId
-00044fc0: 223a 2022 3232 3730 3030 3030 3030 3033  ": "227000000003
-00044fd0: 3133 3635 3633 3922 2c0a 2020 2020 2020  1365639",.      
-00044fe0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00044ff0: 2020 2020 2020 2020 226f 7264 6572 5072          "orderPr
-00045000: 6963 6522 3a20 2238 322e 3522 2c0a 2020  ice": "82.5",.  
-00045010: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00045020: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
-00045030: 6572 5174 7922 3a20 2230 2e30 3136 222c  erQty": "0.016",
-00045040: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00045050: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00045060: 6578 6563 4665 6522 3a20 2230 222c 0a20  execFee": "0",. 
-00045070: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00045080: 2020 2020 2020 2020 2020 2020 2022 6665               "fe
-00045090: 6554 6f6b 656e 4964 223a 2022 4141 5645  eTokenId": "AAVE
-000450a0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-000450b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000450c0: 2022 6372 6561 7454 696d 6522 3a20 2231   "creatTime": "1
-000450d0: 3636 3637 3032 3232 3633 3236 222c 0a20  666702226326",. 
-000450e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000450f0: 2020 2020 2020 2020 2020 2020 2022 6973               "is
-00045100: 4275 7965 7222 3a20 2230 222c 0a20 2020  Buyer": "0",.   
-00045110: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00045120: 2020 2020 2020 2020 2020 2022 6973 4d61             "isMa
-00045130: 6b65 7222 3a20 2230 222c 0a20 2020 2020  ker": "0",.     
-00045140: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00045150: 2020 2020 2020 2020 2022 6d61 7463 684f           "matchO
-00045160: 7264 6572 4964 223a 2022 3132 3734 3738  rderId": "127478
-00045170: 3531 3031 3836 3530 3736 3232 3422 2c0a  5101865076224",.
-00045180: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00045190: 2020 2020 2020 2020 2020 2020 2020 226d                "m
-000451a0: 616b 6572 5265 6261 7465 223a 2022 3022  akerRebate": "0"
-000451b0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-000451c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000451d0: 2265 7865 6375 7469 6f6e 5469 6d65 223a  "executionTime":
-000451e0: 2022 3136 3636 3730 3232 3236 3333 3522   "1666702226335"
-000451f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00045200: 2020 2020 2020 2020 2020 207d 2c0a 2020             },.  
-00045210: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00045220: 2020 2020 5d0a 2020 2020 2020 2020 2320      ].        # 
-00045230: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
-00045240: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-00045250: 7445 7874 4d61 7022 3a20 7b7d 2c0a 2020  tExtMap": {},.  
-00045260: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00045270: 2272 6574 4578 7449 6e66 6f22 3a20 6e75  "retExtInfo": nu
-00045280: 6c6c 2c0a 2020 2020 2020 2020 2320 2020  ll,.        #   
-00045290: 2020 2020 2020 2274 696d 6522 3a20 2231        "time": "1
-000452a0: 3636 3637 3638 3231 3531 3537 220a 2020  666768215157".  
-000452b0: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
-000452c0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-000452d0: 7265 7375 6c74 203d 2073 656c 662e 7361  result = self.sa
-000452e0: 6665 5f76 616c 7565 2872 6573 706f 6e73  fe_value(respons
-000452f0: 652c 2027 7265 7375 6c74 272c 207b 7d29  e, 'result', {})
-00045300: 0a20 2020 2020 2020 2074 7261 6465 7320  .        trades 
-00045310: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-00045320: 6528 7265 7375 6c74 2c20 276c 6973 7427  e(result, 'list'
-00045330: 2c20 5b5d 290a 2020 2020 2020 2020 7265  , []).        re
-00045340: 7475 726e 2073 656c 662e 7061 7273 655f  turn self.parse_
-00045350: 7472 6164 6573 2874 7261 6465 732c 206d  trades(trades, m
-00045360: 6172 6b65 742c 2073 696e 6365 2c20 6c69  arket, since, li
-00045370: 6d69 7429 0a0a 2020 2020 6465 6620 6665  mit)..    def fe
-00045380: 7463 685f 6d79 5f75 6e69 6669 6564 5f6d  tch_my_unified_m
-00045390: 6172 6769 6e5f 7472 6164 6573 2873 656c  argin_trades(sel
-000453a0: 662c 2073 796d 626f 6c3a 204f 7074 696f  f, symbol: Optio
-000453b0: 6e61 6c5b 7374 725d 203d 204e 6f6e 652c  nal[str] = None,
-000453c0: 2073 696e 6365 3a20 4f70 7469 6f6e 616c   since: Optional
-000453d0: 5b69 6e74 5d20 3d20 4e6f 6e65 2c20 6c69  [int] = None, li
-000453e0: 6d69 743a 204f 7074 696f 6e61 6c5b 696e  mit: Optional[in
-000453f0: 745d 203d 204e 6f6e 652c 2070 6172 616d  t] = None, param
-00045400: 733d 7b7d 293a 0a20 2020 2020 2020 2073  s={}):.        s
-00045410: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
-00045420: 2829 0a20 2020 2020 2020 206d 6172 6b65  ().        marke
-00045430: 7420 3d20 4e6f 6e65 0a20 2020 2020 2020  t = None.       
-00045440: 2073 6574 746c 6520 3d20 4e6f 6e65 0a20   settle = None. 
-00045450: 2020 2020 2020 2072 6571 7565 7374 203d         request =
-00045460: 207b 0a20 2020 2020 2020 2020 2020 2023   {.            #
-00045470: 2027 7379 6d62 6f6c 273a 206d 6172 6b65   'symbol': marke
-00045480: 745b 2769 6427 5d2c 0a20 2020 2020 2020  t['id'],.       
-00045490: 2020 2020 2023 2027 6f72 6465 7249 6427       # 'orderId'
-000454a0: 3a20 2766 3138 3538 3036 622d 6238 3031  : 'f185806b-b801
-000454b0: 2d34 3066 662d 6164 6563 2d35 3232 3839  -40ff-adec-52289
-000454c0: 3337 3065 6436 3227 2c20 2023 2069 6620  370ed62',  # if 
-000454d0: 6e6f 7420 7072 6f76 6964 6564 2077 696c  not provided wil
-000454e0: 6c20 7265 7475 726e 2075 7365 7227 7320  l return user's 
-000454f0: 7472 6164 696e 6720 7265 636f 7264 730a  trading records.
-00045500: 2020 2020 2020 2020 2020 2020 2320 2773              # 's
-00045510: 7461 7274 5469 6d65 273a 2069 6e74 2873  tartTime': int(s
-00045520: 696e 6365 202f 2031 3030 3029 2c0a 2020  ince / 1000),.  
-00045530: 2020 2020 2020 2020 2020 2320 2765 6e64            # 'end
-00045540: 5469 6d65 273a 2030 2c0a 2020 2020 2020  Time': 0,.      
-00045550: 2020 2020 2020 2320 2763 6174 6567 6f72        # 'categor
-00045560: 7927 3a20 2727 0a20 2020 2020 2020 2020  y': ''.         
-00045570: 2020 2023 2027 6c69 6d69 7427 2032 302c     # 'limit' 20,
-00045580: 2020 2320 6d61 7820 3530 0a20 2020 2020    # max 50.     
-00045590: 2020 207d 0a20 2020 2020 2020 2069 6620     }.        if 
-000455a0: 7379 6d62 6f6c 2069 7320 6e6f 7420 4e6f  symbol is not No
-000455b0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-000455c0: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
-000455d0: 726b 6574 2873 796d 626f 6c29 0a20 2020  rket(symbol).   
-000455e0: 2020 2020 2020 2020 2073 6574 746c 6520           settle 
-000455f0: 3d20 6d61 726b 6574 5b27 7365 7474 6c65  = market['settle
-00045600: 275d 0a20 2020 2020 2020 2020 2020 2072  '].            r
-00045610: 6571 7565 7374 5b27 7379 6d62 6f6c 275d  equest['symbol']
-00045620: 203d 206d 6172 6b65 745b 2769 6427 5d0a   = market['id'].
-00045630: 2020 2020 2020 2020 7375 6254 7970 6520          subType 
-00045640: 3d20 4e6f 6e65 0a20 2020 2020 2020 2073  = None.        s
-00045650: 7562 5479 7065 2c20 7061 7261 6d73 203d  ubType, params =
-00045660: 2073 656c 662e 6861 6e64 6c65 5f73 7562   self.handle_sub
-00045670: 5f74 7970 655f 616e 645f 7061 7261 6d73  _type_and_params
-00045680: 2827 6665 7463 684d 7954 7261 6465 7327  ('fetchMyTrades'
-00045690: 2c20 6d61 726b 6574 2c20 7061 7261 6d73  , market, params
-000456a0: 2c20 276c 696e 6561 7227 290a 2020 2020  , 'linear').    
-000456b0: 2020 2020 7265 7175 6573 745b 2763 6174      request['cat
-000456c0: 6567 6f72 7927 5d20 3d20 7375 6254 7970  egory'] = subTyp
-000456d0: 650a 2020 2020 2020 2020 7365 7474 6c65  e.        settle
-000456e0: 2c20 7061 7261 6d73 203d 2073 656c 662e  , params = self.
-000456f0: 6861 6e64 6c65 5f6f 7074 696f 6e5f 616e  handle_option_an
-00045700: 645f 7061 7261 6d73 2870 6172 616d 732c  d_params(params,
-00045710: 2027 6361 6e63 656c 416c 6c4f 7264 6572   'cancelAllOrder
-00045720: 7327 2c20 2773 6574 746c 6527 2c20 7365  s', 'settle', se
-00045730: 7474 6c65 290a 2020 2020 2020 2020 6966  ttle).        if
-00045740: 2073 6574 746c 6520 6973 206e 6f74 204e   settle is not N
-00045750: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-00045760: 2072 6571 7565 7374 5b27 7365 7474 6c65   request['settle
-00045770: 436f 696e 275d 203d 2073 6574 746c 650a  Coin'] = settle.
-00045780: 2020 2020 2020 2020 6966 2073 696e 6365          if since
-00045790: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-000457a0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-000457b0: 745b 2773 7461 7274 5469 6d65 275d 203d  t['startTime'] =
-000457c0: 2073 696e 6365 0a20 2020 2020 2020 2069   since.        i
-000457d0: 6620 6c69 6d69 7420 6973 206e 6f74 204e  f limit is not N
-000457e0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-000457f0: 2072 6571 7565 7374 5b27 6c69 6d69 7427   request['limit'
-00045800: 5d20 3d20 6c69 6d69 7420 2023 2064 6566  ] = limit  # def
-00045810: 6175 6c74 2032 302c 206d 6178 2035 300a  ault 20, max 50.
-00045820: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
-00045830: 203d 2073 656c 662e 7072 6976 6174 6547   = self.privateG
-00045840: 6574 556e 6966 6965 6456 3350 7269 7661  etUnifiedV3Priva
-00045850: 7465 4578 6563 7574 696f 6e4c 6973 7428  teExecutionList(
-00045860: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
-00045870: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
-00045880: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00045890: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
-000458a0: 2320 2020 2020 2020 2020 2272 6574 436f  #         "retCo
-000458b0: 6465 223a 2030 2c0a 2020 2020 2020 2020  de": 0,.        
-000458c0: 2320 2020 2020 2020 2020 2272 6574 4d73  #         "retMs
-000458d0: 6722 3a20 2253 7563 6365 7373 222c 0a20  g": "Success",. 
-000458e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000458f0: 2022 7265 7375 6c74 223a 207b 0a20 2020   "result": {.   
-00045900: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00045910: 2020 2022 6e65 7874 5061 6765 4375 7273     "nextPageCurs
-00045920: 6f72 223a 2022 3135 3635 2533 4130 2532  or": "1565%3A0%2
-00045930: 4331 3536 3525 3341 3022 2c0a 2020 2020  C1565%3A0",.    
-00045940: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00045950: 2020 2263 6174 6567 6f72 7922 3a20 226f    "category": "o
-00045960: 7074 696f 6e22 2c0a 2020 2020 2020 2020  ption",.        
-00045970: 2320 2020 2020 2020 2020 2020 2020 226c  #             "l
-00045980: 6973 7422 3a20 5b0a 2020 2020 2020 2020  ist": [.        
-00045990: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-000459a0: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-000459b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000459c0: 2020 226f 7264 6572 5479 7065 223a 2022    "orderType": "
-000459d0: 4c69 6d69 7422 2c0a 2020 2020 2020 2020  Limit",.        
-000459e0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-000459f0: 2020 2020 2020 2273 796d 626f 6c22 3a20        "symbol": 
-00045a00: 2242 5443 2d31 344a 554c 3232 2d31 3735  "BTC-14JUL22-175
-00045a10: 3030 2d43 222c 0a20 2020 2020 2020 2023  00-C",.        #
-00045a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045a30: 2020 2020 2022 6f72 6465 724c 696e 6b49       "orderLinkI
-00045a40: 6422 3a20 2231 3838 3838 3936 3839 2d79  d": "188889689-y
-00045a50: 7561 6e7a 6865 6e2d 3535 3839 3938 3939  uanzhen-55899899
-00045a60: 3838 3939 222c 0a20 2020 2020 2020 2023  8899",.        #
-00045a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045a80: 2020 2020 2022 7369 6465 223a 2022 4275       "side": "Bu
-00045a90: 7922 2c0a 2020 2020 2020 2020 2320 2020  y",.        #   
-00045aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045ab0: 2020 226f 7264 6572 4964 223a 2022 3039    "orderId": "09
-00045ac0: 6335 3833 3666 2d38 3165 662d 3432 3038  c5836f-81ef-4208
-00045ad0: 2d61 3562 342d 3433 3133 3564 3365 3032  -a5b4-43135d3e02
-00045ae0: 6132 222c 0a20 2020 2020 2020 2023 2020  a2",.        #  
-00045af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045b00: 2020 2022 6c65 6176 6573 5174 7922 3a20     "leavesQty": 
-00045b10: 2230 2e30 3030 3022 2c0a 2020 2020 2020  "0.0000",.      
-00045b20: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00045b30: 2020 2020 2020 2020 2265 7865 6354 696d          "execTim
-00045b40: 6522 3a20 3136 3537 3731 3431 3232 3431  e": 165771412241
-00045b50: 372c 0a20 2020 2020 2020 2023 2020 2020  7,.        #    
-00045b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045b70: 2022 6578 6563 4665 6522 3a20 2230 2e31   "execFee": "0.1
-00045b80: 3138 3937 3038 3222 2c0a 2020 2020 2020  1897082",.      
-00045b90: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00045ba0: 2020 2020 2020 2020 2266 6565 5261 7465          "feeRate
-00045bb0: 223a 2022 302e 3030 3033 3030 222c 0a20  ": "0.000300",. 
-00045bc0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00045bd0: 2020 2020 2020 2020 2020 2020 2022 6578               "ex
-00045be0: 6563 4964 223a 2022 3665 3439 3235 3630  ecId": "6e492560
-00045bf0: 2d37 3862 342d 3564 3262 2d62 3333 312d  -78b4-5d2b-b331-
-00045c00: 3232 3932 3164 3331 3733 6339 222c 0a20  22921d3173c9",. 
-00045c10: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00045c20: 2020 2020 2020 2020 2020 2020 2022 626c               "bl
-00045c30: 6f63 6b54 7261 6465 4964 223a 2022 222c  ockTradeId": "",
-00045c40: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00045c50: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00045c60: 6578 6563 5072 6963 6522 3a20 2232 3336  execPrice": "236
-00045c70: 302e 3030 3030 3030 3030 222c 0a20 2020  0.00000000",.   
-00045c80: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00045c90: 2020 2020 2020 2020 2020 2022 6c61 7374             "last
-00045ca0: 4c69 7175 6964 6974 7949 6e64 223a 2022  LiquidityInd": "
-00045cb0: 5441 4b45 5222 2c0a 2020 2020 2020 2020  TAKER",.        
-00045cc0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00045cd0: 2020 2020 2020 226f 7264 6572 5174 7922        "orderQty"
-00045ce0: 3a20 2230 2e30 3230 3022 2c0a 2020 2020  : "0.0200",.    
-00045cf0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00045d00: 2020 2020 2020 2020 2020 226f 7264 6572            "order
-00045d10: 5072 6963 6522 3a20 2232 3336 302e 3030  Price": "2360.00
-00045d20: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
-00045d30: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00045d40: 2020 2020 2020 2022 6578 6563 5661 6c75         "execValu
-00045d50: 6522 3a20 2234 372e 3230 3030 3030 3030  e": "47.20000000
+00042890: 2020 2022 7461 6b65 5072 6f66 6974 223a     "takeProfit":
+000428a0: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
+000428b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000428c0: 2020 2022 6375 6d45 7865 6356 616c 7565     "cumExecValue
+000428d0: 223a 2022 3022 2c0a 2020 2020 2020 2020  ": "0",.        
+000428e0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000428f0: 2020 2020 2020 2274 7269 6767 6572 4469        "triggerDi
+00042900: 7265 6374 696f 6e22 3a20 302c 0a20 2020  rection": 0,.   
+00042910: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00042920: 2020 2020 2020 2020 2020 2022 6973 4c65             "isLe
+00042930: 7665 7261 6765 223a 2022 3022 2c0a 2020  verage": "0",.  
+00042940: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00042950: 2020 2020 2020 2020 2020 2020 2272 656a              "rej
+00042960: 6563 7452 6561 736f 6e22 3a20 2222 2c0a  ectReason": "",.
+00042970: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00042980: 2020 2020 2020 2020 2020 2020 2020 2270                "p
+00042990: 7269 6365 223a 2022 3130 3030 222c 0a20  rice": "1000",. 
+000429a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000429b0: 2020 2020 2020 2020 2020 2020 2022 6f72               "or
+000429c0: 6465 7249 7622 3a20 2222 2c0a 2020 2020  derIv": "",.    
+000429d0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+000429e0: 2020 2020 2020 2020 2020 2263 7265 6174            "creat
+000429f0: 6564 5469 6d65 223a 2022 3136 3732 3231  edTime": "167221
+00042a00: 3737 3438 3238 3722 2c0a 2020 2020 2020  7748287",.      
+00042a10: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00042a20: 2020 2020 2020 2020 2274 7054 7269 6767          "tpTrigg
+00042a30: 6572 4279 223a 2022 222c 0a20 2020 2020  erBy": "",.     
+00042a40: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00042a50: 2020 2020 2020 2020 2022 706f 7369 7469           "positi
+00042a60: 6f6e 4964 7822 3a20 302c 0a20 2020 2020  onIdx": 0,.     
+00042a70: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00042a80: 2020 2020 2020 2020 2022 7469 6d65 496e           "timeIn
+00042a90: 466f 7263 6522 3a20 2247 5443 222c 0a20  Force": "GTC",. 
+00042aa0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00042ab0: 2020 2020 2020 2020 2020 2020 2022 6c65               "le
+00042ac0: 6176 6573 5661 6c75 6522 3a20 2235 3030  avesValue": "500
+00042ad0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00042ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042af0: 2022 7570 6461 7465 6454 696d 6522 3a20   "updatedTime": 
+00042b00: 2231 3637 3232 3137 3734 3832 3837 222c  "1672217748287",
+00042b10: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00042b20: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00042b30: 7369 6465 223a 2022 4275 7922 2c0a 2020  side": "Buy",.  
+00042b40: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00042b50: 2020 2020 2020 2020 2020 2020 2274 7269              "tri
+00042b60: 6767 6572 5072 6963 6522 3a20 2231 3530  ggerPrice": "150
+00042b70: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00042b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042b90: 2020 2263 756d 4578 6563 4665 6522 3a20    "cumExecFee": 
+00042ba0: 2230 222c 0a20 2020 2020 2020 2023 2020  "0",.        #  
+00042bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042bc0: 2020 2022 6c65 6176 6573 5174 7922 3a20     "leavesQty": 
+00042bd0: 2230 222c 0a20 2020 2020 2020 2023 2020  "0",.        #  
+00042be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042bf0: 2020 2022 736c 5472 6967 6765 7242 7922     "slTriggerBy"
+00042c00: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
+00042c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042c20: 2020 2020 2263 6c6f 7365 4f6e 5472 6967      "closeOnTrig
+00042c30: 6765 7222 3a20 4661 6c73 652c 0a20 2020  ger": False,.   
+00042c40: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00042c50: 2020 2020 2020 2020 2020 2022 6375 6d45             "cumE
+00042c60: 7865 6351 7479 223a 2022 3022 2c0a 2020  xecQty": "0",.  
+00042c70: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00042c80: 2020 2020 2020 2020 2020 2020 2272 6564              "red
+00042c90: 7563 654f 6e6c 7922 3a20 4661 6c73 652c  uceOnly": False,
+00042ca0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00042cb0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00042cc0: 7174 7922 3a20 2230 2e35 222c 0a20 2020  qty": "0.5",.   
+00042cd0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00042ce0: 2020 2020 2020 2020 2020 2022 7374 6f70             "stop
+00042cf0: 4c6f 7373 223a 2022 222c 0a20 2020 2020  Loss": "",.     
+00042d00: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00042d10: 2020 2020 2020 2020 2022 7472 6967 6765           "trigge
+00042d20: 7242 7922 3a20 2231 3139 322e 3522 0a20  rBy": "1192.5". 
+00042d30: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00042d40: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+00042d50: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00042d60: 205d 0a20 2020 2020 2020 2023 2020 2020   ].        #    
+00042d70: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
+00042d80: 2320 2020 2020 2020 2020 2272 6574 4578  #         "retEx
+00042d90: 7449 6e66 6f22 3a20 7b7d 2c0a 2020 2020  tInfo": {},.    
+00042da0: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
+00042db0: 696d 6522 3a20 3136 3732 3231 3935 3236  ime": 1672219526
+00042dc0: 3239 340a 2020 2020 2020 2020 2320 2020  294.        #   
+00042dd0: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
+00042de0: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
+00042df0: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
+00042e00: 6573 706f 6e73 652c 2027 7265 7375 6c74  esponse, 'result
+00042e10: 272c 207b 7d29 0a20 2020 2020 2020 206f  ', {}).        o
+00042e20: 7264 6572 7320 3d20 7365 6c66 2e73 6166  rders = self.saf
+00042e30: 655f 7661 6c75 6528 7265 7375 6c74 2c20  e_value(result, 
+00042e40: 276c 6973 7427 2c20 5b5d 290a 2020 2020  'list', []).    
+00042e50: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00042e60: 7061 7273 655f 6f72 6465 7273 286f 7264  parse_orders(ord
+00042e70: 6572 732c 206d 6172 6b65 742c 2073 696e  ers, market, sin
+00042e80: 6365 2c20 6c69 6d69 7429 0a0a 2020 2020  ce, limit)..    
+00042e90: 6465 6620 6665 7463 685f 7573 6463 5f6f  def fetch_usdc_o
+00042ea0: 7065 6e5f 6f72 6465 7273 2873 656c 662c  pen_orders(self,
+00042eb0: 2073 796d 626f 6c3a 204f 7074 696f 6e61   symbol: Optiona
+00042ec0: 6c5b 7374 725d 203d 204e 6f6e 652c 2073  l[str] = None, s
+00042ed0: 696e 6365 3a20 4f70 7469 6f6e 616c 5b69  ince: Optional[i
+00042ee0: 6e74 5d20 3d20 4e6f 6e65 2c20 6c69 6d69  nt] = None, limi
+00042ef0: 743a 204f 7074 696f 6e61 6c5b 696e 745d  t: Optional[int]
+00042f00: 203d 204e 6f6e 652c 2070 6172 616d 733d   = None, params=
+00042f10: 7b7d 293a 0a20 2020 2020 2020 2073 656c  {}):.        sel
+00042f20: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
+00042f30: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
+00042f40: 203d 207b 7d0a 2020 2020 2020 2020 6d61   = {}.        ma
+00042f50: 726b 6574 203d 204e 6f6e 650a 2020 2020  rket = None.    
+00042f60: 2020 2020 6966 2073 796d 626f 6c20 6973      if symbol is
+00042f70: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00042f80: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
+00042f90: 7365 6c66 2e6d 6172 6b65 7428 7379 6d62  self.market(symb
+00042fa0: 6f6c 290a 2020 2020 2020 2020 2020 2020  ol).            
+00042fb0: 7265 7175 6573 745b 2773 796d 626f 6c27  request['symbol'
+00042fc0: 5d20 3d20 6d61 726b 6574 5b27 6964 275d  ] = market['id']
+00042fd0: 0a20 2020 2020 2020 2074 7970 6520 3d20  .        type = 
+00042fe0: 4e6f 6e65 0a20 2020 2020 2020 2074 7970  None.        typ
+00042ff0: 652c 2070 6172 616d 7320 3d20 7365 6c66  e, params = self
+00043000: 2e68 616e 646c 655f 6d61 726b 6574 5f74  .handle_market_t
+00043010: 7970 655f 616e 645f 7061 7261 6d73 2827  ype_and_params('
+00043020: 6665 7463 6855 5344 434f 7065 6e4f 7264  fetchUSDCOpenOrd
+00043030: 6572 7327 2c20 6d61 726b 6574 2c20 7061  ers', market, pa
+00043040: 7261 6d73 290a 2020 2020 2020 2020 7265  rams).        re
+00043050: 7175 6573 745b 2763 6174 6567 6f72 7927  quest['category'
+00043060: 5d20 3d20 2770 6572 7065 7475 616c 2720  ] = 'perpetual' 
+00043070: 6966 2028 7479 7065 203d 3d20 2773 7761  if (type == 'swa
+00043080: 7027 2920 656c 7365 2027 6f70 7469 6f6e  p') else 'option
+00043090: 270a 2020 2020 2020 2020 7265 7370 6f6e  '.        respon
+000430a0: 7365 203d 2073 656c 662e 7072 6976 6174  se = self.privat
+000430b0: 6550 6f73 744f 7074 696f 6e55 7364 634f  ePostOptionUsdcO
+000430c0: 7065 6e61 7069 5072 6976 6174 6556 3151  penapiPrivateV1Q
+000430d0: 7565 7279 4163 7469 7665 4f72 6465 7273  ueryActiveOrders
+000430e0: 2873 656c 662e 6578 7465 6e64 2872 6571  (self.extend(req
+000430f0: 7565 7374 2c20 7061 7261 6d73 2929 0a20  uest, params)). 
+00043100: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
+00043110: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
+00043120: 7265 7370 6f6e 7365 2c20 2772 6573 756c  response, 'resul
+00043130: 7427 2c20 7b7d 290a 2020 2020 2020 2020  t', {}).        
+00043140: 6f72 6465 7273 203d 2073 656c 662e 7361  orders = self.sa
+00043150: 6665 5f76 616c 7565 2872 6573 756c 742c  fe_value(result,
+00043160: 2027 6461 7461 4c69 7374 272c 205b 5d29   'dataList', [])
+00043170: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+00043180: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
+00043190: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+000431a0: 7443 6f64 6522 3a20 302c 0a20 2020 2020  tCode": 0,.     
+000431b0: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+000431c0: 744d 7367 223a 2022 4f4b 222c 0a20 2020  tMsg": "OK",.   
+000431d0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+000431e0: 7265 7375 6c74 223a 207b 0a20 2020 2020  result": {.     
+000431f0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00043200: 2022 7265 7375 6c74 546f 7461 6c53 697a   "resultTotalSiz
+00043210: 6522 3a20 312c 0a20 2020 2020 2020 2023  e": 1,.        #
+00043220: 2020 2020 2020 2020 2020 2020 2022 6375               "cu
+00043230: 7273 6f72 223a 2022 6964 2533 4431 3636  rsor": "id%3D166
+00043240: 3230 3139 3831 3835 3639 2532 3364 6633  2019818569%23df3
+00043250: 3165 3033 622d 6663 3030 2d34 6234 632d  1e03b-fc00-4b4c-
+00043260: 6264 3163 2d62 3937 6664 3732 6235 6335  bd1c-b97fd72b5c5
+00043270: 6322 2c0a 2020 2020 2020 2020 2320 2020  c",.        #   
+00043280: 2020 2020 2020 2020 2020 2264 6174 614c            "dataL
+00043290: 6973 7422 3a20 5b0a 2020 2020 2020 2020  ist": [.        
+000432a0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000432b0: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+000432c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000432d0: 2020 226f 7264 6572 4964 223a 2022 6466    "orderId": "df
+000432e0: 3331 6530 3362 2d66 6330 302d 3462 3463  31e03b-fc00-4b4c
+000432f0: 2d62 6431 632d 6239 3766 6437 3262 3563  -bd1c-b97fd72b5c
+00043300: 3563 222c 0a20 2020 2020 2020 2023 2020  5c",.        #  
+00043310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043320: 2020 2022 6f72 6465 724c 696e 6b49 6422     "orderLinkId"
+00043330: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
+00043340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043350: 2020 2020 2273 796d 626f 6c22 3a20 2242      "symbol": "B
+00043360: 5443 2d32 5345 5032 322d 3138 3030 302d  TC-2SEP22-18000-
+00043370: 4322 2c0a 2020 2020 2020 2020 2320 2020  C",.        #   
+00043380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043390: 2020 226f 7264 6572 5374 6174 7573 223a    "orderStatus":
+000433a0: 2022 4e65 7722 2c0a 2020 2020 2020 2020   "New",.        
+000433b0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000433c0: 2020 2020 2020 226f 7264 6572 5072 6963        "orderPric
+000433d0: 6522 3a20 2235 3030 222c 0a20 2020 2020  e": "500",.     
+000433e0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+000433f0: 2020 2020 2020 2020 2022 7369 6465 223a           "side":
+00043400: 2022 4275 7922 2c0a 2020 2020 2020 2020   "Buy",.        
+00043410: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00043420: 2020 2020 2020 2272 656d 6169 6e69 6e67        "remaining
+00043430: 5174 7922 3a20 2230 2e31 222c 0a20 2020  Qty": "0.1",.   
+00043440: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00043450: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
+00043460: 7254 7970 6522 3a20 224c 696d 6974 222c  rType": "Limit",
+00043470: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00043480: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00043490: 7174 7922 3a20 2230 2e31 222c 0a20 2020  qty": "0.1",.   
+000434a0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+000434b0: 2020 2020 2020 2020 2020 2022 6976 223a             "iv":
+000434c0: 2022 302e 3030 3030 222c 0a20 2020 2020   "0.0000",.     
+000434d0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+000434e0: 2020 2020 2020 2020 2022 6361 6e63 656c           "cancel
+000434f0: 5479 7065 223a 2022 222c 0a20 2020 2020  Type": "",.     
+00043500: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00043510: 2020 2020 2020 2020 2022 7570 6461 7465           "update
+00043520: 5469 6d65 7374 616d 7022 3a20 2231 3636  Timestamp": "166
+00043530: 3230 3139 3831 3835 3739 220a 2020 2020  2019818579".    
+00043540: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00043550: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00043560: 2320 2020 2020 2020 2020 2020 2020 5d0a  #             ].
+00043570: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00043580: 2020 7d0a 2020 2020 2020 2020 2320 2020    }.        #   
+00043590: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
+000435a0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+000435b0: 662e 7061 7273 655f 6f72 6465 7273 286f  f.parse_orders(o
+000435c0: 7264 6572 732c 206d 6172 6b65 742c 2073  rders, market, s
+000435d0: 696e 6365 2c20 6c69 6d69 7429 0a0a 2020  ince, limit)..  
+000435e0: 2020 6465 6620 6665 7463 685f 6f70 656e    def fetch_open
+000435f0: 5f6f 7264 6572 7328 7365 6c66 2c20 7379  _orders(self, sy
+00043600: 6d62 6f6c 3a20 4f70 7469 6f6e 616c 5b73  mbol: Optional[s
+00043610: 7472 5d20 3d20 4e6f 6e65 2c20 7369 6e63  tr] = None, sinc
+00043620: 653a 204f 7074 696f 6e61 6c5b 696e 745d  e: Optional[int]
+00043630: 203d 204e 6f6e 652c 206c 696d 6974 3a20   = None, limit: 
+00043640: 4f70 7469 6f6e 616c 5b69 6e74 5d20 3d20  Optional[int] = 
+00043650: 4e6f 6e65 2c20 7061 7261 6d73 3d7b 7d29  None, params={})
+00043660: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+00043670: 2020 2020 2020 6665 7463 6820 616c 6c20        fetch all 
+00043680: 756e 6669 6c6c 6564 2063 7572 7265 6e74  unfilled current
+00043690: 6c79 206f 7065 6e20 6f72 6465 7273 0a20  ly open orders. 
+000436a0: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
+000436b0: 727c 4e6f 6e65 2073 796d 626f 6c3a 2075  r|None symbol: u
+000436c0: 6e69 6669 6564 206d 6172 6b65 7420 7379  nified market sy
+000436d0: 6d62 6f6c 0a20 2020 2020 2020 203a 7061  mbol.        :pa
+000436e0: 7261 6d20 696e 747c 4e6f 6e65 2073 696e  ram int|None sin
+000436f0: 6365 3a20 7468 6520 6561 726c 6965 7374  ce: the earliest
+00043700: 2074 696d 6520 696e 206d 7320 746f 2066   time in ms to f
+00043710: 6574 6368 206f 7065 6e20 6f72 6465 7273  etch open orders
+00043720: 2066 6f72 0a20 2020 2020 2020 203a 7061   for.        :pa
+00043730: 7261 6d20 696e 747c 4e6f 6e65 206c 696d  ram int|None lim
+00043740: 6974 3a20 7468 6520 6d61 7869 6d75 6d20  it: the maximum 
+00043750: 6e75 6d62 6572 206f 6620 206f 7065 6e20  number of  open 
+00043760: 6f72 6465 7273 2073 7472 7563 7475 7265  orders structure
+00043770: 7320 746f 2072 6574 7269 6576 650a 2020  s to retrieve.  
+00043780: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
+00043790: 7420 7061 7261 6d73 3a20 6578 7472 6120  t params: extra 
+000437a0: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
+000437b0: 6669 6320 746f 2074 6865 2062 7962 6974  fic to the bybit
+000437c0: 2061 7069 2065 6e64 706f 696e 740a 2020   api endpoint.  
+000437d0: 2020 2020 2020 3a72 6574 7572 6e73 205b        :returns [
+000437e0: 6469 6374 5d3a 2061 206c 6973 7420 6f66  dict]: a list of
+000437f0: 2060 6f72 6465 7220 7374 7275 6374 7572   `order structur
+00043800: 6573 203c 6874 7470 733a 2f2f 646f 6373  es <https://docs
+00043810: 2e63 6378 742e 636f 6d2f 232f 3f69 643d  .ccxt.com/#/?id=
+00043820: 6f72 6465 722d 7374 7275 6374 7572 653e  order-structure>
+00043830: 600a 2020 2020 2020 2020 2222 220a 2020  `.        """.  
+00043840: 2020 2020 2020 7365 6c66 2e6c 6f61 645f        self.load_
+00043850: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
+00043860: 2020 6d61 726b 6574 203d 204e 6f6e 650a    market = None.
+00043870: 2020 2020 2020 2020 7365 7474 6c65 203d          settle =
+00043880: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+00043890: 6728 7061 7261 6d73 2c20 2773 6574 746c  g(params, 'settl
+000438a0: 6543 6f69 6e27 290a 2020 2020 2020 2020  eCoin').        
+000438b0: 6966 2073 6574 746c 6520 6973 204e 6f6e  if settle is Non
+000438c0: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
+000438d0: 6574 746c 652c 2070 6172 616d 7320 3d20  ettle, params = 
+000438e0: 7365 6c66 2e68 616e 646c 655f 6f70 7469  self.handle_opti
+000438f0: 6f6e 5f61 6e64 5f70 6172 616d 7328 7061  on_and_params(pa
+00043900: 7261 6d73 2c20 2766 6574 6368 4f70 656e  rams, 'fetchOpen
+00043910: 4f72 6465 7273 272c 2027 7365 7474 6c65  Orders', 'settle
+00043920: 272c 2073 6574 746c 6529 0a20 2020 2020  ', settle).     
+00043930: 2020 2069 6620 7379 6d62 6f6c 2069 7320     if symbol is 
+00043940: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00043950: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
+00043960: 656c 662e 6d61 726b 6574 2873 796d 626f  elf.market(symbo
+00043970: 6c29 0a20 2020 2020 2020 2020 2020 2073  l).            s
+00043980: 6574 746c 6520 3d20 6d61 726b 6574 5b27  ettle = market['
+00043990: 7365 7474 6c65 275d 0a20 2020 2020 2020  settle'].       
+000439a0: 2073 7562 5479 7065 203d 204e 6f6e 650a   subType = None.
+000439b0: 2020 2020 2020 2020 7375 6254 7970 652c          subType,
+000439c0: 2070 6172 616d 7320 3d20 7365 6c66 2e68   params = self.h
+000439d0: 616e 646c 655f 7375 625f 7479 7065 5f61  andle_sub_type_a
+000439e0: 6e64 5f70 6172 616d 7328 2766 6574 6368  nd_params('fetch
+000439f0: 4f70 656e 4f72 6465 7273 272c 206d 6172  OpenOrders', mar
+00043a00: 6b65 742c 2070 6172 616d 7329 0a20 2020  ket, params).   
+00043a10: 2020 2020 2069 7349 6e76 6572 7365 203d       isInverse =
+00043a20: 2073 7562 5479 7065 203d 3d20 2769 6e76   subType == 'inv
+00043a30: 6572 7365 270a 2020 2020 2020 2020 6973  erse'.        is
+00043a40: 5573 6463 5365 7474 6c65 6420 3d20 7365  UsdcSettled = se
+00043a50: 7474 6c65 203d 3d20 2755 5344 4327 0a20  ttle == 'USDC'. 
+00043a60: 2020 2020 2020 2069 734c 696e 6561 7253         isLinearS
+00043a70: 6574 746c 6520 3d20 6973 5573 6463 5365  ettle = isUsdcSe
+00043a80: 7474 6c65 6420 6f72 2028 7365 7474 6c65  ttled or (settle
+00043a90: 203d 3d20 2755 5344 5427 290a 2020 2020   == 'USDT').    
+00043aa0: 2020 2020 6966 2069 7349 6e76 6572 7365      if isInverse
+00043ab0: 2061 6e64 2069 734c 696e 6561 7253 6574   and isLinearSet
+00043ac0: 746c 653a 0a20 2020 2020 2020 2020 2020  tle:.           
+00043ad0: 2072 6169 7365 2041 7267 756d 656e 7473   raise Arguments
+00043ae0: 5265 7175 6972 6564 2873 656c 662e 6964  Required(self.id
+00043af0: 202b 2027 2066 6574 6368 4f70 656e 4f72   + ' fetchOpenOr
+00043b00: 6465 7273 2077 6974 6820 696e 7665 7273  ders with invers
+00043b10: 6520 7375 6254 7970 6520 7265 7175 6972  e subType requir
+00043b20: 6573 2073 6574 746c 6520 746f 206e 6f74  es settle to not
+00043b30: 2062 6520 5553 4454 206f 7220 5553 4443   be USDT or USDC
+00043b40: 2729 0a20 2020 2020 2020 2074 7970 652c  ').        type,
+00043b50: 2071 7565 7279 203d 2073 656c 662e 6861   query = self.ha
+00043b60: 6e64 6c65 5f6d 6172 6b65 745f 7479 7065  ndle_market_type
+00043b70: 5f61 6e64 5f70 6172 616d 7328 2766 6574  _and_params('fet
+00043b80: 6368 4f70 656e 4f72 6465 7273 272c 206d  chOpenOrders', m
+00043b90: 6172 6b65 742c 2070 6172 616d 7329 0a20  arket, params). 
+00043ba0: 2020 2020 2020 2065 6e61 626c 6555 6e69         enableUni
+00043bb0: 6669 6564 4d61 7267 696e 2c20 656e 6162  fiedMargin, enab
+00043bc0: 6c65 556e 6966 6965 6441 6363 6f75 6e74  leUnifiedAccount
+00043bd0: 203d 2073 656c 662e 6973 5f75 6e69 6669   = self.is_unifi
+00043be0: 6564 5f65 6e61 626c 6564 2829 0a20 2020  ed_enabled().   
+00043bf0: 2020 2020 2069 6620 656e 6162 6c65 556e       if enableUn
+00043c00: 6966 6965 6441 6363 6f75 6e74 2061 6e64  ifiedAccount and
+00043c10: 206e 6f74 2069 7349 6e76 6572 7365 3a0a   not isInverse:.
+00043c20: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00043c30: 726e 2073 656c 662e 6665 7463 685f 756e  rn self.fetch_un
+00043c40: 6966 6965 645f 6163 636f 756e 745f 6f70  ified_account_op
+00043c50: 656e 5f6f 7264 6572 7328 7379 6d62 6f6c  en_orders(symbol
+00043c60: 2c20 7369 6e63 652c 206c 696d 6974 2c20  , since, limit, 
+00043c70: 7175 6572 7929 0a20 2020 2020 2020 2065  query).        e
+00043c80: 6c69 6620 7479 7065 203d 3d20 2773 706f  lif type == 'spo
+00043c90: 7427 3a0a 2020 2020 2020 2020 2020 2020  t':.            
+00043ca0: 7265 7475 726e 2073 656c 662e 6665 7463  return self.fetc
+00043cb0: 685f 7370 6f74 5f6f 7065 6e5f 6f72 6465  h_spot_open_orde
+00043cc0: 7273 2873 796d 626f 6c2c 2073 696e 6365  rs(symbol, since
+00043cd0: 2c20 6c69 6d69 742c 2071 7565 7279 290a  , limit, query).
+00043ce0: 2020 2020 2020 2020 656c 6966 2065 6e61          elif ena
+00043cf0: 626c 6555 6e69 6669 6564 4d61 7267 696e  bleUnifiedMargin
+00043d00: 2061 6e64 206e 6f74 2069 7349 6e76 6572   and not isInver
+00043d10: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00043d20: 7265 7475 726e 2073 656c 662e 6665 7463  return self.fetc
+00043d30: 685f 756e 6966 6965 645f 6d61 7267 696e  h_unified_margin
+00043d40: 5f6f 7065 6e5f 6f72 6465 7273 2873 796d  _open_orders(sym
+00043d50: 626f 6c2c 2073 696e 6365 2c20 6c69 6d69  bol, since, limi
+00043d60: 742c 2071 7565 7279 290a 2020 2020 2020  t, query).      
+00043d70: 2020 656c 6966 2069 7355 7364 6353 6574    elif isUsdcSet
+00043d80: 746c 6564 3a0a 2020 2020 2020 2020 2020  tled:.          
+00043d90: 2020 7265 7475 726e 2073 656c 662e 6665    return self.fe
+00043da0: 7463 685f 7573 6463 5f6f 7065 6e5f 6f72  tch_usdc_open_or
+00043db0: 6465 7273 2873 796d 626f 6c2c 2073 696e  ders(symbol, sin
+00043dc0: 6365 2c20 6c69 6d69 742c 2071 7565 7279  ce, limit, query
+00043dd0: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
+00043de0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00043df0: 726e 2073 656c 662e 6665 7463 685f 6465  rn self.fetch_de
+00043e00: 7269 7661 7469 7665 735f 6f70 656e 5f6f  rivatives_open_o
+00043e10: 7264 6572 7328 7379 6d62 6f6c 2c20 7369  rders(symbol, si
+00043e20: 6e63 652c 206c 696d 6974 2c20 7175 6572  nce, limit, quer
+00043e30: 7929 0a0a 2020 2020 6465 6620 6665 7463  y)..    def fetc
+00043e40: 685f 6f72 6465 725f 7472 6164 6573 2873  h_order_trades(s
+00043e50: 656c 662c 2069 643a 2073 7472 2c20 7379  elf, id: str, sy
+00043e60: 6d62 6f6c 3a20 4f70 7469 6f6e 616c 5b73  mbol: Optional[s
+00043e70: 7472 5d20 3d20 4e6f 6e65 2c20 7369 6e63  tr] = None, sinc
+00043e80: 653a 204f 7074 696f 6e61 6c5b 696e 745d  e: Optional[int]
+00043e90: 203d 204e 6f6e 652c 206c 696d 6974 3a20   = None, limit: 
+00043ea0: 4f70 7469 6f6e 616c 5b69 6e74 5d20 3d20  Optional[int] = 
+00043eb0: 4e6f 6e65 2c20 7061 7261 6d73 3d7b 7d29  None, params={})
+00043ec0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+00043ed0: 2020 2020 2020 6665 7463 6820 616c 6c20        fetch all 
+00043ee0: 7468 6520 7472 6164 6573 206d 6164 6520  the trades made 
+00043ef0: 6672 6f6d 2061 2073 696e 676c 6520 6f72  from a single or
+00043f00: 6465 720a 2020 2020 2020 2020 3a70 6172  der.        :par
+00043f10: 616d 2073 7472 2069 643a 206f 7264 6572  am str id: order
+00043f20: 2069 640a 2020 2020 2020 2020 3a70 6172   id.        :par
+00043f30: 616d 2073 7472 7c4e 6f6e 6520 7379 6d62  am str|None symb
+00043f40: 6f6c 3a20 756e 6966 6965 6420 6d61 726b  ol: unified mark
+00043f50: 6574 2073 796d 626f 6c0a 2020 2020 2020  et symbol.      
+00043f60: 2020 3a70 6172 616d 2069 6e74 7c4e 6f6e    :param int|Non
+00043f70: 6520 7369 6e63 653a 2074 6865 2065 6172  e since: the ear
+00043f80: 6c69 6573 7420 7469 6d65 2069 6e20 6d73  liest time in ms
+00043f90: 2074 6f20 6665 7463 6820 7472 6164 6573   to fetch trades
+00043fa0: 2066 6f72 0a20 2020 2020 2020 203a 7061   for.        :pa
+00043fb0: 7261 6d20 696e 747c 4e6f 6e65 206c 696d  ram int|None lim
+00043fc0: 6974 3a20 7468 6520 6d61 7869 6d75 6d20  it: the maximum 
+00043fd0: 6e75 6d62 6572 206f 6620 7472 6164 6573  number of trades
+00043fe0: 2074 6f20 7265 7472 6965 7665 0a20 2020   to retrieve.   
+00043ff0: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
+00044000: 2070 6172 616d 733a 2065 7874 7261 2070   params: extra p
+00044010: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
+00044020: 6963 2074 6f20 7468 6520 6279 6269 7420  ic to the bybit 
+00044030: 6170 6920 656e 6470 6f69 6e74 0a20 2020  api endpoint.   
+00044040: 2020 2020 203a 7265 7475 726e 7320 5b64       :returns [d
+00044050: 6963 745d 3a20 6120 6c69 7374 206f 6620  ict]: a list of 
+00044060: 6074 7261 6465 2073 7472 7563 7475 7265  `trade structure
+00044070: 7320 3c68 7474 7073 3a2f 2f64 6f63 732e  s <https://docs.
+00044080: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d74  ccxt.com/#/?id=t
+00044090: 7261 6465 2d73 7472 7563 7475 7265 3e60  rade-structure>`
+000440a0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+000440b0: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
+000440c0: 0a20 2020 2020 2020 2020 2020 2027 6f72  .            'or
+000440d0: 6465 7249 6427 3a20 6964 2c0a 2020 2020  derId': id,.    
+000440e0: 2020 2020 7d0a 2020 2020 2020 2020 7265      }.        re
+000440f0: 7475 726e 2073 656c 662e 6665 7463 685f  turn self.fetch_
+00044100: 6d79 5f74 7261 6465 7328 7379 6d62 6f6c  my_trades(symbol
+00044110: 2c20 7369 6e63 652c 206c 696d 6974 2c20  , since, limit, 
+00044120: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
+00044130: 6573 742c 2070 6172 616d 7329 290a 0a20  est, params)).. 
+00044140: 2020 2064 6566 2066 6574 6368 5f6d 795f     def fetch_my_
+00044150: 756e 6966 6965 645f 7472 6164 6573 2873  unified_trades(s
+00044160: 656c 662c 2073 796d 626f 6c3a 204f 7074  elf, symbol: Opt
+00044170: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
+00044180: 652c 2073 696e 6365 3a20 4f70 7469 6f6e  e, since: Option
+00044190: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c20  al[int] = None, 
+000441a0: 6c69 6d69 743a 204f 7074 696f 6e61 6c5b  limit: Optional[
+000441b0: 696e 745d 203d 204e 6f6e 652c 2070 6172  int] = None, par
+000441c0: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
+000441d0: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
+000441e0: 7473 2829 0a20 2020 2020 2020 206d 6172  ts().        mar
+000441f0: 6b65 7420 3d20 4e6f 6e65 0a20 2020 2020  ket = None.     
+00044200: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
+00044210: 2020 2020 2020 2020 2020 2023 2027 7379             # 'sy
+00044220: 6d62 6f6c 273a 206d 6172 6b65 745b 2769  mbol': market['i
+00044230: 6427 5d2c 0a20 2020 2020 2020 2020 2020  d'],.           
+00044240: 2023 2027 6361 7465 676f 7279 273a 2027   # 'category': '
+00044250: 272c 2020 2320 5072 6f64 7563 7420 7479  ',  # Product ty
+00044260: 7065 2e20 7370 6f74 2c6c 696e 6561 722c  pe. spot,linear,
+00044270: 6f70 7469 6f6e 0a20 2020 2020 2020 2020  option.         
+00044280: 2020 2023 2027 6f72 6465 7249 6427 3a20     # 'orderId': 
+00044290: 2727 2c20 2023 204f 7264 6572 2049 440a  '',  # Order ID.
+000442a0: 2020 2020 2020 2020 2020 2020 2320 276f              # 'o
+000442b0: 7264 6572 4c69 6e6b 4964 273a 2027 272c  rderLinkId': '',
+000442c0: 2020 2320 5573 6572 2063 7573 746f 6d69    # User customi
+000442d0: 7365 6420 6f72 6465 7220 4944 0a20 2020  sed order ID.   
+000442e0: 2020 2020 2020 2020 2023 2027 6261 7365           # 'base
+000442f0: 436f 696e 273a 2027 272c 2020 2320 4261  Coin': '',  # Ba
+00044300: 7365 2063 6f69 6e0a 2020 2020 2020 2020  se coin.        
+00044310: 2020 2020 2320 2773 7461 7274 5469 6d65      # 'startTime
+00044320: 273a 2030 2c20 2023 2054 6865 2073 7461  ': 0,  # The sta
+00044330: 7274 2074 696d 6573 7461 6d70 286d 7329  rt timestamp(ms)
+00044340: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+00044350: 656e 6454 696d 6527 3a20 302c 2020 2320  endTime': 0,  # 
+00044360: 5468 6520 656e 6420 7469 6d65 7374 616d  The end timestam
+00044370: 7028 6d73 290a 2020 2020 2020 2020 2020  p(ms).          
+00044380: 2020 2320 2765 7865 6354 7970 6527 3a20    # 'execType': 
+00044390: 2727 2c20 2023 2045 7865 6375 7469 6f6e  '',  # Execution
+000443a0: 2074 7970 650a 2020 2020 2020 2020 2020   type.          
+000443b0: 2020 2320 276c 696d 6974 273a 2030 2c20    # 'limit': 0, 
+000443c0: 2023 204c 696d 6974 2066 6f72 2064 6174   # Limit for dat
+000443d0: 6120 7369 7a65 2070 6572 2070 6167 652e  a size per page.
+000443e0: 205b 312c 2031 3030 5d2e 2044 6566 6175   [1, 100]. Defau
+000443f0: 6c74 3a20 3530 0a20 2020 2020 2020 2020  lt: 50.         
+00044400: 2020 2023 2027 6375 7273 6f72 273a 2027     # 'cursor': '
+00044410: 272c 2020 2320 4375 7273 6f72 2e20 5573  ',  # Cursor. Us
+00044420: 6564 2066 6f72 2070 6167 696e 6174 696f  ed for paginatio
+00044430: 6e0a 2020 2020 2020 2020 7d0a 2020 2020  n.        }.    
+00044440: 2020 2020 6966 2073 796d 626f 6c20 6973      if symbol is
+00044450: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00044460: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
+00044470: 7365 6c66 2e6d 6172 6b65 7428 7379 6d62  self.market(symb
+00044480: 6f6c 290a 2020 2020 2020 2020 2020 2020  ol).            
+00044490: 7265 7175 6573 745b 2773 796d 626f 6c27  request['symbol'
+000444a0: 5d20 3d20 6d61 726b 6574 5b27 6964 275d  ] = market['id']
+000444b0: 0a20 2020 2020 2020 2074 7970 6520 3d20  .        type = 
+000444c0: 4e6f 6e65 0a20 2020 2020 2020 2074 7970  None.        typ
+000444d0: 652c 2070 6172 616d 7320 3d20 7365 6c66  e, params = self
+000444e0: 2e68 616e 646c 655f 6d61 726b 6574 5f74  .handle_market_t
+000444f0: 7970 655f 616e 645f 7061 7261 6d73 2827  ype_and_params('
+00044500: 6665 7463 684d 7954 7261 6465 7327 2c20  fetchMyTrades', 
+00044510: 6d61 726b 6574 2c20 7061 7261 6d73 290a  market, params).
+00044520: 2020 2020 2020 2020 6966 2074 7970 6520          if type 
+00044530: 3d3d 2027 7370 6f74 273a 0a20 2020 2020  == 'spot':.     
+00044540: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+00044550: 6361 7465 676f 7279 275d 203d 2027 7370  category'] = 'sp
+00044560: 6f74 270a 2020 2020 2020 2020 656c 7365  ot'.        else
+00044570: 3a0a 2020 2020 2020 2020 2020 2020 7375  :.            su
+00044580: 6254 7970 6520 3d20 4e6f 6e65 0a20 2020  bType = None.   
+00044590: 2020 2020 2020 2020 2073 7562 5479 7065           subType
+000445a0: 2c20 7061 7261 6d73 203d 2073 656c 662e  , params = self.
+000445b0: 6861 6e64 6c65 5f73 7562 5f74 7970 655f  handle_sub_type_
+000445c0: 616e 645f 7061 7261 6d73 2827 6665 7463  and_params('fetc
+000445d0: 684d 7954 7261 6465 7327 2c20 6d61 726b  hMyTrades', mark
+000445e0: 6574 2c20 7061 7261 6d73 290a 2020 2020  et, params).    
+000445f0: 2020 2020 2020 2020 6966 2073 7562 5479          if subTy
+00044600: 7065 203d 3d20 2769 6e76 6572 7365 273a  pe == 'inverse':
+00044610: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00044620: 2072 6169 7365 204e 6f74 5375 7070 6f72   raise NotSuppor
+00044630: 7465 6428 7365 6c66 2e69 6420 2b20 2720  ted(self.id + ' 
+00044640: 6665 7463 684d 7954 7261 6465 7328 2920  fetchMyTrades() 
+00044650: 646f 6573 206e 6f74 2073 7570 706f 7274  does not support
+00044660: 2027 202b 2073 7562 5479 7065 202b 2027   ' + subType + '
+00044670: 206d 6172 6b65 7473 2e27 290a 2020 2020   markets.').    
+00044680: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+00044690: 2763 6174 6567 6f72 7927 5d20 3d20 7375  'category'] = su
+000446a0: 6254 7970 650a 2020 2020 2020 2020 6966  bType.        if
+000446b0: 2073 696e 6365 2069 7320 6e6f 7420 4e6f   since is not No
+000446c0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+000446d0: 7265 7175 6573 745b 2773 7461 7274 5469  request['startTi
+000446e0: 6d65 275d 203d 2073 696e 6365 0a20 2020  me'] = since.   
+000446f0: 2020 2020 2069 6620 6c69 6d69 7420 6973       if limit is
+00044700: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00044710: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+00044720: 6c69 6d69 7427 5d20 3d20 6c69 6d69 7420  limit'] = limit 
+00044730: 2023 2064 6566 6175 6c74 2032 302c 206d   # default 20, m
+00044740: 6178 2035 300a 2020 2020 2020 2020 7265  ax 50.        re
+00044750: 7370 6f6e 7365 203d 2073 656c 662e 7072  sponse = self.pr
+00044760: 6976 6174 6547 6574 5635 4578 6563 7574  ivateGetV5Execut
+00044770: 696f 6e4c 6973 7428 7365 6c66 2e65 7874  ionList(self.ext
+00044780: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
+00044790: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
+000447a0: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+000447b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000447c0: 2020 2272 6574 436f 6465 223a 2030 2c0a    "retCode": 0,.
+000447d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000447e0: 2020 2272 6574 4d73 6722 3a20 224f 4b22    "retMsg": "OK"
+000447f0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00044800: 2020 2020 2272 6573 756c 7422 3a20 7b0a      "result": {.
+00044810: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00044820: 2020 2020 2020 226e 6578 7450 6167 6543        "nextPageC
+00044830: 7572 736f 7222 3a20 2231 3332 3736 3625  ursor": "132766%
+00044840: 3341 3225 3243 3133 3237 3636 2533 4132  3A2%2C132766%3A2
+00044850: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00044860: 2020 2020 2020 2020 2022 6361 7465 676f           "catego
+00044870: 7279 223a 2022 6c69 6e65 6172 222c 0a20  ry": "linear",. 
+00044880: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00044890: 2020 2020 2022 6c69 7374 223a 205b 0a20       "list": [. 
+000448a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000448b0: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
+000448c0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+000448d0: 2020 2020 2020 2020 2022 7379 6d62 6f6c           "symbol
+000448e0: 223a 2022 4554 4850 4552 5022 2c0a 2020  ": "ETHPERP",.  
+000448f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00044900: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+00044910: 6572 5479 7065 223a 2022 4d61 726b 6574  erType": "Market
+00044920: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00044930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044940: 2022 756e 6465 726c 7969 6e67 5072 6963   "underlyingPric
+00044950: 6522 3a20 2222 2c0a 2020 2020 2020 2020  e": "",.        
+00044960: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00044970: 2020 2020 2020 226f 7264 6572 4c69 6e6b        "orderLink
+00044980: 4964 223a 2022 222c 0a20 2020 2020 2020  Id": "",.       
+00044990: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+000449a0: 2020 2020 2020 2022 7369 6465 223a 2022         "side": "
+000449b0: 4275 7922 2c0a 2020 2020 2020 2020 2320  Buy",.        # 
+000449c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000449d0: 2020 2020 2269 6e64 6578 5072 6963 6522      "indexPrice"
+000449e0: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
+000449f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044a00: 2020 2020 226f 7264 6572 4964 223a 2022      "orderId": "
+00044a10: 3863 3036 3533 3431 2d37 6235 322d 3463  8c065341-7b52-4c
+00044a20: 6139 2d61 6332 632d 3337 6533 3161 6335  a9-ac2c-37e31ac5
+00044a30: 3563 3934 222c 0a20 2020 2020 2020 2023  5c94",.        #
+00044a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044a50: 2020 2020 2022 7374 6f70 4f72 6465 7254       "stopOrderT
+00044a60: 7970 6522 3a20 2255 4e4b 4e4f 574e 222c  ype": "UNKNOWN",
+00044a70: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00044a80: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00044a90: 6c65 6176 6573 5174 7922 3a20 2230 222c  leavesQty": "0",
+00044aa0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00044ab0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00044ac0: 6578 6563 5469 6d65 223a 2022 3136 3732  execTime": "1672
+00044ad0: 3238 3237 3232 3432 3922 2c0a 2020 2020  282722429",.    
+00044ae0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00044af0: 2020 2020 2020 2020 2020 2269 734d 616b            "isMak
+00044b00: 6572 223a 2046 616c 7365 2c0a 2020 2020  er": False,.    
+00044b10: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00044b20: 2020 2020 2020 2020 2020 2265 7865 6346            "execF
+00044b30: 6565 223a 2022 302e 3037 3134 3039 222c  ee": "0.071409",
+00044b40: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00044b50: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00044b60: 6665 6552 6174 6522 3a20 2230 2e30 3030  feeRate": "0.000
+00044b70: 3622 2c0a 2020 2020 2020 2020 2320 2020  6",.        #   
+00044b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044b90: 2020 2265 7865 6349 6422 3a20 2265 3063    "execId": "e0c
+00044ba0: 6265 3831 642d 3066 3138 2d35 3836 362d  be81d-0f18-5866-
+00044bb0: 3934 3135 2d63 6633 3139 6235 6461 6233  9415-cf319b5dab3
+00044bc0: 6222 2c0a 2020 2020 2020 2020 2320 2020  b",.        #   
+00044bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044be0: 2020 2274 7261 6465 4976 223a 2022 222c    "tradeIv": "",
+00044bf0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00044c00: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00044c10: 626c 6f63 6b54 7261 6465 4964 223a 2022  blockTradeId": "
+00044c20: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00044c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044c40: 2022 6d61 726b 5072 6963 6522 3a20 2231   "markPrice": "1
+00044c50: 3138 332e 3534 222c 0a20 2020 2020 2020  183.54",.       
+00044c60: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00044c70: 2020 2020 2020 2022 6578 6563 5072 6963         "execPric
+00044c80: 6522 3a20 2231 3139 302e 3135 222c 0a20  e": "1190.15",. 
+00044c90: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00044ca0: 2020 2020 2020 2020 2020 2020 2022 6d61               "ma
+00044cb0: 726b 4976 223a 2022 222c 0a20 2020 2020  rkIv": "",.     
+00044cc0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00044cd0: 2020 2020 2020 2020 2022 6f72 6465 7251           "orderQ
+00044ce0: 7479 223a 2022 302e 3122 2c0a 2020 2020  ty": "0.1",.    
+00044cf0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00044d00: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+00044d10: 5072 6963 6522 3a20 2231 3233 362e 3922  Price": "1236.9"
+00044d20: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00044d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044d40: 2265 7865 6356 616c 7565 223a 2022 3131  "execValue": "11
+00044d50: 392e 3031 3522 2c0a 2020 2020 2020 2020  9.015",.        
+00044d60: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00044d70: 2020 2020 2020 2265 7865 6354 7970 6522        "execType"
+00044d80: 3a20 2254 7261 6465 222c 0a20 2020 2020  : "Trade",.     
+00044d90: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00044da0: 2020 2020 2020 2020 2022 6578 6563 5174           "execQt
+00044db0: 7922 3a20 2230 2e31 220a 2020 2020 2020  y": "0.1".      
+00044dc0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00044dd0: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
+00044de0: 2020 2020 2020 2020 2020 2020 5d0a 2020              ].  
+00044df0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00044e00: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
+00044e10: 2020 2020 2022 7265 7445 7874 496e 666f       "retExtInfo
+00044e20: 223a 207b 7d2c 0a20 2020 2020 2020 2023  ": {},.        #
+00044e30: 2020 2020 2020 2020 2022 7469 6d65 223a           "time":
+00044e40: 2031 3637 3232 3833 3735 3435 3130 0a20   1672283754510. 
+00044e50: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+00044e60: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+00044e70: 2072 6573 756c 7420 3d20 7365 6c66 2e73   result = self.s
+00044e80: 6166 655f 7661 6c75 6528 7265 7370 6f6e  afe_value(respon
+00044e90: 7365 2c20 2772 6573 756c 7427 2c20 7b7d  se, 'result', {}
+00044ea0: 290a 2020 2020 2020 2020 7472 6164 6573  ).        trades
+00044eb0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+00044ec0: 7565 2872 6573 756c 742c 2027 6c69 7374  ue(result, 'list
+00044ed0: 272c 205b 5d29 0a20 2020 2020 2020 2072  ', []).        r
+00044ee0: 6574 7572 6e20 7365 6c66 2e70 6172 7365  eturn self.parse
+00044ef0: 5f74 7261 6465 7328 7472 6164 6573 2c20  _trades(trades, 
+00044f00: 6d61 726b 6574 2c20 7369 6e63 652c 206c  market, since, l
+00044f10: 696d 6974 290a 0a20 2020 2064 6566 2066  imit)..    def f
+00044f20: 6574 6368 5f6d 795f 7370 6f74 5f74 7261  etch_my_spot_tra
+00044f30: 6465 7328 7365 6c66 2c20 7379 6d62 6f6c  des(self, symbol
+00044f40: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
+00044f50: 3d20 4e6f 6e65 2c20 7369 6e63 653a 204f  = None, since: O
+00044f60: 7074 696f 6e61 6c5b 696e 745d 203d 204e  ptional[int] = N
+00044f70: 6f6e 652c 206c 696d 6974 3a20 4f70 7469  one, limit: Opti
+00044f80: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
+00044f90: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
+00044fa0: 2020 2020 2020 6966 2073 796d 626f 6c20        if symbol 
+00044fb0: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
+00044fc0: 2020 2020 2072 6169 7365 2041 7267 756d       raise Argum
+00044fd0: 656e 7473 5265 7175 6972 6564 2873 656c  entsRequired(sel
+00044fe0: 662e 6964 202b 2027 2066 6574 6368 4d79  f.id + ' fetchMy
+00044ff0: 5370 6f74 5472 6164 6573 2829 2072 6571  SpotTrades() req
+00045000: 7569 7265 7320 6120 7379 6d62 6f6c 2061  uires a symbol a
+00045010: 7267 756d 656e 7427 290a 2020 2020 2020  rgument').      
+00045020: 2020 7365 6c66 2e6c 6f61 645f 6d61 726b    self.load_mark
+00045030: 6574 7328 290a 2020 2020 2020 2020 6d61  ets().        ma
+00045040: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
+00045050: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
+00045060: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
+00045070: 2020 2020 2020 2020 2020 2027 7379 6d62             'symb
+00045080: 6f6c 273a 206d 6172 6b65 745b 2769 6427  ol': market['id'
+00045090: 5d2c 0a20 2020 2020 2020 2020 2020 2023  ],.            #
+000450a0: 2027 6f72 6465 7249 6427 3a20 2766 3138   'orderId': 'f18
+000450b0: 3538 3036 622d 6238 3031 2d34 3066 662d  5806b-b801-40ff-
+000450c0: 6164 6563 2d35 3232 3839 3337 3065 6436  adec-52289370ed6
+000450d0: 3227 2c20 2023 2069 6620 6e6f 7420 7072  2',  # if not pr
+000450e0: 6f76 6964 6564 2077 696c 6c20 7265 7475  ovided will retu
+000450f0: 726e 2075 7365 7227 7320 7472 6164 696e  rn user's tradin
+00045100: 6720 7265 636f 7264 730a 2020 2020 2020  g records.      
+00045110: 2020 2020 2020 2320 2773 7461 7274 5469        # 'startTi
+00045120: 6d65 273a 2069 6e74 2873 696e 6365 202f  me': int(since /
+00045130: 2031 3030 3029 2c0a 2020 2020 2020 2020   1000),.        
+00045140: 2020 2020 2320 2765 6e64 5469 6d65 273a      # 'endTime':
+00045150: 2030 2c0a 2020 2020 2020 2020 2020 2020   0,.            
+00045160: 2320 2766 726f 6d54 7261 6465 4964 273a  # 'fromTradeId':
+00045170: 2027 272c 0a20 2020 2020 2020 2020 2020   '',.           
+00045180: 2023 2027 746f 5472 6164 6549 6427 3a20   # 'toTradeId': 
+00045190: 2727 2c0a 2020 2020 2020 2020 2020 2020  '',.            
+000451a0: 2320 276c 696d 6974 2720 3230 2c20 2023  # 'limit' 20,  #
+000451b0: 206d 6178 2035 300a 2020 2020 2020 2020   max 50.        
+000451c0: 7d0a 2020 2020 2020 2020 6966 2073 696e  }.        if sin
+000451d0: 6365 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ce is not None:.
+000451e0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+000451f0: 6573 745b 2773 7461 7274 5469 6d65 275d  est['startTime']
+00045200: 203d 2073 696e 6365 0a20 2020 2020 2020   = since.       
+00045210: 2069 6620 6c69 6d69 7420 6973 206e 6f74   if limit is not
+00045220: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00045230: 2020 2072 6571 7565 7374 5b27 6c69 6d69     request['limi
+00045240: 7427 5d20 3d20 6c69 6d69 7420 2023 2064  t'] = limit  # d
+00045250: 6566 6175 6c74 2032 302c 206d 6178 2035  efault 20, max 5
+00045260: 300a 2020 2020 2020 2020 7265 7370 6f6e  0.        respon
+00045270: 7365 203d 2073 656c 662e 7072 6976 6174  se = self.privat
+00045280: 6547 6574 5370 6f74 5633 5072 6976 6174  eGetSpotV3Privat
+00045290: 654d 7954 7261 6465 7328 7365 6c66 2e65  eMyTrades(self.e
+000452a0: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
+000452b0: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
+000452c0: 230a 2020 2020 2020 2020 2320 2020 207b  #.        #    {
+000452d0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000452e0: 2020 2022 7265 7443 6f64 6522 3a20 2230     "retCode": "0
+000452f0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00045300: 2020 2020 2022 7265 744d 7367 223a 2022       "retMsg": "
+00045310: 4f4b 222c 0a20 2020 2020 2020 2023 2020  OK",.        #  
+00045320: 2020 2020 2020 2022 7265 7375 6c74 223a         "result":
+00045330: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+00045340: 2020 2020 2020 2020 2022 6c69 7374 223a           "list":
+00045350: 205b 0a20 2020 2020 2020 2023 2020 2020   [.        #    
+00045360: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
+00045370: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00045380: 2020 2020 2020 2020 2020 2020 2022 7379               "sy
+00045390: 6d62 6f6c 223a 2022 4141 5645 5553 4454  mbol": "AAVEUSDT
+000453a0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+000453b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000453c0: 2022 6964 223a 2022 3132 3734 3738 3531   "id": "12747851
+000453d0: 3031 3936 3537 3136 3939 3222 2c0a 2020  01965716992",.  
+000453e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000453f0: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+00045400: 6572 4964 223a 2022 3132 3734 3738 3432  erId": "12747842
+00045410: 3532 3335 3930 3839 3636 3422 2c0a 2020  52359089664",.  
+00045420: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00045430: 2020 2020 2020 2020 2020 2020 2274 7261              "tra
+00045440: 6465 4964 223a 2022 3232 3730 3030 3030  deId": "22700000
+00045450: 3030 3033 3133 3635 3633 3922 2c0a 2020  00031365639",.  
+00045460: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00045470: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+00045480: 6572 5072 6963 6522 3a20 2238 322e 3522  erPrice": "82.5"
+00045490: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000454a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000454b0: 226f 7264 6572 5174 7922 3a20 2230 2e30  "orderQty": "0.0
+000454c0: 3136 222c 0a20 2020 2020 2020 2023 2020  16",.        #  
+000454d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000454e0: 2020 2022 6578 6563 4665 6522 3a20 2230     "execFee": "0
+000454f0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00045500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045510: 2022 6665 6554 6f6b 656e 4964 223a 2022   "feeTokenId": "
+00045520: 4141 5645 222c 0a20 2020 2020 2020 2023  AAVE",.        #
+00045530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045540: 2020 2020 2022 6372 6561 7454 696d 6522       "creatTime"
+00045550: 3a20 2231 3636 3637 3032 3232 3633 3236  : "1666702226326
+00045560: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00045570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045580: 2022 6973 4275 7965 7222 3a20 2230 222c   "isBuyer": "0",
+00045590: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000455a0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000455b0: 6973 4d61 6b65 7222 3a20 2230 222c 0a20  isMaker": "0",. 
+000455c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000455d0: 2020 2020 2020 2020 2020 2020 2022 6d61               "ma
+000455e0: 7463 684f 7264 6572 4964 223a 2022 3132  tchOrderId": "12
+000455f0: 3734 3738 3531 3031 3836 3530 3736 3232  7478510186507622
+00045600: 3422 2c0a 2020 2020 2020 2020 2320 2020  4",.        #   
+00045610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045620: 2020 226d 616b 6572 5265 6261 7465 223a    "makerRebate":
+00045630: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
+00045640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045650: 2020 2020 2265 7865 6375 7469 6f6e 5469      "executionTi
+00045660: 6d65 223a 2022 3136 3636 3730 3232 3236  me": "1666702226
+00045670: 3333 3522 0a20 2020 2020 2020 2023 2020  335".        #  
+00045680: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+00045690: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000456a0: 2020 2020 2020 2020 5d0a 2020 2020 2020          ].      
+000456b0: 2020 2320 2020 2020 2020 2020 7d2c 0a20    #         },. 
+000456c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000456d0: 2022 7265 7445 7874 4d61 7022 3a20 7b7d   "retExtMap": {}
+000456e0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000456f0: 2020 2020 2272 6574 4578 7449 6e66 6f22      "retExtInfo"
+00045700: 3a20 6e75 6c6c 2c0a 2020 2020 2020 2020  : null,.        
+00045710: 2320 2020 2020 2020 2020 2274 696d 6522  #         "time"
+00045720: 3a20 2231 3636 3637 3638 3231 3531 3537  : "1666768215157
+00045730: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
+00045740: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
+00045750: 2020 2020 7265 7375 6c74 203d 2073 656c      result = sel
+00045760: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
+00045770: 706f 6e73 652c 2027 7265 7375 6c74 272c  ponse, 'result',
+00045780: 207b 7d29 0a20 2020 2020 2020 2074 7261   {}).        tra
+00045790: 6465 7320 3d20 7365 6c66 2e73 6166 655f  des = self.safe_
+000457a0: 7661 6c75 6528 7265 7375 6c74 2c20 276c  value(result, 'l
+000457b0: 6973 7427 2c20 5b5d 290a 2020 2020 2020  ist', []).      
+000457c0: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
+000457d0: 7273 655f 7472 6164 6573 2874 7261 6465  rse_trades(trade
+000457e0: 732c 206d 6172 6b65 742c 2073 696e 6365  s, market, since
+000457f0: 2c20 6c69 6d69 7429 0a0a 2020 2020 6465  , limit)..    de
+00045800: 6620 6665 7463 685f 6d79 5f75 6e69 6669  f fetch_my_unifi
+00045810: 6564 5f6d 6172 6769 6e5f 7472 6164 6573  ed_margin_trades
+00045820: 2873 656c 662c 2073 796d 626f 6c3a 204f  (self, symbol: O
+00045830: 7074 696f 6e61 6c5b 7374 725d 203d 204e  ptional[str] = N
+00045840: 6f6e 652c 2073 696e 6365 3a20 4f70 7469  one, since: Opti
+00045850: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
+00045860: 2c20 6c69 6d69 743a 204f 7074 696f 6e61  , limit: Optiona
+00045870: 6c5b 696e 745d 203d 204e 6f6e 652c 2070  l[int] = None, p
+00045880: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
+00045890: 2020 2073 656c 662e 6c6f 6164 5f6d 6172     self.load_mar
+000458a0: 6b65 7473 2829 0a20 2020 2020 2020 206d  kets().        m
+000458b0: 6172 6b65 7420 3d20 4e6f 6e65 0a20 2020  arket = None.   
+000458c0: 2020 2020 2073 6574 746c 6520 3d20 4e6f       settle = No
+000458d0: 6e65 0a20 2020 2020 2020 2072 6571 7565  ne.        reque
+000458e0: 7374 203d 207b 0a20 2020 2020 2020 2020  st = {.         
+000458f0: 2020 2023 2027 7379 6d62 6f6c 273a 206d     # 'symbol': m
+00045900: 6172 6b65 745b 2769 6427 5d2c 0a20 2020  arket['id'],.   
+00045910: 2020 2020 2020 2020 2023 2027 6f72 6465           # 'orde
+00045920: 7249 6427 3a20 2766 3138 3538 3036 622d  rId': 'f185806b-
+00045930: 6238 3031 2d34 3066 662d 6164 6563 2d35  b801-40ff-adec-5
+00045940: 3232 3839 3337 3065 6436 3227 2c20 2023  2289370ed62',  #
+00045950: 2069 6620 6e6f 7420 7072 6f76 6964 6564   if not provided
+00045960: 2077 696c 6c20 7265 7475 726e 2075 7365   will return use
+00045970: 7227 7320 7472 6164 696e 6720 7265 636f  r's trading reco
+00045980: 7264 730a 2020 2020 2020 2020 2020 2020  rds.            
+00045990: 2320 2773 7461 7274 5469 6d65 273a 2069  # 'startTime': i
+000459a0: 6e74 2873 696e 6365 202f 2031 3030 3029  nt(since / 1000)
+000459b0: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+000459c0: 2765 6e64 5469 6d65 273a 2030 2c0a 2020  'endTime': 0,.  
+000459d0: 2020 2020 2020 2020 2020 2320 2763 6174            # 'cat
+000459e0: 6567 6f72 7927 3a20 2727 0a20 2020 2020  egory': ''.     
+000459f0: 2020 2020 2020 2023 2027 6c69 6d69 7427         # 'limit'
+00045a00: 2032 302c 2020 2320 6d61 7820 3530 0a20   20,  # max 50. 
+00045a10: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+00045a20: 2069 6620 7379 6d62 6f6c 2069 7320 6e6f   if symbol is no
+00045a30: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00045a40: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
+00045a50: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
+00045a60: 0a20 2020 2020 2020 2020 2020 2073 6574  .            set
+00045a70: 746c 6520 3d20 6d61 726b 6574 5b27 7365  tle = market['se
+00045a80: 7474 6c65 275d 0a20 2020 2020 2020 2020  ttle'].         
+00045a90: 2020 2072 6571 7565 7374 5b27 7379 6d62     request['symb
+00045aa0: 6f6c 275d 203d 206d 6172 6b65 745b 2769  ol'] = market['i
+00045ab0: 6427 5d0a 2020 2020 2020 2020 7375 6254  d'].        subT
+00045ac0: 7970 6520 3d20 4e6f 6e65 0a20 2020 2020  ype = None.     
+00045ad0: 2020 2073 7562 5479 7065 2c20 7061 7261     subType, para
+00045ae0: 6d73 203d 2073 656c 662e 6861 6e64 6c65  ms = self.handle
+00045af0: 5f73 7562 5f74 7970 655f 616e 645f 7061  _sub_type_and_pa
+00045b00: 7261 6d73 2827 6665 7463 684d 7954 7261  rams('fetchMyTra
+00045b10: 6465 7327 2c20 6d61 726b 6574 2c20 7061  des', market, pa
+00045b20: 7261 6d73 2c20 276c 696e 6561 7227 290a  rams, 'linear').
+00045b30: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+00045b40: 2763 6174 6567 6f72 7927 5d20 3d20 7375  'category'] = su
+00045b50: 6254 7970 650a 2020 2020 2020 2020 7365  bType.        se
+00045b60: 7474 6c65 2c20 7061 7261 6d73 203d 2073  ttle, params = s
+00045b70: 656c 662e 6861 6e64 6c65 5f6f 7074 696f  elf.handle_optio
+00045b80: 6e5f 616e 645f 7061 7261 6d73 2870 6172  n_and_params(par
+00045b90: 616d 732c 2027 6361 6e63 656c 416c 6c4f  ams, 'cancelAllO
+00045ba0: 7264 6572 7327 2c20 2773 6574 746c 6527  rders', 'settle'
+00045bb0: 2c20 7365 7474 6c65 290a 2020 2020 2020  , settle).      
+00045bc0: 2020 6966 2073 6574 746c 6520 6973 206e    if settle is n
+00045bd0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00045be0: 2020 2020 2072 6571 7565 7374 5b27 7365       request['se
+00045bf0: 7474 6c65 436f 696e 275d 203d 2073 6574  ttleCoin'] = set
+00045c00: 746c 650a 2020 2020 2020 2020 6966 2073  tle.        if s
+00045c10: 696e 6365 2069 7320 6e6f 7420 4e6f 6e65  ince is not None
+00045c20: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00045c30: 7175 6573 745b 2773 7461 7274 5469 6d65  quest['startTime
+00045c40: 275d 203d 2073 696e 6365 0a20 2020 2020  '] = since.     
+00045c50: 2020 2069 6620 6c69 6d69 7420 6973 206e     if limit is n
+00045c60: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00045c70: 2020 2020 2072 6571 7565 7374 5b27 6c69       request['li
+00045c80: 6d69 7427 5d20 3d20 6c69 6d69 7420 2023  mit'] = limit  #
+00045c90: 2064 6566 6175 6c74 2032 302c 206d 6178   default 20, max
+00045ca0: 2035 300a 2020 2020 2020 2020 7265 7370   50.        resp
+00045cb0: 6f6e 7365 203d 2073 656c 662e 7072 6976  onse = self.priv
+00045cc0: 6174 6547 6574 556e 6966 6965 6456 3350  ateGetUnifiedV3P
+00045cd0: 7269 7661 7465 4578 6563 7574 696f 6e4c  rivateExecutionL
+00045ce0: 6973 7428 7365 6c66 2e65 7874 656e 6428  ist(self.extend(
+00045cf0: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
+00045d00: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
+00045d10: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
+00045d20: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
+00045d30: 6574 436f 6465 223a 2030 2c0a 2020 2020  etCode": 0,.    
+00045d40: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
+00045d50: 6574 4d73 6722 3a20 2253 7563 6365 7373  etMsg": "Success
 00045d60: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00045d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045d80: 2022 6578 6563 5479 7065 223a 2022 5472   "execType": "Tr
-00045d90: 6164 6522 2c0a 2020 2020 2020 2020 2320  ade",.        # 
-00045da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045db0: 2020 2020 2265 7865 6351 7479 223a 2022      "execQty": "
-00045dc0: 302e 3032 3030 220a 2020 2020 2020 2020  0.0200".        
-00045dd0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00045de0: 2020 7d0a 2020 2020 2020 2020 2320 2020    }.        #   
-00045df0: 2020 2020 2020 2020 2020 5d0a 2020 2020            ].    
-00045e00: 2020 2020 2320 2020 2020 2020 2020 7d2c      #         },
-00045e10: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00045e20: 2020 2022 7469 6d65 223a 2031 3635 3737     "time": 16577
-00045e30: 3134 3239 3237 3833 0a20 2020 2020 2020  14292783.       
-00045e40: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
-00045e50: 2023 0a20 2020 2020 2020 2072 6573 756c   #.        resul
-00045e60: 7420 3d20 7365 6c66 2e73 6166 655f 7661  t = self.safe_va
-00045e70: 6c75 6528 7265 7370 6f6e 7365 2c20 2772  lue(response, 'r
-00045e80: 6573 756c 7427 2c20 7b7d 290a 2020 2020  esult', {}).    
-00045e90: 2020 2020 7472 6164 6573 203d 2073 656c      trades = sel
-00045ea0: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
-00045eb0: 756c 742c 2027 6c69 7374 272c 205b 5d29  ult, 'list', [])
-00045ec0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00045ed0: 7365 6c66 2e70 6172 7365 5f74 7261 6465  self.parse_trade
-00045ee0: 7328 7472 6164 6573 2c20 6d61 726b 6574  s(trades, market
-00045ef0: 2c20 7369 6e63 652c 206c 696d 6974 290a  , since, limit).
-00045f00: 0a20 2020 2064 6566 2066 6574 6368 5f6d  .    def fetch_m
-00045f10: 795f 636f 6e74 7261 6374 5f74 7261 6465  y_contract_trade
-00045f20: 7328 7365 6c66 2c20 7379 6d62 6f6c 3a20  s(self, symbol: 
-00045f30: 4f70 7469 6f6e 616c 5b73 7472 5d20 3d20  Optional[str] = 
-00045f40: 4e6f 6e65 2c20 7369 6e63 653a 204f 7074  None, since: Opt
-00045f50: 696f 6e61 6c5b 696e 745d 203d 204e 6f6e  ional[int] = Non
-00045f60: 652c 206c 696d 6974 3a20 4f70 7469 6f6e  e, limit: Option
-00045f70: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c20  al[int] = None, 
-00045f80: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
-00045f90: 2020 2020 6966 2073 796d 626f 6c20 6973      if symbol is
-00045fa0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00045fb0: 2020 2072 6169 7365 2041 7267 756d 656e     raise Argumen
-00045fc0: 7473 5265 7175 6972 6564 2873 656c 662e  tsRequired(self.
-00045fd0: 6964 202b 2027 2066 6574 6368 4d79 436f  id + ' fetchMyCo
-00045fe0: 6e74 7261 6374 5472 6164 6573 2829 2072  ntractTrades() r
-00045ff0: 6571 7569 7265 7320 6120 7379 6d62 6f6c  equires a symbol
-00046000: 2061 7267 756d 656e 7427 290a 2020 2020   argument').    
-00046010: 2020 2020 7365 6c66 2e6c 6f61 645f 6d61      self.load_ma
-00046020: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
-00046030: 6d61 726b 6574 203d 204e 6f6e 650a 2020  market = None.  
-00046040: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-00046050: 7b0a 2020 2020 2020 2020 2020 2020 2320  {.            # 
-00046060: 2773 796d 626f 6c27 3a20 6d61 726b 6574  'symbol': market
-00046070: 5b27 6964 275d 2c0a 2020 2020 2020 2020  ['id'],.        
-00046080: 2020 2020 2320 2763 6174 6567 6f72 7927      # 'category'
-00046090: 3a20 2727 2c20 2023 2050 726f 6475 6374  : '',  # Product
-000460a0: 2074 7970 652e 2073 706f 742c 6c69 6e65   type. spot,line
-000460b0: 6172 2c6f 7074 696f 6e0a 2020 2020 2020  ar,option.      
-000460c0: 2020 2020 2020 2320 276f 7264 6572 4964        # 'orderId
-000460d0: 273a 2027 272c 2020 2320 4f72 6465 7220  ': '',  # Order 
-000460e0: 4944 0a20 2020 2020 2020 2020 2020 2023  ID.            #
-000460f0: 2027 6f72 6465 724c 696e 6b49 6427 3a20   'orderLinkId': 
-00046100: 2727 2c20 2023 2055 7365 7220 6375 7374  '',  # User cust
-00046110: 6f6d 6973 6564 206f 7264 6572 2049 440a  omised order ID.
-00046120: 2020 2020 2020 2020 2020 2020 2320 2762              # 'b
-00046130: 6173 6543 6f69 6e27 3a20 2727 2c20 2023  aseCoin': '',  #
-00046140: 2042 6173 6520 636f 696e 0a20 2020 2020   Base coin.     
-00046150: 2020 2020 2020 2023 2027 7374 6172 7454         # 'startT
-00046160: 696d 6527 3a20 302c 2020 2320 5468 6520  ime': 0,  # The 
-00046170: 7374 6172 7420 7469 6d65 7374 616d 7028  start timestamp(
-00046180: 6d73 290a 2020 2020 2020 2020 2020 2020  ms).            
-00046190: 2320 2765 6e64 5469 6d65 273a 2030 2c20  # 'endTime': 0, 
-000461a0: 2023 2054 6865 2065 6e64 2074 696d 6573   # The end times
-000461b0: 7461 6d70 286d 7329 0a20 2020 2020 2020  tamp(ms).       
-000461c0: 2020 2020 2023 2027 6578 6563 5479 7065       # 'execType
-000461d0: 273a 2027 272c 2020 2320 4578 6563 7574  ': '',  # Execut
-000461e0: 696f 6e20 7479 7065 0a20 2020 2020 2020  ion type.       
-000461f0: 2020 2020 2023 2027 6c69 6d69 7427 3a20       # 'limit': 
-00046200: 302c 2020 2320 4c69 6d69 7420 666f 7220  0,  # Limit for 
-00046210: 6461 7461 2073 697a 6520 7065 7220 7061  data size per pa
-00046220: 6765 2e20 5b31 2c20 3130 305d 2e20 4465  ge. [1, 100]. De
-00046230: 6661 756c 743a 2035 300a 2020 2020 2020  fault: 50.      
-00046240: 2020 2020 2020 2320 2763 7572 736f 7227        # 'cursor'
-00046250: 3a20 2727 2c20 2023 2043 7572 736f 722e  : '',  # Cursor.
-00046260: 2055 7365 6420 666f 7220 7061 6769 6e61   Used for pagina
-00046270: 7469 6f6e 0a20 2020 2020 2020 207d 0a20  tion.        }. 
-00046280: 2020 2020 2020 2069 6620 7379 6d62 6f6c         if symbol
-00046290: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-000462a0: 2020 2020 2020 2020 2020 6d61 726b 6574            market
-000462b0: 203d 2073 656c 662e 6d61 726b 6574 2873   = self.market(s
-000462c0: 796d 626f 6c29 0a20 2020 2020 2020 2020  ymbol).         
-000462d0: 2020 2072 6571 7565 7374 5b27 7379 6d62     request['symb
-000462e0: 6f6c 275d 203d 206d 6172 6b65 745b 2769  ol'] = market['i
-000462f0: 6427 5d0a 2020 2020 2020 2020 7375 6254  d'].        subT
-00046300: 7970 6520 3d20 4e6f 6e65 0a20 2020 2020  ype = None.     
-00046310: 2020 2073 7562 5479 7065 2c20 7061 7261     subType, para
-00046320: 6d73 203d 2073 656c 662e 6861 6e64 6c65  ms = self.handle
-00046330: 5f73 7562 5f74 7970 655f 616e 645f 7061  _sub_type_and_pa
-00046340: 7261 6d73 2827 6665 7463 684d 7954 7261  rams('fetchMyTra
-00046350: 6465 7327 2c20 6d61 726b 6574 2c20 7061  des', market, pa
-00046360: 7261 6d73 290a 2020 2020 2020 2020 7265  rams).        re
-00046370: 7175 6573 745b 2763 6174 6567 6f72 7927  quest['category'
-00046380: 5d20 3d20 7375 6254 7970 650a 2020 2020  ] = subType.    
-00046390: 2020 2020 6966 2073 696e 6365 2069 7320      if since is 
-000463a0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-000463b0: 2020 2020 2020 7265 7175 6573 745b 2773        request['s
-000463c0: 7461 7274 5469 6d65 275d 203d 2073 696e  tartTime'] = sin
-000463d0: 6365 0a20 2020 2020 2020 2069 6620 6c69  ce.        if li
-000463e0: 6d69 7420 6973 206e 6f74 204e 6f6e 653a  mit is not None:
-000463f0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-00046400: 7565 7374 5b27 6c69 6d69 7427 5d20 3d20  uest['limit'] = 
-00046410: 6c69 6d69 7420 2023 2064 6566 6175 6c74  limit  # default
-00046420: 2035 302c 206d 6178 2031 3030 0a20 2020   50, max 100.   
-00046430: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
-00046440: 7365 6c66 2e70 7269 7661 7465 4765 7456  self.privateGetV
-00046450: 3545 7865 6375 7469 6f6e 4c69 7374 2873  5ExecutionList(s
-00046460: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
-00046470: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
-00046480: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-00046490: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
-000464a0: 2020 2020 2020 2020 2022 7265 7443 6f64           "retCod
-000464b0: 6522 3a20 302c 0a20 2020 2020 2020 2023  e": 0,.        #
-000464c0: 2020 2020 2020 2020 2022 7265 744d 7367           "retMsg
-000464d0: 223a 2022 4f4b 222c 0a20 2020 2020 2020  ": "OK",.       
-000464e0: 2023 2020 2020 2020 2020 2022 7265 7375   #         "resu
-000464f0: 6c74 223a 207b 0a20 2020 2020 2020 2023  lt": {.        #
-00046500: 2020 2020 2020 2020 2020 2020 2022 6e65               "ne
-00046510: 7874 5061 6765 4375 7273 6f72 223a 2022  xtPageCursor": "
-00046520: 3133 3237 3636 2533 4132 2532 4331 3332  132766%3A2%2C132
-00046530: 3736 3625 3341 3222 2c0a 2020 2020 2020  766%3A2",.      
-00046540: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00046550: 2263 6174 6567 6f72 7922 3a20 226c 696e  "category": "lin
-00046560: 6561 7222 2c0a 2020 2020 2020 2020 2320  ear",.        # 
-00046570: 2020 2020 2020 2020 2020 2020 226c 6973              "lis
-00046580: 7422 3a20 5b0a 2020 2020 2020 2020 2320  t": [.        # 
-00046590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000465a0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-000465b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000465c0: 2273 796d 626f 6c22 3a20 2245 5448 5045  "symbol": "ETHPE
-000465d0: 5250 222c 0a20 2020 2020 2020 2023 2020  RP",.        #  
-000465e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000465f0: 2020 2022 6f72 6465 7254 7970 6522 3a20     "orderType": 
-00046600: 224d 6172 6b65 7422 2c0a 2020 2020 2020  "Market",.      
-00046610: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00046620: 2020 2020 2020 2020 2275 6e64 6572 6c79          "underly
-00046630: 696e 6750 7269 6365 223a 2022 222c 0a20  ingPrice": "",. 
-00046640: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00046650: 2020 2020 2020 2020 2020 2020 2022 6f72               "or
-00046660: 6465 724c 696e 6b49 6422 3a20 2222 2c0a  derLinkId": "",.
-00046670: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00046680: 2020 2020 2020 2020 2020 2020 2020 2273                "s
-00046690: 6964 6522 3a20 2242 7579 222c 0a20 2020  ide": "Buy",.   
-000466a0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000466b0: 2020 2020 2020 2020 2020 2022 696e 6465             "inde
-000466c0: 7850 7269 6365 223a 2022 222c 0a20 2020  xPrice": "",.   
-000466d0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000466e0: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
-000466f0: 7249 6422 3a20 2238 6330 3635 3334 312d  rId": "8c065341-
-00046700: 3762 3532 2d34 6361 392d 6163 3263 2d33  7b52-4ca9-ac2c-3
-00046710: 3765 3331 6163 3535 6339 3422 2c0a 2020  7e31ac55c94",.  
-00046720: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00046730: 2020 2020 2020 2020 2020 2020 2273 746f              "sto
-00046740: 704f 7264 6572 5479 7065 223a 2022 554e  pOrderType": "UN
-00046750: 4b4e 4f57 4e22 2c0a 2020 2020 2020 2020  KNOWN",.        
-00046760: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00046770: 2020 2020 2020 226c 6561 7665 7351 7479        "leavesQty
-00046780: 223a 2022 3022 2c0a 2020 2020 2020 2020  ": "0",.        
-00046790: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-000467a0: 2020 2020 2020 2265 7865 6354 696d 6522        "execTime"
-000467b0: 3a20 2231 3637 3232 3832 3732 3234 3239  : "1672282722429
-000467c0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-000467d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000467e0: 2022 6973 4d61 6b65 7222 3a20 4661 6c73   "isMaker": Fals
-000467f0: 652c 0a20 2020 2020 2020 2023 2020 2020  e,.        #    
-00046800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046810: 2022 6578 6563 4665 6522 3a20 2230 2e30   "execFee": "0.0
-00046820: 3731 3430 3922 2c0a 2020 2020 2020 2020  71409",.        
-00046830: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00046840: 2020 2020 2020 2266 6565 5261 7465 223a        "feeRate":
-00046850: 2022 302e 3030 3036 222c 0a20 2020 2020   "0.0006",.     
-00046860: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00046870: 2020 2020 2020 2020 2022 6578 6563 4964           "execId
-00046880: 223a 2022 6530 6362 6538 3164 2d30 6631  ": "e0cbe81d-0f1
-00046890: 382d 3538 3636 2d39 3431 352d 6366 3331  8-5866-9415-cf31
-000468a0: 3962 3564 6162 3362 222c 0a20 2020 2020  9b5dab3b",.     
-000468b0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-000468c0: 2020 2020 2020 2020 2022 7472 6164 6549           "tradeI
-000468d0: 7622 3a20 2222 2c0a 2020 2020 2020 2020  v": "",.        
-000468e0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-000468f0: 2020 2020 2020 2262 6c6f 636b 5472 6164        "blockTrad
-00046900: 6549 6422 3a20 2222 2c0a 2020 2020 2020  eId": "",.      
-00046910: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00046920: 2020 2020 2020 2020 226d 6172 6b50 7269          "markPri
-00046930: 6365 223a 2022 3131 3833 2e35 3422 2c0a  ce": "1183.54",.
-00046940: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00046950: 2020 2020 2020 2020 2020 2020 2020 2265                "e
-00046960: 7865 6350 7269 6365 223a 2022 3131 3930  xecPrice": "1190
-00046970: 2e31 3522 2c0a 2020 2020 2020 2020 2320  .15",.        # 
-00046980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046990: 2020 2020 226d 6172 6b49 7622 3a20 2222      "markIv": ""
-000469a0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-000469b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000469c0: 226f 7264 6572 5174 7922 3a20 2230 2e31  "orderQty": "0.1
-000469d0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-000469e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000469f0: 2022 6f72 6465 7250 7269 6365 223a 2022   "orderPrice": "
-00046a00: 3132 3336 2e39 222c 0a20 2020 2020 2020  1236.9",.       
-00046a10: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00046a20: 2020 2020 2020 2022 6578 6563 5661 6c75         "execValu
-00046a30: 6522 3a20 2231 3139 2e30 3135 222c 0a20  e": "119.015",. 
-00046a40: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00046a50: 2020 2020 2020 2020 2020 2020 2022 6578               "ex
-00046a60: 6563 5479 7065 223a 2022 5472 6164 6522  ecType": "Trade"
-00046a70: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00046a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046a90: 2265 7865 6351 7479 223a 2022 302e 3122  "execQty": "0.1"
-00046aa0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00046ab0: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
-00046ac0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00046ad0: 2020 205d 0a20 2020 2020 2020 2023 2020     ].        #  
-00046ae0: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
-00046af0: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
-00046b00: 4578 7449 6e66 6f22 3a20 7b7d 2c0a 2020  ExtInfo": {},.  
-00046b10: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00046b20: 2274 696d 6522 3a20 3136 3732 3238 3337  "time": 16722837
-00046b30: 3534 3531 300a 2020 2020 2020 2020 2320  54510.        # 
-00046b40: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
-00046b50: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-00046b60: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-00046b70: 2872 6573 706f 6e73 652c 2027 7265 7375  (response, 'resu
-00046b80: 6c74 272c 207b 7d29 0a20 2020 2020 2020  lt', {}).       
-00046b90: 2074 7261 6465 7320 3d20 7365 6c66 2e73   trades = self.s
-00046ba0: 6166 655f 7661 6c75 6528 7265 7375 6c74  afe_value(result
-00046bb0: 2c20 276c 6973 7427 2c20 5b5d 290a 2020  , 'list', []).  
-00046bc0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00046bd0: 662e 7061 7273 655f 7472 6164 6573 2874  f.parse_trades(t
-00046be0: 7261 6465 732c 206d 6172 6b65 742c 2073  rades, market, s
-00046bf0: 696e 6365 2c20 6c69 6d69 7429 0a0a 2020  ince, limit)..  
-00046c00: 2020 6465 6620 6665 7463 685f 6d79 5f75    def fetch_my_u
-00046c10: 7364 635f 7472 6164 6573 2873 656c 662c  sdc_trades(self,
-00046c20: 2073 796d 626f 6c3a 204f 7074 696f 6e61   symbol: Optiona
-00046c30: 6c5b 7374 725d 203d 204e 6f6e 652c 2073  l[str] = None, s
-00046c40: 696e 6365 3a20 4f70 7469 6f6e 616c 5b69  ince: Optional[i
-00046c50: 6e74 5d20 3d20 4e6f 6e65 2c20 6c69 6d69  nt] = None, limi
-00046c60: 743a 204f 7074 696f 6e61 6c5b 696e 745d  t: Optional[int]
-00046c70: 203d 204e 6f6e 652c 2070 6172 616d 733d   = None, params=
-00046c80: 7b7d 293a 0a20 2020 2020 2020 2073 656c  {}):.        sel
-00046c90: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
-00046ca0: 0a20 2020 2020 2020 206d 6172 6b65 7420  .        market 
-00046cb0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2072  = None.        r
-00046cc0: 6571 7565 7374 203d 207b 7d0a 2020 2020  equest = {}.    
-00046cd0: 2020 2020 6966 2073 796d 626f 6c20 6973      if symbol is
-00046ce0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00046cf0: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
-00046d00: 7365 6c66 2e6d 6172 6b65 7428 7379 6d62  self.market(symb
-00046d10: 6f6c 290a 2020 2020 2020 2020 2020 2020  ol).            
-00046d20: 7265 7175 6573 745b 2773 796d 626f 6c27  request['symbol'
-00046d30: 5d20 3d20 6d61 726b 6574 5b27 6964 275d  ] = market['id']
-00046d40: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-00046d50: 7565 7374 5b27 6361 7465 676f 7279 275d  uest['category']
-00046d60: 203d 2027 4f50 5449 4f4e 2720 6966 206d   = 'OPTION' if m
-00046d70: 6172 6b65 745b 276f 7074 696f 6e27 5d20  arket['option'] 
-00046d80: 656c 7365 2027 5045 5250 4554 5541 4c27  else 'PERPETUAL'
-00046d90: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-00046da0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-00046db0: 7374 5b27 6361 7465 676f 7279 275d 203d  st['category'] =
-00046dc0: 2027 5045 5250 4554 5541 4c27 0a20 2020   'PERPETUAL'.   
-00046dd0: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
-00046de0: 7365 6c66 2e70 7269 7661 7465 506f 7374  self.privatePost
-00046df0: 4f70 7469 6f6e 5573 6463 4f70 656e 6170  OptionUsdcOpenap
-00046e00: 6950 7269 7661 7465 5631 4578 6563 7574  iPrivateV1Execut
-00046e10: 696f 6e4c 6973 7428 7365 6c66 2e65 7874  ionList(self.ext
-00046e20: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
-00046e30: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
-00046e40: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
-00046e50: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00046e60: 2272 6573 756c 7422 3a20 7b0a 2020 2020  "result": {.    
-00046e70: 2020 2020 2320 2020 2020 2020 2020 2263      #         "c
-00046e80: 7572 736f 7222 3a20 2232 3925 3341 3125  ursor": "29%3A1%
-00046e90: 3243 3238 2533 4131 222c 0a20 2020 2020  2C28%3A1",.     
-00046ea0: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-00046eb0: 7375 6c74 546f 7461 6c53 697a 6522 3a20  sultTotalSize": 
-00046ec0: 322c 0a20 2020 2020 2020 2023 2020 2020  2,.        #    
-00046ed0: 2020 2020 2022 6461 7461 4c69 7374 223a       "dataList":
-00046ee0: 205b 0a20 2020 2020 2020 2023 2020 2020   [.        #    
-00046ef0: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
-00046f00: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-00046f10: 7379 6d62 6f6c 223a 2022 4554 4850 4552  symbol": "ETHPER
-00046f20: 5022 2c0a 2020 2020 2020 2020 2320 2020  P",.        #   
-00046f30: 2020 2020 2020 2020 2020 226f 7264 6572            "order
-00046f40: 4c69 6e6b 4964 223a 2022 222c 0a20 2020  LinkId": "",.   
-00046f50: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00046f60: 2020 2022 7369 6465 223a 2022 5365 6c6c     "side": "Sell
-00046f70: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00046f80: 2020 2020 2020 2020 2022 6f72 6465 7249           "orderI
-00046f90: 6422 3a20 2264 3833 6638 6234 642d 3266  d": "d83f8b4d-2f
-00046fa0: 3630 2d34 6530 342d 6136 3461 2d61 3366  60-4e04-a64a-a3f
-00046fb0: 3230 3739 3839 6463 3622 2c0a 2020 2020  207989dc6",.    
-00046fc0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00046fd0: 2020 2265 7865 6346 6565 223a 2022 302e    "execFee": "0.
-00046fe0: 3032 3130 222c 0a20 2020 2020 2020 2023  0210",.        #
-00046ff0: 2020 2020 2020 2020 2020 2020 2022 6665               "fe
-00047000: 6552 6174 6522 3a20 2230 2e30 3030 3630  eRate": "0.00060
-00047010: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-00047020: 2020 2020 2020 2020 2020 2262 6c6f 636b            "block
-00047030: 5472 6164 6549 6422 3a20 2222 2c0a 2020  TradeId": "",.  
-00047040: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00047050: 2020 2020 2274 7261 6465 5469 6d65 223a      "tradeTime":
-00047060: 2022 3136 3639 3139 3634 3233 3538 3122   "1669196423581"
-00047070: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00047080: 2020 2020 2020 2020 2265 7865 6350 7269          "execPri
-00047090: 6365 223a 2022 3131 3631 2e34 3522 2c0a  ce": "1161.45",.
-000470a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000470b0: 2020 2020 2020 226c 6173 744c 6971 7569        "lastLiqui
-000470c0: 6469 7479 496e 6422 3a20 2254 414b 4552  dityInd": "TAKER
-000470d0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-000470e0: 2020 2020 2020 2020 2022 6578 6563 5661           "execVa
-000470f0: 6c75 6522 3a20 2233 342e 3834 3335 222c  lue": "34.8435",
-00047100: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00047110: 2020 2020 2020 2022 6578 6563 5479 7065         "execType
-00047120: 223a 2022 5472 6164 6522 2c0a 2020 2020  ": "Trade",.    
-00047130: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00047140: 2020 2265 7865 6351 7479 223a 2022 302e    "execQty": "0.
-00047150: 3033 3022 2c0a 2020 2020 2020 2020 2320  030",.        # 
-00047160: 2020 2020 2020 2020 2020 2020 2274 7261              "tra
-00047170: 6465 4964 223a 2022 6439 6161 3835 3930  deId": "d9aa8590
-00047180: 2d39 6536 612d 3537 3565 2d61 3162 652d  -9e6a-575e-a1be-
-00047190: 6436 3236 3165 3665 6432 6535 220a 2020  d6261e6ed2e5".  
-000471a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000471b0: 2020 7d2c 202e 2e2e 0a20 2020 2020 2020    }, ....       
-000471c0: 2023 2020 2020 2020 2020 205d 0a20 2020   #         ].   
-000471d0: 2020 2020 2023 2020 2020 2020 207d 2c0a       #       },.
-000471e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000471f0: 2272 6574 436f 6465 223a 2030 2c0a 2020  "retCode": 0,.  
-00047200: 2020 2020 2020 2320 2020 2020 2020 2272        #       "r
-00047210: 6574 4d73 6722 3a20 2253 7563 6365 7373  etMsg": "Success
-00047220: 2e22 0a20 2020 2020 2020 2023 2020 2020  .".        #    
-00047230: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
-00047240: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
-00047250: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
-00047260: 7370 6f6e 7365 2c20 2772 6573 756c 7427  sponse, 'result'
-00047270: 2c20 7b7d 290a 2020 2020 2020 2020 6461  , {}).        da
-00047280: 7461 4c69 7374 203d 2073 656c 662e 7361  taList = self.sa
-00047290: 6665 5f76 616c 7565 2872 6573 756c 742c  fe_value(result,
-000472a0: 2027 6461 7461 4c69 7374 272c 205b 5d29   'dataList', [])
-000472b0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000472c0: 7365 6c66 2e70 6172 7365 5f74 7261 6465  self.parse_trade
-000472d0: 7328 6461 7461 4c69 7374 2c20 6d61 726b  s(dataList, mark
-000472e0: 6574 2c20 7369 6e63 652c 206c 696d 6974  et, since, limit
-000472f0: 290a 0a20 2020 2064 6566 2066 6574 6368  )..    def fetch
-00047300: 5f6d 795f 7472 6164 6573 2873 656c 662c  _my_trades(self,
-00047310: 2073 796d 626f 6c3a 204f 7074 696f 6e61   symbol: Optiona
-00047320: 6c5b 7374 725d 203d 204e 6f6e 652c 2073  l[str] = None, s
-00047330: 696e 6365 3a20 4f70 7469 6f6e 616c 5b69  ince: Optional[i
-00047340: 6e74 5d20 3d20 4e6f 6e65 2c20 6c69 6d69  nt] = None, limi
-00047350: 743a 204f 7074 696f 6e61 6c5b 696e 745d  t: Optional[int]
-00047360: 203d 204e 6f6e 652c 2070 6172 616d 733d   = None, params=
-00047370: 7b7d 293a 0a20 2020 2020 2020 2022 2222  {}):.        """
-00047380: 0a20 2020 2020 2020 2066 6574 6368 2061  .        fetch a
-00047390: 6c6c 2074 7261 6465 7320 6d61 6465 2062  ll trades made b
-000473a0: 7920 7468 6520 7573 6572 0a20 2020 2020  y the user.     
-000473b0: 2020 203a 7061 7261 6d20 7374 7220 7379     :param str sy
-000473c0: 6d62 6f6c 3a20 756e 6966 6965 6420 6d61  mbol: unified ma
-000473d0: 726b 6574 2073 796d 626f 6c0a 2020 2020  rket symbol.    
-000473e0: 2020 2020 3a70 6172 616d 2069 6e74 7c4e      :param int|N
-000473f0: 6f6e 6520 7369 6e63 653a 2074 6865 2065  one since: the e
-00047400: 6172 6c69 6573 7420 7469 6d65 2069 6e20  arliest time in 
-00047410: 6d73 2074 6f20 6665 7463 6820 7472 6164  ms to fetch trad
-00047420: 6573 2066 6f72 0a20 2020 2020 2020 203a  es for.        :
-00047430: 7061 7261 6d20 696e 747c 4e6f 6e65 206c  param int|None l
-00047440: 696d 6974 3a20 7468 6520 6d61 7869 6d75  imit: the maximu
-00047450: 6d20 6e75 6d62 6572 206f 6620 7472 6164  m number of trad
-00047460: 6573 2073 7472 7563 7475 7265 7320 746f  es structures to
-00047470: 2072 6574 7269 6576 650a 2020 2020 2020   retrieve.      
-00047480: 2020 3a70 6172 616d 2064 6963 7420 7061    :param dict pa
-00047490: 7261 6d73 3a20 6578 7472 6120 7061 7261  rams: extra para
-000474a0: 6d65 7465 7273 2073 7065 6369 6669 6320  meters specific 
-000474b0: 746f 2074 6865 2062 7962 6974 2061 7069  to the bybit api
-000474c0: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
-000474d0: 2020 3a72 6574 7572 6e73 205b 6469 6374    :returns [dict
-000474e0: 5d3a 2061 206c 6973 7420 6f66 2060 7472  ]: a list of `tr
-000474f0: 6164 6520 7374 7275 6374 7572 6573 203c  ade structures <
-00047500: 6874 7470 733a 2f2f 646f 6373 2e63 6378  https://docs.ccx
-00047510: 742e 636f 6d2f 232f 3f69 643d 7472 6164  t.com/#/?id=trad
-00047520: 652d 7374 7275 6374 7572 653e 600a 2020  e-structure>`.  
-00047530: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00047540: 2020 7365 6c66 2e6c 6f61 645f 6d61 726b    self.load_mark
-00047550: 6574 7328 290a 2020 2020 2020 2020 6d61  ets().        ma
-00047560: 726b 6574 203d 204e 6f6e 650a 2020 2020  rket = None.    
-00047570: 2020 2020 7365 7474 6c65 203d 2073 656c      settle = sel
-00047580: 662e 7361 6665 5f73 7472 696e 6728 7061  f.safe_string(pa
-00047590: 7261 6d73 2c20 2773 6574 746c 6543 6f69  rams, 'settleCoi
-000475a0: 6e27 290a 2020 2020 2020 2020 6966 2073  n').        if s
-000475b0: 6574 746c 6520 6973 204e 6f6e 653a 0a20  ettle is None:. 
-000475c0: 2020 2020 2020 2020 2020 2073 6574 746c             settl
-000475d0: 652c 2070 6172 616d 7320 3d20 7365 6c66  e, params = self
-000475e0: 2e68 616e 646c 655f 6f70 7469 6f6e 5f61  .handle_option_a
-000475f0: 6e64 5f70 6172 616d 7328 7061 7261 6d73  nd_params(params
-00047600: 2c20 2766 6574 6368 4d79 5472 6164 6573  , 'fetchMyTrades
-00047610: 272c 2027 7365 7474 6c65 272c 2073 6574  ', 'settle', set
-00047620: 746c 6529 0a20 2020 2020 2020 2069 6620  tle).        if 
-00047630: 7379 6d62 6f6c 2069 7320 6e6f 7420 4e6f  symbol is not No
-00047640: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00047650: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
-00047660: 726b 6574 2873 796d 626f 6c29 0a20 2020  rket(symbol).   
-00047670: 2020 2020 2020 2020 2073 6574 746c 6520           settle 
-00047680: 3d20 6d61 726b 6574 5b27 7365 7474 6c65  = market['settle
-00047690: 275d 0a20 2020 2020 2020 2073 7562 5479  '].        subTy
-000476a0: 7065 203d 204e 6f6e 650a 2020 2020 2020  pe = None.      
-000476b0: 2020 7375 6254 7970 652c 2070 6172 616d    subType, param
-000476c0: 7320 3d20 7365 6c66 2e68 616e 646c 655f  s = self.handle_
-000476d0: 7375 625f 7479 7065 5f61 6e64 5f70 6172  sub_type_and_par
-000476e0: 616d 7328 2766 6574 6368 4d79 5472 6164  ams('fetchMyTrad
-000476f0: 6573 272c 206d 6172 6b65 742c 2070 6172  es', market, par
-00047700: 616d 7329 0a20 2020 2020 2020 2069 7349  ams).        isI
-00047710: 6e76 6572 7365 203d 2073 7562 5479 7065  nverse = subType
-00047720: 203d 3d20 2769 6e76 6572 7365 270a 2020   == 'inverse'.  
-00047730: 2020 2020 2020 6973 5573 6463 5365 7474        isUsdcSett
-00047740: 6c65 6420 3d20 7365 7474 6c65 203d 3d20  led = settle == 
-00047750: 2755 5344 4327 0a20 2020 2020 2020 2069  'USDC'.        i
-00047760: 734c 696e 6561 7253 6574 746c 6520 3d20  sLinearSettle = 
-00047770: 6973 5573 6463 5365 7474 6c65 6420 6f72  isUsdcSettled or
-00047780: 2028 7365 7474 6c65 203d 3d20 2755 5344   (settle == 'USD
-00047790: 5427 290a 2020 2020 2020 2020 6966 2069  T').        if i
-000477a0: 7349 6e76 6572 7365 2061 6e64 2069 734c  sInverse and isL
-000477b0: 696e 6561 7253 6574 746c 653a 0a20 2020  inearSettle:.   
-000477c0: 2020 2020 2020 2020 2072 6169 7365 2041           raise A
-000477d0: 7267 756d 656e 7473 5265 7175 6972 6564  rgumentsRequired
-000477e0: 2873 656c 662e 6964 202b 2027 2066 6574  (self.id + ' fet
-000477f0: 6368 4d79 5472 6164 6573 2077 6974 6820  chMyTrades with 
-00047800: 696e 7665 7273 6520 7375 6254 7970 6520  inverse subType 
-00047810: 7265 7175 6972 6573 2073 6574 746c 6520  requires settle 
-00047820: 746f 206e 6f74 2062 6520 5553 4454 206f  to not be USDT o
-00047830: 7220 5553 4443 2729 0a20 2020 2020 2020  r USDC').       
-00047840: 2074 7970 652c 2071 7565 7279 203d 2073   type, query = s
-00047850: 656c 662e 6861 6e64 6c65 5f6d 6172 6b65  elf.handle_marke
-00047860: 745f 7479 7065 5f61 6e64 5f70 6172 616d  t_type_and_param
-00047870: 7328 2766 6574 6368 4d79 5472 6164 6573  s('fetchMyTrades
-00047880: 272c 206d 6172 6b65 742c 2070 6172 616d  ', market, param
-00047890: 7329 0a20 2020 2020 2020 2065 6e61 626c  s).        enabl
-000478a0: 6555 6e69 6669 6564 4d61 7267 696e 2c20  eUnifiedMargin, 
-000478b0: 656e 6162 6c65 556e 6966 6965 6441 6363  enableUnifiedAcc
-000478c0: 6f75 6e74 203d 2073 656c 662e 6973 5f75  ount = self.is_u
-000478d0: 6e69 6669 6564 5f65 6e61 626c 6564 2829  nified_enabled()
-000478e0: 0a20 2020 2020 2020 2069 6620 656e 6162  .        if enab
-000478f0: 6c65 556e 6966 6965 6441 6363 6f75 6e74  leUnifiedAccount
-00047900: 2061 6e64 206e 6f74 2069 7349 6e76 6572   and not isInver
-00047910: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00047920: 6f72 6465 7249 6420 3d20 7365 6c66 2e73  orderId = self.s
-00047930: 6166 655f 7374 7269 6e67 2870 6172 616d  afe_string(param
-00047940: 732c 2027 6f72 6465 7249 6427 290a 2020  s, 'orderId').  
-00047950: 2020 2020 2020 2020 2020 6966 206f 7264            if ord
-00047960: 6572 4964 2069 7320 4e6f 6e65 2061 6e64  erId is None and
-00047970: 2074 7970 6520 213d 2027 7370 6f74 273a   type != 'spot':
-00047980: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00047990: 2073 656c 662e 6368 6563 6b5f 7265 7175   self.check_requ
-000479a0: 6972 6564 5f73 796d 626f 6c28 2766 6574  ired_symbol('fet
-000479b0: 6368 4d79 5472 6164 6573 272c 2073 796d  chMyTrades', sym
-000479c0: 626f 6c29 0a20 2020 2020 2020 2020 2020  bol).           
-000479d0: 2072 6574 7572 6e20 7365 6c66 2e66 6574   return self.fet
-000479e0: 6368 5f6d 795f 756e 6966 6965 645f 7472  ch_my_unified_tr
-000479f0: 6164 6573 2873 796d 626f 6c2c 2073 696e  ades(symbol, sin
-00047a00: 6365 2c20 6c69 6d69 742c 2071 7565 7279  ce, limit, query
-00047a10: 290a 2020 2020 2020 2020 656c 6966 2074  ).        elif t
-00047a20: 7970 6520 3d3d 2027 7370 6f74 273a 0a20  ype == 'spot':. 
-00047a30: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00047a40: 6e20 7365 6c66 2e66 6574 6368 5f6d 795f  n self.fetch_my_
-00047a50: 7370 6f74 5f74 7261 6465 7328 7379 6d62  spot_trades(symb
-00047a60: 6f6c 2c20 7369 6e63 652c 206c 696d 6974  ol, since, limit
-00047a70: 2c20 7175 6572 7929 0a20 2020 2020 2020  , query).       
-00047a80: 2065 6c69 6620 656e 6162 6c65 556e 6966   elif enableUnif
-00047a90: 6965 644d 6172 6769 6e20 616e 6420 6e6f  iedMargin and no
-00047aa0: 7420 6973 496e 7665 7273 653a 0a20 2020  t isInverse:.   
-00047ab0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00047ac0: 7365 6c66 2e66 6574 6368 5f6d 795f 756e  self.fetch_my_un
-00047ad0: 6966 6965 645f 6d61 7267 696e 5f74 7261  ified_margin_tra
-00047ae0: 6465 7328 7379 6d62 6f6c 2c20 7369 6e63  des(symbol, sinc
-00047af0: 652c 206c 696d 6974 2c20 7175 6572 7929  e, limit, query)
-00047b00: 0a20 2020 2020 2020 2065 6c69 6620 6973  .        elif is
-00047b10: 5573 6463 5365 7474 6c65 643a 0a20 2020  UsdcSettled:.   
-00047b20: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00047b30: 7365 6c66 2e66 6574 6368 5f6d 795f 7573  self.fetch_my_us
-00047b40: 6463 5f74 7261 6465 7328 7379 6d62 6f6c  dc_trades(symbol
-00047b50: 2c20 7369 6e63 652c 206c 696d 6974 2c20  , since, limit, 
-00047b60: 7175 6572 7929 0a20 2020 2020 2020 2065  query).        e
-00047b70: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00047b80: 2072 6574 7572 6e20 7365 6c66 2e66 6574   return self.fet
-00047b90: 6368 5f6d 795f 636f 6e74 7261 6374 5f74  ch_my_contract_t
-00047ba0: 7261 6465 7328 7379 6d62 6f6c 2c20 7369  rades(symbol, si
-00047bb0: 6e63 652c 206c 696d 6974 2c20 7175 6572  nce, limit, quer
-00047bc0: 7929 0a0a 2020 2020 6465 6620 7061 7273  y)..    def pars
-00047bd0: 655f 6465 706f 7369 745f 6164 6472 6573  e_deposit_addres
-00047be0: 7328 7365 6c66 2c20 6465 706f 7369 7441  s(self, depositA
-00047bf0: 6464 7265 7373 2c20 6375 7272 656e 6379  ddress, currency
-00047c00: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
-00047c10: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
-00047c20: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-00047c30: 2020 2020 6368 6169 6e54 7970 653a 2027      chainType: '
-00047c40: 4552 4332 3027 2c0a 2020 2020 2020 2020  ERC20',.        
-00047c50: 2320 2020 2020 2020 2020 6164 6472 6573  #         addres
-00047c60: 7344 6570 6f73 6974 3a20 2730 7866 3536  sDeposit: '0xf56
-00047c70: 3239 3763 3637 3137 6331 6431 6334 3263  297c6717c1d1c42c
-00047c80: 3330 3332 3434 3638 6564 3530 6139 6237  30324468ed50a9b7
-00047c90: 3430 3265 6527 2c0a 2020 2020 2020 2020  402ee',.        
-00047ca0: 2320 2020 2020 2020 2020 7461 6744 6570  #         tagDep
-00047cb0: 6f73 6974 3a20 2727 2c0a 2020 2020 2020  osit: '',.      
-00047cc0: 2020 2320 2020 2020 2020 2020 6368 6169    #         chai
-00047cd0: 6e3a 2027 4554 4827 0a20 2020 2020 2020  n: 'ETH'.       
-00047ce0: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
-00047cf0: 2023 0a20 2020 2020 2020 2061 6464 7265   #.        addre
-00047d00: 7373 203d 2073 656c 662e 7361 6665 5f73  ss = self.safe_s
-00047d10: 7472 696e 6728 6465 706f 7369 7441 6464  tring(depositAdd
-00047d20: 7265 7373 2c20 2761 6464 7265 7373 4465  ress, 'addressDe
-00047d30: 706f 7369 7427 290a 2020 2020 2020 2020  posit').        
-00047d40: 7461 6720 3d20 7365 6c66 2e73 6166 655f  tag = self.safe_
-00047d50: 7374 7269 6e67 2864 6570 6f73 6974 4164  string(depositAd
-00047d60: 6472 6573 732c 2027 7461 6744 6570 6f73  dress, 'tagDepos
-00047d70: 6974 2729 0a20 2020 2020 2020 2063 6f64  it').        cod
-00047d80: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
-00047d90: 7269 6e67 2863 7572 7265 6e63 792c 2027  ring(currency, '
-00047da0: 636f 6465 2729 0a20 2020 2020 2020 2063  code').        c
-00047db0: 6861 696e 203d 2073 656c 662e 7361 6665  hain = self.safe
-00047dc0: 5f73 7472 696e 6728 6465 706f 7369 7441  _string(depositA
-00047dd0: 6464 7265 7373 2c20 2763 6861 696e 2729  ddress, 'chain')
-00047de0: 0a20 2020 2020 2020 2073 656c 662e 6368  .        self.ch
-00047df0: 6563 6b5f 6164 6472 6573 7328 6164 6472  eck_address(addr
-00047e00: 6573 7329 0a20 2020 2020 2020 2072 6574  ess).        ret
-00047e10: 7572 6e20 7b0a 2020 2020 2020 2020 2020  urn {.          
-00047e20: 2020 2763 7572 7265 6e63 7927 3a20 636f    'currency': co
-00047e30: 6465 2c0a 2020 2020 2020 2020 2020 2020  de,.            
-00047e40: 2761 6464 7265 7373 273a 2061 6464 7265  'address': addre
-00047e50: 7373 2c0a 2020 2020 2020 2020 2020 2020  ss,.            
-00047e60: 2774 6167 273a 2074 6167 2c0a 2020 2020  'tag': tag,.    
-00047e70: 2020 2020 2020 2020 276e 6574 776f 726b          'network
-00047e80: 273a 2063 6861 696e 2c0a 2020 2020 2020  ': chain,.      
-00047e90: 2020 2020 2020 2769 6e66 6f27 3a20 6465        'info': de
-00047ea0: 706f 7369 7441 6464 7265 7373 2c0a 2020  positAddress,.  
-00047eb0: 2020 2020 2020 7d0a 0a20 2020 2064 6566        }..    def
-00047ec0: 2066 6574 6368 5f64 6570 6f73 6974 5f61   fetch_deposit_a
-00047ed0: 6464 7265 7373 6573 5f62 795f 6e65 7477  ddresses_by_netw
-00047ee0: 6f72 6b28 7365 6c66 2c20 636f 6465 3a20  ork(self, code: 
-00047ef0: 7374 722c 2070 6172 616d 733d 7b7d 293a  str, params={}):
-00047f00: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00047f10: 2020 2020 2066 6574 6368 2061 2064 6963       fetch a dic
-00047f20: 7469 6f6e 6172 7920 6f66 2061 6464 7265  tionary of addre
-00047f30: 7373 6573 2066 6f72 2061 2063 7572 7265  sses for a curre
-00047f40: 6e63 792c 2069 6e64 6578 6564 2062 7920  ncy, indexed by 
-00047f50: 6e65 7477 6f72 6b0a 2020 2020 2020 2020  network.        
-00047f60: 7365 6520 6874 7470 733a 2f2f 6279 6269  see https://bybi
-00047f70: 742d 6578 6368 616e 6765 2e67 6974 6875  t-exchange.githu
-00047f80: 622e 696f 2f64 6f63 732f 7635 2f61 7373  b.io/docs/v5/ass
-00047f90: 6574 2f6d 6173 7465 722d 6465 706f 7369  et/master-deposi
-00047fa0: 742d 6164 6472 0a20 2020 2020 2020 203a  t-addr.        :
-00047fb0: 7061 7261 6d20 7374 7220 636f 6465 3a20  param str code: 
-00047fc0: 756e 6966 6965 6420 6375 7272 656e 6379  unified currency
-00047fd0: 2063 6f64 6520 6f66 2074 6865 2063 7572   code of the cur
-00047fe0: 7265 6e63 7920 666f 7220 7468 6520 6465  rency for the de
-00047ff0: 706f 7369 7420 6164 6472 6573 730a 2020  posit address.  
-00048000: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
-00048010: 7420 7061 7261 6d73 3a20 6578 7472 6120  t params: extra 
-00048020: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
-00048030: 6669 6320 746f 2074 6865 2062 7962 6974  fic to the bybit
-00048040: 2061 7069 2065 6e64 706f 696e 740a 2020   api endpoint.  
-00048050: 2020 2020 2020 3a72 6574 7572 6e73 2064        :returns d
-00048060: 6963 743a 2061 2064 6963 7469 6f6e 6172  ict: a dictionar
-00048070: 7920 6f66 2060 6164 6472 6573 7320 7374  y of `address st
-00048080: 7275 6374 7572 6573 203c 6874 7470 733a  ructures <https:
-00048090: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
-000480a0: 232f 3f69 643d 6164 6472 6573 732d 7374  #/?id=address-st
-000480b0: 7275 6374 7572 653e 6020 696e 6465 7865  ructure>` indexe
-000480c0: 6420 6279 2074 6865 206e 6574 776f 726b  d by the network
-000480d0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-000480e0: 2020 2020 2073 656c 662e 6c6f 6164 5f6d       self.load_m
-000480f0: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
-00048100: 2063 7572 7265 6e63 7920 3d20 7365 6c66   currency = self
-00048110: 2e63 7572 7265 6e63 7928 636f 6465 290a  .currency(code).
-00048120: 2020 2020 2020 2020 7265 7175 6573 7420          request 
-00048130: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-00048140: 2763 6f69 6e27 3a20 6375 7272 656e 6379  'coin': currency
-00048150: 5b27 6964 275d 2c0a 2020 2020 2020 2020  ['id'],.        
-00048160: 7d0a 2020 2020 2020 2020 7265 7370 6f6e  }.        respon
-00048170: 7365 203d 2073 656c 662e 7072 6976 6174  se = self.privat
-00048180: 6547 6574 5635 4173 7365 7444 6570 6f73  eGetV5AssetDepos
-00048190: 6974 5175 6572 7941 6464 7265 7373 2873  itQueryAddress(s
-000481a0: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
-000481b0: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
-000481c0: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-000481d0: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
-000481e0: 2020 2020 2020 2020 2022 7265 7443 6f64           "retCod
-000481f0: 6522 3a20 302c 0a20 2020 2020 2020 2023  e": 0,.        #
-00048200: 2020 2020 2020 2020 2022 7265 744d 7367           "retMsg
-00048210: 223a 2022 7375 6363 6573 7322 2c0a 2020  ": "success",.  
-00048220: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00048230: 2272 6573 756c 7422 3a20 7b0a 2020 2020  "result": {.    
-00048240: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00048250: 2020 2263 6f69 6e22 3a20 2255 5344 5422    "coin": "USDT"
-00048260: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00048270: 2020 2020 2020 2020 2263 6861 696e 7322          "chains"
-00048280: 3a20 5b0a 2020 2020 2020 2020 2320 2020  : [.        #   
-00048290: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
-000482a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000482b0: 2020 2020 2020 2020 2020 2020 2020 2263                "c
-000482c0: 6861 696e 5479 7065 223a 2022 4552 4332  hainType": "ERC2
-000482d0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-000482e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000482f0: 2020 2261 6464 7265 7373 4465 706f 7369    "addressDeposi
-00048300: 7422 3a20 2230 7864 3965 3163 6437 3761  t": "0xd9e1cd77a
-00048310: 6661 3065 3530 6234 3532 6136 3266 6262  fa0e50b452a62fbb
-00048320: 3638 6133 3334 3036 3032 3238 3663 3322  68a3340602286c3"
-00048330: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00048340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048350: 2274 6167 4465 706f 7369 7422 3a20 2222  "tagDeposit": ""
-00048360: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00048370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048380: 2263 6861 696e 223a 2022 4554 4822 0a20  "chain": "ETH". 
-00048390: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000483a0: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
-000483b0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-000483c0: 205d 0a20 2020 2020 2020 2023 2020 2020   ].        #    
-000483d0: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
-000483e0: 2320 2020 2020 2020 2020 2272 6574 4578  #         "retEx
-000483f0: 7449 6e66 6f22 3a20 7b7d 2c0a 2020 2020  tInfo": {},.    
-00048400: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
-00048410: 696d 6522 3a20 3136 3732 3139 3237 3932  ime": 1672192792
-00048420: 3836 300a 2020 2020 2020 2020 2320 2020  860.        #   
-00048430: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-00048440: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
-00048450: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
-00048460: 6573 706f 6e73 652c 2027 7265 7375 6c74  esponse, 'result
-00048470: 272c 205b 5d29 0a20 2020 2020 2020 2063  ', []).        c
-00048480: 6861 696e 7320 3d20 7365 6c66 2e73 6166  hains = self.saf
-00048490: 655f 7661 6c75 6528 7265 7375 6c74 2c20  e_value(result, 
-000484a0: 2763 6861 696e 7327 2c20 5b5d 290a 2020  'chains', []).  
-000484b0: 2020 2020 2020 636f 696e 203d 2073 656c        coin = sel
-000484c0: 662e 7361 6665 5f73 7472 696e 6728 7265  f.safe_string(re
-000484d0: 7375 6c74 2c20 2763 6f69 6e27 290a 2020  sult, 'coin').  
-000484e0: 2020 2020 2020 6375 7272 656e 6379 203d        currency =
-000484f0: 2073 656c 662e 6375 7272 656e 6379 2863   self.currency(c
-00048500: 6f69 6e29 0a20 2020 2020 2020 2070 6172  oin).        par
-00048510: 7365 6420 3d20 7365 6c66 2e70 6172 7365  sed = self.parse
-00048520: 5f64 6570 6f73 6974 5f61 6464 7265 7373  _deposit_address
-00048530: 6573 2863 6861 696e 732c 205b 6375 7272  es(chains, [curr
-00048540: 656e 6379 5b27 636f 6465 275d 5d2c 2046  ency['code']], F
-00048550: 616c 7365 2c20 7b0a 2020 2020 2020 2020  alse, {.        
-00048560: 2020 2020 2763 7572 7265 6e63 7927 3a20      'currency': 
-00048570: 6375 7272 656e 6379 5b27 6964 275d 2c0a  currency['id'],.
-00048580: 2020 2020 2020 2020 7d29 0a20 2020 2020          }).     
-00048590: 2020 2072 6574 7572 6e20 7365 6c66 2e69     return self.i
-000485a0: 6e64 6578 5f62 7928 7061 7273 6564 2c20  ndex_by(parsed, 
-000485b0: 276e 6574 776f 726b 2729 0a0a 2020 2020  'network')..    
-000485c0: 6465 6620 6665 7463 685f 6465 706f 7369  def fetch_deposi
-000485d0: 745f 6164 6472 6573 7328 7365 6c66 2c20  t_address(self, 
-000485e0: 636f 6465 3a20 7374 722c 2070 6172 616d  code: str, param
-000485f0: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
-00048600: 2222 0a20 2020 2020 2020 2066 6574 6368  "".        fetch
-00048610: 2074 6865 2064 6570 6f73 6974 2061 6464   the deposit add
-00048620: 7265 7373 2066 6f72 2061 2063 7572 7265  ress for a curre
-00048630: 6e63 7920 6173 736f 6369 6174 6564 2077  ncy associated w
-00048640: 6974 6820 7365 6c66 2061 6363 6f75 6e74  ith self account
-00048650: 0a20 2020 2020 2020 2073 6565 2068 7474  .        see htt
-00048660: 7073 3a2f 2f62 7962 6974 2d65 7863 6861  ps://bybit-excha
-00048670: 6e67 652e 6769 7468 7562 2e69 6f2f 646f  nge.github.io/do
-00048680: 6373 2f76 352f 6173 7365 742f 6d61 7374  cs/v5/asset/mast
-00048690: 6572 2d64 6570 6f73 6974 2d61 6464 720a  er-deposit-addr.
-000486a0: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-000486b0: 7472 2063 6f64 653a 2075 6e69 6669 6564  tr code: unified
-000486c0: 2063 7572 7265 6e63 7920 636f 6465 0a20   currency code. 
-000486d0: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
-000486e0: 6374 2070 6172 616d 733a 2065 7874 7261  ct params: extra
-000486f0: 2070 6172 616d 6574 6572 7320 7370 6563   parameters spec
-00048700: 6966 6963 2074 6f20 7468 6520 6279 6269  ific to the bybi
-00048710: 7420 6170 6920 656e 6470 6f69 6e74 0a20  t api endpoint. 
-00048720: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
-00048730: 6469 6374 3a20 616e 2060 6164 6472 6573  dict: an `addres
-00048740: 7320 7374 7275 6374 7572 6520 3c68 7474  s structure <htt
-00048750: 7073 3a2f 2f64 6f63 732e 6363 7874 2e63  ps://docs.ccxt.c
-00048760: 6f6d 2f23 2f3f 6964 3d61 6464 7265 7373  om/#/?id=address
-00048770: 2d73 7472 7563 7475 7265 3e60 0a20 2020  -structure>`.   
-00048780: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00048790: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
-000487a0: 7473 2829 0a20 2020 2020 2020 206e 6574  ts().        net
-000487b0: 776f 726b 436f 6465 2c20 7175 6572 7920  workCode, query 
-000487c0: 3d20 7365 6c66 2e68 616e 646c 655f 6e65  = self.handle_ne
-000487d0: 7477 6f72 6b5f 636f 6465 5f61 6e64 5f70  twork_code_and_p
-000487e0: 6172 616d 7328 7061 7261 6d73 290a 2020  arams(params).  
-000487f0: 2020 2020 2020 6e65 7477 6f72 6b49 6420        networkId 
-00048800: 3d20 7365 6c66 2e6e 6574 776f 726b 5f63  = self.network_c
-00048810: 6f64 655f 746f 5f69 6428 6e65 7477 6f72  ode_to_id(networ
-00048820: 6b43 6f64 6529 0a20 2020 2020 2020 2063  kCode).        c
-00048830: 7572 7265 6e63 7920 3d20 7365 6c66 2e63  urrency = self.c
-00048840: 7572 7265 6e63 7928 636f 6465 290a 2020  urrency(code).  
-00048850: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-00048860: 7b0a 2020 2020 2020 2020 2020 2020 2763  {.            'c
-00048870: 6f69 6e27 3a20 6375 7272 656e 6379 5b27  oin': currency['
-00048880: 6964 275d 2c0a 2020 2020 2020 2020 7d0a  id'],.        }.
-00048890: 2020 2020 2020 2020 6966 206e 6574 776f          if netwo
-000488a0: 726b 4964 2069 7320 6e6f 7420 4e6f 6e65  rkId is not None
-000488b0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-000488c0: 7175 6573 745b 2763 6861 696e 5479 7065  quest['chainType
-000488d0: 275d 203d 206e 6574 776f 726b 4964 0a20  '] = networkId. 
-000488e0: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
-000488f0: 3d20 7365 6c66 2e70 7269 7661 7465 4765  = self.privateGe
-00048900: 7456 3541 7373 6574 4465 706f 7369 7451  tV5AssetDepositQ
-00048910: 7565 7279 4164 6472 6573 7328 7365 6c66  ueryAddress(self
-00048920: 2e65 7874 656e 6428 7265 7175 6573 742c  .extend(request,
-00048930: 2071 7565 7279 2929 0a20 2020 2020 2020   query)).       
-00048940: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
-00048950: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-00048960: 2020 2020 2022 7265 7443 6f64 6522 3a20       "retCode": 
-00048970: 302c 0a20 2020 2020 2020 2023 2020 2020  0,.        #    
-00048980: 2020 2020 2022 7265 744d 7367 223a 2022       "retMsg": "
-00048990: 7375 6363 6573 7322 2c0a 2020 2020 2020  success",.      
-000489a0: 2020 2320 2020 2020 2020 2020 2272 6573    #         "res
-000489b0: 756c 7422 3a20 7b0a 2020 2020 2020 2020  ult": {.        
-000489c0: 2320 2020 2020 2020 2020 2020 2020 2263  #             "c
-000489d0: 6f69 6e22 3a20 2255 5344 5422 2c0a 2020  oin": "USDT",.  
-000489e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000489f0: 2020 2020 2263 6861 696e 7322 3a20 5b0a      "chains": [.
-00048a00: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00048a10: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
-00048a20: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00048a30: 2020 2020 2020 2020 2020 2263 6861 696e            "chain
-00048a40: 5479 7065 223a 2022 4552 4332 3022 2c0a  Type": "ERC20",.
-00048a50: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00048a60: 2020 2020 2020 2020 2020 2020 2020 2261                "a
-00048a70: 6464 7265 7373 4465 706f 7369 7422 3a20  ddressDeposit": 
-00048a80: 2230 7864 3965 3163 6437 3761 6661 3065  "0xd9e1cd77afa0e
-00048a90: 3530 6234 3532 6136 3266 6262 3638 6133  50b452a62fbb68a3
-00048aa0: 3334 3036 3032 3238 3663 3322 2c0a 2020  340602286c3",.  
-00048ab0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00048ac0: 2020 2020 2020 2020 2020 2020 2274 6167              "tag
-00048ad0: 4465 706f 7369 7422 3a20 2222 2c0a 2020  Deposit": "",.  
-00048ae0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00048af0: 2020 2020 2020 2020 2020 2020 2263 6861              "cha
-00048b00: 696e 223a 2022 4554 4822 0a20 2020 2020  in": "ETH".     
-00048b10: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00048b20: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
-00048b30: 2020 2020 2020 2020 2020 2020 205d 0a20               ]. 
-00048b40: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00048b50: 207d 2c0a 2020 2020 2020 2020 2320 2020   },.        #   
-00048b60: 2020 2020 2020 2272 6574 4578 7449 6e66        "retExtInf
-00048b70: 6f22 3a20 7b7d 2c0a 2020 2020 2020 2020  o": {},.        
-00048b80: 2320 2020 2020 2020 2020 2274 696d 6522  #         "time"
-00048b90: 3a20 3136 3732 3139 3237 3932 3836 300a  : 1672192792860.
-00048ba0: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-00048bb0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-00048bc0: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
-00048bd0: 7361 6665 5f76 616c 7565 2872 6573 706f  safe_value(respo
-00048be0: 6e73 652c 2027 7265 7375 6c74 272c 207b  nse, 'result', {
-00048bf0: 7d29 0a20 2020 2020 2020 2063 6861 696e  }).        chain
-00048c00: 7320 3d20 7365 6c66 2e73 6166 655f 7661  s = self.safe_va
-00048c10: 6c75 6528 7265 7375 6c74 2c20 2763 6861  lue(result, 'cha
-00048c20: 696e 7327 2c20 5b5d 290a 2020 2020 2020  ins', []).      
-00048c30: 2020 6368 6169 6e73 496e 6465 7865 6442    chainsIndexedB
-00048c40: 7949 6420 3d20 7365 6c66 2e69 6e64 6578  yId = self.index
-00048c50: 5f62 7928 6368 6169 6e73 2c20 2763 6861  _by(chains, 'cha
-00048c60: 696e 2729 0a20 2020 2020 2020 2073 656c  in').        sel
-00048c70: 6563 7465 644e 6574 776f 726b 4964 203d  ectedNetworkId =
-00048c80: 2073 656c 662e 7365 6c65 6374 5f6e 6574   self.select_net
-00048c90: 776f 726b 5f69 645f 6672 6f6d 5f72 6177  work_id_from_raw
-00048ca0: 5f6e 6574 776f 726b 7328 636f 6465 2c20  _networks(code, 
-00048cb0: 6e65 7477 6f72 6b43 6f64 652c 2063 6861  networkCode, cha
-00048cc0: 696e 7349 6e64 6578 6564 4279 4964 290a  insIndexedById).
-00048cd0: 2020 2020 2020 2020 6164 6472 6573 734f          addressO
-00048ce0: 626a 6563 7420 3d20 7365 6c66 2e73 6166  bject = self.saf
-00048cf0: 655f 7661 6c75 6528 6368 6169 6e73 496e  e_value(chainsIn
-00048d00: 6465 7865 6442 7949 642c 2073 656c 6563  dexedById, selec
-00048d10: 7465 644e 6574 776f 726b 4964 2c20 7b7d  tedNetworkId, {}
-00048d20: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00048d30: 2073 656c 662e 7061 7273 655f 6465 706f   self.parse_depo
-00048d40: 7369 745f 6164 6472 6573 7328 6164 6472  sit_address(addr
-00048d50: 6573 734f 626a 6563 742c 2063 7572 7265  essObject, curre
-00048d60: 6e63 7929 0a0a 2020 2020 6465 6620 6665  ncy)..    def fe
-00048d70: 7463 685f 6465 706f 7369 7473 2873 656c  tch_deposits(sel
-00048d80: 662c 2063 6f64 653a 204f 7074 696f 6e61  f, code: Optiona
-00048d90: 6c5b 7374 725d 203d 204e 6f6e 652c 2073  l[str] = None, s
-00048da0: 696e 6365 3a20 4f70 7469 6f6e 616c 5b69  ince: Optional[i
-00048db0: 6e74 5d20 3d20 4e6f 6e65 2c20 6c69 6d69  nt] = None, limi
-00048dc0: 743a 204f 7074 696f 6e61 6c5b 696e 745d  t: Optional[int]
-00048dd0: 203d 204e 6f6e 652c 2070 6172 616d 733d   = None, params=
-00048de0: 7b7d 293a 0a20 2020 2020 2020 2022 2222  {}):.        """
-00048df0: 0a20 2020 2020 2020 2066 6574 6368 2061  .        fetch a
-00048e00: 6c6c 2064 6570 6f73 6974 7320 6d61 6465  ll deposits made
-00048e10: 2074 6f20 616e 2061 6363 6f75 6e74 0a20   to an account. 
-00048e20: 2020 2020 2020 2073 6565 2068 7474 7073         see https
-00048e30: 3a2f 2f62 7962 6974 2d65 7863 6861 6e67  ://bybit-exchang
-00048e40: 652e 6769 7468 7562 2e69 6f2f 646f 6373  e.github.io/docs
-00048e50: 2f76 352f 6173 7365 742f 6465 706f 7369  /v5/asset/deposi
-00048e60: 742d 7265 636f 7264 0a20 2020 2020 2020  t-record.       
-00048e70: 203a 7061 7261 6d20 7374 727c 4e6f 6e65   :param str|None
-00048e80: 2063 6f64 653a 2075 6e69 6669 6564 2063   code: unified c
-00048e90: 7572 7265 6e63 7920 636f 6465 0a20 2020  urrency code.   
-00048ea0: 2020 2020 203a 7061 7261 6d20 696e 747c       :param int|
-00048eb0: 4e6f 6e65 2073 696e 6365 3a20 7468 6520  None since: the 
-00048ec0: 6561 726c 6965 7374 2074 696d 6520 696e  earliest time in
-00048ed0: 206d 7320 746f 2066 6574 6368 2064 6570   ms to fetch dep
-00048ee0: 6f73 6974 7320 666f 722c 2064 6566 6175  osits for, defau
-00048ef0: 6c74 203d 2033 3020 6461 7973 2062 6566  lt = 30 days bef
-00048f00: 6f72 6520 7468 6520 6375 7272 656e 7420  ore the current 
-00048f10: 7469 6d65 0a20 2020 2020 2020 203a 7061  time.        :pa
-00048f20: 7261 6d20 696e 747c 4e6f 6e65 206c 696d  ram int|None lim
-00048f30: 6974 3a20 7468 6520 6d61 7869 6d75 6d20  it: the maximum 
-00048f40: 6e75 6d62 6572 206f 6620 6465 706f 7369  number of deposi
-00048f50: 7473 2073 7472 7563 7475 7265 7320 746f  ts structures to
-00048f60: 2072 6574 7269 6576 652c 2064 6566 6175   retrieve, defau
-00048f70: 6c74 203d 2035 302c 206d 6178 203d 2035  lt = 50, max = 5
-00048f80: 300a 2020 2020 2020 2020 3a70 6172 616d  0.        :param
-00048f90: 2064 6963 7420 7061 7261 6d73 3a20 6578   dict params: ex
-00048fa0: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
-00048fb0: 7065 6369 6669 6320 746f 2074 6865 2062  pecific to the b
-00048fc0: 7962 6974 2061 7069 2065 6e64 706f 696e  ybit api endpoin
-00048fd0: 740a 2020 2020 2020 2020 3a70 6172 616d  t.        :param
-00048fe0: 2069 6e74 7c4e 6f6e 6520 7061 7261 6d73   int|None params
-00048ff0: 5b27 756e 7469 6c27 5d3a 2074 6865 206c  ['until']: the l
-00049000: 6174 6573 7420 7469 6d65 2069 6e20 6d73  atest time in ms
-00049010: 2074 6f20 6665 7463 6820 6465 706f 7369   to fetch deposi
-00049020: 7473 2066 6f72 2c20 6465 6661 756c 7420  ts for, default 
-00049030: 3d20 3330 2064 6179 7320 6166 7465 7220  = 30 days after 
-00049040: 7369 6e63 650a 2020 2020 2020 2020 202a  since.         *
-00049050: 0a20 2020 2020 2020 2020 2a20 4558 4348  .         * EXCH
-00049060: 414e 4745 2053 5045 4349 4649 4320 5041  ANGE SPECIFIC PA
-00049070: 5241 4d45 5445 5253 0a20 2020 2020 2020  RAMETERS.       
-00049080: 203a 7061 7261 6d20 7374 727c 4e6f 6e65   :param str|None
-00049090: 2070 6172 616d 735b 2763 7572 736f 7227   params['cursor'
-000490a0: 5d3a 2075 7365 6420 666f 7220 7061 6769  ]: used for pagi
-000490b0: 6e61 7469 6f6e 0a20 2020 2020 2020 203a  nation.        :
-000490c0: 7265 7475 726e 7320 5b64 6963 745d 3a20  returns [dict]: 
-000490d0: 6120 6c69 7374 206f 6620 6074 7261 6e73  a list of `trans
-000490e0: 6163 7469 6f6e 2073 7472 7563 7475 7265  action structure
-000490f0: 7320 3c68 7474 7073 3a2f 2f64 6f63 732e  s <https://docs.
-00049100: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d74  ccxt.com/#/?id=t
-00049110: 7261 6e73 6163 7469 6f6e 2d73 7472 7563  ransaction-struc
-00049120: 7475 7265 3e60 0a20 2020 2020 2020 2222  ture>`.       ""
-00049130: 220a 2020 2020 2020 2020 7365 6c66 2e6c  ".        self.l
-00049140: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
-00049150: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-00049160: 7b0a 2020 2020 2020 2020 2020 2020 2320  {.            # 
-00049170: 2763 6f69 6e27 3a20 6375 7272 656e 6379  'coin': currency
-00049180: 5b27 6964 275d 2c0a 2020 2020 2020 2020  ['id'],.        
-00049190: 2020 2020 2320 276c 696d 6974 273a 2032      # 'limit': 2
-000491a0: 302c 2020 2320 6d61 7820 3530 0a20 2020  0,  # max 50.   
-000491b0: 2020 2020 2020 2020 2023 2027 6375 7273           # 'curs
-000491c0: 6f72 273a 2027 272c 0a20 2020 2020 2020  or': '',.       
-000491d0: 207d 0a20 2020 2020 2020 2063 7572 7265   }.        curre
-000491e0: 6e63 7920 3d20 4e6f 6e65 0a20 2020 2020  ncy = None.     
-000491f0: 2020 2069 6620 636f 6465 2069 7320 6e6f     if code is no
-00049200: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00049210: 2020 2020 6375 7272 656e 6379 203d 2073      currency = s
-00049220: 656c 662e 6375 7272 656e 6379 2863 6f64  elf.currency(cod
-00049230: 6529 0a20 2020 2020 2020 2020 2020 2072  e).            r
-00049240: 6571 7565 7374 5b27 636f 696e 275d 203d  equest['coin'] =
-00049250: 2063 7572 7265 6e63 795b 2769 6427 5d0a   currency['id'].
-00049260: 2020 2020 2020 2020 6966 2073 696e 6365          if since
-00049270: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00049280: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-00049290: 745b 2773 7461 7274 5469 6d65 275d 203d  t['startTime'] =
-000492a0: 2073 696e 6365 0a20 2020 2020 2020 2069   since.        i
-000492b0: 6620 6c69 6d69 7420 6973 206e 6f74 204e  f limit is not N
-000492c0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-000492d0: 2072 6571 7565 7374 5b27 6c69 6d69 7427   request['limit'
-000492e0: 5d20 3d20 6c69 6d69 740a 2020 2020 2020  ] = limit.      
-000492f0: 2020 7265 7370 6f6e 7365 203d 2073 656c    response = sel
-00049300: 662e 7072 6976 6174 6547 6574 5635 4173  f.privateGetV5As
-00049310: 7365 7444 6570 6f73 6974 5175 6572 7952  setDepositQueryR
-00049320: 6563 6f72 6428 7365 6c66 2e65 7874 656e  ecord(self.exten
-00049330: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
-00049340: 7329 290a 2020 2020 2020 2020 230a 2020  s)).        #.  
-00049350: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
-00049360: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00049370: 2272 6574 436f 6465 223a 2030 2c0a 2020  "retCode": 0,.  
-00049380: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00049390: 2272 6574 4d73 6722 3a20 2273 7563 6365  "retMsg": "succe
-000493a0: 7373 222c 0a20 2020 2020 2020 2023 2020  ss",.        #  
-000493b0: 2020 2020 2020 2022 7265 7375 6c74 223a         "result":
-000493c0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-000493d0: 2020 2020 2020 2020 2022 726f 7773 223a           "rows":
-000493e0: 205b 0a20 2020 2020 2020 2023 2020 2020   [.        #    
-000493f0: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
-00049400: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00049410: 2020 2020 2020 2020 2020 2020 2022 636f               "co
-00049420: 696e 223a 2022 5553 4454 222c 0a20 2020  in": "USDT",.   
-00049430: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00049440: 2020 2020 2020 2020 2020 2022 6368 6169             "chai
-00049450: 6e22 3a20 2245 5448 222c 0a20 2020 2020  n": "ETH",.     
-00049460: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00049470: 2020 2020 2020 2020 2022 616d 6f75 6e74           "amount
-00049480: 223a 2022 3130 3030 3022 2c0a 2020 2020  ": "10000",.    
-00049490: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000494a0: 2020 2020 2020 2020 2020 2274 7849 4422            "txID"
-000494b0: 3a20 2273 6b69 702d 6e6f 7469 6669 6361  : "skip-notifica
-000494c0: 7469 6f6e 2d73 6365 6e65 2d74 6573 742d  tion-scene-test-
-000494d0: 616d 6f75 6e74 2d32 3032 3231 3232 3730  amount-202212270
-000494e0: 3934 342d 3533 3332 3835 2d55 5344 5422  944-533285-USDT"
-000494f0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00049500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00049510: 2273 7461 7475 7322 3a20 332c 0a20 2020  "status": 3,.   
-00049520: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00049530: 2020 2020 2020 2020 2020 2022 746f 4164             "toAd
-00049540: 6472 6573 7322 3a20 2274 6573 742d 616d  dress": "test-am
-00049550: 6f75 6e74 2d61 6464 7265 7373 222c 0a20  ount-address",. 
-00049560: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00049570: 2020 2020 2020 2020 2020 2020 2022 7461               "ta
-00049580: 6722 3a20 2222 2c0a 2020 2020 2020 2020  g": "",.        
-00049590: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-000495a0: 2020 2020 2020 2264 6570 6f73 6974 4665        "depositFe
-000495b0: 6522 3a20 2222 2c0a 2020 2020 2020 2020  e": "",.        
-000495c0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-000495d0: 2020 2020 2020 2273 7563 6365 7373 4174        "successAt
-000495e0: 223a 2022 3136 3732 3133 3432 3734 3030  ": "167213427400
-000495f0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-00049600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00049610: 2020 2263 6f6e 6669 726d 6174 696f 6e73    "confirmations
-00049620: 223a 2022 3130 3030 3022 2c0a 2020 2020  ": "10000",.    
-00049630: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00049640: 2020 2020 2020 2020 2020 2274 7849 6e64            "txInd
-00049650: 6578 223a 2022 222c 0a20 2020 2020 2020  ex": "",.       
-00049660: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00049670: 2020 2020 2020 2022 626c 6f63 6b48 6173         "blockHas
-00049680: 6822 3a20 2222 0a20 2020 2020 2020 2023  h": "".        #
-00049690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000496a0: 207d 0a20 2020 2020 2020 2023 2020 2020   }.        #    
-000496b0: 2020 2020 2020 2020 205d 2c0a 2020 2020           ],.    
-000496c0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000496d0: 2020 226e 6578 7450 6167 6543 7572 736f    "nextPageCurso
-000496e0: 7222 3a20 2265 794a 7461 5735 4a52 4349  r": "eyJtaW5JRCI
-000496f0: 364d 5441 304e 6a41 304d 7977 6962 5746  6MTA0NjA0MywibWF
-00049700: 3453 5551 694f 6a45 774e 4459 774e 444e  4SUQiOjEwNDYwNDN
-00049710: 3922 0a20 2020 2020 2020 2023 2020 2020  9".        #    
-00049720: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
-00049730: 2320 2020 2020 2020 2020 2272 6574 4578  #         "retEx
-00049740: 7449 6e66 6f22 3a20 7b7d 2c0a 2020 2020  tInfo": {},.    
-00049750: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
-00049760: 696d 6522 3a20 3136 3732 3139 3139 3932  ime": 1672191992
-00049770: 3531 320a 2020 2020 2020 2020 2320 2020  512.        #   
-00049780: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-00049790: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
-000497a0: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
-000497b0: 6573 706f 6e73 652c 2027 7265 7375 6c74  esponse, 'result
-000497c0: 272c 207b 7d29 0a20 2020 2020 2020 2064  ', {}).        d
-000497d0: 6174 6120 3d20 7365 6c66 2e73 6166 655f  ata = self.safe_
-000497e0: 7661 6c75 6528 7265 7375 6c74 2c20 2772  value(result, 'r
-000497f0: 6f77 7327 2c20 5b5d 290a 2020 2020 2020  ows', []).      
-00049800: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
-00049810: 7273 655f 7472 616e 7361 6374 696f 6e73  rse_transactions
-00049820: 2864 6174 612c 2063 7572 7265 6e63 792c  (data, currency,
-00049830: 2073 696e 6365 2c20 6c69 6d69 7429 0a0a   since, limit)..
-00049840: 2020 2020 6465 6620 6665 7463 685f 7769      def fetch_wi
-00049850: 7468 6472 6177 616c 7328 7365 6c66 2c20  thdrawals(self, 
-00049860: 636f 6465 3a20 4f70 7469 6f6e 616c 5b73  code: Optional[s
-00049870: 7472 5d20 3d20 4e6f 6e65 2c20 7369 6e63  tr] = None, sinc
-00049880: 653a 204f 7074 696f 6e61 6c5b 696e 745d  e: Optional[int]
-00049890: 203d 204e 6f6e 652c 206c 696d 6974 3a20   = None, limit: 
-000498a0: 4f70 7469 6f6e 616c 5b69 6e74 5d20 3d20  Optional[int] = 
-000498b0: 4e6f 6e65 2c20 7061 7261 6d73 3d7b 7d29  None, params={})
-000498c0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-000498d0: 2020 2020 2020 6665 7463 6820 616c 6c20        fetch all 
-000498e0: 7769 7468 6472 6177 616c 7320 6d61 6465  withdrawals made
-000498f0: 2066 726f 6d20 616e 2061 6363 6f75 6e74   from an account
-00049900: 0a20 2020 2020 2020 2073 6565 2068 7474  .        see htt
-00049910: 7073 3a2f 2f62 7962 6974 2d65 7863 6861  ps://bybit-excha
-00049920: 6e67 652e 6769 7468 7562 2e69 6f2f 646f  nge.github.io/do
-00049930: 6373 2f76 352f 6173 7365 742f 7769 7468  cs/v5/asset/with
-00049940: 6472 6177 2d72 6563 6f72 640a 2020 2020  draw-record.    
-00049950: 2020 2020 3a70 6172 616d 2073 7472 2063      :param str c
-00049960: 6f64 653a 2075 6e69 6669 6564 2063 7572  ode: unified cur
-00049970: 7265 6e63 7920 636f 6465 0a20 2020 2020  rency code.     
-00049980: 2020 203a 7061 7261 6d20 696e 747c 4e6f     :param int|No
-00049990: 6e65 2073 696e 6365 3a20 7468 6520 6561  ne since: the ea
-000499a0: 726c 6965 7374 2074 696d 6520 696e 206d  rliest time in m
-000499b0: 7320 746f 2066 6574 6368 2077 6974 6864  s to fetch withd
-000499c0: 7261 7761 6c73 2066 6f72 0a20 2020 2020  rawals for.     
-000499d0: 2020 203a 7061 7261 6d20 696e 747c 4e6f     :param int|No
-000499e0: 6e65 206c 696d 6974 3a20 7468 6520 6d61  ne limit: the ma
-000499f0: 7869 6d75 6d20 6e75 6d62 6572 206f 6620  ximum number of 
-00049a00: 7769 7468 6472 6177 616c 7320 7374 7275  withdrawals stru
-00049a10: 6374 7572 6573 2074 6f20 7265 7472 6965  ctures to retrie
-00049a20: 7665 0a20 2020 2020 2020 203a 7061 7261  ve.        :para
-00049a30: 6d20 6469 6374 2070 6172 616d 733a 2065  m dict params: e
-00049a40: 7874 7261 2070 6172 616d 6574 6572 7320  xtra parameters 
-00049a50: 7370 6563 6966 6963 2074 6f20 7468 6520  specific to the 
-00049a60: 6279 6269 7420 6170 6920 656e 6470 6f69  bybit api endpoi
-00049a70: 6e74 0a20 2020 2020 2020 203a 7265 7475  nt.        :retu
-00049a80: 726e 7320 5b64 6963 745d 3a20 6120 6c69  rns [dict]: a li
-00049a90: 7374 206f 6620 6074 7261 6e73 6163 7469  st of `transacti
-00049aa0: 6f6e 2073 7472 7563 7475 7265 7320 3c68  on structures <h
-00049ab0: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
-00049ac0: 2e63 6f6d 2f23 2f3f 6964 3d74 7261 6e73  .com/#/?id=trans
-00049ad0: 6163 7469 6f6e 2d73 7472 7563 7475 7265  action-structure
-00049ae0: 3e60 0a20 2020 2020 2020 2022 2222 0a20  >`.        """. 
-00049af0: 2020 2020 2020 2073 656c 662e 6c6f 6164         self.load
-00049b00: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
-00049b10: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
-00049b20: 2020 2020 2020 2020 2020 2023 2027 636f             # 'co
-00049b30: 696e 273a 2063 7572 7265 6e63 795b 2769  in': currency['i
-00049b40: 6427 5d2c 0a20 2020 2020 2020 2020 2020  d'],.           
-00049b50: 2023 2027 6c69 6d69 7427 3a20 3230 2c20   # 'limit': 20, 
-00049b60: 2023 206d 6178 2035 300a 2020 2020 2020   # max 50.      
-00049b70: 2020 2020 2020 2320 2763 7573 6f72 273a        # 'cusor':
-00049b80: 2027 272c 0a20 2020 2020 2020 207d 0a20   '',.        }. 
-00049b90: 2020 2020 2020 2063 7572 7265 6e63 7920         currency 
-00049ba0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2069  = None.        i
-00049bb0: 6620 636f 6465 2069 7320 6e6f 7420 4e6f  f code is not No
-00049bc0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00049bd0: 6375 7272 656e 6379 203d 2073 656c 662e  currency = self.
-00049be0: 6375 7272 656e 6379 2863 6f64 6529 0a20  currency(code). 
-00049bf0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-00049c00: 7374 5b27 636f 696e 275d 203d 2063 7572  st['coin'] = cur
-00049c10: 7265 6e63 795b 2769 6427 5d0a 2020 2020  rency['id'].    
-00049c20: 2020 2020 6966 2073 696e 6365 2069 7320      if since is 
-00049c30: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00049c40: 2020 2020 2020 7265 7175 6573 745b 2773        request['s
-00049c50: 7461 7274 5469 6d65 275d 203d 2073 696e  tartTime'] = sin
-00049c60: 6365 0a20 2020 2020 2020 2069 6620 6c69  ce.        if li
-00049c70: 6d69 7420 6973 206e 6f74 204e 6f6e 653a  mit is not None:
-00049c80: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-00049c90: 7565 7374 5b27 6c69 6d69 7427 5d20 3d20  uest['limit'] = 
-00049ca0: 6c69 6d69 740a 2020 2020 2020 2020 7265  limit.        re
-00049cb0: 7370 6f6e 7365 203d 2073 656c 662e 7072  sponse = self.pr
-00049cc0: 6976 6174 6547 6574 5635 4173 7365 7457  ivateGetV5AssetW
-00049cd0: 6974 6864 7261 7751 7565 7279 5265 636f  ithdrawQueryReco
-00049ce0: 7264 2873 656c 662e 6578 7465 6e64 2872  rd(self.extend(r
-00049cf0: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
-00049d00: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00049d10: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
-00049d20: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-00049d30: 7443 6f64 6522 3a20 302c 0a20 2020 2020  tCode": 0,.     
-00049d40: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-00049d50: 744d 7367 223a 2022 7375 6363 6573 7322  tMsg": "success"
-00049d60: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00049d70: 2020 2020 2272 6573 756c 7422 3a20 7b0a      "result": {.
-00049d80: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00049d90: 2020 2020 2020 2272 6f77 7322 3a20 5b0a        "rows": [.
-00049da0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00049db0: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
-00049dc0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00049dd0: 2020 2020 2020 2020 2020 2263 6f69 6e22            "coin"
-00049de0: 3a20 2255 5344 5422 2c0a 2020 2020 2020  : "USDT",.      
-00049df0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00049e00: 2020 2020 2020 2020 2263 6861 696e 223a          "chain":
-00049e10: 2022 4554 4822 2c0a 2020 2020 2020 2020   "ETH",.        
-00049e20: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00049e30: 2020 2020 2020 2261 6d6f 756e 7422 3a20        "amount": 
-00049e40: 2237 3722 2c0a 2020 2020 2020 2020 2320  "77",.        # 
-00049e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00049e60: 2020 2020 2274 7849 4422 3a20 2222 2c0a      "txID": "",.
-00049e70: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00049e80: 2020 2020 2020 2020 2020 2020 2020 2273                "s
-00049e90: 7461 7475 7322 3a20 2253 6563 7572 6974  tatus": "Securit
-00049ea0: 7943 6865 636b 222c 0a20 2020 2020 2020  yCheck",.       
-00049eb0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00049ec0: 2020 2020 2020 2022 746f 4164 6472 6573         "toAddres
-00049ed0: 7322 3a20 2230 7839 3963 6564 3132 3936  s": "0x99ced1296
-00049ee0: 3033 6162 6337 3731 6330 6461 6265 3933  03abc771c0dabe93
-00049ef0: 3563 3332 3666 6636 6338 3636 3435 6422  5c326ff6c86645d"
-00049f00: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00049f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00049f20: 2274 6167 223a 2022 222c 0a20 2020 2020  "tag": "",.     
-00049f30: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00049f40: 2020 2020 2020 2020 2022 7769 7468 6472           "withdr
-00049f50: 6177 4665 6522 3a20 2231 3022 2c0a 2020  awFee": "10",.  
-00049f60: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00049f70: 2020 2020 2020 2020 2020 2020 2263 7265              "cre
-00049f80: 6174 6554 696d 6522 3a20 2231 3637 3039  ateTime": "16709
-00049f90: 3232 3231 3730 3030 222c 0a20 2020 2020  22217000",.     
-00049fa0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00049fb0: 2020 2020 2020 2020 2022 7570 6461 7465           "update
-00049fc0: 5469 6d65 223a 2022 3136 3730 3932 3232  Time": "16709222
-00049fd0: 3137 3030 3022 2c0a 2020 2020 2020 2020  17000",.        
-00049fe0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00049ff0: 2020 2020 2020 2277 6974 6864 7261 7749        "withdrawI
-0004a000: 6422 3a20 2239 3937 3622 2c0a 2020 2020  d": "9976",.    
-0004a010: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004a020: 2020 2020 2020 2020 2020 2277 6974 6864            "withd
-0004a030: 7261 7754 7970 6522 3a20 300a 2020 2020  rawType": 0.    
-0004a040: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004a050: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
-0004a060: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004a070: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-0004a080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004a090: 2020 2022 636f 696e 223a 2022 5553 4454     "coin": "USDT
-0004a0a0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004a0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004a0c0: 2022 6368 6169 6e22 3a20 2245 5448 222c   "chain": "ETH",
-0004a0d0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004a0e0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0004a0f0: 616d 6f75 6e74 223a 2022 3236 222c 0a20  amount": "26",. 
-0004a100: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004a110: 2020 2020 2020 2020 2020 2020 2022 7478               "tx
-0004a120: 4944 223a 2022 222c 0a20 2020 2020 2020  ID": "",.       
-0004a130: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004a140: 2020 2020 2020 2022 7374 6174 7573 223a         "status":
-0004a150: 2022 7375 6363 6573 7322 2c0a 2020 2020   "success",.    
-0004a160: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004a170: 2020 2020 2020 2020 2020 2274 6f41 6464            "toAdd
-0004a180: 7265 7373 223a 2022 3135 3633 3830 3732  ress": "15638072
-0004a190: 3638 3140 3136 332e 636f 6d22 2c0a 2020  681@163.com",.  
-0004a1a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004a1b0: 2020 2020 2020 2020 2020 2020 2274 6167              "tag
-0004a1c0: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
-0004a1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004a1e0: 2020 2020 2022 7769 7468 6472 6177 4665       "withdrawFe
-0004a1f0: 6522 3a20 2230 222c 0a20 2020 2020 2020  e": "0",.       
-0004a200: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004a210: 2020 2020 2020 2022 6372 6561 7465 5469         "createTi
-0004a220: 6d65 223a 2022 3136 3639 3731 3131 3231  me": "1669711121
-0004a230: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
-0004a240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004a250: 2020 2020 2275 7064 6174 6554 696d 6522      "updateTime"
-0004a260: 3a20 2231 3636 3937 3131 3338 3030 3030  : "1669711380000
-0004a270: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004a280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004a290: 2022 7769 7468 6472 6177 4964 223a 2022   "withdrawId": "
-0004a2a0: 3938 3031 222c 0a20 2020 2020 2020 2023  9801",.        #
-0004a2b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004a2c0: 2020 2020 2022 7769 7468 6472 6177 5479       "withdrawTy
-0004a2d0: 7065 223a 2031 0a20 2020 2020 2020 2023  pe": 1.        #
-0004a2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004a2f0: 207d 0a20 2020 2020 2020 2023 2020 2020   }.        #    
-0004a300: 2020 2020 2020 2020 205d 2c0a 2020 2020           ],.    
-0004a310: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004a320: 2020 226e 6578 7450 6167 6543 7572 736f    "nextPageCurso
-0004a330: 7222 3a20 2265 794a 7461 5735 4a52 4349  r": "eyJtaW5JRCI
-0004a340: 364f 5467 774d 5377 6962 5746 3453 5551  6OTgwMSwibWF4SUQ
-0004a350: 694f 6a6b 354e 7a5a 3922 0a20 2020 2020  iOjk5NzZ9".     
-0004a360: 2020 2023 2020 2020 2020 2020 207d 2c0a     #         },.
-0004a370: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004a380: 2020 2272 6574 4578 7449 6e66 6f22 3a20    "retExtInfo": 
-0004a390: 7b7d 2c0a 2020 2020 2020 2020 2320 2020  {},.        #   
-0004a3a0: 2020 2020 2020 2274 696d 6522 3a20 3136        "time": 16
-0004a3b0: 3732 3139 3439 3439 3932 380a 2020 2020  72194949928.    
-0004a3c0: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
-0004a3d0: 2020 2020 230a 2020 2020 2020 2020 7265      #.        re
-0004a3e0: 7375 6c74 203d 2073 656c 662e 7361 6665  sult = self.safe
-0004a3f0: 5f76 616c 7565 2872 6573 706f 6e73 652c  _value(response,
-0004a400: 2027 7265 7375 6c74 272c 207b 7d29 0a20   'result', {}). 
-0004a410: 2020 2020 2020 2064 6174 6120 3d20 7365         data = se
-0004a420: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
-0004a430: 7375 6c74 2c20 2772 6f77 7327 2c20 5b5d  sult, 'rows', []
-0004a440: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-0004a450: 2073 656c 662e 7061 7273 655f 7472 616e   self.parse_tran
-0004a460: 7361 6374 696f 6e73 2864 6174 612c 2063  sactions(data, c
-0004a470: 7572 7265 6e63 792c 2073 696e 6365 2c20  urrency, since, 
-0004a480: 6c69 6d69 7429 0a0a 2020 2020 6465 6620  limit)..    def 
-0004a490: 7061 7273 655f 7472 616e 7361 6374 696f  parse_transactio
-0004a4a0: 6e5f 7374 6174 7573 2873 656c 662c 2073  n_status(self, s
-0004a4b0: 7461 7475 7329 3a0a 2020 2020 2020 2020  tatus):.        
-0004a4c0: 7374 6174 7573 6573 203d 207b 0a20 2020  statuses = {.   
-0004a4d0: 2020 2020 2020 2020 2023 2076 312f 7632           # v1/v2
-0004a4e0: 0a20 2020 2020 2020 2020 2020 2027 546f  .            'To
-0004a4f0: 4265 436f 6e66 6972 6d65 6427 3a20 2770  BeConfirmed': 'p
-0004a500: 656e 6469 6e67 272c 0a20 2020 2020 2020  ending',.       
-0004a510: 2020 2020 2027 556e 6465 7252 6576 6965       'UnderRevie
-0004a520: 7727 3a20 2770 656e 6469 6e67 272c 0a20  w': 'pending',. 
-0004a530: 2020 2020 2020 2020 2020 2027 5375 6363             'Succ
-0004a540: 6573 7327 3a20 276f 6b27 2c0a 2020 2020  ess': 'ok',.    
-0004a550: 2020 2020 2020 2020 2745 7870 6972 6527          'Expire'
-0004a560: 3a20 2765 7870 6972 6564 272c 0a20 2020  : 'expired',.   
-0004a570: 2020 2020 2020 2020 2023 2076 3320 6465           # v3 de
-0004a580: 706f 7369 7420 7374 6174 7573 0a20 2020  posit status.   
-0004a590: 2020 2020 2020 2020 2027 3027 3a20 2775           '0': 'u
-0004a5a0: 6e6b 6e6f 776e 272c 0a20 2020 2020 2020  nknown',.       
-0004a5b0: 2020 2020 2027 3127 3a20 2770 656e 6469       '1': 'pendi
-0004a5c0: 6e67 272c 0a20 2020 2020 2020 2020 2020  ng',.           
-0004a5d0: 2027 3227 3a20 2770 726f 6365 7373 696e   '2': 'processin
-0004a5e0: 6727 2c0a 2020 2020 2020 2020 2020 2020  g',.            
-0004a5f0: 2733 273a 2027 6f6b 272c 0a20 2020 2020  '3': 'ok',.     
-0004a600: 2020 2020 2020 2027 3427 3a20 2766 6169         '4': 'fai
-0004a610: 6c27 2c0a 2020 2020 2020 2020 2020 2020  l',.            
-0004a620: 2320 7633 2077 6974 6864 7261 7761 6c20  # v3 withdrawal 
-0004a630: 7374 6174 7573 0a20 2020 2020 2020 2020  status.         
-0004a640: 2020 2027 5365 6375 7269 7479 4368 6563     'SecurityChec
-0004a650: 6b27 3a20 2770 656e 6469 6e67 272c 0a20  k': 'pending',. 
-0004a660: 2020 2020 2020 2020 2020 2027 5065 6e64             'Pend
-0004a670: 696e 6727 3a20 2770 656e 6469 6e67 272c  ing': 'pending',
-0004a680: 0a20 2020 2020 2020 2020 2020 2027 7375  .            'su
-0004a690: 6363 6573 7327 3a20 276f 6b27 2c0a 2020  ccess': 'ok',.  
-0004a6a0: 2020 2020 2020 2020 2020 2743 616e 6365            'Cance
-0004a6b0: 6c42 7955 7365 7227 3a20 2763 616e 6365  lByUser': 'cance
-0004a6c0: 6c65 6427 2c0a 2020 2020 2020 2020 2020  led',.          
-0004a6d0: 2020 2752 656a 6563 7427 3a20 2772 656a    'Reject': 'rej
-0004a6e0: 6563 7465 6427 2c0a 2020 2020 2020 2020  ected',.        
-0004a6f0: 2020 2020 2746 6169 6c27 3a20 2766 6169      'Fail': 'fai
-0004a700: 6c65 6427 2c0a 2020 2020 2020 2020 2020  led',.          
-0004a710: 2020 2742 6c6f 636b 6368 6169 6e43 6f6e    'BlockchainCon
-0004a720: 6669 726d 6564 273a 2027 6f6b 272c 0a20  firmed': 'ok',. 
-0004a730: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-0004a740: 2072 6574 7572 6e20 7365 6c66 2e73 6166   return self.saf
-0004a750: 655f 7374 7269 6e67 2873 7461 7475 7365  e_string(statuse
-0004a760: 732c 2073 7461 7475 732c 2073 7461 7475  s, status, statu
-0004a770: 7329 0a0a 2020 2020 6465 6620 7061 7273  s)..    def pars
-0004a780: 655f 7472 616e 7361 6374 696f 6e28 7365  e_transaction(se
-0004a790: 6c66 2c20 7472 616e 7361 6374 696f 6e2c  lf, transaction,
-0004a7a0: 2063 7572 7265 6e63 793d 4e6f 6e65 293a   currency=None):
-0004a7b0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-0004a7c0: 2020 2023 2066 6574 6368 5769 7468 6472     # fetchWithdr
-0004a7d0: 6177 616c 730a 2020 2020 2020 2020 230a  awals.        #.
-0004a7e0: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
-0004a7f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004a800: 2020 2263 6f69 6e22 3a20 2255 5344 5422    "coin": "USDT"
-0004a810: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004a820: 2020 2020 2263 6861 696e 223a 2022 5452      "chain": "TR
-0004a830: 5822 2c0a 2020 2020 2020 2020 2320 2020  X",.        #   
-0004a840: 2020 2020 2020 2261 6d6f 756e 7422 3a20        "amount": 
-0004a850: 2231 322e 3334 222c 0a20 2020 2020 2020  "12.34",.       
-0004a860: 2023 2020 2020 2020 2020 2022 7478 4944   #         "txID
-0004a870: 223a 2022 6465 3565 6130 6132 6632 6535  ": "de5ea0a2f2e5
-0004a880: 3964 6339 6137 3134 3833 3764 6433 6464  9dc9a714837dd3dd
-0004a890: 6336 6435 6531 3531 6235 3665 6335 6437  c6d5e151b56ec5d7
-0004a8a0: 3836 6433 3531 6334 6635 3233 3336 6638  86d351c4f52336f8
-0004a8b0: 3064 3363 222c 0a20 2020 2020 2020 2023  0d3c",.        #
-0004a8c0: 2020 2020 2020 2020 2022 7374 6174 7573           "status
-0004a8d0: 223a 2022 7375 6363 6573 7322 2c0a 2020  ": "success",.  
-0004a8e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004a8f0: 2274 6f41 6464 7265 7373 223a 2022 5451  "toAddress": "TQ
-0004a900: 646d 464b 556f 6531 4c6b 3269 775a 7577  dmFKUoe1Lk2iwZuw
-0004a910: 524a 4548 4a72 6554 5542 6f4e 3342 4177  RJEHJreTUBoN3BAw
-0004a920: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004a930: 2020 2020 2022 7461 6722 3a20 2222 2c0a       "tag": "",.
-0004a940: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004a950: 2020 2277 6974 6864 7261 7746 6565 223a    "withdrawFee":
-0004a960: 2022 302e 3522 2c0a 2020 2020 2020 2020   "0.5",.        
-0004a970: 2320 2020 2020 2020 2020 2263 7265 6174  #         "creat
-0004a980: 6554 696d 6522 3a20 2231 3636 3531 3434  eTime": "1665144
-0004a990: 3138 3330 3030 222c 0a20 2020 2020 2020  183000",.       
-0004a9a0: 2023 2020 2020 2020 2020 2022 7570 6461   #         "upda
-0004a9b0: 7465 5469 6d65 223a 2022 3136 3635 3134  teTime": "166514
-0004a9c0: 3432 3536 3030 3022 2c0a 2020 2020 2020  4256000",.      
-0004a9d0: 2020 2320 2020 2020 2020 2020 2277 6974    #         "wit
-0004a9e0: 6864 7261 7749 6422 3a20 2238 3833 3930  hdrawId": "88390
-0004a9f0: 3335 220a 2020 2020 2020 2020 2320 2020  35".        #   
-0004aa00: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-0004aa10: 2020 2020 2020 2320 6665 7463 6844 6570        # fetchDep
-0004aa20: 6f73 6974 730a 2020 2020 2020 2020 230a  osits.        #.
-0004aa30: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
-0004aa40: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004aa50: 2020 2263 6f69 6e22 3a20 2255 5344 5422    "coin": "USDT"
-0004aa60: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004aa70: 2020 2020 2263 6861 696e 223a 2022 5452      "chain": "TR
-0004aa80: 5822 2c0a 2020 2020 2020 2020 2320 2020  X",.        #   
-0004aa90: 2020 2020 2020 2261 6d6f 756e 7422 3a20        "amount": 
-0004aaa0: 2234 3422 2c0a 2020 2020 2020 2020 2320  "44",.        # 
-0004aab0: 2020 2020 2020 2020 2274 7849 4422 3a20          "txID": 
-0004aac0: 2230 6230 3338 6561 3132 6661 3135 3735  "0b038ea12fa1575
-0004aad0: 6532 6436 3636 3933 6462 3363 3334 3662  e2d66693db3c346b
-0004aae0: 3730 3064 3462 3238 3334 3761 6663 3339  700d4b28347afc39
-0004aaf0: 6638 3033 3231 6366 3038 3961 6363 3936  f80321cf089acc96
-0004ab00: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-0004ab10: 2020 2020 2020 2273 7461 7475 7322 3a20        "status": 
-0004ab20: 2233 222c 0a20 2020 2020 2020 2023 2020  "3",.        #  
-0004ab30: 2020 2020 2020 2022 746f 4164 6472 6573         "toAddres
-0004ab40: 7322 3a20 2254 4336 4e43 4143 3557 5356  s": "TC6NCAC5WSV
-0004ab50: 4343 6961 4433 6b57 5a58 7957 3931 5a4b  CCiaD3kWZXyW91ZK
-0004ab60: 4b68 4c6d 3533 6222 2c0a 2020 2020 2020  KhLm53b",.      
-0004ab70: 2020 2320 2020 2020 2020 2020 2274 6167    #         "tag
-0004ab80: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
-0004ab90: 2020 2020 2020 2020 2022 6465 706f 7369           "deposi
-0004aba0: 7446 6565 223a 2022 222c 0a20 2020 2020  tFee": "",.     
-0004abb0: 2020 2023 2020 2020 2020 2020 2022 7375     #         "su
-0004abc0: 6363 6573 7341 7422 3a20 2231 3636 3531  ccessAt": "16651
-0004abd0: 3432 3530 3730 3030 222c 0a20 2020 2020  42507000",.     
-0004abe0: 2020 2023 2020 2020 2020 2020 2022 636f     #         "co
-0004abf0: 6e66 6972 6d61 7469 6f6e 7322 3a20 2231  nfirmations": "1
-0004ac00: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
-0004ac10: 2020 2020 2020 2022 7478 496e 6465 7822         "txIndex"
-0004ac20: 3a20 2230 222c 0a20 2020 2020 2020 2023  : "0",.        #
-0004ac30: 2020 2020 2020 2020 2022 626c 6f63 6b48           "blockH
-0004ac40: 6173 6822 3a20 2230 3030 3030 3030 3030  ash": "000000000
-0004ac50: 3261 6333 6231 3036 3461 6565 3934 6263  2ac3b1064aee94bc
-0004ac60: 6131 6264 3062 3538 6334 6330 3963 3635  a1bd0b58c4c09c65
-0004ac70: 3831 3362 3038 3462 3837 6132 3036 3364  813b084b87a2063d
-0004ac80: 3936 3131 3239 6522 0a20 2020 2020 2020  961129e".       
-0004ac90: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
-0004aca0: 2023 0a20 2020 2020 2020 2023 2077 6974   #.        # wit
-0004acb0: 6864 7261 770a 2020 2020 2020 2020 230a  hdraw.        #.
-0004acc0: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
-0004acd0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004ace0: 2020 2269 6422 3a20 2239 3337 3732 3636    "id": "9377266
-0004acf0: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
-0004ad00: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
-0004ad10: 2020 2020 6375 7272 656e 6379 4964 203d      currencyId =
-0004ad20: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-0004ad30: 6728 7472 616e 7361 6374 696f 6e2c 2027  g(transaction, '
-0004ad40: 636f 696e 2729 0a20 2020 2020 2020 2063  coin').        c
-0004ad50: 6f64 6520 3d20 7365 6c66 2e73 6166 655f  ode = self.safe_
-0004ad60: 6375 7272 656e 6379 5f63 6f64 6528 6375  currency_code(cu
-0004ad70: 7272 656e 6379 4964 2c20 6375 7272 656e  rrencyId, curren
-0004ad80: 6379 290a 2020 2020 2020 2020 7469 6d65  cy).        time
-0004ad90: 7374 616d 7020 3d20 7365 6c66 2e73 6166  stamp = self.saf
-0004ada0: 655f 696e 7465 6765 725f 3228 7472 616e  e_integer_2(tran
-0004adb0: 7361 6374 696f 6e2c 2027 6372 6561 7465  saction, 'create
-0004adc0: 5469 6d65 272c 2027 7375 6363 6573 7341  Time', 'successA
-0004add0: 7427 290a 2020 2020 2020 2020 7570 6461  t').        upda
-0004ade0: 7465 6420 3d20 7365 6c66 2e73 6166 655f  ted = self.safe_
-0004adf0: 696e 7465 6765 7228 7472 616e 7361 6374  integer(transact
-0004ae00: 696f 6e2c 2027 7570 6461 7465 5469 6d65  ion, 'updateTime
-0004ae10: 2729 0a20 2020 2020 2020 2073 7461 7475  ').        statu
-0004ae20: 7320 3d20 7365 6c66 2e70 6172 7365 5f74  s = self.parse_t
-0004ae30: 7261 6e73 6163 7469 6f6e 5f73 7461 7475  ransaction_statu
-0004ae40: 7328 7365 6c66 2e73 6166 655f 7374 7269  s(self.safe_stri
-0004ae50: 6e67 2874 7261 6e73 6163 7469 6f6e 2c20  ng(transaction, 
-0004ae60: 2773 7461 7475 7327 2929 0a20 2020 2020  'status')).     
-0004ae70: 2020 2066 6565 436f 7374 203d 2073 656c     feeCost = sel
-0004ae80: 662e 7361 6665 5f6e 756d 6265 725f 3228  f.safe_number_2(
-0004ae90: 7472 616e 7361 6374 696f 6e2c 2027 6465  transaction, 'de
-0004aea0: 706f 7369 7446 6565 272c 2027 7769 7468  positFee', 'with
-0004aeb0: 6472 6177 4665 6527 2c20 3029 0a20 2020  drawFee', 0).   
-0004aec0: 2020 2020 2074 7970 6520 3d20 2764 6570       type = 'dep
-0004aed0: 6f73 6974 2720 6966 2028 2764 6570 6f73  osit' if ('depos
-0004aee0: 6974 4665 6527 2069 6e20 7472 616e 7361  itFee' in transa
-0004aef0: 6374 696f 6e29 2065 6c73 6520 2777 6974  ction) else 'wit
-0004af00: 6864 7261 7761 6c27 0a20 2020 2020 2020  hdrawal'.       
-0004af10: 2066 6565 203d 204e 6f6e 650a 2020 2020   fee = None.    
-0004af20: 2020 2020 6966 2066 6565 436f 7374 2069      if feeCost i
-0004af30: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-0004af40: 2020 2020 2020 2020 6665 6520 3d20 7b0a          fee = {.
-0004af50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004af60: 2763 6f73 7427 3a20 6665 6543 6f73 742c  'cost': feeCost,
-0004af70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0004af80: 2027 6375 7272 656e 6379 273a 2063 6f64   'currency': cod
-0004af90: 652c 0a20 2020 2020 2020 2020 2020 207d  e,.            }
-0004afa0: 0a20 2020 2020 2020 2074 6f41 6464 7265  .        toAddre
-0004afb0: 7373 203d 2073 656c 662e 7361 6665 5f73  ss = self.safe_s
-0004afc0: 7472 696e 6728 7472 616e 7361 6374 696f  tring(transactio
-0004afd0: 6e2c 2027 746f 4164 6472 6573 7327 290a  n, 'toAddress').
-0004afe0: 2020 2020 2020 2020 7265 7475 726e 207b          return {
-0004aff0: 0a20 2020 2020 2020 2020 2020 2027 696e  .            'in
-0004b000: 666f 273a 2074 7261 6e73 6163 7469 6f6e  fo': transaction
-0004b010: 2c0a 2020 2020 2020 2020 2020 2020 2769  ,.            'i
-0004b020: 6427 3a20 7365 6c66 2e73 6166 655f 7374  d': self.safe_st
-0004b030: 7269 6e67 5f32 2874 7261 6e73 6163 7469  ring_2(transacti
-0004b040: 6f6e 2c20 2769 6427 2c20 2777 6974 6864  on, 'id', 'withd
-0004b050: 7261 7749 6427 292c 0a20 2020 2020 2020  rawId'),.       
-0004b060: 2020 2020 2027 7478 6964 273a 2073 656c       'txid': sel
-0004b070: 662e 7361 6665 5f73 7472 696e 6728 7472  f.safe_string(tr
-0004b080: 616e 7361 6374 696f 6e2c 2027 7478 4944  ansaction, 'txID
-0004b090: 2729 2c0a 2020 2020 2020 2020 2020 2020  '),.            
-0004b0a0: 2774 696d 6573 7461 6d70 273a 2074 696d  'timestamp': tim
-0004b0b0: 6573 7461 6d70 2c0a 2020 2020 2020 2020  estamp,.        
-0004b0c0: 2020 2020 2764 6174 6574 696d 6527 3a20      'datetime': 
-0004b0d0: 7365 6c66 2e69 736f 3836 3031 2874 696d  self.iso8601(tim
-0004b0e0: 6573 7461 6d70 292c 0a20 2020 2020 2020  estamp),.       
-0004b0f0: 2020 2020 2027 6e65 7477 6f72 6b27 3a20       'network': 
-0004b100: 7365 6c66 2e6e 6574 776f 726b 5f69 645f  self.network_id_
-0004b110: 746f 5f63 6f64 6528 7365 6c66 2e73 6166  to_code(self.saf
-0004b120: 655f 7374 7269 6e67 2874 7261 6e73 6163  e_string(transac
-0004b130: 7469 6f6e 2c20 2763 6861 696e 2729 292c  tion, 'chain')),
-0004b140: 0a20 2020 2020 2020 2020 2020 2027 6164  .            'ad
-0004b150: 6472 6573 7327 3a20 4e6f 6e65 2c0a 2020  dress': None,.  
-0004b160: 2020 2020 2020 2020 2020 2761 6464 7265            'addre
-0004b170: 7373 546f 273a 2074 6f41 6464 7265 7373  ssTo': toAddress
-0004b180: 2c0a 2020 2020 2020 2020 2020 2020 2761  ,.            'a
-0004b190: 6464 7265 7373 4672 6f6d 273a 204e 6f6e  ddressFrom': Non
-0004b1a0: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
-0004b1b0: 7461 6727 3a20 7365 6c66 2e73 6166 655f  tag': self.safe_
-0004b1c0: 7374 7269 6e67 2874 7261 6e73 6163 7469  string(transacti
-0004b1d0: 6f6e 2c20 2774 6167 2729 2c0a 2020 2020  on, 'tag'),.    
-0004b1e0: 2020 2020 2020 2020 2774 6167 546f 273a          'tagTo':
-0004b1f0: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
-0004b200: 2020 2027 7461 6746 726f 6d27 3a20 4e6f     'tagFrom': No
-0004b210: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-0004b220: 2774 7970 6527 3a20 7479 7065 2c0a 2020  'type': type,.  
-0004b230: 2020 2020 2020 2020 2020 2761 6d6f 756e            'amoun
-0004b240: 7427 3a20 7365 6c66 2e73 6166 655f 6e75  t': self.safe_nu
-0004b250: 6d62 6572 2874 7261 6e73 6163 7469 6f6e  mber(transaction
-0004b260: 2c20 2761 6d6f 756e 7427 292c 0a20 2020  , 'amount'),.   
-0004b270: 2020 2020 2020 2020 2027 6375 7272 656e           'curren
-0004b280: 6379 273a 2063 6f64 652c 0a20 2020 2020  cy': code,.     
-0004b290: 2020 2020 2020 2027 7374 6174 7573 273a         'status':
-0004b2a0: 2073 7461 7475 732c 0a20 2020 2020 2020   status,.       
-0004b2b0: 2020 2020 2027 7570 6461 7465 6427 3a20       'updated': 
-0004b2c0: 7570 6461 7465 642c 0a20 2020 2020 2020  updated,.       
-0004b2d0: 2020 2020 2027 6665 6527 3a20 6665 652c       'fee': fee,
-0004b2e0: 0a20 2020 2020 2020 207d 0a0a 2020 2020  .        }..    
-0004b2f0: 6465 6620 6665 7463 685f 6c65 6467 6572  def fetch_ledger
-0004b300: 2873 656c 662c 2063 6f64 653a 204f 7074  (self, code: Opt
-0004b310: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
-0004b320: 652c 2073 696e 6365 3a20 4f70 7469 6f6e  e, since: Option
-0004b330: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c20  al[int] = None, 
-0004b340: 6c69 6d69 743a 204f 7074 696f 6e61 6c5b  limit: Optional[
-0004b350: 696e 745d 203d 204e 6f6e 652c 2070 6172  int] = None, par
-0004b360: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
-0004b370: 2022 2222 0a20 2020 2020 2020 2066 6574   """.        fet
-0004b380: 6368 2074 6865 2068 6973 746f 7279 206f  ch the history o
-0004b390: 6620 6368 616e 6765 732c 2061 6374 696f  f changes, actio
-0004b3a0: 6e73 2064 6f6e 6520 6279 2074 6865 2075  ns done by the u
-0004b3b0: 7365 7220 6f72 206f 7065 7261 7469 6f6e  ser or operation
-0004b3c0: 7320 7468 6174 2061 6c74 6572 6564 2062  s that altered b
-0004b3d0: 616c 616e 6365 206f 6620 7468 6520 7573  alance of the us
-0004b3e0: 6572 0a20 2020 2020 2020 2073 6565 2068  er.        see h
-0004b3f0: 7474 7073 3a2f 2f62 7962 6974 2d65 7863  ttps://bybit-exc
-0004b400: 6861 6e67 652e 6769 7468 7562 2e69 6f2f  hange.github.io/
-0004b410: 646f 6373 2f76 352f 6163 636f 756e 742f  docs/v5/account/
-0004b420: 7472 616e 7361 6374 696f 6e2d 6c6f 670a  transaction-log.
-0004b430: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-0004b440: 7472 7c4e 6f6e 6520 636f 6465 3a20 756e  tr|None code: un
-0004b450: 6966 6965 6420 6375 7272 656e 6379 2063  ified currency c
-0004b460: 6f64 652c 2064 6566 6175 6c74 2069 7320  ode, default is 
-0004b470: 4e6f 6e65 0a20 2020 2020 2020 203a 7061  None.        :pa
-0004b480: 7261 6d20 696e 747c 4e6f 6e65 2073 696e  ram int|None sin
-0004b490: 6365 3a20 7469 6d65 7374 616d 7020 696e  ce: timestamp in
-0004b4a0: 206d 7320 6f66 2074 6865 2065 6172 6c69   ms of the earli
-0004b4b0: 6573 7420 6c65 6467 6572 2065 6e74 7279  est ledger entry
-0004b4c0: 2c20 6465 6661 756c 7420 6973 204e 6f6e  , default is Non
-0004b4d0: 650a 2020 2020 2020 2020 3a70 6172 616d  e.        :param
-0004b4e0: 2069 6e74 7c4e 6f6e 6520 6c69 6d69 743a   int|None limit:
-0004b4f0: 206d 6178 206e 756d 6265 7220 6f66 206c   max number of l
-0004b500: 6564 6765 7220 656e 7472 7973 2074 6f20  edger entrys to 
-0004b510: 7265 7475 726e 2c20 6465 6661 756c 7420  return, default 
-0004b520: 6973 204e 6f6e 650a 2020 2020 2020 2020  is None.        
-0004b530: 3a70 6172 616d 2064 6963 7420 7061 7261  :param dict para
-0004b540: 6d73 3a20 6578 7472 6120 7061 7261 6d65  ms: extra parame
-0004b550: 7465 7273 2073 7065 6369 6669 6320 746f  ters specific to
-0004b560: 2074 6865 2062 7962 6974 2061 7069 2065   the bybit api e
-0004b570: 6e64 706f 696e 740a 2020 2020 2020 2020  ndpoint.        
-0004b580: 3a72 6574 7572 6e73 2064 6963 743a 2061  :returns dict: a
-0004b590: 2060 6c65 6467 6572 2073 7472 7563 7475   `ledger structu
-0004b5a0: 7265 203c 6874 7470 733a 2f2f 646f 6373  re <https://docs
-0004b5b0: 2e63 6378 742e 636f 6d2f 232f 3f69 643d  .ccxt.com/#/?id=
-0004b5c0: 6c65 6467 6572 2d73 7472 7563 7475 7265  ledger-structure
-0004b5d0: 3e60 0a20 2020 2020 2020 2022 2222 0a20  >`.        """. 
-0004b5e0: 2020 2020 2020 2073 656c 662e 6c6f 6164         self.load
-0004b5f0: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
-0004b600: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
-0004b610: 2020 2020 2020 2020 2020 2023 2027 636f             # 'co
-0004b620: 696e 273a 2063 7572 7265 6e63 795b 2769  in': currency['i
-0004b630: 6427 5d2c 0a20 2020 2020 2020 2020 2020  d'],.           
-0004b640: 2023 2027 6375 7272 656e 6379 273a 2063   # 'currency': c
-0004b650: 7572 7265 6e63 795b 2769 6427 5d2c 2020  urrency['id'],  
-0004b660: 2320 616c 6961 730a 2020 2020 2020 2020  # alias.        
-0004b670: 2020 2020 2320 2773 7461 7274 5f64 6174      # 'start_dat
-0004b680: 6527 3a20 7365 6c66 2e69 736f 3836 3031  e': self.iso8601
-0004b690: 2873 696e 6365 292c 0a20 2020 2020 2020  (since),.       
-0004b6a0: 2020 2020 2023 2027 656e 645f 6461 7465       # 'end_date
-0004b6b0: 273a 2073 656c 662e 6973 6f38 3630 3128  ': self.iso8601(
-0004b6c0: 7469 6c6c 292c 0a20 2020 2020 2020 2020  till),.         
-0004b6d0: 2020 2023 2027 7761 6c6c 6574 5f66 756e     # 'wallet_fun
-0004b6e0: 645f 7479 7065 273a 2027 4465 706f 7369  d_type': 'Deposi
-0004b6f0: 7427 2c20 2023 2057 6974 6864 7261 772c  t',  # Withdraw,
-0004b700: 2052 6561 6c69 7365 6450 4e4c 2c20 436f   RealisedPNL, Co
-0004b710: 6d6d 6973 7369 6f6e 2c20 5265 6675 6e64  mmission, Refund
-0004b720: 2c20 5072 697a 652c 2045 7863 6861 6e67  , Prize, Exchang
-0004b730: 654f 7264 6572 5769 7468 6472 6177 2c20  eOrderWithdraw, 
-0004b740: 4578 6368 616e 6765 4f72 6465 7244 6570  ExchangeOrderDep
-0004b750: 6f73 6974 0a20 2020 2020 2020 2020 2020  osit.           
-0004b760: 2023 2027 7061 6765 273a 2031 2c0a 2020   # 'page': 1,.  
-0004b770: 2020 2020 2020 2020 2020 2320 276c 696d            # 'lim
-0004b780: 6974 273a 2032 302c 2020 2320 6d61 7820  it': 20,  # max 
-0004b790: 3530 0a20 2020 2020 2020 2020 2020 2023  50.            #
-0004b7a0: 2076 3520 7472 616e 7361 6374 696f 6e20   v5 transaction 
-0004b7b0: 6c6f 670a 2020 2020 2020 2020 2020 2020  log.            
-0004b7c0: 2320 2761 6363 6f75 6e74 5479 7065 273a  # 'accountType':
-0004b7d0: 2027 272c 2041 6363 6f75 6e74 2054 7970   '', Account Typ
-0004b7e0: 652e 2055 4e49 4649 4544 0a20 2020 2020  e. UNIFIED.     
-0004b7f0: 2020 2020 2020 2023 2027 6361 7465 676f         # 'catego
-0004b800: 7279 273a 2027 272c 2050 726f 6475 6374  ry': '', Product
-0004b810: 2074 7970 652e 2073 706f 742c 6c69 6e65   type. spot,line
-0004b820: 6172 2c6f 7074 696f 6e0a 2020 2020 2020  ar,option.      
-0004b830: 2020 2020 2020 2320 2763 7572 7265 6e63        # 'currenc
-0004b840: 7927 3a20 2727 2c20 4375 7272 656e 6379  y': '', Currency
-0004b850: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
-0004b860: 6261 7365 436f 696e 273a 2027 272c 2042  baseCoin': '', B
-0004b870: 6173 6543 6f69 6e2e 2065 2e67 2e2c 2042  aseCoin. e.g., B
-0004b880: 5443 206f 6620 4254 4350 4552 500a 2020  TC of BTCPERP.  
-0004b890: 2020 2020 2020 2020 2020 2320 2774 7970            # 'typ
-0004b8a0: 6527 3a20 2727 2c20 5479 7065 7320 6f66  e': '', Types of
-0004b8b0: 2074 7261 6e73 6163 7469 6f6e 206c 6f67   transaction log
-0004b8c0: 730a 2020 2020 2020 2020 2020 2020 2320  s.            # 
-0004b8d0: 2773 7461 7274 5469 6d65 273a 2030 2c20  'startTime': 0, 
-0004b8e0: 5468 6520 7374 6172 7420 7469 6d65 7374  The start timest
-0004b8f0: 616d 7028 6d73 290a 2020 2020 2020 2020  amp(ms).        
-0004b900: 2020 2020 2320 2765 6e64 5469 6d65 273a      # 'endTime':
-0004b910: 2030 2c20 5468 6520 656e 6420 7469 6d65   0, The end time
-0004b920: 7374 616d 7028 6d73 290a 2020 2020 2020  stamp(ms).      
-0004b930: 2020 2020 2020 2320 276c 696d 6974 273a        # 'limit':
-0004b940: 2030 2c20 4c69 6d69 7420 666f 7220 6461   0, Limit for da
-0004b950: 7461 2073 697a 6520 7065 7220 7061 6765  ta size per page
-0004b960: 2e20 5b31 2c20 3530 5d2e 2044 6566 6175  . [1, 50]. Defau
-0004b970: 6c74 3a20 3230 0a20 2020 2020 2020 2020  lt: 20.         
-0004b980: 2020 2023 2027 6375 7273 6f72 273a 2027     # 'cursor': '
-0004b990: 272c 2043 7572 736f 722e 2055 7365 6420  ', Cursor. Used 
-0004b9a0: 666f 7220 7061 6769 6e61 7469 6f6e 0a20  for pagination. 
-0004b9b0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-0004b9c0: 2065 6e61 626c 6555 6e69 6669 6564 203d   enableUnified =
-0004b9d0: 2073 656c 662e 6973 5f75 6e69 6669 6564   self.is_unified
-0004b9e0: 5f65 6e61 626c 6564 2829 0a20 2020 2020  _enabled().     
-0004b9f0: 2020 2063 7572 7265 6e63 7920 3d20 4e6f     currency = No
-0004ba00: 6e65 0a20 2020 2020 2020 2063 7572 7265  ne.        curre
-0004ba10: 6e63 794b 6579 203d 2027 636f 696e 270a  ncyKey = 'coin'.
-0004ba20: 2020 2020 2020 2020 6966 2065 6e61 626c          if enabl
-0004ba30: 6555 6e69 6669 6564 5b31 5d3a 0a20 2020  eUnified[1]:.   
-0004ba40: 2020 2020 2020 2020 2063 7572 7265 6e63           currenc
-0004ba50: 794b 6579 203d 2027 6375 7272 656e 6379  yKey = 'currency
-0004ba60: 270a 2020 2020 2020 2020 2020 2020 6966  '.            if
-0004ba70: 2073 696e 6365 2069 7320 6e6f 7420 4e6f   since is not No
-0004ba80: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-0004ba90: 2020 2020 7265 7175 6573 745b 2773 7461      request['sta
-0004baa0: 7274 5469 6d65 275d 203d 2073 696e 6365  rtTime'] = since
-0004bab0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-0004bac0: 2020 2020 2020 2020 2020 2069 6620 7369             if si
-0004bad0: 6e63 6520 6973 206e 6f74 204e 6f6e 653a  nce is not None:
-0004bae0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0004baf0: 2072 6571 7565 7374 5b27 7374 6172 745f   request['start_
-0004bb00: 6461 7465 275d 203d 2073 656c 662e 7979  date'] = self.yy
-0004bb10: 7979 6d6d 6464 2873 696e 6365 290a 2020  yymmdd(since).  
-0004bb20: 2020 2020 2020 6d65 7468 6f64 203d 2027        method = '
-0004bb30: 7072 6976 6174 6547 6574 5635 4163 636f  privateGetV5Acco
-0004bb40: 756e 7454 7261 6e73 6163 7469 6f6e 4c6f  untTransactionLo
-0004bb50: 6727 2069 6620 2865 6e61 626c 6555 6e69  g' if (enableUni
-0004bb60: 6669 6564 5b31 5d29 2065 6c73 6520 2770  fied[1]) else 'p
-0004bb70: 7269 7661 7465 4765 7456 3250 7269 7661  rivateGetV2Priva
-0004bb80: 7465 5761 6c6c 6574 4675 6e64 5265 636f  teWalletFundReco
-0004bb90: 7264 7327 0a20 2020 2020 2020 2069 6620  rds'.        if 
-0004bba0: 636f 6465 2069 7320 6e6f 7420 4e6f 6e65  code is not None
-0004bbb0: 3a0a 2020 2020 2020 2020 2020 2020 6375  :.            cu
-0004bbc0: 7272 656e 6379 203d 2073 656c 662e 6375  rrency = self.cu
-0004bbd0: 7272 656e 6379 2863 6f64 6529 0a20 2020  rrency(code).   
-0004bbe0: 2020 2020 2020 2020 2072 6571 7565 7374           request
-0004bbf0: 5b63 7572 7265 6e63 794b 6579 5d20 3d20  [currencyKey] = 
-0004bc00: 6375 7272 656e 6379 5b27 6964 275d 0a20  currency['id']. 
-0004bc10: 2020 2020 2020 2069 6620 6c69 6d69 7420         if limit 
-0004bc20: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0004bc30: 2020 2020 2020 2020 2072 6571 7565 7374           request
-0004bc40: 5b27 6c69 6d69 7427 5d20 3d20 6c69 6d69  ['limit'] = limi
-0004bc50: 740a 2020 2020 2020 2020 7265 7370 6f6e  t.        respon
-0004bc60: 7365 203d 2067 6574 6174 7472 2873 656c  se = getattr(sel
-0004bc70: 662c 206d 6574 686f 6429 2873 656c 662e  f, method)(self.
-0004bc80: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
-0004bc90: 7061 7261 6d73 2929 0a20 2020 2020 2020  params)).       
-0004bca0: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
-0004bcb0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-0004bcc0: 2020 2020 2022 7265 745f 636f 6465 223a       "ret_code":
-0004bcd0: 2030 2c0a 2020 2020 2020 2020 2320 2020   0,.        #   
-0004bce0: 2020 2020 2020 2272 6574 5f6d 7367 223a        "ret_msg":
-0004bcf0: 2022 6f6b 222c 0a20 2020 2020 2020 2023   "ok",.        #
-0004bd00: 2020 2020 2020 2020 2022 6578 745f 636f           "ext_co
-0004bd10: 6465 223a 2022 222c 0a20 2020 2020 2020  de": "",.       
-0004bd20: 2023 2020 2020 2020 2020 2022 7265 7375   #         "resu
-0004bd30: 6c74 223a 207b 0a20 2020 2020 2020 2023  lt": {.        #
-0004bd40: 2020 2020 2020 2020 2020 2020 2022 6461               "da
-0004bd50: 7461 223a 205b 0a20 2020 2020 2020 2023  ta": [.        #
-0004bd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004bd70: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-0004bd80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004bd90: 2022 6964 223a 2032 3334 3436 372c 0a20   "id": 234467,. 
-0004bda0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004bdb0: 2020 2020 2020 2020 2020 2020 2022 7573               "us
-0004bdc0: 6572 5f69 6422 3a20 312c 0a20 2020 2020  er_id": 1,.     
-0004bdd0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0004bde0: 2020 2020 2020 2020 2022 636f 696e 223a           "coin":
-0004bdf0: 2022 4254 4322 2c0a 2020 2020 2020 2020   "BTC",.        
-0004be00: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004be10: 2020 2020 2020 2277 616c 6c65 745f 6964        "wallet_id
-0004be20: 223a 2032 3739 3133 2c0a 2020 2020 2020  ": 27913,.      
-0004be30: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0004be40: 2020 2020 2020 2020 2274 7970 6522 3a20          "type": 
-0004be50: 2252 6561 6c69 7a65 6420 5026 4c22 2c0a  "Realized P&L",.
-0004be60: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004be70: 2020 2020 2020 2020 2020 2020 2020 2261                "a
-0004be80: 6d6f 756e 7422 3a20 222d 302e 3030 3030  mount": "-0.0000
-0004be90: 3030 3036 222c 0a20 2020 2020 2020 2023  0006",.        #
-0004bea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004beb0: 2020 2020 2022 7478 5f69 6422 3a20 2222       "tx_id": ""
-0004bec0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004bed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004bee0: 2261 6464 7265 7373 223a 2022 4254 4355  "address": "BTCU
-0004bef0: 5344 222c 0a20 2020 2020 2020 2023 2020  SD",.        #  
-0004bf00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004bf10: 2020 2022 7761 6c6c 6574 5f62 616c 616e     "wallet_balan
-0004bf20: 6365 223a 2022 302e 3033 3030 3033 3330  ce": "0.03000330
-0004bf30: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004bf40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004bf50: 2022 6578 6563 5f74 696d 6522 3a20 2232   "exec_time": "2
-0004bf60: 3031 392d 3132 2d30 3954 3030 3a30 303a  019-12-09T00:00:
-0004bf70: 3235 2e30 3030 5a22 2c0a 2020 2020 2020  25.000Z",.      
-0004bf80: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0004bf90: 2020 2020 2020 2020 2263 726f 7373 5f73          "cross_s
-0004bfa0: 6571 223a 2030 0a20 2020 2020 2020 2023  eq": 0.        #
-0004bfb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004bfc0: 207d 0a20 2020 2020 2020 2023 2020 2020   }.        #    
-0004bfd0: 2020 2020 2020 2020 205d 0a20 2020 2020           ].     
-0004bfe0: 2020 2023 2020 2020 2020 2020 207d 2c0a     #         },.
-0004bff0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004c000: 2020 2265 7874 5f69 6e66 6f22 3a20 6e75    "ext_info": nu
-0004c010: 6c6c 2c0a 2020 2020 2020 2020 2320 2020  ll,.        #   
-0004c020: 2020 2020 2020 2274 696d 655f 6e6f 7722        "time_now"
-0004c030: 3a20 2231 3537 3734 3831 3836 372e 3131  : "1577481867.11
-0004c040: 3535 3532 222c 0a20 2020 2020 2020 2023  5552",.        #
-0004c050: 2020 2020 2020 2020 2022 7261 7465 5f6c           "rate_l
-0004c060: 696d 6974 5f73 7461 7475 7322 3a20 3131  imit_status": 11
-0004c070: 392c 0a20 2020 2020 2020 2023 2020 2020  9,.        #    
-0004c080: 2020 2020 2022 7261 7465 5f6c 696d 6974       "rate_limit
-0004c090: 5f72 6573 6574 5f6d 7322 3a20 3135 3737  _reset_ms": 1577
-0004c0a0: 3438 3138 3637 3132 322c 0a20 2020 2020  481867122,.     
-0004c0b0: 2020 2023 2020 2020 2020 2020 2022 7261     #         "ra
-0004c0c0: 7465 5f6c 696d 6974 223a 2031 3230 0a20  te_limit": 120. 
-0004c0d0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
-0004c0e0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-0004c0f0: 2023 2076 3520 7472 616e 7361 6374 696f   # v5 transactio
-0004c100: 6e20 6c6f 670a 2020 2020 2020 2020 230a  n log.        #.
-0004c110: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
-0004c120: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004c130: 2020 2272 6574 436f 6465 223a 2030 2c0a    "retCode": 0,.
-0004c140: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004c150: 2020 2272 6574 4d73 6722 3a20 224f 4b22    "retMsg": "OK"
-0004c160: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004c170: 2020 2020 2272 6573 756c 7422 3a20 7b0a      "result": {.
-0004c180: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004c190: 2020 2020 2020 226e 6578 7450 6167 6543        "nextPageC
-0004c1a0: 7572 736f 7222 3a20 2232 3139 3633 2533  ursor": "21963%3
-0004c1b0: 4131 2532 4331 3439 3534 2533 4131 222c  A1%2C14954%3A1",
-0004c1c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004c1d0: 2020 2020 2020 2022 6c69 7374 223a 205b         "list": [
-0004c1e0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004c1f0: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
-0004c200: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0004c210: 2020 2020 2020 2020 2020 2022 7379 6d62             "symb
-0004c220: 6f6c 223a 2022 5852 5055 5344 5422 2c0a  ol": "XRPUSDT",.
-0004c230: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004c240: 2020 2020 2020 2020 2020 2020 2020 2273                "s
-0004c250: 6964 6522 3a20 2242 7579 222c 0a20 2020  ide": "Buy",.   
-0004c260: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0004c270: 2020 2020 2020 2020 2020 2022 6675 6e64             "fund
-0004c280: 696e 6722 3a20 222d 302e 3030 3336 3736  ing": "-0.003676
-0004c290: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004c2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004c2b0: 2022 6f72 6465 724c 696e 6b49 6422 3a20   "orderLinkId": 
-0004c2c0: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
-0004c2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004c2e0: 2020 226f 7264 6572 4964 223a 2022 3136    "orderId": "16
-0004c2f0: 3732 3132 3830 3030 2d38 2d35 3932 3332  72128000-8-59232
-0004c300: 342d 312d 3222 2c0a 2020 2020 2020 2020  4-1-2",.        
-0004c310: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004c320: 2020 2020 2020 2266 6565 223a 2022 302e        "fee": "0.
-0004c330: 3030 3030 3030 3030 222c 0a20 2020 2020  00000000",.     
-0004c340: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0004c350: 2020 2020 2020 2020 2022 6368 616e 6765           "change
-0004c360: 223a 2022 2d30 2e30 3033 3637 3622 2c0a  ": "-0.003676",.
-0004c370: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004c380: 2020 2020 2020 2020 2020 2020 2020 2263                "c
-0004c390: 6173 6846 6c6f 7722 3a20 2230 222c 0a20  ashFlow": "0",. 
-0004c3a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004c3b0: 2020 2020 2020 2020 2020 2020 2022 7472               "tr
-0004c3c0: 616e 7361 6374 696f 6e54 696d 6522 3a20  ansactionTime": 
-0004c3d0: 2231 3637 3231 3238 3030 3030 3030 222c  "1672128000000",
-0004c3e0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004c3f0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0004c400: 7479 7065 223a 2022 5345 5454 4c45 4d45  type": "SETTLEME
-0004c410: 4e54 222c 0a20 2020 2020 2020 2023 2020  NT",.        #  
-0004c420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004c430: 2020 2022 6665 6552 6174 6522 3a20 2230     "feeRate": "0
-0004c440: 2e30 3030 3122 2c0a 2020 2020 2020 2020  .0001",.        
-0004c450: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004c460: 2020 2020 2020 2273 697a 6522 3a20 2231        "size": "1
-0004c470: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
-0004c480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004c490: 2020 2022 7174 7922 3a20 2231 3030 222c     "qty": "100",
-0004c4a0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004c4b0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0004c4c0: 6361 7368 4261 6c61 6e63 6522 3a20 2235  cashBalance": "5
-0004c4d0: 3038 362e 3535 3832 3530 3032 222c 0a20  086.55825002",. 
-0004c4e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004c4f0: 2020 2020 2020 2020 2020 2020 2022 6375               "cu
-0004c500: 7272 656e 6379 223a 2022 5553 4454 222c  rrency": "USDT",
-0004c510: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004c520: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0004c530: 6361 7465 676f 7279 223a 2022 6c69 6e65  category": "line
-0004c540: 6172 222c 0a20 2020 2020 2020 2023 2020  ar",.        #  
-0004c550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004c560: 2020 2022 7472 6164 6550 7269 6365 223a     "tradePrice":
-0004c570: 2022 302e 3336 3736 222c 0a20 2020 2020   "0.3676",.     
-0004c580: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0004c590: 2020 2020 2020 2020 2022 7472 6164 6549           "tradeI
-0004c5a0: 6422 3a20 2235 3334 6330 3030 332d 3462  d": "534c0003-4b
-0004c5b0: 6637 2d34 3836 662d 6161 3032 2d37 3863  f7-486f-aa02-78c
-0004c5c0: 6565 3336 3832 3565 3422 0a20 2020 2020  ee36825e4".     
-0004c5d0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0004c5e0: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
-0004c5f0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004c600: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-0004c610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004c620: 2020 2273 796d 626f 6c22 3a20 2258 5250    "symbol": "XRP
-0004c630: 5553 4454 222c 0a20 2020 2020 2020 2023  USDT",.        #
-0004c640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004c650: 2020 2020 2022 7369 6465 223a 2022 4275       "side": "Bu
-0004c660: 7922 2c0a 2020 2020 2020 2020 2320 2020  y",.        #   
-0004c670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004c680: 2020 2266 756e 6469 6e67 223a 2022 222c    "funding": "",
-0004c690: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004c6a0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0004c6b0: 6f72 6465 724c 696e 6b49 6422 3a20 226c  orderLinkId": "l
-0004c6c0: 696e 6561 722d 6f72 6465 7222 2c0a 2020  inear-order",.  
-0004c6d0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004c6e0: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
-0004c6f0: 6572 4964 223a 2022 3539 3262 3765 3431  erId": "592b7e41
-0004c700: 2d37 3866 642d 3432 6532 2d39 6161 332d  -78fd-42e2-9aa3-
-0004c710: 3931 6531 3833 3565 6633 6531 222c 0a20  91e1835ef3e1",. 
-0004c720: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004c730: 2020 2020 2020 2020 2020 2020 2022 6665               "fe
-0004c740: 6522 3a20 2230 2e30 3139 3038 3732 3022  e": "0.01908720"
-0004c750: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004c760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004c770: 2263 6861 6e67 6522 3a20 222d 302e 3031  "change": "-0.01
-0004c780: 3930 3837 3222 2c0a 2020 2020 2020 2020  90872",.        
-0004c790: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004c7a0: 2020 2020 2020 2263 6173 6846 6c6f 7722        "cashFlow"
-0004c7b0: 3a20 2230 222c 0a20 2020 2020 2020 2023  : "0",.        #
-0004c7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004c7d0: 2020 2020 2022 7472 616e 7361 6374 696f       "transactio
-0004c7e0: 6e54 696d 6522 3a20 2231 3637 3231 3231  nTime": "1672121
-0004c7f0: 3138 3232 3234 222c 0a20 2020 2020 2020  182224",.       
-0004c800: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004c810: 2020 2020 2020 2022 7479 7065 223a 2022         "type": "
-0004c820: 5452 4144 4522 2c0a 2020 2020 2020 2020  TRADE",.        
-0004c830: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004c840: 2020 2020 2020 2266 6565 5261 7465 223a        "feeRate":
-0004c850: 2022 302e 3030 3036 222c 0a20 2020 2020   "0.0006",.     
-0004c860: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0004c870: 2020 2020 2020 2020 2022 7369 7a65 223a           "size":
-0004c880: 2022 3130 3022 2c0a 2020 2020 2020 2020   "100",.        
-0004c890: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004c8a0: 2020 2020 2020 2271 7479 223a 2022 3838        "qty": "88
-0004c8b0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004c8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004c8d0: 2022 6361 7368 4261 6c61 6e63 6522 3a20   "cashBalance": 
-0004c8e0: 2235 3038 362e 3536 3139 3236 3032 222c  "5086.56192602",
-0004c8f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004c900: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0004c910: 6375 7272 656e 6379 223a 2022 5553 4454  currency": "USDT
-0004c920: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00045d70: 2020 2020 2022 7265 7375 6c74 223a 207b       "result": {
+00045d80: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00045d90: 2020 2020 2020 2022 6e65 7874 5061 6765         "nextPage
+00045da0: 4375 7273 6f72 223a 2022 3135 3635 2533  Cursor": "1565%3
+00045db0: 4130 2532 4331 3536 3525 3341 3022 2c0a  A0%2C1565%3A0",.
+00045dc0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00045dd0: 2020 2020 2020 2263 6174 6567 6f72 7922        "category"
+00045de0: 3a20 226f 7074 696f 6e22 2c0a 2020 2020  : "option",.    
+00045df0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00045e00: 2020 226c 6973 7422 3a20 5b0a 2020 2020    "list": [.    
+00045e10: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00045e20: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
+00045e30: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00045e40: 2020 2020 2020 226f 7264 6572 5479 7065        "orderType
+00045e50: 223a 2022 4c69 6d69 7422 2c0a 2020 2020  ": "Limit",.    
+00045e60: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00045e70: 2020 2020 2020 2020 2020 2273 796d 626f            "symbo
+00045e80: 6c22 3a20 2242 5443 2d31 344a 554c 3232  l": "BTC-14JUL22
+00045e90: 2d31 3735 3030 2d43 222c 0a20 2020 2020  -17500-C",.     
+00045ea0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00045eb0: 2020 2020 2020 2020 2022 6f72 6465 724c           "orderL
+00045ec0: 696e 6b49 6422 3a20 2231 3838 3838 3936  inkId": "1888896
+00045ed0: 3839 2d79 7561 6e7a 6865 6e2d 3535 3839  89-yuanzhen-5589
+00045ee0: 3938 3939 3838 3939 222c 0a20 2020 2020  98998899",.     
+00045ef0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00045f00: 2020 2020 2020 2020 2022 7369 6465 223a           "side":
+00045f10: 2022 4275 7922 2c0a 2020 2020 2020 2020   "Buy",.        
+00045f20: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00045f30: 2020 2020 2020 226f 7264 6572 4964 223a        "orderId":
+00045f40: 2022 3039 6335 3833 3666 2d38 3165 662d   "09c5836f-81ef-
+00045f50: 3432 3038 2d61 3562 342d 3433 3133 3564  4208-a5b4-43135d
+00045f60: 3365 3032 6132 222c 0a20 2020 2020 2020  3e02a2",.       
+00045f70: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00045f80: 2020 2020 2020 2022 6c65 6176 6573 5174         "leavesQt
+00045f90: 7922 3a20 2230 2e30 3030 3022 2c0a 2020  y": "0.0000",.  
+00045fa0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00045fb0: 2020 2020 2020 2020 2020 2020 2265 7865              "exe
+00045fc0: 6354 696d 6522 3a20 3136 3537 3731 3431  cTime": 16577141
+00045fd0: 3232 3431 372c 0a20 2020 2020 2020 2023  22417,.        #
+00045fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045ff0: 2020 2020 2022 6578 6563 4665 6522 3a20       "execFee": 
+00046000: 2230 2e31 3138 3937 3038 3222 2c0a 2020  "0.11897082",.  
+00046010: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00046020: 2020 2020 2020 2020 2020 2020 2266 6565              "fee
+00046030: 5261 7465 223a 2022 302e 3030 3033 3030  Rate": "0.000300
+00046040: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00046050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046060: 2022 6578 6563 4964 223a 2022 3665 3439   "execId": "6e49
+00046070: 3235 3630 2d37 3862 342d 3564 3262 2d62  2560-78b4-5d2b-b
+00046080: 3333 312d 3232 3932 3164 3331 3733 6339  331-22921d3173c9
+00046090: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+000460a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000460b0: 2022 626c 6f63 6b54 7261 6465 4964 223a   "blockTradeId":
+000460c0: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
+000460d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000460e0: 2020 2022 6578 6563 5072 6963 6522 3a20     "execPrice": 
+000460f0: 2232 3336 302e 3030 3030 3030 3030 222c  "2360.00000000",
+00046100: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00046110: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00046120: 6c61 7374 4c69 7175 6964 6974 7949 6e64  lastLiquidityInd
+00046130: 223a 2022 5441 4b45 5222 2c0a 2020 2020  ": "TAKER",.    
+00046140: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00046150: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+00046160: 5174 7922 3a20 2230 2e30 3230 3022 2c0a  Qty": "0.0200",.
+00046170: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00046180: 2020 2020 2020 2020 2020 2020 2020 226f                "o
+00046190: 7264 6572 5072 6963 6522 3a20 2232 3336  rderPrice": "236
+000461a0: 302e 3030 3030 3030 3030 222c 0a20 2020  0.00000000",.   
+000461b0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+000461c0: 2020 2020 2020 2020 2020 2022 6578 6563             "exec
+000461d0: 5661 6c75 6522 3a20 2234 372e 3230 3030  Value": "47.2000
+000461e0: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
+000461f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046200: 2020 2020 2022 6578 6563 5479 7065 223a       "execType":
+00046210: 2022 5472 6164 6522 2c0a 2020 2020 2020   "Trade",.      
+00046220: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00046230: 2020 2020 2020 2020 2265 7865 6351 7479          "execQty
+00046240: 223a 2022 302e 3032 3030 220a 2020 2020  ": "0.0200".    
+00046250: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00046260: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00046270: 2320 2020 2020 2020 2020 2020 2020 5d0a  #             ].
+00046280: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00046290: 2020 7d2c 0a20 2020 2020 2020 2023 2020    },.        #  
+000462a0: 2020 2020 2020 2022 7469 6d65 223a 2031         "time": 1
+000462b0: 3635 3737 3134 3239 3237 3833 0a20 2020  657714292783.   
+000462c0: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
+000462d0: 2020 2020 2023 0a20 2020 2020 2020 2072       #.        r
+000462e0: 6573 756c 7420 3d20 7365 6c66 2e73 6166  esult = self.saf
+000462f0: 655f 7661 6c75 6528 7265 7370 6f6e 7365  e_value(response
+00046300: 2c20 2772 6573 756c 7427 2c20 7b7d 290a  , 'result', {}).
+00046310: 2020 2020 2020 2020 7472 6164 6573 203d          trades =
+00046320: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+00046330: 2872 6573 756c 742c 2027 6c69 7374 272c  (result, 'list',
+00046340: 205b 5d29 0a20 2020 2020 2020 2072 6574   []).        ret
+00046350: 7572 6e20 7365 6c66 2e70 6172 7365 5f74  urn self.parse_t
+00046360: 7261 6465 7328 7472 6164 6573 2c20 6d61  rades(trades, ma
+00046370: 726b 6574 2c20 7369 6e63 652c 206c 696d  rket, since, lim
+00046380: 6974 290a 0a20 2020 2064 6566 2066 6574  it)..    def fet
+00046390: 6368 5f6d 795f 636f 6e74 7261 6374 5f74  ch_my_contract_t
+000463a0: 7261 6465 7328 7365 6c66 2c20 7379 6d62  rades(self, symb
+000463b0: 6f6c 3a20 4f70 7469 6f6e 616c 5b73 7472  ol: Optional[str
+000463c0: 5d20 3d20 4e6f 6e65 2c20 7369 6e63 653a  ] = None, since:
+000463d0: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
+000463e0: 204e 6f6e 652c 206c 696d 6974 3a20 4f70   None, limit: Op
+000463f0: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
+00046400: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
+00046410: 2020 2020 2020 2020 6966 2073 796d 626f          if symbo
+00046420: 6c20 6973 204e 6f6e 653a 0a20 2020 2020  l is None:.     
+00046430: 2020 2020 2020 2072 6169 7365 2041 7267         raise Arg
+00046440: 756d 656e 7473 5265 7175 6972 6564 2873  umentsRequired(s
+00046450: 656c 662e 6964 202b 2027 2066 6574 6368  elf.id + ' fetch
+00046460: 4d79 436f 6e74 7261 6374 5472 6164 6573  MyContractTrades
+00046470: 2829 2072 6571 7569 7265 7320 6120 7379  () requires a sy
+00046480: 6d62 6f6c 2061 7267 756d 656e 7427 290a  mbol argument').
+00046490: 2020 2020 2020 2020 7365 6c66 2e6c 6f61          self.loa
+000464a0: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
+000464b0: 2020 2020 6d61 726b 6574 203d 204e 6f6e      market = Non
+000464c0: 650a 2020 2020 2020 2020 7265 7175 6573  e.        reques
+000464d0: 7420 3d20 7b0a 2020 2020 2020 2020 2020  t = {.          
+000464e0: 2020 2320 2773 796d 626f 6c27 3a20 6d61    # 'symbol': ma
+000464f0: 726b 6574 5b27 6964 275d 2c0a 2020 2020  rket['id'],.    
+00046500: 2020 2020 2020 2020 2320 2763 6174 6567          # 'categ
+00046510: 6f72 7927 3a20 2727 2c20 2023 2050 726f  ory': '',  # Pro
+00046520: 6475 6374 2074 7970 652e 2073 706f 742c  duct type. spot,
+00046530: 6c69 6e65 6172 2c6f 7074 696f 6e0a 2020  linear,option.  
+00046540: 2020 2020 2020 2020 2020 2320 276f 7264            # 'ord
+00046550: 6572 4964 273a 2027 272c 2020 2320 4f72  erId': '',  # Or
+00046560: 6465 7220 4944 0a20 2020 2020 2020 2020  der ID.         
+00046570: 2020 2023 2027 6f72 6465 724c 696e 6b49     # 'orderLinkI
+00046580: 6427 3a20 2727 2c20 2023 2055 7365 7220  d': '',  # User 
+00046590: 6375 7374 6f6d 6973 6564 206f 7264 6572  customised order
+000465a0: 2049 440a 2020 2020 2020 2020 2020 2020   ID.            
+000465b0: 2320 2762 6173 6543 6f69 6e27 3a20 2727  # 'baseCoin': ''
+000465c0: 2c20 2023 2042 6173 6520 636f 696e 0a20  ,  # Base coin. 
+000465d0: 2020 2020 2020 2020 2020 2023 2027 7374             # 'st
+000465e0: 6172 7454 696d 6527 3a20 302c 2020 2320  artTime': 0,  # 
+000465f0: 5468 6520 7374 6172 7420 7469 6d65 7374  The start timest
+00046600: 616d 7028 6d73 290a 2020 2020 2020 2020  amp(ms).        
+00046610: 2020 2020 2320 2765 6e64 5469 6d65 273a      # 'endTime':
+00046620: 2030 2c20 2023 2054 6865 2065 6e64 2074   0,  # The end t
+00046630: 696d 6573 7461 6d70 286d 7329 0a20 2020  imestamp(ms).   
+00046640: 2020 2020 2020 2020 2023 2027 6578 6563           # 'exec
+00046650: 5479 7065 273a 2027 272c 2020 2320 4578  Type': '',  # Ex
+00046660: 6563 7574 696f 6e20 7479 7065 0a20 2020  ecution type.   
+00046670: 2020 2020 2020 2020 2023 2027 6c69 6d69           # 'limi
+00046680: 7427 3a20 302c 2020 2320 4c69 6d69 7420  t': 0,  # Limit 
+00046690: 666f 7220 6461 7461 2073 697a 6520 7065  for data size pe
+000466a0: 7220 7061 6765 2e20 5b31 2c20 3130 305d  r page. [1, 100]
+000466b0: 2e20 4465 6661 756c 743a 2035 300a 2020  . Default: 50.  
+000466c0: 2020 2020 2020 2020 2020 2320 2763 7572            # 'cur
+000466d0: 736f 7227 3a20 2727 2c20 2023 2043 7572  sor': '',  # Cur
+000466e0: 736f 722e 2055 7365 6420 666f 7220 7061  sor. Used for pa
+000466f0: 6769 6e61 7469 6f6e 0a20 2020 2020 2020  gination.       
+00046700: 207d 0a20 2020 2020 2020 2069 6620 7379   }.        if sy
+00046710: 6d62 6f6c 2069 7320 6e6f 7420 4e6f 6e65  mbol is not None
+00046720: 3a0a 2020 2020 2020 2020 2020 2020 6d61  :.            ma
+00046730: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
+00046740: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
+00046750: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+00046760: 7379 6d62 6f6c 275d 203d 206d 6172 6b65  symbol'] = marke
+00046770: 745b 2769 6427 5d0a 2020 2020 2020 2020  t['id'].        
+00046780: 7375 6254 7970 6520 3d20 4e6f 6e65 0a20  subType = None. 
+00046790: 2020 2020 2020 2073 7562 5479 7065 2c20         subType, 
+000467a0: 7061 7261 6d73 203d 2073 656c 662e 6861  params = self.ha
+000467b0: 6e64 6c65 5f73 7562 5f74 7970 655f 616e  ndle_sub_type_an
+000467c0: 645f 7061 7261 6d73 2827 6665 7463 684d  d_params('fetchM
+000467d0: 7954 7261 6465 7327 2c20 6d61 726b 6574  yTrades', market
+000467e0: 2c20 7061 7261 6d73 290a 2020 2020 2020  , params).      
+000467f0: 2020 7265 7175 6573 745b 2763 6174 6567    request['categ
+00046800: 6f72 7927 5d20 3d20 7375 6254 7970 650a  ory'] = subType.
+00046810: 2020 2020 2020 2020 6966 2073 696e 6365          if since
+00046820: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00046830: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+00046840: 745b 2773 7461 7274 5469 6d65 275d 203d  t['startTime'] =
+00046850: 2073 696e 6365 0a20 2020 2020 2020 2069   since.        i
+00046860: 6620 6c69 6d69 7420 6973 206e 6f74 204e  f limit is not N
+00046870: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00046880: 2072 6571 7565 7374 5b27 6c69 6d69 7427   request['limit'
+00046890: 5d20 3d20 6c69 6d69 7420 2023 2064 6566  ] = limit  # def
+000468a0: 6175 6c74 2035 302c 206d 6178 2031 3030  ault 50, max 100
+000468b0: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
+000468c0: 6520 3d20 7365 6c66 2e70 7269 7661 7465  e = self.private
+000468d0: 4765 7456 3545 7865 6375 7469 6f6e 4c69  GetV5ExecutionLi
+000468e0: 7374 2873 656c 662e 6578 7465 6e64 2872  st(self.extend(r
+000468f0: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
+00046900: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+00046910: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
+00046920: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+00046930: 7443 6f64 6522 3a20 302c 0a20 2020 2020  tCode": 0,.     
+00046940: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+00046950: 744d 7367 223a 2022 4f4b 222c 0a20 2020  tMsg": "OK",.   
+00046960: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00046970: 7265 7375 6c74 223a 207b 0a20 2020 2020  result": {.     
+00046980: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00046990: 2022 6e65 7874 5061 6765 4375 7273 6f72   "nextPageCursor
+000469a0: 223a 2022 3133 3237 3636 2533 4132 2532  ": "132766%3A2%2
+000469b0: 4331 3332 3736 3625 3341 3222 2c0a 2020  C132766%3A2",.  
+000469c0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000469d0: 2020 2020 2263 6174 6567 6f72 7922 3a20      "category": 
+000469e0: 226c 696e 6561 7222 2c0a 2020 2020 2020  "linear",.      
+000469f0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00046a00: 226c 6973 7422 3a20 5b0a 2020 2020 2020  "list": [.      
+00046a10: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00046a20: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+00046a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046a40: 2020 2020 2273 796d 626f 6c22 3a20 2245      "symbol": "E
+00046a50: 5448 5045 5250 222c 0a20 2020 2020 2020  THPERP",.       
+00046a60: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00046a70: 2020 2020 2020 2022 6f72 6465 7254 7970         "orderTyp
+00046a80: 6522 3a20 224d 6172 6b65 7422 2c0a 2020  e": "Market",.  
+00046a90: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00046aa0: 2020 2020 2020 2020 2020 2020 2275 6e64              "und
+00046ab0: 6572 6c79 696e 6750 7269 6365 223a 2022  erlyingPrice": "
+00046ac0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00046ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046ae0: 2022 6f72 6465 724c 696e 6b49 6422 3a20   "orderLinkId": 
+00046af0: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
+00046b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046b10: 2020 2273 6964 6522 3a20 2242 7579 222c    "side": "Buy",
+00046b20: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00046b30: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00046b40: 696e 6465 7850 7269 6365 223a 2022 222c  indexPrice": "",
+00046b50: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00046b60: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00046b70: 6f72 6465 7249 6422 3a20 2238 6330 3635  orderId": "8c065
+00046b80: 3334 312d 3762 3532 2d34 6361 392d 6163  341-7b52-4ca9-ac
+00046b90: 3263 2d33 3765 3331 6163 3535 6339 3422  2c-37e31ac55c94"
+00046ba0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00046bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046bc0: 2273 746f 704f 7264 6572 5479 7065 223a  "stopOrderType":
+00046bd0: 2022 554e 4b4e 4f57 4e22 2c0a 2020 2020   "UNKNOWN",.    
+00046be0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00046bf0: 2020 2020 2020 2020 2020 226c 6561 7665            "leave
+00046c00: 7351 7479 223a 2022 3022 2c0a 2020 2020  sQty": "0",.    
+00046c10: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00046c20: 2020 2020 2020 2020 2020 2265 7865 6354            "execT
+00046c30: 696d 6522 3a20 2231 3637 3232 3832 3732  ime": "167228272
+00046c40: 3234 3239 222c 0a20 2020 2020 2020 2023  2429",.        #
+00046c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046c60: 2020 2020 2022 6973 4d61 6b65 7222 3a20       "isMaker": 
+00046c70: 4661 6c73 652c 0a20 2020 2020 2020 2023  False,.        #
+00046c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046c90: 2020 2020 2022 6578 6563 4665 6522 3a20       "execFee": 
+00046ca0: 2230 2e30 3731 3430 3922 2c0a 2020 2020  "0.071409",.    
+00046cb0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00046cc0: 2020 2020 2020 2020 2020 2266 6565 5261            "feeRa
+00046cd0: 7465 223a 2022 302e 3030 3036 222c 0a20  te": "0.0006",. 
+00046ce0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00046cf0: 2020 2020 2020 2020 2020 2020 2022 6578               "ex
+00046d00: 6563 4964 223a 2022 6530 6362 6538 3164  ecId": "e0cbe81d
+00046d10: 2d30 6631 382d 3538 3636 2d39 3431 352d  -0f18-5866-9415-
+00046d20: 6366 3331 3962 3564 6162 3362 222c 0a20  cf319b5dab3b",. 
+00046d30: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00046d40: 2020 2020 2020 2020 2020 2020 2022 7472               "tr
+00046d50: 6164 6549 7622 3a20 2222 2c0a 2020 2020  adeIv": "",.    
+00046d60: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00046d70: 2020 2020 2020 2020 2020 2262 6c6f 636b            "block
+00046d80: 5472 6164 6549 6422 3a20 2222 2c0a 2020  TradeId": "",.  
+00046d90: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00046da0: 2020 2020 2020 2020 2020 2020 226d 6172              "mar
+00046db0: 6b50 7269 6365 223a 2022 3131 3833 2e35  kPrice": "1183.5
+00046dc0: 3422 2c0a 2020 2020 2020 2020 2320 2020  4",.        #   
+00046dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046de0: 2020 2265 7865 6350 7269 6365 223a 2022    "execPrice": "
+00046df0: 3131 3930 2e31 3522 2c0a 2020 2020 2020  1190.15",.      
+00046e00: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00046e10: 2020 2020 2020 2020 226d 6172 6b49 7622          "markIv"
+00046e20: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
+00046e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046e40: 2020 2020 226f 7264 6572 5174 7922 3a20      "orderQty": 
+00046e50: 2230 2e31 222c 0a20 2020 2020 2020 2023  "0.1",.        #
+00046e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046e70: 2020 2020 2022 6f72 6465 7250 7269 6365       "orderPrice
+00046e80: 223a 2022 3132 3336 2e39 222c 0a20 2020  ": "1236.9",.   
+00046e90: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00046ea0: 2020 2020 2020 2020 2020 2022 6578 6563             "exec
+00046eb0: 5661 6c75 6522 3a20 2231 3139 2e30 3135  Value": "119.015
+00046ec0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00046ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046ee0: 2022 6578 6563 5479 7065 223a 2022 5472   "execType": "Tr
+00046ef0: 6164 6522 2c0a 2020 2020 2020 2020 2320  ade",.        # 
+00046f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046f10: 2020 2020 2265 7865 6351 7479 223a 2022      "execQty": "
+00046f20: 302e 3122 0a20 2020 2020 2020 2023 2020  0.1".        #  
+00046f30: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+00046f40: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00046f50: 2020 2020 2020 205d 0a20 2020 2020 2020         ].       
+00046f60: 2023 2020 2020 2020 2020 207d 2c0a 2020   #         },.  
+00046f70: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00046f80: 2272 6574 4578 7449 6e66 6f22 3a20 7b7d  "retExtInfo": {}
+00046f90: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00046fa0: 2020 2020 2274 696d 6522 3a20 3136 3732      "time": 1672
+00046fb0: 3238 3337 3534 3531 300a 2020 2020 2020  283754510.      
+00046fc0: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
+00046fd0: 2020 230a 2020 2020 2020 2020 7265 7375    #.        resu
+00046fe0: 6c74 203d 2073 656c 662e 7361 6665 5f76  lt = self.safe_v
+00046ff0: 616c 7565 2872 6573 706f 6e73 652c 2027  alue(response, '
+00047000: 7265 7375 6c74 272c 207b 7d29 0a20 2020  result', {}).   
+00047010: 2020 2020 2074 7261 6465 7320 3d20 7365       trades = se
+00047020: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
+00047030: 7375 6c74 2c20 276c 6973 7427 2c20 5b5d  sult, 'list', []
+00047040: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00047050: 2073 656c 662e 7061 7273 655f 7472 6164   self.parse_trad
+00047060: 6573 2874 7261 6465 732c 206d 6172 6b65  es(trades, marke
+00047070: 742c 2073 696e 6365 2c20 6c69 6d69 7429  t, since, limit)
+00047080: 0a0a 2020 2020 6465 6620 6665 7463 685f  ..    def fetch_
+00047090: 6d79 5f75 7364 635f 7472 6164 6573 2873  my_usdc_trades(s
+000470a0: 656c 662c 2073 796d 626f 6c3a 204f 7074  elf, symbol: Opt
+000470b0: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
+000470c0: 652c 2073 696e 6365 3a20 4f70 7469 6f6e  e, since: Option
+000470d0: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c20  al[int] = None, 
+000470e0: 6c69 6d69 743a 204f 7074 696f 6e61 6c5b  limit: Optional[
+000470f0: 696e 745d 203d 204e 6f6e 652c 2070 6172  int] = None, par
+00047100: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
+00047110: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
+00047120: 7473 2829 0a20 2020 2020 2020 206d 6172  ts().        mar
+00047130: 6b65 7420 3d20 4e6f 6e65 0a20 2020 2020  ket = None.     
+00047140: 2020 2072 6571 7565 7374 203d 207b 7d0a     request = {}.
+00047150: 2020 2020 2020 2020 6966 2073 796d 626f          if symbo
+00047160: 6c20 6973 206e 6f74 204e 6f6e 653a 0a20  l is not None:. 
+00047170: 2020 2020 2020 2020 2020 206d 6172 6b65             marke
+00047180: 7420 3d20 7365 6c66 2e6d 6172 6b65 7428  t = self.market(
+00047190: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
+000471a0: 2020 2020 7265 7175 6573 745b 2773 796d      request['sym
+000471b0: 626f 6c27 5d20 3d20 6d61 726b 6574 5b27  bol'] = market['
+000471c0: 6964 275d 0a20 2020 2020 2020 2020 2020  id'].           
+000471d0: 2072 6571 7565 7374 5b27 6361 7465 676f   request['catego
+000471e0: 7279 275d 203d 2027 4f50 5449 4f4e 2720  ry'] = 'OPTION' 
+000471f0: 6966 206d 6172 6b65 745b 276f 7074 696f  if market['optio
+00047200: 6e27 5d20 656c 7365 2027 5045 5250 4554  n'] else 'PERPET
+00047210: 5541 4c27 0a20 2020 2020 2020 2065 6c73  UAL'.        els
+00047220: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+00047230: 6571 7565 7374 5b27 6361 7465 676f 7279  equest['category
+00047240: 275d 203d 2027 5045 5250 4554 5541 4c27  '] = 'PERPETUAL'
+00047250: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
+00047260: 6520 3d20 7365 6c66 2e70 7269 7661 7465  e = self.private
+00047270: 506f 7374 4f70 7469 6f6e 5573 6463 4f70  PostOptionUsdcOp
+00047280: 656e 6170 6950 7269 7661 7465 5631 4578  enapiPrivateV1Ex
+00047290: 6563 7574 696f 6e4c 6973 7428 7365 6c66  ecutionList(self
+000472a0: 2e65 7874 656e 6428 7265 7175 6573 742c  .extend(request,
+000472b0: 2070 6172 616d 7329 290a 2020 2020 2020   params)).      
+000472c0: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
+000472d0: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+000472e0: 2020 2020 2272 6573 756c 7422 3a20 7b0a      "result": {.
+000472f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00047300: 2020 2263 7572 736f 7222 3a20 2232 3925    "cursor": "29%
+00047310: 3341 3125 3243 3238 2533 4131 222c 0a20  3A1%2C28%3A1",. 
+00047320: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00047330: 2022 7265 7375 6c74 546f 7461 6c53 697a   "resultTotalSiz
+00047340: 6522 3a20 322c 0a20 2020 2020 2020 2023  e": 2,.        #
+00047350: 2020 2020 2020 2020 2022 6461 7461 4c69           "dataLi
+00047360: 7374 223a 205b 0a20 2020 2020 2020 2023  st": [.        #
+00047370: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+00047380: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00047390: 2020 2022 7379 6d62 6f6c 223a 2022 4554     "symbol": "ET
+000473a0: 4850 4552 5022 2c0a 2020 2020 2020 2020  HPERP",.        
+000473b0: 2320 2020 2020 2020 2020 2020 2020 226f  #             "o
+000473c0: 7264 6572 4c69 6e6b 4964 223a 2022 222c  rderLinkId": "",
+000473d0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000473e0: 2020 2020 2020 2022 7369 6465 223a 2022         "side": "
+000473f0: 5365 6c6c 222c 0a20 2020 2020 2020 2023  Sell",.        #
+00047400: 2020 2020 2020 2020 2020 2020 2022 6f72               "or
+00047410: 6465 7249 6422 3a20 2264 3833 6638 6234  derId": "d83f8b4
+00047420: 642d 3266 3630 2d34 6530 342d 6136 3461  d-2f60-4e04-a64a
+00047430: 2d61 3366 3230 3739 3839 6463 3622 2c0a  -a3f207989dc6",.
+00047440: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00047450: 2020 2020 2020 2265 7865 6346 6565 223a        "execFee":
+00047460: 2022 302e 3032 3130 222c 0a20 2020 2020   "0.0210",.     
+00047470: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00047480: 2022 6665 6552 6174 6522 3a20 2230 2e30   "feeRate": "0.0
+00047490: 3030 3630 3022 2c0a 2020 2020 2020 2020  00600",.        
+000474a0: 2320 2020 2020 2020 2020 2020 2020 2262  #             "b
+000474b0: 6c6f 636b 5472 6164 6549 6422 3a20 2222  lockTradeId": ""
+000474c0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000474d0: 2020 2020 2020 2020 2274 7261 6465 5469          "tradeTi
+000474e0: 6d65 223a 2022 3136 3639 3139 3634 3233  me": "1669196423
+000474f0: 3538 3122 2c0a 2020 2020 2020 2020 2320  581",.        # 
+00047500: 2020 2020 2020 2020 2020 2020 2265 7865              "exe
+00047510: 6350 7269 6365 223a 2022 3131 3631 2e34  cPrice": "1161.4
+00047520: 3522 2c0a 2020 2020 2020 2020 2320 2020  5",.        #   
+00047530: 2020 2020 2020 2020 2020 226c 6173 744c            "lastL
+00047540: 6971 7569 6469 7479 496e 6422 3a20 2254  iquidityInd": "T
+00047550: 414b 4552 222c 0a20 2020 2020 2020 2023  AKER",.        #
+00047560: 2020 2020 2020 2020 2020 2020 2022 6578               "ex
+00047570: 6563 5661 6c75 6522 3a20 2233 342e 3834  ecValue": "34.84
+00047580: 3335 222c 0a20 2020 2020 2020 2023 2020  35",.        #  
+00047590: 2020 2020 2020 2020 2020 2022 6578 6563             "exec
+000475a0: 5479 7065 223a 2022 5472 6164 6522 2c0a  Type": "Trade",.
+000475b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000475c0: 2020 2020 2020 2265 7865 6351 7479 223a        "execQty":
+000475d0: 2022 302e 3033 3022 2c0a 2020 2020 2020   "0.030",.      
+000475e0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+000475f0: 2274 7261 6465 4964 223a 2022 6439 6161  "tradeId": "d9aa
+00047600: 3835 3930 2d39 6536 612d 3537 3565 2d61  8590-9e6a-575e-a
+00047610: 3162 652d 6436 3236 3165 3665 6432 6535  1be-d6261e6ed2e5
+00047620: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
+00047630: 2020 2020 2020 7d2c 202e 2e2e 0a20 2020        }, ....   
+00047640: 2020 2020 2023 2020 2020 2020 2020 205d       #         ]
+00047650: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00047660: 207d 2c0a 2020 2020 2020 2020 2320 2020   },.        #   
+00047670: 2020 2020 2272 6574 436f 6465 223a 2030      "retCode": 0
+00047680: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00047690: 2020 2272 6574 4d73 6722 3a20 2253 7563    "retMsg": "Suc
+000476a0: 6365 7373 2e22 0a20 2020 2020 2020 2023  cess.".        #
+000476b0: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+000476c0: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
+000476d0: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+000476e0: 6528 7265 7370 6f6e 7365 2c20 2772 6573  e(response, 'res
+000476f0: 756c 7427 2c20 7b7d 290a 2020 2020 2020  ult', {}).      
+00047700: 2020 6461 7461 4c69 7374 203d 2073 656c    dataList = sel
+00047710: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
+00047720: 756c 742c 2027 6461 7461 4c69 7374 272c  ult, 'dataList',
+00047730: 205b 5d29 0a20 2020 2020 2020 2072 6574   []).        ret
+00047740: 7572 6e20 7365 6c66 2e70 6172 7365 5f74  urn self.parse_t
+00047750: 7261 6465 7328 6461 7461 4c69 7374 2c20  rades(dataList, 
+00047760: 6d61 726b 6574 2c20 7369 6e63 652c 206c  market, since, l
+00047770: 696d 6974 290a 0a20 2020 2064 6566 2066  imit)..    def f
+00047780: 6574 6368 5f6d 795f 7472 6164 6573 2873  etch_my_trades(s
+00047790: 656c 662c 2073 796d 626f 6c3a 204f 7074  elf, symbol: Opt
+000477a0: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
+000477b0: 652c 2073 696e 6365 3a20 4f70 7469 6f6e  e, since: Option
+000477c0: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c20  al[int] = None, 
+000477d0: 6c69 6d69 743a 204f 7074 696f 6e61 6c5b  limit: Optional[
+000477e0: 696e 745d 203d 204e 6f6e 652c 2070 6172  int] = None, par
+000477f0: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
+00047800: 2022 2222 0a20 2020 2020 2020 2066 6574   """.        fet
+00047810: 6368 2061 6c6c 2074 7261 6465 7320 6d61  ch all trades ma
+00047820: 6465 2062 7920 7468 6520 7573 6572 0a20  de by the user. 
+00047830: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
+00047840: 7220 7379 6d62 6f6c 3a20 756e 6966 6965  r symbol: unifie
+00047850: 6420 6d61 726b 6574 2073 796d 626f 6c0a  d market symbol.
+00047860: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+00047870: 6e74 7c4e 6f6e 6520 7369 6e63 653a 2074  nt|None since: t
+00047880: 6865 2065 6172 6c69 6573 7420 7469 6d65  he earliest time
+00047890: 2069 6e20 6d73 2074 6f20 6665 7463 6820   in ms to fetch 
+000478a0: 7472 6164 6573 2066 6f72 0a20 2020 2020  trades for.     
+000478b0: 2020 203a 7061 7261 6d20 696e 747c 4e6f     :param int|No
+000478c0: 6e65 206c 696d 6974 3a20 7468 6520 6d61  ne limit: the ma
+000478d0: 7869 6d75 6d20 6e75 6d62 6572 206f 6620  ximum number of 
+000478e0: 7472 6164 6573 2073 7472 7563 7475 7265  trades structure
+000478f0: 7320 746f 2072 6574 7269 6576 650a 2020  s to retrieve.  
+00047900: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
+00047910: 7420 7061 7261 6d73 3a20 6578 7472 6120  t params: extra 
+00047920: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
+00047930: 6669 6320 746f 2074 6865 2062 7962 6974  fic to the bybit
+00047940: 2061 7069 2065 6e64 706f 696e 740a 2020   api endpoint.  
+00047950: 2020 2020 2020 3a72 6574 7572 6e73 205b        :returns [
+00047960: 6469 6374 5d3a 2061 206c 6973 7420 6f66  dict]: a list of
+00047970: 2060 7472 6164 6520 7374 7275 6374 7572   `trade structur
+00047980: 6573 203c 6874 7470 733a 2f2f 646f 6373  es <https://docs
+00047990: 2e63 6378 742e 636f 6d2f 232f 3f69 643d  .ccxt.com/#/?id=
+000479a0: 7472 6164 652d 7374 7275 6374 7572 653e  trade-structure>
+000479b0: 600a 2020 2020 2020 2020 2222 220a 2020  `.        """.  
+000479c0: 2020 2020 2020 7365 6c66 2e6c 6f61 645f        self.load_
+000479d0: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
+000479e0: 2020 6d61 726b 6574 203d 204e 6f6e 650a    market = None.
+000479f0: 2020 2020 2020 2020 7365 7474 6c65 203d          settle =
+00047a00: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+00047a10: 6728 7061 7261 6d73 2c20 2773 6574 746c  g(params, 'settl
+00047a20: 6543 6f69 6e27 290a 2020 2020 2020 2020  eCoin').        
+00047a30: 6966 2073 6574 746c 6520 6973 204e 6f6e  if settle is Non
+00047a40: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
+00047a50: 6574 746c 652c 2070 6172 616d 7320 3d20  ettle, params = 
+00047a60: 7365 6c66 2e68 616e 646c 655f 6f70 7469  self.handle_opti
+00047a70: 6f6e 5f61 6e64 5f70 6172 616d 7328 7061  on_and_params(pa
+00047a80: 7261 6d73 2c20 2766 6574 6368 4d79 5472  rams, 'fetchMyTr
+00047a90: 6164 6573 272c 2027 7365 7474 6c65 272c  ades', 'settle',
+00047aa0: 2073 6574 746c 6529 0a20 2020 2020 2020   settle).       
+00047ab0: 2069 6620 7379 6d62 6f6c 2069 7320 6e6f   if symbol is no
+00047ac0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00047ad0: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
+00047ae0: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
+00047af0: 0a20 2020 2020 2020 2020 2020 2073 6574  .            set
+00047b00: 746c 6520 3d20 6d61 726b 6574 5b27 7365  tle = market['se
+00047b10: 7474 6c65 275d 0a20 2020 2020 2020 2073  ttle'].        s
+00047b20: 7562 5479 7065 203d 204e 6f6e 650a 2020  ubType = None.  
+00047b30: 2020 2020 2020 7375 6254 7970 652c 2070        subType, p
+00047b40: 6172 616d 7320 3d20 7365 6c66 2e68 616e  arams = self.han
+00047b50: 646c 655f 7375 625f 7479 7065 5f61 6e64  dle_sub_type_and
+00047b60: 5f70 6172 616d 7328 2766 6574 6368 4d79  _params('fetchMy
+00047b70: 5472 6164 6573 272c 206d 6172 6b65 742c  Trades', market,
+00047b80: 2070 6172 616d 7329 0a20 2020 2020 2020   params).       
+00047b90: 2069 7349 6e76 6572 7365 203d 2073 7562   isInverse = sub
+00047ba0: 5479 7065 203d 3d20 2769 6e76 6572 7365  Type == 'inverse
+00047bb0: 270a 2020 2020 2020 2020 6973 5573 6463  '.        isUsdc
+00047bc0: 5365 7474 6c65 6420 3d20 7365 7474 6c65  Settled = settle
+00047bd0: 203d 3d20 2755 5344 4327 0a20 2020 2020   == 'USDC'.     
+00047be0: 2020 2069 734c 696e 6561 7253 6574 746c     isLinearSettl
+00047bf0: 6520 3d20 6973 5573 6463 5365 7474 6c65  e = isUsdcSettle
+00047c00: 6420 6f72 2028 7365 7474 6c65 203d 3d20  d or (settle == 
+00047c10: 2755 5344 5427 290a 2020 2020 2020 2020  'USDT').        
+00047c20: 6966 2069 7349 6e76 6572 7365 2061 6e64  if isInverse and
+00047c30: 2069 734c 696e 6561 7253 6574 746c 653a   isLinearSettle:
+00047c40: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+00047c50: 7365 2041 7267 756d 656e 7473 5265 7175  se ArgumentsRequ
+00047c60: 6972 6564 2873 656c 662e 6964 202b 2027  ired(self.id + '
+00047c70: 2066 6574 6368 4d79 5472 6164 6573 2077   fetchMyTrades w
+00047c80: 6974 6820 696e 7665 7273 6520 7375 6254  ith inverse subT
+00047c90: 7970 6520 7265 7175 6972 6573 2073 6574  ype requires set
+00047ca0: 746c 6520 746f 206e 6f74 2062 6520 5553  tle to not be US
+00047cb0: 4454 206f 7220 5553 4443 2729 0a20 2020  DT or USDC').   
+00047cc0: 2020 2020 2074 7970 652c 2071 7565 7279       type, query
+00047cd0: 203d 2073 656c 662e 6861 6e64 6c65 5f6d   = self.handle_m
+00047ce0: 6172 6b65 745f 7479 7065 5f61 6e64 5f70  arket_type_and_p
+00047cf0: 6172 616d 7328 2766 6574 6368 4d79 5472  arams('fetchMyTr
+00047d00: 6164 6573 272c 206d 6172 6b65 742c 2070  ades', market, p
+00047d10: 6172 616d 7329 0a20 2020 2020 2020 2065  arams).        e
+00047d20: 6e61 626c 6555 6e69 6669 6564 4d61 7267  nableUnifiedMarg
+00047d30: 696e 2c20 656e 6162 6c65 556e 6966 6965  in, enableUnifie
+00047d40: 6441 6363 6f75 6e74 203d 2073 656c 662e  dAccount = self.
+00047d50: 6973 5f75 6e69 6669 6564 5f65 6e61 626c  is_unified_enabl
+00047d60: 6564 2829 0a20 2020 2020 2020 2069 6620  ed().        if 
+00047d70: 656e 6162 6c65 556e 6966 6965 6441 6363  enableUnifiedAcc
+00047d80: 6f75 6e74 2061 6e64 206e 6f74 2069 7349  ount and not isI
+00047d90: 6e76 6572 7365 3a0a 2020 2020 2020 2020  nverse:.        
+00047da0: 2020 2020 6f72 6465 7249 6420 3d20 7365      orderId = se
+00047db0: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
+00047dc0: 6172 616d 732c 2027 6f72 6465 7249 6427  arams, 'orderId'
+00047dd0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+00047de0: 206f 7264 6572 4964 2069 7320 4e6f 6e65   orderId is None
+00047df0: 2061 6e64 2074 7970 6520 213d 2027 7370   and type != 'sp
+00047e00: 6f74 273a 0a20 2020 2020 2020 2020 2020  ot':.           
+00047e10: 2020 2020 2073 656c 662e 6368 6563 6b5f       self.check_
+00047e20: 7265 7175 6972 6564 5f73 796d 626f 6c28  required_symbol(
+00047e30: 2766 6574 6368 4d79 5472 6164 6573 272c  'fetchMyTrades',
+00047e40: 2073 796d 626f 6c29 0a20 2020 2020 2020   symbol).       
+00047e50: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00047e60: 2e66 6574 6368 5f6d 795f 756e 6966 6965  .fetch_my_unifie
+00047e70: 645f 7472 6164 6573 2873 796d 626f 6c2c  d_trades(symbol,
+00047e80: 2073 696e 6365 2c20 6c69 6d69 742c 2071   since, limit, q
+00047e90: 7565 7279 290a 2020 2020 2020 2020 656c  uery).        el
+00047ea0: 6966 2074 7970 6520 3d3d 2027 7370 6f74  if type == 'spot
+00047eb0: 273a 0a20 2020 2020 2020 2020 2020 2072  ':.            r
+00047ec0: 6574 7572 6e20 7365 6c66 2e66 6574 6368  eturn self.fetch
+00047ed0: 5f6d 795f 7370 6f74 5f74 7261 6465 7328  _my_spot_trades(
+00047ee0: 7379 6d62 6f6c 2c20 7369 6e63 652c 206c  symbol, since, l
+00047ef0: 696d 6974 2c20 7175 6572 7929 0a20 2020  imit, query).   
+00047f00: 2020 2020 2065 6c69 6620 656e 6162 6c65       elif enable
+00047f10: 556e 6966 6965 644d 6172 6769 6e20 616e  UnifiedMargin an
+00047f20: 6420 6e6f 7420 6973 496e 7665 7273 653a  d not isInverse:
+00047f30: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00047f40: 7572 6e20 7365 6c66 2e66 6574 6368 5f6d  urn self.fetch_m
+00047f50: 795f 756e 6966 6965 645f 6d61 7267 696e  y_unified_margin
+00047f60: 5f74 7261 6465 7328 7379 6d62 6f6c 2c20  _trades(symbol, 
+00047f70: 7369 6e63 652c 206c 696d 6974 2c20 7175  since, limit, qu
+00047f80: 6572 7929 0a20 2020 2020 2020 2065 6c69  ery).        eli
+00047f90: 6620 6973 5573 6463 5365 7474 6c65 643a  f isUsdcSettled:
+00047fa0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00047fb0: 7572 6e20 7365 6c66 2e66 6574 6368 5f6d  urn self.fetch_m
+00047fc0: 795f 7573 6463 5f74 7261 6465 7328 7379  y_usdc_trades(sy
+00047fd0: 6d62 6f6c 2c20 7369 6e63 652c 206c 696d  mbol, since, lim
+00047fe0: 6974 2c20 7175 6572 7929 0a20 2020 2020  it, query).     
+00047ff0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00048000: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00048010: 2e66 6574 6368 5f6d 795f 636f 6e74 7261  .fetch_my_contra
+00048020: 6374 5f74 7261 6465 7328 7379 6d62 6f6c  ct_trades(symbol
+00048030: 2c20 7369 6e63 652c 206c 696d 6974 2c20  , since, limit, 
+00048040: 7175 6572 7929 0a0a 2020 2020 6465 6620  query)..    def 
+00048050: 7061 7273 655f 6465 706f 7369 745f 6164  parse_deposit_ad
+00048060: 6472 6573 7328 7365 6c66 2c20 6465 706f  dress(self, depo
+00048070: 7369 7441 6464 7265 7373 2c20 6375 7272  sitAddress, curr
+00048080: 656e 6379 3d4e 6f6e 6529 3a0a 2020 2020  ency=None):.    
+00048090: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+000480a0: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+000480b0: 2020 2020 2020 2020 6368 6169 6e54 7970          chainTyp
+000480c0: 653a 2027 4552 4332 3027 2c0a 2020 2020  e: 'ERC20',.    
+000480d0: 2020 2020 2320 2020 2020 2020 2020 6164      #         ad
+000480e0: 6472 6573 7344 6570 6f73 6974 3a20 2730  dressDeposit: '0
+000480f0: 7866 3536 3239 3763 3637 3137 6331 6431  xf56297c6717c1d1
+00048100: 6334 3263 3330 3332 3434 3638 6564 3530  c42c30324468ed50
+00048110: 6139 6237 3430 3265 6527 2c0a 2020 2020  a9b7402ee',.    
+00048120: 2020 2020 2320 2020 2020 2020 2020 7461      #         ta
+00048130: 6744 6570 6f73 6974 3a20 2727 2c0a 2020  gDeposit: '',.  
+00048140: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00048150: 6368 6169 6e3a 2027 4554 4827 0a20 2020  chain: 'ETH'.   
+00048160: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
+00048170: 2020 2020 2023 0a20 2020 2020 2020 2061       #.        a
+00048180: 6464 7265 7373 203d 2073 656c 662e 7361  ddress = self.sa
+00048190: 6665 5f73 7472 696e 6728 6465 706f 7369  fe_string(deposi
+000481a0: 7441 6464 7265 7373 2c20 2761 6464 7265  tAddress, 'addre
+000481b0: 7373 4465 706f 7369 7427 290a 2020 2020  ssDeposit').    
+000481c0: 2020 2020 7461 6720 3d20 7365 6c66 2e73      tag = self.s
+000481d0: 6166 655f 7374 7269 6e67 2864 6570 6f73  afe_string(depos
+000481e0: 6974 4164 6472 6573 732c 2027 7461 6744  itAddress, 'tagD
+000481f0: 6570 6f73 6974 2729 0a20 2020 2020 2020  eposit').       
+00048200: 2063 6f64 6520 3d20 7365 6c66 2e73 6166   code = self.saf
+00048210: 655f 7374 7269 6e67 2863 7572 7265 6e63  e_string(currenc
+00048220: 792c 2027 636f 6465 2729 0a20 2020 2020  y, 'code').     
+00048230: 2020 2063 6861 696e 203d 2073 656c 662e     chain = self.
+00048240: 7361 6665 5f73 7472 696e 6728 6465 706f  safe_string(depo
+00048250: 7369 7441 6464 7265 7373 2c20 2763 6861  sitAddress, 'cha
+00048260: 696e 2729 0a20 2020 2020 2020 2073 656c  in').        sel
+00048270: 662e 6368 6563 6b5f 6164 6472 6573 7328  f.check_address(
+00048280: 6164 6472 6573 7329 0a20 2020 2020 2020  address).       
+00048290: 2072 6574 7572 6e20 7b0a 2020 2020 2020   return {.      
+000482a0: 2020 2020 2020 2763 7572 7265 6e63 7927        'currency'
+000482b0: 3a20 636f 6465 2c0a 2020 2020 2020 2020  : code,.        
+000482c0: 2020 2020 2761 6464 7265 7373 273a 2061      'address': a
+000482d0: 6464 7265 7373 2c0a 2020 2020 2020 2020  ddress,.        
+000482e0: 2020 2020 2774 6167 273a 2074 6167 2c0a      'tag': tag,.
+000482f0: 2020 2020 2020 2020 2020 2020 276e 6574              'net
+00048300: 776f 726b 273a 2063 6861 696e 2c0a 2020  work': chain,.  
+00048310: 2020 2020 2020 2020 2020 2769 6e66 6f27            'info'
+00048320: 3a20 6465 706f 7369 7441 6464 7265 7373  : depositAddress
+00048330: 2c0a 2020 2020 2020 2020 7d0a 0a20 2020  ,.        }..   
+00048340: 2064 6566 2066 6574 6368 5f64 6570 6f73   def fetch_depos
+00048350: 6974 5f61 6464 7265 7373 6573 5f62 795f  it_addresses_by_
+00048360: 6e65 7477 6f72 6b28 7365 6c66 2c20 636f  network(self, co
+00048370: 6465 3a20 7374 722c 2070 6172 616d 733d  de: str, params=
+00048380: 7b7d 293a 0a20 2020 2020 2020 2022 2222  {}):.        """
+00048390: 0a20 2020 2020 2020 2066 6574 6368 2061  .        fetch a
+000483a0: 2064 6963 7469 6f6e 6172 7920 6f66 2061   dictionary of a
+000483b0: 6464 7265 7373 6573 2066 6f72 2061 2063  ddresses for a c
+000483c0: 7572 7265 6e63 792c 2069 6e64 6578 6564  urrency, indexed
+000483d0: 2062 7920 6e65 7477 6f72 6b0a 2020 2020   by network.    
+000483e0: 2020 2020 7365 6520 6874 7470 733a 2f2f      see https://
+000483f0: 6279 6269 742d 6578 6368 616e 6765 2e67  bybit-exchange.g
+00048400: 6974 6875 622e 696f 2f64 6f63 732f 7635  ithub.io/docs/v5
+00048410: 2f61 7373 6574 2f6d 6173 7465 722d 6465  /asset/master-de
+00048420: 706f 7369 742d 6164 6472 0a20 2020 2020  posit-addr.     
+00048430: 2020 203a 7061 7261 6d20 7374 7220 636f     :param str co
+00048440: 6465 3a20 756e 6966 6965 6420 6375 7272  de: unified curr
+00048450: 656e 6379 2063 6f64 6520 6f66 2074 6865  ency code of the
+00048460: 2063 7572 7265 6e63 7920 666f 7220 7468   currency for th
+00048470: 6520 6465 706f 7369 7420 6164 6472 6573  e deposit addres
+00048480: 730a 2020 2020 2020 2020 3a70 6172 616d  s.        :param
+00048490: 2064 6963 7420 7061 7261 6d73 3a20 6578   dict params: ex
+000484a0: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
+000484b0: 7065 6369 6669 6320 746f 2074 6865 2062  pecific to the b
+000484c0: 7962 6974 2061 7069 2065 6e64 706f 696e  ybit api endpoin
+000484d0: 740a 2020 2020 2020 2020 3a72 6574 7572  t.        :retur
+000484e0: 6e73 2064 6963 743a 2061 2064 6963 7469  ns dict: a dicti
+000484f0: 6f6e 6172 7920 6f66 2060 6164 6472 6573  onary of `addres
+00048500: 7320 7374 7275 6374 7572 6573 203c 6874  s structures <ht
+00048510: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
+00048520: 636f 6d2f 232f 3f69 643d 6164 6472 6573  com/#/?id=addres
+00048530: 732d 7374 7275 6374 7572 653e 6020 696e  s-structure>` in
+00048540: 6465 7865 6420 6279 2074 6865 206e 6574  dexed by the net
+00048550: 776f 726b 0a20 2020 2020 2020 2022 2222  work.        """
+00048560: 0a20 2020 2020 2020 2073 656c 662e 6c6f  .        self.lo
+00048570: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
+00048580: 2020 2020 2063 7572 7265 6e63 7920 3d20       currency = 
+00048590: 7365 6c66 2e63 7572 7265 6e63 7928 636f  self.currency(co
+000485a0: 6465 290a 2020 2020 2020 2020 7265 7175  de).        requ
+000485b0: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
+000485c0: 2020 2020 2763 6f69 6e27 3a20 6375 7272      'coin': curr
+000485d0: 656e 6379 5b27 6964 275d 2c0a 2020 2020  ency['id'],.    
+000485e0: 2020 2020 7d0a 2020 2020 2020 2020 7265      }.        re
+000485f0: 7370 6f6e 7365 203d 2073 656c 662e 7072  sponse = self.pr
+00048600: 6976 6174 6547 6574 5635 4173 7365 7444  ivateGetV5AssetD
+00048610: 6570 6f73 6974 5175 6572 7941 6464 7265  epositQueryAddre
+00048620: 7373 2873 656c 662e 6578 7465 6e64 2872  ss(self.extend(r
+00048630: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
+00048640: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+00048650: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
+00048660: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+00048670: 7443 6f64 6522 3a20 302c 0a20 2020 2020  tCode": 0,.     
+00048680: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+00048690: 744d 7367 223a 2022 7375 6363 6573 7322  tMsg": "success"
+000486a0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000486b0: 2020 2020 2272 6573 756c 7422 3a20 7b0a      "result": {.
+000486c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000486d0: 2020 2020 2020 2263 6f69 6e22 3a20 2255        "coin": "U
+000486e0: 5344 5422 2c0a 2020 2020 2020 2020 2320  SDT",.        # 
+000486f0: 2020 2020 2020 2020 2020 2020 2263 6861              "cha
+00048700: 696e 7322 3a20 5b0a 2020 2020 2020 2020  ins": [.        
+00048710: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00048720: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+00048730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048740: 2020 2263 6861 696e 5479 7065 223a 2022    "chainType": "
+00048750: 4552 4332 3022 2c0a 2020 2020 2020 2020  ERC20",.        
+00048760: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00048770: 2020 2020 2020 2261 6464 7265 7373 4465        "addressDe
+00048780: 706f 7369 7422 3a20 2230 7864 3965 3163  posit": "0xd9e1c
+00048790: 6437 3761 6661 3065 3530 6234 3532 6136  d77afa0e50b452a6
+000487a0: 3266 6262 3638 6133 3334 3036 3032 3238  2fbb68a334060228
+000487b0: 3663 3322 2c0a 2020 2020 2020 2020 2320  6c3",.        # 
+000487c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000487d0: 2020 2020 2274 6167 4465 706f 7369 7422      "tagDeposit"
+000487e0: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
+000487f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048800: 2020 2020 2263 6861 696e 223a 2022 4554      "chain": "ET
+00048810: 4822 0a20 2020 2020 2020 2023 2020 2020  H".        #    
+00048820: 2020 2020 2020 2020 2020 2020 207d 0a20               }. 
+00048830: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00048840: 2020 2020 205d 0a20 2020 2020 2020 2023       ].        #
+00048850: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
+00048860: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
+00048870: 6574 4578 7449 6e66 6f22 3a20 7b7d 2c0a  etExtInfo": {},.
+00048880: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00048890: 2020 2274 696d 6522 3a20 3136 3732 3139    "time": 167219
+000488a0: 3237 3932 3836 300a 2020 2020 2020 2020  2792860.        
+000488b0: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
+000488c0: 230a 2020 2020 2020 2020 7265 7375 6c74  #.        result
+000488d0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+000488e0: 7565 2872 6573 706f 6e73 652c 2027 7265  ue(response, 're
+000488f0: 7375 6c74 272c 205b 5d29 0a20 2020 2020  sult', []).     
+00048900: 2020 2063 6861 696e 7320 3d20 7365 6c66     chains = self
+00048910: 2e73 6166 655f 7661 6c75 6528 7265 7375  .safe_value(resu
+00048920: 6c74 2c20 2763 6861 696e 7327 2c20 5b5d  lt, 'chains', []
+00048930: 290a 2020 2020 2020 2020 636f 696e 203d  ).        coin =
+00048940: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+00048950: 6728 7265 7375 6c74 2c20 2763 6f69 6e27  g(result, 'coin'
+00048960: 290a 2020 2020 2020 2020 6375 7272 656e  ).        curren
+00048970: 6379 203d 2073 656c 662e 6375 7272 656e  cy = self.curren
+00048980: 6379 2863 6f69 6e29 0a20 2020 2020 2020  cy(coin).       
+00048990: 2070 6172 7365 6420 3d20 7365 6c66 2e70   parsed = self.p
+000489a0: 6172 7365 5f64 6570 6f73 6974 5f61 6464  arse_deposit_add
+000489b0: 7265 7373 6573 2863 6861 696e 732c 205b  resses(chains, [
+000489c0: 6375 7272 656e 6379 5b27 636f 6465 275d  currency['code']
+000489d0: 5d2c 2046 616c 7365 2c20 7b0a 2020 2020  ], False, {.    
+000489e0: 2020 2020 2020 2020 2763 7572 7265 6e63          'currenc
+000489f0: 7927 3a20 6375 7272 656e 6379 5b27 6964  y': currency['id
+00048a00: 275d 2c0a 2020 2020 2020 2020 7d29 0a20  '],.        }). 
+00048a10: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00048a20: 6c66 2e69 6e64 6578 5f62 7928 7061 7273  lf.index_by(pars
+00048a30: 6564 2c20 276e 6574 776f 726b 2729 0a0a  ed, 'network')..
+00048a40: 2020 2020 6465 6620 6665 7463 685f 6465      def fetch_de
+00048a50: 706f 7369 745f 6164 6472 6573 7328 7365  posit_address(se
+00048a60: 6c66 2c20 636f 6465 3a20 7374 722c 2070  lf, code: str, p
+00048a70: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
+00048a80: 2020 2022 2222 0a20 2020 2020 2020 2066     """.        f
+00048a90: 6574 6368 2074 6865 2064 6570 6f73 6974  etch the deposit
+00048aa0: 2061 6464 7265 7373 2066 6f72 2061 2063   address for a c
+00048ab0: 7572 7265 6e63 7920 6173 736f 6369 6174  urrency associat
+00048ac0: 6564 2077 6974 6820 7365 6c66 2061 6363  ed with self acc
+00048ad0: 6f75 6e74 0a20 2020 2020 2020 2073 6565  ount.        see
+00048ae0: 2068 7474 7073 3a2f 2f62 7962 6974 2d65   https://bybit-e
+00048af0: 7863 6861 6e67 652e 6769 7468 7562 2e69  xchange.github.i
+00048b00: 6f2f 646f 6373 2f76 352f 6173 7365 742f  o/docs/v5/asset/
+00048b10: 6d61 7374 6572 2d64 6570 6f73 6974 2d61  master-deposit-a
+00048b20: 6464 720a 2020 2020 2020 2020 3a70 6172  ddr.        :par
+00048b30: 616d 2073 7472 2063 6f64 653a 2075 6e69  am str code: uni
+00048b40: 6669 6564 2063 7572 7265 6e63 7920 636f  fied currency co
+00048b50: 6465 0a20 2020 2020 2020 203a 7061 7261  de.        :para
+00048b60: 6d20 6469 6374 2070 6172 616d 733a 2065  m dict params: e
+00048b70: 7874 7261 2070 6172 616d 6574 6572 7320  xtra parameters 
+00048b80: 7370 6563 6966 6963 2074 6f20 7468 6520  specific to the 
+00048b90: 6279 6269 7420 6170 6920 656e 6470 6f69  bybit api endpoi
+00048ba0: 6e74 0a20 2020 2020 2020 203a 7265 7475  nt.        :retu
+00048bb0: 726e 7320 6469 6374 3a20 616e 2060 6164  rns dict: an `ad
+00048bc0: 6472 6573 7320 7374 7275 6374 7572 6520  dress structure 
+00048bd0: 3c68 7474 7073 3a2f 2f64 6f63 732e 6363  <https://docs.cc
+00048be0: 7874 2e63 6f6d 2f23 2f3f 6964 3d61 6464  xt.com/#/?id=add
+00048bf0: 7265 7373 2d73 7472 7563 7475 7265 3e60  ress-structure>`
+00048c00: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00048c10: 2020 2020 2073 656c 662e 6c6f 6164 5f6d       self.load_m
+00048c20: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
+00048c30: 206e 6574 776f 726b 436f 6465 2c20 7175   networkCode, qu
+00048c40: 6572 7920 3d20 7365 6c66 2e68 616e 646c  ery = self.handl
+00048c50: 655f 6e65 7477 6f72 6b5f 636f 6465 5f61  e_network_code_a
+00048c60: 6e64 5f70 6172 616d 7328 7061 7261 6d73  nd_params(params
+00048c70: 290a 2020 2020 2020 2020 6e65 7477 6f72  ).        networ
+00048c80: 6b49 6420 3d20 7365 6c66 2e6e 6574 776f  kId = self.netwo
+00048c90: 726b 5f63 6f64 655f 746f 5f69 6428 6e65  rk_code_to_id(ne
+00048ca0: 7477 6f72 6b43 6f64 6529 0a20 2020 2020  tworkCode).     
+00048cb0: 2020 2063 7572 7265 6e63 7920 3d20 7365     currency = se
+00048cc0: 6c66 2e63 7572 7265 6e63 7928 636f 6465  lf.currency(code
+00048cd0: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
+00048ce0: 7420 3d20 7b0a 2020 2020 2020 2020 2020  t = {.          
+00048cf0: 2020 2763 6f69 6e27 3a20 6375 7272 656e    'coin': curren
+00048d00: 6379 5b27 6964 275d 2c0a 2020 2020 2020  cy['id'],.      
+00048d10: 2020 7d0a 2020 2020 2020 2020 6966 206e    }.        if n
+00048d20: 6574 776f 726b 4964 2069 7320 6e6f 7420  etworkId is not 
+00048d30: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00048d40: 2020 7265 7175 6573 745b 2763 6861 696e    request['chain
+00048d50: 5479 7065 275d 203d 206e 6574 776f 726b  Type'] = network
+00048d60: 4964 0a20 2020 2020 2020 2072 6573 706f  Id.        respo
+00048d70: 6e73 6520 3d20 7365 6c66 2e70 7269 7661  nse = self.priva
+00048d80: 7465 4765 7456 3541 7373 6574 4465 706f  teGetV5AssetDepo
+00048d90: 7369 7451 7565 7279 4164 6472 6573 7328  sitQueryAddress(
+00048da0: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
+00048db0: 6573 742c 2071 7565 7279 2929 0a20 2020  est, query)).   
+00048dc0: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+00048dd0: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+00048de0: 2020 2020 2020 2020 2022 7265 7443 6f64           "retCod
+00048df0: 6522 3a20 302c 0a20 2020 2020 2020 2023  e": 0,.        #
+00048e00: 2020 2020 2020 2020 2022 7265 744d 7367           "retMsg
+00048e10: 223a 2022 7375 6363 6573 7322 2c0a 2020  ": "success",.  
+00048e20: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00048e30: 2272 6573 756c 7422 3a20 7b0a 2020 2020  "result": {.    
+00048e40: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00048e50: 2020 2263 6f69 6e22 3a20 2255 5344 5422    "coin": "USDT"
+00048e60: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00048e70: 2020 2020 2020 2020 2263 6861 696e 7322          "chains"
+00048e80: 3a20 5b0a 2020 2020 2020 2020 2320 2020  : [.        #   
+00048e90: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
+00048ea0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00048eb0: 2020 2020 2020 2020 2020 2020 2020 2263                "c
+00048ec0: 6861 696e 5479 7065 223a 2022 4552 4332  hainType": "ERC2
+00048ed0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00048ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048ef0: 2020 2261 6464 7265 7373 4465 706f 7369    "addressDeposi
+00048f00: 7422 3a20 2230 7864 3965 3163 6437 3761  t": "0xd9e1cd77a
+00048f10: 6661 3065 3530 6234 3532 6136 3266 6262  fa0e50b452a62fbb
+00048f20: 3638 6133 3334 3036 3032 3238 3663 3322  68a3340602286c3"
+00048f30: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00048f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048f50: 2274 6167 4465 706f 7369 7422 3a20 2222  "tagDeposit": ""
+00048f60: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00048f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048f80: 2263 6861 696e 223a 2022 4554 4822 0a20  "chain": "ETH". 
+00048f90: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00048fa0: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+00048fb0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00048fc0: 205d 0a20 2020 2020 2020 2023 2020 2020   ].        #    
+00048fd0: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
+00048fe0: 2320 2020 2020 2020 2020 2272 6574 4578  #         "retEx
+00048ff0: 7449 6e66 6f22 3a20 7b7d 2c0a 2020 2020  tInfo": {},.    
+00049000: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
+00049010: 696d 6522 3a20 3136 3732 3139 3237 3932  ime": 1672192792
+00049020: 3836 300a 2020 2020 2020 2020 2320 2020  860.        #   
+00049030: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
+00049040: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
+00049050: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
+00049060: 6573 706f 6e73 652c 2027 7265 7375 6c74  esponse, 'result
+00049070: 272c 207b 7d29 0a20 2020 2020 2020 2063  ', {}).        c
+00049080: 6861 696e 7320 3d20 7365 6c66 2e73 6166  hains = self.saf
+00049090: 655f 7661 6c75 6528 7265 7375 6c74 2c20  e_value(result, 
+000490a0: 2763 6861 696e 7327 2c20 5b5d 290a 2020  'chains', []).  
+000490b0: 2020 2020 2020 6368 6169 6e73 496e 6465        chainsInde
+000490c0: 7865 6442 7949 6420 3d20 7365 6c66 2e69  xedById = self.i
+000490d0: 6e64 6578 5f62 7928 6368 6169 6e73 2c20  ndex_by(chains, 
+000490e0: 2763 6861 696e 2729 0a20 2020 2020 2020  'chain').       
+000490f0: 2073 656c 6563 7465 644e 6574 776f 726b   selectedNetwork
+00049100: 4964 203d 2073 656c 662e 7365 6c65 6374  Id = self.select
+00049110: 5f6e 6574 776f 726b 5f69 645f 6672 6f6d  _network_id_from
+00049120: 5f72 6177 5f6e 6574 776f 726b 7328 636f  _raw_networks(co
+00049130: 6465 2c20 6e65 7477 6f72 6b43 6f64 652c  de, networkCode,
+00049140: 2063 6861 696e 7349 6e64 6578 6564 4279   chainsIndexedBy
+00049150: 4964 290a 2020 2020 2020 2020 6164 6472  Id).        addr
+00049160: 6573 734f 626a 6563 7420 3d20 7365 6c66  essObject = self
+00049170: 2e73 6166 655f 7661 6c75 6528 6368 6169  .safe_value(chai
+00049180: 6e73 496e 6465 7865 6442 7949 642c 2073  nsIndexedById, s
+00049190: 656c 6563 7465 644e 6574 776f 726b 4964  electedNetworkId
+000491a0: 2c20 7b7d 290a 2020 2020 2020 2020 7265  , {}).        re
+000491b0: 7475 726e 2073 656c 662e 7061 7273 655f  turn self.parse_
+000491c0: 6465 706f 7369 745f 6164 6472 6573 7328  deposit_address(
+000491d0: 6164 6472 6573 734f 626a 6563 742c 2063  addressObject, c
+000491e0: 7572 7265 6e63 7929 0a0a 2020 2020 6465  urrency)..    de
+000491f0: 6620 6665 7463 685f 6465 706f 7369 7473  f fetch_deposits
+00049200: 2873 656c 662c 2063 6f64 653a 204f 7074  (self, code: Opt
+00049210: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
+00049220: 652c 2073 696e 6365 3a20 4f70 7469 6f6e  e, since: Option
+00049230: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c20  al[int] = None, 
+00049240: 6c69 6d69 743a 204f 7074 696f 6e61 6c5b  limit: Optional[
+00049250: 696e 745d 203d 204e 6f6e 652c 2070 6172  int] = None, par
+00049260: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
+00049270: 2022 2222 0a20 2020 2020 2020 2066 6574   """.        fet
+00049280: 6368 2061 6c6c 2064 6570 6f73 6974 7320  ch all deposits 
+00049290: 6d61 6465 2074 6f20 616e 2061 6363 6f75  made to an accou
+000492a0: 6e74 0a20 2020 2020 2020 2073 6565 2068  nt.        see h
+000492b0: 7474 7073 3a2f 2f62 7962 6974 2d65 7863  ttps://bybit-exc
+000492c0: 6861 6e67 652e 6769 7468 7562 2e69 6f2f  hange.github.io/
+000492d0: 646f 6373 2f76 352f 6173 7365 742f 6465  docs/v5/asset/de
+000492e0: 706f 7369 742d 7265 636f 7264 0a20 2020  posit-record.   
+000492f0: 2020 2020 203a 7061 7261 6d20 7374 727c       :param str|
+00049300: 4e6f 6e65 2063 6f64 653a 2075 6e69 6669  None code: unifi
+00049310: 6564 2063 7572 7265 6e63 7920 636f 6465  ed currency code
+00049320: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00049330: 696e 747c 4e6f 6e65 2073 696e 6365 3a20  int|None since: 
+00049340: 7468 6520 6561 726c 6965 7374 2074 696d  the earliest tim
+00049350: 6520 696e 206d 7320 746f 2066 6574 6368  e in ms to fetch
+00049360: 2064 6570 6f73 6974 7320 666f 722c 2064   deposits for, d
+00049370: 6566 6175 6c74 203d 2033 3020 6461 7973  efault = 30 days
+00049380: 2062 6566 6f72 6520 7468 6520 6375 7272   before the curr
+00049390: 656e 7420 7469 6d65 0a20 2020 2020 2020  ent time.       
+000493a0: 203a 7061 7261 6d20 696e 747c 4e6f 6e65   :param int|None
+000493b0: 206c 696d 6974 3a20 7468 6520 6d61 7869   limit: the maxi
+000493c0: 6d75 6d20 6e75 6d62 6572 206f 6620 6465  mum number of de
+000493d0: 706f 7369 7473 2073 7472 7563 7475 7265  posits structure
+000493e0: 7320 746f 2072 6574 7269 6576 652c 2064  s to retrieve, d
+000493f0: 6566 6175 6c74 203d 2035 302c 206d 6178  efault = 50, max
+00049400: 203d 2035 300a 2020 2020 2020 2020 3a70   = 50.        :p
+00049410: 6172 616d 2064 6963 7420 7061 7261 6d73  aram dict params
+00049420: 3a20 6578 7472 6120 7061 7261 6d65 7465  : extra paramete
+00049430: 7273 2073 7065 6369 6669 6320 746f 2074  rs specific to t
+00049440: 6865 2062 7962 6974 2061 7069 2065 6e64  he bybit api end
+00049450: 706f 696e 740a 2020 2020 2020 2020 3a70  point.        :p
+00049460: 6172 616d 2069 6e74 7c4e 6f6e 6520 7061  aram int|None pa
+00049470: 7261 6d73 5b27 756e 7469 6c27 5d3a 2074  rams['until']: t
+00049480: 6865 206c 6174 6573 7420 7469 6d65 2069  he latest time i
+00049490: 6e20 6d73 2074 6f20 6665 7463 6820 6465  n ms to fetch de
+000494a0: 706f 7369 7473 2066 6f72 2c20 6465 6661  posits for, defa
+000494b0: 756c 7420 3d20 3330 2064 6179 7320 6166  ult = 30 days af
+000494c0: 7465 7220 7369 6e63 650a 2020 2020 2020  ter since.      
+000494d0: 2020 202a 0a20 2020 2020 2020 2020 2a20     *.         * 
+000494e0: 4558 4348 414e 4745 2053 5045 4349 4649  EXCHANGE SPECIFI
+000494f0: 4320 5041 5241 4d45 5445 5253 0a20 2020  C PARAMETERS.   
+00049500: 2020 2020 203a 7061 7261 6d20 7374 727c       :param str|
+00049510: 4e6f 6e65 2070 6172 616d 735b 2763 7572  None params['cur
+00049520: 736f 7227 5d3a 2075 7365 6420 666f 7220  sor']: used for 
+00049530: 7061 6769 6e61 7469 6f6e 0a20 2020 2020  pagination.     
+00049540: 2020 203a 7265 7475 726e 7320 5b64 6963     :returns [dic
+00049550: 745d 3a20 6120 6c69 7374 206f 6620 6074  t]: a list of `t
+00049560: 7261 6e73 6163 7469 6f6e 2073 7472 7563  ransaction struc
+00049570: 7475 7265 7320 3c68 7474 7073 3a2f 2f64  tures <https://d
+00049580: 6f63 732e 6363 7874 2e63 6f6d 2f23 2f3f  ocs.ccxt.com/#/?
+00049590: 6964 3d74 7261 6e73 6163 7469 6f6e 2d73  id=transaction-s
+000495a0: 7472 7563 7475 7265 3e60 0a20 2020 2020  tructure>`.     
+000495b0: 2020 2222 220a 2020 2020 2020 2020 7365    """.        se
+000495c0: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
+000495d0: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
+000495e0: 7420 3d20 7b0a 2020 2020 2020 2020 2020  t = {.          
+000495f0: 2020 2320 2763 6f69 6e27 3a20 6375 7272    # 'coin': curr
+00049600: 656e 6379 5b27 6964 275d 2c0a 2020 2020  ency['id'],.    
+00049610: 2020 2020 2020 2020 2320 276c 696d 6974          # 'limit
+00049620: 273a 2032 302c 2020 2320 6d61 7820 3530  ': 20,  # max 50
+00049630: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+00049640: 6375 7273 6f72 273a 2027 272c 0a20 2020  cursor': '',.   
+00049650: 2020 2020 207d 0a20 2020 2020 2020 2063       }.        c
+00049660: 7572 7265 6e63 7920 3d20 4e6f 6e65 0a20  urrency = None. 
+00049670: 2020 2020 2020 2069 6620 636f 6465 2069         if code i
+00049680: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00049690: 2020 2020 2020 2020 6375 7272 656e 6379          currency
+000496a0: 203d 2073 656c 662e 6375 7272 656e 6379   = self.currency
+000496b0: 2863 6f64 6529 0a20 2020 2020 2020 2020  (code).         
+000496c0: 2020 2072 6571 7565 7374 5b27 636f 696e     request['coin
+000496d0: 275d 203d 2063 7572 7265 6e63 795b 2769  '] = currency['i
+000496e0: 6427 5d0a 2020 2020 2020 2020 6966 2073  d'].        if s
+000496f0: 696e 6365 2069 7320 6e6f 7420 4e6f 6e65  ince is not None
+00049700: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00049710: 7175 6573 745b 2773 7461 7274 5469 6d65  quest['startTime
+00049720: 275d 203d 2073 696e 6365 0a20 2020 2020  '] = since.     
+00049730: 2020 2069 6620 6c69 6d69 7420 6973 206e     if limit is n
+00049740: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00049750: 2020 2020 2072 6571 7565 7374 5b27 6c69       request['li
+00049760: 6d69 7427 5d20 3d20 6c69 6d69 740a 2020  mit'] = limit.  
+00049770: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+00049780: 2073 656c 662e 7072 6976 6174 6547 6574   self.privateGet
+00049790: 5635 4173 7365 7444 6570 6f73 6974 5175  V5AssetDepositQu
+000497a0: 6572 7952 6563 6f72 6428 7365 6c66 2e65  eryRecord(self.e
+000497b0: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
+000497c0: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
+000497d0: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+000497e0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+000497f0: 2020 2020 2272 6574 436f 6465 223a 2030      "retCode": 0
+00049800: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00049810: 2020 2020 2272 6574 4d73 6722 3a20 2273      "retMsg": "s
+00049820: 7563 6365 7373 222c 0a20 2020 2020 2020  uccess",.       
+00049830: 2023 2020 2020 2020 2020 2022 7265 7375   #         "resu
+00049840: 6c74 223a 207b 0a20 2020 2020 2020 2023  lt": {.        #
+00049850: 2020 2020 2020 2020 2020 2020 2022 726f               "ro
+00049860: 7773 223a 205b 0a20 2020 2020 2020 2023  ws": [.        #
+00049870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00049880: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+00049890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000498a0: 2022 636f 696e 223a 2022 5553 4454 222c   "coin": "USDT",
+000498b0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000498c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000498d0: 6368 6169 6e22 3a20 2245 5448 222c 0a20  chain": "ETH",. 
+000498e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000498f0: 2020 2020 2020 2020 2020 2020 2022 616d               "am
+00049900: 6f75 6e74 223a 2022 3130 3030 3022 2c0a  ount": "10000",.
+00049910: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00049920: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+00049930: 7849 4422 3a20 2273 6b69 702d 6e6f 7469  xID": "skip-noti
+00049940: 6669 6361 7469 6f6e 2d73 6365 6e65 2d74  fication-scene-t
+00049950: 6573 742d 616d 6f75 6e74 2d32 3032 3231  est-amount-20221
+00049960: 3232 3730 3934 342d 3533 3332 3835 2d55  2270944-533285-U
+00049970: 5344 5422 2c0a 2020 2020 2020 2020 2320  SDT",.        # 
+00049980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00049990: 2020 2020 2273 7461 7475 7322 3a20 332c      "status": 3,
+000499a0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000499b0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000499c0: 746f 4164 6472 6573 7322 3a20 2274 6573  toAddress": "tes
+000499d0: 742d 616d 6f75 6e74 2d61 6464 7265 7373  t-amount-address
+000499e0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+000499f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00049a00: 2022 7461 6722 3a20 2222 2c0a 2020 2020   "tag": "",.    
+00049a10: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00049a20: 2020 2020 2020 2020 2020 2264 6570 6f73            "depos
+00049a30: 6974 4665 6522 3a20 2222 2c0a 2020 2020  itFee": "",.    
+00049a40: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00049a50: 2020 2020 2020 2020 2020 2273 7563 6365            "succe
+00049a60: 7373 4174 223a 2022 3136 3732 3133 3432  ssAt": "16721342
+00049a70: 3734 3030 3022 2c0a 2020 2020 2020 2020  74000",.        
+00049a80: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00049a90: 2020 2020 2020 2263 6f6e 6669 726d 6174        "confirmat
+00049aa0: 696f 6e73 223a 2022 3130 3030 3022 2c0a  ions": "10000",.
+00049ab0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00049ac0: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+00049ad0: 7849 6e64 6578 223a 2022 222c 0a20 2020  xIndex": "",.   
+00049ae0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00049af0: 2020 2020 2020 2020 2020 2022 626c 6f63             "bloc
+00049b00: 6b48 6173 6822 3a20 2222 0a20 2020 2020  kHash": "".     
+00049b10: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00049b20: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+00049b30: 2020 2020 2020 2020 2020 2020 205d 2c0a               ],.
+00049b40: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00049b50: 2020 2020 2020 226e 6578 7450 6167 6543        "nextPageC
+00049b60: 7572 736f 7222 3a20 2265 794a 7461 5735  ursor": "eyJtaW5
+00049b70: 4a52 4349 364d 5441 304e 6a41 304d 7977  JRCI6MTA0NjA0Myw
+00049b80: 6962 5746 3453 5551 694f 6a45 774e 4459  ibWF4SUQiOjEwNDY
+00049b90: 774e 444e 3922 0a20 2020 2020 2020 2023  wNDN9".        #
+00049ba0: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
+00049bb0: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
+00049bc0: 6574 4578 7449 6e66 6f22 3a20 7b7d 2c0a  etExtInfo": {},.
+00049bd0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00049be0: 2020 2274 696d 6522 3a20 3136 3732 3139    "time": 167219
+00049bf0: 3139 3932 3531 320a 2020 2020 2020 2020  1992512.        
+00049c00: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
+00049c10: 230a 2020 2020 2020 2020 7265 7375 6c74  #.        result
+00049c20: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+00049c30: 7565 2872 6573 706f 6e73 652c 2027 7265  ue(response, 're
+00049c40: 7375 6c74 272c 207b 7d29 0a20 2020 2020  sult', {}).     
+00049c50: 2020 2064 6174 6120 3d20 7365 6c66 2e73     data = self.s
+00049c60: 6166 655f 7661 6c75 6528 7265 7375 6c74  afe_value(result
+00049c70: 2c20 2772 6f77 7327 2c20 5b5d 290a 2020  , 'rows', []).  
+00049c80: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00049c90: 662e 7061 7273 655f 7472 616e 7361 6374  f.parse_transact
+00049ca0: 696f 6e73 2864 6174 612c 2063 7572 7265  ions(data, curre
+00049cb0: 6e63 792c 2073 696e 6365 2c20 6c69 6d69  ncy, since, limi
+00049cc0: 7429 0a0a 2020 2020 6465 6620 6665 7463  t)..    def fetc
+00049cd0: 685f 7769 7468 6472 6177 616c 7328 7365  h_withdrawals(se
+00049ce0: 6c66 2c20 636f 6465 3a20 4f70 7469 6f6e  lf, code: Option
+00049cf0: 616c 5b73 7472 5d20 3d20 4e6f 6e65 2c20  al[str] = None, 
+00049d00: 7369 6e63 653a 204f 7074 696f 6e61 6c5b  since: Optional[
+00049d10: 696e 745d 203d 204e 6f6e 652c 206c 696d  int] = None, lim
+00049d20: 6974 3a20 4f70 7469 6f6e 616c 5b69 6e74  it: Optional[int
+00049d30: 5d20 3d20 4e6f 6e65 2c20 7061 7261 6d73  ] = None, params
+00049d40: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
+00049d50: 220a 2020 2020 2020 2020 6665 7463 6820  ".        fetch 
+00049d60: 616c 6c20 7769 7468 6472 6177 616c 7320  all withdrawals 
+00049d70: 6d61 6465 2066 726f 6d20 616e 2061 6363  made from an acc
+00049d80: 6f75 6e74 0a20 2020 2020 2020 2073 6565  ount.        see
+00049d90: 2068 7474 7073 3a2f 2f62 7962 6974 2d65   https://bybit-e
+00049da0: 7863 6861 6e67 652e 6769 7468 7562 2e69  xchange.github.i
+00049db0: 6f2f 646f 6373 2f76 352f 6173 7365 742f  o/docs/v5/asset/
+00049dc0: 7769 7468 6472 6177 2d72 6563 6f72 640a  withdraw-record.
+00049dd0: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+00049de0: 7472 2063 6f64 653a 2075 6e69 6669 6564  tr code: unified
+00049df0: 2063 7572 7265 6e63 7920 636f 6465 0a20   currency code. 
+00049e00: 2020 2020 2020 203a 7061 7261 6d20 696e         :param in
+00049e10: 747c 4e6f 6e65 2073 696e 6365 3a20 7468  t|None since: th
+00049e20: 6520 6561 726c 6965 7374 2074 696d 6520  e earliest time 
+00049e30: 696e 206d 7320 746f 2066 6574 6368 2077  in ms to fetch w
+00049e40: 6974 6864 7261 7761 6c73 2066 6f72 0a20  ithdrawals for. 
+00049e50: 2020 2020 2020 203a 7061 7261 6d20 696e         :param in
+00049e60: 747c 4e6f 6e65 206c 696d 6974 3a20 7468  t|None limit: th
+00049e70: 6520 6d61 7869 6d75 6d20 6e75 6d62 6572  e maximum number
+00049e80: 206f 6620 7769 7468 6472 6177 616c 7320   of withdrawals 
+00049e90: 7374 7275 6374 7572 6573 2074 6f20 7265  structures to re
+00049ea0: 7472 6965 7665 0a20 2020 2020 2020 203a  trieve.        :
+00049eb0: 7061 7261 6d20 6469 6374 2070 6172 616d  param dict param
+00049ec0: 733a 2065 7874 7261 2070 6172 616d 6574  s: extra paramet
+00049ed0: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
+00049ee0: 7468 6520 6279 6269 7420 6170 6920 656e  the bybit api en
+00049ef0: 6470 6f69 6e74 0a20 2020 2020 2020 203a  dpoint.        :
+00049f00: 7265 7475 726e 7320 5b64 6963 745d 3a20  returns [dict]: 
+00049f10: 6120 6c69 7374 206f 6620 6074 7261 6e73  a list of `trans
+00049f20: 6163 7469 6f6e 2073 7472 7563 7475 7265  action structure
+00049f30: 7320 3c68 7474 7073 3a2f 2f64 6f63 732e  s <https://docs.
+00049f40: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d74  ccxt.com/#/?id=t
+00049f50: 7261 6e73 6163 7469 6f6e 2d73 7472 7563  ransaction-struc
+00049f60: 7475 7265 3e60 0a20 2020 2020 2020 2022  ture>`.        "
+00049f70: 2222 0a20 2020 2020 2020 2073 656c 662e  "".        self.
+00049f80: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
+00049f90: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+00049fa0: 207b 0a20 2020 2020 2020 2020 2020 2023   {.            #
+00049fb0: 2027 636f 696e 273a 2063 7572 7265 6e63   'coin': currenc
+00049fc0: 795b 2769 6427 5d2c 0a20 2020 2020 2020  y['id'],.       
+00049fd0: 2020 2020 2023 2027 6c69 6d69 7427 3a20       # 'limit': 
+00049fe0: 3230 2c20 2023 206d 6178 2035 300a 2020  20,  # max 50.  
+00049ff0: 2020 2020 2020 2020 2020 2320 2763 7573            # 'cus
+0004a000: 6f72 273a 2027 272c 0a20 2020 2020 2020  or': '',.       
+0004a010: 207d 0a20 2020 2020 2020 2063 7572 7265   }.        curre
+0004a020: 6e63 7920 3d20 4e6f 6e65 0a20 2020 2020  ncy = None.     
+0004a030: 2020 2069 6620 636f 6465 2069 7320 6e6f     if code is no
+0004a040: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+0004a050: 2020 2020 6375 7272 656e 6379 203d 2073      currency = s
+0004a060: 656c 662e 6375 7272 656e 6379 2863 6f64  elf.currency(cod
+0004a070: 6529 0a20 2020 2020 2020 2020 2020 2072  e).            r
+0004a080: 6571 7565 7374 5b27 636f 696e 275d 203d  equest['coin'] =
+0004a090: 2063 7572 7265 6e63 795b 2769 6427 5d0a   currency['id'].
+0004a0a0: 2020 2020 2020 2020 6966 2073 696e 6365          if since
+0004a0b0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0004a0c0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+0004a0d0: 745b 2773 7461 7274 5469 6d65 275d 203d  t['startTime'] =
+0004a0e0: 2073 696e 6365 0a20 2020 2020 2020 2069   since.        i
+0004a0f0: 6620 6c69 6d69 7420 6973 206e 6f74 204e  f limit is not N
+0004a100: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+0004a110: 2072 6571 7565 7374 5b27 6c69 6d69 7427   request['limit'
+0004a120: 5d20 3d20 6c69 6d69 740a 2020 2020 2020  ] = limit.      
+0004a130: 2020 7265 7370 6f6e 7365 203d 2073 656c    response = sel
+0004a140: 662e 7072 6976 6174 6547 6574 5635 4173  f.privateGetV5As
+0004a150: 7365 7457 6974 6864 7261 7751 7565 7279  setWithdrawQuery
+0004a160: 5265 636f 7264 2873 656c 662e 6578 7465  Record(self.exte
+0004a170: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
+0004a180: 6d73 2929 0a20 2020 2020 2020 2023 0a20  ms)).        #. 
+0004a190: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
+0004a1a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004a1b0: 2022 7265 7443 6f64 6522 3a20 302c 0a20   "retCode": 0,. 
+0004a1c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004a1d0: 2022 7265 744d 7367 223a 2022 7375 6363   "retMsg": "succ
+0004a1e0: 6573 7322 2c0a 2020 2020 2020 2020 2320  ess",.        # 
+0004a1f0: 2020 2020 2020 2020 2272 6573 756c 7422          "result"
+0004a200: 3a20 7b0a 2020 2020 2020 2020 2320 2020  : {.        #   
+0004a210: 2020 2020 2020 2020 2020 2272 6f77 7322            "rows"
+0004a220: 3a20 5b0a 2020 2020 2020 2020 2320 2020  : [.        #   
+0004a230: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
+0004a240: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004a250: 2020 2020 2020 2020 2020 2020 2020 2263                "c
+0004a260: 6f69 6e22 3a20 2255 5344 5422 2c0a 2020  oin": "USDT",.  
+0004a270: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0004a280: 2020 2020 2020 2020 2020 2020 2263 6861              "cha
+0004a290: 696e 223a 2022 4554 4822 2c0a 2020 2020  in": "ETH",.    
+0004a2a0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004a2b0: 2020 2020 2020 2020 2020 2261 6d6f 756e            "amoun
+0004a2c0: 7422 3a20 2237 3722 2c0a 2020 2020 2020  t": "77",.      
+0004a2d0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0004a2e0: 2020 2020 2020 2020 2274 7849 4422 3a20          "txID": 
+0004a2f0: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
+0004a300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004a310: 2020 2273 7461 7475 7322 3a20 2253 6563    "status": "Sec
+0004a320: 7572 6974 7943 6865 636b 222c 0a20 2020  urityCheck",.   
+0004a330: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004a340: 2020 2020 2020 2020 2020 2022 746f 4164             "toAd
+0004a350: 6472 6573 7322 3a20 2230 7839 3963 6564  dress": "0x99ced
+0004a360: 3132 3936 3033 6162 6337 3731 6330 6461  129603abc771c0da
+0004a370: 6265 3933 3563 3332 3666 6636 6338 3636  be935c326ff6c866
+0004a380: 3435 6422 2c0a 2020 2020 2020 2020 2320  45d",.        # 
+0004a390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004a3a0: 2020 2020 2274 6167 223a 2022 222c 0a20      "tag": "",. 
+0004a3b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004a3c0: 2020 2020 2020 2020 2020 2020 2022 7769               "wi
+0004a3d0: 7468 6472 6177 4665 6522 3a20 2231 3022  thdrawFee": "10"
+0004a3e0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004a3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004a400: 2263 7265 6174 6554 696d 6522 3a20 2231  "createTime": "1
+0004a410: 3637 3039 3232 3231 3730 3030 222c 0a20  670922217000",. 
+0004a420: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004a430: 2020 2020 2020 2020 2020 2020 2022 7570               "up
+0004a440: 6461 7465 5469 6d65 223a 2022 3136 3730  dateTime": "1670
+0004a450: 3932 3232 3137 3030 3022 2c0a 2020 2020  922217000",.    
+0004a460: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004a470: 2020 2020 2020 2020 2020 2277 6974 6864            "withd
+0004a480: 7261 7749 6422 3a20 2239 3937 3622 2c0a  rawId": "9976",.
+0004a490: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004a4a0: 2020 2020 2020 2020 2020 2020 2020 2277                "w
+0004a4b0: 6974 6864 7261 7754 7970 6522 3a20 300a  ithdrawType": 0.
+0004a4c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004a4d0: 2020 2020 2020 2020 2020 7d2c 0a20 2020            },.   
+0004a4e0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004a4f0: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
+0004a500: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0004a510: 2020 2020 2020 2022 636f 696e 223a 2022         "coin": "
+0004a520: 5553 4454 222c 0a20 2020 2020 2020 2023  USDT",.        #
+0004a530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004a540: 2020 2020 2022 6368 6169 6e22 3a20 2245       "chain": "E
+0004a550: 5448 222c 0a20 2020 2020 2020 2023 2020  TH",.        #  
+0004a560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004a570: 2020 2022 616d 6f75 6e74 223a 2022 3236     "amount": "26
+0004a580: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004a590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004a5a0: 2022 7478 4944 223a 2022 222c 0a20 2020   "txID": "",.   
+0004a5b0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004a5c0: 2020 2020 2020 2020 2020 2022 7374 6174             "stat
+0004a5d0: 7573 223a 2022 7375 6363 6573 7322 2c0a  us": "success",.
+0004a5e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004a5f0: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+0004a600: 6f41 6464 7265 7373 223a 2022 3135 3633  oAddress": "1563
+0004a610: 3830 3732 3638 3140 3136 332e 636f 6d22  8072681@163.com"
+0004a620: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004a630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004a640: 2274 6167 223a 2022 222c 0a20 2020 2020  "tag": "",.     
+0004a650: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004a660: 2020 2020 2020 2020 2022 7769 7468 6472           "withdr
+0004a670: 6177 4665 6522 3a20 2230 222c 0a20 2020  awFee": "0",.   
+0004a680: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004a690: 2020 2020 2020 2020 2020 2022 6372 6561             "crea
+0004a6a0: 7465 5469 6d65 223a 2022 3136 3639 3731  teTime": "166971
+0004a6b0: 3131 3231 3030 3022 2c0a 2020 2020 2020  1121000",.      
+0004a6c0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0004a6d0: 2020 2020 2020 2020 2275 7064 6174 6554          "updateT
+0004a6e0: 696d 6522 3a20 2231 3636 3937 3131 3338  ime": "166971138
+0004a6f0: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
+0004a700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004a710: 2020 2020 2022 7769 7468 6472 6177 4964       "withdrawId
+0004a720: 223a 2022 3938 3031 222c 0a20 2020 2020  ": "9801",.     
+0004a730: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004a740: 2020 2020 2020 2020 2022 7769 7468 6472           "withdr
+0004a750: 6177 5479 7065 223a 2031 0a20 2020 2020  awType": 1.     
+0004a760: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004a770: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+0004a780: 2020 2020 2020 2020 2020 2020 205d 2c0a               ],.
+0004a790: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004a7a0: 2020 2020 2020 226e 6578 7450 6167 6543        "nextPageC
+0004a7b0: 7572 736f 7222 3a20 2265 794a 7461 5735  ursor": "eyJtaW5
+0004a7c0: 4a52 4349 364f 5467 774d 5377 6962 5746  JRCI6OTgwMSwibWF
+0004a7d0: 3453 5551 694f 6a6b 354e 7a5a 3922 0a20  4SUQiOjk5NzZ9". 
+0004a7e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004a7f0: 207d 2c0a 2020 2020 2020 2020 2320 2020   },.        #   
+0004a800: 2020 2020 2020 2272 6574 4578 7449 6e66        "retExtInf
+0004a810: 6f22 3a20 7b7d 2c0a 2020 2020 2020 2020  o": {},.        
+0004a820: 2320 2020 2020 2020 2020 2274 696d 6522  #         "time"
+0004a830: 3a20 3136 3732 3139 3439 3439 3932 380a  : 1672194949928.
+0004a840: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
+0004a850: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+0004a860: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
+0004a870: 7361 6665 5f76 616c 7565 2872 6573 706f  safe_value(respo
+0004a880: 6e73 652c 2027 7265 7375 6c74 272c 207b  nse, 'result', {
+0004a890: 7d29 0a20 2020 2020 2020 2064 6174 6120  }).        data 
+0004a8a0: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+0004a8b0: 6528 7265 7375 6c74 2c20 2772 6f77 7327  e(result, 'rows'
+0004a8c0: 2c20 5b5d 290a 2020 2020 2020 2020 7265  , []).        re
+0004a8d0: 7475 726e 2073 656c 662e 7061 7273 655f  turn self.parse_
+0004a8e0: 7472 616e 7361 6374 696f 6e73 2864 6174  transactions(dat
+0004a8f0: 612c 2063 7572 7265 6e63 792c 2073 696e  a, currency, sin
+0004a900: 6365 2c20 6c69 6d69 7429 0a0a 2020 2020  ce, limit)..    
+0004a910: 6465 6620 7061 7273 655f 7472 616e 7361  def parse_transa
+0004a920: 6374 696f 6e5f 7374 6174 7573 2873 656c  ction_status(sel
+0004a930: 662c 2073 7461 7475 7329 3a0a 2020 2020  f, status):.    
+0004a940: 2020 2020 7374 6174 7573 6573 203d 207b      statuses = {
+0004a950: 0a20 2020 2020 2020 2020 2020 2023 2076  .            # v
+0004a960: 312f 7632 0a20 2020 2020 2020 2020 2020  1/v2.           
+0004a970: 2027 546f 4265 436f 6e66 6972 6d65 6427   'ToBeConfirmed'
+0004a980: 3a20 2770 656e 6469 6e67 272c 0a20 2020  : 'pending',.   
+0004a990: 2020 2020 2020 2020 2027 556e 6465 7252           'UnderR
+0004a9a0: 6576 6965 7727 3a20 2770 656e 6469 6e67  eview': 'pending
+0004a9b0: 272c 0a20 2020 2020 2020 2020 2020 2027  ',.            '
+0004a9c0: 5375 6363 6573 7327 3a20 276f 6b27 2c0a  Success': 'ok',.
+0004a9d0: 2020 2020 2020 2020 2020 2020 2745 7870              'Exp
+0004a9e0: 6972 6527 3a20 2765 7870 6972 6564 272c  ire': 'expired',
+0004a9f0: 0a20 2020 2020 2020 2020 2020 2023 2076  .            # v
+0004aa00: 3320 6465 706f 7369 7420 7374 6174 7573  3 deposit status
+0004aa10: 0a20 2020 2020 2020 2020 2020 2027 3027  .            '0'
+0004aa20: 3a20 2775 6e6b 6e6f 776e 272c 0a20 2020  : 'unknown',.   
+0004aa30: 2020 2020 2020 2020 2027 3127 3a20 2770           '1': 'p
+0004aa40: 656e 6469 6e67 272c 0a20 2020 2020 2020  ending',.       
+0004aa50: 2020 2020 2027 3227 3a20 2770 726f 6365       '2': 'proce
+0004aa60: 7373 696e 6727 2c0a 2020 2020 2020 2020  ssing',.        
+0004aa70: 2020 2020 2733 273a 2027 6f6b 272c 0a20      '3': 'ok',. 
+0004aa80: 2020 2020 2020 2020 2020 2027 3427 3a20             '4': 
+0004aa90: 2766 6169 6c27 2c0a 2020 2020 2020 2020  'fail',.        
+0004aaa0: 2020 2020 2320 7633 2077 6974 6864 7261      # v3 withdra
+0004aab0: 7761 6c20 7374 6174 7573 0a20 2020 2020  wal status.     
+0004aac0: 2020 2020 2020 2027 5365 6375 7269 7479         'Security
+0004aad0: 4368 6563 6b27 3a20 2770 656e 6469 6e67  Check': 'pending
+0004aae0: 272c 0a20 2020 2020 2020 2020 2020 2027  ',.            '
+0004aaf0: 5065 6e64 696e 6727 3a20 2770 656e 6469  Pending': 'pendi
+0004ab00: 6e67 272c 0a20 2020 2020 2020 2020 2020  ng',.           
+0004ab10: 2027 7375 6363 6573 7327 3a20 276f 6b27   'success': 'ok'
+0004ab20: 2c0a 2020 2020 2020 2020 2020 2020 2743  ,.            'C
+0004ab30: 616e 6365 6c42 7955 7365 7227 3a20 2763  ancelByUser': 'c
+0004ab40: 616e 6365 6c65 6427 2c0a 2020 2020 2020  anceled',.      
+0004ab50: 2020 2020 2020 2752 656a 6563 7427 3a20        'Reject': 
+0004ab60: 2772 656a 6563 7465 6427 2c0a 2020 2020  'rejected',.    
+0004ab70: 2020 2020 2020 2020 2746 6169 6c27 3a20          'Fail': 
+0004ab80: 2766 6169 6c65 6427 2c0a 2020 2020 2020  'failed',.      
+0004ab90: 2020 2020 2020 2742 6c6f 636b 6368 6169        'Blockchai
+0004aba0: 6e43 6f6e 6669 726d 6564 273a 2027 6f6b  nConfirmed': 'ok
+0004abb0: 272c 0a20 2020 2020 2020 207d 0a20 2020  ',.        }.   
+0004abc0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+0004abd0: 2e73 6166 655f 7374 7269 6e67 2873 7461  .safe_string(sta
+0004abe0: 7475 7365 732c 2073 7461 7475 732c 2073  tuses, status, s
+0004abf0: 7461 7475 7329 0a0a 2020 2020 6465 6620  tatus)..    def 
+0004ac00: 7061 7273 655f 7472 616e 7361 6374 696f  parse_transactio
+0004ac10: 6e28 7365 6c66 2c20 7472 616e 7361 6374  n(self, transact
+0004ac20: 696f 6e2c 2063 7572 7265 6e63 793d 4e6f  ion, currency=No
+0004ac30: 6e65 293a 0a20 2020 2020 2020 2023 0a20  ne):.        #. 
+0004ac40: 2020 2020 2020 2023 2066 6574 6368 5769         # fetchWi
+0004ac50: 7468 6472 6177 616c 730a 2020 2020 2020  thdrawals.      
+0004ac60: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
+0004ac70: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+0004ac80: 2020 2020 2020 2263 6f69 6e22 3a20 2255        "coin": "U
+0004ac90: 5344 5422 2c0a 2020 2020 2020 2020 2320  SDT",.        # 
+0004aca0: 2020 2020 2020 2020 2263 6861 696e 223a          "chain":
+0004acb0: 2022 5452 5822 2c0a 2020 2020 2020 2020   "TRX",.        
+0004acc0: 2320 2020 2020 2020 2020 2261 6d6f 756e  #         "amoun
+0004acd0: 7422 3a20 2231 322e 3334 222c 0a20 2020  t": "12.34",.   
+0004ace0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0004acf0: 7478 4944 223a 2022 6465 3565 6130 6132  txID": "de5ea0a2
+0004ad00: 6632 6535 3964 6339 6137 3134 3833 3764  f2e59dc9a714837d
+0004ad10: 6433 6464 6336 6435 6531 3531 6235 3665  d3ddc6d5e151b56e
+0004ad20: 6335 6437 3836 6433 3531 6334 6635 3233  c5d786d351c4f523
+0004ad30: 3336 6638 3064 3363 222c 0a20 2020 2020  36f80d3c",.     
+0004ad40: 2020 2023 2020 2020 2020 2020 2022 7374     #         "st
+0004ad50: 6174 7573 223a 2022 7375 6363 6573 7322  atus": "success"
+0004ad60: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004ad70: 2020 2020 2274 6f41 6464 7265 7373 223a      "toAddress":
+0004ad80: 2022 5451 646d 464b 556f 6531 4c6b 3269   "TQdmFKUoe1Lk2i
+0004ad90: 775a 7577 524a 4548 4a72 6554 5542 6f4e  wZuwRJEHJreTUBoN
+0004ada0: 3342 4177 222c 0a20 2020 2020 2020 2023  3BAw",.        #
+0004adb0: 2020 2020 2020 2020 2022 7461 6722 3a20           "tag": 
+0004adc0: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
+0004add0: 2020 2020 2020 2277 6974 6864 7261 7746        "withdrawF
+0004ade0: 6565 223a 2022 302e 3522 2c0a 2020 2020  ee": "0.5",.    
+0004adf0: 2020 2020 2320 2020 2020 2020 2020 2263      #         "c
+0004ae00: 7265 6174 6554 696d 6522 3a20 2231 3636  reateTime": "166
+0004ae10: 3531 3434 3138 3330 3030 222c 0a20 2020  5144183000",.   
+0004ae20: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0004ae30: 7570 6461 7465 5469 6d65 223a 2022 3136  updateTime": "16
+0004ae40: 3635 3134 3432 3536 3030 3022 2c0a 2020  65144256000",.  
+0004ae50: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0004ae60: 2277 6974 6864 7261 7749 6422 3a20 2238  "withdrawId": "8
+0004ae70: 3833 3930 3335 220a 2020 2020 2020 2020  839035".        
+0004ae80: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
+0004ae90: 230a 2020 2020 2020 2020 2320 6665 7463  #.        # fetc
+0004aea0: 6844 6570 6f73 6974 730a 2020 2020 2020  hDeposits.      
+0004aeb0: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
+0004aec0: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+0004aed0: 2020 2020 2020 2263 6f69 6e22 3a20 2255        "coin": "U
+0004aee0: 5344 5422 2c0a 2020 2020 2020 2020 2320  SDT",.        # 
+0004aef0: 2020 2020 2020 2020 2263 6861 696e 223a          "chain":
+0004af00: 2022 5452 5822 2c0a 2020 2020 2020 2020   "TRX",.        
+0004af10: 2320 2020 2020 2020 2020 2261 6d6f 756e  #         "amoun
+0004af20: 7422 3a20 2234 3422 2c0a 2020 2020 2020  t": "44",.      
+0004af30: 2020 2320 2020 2020 2020 2020 2274 7849    #         "txI
+0004af40: 4422 3a20 2230 6230 3338 6561 3132 6661  D": "0b038ea12fa
+0004af50: 3135 3735 6532 6436 3636 3933 6462 3363  1575e2d66693db3c
+0004af60: 3334 3662 3730 3064 3462 3238 3334 3761  346b700d4b28347a
+0004af70: 6663 3339 6638 3033 3231 6366 3038 3961  fc39f80321cf089a
+0004af80: 6363 3936 3022 2c0a 2020 2020 2020 2020  cc960",.        
+0004af90: 2320 2020 2020 2020 2020 2273 7461 7475  #         "statu
+0004afa0: 7322 3a20 2233 222c 0a20 2020 2020 2020  s": "3",.       
+0004afb0: 2023 2020 2020 2020 2020 2022 746f 4164   #         "toAd
+0004afc0: 6472 6573 7322 3a20 2254 4336 4e43 4143  dress": "TC6NCAC
+0004afd0: 3557 5356 4343 6961 4433 6b57 5a58 7957  5WSVCCiaD3kWZXyW
+0004afe0: 3931 5a4b 4b68 4c6d 3533 6222 2c0a 2020  91ZKKhLm53b",.  
+0004aff0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0004b000: 2274 6167 223a 2022 222c 0a20 2020 2020  "tag": "",.     
+0004b010: 2020 2023 2020 2020 2020 2020 2022 6465     #         "de
+0004b020: 706f 7369 7446 6565 223a 2022 222c 0a20  positFee": "",. 
+0004b030: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004b040: 2022 7375 6363 6573 7341 7422 3a20 2231   "successAt": "1
+0004b050: 3636 3531 3432 3530 3730 3030 222c 0a20  665142507000",. 
+0004b060: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004b070: 2022 636f 6e66 6972 6d61 7469 6f6e 7322   "confirmations"
+0004b080: 3a20 2231 3030 222c 0a20 2020 2020 2020  : "100",.       
+0004b090: 2023 2020 2020 2020 2020 2022 7478 496e   #         "txIn
+0004b0a0: 6465 7822 3a20 2230 222c 0a20 2020 2020  dex": "0",.     
+0004b0b0: 2020 2023 2020 2020 2020 2020 2022 626c     #         "bl
+0004b0c0: 6f63 6b48 6173 6822 3a20 2230 3030 3030  ockHash": "00000
+0004b0d0: 3030 3030 3261 6333 6231 3036 3461 6565  00002ac3b1064aee
+0004b0e0: 3934 6263 6131 6264 3062 3538 6334 6330  94bca1bd0b58c4c0
+0004b0f0: 3963 3635 3831 3362 3038 3462 3837 6132  9c65813b084b87a2
+0004b100: 3036 3364 3936 3131 3239 6522 0a20 2020  063d961129e".   
+0004b110: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
+0004b120: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+0004b130: 2077 6974 6864 7261 770a 2020 2020 2020   withdraw.      
+0004b140: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
+0004b150: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+0004b160: 2020 2020 2020 2269 6422 3a20 2239 3337        "id": "937
+0004b170: 3732 3636 220a 2020 2020 2020 2020 2320  7266".        # 
+0004b180: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
+0004b190: 2020 2020 2020 2020 6375 7272 656e 6379          currency
+0004b1a0: 4964 203d 2073 656c 662e 7361 6665 5f73  Id = self.safe_s
+0004b1b0: 7472 696e 6728 7472 616e 7361 6374 696f  tring(transactio
+0004b1c0: 6e2c 2027 636f 696e 2729 0a20 2020 2020  n, 'coin').     
+0004b1d0: 2020 2063 6f64 6520 3d20 7365 6c66 2e73     code = self.s
+0004b1e0: 6166 655f 6375 7272 656e 6379 5f63 6f64  afe_currency_cod
+0004b1f0: 6528 6375 7272 656e 6379 4964 2c20 6375  e(currencyId, cu
+0004b200: 7272 656e 6379 290a 2020 2020 2020 2020  rrency).        
+0004b210: 7469 6d65 7374 616d 7020 3d20 7365 6c66  timestamp = self
+0004b220: 2e73 6166 655f 696e 7465 6765 725f 3228  .safe_integer_2(
+0004b230: 7472 616e 7361 6374 696f 6e2c 2027 6372  transaction, 'cr
+0004b240: 6561 7465 5469 6d65 272c 2027 7375 6363  eateTime', 'succ
+0004b250: 6573 7341 7427 290a 2020 2020 2020 2020  essAt').        
+0004b260: 7570 6461 7465 6420 3d20 7365 6c66 2e73  updated = self.s
+0004b270: 6166 655f 696e 7465 6765 7228 7472 616e  afe_integer(tran
+0004b280: 7361 6374 696f 6e2c 2027 7570 6461 7465  saction, 'update
+0004b290: 5469 6d65 2729 0a20 2020 2020 2020 2073  Time').        s
+0004b2a0: 7461 7475 7320 3d20 7365 6c66 2e70 6172  tatus = self.par
+0004b2b0: 7365 5f74 7261 6e73 6163 7469 6f6e 5f73  se_transaction_s
+0004b2c0: 7461 7475 7328 7365 6c66 2e73 6166 655f  tatus(self.safe_
+0004b2d0: 7374 7269 6e67 2874 7261 6e73 6163 7469  string(transacti
+0004b2e0: 6f6e 2c20 2773 7461 7475 7327 2929 0a20  on, 'status')). 
+0004b2f0: 2020 2020 2020 2066 6565 436f 7374 203d         feeCost =
+0004b300: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
+0004b310: 725f 3228 7472 616e 7361 6374 696f 6e2c  r_2(transaction,
+0004b320: 2027 6465 706f 7369 7446 6565 272c 2027   'depositFee', '
+0004b330: 7769 7468 6472 6177 4665 6527 2c20 3029  withdrawFee', 0)
+0004b340: 0a20 2020 2020 2020 2074 7970 6520 3d20  .        type = 
+0004b350: 2764 6570 6f73 6974 2720 6966 2028 2764  'deposit' if ('d
+0004b360: 6570 6f73 6974 4665 6527 2069 6e20 7472  epositFee' in tr
+0004b370: 616e 7361 6374 696f 6e29 2065 6c73 6520  ansaction) else 
+0004b380: 2777 6974 6864 7261 7761 6c27 0a20 2020  'withdrawal'.   
+0004b390: 2020 2020 2066 6565 203d 204e 6f6e 650a       fee = None.
+0004b3a0: 2020 2020 2020 2020 6966 2066 6565 436f          if feeCo
+0004b3b0: 7374 2069 7320 6e6f 7420 4e6f 6e65 3a0a  st is not None:.
+0004b3c0: 2020 2020 2020 2020 2020 2020 6665 6520              fee 
+0004b3d0: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+0004b3e0: 2020 2020 2763 6f73 7427 3a20 6665 6543      'cost': feeC
+0004b3f0: 6f73 742c 0a20 2020 2020 2020 2020 2020  ost,.           
+0004b400: 2020 2020 2027 6375 7272 656e 6379 273a       'currency':
+0004b410: 2063 6f64 652c 0a20 2020 2020 2020 2020   code,.         
+0004b420: 2020 207d 0a20 2020 2020 2020 2074 6f41     }.        toA
+0004b430: 6464 7265 7373 203d 2073 656c 662e 7361  ddress = self.sa
+0004b440: 6665 5f73 7472 696e 6728 7472 616e 7361  fe_string(transa
+0004b450: 6374 696f 6e2c 2027 746f 4164 6472 6573  ction, 'toAddres
+0004b460: 7327 290a 2020 2020 2020 2020 7265 7475  s').        retu
+0004b470: 726e 207b 0a20 2020 2020 2020 2020 2020  rn {.           
+0004b480: 2027 696e 666f 273a 2074 7261 6e73 6163   'info': transac
+0004b490: 7469 6f6e 2c0a 2020 2020 2020 2020 2020  tion,.          
+0004b4a0: 2020 2769 6427 3a20 7365 6c66 2e73 6166    'id': self.saf
+0004b4b0: 655f 7374 7269 6e67 5f32 2874 7261 6e73  e_string_2(trans
+0004b4c0: 6163 7469 6f6e 2c20 2769 6427 2c20 2777  action, 'id', 'w
+0004b4d0: 6974 6864 7261 7749 6427 292c 0a20 2020  ithdrawId'),.   
+0004b4e0: 2020 2020 2020 2020 2027 7478 6964 273a           'txid':
+0004b4f0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+0004b500: 6728 7472 616e 7361 6374 696f 6e2c 2027  g(transaction, '
+0004b510: 7478 4944 2729 2c0a 2020 2020 2020 2020  txID'),.        
+0004b520: 2020 2020 2774 696d 6573 7461 6d70 273a      'timestamp':
+0004b530: 2074 696d 6573 7461 6d70 2c0a 2020 2020   timestamp,.    
+0004b540: 2020 2020 2020 2020 2764 6174 6574 696d          'datetim
+0004b550: 6527 3a20 7365 6c66 2e69 736f 3836 3031  e': self.iso8601
+0004b560: 2874 696d 6573 7461 6d70 292c 0a20 2020  (timestamp),.   
+0004b570: 2020 2020 2020 2020 2027 6e65 7477 6f72           'networ
+0004b580: 6b27 3a20 7365 6c66 2e6e 6574 776f 726b  k': self.network
+0004b590: 5f69 645f 746f 5f63 6f64 6528 7365 6c66  _id_to_code(self
+0004b5a0: 2e73 6166 655f 7374 7269 6e67 2874 7261  .safe_string(tra
+0004b5b0: 6e73 6163 7469 6f6e 2c20 2763 6861 696e  nsaction, 'chain
+0004b5c0: 2729 292c 0a20 2020 2020 2020 2020 2020  ')),.           
+0004b5d0: 2027 6164 6472 6573 7327 3a20 4e6f 6e65   'address': None
+0004b5e0: 2c0a 2020 2020 2020 2020 2020 2020 2761  ,.            'a
+0004b5f0: 6464 7265 7373 546f 273a 2074 6f41 6464  ddressTo': toAdd
+0004b600: 7265 7373 2c0a 2020 2020 2020 2020 2020  ress,.          
+0004b610: 2020 2761 6464 7265 7373 4672 6f6d 273a    'addressFrom':
+0004b620: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
+0004b630: 2020 2027 7461 6727 3a20 7365 6c66 2e73     'tag': self.s
+0004b640: 6166 655f 7374 7269 6e67 2874 7261 6e73  afe_string(trans
+0004b650: 6163 7469 6f6e 2c20 2774 6167 2729 2c0a  action, 'tag'),.
+0004b660: 2020 2020 2020 2020 2020 2020 2774 6167              'tag
+0004b670: 546f 273a 204e 6f6e 652c 0a20 2020 2020  To': None,.     
+0004b680: 2020 2020 2020 2027 7461 6746 726f 6d27         'tagFrom'
+0004b690: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
+0004b6a0: 2020 2020 2774 7970 6527 3a20 7479 7065      'type': type
+0004b6b0: 2c0a 2020 2020 2020 2020 2020 2020 2761  ,.            'a
+0004b6c0: 6d6f 756e 7427 3a20 7365 6c66 2e73 6166  mount': self.saf
+0004b6d0: 655f 6e75 6d62 6572 2874 7261 6e73 6163  e_number(transac
+0004b6e0: 7469 6f6e 2c20 2761 6d6f 756e 7427 292c  tion, 'amount'),
+0004b6f0: 0a20 2020 2020 2020 2020 2020 2027 6375  .            'cu
+0004b700: 7272 656e 6379 273a 2063 6f64 652c 0a20  rrency': code,. 
+0004b710: 2020 2020 2020 2020 2020 2027 7374 6174             'stat
+0004b720: 7573 273a 2073 7461 7475 732c 0a20 2020  us': status,.   
+0004b730: 2020 2020 2020 2020 2027 7570 6461 7465           'update
+0004b740: 6427 3a20 7570 6461 7465 642c 0a20 2020  d': updated,.   
+0004b750: 2020 2020 2020 2020 2027 6665 6527 3a20           'fee': 
+0004b760: 6665 652c 0a20 2020 2020 2020 207d 0a0a  fee,.        }..
+0004b770: 2020 2020 6465 6620 6665 7463 685f 6c65      def fetch_le
+0004b780: 6467 6572 2873 656c 662c 2063 6f64 653a  dger(self, code:
+0004b790: 204f 7074 696f 6e61 6c5b 7374 725d 203d   Optional[str] =
+0004b7a0: 204e 6f6e 652c 2073 696e 6365 3a20 4f70   None, since: Op
+0004b7b0: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
+0004b7c0: 6e65 2c20 6c69 6d69 743a 204f 7074 696f  ne, limit: Optio
+0004b7d0: 6e61 6c5b 696e 745d 203d 204e 6f6e 652c  nal[int] = None,
+0004b7e0: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
+0004b7f0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0004b800: 2066 6574 6368 2074 6865 2068 6973 746f   fetch the histo
+0004b810: 7279 206f 6620 6368 616e 6765 732c 2061  ry of changes, a
+0004b820: 6374 696f 6e73 2064 6f6e 6520 6279 2074  ctions done by t
+0004b830: 6865 2075 7365 7220 6f72 206f 7065 7261  he user or opera
+0004b840: 7469 6f6e 7320 7468 6174 2061 6c74 6572  tions that alter
+0004b850: 6564 2062 616c 616e 6365 206f 6620 7468  ed balance of th
+0004b860: 6520 7573 6572 0a20 2020 2020 2020 2073  e user.        s
+0004b870: 6565 2068 7474 7073 3a2f 2f62 7962 6974  ee https://bybit
+0004b880: 2d65 7863 6861 6e67 652e 6769 7468 7562  -exchange.github
+0004b890: 2e69 6f2f 646f 6373 2f76 352f 6163 636f  .io/docs/v5/acco
+0004b8a0: 756e 742f 7472 616e 7361 6374 696f 6e2d  unt/transaction-
+0004b8b0: 6c6f 670a 2020 2020 2020 2020 3a70 6172  log.        :par
+0004b8c0: 616d 2073 7472 7c4e 6f6e 6520 636f 6465  am str|None code
+0004b8d0: 3a20 756e 6966 6965 6420 6375 7272 656e  : unified curren
+0004b8e0: 6379 2063 6f64 652c 2064 6566 6175 6c74  cy code, default
+0004b8f0: 2069 7320 4e6f 6e65 0a20 2020 2020 2020   is None.       
+0004b900: 203a 7061 7261 6d20 696e 747c 4e6f 6e65   :param int|None
+0004b910: 2073 696e 6365 3a20 7469 6d65 7374 616d   since: timestam
+0004b920: 7020 696e 206d 7320 6f66 2074 6865 2065  p in ms of the e
+0004b930: 6172 6c69 6573 7420 6c65 6467 6572 2065  arliest ledger e
+0004b940: 6e74 7279 2c20 6465 6661 756c 7420 6973  ntry, default is
+0004b950: 204e 6f6e 650a 2020 2020 2020 2020 3a70   None.        :p
+0004b960: 6172 616d 2069 6e74 7c4e 6f6e 6520 6c69  aram int|None li
+0004b970: 6d69 743a 206d 6178 206e 756d 6265 7220  mit: max number 
+0004b980: 6f66 206c 6564 6765 7220 656e 7472 7973  of ledger entrys
+0004b990: 2074 6f20 7265 7475 726e 2c20 6465 6661   to return, defa
+0004b9a0: 756c 7420 6973 204e 6f6e 650a 2020 2020  ult is None.    
+0004b9b0: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
+0004b9c0: 7061 7261 6d73 3a20 6578 7472 6120 7061  params: extra pa
+0004b9d0: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
+0004b9e0: 6320 746f 2074 6865 2062 7962 6974 2061  c to the bybit a
+0004b9f0: 7069 2065 6e64 706f 696e 740a 2020 2020  pi endpoint.    
+0004ba00: 2020 2020 3a72 6574 7572 6e73 2064 6963      :returns dic
+0004ba10: 743a 2061 2060 6c65 6467 6572 2073 7472  t: a `ledger str
+0004ba20: 7563 7475 7265 203c 6874 7470 733a 2f2f  ucture <https://
+0004ba30: 646f 6373 2e63 6378 742e 636f 6d2f 232f  docs.ccxt.com/#/
+0004ba40: 3f69 643d 6c65 6467 6572 2d73 7472 7563  ?id=ledger-struc
+0004ba50: 7475 7265 3e60 0a20 2020 2020 2020 2022  ture>`.        "
+0004ba60: 2222 0a20 2020 2020 2020 2073 656c 662e  "".        self.
+0004ba70: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
+0004ba80: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+0004ba90: 207b 0a20 2020 2020 2020 2020 2020 2023   {.            #
+0004baa0: 2027 636f 696e 273a 2063 7572 7265 6e63   'coin': currenc
+0004bab0: 795b 2769 6427 5d2c 0a20 2020 2020 2020  y['id'],.       
+0004bac0: 2020 2020 2023 2027 6375 7272 656e 6379       # 'currency
+0004bad0: 273a 2063 7572 7265 6e63 795b 2769 6427  ': currency['id'
+0004bae0: 5d2c 2020 2320 616c 6961 730a 2020 2020  ],  # alias.    
+0004baf0: 2020 2020 2020 2020 2320 2773 7461 7274          # 'start
+0004bb00: 5f64 6174 6527 3a20 7365 6c66 2e69 736f  _date': self.iso
+0004bb10: 3836 3031 2873 696e 6365 292c 0a20 2020  8601(since),.   
+0004bb20: 2020 2020 2020 2020 2023 2027 656e 645f           # 'end_
+0004bb30: 6461 7465 273a 2073 656c 662e 6973 6f38  date': self.iso8
+0004bb40: 3630 3128 7469 6c6c 292c 0a20 2020 2020  601(till),.     
+0004bb50: 2020 2020 2020 2023 2027 7761 6c6c 6574         # 'wallet
+0004bb60: 5f66 756e 645f 7479 7065 273a 2027 4465  _fund_type': 'De
+0004bb70: 706f 7369 7427 2c20 2023 2057 6974 6864  posit',  # Withd
+0004bb80: 7261 772c 2052 6561 6c69 7365 6450 4e4c  raw, RealisedPNL
+0004bb90: 2c20 436f 6d6d 6973 7369 6f6e 2c20 5265  , Commission, Re
+0004bba0: 6675 6e64 2c20 5072 697a 652c 2045 7863  fund, Prize, Exc
+0004bbb0: 6861 6e67 654f 7264 6572 5769 7468 6472  hangeOrderWithdr
+0004bbc0: 6177 2c20 4578 6368 616e 6765 4f72 6465  aw, ExchangeOrde
+0004bbd0: 7244 6570 6f73 6974 0a20 2020 2020 2020  rDeposit.       
+0004bbe0: 2020 2020 2023 2027 7061 6765 273a 2031       # 'page': 1
+0004bbf0: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+0004bc00: 276c 696d 6974 273a 2032 302c 2020 2320  'limit': 20,  # 
+0004bc10: 6d61 7820 3530 0a20 2020 2020 2020 2020  max 50.         
+0004bc20: 2020 2023 2076 3520 7472 616e 7361 6374     # v5 transact
+0004bc30: 696f 6e20 6c6f 670a 2020 2020 2020 2020  ion log.        
+0004bc40: 2020 2020 2320 2761 6363 6f75 6e74 5479      # 'accountTy
+0004bc50: 7065 273a 2027 272c 2041 6363 6f75 6e74  pe': '', Account
+0004bc60: 2054 7970 652e 2055 4e49 4649 4544 0a20   Type. UNIFIED. 
+0004bc70: 2020 2020 2020 2020 2020 2023 2027 6361             # 'ca
+0004bc80: 7465 676f 7279 273a 2027 272c 2050 726f  tegory': '', Pro
+0004bc90: 6475 6374 2074 7970 652e 2073 706f 742c  duct type. spot,
+0004bca0: 6c69 6e65 6172 2c6f 7074 696f 6e0a 2020  linear,option.  
+0004bcb0: 2020 2020 2020 2020 2020 2320 2763 7572            # 'cur
+0004bcc0: 7265 6e63 7927 3a20 2727 2c20 4375 7272  rency': '', Curr
+0004bcd0: 656e 6379 0a20 2020 2020 2020 2020 2020  ency.           
+0004bce0: 2023 2027 6261 7365 436f 696e 273a 2027   # 'baseCoin': '
+0004bcf0: 272c 2042 6173 6543 6f69 6e2e 2065 2e67  ', BaseCoin. e.g
+0004bd00: 2e2c 2042 5443 206f 6620 4254 4350 4552  ., BTC of BTCPER
+0004bd10: 500a 2020 2020 2020 2020 2020 2020 2320  P.            # 
+0004bd20: 2774 7970 6527 3a20 2727 2c20 5479 7065  'type': '', Type
+0004bd30: 7320 6f66 2074 7261 6e73 6163 7469 6f6e  s of transaction
+0004bd40: 206c 6f67 730a 2020 2020 2020 2020 2020   logs.          
+0004bd50: 2020 2320 2773 7461 7274 5469 6d65 273a    # 'startTime':
+0004bd60: 2030 2c20 5468 6520 7374 6172 7420 7469   0, The start ti
+0004bd70: 6d65 7374 616d 7028 6d73 290a 2020 2020  mestamp(ms).    
+0004bd80: 2020 2020 2020 2020 2320 2765 6e64 5469          # 'endTi
+0004bd90: 6d65 273a 2030 2c20 5468 6520 656e 6420  me': 0, The end 
+0004bda0: 7469 6d65 7374 616d 7028 6d73 290a 2020  timestamp(ms).  
+0004bdb0: 2020 2020 2020 2020 2020 2320 276c 696d            # 'lim
+0004bdc0: 6974 273a 2030 2c20 4c69 6d69 7420 666f  it': 0, Limit fo
+0004bdd0: 7220 6461 7461 2073 697a 6520 7065 7220  r data size per 
+0004bde0: 7061 6765 2e20 5b31 2c20 3530 5d2e 2044  page. [1, 50]. D
+0004bdf0: 6566 6175 6c74 3a20 3230 0a20 2020 2020  efault: 20.     
+0004be00: 2020 2020 2020 2023 2027 6375 7273 6f72         # 'cursor
+0004be10: 273a 2027 272c 2043 7572 736f 722e 2055  ': '', Cursor. U
+0004be20: 7365 6420 666f 7220 7061 6769 6e61 7469  sed for paginati
+0004be30: 6f6e 0a20 2020 2020 2020 207d 0a20 2020  on.        }.   
+0004be40: 2020 2020 2065 6e61 626c 6555 6e69 6669       enableUnifi
+0004be50: 6564 203d 2073 656c 662e 6973 5f75 6e69  ed = self.is_uni
+0004be60: 6669 6564 5f65 6e61 626c 6564 2829 0a20  fied_enabled(). 
+0004be70: 2020 2020 2020 2063 7572 7265 6e63 7920         currency 
+0004be80: 3d20 4e6f 6e65 0a20 2020 2020 2020 2063  = None.        c
+0004be90: 7572 7265 6e63 794b 6579 203d 2027 636f  urrencyKey = 'co
+0004bea0: 696e 270a 2020 2020 2020 2020 6966 2065  in'.        if e
+0004beb0: 6e61 626c 6555 6e69 6669 6564 5b31 5d3a  nableUnified[1]:
+0004bec0: 0a20 2020 2020 2020 2020 2020 2063 7572  .            cur
+0004bed0: 7265 6e63 794b 6579 203d 2027 6375 7272  rencyKey = 'curr
+0004bee0: 656e 6379 270a 2020 2020 2020 2020 2020  ency'.          
+0004bef0: 2020 6966 2073 696e 6365 2069 7320 6e6f    if since is no
+0004bf00: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+0004bf10: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+0004bf20: 2773 7461 7274 5469 6d65 275d 203d 2073  'startTime'] = s
+0004bf30: 696e 6365 0a20 2020 2020 2020 2065 6c73  ince.        els
+0004bf40: 653a 0a20 2020 2020 2020 2020 2020 2069  e:.            i
+0004bf50: 6620 7369 6e63 6520 6973 206e 6f74 204e  f since is not N
+0004bf60: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+0004bf70: 2020 2020 2072 6571 7565 7374 5b27 7374       request['st
+0004bf80: 6172 745f 6461 7465 275d 203d 2073 656c  art_date'] = sel
+0004bf90: 662e 7979 7979 6d6d 6464 2873 696e 6365  f.yyyymmdd(since
+0004bfa0: 290a 2020 2020 2020 2020 6d65 7468 6f64  ).        method
+0004bfb0: 203d 2027 7072 6976 6174 6547 6574 5635   = 'privateGetV5
+0004bfc0: 4163 636f 756e 7454 7261 6e73 6163 7469  AccountTransacti
+0004bfd0: 6f6e 4c6f 6727 2069 6620 2865 6e61 626c  onLog' if (enabl
+0004bfe0: 6555 6e69 6669 6564 5b31 5d29 2065 6c73  eUnified[1]) els
+0004bff0: 6520 2770 7269 7661 7465 4765 7456 3250  e 'privateGetV2P
+0004c000: 7269 7661 7465 5761 6c6c 6574 4675 6e64  rivateWalletFund
+0004c010: 5265 636f 7264 7327 0a20 2020 2020 2020  Records'.       
+0004c020: 2069 6620 636f 6465 2069 7320 6e6f 7420   if code is not 
+0004c030: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+0004c040: 2020 6375 7272 656e 6379 203d 2073 656c    currency = sel
+0004c050: 662e 6375 7272 656e 6379 2863 6f64 6529  f.currency(code)
+0004c060: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+0004c070: 7565 7374 5b63 7572 7265 6e63 794b 6579  uest[currencyKey
+0004c080: 5d20 3d20 6375 7272 656e 6379 5b27 6964  ] = currency['id
+0004c090: 275d 0a20 2020 2020 2020 2069 6620 6c69  '].        if li
+0004c0a0: 6d69 7420 6973 206e 6f74 204e 6f6e 653a  mit is not None:
+0004c0b0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+0004c0c0: 7565 7374 5b27 6c69 6d69 7427 5d20 3d20  uest['limit'] = 
+0004c0d0: 6c69 6d69 740a 2020 2020 2020 2020 7265  limit.        re
+0004c0e0: 7370 6f6e 7365 203d 2067 6574 6174 7472  sponse = getattr
+0004c0f0: 2873 656c 662c 206d 6574 686f 6429 2873  (self, method)(s
+0004c100: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
+0004c110: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
+0004c120: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+0004c130: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+0004c140: 2020 2020 2020 2020 2022 7265 745f 636f           "ret_co
+0004c150: 6465 223a 2030 2c0a 2020 2020 2020 2020  de": 0,.        
+0004c160: 2320 2020 2020 2020 2020 2272 6574 5f6d  #         "ret_m
+0004c170: 7367 223a 2022 6f6b 222c 0a20 2020 2020  sg": "ok",.     
+0004c180: 2020 2023 2020 2020 2020 2020 2022 6578     #         "ex
+0004c190: 745f 636f 6465 223a 2022 222c 0a20 2020  t_code": "",.   
+0004c1a0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0004c1b0: 7265 7375 6c74 223a 207b 0a20 2020 2020  result": {.     
+0004c1c0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004c1d0: 2022 6461 7461 223a 205b 0a20 2020 2020   "data": [.     
+0004c1e0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004c1f0: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+0004c200: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004c210: 2020 2020 2022 6964 223a 2032 3334 3436       "id": 23446
+0004c220: 372c 0a20 2020 2020 2020 2023 2020 2020  7,.        #    
+0004c230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004c240: 2022 7573 6572 5f69 6422 3a20 312c 0a20   "user_id": 1,. 
+0004c250: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004c260: 2020 2020 2020 2020 2020 2020 2022 636f               "co
+0004c270: 696e 223a 2022 4254 4322 2c0a 2020 2020  in": "BTC",.    
+0004c280: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004c290: 2020 2020 2020 2020 2020 2277 616c 6c65            "walle
+0004c2a0: 745f 6964 223a 2032 3739 3133 2c0a 2020  t_id": 27913,.  
+0004c2b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0004c2c0: 2020 2020 2020 2020 2020 2020 2274 7970              "typ
+0004c2d0: 6522 3a20 2252 6561 6c69 7a65 6420 5026  e": "Realized P&
+0004c2e0: 4c22 2c0a 2020 2020 2020 2020 2320 2020  L",.        #   
+0004c2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004c300: 2020 2261 6d6f 756e 7422 3a20 222d 302e    "amount": "-0.
+0004c310: 3030 3030 3030 3036 222c 0a20 2020 2020  00000006",.     
+0004c320: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004c330: 2020 2020 2020 2020 2022 7478 5f69 6422           "tx_id"
+0004c340: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
+0004c350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004c360: 2020 2020 2261 6464 7265 7373 223a 2022      "address": "
+0004c370: 4254 4355 5344 222c 0a20 2020 2020 2020  BTCUSD",.       
+0004c380: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0004c390: 2020 2020 2020 2022 7761 6c6c 6574 5f62         "wallet_b
+0004c3a0: 616c 616e 6365 223a 2022 302e 3033 3030  alance": "0.0300
+0004c3b0: 3033 3330 222c 0a20 2020 2020 2020 2023  0330",.        #
+0004c3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004c3d0: 2020 2020 2022 6578 6563 5f74 696d 6522       "exec_time"
+0004c3e0: 3a20 2232 3031 392d 3132 2d30 3954 3030  : "2019-12-09T00
+0004c3f0: 3a30 303a 3235 2e30 3030 5a22 2c0a 2020  :00:25.000Z",.  
+0004c400: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0004c410: 2020 2020 2020 2020 2020 2020 2263 726f              "cro
+0004c420: 7373 5f73 6571 223a 2030 0a20 2020 2020  ss_seq": 0.     
+0004c430: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004c440: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+0004c450: 2020 2020 2020 2020 2020 2020 205d 0a20               ]. 
+0004c460: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004c470: 207d 2c0a 2020 2020 2020 2020 2320 2020   },.        #   
+0004c480: 2020 2020 2020 2265 7874 5f69 6e66 6f22        "ext_info"
+0004c490: 3a20 6e75 6c6c 2c0a 2020 2020 2020 2020  : null,.        
+0004c4a0: 2320 2020 2020 2020 2020 2274 696d 655f  #         "time_
+0004c4b0: 6e6f 7722 3a20 2231 3537 3734 3831 3836  now": "157748186
+0004c4c0: 372e 3131 3535 3532 222c 0a20 2020 2020  7.115552",.     
+0004c4d0: 2020 2023 2020 2020 2020 2020 2022 7261     #         "ra
+0004c4e0: 7465 5f6c 696d 6974 5f73 7461 7475 7322  te_limit_status"
+0004c4f0: 3a20 3131 392c 0a20 2020 2020 2020 2023  : 119,.        #
+0004c500: 2020 2020 2020 2020 2022 7261 7465 5f6c           "rate_l
+0004c510: 696d 6974 5f72 6573 6574 5f6d 7322 3a20  imit_reset_ms": 
+0004c520: 3135 3737 3438 3138 3637 3132 322c 0a20  1577481867122,. 
+0004c530: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004c540: 2022 7261 7465 5f6c 696d 6974 223a 2031   "rate_limit": 1
+0004c550: 3230 0a20 2020 2020 2020 2023 2020 2020  20.        #    
+0004c560: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
+0004c570: 2020 2020 2023 2076 3520 7472 616e 7361       # v5 transa
+0004c580: 6374 696f 6e20 6c6f 670a 2020 2020 2020  ction log.      
+0004c590: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
+0004c5a0: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+0004c5b0: 2020 2020 2020 2272 6574 436f 6465 223a        "retCode":
+0004c5c0: 2030 2c0a 2020 2020 2020 2020 2320 2020   0,.        #   
+0004c5d0: 2020 2020 2020 2272 6574 4d73 6722 3a20        "retMsg": 
+0004c5e0: 224f 4b22 2c0a 2020 2020 2020 2020 2320  "OK",.        # 
+0004c5f0: 2020 2020 2020 2020 2272 6573 756c 7422          "result"
+0004c600: 3a20 7b0a 2020 2020 2020 2020 2320 2020  : {.        #   
+0004c610: 2020 2020 2020 2020 2020 226e 6578 7450            "nextP
+0004c620: 6167 6543 7572 736f 7222 3a20 2232 3139  ageCursor": "219
+0004c630: 3633 2533 4131 2532 4331 3439 3534 2533  63%3A1%2C14954%3
+0004c640: 4131 222c 0a20 2020 2020 2020 2023 2020  A1",.        #  
+0004c650: 2020 2020 2020 2020 2020 2022 6c69 7374             "list
+0004c660: 223a 205b 0a20 2020 2020 2020 2023 2020  ": [.        #  
+0004c670: 2020 2020 2020 2020 2020 2020 2020 207b                 {
+0004c680: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004c690: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0004c6a0: 7379 6d62 6f6c 223a 2022 5852 5055 5344  symbol": "XRPUSD
+0004c6b0: 5422 2c0a 2020 2020 2020 2020 2320 2020  T",.        #   
+0004c6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004c6d0: 2020 2273 6964 6522 3a20 2242 7579 222c    "side": "Buy",
+0004c6e0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004c6f0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0004c700: 6675 6e64 696e 6722 3a20 222d 302e 3030  funding": "-0.00
+0004c710: 3336 3736 222c 0a20 2020 2020 2020 2023  3676",.        #
+0004c720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004c730: 2020 2020 2022 6f72 6465 724c 696e 6b49       "orderLinkI
+0004c740: 6422 3a20 2222 2c0a 2020 2020 2020 2020  d": "",.        
+0004c750: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0004c760: 2020 2020 2020 226f 7264 6572 4964 223a        "orderId":
+0004c770: 2022 3136 3732 3132 3830 3030 2d38 2d35   "1672128000-8-5
+0004c780: 3932 3332 342d 312d 3222 2c0a 2020 2020  92324-1-2",.    
+0004c790: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004c7a0: 2020 2020 2020 2020 2020 2266 6565 223a            "fee":
+0004c7b0: 2022 302e 3030 3030 3030 3030 222c 0a20   "0.00000000",. 
+0004c7c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004c7d0: 2020 2020 2020 2020 2020 2020 2022 6368               "ch
+0004c7e0: 616e 6765 223a 2022 2d30 2e30 3033 3637  ange": "-0.00367
+0004c7f0: 3622 2c0a 2020 2020 2020 2020 2320 2020  6",.        #   
+0004c800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004c810: 2020 2263 6173 6846 6c6f 7722 3a20 2230    "cashFlow": "0
+0004c820: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004c830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004c840: 2022 7472 616e 7361 6374 696f 6e54 696d   "transactionTim
+0004c850: 6522 3a20 2231 3637 3231 3238 3030 3030  e": "16721280000
+0004c860: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+0004c870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004c880: 2020 2022 7479 7065 223a 2022 5345 5454     "type": "SETT
+0004c890: 4c45 4d45 4e54 222c 0a20 2020 2020 2020  LEMENT",.       
+0004c8a0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0004c8b0: 2020 2020 2020 2022 6665 6552 6174 6522         "feeRate"
+0004c8c0: 3a20 2230 2e30 3030 3122 2c0a 2020 2020  : "0.0001",.    
+0004c8d0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004c8e0: 2020 2020 2020 2020 2020 2273 697a 6522            "size"
+0004c8f0: 3a20 2231 3030 222c 0a20 2020 2020 2020  : "100",.       
+0004c900: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0004c910: 2020 2020 2020 2022 7174 7922 3a20 2231         "qty": "1
+0004c920: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
 0004c930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004c940: 2022 6361 7465 676f 7279 223a 2022 6c69   "category": "li
-0004c950: 6e65 6172 222c 0a20 2020 2020 2020 2023  near",.        #
-0004c960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004c970: 2020 2020 2022 7472 6164 6550 7269 6365       "tradePrice
-0004c980: 223a 2022 302e 3336 3135 222c 0a20 2020  ": "0.3615",.   
-0004c990: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0004c9a0: 2020 2020 2020 2020 2020 2022 7472 6164             "trad
-0004c9b0: 6549 6422 3a20 2235 3138 3466 3037 392d  eId": "5184f079-
-0004c9c0: 3838 6563 2d35 3463 372d 3837 3734 2d35  88ec-54c7-8774-5
-0004c9d0: 3137 3363 6166 6432 6234 6522 0a20 2020  173cafd2b4e".   
-0004c9e0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0004c9f0: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
-0004ca00: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0004ca10: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-0004ca20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004ca30: 2020 2020 2273 796d 626f 6c22 3a20 2258      "symbol": "X
-0004ca40: 5250 5553 4454 222c 0a20 2020 2020 2020  RPUSDT",.       
-0004ca50: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004ca60: 2020 2020 2020 2022 7369 6465 223a 2022         "side": "
-0004ca70: 4275 7922 2c0a 2020 2020 2020 2020 2320  Buy",.        # 
-0004ca80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004ca90: 2020 2020 2266 756e 6469 6e67 223a 2022      "funding": "
-0004caa0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004cab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004cac0: 2022 6f72 6465 724c 696e 6b49 6422 3a20   "orderLinkId": 
-0004cad0: 226c 696e 6561 722d 6f72 6465 7222 2c0a  "linear-order",.
-0004cae0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004caf0: 2020 2020 2020 2020 2020 2020 2020 226f                "o
-0004cb00: 7264 6572 4964 223a 2022 3539 3262 3765  rderId": "592b7e
-0004cb10: 3431 2d37 3866 642d 3432 6532 2d39 6161  41-78fd-42e2-9aa
-0004cb20: 332d 3931 6531 3833 3565 6633 6531 222c  3-91e1835ef3e1",
-0004cb30: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004cb40: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0004cb50: 6665 6522 3a20 2230 2e30 3032 3630 3238  fee": "0.0026028
-0004cb60: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-0004cb70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004cb80: 2020 2263 6861 6e67 6522 3a20 222d 302e    "change": "-0.
-0004cb90: 3030 3236 3032 3822 2c0a 2020 2020 2020  0026028",.      
-0004cba0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0004cbb0: 2020 2020 2020 2020 2263 6173 6846 6c6f          "cashFlo
-0004cbc0: 7722 3a20 2230 222c 0a20 2020 2020 2020  w": "0",.       
-0004cbd0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004cbe0: 2020 2020 2020 2022 7472 616e 7361 6374         "transact
-0004cbf0: 696f 6e54 696d 6522 3a20 2231 3637 3231  ionTime": "16721
-0004cc00: 3231 3138 3232 3234 222c 0a20 2020 2020  21182224",.     
-0004cc10: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0004cc20: 2020 2020 2020 2020 2022 7479 7065 223a           "type":
-0004cc30: 2022 5452 4144 4522 2c0a 2020 2020 2020   "TRADE",.      
-0004cc40: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0004cc50: 2020 2020 2020 2020 2266 6565 5261 7465          "feeRate
-0004cc60: 223a 2022 302e 3030 3036 222c 0a20 2020  ": "0.0006",.   
-0004cc70: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0004cc80: 2020 2020 2020 2020 2020 2022 7369 7a65             "size
-0004cc90: 223a 2022 3132 222c 0a20 2020 2020 2020  ": "12",.       
-0004cca0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004ccb0: 2020 2020 2020 2022 7174 7922 3a20 2231         "qty": "1
-0004ccc0: 3222 2c0a 2020 2020 2020 2020 2320 2020  2",.        #   
-0004ccd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004cce0: 2020 2263 6173 6842 616c 616e 6365 223a    "cashBalance":
-0004ccf0: 2022 3530 3836 2e35 3831 3031 3332 3222   "5086.58101322"
-0004cd00: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004cd10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004cd20: 2263 7572 7265 6e63 7922 3a20 2255 5344  "currency": "USD
-0004cd30: 5422 2c0a 2020 2020 2020 2020 2320 2020  T",.        #   
+0004c940: 2020 2022 6361 7368 4261 6c61 6e63 6522     "cashBalance"
+0004c950: 3a20 2235 3038 362e 3535 3832 3530 3032  : "5086.55825002
+0004c960: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004c970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004c980: 2022 6375 7272 656e 6379 223a 2022 5553   "currency": "US
+0004c990: 4454 222c 0a20 2020 2020 2020 2023 2020  DT",.        #  
+0004c9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004c9b0: 2020 2022 6361 7465 676f 7279 223a 2022     "category": "
+0004c9c0: 6c69 6e65 6172 222c 0a20 2020 2020 2020  linear",.       
+0004c9d0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0004c9e0: 2020 2020 2020 2022 7472 6164 6550 7269         "tradePri
+0004c9f0: 6365 223a 2022 302e 3336 3736 222c 0a20  ce": "0.3676",. 
+0004ca00: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004ca10: 2020 2020 2020 2020 2020 2020 2022 7472               "tr
+0004ca20: 6164 6549 6422 3a20 2235 3334 6330 3030  adeId": "534c000
+0004ca30: 332d 3462 6637 2d34 3836 662d 6161 3032  3-4bf7-486f-aa02
+0004ca40: 2d37 3863 6565 3336 3832 3565 3422 0a20  -78cee36825e4". 
+0004ca50: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004ca60: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
+0004ca70: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004ca80: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
+0004ca90: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0004caa0: 2020 2020 2020 2273 796d 626f 6c22 3a20        "symbol": 
+0004cab0: 2258 5250 5553 4454 222c 0a20 2020 2020  "XRPUSDT",.     
+0004cac0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004cad0: 2020 2020 2020 2020 2022 7369 6465 223a           "side":
+0004cae0: 2022 4275 7922 2c0a 2020 2020 2020 2020   "Buy",.        
+0004caf0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0004cb00: 2020 2020 2020 2266 756e 6469 6e67 223a        "funding":
+0004cb10: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
+0004cb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004cb30: 2020 2022 6f72 6465 724c 696e 6b49 6422     "orderLinkId"
+0004cb40: 3a20 226c 696e 6561 722d 6f72 6465 7222  : "linear-order"
+0004cb50: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004cb60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004cb70: 226f 7264 6572 4964 223a 2022 3539 3262  "orderId": "592b
+0004cb80: 3765 3431 2d37 3866 642d 3432 6532 2d39  7e41-78fd-42e2-9
+0004cb90: 6161 332d 3931 6531 3833 3565 6633 6531  aa3-91e1835ef3e1
+0004cba0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004cbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004cbc0: 2022 6665 6522 3a20 2230 2e30 3139 3038   "fee": "0.01908
+0004cbd0: 3732 3022 2c0a 2020 2020 2020 2020 2320  720",.        # 
+0004cbe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004cbf0: 2020 2020 2263 6861 6e67 6522 3a20 222d      "change": "-
+0004cc00: 302e 3031 3930 3837 3222 2c0a 2020 2020  0.0190872",.    
+0004cc10: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004cc20: 2020 2020 2020 2020 2020 2263 6173 6846            "cashF
+0004cc30: 6c6f 7722 3a20 2230 222c 0a20 2020 2020  low": "0",.     
+0004cc40: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004cc50: 2020 2020 2020 2020 2022 7472 616e 7361           "transa
+0004cc60: 6374 696f 6e54 696d 6522 3a20 2231 3637  ctionTime": "167
+0004cc70: 3231 3231 3138 3232 3234 222c 0a20 2020  2121182224",.   
+0004cc80: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004cc90: 2020 2020 2020 2020 2020 2022 7479 7065             "type
+0004cca0: 223a 2022 5452 4144 4522 2c0a 2020 2020  ": "TRADE",.    
+0004ccb0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004ccc0: 2020 2020 2020 2020 2020 2266 6565 5261            "feeRa
+0004ccd0: 7465 223a 2022 302e 3030 3036 222c 0a20  te": "0.0006",. 
+0004cce0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004ccf0: 2020 2020 2020 2020 2020 2020 2022 7369               "si
+0004cd00: 7a65 223a 2022 3130 3022 2c0a 2020 2020  ze": "100",.    
+0004cd10: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004cd20: 2020 2020 2020 2020 2020 2271 7479 223a            "qty":
+0004cd30: 2022 3838 222c 0a20 2020 2020 2020 2023   "88",.        #
 0004cd40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004cd50: 2020 2263 6174 6567 6f72 7922 3a20 226c    "category": "l
-0004cd60: 696e 6561 7222 2c0a 2020 2020 2020 2020  inear",.        
-0004cd70: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004cd80: 2020 2020 2020 2274 7261 6465 5072 6963        "tradePric
-0004cd90: 6522 3a20 2230 2e33 3631 3522 2c0a 2020  e": "0.3615",.  
-0004cda0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004cdb0: 2020 2020 2020 2020 2020 2020 2274 7261              "tra
-0004cdc0: 6465 4964 223a 2022 3835 3639 6331 3066  deId": "8569c10f
-0004cdd0: 2d35 3036 312d 3538 3931 2d38 3163 342d  -5061-5891-81c4-
-0004cde0: 6135 3439 3239 3834 3765 6233 220a 2020  a54929847eb3".  
-0004cdf0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004ce00: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-0004ce10: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0004ce20: 5d0a 2020 2020 2020 2020 2320 2020 2020  ].        #     
-0004ce30: 2020 2020 7d2c 0a20 2020 2020 2020 2023      },.        #
-0004ce40: 2020 2020 2020 2020 2022 7265 7445 7874           "retExt
-0004ce50: 496e 666f 223a 207b 7d2c 0a20 2020 2020  Info": {},.     
-0004ce60: 2020 2023 2020 2020 2020 2020 2022 7469     #         "ti
-0004ce70: 6d65 223a 2031 3637 3231 3332 3438 3134  me": 16721324814
-0004ce80: 3035 0a20 2020 2020 2020 2023 2020 2020  05.        #    
-0004ce90: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
-0004cea0: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
-0004ceb0: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
-0004cec0: 7370 6f6e 7365 2c20 2772 6573 756c 7427  sponse, 'result'
-0004ced0: 2c20 7b7d 290a 2020 2020 2020 2020 6461  , {}).        da
-0004cee0: 7461 203d 2073 656c 662e 7361 6665 5f76  ta = self.safe_v
-0004cef0: 616c 7565 5f32 2872 6573 756c 742c 2027  alue_2(result, '
-0004cf00: 6461 7461 272c 2027 6c69 7374 272c 205b  data', 'list', [
-0004cf10: 5d29 0a20 2020 2020 2020 2072 6574 7572  ]).        retur
-0004cf20: 6e20 7365 6c66 2e70 6172 7365 5f6c 6564  n self.parse_led
-0004cf30: 6765 7228 6461 7461 2c20 6375 7272 656e  ger(data, curren
-0004cf40: 6379 2c20 7369 6e63 652c 206c 696d 6974  cy, since, limit
-0004cf50: 290a 0a20 2020 2064 6566 2070 6172 7365  )..    def parse
-0004cf60: 5f6c 6564 6765 725f 656e 7472 7928 7365  _ledger_entry(se
-0004cf70: 6c66 2c20 6974 656d 2c20 6375 7272 656e  lf, item, curren
-0004cf80: 6379 3d4e 6f6e 6529 3a0a 2020 2020 2020  cy=None):.      
-0004cf90: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
-0004cfa0: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-0004cfb0: 2020 2020 2020 2269 6422 3a20 3233 3434        "id": 2344
-0004cfc0: 3637 2c0a 2020 2020 2020 2020 2320 2020  67,.        #   
-0004cfd0: 2020 2020 2020 2275 7365 725f 6964 223a        "user_id":
-0004cfe0: 2031 2c0a 2020 2020 2020 2020 2320 2020   1,.        #   
-0004cff0: 2020 2020 2020 2263 6f69 6e22 3a20 2242        "coin": "B
-0004d000: 5443 222c 0a20 2020 2020 2020 2023 2020  TC",.        #  
-0004d010: 2020 2020 2020 2022 7761 6c6c 6574 5f69         "wallet_i
-0004d020: 6422 3a20 3237 3931 332c 0a20 2020 2020  d": 27913,.     
-0004d030: 2020 2023 2020 2020 2020 2020 2022 7479     #         "ty
-0004d040: 7065 223a 2022 5265 616c 697a 6564 2050  pe": "Realized P
-0004d050: 264c 222c 0a20 2020 2020 2020 2023 2020  &L",.        #  
-0004d060: 2020 2020 2020 2022 616d 6f75 6e74 223a         "amount":
-0004d070: 2022 2d30 2e30 3030 3030 3030 3622 2c0a   "-0.00000006",.
-0004d080: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004d090: 2020 2274 785f 6964 223a 2022 222c 0a20    "tx_id": "",. 
-0004d0a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004d0b0: 2022 6164 6472 6573 7322 3a20 2242 5443   "address": "BTC
-0004d0c0: 5553 4422 2c0a 2020 2020 2020 2020 2320  USD",.        # 
-0004d0d0: 2020 2020 2020 2020 2277 616c 6c65 745f          "wallet_
-0004d0e0: 6261 6c61 6e63 6522 3a20 2230 2e30 3330  balance": "0.030
-0004d0f0: 3030 3333 3022 2c0a 2020 2020 2020 2020  00330",.        
-0004d100: 2320 2020 2020 2020 2020 2265 7865 635f  #         "exec_
-0004d110: 7469 6d65 223a 2022 3230 3139 2d31 322d  time": "2019-12-
-0004d120: 3039 5430 303a 3030 3a32 352e 3030 305a  09T00:00:25.000Z
-0004d130: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004d140: 2020 2020 2022 6372 6f73 735f 7365 7122       "cross_seq"
-0004d150: 3a20 300a 2020 2020 2020 2020 2320 2020  : 0.        #   
-0004d160: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-0004d170: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
-0004d180: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004d190: 2273 796d 626f 6c22 3a20 2258 5250 5553  "symbol": "XRPUS
-0004d1a0: 4454 222c 0a20 2020 2020 2020 2023 2020  DT",.        #  
-0004d1b0: 2020 2020 2020 2022 7369 6465 223a 2022         "side": "
-0004d1c0: 4275 7922 2c0a 2020 2020 2020 2020 2320  Buy",.        # 
-0004d1d0: 2020 2020 2020 2020 2266 756e 6469 6e67          "funding
-0004d1e0: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
-0004d1f0: 2020 2020 2020 2020 2022 6f72 6465 724c           "orderL
-0004d200: 696e 6b49 6422 3a20 226c 696e 6561 722d  inkId": "linear-
-0004d210: 6f72 6465 7222 2c0a 2020 2020 2020 2020  order",.        
-0004d220: 2320 2020 2020 2020 2020 226f 7264 6572  #         "order
-0004d230: 4964 223a 2022 3539 3262 3765 3431 2d37  Id": "592b7e41-7
-0004d240: 3866 642d 3432 6532 2d39 6161 332d 3931  8fd-42e2-9aa3-91
-0004d250: 6531 3833 3565 6633 6531 222c 0a20 2020  e1835ef3e1",.   
-0004d260: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0004d270: 6665 6522 3a20 2230 2e30 3032 3630 3238  fee": "0.0026028
-0004d280: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-0004d290: 2020 2020 2020 2263 6861 6e67 6522 3a20        "change": 
-0004d2a0: 222d 302e 3030 3236 3032 3822 2c0a 2020  "-0.0026028",.  
-0004d2b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004d2c0: 2263 6173 6846 6c6f 7722 3a20 2230 222c  "cashFlow": "0",
-0004d2d0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004d2e0: 2020 2022 7472 616e 7361 6374 696f 6e54     "transactionT
-0004d2f0: 696d 6522 3a20 2231 3637 3231 3231 3138  ime": "167212118
-0004d300: 3232 3234 222c 0a20 2020 2020 2020 2023  2224",.        #
-0004d310: 2020 2020 2020 2020 2022 7479 7065 223a           "type":
-0004d320: 2022 5452 4144 4522 2c0a 2020 2020 2020   "TRADE",.      
-0004d330: 2020 2320 2020 2020 2020 2020 2266 6565    #         "fee
-0004d340: 5261 7465 223a 2022 302e 3030 3036 222c  Rate": "0.0006",
-0004d350: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004d360: 2020 2022 7369 7a65 223a 2022 3132 222c     "size": "12",
-0004d370: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004d380: 2020 2022 7174 7922 3a20 2231 3222 2c0a     "qty": "12",.
-0004d390: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004d3a0: 2020 2263 6173 6842 616c 616e 6365 223a    "cashBalance":
-0004d3b0: 2022 3530 3836 2e35 3831 3031 3332 3222   "5086.58101322"
-0004d3c0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004d3d0: 2020 2020 2263 7572 7265 6e63 7922 3a20      "currency": 
-0004d3e0: 2255 5344 5422 2c0a 2020 2020 2020 2020  "USDT",.        
-0004d3f0: 2320 2020 2020 2020 2020 2263 6174 6567  #         "categ
-0004d400: 6f72 7922 3a20 226c 696e 6561 7222 2c0a  ory": "linear",.
-0004d410: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004d420: 2020 2274 7261 6465 5072 6963 6522 3a20    "tradePrice": 
-0004d430: 2230 2e33 3631 3522 2c0a 2020 2020 2020  "0.3615",.      
-0004d440: 2020 2320 2020 2020 2020 2020 2274 7261    #         "tra
-0004d450: 6465 4964 223a 2022 3835 3639 6331 3066  deId": "8569c10f
-0004d460: 2d35 3036 312d 3538 3931 2d38 3163 342d  -5061-5891-81c4-
-0004d470: 6135 3439 3239 3834 3765 6233 220a 2020  a54929847eb3".  
-0004d480: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
-0004d490: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-0004d4a0: 6375 7272 656e 6379 4964 203d 2073 656c  currencyId = sel
-0004d4b0: 662e 7361 6665 5f73 7472 696e 675f 3228  f.safe_string_2(
-0004d4c0: 6974 656d 2c20 2763 6f69 6e27 2c20 2763  item, 'coin', 'c
-0004d4d0: 7572 7265 6e63 7927 290a 2020 2020 2020  urrency').      
-0004d4e0: 2020 636f 6465 203d 2073 656c 662e 7361    code = self.sa
-0004d4f0: 6665 5f63 7572 7265 6e63 795f 636f 6465  fe_currency_code
-0004d500: 2863 7572 7265 6e63 7949 642c 2063 7572  (currencyId, cur
-0004d510: 7265 6e63 7929 0a20 2020 2020 2020 2061  rency).        a
-0004d520: 6d6f 756e 7420 3d20 7365 6c66 2e73 6166  mount = self.saf
-0004d530: 655f 7374 7269 6e67 5f32 2869 7465 6d2c  e_string_2(item,
-0004d540: 2027 616d 6f75 6e74 272c 2027 6368 616e   'amount', 'chan
-0004d550: 6765 2729 0a20 2020 2020 2020 2061 6674  ge').        aft
-0004d560: 6572 203d 2073 656c 662e 7361 6665 5f73  er = self.safe_s
-0004d570: 7472 696e 675f 3228 6974 656d 2c20 2777  tring_2(item, 'w
-0004d580: 616c 6c65 745f 6261 6c61 6e63 6527 2c20  allet_balance', 
-0004d590: 2763 6173 6842 616c 616e 6365 2729 0a20  'cashBalance'). 
-0004d5a0: 2020 2020 2020 2064 6972 6563 7469 6f6e         direction
-0004d5b0: 203d 2027 6f75 7427 2069 6620 5072 6563   = 'out' if Prec
-0004d5c0: 6973 652e 7374 7269 6e67 5f6c 7428 616d  ise.string_lt(am
-0004d5d0: 6f75 6e74 2c20 2730 2729 2065 6c73 6520  ount, '0') else 
-0004d5e0: 2769 6e27 0a20 2020 2020 2020 2062 6566  'in'.        bef
-0004d5f0: 6f72 6520 3d20 4e6f 6e65 0a20 2020 2020  ore = None.     
-0004d600: 2020 2069 6620 6166 7465 7220 6973 206e     if after is n
-0004d610: 6f74 204e 6f6e 6520 616e 6420 616d 6f75  ot None and amou
-0004d620: 6e74 2069 7320 6e6f 7420 4e6f 6e65 3a0a  nt is not None:.
-0004d630: 2020 2020 2020 2020 2020 2020 6469 6666              diff
-0004d640: 6572 656e 6365 203d 2061 6d6f 756e 7420  erence = amount 
-0004d650: 6966 2028 6469 7265 6374 696f 6e20 3d3d  if (direction ==
-0004d660: 2027 6f75 7427 2920 656c 7365 2050 7265   'out') else Pre
-0004d670: 6369 7365 2e73 7472 696e 675f 6e65 6728  cise.string_neg(
-0004d680: 616d 6f75 6e74 290a 2020 2020 2020 2020  amount).        
-0004d690: 2020 2020 6265 666f 7265 203d 2050 7265      before = Pre
-0004d6a0: 6369 7365 2e73 7472 696e 675f 6164 6428  cise.string_add(
-0004d6b0: 6166 7465 722c 2064 6966 6665 7265 6e63  after, differenc
-0004d6c0: 6529 0a20 2020 2020 2020 2074 696d 6573  e).        times
-0004d6d0: 7461 6d70 203d 2073 656c 662e 7061 7273  tamp = self.pars
-0004d6e0: 6538 3630 3128 7365 6c66 2e73 6166 655f  e8601(self.safe_
-0004d6f0: 7374 7269 6e67 2869 7465 6d2c 2027 6578  string(item, 'ex
-0004d700: 6563 5f74 696d 6527 2929 0a20 2020 2020  ec_time')).     
-0004d710: 2020 2069 6620 7469 6d65 7374 616d 7020     if timestamp 
-0004d720: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-0004d730: 2020 2020 2074 696d 6573 7461 6d70 203d       timestamp =
-0004d740: 2073 656c 662e 7361 6665 5f69 6e74 6567   self.safe_integ
-0004d750: 6572 2869 7465 6d2c 2027 7472 616e 7361  er(item, 'transa
-0004d760: 6374 696f 6e54 696d 6527 290a 2020 2020  ctionTime').    
-0004d770: 2020 2020 7479 7065 203d 2073 656c 662e      type = self.
-0004d780: 7061 7273 655f 6c65 6467 6572 5f65 6e74  parse_ledger_ent
-0004d790: 7279 5f74 7970 6528 7365 6c66 2e73 6166  ry_type(self.saf
-0004d7a0: 655f 7374 7269 6e67 2869 7465 6d2c 2027  e_string(item, '
-0004d7b0: 7479 7065 2729 290a 2020 2020 2020 2020  type')).        
-0004d7c0: 6964 203d 2073 656c 662e 7361 6665 5f73  id = self.safe_s
-0004d7d0: 7472 696e 6728 6974 656d 2c20 2769 6427  tring(item, 'id'
-0004d7e0: 290a 2020 2020 2020 2020 7265 6665 7265  ).        refere
-0004d7f0: 6e63 6549 6420 3d20 7365 6c66 2e73 6166  nceId = self.saf
-0004d800: 655f 7374 7269 6e67 2869 7465 6d2c 2027  e_string(item, '
-0004d810: 7478 5f69 6427 290a 2020 2020 2020 2020  tx_id').        
-0004d820: 7265 7475 726e 207b 0a20 2020 2020 2020  return {.       
-0004d830: 2020 2020 2027 6964 273a 2069 642c 0a20       'id': id,. 
-0004d840: 2020 2020 2020 2020 2020 2027 6375 7272             'curr
-0004d850: 656e 6379 273a 2063 6f64 652c 0a20 2020  ency': code,.   
-0004d860: 2020 2020 2020 2020 2027 6163 636f 756e           'accoun
-0004d870: 7427 3a20 7365 6c66 2e73 6166 655f 7374  t': self.safe_st
-0004d880: 7269 6e67 2869 7465 6d2c 2027 7761 6c6c  ring(item, 'wall
-0004d890: 6574 5f69 6427 292c 0a20 2020 2020 2020  et_id'),.       
-0004d8a0: 2020 2020 2027 7265 6665 7265 6e63 6541       'referenceA
-0004d8b0: 6363 6f75 6e74 273a 204e 6f6e 652c 0a20  ccount': None,. 
-0004d8c0: 2020 2020 2020 2020 2020 2027 7265 6665             'refe
-0004d8d0: 7265 6e63 6549 6427 3a20 7265 6665 7265  renceId': refere
-0004d8e0: 6e63 6549 642c 0a20 2020 2020 2020 2020  nceId,.         
-0004d8f0: 2020 2027 7374 6174 7573 273a 204e 6f6e     'status': Non
-0004d900: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
-0004d910: 616d 6f75 6e74 273a 2073 656c 662e 7061  amount': self.pa
-0004d920: 7273 655f 6e75 6d62 6572 2861 6d6f 756e  rse_number(amoun
-0004d930: 7429 2c0a 2020 2020 2020 2020 2020 2020  t),.            
-0004d940: 2762 6566 6f72 6527 3a20 7365 6c66 2e70  'before': self.p
-0004d950: 6172 7365 5f6e 756d 6265 7228 6265 666f  arse_number(befo
-0004d960: 7265 292c 0a20 2020 2020 2020 2020 2020  re),.           
-0004d970: 2027 6166 7465 7227 3a20 7365 6c66 2e70   'after': self.p
-0004d980: 6172 7365 5f6e 756d 6265 7228 6166 7465  arse_number(afte
-0004d990: 7229 2c0a 2020 2020 2020 2020 2020 2020  r),.            
-0004d9a0: 2766 6565 273a 2073 656c 662e 7061 7273  'fee': self.pars
-0004d9b0: 655f 6e75 6d62 6572 2873 656c 662e 7361  e_number(self.sa
-0004d9c0: 6665 5f73 7472 696e 6728 6974 656d 2c20  fe_string(item, 
-0004d9d0: 2766 6565 2729 292c 0a20 2020 2020 2020  'fee')),.       
-0004d9e0: 2020 2020 2027 6469 7265 6374 696f 6e27       'direction'
-0004d9f0: 3a20 6469 7265 6374 696f 6e2c 0a20 2020  : direction,.   
-0004da00: 2020 2020 2020 2020 2027 7469 6d65 7374           'timest
-0004da10: 616d 7027 3a20 7469 6d65 7374 616d 702c  amp': timestamp,
-0004da20: 0a20 2020 2020 2020 2020 2020 2027 6461  .            'da
-0004da30: 7465 7469 6d65 273a 2073 656c 662e 6973  tetime': self.is
-0004da40: 6f38 3630 3128 7469 6d65 7374 616d 7029  o8601(timestamp)
-0004da50: 2c0a 2020 2020 2020 2020 2020 2020 2774  ,.            't
-0004da60: 7970 6527 3a20 7479 7065 2c0a 2020 2020  ype': type,.    
-0004da70: 2020 2020 2020 2020 2769 6e66 6f27 3a20          'info': 
-0004da80: 6974 656d 2c0a 2020 2020 2020 2020 7d0a  item,.        }.
-0004da90: 0a20 2020 2064 6566 2070 6172 7365 5f6c  .    def parse_l
-0004daa0: 6564 6765 725f 656e 7472 795f 7479 7065  edger_entry_type
-0004dab0: 2873 656c 662c 2074 7970 6529 3a0a 2020  (self, type):.  
-0004dac0: 2020 2020 2020 7479 7065 7320 3d20 7b0a        types = {.
-0004dad0: 2020 2020 2020 2020 2020 2020 2744 6570              'Dep
-0004dae0: 6f73 6974 273a 2027 7472 616e 7361 6374  osit': 'transact
-0004daf0: 696f 6e27 2c0a 2020 2020 2020 2020 2020  ion',.          
-0004db00: 2020 2757 6974 6864 7261 7727 3a20 2774    'Withdraw': 't
-0004db10: 7261 6e73 6163 7469 6f6e 272c 0a20 2020  ransaction',.   
-0004db20: 2020 2020 2020 2020 2027 5265 616c 6973           'Realis
-0004db30: 6564 504e 4c27 3a20 2774 7261 6465 272c  edPNL': 'trade',
-0004db40: 0a20 2020 2020 2020 2020 2020 2027 436f  .            'Co
-0004db50: 6d6d 6973 7369 6f6e 273a 2027 6665 6527  mmission': 'fee'
-0004db60: 2c0a 2020 2020 2020 2020 2020 2020 2752  ,.            'R
-0004db70: 6566 756e 6427 3a20 2763 6173 6862 6163  efund': 'cashbac
-0004db80: 6b27 2c0a 2020 2020 2020 2020 2020 2020  k',.            
-0004db90: 2750 7269 7a65 273a 2027 7072 697a 6527  'Prize': 'prize'
-0004dba0: 2c20 2023 203f 0a20 2020 2020 2020 2020  ,  # ?.         
-0004dbb0: 2020 2027 4578 6368 616e 6765 4f72 6465     'ExchangeOrde
-0004dbc0: 7257 6974 6864 7261 7727 3a20 2774 7261  rWithdraw': 'tra
-0004dbd0: 6e73 6163 7469 6f6e 272c 0a20 2020 2020  nsaction',.     
-0004dbe0: 2020 2020 2020 2027 4578 6368 616e 6765         'Exchange
-0004dbf0: 4f72 6465 7244 6570 6f73 6974 273a 2027  OrderDeposit': '
-0004dc00: 7472 616e 7361 6374 696f 6e27 2c0a 2020  transaction',.  
-0004dc10: 2020 2020 2020 2020 2020 2320 7635 0a20            # v5. 
-0004dc20: 2020 2020 2020 2020 2020 2027 5452 414e             'TRAN
-0004dc30: 5346 4552 5f49 4e27 3a20 2774 7261 6e73  SFER_IN': 'trans
-0004dc40: 6163 7469 6f6e 272c 0a20 2020 2020 2020  action',.       
-0004dc50: 2020 2020 2027 5452 414e 5346 4552 5f4f       'TRANSFER_O
-0004dc60: 5554 273a 2027 7472 616e 7361 6374 696f  UT': 'transactio
-0004dc70: 6e27 2c0a 2020 2020 2020 2020 2020 2020  n',.            
-0004dc80: 2754 5241 4445 273a 2027 7472 6164 6527  'TRADE': 'trade'
-0004dc90: 2c0a 2020 2020 2020 2020 2020 2020 2753  ,.            'S
-0004dca0: 4554 544c 454d 454e 5427 3a20 2774 7261  ETTLEMENT': 'tra
-0004dcb0: 6465 272c 0a20 2020 2020 2020 2020 2020  de',.           
-0004dcc0: 2027 4445 4c49 5645 5259 273a 2027 7472   'DELIVERY': 'tr
-0004dcd0: 6164 6527 2c0a 2020 2020 2020 2020 2020  ade',.          
-0004dce0: 2020 274c 4951 5549 4441 5449 4f4e 273a    'LIQUIDATION':
-0004dcf0: 2027 7472 6164 6527 2c0a 2020 2020 2020   'trade',.      
-0004dd00: 2020 2020 2020 2742 4f4e 5553 273a 2027        'BONUS': '
-0004dd10: 5072 697a 6527 2c0a 2020 2020 2020 2020  Prize',.        
-0004dd20: 2020 2020 2746 4545 5f52 4546 554e 4427      'FEE_REFUND'
-0004dd30: 3a20 2763 6173 6862 6163 6b27 2c0a 2020  : 'cashback',.  
-0004dd40: 2020 2020 2020 2020 2020 2749 4e54 4552            'INTER
-0004dd50: 4553 5427 3a20 2774 7261 6e73 6163 7469  EST': 'transacti
-0004dd60: 6f6e 272c 0a20 2020 2020 2020 2020 2020  on',.           
-0004dd70: 2027 4355 5252 454e 4359 5f42 5559 273a   'CURRENCY_BUY':
-0004dd80: 2027 7472 6164 6527 2c0a 2020 2020 2020   'trade',.      
-0004dd90: 2020 2020 2020 2743 5552 5245 4e43 595f        'CURRENCY_
-0004dda0: 5345 4c4c 273a 2027 7472 6164 6527 2c0a  SELL': 'trade',.
-0004ddb0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-0004ddc0: 2020 7265 7475 726e 2073 656c 662e 7361    return self.sa
-0004ddd0: 6665 5f73 7472 696e 6728 7479 7065 732c  fe_string(types,
-0004dde0: 2074 7970 652c 2074 7970 6529 0a0a 2020   type, type)..  
-0004ddf0: 2020 6465 6620 7769 7468 6472 6177 2873    def withdraw(s
-0004de00: 656c 662c 2063 6f64 653a 2073 7472 2c20  elf, code: str, 
-0004de10: 616d 6f75 6e74 2c20 6164 6472 6573 732c  amount, address,
-0004de20: 2074 6167 3d4e 6f6e 652c 2070 6172 616d   tag=None, param
-0004de30: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
-0004de40: 2222 0a20 2020 2020 2020 206d 616b 6520  "".        make 
-0004de50: 6120 7769 7468 6472 6177 616c 0a20 2020  a withdrawal.   
-0004de60: 2020 2020 2073 6565 2068 7474 7073 3a2f       see https:/
-0004de70: 2f62 7962 6974 2d65 7863 6861 6e67 652e  /bybit-exchange.
-0004de80: 6769 7468 7562 2e69 6f2f 646f 6373 2f76  github.io/docs/v
-0004de90: 352f 6173 7365 742f 7769 7468 6472 6177  5/asset/withdraw
-0004dea0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0004deb0: 7374 7220 636f 6465 3a20 756e 6966 6965  str code: unifie
-0004dec0: 6420 6375 7272 656e 6379 2063 6f64 650a  d currency code.
-0004ded0: 2020 2020 2020 2020 3a70 6172 616d 2066          :param f
-0004dee0: 6c6f 6174 2061 6d6f 756e 743a 2074 6865  loat amount: the
-0004def0: 2061 6d6f 756e 7420 746f 2077 6974 6864   amount to withd
-0004df00: 7261 770a 2020 2020 2020 2020 3a70 6172  raw.        :par
-0004df10: 616d 2073 7472 2061 6464 7265 7373 3a20  am str address: 
-0004df20: 7468 6520 6164 6472 6573 7320 746f 2077  the address to w
-0004df30: 6974 6864 7261 7720 746f 0a20 2020 2020  ithdraw to.     
-0004df40: 2020 203a 7061 7261 6d20 7374 727c 4e6f     :param str|No
-0004df50: 6e65 2074 6167 3a0a 2020 2020 2020 2020  ne tag:.        
-0004df60: 3a70 6172 616d 2064 6963 7420 7061 7261  :param dict para
-0004df70: 6d73 3a20 6578 7472 6120 7061 7261 6d65  ms: extra parame
-0004df80: 7465 7273 2073 7065 6369 6669 6320 746f  ters specific to
-0004df90: 2074 6865 2062 7962 6974 2061 7069 2065   the bybit api e
-0004dfa0: 6e64 706f 696e 740a 2020 2020 2020 2020  ndpoint.        
-0004dfb0: 3a72 6574 7572 6e73 2064 6963 743a 2061  :returns dict: a
-0004dfc0: 2060 7472 616e 7361 6374 696f 6e20 7374   `transaction st
-0004dfd0: 7275 6374 7572 6520 3c68 7474 7073 3a2f  ructure <https:/
-0004dfe0: 2f64 6f63 732e 6363 7874 2e63 6f6d 2f23  /docs.ccxt.com/#
-0004dff0: 2f3f 6964 3d74 7261 6e73 6163 7469 6f6e  /?id=transaction
-0004e000: 2d73 7472 7563 7475 7265 3e60 0a20 2020  -structure>`.   
-0004e010: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-0004e020: 2074 6167 2c20 7061 7261 6d73 203d 2073   tag, params = s
-0004e030: 656c 662e 6861 6e64 6c65 5f77 6974 6864  elf.handle_withd
-0004e040: 7261 775f 7461 675f 616e 645f 7061 7261  raw_tag_and_para
-0004e050: 6d73 2874 6167 2c20 7061 7261 6d73 290a  ms(tag, params).
-0004e060: 2020 2020 2020 2020 7365 6c66 2e6c 6f61          self.loa
-0004e070: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
-0004e080: 2020 2020 7365 6c66 2e63 6865 636b 5f61      self.check_a
-0004e090: 6464 7265 7373 2861 6464 7265 7373 290a  ddress(address).
-0004e0a0: 2020 2020 2020 2020 6375 7272 656e 6379          currency
-0004e0b0: 203d 2073 656c 662e 6375 7272 656e 6379   = self.currency
-0004e0c0: 2863 6f64 6529 0a20 2020 2020 2020 2072  (code).        r
-0004e0d0: 6571 7565 7374 203d 207b 0a20 2020 2020  equest = {.     
-0004e0e0: 2020 2020 2020 2027 636f 696e 273a 2063         'coin': c
-0004e0f0: 7572 7265 6e63 795b 2769 6427 5d2c 0a20  urrency['id'],. 
-0004e100: 2020 2020 2020 2020 2020 2027 616d 6f75             'amou
-0004e110: 6e74 273a 2073 656c 662e 6e75 6d62 6572  nt': self.number
-0004e120: 5f74 6f5f 7374 7269 6e67 2861 6d6f 756e  _to_string(amoun
-0004e130: 7429 2c0a 2020 2020 2020 2020 2020 2020  t),.            
-0004e140: 2761 6464 7265 7373 273a 2061 6464 7265  'address': addre
-0004e150: 7373 2c0a 2020 2020 2020 2020 7d0a 2020  ss,.        }.  
-0004e160: 2020 2020 2020 6966 2074 6167 2069 7320        if tag is 
-0004e170: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0004e180: 2020 2020 2020 7265 7175 6573 745b 2774        request['t
-0004e190: 6167 275d 203d 2074 6167 0a20 2020 2020  ag'] = tag.     
-0004e1a0: 2020 206e 6574 776f 726b 436f 6465 2c20     networkCode, 
-0004e1b0: 7175 6572 7920 3d20 7365 6c66 2e68 616e  query = self.han
-0004e1c0: 646c 655f 6e65 7477 6f72 6b5f 636f 6465  dle_network_code
-0004e1d0: 5f61 6e64 5f70 6172 616d 7328 7061 7261  _and_params(para
-0004e1e0: 6d73 290a 2020 2020 2020 2020 6e65 7477  ms).        netw
-0004e1f0: 6f72 6b49 6420 3d20 7365 6c66 2e6e 6574  orkId = self.net
-0004e200: 776f 726b 5f63 6f64 655f 746f 5f69 6428  work_code_to_id(
-0004e210: 6e65 7477 6f72 6b43 6f64 6529 0a20 2020  networkCode).   
-0004e220: 2020 2020 2069 6620 6e65 7477 6f72 6b49       if networkI
-0004e230: 6420 6973 206e 6f74 204e 6f6e 653a 0a20  d is not None:. 
-0004e240: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-0004e250: 7374 5b27 6368 6169 6e27 5d20 3d20 6e65  st['chain'] = ne
-0004e260: 7477 6f72 6b49 642e 7570 7065 7228 290a  tworkId.upper().
-0004e270: 2020 2020 2020 2020 656e 6162 6c65 556e          enableUn
-0004e280: 6966 6965 6420 3d20 7365 6c66 2e69 735f  ified = self.is_
-0004e290: 756e 6966 6965 645f 656e 6162 6c65 6428  unified_enabled(
-0004e2a0: 290a 2020 2020 2020 2020 6d65 7468 6f64  ).        method
-0004e2b0: 203d 2027 7072 6976 6174 6550 6f73 7456   = 'privatePostV
-0004e2c0: 3541 7373 6574 5769 7468 6472 6177 4372  5AssetWithdrawCr
-0004e2d0: 6561 7465 2720 6966 2028 656e 6162 6c65  eate' if (enable
-0004e2e0: 556e 6966 6965 645b 315d 2920 656c 7365  Unified[1]) else
-0004e2f0: 2027 7072 6976 6174 6550 6f73 7441 7373   'privatePostAss
-0004e300: 6574 5633 5072 6976 6174 6557 6974 6864  etV3PrivateWithd
-0004e310: 7261 7743 7265 6174 6527 0a20 2020 2020  rawCreate'.     
-0004e320: 2020 2072 6573 706f 6e73 6520 3d20 6765     response = ge
-0004e330: 7461 7474 7228 7365 6c66 2c20 6d65 7468  tattr(self, meth
-0004e340: 6f64 2928 7365 6c66 2e65 7874 656e 6428  od)(self.extend(
-0004e350: 7265 7175 6573 742c 2071 7565 7279 2929  request, query))
-0004e360: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-0004e370: 2020 2023 2020 2020 7b0a 2020 2020 2020     #    {.      
-0004e380: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
-0004e390: 436f 6465 223a 2022 3022 2c0a 2020 2020  Code": "0",.    
-0004e3a0: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-0004e3b0: 6574 4d73 6722 3a20 2273 7563 6365 7373  etMsg": "success
-0004e3c0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004e3d0: 2020 2020 2022 7265 7375 6c74 223a 207b       "result": {
-0004e3e0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004e3f0: 2020 2020 2020 2022 6964 223a 2022 3933         "id": "93
-0004e400: 3737 3236 3622 0a20 2020 2020 2020 2023  77266".        #
-0004e410: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
-0004e420: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-0004e430: 6574 4578 7449 6e66 6f22 3a20 7b7d 2c0a  etExtInfo": {},.
-0004e440: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004e450: 2020 2274 696d 6522 3a20 2231 3636 3638    "time": "16668
-0004e460: 3932 3839 3439 3032 220a 2020 2020 2020  92894902".      
-0004e470: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
-0004e480: 2020 230a 2020 2020 2020 2020 7265 7375    #.        resu
-0004e490: 6c74 203d 2073 656c 662e 7361 6665 5f76  lt = self.safe_v
-0004e4a0: 616c 7565 2872 6573 706f 6e73 652c 2027  alue(response, '
-0004e4b0: 7265 7375 6c74 272c 207b 7d29 0a20 2020  result', {}).   
-0004e4c0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-0004e4d0: 2e70 6172 7365 5f74 7261 6e73 6163 7469  .parse_transacti
-0004e4e0: 6f6e 2872 6573 756c 742c 2063 7572 7265  on(result, curre
-0004e4f0: 6e63 7929 0a0a 2020 2020 6465 6620 6665  ncy)..    def fe
-0004e500: 7463 685f 706f 7369 7469 6f6e 2873 656c  tch_position(sel
-0004e510: 662c 2073 796d 626f 6c3a 2073 7472 2c20  f, symbol: str, 
-0004e520: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
-0004e530: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-0004e540: 6665 7463 6820 6461 7461 206f 6e20 6120  fetch data on a 
-0004e550: 7369 6e67 6c65 206f 7065 6e20 636f 6e74  single open cont
-0004e560: 7261 6374 2074 7261 6465 2070 6f73 6974  ract trade posit
-0004e570: 696f 6e0a 2020 2020 2020 2020 3a70 6172  ion.        :par
-0004e580: 616d 2073 7472 2073 796d 626f 6c3a 2075  am str symbol: u
-0004e590: 6e69 6669 6564 206d 6172 6b65 7420 7379  nified market sy
-0004e5a0: 6d62 6f6c 206f 6620 7468 6520 6d61 726b  mbol of the mark
-0004e5b0: 6574 2074 6865 2070 6f73 6974 696f 6e20  et the position 
-0004e5c0: 6973 2068 656c 6420 696e 2c20 6465 6661  is held in, defa
-0004e5d0: 756c 7420 6973 204e 6f6e 650a 2020 2020  ult is None.    
-0004e5e0: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
-0004e5f0: 7061 7261 6d73 3a20 6578 7472 6120 7061  params: extra pa
-0004e600: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
-0004e610: 6320 746f 2074 6865 2062 7962 6974 2061  c to the bybit a
-0004e620: 7069 2065 6e64 706f 696e 740a 2020 2020  pi endpoint.    
-0004e630: 2020 2020 3a72 6574 7572 6e73 2064 6963      :returns dic
-0004e640: 743a 2061 2060 706f 7369 7469 6f6e 2073  t: a `position s
-0004e650: 7472 7563 7475 7265 203c 6874 7470 733a  tructure <https:
-0004e660: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
-0004e670: 232f 3f69 643d 706f 7369 7469 6f6e 2d73  #/?id=position-s
-0004e680: 7472 7563 7475 7265 3e60 0a20 2020 2020  tructure>`.     
-0004e690: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
-0004e6a0: 656c 662e 6368 6563 6b5f 7265 7175 6972  elf.check_requir
-0004e6b0: 6564 5f73 796d 626f 6c28 2766 6574 6368  ed_symbol('fetch
-0004e6c0: 506f 7369 7469 6f6e 272c 2073 796d 626f  Position', symbo
-0004e6d0: 6c29 0a20 2020 2020 2020 2073 656c 662e  l).        self.
-0004e6e0: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
-0004e6f0: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
-0004e700: 7365 6c66 2e6d 6172 6b65 7428 7379 6d62  self.market(symb
-0004e710: 6f6c 290a 2020 2020 2020 2020 7265 7175  ol).        requ
-0004e720: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
-0004e730: 2020 2020 2773 796d 626f 6c27 3a20 6d61      'symbol': ma
-0004e740: 726b 6574 5b27 6964 275d 2c0a 2020 2020  rket['id'],.    
-0004e750: 2020 2020 7d0a 2020 2020 2020 2020 6d65      }.        me
-0004e760: 7468 6f64 203d 204e 6f6e 650a 2020 2020  thod = None.    
-0004e770: 2020 2020 656e 6162 6c65 556e 6966 6965      enableUnifie
-0004e780: 644d 6172 6769 6e2c 2065 6e61 626c 6555  dMargin, enableU
-0004e790: 6e69 6669 6564 4163 636f 756e 7420 3d20  nifiedAccount = 
-0004e7a0: 7365 6c66 2e69 735f 756e 6966 6965 645f  self.is_unified_
-0004e7b0: 656e 6162 6c65 6428 290a 2020 2020 2020  enabled().      
-0004e7c0: 2020 6973 5573 6463 5365 7474 6c65 6420    isUsdcSettled 
-0004e7d0: 3d20 6d61 726b 6574 5b27 7365 7474 6c65  = market['settle
-0004e7e0: 275d 203d 3d20 2755 5344 4327 0a20 2020  '] == 'USDC'.   
-0004e7f0: 2020 2020 2069 6620 656e 6162 6c65 556e       if enableUn
-0004e800: 6966 6965 644d 6172 6769 6e20 6f72 2065  ifiedMargin or e
-0004e810: 6e61 626c 6555 6e69 6669 6564 4163 636f  nableUnifiedAcco
-0004e820: 756e 743a 0a20 2020 2020 2020 2020 2020  unt:.           
-0004e830: 206d 6574 686f 6420 3d20 2770 7269 7661   method = 'priva
-0004e840: 7465 4765 7456 3550 6f73 6974 696f 6e4c  teGetV5PositionL
-0004e850: 6973 7427 2069 6620 2865 6e61 626c 6555  ist' if (enableU
-0004e860: 6e69 6669 6564 4163 636f 756e 7429 2065  nifiedAccount) e
-0004e870: 6c73 6520 2770 7269 7661 7465 4765 7455  lse 'privateGetU
-0004e880: 6e69 6669 6564 5633 5072 6976 6174 6550  nifiedV3PrivateP
-0004e890: 6f73 6974 696f 6e4c 6973 7427 0a20 2020  ositionList'.   
-0004e8a0: 2020 2020 2020 2020 2069 6620 6d61 726b           if mark
-0004e8b0: 6574 5b27 6f70 7469 6f6e 275d 3a0a 2020  et['option']:.  
-0004e8c0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0004e8d0: 7175 6573 745b 2763 6174 6567 6f72 7927  quest['category'
-0004e8e0: 5d20 3d20 276f 7074 696f 6e27 0a20 2020  ] = 'option'.   
-0004e8f0: 2020 2020 2020 2020 2065 6c69 6620 6d61           elif ma
-0004e900: 726b 6574 5b27 6c69 6e65 6172 275d 3a0a  rket['linear']:.
-0004e910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004e920: 7265 7175 6573 745b 2763 6174 6567 6f72  request['categor
-0004e930: 7927 5d20 3d20 276c 696e 6561 7227 0a20  y'] = 'linear'. 
-0004e940: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0004e950: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0004e960: 2072 6169 7365 204e 6f74 5375 7070 6f72   raise NotSuppor
-0004e970: 7465 6428 7365 6c66 2e69 6420 2b20 2720  ted(self.id + ' 
-0004e980: 6665 7463 6850 6f73 6974 696f 6e28 2920  fetchPosition() 
-0004e990: 646f 6573 206e 6f74 2061 6c6c 6f77 2069  does not allow i
-0004e9a0: 6e76 6572 7365 206d 6172 6b65 7420 6f72  nverse market or
-0004e9b0: 6465 7273 2066 6f72 2027 202b 2073 796d  ders for ' + sym
-0004e9c0: 626f 6c20 2b20 2720 6d61 726b 6574 7327  bol + ' markets'
-0004e9d0: 290a 2020 2020 2020 2020 656c 6966 2069  ).        elif i
-0004e9e0: 7355 7364 6353 6574 746c 6564 3a0a 2020  sUsdcSettled:.  
-0004e9f0: 2020 2020 2020 2020 2020 6d65 7468 6f64            method
-0004ea00: 203d 2027 7072 6976 6174 6550 6f73 744f   = 'privatePostO
-0004ea10: 7074 696f 6e55 7364 634f 7065 6e61 7069  ptionUsdcOpenapi
-0004ea20: 5072 6976 6174 6556 3151 7565 7279 506f  PrivateV1QueryPo
-0004ea30: 7369 7469 6f6e 270a 2020 2020 2020 2020  sition'.        
-0004ea40: 2020 2020 6966 206d 6172 6b65 745b 276f      if market['o
-0004ea50: 7074 696f 6e27 5d3a 0a20 2020 2020 2020  ption']:.       
-0004ea60: 2020 2020 2020 2020 2072 6571 7565 7374           request
-0004ea70: 5b27 6361 7465 676f 7279 275d 203d 2027  ['category'] = '
-0004ea80: 4f50 5449 4f4e 270a 2020 2020 2020 2020  OPTION'.        
-0004ea90: 2020 2020 656c 6966 206d 6172 6b65 745b      elif market[
-0004eaa0: 276c 696e 6561 7227 5d3a 0a20 2020 2020  'linear']:.     
-0004eab0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-0004eac0: 7374 5b27 6361 7465 676f 7279 275d 203d  st['category'] =
-0004ead0: 2027 5045 5250 4554 5541 4c27 0a20 2020   'PERPETUAL'.   
-0004eae0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0004eaf0: 2020 2020 2020 2069 6620 6d61 726b 6574         if market
-0004eb00: 5b27 6c69 6e65 6172 275d 3a0a 2020 2020  ['linear']:.    
-0004eb10: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-0004eb20: 6573 745b 2763 6174 6567 6f72 7927 5d20  est['category'] 
-0004eb30: 3d20 276c 696e 6561 7227 0a20 2020 2020  = 'linear'.     
-0004eb40: 2020 2020 2020 2065 6c69 6620 6d61 726b         elif mark
-0004eb50: 6574 5b27 696e 7665 7273 6527 5d3a 0a20  et['inverse']:. 
-0004eb60: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0004eb70: 6571 7565 7374 5b27 6361 7465 676f 7279  equest['category
-0004eb80: 275d 203d 2027 696e 7665 7273 6527 0a20  '] = 'inverse'. 
-0004eb90: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0004eba0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0004ebb0: 2072 6169 7365 204e 6f74 5375 7070 6f72   raise NotSuppor
-0004ebc0: 7465 6428 7365 6c66 2e69 6420 2b20 2720  ted(self.id + ' 
-0004ebd0: 6665 7463 6850 6f73 6974 696f 6e28 2920  fetchPosition() 
-0004ebe0: 646f 6573 206e 6f74 2061 6c6c 6f77 206f  does not allow o
-0004ebf0: 7074 696f 6e20 6d61 726b 6574 206f 7264  ption market ord
-0004ec00: 6572 7320 666f 7220 2720 2b20 7379 6d62  ers for ' + symb
-0004ec10: 6f6c 202b 2027 206d 6172 6b65 7473 2729  ol + ' markets')
-0004ec20: 0a20 2020 2020 2020 2020 2020 206d 6574  .            met
-0004ec30: 686f 6420 3d20 2770 7269 7661 7465 4765  hod = 'privateGe
-0004ec40: 7456 3550 6f73 6974 696f 6e4c 6973 7427  tV5PositionList'
-0004ec50: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
-0004ec60: 6520 3d20 6765 7461 7474 7228 7365 6c66  e = getattr(self
-0004ec70: 2c20 6d65 7468 6f64 2928 7365 6c66 2e65  , method)(self.e
-0004ec80: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
-0004ec90: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
-0004eca0: 230a 2020 2020 2020 2020 2320 756e 6966  #.        # unif
-0004ecb0: 6965 6420 6163 636f 756e 740a 2020 2020  ied account.    
-0004ecc0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-0004ecd0: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-0004ece0: 2020 2020 2020 2020 2272 6574 436f 6465          "retCode
-0004ecf0: 223a 2030 2c0a 2020 2020 2020 2020 2320  ": 0,.        # 
-0004ed00: 2020 2020 2020 2020 2272 6574 4d73 6722          "retMsg"
-0004ed10: 3a20 224f 4b22 2c0a 2020 2020 2020 2020  : "OK",.        
-0004ed20: 2320 2020 2020 2020 2020 2272 6573 756c  #         "resul
-0004ed30: 7422 3a20 7b0a 2020 2020 2020 2020 2320  t": {.        # 
-0004ed40: 2020 2020 2020 2020 2020 2020 226e 6578              "nex
-0004ed50: 7450 6167 6543 7572 736f 7222 3a20 2275  tPageCursor": "u
-0004ed60: 7064 6174 6541 7425 3344 3136 3732 3237  pdateAt%3D167227
-0004ed70: 3933 3232 3636 3822 2c0a 2020 2020 2020  9322668",.      
-0004ed80: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0004ed90: 2263 6174 6567 6f72 7922 3a20 226c 696e  "category": "lin
-0004eda0: 6561 7222 2c0a 2020 2020 2020 2020 2320  ear",.        # 
-0004edb0: 2020 2020 2020 2020 2020 2020 226c 6973              "lis
-0004edc0: 7422 3a20 5b0a 2020 2020 2020 2020 2320  t": [.        # 
-0004edd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004ede0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-0004edf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004ee00: 2273 796d 626f 6c22 3a20 2258 5250 5553  "symbol": "XRPUS
-0004ee10: 4454 222c 0a20 2020 2020 2020 2023 2020  DT",.        #  
-0004ee20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004ee30: 2020 2022 6c65 7665 7261 6765 223a 2022     "leverage": "
-0004ee40: 3130 222c 0a20 2020 2020 2020 2023 2020  10",.        #  
-0004ee50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004ee60: 2020 2022 6176 6750 7269 6365 223a 2022     "avgPrice": "
-0004ee70: 302e 3336 3135 222c 0a20 2020 2020 2020  0.3615",.       
-0004ee80: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004ee90: 2020 2020 2020 2022 6c69 7150 7269 6365         "liqPrice
-0004eea0: 223a 2022 302e 3030 3031 222c 0a20 2020  ": "0.0001",.   
-0004eeb0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0004eec0: 2020 2020 2020 2020 2020 2022 7269 736b             "risk
-0004eed0: 4c69 6d69 7456 616c 7565 223a 2022 3230  LimitValue": "20
-0004eee0: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
-0004eef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004ef00: 2020 2020 2022 7461 6b65 5072 6f66 6974       "takeProfit
-0004ef10: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
-0004ef20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004ef30: 2020 2020 2022 706f 7369 7469 6f6e 5661       "positionVa
-0004ef40: 6c75 6522 3a20 2233 362e 3135 222c 0a20  lue": "36.15",. 
-0004ef50: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004ef60: 2020 2020 2020 2020 2020 2020 2022 7470               "tp
-0004ef70: 736c 4d6f 6465 223a 2022 4675 6c6c 222c  slMode": "Full",
-0004ef80: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004ef90: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0004efa0: 7269 736b 4964 223a 2034 312c 0a20 2020  riskId": 41,.   
-0004efb0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0004efc0: 2020 2020 2020 2020 2020 2022 7472 6169             "trai
-0004efd0: 6c69 6e67 5374 6f70 223a 2022 3022 2c0a  lingStop": "0",.
-0004efe0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004eff0: 2020 2020 2020 2020 2020 2020 2020 2275                "u
-0004f000: 6e72 6561 6c69 7365 6450 6e6c 223a 2022  nrealisedPnl": "
-0004f010: 2d31 2e38 3322 2c0a 2020 2020 2020 2020  -1.83",.        
-0004f020: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004f030: 2020 2020 2020 226d 6172 6b50 7269 6365        "markPrice
-0004f040: 223a 2022 302e 3334 3332 222c 0a20 2020  ": "0.3432",.   
-0004f050: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0004f060: 2020 2020 2020 2020 2020 2022 6375 6d52             "cumR
-0004f070: 6561 6c69 7365 6450 6e6c 223a 2022 302e  ealisedPnl": "0.
-0004f080: 3438 3830 3538 3736 222c 0a20 2020 2020  48805876",.     
-0004f090: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0004f0a0: 2020 2020 2020 2020 2022 706f 7369 7469           "positi
-0004f0b0: 6f6e 4d4d 223a 2022 302e 3338 3130 3231  onMM": "0.381021
-0004f0c0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004f0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004f0e0: 2022 6372 6561 7465 6454 696d 6522 3a20   "createdTime": 
-0004f0f0: 2231 3637 3231 3231 3138 3232 3136 222c  "1672121182216",
-0004f100: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004f110: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0004f120: 706f 7369 7469 6f6e 4964 7822 3a20 302c  positionIdx": 0,
-0004f130: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004f140: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0004f150: 706f 7369 7469 6f6e 494d 223a 2022 332e  positionIM": "3.
-0004f160: 3633 3435 3231 222c 0a20 2020 2020 2020  634521",.       
-0004f170: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004f180: 2020 2020 2020 2022 7570 6461 7465 6454         "updatedT
-0004f190: 696d 6522 3a20 2231 3637 3232 3739 3332  ime": "167227932
-0004f1a0: 3236 3638 222c 0a20 2020 2020 2020 2023  2668",.        #
-0004f1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004f1c0: 2020 2020 2022 7369 6465 223a 2022 4275       "side": "Bu
-0004f1d0: 7922 2c0a 2020 2020 2020 2020 2320 2020  y",.        #   
-0004f1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004f1f0: 2020 2262 7573 7450 7269 6365 223a 2022    "bustPrice": "
-0004f200: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004f210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004f220: 2022 7369 7a65 223a 2022 3130 3022 2c0a   "size": "100",.
-0004f230: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004f240: 2020 2020 2020 2020 2020 2020 2020 2270                "p
-0004f250: 6f73 6974 696f 6e53 7461 7475 7322 3a20  ositionStatus": 
-0004f260: 224e 6f72 6d61 6c22 2c0a 2020 2020 2020  "Normal",.      
-0004f270: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0004f280: 2020 2020 2020 2020 2273 746f 704c 6f73          "stopLos
-0004f290: 7322 3a20 2222 2c0a 2020 2020 2020 2020  s": "",.        
-0004f2a0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004f2b0: 2020 2020 2020 2274 7261 6465 4d6f 6465        "tradeMode
-0004f2c0: 223a 2030 0a20 2020 2020 2020 2023 2020  ": 0.        #  
-0004f2d0: 2020 2020 2020 2020 2020 2020 2020 207d                 }
-0004f2e0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004f2f0: 2020 2020 2020 205d 0a20 2020 2020 2020         ].       
-0004f300: 2023 2020 2020 2020 2020 207d 2c0a 2020   #         },.  
-0004f310: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004f320: 2272 6574 4578 7449 6e66 6f22 3a20 7b7d  "retExtInfo": {}
-0004f330: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004f340: 2020 2020 2274 696d 6522 3a20 3136 3732      "time": 1672
-0004f350: 3238 3032 3139 3136 390a 2020 2020 2020  280219169.      
-0004f360: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
-0004f370: 2020 230a 2020 2020 2020 2020 2320 756e    #.        # un
-0004f380: 6966 6965 6420 6d61 7267 696e 0a20 2020  ified margin.   
-0004f390: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-0004f3a0: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
-0004f3b0: 2020 2020 2020 2020 2022 7265 7443 6f64           "retCod
-0004f3c0: 6522 3a20 302c 0a20 2020 2020 2020 2023  e": 0,.        #
-0004f3d0: 2020 2020 2020 2020 2022 7265 744d 7367           "retMsg
-0004f3e0: 223a 2022 5375 6363 6573 7322 2c0a 2020  ": "Success",.  
-0004f3f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004f400: 2272 6573 756c 7422 3a20 7b0a 2020 2020  "result": {.    
-0004f410: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004f420: 2020 226e 6578 7450 6167 6543 7572 736f    "nextPageCurso
-0004f430: 7222 3a20 2230 2533 4131 3635 3737 3131  r": "0%3A1657711
-0004f440: 3934 3939 3435 2532 4330 2533 4131 3635  949945%2C0%3A165
-0004f450: 3737 3131 3934 3939 3435 222c 0a20 2020  7711949945",.   
-0004f460: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0004f470: 2020 2022 6361 7465 676f 7279 223a 2022     "category": "
-0004f480: 6c69 6e65 6172 222c 0a20 2020 2020 2020  linear",.       
-0004f490: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-0004f4a0: 6c69 7374 223a 205b 0a20 2020 2020 2020  list": [.       
-0004f4b0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004f4c0: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-0004f4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004f4e0: 2020 2022 7379 6d62 6f6c 223a 2022 4554     "symbol": "ET
-0004f4f0: 4855 5344 5422 2c0a 2020 2020 2020 2020  HUSDT",.        
-0004f500: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004f510: 2020 2020 2020 226c 6576 6572 6167 6522        "leverage"
-0004f520: 3a20 2231 3022 2c0a 2020 2020 2020 2020  : "10",.        
-0004f530: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004f540: 2020 2020 2020 2275 7064 6174 6564 5469        "updatedTi
-0004f550: 6d65 223a 2031 3635 3737 3131 3934 3939  me": 16577119499
-0004f560: 3435 2c0a 2020 2020 2020 2020 2320 2020  45,.        #   
-0004f570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004f580: 2020 2273 6964 6522 3a20 2242 7579 222c    "side": "Buy",
-0004f590: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004f5a0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0004f5b0: 706f 7369 7469 6f6e 5661 6c75 6522 3a20  positionValue": 
-0004f5c0: 2235 3336 2e39 3235 3030 3030 3022 2c0a  "536.92500000",.
-0004f5d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004f5e0: 2020 2020 2020 2020 2020 2020 2020 2274                "t
-0004f5f0: 616b 6550 726f 6669 7422 3a20 2222 2c0a  akeProfit": "",.
-0004f600: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004f610: 2020 2020 2020 2020 2020 2020 2020 2274                "t
-0004f620: 7073 6c4d 6f64 6522 3a20 2246 756c 6c22  pslMode": "Full"
-0004f630: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004f640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004f650: 2272 6973 6b49 6422 3a20 3131 2c0a 2020  "riskId": 11,.  
-0004f660: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004f670: 2020 2020 2020 2020 2020 2020 2274 7261              "tra
-0004f680: 696c 696e 6753 746f 7022 3a20 2222 2c0a  ilingStop": "",.
-0004f690: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004f6a0: 2020 2020 2020 2020 2020 2020 2020 2265                "e
-0004f6b0: 6e74 7279 5072 6963 6522 3a20 2231 3037  ntryPrice": "107
-0004f6c0: 332e 3835 3030 3030 3030 222c 0a20 2020  3.85000000",.   
-0004f6d0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0004f6e0: 2020 2020 2020 2020 2020 2022 756e 7265             "unre
-0004f6f0: 616c 6973 6564 506e 6c22 3a20 2222 2c0a  alisedPnl": "",.
-0004f700: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004f710: 2020 2020 2020 2020 2020 2020 2020 226d                "m
-0004f720: 6172 6b50 7269 6365 223a 2022 3130 3830  arkPrice": "1080
-0004f730: 2e36 3530 3030 3030 3022 2c0a 2020 2020  .65000000",.    
-0004f740: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004f750: 2020 2020 2020 2020 2020 2273 697a 6522            "size"
-0004f760: 3a20 2230 2e35 3030 3022 2c0a 2020 2020  : "0.5000",.    
-0004f770: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0004f780: 2020 2020 2020 2020 2020 2270 6f73 6974            "posit
-0004f790: 696f 6e53 7461 7475 7322 3a20 226e 6f72  ionStatus": "nor
-0004f7a0: 6d61 6c22 2c0a 2020 2020 2020 2020 2320  mal",.        # 
-0004f7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004f7c0: 2020 2020 2273 746f 704c 6f73 7322 3a20      "stopLoss": 
-0004f7d0: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
-0004f7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004f7f0: 2020 2263 756d 5265 616c 6973 6564 506e    "cumRealisedPn
-0004f800: 6c22 3a20 222d 302e 3332 3231 3535 3030  l": "-0.32215500
-0004f810: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004f820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004f830: 2022 706f 7369 7469 6f6e 4d4d 223a 2022   "positionMM": "
-0004f840: 322e 3937 3435 3634 3530 222c 0a20 2020  2.97456450",.   
-0004f850: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0004f860: 2020 2020 2020 2020 2020 2022 6372 6561             "crea
-0004f870: 7465 6454 696d 6522 3a20 3136 3537 3731  tedTime": 165771
-0004f880: 3139 3439 3932 382c 0a20 2020 2020 2020  1949928,.       
-0004f890: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004f8a0: 2020 2020 2020 2022 706f 7369 7469 6f6e         "position
-0004f8b0: 4964 7822 3a20 302c 0a20 2020 2020 2020  Idx": 0,.       
-0004f8c0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004f8d0: 2020 2020 2020 2022 706f 7369 7469 6f6e         "position
-0004f8e0: 494d 223a 2022 3533 2e39 3832 3433 3935  IM": "53.9824395
-0004f8f0: 3022 0a20 2020 2020 2020 2023 2020 2020  0".        #    
-0004f900: 2020 2020 2020 2020 2020 2020 207d 0a20               }. 
-0004f910: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004f920: 2020 2020 205d 0a20 2020 2020 2020 2023       ].        #
-0004f930: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
-0004f940: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
-0004f950: 696d 6522 3a20 3136 3537 3731 3336 3933  ime": 1657713693
-0004f960: 3138 320a 2020 2020 2020 2020 2320 2020  182.        #   
-0004f970: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-0004f980: 2020 2020 2020 2320 636f 6e74 7261 6374        # contract
-0004f990: 2076 330a 2020 2020 2020 2020 230a 2020   v3.        #.  
-0004f9a0: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
-0004f9b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004f9c0: 2272 6574 436f 6465 223a 2030 2c0a 2020  "retCode": 0,.  
-0004f9d0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004f9e0: 2272 6574 4d73 6722 3a20 224f 4b22 2c0a  "retMsg": "OK",.
-0004f9f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0004fa00: 2020 2272 6573 756c 7422 3a20 7b0a 2020    "result": {.  
-0004fa10: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004fa20: 2020 2020 226c 6973 7422 3a20 5b0a 2020      "list": [.  
-0004fa30: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004fa40: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
-0004fa50: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0004fa60: 2020 2020 2020 2020 2270 6f73 6974 696f          "positio
-0004fa70: 6e49 6478 223a 2031 2c0a 2020 2020 2020  nIdx": 1,.      
-0004fa80: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0004fa90: 2020 2020 2020 2020 2272 6973 6b49 6422          "riskId"
-0004faa0: 3a20 2234 3122 2c0a 2020 2020 2020 2020  : "41",.        
-0004fab0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004fac0: 2020 2020 2020 2273 796d 626f 6c22 3a20        "symbol": 
-0004fad0: 2258 5250 5553 4454 222c 0a20 2020 2020  "XRPUSDT",.     
-0004fae0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0004faf0: 2020 2020 2020 2020 2022 7369 6465 223a           "side":
-0004fb00: 2022 4275 7922 2c0a 2020 2020 2020 2020   "Buy",.        
-0004fb10: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004fb20: 2020 2020 2020 2273 697a 6522 3a20 2230        "size": "0
-0004fb30: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0004fb40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004fb50: 2022 706f 7369 7469 6f6e 5661 6c75 6522   "positionValue"
-0004fb60: 3a20 2230 222c 0a20 2020 2020 2020 2023  : "0",.        #
-0004fb70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004fb80: 2020 2020 2022 656e 7472 7950 7269 6365       "entryPrice
-0004fb90: 223a 2022 3022 2c0a 2020 2020 2020 2020  ": "0",.        
-0004fba0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004fbb0: 2020 2020 2020 2274 7261 6465 4d6f 6465        "tradeMode
-0004fbc0: 223a 2030 2c0a 2020 2020 2020 2020 2320  ": 0,.        # 
-0004fbd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004fbe0: 2020 2020 2261 7574 6f41 6464 4d61 7267      "autoAddMarg
-0004fbf0: 696e 223a 2030 2c0a 2020 2020 2020 2020  in": 0,.        
-0004fc00: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004fc10: 2020 2020 2020 226c 6576 6572 6167 6522        "leverage"
-0004fc20: 3a20 2231 3022 2c0a 2020 2020 2020 2020  : "10",.        
-0004fc30: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004fc40: 2020 2020 2020 2270 6f73 6974 696f 6e42        "positionB
-0004fc50: 616c 616e 6365 223a 2022 3022 2c0a 2020  alance": "0",.  
-0004fc60: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0004fc70: 2020 2020 2020 2020 2020 2020 226c 6971              "liq
-0004fc80: 5072 6963 6522 3a20 2230 2e30 3030 3022  Price": "0.0000"
-0004fc90: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004cd50: 2020 2020 2022 6361 7368 4261 6c61 6e63       "cashBalanc
+0004cd60: 6522 3a20 2235 3038 362e 3536 3139 3236  e": "5086.561926
+0004cd70: 3032 222c 0a20 2020 2020 2020 2023 2020  02",.        #  
+0004cd80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004cd90: 2020 2022 6375 7272 656e 6379 223a 2022     "currency": "
+0004cda0: 5553 4454 222c 0a20 2020 2020 2020 2023  USDT",.        #
+0004cdb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004cdc0: 2020 2020 2022 6361 7465 676f 7279 223a       "category":
+0004cdd0: 2022 6c69 6e65 6172 222c 0a20 2020 2020   "linear",.     
+0004cde0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004cdf0: 2020 2020 2020 2020 2022 7472 6164 6550           "tradeP
+0004ce00: 7269 6365 223a 2022 302e 3336 3135 222c  rice": "0.3615",
+0004ce10: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004ce20: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0004ce30: 7472 6164 6549 6422 3a20 2235 3138 3466  tradeId": "5184f
+0004ce40: 3037 392d 3838 6563 2d35 3463 372d 3837  079-88ec-54c7-87
+0004ce50: 3734 2d35 3137 3363 6166 6432 6234 6522  74-5173cafd2b4e"
+0004ce60: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004ce70: 2020 2020 2020 2020 2020 207d 2c0a 2020             },.  
+0004ce80: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0004ce90: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+0004cea0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0004ceb0: 2020 2020 2020 2020 2273 796d 626f 6c22          "symbol"
+0004cec0: 3a20 2258 5250 5553 4454 222c 0a20 2020  : "XRPUSDT",.   
+0004ced0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004cee0: 2020 2020 2020 2020 2020 2022 7369 6465             "side
+0004cef0: 223a 2022 4275 7922 2c0a 2020 2020 2020  ": "Buy",.      
+0004cf00: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0004cf10: 2020 2020 2020 2020 2266 756e 6469 6e67          "funding
+0004cf20: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
+0004cf30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004cf40: 2020 2020 2022 6f72 6465 724c 696e 6b49       "orderLinkI
+0004cf50: 6422 3a20 226c 696e 6561 722d 6f72 6465  d": "linear-orde
+0004cf60: 7222 2c0a 2020 2020 2020 2020 2320 2020  r",.        #   
+0004cf70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004cf80: 2020 226f 7264 6572 4964 223a 2022 3539    "orderId": "59
+0004cf90: 3262 3765 3431 2d37 3866 642d 3432 6532  2b7e41-78fd-42e2
+0004cfa0: 2d39 6161 332d 3931 6531 3833 3565 6633  -9aa3-91e1835ef3
+0004cfb0: 6531 222c 0a20 2020 2020 2020 2023 2020  e1",.        #  
+0004cfc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004cfd0: 2020 2022 6665 6522 3a20 2230 2e30 3032     "fee": "0.002
+0004cfe0: 3630 3238 3022 2c0a 2020 2020 2020 2020  60280",.        
+0004cff0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0004d000: 2020 2020 2020 2263 6861 6e67 6522 3a20        "change": 
+0004d010: 222d 302e 3030 3236 3032 3822 2c0a 2020  "-0.0026028",.  
+0004d020: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0004d030: 2020 2020 2020 2020 2020 2020 2263 6173              "cas
+0004d040: 6846 6c6f 7722 3a20 2230 222c 0a20 2020  hFlow": "0",.   
+0004d050: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004d060: 2020 2020 2020 2020 2020 2022 7472 616e             "tran
+0004d070: 7361 6374 696f 6e54 696d 6522 3a20 2231  sactionTime": "1
+0004d080: 3637 3231 3231 3138 3232 3234 222c 0a20  672121182224",. 
+0004d090: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004d0a0: 2020 2020 2020 2020 2020 2020 2022 7479               "ty
+0004d0b0: 7065 223a 2022 5452 4144 4522 2c0a 2020  pe": "TRADE",.  
+0004d0c0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0004d0d0: 2020 2020 2020 2020 2020 2020 2266 6565              "fee
+0004d0e0: 5261 7465 223a 2022 302e 3030 3036 222c  Rate": "0.0006",
+0004d0f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004d100: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0004d110: 7369 7a65 223a 2022 3132 222c 0a20 2020  size": "12",.   
+0004d120: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004d130: 2020 2020 2020 2020 2020 2022 7174 7922             "qty"
+0004d140: 3a20 2231 3222 2c0a 2020 2020 2020 2020  : "12",.        
+0004d150: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0004d160: 2020 2020 2020 2263 6173 6842 616c 616e        "cashBalan
+0004d170: 6365 223a 2022 3530 3836 2e35 3831 3031  ce": "5086.58101
+0004d180: 3332 3222 2c0a 2020 2020 2020 2020 2320  322",.        # 
+0004d190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004d1a0: 2020 2020 2263 7572 7265 6e63 7922 3a20      "currency": 
+0004d1b0: 2255 5344 5422 2c0a 2020 2020 2020 2020  "USDT",.        
+0004d1c0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0004d1d0: 2020 2020 2020 2263 6174 6567 6f72 7922        "category"
+0004d1e0: 3a20 226c 696e 6561 7222 2c0a 2020 2020  : "linear",.    
+0004d1f0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004d200: 2020 2020 2020 2020 2020 2274 7261 6465            "trade
+0004d210: 5072 6963 6522 3a20 2230 2e33 3631 3522  Price": "0.3615"
+0004d220: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004d230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004d240: 2274 7261 6465 4964 223a 2022 3835 3639  "tradeId": "8569
+0004d250: 6331 3066 2d35 3036 312d 3538 3931 2d38  c10f-5061-5891-8
+0004d260: 3163 342d 6135 3439 3239 3834 3765 6233  1c4-a54929847eb3
+0004d270: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
+0004d280: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
+0004d290: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0004d2a0: 2020 2020 5d0a 2020 2020 2020 2020 2320      ].        # 
+0004d2b0: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
+0004d2c0: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+0004d2d0: 7445 7874 496e 666f 223a 207b 7d2c 0a20  tExtInfo": {},. 
+0004d2e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004d2f0: 2022 7469 6d65 223a 2031 3637 3231 3332   "time": 1672132
+0004d300: 3438 3134 3035 0a20 2020 2020 2020 2023  481405.        #
+0004d310: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+0004d320: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
+0004d330: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+0004d340: 6528 7265 7370 6f6e 7365 2c20 2772 6573  e(response, 'res
+0004d350: 756c 7427 2c20 7b7d 290a 2020 2020 2020  ult', {}).      
+0004d360: 2020 6461 7461 203d 2073 656c 662e 7361    data = self.sa
+0004d370: 6665 5f76 616c 7565 5f32 2872 6573 756c  fe_value_2(resul
+0004d380: 742c 2027 6461 7461 272c 2027 6c69 7374  t, 'data', 'list
+0004d390: 272c 205b 5d29 0a20 2020 2020 2020 2072  ', []).        r
+0004d3a0: 6574 7572 6e20 7365 6c66 2e70 6172 7365  eturn self.parse
+0004d3b0: 5f6c 6564 6765 7228 6461 7461 2c20 6375  _ledger(data, cu
+0004d3c0: 7272 656e 6379 2c20 7369 6e63 652c 206c  rrency, since, l
+0004d3d0: 696d 6974 290a 0a20 2020 2064 6566 2070  imit)..    def p
+0004d3e0: 6172 7365 5f6c 6564 6765 725f 656e 7472  arse_ledger_entr
+0004d3f0: 7928 7365 6c66 2c20 6974 656d 2c20 6375  y(self, item, cu
+0004d400: 7272 656e 6379 3d4e 6f6e 6529 3a0a 2020  rrency=None):.  
+0004d410: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+0004d420: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
+0004d430: 2320 2020 2020 2020 2020 2269 6422 3a20  #         "id": 
+0004d440: 3233 3434 3637 2c0a 2020 2020 2020 2020  234467,.        
+0004d450: 2320 2020 2020 2020 2020 2275 7365 725f  #         "user_
+0004d460: 6964 223a 2031 2c0a 2020 2020 2020 2020  id": 1,.        
+0004d470: 2320 2020 2020 2020 2020 2263 6f69 6e22  #         "coin"
+0004d480: 3a20 2242 5443 222c 0a20 2020 2020 2020  : "BTC",.       
+0004d490: 2023 2020 2020 2020 2020 2022 7761 6c6c   #         "wall
+0004d4a0: 6574 5f69 6422 3a20 3237 3931 332c 0a20  et_id": 27913,. 
+0004d4b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004d4c0: 2022 7479 7065 223a 2022 5265 616c 697a   "type": "Realiz
+0004d4d0: 6564 2050 264c 222c 0a20 2020 2020 2020  ed P&L",.       
+0004d4e0: 2023 2020 2020 2020 2020 2022 616d 6f75   #         "amou
+0004d4f0: 6e74 223a 2022 2d30 2e30 3030 3030 3030  nt": "-0.0000000
+0004d500: 3622 2c0a 2020 2020 2020 2020 2320 2020  6",.        #   
+0004d510: 2020 2020 2020 2274 785f 6964 223a 2022        "tx_id": "
+0004d520: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004d530: 2020 2020 2022 6164 6472 6573 7322 3a20       "address": 
+0004d540: 2242 5443 5553 4422 2c0a 2020 2020 2020  "BTCUSD",.      
+0004d550: 2020 2320 2020 2020 2020 2020 2277 616c    #         "wal
+0004d560: 6c65 745f 6261 6c61 6e63 6522 3a20 2230  let_balance": "0
+0004d570: 2e30 3330 3030 3333 3022 2c0a 2020 2020  .03000330",.    
+0004d580: 2020 2020 2320 2020 2020 2020 2020 2265      #         "e
+0004d590: 7865 635f 7469 6d65 223a 2022 3230 3139  xec_time": "2019
+0004d5a0: 2d31 322d 3039 5430 303a 3030 3a32 352e  -12-09T00:00:25.
+0004d5b0: 3030 305a 222c 0a20 2020 2020 2020 2023  000Z",.        #
+0004d5c0: 2020 2020 2020 2020 2022 6372 6f73 735f           "cross_
+0004d5d0: 7365 7122 3a20 300a 2020 2020 2020 2020  seq": 0.        
+0004d5e0: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
+0004d5f0: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+0004d600: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0004d610: 2020 2020 2273 796d 626f 6c22 3a20 2258      "symbol": "X
+0004d620: 5250 5553 4454 222c 0a20 2020 2020 2020  RPUSDT",.       
+0004d630: 2023 2020 2020 2020 2020 2022 7369 6465   #         "side
+0004d640: 223a 2022 4275 7922 2c0a 2020 2020 2020  ": "Buy",.      
+0004d650: 2020 2320 2020 2020 2020 2020 2266 756e    #         "fun
+0004d660: 6469 6e67 223a 2022 222c 0a20 2020 2020  ding": "",.     
+0004d670: 2020 2023 2020 2020 2020 2020 2022 6f72     #         "or
+0004d680: 6465 724c 696e 6b49 6422 3a20 226c 696e  derLinkId": "lin
+0004d690: 6561 722d 6f72 6465 7222 2c0a 2020 2020  ear-order",.    
+0004d6a0: 2020 2020 2320 2020 2020 2020 2020 226f      #         "o
+0004d6b0: 7264 6572 4964 223a 2022 3539 3262 3765  rderId": "592b7e
+0004d6c0: 3431 2d37 3866 642d 3432 6532 2d39 6161  41-78fd-42e2-9aa
+0004d6d0: 332d 3931 6531 3833 3565 6633 6531 222c  3-91e1835ef3e1",
+0004d6e0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004d6f0: 2020 2022 6665 6522 3a20 2230 2e30 3032     "fee": "0.002
+0004d700: 3630 3238 3022 2c0a 2020 2020 2020 2020  60280",.        
+0004d710: 2320 2020 2020 2020 2020 2263 6861 6e67  #         "chang
+0004d720: 6522 3a20 222d 302e 3030 3236 3032 3822  e": "-0.0026028"
+0004d730: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004d740: 2020 2020 2263 6173 6846 6c6f 7722 3a20      "cashFlow": 
+0004d750: 2230 222c 0a20 2020 2020 2020 2023 2020  "0",.        #  
+0004d760: 2020 2020 2020 2022 7472 616e 7361 6374         "transact
+0004d770: 696f 6e54 696d 6522 3a20 2231 3637 3231  ionTime": "16721
+0004d780: 3231 3138 3232 3234 222c 0a20 2020 2020  21182224",.     
+0004d790: 2020 2023 2020 2020 2020 2020 2022 7479     #         "ty
+0004d7a0: 7065 223a 2022 5452 4144 4522 2c0a 2020  pe": "TRADE",.  
+0004d7b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0004d7c0: 2266 6565 5261 7465 223a 2022 302e 3030  "feeRate": "0.00
+0004d7d0: 3036 222c 0a20 2020 2020 2020 2023 2020  06",.        #  
+0004d7e0: 2020 2020 2020 2022 7369 7a65 223a 2022         "size": "
+0004d7f0: 3132 222c 0a20 2020 2020 2020 2023 2020  12",.        #  
+0004d800: 2020 2020 2020 2022 7174 7922 3a20 2231         "qty": "1
+0004d810: 3222 2c0a 2020 2020 2020 2020 2320 2020  2",.        #   
+0004d820: 2020 2020 2020 2263 6173 6842 616c 616e        "cashBalan
+0004d830: 6365 223a 2022 3530 3836 2e35 3831 3031  ce": "5086.58101
+0004d840: 3332 3222 2c0a 2020 2020 2020 2020 2320  322",.        # 
+0004d850: 2020 2020 2020 2020 2263 7572 7265 6e63          "currenc
+0004d860: 7922 3a20 2255 5344 5422 2c0a 2020 2020  y": "USDT",.    
+0004d870: 2020 2020 2320 2020 2020 2020 2020 2263      #         "c
+0004d880: 6174 6567 6f72 7922 3a20 226c 696e 6561  ategory": "linea
+0004d890: 7222 2c0a 2020 2020 2020 2020 2320 2020  r",.        #   
+0004d8a0: 2020 2020 2020 2274 7261 6465 5072 6963        "tradePric
+0004d8b0: 6522 3a20 2230 2e33 3631 3522 2c0a 2020  e": "0.3615",.  
+0004d8c0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0004d8d0: 2274 7261 6465 4964 223a 2022 3835 3639  "tradeId": "8569
+0004d8e0: 6331 3066 2d35 3036 312d 3538 3931 2d38  c10f-5061-5891-8
+0004d8f0: 3163 342d 6135 3439 3239 3834 3765 6233  1c4-a54929847eb3
+0004d900: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
+0004d910: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
+0004d920: 2020 2020 6375 7272 656e 6379 4964 203d      currencyId =
+0004d930: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+0004d940: 675f 3228 6974 656d 2c20 2763 6f69 6e27  g_2(item, 'coin'
+0004d950: 2c20 2763 7572 7265 6e63 7927 290a 2020  , 'currency').  
+0004d960: 2020 2020 2020 636f 6465 203d 2073 656c        code = sel
+0004d970: 662e 7361 6665 5f63 7572 7265 6e63 795f  f.safe_currency_
+0004d980: 636f 6465 2863 7572 7265 6e63 7949 642c  code(currencyId,
+0004d990: 2063 7572 7265 6e63 7929 0a20 2020 2020   currency).     
+0004d9a0: 2020 2061 6d6f 756e 7420 3d20 7365 6c66     amount = self
+0004d9b0: 2e73 6166 655f 7374 7269 6e67 5f32 2869  .safe_string_2(i
+0004d9c0: 7465 6d2c 2027 616d 6f75 6e74 272c 2027  tem, 'amount', '
+0004d9d0: 6368 616e 6765 2729 0a20 2020 2020 2020  change').       
+0004d9e0: 2061 6674 6572 203d 2073 656c 662e 7361   after = self.sa
+0004d9f0: 6665 5f73 7472 696e 675f 3228 6974 656d  fe_string_2(item
+0004da00: 2c20 2777 616c 6c65 745f 6261 6c61 6e63  , 'wallet_balanc
+0004da10: 6527 2c20 2763 6173 6842 616c 616e 6365  e', 'cashBalance
+0004da20: 2729 0a20 2020 2020 2020 2064 6972 6563  ').        direc
+0004da30: 7469 6f6e 203d 2027 6f75 7427 2069 6620  tion = 'out' if 
+0004da40: 5072 6563 6973 652e 7374 7269 6e67 5f6c  Precise.string_l
+0004da50: 7428 616d 6f75 6e74 2c20 2730 2729 2065  t(amount, '0') e
+0004da60: 6c73 6520 2769 6e27 0a20 2020 2020 2020  lse 'in'.       
+0004da70: 2062 6566 6f72 6520 3d20 4e6f 6e65 0a20   before = None. 
+0004da80: 2020 2020 2020 2069 6620 6166 7465 7220         if after 
+0004da90: 6973 206e 6f74 204e 6f6e 6520 616e 6420  is not None and 
+0004daa0: 616d 6f75 6e74 2069 7320 6e6f 7420 4e6f  amount is not No
+0004dab0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+0004dac0: 6469 6666 6572 656e 6365 203d 2061 6d6f  difference = amo
+0004dad0: 756e 7420 6966 2028 6469 7265 6374 696f  unt if (directio
+0004dae0: 6e20 3d3d 2027 6f75 7427 2920 656c 7365  n == 'out') else
+0004daf0: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
+0004db00: 6e65 6728 616d 6f75 6e74 290a 2020 2020  neg(amount).    
+0004db10: 2020 2020 2020 2020 6265 666f 7265 203d          before =
+0004db20: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
+0004db30: 6164 6428 6166 7465 722c 2064 6966 6665  add(after, diffe
+0004db40: 7265 6e63 6529 0a20 2020 2020 2020 2074  rence).        t
+0004db50: 696d 6573 7461 6d70 203d 2073 656c 662e  imestamp = self.
+0004db60: 7061 7273 6538 3630 3128 7365 6c66 2e73  parse8601(self.s
+0004db70: 6166 655f 7374 7269 6e67 2869 7465 6d2c  afe_string(item,
+0004db80: 2027 6578 6563 5f74 696d 6527 2929 0a20   'exec_time')). 
+0004db90: 2020 2020 2020 2069 6620 7469 6d65 7374         if timest
+0004dba0: 616d 7020 6973 204e 6f6e 653a 0a20 2020  amp is None:.   
+0004dbb0: 2020 2020 2020 2020 2074 696d 6573 7461           timesta
+0004dbc0: 6d70 203d 2073 656c 662e 7361 6665 5f69  mp = self.safe_i
+0004dbd0: 6e74 6567 6572 2869 7465 6d2c 2027 7472  nteger(item, 'tr
+0004dbe0: 616e 7361 6374 696f 6e54 696d 6527 290a  ansactionTime').
+0004dbf0: 2020 2020 2020 2020 7479 7065 203d 2073          type = s
+0004dc00: 656c 662e 7061 7273 655f 6c65 6467 6572  elf.parse_ledger
+0004dc10: 5f65 6e74 7279 5f74 7970 6528 7365 6c66  _entry_type(self
+0004dc20: 2e73 6166 655f 7374 7269 6e67 2869 7465  .safe_string(ite
+0004dc30: 6d2c 2027 7479 7065 2729 290a 2020 2020  m, 'type')).    
+0004dc40: 2020 2020 6964 203d 2073 656c 662e 7361      id = self.sa
+0004dc50: 6665 5f73 7472 696e 6728 6974 656d 2c20  fe_string(item, 
+0004dc60: 2769 6427 290a 2020 2020 2020 2020 7265  'id').        re
+0004dc70: 6665 7265 6e63 6549 6420 3d20 7365 6c66  ferenceId = self
+0004dc80: 2e73 6166 655f 7374 7269 6e67 2869 7465  .safe_string(ite
+0004dc90: 6d2c 2027 7478 5f69 6427 290a 2020 2020  m, 'tx_id').    
+0004dca0: 2020 2020 7265 7475 726e 207b 0a20 2020      return {.   
+0004dcb0: 2020 2020 2020 2020 2027 6964 273a 2069           'id': i
+0004dcc0: 642c 0a20 2020 2020 2020 2020 2020 2027  d,.            '
+0004dcd0: 6375 7272 656e 6379 273a 2063 6f64 652c  currency': code,
+0004dce0: 0a20 2020 2020 2020 2020 2020 2027 6163  .            'ac
+0004dcf0: 636f 756e 7427 3a20 7365 6c66 2e73 6166  count': self.saf
+0004dd00: 655f 7374 7269 6e67 2869 7465 6d2c 2027  e_string(item, '
+0004dd10: 7761 6c6c 6574 5f69 6427 292c 0a20 2020  wallet_id'),.   
+0004dd20: 2020 2020 2020 2020 2027 7265 6665 7265           'refere
+0004dd30: 6e63 6541 6363 6f75 6e74 273a 204e 6f6e  nceAccount': Non
+0004dd40: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
+0004dd50: 7265 6665 7265 6e63 6549 6427 3a20 7265  referenceId': re
+0004dd60: 6665 7265 6e63 6549 642c 0a20 2020 2020  ferenceId,.     
+0004dd70: 2020 2020 2020 2027 7374 6174 7573 273a         'status':
+0004dd80: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
+0004dd90: 2020 2027 616d 6f75 6e74 273a 2073 656c     'amount': sel
+0004dda0: 662e 7061 7273 655f 6e75 6d62 6572 2861  f.parse_number(a
+0004ddb0: 6d6f 756e 7429 2c0a 2020 2020 2020 2020  mount),.        
+0004ddc0: 2020 2020 2762 6566 6f72 6527 3a20 7365      'before': se
+0004ddd0: 6c66 2e70 6172 7365 5f6e 756d 6265 7228  lf.parse_number(
+0004dde0: 6265 666f 7265 292c 0a20 2020 2020 2020  before),.       
+0004ddf0: 2020 2020 2027 6166 7465 7227 3a20 7365       'after': se
+0004de00: 6c66 2e70 6172 7365 5f6e 756d 6265 7228  lf.parse_number(
+0004de10: 6166 7465 7229 2c0a 2020 2020 2020 2020  after),.        
+0004de20: 2020 2020 2766 6565 273a 2073 656c 662e      'fee': self.
+0004de30: 7061 7273 655f 6e75 6d62 6572 2873 656c  parse_number(sel
+0004de40: 662e 7361 6665 5f73 7472 696e 6728 6974  f.safe_string(it
+0004de50: 656d 2c20 2766 6565 2729 292c 0a20 2020  em, 'fee')),.   
+0004de60: 2020 2020 2020 2020 2027 6469 7265 6374           'direct
+0004de70: 696f 6e27 3a20 6469 7265 6374 696f 6e2c  ion': direction,
+0004de80: 0a20 2020 2020 2020 2020 2020 2027 7469  .            'ti
+0004de90: 6d65 7374 616d 7027 3a20 7469 6d65 7374  mestamp': timest
+0004dea0: 616d 702c 0a20 2020 2020 2020 2020 2020  amp,.           
+0004deb0: 2027 6461 7465 7469 6d65 273a 2073 656c   'datetime': sel
+0004dec0: 662e 6973 6f38 3630 3128 7469 6d65 7374  f.iso8601(timest
+0004ded0: 616d 7029 2c0a 2020 2020 2020 2020 2020  amp),.          
+0004dee0: 2020 2774 7970 6527 3a20 7479 7065 2c0a    'type': type,.
+0004def0: 2020 2020 2020 2020 2020 2020 2769 6e66              'inf
+0004df00: 6f27 3a20 6974 656d 2c0a 2020 2020 2020  o': item,.      
+0004df10: 2020 7d0a 0a20 2020 2064 6566 2070 6172    }..    def par
+0004df20: 7365 5f6c 6564 6765 725f 656e 7472 795f  se_ledger_entry_
+0004df30: 7479 7065 2873 656c 662c 2074 7970 6529  type(self, type)
+0004df40: 3a0a 2020 2020 2020 2020 7479 7065 7320  :.        types 
+0004df50: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+0004df60: 2744 6570 6f73 6974 273a 2027 7472 616e  'Deposit': 'tran
+0004df70: 7361 6374 696f 6e27 2c0a 2020 2020 2020  saction',.      
+0004df80: 2020 2020 2020 2757 6974 6864 7261 7727        'Withdraw'
+0004df90: 3a20 2774 7261 6e73 6163 7469 6f6e 272c  : 'transaction',
+0004dfa0: 0a20 2020 2020 2020 2020 2020 2027 5265  .            'Re
+0004dfb0: 616c 6973 6564 504e 4c27 3a20 2774 7261  alisedPNL': 'tra
+0004dfc0: 6465 272c 0a20 2020 2020 2020 2020 2020  de',.           
+0004dfd0: 2027 436f 6d6d 6973 7369 6f6e 273a 2027   'Commission': '
+0004dfe0: 6665 6527 2c0a 2020 2020 2020 2020 2020  fee',.          
+0004dff0: 2020 2752 6566 756e 6427 3a20 2763 6173    'Refund': 'cas
+0004e000: 6862 6163 6b27 2c0a 2020 2020 2020 2020  hback',.        
+0004e010: 2020 2020 2750 7269 7a65 273a 2027 7072      'Prize': 'pr
+0004e020: 697a 6527 2c20 2023 203f 0a20 2020 2020  ize',  # ?.     
+0004e030: 2020 2020 2020 2027 4578 6368 616e 6765         'Exchange
+0004e040: 4f72 6465 7257 6974 6864 7261 7727 3a20  OrderWithdraw': 
+0004e050: 2774 7261 6e73 6163 7469 6f6e 272c 0a20  'transaction',. 
+0004e060: 2020 2020 2020 2020 2020 2027 4578 6368             'Exch
+0004e070: 616e 6765 4f72 6465 7244 6570 6f73 6974  angeOrderDeposit
+0004e080: 273a 2027 7472 616e 7361 6374 696f 6e27  ': 'transaction'
+0004e090: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+0004e0a0: 7635 0a20 2020 2020 2020 2020 2020 2027  v5.            '
+0004e0b0: 5452 414e 5346 4552 5f49 4e27 3a20 2774  TRANSFER_IN': 't
+0004e0c0: 7261 6e73 6163 7469 6f6e 272c 0a20 2020  ransaction',.   
+0004e0d0: 2020 2020 2020 2020 2027 5452 414e 5346           'TRANSF
+0004e0e0: 4552 5f4f 5554 273a 2027 7472 616e 7361  ER_OUT': 'transa
+0004e0f0: 6374 696f 6e27 2c0a 2020 2020 2020 2020  ction',.        
+0004e100: 2020 2020 2754 5241 4445 273a 2027 7472      'TRADE': 'tr
+0004e110: 6164 6527 2c0a 2020 2020 2020 2020 2020  ade',.          
+0004e120: 2020 2753 4554 544c 454d 454e 5427 3a20    'SETTLEMENT': 
+0004e130: 2774 7261 6465 272c 0a20 2020 2020 2020  'trade',.       
+0004e140: 2020 2020 2027 4445 4c49 5645 5259 273a       'DELIVERY':
+0004e150: 2027 7472 6164 6527 2c0a 2020 2020 2020   'trade',.      
+0004e160: 2020 2020 2020 274c 4951 5549 4441 5449        'LIQUIDATI
+0004e170: 4f4e 273a 2027 7472 6164 6527 2c0a 2020  ON': 'trade',.  
+0004e180: 2020 2020 2020 2020 2020 2742 4f4e 5553            'BONUS
+0004e190: 273a 2027 5072 697a 6527 2c0a 2020 2020  ': 'Prize',.    
+0004e1a0: 2020 2020 2020 2020 2746 4545 5f52 4546          'FEE_REF
+0004e1b0: 554e 4427 3a20 2763 6173 6862 6163 6b27  UND': 'cashback'
+0004e1c0: 2c0a 2020 2020 2020 2020 2020 2020 2749  ,.            'I
+0004e1d0: 4e54 4552 4553 5427 3a20 2774 7261 6e73  NTEREST': 'trans
+0004e1e0: 6163 7469 6f6e 272c 0a20 2020 2020 2020  action',.       
+0004e1f0: 2020 2020 2027 4355 5252 454e 4359 5f42       'CURRENCY_B
+0004e200: 5559 273a 2027 7472 6164 6527 2c0a 2020  UY': 'trade',.  
+0004e210: 2020 2020 2020 2020 2020 2743 5552 5245            'CURRE
+0004e220: 4e43 595f 5345 4c4c 273a 2027 7472 6164  NCY_SELL': 'trad
+0004e230: 6527 2c0a 2020 2020 2020 2020 7d0a 2020  e',.        }.  
+0004e240: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+0004e250: 662e 7361 6665 5f73 7472 696e 6728 7479  f.safe_string(ty
+0004e260: 7065 732c 2074 7970 652c 2074 7970 6529  pes, type, type)
+0004e270: 0a0a 2020 2020 6465 6620 7769 7468 6472  ..    def withdr
+0004e280: 6177 2873 656c 662c 2063 6f64 653a 2073  aw(self, code: s
+0004e290: 7472 2c20 616d 6f75 6e74 2c20 6164 6472  tr, amount, addr
+0004e2a0: 6573 732c 2074 6167 3d4e 6f6e 652c 2070  ess, tag=None, p
+0004e2b0: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
+0004e2c0: 2020 2022 2222 0a20 2020 2020 2020 206d     """.        m
+0004e2d0: 616b 6520 6120 7769 7468 6472 6177 616c  ake a withdrawal
+0004e2e0: 0a20 2020 2020 2020 2073 6565 2068 7474  .        see htt
+0004e2f0: 7073 3a2f 2f62 7962 6974 2d65 7863 6861  ps://bybit-excha
+0004e300: 6e67 652e 6769 7468 7562 2e69 6f2f 646f  nge.github.io/do
+0004e310: 6373 2f76 352f 6173 7365 742f 7769 7468  cs/v5/asset/with
+0004e320: 6472 6177 0a20 2020 2020 2020 203a 7061  draw.        :pa
+0004e330: 7261 6d20 7374 7220 636f 6465 3a20 756e  ram str code: un
+0004e340: 6966 6965 6420 6375 7272 656e 6379 2063  ified currency c
+0004e350: 6f64 650a 2020 2020 2020 2020 3a70 6172  ode.        :par
+0004e360: 616d 2066 6c6f 6174 2061 6d6f 756e 743a  am float amount:
+0004e370: 2074 6865 2061 6d6f 756e 7420 746f 2077   the amount to w
+0004e380: 6974 6864 7261 770a 2020 2020 2020 2020  ithdraw.        
+0004e390: 3a70 6172 616d 2073 7472 2061 6464 7265  :param str addre
+0004e3a0: 7373 3a20 7468 6520 6164 6472 6573 7320  ss: the address 
+0004e3b0: 746f 2077 6974 6864 7261 7720 746f 0a20  to withdraw to. 
+0004e3c0: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
+0004e3d0: 727c 4e6f 6e65 2074 6167 3a0a 2020 2020  r|None tag:.    
+0004e3e0: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
+0004e3f0: 7061 7261 6d73 3a20 6578 7472 6120 7061  params: extra pa
+0004e400: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
+0004e410: 6320 746f 2074 6865 2062 7962 6974 2061  c to the bybit a
+0004e420: 7069 2065 6e64 706f 696e 740a 2020 2020  pi endpoint.    
+0004e430: 2020 2020 3a72 6574 7572 6e73 2064 6963      :returns dic
+0004e440: 743a 2061 2060 7472 616e 7361 6374 696f  t: a `transactio
+0004e450: 6e20 7374 7275 6374 7572 6520 3c68 7474  n structure <htt
+0004e460: 7073 3a2f 2f64 6f63 732e 6363 7874 2e63  ps://docs.ccxt.c
+0004e470: 6f6d 2f23 2f3f 6964 3d74 7261 6e73 6163  om/#/?id=transac
+0004e480: 7469 6f6e 2d73 7472 7563 7475 7265 3e60  tion-structure>`
+0004e490: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0004e4a0: 2020 2020 2074 6167 2c20 7061 7261 6d73       tag, params
+0004e4b0: 203d 2073 656c 662e 6861 6e64 6c65 5f77   = self.handle_w
+0004e4c0: 6974 6864 7261 775f 7461 675f 616e 645f  ithdraw_tag_and_
+0004e4d0: 7061 7261 6d73 2874 6167 2c20 7061 7261  params(tag, para
+0004e4e0: 6d73 290a 2020 2020 2020 2020 7365 6c66  ms).        self
+0004e4f0: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
+0004e500: 2020 2020 2020 2020 7365 6c66 2e63 6865          self.che
+0004e510: 636b 5f61 6464 7265 7373 2861 6464 7265  ck_address(addre
+0004e520: 7373 290a 2020 2020 2020 2020 6375 7272  ss).        curr
+0004e530: 656e 6379 203d 2073 656c 662e 6375 7272  ency = self.curr
+0004e540: 656e 6379 2863 6f64 6529 0a20 2020 2020  ency(code).     
+0004e550: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
+0004e560: 2020 2020 2020 2020 2020 2027 636f 696e             'coin
+0004e570: 273a 2063 7572 7265 6e63 795b 2769 6427  ': currency['id'
+0004e580: 5d2c 0a20 2020 2020 2020 2020 2020 2027  ],.            '
+0004e590: 616d 6f75 6e74 273a 2073 656c 662e 6e75  amount': self.nu
+0004e5a0: 6d62 6572 5f74 6f5f 7374 7269 6e67 2861  mber_to_string(a
+0004e5b0: 6d6f 756e 7429 2c0a 2020 2020 2020 2020  mount),.        
+0004e5c0: 2020 2020 2761 6464 7265 7373 273a 2061      'address': a
+0004e5d0: 6464 7265 7373 2c0a 2020 2020 2020 2020  ddress,.        
+0004e5e0: 7d0a 2020 2020 2020 2020 6966 2074 6167  }.        if tag
+0004e5f0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0004e600: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+0004e610: 745b 2774 6167 275d 203d 2074 6167 0a20  t['tag'] = tag. 
+0004e620: 2020 2020 2020 206e 6574 776f 726b 436f         networkCo
+0004e630: 6465 2c20 7175 6572 7920 3d20 7365 6c66  de, query = self
+0004e640: 2e68 616e 646c 655f 6e65 7477 6f72 6b5f  .handle_network_
+0004e650: 636f 6465 5f61 6e64 5f70 6172 616d 7328  code_and_params(
+0004e660: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
+0004e670: 6e65 7477 6f72 6b49 6420 3d20 7365 6c66  networkId = self
+0004e680: 2e6e 6574 776f 726b 5f63 6f64 655f 746f  .network_code_to
+0004e690: 5f69 6428 6e65 7477 6f72 6b43 6f64 6529  _id(networkCode)
+0004e6a0: 0a20 2020 2020 2020 2069 6620 6e65 7477  .        if netw
+0004e6b0: 6f72 6b49 6420 6973 206e 6f74 204e 6f6e  orkId is not Non
+0004e6c0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+0004e6d0: 6571 7565 7374 5b27 6368 6169 6e27 5d20  equest['chain'] 
+0004e6e0: 3d20 6e65 7477 6f72 6b49 642e 7570 7065  = networkId.uppe
+0004e6f0: 7228 290a 2020 2020 2020 2020 656e 6162  r().        enab
+0004e700: 6c65 556e 6966 6965 6420 3d20 7365 6c66  leUnified = self
+0004e710: 2e69 735f 756e 6966 6965 645f 656e 6162  .is_unified_enab
+0004e720: 6c65 6428 290a 2020 2020 2020 2020 6d65  led().        me
+0004e730: 7468 6f64 203d 2027 7072 6976 6174 6550  thod = 'privateP
+0004e740: 6f73 7456 3541 7373 6574 5769 7468 6472  ostV5AssetWithdr
+0004e750: 6177 4372 6561 7465 2720 6966 2028 656e  awCreate' if (en
+0004e760: 6162 6c65 556e 6966 6965 645b 315d 2920  ableUnified[1]) 
+0004e770: 656c 7365 2027 7072 6976 6174 6550 6f73  else 'privatePos
+0004e780: 7441 7373 6574 5633 5072 6976 6174 6557  tAssetV3PrivateW
+0004e790: 6974 6864 7261 7743 7265 6174 6527 0a20  ithdrawCreate'. 
+0004e7a0: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+0004e7b0: 3d20 6765 7461 7474 7228 7365 6c66 2c20  = getattr(self, 
+0004e7c0: 6d65 7468 6f64 2928 7365 6c66 2e65 7874  method)(self.ext
+0004e7d0: 656e 6428 7265 7175 6573 742c 2071 7565  end(request, que
+0004e7e0: 7279 2929 0a20 2020 2020 2020 2023 0a20  ry)).        #. 
+0004e7f0: 2020 2020 2020 2023 2020 2020 7b0a 2020         #    {.  
+0004e800: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0004e810: 2272 6574 436f 6465 223a 2022 3022 2c0a  "retCode": "0",.
+0004e820: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004e830: 2020 2272 6574 4d73 6722 3a20 2273 7563    "retMsg": "suc
+0004e840: 6365 7373 222c 0a20 2020 2020 2020 2023  cess",.        #
+0004e850: 2020 2020 2020 2020 2022 7265 7375 6c74           "result
+0004e860: 223a 207b 0a20 2020 2020 2020 2023 2020  ": {.        #  
+0004e870: 2020 2020 2020 2020 2020 2022 6964 223a             "id":
+0004e880: 2022 3933 3737 3236 3622 0a20 2020 2020   "9377266".     
+0004e890: 2020 2023 2020 2020 2020 2020 207d 2c0a     #         },.
+0004e8a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004e8b0: 2020 2272 6574 4578 7449 6e66 6f22 3a20    "retExtInfo": 
+0004e8c0: 7b7d 2c0a 2020 2020 2020 2020 2320 2020  {},.        #   
+0004e8d0: 2020 2020 2020 2274 696d 6522 3a20 2231        "time": "1
+0004e8e0: 3636 3638 3932 3839 3439 3032 220a 2020  666892894902".  
+0004e8f0: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
+0004e900: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+0004e910: 7265 7375 6c74 203d 2073 656c 662e 7361  result = self.sa
+0004e920: 6665 5f76 616c 7565 2872 6573 706f 6e73  fe_value(respons
+0004e930: 652c 2027 7265 7375 6c74 272c 207b 7d29  e, 'result', {})
+0004e940: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0004e950: 7365 6c66 2e70 6172 7365 5f74 7261 6e73  self.parse_trans
+0004e960: 6163 7469 6f6e 2872 6573 756c 742c 2063  action(result, c
+0004e970: 7572 7265 6e63 7929 0a0a 2020 2020 6465  urrency)..    de
+0004e980: 6620 6665 7463 685f 706f 7369 7469 6f6e  f fetch_position
+0004e990: 2873 656c 662c 2073 796d 626f 6c3a 2073  (self, symbol: s
+0004e9a0: 7472 2c20 7061 7261 6d73 3d7b 7d29 3a0a  tr, params={}):.
+0004e9b0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0004e9c0: 2020 2020 6665 7463 6820 6461 7461 206f      fetch data o
+0004e9d0: 6e20 6120 7369 6e67 6c65 206f 7065 6e20  n a single open 
+0004e9e0: 636f 6e74 7261 6374 2074 7261 6465 2070  contract trade p
+0004e9f0: 6f73 6974 696f 6e0a 2020 2020 2020 2020  osition.        
+0004ea00: 3a70 6172 616d 2073 7472 2073 796d 626f  :param str symbo
+0004ea10: 6c3a 2075 6e69 6669 6564 206d 6172 6b65  l: unified marke
+0004ea20: 7420 7379 6d62 6f6c 206f 6620 7468 6520  t symbol of the 
+0004ea30: 6d61 726b 6574 2074 6865 2070 6f73 6974  market the posit
+0004ea40: 696f 6e20 6973 2068 656c 6420 696e 2c20  ion is held in, 
+0004ea50: 6465 6661 756c 7420 6973 204e 6f6e 650a  default is None.
+0004ea60: 2020 2020 2020 2020 3a70 6172 616d 2064          :param d
+0004ea70: 6963 7420 7061 7261 6d73 3a20 6578 7472  ict params: extr
+0004ea80: 6120 7061 7261 6d65 7465 7273 2073 7065  a parameters spe
+0004ea90: 6369 6669 6320 746f 2074 6865 2062 7962  cific to the byb
+0004eaa0: 6974 2061 7069 2065 6e64 706f 696e 740a  it api endpoint.
+0004eab0: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
+0004eac0: 2064 6963 743a 2061 2060 706f 7369 7469   dict: a `positi
+0004ead0: 6f6e 2073 7472 7563 7475 7265 203c 6874  on structure <ht
+0004eae0: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
+0004eaf0: 636f 6d2f 232f 3f69 643d 706f 7369 7469  com/#/?id=positi
+0004eb00: 6f6e 2d73 7472 7563 7475 7265 3e60 0a20  on-structure>`. 
+0004eb10: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0004eb20: 2020 2073 656c 662e 6368 6563 6b5f 7265     self.check_re
+0004eb30: 7175 6972 6564 5f73 796d 626f 6c28 2766  quired_symbol('f
+0004eb40: 6574 6368 506f 7369 7469 6f6e 272c 2073  etchPosition', s
+0004eb50: 796d 626f 6c29 0a20 2020 2020 2020 2073  ymbol).        s
+0004eb60: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
+0004eb70: 2829 0a20 2020 2020 2020 206d 6172 6b65  ().        marke
+0004eb80: 7420 3d20 7365 6c66 2e6d 6172 6b65 7428  t = self.market(
+0004eb90: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
+0004eba0: 7265 7175 6573 7420 3d20 7b0a 2020 2020  request = {.    
+0004ebb0: 2020 2020 2020 2020 2773 796d 626f 6c27          'symbol'
+0004ebc0: 3a20 6d61 726b 6574 5b27 6964 275d 2c0a  : market['id'],.
+0004ebd0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+0004ebe0: 2020 6d65 7468 6f64 203d 204e 6f6e 650a    method = None.
+0004ebf0: 2020 2020 2020 2020 656e 6162 6c65 556e          enableUn
+0004ec00: 6966 6965 644d 6172 6769 6e2c 2065 6e61  ifiedMargin, ena
+0004ec10: 626c 6555 6e69 6669 6564 4163 636f 756e  bleUnifiedAccoun
+0004ec20: 7420 3d20 7365 6c66 2e69 735f 756e 6966  t = self.is_unif
+0004ec30: 6965 645f 656e 6162 6c65 6428 290a 2020  ied_enabled().  
+0004ec40: 2020 2020 2020 6973 5573 6463 5365 7474        isUsdcSett
+0004ec50: 6c65 6420 3d20 6d61 726b 6574 5b27 7365  led = market['se
+0004ec60: 7474 6c65 275d 203d 3d20 2755 5344 4327  ttle'] == 'USDC'
+0004ec70: 0a20 2020 2020 2020 2069 6620 656e 6162  .        if enab
+0004ec80: 6c65 556e 6966 6965 644d 6172 6769 6e20  leUnifiedMargin 
+0004ec90: 6f72 2065 6e61 626c 6555 6e69 6669 6564  or enableUnified
+0004eca0: 4163 636f 756e 743a 0a20 2020 2020 2020  Account:.       
+0004ecb0: 2020 2020 206d 6574 686f 6420 3d20 2770       method = 'p
+0004ecc0: 7269 7661 7465 4765 7456 3550 6f73 6974  rivateGetV5Posit
+0004ecd0: 696f 6e4c 6973 7427 2069 6620 2865 6e61  ionList' if (ena
+0004ece0: 626c 6555 6e69 6669 6564 4163 636f 756e  bleUnifiedAccoun
+0004ecf0: 7429 2065 6c73 6520 2770 7269 7661 7465  t) else 'private
+0004ed00: 4765 7455 6e69 6669 6564 5633 5072 6976  GetUnifiedV3Priv
+0004ed10: 6174 6550 6f73 6974 696f 6e4c 6973 7427  atePositionList'
+0004ed20: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0004ed30: 6d61 726b 6574 5b27 6f70 7469 6f6e 275d  market['option']
+0004ed40: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0004ed50: 2020 7265 7175 6573 745b 2763 6174 6567    request['categ
+0004ed60: 6f72 7927 5d20 3d20 276f 7074 696f 6e27  ory'] = 'option'
+0004ed70: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
+0004ed80: 6620 6d61 726b 6574 5b27 6c69 6e65 6172  f market['linear
+0004ed90: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+0004eda0: 2020 2020 7265 7175 6573 745b 2763 6174      request['cat
+0004edb0: 6567 6f72 7927 5d20 3d20 276c 696e 6561  egory'] = 'linea
+0004edc0: 7227 0a20 2020 2020 2020 2020 2020 2065  r'.            e
+0004edd0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0004ede0: 2020 2020 2072 6169 7365 204e 6f74 5375       raise NotSu
+0004edf0: 7070 6f72 7465 6428 7365 6c66 2e69 6420  pported(self.id 
+0004ee00: 2b20 2720 6665 7463 6850 6f73 6974 696f  + ' fetchPositio
+0004ee10: 6e28 2920 646f 6573 206e 6f74 2061 6c6c  n() does not all
+0004ee20: 6f77 2069 6e76 6572 7365 206d 6172 6b65  ow inverse marke
+0004ee30: 7420 6f72 6465 7273 2066 6f72 2027 202b  t orders for ' +
+0004ee40: 2073 796d 626f 6c20 2b20 2720 6d61 726b   symbol + ' mark
+0004ee50: 6574 7327 290a 2020 2020 2020 2020 656c  ets').        el
+0004ee60: 6966 2069 7355 7364 6353 6574 746c 6564  if isUsdcSettled
+0004ee70: 3a0a 2020 2020 2020 2020 2020 2020 6d65  :.            me
+0004ee80: 7468 6f64 203d 2027 7072 6976 6174 6550  thod = 'privateP
+0004ee90: 6f73 744f 7074 696f 6e55 7364 634f 7065  ostOptionUsdcOpe
+0004eea0: 6e61 7069 5072 6976 6174 6556 3151 7565  napiPrivateV1Que
+0004eeb0: 7279 506f 7369 7469 6f6e 270a 2020 2020  ryPosition'.    
+0004eec0: 2020 2020 2020 2020 6966 206d 6172 6b65          if marke
+0004eed0: 745b 276f 7074 696f 6e27 5d3a 0a20 2020  t['option']:.   
+0004eee0: 2020 2020 2020 2020 2020 2020 2072 6571               req
+0004eef0: 7565 7374 5b27 6361 7465 676f 7279 275d  uest['category']
+0004ef00: 203d 2027 4f50 5449 4f4e 270a 2020 2020   = 'OPTION'.    
+0004ef10: 2020 2020 2020 2020 656c 6966 206d 6172          elif mar
+0004ef20: 6b65 745b 276c 696e 6561 7227 5d3a 0a20  ket['linear']:. 
+0004ef30: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0004ef40: 6571 7565 7374 5b27 6361 7465 676f 7279  equest['category
+0004ef50: 275d 203d 2027 5045 5250 4554 5541 4c27  '] = 'PERPETUAL'
+0004ef60: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+0004ef70: 2020 2020 2020 2020 2020 2069 6620 6d61             if ma
+0004ef80: 726b 6574 5b27 6c69 6e65 6172 275d 3a0a  rket['linear']:.
+0004ef90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004efa0: 7265 7175 6573 745b 2763 6174 6567 6f72  request['categor
+0004efb0: 7927 5d20 3d20 276c 696e 6561 7227 0a20  y'] = 'linear'. 
+0004efc0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+0004efd0: 6d61 726b 6574 5b27 696e 7665 7273 6527  market['inverse'
+0004efe0: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+0004eff0: 2020 2072 6571 7565 7374 5b27 6361 7465     request['cate
+0004f000: 676f 7279 275d 203d 2027 696e 7665 7273  gory'] = 'invers
+0004f010: 6527 0a20 2020 2020 2020 2020 2020 2065  e'.            e
+0004f020: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0004f030: 2020 2020 2072 6169 7365 204e 6f74 5375       raise NotSu
+0004f040: 7070 6f72 7465 6428 7365 6c66 2e69 6420  pported(self.id 
+0004f050: 2b20 2720 6665 7463 6850 6f73 6974 696f  + ' fetchPositio
+0004f060: 6e28 2920 646f 6573 206e 6f74 2061 6c6c  n() does not all
+0004f070: 6f77 206f 7074 696f 6e20 6d61 726b 6574  ow option market
+0004f080: 206f 7264 6572 7320 666f 7220 2720 2b20   orders for ' + 
+0004f090: 7379 6d62 6f6c 202b 2027 206d 6172 6b65  symbol + ' marke
+0004f0a0: 7473 2729 0a20 2020 2020 2020 2020 2020  ts').           
+0004f0b0: 206d 6574 686f 6420 3d20 2770 7269 7661   method = 'priva
+0004f0c0: 7465 4765 7456 3550 6f73 6974 696f 6e4c  teGetV5PositionL
+0004f0d0: 6973 7427 0a20 2020 2020 2020 2072 6573  ist'.        res
+0004f0e0: 706f 6e73 6520 3d20 6765 7461 7474 7228  ponse = getattr(
+0004f0f0: 7365 6c66 2c20 6d65 7468 6f64 2928 7365  self, method)(se
+0004f100: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
+0004f110: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
+0004f120: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+0004f130: 756e 6966 6965 6420 6163 636f 756e 740a  unified account.
+0004f140: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+0004f150: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
+0004f160: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
+0004f170: 436f 6465 223a 2030 2c0a 2020 2020 2020  Code": 0,.      
+0004f180: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
+0004f190: 4d73 6722 3a20 224f 4b22 2c0a 2020 2020  Msg": "OK",.    
+0004f1a0: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
+0004f1b0: 6573 756c 7422 3a20 7b0a 2020 2020 2020  esult": {.      
+0004f1c0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0004f1d0: 226e 6578 7450 6167 6543 7572 736f 7222  "nextPageCursor"
+0004f1e0: 3a20 2275 7064 6174 6541 7425 3344 3136  : "updateAt%3D16
+0004f1f0: 3732 3237 3933 3232 3636 3822 2c0a 2020  72279322668",.  
+0004f200: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0004f210: 2020 2020 2263 6174 6567 6f72 7922 3a20      "category": 
+0004f220: 226c 696e 6561 7222 2c0a 2020 2020 2020  "linear",.      
+0004f230: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0004f240: 226c 6973 7422 3a20 5b0a 2020 2020 2020  "list": [.      
+0004f250: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0004f260: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+0004f270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004f280: 2020 2020 2273 796d 626f 6c22 3a20 2258      "symbol": "X
+0004f290: 5250 5553 4454 222c 0a20 2020 2020 2020  RPUSDT",.       
+0004f2a0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0004f2b0: 2020 2020 2020 2022 6c65 7665 7261 6765         "leverage
+0004f2c0: 223a 2022 3130 222c 0a20 2020 2020 2020  ": "10",.       
+0004f2d0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0004f2e0: 2020 2020 2020 2022 6176 6750 7269 6365         "avgPrice
+0004f2f0: 223a 2022 302e 3336 3135 222c 0a20 2020  ": "0.3615",.   
+0004f300: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004f310: 2020 2020 2020 2020 2020 2022 6c69 7150             "liqP
+0004f320: 7269 6365 223a 2022 302e 3030 3031 222c  rice": "0.0001",
+0004f330: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004f340: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0004f350: 7269 736b 4c69 6d69 7456 616c 7565 223a  riskLimitValue":
+0004f360: 2022 3230 3030 3030 222c 0a20 2020 2020   "200000",.     
+0004f370: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004f380: 2020 2020 2020 2020 2022 7461 6b65 5072           "takePr
+0004f390: 6f66 6974 223a 2022 222c 0a20 2020 2020  ofit": "",.     
+0004f3a0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004f3b0: 2020 2020 2020 2020 2022 706f 7369 7469           "positi
+0004f3c0: 6f6e 5661 6c75 6522 3a20 2233 362e 3135  onValue": "36.15
+0004f3d0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004f3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004f3f0: 2022 7470 736c 4d6f 6465 223a 2022 4675   "tpslMode": "Fu
+0004f400: 6c6c 222c 0a20 2020 2020 2020 2023 2020  ll",.        #  
+0004f410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004f420: 2020 2022 7269 736b 4964 223a 2034 312c     "riskId": 41,
+0004f430: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004f440: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0004f450: 7472 6169 6c69 6e67 5374 6f70 223a 2022  trailingStop": "
+0004f460: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+0004f470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004f480: 2020 2275 6e72 6561 6c69 7365 6450 6e6c    "unrealisedPnl
+0004f490: 223a 2022 2d31 2e38 3322 2c0a 2020 2020  ": "-1.83",.    
+0004f4a0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004f4b0: 2020 2020 2020 2020 2020 226d 6172 6b50            "markP
+0004f4c0: 7269 6365 223a 2022 302e 3334 3332 222c  rice": "0.3432",
+0004f4d0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004f4e0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0004f4f0: 6375 6d52 6561 6c69 7365 6450 6e6c 223a  cumRealisedPnl":
+0004f500: 2022 302e 3438 3830 3538 3736 222c 0a20   "0.48805876",. 
+0004f510: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004f520: 2020 2020 2020 2020 2020 2020 2022 706f               "po
+0004f530: 7369 7469 6f6e 4d4d 223a 2022 302e 3338  sitionMM": "0.38
+0004f540: 3130 3231 222c 0a20 2020 2020 2020 2023  1021",.        #
+0004f550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004f560: 2020 2020 2022 6372 6561 7465 6454 696d       "createdTim
+0004f570: 6522 3a20 2231 3637 3231 3231 3138 3232  e": "16721211822
+0004f580: 3136 222c 0a20 2020 2020 2020 2023 2020  16",.        #  
+0004f590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004f5a0: 2020 2022 706f 7369 7469 6f6e 4964 7822     "positionIdx"
+0004f5b0: 3a20 302c 0a20 2020 2020 2020 2023 2020  : 0,.        #  
+0004f5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004f5d0: 2020 2022 706f 7369 7469 6f6e 494d 223a     "positionIM":
+0004f5e0: 2022 332e 3633 3435 3231 222c 0a20 2020   "3.634521",.   
+0004f5f0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004f600: 2020 2020 2020 2020 2020 2022 7570 6461             "upda
+0004f610: 7465 6454 696d 6522 3a20 2231 3637 3232  tedTime": "16722
+0004f620: 3739 3332 3236 3638 222c 0a20 2020 2020  79322668",.     
+0004f630: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0004f640: 2020 2020 2020 2020 2022 7369 6465 223a           "side":
+0004f650: 2022 4275 7922 2c0a 2020 2020 2020 2020   "Buy",.        
+0004f660: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0004f670: 2020 2020 2020 2262 7573 7450 7269 6365        "bustPrice
+0004f680: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
+0004f690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004f6a0: 2020 2020 2022 7369 7a65 223a 2022 3130       "size": "10
+0004f6b0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+0004f6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004f6d0: 2020 2270 6f73 6974 696f 6e53 7461 7475    "positionStatu
+0004f6e0: 7322 3a20 224e 6f72 6d61 6c22 2c0a 2020  s": "Normal",.  
+0004f6f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0004f700: 2020 2020 2020 2020 2020 2020 2273 746f              "sto
+0004f710: 704c 6f73 7322 3a20 2222 2c0a 2020 2020  pLoss": "",.    
+0004f720: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004f730: 2020 2020 2020 2020 2020 2274 7261 6465            "trade
+0004f740: 4d6f 6465 223a 2030 0a20 2020 2020 2020  Mode": 0.       
+0004f750: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0004f760: 2020 207d 0a20 2020 2020 2020 2023 2020     }.        #  
+0004f770: 2020 2020 2020 2020 2020 205d 0a20 2020             ].   
+0004f780: 2020 2020 2023 2020 2020 2020 2020 207d       #         }
+0004f790: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004f7a0: 2020 2020 2272 6574 4578 7449 6e66 6f22      "retExtInfo"
+0004f7b0: 3a20 7b7d 2c0a 2020 2020 2020 2020 2320  : {},.        # 
+0004f7c0: 2020 2020 2020 2020 2274 696d 6522 3a20          "time": 
+0004f7d0: 3136 3732 3238 3032 3139 3136 390a 2020  1672280219169.  
+0004f7e0: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
+0004f7f0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+0004f800: 2320 756e 6966 6965 6420 6d61 7267 696e  # unified margin
+0004f810: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+0004f820: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
+0004f830: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+0004f840: 7443 6f64 6522 3a20 302c 0a20 2020 2020  tCode": 0,.     
+0004f850: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+0004f860: 744d 7367 223a 2022 5375 6363 6573 7322  tMsg": "Success"
+0004f870: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004f880: 2020 2020 2272 6573 756c 7422 3a20 7b0a      "result": {.
+0004f890: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004f8a0: 2020 2020 2020 226e 6578 7450 6167 6543        "nextPageC
+0004f8b0: 7572 736f 7222 3a20 2230 2533 4131 3635  ursor": "0%3A165
+0004f8c0: 3737 3131 3934 3939 3435 2532 4330 2533  7711949945%2C0%3
+0004f8d0: 4131 3635 3737 3131 3934 3939 3435 222c  A1657711949945",
+0004f8e0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004f8f0: 2020 2020 2020 2022 6361 7465 676f 7279         "category
+0004f900: 223a 2022 6c69 6e65 6172 222c 0a20 2020  ": "linear",.   
+0004f910: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004f920: 2020 2022 6c69 7374 223a 205b 0a20 2020     "list": [.   
+0004f930: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004f940: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
+0004f950: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0004f960: 2020 2020 2020 2022 7379 6d62 6f6c 223a         "symbol":
+0004f970: 2022 4554 4855 5344 5422 2c0a 2020 2020   "ETHUSDT",.    
+0004f980: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004f990: 2020 2020 2020 2020 2020 226c 6576 6572            "lever
+0004f9a0: 6167 6522 3a20 2231 3022 2c0a 2020 2020  age": "10",.    
+0004f9b0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004f9c0: 2020 2020 2020 2020 2020 2275 7064 6174            "updat
+0004f9d0: 6564 5469 6d65 223a 2031 3635 3737 3131  edTime": 1657711
+0004f9e0: 3934 3939 3435 2c0a 2020 2020 2020 2020  949945,.        
+0004f9f0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0004fa00: 2020 2020 2020 2273 6964 6522 3a20 2242        "side": "B
+0004fa10: 7579 222c 0a20 2020 2020 2020 2023 2020  uy",.        #  
+0004fa20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004fa30: 2020 2022 706f 7369 7469 6f6e 5661 6c75     "positionValu
+0004fa40: 6522 3a20 2235 3336 2e39 3235 3030 3030  e": "536.9250000
+0004fa50: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+0004fa60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004fa70: 2020 2274 616b 6550 726f 6669 7422 3a20    "takeProfit": 
+0004fa80: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
+0004fa90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004faa0: 2020 2274 7073 6c4d 6f64 6522 3a20 2246    "tpslMode": "F
+0004fab0: 756c 6c22 2c0a 2020 2020 2020 2020 2320  ull",.        # 
+0004fac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004fad0: 2020 2020 2272 6973 6b49 6422 3a20 3131      "riskId": 11
+0004fae0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004faf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004fb00: 2274 7261 696c 696e 6753 746f 7022 3a20  "trailingStop": 
+0004fb10: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
+0004fb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004fb30: 2020 2265 6e74 7279 5072 6963 6522 3a20    "entryPrice": 
+0004fb40: 2231 3037 332e 3835 3030 3030 3030 222c  "1073.85000000",
+0004fb50: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004fb60: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0004fb70: 756e 7265 616c 6973 6564 506e 6c22 3a20  unrealisedPnl": 
+0004fb80: 2222 2c0a 2020 2020 2020 2020 2320 2020  "",.        #   
+0004fb90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004fba0: 2020 226d 6172 6b50 7269 6365 223a 2022    "markPrice": "
+0004fbb0: 3130 3830 2e36 3530 3030 3030 3022 2c0a  1080.65000000",.
+0004fbc0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004fbd0: 2020 2020 2020 2020 2020 2020 2020 2273                "s
+0004fbe0: 697a 6522 3a20 2230 2e35 3030 3022 2c0a  ize": "0.5000",.
+0004fbf0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004fc00: 2020 2020 2020 2020 2020 2020 2020 2270                "p
+0004fc10: 6f73 6974 696f 6e53 7461 7475 7322 3a20  ositionStatus": 
+0004fc20: 226e 6f72 6d61 6c22 2c0a 2020 2020 2020  "normal",.      
+0004fc30: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0004fc40: 2020 2020 2020 2020 2273 746f 704c 6f73          "stopLos
+0004fc50: 7322 3a20 2222 2c0a 2020 2020 2020 2020  s": "",.        
+0004fc60: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0004fc70: 2020 2020 2020 2263 756d 5265 616c 6973        "cumRealis
+0004fc80: 6564 506e 6c22 3a20 222d 302e 3332 3231  edPnl": "-0.3221
+0004fc90: 3535 3030 222c 0a20 2020 2020 2020 2023  5500",.        #
 0004fca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004fcb0: 2262 7573 7450 7269 6365 223a 2022 302e  "bustPrice": "0.
-0004fcc0: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
-0004fcd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004fce0: 2020 2020 2022 7461 6b65 5072 6f66 6974       "takeProfit
-0004fcf0: 223a 2022 302e 3030 3030 222c 0a20 2020  ": "0.0000",.   
-0004fd00: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0004fd10: 2020 2020 2020 2020 2020 2022 7374 6f70             "stop
-0004fd20: 4c6f 7373 223a 2022 302e 3030 3030 222c  Loss": "0.0000",
-0004fd30: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0004fd40: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0004fd50: 7472 6169 6c69 6e67 5374 6f70 223a 2022  trailingStop": "
-0004fd60: 302e 3030 3030 222c 0a20 2020 2020 2020  0.0000",.       
-0004fd70: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004fd80: 2020 2020 2020 2022 756e 7265 616c 6973         "unrealis
-0004fd90: 6564 506e 6c22 3a20 2230 222c 0a20 2020  edPnl": "0",.   
-0004fda0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0004fdb0: 2020 2020 2020 2020 2020 2022 6372 6561             "crea
-0004fdc0: 7465 6454 696d 6522 3a20 2231 3635 3838  tedTime": "16588
-0004fdd0: 3237 3434 3433 3238 222c 0a20 2020 2020  27444328",.     
-0004fde0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0004fdf0: 2020 2020 2020 2020 2022 7570 6461 7465           "update
-0004fe00: 6454 696d 6522 3a20 2231 3635 3839 3034  dTime": "1658904
-0004fe10: 3836 3334 3132 222c 0a20 2020 2020 2020  863412",.       
-0004fe20: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0004fe30: 2020 2020 2020 2022 7470 536c 4d6f 6465         "tpSlMode
-0004fe40: 223a 2022 4675 6c6c 222c 0a20 2020 2020  ": "Full",.     
-0004fe50: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0004fe60: 2020 2020 2020 2020 2022 7269 736b 4c69           "riskLi
-0004fe70: 6d69 7456 616c 7565 223a 2022 3230 3030  mitValue": "2000
-0004fe80: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
-0004fe90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004fea0: 2020 2022 6163 7469 7665 5072 6963 6522     "activePrice"
-0004feb0: 3a20 2230 2e30 3030 3022 0a20 2020 2020  : "0.0000".     
-0004fec0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0004fed0: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
-0004fee0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0004fef0: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-0004ff00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004ff10: 2020 2270 6f73 6974 696f 6e49 6478 223a    "positionIdx":
-0004ff20: 2032 2c0a 2020 2020 2020 2020 2320 2020   2,.        #   
-0004ff30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004ff40: 2020 2272 6973 6b49 6422 3a20 2234 3122    "riskId": "41"
-0004ff50: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0004ff60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004ff70: 2273 796d 626f 6c22 3a20 2258 5250 5553  "symbol": "XRPUS
-0004ff80: 4454 222c 0a20 2020 2020 2020 2023 2020  DT",.        #  
-0004ff90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004ffa0: 2020 2022 7369 6465 223a 2022 5365 6c6c     "side": "Sell
-0004ffb0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0004fcb0: 2020 2020 2022 706f 7369 7469 6f6e 4d4d       "positionMM
+0004fcc0: 223a 2022 322e 3937 3435 3634 3530 222c  ": "2.97456450",
+0004fcd0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0004fce0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0004fcf0: 6372 6561 7465 6454 696d 6522 3a20 3136  createdTime": 16
+0004fd00: 3537 3731 3139 3439 3932 382c 0a20 2020  57711949928,.   
+0004fd10: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004fd20: 2020 2020 2020 2020 2020 2022 706f 7369             "posi
+0004fd30: 7469 6f6e 4964 7822 3a20 302c 0a20 2020  tionIdx": 0,.   
+0004fd40: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0004fd50: 2020 2020 2020 2020 2020 2022 706f 7369             "posi
+0004fd60: 7469 6f6e 494d 223a 2022 3533 2e39 3832  tionIM": "53.982
+0004fd70: 3433 3935 3022 0a20 2020 2020 2020 2023  43950".        #
+0004fd80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004fd90: 207d 0a20 2020 2020 2020 2023 2020 2020   }.        #    
+0004fda0: 2020 2020 2020 2020 205d 0a20 2020 2020           ].     
+0004fdb0: 2020 2023 2020 2020 2020 2020 207d 2c0a     #         },.
+0004fdc0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0004fdd0: 2020 2274 696d 6522 3a20 3136 3537 3731    "time": 165771
+0004fde0: 3336 3933 3138 320a 2020 2020 2020 2020  3693182.        
+0004fdf0: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
+0004fe00: 230a 2020 2020 2020 2020 2320 636f 6e74  #.        # cont
+0004fe10: 7261 6374 2076 330a 2020 2020 2020 2020  ract v3.        
+0004fe20: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+0004fe30: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0004fe40: 2020 2020 2272 6574 436f 6465 223a 2030      "retCode": 0
+0004fe50: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0004fe60: 2020 2020 2272 6574 4d73 6722 3a20 224f      "retMsg": "O
+0004fe70: 4b22 2c0a 2020 2020 2020 2020 2320 2020  K",.        #   
+0004fe80: 2020 2020 2020 2272 6573 756c 7422 3a20        "result": 
+0004fe90: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0004fea0: 2020 2020 2020 2020 226c 6973 7422 3a20          "list": 
+0004feb0: 5b0a 2020 2020 2020 2020 2320 2020 2020  [.        #     
+0004fec0: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+0004fed0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0004fee0: 2020 2020 2020 2020 2020 2020 2270 6f73              "pos
+0004fef0: 6974 696f 6e49 6478 223a 2031 2c0a 2020  itionIdx": 1,.  
+0004ff00: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0004ff10: 2020 2020 2020 2020 2020 2020 2272 6973              "ris
+0004ff20: 6b49 6422 3a20 2234 3122 2c0a 2020 2020  kId": "41",.    
+0004ff30: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004ff40: 2020 2020 2020 2020 2020 2273 796d 626f            "symbo
+0004ff50: 6c22 3a20 2258 5250 5553 4454 222c 0a20  l": "XRPUSDT",. 
+0004ff60: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0004ff70: 2020 2020 2020 2020 2020 2020 2022 7369               "si
+0004ff80: 6465 223a 2022 4275 7922 2c0a 2020 2020  de": "Buy",.    
+0004ff90: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0004ffa0: 2020 2020 2020 2020 2020 2273 697a 6522            "size"
+0004ffb0: 3a20 2230 222c 0a20 2020 2020 2020 2023  : "0",.        #
 0004ffc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004ffd0: 2022 7369 7a65 223a 2022 3530 222c 0a20   "size": "50",. 
-0004ffe0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0004fff0: 2020 2020 2020 2020 2020 2020 2022 706f               "po
-00050000: 7369 7469 6f6e 5661 6c75 6522 3a20 2231  sitionValue": "1
-00050010: 362e 3638 222c 0a20 2020 2020 2020 2023  6.68",.        #
-00050020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00050030: 2020 2020 2022 656e 7472 7950 7269 6365       "entryPrice
-00050040: 223a 2022 302e 3333 3336 222c 0a20 2020  ": "0.3336",.   
-00050050: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00050060: 2020 2020 2020 2020 2020 2022 7472 6164             "trad
-00050070: 654d 6f64 6522 3a20 302c 0a20 2020 2020  eMode": 0,.     
-00050080: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00050090: 2020 2020 2020 2020 2022 6175 746f 4164           "autoAd
-000500a0: 644d 6172 6769 6e22 3a20 302c 0a20 2020  dMargin": 0,.   
-000500b0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000500c0: 2020 2020 2020 2020 2020 2022 6c65 7665             "leve
-000500d0: 7261 6765 223a 2022 3130 222c 0a20 2020  rage": "10",.   
-000500e0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000500f0: 2020 2020 2020 2020 2020 2022 706f 7369             "posi
-00050100: 7469 6f6e 4261 6c61 6e63 6522 3a20 2231  tionBalance": "1
-00050110: 2e36 3739 3030 3838 222c 0a20 2020 2020  .6790088",.     
-00050120: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00050130: 2020 2020 2020 2020 2022 6c69 7150 7269           "liqPri
-00050140: 6365 223a 2022 3132 2e34 3833 3522 2c0a  ce": "12.4835",.
-00050150: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00050160: 2020 2020 2020 2020 2020 2020 2020 2262                "b
-00050170: 7573 7450 7269 6365 223a 2022 3132 2e34  ustPrice": "12.4
-00050180: 3836 3922 2c0a 2020 2020 2020 2020 2320  869",.        # 
-00050190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000501a0: 2020 2020 2274 616b 6550 726f 6669 7422      "takeProfit"
-000501b0: 3a20 2230 2e30 3030 3022 2c0a 2020 2020  : "0.0000",.    
-000501c0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000501d0: 2020 2020 2020 2020 2020 2273 746f 704c            "stopL
-000501e0: 6f73 7322 3a20 2230 2e30 3030 3022 2c0a  oss": "0.0000",.
-000501f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00050200: 2020 2020 2020 2020 2020 2020 2020 2274                "t
-00050210: 7261 696c 696e 6753 746f 7022 3a20 2230  railingStop": "0
-00050220: 2e30 3030 3022 2c0a 2020 2020 2020 2020  .0000",.        
-00050230: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00050240: 2020 2020 2020 2275 6e72 6561 6c69 7365        "unrealise
-00050250: 6450 6e6c 223a 2022 3022 2c0a 2020 2020  dPnl": "0",.    
-00050260: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00050270: 2020 2020 2020 2020 2020 2263 7265 6174            "creat
-00050280: 6564 5469 6d65 223a 2022 3136 3538 3832  edTime": "165882
-00050290: 3734 3434 3332 3822 2c0a 2020 2020 2020  7444328",.      
-000502a0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000502b0: 2020 2020 2020 2020 2275 7064 6174 6564          "updated
-000502c0: 5469 6d65 223a 2022 3136 3538 3930 3438  Time": "16589048
-000502d0: 3633 3431 3222 2c0a 2020 2020 2020 2020  63412",.        
-000502e0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-000502f0: 2020 2020 2020 2274 7053 6c4d 6f64 6522        "tpSlMode"
-00050300: 3a20 2246 756c 6c22 2c0a 2020 2020 2020  : "Full",.      
-00050310: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00050320: 2020 2020 2020 2020 2272 6973 6b4c 696d          "riskLim
-00050330: 6974 5661 6c75 6522 3a20 2232 3030 3030  itValue": "20000
-00050340: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-00050350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00050360: 2020 2261 6374 6976 6550 7269 6365 223a    "activePrice":
-00050370: 2022 302e 3030 3030 220a 2020 2020 2020   "0.0000".      
-00050380: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00050390: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
-000503a0: 2020 2020 2020 2020 2020 2020 5d0a 2020              ].  
-000503b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000503c0: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
-000503d0: 2020 2020 2022 7265 7445 7874 496e 666f       "retExtInfo
-000503e0: 223a 206e 756c 6c2c 0a20 2020 2020 2020  ": null,.       
-000503f0: 2023 2020 2020 2020 2020 2022 7469 6d65   #         "time
-00050400: 223a 2031 3635 3839 3034 3837 3739 3432  ": 1658904877942
-00050410: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
-00050420: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00050430: 2020 2072 6573 756c 7420 3d20 7365 6c66     result = self
-00050440: 2e73 6166 655f 7661 6c75 6528 7265 7370  .safe_value(resp
-00050450: 6f6e 7365 2c20 2772 6573 756c 7427 2c20  onse, 'result', 
-00050460: 7b7d 290a 2020 2020 2020 2020 706f 7369  {}).        posi
-00050470: 7469 6f6e 7320 3d20 7365 6c66 2e73 6166  tions = self.saf
-00050480: 655f 7661 6c75 655f 3228 7265 7375 6c74  e_value_2(result
-00050490: 2c20 276c 6973 7427 2c20 2764 6174 614c  , 'list', 'dataL
-000504a0: 6973 7427 2c20 5b5d 290a 2020 2020 2020  ist', []).      
-000504b0: 2020 7469 6d65 7374 616d 7020 3d20 7365    timestamp = se
-000504c0: 6c66 2e73 6166 655f 696e 7465 6765 7228  lf.safe_integer(
-000504d0: 7265 7370 6f6e 7365 2c20 2774 696d 6527  response, 'time'
-000504e0: 290a 2020 2020 2020 2020 6669 7273 7420  ).        first 
-000504f0: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-00050500: 6528 706f 7369 7469 6f6e 732c 2030 290a  e(positions, 0).
-00050510: 2020 2020 2020 2020 706f 7369 7469 6f6e          position
-00050520: 203d 2073 656c 662e 7061 7273 655f 706f   = self.parse_po
-00050530: 7369 7469 6f6e 2866 6972 7374 2c20 6d61  sition(first, ma
-00050540: 726b 6574 290a 2020 2020 2020 2020 7265  rket).        re
-00050550: 7475 726e 2073 656c 662e 6578 7465 6e64  turn self.extend
-00050560: 2870 6f73 6974 696f 6e2c 207b 0a20 2020  (position, {.   
-00050570: 2020 2020 2020 2020 2027 7469 6d65 7374           'timest
-00050580: 616d 7027 3a20 7469 6d65 7374 616d 702c  amp': timestamp,
-00050590: 0a20 2020 2020 2020 2020 2020 2027 6461  .            'da
-000505a0: 7465 7469 6d65 273a 2073 656c 662e 6973  tetime': self.is
-000505b0: 6f38 3630 3128 7469 6d65 7374 616d 7029  o8601(timestamp)
-000505c0: 2c0a 2020 2020 2020 2020 7d29 0a0a 2020  ,.        })..  
-000505d0: 2020 6465 6620 6665 7463 685f 756e 6966    def fetch_unif
-000505e0: 6965 645f 706f 7369 7469 6f6e 7328 7365  ied_positions(se
-000505f0: 6c66 2c20 7379 6d62 6f6c 733a 204f 7074  lf, symbols: Opt
-00050600: 696f 6e61 6c5b 4c69 7374 5b73 7472 5d5d  ional[List[str]]
-00050610: 203d 204e 6f6e 652c 2070 6172 616d 733d   = None, params=
-00050620: 7b7d 293a 0a20 2020 2020 2020 2073 656c  {}):.        sel
-00050630: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
-00050640: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
-00050650: 203d 207b 7d0a 2020 2020 2020 2020 7479   = {}.        ty
-00050660: 7065 203d 204e 6f6e 650a 2020 2020 2020  pe = None.      
-00050670: 2020 7365 7474 6c65 203d 204e 6f6e 650a    settle = None.
-00050680: 2020 2020 2020 2020 656e 6162 6c65 556e          enableUn
-00050690: 6966 6965 6420 3d20 7365 6c66 2e69 735f  ified = self.is_
-000506a0: 756e 6966 6965 645f 656e 6162 6c65 6428  unified_enabled(
-000506b0: 290a 2020 2020 2020 2020 6966 2069 7369  ).        if isi
-000506c0: 6e73 7461 6e63 6528 7379 6d62 6f6c 732c  nstance(symbols,
-000506d0: 206c 6973 7429 3a0a 2020 2020 2020 2020   list):.        
-000506e0: 2020 2020 7379 6d62 6f6c 734c 656e 6774      symbolsLengt
-000506f0: 6820 3d20 6c65 6e28 7379 6d62 6f6c 7329  h = len(symbols)
-00050700: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00050710: 7379 6d62 6f6c 734c 656e 6774 6820 3e20  symbolsLength > 
-00050720: 313a 0a20 2020 2020 2020 2020 2020 2020  1:.             
-00050730: 2020 2072 6169 7365 2041 7267 756d 656e     raise Argumen
-00050740: 7473 5265 7175 6972 6564 2873 656c 662e  tsRequired(self.
-00050750: 6964 202b 2027 2066 6574 6368 506f 7369  id + ' fetchPosi
-00050760: 7469 6f6e 7328 2920 646f 6573 206e 6f74  tions() does not
-00050770: 2061 6363 6570 7420 616e 2061 7272 6179   accept an array
-00050780: 2077 6974 6820 6d6f 7265 2074 6861 6e20   with more than 
-00050790: 6f6e 6520 7379 6d62 6f6c 2729 0a20 2020  one symbol').   
-000507a0: 2020 2020 2020 2020 206d 6172 6b65 7420           market 
-000507b0: 3d20 7365 6c66 2e6d 6172 6b65 7428 7379  = self.market(sy
-000507c0: 6d62 6f6c 735b 305d 290a 2020 2020 2020  mbols[0]).      
-000507d0: 2020 2020 2020 7365 7474 6c65 203d 206d        settle = m
-000507e0: 6172 6b65 745b 2773 6574 746c 6527 5d0a  arket['settle'].
-000507f0: 2020 2020 2020 2020 656c 6966 2073 796d          elif sym
-00050800: 626f 6c73 2069 7320 6e6f 7420 4e6f 6e65  bols is not None
-00050810: 3a0a 2020 2020 2020 2020 2020 2020 7379  :.            sy
-00050820: 6d62 6f6c 7320 3d20 5b73 796d 626f 6c73  mbols = [symbols
-00050830: 5d0a 2020 2020 2020 2020 7379 6d62 6f6c  ].        symbol
-00050840: 7320 3d20 7365 6c66 2e6d 6172 6b65 745f  s = self.market_
-00050850: 7379 6d62 6f6c 7328 7379 6d62 6f6c 7329  symbols(symbols)
-00050860: 0a20 2020 2020 2020 2069 6620 7379 6d62  .        if symb
-00050870: 6f6c 7320 6973 204e 6f6e 653a 0a20 2020  ols is None:.   
-00050880: 2020 2020 2020 2020 2073 6574 746c 652c           settle,
-00050890: 2070 6172 616d 7320 3d20 7365 6c66 2e68   params = self.h
-000508a0: 616e 646c 655f 6f70 7469 6f6e 5f61 6e64  andle_option_and
-000508b0: 5f70 6172 616d 7328 7061 7261 6d73 2c20  _params(params, 
-000508c0: 2766 6574 6368 506f 7369 7469 6f6e 7327  'fetchPositions'
-000508d0: 2c20 2773 6574 746c 6527 2c20 2755 5344  , 'settle', 'USD
-000508e0: 5427 290a 2020 2020 2020 2020 656c 7365  T').        else
-000508f0: 3a0a 2020 2020 2020 2020 2020 2020 6669  :.            fi
-00050900: 7273 7420 3d20 7365 6c66 2e73 6166 655f  rst = self.safe_
-00050910: 7661 6c75 6528 7379 6d62 6f6c 732c 2030  value(symbols, 0
-00050920: 290a 2020 2020 2020 2020 2020 2020 6d61  ).            ma
-00050930: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
-00050940: 6574 2866 6972 7374 290a 2020 2020 2020  et(first).      
-00050950: 2020 2020 2020 7365 7474 6c65 203d 206d        settle = m
-00050960: 6172 6b65 745b 2773 6574 746c 6527 5d0a  arket['settle'].
-00050970: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00050980: 6573 745b 2773 796d 626f 6c27 5d20 3d20  est['symbol'] = 
-00050990: 6d61 726b 6574 5b27 6964 275d 0a20 2020  market['id'].   
-000509a0: 2020 2020 2069 6620 656e 6162 6c65 556e       if enableUn
-000509b0: 6966 6965 645b 315d 3a0a 2020 2020 2020  ified[1]:.      
-000509c0: 2020 2020 2020 7265 7175 6573 745b 2773        request['s
-000509d0: 6574 746c 6543 6f69 6e27 5d20 3d20 7365  ettleCoin'] = se
-000509e0: 7474 6c65 0a20 2020 2020 2020 2020 2020  ttle.           
-000509f0: 2072 6571 7565 7374 5b27 6c69 6d69 7427   request['limit'
-00050a00: 5d20 3d20 3230 300a 2020 2020 2020 2020  ] = 200.        
-00050a10: 2320 6d61 726b 6574 204e 6f6e 650a 2020  # market None.  
-00050a20: 2020 2020 2020 7479 7065 2c20 7061 7261        type, para
-00050a30: 6d73 203d 2073 656c 662e 6861 6e64 6c65  ms = self.handle
-00050a40: 5f6d 6172 6b65 745f 7479 7065 5f61 6e64  _market_type_and
-00050a50: 5f70 6172 616d 7328 2766 6574 6368 506f  _params('fetchPo
-00050a60: 7369 7469 6f6e 7327 2c20 4e6f 6e65 2c20  sitions', None, 
-00050a70: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
-00050a80: 7375 6254 7970 6520 3d20 4e6f 6e65 0a20  subType = None. 
-00050a90: 2020 2020 2020 2073 7562 5479 7065 2c20         subType, 
-00050aa0: 7061 7261 6d73 203d 2073 656c 662e 6861  params = self.ha
-00050ab0: 6e64 6c65 5f73 7562 5f74 7970 655f 616e  ndle_sub_type_an
-00050ac0: 645f 7061 7261 6d73 2827 6665 7463 6850  d_params('fetchP
-00050ad0: 6f73 6974 696f 6e73 272c 204e 6f6e 652c  ositions', None,
-00050ae0: 2070 6172 616d 732c 2027 6c69 6e65 6172   params, 'linear
-00050af0: 2729 0a20 2020 2020 2020 2072 6571 7565  ').        reque
-00050b00: 7374 5b27 6361 7465 676f 7279 275d 203d  st['category'] =
-00050b10: 2073 7562 5479 7065 0a20 2020 2020 2020   subType.       
-00050b20: 2069 6620 7479 7065 203d 3d20 276f 7074   if type == 'opt
-00050b30: 696f 6e27 3a0a 2020 2020 2020 2020 2020  ion':.          
-00050b40: 2020 7265 7175 6573 745b 2763 6174 6567    request['categ
-00050b50: 6f72 7927 5d20 3d20 276f 7074 696f 6e27  ory'] = 'option'
-00050b60: 0a20 2020 2020 2020 206d 6574 686f 6420  .        method 
-00050b70: 3d20 2770 7269 7661 7465 4765 7456 3550  = 'privateGetV5P
-00050b80: 6f73 6974 696f 6e4c 6973 7427 2069 6620  ositionList' if 
-00050b90: 2865 6e61 626c 6555 6e69 6669 6564 5b31  (enableUnified[1
-00050ba0: 5d29 2065 6c73 6520 2770 7269 7661 7465  ]) else 'private
-00050bb0: 4765 7455 6e69 6669 6564 5633 5072 6976  GetUnifiedV3Priv
-00050bc0: 6174 6550 6f73 6974 696f 6e4c 6973 7427  atePositionList'
-00050bd0: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
-00050be0: 6520 3d20 6765 7461 7474 7228 7365 6c66  e = getattr(self
-00050bf0: 2c20 6d65 7468 6f64 2928 7365 6c66 2e65  , method)(self.e
-00050c00: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
-00050c10: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
-00050c20: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
-00050c30: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-00050c40: 2020 2020 2272 6574 436f 6465 223a 2030      "retCode": 0
-00050c50: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00050c60: 2020 2020 2272 6574 4d73 6722 3a20 2253      "retMsg": "S
-00050c70: 7563 6365 7373 222c 0a20 2020 2020 2020  uccess",.       
-00050c80: 2023 2020 2020 2020 2020 2022 7265 7375   #         "resu
-00050c90: 6c74 223a 207b 0a20 2020 2020 2020 2023  lt": {.        #
-00050ca0: 2020 2020 2020 2020 2020 2020 2022 6e65               "ne
-00050cb0: 7874 5061 6765 4375 7273 6f72 223a 2022  xtPageCursor": "
-00050cc0: 3025 3341 3136 3537 3731 3139 3439 3934  0%3A165771194994
-00050cd0: 3525 3243 3025 3341 3136 3537 3731 3139  5%2C0%3A16577119
-00050ce0: 3439 3934 3522 2c0a 2020 2020 2020 2020  49945",.        
-00050cf0: 2320 2020 2020 2020 2020 2020 2020 2263  #             "c
-00050d00: 6174 6567 6f72 7922 3a20 226c 696e 6561  ategory": "linea
-00050d10: 7222 2c0a 2020 2020 2020 2020 2320 2020  r",.        #   
-00050d20: 2020 2020 2020 2020 2020 226c 6973 7422            "list"
-00050d30: 3a20 5b0a 2020 2020 2020 2020 2320 2020  : [.        #   
-00050d40: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
-00050d50: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00050d60: 2020 2020 2020 2020 2020 2020 2020 2273                "s
-00050d70: 796d 626f 6c22 3a20 2245 5448 5553 4454  ymbol": "ETHUSDT
-00050d80: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00050d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00050da0: 2022 6c65 7665 7261 6765 223a 2022 3130   "leverage": "10
-00050db0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00050dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00050dd0: 2022 7570 6461 7465 6454 696d 6522 3a20   "updatedTime": 
-00050de0: 3136 3537 3731 3139 3439 3934 352c 0a20  1657711949945,. 
-00050df0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00050e00: 2020 2020 2020 2020 2020 2020 2022 7369               "si
-00050e10: 6465 223a 2022 4275 7922 2c0a 2020 2020  de": "Buy",.    
-00050e20: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00050e30: 2020 2020 2020 2020 2020 2270 6f73 6974            "posit
-00050e40: 696f 6e56 616c 7565 223a 2022 3533 362e  ionValue": "536.
-00050e50: 3932 3530 3030 3030 222c 0a20 2020 2020  92500000",.     
-00050e60: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00050e70: 2020 2020 2020 2020 2022 7461 6b65 5072           "takePr
-00050e80: 6f66 6974 223a 2022 222c 0a20 2020 2020  ofit": "",.     
-00050e90: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00050ea0: 2020 2020 2020 2020 2022 7470 736c 4d6f           "tpslMo
-00050eb0: 6465 223a 2022 4675 6c6c 222c 0a20 2020  de": "Full",.   
-00050ec0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00050ed0: 2020 2020 2020 2020 2020 2022 7269 736b             "risk
-00050ee0: 4964 223a 2031 312c 0a20 2020 2020 2020  Id": 11,.       
-00050ef0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00050f00: 2020 2020 2020 2022 7472 6169 6c69 6e67         "trailing
-00050f10: 5374 6f70 223a 2022 222c 0a20 2020 2020  Stop": "",.     
-00050f20: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00050f30: 2020 2020 2020 2020 2022 656e 7472 7950           "entryP
-00050f40: 7269 6365 223a 2022 3130 3733 2e38 3530  rice": "1073.850
-00050f50: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
-00050f60: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00050f70: 2020 2020 2020 2275 6e72 6561 6c69 7365        "unrealise
-00050f80: 6450 6e6c 223a 2022 222c 0a20 2020 2020  dPnl": "",.     
-00050f90: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00050fa0: 2020 2020 2020 2020 2022 6d61 726b 5072           "markPr
-00050fb0: 6963 6522 3a20 2231 3038 302e 3635 3030  ice": "1080.6500
-00050fc0: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
-00050fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00050fe0: 2020 2020 2022 7369 7a65 223a 2022 302e       "size": "0.
-00050ff0: 3530 3030 222c 0a20 2020 2020 2020 2023  5000",.        #
-00051000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00051010: 2020 2020 2022 706f 7369 7469 6f6e 5374       "positionSt
-00051020: 6174 7573 223a 2022 6e6f 726d 616c 222c  atus": "normal",
-00051030: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00051040: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00051050: 7374 6f70 4c6f 7373 223a 2022 222c 0a20  stopLoss": "",. 
-00051060: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00051070: 2020 2020 2020 2020 2020 2020 2022 6375               "cu
-00051080: 6d52 6561 6c69 7365 6450 6e6c 223a 2022  mRealisedPnl": "
-00051090: 2d30 2e33 3232 3135 3530 3022 2c0a 2020  -0.32215500",.  
-000510a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000510b0: 2020 2020 2020 2020 2020 2020 2270 6f73              "pos
-000510c0: 6974 696f 6e4d 4d22 3a20 2232 2e39 3734  itionMM": "2.974
-000510d0: 3536 3435 3022 2c0a 2020 2020 2020 2020  56450",.        
-000510e0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-000510f0: 2020 2020 2020 2263 7265 6174 6564 5469        "createdTi
-00051100: 6d65 223a 2031 3635 3737 3131 3934 3939  me": 16577119499
-00051110: 3238 2c0a 2020 2020 2020 2020 2320 2020  28,.        #   
-00051120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00051130: 2020 2270 6f73 6974 696f 6e49 6478 223a    "positionIdx":
-00051140: 2030 2c0a 2020 2020 2020 2020 2320 2020   0,.        #   
-00051150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00051160: 2020 2270 6f73 6974 696f 6e49 4d22 3a20    "positionIM": 
-00051170: 2235 332e 3938 3234 3339 3530 220a 2020  "53.98243950".  
-00051180: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00051190: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-000511a0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000511b0: 5d0a 2020 2020 2020 2020 2320 2020 2020  ].        #     
-000511c0: 2020 2020 7d2c 0a20 2020 2020 2020 2023      },.        #
-000511d0: 2020 2020 2020 2020 2022 7469 6d65 223a           "time":
-000511e0: 2031 3635 3737 3133 3639 3331 3832 0a20   1657713693182. 
-000511f0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
-00051200: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-00051210: 2072 6573 756c 7420 3d20 7365 6c66 2e73   result = self.s
-00051220: 6166 655f 7661 6c75 6528 7265 7370 6f6e  afe_value(respon
-00051230: 7365 2c20 2772 6573 756c 7427 2c20 7b7d  se, 'result', {}
-00051240: 290a 2020 2020 2020 2020 706f 7369 7469  ).        positi
-00051250: 6f6e 7320 3d20 7365 6c66 2e73 6166 655f  ons = self.safe_
-00051260: 7661 6c75 6528 7265 7375 6c74 2c20 276c  value(result, 'l
-00051270: 6973 7427 2c20 5b5d 290a 2020 2020 2020  ist', []).      
-00051280: 2020 7265 7375 6c74 7320 3d20 5b5d 0a20    results = []. 
-00051290: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-000512a0: 7261 6e67 6528 302c 206c 656e 2870 6f73  range(0, len(pos
-000512b0: 6974 696f 6e73 2929 3a0a 2020 2020 2020  itions)):.      
-000512c0: 2020 2020 2020 7261 7750 6f73 6974 696f        rawPositio
-000512d0: 6e20 3d20 706f 7369 7469 6f6e 735b 695d  n = positions[i]
-000512e0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000512f0: 2827 6461 7461 2720 696e 2072 6177 506f  ('data' in rawPo
-00051300: 7369 7469 6f6e 2920 616e 6420 2827 6973  sition) and ('is
-00051310: 5f76 616c 6964 2720 696e 2072 6177 506f  _valid' in rawPo
-00051320: 7369 7469 6f6e 293a 0a20 2020 2020 2020  sition):.       
-00051330: 2020 2020 2020 2020 2023 2066 7574 7572           # futur
-00051340: 6573 206f 6e6c 790a 2020 2020 2020 2020  es only.        
-00051350: 2020 2020 2020 2020 7261 7750 6f73 6974          rawPosit
-00051360: 696f 6e20 3d20 7365 6c66 2e73 6166 655f  ion = self.safe_
-00051370: 7661 6c75 6528 7261 7750 6f73 6974 696f  value(rawPositio
-00051380: 6e2c 2027 6461 7461 2729 0a20 2020 2020  n, 'data').     
-00051390: 2020 2020 2020 2072 6573 756c 7473 2e61         results.a
-000513a0: 7070 656e 6428 7365 6c66 2e70 6172 7365  ppend(self.parse
-000513b0: 5f70 6f73 6974 696f 6e28 7261 7750 6f73  _position(rawPos
-000513c0: 6974 696f 6e29 290a 2020 2020 2020 2020  ition)).        
-000513d0: 7265 7475 726e 2073 656c 662e 6669 6c74  return self.filt
-000513e0: 6572 5f62 795f 6172 7261 7928 7265 7375  er_by_array(resu
-000513f0: 6c74 732c 2027 7379 6d62 6f6c 272c 2073  lts, 'symbol', s
-00051400: 796d 626f 6c73 2c20 4661 6c73 6529 0a0a  ymbols, False)..
-00051410: 2020 2020 6465 6620 6665 7463 685f 7573      def fetch_us
-00051420: 6463 5f70 6f73 6974 696f 6e73 2873 656c  dc_positions(sel
-00051430: 662c 2073 796d 626f 6c73 3a20 4f70 7469  f, symbols: Opti
-00051440: 6f6e 616c 5b4c 6973 745b 7374 725d 5d20  onal[List[str]] 
-00051450: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
-00051460: 7d29 3a0a 2020 2020 2020 2020 7365 6c66  }):.        self
-00051470: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
-00051480: 2020 2020 2020 2020 7379 6d62 6f6c 7320          symbols 
-00051490: 3d20 7365 6c66 2e6d 6172 6b65 745f 7379  = self.market_sy
-000514a0: 6d62 6f6c 7328 7379 6d62 6f6c 7329 0a20  mbols(symbols). 
-000514b0: 2020 2020 2020 2072 6571 7565 7374 203d         request =
-000514c0: 207b 7d0a 2020 2020 2020 2020 6d61 726b   {}.        mark
-000514d0: 6574 203d 204e 6f6e 650a 2020 2020 2020  et = None.      
-000514e0: 2020 7479 7065 203d 204e 6f6e 650a 2020    type = None.  
-000514f0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-00051500: 6e63 6528 7379 6d62 6f6c 732c 206c 6973  nce(symbols, lis
-00051510: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
-00051520: 6c65 6e67 7468 203d 206c 656e 2873 796d  length = len(sym
-00051530: 626f 6c73 290a 2020 2020 2020 2020 2020  bols).          
-00051540: 2020 6966 206c 656e 6774 6820 213d 2031    if length != 1
-00051550: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00051560: 2020 7261 6973 6520 4172 6775 6d65 6e74    raise Argument
-00051570: 7352 6571 7569 7265 6428 7365 6c66 2e69  sRequired(self.i
-00051580: 6420 2b20 2720 6665 7463 6855 5344 4350  d + ' fetchUSDCP
-00051590: 6f73 6974 696f 6e73 2829 2074 616b 6573  ositions() takes
-000515a0: 2061 6e20 6172 7261 7920 7769 7468 2065   an array with e
-000515b0: 7861 6374 6c79 206f 6e65 2073 796d 626f  xactly one symbo
-000515c0: 6c27 290a 2020 2020 2020 2020 2020 2020  l').            
-000515d0: 7379 6d62 6f6c 203d 2073 656c 662e 7361  symbol = self.sa
-000515e0: 6665 5f73 7472 696e 6728 7379 6d62 6f6c  fe_string(symbol
-000515f0: 732c 2030 290a 2020 2020 2020 2020 2020  s, 0).          
-00051600: 2020 6d61 726b 6574 203d 2073 656c 662e    market = self.
-00051610: 6d61 726b 6574 2873 796d 626f 6c29 0a20  market(symbol). 
-00051620: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-00051630: 7374 5b27 7379 6d62 6f6c 275d 203d 206d  st['symbol'] = m
-00051640: 6172 6b65 745b 2769 6427 5d0a 2020 2020  arket['id'].    
-00051650: 2020 2020 656c 6966 2073 796d 626f 6c73      elif symbols
-00051660: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00051670: 2020 2020 2020 2020 2020 6d61 726b 6574            market
-00051680: 203d 2073 656c 662e 6d61 726b 6574 2873   = self.market(s
-00051690: 796d 626f 6c73 290a 2020 2020 2020 2020  ymbols).        
-000516a0: 2020 2020 7265 7175 6573 745b 2773 796d      request['sym
-000516b0: 626f 6c27 5d20 3d20 6d61 726b 6574 5b27  bol'] = market['
-000516c0: 6964 275d 0a20 2020 2020 2020 2074 7970  id'].        typ
-000516d0: 652c 2070 6172 616d 7320 3d20 7365 6c66  e, params = self
-000516e0: 2e68 616e 646c 655f 6d61 726b 6574 5f74  .handle_market_t
-000516f0: 7970 655f 616e 645f 7061 7261 6d73 2827  ype_and_params('
-00051700: 6665 7463 6855 5344 4350 6f73 6974 696f  fetchUSDCPositio
-00051710: 6e73 272c 206d 6172 6b65 742c 2070 6172  ns', market, par
-00051720: 616d 7329 0a20 2020 2020 2020 2072 6571  ams).        req
-00051730: 7565 7374 5b27 6361 7465 676f 7279 275d  uest['category']
-00051740: 203d 2027 4f50 5449 4f4e 2720 6966 2028   = 'OPTION' if (
-00051750: 7479 7065 203d 3d20 276f 7074 696f 6e27  type == 'option'
-00051760: 2920 656c 7365 2027 5045 5250 4554 5541  ) else 'PERPETUA
-00051770: 4c27 0a20 2020 2020 2020 2072 6573 706f  L'.        respo
-00051780: 6e73 6520 3d20 7365 6c66 2e70 7269 7661  nse = self.priva
-00051790: 7465 506f 7374 4f70 7469 6f6e 5573 6463  tePostOptionUsdc
-000517a0: 4f70 656e 6170 6950 7269 7661 7465 5631  OpenapiPrivateV1
-000517b0: 5175 6572 7950 6f73 6974 696f 6e28 7365  QueryPosition(se
-000517c0: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
-000517d0: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
-000517e0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-000517f0: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-00051800: 2020 2020 2020 2020 2272 6573 756c 7422          "result"
-00051810: 3a20 7b0a 2020 2020 2020 2020 2320 2020  : {.        #   
-00051820: 2020 2020 2020 2020 2020 2263 7572 736f            "curso
-00051830: 7222 3a20 2242 5443 2d33 3144 4543 3231  r": "BTC-31DEC21
-00051840: 2d32 3430 3030 2d50 2533 4131 3634 3038  -24000-P%3A16408
-00051850: 3334 3432 3134 3331 2532 4342 5443 2d33  34421431%2CBTC-3
-00051860: 3144 4543 3231 2d32 3430 3030 2d50 2533  1DEC21-24000-P%3
-00051870: 4131 3634 3038 3334 3432 3134 3331 222c  A1640834421431",
-00051880: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00051890: 2020 2020 2020 2022 7265 7375 6c74 546f         "resultTo
-000518a0: 7461 6c53 697a 6522 3a20 312c 0a20 2020  talSize": 1,.   
-000518b0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000518c0: 2020 2022 6461 7461 4c69 7374 223a 205b     "dataList": [
-000518d0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000518e0: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
-000518f0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00051900: 2020 2020 2020 2022 7379 6d62 6f6c 223a         "symbol":
-00051910: 2022 4254 432d 3331 4445 4332 312d 3234   "BTC-31DEC21-24
-00051920: 3030 302d 5022 2c0a 2020 2020 2020 2020  000-P",.        
-00051930: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00051940: 2020 226c 6576 6572 6167 6522 3a20 2222    "leverage": ""
-00051950: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00051960: 2020 2020 2020 2020 2020 2020 226f 6363              "occ
-00051970: 436c 6f73 696e 6746 6565 223a 2022 222c  ClosingFee": "",
-00051980: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00051990: 2020 2020 2020 2020 2020 2022 6c69 7150             "liqP
-000519a0: 7269 6365 223a 2022 222c 0a20 2020 2020  rice": "",.     
-000519b0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-000519c0: 2020 2020 2022 706f 7369 7469 6f6e 5661       "positionVa
-000519d0: 6c75 6522 3a20 2222 2c0a 2020 2020 2020  lue": "",.      
-000519e0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000519f0: 2020 2020 2274 616b 6550 726f 6669 7422      "takeProfit"
-00051a00: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
-00051a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00051a20: 2272 6973 6b49 6422 3a20 2222 2c0a 2020  "riskId": "",.  
-00051a30: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00051a40: 2020 2020 2020 2020 2274 7261 696c 696e          "trailin
-00051a50: 6753 746f 7022 3a20 2222 2c0a 2020 2020  gStop": "",.    
-00051a60: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00051a70: 2020 2020 2020 2275 6e72 6561 6c69 7365        "unrealise
-00051a80: 6450 6e6c 223a 2022 222c 0a20 2020 2020  dPnl": "",.     
-00051a90: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00051aa0: 2020 2020 2022 6372 6561 7465 6441 7422       "createdAt"
-00051ab0: 3a20 2231 3634 3038 3334 3432 3134 3331  : "1640834421431
-00051ac0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00051ad0: 2020 2020 2020 2020 2020 2020 2022 6d61               "ma
-00051ae0: 726b 5072 6963 6522 3a20 2230 2e30 3022  rkPrice": "0.00"
-00051af0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00051b00: 2020 2020 2020 2020 2020 2020 2263 756d              "cum
-00051b10: 5265 616c 6973 6564 506e 6c22 3a20 2222  RealisedPnl": ""
-00051b20: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00051b30: 2020 2020 2020 2020 2020 2020 2270 6f73              "pos
-00051b40: 6974 696f 6e4d 4d22 3a20 2233 3539 2e35  itionMM": "359.5
-00051b50: 3237 3122 2c0a 2020 2020 2020 2020 2320  271",.        # 
-00051b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00051b70: 2270 6f73 6974 696f 6e49 4d22 3a20 2234  "positionIM": "4
-00051b80: 3637 2e30 3633 3322 2c0a 2020 2020 2020  67.0633",.      
-00051b90: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00051ba0: 2020 2020 2275 7064 6174 6564 4174 223a      "updatedAt":
-00051bb0: 2022 3136 3430 3833 3434 3231 3433 3122   "1640834421431"
-00051bc0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00051bd0: 2020 2020 2020 2020 2020 2020 2274 7053              "tpS
-00051be0: 4c4d 6f64 6522 3a20 2222 2c0a 2020 2020  LMode": "",.    
-00051bf0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00051c00: 2020 2020 2020 2273 6964 6522 3a20 2253        "side": "S
-00051c10: 656c 6c22 2c0a 2020 2020 2020 2020 2320  ell",.        # 
-00051c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00051c30: 2262 7573 7450 7269 6365 223a 2022 222c  "bustPrice": "",
-00051c40: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00051c50: 2020 2020 2020 2020 2020 2022 6465 6c65             "dele
-00051c60: 7665 7261 6765 496e 6469 6361 746f 7222  verageIndicator"
-00051c70: 3a20 302c 0a20 2020 2020 2020 2023 2020  : 0,.        #  
-00051c80: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00051c90: 656e 7472 7950 7269 6365 223a 2022 312e  entryPrice": "1.
-00051ca0: 3422 2c0a 2020 2020 2020 2020 2320 2020  4",.        #   
-00051cb0: 2020 2020 2020 2020 2020 2020 2020 2273                "s
-00051cc0: 697a 6522 3a20 222d 302e 3130 3022 2c0a  ize": "-0.100",.
-00051cd0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00051ce0: 2020 2020 2020 2020 2020 2273 6573 7369            "sessi
-00051cf0: 6f6e 5250 4c22 3a20 2222 2c0a 2020 2020  onRPL": "",.    
-00051d00: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00051d10: 2020 2020 2020 2270 6f73 6974 696f 6e53        "positionS
-00051d20: 7461 7475 7322 3a20 2222 2c0a 2020 2020  tatus": "",.    
-00051d30: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00051d40: 2020 2020 2020 2273 6573 7369 6f6e 5550        "sessionUP
-00051d50: 4c22 3a20 2222 2c0a 2020 2020 2020 2020  L": "",.        
-00051d60: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00051d70: 2020 2273 746f 704c 6f73 7322 3a20 2222    "stopLoss": ""
-00051d80: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00051d90: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
-00051da0: 6572 4d61 7267 696e 223a 2022 222c 0a20  erMargin": "",. 
-00051db0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00051dc0: 2020 2020 2020 2020 2022 7365 7373 696f           "sessio
-00051dd0: 6e41 7667 5072 6963 6522 3a20 2231 2e35  nAvgPrice": "1.5
-00051de0: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
-00051df0: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
-00051e00: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00051e10: 2020 2020 5d0a 2020 2020 2020 2020 2320      ].        # 
-00051e20: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
-00051e30: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-00051e40: 7443 6f64 6522 3a20 302c 0a20 2020 2020  tCode": 0,.     
-00051e50: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-00051e60: 744d 7367 223a 2022 5375 6363 6573 732e  tMsg": "Success.
-00051e70: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
-00051e80: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
-00051e90: 2020 2020 7265 7375 6c74 203d 2073 656c      result = sel
-00051ea0: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
-00051eb0: 706f 6e73 652c 2027 7265 7375 6c74 272c  ponse, 'result',
-00051ec0: 207b 7d29 0a20 2020 2020 2020 2070 6f73   {}).        pos
-00051ed0: 6974 696f 6e73 203d 2073 656c 662e 7361  itions = self.sa
-00051ee0: 6665 5f76 616c 7565 2872 6573 756c 742c  fe_value(result,
-00051ef0: 2027 6461 7461 4c69 7374 272c 205b 5d29   'dataList', [])
-00051f00: 0a20 2020 2020 2020 2072 6573 756c 7473  .        results
-00051f10: 203d 205b 5d0a 2020 2020 2020 2020 666f   = [].        fo
-00051f20: 7220 6920 696e 2072 616e 6765 2830 2c20  r i in range(0, 
-00051f30: 6c65 6e28 706f 7369 7469 6f6e 7329 293a  len(positions)):
-00051f40: 0a20 2020 2020 2020 2020 2020 2072 6177  .            raw
-00051f50: 506f 7369 7469 6f6e 203d 2070 6f73 6974  Position = posit
-00051f60: 696f 6e73 5b69 5d0a 2020 2020 2020 2020  ions[i].        
-00051f70: 2020 2020 6966 2028 2764 6174 6127 2069      if ('data' i
-00051f80: 6e20 7261 7750 6f73 6974 696f 6e29 2061  n rawPosition) a
-00051f90: 6e64 2028 2769 735f 7661 6c69 6427 2069  nd ('is_valid' i
-00051fa0: 6e20 7261 7750 6f73 6974 696f 6e29 3a0a  n rawPosition):.
+0004ffd0: 2020 2020 2022 706f 7369 7469 6f6e 5661       "positionVa
+0004ffe0: 6c75 6522 3a20 2230 222c 0a20 2020 2020  lue": "0",.     
+0004fff0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00050000: 2020 2020 2020 2020 2022 656e 7472 7950           "entryP
+00050010: 7269 6365 223a 2022 3022 2c0a 2020 2020  rice": "0",.    
+00050020: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00050030: 2020 2020 2020 2020 2020 2274 7261 6465            "trade
+00050040: 4d6f 6465 223a 2030 2c0a 2020 2020 2020  Mode": 0,.      
+00050050: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00050060: 2020 2020 2020 2020 2261 7574 6f41 6464          "autoAdd
+00050070: 4d61 7267 696e 223a 2030 2c0a 2020 2020  Margin": 0,.    
+00050080: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00050090: 2020 2020 2020 2020 2020 226c 6576 6572            "lever
+000500a0: 6167 6522 3a20 2231 3022 2c0a 2020 2020  age": "10",.    
+000500b0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+000500c0: 2020 2020 2020 2020 2020 2270 6f73 6974            "posit
+000500d0: 696f 6e42 616c 616e 6365 223a 2022 3022  ionBalance": "0"
+000500e0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000500f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00050100: 226c 6971 5072 6963 6522 3a20 2230 2e30  "liqPrice": "0.0
+00050110: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
+00050120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00050130: 2020 2020 2262 7573 7450 7269 6365 223a      "bustPrice":
+00050140: 2022 302e 3030 3030 222c 0a20 2020 2020   "0.0000",.     
+00050150: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00050160: 2020 2020 2020 2020 2022 7461 6b65 5072           "takePr
+00050170: 6f66 6974 223a 2022 302e 3030 3030 222c  ofit": "0.0000",
+00050180: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00050190: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000501a0: 7374 6f70 4c6f 7373 223a 2022 302e 3030  stopLoss": "0.00
+000501b0: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+000501c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000501d0: 2020 2022 7472 6169 6c69 6e67 5374 6f70     "trailingStop
+000501e0: 223a 2022 302e 3030 3030 222c 0a20 2020  ": "0.0000",.   
+000501f0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00050200: 2020 2020 2020 2020 2020 2022 756e 7265             "unre
+00050210: 616c 6973 6564 506e 6c22 3a20 2230 222c  alisedPnl": "0",
+00050220: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00050230: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00050240: 6372 6561 7465 6454 696d 6522 3a20 2231  createdTime": "1
+00050250: 3635 3838 3237 3434 3433 3238 222c 0a20  658827444328",. 
+00050260: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00050270: 2020 2020 2020 2020 2020 2020 2022 7570               "up
+00050280: 6461 7465 6454 696d 6522 3a20 2231 3635  datedTime": "165
+00050290: 3839 3034 3836 3334 3132 222c 0a20 2020  8904863412",.   
+000502a0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+000502b0: 2020 2020 2020 2020 2020 2022 7470 536c             "tpSl
+000502c0: 4d6f 6465 223a 2022 4675 6c6c 222c 0a20  Mode": "Full",. 
+000502d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000502e0: 2020 2020 2020 2020 2020 2020 2022 7269               "ri
+000502f0: 736b 4c69 6d69 7456 616c 7565 223a 2022  skLimitValue": "
+00050300: 3230 3030 3030 222c 0a20 2020 2020 2020  200000",.       
+00050310: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00050320: 2020 2020 2020 2022 6163 7469 7665 5072         "activePr
+00050330: 6963 6522 3a20 2230 2e30 3030 3022 0a20  ice": "0.0000". 
+00050340: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00050350: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
+00050360: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00050370: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
+00050380: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00050390: 2020 2020 2020 2270 6f73 6974 696f 6e49        "positionI
+000503a0: 6478 223a 2032 2c0a 2020 2020 2020 2020  dx": 2,.        
+000503b0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000503c0: 2020 2020 2020 2272 6973 6b49 6422 3a20        "riskId": 
+000503d0: 2234 3122 2c0a 2020 2020 2020 2020 2320  "41",.        # 
+000503e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000503f0: 2020 2020 2273 796d 626f 6c22 3a20 2258      "symbol": "X
+00050400: 5250 5553 4454 222c 0a20 2020 2020 2020  RPUSDT",.       
+00050410: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00050420: 2020 2020 2020 2022 7369 6465 223a 2022         "side": "
+00050430: 5365 6c6c 222c 0a20 2020 2020 2020 2023  Sell",.        #
+00050440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00050450: 2020 2020 2022 7369 7a65 223a 2022 3530       "size": "50
+00050460: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00050470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00050480: 2022 706f 7369 7469 6f6e 5661 6c75 6522   "positionValue"
+00050490: 3a20 2231 362e 3638 222c 0a20 2020 2020  : "16.68",.     
+000504a0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+000504b0: 2020 2020 2020 2020 2022 656e 7472 7950           "entryP
+000504c0: 7269 6365 223a 2022 302e 3333 3336 222c  rice": "0.3336",
+000504d0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000504e0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000504f0: 7472 6164 654d 6f64 6522 3a20 302c 0a20  tradeMode": 0,. 
+00050500: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00050510: 2020 2020 2020 2020 2020 2020 2022 6175               "au
+00050520: 746f 4164 644d 6172 6769 6e22 3a20 302c  toAddMargin": 0,
+00050530: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00050540: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00050550: 6c65 7665 7261 6765 223a 2022 3130 222c  leverage": "10",
+00050560: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00050570: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00050580: 706f 7369 7469 6f6e 4261 6c61 6e63 6522  positionBalance"
+00050590: 3a20 2231 2e36 3739 3030 3838 222c 0a20  : "1.6790088",. 
+000505a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000505b0: 2020 2020 2020 2020 2020 2020 2022 6c69               "li
+000505c0: 7150 7269 6365 223a 2022 3132 2e34 3833  qPrice": "12.483
+000505d0: 3522 2c0a 2020 2020 2020 2020 2320 2020  5",.        #   
+000505e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000505f0: 2020 2262 7573 7450 7269 6365 223a 2022    "bustPrice": "
+00050600: 3132 2e34 3836 3922 2c0a 2020 2020 2020  12.4869",.      
+00050610: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00050620: 2020 2020 2020 2020 2274 616b 6550 726f          "takePro
+00050630: 6669 7422 3a20 2230 2e30 3030 3022 2c0a  fit": "0.0000",.
+00050640: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00050650: 2020 2020 2020 2020 2020 2020 2020 2273                "s
+00050660: 746f 704c 6f73 7322 3a20 2230 2e30 3030  topLoss": "0.000
+00050670: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00050680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00050690: 2020 2274 7261 696c 696e 6753 746f 7022    "trailingStop"
+000506a0: 3a20 2230 2e30 3030 3022 2c0a 2020 2020  : "0.0000",.    
+000506b0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+000506c0: 2020 2020 2020 2020 2020 2275 6e72 6561            "unrea
+000506d0: 6c69 7365 6450 6e6c 223a 2022 3022 2c0a  lisedPnl": "0",.
+000506e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000506f0: 2020 2020 2020 2020 2020 2020 2020 2263                "c
+00050700: 7265 6174 6564 5469 6d65 223a 2022 3136  reatedTime": "16
+00050710: 3538 3832 3734 3434 3332 3822 2c0a 2020  58827444328",.  
+00050720: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00050730: 2020 2020 2020 2020 2020 2020 2275 7064              "upd
+00050740: 6174 6564 5469 6d65 223a 2022 3136 3538  atedTime": "1658
+00050750: 3930 3438 3633 3431 3222 2c0a 2020 2020  904863412",.    
+00050760: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00050770: 2020 2020 2020 2020 2020 2274 7053 6c4d            "tpSlM
+00050780: 6f64 6522 3a20 2246 756c 6c22 2c0a 2020  ode": "Full",.  
+00050790: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000507a0: 2020 2020 2020 2020 2020 2020 2272 6973              "ris
+000507b0: 6b4c 696d 6974 5661 6c75 6522 3a20 2232  kLimitValue": "2
+000507c0: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
+000507d0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000507e0: 2020 2020 2020 2261 6374 6976 6550 7269        "activePri
+000507f0: 6365 223a 2022 302e 3030 3030 220a 2020  ce": "0.0000".  
+00050800: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00050810: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00050820: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00050830: 5d0a 2020 2020 2020 2020 2320 2020 2020  ].        #     
+00050840: 2020 2020 7d2c 0a20 2020 2020 2020 2023      },.        #
+00050850: 2020 2020 2020 2020 2022 7265 7445 7874           "retExt
+00050860: 496e 666f 223a 206e 756c 6c2c 0a20 2020  Info": null,.   
+00050870: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00050880: 7469 6d65 223a 2031 3635 3839 3034 3837  time": 165890487
+00050890: 3739 3432 0a20 2020 2020 2020 2023 2020  7942.        #  
+000508a0: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
+000508b0: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
+000508c0: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
+000508d0: 7265 7370 6f6e 7365 2c20 2772 6573 756c  response, 'resul
+000508e0: 7427 2c20 7b7d 290a 2020 2020 2020 2020  t', {}).        
+000508f0: 706f 7369 7469 6f6e 7320 3d20 7365 6c66  positions = self
+00050900: 2e73 6166 655f 7661 6c75 655f 3228 7265  .safe_value_2(re
+00050910: 7375 6c74 2c20 276c 6973 7427 2c20 2764  sult, 'list', 'd
+00050920: 6174 614c 6973 7427 2c20 5b5d 290a 2020  ataList', []).  
+00050930: 2020 2020 2020 7469 6d65 7374 616d 7020        timestamp 
+00050940: 3d20 7365 6c66 2e73 6166 655f 696e 7465  = self.safe_inte
+00050950: 6765 7228 7265 7370 6f6e 7365 2c20 2774  ger(response, 't
+00050960: 696d 6527 290a 2020 2020 2020 2020 6669  ime').        fi
+00050970: 7273 7420 3d20 7365 6c66 2e73 6166 655f  rst = self.safe_
+00050980: 7661 6c75 6528 706f 7369 7469 6f6e 732c  value(positions,
+00050990: 2030 290a 2020 2020 2020 2020 706f 7369   0).        posi
+000509a0: 7469 6f6e 203d 2073 656c 662e 7061 7273  tion = self.pars
+000509b0: 655f 706f 7369 7469 6f6e 2866 6972 7374  e_position(first
+000509c0: 2c20 6d61 726b 6574 290a 2020 2020 2020  , market).      
+000509d0: 2020 7265 7475 726e 2073 656c 662e 6578    return self.ex
+000509e0: 7465 6e64 2870 6f73 6974 696f 6e2c 207b  tend(position, {
+000509f0: 0a20 2020 2020 2020 2020 2020 2027 7469  .            'ti
+00050a00: 6d65 7374 616d 7027 3a20 7469 6d65 7374  mestamp': timest
+00050a10: 616d 702c 0a20 2020 2020 2020 2020 2020  amp,.           
+00050a20: 2027 6461 7465 7469 6d65 273a 2073 656c   'datetime': sel
+00050a30: 662e 6973 6f38 3630 3128 7469 6d65 7374  f.iso8601(timest
+00050a40: 616d 7029 2c0a 2020 2020 2020 2020 7d29  amp),.        })
+00050a50: 0a0a 2020 2020 6465 6620 6665 7463 685f  ..    def fetch_
+00050a60: 756e 6966 6965 645f 706f 7369 7469 6f6e  unified_position
+00050a70: 7328 7365 6c66 2c20 7379 6d62 6f6c 733a  s(self, symbols:
+00050a80: 204f 7074 696f 6e61 6c5b 4c69 7374 5b73   Optional[List[s
+00050a90: 7472 5d5d 203d 204e 6f6e 652c 2070 6172  tr]] = None, par
+00050aa0: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
+00050ab0: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
+00050ac0: 7473 2829 0a20 2020 2020 2020 2072 6571  ts().        req
+00050ad0: 7565 7374 203d 207b 7d0a 2020 2020 2020  uest = {}.      
+00050ae0: 2020 7479 7065 203d 204e 6f6e 650a 2020    type = None.  
+00050af0: 2020 2020 2020 7365 7474 6c65 203d 204e        settle = N
+00050b00: 6f6e 650a 2020 2020 2020 2020 656e 6162  one.        enab
+00050b10: 6c65 556e 6966 6965 6420 3d20 7365 6c66  leUnified = self
+00050b20: 2e69 735f 756e 6966 6965 645f 656e 6162  .is_unified_enab
+00050b30: 6c65 6428 290a 2020 2020 2020 2020 6966  led().        if
+00050b40: 2069 7369 6e73 7461 6e63 6528 7379 6d62   isinstance(symb
+00050b50: 6f6c 732c 206c 6973 7429 3a0a 2020 2020  ols, list):.    
+00050b60: 2020 2020 2020 2020 7379 6d62 6f6c 734c          symbolsL
+00050b70: 656e 6774 6820 3d20 6c65 6e28 7379 6d62  ength = len(symb
+00050b80: 6f6c 7329 0a20 2020 2020 2020 2020 2020  ols).           
+00050b90: 2069 6620 7379 6d62 6f6c 734c 656e 6774   if symbolsLengt
+00050ba0: 6820 3e20 313a 0a20 2020 2020 2020 2020  h > 1:.         
+00050bb0: 2020 2020 2020 2072 6169 7365 2041 7267         raise Arg
+00050bc0: 756d 656e 7473 5265 7175 6972 6564 2873  umentsRequired(s
+00050bd0: 656c 662e 6964 202b 2027 2066 6574 6368  elf.id + ' fetch
+00050be0: 506f 7369 7469 6f6e 7328 2920 646f 6573  Positions() does
+00050bf0: 206e 6f74 2061 6363 6570 7420 616e 2061   not accept an a
+00050c00: 7272 6179 2077 6974 6820 6d6f 7265 2074  rray with more t
+00050c10: 6861 6e20 6f6e 6520 7379 6d62 6f6c 2729  han one symbol')
+00050c20: 0a20 2020 2020 2020 2020 2020 206d 6172  .            mar
+00050c30: 6b65 7420 3d20 7365 6c66 2e6d 6172 6b65  ket = self.marke
+00050c40: 7428 7379 6d62 6f6c 735b 305d 290a 2020  t(symbols[0]).  
+00050c50: 2020 2020 2020 2020 2020 7365 7474 6c65            settle
+00050c60: 203d 206d 6172 6b65 745b 2773 6574 746c   = market['settl
+00050c70: 6527 5d0a 2020 2020 2020 2020 656c 6966  e'].        elif
+00050c80: 2073 796d 626f 6c73 2069 7320 6e6f 7420   symbols is not 
+00050c90: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00050ca0: 2020 7379 6d62 6f6c 7320 3d20 5b73 796d    symbols = [sym
+00050cb0: 626f 6c73 5d0a 2020 2020 2020 2020 7379  bols].        sy
+00050cc0: 6d62 6f6c 7320 3d20 7365 6c66 2e6d 6172  mbols = self.mar
+00050cd0: 6b65 745f 7379 6d62 6f6c 7328 7379 6d62  ket_symbols(symb
+00050ce0: 6f6c 7329 0a20 2020 2020 2020 2069 6620  ols).        if 
+00050cf0: 7379 6d62 6f6c 7320 6973 204e 6f6e 653a  symbols is None:
+00050d00: 0a20 2020 2020 2020 2020 2020 2073 6574  .            set
+00050d10: 746c 652c 2070 6172 616d 7320 3d20 7365  tle, params = se
+00050d20: 6c66 2e68 616e 646c 655f 6f70 7469 6f6e  lf.handle_option
+00050d30: 5f61 6e64 5f70 6172 616d 7328 7061 7261  _and_params(para
+00050d40: 6d73 2c20 2766 6574 6368 506f 7369 7469  ms, 'fetchPositi
+00050d50: 6f6e 7327 2c20 2773 6574 746c 6527 2c20  ons', 'settle', 
+00050d60: 2755 5344 5427 290a 2020 2020 2020 2020  'USDT').        
+00050d70: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00050d80: 2020 6669 7273 7420 3d20 7365 6c66 2e73    first = self.s
+00050d90: 6166 655f 7661 6c75 6528 7379 6d62 6f6c  afe_value(symbol
+00050da0: 732c 2030 290a 2020 2020 2020 2020 2020  s, 0).          
+00050db0: 2020 6d61 726b 6574 203d 2073 656c 662e    market = self.
+00050dc0: 6d61 726b 6574 2866 6972 7374 290a 2020  market(first).  
+00050dd0: 2020 2020 2020 2020 2020 7365 7474 6c65            settle
+00050de0: 203d 206d 6172 6b65 745b 2773 6574 746c   = market['settl
+00050df0: 6527 5d0a 2020 2020 2020 2020 2020 2020  e'].            
+00050e00: 7265 7175 6573 745b 2773 796d 626f 6c27  request['symbol'
+00050e10: 5d20 3d20 6d61 726b 6574 5b27 6964 275d  ] = market['id']
+00050e20: 0a20 2020 2020 2020 2069 6620 656e 6162  .        if enab
+00050e30: 6c65 556e 6966 6965 645b 315d 3a0a 2020  leUnified[1]:.  
+00050e40: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+00050e50: 745b 2773 6574 746c 6543 6f69 6e27 5d20  t['settleCoin'] 
+00050e60: 3d20 7365 7474 6c65 0a20 2020 2020 2020  = settle.       
+00050e70: 2020 2020 2072 6571 7565 7374 5b27 6c69       request['li
+00050e80: 6d69 7427 5d20 3d20 3230 300a 2020 2020  mit'] = 200.    
+00050e90: 2020 2020 2320 6d61 726b 6574 204e 6f6e      # market Non
+00050ea0: 650a 2020 2020 2020 2020 7479 7065 2c20  e.        type, 
+00050eb0: 7061 7261 6d73 203d 2073 656c 662e 6861  params = self.ha
+00050ec0: 6e64 6c65 5f6d 6172 6b65 745f 7479 7065  ndle_market_type
+00050ed0: 5f61 6e64 5f70 6172 616d 7328 2766 6574  _and_params('fet
+00050ee0: 6368 506f 7369 7469 6f6e 7327 2c20 4e6f  chPositions', No
+00050ef0: 6e65 2c20 7061 7261 6d73 290a 2020 2020  ne, params).    
+00050f00: 2020 2020 7375 6254 7970 6520 3d20 4e6f      subType = No
+00050f10: 6e65 0a20 2020 2020 2020 2073 7562 5479  ne.        subTy
+00050f20: 7065 2c20 7061 7261 6d73 203d 2073 656c  pe, params = sel
+00050f30: 662e 6861 6e64 6c65 5f73 7562 5f74 7970  f.handle_sub_typ
+00050f40: 655f 616e 645f 7061 7261 6d73 2827 6665  e_and_params('fe
+00050f50: 7463 6850 6f73 6974 696f 6e73 272c 204e  tchPositions', N
+00050f60: 6f6e 652c 2070 6172 616d 732c 2027 6c69  one, params, 'li
+00050f70: 6e65 6172 2729 0a20 2020 2020 2020 2072  near').        r
+00050f80: 6571 7565 7374 5b27 6361 7465 676f 7279  equest['category
+00050f90: 275d 203d 2073 7562 5479 7065 0a20 2020  '] = subType.   
+00050fa0: 2020 2020 2069 6620 7479 7065 203d 3d20       if type == 
+00050fb0: 276f 7074 696f 6e27 3a0a 2020 2020 2020  'option':.      
+00050fc0: 2020 2020 2020 7265 7175 6573 745b 2763        request['c
+00050fd0: 6174 6567 6f72 7927 5d20 3d20 276f 7074  ategory'] = 'opt
+00050fe0: 696f 6e27 0a20 2020 2020 2020 206d 6574  ion'.        met
+00050ff0: 686f 6420 3d20 2770 7269 7661 7465 4765  hod = 'privateGe
+00051000: 7456 3550 6f73 6974 696f 6e4c 6973 7427  tV5PositionList'
+00051010: 2069 6620 2865 6e61 626c 6555 6e69 6669   if (enableUnifi
+00051020: 6564 5b31 5d29 2065 6c73 6520 2770 7269  ed[1]) else 'pri
+00051030: 7661 7465 4765 7455 6e69 6669 6564 5633  vateGetUnifiedV3
+00051040: 5072 6976 6174 6550 6f73 6974 696f 6e4c  PrivatePositionL
+00051050: 6973 7427 0a20 2020 2020 2020 2072 6573  ist'.        res
+00051060: 706f 6e73 6520 3d20 6765 7461 7474 7228  ponse = getattr(
+00051070: 7365 6c66 2c20 6d65 7468 6f64 2928 7365  self, method)(se
+00051080: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
+00051090: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
+000510a0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+000510b0: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+000510c0: 2020 2020 2020 2020 2272 6574 436f 6465          "retCode
+000510d0: 223a 2030 2c0a 2020 2020 2020 2020 2320  ": 0,.        # 
+000510e0: 2020 2020 2020 2020 2272 6574 4d73 6722          "retMsg"
+000510f0: 3a20 2253 7563 6365 7373 222c 0a20 2020  : "Success",.   
+00051100: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00051110: 7265 7375 6c74 223a 207b 0a20 2020 2020  result": {.     
+00051120: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00051130: 2022 6e65 7874 5061 6765 4375 7273 6f72   "nextPageCursor
+00051140: 223a 2022 3025 3341 3136 3537 3731 3139  ": "0%3A16577119
+00051150: 3439 3934 3525 3243 3025 3341 3136 3537  49945%2C0%3A1657
+00051160: 3731 3139 3439 3934 3522 2c0a 2020 2020  711949945",.    
+00051170: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00051180: 2020 2263 6174 6567 6f72 7922 3a20 226c    "category": "l
+00051190: 696e 6561 7222 2c0a 2020 2020 2020 2020  inear",.        
+000511a0: 2320 2020 2020 2020 2020 2020 2020 226c  #             "l
+000511b0: 6973 7422 3a20 5b0a 2020 2020 2020 2020  ist": [.        
+000511c0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000511d0: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+000511e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000511f0: 2020 2273 796d 626f 6c22 3a20 2245 5448    "symbol": "ETH
+00051200: 5553 4454 222c 0a20 2020 2020 2020 2023  USDT",.        #
+00051210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00051220: 2020 2020 2022 6c65 7665 7261 6765 223a       "leverage":
+00051230: 2022 3130 222c 0a20 2020 2020 2020 2023   "10",.        #
+00051240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00051250: 2020 2020 2022 7570 6461 7465 6454 696d       "updatedTim
+00051260: 6522 3a20 3136 3537 3731 3139 3439 3934  e": 165771194994
+00051270: 352c 0a20 2020 2020 2020 2023 2020 2020  5,.        #    
+00051280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00051290: 2022 7369 6465 223a 2022 4275 7922 2c0a   "side": "Buy",.
+000512a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000512b0: 2020 2020 2020 2020 2020 2020 2020 2270                "p
+000512c0: 6f73 6974 696f 6e56 616c 7565 223a 2022  ositionValue": "
+000512d0: 3533 362e 3932 3530 3030 3030 222c 0a20  536.92500000",. 
+000512e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000512f0: 2020 2020 2020 2020 2020 2020 2022 7461               "ta
+00051300: 6b65 5072 6f66 6974 223a 2022 222c 0a20  keProfit": "",. 
+00051310: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00051320: 2020 2020 2020 2020 2020 2020 2022 7470               "tp
+00051330: 736c 4d6f 6465 223a 2022 4675 6c6c 222c  slMode": "Full",
+00051340: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00051350: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00051360: 7269 736b 4964 223a 2031 312c 0a20 2020  riskId": 11,.   
+00051370: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00051380: 2020 2020 2020 2020 2020 2022 7472 6169             "trai
+00051390: 6c69 6e67 5374 6f70 223a 2022 222c 0a20  lingStop": "",. 
+000513a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000513b0: 2020 2020 2020 2020 2020 2020 2022 656e               "en
+000513c0: 7472 7950 7269 6365 223a 2022 3130 3733  tryPrice": "1073
+000513d0: 2e38 3530 3030 3030 3022 2c0a 2020 2020  .85000000",.    
+000513e0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+000513f0: 2020 2020 2020 2020 2020 2275 6e72 6561            "unrea
+00051400: 6c69 7365 6450 6e6c 223a 2022 222c 0a20  lisedPnl": "",. 
+00051410: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00051420: 2020 2020 2020 2020 2020 2020 2022 6d61               "ma
+00051430: 726b 5072 6963 6522 3a20 2231 3038 302e  rkPrice": "1080.
+00051440: 3635 3030 3030 3030 222c 0a20 2020 2020  65000000",.     
+00051450: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00051460: 2020 2020 2020 2020 2022 7369 7a65 223a           "size":
+00051470: 2022 302e 3530 3030 222c 0a20 2020 2020   "0.5000",.     
+00051480: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00051490: 2020 2020 2020 2020 2022 706f 7369 7469           "positi
+000514a0: 6f6e 5374 6174 7573 223a 2022 6e6f 726d  onStatus": "norm
+000514b0: 616c 222c 0a20 2020 2020 2020 2023 2020  al",.        #  
+000514c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000514d0: 2020 2022 7374 6f70 4c6f 7373 223a 2022     "stopLoss": "
+000514e0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+000514f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00051500: 2022 6375 6d52 6561 6c69 7365 6450 6e6c   "cumRealisedPnl
+00051510: 223a 2022 2d30 2e33 3232 3135 3530 3022  ": "-0.32215500"
+00051520: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00051530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00051540: 2270 6f73 6974 696f 6e4d 4d22 3a20 2232  "positionMM": "2
+00051550: 2e39 3734 3536 3435 3022 2c0a 2020 2020  .97456450",.    
+00051560: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00051570: 2020 2020 2020 2020 2020 2263 7265 6174            "creat
+00051580: 6564 5469 6d65 223a 2031 3635 3737 3131  edTime": 1657711
+00051590: 3934 3939 3238 2c0a 2020 2020 2020 2020  949928,.        
+000515a0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000515b0: 2020 2020 2020 2270 6f73 6974 696f 6e49        "positionI
+000515c0: 6478 223a 2030 2c0a 2020 2020 2020 2020  dx": 0,.        
+000515d0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000515e0: 2020 2020 2020 2270 6f73 6974 696f 6e49        "positionI
+000515f0: 4d22 3a20 2235 332e 3938 3234 3339 3530  M": "53.98243950
+00051600: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
+00051610: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
+00051620: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00051630: 2020 2020 5d0a 2020 2020 2020 2020 2320      ].        # 
+00051640: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
+00051650: 2020 2023 2020 2020 2020 2020 2022 7469     #         "ti
+00051660: 6d65 223a 2031 3635 3737 3133 3639 3331  me": 16577136931
+00051670: 3832 0a20 2020 2020 2020 2023 2020 2020  82.        #    
+00051680: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
+00051690: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
+000516a0: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
+000516b0: 7370 6f6e 7365 2c20 2772 6573 756c 7427  sponse, 'result'
+000516c0: 2c20 7b7d 290a 2020 2020 2020 2020 706f  , {}).        po
+000516d0: 7369 7469 6f6e 7320 3d20 7365 6c66 2e73  sitions = self.s
+000516e0: 6166 655f 7661 6c75 6528 7265 7375 6c74  afe_value(result
+000516f0: 2c20 276c 6973 7427 2c20 5b5d 290a 2020  , 'list', []).  
+00051700: 2020 2020 2020 7265 7375 6c74 7320 3d20        results = 
+00051710: 5b5d 0a20 2020 2020 2020 2066 6f72 2069  [].        for i
+00051720: 2069 6e20 7261 6e67 6528 302c 206c 656e   in range(0, len
+00051730: 2870 6f73 6974 696f 6e73 2929 3a0a 2020  (positions)):.  
+00051740: 2020 2020 2020 2020 2020 7261 7750 6f73            rawPos
+00051750: 6974 696f 6e20 3d20 706f 7369 7469 6f6e  ition = position
+00051760: 735b 695d 0a20 2020 2020 2020 2020 2020  s[i].           
+00051770: 2069 6620 2827 6461 7461 2720 696e 2072   if ('data' in r
+00051780: 6177 506f 7369 7469 6f6e 2920 616e 6420  awPosition) and 
+00051790: 2827 6973 5f76 616c 6964 2720 696e 2072  ('is_valid' in r
+000517a0: 6177 506f 7369 7469 6f6e 293a 0a20 2020  awPosition):.   
+000517b0: 2020 2020 2020 2020 2020 2020 2023 2066               # f
+000517c0: 7574 7572 6573 206f 6e6c 790a 2020 2020  utures only.    
+000517d0: 2020 2020 2020 2020 2020 2020 7261 7750              rawP
+000517e0: 6f73 6974 696f 6e20 3d20 7365 6c66 2e73  osition = self.s
+000517f0: 6166 655f 7661 6c75 6528 7261 7750 6f73  afe_value(rawPos
+00051800: 6974 696f 6e2c 2027 6461 7461 2729 0a20  ition, 'data'). 
+00051810: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+00051820: 7473 2e61 7070 656e 6428 7365 6c66 2e70  ts.append(self.p
+00051830: 6172 7365 5f70 6f73 6974 696f 6e28 7261  arse_position(ra
+00051840: 7750 6f73 6974 696f 6e29 290a 2020 2020  wPosition)).    
+00051850: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00051860: 6669 6c74 6572 5f62 795f 6172 7261 7928  filter_by_array(
+00051870: 7265 7375 6c74 732c 2027 7379 6d62 6f6c  results, 'symbol
+00051880: 272c 2073 796d 626f 6c73 2c20 4661 6c73  ', symbols, Fals
+00051890: 6529 0a0a 2020 2020 6465 6620 6665 7463  e)..    def fetc
+000518a0: 685f 7573 6463 5f70 6f73 6974 696f 6e73  h_usdc_positions
+000518b0: 2873 656c 662c 2073 796d 626f 6c73 3a20  (self, symbols: 
+000518c0: 4f70 7469 6f6e 616c 5b4c 6973 745b 7374  Optional[List[st
+000518d0: 725d 5d20 3d20 4e6f 6e65 2c20 7061 7261  r]] = None, para
+000518e0: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
+000518f0: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
+00051900: 7328 290a 2020 2020 2020 2020 7379 6d62  s().        symb
+00051910: 6f6c 7320 3d20 7365 6c66 2e6d 6172 6b65  ols = self.marke
+00051920: 745f 7379 6d62 6f6c 7328 7379 6d62 6f6c  t_symbols(symbol
+00051930: 7329 0a20 2020 2020 2020 2072 6571 7565  s).        reque
+00051940: 7374 203d 207b 7d0a 2020 2020 2020 2020  st = {}.        
+00051950: 6d61 726b 6574 203d 204e 6f6e 650a 2020  market = None.  
+00051960: 2020 2020 2020 7479 7065 203d 204e 6f6e        type = Non
+00051970: 650a 2020 2020 2020 2020 6966 2069 7369  e.        if isi
+00051980: 6e73 7461 6e63 6528 7379 6d62 6f6c 732c  nstance(symbols,
+00051990: 206c 6973 7429 3a0a 2020 2020 2020 2020   list):.        
+000519a0: 2020 2020 6c65 6e67 7468 203d 206c 656e      length = len
+000519b0: 2873 796d 626f 6c73 290a 2020 2020 2020  (symbols).      
+000519c0: 2020 2020 2020 6966 206c 656e 6774 6820        if length 
+000519d0: 213d 2031 3a0a 2020 2020 2020 2020 2020  != 1:.          
+000519e0: 2020 2020 2020 7261 6973 6520 4172 6775        raise Argu
+000519f0: 6d65 6e74 7352 6571 7569 7265 6428 7365  mentsRequired(se
+00051a00: 6c66 2e69 6420 2b20 2720 6665 7463 6855  lf.id + ' fetchU
+00051a10: 5344 4350 6f73 6974 696f 6e73 2829 2074  SDCPositions() t
+00051a20: 616b 6573 2061 6e20 6172 7261 7920 7769  akes an array wi
+00051a30: 7468 2065 7861 6374 6c79 206f 6e65 2073  th exactly one s
+00051a40: 796d 626f 6c27 290a 2020 2020 2020 2020  ymbol').        
+00051a50: 2020 2020 7379 6d62 6f6c 203d 2073 656c      symbol = sel
+00051a60: 662e 7361 6665 5f73 7472 696e 6728 7379  f.safe_string(sy
+00051a70: 6d62 6f6c 732c 2030 290a 2020 2020 2020  mbols, 0).      
+00051a80: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
+00051a90: 656c 662e 6d61 726b 6574 2873 796d 626f  elf.market(symbo
+00051aa0: 6c29 0a20 2020 2020 2020 2020 2020 2072  l).            r
+00051ab0: 6571 7565 7374 5b27 7379 6d62 6f6c 275d  equest['symbol']
+00051ac0: 203d 206d 6172 6b65 745b 2769 6427 5d0a   = market['id'].
+00051ad0: 2020 2020 2020 2020 656c 6966 2073 796d          elif sym
+00051ae0: 626f 6c73 2069 7320 6e6f 7420 4e6f 6e65  bols is not None
+00051af0: 3a0a 2020 2020 2020 2020 2020 2020 6d61  :.            ma
+00051b00: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
+00051b10: 6574 2873 796d 626f 6c73 290a 2020 2020  et(symbols).    
+00051b20: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+00051b30: 2773 796d 626f 6c27 5d20 3d20 6d61 726b  'symbol'] = mark
+00051b40: 6574 5b27 6964 275d 0a20 2020 2020 2020  et['id'].       
+00051b50: 2074 7970 652c 2070 6172 616d 7320 3d20   type, params = 
+00051b60: 7365 6c66 2e68 616e 646c 655f 6d61 726b  self.handle_mark
+00051b70: 6574 5f74 7970 655f 616e 645f 7061 7261  et_type_and_para
+00051b80: 6d73 2827 6665 7463 6855 5344 4350 6f73  ms('fetchUSDCPos
+00051b90: 6974 696f 6e73 272c 206d 6172 6b65 742c  itions', market,
+00051ba0: 2070 6172 616d 7329 0a20 2020 2020 2020   params).       
+00051bb0: 2072 6571 7565 7374 5b27 6361 7465 676f   request['catego
+00051bc0: 7279 275d 203d 2027 4f50 5449 4f4e 2720  ry'] = 'OPTION' 
+00051bd0: 6966 2028 7479 7065 203d 3d20 276f 7074  if (type == 'opt
+00051be0: 696f 6e27 2920 656c 7365 2027 5045 5250  ion') else 'PERP
+00051bf0: 4554 5541 4c27 0a20 2020 2020 2020 2072  ETUAL'.        r
+00051c00: 6573 706f 6e73 6520 3d20 7365 6c66 2e70  esponse = self.p
+00051c10: 7269 7661 7465 506f 7374 4f70 7469 6f6e  rivatePostOption
+00051c20: 5573 6463 4f70 656e 6170 6950 7269 7661  UsdcOpenapiPriva
+00051c30: 7465 5631 5175 6572 7950 6f73 6974 696f  teV1QueryPositio
+00051c40: 6e28 7365 6c66 2e65 7874 656e 6428 7265  n(self.extend(re
+00051c50: 7175 6573 742c 2070 6172 616d 7329 290a  quest, params)).
+00051c60: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+00051c70: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
+00051c80: 2020 2320 2020 2020 2020 2020 2272 6573    #         "res
+00051c90: 756c 7422 3a20 7b0a 2020 2020 2020 2020  ult": {.        
+00051ca0: 2320 2020 2020 2020 2020 2020 2020 2263  #             "c
+00051cb0: 7572 736f 7222 3a20 2242 5443 2d33 3144  ursor": "BTC-31D
+00051cc0: 4543 3231 2d32 3430 3030 2d50 2533 4131  EC21-24000-P%3A1
+00051cd0: 3634 3038 3334 3432 3134 3331 2532 4342  640834421431%2CB
+00051ce0: 5443 2d33 3144 4543 3231 2d32 3430 3030  TC-31DEC21-24000
+00051cf0: 2d50 2533 4131 3634 3038 3334 3432 3134  -P%3A16408344214
+00051d00: 3331 222c 0a20 2020 2020 2020 2023 2020  31",.        #  
+00051d10: 2020 2020 2020 2020 2020 2022 7265 7375             "resu
+00051d20: 6c74 546f 7461 6c53 697a 6522 3a20 312c  ltTotalSize": 1,
+00051d30: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00051d40: 2020 2020 2020 2022 6461 7461 4c69 7374         "dataList
+00051d50: 223a 205b 0a20 2020 2020 2020 2023 2020  ": [.        #  
+00051d60: 2020 2020 2020 2020 2020 2020 2020 207b                 {
+00051d70: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00051d80: 2020 2020 2020 2020 2020 2022 7379 6d62             "symb
+00051d90: 6f6c 223a 2022 4254 432d 3331 4445 4332  ol": "BTC-31DEC2
+00051da0: 312d 3234 3030 302d 5022 2c0a 2020 2020  1-24000-P",.    
+00051db0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00051dc0: 2020 2020 2020 226c 6576 6572 6167 6522        "leverage"
+00051dd0: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
+00051de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00051df0: 226f 6363 436c 6f73 696e 6746 6565 223a  "occClosingFee":
+00051e00: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
+00051e10: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00051e20: 6c69 7150 7269 6365 223a 2022 222c 0a20  liqPrice": "",. 
+00051e30: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00051e40: 2020 2020 2020 2020 2022 706f 7369 7469           "positi
+00051e50: 6f6e 5661 6c75 6522 3a20 2222 2c0a 2020  onValue": "",.  
+00051e60: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00051e70: 2020 2020 2020 2020 2274 616b 6550 726f          "takePro
+00051e80: 6669 7422 3a20 2222 2c0a 2020 2020 2020  fit": "",.      
+00051e90: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00051ea0: 2020 2020 2272 6973 6b49 6422 3a20 2222      "riskId": ""
+00051eb0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00051ec0: 2020 2020 2020 2020 2020 2020 2274 7261              "tra
+00051ed0: 696c 696e 6753 746f 7022 3a20 2222 2c0a  ilingStop": "",.
+00051ee0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00051ef0: 2020 2020 2020 2020 2020 2275 6e72 6561            "unrea
+00051f00: 6c69 7365 6450 6e6c 223a 2022 222c 0a20  lisedPnl": "",. 
+00051f10: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00051f20: 2020 2020 2020 2020 2022 6372 6561 7465           "create
+00051f30: 6441 7422 3a20 2231 3634 3038 3334 3432  dAt": "164083442
+00051f40: 3134 3331 222c 0a20 2020 2020 2020 2023  1431",.        #
+00051f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00051f60: 2022 6d61 726b 5072 6963 6522 3a20 2230   "markPrice": "0
+00051f70: 2e30 3022 2c0a 2020 2020 2020 2020 2320  .00",.        # 
+00051f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00051f90: 2263 756d 5265 616c 6973 6564 506e 6c22  "cumRealisedPnl"
+00051fa0: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
 00051fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00051fc0: 2320 6675 7475 7265 7320 6f6e 6c79 0a20  # futures only. 
-00051fd0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00051fe0: 6177 506f 7369 7469 6f6e 203d 2073 656c  awPosition = sel
-00051ff0: 662e 7361 6665 5f76 616c 7565 2872 6177  f.safe_value(raw
-00052000: 506f 7369 7469 6f6e 2c20 2764 6174 6127  Position, 'data'
-00052010: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
-00052020: 7375 6c74 732e 6170 7065 6e64 2873 656c  sults.append(sel
-00052030: 662e 7061 7273 655f 706f 7369 7469 6f6e  f.parse_position
-00052040: 2872 6177 506f 7369 7469 6f6e 2c20 6d61  (rawPosition, ma
-00052050: 726b 6574 2929 0a20 2020 2020 2020 2072  rket)).        r
-00052060: 6574 7572 6e20 7365 6c66 2e66 696c 7465  eturn self.filte
-00052070: 725f 6279 5f61 7272 6179 2872 6573 756c  r_by_array(resul
-00052080: 7473 2c20 2773 796d 626f 6c27 2c20 7379  ts, 'symbol', sy
-00052090: 6d62 6f6c 732c 2046 616c 7365 290a 0a20  mbols, False).. 
-000520a0: 2020 2064 6566 2066 6574 6368 5f64 6572     def fetch_der
-000520b0: 6976 6174 6976 6573 5f70 6f73 6974 696f  ivatives_positio
-000520c0: 6e73 2873 656c 662c 2073 796d 626f 6c73  ns(self, symbols
-000520d0: 3a20 4f70 7469 6f6e 616c 5b4c 6973 745b  : Optional[List[
-000520e0: 7374 725d 5d20 3d20 4e6f 6e65 2c20 7061  str]] = None, pa
-000520f0: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
-00052100: 2020 7365 6c66 2e6c 6f61 645f 6d61 726b    self.load_mark
-00052110: 6574 7328 290a 2020 2020 2020 2020 7265  ets().        re
-00052120: 7175 6573 7420 3d20 7b7d 0a20 2020 2020  quest = {}.     
-00052130: 2020 206d 6172 6b65 7420 3d20 4e6f 6e65     market = None
-00052140: 0a20 2020 2020 2020 2073 6574 746c 6520  .        settle 
-00052150: 3d20 4e6f 6e65 0a20 2020 2020 2020 2069  = None.        i
-00052160: 6620 6973 696e 7374 616e 6365 2873 796d  f isinstance(sym
-00052170: 626f 6c73 2c20 6c69 7374 293a 0a20 2020  bols, list):.   
-00052180: 2020 2020 2020 2020 2073 796d 626f 6c73           symbols
-00052190: 4c65 6e67 7468 203d 206c 656e 2873 796d  Length = len(sym
-000521a0: 626f 6c73 290a 2020 2020 2020 2020 2020  bols).          
-000521b0: 2020 6966 2073 796d 626f 6c73 4c65 6e67    if symbolsLeng
-000521c0: 7468 203e 2031 3a0a 2020 2020 2020 2020  th > 1:.        
-000521d0: 2020 2020 2020 2020 7261 6973 6520 4172          raise Ar
-000521e0: 6775 6d65 6e74 7352 6571 7569 7265 6428  gumentsRequired(
-000521f0: 7365 6c66 2e69 6420 2b20 2720 6665 7463  self.id + ' fetc
-00052200: 6850 6f73 6974 696f 6e73 2829 2064 6f65  hPositions() doe
-00052210: 7320 6e6f 7420 6163 6365 7074 2061 6e20  s not accept an 
-00052220: 6172 7261 7920 7769 7468 206d 6f72 6520  array with more 
-00052230: 7468 616e 206f 6e65 2073 796d 626f 6c27  than one symbol'
-00052240: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-00052250: 2073 796d 626f 6c73 4c65 6e67 7468 203d   symbolsLength =
-00052260: 3d20 313a 0a20 2020 2020 2020 2020 2020  = 1:.           
-00052270: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
-00052280: 6c66 2e6d 6172 6b65 7428 7379 6d62 6f6c  lf.market(symbol
-00052290: 735b 305d 290a 2020 2020 2020 2020 2020  s[0]).          
-000522a0: 2020 2020 2020 7365 7474 6c65 203d 206d        settle = m
-000522b0: 6172 6b65 745b 2773 6574 746c 6527 5d0a  arket['settle'].
-000522c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000522d0: 7265 7175 6573 745b 2773 796d 626f 6c27  request['symbol'
-000522e0: 5d20 3d20 6d61 726b 6574 5b27 6964 275d  ] = market['id']
-000522f0: 0a20 2020 2020 2020 2073 6574 746c 652c  .        settle,
-00052300: 2070 6172 616d 7320 3d20 7365 6c66 2e68   params = self.h
-00052310: 616e 646c 655f 6f70 7469 6f6e 5f61 6e64  andle_option_and
-00052320: 5f70 6172 616d 7328 7061 7261 6d73 2c20  _params(params, 
-00052330: 2766 6574 6368 506f 7369 7469 6f6e 7327  'fetchPositions'
-00052340: 2c20 2773 6574 746c 6527 2c20 7365 7474  , 'settle', sett
-00052350: 6c65 290a 2020 2020 2020 2020 6966 2073  le).        if s
-00052360: 6574 746c 6520 6973 206e 6f74 204e 6f6e  ettle is not Non
-00052370: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-00052380: 6571 7565 7374 5b27 7365 7474 6c65 436f  equest['settleCo
-00052390: 696e 275d 203d 2073 6574 746c 650a 2020  in'] = settle.  
-000523a0: 2020 2020 2020 7375 6254 7970 6520 3d20        subType = 
-000523b0: 4e6f 6e65 0a20 2020 2020 2020 2073 7562  None.        sub
-000523c0: 5479 7065 2c20 7061 7261 6d73 203d 2073  Type, params = s
-000523d0: 656c 662e 6861 6e64 6c65 5f73 7562 5f74  elf.handle_sub_t
-000523e0: 7970 655f 616e 645f 7061 7261 6d73 2827  ype_and_params('
-000523f0: 6665 7463 6850 6f73 6974 696f 6e73 272c  fetchPositions',
-00052400: 206d 6172 6b65 742c 2070 6172 616d 732c   market, params,
-00052410: 2027 6c69 6e65 6172 2729 0a20 2020 2020   'linear').     
-00052420: 2020 2072 6571 7565 7374 5b27 6361 7465     request['cate
-00052430: 676f 7279 275d 203d 2073 7562 5479 7065  gory'] = subType
-00052440: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
-00052450: 6520 3d20 7365 6c66 2e70 7269 7661 7465  e = self.private
-00052460: 4765 7456 3550 6f73 6974 696f 6e4c 6973  GetV5PositionLis
-00052470: 7428 7365 6c66 2e65 7874 656e 6428 7265  t(self.extend(re
-00052480: 7175 6573 742c 2070 6172 616d 7329 290a  quest, params)).
-00052490: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-000524a0: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
-000524b0: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
-000524c0: 436f 6465 223a 2030 2c0a 2020 2020 2020  Code": 0,.      
-000524d0: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
-000524e0: 4d73 6722 3a20 224f 4b22 2c0a 2020 2020  Msg": "OK",.    
-000524f0: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-00052500: 6573 756c 7422 3a20 7b0a 2020 2020 2020  esult": {.      
-00052510: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00052520: 226e 6578 7450 6167 6543 7572 736f 7222  "nextPageCursor"
-00052530: 3a20 2275 7064 6174 6541 7425 3344 3136  : "updateAt%3D16
-00052540: 3732 3237 3933 3232 3636 3822 2c0a 2020  72279322668",.  
-00052550: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00052560: 2020 2020 2263 6174 6567 6f72 7922 3a20      "category": 
-00052570: 226c 696e 6561 7222 2c0a 2020 2020 2020  "linear",.      
-00052580: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00052590: 226c 6973 7422 3a20 5b0a 2020 2020 2020  "list": [.      
-000525a0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000525b0: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-000525c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000525d0: 2020 2020 2273 796d 626f 6c22 3a20 2258      "symbol": "X
-000525e0: 5250 5553 4454 222c 0a20 2020 2020 2020  RPUSDT",.       
-000525f0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00052600: 2020 2020 2020 2022 6c65 7665 7261 6765         "leverage
-00052610: 223a 2022 3130 222c 0a20 2020 2020 2020  ": "10",.       
-00052620: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00052630: 2020 2020 2020 2022 6176 6750 7269 6365         "avgPrice
-00052640: 223a 2022 302e 3336 3135 222c 0a20 2020  ": "0.3615",.   
-00052650: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00052660: 2020 2020 2020 2020 2020 2022 6c69 7150             "liqP
-00052670: 7269 6365 223a 2022 302e 3030 3031 222c  rice": "0.0001",
-00052680: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00052690: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000526a0: 7269 736b 4c69 6d69 7456 616c 7565 223a  riskLimitValue":
-000526b0: 2022 3230 3030 3030 222c 0a20 2020 2020   "200000",.     
-000526c0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-000526d0: 2020 2020 2020 2020 2022 7461 6b65 5072           "takePr
-000526e0: 6f66 6974 223a 2022 222c 0a20 2020 2020  ofit": "",.     
-000526f0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00052700: 2020 2020 2020 2020 2022 706f 7369 7469           "positi
-00052710: 6f6e 5661 6c75 6522 3a20 2233 362e 3135  onValue": "36.15
-00052720: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00052730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00052740: 2022 7470 736c 4d6f 6465 223a 2022 4675   "tpslMode": "Fu
-00052750: 6c6c 222c 0a20 2020 2020 2020 2023 2020  ll",.        #  
-00052760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00052770: 2020 2022 7269 736b 4964 223a 2034 312c     "riskId": 41,
-00052780: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00052790: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000527a0: 7472 6169 6c69 6e67 5374 6f70 223a 2022  trailingStop": "
-000527b0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-000527c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000527d0: 2020 2275 6e72 6561 6c69 7365 6450 6e6c    "unrealisedPnl
-000527e0: 223a 2022 2d31 2e38 3322 2c0a 2020 2020  ": "-1.83",.    
-000527f0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00052800: 2020 2020 2020 2020 2020 226d 6172 6b50            "markP
-00052810: 7269 6365 223a 2022 302e 3334 3332 222c  rice": "0.3432",
-00052820: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00052830: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00052840: 6375 6d52 6561 6c69 7365 6450 6e6c 223a  cumRealisedPnl":
-00052850: 2022 302e 3438 3830 3538 3736 222c 0a20   "0.48805876",. 
-00052860: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00052870: 2020 2020 2020 2020 2020 2020 2022 706f               "po
-00052880: 7369 7469 6f6e 4d4d 223a 2022 302e 3338  sitionMM": "0.38
-00052890: 3130 3231 222c 0a20 2020 2020 2020 2023  1021",.        #
-000528a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000528b0: 2020 2020 2022 6372 6561 7465 6454 696d       "createdTim
-000528c0: 6522 3a20 2231 3637 3231 3231 3138 3232  e": "16721211822
-000528d0: 3136 222c 0a20 2020 2020 2020 2023 2020  16",.        #  
-000528e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000528f0: 2020 2022 706f 7369 7469 6f6e 4964 7822     "positionIdx"
-00052900: 3a20 302c 0a20 2020 2020 2020 2023 2020  : 0,.        #  
-00052910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00052920: 2020 2022 706f 7369 7469 6f6e 494d 223a     "positionIM":
-00052930: 2022 332e 3633 3435 3231 222c 0a20 2020   "3.634521",.   
-00052940: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00052950: 2020 2020 2020 2020 2020 2022 7570 6461             "upda
-00052960: 7465 6454 696d 6522 3a20 2231 3637 3232  tedTime": "16722
-00052970: 3739 3332 3236 3638 222c 0a20 2020 2020  79322668",.     
-00052980: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00052990: 2020 2020 2020 2020 2022 7369 6465 223a           "side":
-000529a0: 2022 4275 7922 2c0a 2020 2020 2020 2020   "Buy",.        
-000529b0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-000529c0: 2020 2020 2020 2262 7573 7450 7269 6365        "bustPrice
-000529d0: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
-000529e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000529f0: 2020 2020 2022 7369 7a65 223a 2022 3130       "size": "10
-00052a00: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-00052a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00052a20: 2020 2270 6f73 6974 696f 6e53 7461 7475    "positionStatu
-00052a30: 7322 3a20 224e 6f72 6d61 6c22 2c0a 2020  s": "Normal",.  
-00052a40: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00052a50: 2020 2020 2020 2020 2020 2020 2273 746f              "sto
-00052a60: 704c 6f73 7322 3a20 2222 2c0a 2020 2020  pLoss": "",.    
-00052a70: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00052a80: 2020 2020 2020 2020 2020 2274 7261 6465            "trade
-00052a90: 4d6f 6465 223a 2030 0a20 2020 2020 2020  Mode": 0.       
-00052aa0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00052ab0: 2020 207d 0a20 2020 2020 2020 2023 2020     }.        #  
-00052ac0: 2020 2020 2020 2020 2020 205d 0a20 2020             ].   
-00052ad0: 2020 2020 2023 2020 2020 2020 2020 207d       #         }
-00052ae0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00052af0: 2020 2020 2272 6574 4578 7449 6e66 6f22      "retExtInfo"
-00052b00: 3a20 7b7d 2c0a 2020 2020 2020 2020 2320  : {},.        # 
-00052b10: 2020 2020 2020 2020 2274 696d 6522 3a20          "time": 
-00052b20: 3136 3732 3238 3032 3139 3136 390a 2020  1672280219169.  
-00052b30: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
-00052b40: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00052b50: 7265 7375 6c74 203d 2073 656c 662e 7361  result = self.sa
-00052b60: 6665 5f76 616c 7565 2872 6573 706f 6e73  fe_value(respons
-00052b70: 652c 2027 7265 7375 6c74 272c 207b 7d29  e, 'result', {})
-00052b80: 0a20 2020 2020 2020 2070 6f73 6974 696f  .        positio
-00052b90: 6e73 203d 2073 656c 662e 7361 6665 5f76  ns = self.safe_v
-00052ba0: 616c 7565 2872 6573 756c 742c 2027 6c69  alue(result, 'li
-00052bb0: 7374 272c 205b 5d29 0a20 2020 2020 2020  st', []).       
-00052bc0: 2072 6574 7572 6e20 7365 6c66 2e70 6172   return self.par
-00052bd0: 7365 5f70 6f73 6974 696f 6e73 2870 6f73  se_positions(pos
-00052be0: 6974 696f 6e73 2c20 7379 6d62 6f6c 732c  itions, symbols,
-00052bf0: 2070 6172 616d 7329 0a0a 2020 2020 6465   params)..    de
-00052c00: 6620 6665 7463 685f 706f 7369 7469 6f6e  f fetch_position
-00052c10: 7328 7365 6c66 2c20 7379 6d62 6f6c 733a  s(self, symbols:
-00052c20: 204f 7074 696f 6e61 6c5b 4c69 7374 5b73   Optional[List[s
-00052c30: 7472 5d5d 203d 204e 6f6e 652c 2070 6172  tr]] = None, par
-00052c40: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
-00052c50: 2022 2222 0a20 2020 2020 2020 2066 6574   """.        fet
-00052c60: 6368 2061 6c6c 206f 7065 6e20 706f 7369  ch all open posi
-00052c70: 7469 6f6e 730a 2020 2020 2020 2020 3a70  tions.        :p
-00052c80: 6172 616d 205b 7374 725d 7c4e 6f6e 6520  aram [str]|None 
-00052c90: 7379 6d62 6f6c 733a 206c 6973 7420 6f66  symbols: list of
-00052ca0: 2075 6e69 6669 6564 206d 6172 6b65 7420   unified market 
-00052cb0: 7379 6d62 6f6c 730a 2020 2020 2020 2020  symbols.        
-00052cc0: 3a70 6172 616d 2064 6963 7420 7061 7261  :param dict para
-00052cd0: 6d73 3a20 6578 7472 6120 7061 7261 6d65  ms: extra parame
-00052ce0: 7465 7273 2073 7065 6369 6669 6320 746f  ters specific to
-00052cf0: 2074 6865 2062 7962 6974 2061 7069 2065   the bybit api e
-00052d00: 6e64 706f 696e 740a 2020 2020 2020 2020  ndpoint.        
-00052d10: 3a72 6574 7572 6e73 205b 6469 6374 5d3a  :returns [dict]:
-00052d20: 2061 206c 6973 7420 6f66 2060 706f 7369   a list of `posi
-00052d30: 7469 6f6e 2073 7472 7563 7475 7265 203c  tion structure <
-00052d40: 6874 7470 733a 2f2f 646f 6373 2e63 6378  https://docs.ccx
-00052d50: 742e 636f 6d2f 232f 3f69 643d 706f 7369  t.com/#/?id=posi
-00052d60: 7469 6f6e 2d73 7472 7563 7475 7265 3e60  tion-structure>`
-00052d70: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00052d80: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-00052d90: 6365 2873 796d 626f 6c73 2c20 6c69 7374  ce(symbols, list
-00052da0: 293a 0a20 2020 2020 2020 2020 2020 2073  ):.            s
-00052db0: 796d 626f 6c73 4c65 6e67 7468 203d 206c  ymbolsLength = l
-00052dc0: 656e 2873 796d 626f 6c73 290a 2020 2020  en(symbols).    
-00052dd0: 2020 2020 2020 2020 6966 2073 796d 626f          if symbo
-00052de0: 6c73 4c65 6e67 7468 203e 2031 3a0a 2020  lsLength > 1:.  
-00052df0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
-00052e00: 6973 6520 4172 6775 6d65 6e74 7352 6571  ise ArgumentsReq
-00052e10: 7569 7265 6428 7365 6c66 2e69 6420 2b20  uired(self.id + 
-00052e20: 2720 6665 7463 6850 6f73 6974 696f 6e73  ' fetchPositions
-00052e30: 2829 2064 6f65 7320 6e6f 7420 6163 6365  () does not acce
-00052e40: 7074 2061 6e20 6172 7261 7920 7769 7468  pt an array with
-00052e50: 206d 6f72 6520 7468 616e 206f 6e65 2073   more than one s
-00052e60: 796d 626f 6c27 290a 2020 2020 2020 2020  ymbol').        
-00052e70: 656c 6966 2073 796d 626f 6c73 2069 7320  elif symbols is 
-00052e80: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00052e90: 2020 2020 2020 7379 6d62 6f6c 7320 3d20        symbols = 
-00052ea0: 5b73 796d 626f 6c73 5d0a 2020 2020 2020  [symbols].      
-00052eb0: 2020 7365 6c66 2e6c 6f61 645f 6d61 726b    self.load_mark
-00052ec0: 6574 7328 290a 2020 2020 2020 2020 7379  ets().        sy
-00052ed0: 6d62 6f6c 7320 3d20 7365 6c66 2e6d 6172  mbols = self.mar
-00052ee0: 6b65 745f 7379 6d62 6f6c 7328 7379 6d62  ket_symbols(symb
-00052ef0: 6f6c 7329 0a20 2020 2020 2020 2065 6e61  ols).        ena
-00052f00: 626c 6555 6e69 6669 6564 4d61 7267 696e  bleUnifiedMargin
-00052f10: 2c20 656e 6162 6c65 556e 6966 6965 6441  , enableUnifiedA
-00052f20: 6363 6f75 6e74 203d 2073 656c 662e 6973  ccount = self.is
-00052f30: 5f75 6e69 6669 6564 5f65 6e61 626c 6564  _unified_enabled
-00052f40: 2829 0a20 2020 2020 2020 2073 6574 746c  ().        settl
-00052f50: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
-00052f60: 7269 6e67 2870 6172 616d 732c 2027 7365  ring(params, 'se
-00052f70: 7474 6c65 436f 696e 2729 0a20 2020 2020  ttleCoin').     
-00052f80: 2020 2070 6172 616d 734f 6d69 7474 6564     paramsOmitted
-00052f90: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-00052fa0: 6966 2073 6574 746c 6520 6973 204e 6f6e  if settle is Non
-00052fb0: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
-00052fc0: 6574 746c 652c 2070 6172 616d 734f 6d69  ettle, paramsOmi
-00052fd0: 7474 6564 203d 2073 656c 662e 6861 6e64  tted = self.hand
-00052fe0: 6c65 5f6f 7074 696f 6e5f 616e 645f 7061  le_option_and_pa
-00052ff0: 7261 6d73 2870 6172 616d 732c 2027 6665  rams(params, 'fe
-00053000: 7463 6850 6f73 6974 696f 6e73 272c 2027  tchPositions', '
-00053010: 7365 7474 6c65 272c 2073 6574 746c 6529  settle', settle)
-00053020: 0a20 2020 2020 2020 2069 7355 7364 6353  .        isUsdcS
-00053030: 6574 746c 6564 203d 2073 6574 746c 6520  ettled = settle 
-00053040: 3d3d 2027 5553 4443 270a 2020 2020 2020  == 'USDC'.      
-00053050: 2020 7375 6254 7970 6520 3d20 4e6f 6e65    subType = None
-00053060: 0a20 2020 2020 2020 2073 7562 5479 7065  .        subType
-00053070: 2c20 7061 7261 6d73 4f6d 6974 7465 6420  , paramsOmitted 
-00053080: 3d20 7365 6c66 2e68 616e 646c 655f 7375  = self.handle_su
-00053090: 625f 7479 7065 5f61 6e64 5f70 6172 616d  b_type_and_param
-000530a0: 7328 2766 6574 6368 506f 7369 7469 6f6e  s('fetchPosition
-000530b0: 7327 2c20 4e6f 6e65 2c20 7061 7261 6d73  s', None, params
-000530c0: 4f6d 6974 7465 6429 0a20 2020 2020 2020  Omitted).       
-000530d0: 2069 7349 6e76 6572 7365 203d 2073 7562   isInverse = sub
-000530e0: 5479 7065 203d 3d20 2769 6e76 6572 7365  Type == 'inverse
-000530f0: 270a 2020 2020 2020 2020 6973 4c69 6e65  '.        isLine
-00053100: 6172 5365 7474 6c65 203d 2069 7355 7364  arSettle = isUsd
-00053110: 6353 6574 746c 6564 206f 7220 2873 6574  cSettled or (set
-00053120: 746c 6520 3d3d 2027 5553 4454 2729 0a20  tle == 'USDT'). 
-00053130: 2020 2020 2020 2069 6620 6973 496e 7665         if isInve
-00053140: 7273 6520 616e 6420 6973 4c69 6e65 6172  rse and isLinear
-00053150: 5365 7474 6c65 3a0a 2020 2020 2020 2020  Settle:.        
-00053160: 2020 2020 7261 6973 6520 4172 6775 6d65      raise Argume
-00053170: 6e74 7352 6571 7569 7265 6428 7365 6c66  ntsRequired(self
-00053180: 2e69 6420 2b20 2720 6665 7463 6850 6f73  .id + ' fetchPos
-00053190: 6974 696f 6e73 2077 6974 6820 696e 7665  itions with inve
-000531a0: 7273 6520 7375 6254 7970 6520 7265 7175  rse subType requ
-000531b0: 6972 6573 2073 6574 746c 6520 746f 206e  ires settle to n
-000531c0: 6f74 2062 6520 5553 4454 206f 7220 5553  ot be USDT or US
-000531d0: 4443 2729 0a20 2020 2020 2020 2069 6620  DC').        if 
-000531e0: 2865 6e61 626c 6555 6e69 6669 6564 4d61  (enableUnifiedMa
-000531f0: 7267 696e 206f 7220 656e 6162 6c65 556e  rgin or enableUn
-00053200: 6966 6965 6441 6363 6f75 6e74 2920 616e  ifiedAccount) an
-00053210: 6420 6e6f 7420 6973 496e 7665 7273 653a  d not isInverse:
-00053220: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00053230: 7572 6e20 7365 6c66 2e66 6574 6368 5f75  urn self.fetch_u
-00053240: 6e69 6669 6564 5f70 6f73 6974 696f 6e73  nified_positions
-00053250: 2873 796d 626f 6c73 2c20 7061 7261 6d73  (symbols, params
-00053260: 290a 2020 2020 2020 2020 656c 6966 2069  ).        elif i
-00053270: 7355 7364 6353 6574 746c 6564 3a0a 2020  sUsdcSettled:.  
-00053280: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00053290: 2073 656c 662e 6665 7463 685f 7573 6463   self.fetch_usdc
-000532a0: 5f70 6f73 6974 696f 6e73 2873 796d 626f  _positions(symbo
-000532b0: 6c73 2c20 7061 7261 6d73 4f6d 6974 7465  ls, paramsOmitte
-000532c0: 6429 0a20 2020 2020 2020 2065 6c73 653a  d).        else:
-000532d0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-000532e0: 7572 6e20 7365 6c66 2e66 6574 6368 5f64  urn self.fetch_d
-000532f0: 6572 6976 6174 6976 6573 5f70 6f73 6974  erivatives_posit
-00053300: 696f 6e73 2873 796d 626f 6c73 2c20 7061  ions(symbols, pa
-00053310: 7261 6d73 290a 0a20 2020 2064 6566 2070  rams)..    def p
-00053320: 6172 7365 5f70 6f73 6974 696f 6e28 7365  arse_position(se
-00053330: 6c66 2c20 706f 7369 7469 6f6e 2c20 6d61  lf, position, ma
-00053340: 726b 6574 3d4e 6f6e 6529 3a0a 2020 2020  rket=None):.    
-00053350: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-00053360: 6c69 6e65 6172 2073 7761 700a 2020 2020  linear swap.    
-00053370: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-00053380: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-00053390: 2020 2020 2020 2020 2270 6f73 6974 696f          "positio
-000533a0: 6e49 6478 223a 2030 2c0a 2020 2020 2020  nIdx": 0,.      
-000533b0: 2020 2320 2020 2020 2020 2020 2272 6973    #         "ris
-000533c0: 6b49 6422 3a20 2231 3122 2c0a 2020 2020  kId": "11",.    
-000533d0: 2020 2020 2320 2020 2020 2020 2020 2273      #         "s
-000533e0: 796d 626f 6c22 3a20 2245 5448 5553 4454  ymbol": "ETHUSDT
-000533f0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00053400: 2020 2020 2022 7369 6465 223a 2022 4275       "side": "Bu
-00053410: 7922 2c0a 2020 2020 2020 2020 2320 2020  y",.        #   
-00053420: 2020 2020 2020 2273 697a 6522 3a20 2230        "size": "0
-00053430: 2e31 3022 2c0a 2020 2020 2020 2020 2320  .10",.        # 
-00053440: 2020 2020 2020 2020 2270 6f73 6974 696f          "positio
-00053450: 6e56 616c 7565 223a 2022 3131 392e 3834  nValue": "119.84
-00053460: 3522 2c0a 2020 2020 2020 2020 2320 2020  5",.        #   
-00053470: 2020 2020 2020 2265 6e74 7279 5072 6963        "entryPric
-00053480: 6522 3a20 2231 3139 382e 3435 222c 0a20  e": "1198.45",. 
-00053490: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000534a0: 2022 7472 6164 654d 6f64 6522 3a20 312c   "tradeMode": 1,
-000534b0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000534c0: 2020 2022 6175 746f 4164 644d 6172 6769     "autoAddMargi
-000534d0: 6e22 3a20 302c 0a20 2020 2020 2020 2023  n": 0,.        #
-000534e0: 2020 2020 2020 2020 2022 6c65 7665 7261           "levera
-000534f0: 6765 223a 2022 342e 3222 2c0a 2020 2020  ge": "4.2",.    
-00053500: 2020 2020 2320 2020 2020 2020 2020 2270      #         "p
-00053510: 6f73 6974 696f 6e42 616c 616e 6365 223a  ositionBalance":
-00053520: 2022 3238 2e35 3839 3331 3131 3822 2c0a   "28.58931118",.
-00053530: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00053540: 2020 226c 6971 5072 6963 6522 3a20 2239    "liqPrice": "9
-00053550: 3139 2e31 3022 2c0a 2020 2020 2020 2020  19.10",.        
-00053560: 2320 2020 2020 2020 2020 2262 7573 7450  #         "bustP
-00053570: 7269 6365 223a 2022 3931 332e 3135 222c  rice": "913.15",
-00053580: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00053590: 2020 2022 7461 6b65 5072 6f66 6974 223a     "takeProfit":
-000535a0: 2022 302e 3030 222c 0a20 2020 2020 2020   "0.00",.       
-000535b0: 2023 2020 2020 2020 2020 2022 7374 6f70   #         "stop
-000535c0: 4c6f 7373 223a 2022 302e 3030 222c 0a20  Loss": "0.00",. 
-000535d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000535e0: 2022 7472 6169 6c69 6e67 5374 6f70 223a   "trailingStop":
-000535f0: 2022 302e 3030 222c 0a20 2020 2020 2020   "0.00",.       
-00053600: 2023 2020 2020 2020 2020 2022 756e 7265   #         "unre
-00053610: 616c 6973 6564 506e 6c22 3a20 2230 2e30  alisedPnl": "0.0
-00053620: 3833 222c 0a20 2020 2020 2020 2023 2020  83",.        #  
-00053630: 2020 2020 2020 2022 6372 6561 7465 6454         "createdT
-00053640: 696d 6522 3a20 2231 3636 3930 3937 3234  ime": "166909724
-00053650: 3431 3932 222c 0a20 2020 2020 2020 2023  4192",.        #
-00053660: 2020 2020 2020 2020 2022 7570 6461 7465           "update
-00053670: 6454 696d 6522 3a20 2231 3636 3934 3133  dTime": "1669413
-00053680: 3132 3631 3930 222c 0a20 2020 2020 2020  126190",.       
-00053690: 2023 2020 2020 2020 2020 2022 7470 536c   #         "tpSl
-000536a0: 4d6f 6465 223a 2022 4675 6c6c 222c 0a20  Mode": "Full",. 
-000536b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000536c0: 2022 7269 736b 4c69 6d69 7456 616c 7565   "riskLimitValue
-000536d0: 223a 2022 3930 3030 3030 222c 0a20 2020  ": "900000",.   
-000536e0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-000536f0: 6163 7469 7665 5072 6963 6522 3a20 2230  activePrice": "0
-00053700: 2e30 3022 0a20 2020 2020 2020 2023 2020  .00".        #  
-00053710: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
-00053720: 2020 2020 2020 2023 2075 7364 630a 2020         # usdc.  
-00053730: 2020 2020 2020 2320 2020 207b 0a20 2020        #    {.   
-00053740: 2020 2020 2023 2020 2020 2020 2022 7379       #       "sy
-00053750: 6d62 6f6c 223a 2242 5443 5045 5250 222c  mbol":"BTCPERP",
-00053760: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00053770: 2022 6c65 7665 7261 6765 223a 2231 2e30   "leverage":"1.0
-00053780: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-00053790: 2020 2020 226f 6363 436c 6f73 696e 6746      "occClosingF
-000537a0: 6565 223a 2230 2e30 3030 3022 2c0a 2020  ee":"0.0000",.  
-000537b0: 2020 2020 2020 2320 2020 2020 2020 226c        #       "l
-000537c0: 6971 5072 6963 6522 3a22 222c 0a20 2020  iqPrice":"",.   
-000537d0: 2020 2020 2023 2020 2020 2020 2022 706f       #       "po
-000537e0: 7369 7469 6f6e 5661 6c75 6522 3a22 3330  sitionValue":"30
-000537f0: 2e38 3130 3022 2c0a 2020 2020 2020 2020  .8100",.        
-00053800: 2320 2020 2020 2020 2274 616b 6550 726f  #       "takePro
-00053810: 6669 7422 3a22 302e 3022 2c0a 2020 2020  fit":"0.0",.    
-00053820: 2020 2020 2320 2020 2020 2020 2272 6973      #       "ris
-00053830: 6b49 6422 3a22 3130 3030 3122 2c0a 2020  kId":"10001",.  
-00053840: 2020 2020 2020 2320 2020 2020 2020 2274        #       "t
-00053850: 7261 696c 696e 6753 746f 7022 3a22 302e  railingStop":"0.
-00053860: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
-00053870: 2020 2020 2020 2022 756e 7265 616c 6973         "unrealis
-00053880: 6564 506e 6c22 3a22 302e 3030 3030 222c  edPnl":"0.0000",
-00053890: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000538a0: 2022 6372 6561 7465 6441 7422 3a22 3136   "createdAt":"16
-000538b0: 3532 3435 3137 3935 3330 3522 2c0a 2020  52451795305",.  
-000538c0: 2020 2020 2020 2320 2020 2020 2020 226d        #       "m
-000538d0: 6172 6b50 7269 6365 223a 2233 3038 3039  arkPrice":"30809
-000538e0: 2e34 3122 2c0a 2020 2020 2020 2020 2320  .41",.        # 
-000538f0: 2020 2020 2020 2263 756d 5265 616c 6973        "cumRealis
-00053900: 6564 506e 6c22 3a22 302e 3030 3030 222c  edPnl":"0.0000",
-00053910: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00053920: 2022 706f 7369 7469 6f6e 4d4d 223a 2230   "positionMM":"0
-00053930: 2e31 3534 3122 2c0a 2020 2020 2020 2020  .1541",.        
-00053940: 2320 2020 2020 2020 2270 6f73 6974 696f  #       "positio
-00053950: 6e49 4d22 3a22 3330 2e38 3130 3022 2c0a  nIM":"30.8100",.
-00053960: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00053970: 2275 7064 6174 6564 4174 223a 2231 3635  "updatedAt":"165
-00053980: 3234 3531 3739 3533 3035 222c 0a20 2020  2451795305",.   
-00053990: 2020 2020 2023 2020 2020 2020 2022 7470       #       "tp
-000539a0: 534c 4d6f 6465 223a 2255 4e4b 4e4f 574e  SLMode":"UNKNOWN
-000539b0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-000539c0: 2020 2022 7369 6465 223a 2242 7579 222c     "side":"Buy",
-000539d0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000539e0: 2022 6275 7374 5072 6963 6522 3a22 222c   "bustPrice":"",
-000539f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00053a00: 2022 6465 6c65 7665 7261 6765 496e 6469   "deleverageIndi
-00053a10: 6361 746f 7222 3a22 3022 2c0a 2020 2020  cator":"0",.    
-00053a20: 2020 2020 2320 2020 2020 2020 2265 6e74      #       "ent
-00053a30: 7279 5072 6963 6522 3a22 3330 3831 302e  ryPrice":"30810.
-00053a40: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-00053a50: 2020 2020 2273 697a 6522 3a22 302e 3030      "size":"0.00
-00053a60: 3122 2c0a 2020 2020 2020 2020 2320 2020  1",.        #   
-00053a70: 2020 2020 2273 6573 7369 6f6e 5250 4c22      "sessionRPL"
-00053a80: 3a22 302e 3030 3030 222c 0a20 2020 2020  :"0.0000",.     
-00053a90: 2020 2023 2020 2020 2020 2022 706f 7369     #       "posi
-00053aa0: 7469 6f6e 5374 6174 7573 223a 224e 4f52  tionStatus":"NOR
-00053ab0: 4d41 4c22 2c0a 2020 2020 2020 2020 2320  MAL",.        # 
-00053ac0: 2020 2020 2020 2273 6573 7369 6f6e 5550        "sessionUP
-00053ad0: 4c22 3a22 2d30 2e30 3030 3622 2c0a 2020  L":"-0.0006",.  
-00053ae0: 2020 2020 2020 2320 2020 2020 2020 2273        #       "s
-00053af0: 746f 704c 6f73 7322 3a22 302e 3022 2c0a  topLoss":"0.0",.
-00053b00: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00053b10: 226f 7264 6572 4d61 7267 696e 223a 2230  "orderMargin":"0
-00053b20: 2e30 3030 3022 2c0a 2020 2020 2020 2020  .0000",.        
-00053b30: 2320 2020 2020 2020 2273 6573 7369 6f6e  #       "session
-00053b40: 4176 6750 7269 6365 223a 2233 3038 3130  AvgPrice":"30810
-00053b50: 2e30 220a 2020 2020 2020 2020 2320 2020  .0".        #   
-00053b60: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
-00053b70: 2020 2020 2023 2075 6e69 6669 6564 206d       # unified m
-00053b80: 6172 6769 6e0a 2020 2020 2020 2020 230a  argin.        #.
-00053b90: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
-00053ba0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00053bb0: 2020 2273 796d 626f 6c22 3a20 2245 5448    "symbol": "ETH
-00053bc0: 5553 4454 222c 0a20 2020 2020 2020 2023  USDT",.        #
-00053bd0: 2020 2020 2020 2020 2022 6c65 7665 7261           "levera
-00053be0: 6765 223a 2022 3130 222c 0a20 2020 2020  ge": "10",.     
-00053bf0: 2020 2023 2020 2020 2020 2020 2022 7570     #         "up
-00053c00: 6461 7465 6454 696d 6522 3a20 3136 3537  datedTime": 1657
-00053c10: 3731 3139 3439 3934 352c 0a20 2020 2020  711949945,.     
-00053c20: 2020 2023 2020 2020 2020 2020 2022 7369     #         "si
-00053c30: 6465 223a 2022 4275 7922 2c0a 2020 2020  de": "Buy",.    
-00053c40: 2020 2020 2320 2020 2020 2020 2020 2270      #         "p
-00053c50: 6f73 6974 696f 6e56 616c 7565 223a 2022  ositionValue": "
-00053c60: 3533 362e 3932 3530 3030 3030 222c 0a20  536.92500000",. 
-00053c70: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00053c80: 2022 7461 6b65 5072 6f66 6974 223a 2022   "takeProfit": "
-00053c90: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00053ca0: 2020 2020 2022 7470 736c 4d6f 6465 223a       "tpslMode":
-00053cb0: 2022 4675 6c6c 222c 0a20 2020 2020 2020   "Full",.       
-00053cc0: 2023 2020 2020 2020 2020 2022 7269 736b   #         "risk
-00053cd0: 4964 223a 2031 312c 0a20 2020 2020 2020  Id": 11,.       
-00053ce0: 2023 2020 2020 2020 2020 2022 7472 6169   #         "trai
-00053cf0: 6c69 6e67 5374 6f70 223a 2022 222c 0a20  lingStop": "",. 
-00053d00: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00053d10: 2022 656e 7472 7950 7269 6365 223a 2022   "entryPrice": "
-00053d20: 3130 3733 2e38 3530 3030 3030 3022 2c0a  1073.85000000",.
-00053d30: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00053d40: 2020 2275 6e72 6561 6c69 7365 6450 6e6c    "unrealisedPnl
-00053d50: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
-00053d60: 2020 2020 2020 2020 2022 6d61 726b 5072           "markPr
-00053d70: 6963 6522 3a20 2231 3038 302e 3635 3030  ice": "1080.6500
-00053d80: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
-00053d90: 2020 2020 2020 2020 2022 7369 7a65 223a           "size":
-00053da0: 2022 302e 3530 3030 222c 0a20 2020 2020   "0.5000",.     
-00053db0: 2020 2023 2020 2020 2020 2020 2022 706f     #         "po
-00053dc0: 7369 7469 6f6e 5374 6174 7573 223a 2022  sitionStatus": "
-00053dd0: 6e6f 726d 616c 222c 0a20 2020 2020 2020  normal",.       
-00053de0: 2023 2020 2020 2020 2020 2022 7374 6f70   #         "stop
-00053df0: 4c6f 7373 223a 2022 222c 0a20 2020 2020  Loss": "",.     
-00053e00: 2020 2023 2020 2020 2020 2020 2022 6375     #         "cu
-00053e10: 6d52 6561 6c69 7365 6450 6e6c 223a 2022  mRealisedPnl": "
-00053e20: 2d30 2e33 3232 3135 3530 3022 2c0a 2020  -0.32215500",.  
-00053e30: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00053e40: 2270 6f73 6974 696f 6e4d 4d22 3a20 2232  "positionMM": "2
-00053e50: 2e39 3734 3536 3435 3022 2c0a 2020 2020  .97456450",.    
-00053e60: 2020 2020 2320 2020 2020 2020 2020 2263      #         "c
-00053e70: 7265 6174 6564 5469 6d65 223a 2031 3635  reatedTime": 165
-00053e80: 3737 3131 3934 3939 3238 2c0a 2020 2020  7711949928,.    
-00053e90: 2020 2020 2320 2020 2020 2020 2020 2270      #         "p
-00053ea0: 6f73 6974 696f 6e49 6478 223a 2030 2c0a  ositionIdx": 0,.
-00053eb0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00053ec0: 2020 2270 6f73 6974 696f 6e49 4d22 3a20    "positionIM": 
-00053ed0: 2235 332e 3938 3234 3339 3530 220a 2020  "53.98243950".  
-00053ee0: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
-00053ef0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00053f00: 2320 756e 6966 6965 6420 6163 636f 756e  # unified accoun
-00053f10: 740a 2020 2020 2020 2020 230a 2020 2020  t.        #.    
-00053f20: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-00053f30: 2020 2020 2320 2020 2020 2020 2020 2273      #         "s
-00053f40: 796d 626f 6c22 3a20 2258 5250 5553 4454  ymbol": "XRPUSDT
-00053f50: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00053f60: 2020 2020 2022 6c65 7665 7261 6765 223a       "leverage":
-00053f70: 2022 3130 222c 0a20 2020 2020 2020 2023   "10",.        #
-00053f80: 2020 2020 2020 2020 2022 6176 6750 7269           "avgPri
-00053f90: 6365 223a 2022 302e 3336 3135 222c 0a20  ce": "0.3615",. 
-00053fa0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00053fb0: 2022 6c69 7150 7269 6365 223a 2022 302e   "liqPrice": "0.
-00053fc0: 3030 3031 222c 0a20 2020 2020 2020 2023  0001",.        #
-00053fd0: 2020 2020 2020 2020 2022 7269 736b 4c69           "riskLi
-00053fe0: 6d69 7456 616c 7565 223a 2022 3230 3030  mitValue": "2000
-00053ff0: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
-00054000: 2020 2020 2020 2022 7461 6b65 5072 6f66         "takeProf
-00054010: 6974 223a 2022 222c 0a20 2020 2020 2020  it": "",.       
-00054020: 2023 2020 2020 2020 2020 2022 706f 7369   #         "posi
-00054030: 7469 6f6e 5661 6c75 6522 3a20 2233 362e  tionValue": "36.
-00054040: 3135 222c 0a20 2020 2020 2020 2023 2020  15",.        #  
-00054050: 2020 2020 2020 2022 7470 736c 4d6f 6465         "tpslMode
-00054060: 223a 2022 4675 6c6c 222c 0a20 2020 2020  ": "Full",.     
-00054070: 2020 2023 2020 2020 2020 2020 2022 7269     #         "ri
-00054080: 736b 4964 223a 2034 312c 0a20 2020 2020  skId": 41,.     
-00054090: 2020 2023 2020 2020 2020 2020 2022 7472     #         "tr
-000540a0: 6169 6c69 6e67 5374 6f70 223a 2022 3022  ailingStop": "0"
-000540b0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-000540c0: 2020 2020 2275 6e72 6561 6c69 7365 6450      "unrealisedP
-000540d0: 6e6c 223a 2022 2d31 2e38 3322 2c0a 2020  nl": "-1.83",.  
-000540e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000540f0: 226d 6172 6b50 7269 6365 223a 2022 302e  "markPrice": "0.
-00054100: 3334 3332 222c 0a20 2020 2020 2020 2023  3432",.        #
-00054110: 2020 2020 2020 2020 2022 6375 6d52 6561           "cumRea
-00054120: 6c69 7365 6450 6e6c 223a 2022 302e 3438  lisedPnl": "0.48
-00054130: 3830 3538 3736 222c 0a20 2020 2020 2020  805876",.       
-00054140: 2023 2020 2020 2020 2020 2022 706f 7369   #         "posi
-00054150: 7469 6f6e 4d4d 223a 2022 302e 3338 3130  tionMM": "0.3810
-00054160: 3231 222c 0a20 2020 2020 2020 2023 2020  21",.        #  
-00054170: 2020 2020 2020 2022 6372 6561 7465 6454         "createdT
-00054180: 696d 6522 3a20 2231 3637 3231 3231 3138  ime": "167212118
-00054190: 3232 3136 222c 0a20 2020 2020 2020 2023  2216",.        #
-000541a0: 2020 2020 2020 2020 2022 706f 7369 7469           "positi
-000541b0: 6f6e 4964 7822 3a20 302c 0a20 2020 2020  onIdx": 0,.     
-000541c0: 2020 2023 2020 2020 2020 2020 2022 706f     #         "po
-000541d0: 7369 7469 6f6e 494d 223a 2022 332e 3633  sitionIM": "3.63
-000541e0: 3435 3231 222c 0a20 2020 2020 2020 2023  4521",.        #
-000541f0: 2020 2020 2020 2020 2022 7570 6461 7465           "update
-00054200: 6454 696d 6522 3a20 2231 3637 3232 3739  dTime": "1672279
-00054210: 3332 3236 3638 222c 0a20 2020 2020 2020  322668",.       
-00054220: 2023 2020 2020 2020 2020 2022 7369 6465   #         "side
-00054230: 223a 2022 4275 7922 2c0a 2020 2020 2020  ": "Buy",.      
-00054240: 2020 2320 2020 2020 2020 2020 2262 7573    #         "bus
-00054250: 7450 7269 6365 223a 2022 222c 0a20 2020  tPrice": "",.   
+00051fc0: 2270 6f73 6974 696f 6e4d 4d22 3a20 2233  "positionMM": "3
+00051fd0: 3539 2e35 3237 3122 2c0a 2020 2020 2020  59.5271",.      
+00051fe0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00051ff0: 2020 2020 2270 6f73 6974 696f 6e49 4d22      "positionIM"
+00052000: 3a20 2234 3637 2e30 3633 3322 2c0a 2020  : "467.0633",.  
+00052010: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00052020: 2020 2020 2020 2020 2275 7064 6174 6564          "updated
+00052030: 4174 223a 2022 3136 3430 3833 3434 3231  At": "1640834421
+00052040: 3433 3122 2c0a 2020 2020 2020 2020 2320  431",.        # 
+00052050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00052060: 2274 7053 4c4d 6f64 6522 3a20 2222 2c0a  "tpSLMode": "",.
+00052070: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00052080: 2020 2020 2020 2020 2020 2273 6964 6522            "side"
+00052090: 3a20 2253 656c 6c22 2c0a 2020 2020 2020  : "Sell",.      
+000520a0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+000520b0: 2020 2020 2262 7573 7450 7269 6365 223a      "bustPrice":
+000520c0: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
+000520d0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000520e0: 6465 6c65 7665 7261 6765 496e 6469 6361  deleverageIndica
+000520f0: 746f 7222 3a20 302c 0a20 2020 2020 2020  tor": 0,.       
+00052100: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00052110: 2020 2022 656e 7472 7950 7269 6365 223a     "entryPrice":
+00052120: 2022 312e 3422 2c0a 2020 2020 2020 2020   "1.4",.        
+00052130: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00052140: 2020 2273 697a 6522 3a20 222d 302e 3130    "size": "-0.10
+00052150: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00052160: 2020 2020 2020 2020 2020 2020 2020 2273                "s
+00052170: 6573 7369 6f6e 5250 4c22 3a20 2222 2c0a  essionRPL": "",.
+00052180: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00052190: 2020 2020 2020 2020 2020 2270 6f73 6974            "posit
+000521a0: 696f 6e53 7461 7475 7322 3a20 2222 2c0a  ionStatus": "",.
+000521b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000521c0: 2020 2020 2020 2020 2020 2273 6573 7369            "sessi
+000521d0: 6f6e 5550 4c22 3a20 2222 2c0a 2020 2020  onUPL": "",.    
+000521e0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+000521f0: 2020 2020 2020 2273 746f 704c 6f73 7322        "stopLoss"
+00052200: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
+00052210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00052220: 226f 7264 6572 4d61 7267 696e 223a 2022  "orderMargin": "
+00052230: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00052240: 2020 2020 2020 2020 2020 2020 2022 7365               "se
+00052250: 7373 696f 6e41 7667 5072 6963 6522 3a20  ssionAvgPrice": 
+00052260: 2231 2e35 220a 2020 2020 2020 2020 2320  "1.5".        # 
+00052270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00052280: 7d0a 2020 2020 2020 2020 2320 2020 2020  }.        #     
+00052290: 2020 2020 2020 2020 5d0a 2020 2020 2020          ].      
+000522a0: 2020 2320 2020 2020 2020 2020 7d2c 0a20    #         },. 
+000522b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000522c0: 2022 7265 7443 6f64 6522 3a20 302c 0a20   "retCode": 0,. 
+000522d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000522e0: 2022 7265 744d 7367 223a 2022 5375 6363   "retMsg": "Succ
+000522f0: 6573 732e 220a 2020 2020 2020 2020 2320  ess.".        # 
+00052300: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
+00052310: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00052320: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+00052330: 2872 6573 706f 6e73 652c 2027 7265 7375  (response, 'resu
+00052340: 6c74 272c 207b 7d29 0a20 2020 2020 2020  lt', {}).       
+00052350: 2070 6f73 6974 696f 6e73 203d 2073 656c   positions = sel
+00052360: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
+00052370: 756c 742c 2027 6461 7461 4c69 7374 272c  ult, 'dataList',
+00052380: 205b 5d29 0a20 2020 2020 2020 2072 6573   []).        res
+00052390: 756c 7473 203d 205b 5d0a 2020 2020 2020  ults = [].      
+000523a0: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
+000523b0: 2830 2c20 6c65 6e28 706f 7369 7469 6f6e  (0, len(position
+000523c0: 7329 293a 0a20 2020 2020 2020 2020 2020  s)):.           
+000523d0: 2072 6177 506f 7369 7469 6f6e 203d 2070   rawPosition = p
+000523e0: 6f73 6974 696f 6e73 5b69 5d0a 2020 2020  ositions[i].    
+000523f0: 2020 2020 2020 2020 6966 2028 2764 6174          if ('dat
+00052400: 6127 2069 6e20 7261 7750 6f73 6974 696f  a' in rawPositio
+00052410: 6e29 2061 6e64 2028 2769 735f 7661 6c69  n) and ('is_vali
+00052420: 6427 2069 6e20 7261 7750 6f73 6974 696f  d' in rawPositio
+00052430: 6e29 3a0a 2020 2020 2020 2020 2020 2020  n):.            
+00052440: 2020 2020 2320 6675 7475 7265 7320 6f6e      # futures on
+00052450: 6c79 0a20 2020 2020 2020 2020 2020 2020  ly.             
+00052460: 2020 2072 6177 506f 7369 7469 6f6e 203d     rawPosition =
+00052470: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+00052480: 2872 6177 506f 7369 7469 6f6e 2c20 2764  (rawPosition, 'd
+00052490: 6174 6127 290a 2020 2020 2020 2020 2020  ata').          
+000524a0: 2020 7265 7375 6c74 732e 6170 7065 6e64    results.append
+000524b0: 2873 656c 662e 7061 7273 655f 706f 7369  (self.parse_posi
+000524c0: 7469 6f6e 2872 6177 506f 7369 7469 6f6e  tion(rawPosition
+000524d0: 2c20 6d61 726b 6574 2929 0a20 2020 2020  , market)).     
+000524e0: 2020 2072 6574 7572 6e20 7365 6c66 2e66     return self.f
+000524f0: 696c 7465 725f 6279 5f61 7272 6179 2872  ilter_by_array(r
+00052500: 6573 756c 7473 2c20 2773 796d 626f 6c27  esults, 'symbol'
+00052510: 2c20 7379 6d62 6f6c 732c 2046 616c 7365  , symbols, False
+00052520: 290a 0a20 2020 2064 6566 2066 6574 6368  )..    def fetch
+00052530: 5f64 6572 6976 6174 6976 6573 5f70 6f73  _derivatives_pos
+00052540: 6974 696f 6e73 2873 656c 662c 2073 796d  itions(self, sym
+00052550: 626f 6c73 3a20 4f70 7469 6f6e 616c 5b4c  bols: Optional[L
+00052560: 6973 745b 7374 725d 5d20 3d20 4e6f 6e65  ist[str]] = None
+00052570: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
+00052580: 2020 2020 2020 7365 6c66 2e6c 6f61 645f        self.load_
+00052590: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
+000525a0: 2020 7265 7175 6573 7420 3d20 7b7d 0a20    request = {}. 
+000525b0: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
+000525c0: 4e6f 6e65 0a20 2020 2020 2020 2073 6574  None.        set
+000525d0: 746c 6520 3d20 4e6f 6e65 0a20 2020 2020  tle = None.     
+000525e0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+000525f0: 2873 796d 626f 6c73 2c20 6c69 7374 293a  (symbols, list):
+00052600: 0a20 2020 2020 2020 2020 2020 2073 796d  .            sym
+00052610: 626f 6c73 4c65 6e67 7468 203d 206c 656e  bolsLength = len
+00052620: 2873 796d 626f 6c73 290a 2020 2020 2020  (symbols).      
+00052630: 2020 2020 2020 6966 2073 796d 626f 6c73        if symbols
+00052640: 4c65 6e67 7468 203e 2031 3a0a 2020 2020  Length > 1:.    
+00052650: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00052660: 6520 4172 6775 6d65 6e74 7352 6571 7569  e ArgumentsRequi
+00052670: 7265 6428 7365 6c66 2e69 6420 2b20 2720  red(self.id + ' 
+00052680: 6665 7463 6850 6f73 6974 696f 6e73 2829  fetchPositions()
+00052690: 2064 6f65 7320 6e6f 7420 6163 6365 7074   does not accept
+000526a0: 2061 6e20 6172 7261 7920 7769 7468 206d   an array with m
+000526b0: 6f72 6520 7468 616e 206f 6e65 2073 796d  ore than one sym
+000526c0: 626f 6c27 290a 2020 2020 2020 2020 2020  bol').          
+000526d0: 2020 6966 2073 796d 626f 6c73 4c65 6e67    if symbolsLeng
+000526e0: 7468 203d 3d20 313a 0a20 2020 2020 2020  th == 1:.       
+000526f0: 2020 2020 2020 2020 206d 6172 6b65 7420           market 
+00052700: 3d20 7365 6c66 2e6d 6172 6b65 7428 7379  = self.market(sy
+00052710: 6d62 6f6c 735b 305d 290a 2020 2020 2020  mbols[0]).      
+00052720: 2020 2020 2020 2020 2020 7365 7474 6c65            settle
+00052730: 203d 206d 6172 6b65 745b 2773 6574 746c   = market['settl
+00052740: 6527 5d0a 2020 2020 2020 2020 2020 2020  e'].            
+00052750: 2020 2020 7265 7175 6573 745b 2773 796d      request['sym
+00052760: 626f 6c27 5d20 3d20 6d61 726b 6574 5b27  bol'] = market['
+00052770: 6964 275d 0a20 2020 2020 2020 2073 6574  id'].        set
+00052780: 746c 652c 2070 6172 616d 7320 3d20 7365  tle, params = se
+00052790: 6c66 2e68 616e 646c 655f 6f70 7469 6f6e  lf.handle_option
+000527a0: 5f61 6e64 5f70 6172 616d 7328 7061 7261  _and_params(para
+000527b0: 6d73 2c20 2766 6574 6368 506f 7369 7469  ms, 'fetchPositi
+000527c0: 6f6e 7327 2c20 2773 6574 746c 6527 2c20  ons', 'settle', 
+000527d0: 7365 7474 6c65 290a 2020 2020 2020 2020  settle).        
+000527e0: 6966 2073 6574 746c 6520 6973 206e 6f74  if settle is not
+000527f0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00052800: 2020 2072 6571 7565 7374 5b27 7365 7474     request['sett
+00052810: 6c65 436f 696e 275d 203d 2073 6574 746c  leCoin'] = settl
+00052820: 650a 2020 2020 2020 2020 7375 6254 7970  e.        subTyp
+00052830: 6520 3d20 4e6f 6e65 0a20 2020 2020 2020  e = None.       
+00052840: 2073 7562 5479 7065 2c20 7061 7261 6d73   subType, params
+00052850: 203d 2073 656c 662e 6861 6e64 6c65 5f73   = self.handle_s
+00052860: 7562 5f74 7970 655f 616e 645f 7061 7261  ub_type_and_para
+00052870: 6d73 2827 6665 7463 6850 6f73 6974 696f  ms('fetchPositio
+00052880: 6e73 272c 206d 6172 6b65 742c 2070 6172  ns', market, par
+00052890: 616d 732c 2027 6c69 6e65 6172 2729 0a20  ams, 'linear'). 
+000528a0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+000528b0: 6361 7465 676f 7279 275d 203d 2073 7562  category'] = sub
+000528c0: 5479 7065 0a20 2020 2020 2020 2072 6573  Type.        res
+000528d0: 706f 6e73 6520 3d20 7365 6c66 2e70 7269  ponse = self.pri
+000528e0: 7661 7465 4765 7456 3550 6f73 6974 696f  vateGetV5Positio
+000528f0: 6e4c 6973 7428 7365 6c66 2e65 7874 656e  nList(self.exten
+00052900: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
+00052910: 7329 290a 2020 2020 2020 2020 230a 2020  s)).        #.  
+00052920: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
+00052930: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00052940: 2272 6574 436f 6465 223a 2030 2c0a 2020  "retCode": 0,.  
+00052950: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00052960: 2272 6574 4d73 6722 3a20 224f 4b22 2c0a  "retMsg": "OK",.
+00052970: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00052980: 2020 2272 6573 756c 7422 3a20 7b0a 2020    "result": {.  
+00052990: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000529a0: 2020 2020 226e 6578 7450 6167 6543 7572      "nextPageCur
+000529b0: 736f 7222 3a20 2275 7064 6174 6541 7425  sor": "updateAt%
+000529c0: 3344 3136 3732 3237 3933 3232 3636 3822  3D1672279322668"
+000529d0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000529e0: 2020 2020 2020 2020 2263 6174 6567 6f72          "categor
+000529f0: 7922 3a20 226c 696e 6561 7222 2c0a 2020  y": "linear",.  
+00052a00: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00052a10: 2020 2020 226c 6973 7422 3a20 5b0a 2020      "list": [.  
+00052a20: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00052a30: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+00052a40: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00052a50: 2020 2020 2020 2020 2273 796d 626f 6c22          "symbol"
+00052a60: 3a20 2258 5250 5553 4454 222c 0a20 2020  : "XRPUSDT",.   
+00052a70: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00052a80: 2020 2020 2020 2020 2020 2022 6c65 7665             "leve
+00052a90: 7261 6765 223a 2022 3130 222c 0a20 2020  rage": "10",.   
+00052aa0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00052ab0: 2020 2020 2020 2020 2020 2022 6176 6750             "avgP
+00052ac0: 7269 6365 223a 2022 302e 3336 3135 222c  rice": "0.3615",
+00052ad0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00052ae0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00052af0: 6c69 7150 7269 6365 223a 2022 302e 3030  liqPrice": "0.00
+00052b00: 3031 222c 0a20 2020 2020 2020 2023 2020  01",.        #  
+00052b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00052b20: 2020 2022 7269 736b 4c69 6d69 7456 616c     "riskLimitVal
+00052b30: 7565 223a 2022 3230 3030 3030 222c 0a20  ue": "200000",. 
+00052b40: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00052b50: 2020 2020 2020 2020 2020 2020 2022 7461               "ta
+00052b60: 6b65 5072 6f66 6974 223a 2022 222c 0a20  keProfit": "",. 
+00052b70: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00052b80: 2020 2020 2020 2020 2020 2020 2022 706f               "po
+00052b90: 7369 7469 6f6e 5661 6c75 6522 3a20 2233  sitionValue": "3
+00052ba0: 362e 3135 222c 0a20 2020 2020 2020 2023  6.15",.        #
+00052bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00052bc0: 2020 2020 2022 7470 736c 4d6f 6465 223a       "tpslMode":
+00052bd0: 2022 4675 6c6c 222c 0a20 2020 2020 2020   "Full",.       
+00052be0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00052bf0: 2020 2020 2020 2022 7269 736b 4964 223a         "riskId":
+00052c00: 2034 312c 0a20 2020 2020 2020 2023 2020   41,.        #  
+00052c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00052c20: 2020 2022 7472 6169 6c69 6e67 5374 6f70     "trailingStop
+00052c30: 223a 2022 3022 2c0a 2020 2020 2020 2020  ": "0",.        
+00052c40: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00052c50: 2020 2020 2020 2275 6e72 6561 6c69 7365        "unrealise
+00052c60: 6450 6e6c 223a 2022 2d31 2e38 3322 2c0a  dPnl": "-1.83",.
+00052c70: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00052c80: 2020 2020 2020 2020 2020 2020 2020 226d                "m
+00052c90: 6172 6b50 7269 6365 223a 2022 302e 3334  arkPrice": "0.34
+00052ca0: 3332 222c 0a20 2020 2020 2020 2023 2020  32",.        #  
+00052cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00052cc0: 2020 2022 6375 6d52 6561 6c69 7365 6450     "cumRealisedP
+00052cd0: 6e6c 223a 2022 302e 3438 3830 3538 3736  nl": "0.48805876
+00052ce0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00052cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00052d00: 2022 706f 7369 7469 6f6e 4d4d 223a 2022   "positionMM": "
+00052d10: 302e 3338 3130 3231 222c 0a20 2020 2020  0.381021",.     
+00052d20: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00052d30: 2020 2020 2020 2020 2022 6372 6561 7465           "create
+00052d40: 6454 696d 6522 3a20 2231 3637 3231 3231  dTime": "1672121
+00052d50: 3138 3232 3136 222c 0a20 2020 2020 2020  182216",.       
+00052d60: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00052d70: 2020 2020 2020 2022 706f 7369 7469 6f6e         "position
+00052d80: 4964 7822 3a20 302c 0a20 2020 2020 2020  Idx": 0,.       
+00052d90: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00052da0: 2020 2020 2020 2022 706f 7369 7469 6f6e         "position
+00052db0: 494d 223a 2022 332e 3633 3435 3231 222c  IM": "3.634521",
+00052dc0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00052dd0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00052de0: 7570 6461 7465 6454 696d 6522 3a20 2231  updatedTime": "1
+00052df0: 3637 3232 3739 3332 3236 3638 222c 0a20  672279322668",. 
+00052e00: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00052e10: 2020 2020 2020 2020 2020 2020 2022 7369               "si
+00052e20: 6465 223a 2022 4275 7922 2c0a 2020 2020  de": "Buy",.    
+00052e30: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00052e40: 2020 2020 2020 2020 2020 2262 7573 7450            "bustP
+00052e50: 7269 6365 223a 2022 222c 0a20 2020 2020  rice": "",.     
+00052e60: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00052e70: 2020 2020 2020 2020 2022 7369 7a65 223a           "size":
+00052e80: 2022 3130 3022 2c0a 2020 2020 2020 2020   "100",.        
+00052e90: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00052ea0: 2020 2020 2020 2270 6f73 6974 696f 6e53        "positionS
+00052eb0: 7461 7475 7322 3a20 224e 6f72 6d61 6c22  tatus": "Normal"
+00052ec0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00052ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00052ee0: 2273 746f 704c 6f73 7322 3a20 2222 2c0a  "stopLoss": "",.
+00052ef0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00052f00: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+00052f10: 7261 6465 4d6f 6465 223a 2030 0a20 2020  radeMode": 0.   
+00052f20: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00052f30: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+00052f40: 2023 2020 2020 2020 2020 2020 2020 205d   #             ]
+00052f50: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00052f60: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
+00052f70: 2020 2020 2020 2020 2272 6574 4578 7449          "retExtI
+00052f80: 6e66 6f22 3a20 7b7d 2c0a 2020 2020 2020  nfo": {},.      
+00052f90: 2020 2320 2020 2020 2020 2020 2274 696d    #         "tim
+00052fa0: 6522 3a20 3136 3732 3238 3032 3139 3136  e": 167228021916
+00052fb0: 390a 2020 2020 2020 2020 2320 2020 2020  9.        #     
+00052fc0: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
+00052fd0: 2020 2020 7265 7375 6c74 203d 2073 656c      result = sel
+00052fe0: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
+00052ff0: 706f 6e73 652c 2027 7265 7375 6c74 272c  ponse, 'result',
+00053000: 207b 7d29 0a20 2020 2020 2020 2070 6f73   {}).        pos
+00053010: 6974 696f 6e73 203d 2073 656c 662e 7361  itions = self.sa
+00053020: 6665 5f76 616c 7565 2872 6573 756c 742c  fe_value(result,
+00053030: 2027 6c69 7374 272c 205b 5d29 0a20 2020   'list', []).   
+00053040: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00053050: 2e70 6172 7365 5f70 6f73 6974 696f 6e73  .parse_positions
+00053060: 2870 6f73 6974 696f 6e73 2c20 7379 6d62  (positions, symb
+00053070: 6f6c 732c 2070 6172 616d 7329 0a0a 2020  ols, params)..  
+00053080: 2020 6465 6620 6665 7463 685f 706f 7369    def fetch_posi
+00053090: 7469 6f6e 7328 7365 6c66 2c20 7379 6d62  tions(self, symb
+000530a0: 6f6c 733a 204f 7074 696f 6e61 6c5b 4c69  ols: Optional[Li
+000530b0: 7374 5b73 7472 5d5d 203d 204e 6f6e 652c  st[str]] = None,
+000530c0: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
+000530d0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+000530e0: 2066 6574 6368 2061 6c6c 206f 7065 6e20   fetch all open 
+000530f0: 706f 7369 7469 6f6e 730a 2020 2020 2020  positions.      
+00053100: 2020 3a70 6172 616d 205b 7374 725d 7c4e    :param [str]|N
+00053110: 6f6e 6520 7379 6d62 6f6c 733a 206c 6973  one symbols: lis
+00053120: 7420 6f66 2075 6e69 6669 6564 206d 6172  t of unified mar
+00053130: 6b65 7420 7379 6d62 6f6c 730a 2020 2020  ket symbols.    
+00053140: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
+00053150: 7061 7261 6d73 3a20 6578 7472 6120 7061  params: extra pa
+00053160: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
+00053170: 6320 746f 2074 6865 2062 7962 6974 2061  c to the bybit a
+00053180: 7069 2065 6e64 706f 696e 740a 2020 2020  pi endpoint.    
+00053190: 2020 2020 3a72 6574 7572 6e73 205b 6469      :returns [di
+000531a0: 6374 5d3a 2061 206c 6973 7420 6f66 2060  ct]: a list of `
+000531b0: 706f 7369 7469 6f6e 2073 7472 7563 7475  position structu
+000531c0: 7265 203c 6874 7470 733a 2f2f 646f 6373  re <https://docs
+000531d0: 2e63 6378 742e 636f 6d2f 232f 3f69 643d  .ccxt.com/#/?id=
+000531e0: 706f 7369 7469 6f6e 2d73 7472 7563 7475  position-structu
+000531f0: 7265 3e60 0a20 2020 2020 2020 2022 2222  re>`.        """
+00053200: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
+00053210: 7374 616e 6365 2873 796d 626f 6c73 2c20  stance(symbols, 
+00053220: 6c69 7374 293a 0a20 2020 2020 2020 2020  list):.         
+00053230: 2020 2073 796d 626f 6c73 4c65 6e67 7468     symbolsLength
+00053240: 203d 206c 656e 2873 796d 626f 6c73 290a   = len(symbols).
+00053250: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+00053260: 796d 626f 6c73 4c65 6e67 7468 203e 2031  ymbolsLength > 1
+00053270: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00053280: 2020 7261 6973 6520 4172 6775 6d65 6e74    raise Argument
+00053290: 7352 6571 7569 7265 6428 7365 6c66 2e69  sRequired(self.i
+000532a0: 6420 2b20 2720 6665 7463 6850 6f73 6974  d + ' fetchPosit
+000532b0: 696f 6e73 2829 2064 6f65 7320 6e6f 7420  ions() does not 
+000532c0: 6163 6365 7074 2061 6e20 6172 7261 7920  accept an array 
+000532d0: 7769 7468 206d 6f72 6520 7468 616e 206f  with more than o
+000532e0: 6e65 2073 796d 626f 6c27 290a 2020 2020  ne symbol').    
+000532f0: 2020 2020 656c 6966 2073 796d 626f 6c73      elif symbols
+00053300: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00053310: 2020 2020 2020 2020 2020 7379 6d62 6f6c            symbol
+00053320: 7320 3d20 5b73 796d 626f 6c73 5d0a 2020  s = [symbols].  
+00053330: 2020 2020 2020 7365 6c66 2e6c 6f61 645f        self.load_
+00053340: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
+00053350: 2020 7379 6d62 6f6c 7320 3d20 7365 6c66    symbols = self
+00053360: 2e6d 6172 6b65 745f 7379 6d62 6f6c 7328  .market_symbols(
+00053370: 7379 6d62 6f6c 7329 0a20 2020 2020 2020  symbols).       
+00053380: 2065 6e61 626c 6555 6e69 6669 6564 4d61   enableUnifiedMa
+00053390: 7267 696e 2c20 656e 6162 6c65 556e 6966  rgin, enableUnif
+000533a0: 6965 6441 6363 6f75 6e74 203d 2073 656c  iedAccount = sel
+000533b0: 662e 6973 5f75 6e69 6669 6564 5f65 6e61  f.is_unified_ena
+000533c0: 626c 6564 2829 0a20 2020 2020 2020 2073  bled().        s
+000533d0: 6574 746c 6520 3d20 7365 6c66 2e73 6166  ettle = self.saf
+000533e0: 655f 7374 7269 6e67 2870 6172 616d 732c  e_string(params,
+000533f0: 2027 7365 7474 6c65 436f 696e 2729 0a20   'settleCoin'). 
+00053400: 2020 2020 2020 2070 6172 616d 734f 6d69         paramsOmi
+00053410: 7474 6564 203d 204e 6f6e 650a 2020 2020  tted = None.    
+00053420: 2020 2020 6966 2073 6574 746c 6520 6973      if settle is
+00053430: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00053440: 2020 2073 6574 746c 652c 2070 6172 616d     settle, param
+00053450: 734f 6d69 7474 6564 203d 2073 656c 662e  sOmitted = self.
+00053460: 6861 6e64 6c65 5f6f 7074 696f 6e5f 616e  handle_option_an
+00053470: 645f 7061 7261 6d73 2870 6172 616d 732c  d_params(params,
+00053480: 2027 6665 7463 6850 6f73 6974 696f 6e73   'fetchPositions
+00053490: 272c 2027 7365 7474 6c65 272c 2073 6574  ', 'settle', set
+000534a0: 746c 6529 0a20 2020 2020 2020 2069 7355  tle).        isU
+000534b0: 7364 6353 6574 746c 6564 203d 2073 6574  sdcSettled = set
+000534c0: 746c 6520 3d3d 2027 5553 4443 270a 2020  tle == 'USDC'.  
+000534d0: 2020 2020 2020 7375 6254 7970 6520 3d20        subType = 
+000534e0: 4e6f 6e65 0a20 2020 2020 2020 2073 7562  None.        sub
+000534f0: 5479 7065 2c20 7061 7261 6d73 4f6d 6974  Type, paramsOmit
+00053500: 7465 6420 3d20 7365 6c66 2e68 616e 646c  ted = self.handl
+00053510: 655f 7375 625f 7479 7065 5f61 6e64 5f70  e_sub_type_and_p
+00053520: 6172 616d 7328 2766 6574 6368 506f 7369  arams('fetchPosi
+00053530: 7469 6f6e 7327 2c20 4e6f 6e65 2c20 7061  tions', None, pa
+00053540: 7261 6d73 4f6d 6974 7465 6429 0a20 2020  ramsOmitted).   
+00053550: 2020 2020 2069 7349 6e76 6572 7365 203d       isInverse =
+00053560: 2073 7562 5479 7065 203d 3d20 2769 6e76   subType == 'inv
+00053570: 6572 7365 270a 2020 2020 2020 2020 6973  erse'.        is
+00053580: 4c69 6e65 6172 5365 7474 6c65 203d 2069  LinearSettle = i
+00053590: 7355 7364 6353 6574 746c 6564 206f 7220  sUsdcSettled or 
+000535a0: 2873 6574 746c 6520 3d3d 2027 5553 4454  (settle == 'USDT
+000535b0: 2729 0a20 2020 2020 2020 2069 6620 6973  ').        if is
+000535c0: 496e 7665 7273 6520 616e 6420 6973 4c69  Inverse and isLi
+000535d0: 6e65 6172 5365 7474 6c65 3a0a 2020 2020  nearSettle:.    
+000535e0: 2020 2020 2020 2020 7261 6973 6520 4172          raise Ar
+000535f0: 6775 6d65 6e74 7352 6571 7569 7265 6428  gumentsRequired(
+00053600: 7365 6c66 2e69 6420 2b20 2720 6665 7463  self.id + ' fetc
+00053610: 6850 6f73 6974 696f 6e73 2077 6974 6820  hPositions with 
+00053620: 696e 7665 7273 6520 7375 6254 7970 6520  inverse subType 
+00053630: 7265 7175 6972 6573 2073 6574 746c 6520  requires settle 
+00053640: 746f 206e 6f74 2062 6520 5553 4454 206f  to not be USDT o
+00053650: 7220 5553 4443 2729 0a20 2020 2020 2020  r USDC').       
+00053660: 2069 6620 2865 6e61 626c 6555 6e69 6669   if (enableUnifi
+00053670: 6564 4d61 7267 696e 206f 7220 656e 6162  edMargin or enab
+00053680: 6c65 556e 6966 6965 6441 6363 6f75 6e74  leUnifiedAccount
+00053690: 2920 616e 6420 6e6f 7420 6973 496e 7665  ) and not isInve
+000536a0: 7273 653a 0a20 2020 2020 2020 2020 2020  rse:.           
+000536b0: 2072 6574 7572 6e20 7365 6c66 2e66 6574   return self.fet
+000536c0: 6368 5f75 6e69 6669 6564 5f70 6f73 6974  ch_unified_posit
+000536d0: 696f 6e73 2873 796d 626f 6c73 2c20 7061  ions(symbols, pa
+000536e0: 7261 6d73 290a 2020 2020 2020 2020 656c  rams).        el
+000536f0: 6966 2069 7355 7364 6353 6574 746c 6564  if isUsdcSettled
+00053700: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00053710: 7475 726e 2073 656c 662e 6665 7463 685f  turn self.fetch_
+00053720: 7573 6463 5f70 6f73 6974 696f 6e73 2873  usdc_positions(s
+00053730: 796d 626f 6c73 2c20 7061 7261 6d73 4f6d  ymbols, paramsOm
+00053740: 6974 7465 6429 0a20 2020 2020 2020 2065  itted).        e
+00053750: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00053760: 2072 6574 7572 6e20 7365 6c66 2e66 6574   return self.fet
+00053770: 6368 5f64 6572 6976 6174 6976 6573 5f70  ch_derivatives_p
+00053780: 6f73 6974 696f 6e73 2873 796d 626f 6c73  ositions(symbols
+00053790: 2c20 7061 7261 6d73 290a 0a20 2020 2064  , params)..    d
+000537a0: 6566 2070 6172 7365 5f70 6f73 6974 696f  ef parse_positio
+000537b0: 6e28 7365 6c66 2c20 706f 7369 7469 6f6e  n(self, position
+000537c0: 2c20 6d61 726b 6574 3d4e 6f6e 6529 3a0a  , market=None):.
+000537d0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+000537e0: 2020 2320 6c69 6e65 6172 2073 7761 700a    # linear swap.
+000537f0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+00053800: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
+00053810: 2020 2320 2020 2020 2020 2020 2270 6f73    #         "pos
+00053820: 6974 696f 6e49 6478 223a 2030 2c0a 2020  itionIdx": 0,.  
+00053830: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00053840: 2272 6973 6b49 6422 3a20 2231 3122 2c0a  "riskId": "11",.
+00053850: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00053860: 2020 2273 796d 626f 6c22 3a20 2245 5448    "symbol": "ETH
+00053870: 5553 4454 222c 0a20 2020 2020 2020 2023  USDT",.        #
+00053880: 2020 2020 2020 2020 2022 7369 6465 223a           "side":
+00053890: 2022 4275 7922 2c0a 2020 2020 2020 2020   "Buy",.        
+000538a0: 2320 2020 2020 2020 2020 2273 697a 6522  #         "size"
+000538b0: 3a20 2230 2e31 3022 2c0a 2020 2020 2020  : "0.10",.      
+000538c0: 2020 2320 2020 2020 2020 2020 2270 6f73    #         "pos
+000538d0: 6974 696f 6e56 616c 7565 223a 2022 3131  itionValue": "11
+000538e0: 392e 3834 3522 2c0a 2020 2020 2020 2020  9.845",.        
+000538f0: 2320 2020 2020 2020 2020 2265 6e74 7279  #         "entry
+00053900: 5072 6963 6522 3a20 2231 3139 382e 3435  Price": "1198.45
+00053910: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00053920: 2020 2020 2022 7472 6164 654d 6f64 6522       "tradeMode"
+00053930: 3a20 312c 0a20 2020 2020 2020 2023 2020  : 1,.        #  
+00053940: 2020 2020 2020 2022 6175 746f 4164 644d         "autoAddM
+00053950: 6172 6769 6e22 3a20 302c 0a20 2020 2020  argin": 0,.     
+00053960: 2020 2023 2020 2020 2020 2020 2022 6c65     #         "le
+00053970: 7665 7261 6765 223a 2022 342e 3222 2c0a  verage": "4.2",.
+00053980: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00053990: 2020 2270 6f73 6974 696f 6e42 616c 616e    "positionBalan
+000539a0: 6365 223a 2022 3238 2e35 3839 3331 3131  ce": "28.5893111
+000539b0: 3822 2c0a 2020 2020 2020 2020 2320 2020  8",.        #   
+000539c0: 2020 2020 2020 226c 6971 5072 6963 6522        "liqPrice"
+000539d0: 3a20 2239 3139 2e31 3022 2c0a 2020 2020  : "919.10",.    
+000539e0: 2020 2020 2320 2020 2020 2020 2020 2262      #         "b
+000539f0: 7573 7450 7269 6365 223a 2022 3931 332e  ustPrice": "913.
+00053a00: 3135 222c 0a20 2020 2020 2020 2023 2020  15",.        #  
+00053a10: 2020 2020 2020 2022 7461 6b65 5072 6f66         "takeProf
+00053a20: 6974 223a 2022 302e 3030 222c 0a20 2020  it": "0.00",.   
+00053a30: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00053a40: 7374 6f70 4c6f 7373 223a 2022 302e 3030  stopLoss": "0.00
+00053a50: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00053a60: 2020 2020 2022 7472 6169 6c69 6e67 5374       "trailingSt
+00053a70: 6f70 223a 2022 302e 3030 222c 0a20 2020  op": "0.00",.   
+00053a80: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00053a90: 756e 7265 616c 6973 6564 506e 6c22 3a20  unrealisedPnl": 
+00053aa0: 2230 2e30 3833 222c 0a20 2020 2020 2020  "0.083",.       
+00053ab0: 2023 2020 2020 2020 2020 2022 6372 6561   #         "crea
+00053ac0: 7465 6454 696d 6522 3a20 2231 3636 3930  tedTime": "16690
+00053ad0: 3937 3234 3431 3932 222c 0a20 2020 2020  97244192",.     
+00053ae0: 2020 2023 2020 2020 2020 2020 2022 7570     #         "up
+00053af0: 6461 7465 6454 696d 6522 3a20 2231 3636  datedTime": "166
+00053b00: 3934 3133 3132 3631 3930 222c 0a20 2020  9413126190",.   
+00053b10: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00053b20: 7470 536c 4d6f 6465 223a 2022 4675 6c6c  tpSlMode": "Full
+00053b30: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00053b40: 2020 2020 2022 7269 736b 4c69 6d69 7456       "riskLimitV
+00053b50: 616c 7565 223a 2022 3930 3030 3030 222c  alue": "900000",
+00053b60: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00053b70: 2020 2022 6163 7469 7665 5072 6963 6522     "activePrice"
+00053b80: 3a20 2230 2e30 3022 0a20 2020 2020 2020  : "0.00".       
+00053b90: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
+00053ba0: 2023 0a20 2020 2020 2020 2023 2075 7364   #.        # usd
+00053bb0: 630a 2020 2020 2020 2020 2320 2020 207b  c.        #    {
+00053bc0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00053bd0: 2022 7379 6d62 6f6c 223a 2242 5443 5045   "symbol":"BTCPE
+00053be0: 5250 222c 0a20 2020 2020 2020 2023 2020  RP",.        #  
+00053bf0: 2020 2020 2022 6c65 7665 7261 6765 223a       "leverage":
+00053c00: 2231 2e30 3022 2c0a 2020 2020 2020 2020  "1.00",.        
+00053c10: 2320 2020 2020 2020 226f 6363 436c 6f73  #       "occClos
+00053c20: 696e 6746 6565 223a 2230 2e30 3030 3022  ingFee":"0.0000"
+00053c30: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00053c40: 2020 226c 6971 5072 6963 6522 3a22 222c    "liqPrice":"",
+00053c50: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00053c60: 2022 706f 7369 7469 6f6e 5661 6c75 6522   "positionValue"
+00053c70: 3a22 3330 2e38 3130 3022 2c0a 2020 2020  :"30.8100",.    
+00053c80: 2020 2020 2320 2020 2020 2020 2274 616b      #       "tak
+00053c90: 6550 726f 6669 7422 3a22 302e 3022 2c0a  eProfit":"0.0",.
+00053ca0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00053cb0: 2272 6973 6b49 6422 3a22 3130 3030 3122  "riskId":"10001"
+00053cc0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00053cd0: 2020 2274 7261 696c 696e 6753 746f 7022    "trailingStop"
+00053ce0: 3a22 302e 3030 3030 222c 0a20 2020 2020  :"0.0000",.     
+00053cf0: 2020 2023 2020 2020 2020 2022 756e 7265     #       "unre
+00053d00: 616c 6973 6564 506e 6c22 3a22 302e 3030  alisedPnl":"0.00
+00053d10: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+00053d20: 2020 2020 2022 6372 6561 7465 6441 7422       "createdAt"
+00053d30: 3a22 3136 3532 3435 3137 3935 3330 3522  :"1652451795305"
+00053d40: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00053d50: 2020 226d 6172 6b50 7269 6365 223a 2233    "markPrice":"3
+00053d60: 3038 3039 2e34 3122 2c0a 2020 2020 2020  0809.41",.      
+00053d70: 2020 2320 2020 2020 2020 2263 756d 5265    #       "cumRe
+00053d80: 616c 6973 6564 506e 6c22 3a22 302e 3030  alisedPnl":"0.00
+00053d90: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+00053da0: 2020 2020 2022 706f 7369 7469 6f6e 4d4d       "positionMM
+00053db0: 223a 2230 2e31 3534 3122 2c0a 2020 2020  ":"0.1541",.    
+00053dc0: 2020 2020 2320 2020 2020 2020 2270 6f73      #       "pos
+00053dd0: 6974 696f 6e49 4d22 3a22 3330 2e38 3130  itionIM":"30.810
+00053de0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00053df0: 2020 2020 2275 7064 6174 6564 4174 223a      "updatedAt":
+00053e00: 2231 3635 3234 3531 3739 3533 3035 222c  "1652451795305",
+00053e10: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00053e20: 2022 7470 534c 4d6f 6465 223a 2255 4e4b   "tpSLMode":"UNK
+00053e30: 4e4f 574e 222c 0a20 2020 2020 2020 2023  NOWN",.        #
+00053e40: 2020 2020 2020 2022 7369 6465 223a 2242         "side":"B
+00053e50: 7579 222c 0a20 2020 2020 2020 2023 2020  uy",.        #  
+00053e60: 2020 2020 2022 6275 7374 5072 6963 6522       "bustPrice"
+00053e70: 3a22 222c 0a20 2020 2020 2020 2023 2020  :"",.        #  
+00053e80: 2020 2020 2022 6465 6c65 7665 7261 6765       "deleverage
+00053e90: 496e 6469 6361 746f 7222 3a22 3022 2c0a  Indicator":"0",.
+00053ea0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00053eb0: 2265 6e74 7279 5072 6963 6522 3a22 3330  "entryPrice":"30
+00053ec0: 3831 302e 3022 2c0a 2020 2020 2020 2020  810.0",.        
+00053ed0: 2320 2020 2020 2020 2273 697a 6522 3a22  #       "size":"
+00053ee0: 302e 3030 3122 2c0a 2020 2020 2020 2020  0.001",.        
+00053ef0: 2320 2020 2020 2020 2273 6573 7369 6f6e  #       "session
+00053f00: 5250 4c22 3a22 302e 3030 3030 222c 0a20  RPL":"0.0000",. 
+00053f10: 2020 2020 2020 2023 2020 2020 2020 2022         #       "
+00053f20: 706f 7369 7469 6f6e 5374 6174 7573 223a  positionStatus":
+00053f30: 224e 4f52 4d41 4c22 2c0a 2020 2020 2020  "NORMAL",.      
+00053f40: 2020 2320 2020 2020 2020 2273 6573 7369    #       "sessi
+00053f50: 6f6e 5550 4c22 3a22 2d30 2e30 3030 3622  onUPL":"-0.0006"
+00053f60: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00053f70: 2020 2273 746f 704c 6f73 7322 3a22 302e    "stopLoss":"0.
+00053f80: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00053f90: 2020 2020 226f 7264 6572 4d61 7267 696e      "orderMargin
+00053fa0: 223a 2230 2e30 3030 3022 2c0a 2020 2020  ":"0.0000",.    
+00053fb0: 2020 2020 2320 2020 2020 2020 2273 6573      #       "ses
+00053fc0: 7369 6f6e 4176 6750 7269 6365 223a 2233  sionAvgPrice":"3
+00053fd0: 3038 3130 2e30 220a 2020 2020 2020 2020  0810.0".        
+00053fe0: 2320 2020 207d 0a20 2020 2020 2020 2023  #    }.        #
+00053ff0: 0a20 2020 2020 2020 2023 2075 6e69 6669  .        # unifi
+00054000: 6564 206d 6172 6769 6e0a 2020 2020 2020  ed margin.      
+00054010: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
+00054020: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+00054030: 2020 2020 2020 2273 796d 626f 6c22 3a20        "symbol": 
+00054040: 2245 5448 5553 4454 222c 0a20 2020 2020  "ETHUSDT",.     
+00054050: 2020 2023 2020 2020 2020 2020 2022 6c65     #         "le
+00054060: 7665 7261 6765 223a 2022 3130 222c 0a20  verage": "10",. 
+00054070: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00054080: 2022 7570 6461 7465 6454 696d 6522 3a20   "updatedTime": 
+00054090: 3136 3537 3731 3139 3439 3934 352c 0a20  1657711949945,. 
+000540a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000540b0: 2022 7369 6465 223a 2022 4275 7922 2c0a   "side": "Buy",.
+000540c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000540d0: 2020 2270 6f73 6974 696f 6e56 616c 7565    "positionValue
+000540e0: 223a 2022 3533 362e 3932 3530 3030 3030  ": "536.92500000
+000540f0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00054100: 2020 2020 2022 7461 6b65 5072 6f66 6974       "takeProfit
+00054110: 223a 2022 222c 0a20 2020 2020 2020 2023  ": "",.        #
+00054120: 2020 2020 2020 2020 2022 7470 736c 4d6f           "tpslMo
+00054130: 6465 223a 2022 4675 6c6c 222c 0a20 2020  de": "Full",.   
+00054140: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00054150: 7269 736b 4964 223a 2031 312c 0a20 2020  riskId": 11,.   
+00054160: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00054170: 7472 6169 6c69 6e67 5374 6f70 223a 2022  trailingStop": "
+00054180: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00054190: 2020 2020 2022 656e 7472 7950 7269 6365       "entryPrice
+000541a0: 223a 2022 3130 3733 2e38 3530 3030 3030  ": "1073.8500000
+000541b0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+000541c0: 2020 2020 2020 2275 6e72 6561 6c69 7365        "unrealise
+000541d0: 6450 6e6c 223a 2022 222c 0a20 2020 2020  dPnl": "",.     
+000541e0: 2020 2023 2020 2020 2020 2020 2022 6d61     #         "ma
+000541f0: 726b 5072 6963 6522 3a20 2231 3038 302e  rkPrice": "1080.
+00054200: 3635 3030 3030 3030 222c 0a20 2020 2020  65000000",.     
+00054210: 2020 2023 2020 2020 2020 2020 2022 7369     #         "si
+00054220: 7a65 223a 2022 302e 3530 3030 222c 0a20  ze": "0.5000",. 
+00054230: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00054240: 2022 706f 7369 7469 6f6e 5374 6174 7573   "positionStatus
+00054250: 223a 2022 6e6f 726d 616c 222c 0a20 2020  ": "normal",.   
 00054260: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00054270: 7369 7a65 223a 2022 3130 3022 2c0a 2020  size": "100",.  
-00054280: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00054290: 2270 6f73 6974 696f 6e53 7461 7475 7322  "positionStatus"
-000542a0: 3a20 224e 6f72 6d61 6c22 2c0a 2020 2020  : "Normal",.    
-000542b0: 2020 2020 2320 2020 2020 2020 2020 2273      #         "s
-000542c0: 746f 704c 6f73 7322 3a20 2222 2c0a 2020  topLoss": "",.  
-000542d0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000542e0: 2274 7261 6465 4d6f 6465 223a 2030 0a20  "tradeMode": 0. 
-000542f0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
-00054300: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-00054310: 2063 6f6e 7472 6163 7420 3d20 7365 6c66   contract = self
-00054320: 2e73 6166 655f 7374 7269 6e67 2870 6f73  .safe_string(pos
-00054330: 6974 696f 6e2c 2027 7379 6d62 6f6c 2729  ition, 'symbol')
-00054340: 0a20 2020 2020 2020 206d 6172 6b65 7420  .        market 
-00054350: 3d20 7365 6c66 2e73 6166 655f 6d61 726b  = self.safe_mark
-00054360: 6574 2863 6f6e 7472 6163 742c 206d 6172  et(contract, mar
-00054370: 6b65 742c 204e 6f6e 652c 2027 636f 6e74  ket, None, 'cont
-00054380: 7261 6374 2729 0a20 2020 2020 2020 2073  ract').        s
-00054390: 697a 6520 3d20 5072 6563 6973 652e 7374  ize = Precise.st
-000543a0: 7269 6e67 5f61 6273 2873 656c 662e 7361  ring_abs(self.sa
-000543b0: 6665 5f73 7472 696e 6728 706f 7369 7469  fe_string(positi
-000543c0: 6f6e 2c20 2773 697a 6527 2929 0a20 2020  on, 'size')).   
-000543d0: 2020 2020 2073 6964 6520 3d20 7365 6c66       side = self
-000543e0: 2e73 6166 655f 7374 7269 6e67 2870 6f73  .safe_string(pos
-000543f0: 6974 696f 6e2c 2027 7369 6465 2729 0a20  ition, 'side'). 
-00054400: 2020 2020 2020 2069 6620 7369 6465 2069         if side i
-00054410: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00054420: 2020 2020 2020 2020 6966 2073 6964 6520          if side 
-00054430: 3d3d 2027 4275 7927 3a0a 2020 2020 2020  == 'Buy':.      
-00054440: 2020 2020 2020 2020 2020 7369 6465 203d            side =
-00054450: 2027 6c6f 6e67 270a 2020 2020 2020 2020   'long'.        
-00054460: 2020 2020 656c 6966 2073 6964 6520 3d3d      elif side ==
-00054470: 2027 5365 6c6c 273a 0a20 2020 2020 2020   'Sell':.       
-00054480: 2020 2020 2020 2020 2073 6964 6520 3d20           side = 
-00054490: 2773 686f 7274 270a 2020 2020 2020 2020  'short'.        
-000544a0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-000544b0: 2020 2020 2020 2020 2020 7369 6465 203d            side =
-000544c0: 204e 6f6e 650a 2020 2020 2020 2020 6e6f   None.        no
-000544d0: 7469 6f6e 616c 203d 2073 656c 662e 7361  tional = self.sa
-000544e0: 6665 5f73 7472 696e 6728 706f 7369 7469  fe_string(positi
-000544f0: 6f6e 2c20 2770 6f73 6974 696f 6e56 616c  on, 'positionVal
-00054500: 7565 2729 0a20 2020 2020 2020 2075 6e72  ue').        unr
-00054510: 6561 6c69 7365 6450 6e6c 203d 2073 656c  ealisedPnl = sel
-00054520: 662e 6f6d 6974 5f7a 6572 6f28 7365 6c66  f.omit_zero(self
-00054530: 2e73 6166 655f 7374 7269 6e67 2870 6f73  .safe_string(pos
-00054540: 6974 696f 6e2c 2027 756e 7265 616c 6973  ition, 'unrealis
-00054550: 6564 506e 6c27 2929 0a20 2020 2020 2020  edPnl')).       
-00054560: 2069 6e69 7469 616c 4d61 7267 696e 5374   initialMarginSt
-00054570: 7269 6e67 203d 2073 656c 662e 7361 6665  ring = self.safe
-00054580: 5f73 7472 696e 6728 706f 7369 7469 6f6e  _string(position
-00054590: 2c20 2770 6f73 6974 696f 6e49 4d27 290a  , 'positionIM').
-000545a0: 2020 2020 2020 2020 6d61 696e 7465 6e61          maintena
-000545b0: 6e63 654d 6172 6769 6e53 7472 696e 6720  nceMarginString 
-000545c0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-000545d0: 6e67 2870 6f73 6974 696f 6e2c 2027 706f  ng(position, 'po
-000545e0: 7369 7469 6f6e 4d4d 2729 0a20 2020 2020  sitionMM').     
-000545f0: 2020 2074 696d 6573 7461 6d70 203d 2073     timestamp = s
-00054600: 656c 662e 7061 7273 6538 3630 3128 7365  elf.parse8601(se
-00054610: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
-00054620: 6f73 6974 696f 6e2c 2027 7570 6461 7465  osition, 'update
-00054630: 645f 6174 2729 290a 2020 2020 2020 2020  d_at')).        
-00054640: 6966 2074 696d 6573 7461 6d70 2069 7320  if timestamp is 
-00054650: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-00054660: 2020 7469 6d65 7374 616d 7020 3d20 7365    timestamp = se
-00054670: 6c66 2e73 6166 655f 696e 7465 6765 725f  lf.safe_integer_
-00054680: 6e28 706f 7369 7469 6f6e 2c20 5b27 7570  n(position, ['up
-00054690: 6461 7465 6454 696d 6527 2c20 2775 7064  datedTime', 'upd
-000546a0: 6174 6564 4174 275d 290a 2020 2020 2020  atedAt']).      
-000546b0: 2020 2320 6465 6661 756c 7420 746f 2063    # default to c
-000546c0: 726f 7373 206f 6620 5553 4443 206d 6172  ross of USDC mar
-000546d0: 6769 6e65 6420 706f 7369 7469 6f6e 730a  gined positions.
-000546e0: 2020 2020 2020 2020 7472 6164 654d 6f64          tradeMod
-000546f0: 6520 3d20 7365 6c66 2e73 6166 655f 696e  e = self.safe_in
-00054700: 7465 6765 7228 706f 7369 7469 6f6e 2c20  teger(position, 
-00054710: 2774 7261 6465 4d6f 6465 272c 2030 290a  'tradeMode', 0).
-00054720: 2020 2020 2020 2020 6d61 7267 696e 4d6f          marginMo
-00054730: 6465 203d 2027 6973 6f6c 6174 6564 2720  de = 'isolated' 
-00054740: 6966 2074 7261 6465 4d6f 6465 2065 6c73  if tradeMode els
-00054750: 6520 2763 726f 7373 270a 2020 2020 2020  e 'cross'.      
-00054760: 2020 636f 6c6c 6174 6572 616c 5374 7269    collateralStri
-00054770: 6e67 203d 2073 656c 662e 7361 6665 5f73  ng = self.safe_s
-00054780: 7472 696e 6728 706f 7369 7469 6f6e 2c20  tring(position, 
-00054790: 2770 6f73 6974 696f 6e42 616c 616e 6365  'positionBalance
-000547a0: 2729 0a20 2020 2020 2020 2065 6e74 7279  ').        entry
-000547b0: 5072 6963 6520 3d20 7365 6c66 2e6f 6d69  Price = self.omi
-000547c0: 745f 7a65 726f 2873 656c 662e 7361 6665  t_zero(self.safe
-000547d0: 5f73 7472 696e 675f 3228 706f 7369 7469  _string_2(positi
-000547e0: 6f6e 2c20 2765 6e74 7279 5072 6963 6527  on, 'entryPrice'
-000547f0: 2c20 2761 7667 5072 6963 6527 2929 0a20  , 'avgPrice')). 
-00054800: 2020 2020 2020 206c 6971 7569 6461 7469         liquidati
-00054810: 6f6e 5072 6963 6520 3d20 7365 6c66 2e6f  onPrice = self.o
-00054820: 6d69 745f 7a65 726f 2873 656c 662e 7361  mit_zero(self.sa
-00054830: 6665 5f73 7472 696e 6728 706f 7369 7469  fe_string(positi
-00054840: 6f6e 2c20 276c 6971 5072 6963 6527 2929  on, 'liqPrice'))
-00054850: 0a20 2020 2020 2020 206c 6576 6572 6167  .        leverag
-00054860: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
-00054870: 7269 6e67 2870 6f73 6974 696f 6e2c 2027  ring(position, '
-00054880: 6c65 7665 7261 6765 2729 0a20 2020 2020  leverage').     
-00054890: 2020 2069 6620 6c69 7175 6964 6174 696f     if liquidatio
-000548a0: 6e50 7269 6365 2069 7320 6e6f 7420 4e6f  nPrice is not No
-000548b0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-000548c0: 6966 206d 6172 6b65 745b 2773 6574 746c  if market['settl
-000548d0: 6527 5d20 3d3d 2027 5553 4443 273a 0a20  e'] == 'USDC':. 
-000548e0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-000548f0: 2020 2845 6e74 7279 2070 7269 6365 202d    (Entry price -
-00054900: 204c 6971 2070 7269 6365 2920 2a20 436f   Liq price) * Co
-00054910: 6e74 7261 6374 7320 2b20 4d61 696e 7465  ntracts + Mainte
-00054920: 6e61 6e63 6520 4d61 7267 696e 202b 2028  nance Margin + (
-00054930: 756e 7265 616c 6973 6564 2070 6e6c 2920  unrealised pnl) 
-00054940: 3d20 436f 6c6c 6174 6572 616c 0a20 2020  = Collateral.   
-00054950: 2020 2020 2020 2020 2020 2020 2064 6966               dif
-00054960: 6665 7265 6e63 6520 3d20 5072 6563 6973  ference = Precis
-00054970: 652e 7374 7269 6e67 5f61 6273 2850 7265  e.string_abs(Pre
-00054980: 6369 7365 2e73 7472 696e 675f 7375 6228  cise.string_sub(
-00054990: 656e 7472 7950 7269 6365 2c20 6c69 7175  entryPrice, liqu
-000549a0: 6964 6174 696f 6e50 7269 6365 2929 0a20  idationPrice)). 
-000549b0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-000549c0: 6f6c 6c61 7465 7261 6c53 7472 696e 6720  ollateralString 
-000549d0: 3d20 5072 6563 6973 652e 7374 7269 6e67  = Precise.string
-000549e0: 5f61 6464 2850 7265 6369 7365 2e73 7472  _add(Precise.str
-000549f0: 696e 675f 6164 6428 5072 6563 6973 652e  ing_add(Precise.
-00054a00: 7374 7269 6e67 5f6d 756c 2864 6966 6665  string_mul(diffe
-00054a10: 7265 6e63 652c 2073 697a 6529 2c20 6d61  rence, size), ma
-00054a20: 696e 7465 6e61 6e63 654d 6172 6769 6e53  intenanceMarginS
-00054a30: 7472 696e 6729 2c20 756e 7265 616c 6973  tring), unrealis
-00054a40: 6564 506e 6c29 0a20 2020 2020 2020 2020  edPnl).         
-00054a50: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00054a60: 2020 2020 2020 2020 2062 7573 7450 7269           bustPri
-00054a70: 6365 203d 2073 656c 662e 7361 6665 5f73  ce = self.safe_s
-00054a80: 7472 696e 6728 706f 7369 7469 6f6e 2c20  tring(position, 
-00054a90: 2762 7573 7450 7269 6365 2729 0a20 2020  'bustPrice').   
-00054aa0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00054ab0: 6d61 726b 6574 5b27 6c69 6e65 6172 275d  market['linear']
-00054ac0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00054ad0: 2020 2020 2020 2320 6465 7269 7665 6420        # derived 
-00054ae0: 6672 6f6d 2074 6865 2066 6f6c 6c6f 7769  from the followi
-00054af0: 6e67 2066 6f72 6d75 6c61 730a 2020 2020  ng formulas.    
-00054b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00054b10: 2320 2028 456e 7472 7920 7072 6963 6520  #  (Entry price 
-00054b20: 2d20 4275 7374 2070 7269 6365 2920 2a20  - Bust price) * 
-00054b30: 436f 6e74 7261 6374 7320 3d20 436f 6c6c  Contracts = Coll
-00054b40: 6174 6572 616c 0a20 2020 2020 2020 2020  ateral.         
-00054b50: 2020 2020 2020 2020 2020 2023 2020 2845             #  (E
-00054b60: 6e74 7279 2070 7269 6365 202d 204c 6971  ntry price - Liq
-00054b70: 2070 7269 6365 2920 2a20 436f 6e74 7261   price) * Contra
-00054b80: 6374 7320 3d20 436f 6c6c 6174 6572 616c  cts = Collateral
-00054b90: 202d 204d 6169 6e74 656e 616e 6365 204d   - Maintenance M
-00054ba0: 6172 6769 6e0a 2020 2020 2020 2020 2020  argin.          
-00054bb0: 2020 2020 2020 2020 2020 2320 4d61 696e            # Main
-00054bc0: 7465 6e61 6e63 6520 4d61 7267 696e 203d  tenance Margin =
-00054bd0: 2028 4275 7374 2070 7269 6365 202d 204c   (Bust price - L
-00054be0: 6971 2070 7269 6365 2920 7820 436f 6e74  iq price) x Cont
-00054bf0: 7261 6374 730a 2020 2020 2020 2020 2020  racts.          
-00054c00: 2020 2020 2020 2020 2020 6d61 696e 7465            mainte
-00054c10: 6e61 6e63 654d 6172 6769 6e50 7269 6365  nanceMarginPrice
-00054c20: 4469 6666 6572 656e 6365 203d 2050 7265  Difference = Pre
-00054c30: 6369 7365 2e73 7472 696e 675f 6162 7328  cise.string_abs(
-00054c40: 5072 6563 6973 652e 7374 7269 6e67 5f73  Precise.string_s
-00054c50: 7562 286c 6971 7569 6461 7469 6f6e 5072  ub(liquidationPr
-00054c60: 6963 652c 2062 7573 7450 7269 6365 2929  ice, bustPrice))
-00054c70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00054c80: 2020 2020 206d 6169 6e74 656e 616e 6365       maintenance
-00054c90: 4d61 7267 696e 5374 7269 6e67 203d 2050  MarginString = P
-00054ca0: 7265 6369 7365 2e73 7472 696e 675f 6d75  recise.string_mu
-00054cb0: 6c28 6d61 696e 7465 6e61 6e63 654d 6172  l(maintenanceMar
-00054cc0: 6769 6e50 7269 6365 4469 6666 6572 656e  ginPriceDifferen
-00054cd0: 6365 2c20 7369 7a65 290a 2020 2020 2020  ce, size).      
-00054ce0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00054cf0: 496e 6974 6961 6c20 4d61 7267 696e 203d  Initial Margin =
-00054d00: 2043 6f6e 7472 6163 7473 2078 2045 6e74   Contracts x Ent
-00054d10: 7279 2050 7269 6365 202f 204c 6576 6572  ry Price / Lever
-00054d20: 6167 650a 2020 2020 2020 2020 2020 2020  age.            
-00054d30: 2020 2020 2020 2020 6966 2065 6e74 7279          if entry
-00054d40: 5072 6963 6520 6973 206e 6f74 204e 6f6e  Price is not Non
-00054d50: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00054d60: 2020 2020 2020 2020 2020 2069 6e69 7469             initi
-00054d70: 616c 4d61 7267 696e 5374 7269 6e67 203d  alMarginString =
-00054d80: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
-00054d90: 6469 7628 5072 6563 6973 652e 7374 7269  div(Precise.stri
-00054da0: 6e67 5f6d 756c 2873 697a 652c 2065 6e74  ng_mul(size, ent
-00054db0: 7279 5072 6963 6529 2c20 6c65 7665 7261  ryPrice), levera
-00054dc0: 6765 290a 2020 2020 2020 2020 2020 2020  ge).            
-00054dd0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00054de0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00054df0: 436f 6e74 7261 6374 7320 2a20 2831 202f  Contracts * (1 /
-00054e00: 2045 6e74 7279 2070 7269 6365 202d 2031   Entry price - 1
-00054e10: 202f 2042 7573 7420 7072 6963 6529 203d   / Bust price) =
-00054e20: 2043 6f6c 6c61 7465 7261 6c0a 2020 2020   Collateral.    
-00054e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00054e40: 2320 436f 6e74 7261 6374 7320 2a20 2831  # Contracts * (1
-00054e50: 202f 2045 6e74 7279 2070 7269 6365 202d   / Entry price -
-00054e60: 2031 202f 204c 6971 2070 7269 6365 2920   1 / Liq price) 
-00054e70: 3d20 436f 6c6c 6174 6572 616c 202d 204d  = Collateral - M
-00054e80: 6169 6e74 656e 616e 6365 204d 6172 6769  aintenance Margi
-00054e90: 6e0a 2020 2020 2020 2020 2020 2020 2020  n.              
-00054ea0: 2020 2020 2020 2320 4d61 696e 7465 6e61        # Maintena
-00054eb0: 6e63 6520 4d61 7267 696e 203d 2043 6f6e  nce Margin = Con
-00054ec0: 7472 6163 7473 202a 2028 3120 2f20 4c69  tracts * (1 / Li
-00054ed0: 7120 7072 6963 6520 2d20 3120 2f20 4275  q price - 1 / Bu
-00054ee0: 7374 2070 7269 6365 290a 2020 2020 2020  st price).      
-00054ef0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00054f00: 4d61 696e 7465 6e61 6e63 6520 4d61 7267  Maintenance Marg
-00054f10: 696e 203d 2043 6f6e 7472 6163 7473 202a  in = Contracts *
-00054f20: 2028 4275 7374 2070 7269 6365 202d 204c   (Bust price - L
-00054f30: 6971 2070 7269 6365 2920 2f20 284c 6971  iq price) / (Liq
-00054f40: 2070 7269 6365 2078 2042 7573 7420 7072   price x Bust pr
-00054f50: 6963 6529 0a20 2020 2020 2020 2020 2020  ice).           
-00054f60: 2020 2020 2020 2020 2064 6966 6665 7265           differe
-00054f70: 6e63 6520 3d20 5072 6563 6973 652e 7374  nce = Precise.st
-00054f80: 7269 6e67 5f61 6273 2850 7265 6369 7365  ring_abs(Precise
-00054f90: 2e73 7472 696e 675f 7375 6228 6275 7374  .string_sub(bust
-00054fa0: 5072 6963 652c 206c 6971 7569 6461 7469  Price, liquidati
-00054fb0: 6f6e 5072 6963 6529 290a 2020 2020 2020  onPrice)).      
-00054fc0: 2020 2020 2020 2020 2020 2020 2020 6d75                mu
-00054fd0: 6c74 6970 6c79 203d 2050 7265 6369 7365  ltiply = Precise
-00054fe0: 2e73 7472 696e 675f 6d75 6c28 6275 7374  .string_mul(bust
-00054ff0: 5072 6963 652c 206c 6971 7569 6461 7469  Price, liquidati
-00055000: 6f6e 5072 6963 6529 0a20 2020 2020 2020  onPrice).       
-00055010: 2020 2020 2020 2020 2020 2020 206d 6169               mai
-00055020: 6e74 656e 616e 6365 4d61 7267 696e 5374  ntenanceMarginSt
-00055030: 7269 6e67 203d 2050 7265 6369 7365 2e73  ring = Precise.s
-00055040: 7472 696e 675f 6469 7628 5072 6563 6973  tring_div(Precis
-00055050: 652e 7374 7269 6e67 5f6d 756c 2873 697a  e.string_mul(siz
-00055060: 652c 2064 6966 6665 7265 6e63 6529 2c20  e, difference), 
-00055070: 6d75 6c74 6970 6c79 290a 2020 2020 2020  multiply).      
-00055080: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00055090: 496e 6974 6961 6c20 4d61 7267 696e 203d  Initial Margin =
-000550a0: 204c 6576 6572 6167 6520 7820 436f 6e74   Leverage x Cont
-000550b0: 7261 6374 7320 2f20 456e 7472 7950 7269  racts / EntryPri
-000550c0: 6365 0a20 2020 2020 2020 2020 2020 2020  ce.             
-000550d0: 2020 2020 2020 2069 6620 656e 7472 7950         if entryP
-000550e0: 7269 6365 2069 7320 6e6f 7420 4e6f 6e65  rice is not None
-000550f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00055100: 2020 2020 2020 2020 2020 696e 6974 6961            initia
-00055110: 6c4d 6172 6769 6e53 7472 696e 6720 3d20  lMarginString = 
-00055120: 5072 6563 6973 652e 7374 7269 6e67 5f64  Precise.string_d
-00055130: 6976 2873 697a 652c 2050 7265 6369 7365  iv(size, Precise
-00055140: 2e73 7472 696e 675f 6d75 6c28 656e 7472  .string_mul(entr
-00055150: 7950 7269 6365 2c20 6c65 7665 7261 6765  yPrice, leverage
-00055160: 2929 0a20 2020 2020 2020 206d 6169 6e74  )).        maint
-00055170: 656e 616e 6365 4d61 7267 696e 5065 7263  enanceMarginPerc
-00055180: 656e 7461 6765 203d 2050 7265 6369 7365  entage = Precise
-00055190: 2e73 7472 696e 675f 6469 7628 6d61 696e  .string_div(main
-000551a0: 7465 6e61 6e63 654d 6172 6769 6e53 7472  tenanceMarginStr
-000551b0: 696e 672c 206e 6f74 696f 6e61 6c29 0a20  ing, notional). 
-000551c0: 2020 2020 2020 206d 6172 6769 6e52 6174         marginRat
-000551d0: 696f 203d 2050 7265 6369 7365 2e73 7472  io = Precise.str
-000551e0: 696e 675f 6469 7628 6d61 696e 7465 6e61  ing_div(maintena
-000551f0: 6e63 654d 6172 6769 6e53 7472 696e 672c  nceMarginString,
-00055200: 2063 6f6c 6c61 7465 7261 6c53 7472 696e   collateralStrin
-00055210: 672c 2034 290a 2020 2020 2020 2020 7265  g, 4).        re
-00055220: 7475 726e 2073 656c 662e 7361 6665 5f70  turn self.safe_p
-00055230: 6f73 6974 696f 6e28 7b0a 2020 2020 2020  osition({.      
-00055240: 2020 2020 2020 2769 6e66 6f27 3a20 706f        'info': po
-00055250: 7369 7469 6f6e 2c0a 2020 2020 2020 2020  sition,.        
-00055260: 2020 2020 2769 6427 3a20 4e6f 6e65 2c0a      'id': None,.
-00055270: 2020 2020 2020 2020 2020 2020 2773 796d              'sym
-00055280: 626f 6c27 3a20 6d61 726b 6574 5b27 7379  bol': market['sy
-00055290: 6d62 6f6c 275d 2c0a 2020 2020 2020 2020  mbol'],.        
-000552a0: 2020 2020 2774 696d 6573 7461 6d70 273a      'timestamp':
-000552b0: 2074 696d 6573 7461 6d70 2c0a 2020 2020   timestamp,.    
-000552c0: 2020 2020 2020 2020 2764 6174 6574 696d          'datetim
-000552d0: 6527 3a20 7365 6c66 2e69 736f 3836 3031  e': self.iso8601
-000552e0: 2874 696d 6573 7461 6d70 292c 0a20 2020  (timestamp),.   
-000552f0: 2020 2020 2020 2020 2027 6c61 7374 5570           'lastUp
-00055300: 6461 7465 5469 6d65 7374 616d 7027 3a20  dateTimestamp': 
-00055310: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
-00055320: 2020 2769 6e69 7469 616c 4d61 7267 696e    'initialMargin
-00055330: 273a 2073 656c 662e 7061 7273 655f 6e75  ': self.parse_nu
-00055340: 6d62 6572 2869 6e69 7469 616c 4d61 7267  mber(initialMarg
-00055350: 696e 5374 7269 6e67 292c 0a20 2020 2020  inString),.     
-00055360: 2020 2020 2020 2027 696e 6974 6961 6c4d         'initialM
-00055370: 6172 6769 6e50 6572 6365 6e74 6167 6527  arginPercentage'
-00055380: 3a20 7365 6c66 2e70 6172 7365 5f6e 756d  : self.parse_num
-00055390: 6265 7228 5072 6563 6973 652e 7374 7269  ber(Precise.stri
-000553a0: 6e67 5f64 6976 2869 6e69 7469 616c 4d61  ng_div(initialMa
-000553b0: 7267 696e 5374 7269 6e67 2c20 6e6f 7469  rginString, noti
-000553c0: 6f6e 616c 2929 2c0a 2020 2020 2020 2020  onal)),.        
-000553d0: 2020 2020 276d 6169 6e74 656e 616e 6365      'maintenance
-000553e0: 4d61 7267 696e 273a 2073 656c 662e 7061  Margin': self.pa
-000553f0: 7273 655f 6e75 6d62 6572 286d 6169 6e74  rse_number(maint
-00055400: 656e 616e 6365 4d61 7267 696e 5374 7269  enanceMarginStri
-00055410: 6e67 292c 0a20 2020 2020 2020 2020 2020  ng),.           
-00055420: 2027 6d61 696e 7465 6e61 6e63 654d 6172   'maintenanceMar
-00055430: 6769 6e50 6572 6365 6e74 6167 6527 3a20  ginPercentage': 
-00055440: 7365 6c66 2e70 6172 7365 5f6e 756d 6265  self.parse_numbe
-00055450: 7228 6d61 696e 7465 6e61 6e63 654d 6172  r(maintenanceMar
-00055460: 6769 6e50 6572 6365 6e74 6167 6529 2c0a  ginPercentage),.
-00055470: 2020 2020 2020 2020 2020 2020 2765 6e74              'ent
-00055480: 7279 5072 6963 6527 3a20 7365 6c66 2e70  ryPrice': self.p
-00055490: 6172 7365 5f6e 756d 6265 7228 656e 7472  arse_number(entr
-000554a0: 7950 7269 6365 292c 0a20 2020 2020 2020  yPrice),.       
-000554b0: 2020 2020 2027 6e6f 7469 6f6e 616c 273a       'notional':
-000554c0: 2073 656c 662e 7061 7273 655f 6e75 6d62   self.parse_numb
-000554d0: 6572 286e 6f74 696f 6e61 6c29 2c0a 2020  er(notional),.  
-000554e0: 2020 2020 2020 2020 2020 276c 6576 6572            'lever
-000554f0: 6167 6527 3a20 7365 6c66 2e70 6172 7365  age': self.parse
-00055500: 5f6e 756d 6265 7228 6c65 7665 7261 6765  _number(leverage
-00055510: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
-00055520: 756e 7265 616c 697a 6564 506e 6c27 3a20  unrealizedPnl': 
-00055530: 7365 6c66 2e70 6172 7365 5f6e 756d 6265  self.parse_numbe
-00055540: 7228 756e 7265 616c 6973 6564 506e 6c29  r(unrealisedPnl)
-00055550: 2c0a 2020 2020 2020 2020 2020 2020 2763  ,.            'c
-00055560: 6f6e 7472 6163 7473 273a 2073 656c 662e  ontracts': self.
-00055570: 7061 7273 655f 6e75 6d62 6572 2873 697a  parse_number(siz
-00055580: 6529 2c20 2023 2069 6e20 5553 4420 666f  e),  # in USD fo
-00055590: 7220 696e 7665 7273 6520 7377 6170 730a  r inverse swaps.
-000555a0: 2020 2020 2020 2020 2020 2020 2763 6f6e              'con
-000555b0: 7472 6163 7453 697a 6527 3a20 7365 6c66  tractSize': self
-000555c0: 2e73 6166 655f 6e75 6d62 6572 286d 6172  .safe_number(mar
-000555d0: 6b65 742c 2027 636f 6e74 7261 6374 5369  ket, 'contractSi
-000555e0: 7a65 2729 2c0a 2020 2020 2020 2020 2020  ze'),.          
-000555f0: 2020 276d 6172 6769 6e52 6174 696f 273a    'marginRatio':
-00055600: 2073 656c 662e 7061 7273 655f 6e75 6d62   self.parse_numb
-00055610: 6572 286d 6172 6769 6e52 6174 696f 292c  er(marginRatio),
-00055620: 0a20 2020 2020 2020 2020 2020 2027 6c69  .            'li
-00055630: 7175 6964 6174 696f 6e50 7269 6365 273a  quidationPrice':
-00055640: 2073 656c 662e 7061 7273 655f 6e75 6d62   self.parse_numb
-00055650: 6572 286c 6971 7569 6461 7469 6f6e 5072  er(liquidationPr
-00055660: 6963 6529 2c0a 2020 2020 2020 2020 2020  ice),.          
-00055670: 2020 276d 6172 6b50 7269 6365 273a 2073    'markPrice': s
-00055680: 656c 662e 7361 6665 5f6e 756d 6265 7228  elf.safe_number(
-00055690: 706f 7369 7469 6f6e 2c20 276d 6172 6b50  position, 'markP
-000556a0: 7269 6365 2729 2c0a 2020 2020 2020 2020  rice'),.        
-000556b0: 2020 2020 276c 6173 7450 7269 6365 273a      'lastPrice':
-000556c0: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
-000556d0: 2020 2027 636f 6c6c 6174 6572 616c 273a     'collateral':
-000556e0: 2073 656c 662e 7061 7273 655f 6e75 6d62   self.parse_numb
-000556f0: 6572 2863 6f6c 6c61 7465 7261 6c53 7472  er(collateralStr
-00055700: 696e 6729 2c0a 2020 2020 2020 2020 2020  ing),.          
-00055710: 2020 276d 6172 6769 6e4d 6f64 6527 3a20    'marginMode': 
-00055720: 6d61 7267 696e 4d6f 6465 2c0a 2020 2020  marginMode,.    
-00055730: 2020 2020 2020 2020 2773 6964 6527 3a20          'side': 
-00055740: 7369 6465 2c0a 2020 2020 2020 2020 2020  side,.          
-00055750: 2020 2770 6572 6365 6e74 6167 6527 3a20    'percentage': 
-00055760: 4e6f 6e65 2c0a 2020 2020 2020 2020 7d29  None,.        })
-00055770: 0a0a 2020 2020 6465 6620 7365 745f 6d61  ..    def set_ma
-00055780: 7267 696e 5f6d 6f64 6528 7365 6c66 2c20  rgin_mode(self, 
-00055790: 6d61 7267 696e 4d6f 6465 2c20 7379 6d62  marginMode, symb
-000557a0: 6f6c 3a20 4f70 7469 6f6e 616c 5b73 7472  ol: Optional[str
-000557b0: 5d20 3d20 4e6f 6e65 2c20 7061 7261 6d73  ] = None, params
-000557c0: 3d7b 7d29 3a0a 2020 2020 2020 2020 7365  ={}):.        se
-000557d0: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
-000557e0: 290a 2020 2020 2020 2020 7661 6c75 6573  ).        values
-000557f0: 203d 2073 656c 662e 6973 5f75 6e69 6669   = self.is_unifi
-00055800: 6564 5f65 6e61 626c 6564 2829 0a20 2020  ed_enabled().   
-00055810: 2020 2020 2069 7355 6e69 6669 6564 4163       isUnifiedAc
-00055820: 636f 756e 7420 3d20 7365 6c66 2e73 6166  count = self.saf
-00055830: 655f 7661 6c75 6528 7661 6c75 6573 2c20  e_value(values, 
-00055840: 3129 0a20 2020 2020 2020 2069 6620 6973  1).        if is
-00055850: 556e 6966 6965 6441 6363 6f75 6e74 3a0a  UnifiedAccount:.
-00055860: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00055870: 726e 2073 656c 662e 7365 745f 756e 6966  rn self.set_unif
-00055880: 6965 645f 6d61 7267 696e 5f6d 6f64 6528  ied_margin_mode(
-00055890: 6d61 7267 696e 4d6f 6465 2c20 7379 6d62  marginMode, symb
-000558a0: 6f6c 2c20 7061 7261 6d73 290a 2020 2020  ol, params).    
-000558b0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-000558c0: 7365 745f 6465 7269 7661 7469 7665 735f  set_derivatives_
-000558d0: 6d61 7267 696e 5f6d 6f64 6528 6d61 7267  margin_mode(marg
-000558e0: 696e 4d6f 6465 2c20 7379 6d62 6f6c 2c20  inMode, symbol, 
-000558f0: 7061 7261 6d73 290a 0a20 2020 2064 6566  params)..    def
-00055900: 2073 6574 5f75 6e69 6669 6564 5f6d 6172   set_unified_mar
-00055910: 6769 6e5f 6d6f 6465 2873 656c 662c 206d  gin_mode(self, m
-00055920: 6172 6769 6e4d 6f64 652c 2073 796d 626f  arginMode, symbo
-00055930: 6c3a 204f 7074 696f 6e61 6c5b 7374 725d  l: Optional[str]
-00055940: 203d 204e 6f6e 652c 2070 6172 616d 733d   = None, params=
-00055950: 7b7d 293a 0a20 2020 2020 2020 2073 656c  {}):.        sel
-00055960: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
-00055970: 0a20 2020 2020 2020 2069 6620 286d 6172  .        if (mar
-00055980: 6769 6e4d 6f64 6520 213d 2027 5245 4755  ginMode != 'REGU
-00055990: 4c41 525f 4d41 5247 494e 2729 2061 6e64  LAR_MARGIN') and
-000559a0: 2028 6d61 7267 696e 4d6f 6465 2021 3d20   (marginMode != 
-000559b0: 2750 4f52 5446 4f4c 494f 5f4d 4152 4749  'PORTFOLIO_MARGI
-000559c0: 4e27 293a 0a20 2020 2020 2020 2020 2020  N'):.           
-000559d0: 2072 6169 7365 2042 6164 5265 7175 6573   raise BadReques
-000559e0: 7428 7365 6c66 2e69 6420 2b20 2720 7365  t(self.id + ' se
-000559f0: 744d 6172 6769 6e4d 6f64 6528 2920 6d61  tMarginMode() ma
-00055a00: 7267 696e 4d6f 6465 206d 7573 7420 6265  rginMode must be
-00055a10: 2065 6974 6865 7220 5245 4755 4c41 525f   either REGULAR_
-00055a20: 4d41 5247 494e 206f 7220 504f 5254 464f  MARGIN or PORTFO
-00055a30: 4c49 4f5f 4d41 5247 494e 2729 0a20 2020  LIO_MARGIN').   
-00055a40: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
-00055a50: 0a20 2020 2020 2020 2020 2020 2027 7365  .            'se
-00055a60: 744d 6172 6769 6e4d 6f64 6527 3a20 6d61  tMarginMode': ma
-00055a70: 7267 696e 4d6f 6465 2c0a 2020 2020 2020  rginMode,.      
-00055a80: 2020 7d0a 2020 2020 2020 2020 7265 7370    }.        resp
-00055a90: 6f6e 7365 203d 2073 656c 662e 7072 6976  onse = self.priv
-00055aa0: 6174 6550 6f73 7456 3541 6363 6f75 6e74  atePostV5Account
-00055ab0: 5365 744d 6172 6769 6e4d 6f64 6528 7365  SetMarginMode(se
-00055ac0: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
-00055ad0: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
-00055ae0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-00055af0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-00055b00: 2020 2273 6574 4d61 7267 696e 4d6f 6465    "setMarginMode
-00055b10: 223a 2022 504f 5254 464f 4c49 4f5f 4d41  ": "PORTFOLIO_MA
-00055b20: 5247 494e 220a 2020 2020 2020 2020 2320  RGIN".        # 
-00055b30: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
-00055b40: 2020 2020 2072 6574 7572 6e20 7265 7370       return resp
-00055b50: 6f6e 7365 0a0a 2020 2020 6465 6620 7365  onse..    def se
-00055b60: 745f 6465 7269 7661 7469 7665 735f 6d61  t_derivatives_ma
-00055b70: 7267 696e 5f6d 6f64 6528 7365 6c66 2c20  rgin_mode(self, 
-00055b80: 6d61 7267 696e 4d6f 6465 2c20 7379 6d62  marginMode, symb
-00055b90: 6f6c 3a20 4f70 7469 6f6e 616c 5b73 7472  ol: Optional[str
-00055ba0: 5d20 3d20 4e6f 6e65 2c20 7061 7261 6d73  ] = None, params
-00055bb0: 3d7b 7d29 3a0a 2020 2020 2020 2020 7365  ={}):.        se
-00055bc0: 6c66 2e63 6865 636b 5f72 6571 7569 7265  lf.check_require
-00055bd0: 645f 7379 6d62 6f6c 2827 7365 744d 6172  d_symbol('setMar
-00055be0: 6769 6e4d 6f64 6527 2c20 7379 6d62 6f6c  ginMode', symbol
-00055bf0: 290a 2020 2020 2020 2020 7365 6c66 2e6c  ).        self.l
-00055c00: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
-00055c10: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
-00055c20: 656c 662e 6d61 726b 6574 2873 796d 626f  elf.market(symbo
-00055c30: 6c29 0a20 2020 2020 2020 2069 6620 6d61  l).        if ma
-00055c40: 726b 6574 5b27 7365 7474 6c65 275d 203d  rket['settle'] =
-00055c50: 3d20 2755 5344 4327 3a0a 2020 2020 2020  = 'USDC':.      
-00055c60: 2020 2020 2020 7261 6973 6520 4e6f 7453        raise NotS
-00055c70: 7570 706f 7274 6564 2873 656c 662e 6964  upported(self.id
-00055c80: 202b 2027 2073 6574 4d61 7267 696e 4d6f   + ' setMarginMo
-00055c90: 6465 2829 2064 6f65 7320 6e6f 7420 7375  de() does not su
-00055ca0: 7070 6f72 7420 6d61 726b 6574 2027 202b  pport market ' +
-00055cb0: 2073 796d 626f 6c20 2b20 2727 290a 2020   symbol + '').  
-00055cc0: 2020 2020 2020 6d61 7267 696e 4d6f 6465        marginMode
-00055cd0: 203d 206d 6172 6769 6e4d 6f64 652e 7570   = marginMode.up
-00055ce0: 7065 7228 290a 2020 2020 2020 2020 6966  per().        if
-00055cf0: 2028 6d61 7267 696e 4d6f 6465 2021 3d20   (marginMode != 
-00055d00: 2749 534f 4c41 5445 4427 2920 616e 6420  'ISOLATED') and 
-00055d10: 286d 6172 6769 6e4d 6f64 6520 213d 2027  (marginMode != '
-00055d20: 4352 4f53 5327 293a 0a20 2020 2020 2020  CROSS'):.       
-00055d30: 2020 2020 2072 6169 7365 2042 6164 5265       raise BadRe
-00055d40: 7175 6573 7428 7365 6c66 2e69 6420 2b20  quest(self.id + 
-00055d50: 2720 7365 744d 6172 6769 6e4d 6f64 6528  ' setMarginMode(
-00055d60: 2920 6d61 7267 696e 4d6f 6465 206d 7573  ) marginMode mus
-00055d70: 7420 6265 2065 6974 6865 7220 6973 6f6c  t be either isol
-00055d80: 6174 6564 206f 7220 6372 6f73 7327 290a  ated or cross').
-00055d90: 2020 2020 2020 2020 6c65 7665 7261 6765          leverage
-00055da0: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-00055db0: 696e 6728 7061 7261 6d73 2c20 276c 6576  ing(params, 'lev
-00055dc0: 6572 6167 6527 290a 2020 2020 2020 2020  erage').        
-00055dd0: 7365 6c6c 4c65 7665 7261 6765 203d 204e  sellLeverage = N
-00055de0: 6f6e 650a 2020 2020 2020 2020 6275 794c  one.        buyL
-00055df0: 6576 6572 6167 6520 3d20 4e6f 6e65 0a20  everage = None. 
-00055e00: 2020 2020 2020 2069 6620 6c65 7665 7261         if levera
-00055e10: 6765 2069 7320 4e6f 6e65 3a0a 2020 2020  ge is None:.    
-00055e20: 2020 2020 2020 2020 7365 6c6c 4c65 7665          sellLeve
-00055e30: 7261 6765 203d 2073 656c 662e 7361 6665  rage = self.safe
-00055e40: 5f73 7472 696e 675f 3228 7061 7261 6d73  _string_2(params
-00055e50: 2c20 2773 656c 6c5f 6c65 7665 7261 6765  , 'sell_leverage
-00055e60: 272c 2027 7365 6c6c 4c65 7665 7261 6765  ', 'sellLeverage
-00055e70: 2729 0a20 2020 2020 2020 2020 2020 2062  ').            b
-00055e80: 7579 4c65 7665 7261 6765 203d 2073 656c  uyLeverage = sel
-00055e90: 662e 7361 6665 5f73 7472 696e 675f 3228  f.safe_string_2(
-00055ea0: 7061 7261 6d73 2c20 2762 7579 5f6c 6576  params, 'buy_lev
-00055eb0: 6572 6167 6527 2c20 2762 7579 4c65 7665  erage', 'buyLeve
-00055ec0: 7261 6765 2729 0a20 2020 2020 2020 2020  rage').         
-00055ed0: 2020 2069 6620 7365 6c6c 4c65 7665 7261     if sellLevera
-00055ee0: 6765 2069 7320 4e6f 6e65 2061 6e64 2062  ge is None and b
-00055ef0: 7579 4c65 7665 7261 6765 2069 7320 4e6f  uyLeverage is No
-00055f00: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00055f10: 2020 2020 7261 6973 6520 4172 6775 6d65      raise Argume
-00055f20: 6e74 7352 6571 7569 7265 6428 7365 6c66  ntsRequired(self
-00055f30: 2e69 6420 2b20 2720 7365 744d 6172 6769  .id + ' setMargi
-00055f40: 6e4d 6f64 6528 2920 7265 7175 6972 6573  nMode() requires
-00055f50: 2061 206c 6576 6572 6167 6520 7061 7261   a leverage para
-00055f60: 6d65 7465 7220 6f72 2073 656c 6c5f 6c65  meter or sell_le
-00055f70: 7665 7261 6765 2061 6e64 2062 7579 5f6c  verage and buy_l
-00055f80: 6576 6572 6167 6520 7061 7261 6d65 7465  everage paramete
-00055f90: 7273 2729 0a20 2020 2020 2020 2020 2020  rs').           
-00055fa0: 2069 6620 6275 794c 6576 6572 6167 6520   if buyLeverage 
-00055fb0: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-00055fc0: 2020 2020 2020 2020 2062 7579 4c65 7665           buyLeve
-00055fd0: 7261 6765 203d 2073 656c 6c4c 6576 6572  rage = sellLever
-00055fe0: 6167 650a 2020 2020 2020 2020 2020 2020  age.            
-00055ff0: 6966 2073 656c 6c4c 6576 6572 6167 6520  if sellLeverage 
-00056000: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-00056010: 2020 2020 2020 2020 2073 656c 6c4c 6576           sellLev
-00056020: 6572 6167 6520 3d20 6275 794c 6576 6572  erage = buyLever
-00056030: 6167 650a 2020 2020 2020 2020 2020 2020  age.            
-00056040: 7061 7261 6d73 203d 2073 656c 662e 6f6d  params = self.om
-00056050: 6974 2870 6172 616d 732c 205b 2762 7579  it(params, ['buy
-00056060: 5f6c 6576 6572 6167 6527 2c20 2773 656c  _leverage', 'sel
-00056070: 6c5f 6c65 7665 7261 6765 272c 2027 7365  l_leverage', 'se
-00056080: 6c6c 4c65 7665 7261 6765 272c 2027 6275  llLeverage', 'bu
-00056090: 794c 6576 6572 6167 6527 5d29 0a20 2020  yLeverage']).   
-000560a0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-000560b0: 2020 2020 2020 2070 6172 616d 7320 3d20         params = 
-000560c0: 7365 6c66 2e6f 6d69 7428 7061 7261 6d73  self.omit(params
-000560d0: 2c20 276c 6576 6572 6167 6527 290a 2020  , 'leverage').  
-000560e0: 2020 2020 2020 2020 2020 7365 6c6c 4c65            sellLe
-000560f0: 7665 7261 6765 203d 206c 6576 6572 6167  verage = leverag
-00056100: 650a 2020 2020 2020 2020 2020 2020 6275  e.            bu
-00056110: 794c 6576 6572 6167 6520 3d20 6c65 7665  yLeverage = leve
-00056120: 7261 6765 0a20 2020 2020 2020 2074 7261  rage.        tra
-00056130: 6465 4d6f 6465 203d 2031 2069 6620 286d  deMode = 1 if (m
-00056140: 6172 6769 6e4d 6f64 6520 3d3d 2027 4953  arginMode == 'IS
-00056150: 4f4c 4154 4544 2729 2065 6c73 6520 300a  OLATED') else 0.
-00056160: 2020 2020 2020 2020 7265 7175 6573 7420          request 
-00056170: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-00056180: 2773 796d 626f 6c27 3a20 6d61 726b 6574  'symbol': market
-00056190: 5b27 6964 275d 2c0a 2020 2020 2020 2020  ['id'],.        
-000561a0: 2020 2020 2774 7261 6465 4d6f 6465 273a      'tradeMode':
-000561b0: 2074 7261 6465 4d6f 6465 2c0a 2020 2020   tradeMode,.    
-000561c0: 2020 2020 2020 2020 2762 7579 4c65 7665          'buyLeve
-000561d0: 7261 6765 273a 2062 7579 4c65 7665 7261  rage': buyLevera
-000561e0: 6765 2c0a 2020 2020 2020 2020 2020 2020  ge,.            
-000561f0: 2773 656c 6c4c 6576 6572 6167 6527 3a20  'sellLeverage': 
-00056200: 7365 6c6c 4c65 7665 7261 6765 2c0a 2020  sellLeverage,.  
-00056210: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-00056220: 7265 7370 6f6e 7365 203d 2073 656c 662e  response = self.
-00056230: 7072 6976 6174 6550 6f73 7443 6f6e 7472  privatePostContr
-00056240: 6163 7456 3350 7269 7661 7465 506f 7369  actV3PrivatePosi
-00056250: 7469 6f6e 5377 6974 6368 4973 6f6c 6174  tionSwitchIsolat
-00056260: 6564 2873 656c 662e 6578 7465 6e64 2872  ed(self.extend(r
-00056270: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
-00056280: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00056290: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
-000562a0: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-000562b0: 7443 6f64 6522 3a20 302c 0a20 2020 2020  tCode": 0,.     
-000562c0: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-000562d0: 744d 7367 223a 2022 4f4b 222c 0a20 2020  tMsg": "OK",.   
-000562e0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-000562f0: 7265 7375 6c74 223a 207b 7d2c 0a20 2020  result": {},.   
-00056300: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00056310: 7265 7445 7874 496e 666f 223a 206e 756c  retExtInfo": nul
-00056320: 6c2c 0a20 2020 2020 2020 2023 2020 2020  l,.        #    
-00056330: 2020 2020 2022 7469 6d65 223a 2031 3635       "time": 165
-00056340: 3839 3038 3533 3235 3830 0a20 2020 2020  8908532580.     
-00056350: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
-00056360: 2020 2023 0a20 2020 2020 2020 2072 6574     #.        ret
-00056370: 7572 6e20 7265 7370 6f6e 7365 0a0a 2020  urn response..  
-00056380: 2020 6465 6620 7365 745f 6c65 7665 7261    def set_levera
-00056390: 6765 2873 656c 662c 206c 6576 6572 6167  ge(self, leverag
-000563a0: 652c 2073 796d 626f 6c3a 204f 7074 696f  e, symbol: Optio
-000563b0: 6e61 6c5b 7374 725d 203d 204e 6f6e 652c  nal[str] = None,
-000563c0: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
-000563d0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-000563e0: 2073 6574 2074 6865 206c 6576 656c 206f   set the level o
-000563f0: 6620 6c65 7665 7261 6765 2066 6f72 2061  f leverage for a
-00056400: 206d 6172 6b65 740a 2020 2020 2020 2020   market.        
-00056410: 3a70 6172 616d 2066 6c6f 6174 206c 6576  :param float lev
-00056420: 6572 6167 653a 2074 6865 2072 6174 6520  erage: the rate 
-00056430: 6f66 206c 6576 6572 6167 650a 2020 2020  of leverage.    
-00056440: 2020 2020 3a70 6172 616d 2073 7472 2073      :param str s
-00056450: 796d 626f 6c3a 2075 6e69 6669 6564 206d  ymbol: unified m
-00056460: 6172 6b65 7420 7379 6d62 6f6c 0a20 2020  arket symbol.   
-00056470: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
-00056480: 2070 6172 616d 733a 2065 7874 7261 2070   params: extra p
-00056490: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
-000564a0: 6963 2074 6f20 7468 6520 6279 6269 7420  ic to the bybit 
-000564b0: 6170 6920 656e 6470 6f69 6e74 0a20 2020  api endpoint.   
-000564c0: 2020 2020 203a 7265 7475 726e 7320 6469       :returns di
-000564d0: 6374 3a20 7265 7370 6f6e 7365 2066 726f  ct: response fro
-000564e0: 6d20 7468 6520 6578 6368 616e 6765 0a20  m the exchange. 
-000564f0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00056500: 2020 2073 656c 662e 6368 6563 6b5f 7265     self.check_re
-00056510: 7175 6972 6564 5f73 796d 626f 6c28 2773  quired_symbol('s
-00056520: 6574 4c65 7665 7261 6765 272c 2073 796d  etLeverage', sym
-00056530: 626f 6c29 0a20 2020 2020 2020 2073 656c  bol).        sel
-00056540: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
-00056550: 0a20 2020 2020 2020 206d 6172 6b65 7420  .        market 
-00056560: 3d20 7365 6c66 2e6d 6172 6b65 7428 7379  = self.market(sy
-00056570: 6d62 6f6c 290a 2020 2020 2020 2020 2320  mbol).        # 
-00056580: 5741 524e 494e 473a 2054 4849 5320 5749  WARNING: THIS WI
-00056590: 4c4c 2049 4e43 5245 4153 4520 4c49 5155  LL INCREASE LIQU
-000565a0: 4944 4154 494f 4e20 5052 4943 4520 464f  IDATION PRICE FO
-000565b0: 5220 4f50 454e 2049 534f 4c41 5445 4420  R OPEN ISOLATED 
-000565c0: 4c4f 4e47 2050 4f53 4954 494f 4e53 0a20  LONG POSITIONS. 
-000565d0: 2020 2020 2020 2023 2041 4e44 2044 4543         # AND DEC
-000565e0: 5245 4153 4520 4c49 5155 4944 4154 494f  REASE LIQUIDATIO
-000565f0: 4e20 5052 4943 4520 464f 5220 4f50 454e  N PRICE FOR OPEN
-00056600: 2049 534f 4c41 5445 4420 5348 4f52 5420   ISOLATED SHORT 
-00056610: 504f 5349 5449 4f4e 530a 2020 2020 2020  POSITIONS.      
-00056620: 2020 6973 5573 6463 5365 7474 6c65 6420    isUsdcSettled 
-00056630: 3d20 6d61 726b 6574 5b27 7365 7474 6c65  = market['settle
-00056640: 275d 203d 3d20 2755 5344 4327 0a20 2020  '] == 'USDC'.   
-00056650: 2020 2020 2065 6e61 626c 6555 6e69 6669       enableUnifi
-00056660: 6564 4d61 7267 696e 2c20 656e 6162 6c65  edMargin, enable
-00056670: 556e 6966 6965 6441 6363 6f75 6e74 203d  UnifiedAccount =
-00056680: 2073 656c 662e 6973 5f75 6e69 6669 6564   self.is_unified
-00056690: 5f65 6e61 626c 6564 2829 0a20 2020 2020  _enabled().     
-000566a0: 2020 2023 2065 6e67 6167 6520 696e 206c     # engage in l
-000566b0: 6576 6572 6167 6520 7365 7474 696e 670a  everage setting.
-000566c0: 2020 2020 2020 2020 2320 7765 2072 6575          # we reu
-000566d0: 7365 2074 6865 2063 6f64 6520 6865 7265  se the code here
-000566e0: 2069 6e73 7465 6164 206f 6620 6861 7669   instead of havi
-000566f0: 6e67 2074 776f 206d 6574 686f 6473 0a20  ng two methods. 
-00056700: 2020 2020 2020 206c 6576 6572 6167 6520         leverage 
-00056710: 3d20 7365 6c66 2e6e 756d 6265 725f 746f  = self.number_to
-00056720: 5f73 7472 696e 6728 6c65 7665 7261 6765  _string(leverage
-00056730: 290a 2020 2020 2020 2020 6d65 7468 6f64  ).        method
-00056740: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-00056750: 7265 7175 6573 7420 3d20 4e6f 6e65 0a20  request = None. 
-00056760: 2020 2020 2020 2069 6620 656e 6162 6c65         if enable
-00056770: 556e 6966 6965 644d 6172 6769 6e20 6f72  UnifiedMargin or
-00056780: 2065 6e61 626c 6555 6e69 6669 6564 4163   enableUnifiedAc
-00056790: 636f 756e 7420 6f72 206e 6f74 2069 7355  count or not isU
-000567a0: 7364 6353 6574 746c 6564 3a0a 2020 2020  sdcSettled:.    
-000567b0: 2020 2020 2020 2020 7265 7175 6573 7420          request 
-000567c0: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-000567d0: 2020 2020 2773 796d 626f 6c27 3a20 6d61      'symbol': ma
-000567e0: 726b 6574 5b27 6964 275d 2c0a 2020 2020  rket['id'],.    
-000567f0: 2020 2020 2020 2020 2020 2020 2762 7579              'buy
-00056800: 4c65 7665 7261 6765 273a 206c 6576 6572  Leverage': lever
-00056810: 6167 652c 0a20 2020 2020 2020 2020 2020  age,.           
-00056820: 2020 2020 2027 7365 6c6c 4c65 7665 7261       'sellLevera
-00056830: 6765 273a 206c 6576 6572 6167 652c 0a20  ge': leverage,. 
-00056840: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
-00056850: 2020 2020 2020 2020 2069 6620 656e 6162           if enab
-00056860: 6c65 556e 6966 6965 6441 6363 6f75 6e74  leUnifiedAccount
-00056870: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00056880: 2020 6966 206d 6172 6b65 745b 276c 696e    if market['lin
-00056890: 6561 7227 5d3a 0a20 2020 2020 2020 2020  ear']:.         
-000568a0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-000568b0: 7374 5b27 6361 7465 676f 7279 275d 203d  st['category'] =
-000568c0: 2027 6c69 6e65 6172 270a 2020 2020 2020   'linear'.      
-000568d0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-000568e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000568f0: 2020 2020 7261 6973 6520 4e6f 7453 7570      raise NotSup
-00056900: 706f 7274 6564 2873 656c 662e 6964 202b  ported(self.id +
-00056910: 2027 2073 6574 556e 6966 6965 644d 6172   ' setUnifiedMar
-00056920: 6769 6e4c 6576 6572 6167 6528 2920 6c65  ginLeverage() le
-00056930: 7665 7261 6765 2064 6f65 736e 5c27 7420  verage doesn\'t 
-00056940: 7375 7070 6f72 7420 696e 7665 7273 6520  support inverse 
-00056950: 616e 6420 6f70 7469 6f6e 206d 6172 6b65  and option marke
-00056960: 7420 696e 2075 6e69 6669 6564 2061 6363  t in unified acc
-00056970: 6f75 6e74 2729 0a20 2020 2020 2020 2020  ount').         
-00056980: 2020 2020 2020 206d 6574 686f 6420 3d20         method = 
-00056990: 2770 7269 7661 7465 506f 7374 5635 506f  'privatePostV5Po
-000569a0: 7369 7469 6f6e 5365 744c 6576 6572 6167  sitionSetLeverag
-000569b0: 6527 0a20 2020 2020 2020 2020 2020 2065  e'.            e
-000569c0: 6c69 6620 656e 6162 6c65 556e 6966 6965  lif enableUnifie
-000569d0: 644d 6172 6769 6e3a 0a20 2020 2020 2020  dMargin:.       
-000569e0: 2020 2020 2020 2020 2069 6620 6d61 726b           if mark
-000569f0: 6574 5b27 6f70 7469 6f6e 275d 3a0a 2020  et['option']:.  
-00056a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00056a10: 2020 7265 7175 6573 745b 2763 6174 6567    request['categ
-00056a20: 6f72 7927 5d20 3d20 276f 7074 696f 6e27  ory'] = 'option'
-00056a30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00056a40: 2065 6c69 6620 6d61 726b 6574 5b27 6c69   elif market['li
-00056a50: 6e65 6172 275d 3a0a 2020 2020 2020 2020  near']:.        
-00056a60: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00056a70: 6573 745b 2763 6174 6567 6f72 7927 5d20  est['category'] 
-00056a80: 3d20 276c 696e 6561 7227 0a20 2020 2020  = 'linear'.     
-00056a90: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00056aa0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00056ab0: 2020 2020 2072 6169 7365 204e 6f74 5375       raise NotSu
-00056ac0: 7070 6f72 7465 6428 7365 6c66 2e69 6420  pported(self.id 
-00056ad0: 2b20 2720 7365 7455 6e69 6669 6564 4d61  + ' setUnifiedMa
-00056ae0: 7267 696e 4c65 7665 7261 6765 2829 206c  rginLeverage() l
-00056af0: 6576 6572 6167 6520 646f 6573 6e5c 2774  everage doesn\'t
-00056b00: 2073 7570 706f 7274 2069 6e76 6572 7365   support inverse
-00056b10: 206d 6172 6b65 7420 696e 2075 6e69 6669   market in unifi
-00056b20: 6564 206d 6172 6769 6e27 290a 2020 2020  ed margin').    
-00056b30: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
-00056b40: 6f64 203d 2027 7072 6976 6174 6550 6f73  od = 'privatePos
-00056b50: 7455 6e69 6669 6564 5633 5072 6976 6174  tUnifiedV3Privat
-00056b60: 6550 6f73 6974 696f 6e53 6574 4c65 7665  ePositionSetLeve
-00056b70: 7261 6765 270a 2020 2020 2020 2020 2020  rage'.          
-00056b80: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00056b90: 2020 2020 2020 2020 6d65 7468 6f64 203d          method =
-00056ba0: 2027 7072 6976 6174 6550 6f73 7443 6f6e   'privatePostCon
-00056bb0: 7472 6163 7456 3350 7269 7661 7465 506f  tractV3PrivatePo
-00056bc0: 7369 7469 6f6e 5365 744c 6576 6572 6167  sitionSetLeverag
-00056bd0: 6527 0a20 2020 2020 2020 2065 6c73 653a  e'.        else:
-00056be0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-00056bf0: 7565 7374 203d 207b 0a20 2020 2020 2020  uest = {.       
-00056c00: 2020 2020 2020 2020 2027 7379 6d62 6f6c           'symbol
-00056c10: 273a 206d 6172 6b65 745b 2769 6427 5d2c  ': market['id'],
-00056c20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00056c30: 2027 6c65 7665 7261 6765 273a 206c 6576   'leverage': lev
-00056c40: 6572 6167 652c 0a20 2020 2020 2020 2020  erage,.         
-00056c50: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
-00056c60: 206d 6574 686f 6420 3d20 2770 7269 7661   method = 'priva
-00056c70: 7465 506f 7374 5065 7270 6574 7561 6c55  tePostPerpetualU
-00056c80: 7364 634f 7065 6e61 7069 5072 6976 6174  sdcOpenapiPrivat
-00056c90: 6556 3150 6f73 6974 696f 6e4c 6576 6572  eV1PositionLever
-00056ca0: 6167 6553 6176 6527 0a20 2020 2020 2020  ageSave'.       
-00056cb0: 2072 6574 7572 6e20 6765 7461 7474 7228   return getattr(
-00056cc0: 7365 6c66 2c20 6d65 7468 6f64 2928 7365  self, method)(se
-00056cd0: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
-00056ce0: 742c 2070 6172 616d 7329 290a 0a20 2020  t, params))..   
-00056cf0: 2064 6566 2073 6574 5f70 6f73 6974 696f   def set_positio
-00056d00: 6e5f 6d6f 6465 2873 656c 662c 2068 6564  n_mode(self, hed
-00056d10: 6765 642c 2073 796d 626f 6c3a 204f 7074  ged, symbol: Opt
-00056d20: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
-00056d30: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
-00056d40: 2020 2020 2020 2073 656c 662e 6c6f 6164         self.load
-00056d50: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
-00056d60: 2020 206d 6f64 6520 3d20 4e6f 6e65 0a20     mode = None. 
-00056d70: 2020 2020 2020 2069 6620 6865 6467 6564         if hedged
-00056d80: 3a0a 2020 2020 2020 2020 2020 2020 6d6f  :.            mo
-00056d90: 6465 203d 2033 0a20 2020 2020 2020 2065  de = 3.        e
-00056da0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00056db0: 206d 6f64 6520 3d20 300a 2020 2020 2020   mode = 0.      
-00056dc0: 2020 7265 7175 6573 7420 3d20 7b0a 2020    request = {.  
-00056dd0: 2020 2020 2020 2020 2020 276d 6f64 6527            'mode'
-00056de0: 3a20 6d6f 6465 2c0a 2020 2020 2020 2020  : mode,.        
-00056df0: 7d0a 2020 2020 2020 2020 6966 2073 796d  }.        if sym
-00056e00: 626f 6c20 6973 204e 6f6e 653a 0a20 2020  bol is None:.   
-00056e10: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00056e20: 5b27 636f 696e 275d 203d 2027 5553 4454  ['coin'] = 'USDT
-00056e30: 270a 2020 2020 2020 2020 656c 7365 3a0a  '.        else:.
-00056e40: 2020 2020 2020 2020 2020 2020 6d61 726b              mark
-00056e50: 6574 203d 2073 656c 662e 6d61 726b 6574  et = self.market
-00056e60: 2873 796d 626f 6c29 0a20 2020 2020 2020  (symbol).       
-00056e70: 2020 2020 2072 6571 7565 7374 5b27 7379       request['sy
-00056e80: 6d62 6f6c 275d 203d 206d 6172 6b65 745b  mbol'] = market[
-00056e90: 2769 6427 5d0a 2020 2020 2020 2020 230a  'id'].        #.
-00056ea0: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
-00056eb0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00056ec0: 2020 2272 6574 5f63 6f64 6522 3a20 302c    "ret_code": 0,
-00056ed0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00056ee0: 2020 2022 7265 745f 6d73 6722 3a20 226f     "ret_msg": "o
-00056ef0: 6b22 2c0a 2020 2020 2020 2020 2320 2020  k",.        #   
-00056f00: 2020 2020 2020 2265 7874 5f63 6f64 6522        "ext_code"
-00056f10: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
-00056f20: 2020 2020 2020 2020 2272 6573 756c 7422          "result"
-00056f30: 3a20 6e75 6c6c 2c0a 2020 2020 2020 2020  : null,.        
-00056f40: 2320 2020 2020 2020 2020 2265 7874 5f69  #         "ext_i
-00056f50: 6e66 6f22 3a20 6e75 6c6c 2c0a 2020 2020  nfo": null,.    
-00056f60: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
-00056f70: 696d 655f 6e6f 7722 3a20 2231 3537 3734  ime_now": "15774
-00056f80: 3737 3936 382e 3137 3530 3133 222c 0a20  77968.175013",. 
-00056f90: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00056fa0: 2022 7261 7465 5f6c 696d 6974 5f73 7461   "rate_limit_sta
-00056fb0: 7475 7322 3a20 3734 2c0a 2020 2020 2020  tus": 74,.      
-00056fc0: 2020 2320 2020 2020 2020 2020 2272 6174    #         "rat
-00056fd0: 655f 6c69 6d69 745f 7265 7365 745f 6d73  e_limit_reset_ms
-00056fe0: 223a 2031 3537 3734 3737 3936 3831 3833  ": 1577477968183
-00056ff0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00057000: 2020 2020 2272 6174 655f 6c69 6d69 7422      "rate_limit"
-00057010: 3a20 3735 0a20 2020 2020 2020 2023 2020  : 75.        #  
-00057020: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
-00057030: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00057040: 6c66 2e70 7269 7661 7465 506f 7374 436f  lf.privatePostCo
-00057050: 6e74 7261 6374 5633 5072 6976 6174 6550  ntractV3PrivateP
-00057060: 6f73 6974 696f 6e53 7769 7463 684d 6f64  ositionSwitchMod
-00057070: 6528 7365 6c66 2e65 7874 656e 6428 7265  e(self.extend(re
-00057080: 7175 6573 742c 2070 6172 616d 7329 290a  quest, params)).
-00057090: 0a20 2020 2064 6566 2066 6574 6368 5f64  .    def fetch_d
-000570a0: 6572 6976 6174 6976 6573 5f6f 7065 6e5f  erivatives_open_
-000570b0: 696e 7465 7265 7374 5f68 6973 746f 7279  interest_history
-000570c0: 2873 656c 662c 2073 796d 626f 6c3a 2073  (self, symbol: s
-000570d0: 7472 2c20 7469 6d65 6672 616d 653d 2731  tr, timeframe='1
-000570e0: 6827 2c20 7369 6e63 653a 204f 7074 696f  h', since: Optio
-000570f0: 6e61 6c5b 696e 745d 203d 204e 6f6e 652c  nal[int] = None,
-00057100: 206c 696d 6974 3a20 4f70 7469 6f6e 616c   limit: Optional
-00057110: 5b69 6e74 5d20 3d20 4e6f 6e65 2c20 7061  [int] = None, pa
-00057120: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
-00057130: 2020 7365 6c66 2e6c 6f61 645f 6d61 726b    self.load_mark
-00057140: 6574 7328 290a 2020 2020 2020 2020 6d61  ets().        ma
-00057150: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
-00057160: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
-00057170: 2020 2073 7562 5479 7065 203d 2027 6c69     subType = 'li
-00057180: 6e65 6172 2720 6966 206d 6172 6b65 745b  near' if market[
-00057190: 276c 696e 6561 7227 5d20 656c 7365 2027  'linear'] else '
-000571a0: 696e 7665 7273 6527 0a20 2020 2020 2020  inverse'.       
-000571b0: 2063 6174 6567 6f72 7920 3d20 7365 6c66   category = self
-000571c0: 2e73 6166 655f 7374 7269 6e67 2870 6172  .safe_string(par
-000571d0: 616d 732c 2027 6361 7465 676f 7279 272c  ams, 'category',
-000571e0: 2073 7562 5479 7065 290a 2020 2020 2020   subType).      
-000571f0: 2020 696e 7465 7276 616c 7320 3d20 7365    intervals = se
-00057200: 6c66 2e73 6166 655f 7661 6c75 6528 7365  lf.safe_value(se
-00057210: 6c66 2e6f 7074 696f 6e73 2c20 2769 6e74  lf.options, 'int
-00057220: 6572 7661 6c73 2729 0a20 2020 2020 2020  ervals').       
-00057230: 2069 6e74 6572 7661 6c20 3d20 7365 6c66   interval = self
-00057240: 2e73 6166 655f 7374 7269 6e67 2869 6e74  .safe_string(int
-00057250: 6572 7661 6c73 2c20 7469 6d65 6672 616d  ervals, timefram
-00057260: 6529 2020 2320 356d 696e 2c31 356d 696e  e)  # 5min,15min
-00057270: 2c33 306d 696e 2c31 682c 3468 2c31 640a  ,30min,1h,4h,1d.
-00057280: 2020 2020 2020 2020 6966 2069 6e74 6572          if inter
-00057290: 7661 6c20 6973 204e 6f6e 653a 0a20 2020  val is None:.   
-000572a0: 2020 2020 2020 2020 2072 6169 7365 2042           raise B
-000572b0: 6164 5265 7175 6573 7428 7365 6c66 2e69  adRequest(self.i
-000572c0: 6420 2b20 2720 6665 7463 684f 7065 6e49  d + ' fetchOpenI
-000572d0: 6e74 6572 6573 7448 6973 746f 7279 2829  nterestHistory()
-000572e0: 2063 616e 6e6f 7420 7573 6520 7468 6520   cannot use the 
-000572f0: 2720 2b20 7469 6d65 6672 616d 6520 2b20  ' + timeframe + 
-00057300: 2720 7469 6d65 6672 616d 6527 290a 2020  ' timeframe').  
-00057310: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-00057320: 7b0a 2020 2020 2020 2020 2020 2020 2773  {.            's
-00057330: 796d 626f 6c27 3a20 6d61 726b 6574 5b27  ymbol': market['
-00057340: 6964 275d 2c0a 2020 2020 2020 2020 2020  id'],.          
-00057350: 2020 2769 6e74 6572 7661 6c54 696d 6527    'intervalTime'
-00057360: 3a20 696e 7465 7276 616c 2c0a 2020 2020  : interval,.    
-00057370: 2020 2020 2020 2020 2763 6174 6567 6f72          'categor
-00057380: 7927 3a20 6361 7465 676f 7279 2c0a 2020  y': category,.  
-00057390: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-000573a0: 6966 2073 696e 6365 2069 7320 6e6f 7420  if since is not 
-000573b0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-000573c0: 2020 7265 7175 6573 745b 2773 7461 7274    request['start
-000573d0: 5469 6d65 275d 203d 2073 696e 6365 0a20  Time'] = since. 
-000573e0: 2020 2020 2020 2069 6620 6c69 6d69 7420         if limit 
-000573f0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00057400: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00057410: 5b27 6c69 6d69 7427 5d20 3d20 6c69 6d69  ['limit'] = limi
-00057420: 740a 2020 2020 2020 2020 7265 7370 6f6e  t.        respon
-00057430: 7365 203d 2073 656c 662e 7075 626c 6963  se = self.public
-00057440: 4765 7456 354d 6172 6b65 744f 7065 6e49  GetV5MarketOpenI
-00057450: 6e74 6572 6573 7428 7365 6c66 2e65 7874  nterest(self.ext
-00057460: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
-00057470: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
-00057480: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
-00057490: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000574a0: 2020 2272 6574 436f 6465 223a 2030 2c0a    "retCode": 0,.
-000574b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000574c0: 2020 2272 6574 4d73 6722 3a20 224f 4b22    "retMsg": "OK"
-000574d0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-000574e0: 2020 2020 2272 6573 756c 7422 3a20 7b0a      "result": {.
-000574f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00057500: 2020 2020 2020 2273 796d 626f 6c22 3a20        "symbol": 
-00057510: 2242 5443 5553 4422 2c0a 2020 2020 2020  "BTCUSD",.      
-00057520: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00057530: 2263 6174 6567 6f72 7922 3a20 2269 6e76  "category": "inv
-00057540: 6572 7365 222c 0a20 2020 2020 2020 2023  erse",.        #
-00057550: 2020 2020 2020 2020 2020 2020 2022 6c69               "li
-00057560: 7374 223a 205b 0a20 2020 2020 2020 2023  st": [.        #
-00057570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00057580: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-00057590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000575a0: 2022 6f70 656e 496e 7465 7265 7374 223a   "openInterest":
-000575b0: 2022 3436 3131 3334 3338 342e 3030 3030   "461134384.0000
-000575c0: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
-000575d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000575e0: 2020 2020 2022 7469 6d65 7374 616d 7022       "timestamp"
-000575f0: 3a20 2231 3636 3935 3731 3430 3030 3030  : "1669571400000
-00057600: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
-00057610: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
-00057620: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00057630: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-00057640: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00057650: 2020 2020 2020 2020 2022 6f70 656e 496e           "openIn
-00057660: 7465 7265 7374 223a 2022 3436 3131 3334  terest": "461134
-00057670: 3239 322e 3030 3030 3030 3030 222c 0a20  292.00000000",. 
-00057680: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00057690: 2020 2020 2020 2020 2020 2020 2022 7469               "ti
-000576a0: 6d65 7374 616d 7022 3a20 2231 3636 3935  mestamp": "16695
-000576b0: 3731 3130 3030 3030 220a 2020 2020 2020  71100000".      
-000576c0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000576d0: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
-000576e0: 2020 2020 2020 2020 2020 2020 5d2c 0a20              ],. 
-000576f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00057700: 2020 2020 2022 6e65 7874 5061 6765 4375       "nextPageCu
-00057710: 7273 6f72 223a 2022 220a 2020 2020 2020  rsor": "".      
-00057720: 2020 2320 2020 2020 2020 2020 7d2c 0a20    #         },. 
-00057730: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00057740: 2022 7265 7445 7874 496e 666f 223a 207b   "retExtInfo": {
-00057750: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
-00057760: 2020 2020 2022 7469 6d65 223a 2031 3637       "time": 167
-00057770: 3230 3533 3534 3835 3739 0a20 2020 2020  2053548579.     
-00057780: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
-00057790: 2020 2023 0a20 2020 2020 2020 2072 6573     #.        res
-000577a0: 756c 7420 3d20 7365 6c66 2e73 6166 655f  ult = self.safe_
-000577b0: 7661 6c75 6528 7265 7370 6f6e 7365 2c20  value(response, 
-000577c0: 2772 6573 756c 7427 2c20 7b7d 290a 2020  'result', {}).  
-000577d0: 2020 2020 2020 6964 203d 2073 656c 662e        id = self.
-000577e0: 7361 6665 5f73 7472 696e 6728 7265 7375  safe_string(resu
-000577f0: 6c74 2c20 2773 796d 626f 6c27 290a 2020  lt, 'symbol').  
-00057800: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
-00057810: 656c 662e 7361 6665 5f6d 6172 6b65 7428  elf.safe_market(
-00057820: 6964 2c20 6d61 726b 6574 2c20 4e6f 6e65  id, market, None
-00057830: 2c20 2763 6f6e 7472 6163 7427 290a 2020  , 'contract').  
-00057840: 2020 2020 2020 6461 7461 203d 2073 656c        data = sel
-00057850: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
-00057860: 756c 742c 2027 6c69 7374 272c 205b 5d29  ult, 'list', [])
-00057870: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00057880: 7365 6c66 2e70 6172 7365 5f6f 7065 6e5f  self.parse_open_
-00057890: 696e 7465 7265 7374 7328 6461 7461 2c20  interests(data, 
-000578a0: 6d61 726b 6574 2c20 7369 6e63 652c 206c  market, since, l
-000578b0: 696d 6974 290a 0a20 2020 2064 6566 2066  imit)..    def f
-000578c0: 6574 6368 5f6f 7065 6e5f 696e 7465 7265  etch_open_intere
-000578d0: 7374 2873 656c 662c 2073 796d 626f 6c3a  st(self, symbol:
-000578e0: 2073 7472 2c20 7061 7261 6d73 3d7b 7d29   str, params={})
-000578f0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-00057900: 2020 2020 2020 5265 7472 6965 7665 7320        Retrieves 
-00057910: 7468 6520 6f70 656e 2069 6e74 6572 6573  the open interes
-00057920: 7420 6f66 2061 2064 6572 6976 6174 6976  t of a derivativ
-00057930: 6520 7472 6164 696e 6720 7061 6972 0a20  e trading pair. 
-00057940: 2020 2020 2020 2073 6565 2068 7474 7073         see https
-00057950: 3a2f 2f62 7962 6974 2d65 7863 6861 6e67  ://bybit-exchang
-00057960: 652e 6769 7468 7562 2e69 6f2f 646f 6373  e.github.io/docs
-00057970: 2f76 352f 6d61 726b 6574 2f6f 7065 6e2d  /v5/market/open-
-00057980: 696e 7465 7265 7374 0a20 2020 2020 2020  interest.       
-00057990: 203a 7061 7261 6d20 7374 7220 7379 6d62   :param str symb
-000579a0: 6f6c 3a20 556e 6966 6965 6420 4343 5854  ol: Unified CCXT
-000579b0: 206d 6172 6b65 7420 7379 6d62 6f6c 0a20   market symbol. 
-000579c0: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
-000579d0: 6374 2070 6172 616d 733a 2065 7863 6861  ct params: excha
-000579e0: 6e67 6520 7370 6563 6966 6963 2070 6172  nge specific par
-000579f0: 616d 6574 6572 730a 2020 2020 2020 2020  ameters.        
-00057a00: 3a70 6172 616d 2073 7472 7c4e 6f6e 6520  :param str|None 
-00057a10: 7061 7261 6d73 5b27 696e 7465 7276 616c  params['interval
-00057a20: 275d 3a20 356d 2c20 3135 6d2c 2033 306d  ']: 5m, 15m, 30m
-00057a30: 2c20 3168 2c20 3468 2c20 3164 0a20 2020  , 1h, 4h, 1d.   
-00057a40: 2020 2020 203a 7061 7261 6d20 7374 727c       :param str|
-00057a50: 4e6f 6e65 2070 6172 616d 735b 2763 6174  None params['cat
-00057a60: 6567 6f72 7927 5d3a 2022 6c69 6e65 6172  egory']: "linear
-00057a70: 2220 6f72 2022 696e 7665 7273 6522 0a20  " or "inverse". 
-00057a80: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
-00057a90: 6469 6374 7d20 616e 206f 7065 6e20 696e  dict} an open in
-00057aa0: 7465 7265 7374 2073 7472 7563 7475 7265  terest structure
-00057ab0: 7b40 6c69 6e6b 2068 7474 7073 3a2f 2f64  {@link https://d
-00057ac0: 6f63 732e 6363 7874 2e63 6f6d 2f23 2f3f  ocs.ccxt.com/#/?
-00057ad0: 6964 3d69 6e74 6572 6573 742d 6869 7374  id=interest-hist
-00057ae0: 6f72 792d 7374 7275 6374 7572 653a 0a20  ory-structure:. 
-00057af0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00057b00: 2020 2073 656c 662e 6c6f 6164 5f6d 6172     self.load_mar
-00057b10: 6b65 7473 2829 0a20 2020 2020 2020 206d  kets().        m
-00057b20: 6172 6b65 7420 3d20 7365 6c66 2e6d 6172  arket = self.mar
-00057b30: 6b65 7428 7379 6d62 6f6c 290a 2020 2020  ket(symbol).    
-00057b40: 2020 2020 6966 206e 6f74 206d 6172 6b65      if not marke
-00057b50: 745b 2763 6f6e 7472 6163 7427 5d3a 0a20  t['contract']:. 
-00057b60: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00057b70: 2042 6164 5265 7175 6573 7428 7365 6c66   BadRequest(self
-00057b80: 2e69 6420 2b20 2720 6665 7463 684f 7065  .id + ' fetchOpe
-00057b90: 6e49 6e74 6572 6573 7428 2920 7375 7070  nInterest() supp
-00057ba0: 6f72 7473 2063 6f6e 7472 6163 7420 6d61  orts contract ma
-00057bb0: 726b 6574 7320 6f6e 6c79 2729 0a20 2020  rkets only').   
-00057bc0: 2020 2020 2074 696d 6566 7261 6d65 203d       timeframe =
-00057bd0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-00057be0: 6728 7061 7261 6d73 2c20 2769 6e74 6572  g(params, 'inter
-00057bf0: 7661 6c27 2c20 2731 6827 290a 2020 2020  val', '1h').    
-00057c00: 2020 2020 696e 7465 7276 616c 7320 3d20      intervals = 
-00057c10: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
-00057c20: 7365 6c66 2e6f 7074 696f 6e73 2c20 2769  self.options, 'i
-00057c30: 6e74 6572 7661 6c73 2729 0a20 2020 2020  ntervals').     
-00057c40: 2020 2069 6e74 6572 7661 6c20 3d20 7365     interval = se
-00057c50: 6c66 2e73 6166 655f 7374 7269 6e67 2869  lf.safe_string(i
-00057c60: 6e74 6572 7661 6c73 2c20 7469 6d65 6672  ntervals, timefr
-00057c70: 616d 6529 2020 2320 356d 696e 2c31 356d  ame)  # 5min,15m
-00057c80: 696e 2c33 306d 696e 2c31 682c 3468 2c31  in,30min,1h,4h,1
-00057c90: 640a 2020 2020 2020 2020 6966 2069 6e74  d.        if int
-00057ca0: 6572 7661 6c20 6973 204e 6f6e 653a 0a20  erval is None:. 
-00057cb0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00057cc0: 2042 6164 5265 7175 6573 7428 7365 6c66   BadRequest(self
-00057cd0: 2e69 6420 2b20 2720 6665 7463 684f 7065  .id + ' fetchOpe
-00057ce0: 6e49 6e74 6572 6573 7428 2920 6361 6e6e  nInterest() cann
-00057cf0: 6f74 2075 7365 2074 6865 2027 202b 2074  ot use the ' + t
-00057d00: 696d 6566 7261 6d65 202b 2027 2074 696d  imeframe + ' tim
-00057d10: 6566 7261 6d65 2729 0a20 2020 2020 2020  eframe').       
-00057d20: 2073 7562 5479 7065 203d 2027 6c69 6e65   subType = 'line
-00057d30: 6172 2720 6966 206d 6172 6b65 745b 276c  ar' if market['l
-00057d40: 696e 6561 7227 5d20 656c 7365 2027 696e  inear'] else 'in
-00057d50: 7665 7273 6527 0a20 2020 2020 2020 2063  verse'.        c
-00057d60: 6174 6567 6f72 7920 3d20 7365 6c66 2e73  ategory = self.s
-00057d70: 6166 655f 7374 7269 6e67 2870 6172 616d  afe_string(param
-00057d80: 732c 2027 6361 7465 676f 7279 272c 2073  s, 'category', s
-00057d90: 7562 5479 7065 290a 2020 2020 2020 2020  ubType).        
-00057da0: 7265 7175 6573 7420 3d20 7b0a 2020 2020  request = {.    
-00057db0: 2020 2020 2020 2020 2773 796d 626f 6c27          'symbol'
-00057dc0: 3a20 6d61 726b 6574 5b27 6964 275d 2c0a  : market['id'],.
-00057dd0: 2020 2020 2020 2020 2020 2020 2769 6e74              'int
-00057de0: 6572 7661 6c54 696d 6527 3a20 696e 7465  ervalTime': inte
-00057df0: 7276 616c 2c0a 2020 2020 2020 2020 2020  rval,.          
-00057e00: 2020 2763 6174 6567 6f72 7927 3a20 6361    'category': ca
-00057e10: 7465 676f 7279 2c0a 2020 2020 2020 2020  tegory,.        
-00057e20: 7d0a 2020 2020 2020 2020 7265 7370 6f6e  }.        respon
-00057e30: 7365 203d 2073 656c 662e 7075 626c 6963  se = self.public
-00057e40: 4765 7456 354d 6172 6b65 744f 7065 6e49  GetV5MarketOpenI
-00057e50: 6e74 6572 6573 7428 7365 6c66 2e65 7874  nterest(self.ext
-00057e60: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
-00057e70: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
-00057e80: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
-00057e90: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00057ea0: 2020 2272 6574 436f 6465 223a 2030 2c0a    "retCode": 0,.
-00057eb0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00057ec0: 2020 2272 6574 4d73 6722 3a20 224f 4b22    "retMsg": "OK"
-00057ed0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00057ee0: 2020 2020 2272 6573 756c 7422 3a20 7b0a      "result": {.
-00057ef0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00057f00: 2020 2020 2020 2273 796d 626f 6c22 3a20        "symbol": 
-00057f10: 2242 5443 5553 4422 2c0a 2020 2020 2020  "BTCUSD",.      
-00057f20: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00057f30: 2263 6174 6567 6f72 7922 3a20 2269 6e76  "category": "inv
-00057f40: 6572 7365 222c 0a20 2020 2020 2020 2023  erse",.        #
-00057f50: 2020 2020 2020 2020 2020 2020 2022 6c69               "li
-00057f60: 7374 223a 205b 0a20 2020 2020 2020 2023  st": [.        #
-00057f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00057f80: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-00057f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00057fa0: 2022 6f70 656e 496e 7465 7265 7374 223a   "openInterest":
-00057fb0: 2022 3436 3131 3334 3338 342e 3030 3030   "461134384.0000
-00057fc0: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
-00057fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00057fe0: 2020 2020 2022 7469 6d65 7374 616d 7022       "timestamp"
-00057ff0: 3a20 2231 3636 3935 3731 3430 3030 3030  : "1669571400000
-00058000: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
-00058010: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
-00058020: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00058030: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-00058040: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00058050: 2020 2020 2020 2020 2022 6f70 656e 496e           "openIn
-00058060: 7465 7265 7374 223a 2022 3436 3131 3334  terest": "461134
-00058070: 3239 322e 3030 3030 3030 3030 222c 0a20  292.00000000",. 
-00058080: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00058090: 2020 2020 2020 2020 2020 2020 2022 7469               "ti
-000580a0: 6d65 7374 616d 7022 3a20 2231 3636 3935  mestamp": "16695
-000580b0: 3731 3130 3030 3030 220a 2020 2020 2020  71100000".      
-000580c0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000580d0: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
-000580e0: 2020 2020 2020 2020 2020 2020 5d2c 0a20              ],. 
-000580f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00058100: 2020 2020 2022 6e65 7874 5061 6765 4375       "nextPageCu
-00058110: 7273 6f72 223a 2022 220a 2020 2020 2020  rsor": "".      
-00058120: 2020 2320 2020 2020 2020 2020 7d2c 0a20    #         },. 
-00058130: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00058140: 2022 7265 7445 7874 496e 666f 223a 207b   "retExtInfo": {
-00058150: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
-00058160: 2020 2020 2022 7469 6d65 223a 2031 3637       "time": 167
-00058170: 3230 3533 3534 3835 3739 0a20 2020 2020  2053548579.     
-00058180: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
-00058190: 2020 2023 0a20 2020 2020 2020 2072 6573     #.        res
-000581a0: 756c 7420 3d20 7365 6c66 2e73 6166 655f  ult = self.safe_
-000581b0: 7661 6c75 6528 7265 7370 6f6e 7365 2c20  value(response, 
-000581c0: 2772 6573 756c 7427 2c20 7b7d 290a 2020  'result', {}).  
-000581d0: 2020 2020 2020 6964 203d 2073 656c 662e        id = self.
-000581e0: 7361 6665 5f73 7472 696e 6728 7265 7375  safe_string(resu
-000581f0: 6c74 2c20 2773 796d 626f 6c27 290a 2020  lt, 'symbol').  
-00058200: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
-00058210: 656c 662e 7361 6665 5f6d 6172 6b65 7428  elf.safe_market(
-00058220: 6964 2c20 6d61 726b 6574 2c20 4e6f 6e65  id, market, None
-00058230: 2c20 2763 6f6e 7472 6163 7427 290a 2020  , 'contract').  
-00058240: 2020 2020 2020 6461 7461 203d 2073 656c        data = sel
-00058250: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
-00058260: 756c 742c 2027 6c69 7374 272c 205b 5d29  ult, 'list', [])
-00058270: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00058280: 7365 6c66 2e70 6172 7365 5f6f 7065 6e5f  self.parse_open_
-00058290: 696e 7465 7265 7374 2864 6174 615b 305d  interest(data[0]
-000582a0: 2c20 6d61 726b 6574 290a 0a20 2020 2064  , market)..    d
-000582b0: 6566 2066 6574 6368 5f6f 7065 6e5f 696e  ef fetch_open_in
-000582c0: 7465 7265 7374 5f68 6973 746f 7279 2873  terest_history(s
-000582d0: 656c 662c 2073 796d 626f 6c3a 2073 7472  elf, symbol: str
-000582e0: 2c20 7469 6d65 6672 616d 653d 2731 6827  , timeframe='1h'
-000582f0: 2c20 7369 6e63 653a 204f 7074 696f 6e61  , since: Optiona
-00058300: 6c5b 696e 745d 203d 204e 6f6e 652c 206c  l[int] = None, l
-00058310: 696d 6974 3a20 4f70 7469 6f6e 616c 5b69  imit: Optional[i
-00058320: 6e74 5d20 3d20 4e6f 6e65 2c20 7061 7261  nt] = None, para
-00058330: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
-00058340: 2222 220a 2020 2020 2020 2020 4765 7473  """.        Gets
-00058350: 2074 6865 2074 6f74 616c 2061 6d6f 756e   the total amoun
-00058360: 7420 6f66 2075 6e73 6574 746c 6564 2063  t of unsettled c
-00058370: 6f6e 7472 6163 7473 2e20 496e 206f 7468  ontracts. In oth
-00058380: 6572 2077 6f72 6473 2c20 7468 6520 746f  er words, the to
-00058390: 7461 6c20 6e75 6d62 6572 206f 6620 636f  tal number of co
-000583a0: 6e74 7261 6374 7320 6865 6c64 2069 6e20  ntracts held in 
-000583b0: 6f70 656e 2070 6f73 6974 696f 6e73 0a20  open positions. 
-000583c0: 2020 2020 2020 2073 6565 2068 7474 7073         see https
-000583d0: 3a2f 2f62 7962 6974 2d65 7863 6861 6e67  ://bybit-exchang
-000583e0: 652e 6769 7468 7562 2e69 6f2f 646f 6373  e.github.io/docs
-000583f0: 2f76 352f 6d61 726b 6574 2f6f 7065 6e2d  /v5/market/open-
-00058400: 696e 7465 7265 7374 0a20 2020 2020 2020  interest.       
-00058410: 203a 7061 7261 6d20 7374 7220 7379 6d62   :param str symb
-00058420: 6f6c 3a20 556e 6966 6965 6420 6d61 726b  ol: Unified mark
-00058430: 6574 2073 796d 626f 6c0a 2020 2020 2020  et symbol.      
-00058440: 2020 3a70 6172 616d 2073 7472 2074 696d    :param str tim
-00058450: 6566 7261 6d65 3a20 2235 6d22 2c20 3135  eframe: "5m", 15
-00058460: 6d2c 2033 306d 2c20 3168 2c20 3468 2c20  m, 30m, 1h, 4h, 
-00058470: 3164 0a20 2020 2020 2020 203a 7061 7261  1d.        :para
-00058480: 6d20 696e 7420 7369 6e63 653a 204e 6f74  m int since: Not
-00058490: 2075 7365 6420 6279 2042 7962 6974 0a20   used by Bybit. 
-000584a0: 2020 2020 2020 203a 7061 7261 6d20 696e         :param in
-000584b0: 7420 6c69 6d69 743a 2054 6865 206e 756d  t limit: The num
-000584c0: 6265 7220 6f66 206f 7065 6e20 696e 7465  ber of open inte
-000584d0: 7265 7374 2073 7472 7563 7475 7265 7320  rest structures 
-000584e0: 746f 2072 6574 7572 6e2e 204d 6178 2032  to return. Max 2
-000584f0: 3030 2c20 6465 6661 756c 7420 3530 0a20  00, default 50. 
-00058500: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
-00058510: 6374 2070 6172 616d 733a 2045 7863 6861  ct params: Excha
-00058520: 6e67 6520 7370 6563 6966 6963 2070 6172  nge specific par
-00058530: 616d 6574 6572 730a 2020 2020 2020 2020  ameters.        
-00058540: 3a72 6574 7572 6e73 3a20 416e 2061 7272  :returns: An arr
-00058550: 6179 206f 6620 6f70 656e 2069 6e74 6572  ay of open inter
-00058560: 6573 7420 7374 7275 6374 7572 6573 0a20  est structures. 
-00058570: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00058580: 2020 2069 6620 7469 6d65 6672 616d 6520     if timeframe 
-00058590: 3d3d 2027 316d 273a 0a20 2020 2020 2020  == '1m':.       
-000585a0: 2020 2020 2072 6169 7365 2042 6164 5265       raise BadRe
-000585b0: 7175 6573 7428 7365 6c66 2e69 6420 2b20  quest(self.id + 
-000585c0: 2766 6574 6368 4f70 656e 496e 7465 7265  'fetchOpenIntere
-000585d0: 7374 4869 7374 6f72 7920 6361 6e6e 6f74  stHistory cannot
-000585e0: 2075 7365 2074 6865 2031 6d20 7469 6d65   use the 1m time
-000585f0: 6672 616d 6527 290a 2020 2020 2020 2020  frame').        
-00058600: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
-00058610: 7328 290a 2020 2020 2020 2020 6d61 726b  s().        mark
-00058620: 6574 203d 2073 656c 662e 6d61 726b 6574  et = self.market
-00058630: 2873 796d 626f 6c29 0a20 2020 2020 2020  (symbol).       
-00058640: 2069 6620 6d61 726b 6574 5b27 7370 6f74   if market['spot
-00058650: 275d 206f 7220 6d61 726b 6574 5b27 6f70  '] or market['op
-00058660: 7469 6f6e 275d 3a0a 2020 2020 2020 2020  tion']:.        
-00058670: 2020 2020 7261 6973 6520 4261 6452 6571      raise BadReq
-00058680: 7565 7374 2873 656c 662e 6964 202b 2027  uest(self.id + '
-00058690: 2066 6574 6368 4f70 656e 496e 7465 7265   fetchOpenIntere
-000586a0: 7374 4869 7374 6f72 7928 2920 7379 6d62  stHistory() symb
-000586b0: 6f6c 2064 6f65 7320 6e6f 7420 7375 7070  ol does not supp
-000586c0: 6f72 7420 6d61 726b 6574 2027 202b 2073  ort market ' + s
-000586d0: 796d 626f 6c29 0a20 2020 2020 2020 2072  ymbol).        r
-000586e0: 6571 7565 7374 203d 207b 0a20 2020 2020  equest = {.     
-000586f0: 2020 2020 2020 2027 7379 6d62 6f6c 273a         'symbol':
-00058700: 206d 6172 6b65 745b 2769 6427 5d2c 0a20   market['id'],. 
-00058710: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-00058720: 2069 6620 6c69 6d69 7420 6973 206e 6f74   if limit is not
-00058730: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00058740: 2020 2072 6571 7565 7374 5b27 6c69 6d69     request['limi
-00058750: 7427 5d20 3d20 6c69 6d69 740a 2020 2020  t'] = limit.    
-00058760: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00058770: 6665 7463 685f 6465 7269 7661 7469 7665  fetch_derivative
-00058780: 735f 6f70 656e 5f69 6e74 6572 6573 745f  s_open_interest_
-00058790: 6869 7374 6f72 7928 7379 6d62 6f6c 2c20  history(symbol, 
-000587a0: 7469 6d65 6672 616d 652c 2073 696e 6365  timeframe, since
-000587b0: 2c20 6c69 6d69 742c 2070 6172 616d 7329  , limit, params)
-000587c0: 0a0a 2020 2020 6465 6620 7061 7273 655f  ..    def parse_
-000587d0: 6f70 656e 5f69 6e74 6572 6573 7428 7365  open_interest(se
-000587e0: 6c66 2c20 696e 7465 7265 7374 2c20 6d61  lf, interest, ma
-000587f0: 726b 6574 3d4e 6f6e 6529 3a0a 2020 2020  rket=None):.    
-00058800: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-00058810: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-00058820: 2020 2020 2020 226f 7065 6e49 6e74 6572        "openInter
-00058830: 6573 7422 3a20 3634 3735 372e 3632 3430  est": 64757.6240
-00058840: 3030 3030 2c0a 2020 2020 2020 2020 2320  0000,.        # 
-00058850: 2020 2020 2020 2022 7469 6d65 7374 616d         "timestam
-00058860: 7022 3a20 3136 3635 3738 3438 3030 3030  p": 166578480000
-00058870: 302c 0a20 2020 2020 2020 2023 2020 2020  0,.        #    
-00058880: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
-00058890: 2020 2020 7469 6d65 7374 616d 7020 3d20      timestamp = 
-000588a0: 7365 6c66 2e73 6166 655f 696e 7465 6765  self.safe_intege
-000588b0: 7228 696e 7465 7265 7374 2c20 2774 696d  r(interest, 'tim
-000588c0: 6573 7461 6d70 2729 0a20 2020 2020 2020  estamp').       
-000588d0: 2076 616c 7565 203d 2073 656c 662e 7361   value = self.sa
-000588e0: 6665 5f6e 756d 6265 725f 3228 696e 7465  fe_number_2(inte
-000588f0: 7265 7374 2c20 276f 7065 6e5f 696e 7465  rest, 'open_inte
-00058900: 7265 7374 272c 2027 6f70 656e 496e 7465  rest', 'openInte
-00058910: 7265 7374 2729 0a20 2020 2020 2020 2072  rest').        r
-00058920: 6574 7572 6e20 7b0a 2020 2020 2020 2020  eturn {.        
-00058930: 2020 2020 2773 796d 626f 6c27 3a20 6d61      'symbol': ma
-00058940: 726b 6574 5b27 7379 6d62 6f6c 275d 2c0a  rket['symbol'],.
-00058950: 2020 2020 2020 2020 2020 2020 276f 7065              'ope
-00058960: 6e49 6e74 6572 6573 7441 6d6f 756e 7427  nInterestAmount'
-00058970: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
-00058980: 2020 2020 276f 7065 6e49 6e74 6572 6573      'openInteres
-00058990: 7456 616c 7565 273a 2076 616c 7565 2c0a  tValue': value,.
-000589a0: 2020 2020 2020 2020 2020 2020 2774 696d              'tim
-000589b0: 6573 7461 6d70 273a 2074 696d 6573 7461  estamp': timesta
-000589c0: 6d70 2c0a 2020 2020 2020 2020 2020 2020  mp,.            
-000589d0: 2764 6174 6574 696d 6527 3a20 7365 6c66  'datetime': self
-000589e0: 2e69 736f 3836 3031 2874 696d 6573 7461  .iso8601(timesta
-000589f0: 6d70 292c 0a20 2020 2020 2020 2020 2020  mp),.           
-00058a00: 2027 696e 666f 273a 2069 6e74 6572 6573   'info': interes
-00058a10: 742c 0a20 2020 2020 2020 207d 0a0a 2020  t,.        }..  
-00058a20: 2020 6465 6620 6665 7463 685f 626f 7272    def fetch_borr
-00058a30: 6f77 5f72 6174 6528 7365 6c66 2c20 636f  ow_rate(self, co
-00058a40: 6465 3a20 7374 722c 2070 6172 616d 733d  de: str, params=
-00058a50: 7b7d 293a 0a20 2020 2020 2020 2022 2222  {}):.        """
-00058a60: 0a20 2020 2020 2020 2066 6574 6368 2074  .        fetch t
-00058a70: 6865 2072 6174 6520 6f66 2069 6e74 6572  he rate of inter
-00058a80: 6573 7420 746f 2062 6f72 726f 7720 6120  est to borrow a 
-00058a90: 6375 7272 656e 6379 2066 6f72 206d 6172  currency for mar
-00058aa0: 6769 6e20 7472 6164 696e 670a 2020 2020  gin trading.    
-00058ab0: 2020 2020 7365 6520 6874 7470 733a 2f2f      see https://
-00058ac0: 6279 6269 742d 6578 6368 616e 6765 2e67  bybit-exchange.g
-00058ad0: 6974 6875 622e 696f 2f64 6f63 732f 7370  ithub.io/docs/sp
-00058ae0: 6f74 2f76 332f 2374 2d71 7565 7279 696e  ot/v3/#t-queryin
-00058af0: 7465 7265 7374 7175 6f74 610a 2020 2020  terestquota.    
-00058b00: 2020 2020 3a70 6172 616d 2073 7472 2063      :param str c
-00058b10: 6f64 653a 2075 6e69 6669 6564 2063 7572  ode: unified cur
-00058b20: 7265 6e63 7920 636f 6465 0a20 2020 2020  rency code.     
-00058b30: 2020 203a 7061 7261 6d20 6469 6374 2070     :param dict p
-00058b40: 6172 616d 733a 2065 7874 7261 2070 6172  arams: extra par
-00058b50: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
-00058b60: 2074 6f20 7468 6520 6279 6269 7420 6170   to the bybit ap
-00058b70: 6920 656e 6470 6f69 6e74 0a20 2020 2020  i endpoint.     
-00058b80: 2020 203a 7265 7475 726e 7320 6469 6374     :returns dict
-00058b90: 3a20 6120 6062 6f72 726f 7720 7261 7465  : a `borrow rate
-00058ba0: 2073 7472 7563 7475 7265 203c 6874 7470   structure <http
-00058bb0: 733a 2f2f 646f 6373 2e63 6378 742e 636f  s://docs.ccxt.co
-00058bc0: 6d2f 232f 3f69 643d 626f 7272 6f77 2d72  m/#/?id=borrow-r
-00058bd0: 6174 652d 7374 7275 6374 7572 653e 600a  ate-structure>`.
-00058be0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00058bf0: 2020 2020 7365 6c66 2e6c 6f61 645f 6d61      self.load_ma
-00058c00: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
-00058c10: 6375 7272 656e 6379 203d 2073 656c 662e  currency = self.
-00058c20: 6375 7272 656e 6379 2863 6f64 6529 0a20  currency(code). 
-00058c30: 2020 2020 2020 2072 6571 7565 7374 203d         request =
-00058c40: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
-00058c50: 636f 696e 273a 2063 7572 7265 6e63 795b  coin': currency[
-00058c60: 2769 6427 5d2c 0a20 2020 2020 2020 207d  'id'],.        }
-00058c70: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
-00058c80: 6520 3d20 7365 6c66 2e70 7269 7661 7465  e = self.private
-00058c90: 4765 7453 706f 7456 3350 7269 7661 7465  GetSpotV3Private
-00058ca0: 4372 6f73 734d 6172 6769 6e4c 6f61 6e49  CrossMarginLoanI
-00058cb0: 6e66 6f28 7365 6c66 2e65 7874 656e 6428  nfo(self.extend(
-00058cc0: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
-00058cd0: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
-00058ce0: 2020 2020 2320 2020 207b 0a20 2020 2020      #    {.     
-00058cf0: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-00058d00: 7443 6f64 6522 3a20 2230 222c 0a20 2020  tCode": "0",.   
-00058d10: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00058d20: 7265 744d 7367 223a 2022 7375 6363 6573  retMsg": "succes
-00058d30: 7322 2c0a 2020 2020 2020 2020 2320 2020  s",.        #   
-00058d40: 2020 2020 2020 2272 6573 756c 7422 3a20        "result": 
-00058d50: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-00058d60: 2020 2020 2020 2020 2263 6f69 6e22 3a20          "coin": 
-00058d70: 2255 5344 5422 2c0a 2020 2020 2020 2020  "USDT",.        
-00058d80: 2320 2020 2020 2020 2020 2020 2020 2269  #             "i
-00058d90: 6e74 6572 6573 7452 6174 6522 3a20 2230  nterestRate": "0
-00058da0: 2e30 3030 3130 3730 3030 3030 3022 2c0a  .000107000000",.
-00058db0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00058dc0: 2020 2020 2020 226c 6f61 6e41 626c 6541        "loanAbleA
-00058dd0: 6d6f 756e 7422 3a20 2222 2c0a 2020 2020  mount": "",.    
-00058de0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00058df0: 2020 226d 6178 4c6f 616e 416d 6f75 6e74    "maxLoanAmount
-00058e00: 223a 2022 3739 3939 392e 3939 3922 0a20  ": "79999.999". 
-00058e10: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00058e20: 207d 2c0a 2020 2020 2020 2020 2320 2020   },.        #   
-00058e30: 2020 2020 2020 2272 6574 4578 7449 6e66        "retExtInf
-00058e40: 6f22 3a20 6e75 6c6c 2c0a 2020 2020 2020  o": null,.      
-00058e50: 2020 2320 2020 2020 2020 2020 2274 696d    #         "tim
-00058e60: 6522 3a20 2231 3636 3637 3334 3439 3037  e": "16667344907
-00058e70: 3738 220a 2020 2020 2020 2020 2320 2020  78".        #   
-00058e80: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-00058e90: 2020 2020 2020 6461 7461 203d 2073 656c        data = sel
-00058ea0: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
-00058eb0: 706f 6e73 652c 2027 7265 7375 6c74 272c  ponse, 'result',
-00058ec0: 207b 7d29 0a20 2020 2020 2020 2072 6574   {}).        ret
-00058ed0: 7572 6e20 7365 6c66 2e70 6172 7365 5f62  urn self.parse_b
-00058ee0: 6f72 726f 775f 7261 7465 2864 6174 612c  orrow_rate(data,
-00058ef0: 2063 7572 7265 6e63 7929 0a0a 2020 2020   currency)..    
-00058f00: 6465 6620 7061 7273 655f 626f 7272 6f77  def parse_borrow
-00058f10: 5f72 6174 6528 7365 6c66 2c20 696e 666f  _rate(self, info
-00058f20: 2c20 6375 7272 656e 6379 3d4e 6f6e 6529  , currency=None)
-00058f30: 3a0a 2020 2020 2020 2020 230a 2020 2020  :.        #.    
-00058f40: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-00058f50: 2020 2020 2320 2020 2020 2020 2020 2263      #         "c
-00058f60: 6f69 6e22 3a20 2255 5344 5422 2c0a 2020  oin": "USDT",.  
-00058f70: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00058f80: 2269 6e74 6572 6573 7452 6174 6522 3a20  "interestRate": 
-00058f90: 2230 2e30 3030 3130 3730 3030 3030 3022  "0.000107000000"
-00058fa0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00058fb0: 2020 2020 226c 6f61 6e41 626c 6541 6d6f      "loanAbleAmo
-00058fc0: 756e 7422 3a20 2222 2c0a 2020 2020 2020  unt": "",.      
-00058fd0: 2020 2320 2020 2020 2020 2020 226d 6178    #         "max
-00058fe0: 4c6f 616e 416d 6f75 6e74 223a 2022 3739  LoanAmount": "79
-00058ff0: 3939 392e 3939 3922 0a20 2020 2020 2020  999.999".       
-00059000: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
-00059010: 2023 0a20 2020 2020 2020 2074 696d 6573   #.        times
-00059020: 7461 6d70 203d 2073 656c 662e 6d69 6c6c  tamp = self.mill
-00059030: 6973 6563 6f6e 6473 2829 0a20 2020 2020  iseconds().     
-00059040: 2020 2063 7572 7265 6e63 7949 6420 3d20     currencyId = 
-00059050: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-00059060: 2869 6e66 6f2c 2027 636f 696e 2729 0a20  (info, 'coin'). 
-00059070: 2020 2020 2020 2072 6574 7572 6e20 7b0a         return {.
-00059080: 2020 2020 2020 2020 2020 2020 2763 7572              'cur
-00059090: 7265 6e63 7927 3a20 7365 6c66 2e73 6166  rency': self.saf
-000590a0: 655f 6375 7272 656e 6379 5f63 6f64 6528  e_currency_code(
-000590b0: 6375 7272 656e 6379 4964 2c20 6375 7272  currencyId, curr
-000590c0: 656e 6379 292c 0a20 2020 2020 2020 2020  ency),.         
-000590d0: 2020 2027 7261 7465 273a 2073 656c 662e     'rate': self.
-000590e0: 7361 6665 5f6e 756d 6265 7228 696e 666f  safe_number(info
-000590f0: 2c20 2769 6e74 6572 6573 7452 6174 6527  , 'interestRate'
-00059100: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
-00059110: 7065 7269 6f64 273a 2038 3634 3030 3030  period': 8640000
-00059120: 302c 2020 2320 4461 696c 790a 2020 2020  0,  # Daily.    
-00059130: 2020 2020 2020 2020 2774 696d 6573 7461          'timesta
-00059140: 6d70 273a 2074 696d 6573 7461 6d70 2c0a  mp': timestamp,.
-00059150: 2020 2020 2020 2020 2020 2020 2764 6174              'dat
-00059160: 6574 696d 6527 3a20 7365 6c66 2e69 736f  etime': self.iso
-00059170: 3836 3031 2874 696d 6573 7461 6d70 292c  8601(timestamp),
-00059180: 0a20 2020 2020 2020 2020 2020 2027 696e  .            'in
-00059190: 666f 273a 2069 6e66 6f2c 0a20 2020 2020  fo': info,.     
-000591a0: 2020 207d 0a0a 2020 2020 6465 6620 6665     }..    def fe
-000591b0: 7463 685f 626f 7272 6f77 5f69 6e74 6572  tch_borrow_inter
-000591c0: 6573 7428 7365 6c66 2c20 636f 6465 3a20  est(self, code: 
-000591d0: 4f70 7469 6f6e 616c 5b73 7472 5d20 3d20  Optional[str] = 
-000591e0: 4e6f 6e65 2c20 7379 6d62 6f6c 3a20 4f70  None, symbol: Op
-000591f0: 7469 6f6e 616c 5b73 7472 5d20 3d20 4e6f  tional[str] = No
-00059200: 6e65 2c20 7369 6e63 653a 204f 7074 696f  ne, since: Optio
-00059210: 6e61 6c5b 696e 745d 203d 204e 6f6e 652c  nal[int] = None,
-00059220: 206c 696d 6974 3a20 4f70 7469 6f6e 616c   limit: Optional
-00059230: 5b69 6e74 5d20 3d20 4e6f 6e65 2c20 7061  [int] = None, pa
-00059240: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
-00059250: 2020 2222 220a 2020 2020 2020 2020 6665    """.        fe
-00059260: 7463 6820 7468 6520 696e 7465 7265 7374  tch the interest
-00059270: 206f 7765 6420 6279 2074 6865 2075 7365   owed by the use
-00059280: 7220 666f 7220 626f 7272 6f77 696e 6720  r for borrowing 
-00059290: 6375 7272 656e 6379 2066 6f72 206d 6172  currency for mar
-000592a0: 6769 6e20 7472 6164 696e 670a 2020 2020  gin trading.    
-000592b0: 2020 2020 3a70 6172 616d 2073 7472 7c4e      :param str|N
-000592c0: 6f6e 6520 636f 6465 3a20 756e 6966 6965  one code: unifie
-000592d0: 6420 6375 7272 656e 6379 2063 6f64 650a  d currency code.
-000592e0: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-000592f0: 7472 7c4e 6f6e 6520 7379 6d62 6f6c 3a20  tr|None symbol: 
-00059300: 756e 6966 6965 6420 6d61 726b 6574 2073  unified market s
-00059310: 796d 626f 6c20 7768 656e 2066 6574 6368  ymbol when fetch
-00059320: 2069 6e74 6572 6573 7420 696e 2069 736f   interest in iso
-00059330: 6c61 7465 6420 6d61 726b 6574 730a 2020  lated markets.  
-00059340: 2020 2020 2020 3a70 6172 616d 206e 756d        :param num
-00059350: 6265 727c 4e6f 6e65 2073 696e 6365 3a20  ber|None since: 
-00059360: 7468 6520 6561 726c 6965 7374 2074 696d  the earliest tim
-00059370: 6520 696e 206d 7320 746f 2066 6574 6368  e in ms to fetch
-00059380: 2062 6f72 7272 6f77 2069 6e74 6572 6573   borrrow interes
-00059390: 7420 666f 720a 2020 2020 2020 2020 3a70  t for.        :p
-000593a0: 6172 616d 206e 756d 6265 727c 4e6f 6e65  aram number|None
-000593b0: 206c 696d 6974 3a20 7468 6520 6d61 7869   limit: the maxi
-000593c0: 6d75 6d20 6e75 6d62 6572 206f 6620 7374  mum number of st
-000593d0: 7275 6374 7572 6573 2074 6f20 7265 7472  ructures to retr
-000593e0: 6965 7665 0a20 2020 2020 2020 203a 7061  ieve.        :pa
-000593f0: 7261 6d20 6469 6374 2070 6172 616d 733a  ram dict params:
-00059400: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
-00059410: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
-00059420: 6520 6279 6269 7420 6170 6920 656e 6470  e bybit api endp
-00059430: 6f69 6e74 0a20 2020 2020 2020 203a 7265  oint.        :re
-00059440: 7475 726e 7320 5b64 6963 745d 3a20 6120  turns [dict]: a 
-00059450: 6c69 7374 206f 6620 6062 6f72 726f 7720  list of `borrow 
-00059460: 696e 7465 7265 7374 2073 7472 7563 7475  interest structu
-00059470: 7265 7320 3c68 7474 7073 3a2f 2f64 6f63  res <https://doc
-00059480: 732e 6363 7874 2e63 6f6d 2f23 2f3f 6964  s.ccxt.com/#/?id
-00059490: 3d62 6f72 726f 772d 696e 7465 7265 7374  =borrow-interest
-000594a0: 2d73 7472 7563 7475 7265 3e60 0a20 2020  -structure>`.   
-000594b0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-000594c0: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
-000594d0: 7473 2829 0a20 2020 2020 2020 2072 6571  ts().        req
-000594e0: 7565 7374 203d 207b 7d0a 2020 2020 2020  uest = {}.      
-000594f0: 2020 7265 7370 6f6e 7365 203d 2073 656c    response = sel
-00059500: 662e 7072 6976 6174 6547 6574 5370 6f74  f.privateGetSpot
-00059510: 5633 5072 6976 6174 6543 726f 7373 4d61  V3PrivateCrossMa
-00059520: 7267 696e 4163 636f 756e 7428 7365 6c66  rginAccount(self
-00059530: 2e65 7874 656e 6428 7265 7175 6573 742c  .extend(request,
-00059540: 2070 6172 616d 7329 290a 2020 2020 2020   params)).      
-00059550: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
-00059560: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-00059570: 2020 2020 2020 2272 6574 5f63 6f64 6522        "ret_code"
-00059580: 3a20 302c 0a20 2020 2020 2020 2023 2020  : 0,.        #  
-00059590: 2020 2020 2020 2022 7265 745f 6d73 6722         "ret_msg"
-000595a0: 3a20 2222 2c0a 2020 2020 2020 2020 2320  : "",.        # 
-000595b0: 2020 2020 2020 2020 2265 7874 5f63 6f64          "ext_cod
-000595c0: 6522 3a20 6e75 6c6c 2c0a 2020 2020 2020  e": null,.      
-000595d0: 2020 2320 2020 2020 2020 2020 2265 7874    #         "ext
-000595e0: 5f69 6e66 6f22 3a20 6e75 6c6c 2c0a 2020  _info": null,.  
-000595f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00059600: 2272 6573 756c 7422 3a20 7b0a 2020 2020  "result": {.    
-00059610: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00059620: 2020 2273 7461 7475 7322 3a20 2231 222c    "status": "1",
-00059630: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00059640: 2020 2020 2020 2022 7269 736b 5261 7465         "riskRate
-00059650: 223a 2022 3022 2c0a 2020 2020 2020 2020  ": "0",.        
-00059660: 2320 2020 2020 2020 2020 2020 2020 2261  #             "a
-00059670: 6363 7442 616c 616e 6365 5375 6d22 3a20  cctBalanceSum": 
-00059680: 2230 2e30 3030 3438 3632 3133 3831 3736  "0.0004862138176
-00059690: 3830 3835 3722 2c0a 2020 2020 2020 2020  80857",.        
-000596a0: 2320 2020 2020 2020 2020 2020 2020 2264  #             "d
-000596b0: 6562 7442 616c 616e 6365 5375 6d22 3a20  ebtBalanceSum": 
-000596c0: 2230 222c 0a20 2020 2020 2020 2023 2020  "0",.        #  
-000596d0: 2020 2020 2020 2020 2020 2022 6c6f 616e             "loan
-000596e0: 4163 636f 756e 744c 6973 7422 3a20 5b0a  AccountList": [.
-000596f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00059700: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
-00059710: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00059720: 2020 2020 2020 2020 2020 2274 6f6b 656e            "token
-00059730: 4964 223a 2022 4254 4322 2c0a 2020 2020  Id": "BTC",.    
-00059740: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00059750: 2020 2020 2020 2020 2020 2274 6f74 616c            "total
-00059760: 223a 2022 302e 3030 3034 3836 3231 222c  ": "0.00048621",
-00059770: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00059780: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00059790: 6c6f 636b 6564 223a 2022 3022 2c0a 2020  locked": "0",.  
-000597a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000597b0: 2020 2020 2020 2020 2020 2020 226c 6f61              "loa
-000597c0: 6e22 3a20 2230 222c 0a20 2020 2020 2020  n": "0",.       
-000597d0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-000597e0: 2020 2020 2020 2022 696e 7465 7265 7374         "interest
-000597f0: 223a 2022 3022 2c0a 2020 2020 2020 2020  ": "0",.        
-00059800: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00059810: 2020 2020 2020 2266 7265 6522 3a20 2230        "free": "0
-00059820: 2e30 3030 3438 3632 3122 0a20 2020 2020  .00048621".     
-00059830: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00059840: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
-00059850: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00059860: 2020 2e2e 2e0a 2020 2020 2020 2020 2320    ....        # 
-00059870: 2020 2020 2020 2020 2020 2020 5d0a 2020              ].  
-00059880: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00059890: 7d0a 2020 2020 2020 2020 2320 2020 2020  }.        #     
-000598a0: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
-000598b0: 2020 2020 6461 7461 203d 2073 656c 662e      data = self.
-000598c0: 7361 6665 5f76 616c 7565 2872 6573 706f  safe_value(respo
-000598d0: 6e73 652c 2027 7265 7375 6c74 272c 207b  nse, 'result', {
-000598e0: 7d29 0a20 2020 2020 2020 2072 6f77 7320  }).        rows 
-000598f0: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-00059900: 6528 6461 7461 2c20 276c 6f61 6e41 6363  e(data, 'loanAcc
-00059910: 6f75 6e74 4c69 7374 272c 205b 5d29 0a20  ountList', []). 
-00059920: 2020 2020 2020 2069 6e74 6572 6573 7420         interest 
-00059930: 3d20 7365 6c66 2e70 6172 7365 5f62 6f72  = self.parse_bor
-00059940: 726f 775f 696e 7465 7265 7374 7328 726f  row_interests(ro
-00059950: 7773 2c20 4e6f 6e65 290a 2020 2020 2020  ws, None).      
-00059960: 2020 7265 7475 726e 2073 656c 662e 6669    return self.fi
-00059970: 6c74 6572 5f62 795f 6375 7272 656e 6379  lter_by_currency
-00059980: 5f73 696e 6365 5f6c 696d 6974 2869 6e74  _since_limit(int
-00059990: 6572 6573 742c 2063 6f64 652c 2073 696e  erest, code, sin
-000599a0: 6365 2c20 6c69 6d69 7429 0a0a 2020 2020  ce, limit)..    
-000599b0: 6465 6620 7061 7273 655f 626f 7272 6f77  def parse_borrow
-000599c0: 5f69 6e74 6572 6573 7428 7365 6c66 2c20  _interest(self, 
-000599d0: 696e 666f 2c20 6d61 726b 6574 3d4e 6f6e  info, market=Non
-000599e0: 6529 3a0a 2020 2020 2020 2020 230a 2020  e):.        #.  
-000599f0: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
-00059a00: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00059a10: 2274 6f6b 656e 4964 223a 2022 4254 4322  "tokenId": "BTC"
-00059a20: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00059a30: 2020 2020 2274 6f74 616c 223a 2022 302e      "total": "0.
-00059a40: 3030 3034 3836 3231 222c 0a20 2020 2020  00048621",.     
-00059a50: 2020 2023 2020 2020 2020 2020 2022 6c6f     #         "lo
-00059a60: 636b 6564 223a 2022 3022 2c0a 2020 2020  cked": "0",.    
-00059a70: 2020 2020 2320 2020 2020 2020 2020 226c      #         "l
-00059a80: 6f61 6e22 3a20 2230 222c 0a20 2020 2020  oan": "0",.     
-00059a90: 2020 2023 2020 2020 2020 2020 2022 696e     #         "in
-00059aa0: 7465 7265 7374 223a 2022 3022 2c0a 2020  terest": "0",.  
-00059ab0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00059ac0: 2266 7265 6522 3a20 2230 2e30 3030 3438  "free": "0.00048
-00059ad0: 3632 3122 0a20 2020 2020 2020 2023 2020  621".        #  
-00059ae0: 2020 207d 2c0a 2020 2020 2020 2020 230a     },.        #.
-00059af0: 2020 2020 2020 2020 7265 7475 726e 207b          return {
-00059b00: 0a20 2020 2020 2020 2020 2020 2027 7379  .            'sy
-00059b10: 6d62 6f6c 273a 204e 6f6e 652c 0a20 2020  mbol': None,.   
-00059b20: 2020 2020 2020 2020 2027 6d61 7267 696e           'margin
-00059b30: 4d6f 6465 273a 2027 6372 6f73 7327 2c0a  Mode': 'cross',.
-00059b40: 2020 2020 2020 2020 2020 2020 2763 7572              'cur
-00059b50: 7265 6e63 7927 3a20 7365 6c66 2e73 6166  rency': self.saf
-00059b60: 655f 6375 7272 656e 6379 5f63 6f64 6528  e_currency_code(
-00059b70: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-00059b80: 2869 6e66 6f2c 2027 746f 6b65 6e49 6427  (info, 'tokenId'
-00059b90: 2929 2c0a 2020 2020 2020 2020 2020 2020  )),.            
-00059ba0: 2769 6e74 6572 6573 7427 3a20 7365 6c66  'interest': self
-00059bb0: 2e73 6166 655f 6e75 6d62 6572 2869 6e66  .safe_number(inf
-00059bc0: 6f2c 2027 696e 7465 7265 7374 2729 2c0a  o, 'interest'),.
-00059bd0: 2020 2020 2020 2020 2020 2020 2769 6e74              'int
-00059be0: 6572 6573 7452 6174 6527 3a20 4e6f 6e65  erestRate': None
-00059bf0: 2c0a 2020 2020 2020 2020 2020 2020 2761  ,.            'a
-00059c00: 6d6f 756e 7442 6f72 726f 7765 6427 3a20  mountBorrowed': 
-00059c10: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
-00059c20: 2869 6e66 6f2c 2027 6c6f 616e 2729 2c0a  (info, 'loan'),.
-00059c30: 2020 2020 2020 2020 2020 2020 2774 696d              'tim
-00059c40: 6573 7461 6d70 273a 204e 6f6e 652c 0a20  estamp': None,. 
-00059c50: 2020 2020 2020 2020 2020 2027 6461 7465             'date
-00059c60: 7469 6d65 273a 204e 6f6e 652c 0a20 2020  time': None,.   
-00059c70: 2020 2020 2020 2020 2027 696e 666f 273a           'info':
-00059c80: 2069 6e66 6f2c 0a20 2020 2020 2020 207d   info,.        }
-00059c90: 0a0a 2020 2020 6465 6620 7472 616e 7366  ..    def transf
-00059ca0: 6572 2873 656c 662c 2063 6f64 653a 2073  er(self, code: s
-00059cb0: 7472 2c20 616d 6f75 6e74 2c20 6672 6f6d  tr, amount, from
-00059cc0: 4163 636f 756e 742c 2074 6f41 6363 6f75  Account, toAccou
-00059cd0: 6e74 2c20 7061 7261 6d73 3d7b 7d29 3a0a  nt, params={}):.
-00059ce0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00059cf0: 2020 2020 7472 616e 7366 6572 2063 7572      transfer cur
-00059d00: 7265 6e63 7920 696e 7465 726e 616c 6c79  rency internally
-00059d10: 2062 6574 7765 656e 2077 616c 6c65 7473   between wallets
-00059d20: 206f 6e20 7468 6520 7361 6d65 2061 6363   on the same acc
-00059d30: 6f75 6e74 0a20 2020 2020 2020 2073 6565  ount.        see
-00059d40: 2068 7474 7073 3a2f 2f62 7962 6974 2d65   https://bybit-e
-00059d50: 7863 6861 6e67 652e 6769 7468 7562 2e69  xchange.github.i
-00059d60: 6f2f 646f 6373 2f61 6363 6f75 6e74 5f61  o/docs/account_a
-00059d70: 7373 6574 2f23 742d 6372 6561 7465 696e  sset/#t-createin
-00059d80: 7465 726e 616c 7472 616e 7366 6572 0a20  ternaltransfer. 
-00059d90: 2020 2020 2020 2073 6565 2068 7474 7073         see https
-00059da0: 3a2f 2f62 7962 6974 2d65 7863 6861 6e67  ://bybit-exchang
-00059db0: 652e 6769 7468 7562 2e69 6f2f 646f 6373  e.github.io/docs
-00059dc0: 2f61 6363 6f75 6e74 5f61 7373 6574 2f76  /account_asset/v
-00059dd0: 332f 2374 2d63 7265 6174 6569 6e74 6572  3/#t-createinter
-00059de0: 6e61 6c74 7261 6e73 6665 720a 2020 2020  naltransfer.    
-00059df0: 2020 2020 3a70 6172 616d 2073 7472 2063      :param str c
-00059e00: 6f64 653a 2075 6e69 6669 6564 2063 7572  ode: unified cur
-00059e10: 7265 6e63 7920 636f 6465 0a20 2020 2020  rency code.     
-00059e20: 2020 203a 7061 7261 6d20 666c 6f61 7420     :param float 
-00059e30: 616d 6f75 6e74 3a20 616d 6f75 6e74 2074  amount: amount t
-00059e40: 6f20 7472 616e 7366 6572 0a20 2020 2020  o transfer.     
-00059e50: 2020 203a 7061 7261 6d20 7374 7220 6672     :param str fr
-00059e60: 6f6d 4163 636f 756e 743a 2061 6363 6f75  omAccount: accou
-00059e70: 6e74 2074 6f20 7472 616e 7366 6572 2066  nt to transfer f
-00059e80: 726f 6d0a 2020 2020 2020 2020 3a70 6172  rom.        :par
-00059e90: 616d 2073 7472 2074 6f41 6363 6f75 6e74  am str toAccount
-00059ea0: 3a20 6163 636f 756e 7420 746f 2074 7261  : account to tra
-00059eb0: 6e73 6665 7220 746f 0a20 2020 2020 2020  nsfer to.       
-00059ec0: 203a 7061 7261 6d20 6469 6374 2070 6172   :param dict par
-00059ed0: 616d 733a 2065 7874 7261 2070 6172 616d  ams: extra param
-00059ee0: 6574 6572 7320 7370 6563 6966 6963 2074  eters specific t
-00059ef0: 6f20 7468 6520 6279 6269 7420 6170 6920  o the bybit api 
-00059f00: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
-00059f10: 203a 7061 7261 6d20 7374 7220 7061 7261   :param str para
-00059f20: 6d73 5b27 7472 616e 7366 6572 4964 275d  ms['transferId']
-00059f30: 3a20 5555 4944 2c20 7768 6963 6820 6973  : UUID, which is
-00059f40: 2075 6e69 7175 6520 6163 726f 7373 2074   unique across t
-00059f50: 6865 2070 6c61 7466 6f72 6d0a 2020 2020  he platform.    
-00059f60: 2020 2020 3a72 6574 7572 6e73 2064 6963      :returns dic
-00059f70: 743a 2061 2060 7472 616e 7366 6572 2073  t: a `transfer s
-00059f80: 7472 7563 7475 7265 203c 6874 7470 733a  tructure <https:
-00059f90: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
-00059fa0: 232f 3f69 643d 7472 616e 7366 6572 2d73  #/?id=transfer-s
-00059fb0: 7472 7563 7475 7265 3e60 0a20 2020 2020  tructure>`.     
-00059fc0: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
-00059fd0: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
-00059fe0: 2829 0a20 2020 2020 2020 2074 7261 6e73  ().        trans
-00059ff0: 6665 7249 6420 3d20 7365 6c66 2e73 6166  ferId = self.saf
-0005a000: 655f 7374 7269 6e67 2870 6172 616d 732c  e_string(params,
-0005a010: 2027 7472 616e 7366 6572 4964 272c 2073   'transferId', s
-0005a020: 656c 662e 7575 6964 2829 290a 2020 2020  elf.uuid()).    
-0005a030: 2020 2020 6163 636f 756e 7454 7970 6573      accountTypes
-0005a040: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
-0005a050: 7565 2873 656c 662e 6f70 7469 6f6e 732c  ue(self.options,
-0005a060: 2027 6163 636f 756e 7473 4279 5479 7065   'accountsByType
-0005a070: 272c 207b 7d29 0a20 2020 2020 2020 2066  ', {}).        f
-0005a080: 726f 6d49 6420 3d20 7365 6c66 2e73 6166  romId = self.saf
-0005a090: 655f 7374 7269 6e67 2861 6363 6f75 6e74  e_string(account
-0005a0a0: 5479 7065 732c 2066 726f 6d41 6363 6f75  Types, fromAccou
-0005a0b0: 6e74 2c20 6672 6f6d 4163 636f 756e 7429  nt, fromAccount)
-0005a0c0: 0a20 2020 2020 2020 2074 6f49 6420 3d20  .        toId = 
-0005a0d0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0005a0e0: 2861 6363 6f75 6e74 5479 7065 732c 2074  (accountTypes, t
-0005a0f0: 6f41 6363 6f75 6e74 2c20 746f 4163 636f  oAccount, toAcco
-0005a100: 756e 7429 0a20 2020 2020 2020 2063 7572  unt).        cur
-0005a110: 7265 6e63 7920 3d20 7365 6c66 2e63 7572  rency = self.cur
-0005a120: 7265 6e63 7928 636f 6465 290a 2020 2020  rency(code).    
-0005a130: 2020 2020 616d 6f75 6e74 546f 5072 6563      amountToPrec
-0005a140: 6973 696f 6e20 3d20 7365 6c66 2e63 7572  ision = self.cur
-0005a150: 7265 6e63 795f 746f 5f70 7265 6369 7369  rency_to_precisi
-0005a160: 6f6e 2863 6f64 652c 2061 6d6f 756e 7429  on(code, amount)
-0005a170: 0a20 2020 2020 2020 206d 6574 686f 6420  .        method 
-0005a180: 3d20 4e6f 6e65 0a20 2020 2020 2020 206d  = None.        m
-0005a190: 6574 686f 642c 2070 6172 616d 7320 3d20  ethod, params = 
-0005a1a0: 7365 6c66 2e68 616e 646c 655f 6f70 7469  self.handle_opti
-0005a1b0: 6f6e 5f61 6e64 5f70 6172 616d 7328 7061  on_and_params(pa
-0005a1c0: 7261 6d73 2c20 2774 7261 6e73 6665 7227  rams, 'transfer'
-0005a1d0: 2c20 276d 6574 686f 6427 2c20 2770 7269  , 'method', 'pri
-0005a1e0: 7661 7465 506f 7374 4173 7365 7456 3150  vatePostAssetV1P
-0005a1f0: 7269 7661 7465 5472 616e 7366 6572 2729  rivateTransfer')
-0005a200: 2020 2320 7631 2070 7265 6665 7272 6564    # v1 preferred
-0005a210: 2061 746d 2c20 6265 6361 7573 6520 6974   atm, because it
-0005a220: 2073 7570 706f 7274 7320 6675 6e64 696e   supports fundin
-0005a230: 670a 2020 2020 2020 2020 7265 7175 6573  g.        reques
-0005a240: 7420 3d20 4e6f 6e65 0a20 2020 2020 2020  t = None.       
-0005a250: 2069 6620 6d65 7468 6f64 203d 3d20 2770   if method == 'p
-0005a260: 7269 7661 7465 506f 7374 4173 7365 7456  rivatePostAssetV
-0005a270: 3350 7269 7661 7465 5472 616e 7366 6572  3PrivateTransfer
-0005a280: 496e 7465 7254 7261 6e73 6665 7227 206f  InterTransfer' o
-0005a290: 7220 6d65 7468 6f64 203d 3d20 2770 7269  r method == 'pri
-0005a2a0: 7661 7465 506f 7374 5635 4173 7365 7454  vatePostV5AssetT
-0005a2b0: 7261 6e73 6665 7249 6e74 6572 5472 616e  ransferInterTran
-0005a2c0: 7366 6572 273a 0a20 2020 2020 2020 2020  sfer':.         
-0005a2d0: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
-0005a2e0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-0005a2f0: 7472 616e 7366 6572 4964 273a 2074 7261  transferId': tra
-0005a300: 6e73 6665 7249 642c 0a20 2020 2020 2020  nsferId,.       
-0005a310: 2020 2020 2020 2020 2027 6672 6f6d 4163           'fromAc
-0005a320: 636f 756e 7454 7970 6527 3a20 6672 6f6d  countType': from
-0005a330: 4964 2c0a 2020 2020 2020 2020 2020 2020  Id,.            
-0005a340: 2020 2020 2774 6f41 6363 6f75 6e74 5479      'toAccountTy
-0005a350: 7065 273a 2074 6f49 642c 0a20 2020 2020  pe': toId,.     
-0005a360: 2020 2020 2020 2020 2020 2027 636f 696e             'coin
-0005a370: 273a 2063 7572 7265 6e63 795b 2769 6427  ': currency['id'
-0005a380: 5d2c 0a20 2020 2020 2020 2020 2020 2020  ],.             
-0005a390: 2020 2027 616d 6f75 6e74 273a 2061 6d6f     'amount': amo
-0005a3a0: 756e 7454 6f50 7265 6369 7369 6f6e 2c0a  untToPrecision,.
-0005a3b0: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
-0005a3c0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0005a3d0: 2020 2020 2020 2020 7265 7175 6573 7420          request 
-0005a3e0: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-0005a3f0: 2020 2020 2774 7261 6e73 6665 725f 6964      'transfer_id
-0005a400: 273a 2074 7261 6e73 6665 7249 642c 0a20  ': transferId,. 
-0005a410: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-0005a420: 6672 6f6d 5f61 6363 6f75 6e74 5f74 7970  from_account_typ
-0005a430: 6527 3a20 6672 6f6d 4964 2c0a 2020 2020  e': fromId,.    
-0005a440: 2020 2020 2020 2020 2020 2020 2774 6f5f              'to_
-0005a450: 6163 636f 756e 745f 7479 7065 273a 2074  account_type': t
-0005a460: 6f49 642c 0a20 2020 2020 2020 2020 2020  oId,.           
-0005a470: 2020 2020 2027 636f 696e 273a 2063 7572       'coin': cur
-0005a480: 7265 6e63 795b 2769 6427 5d2c 0a20 2020  rency['id'],.   
-0005a490: 2020 2020 2020 2020 2020 2020 2027 616d               'am
-0005a4a0: 6f75 6e74 273a 2061 6d6f 756e 7454 6f50  ount': amountToP
-0005a4b0: 7265 6369 7369 6f6e 2c0a 2020 2020 2020  recision,.      
-0005a4c0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-0005a4d0: 7265 7370 6f6e 7365 203d 2067 6574 6174  response = getat
-0005a4e0: 7472 2873 656c 662c 206d 6574 686f 6429  tr(self, method)
-0005a4f0: 2873 656c 662e 6578 7465 6e64 2872 6571  (self.extend(req
-0005a500: 7565 7374 2c20 7061 7261 6d73 2929 0a20  uest, params)). 
-0005a510: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-0005a520: 2023 207b 0a20 2020 2020 2020 2023 2020   # {.        #  
-0005a530: 2020 2022 7265 7443 6f64 6522 3a20 302c     "retCode": 0,
-0005a540: 0a20 2020 2020 2020 2023 2020 2020 2022  .        #     "
-0005a550: 7265 744d 7367 223a 2022 7375 6363 6573  retMsg": "succes
-0005a560: 7322 2c0a 2020 2020 2020 2020 2320 2020  s",.        #   
-0005a570: 2020 2272 6573 756c 7422 3a20 7b0a 2020    "result": {.  
-0005a580: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0005a590: 2274 7261 6e73 6665 7249 6422 3a20 2234  "transferId": "4
-0005a5a0: 3234 3461 6634 342d 6633 6230 2d34 6366  244af44-f3b0-4cf
-0005a5b0: 362d 6137 3433 2d62 3536 3536 3065 3938  6-a743-b56560e98
-0005a5c0: 3762 6322 2020 2320 7472 616e 7366 6572  7bc"  # transfer
-0005a5d0: 5f69 6420 696e 2076 310a 2020 2020 2020  _id in v1.      
-0005a5e0: 2020 2320 2020 2020 7d2c 0a20 2020 2020    #     },.     
-0005a5f0: 2020 2023 2020 2020 2022 7265 7445 7874     #     "retExt
-0005a600: 496e 666f 223a 207b 7d2c 0a20 2020 2020  Info": {},.     
-0005a610: 2020 2023 2020 2020 2022 7469 6d65 223a     #     "time":
-0005a620: 2031 3636 3638 3735 3835 3732 3035 0a20   1666875857205. 
-0005a630: 2020 2020 2020 2023 207d 0a20 2020 2020         # }.     
-0005a640: 2020 2023 0a20 2020 2020 2020 2074 696d     #.        tim
-0005a650: 6573 7461 6d70 203d 2073 656c 662e 7361  estamp = self.sa
-0005a660: 6665 5f69 6e74 6567 6572 5f32 2872 6573  fe_integer_2(res
-0005a670: 706f 6e73 652c 2027 7469 6d65 272c 2027  ponse, 'time', '
-0005a680: 7469 6d65 5f6e 6f77 2729 0a20 2020 2020  time_now').     
-0005a690: 2020 2074 7261 6e73 6665 7220 3d20 7365     transfer = se
-0005a6a0: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
-0005a6b0: 7370 6f6e 7365 2c20 2772 6573 756c 7427  sponse, 'result'
-0005a6c0: 2c20 7b7d 290a 2020 2020 2020 2020 7374  , {}).        st
-0005a6d0: 6174 7573 5261 7720 3d20 7365 6c66 2e73  atusRaw = self.s
-0005a6e0: 6166 655f 7374 7269 6e67 5f6e 2872 6573  afe_string_n(res
-0005a6f0: 706f 6e73 652c 205b 2772 6574 436f 6465  ponse, ['retCode
-0005a700: 272c 2027 7265 744d 7367 272c 2027 7265  ', 'retMsg', 're
-0005a710: 745f 636f 6465 272c 2027 7265 745f 6d73  t_code', 'ret_ms
-0005a720: 6727 5d29 0a20 2020 2020 2020 2073 7461  g']).        sta
-0005a730: 7475 7320 3d20 7365 6c66 2e70 6172 7365  tus = self.parse
-0005a740: 5f74 7261 6e73 6665 725f 7374 6174 7573  _transfer_status
-0005a750: 2873 7461 7475 7352 6177 290a 2020 2020  (statusRaw).    
-0005a760: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-0005a770: 6578 7465 6e64 2873 656c 662e 7061 7273  extend(self.pars
-0005a780: 655f 7472 616e 7366 6572 2874 7261 6e73  e_transfer(trans
-0005a790: 6665 722c 2063 7572 7265 6e63 7929 2c20  fer, currency), 
-0005a7a0: 7b0a 2020 2020 2020 2020 2020 2020 2774  {.            't
-0005a7b0: 696d 6573 7461 6d70 273a 2074 696d 6573  imestamp': times
-0005a7c0: 7461 6d70 2c0a 2020 2020 2020 2020 2020  tamp,.          
-0005a7d0: 2020 2764 6174 6574 696d 6527 3a20 7365    'datetime': se
-0005a7e0: 6c66 2e69 736f 3836 3031 2874 696d 6573  lf.iso8601(times
-0005a7f0: 7461 6d70 292c 0a20 2020 2020 2020 2020  tamp),.         
-0005a800: 2020 2027 616d 6f75 6e74 273a 2073 656c     'amount': sel
-0005a810: 662e 7061 7273 655f 6e75 6d62 6572 2861  f.parse_number(a
-0005a820: 6d6f 756e 7454 6f50 7265 6369 7369 6f6e  mountToPrecision
-0005a830: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
-0005a840: 6672 6f6d 4163 636f 756e 7427 3a20 6672  fromAccount': fr
-0005a850: 6f6d 4163 636f 756e 742c 0a20 2020 2020  omAccount,.     
-0005a860: 2020 2020 2020 2027 746f 4163 636f 756e         'toAccoun
-0005a870: 7427 3a20 746f 4163 636f 756e 742c 0a20  t': toAccount,. 
-0005a880: 2020 2020 2020 2020 2020 2027 7374 6174             'stat
-0005a890: 7573 273a 2073 7461 7475 732c 0a20 2020  us': status,.   
-0005a8a0: 2020 2020 207d 290a 0a20 2020 2064 6566       })..    def
-0005a8b0: 2066 6574 6368 5f74 7261 6e73 6665 7273   fetch_transfers
-0005a8c0: 2873 656c 662c 2063 6f64 653a 204f 7074  (self, code: Opt
-0005a8d0: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
-0005a8e0: 652c 2073 696e 6365 3a20 4f70 7469 6f6e  e, since: Option
-0005a8f0: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c20  al[int] = None, 
-0005a900: 6c69 6d69 743a 204f 7074 696f 6e61 6c5b  limit: Optional[
-0005a910: 696e 745d 203d 204e 6f6e 652c 2070 6172  int] = None, par
-0005a920: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
-0005a930: 2022 2222 0a20 2020 2020 2020 2066 6574   """.        fet
-0005a940: 6368 2061 2068 6973 746f 7279 206f 6620  ch a history of 
-0005a950: 696e 7465 726e 616c 2074 7261 6e73 6665  internal transfe
-0005a960: 7273 206d 6164 6520 6f6e 2061 6e20 6163  rs made on an ac
-0005a970: 636f 756e 740a 2020 2020 2020 2020 7365  count.        se
-0005a980: 6520 6874 7470 733a 2f2f 6279 6269 742d  e https://bybit-
-0005a990: 6578 6368 616e 6765 2e67 6974 6875 622e  exchange.github.
-0005a9a0: 696f 2f64 6f63 732f 7635 2f61 7373 6574  io/docs/v5/asset
-0005a9b0: 2f69 6e74 6572 2d74 7261 6e73 6665 722d  /inter-transfer-
-0005a9c0: 6c69 7374 0a20 2020 2020 2020 203a 7061  list.        :pa
-0005a9d0: 7261 6d20 7374 727c 4e6f 6e65 2063 6f64  ram str|None cod
-0005a9e0: 653a 2075 6e69 6669 6564 2063 7572 7265  e: unified curre
-0005a9f0: 6e63 7920 636f 6465 206f 6620 7468 6520  ncy code of the 
-0005aa00: 6375 7272 656e 6379 2074 7261 6e73 6665  currency transfe
-0005aa10: 7272 6564 0a20 2020 2020 2020 203a 7061  rred.        :pa
-0005aa20: 7261 6d20 696e 747c 4e6f 6e65 2073 696e  ram int|None sin
-0005aa30: 6365 3a20 7468 6520 6561 726c 6965 7374  ce: the earliest
-0005aa40: 2074 696d 6520 696e 206d 7320 746f 2066   time in ms to f
-0005aa50: 6574 6368 2074 7261 6e73 6665 7273 2066  etch transfers f
-0005aa60: 6f72 0a20 2020 2020 2020 203a 7061 7261  or.        :para
-0005aa70: 6d20 696e 747c 4e6f 6e65 206c 696d 6974  m int|None limit
-0005aa80: 3a20 7468 6520 6d61 7869 6d75 6d20 6e75  : the maximum nu
-0005aa90: 6d62 6572 206f 6620 2074 7261 6e73 6665  mber of  transfe
-0005aaa0: 7273 2073 7472 7563 7475 7265 7320 746f  rs structures to
-0005aab0: 2072 6574 7269 6576 650a 2020 2020 2020   retrieve.      
-0005aac0: 2020 3a70 6172 616d 2064 6963 7420 7061    :param dict pa
-0005aad0: 7261 6d73 3a20 6578 7472 6120 7061 7261  rams: extra para
-0005aae0: 6d65 7465 7273 2073 7065 6369 6669 6320  meters specific 
-0005aaf0: 746f 2074 6865 2062 7962 6974 2061 7069  to the bybit api
-0005ab00: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
-0005ab10: 2020 3a72 6574 7572 6e73 205b 6469 6374    :returns [dict
-0005ab20: 5d3a 2061 206c 6973 7420 6f66 2060 7472  ]: a list of `tr
-0005ab30: 616e 7366 6572 2073 7472 7563 7475 7265  ansfer structure
-0005ab40: 7320 3c68 7474 7073 3a2f 2f64 6f63 732e  s <https://docs.
-0005ab50: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d74  ccxt.com/#/?id=t
-0005ab60: 7261 6e73 6665 722d 7374 7275 6374 7572  ransfer-structur
-0005ab70: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
-0005ab80: 2020 2020 2020 2020 7365 6c66 2e6c 6f61          self.loa
-0005ab90: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
-0005aba0: 2020 2020 6375 7272 656e 6379 203d 204e      currency = N
-0005abb0: 6f6e 650a 2020 2020 2020 2020 7265 7175  one.        requ
-0005abc0: 6573 7420 3d20 7b7d 0a20 2020 2020 2020  est = {}.       
-0005abd0: 2069 6620 636f 6465 2069 7320 6e6f 7420   if code is not 
-0005abe0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0005abf0: 2020 6375 7272 656e 6379 203d 2073 656c    currency = sel
-0005ac00: 662e 7361 6665 5f63 7572 7265 6e63 795f  f.safe_currency_
-0005ac10: 636f 6465 2863 6f64 6529 0a20 2020 2020  code(code).     
-0005ac20: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-0005ac30: 636f 696e 275d 203d 2063 7572 7265 6e63  coin'] = currenc
-0005ac40: 790a 2020 2020 2020 2020 6966 2073 696e  y.        if sin
-0005ac50: 6365 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ce is not None:.
-0005ac60: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-0005ac70: 6573 745b 2773 7461 7274 5469 6d65 275d  est['startTime']
-0005ac80: 203d 2073 696e 6365 0a20 2020 2020 2020   = since.       
-0005ac90: 2069 6620 6c69 6d69 7420 6973 206e 6f74   if limit is not
-0005aca0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-0005acb0: 2020 2072 6571 7565 7374 5b27 6c69 6d69     request['limi
-0005acc0: 7427 5d20 3d20 6c69 6d69 740a 2020 2020  t'] = limit.    
-0005acd0: 2020 2020 7265 7370 6f6e 7365 203d 2073      response = s
-0005ace0: 656c 662e 7072 6976 6174 6547 6574 5635  elf.privateGetV5
-0005acf0: 4173 7365 7454 7261 6e73 6665 7251 7565  AssetTransferQue
-0005ad00: 7279 496e 7465 7254 7261 6e73 6665 724c  ryInterTransferL
-0005ad10: 6973 7428 7365 6c66 2e65 7874 656e 6428  ist(self.extend(
-0005ad20: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
-0005ad30: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
-0005ad40: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-0005ad50: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-0005ad60: 6574 436f 6465 223a 2030 2c0a 2020 2020  etCode": 0,.    
-0005ad70: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-0005ad80: 6574 4d73 6722 3a20 2273 7563 6365 7373  etMsg": "success
-0005ad90: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0005ada0: 2020 2020 2022 7265 7375 6c74 223a 207b       "result": {
-0005adb0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0005adc0: 2020 2020 2020 2022 6c69 7374 223a 205b         "list": [
-0005add0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0005ade0: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
-0005adf0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0005ae00: 2020 2020 2020 2020 2020 2022 7472 616e             "tran
-0005ae10: 7366 6572 4964 223a 2022 7365 6c66 5472  sferId": "selfTr
-0005ae20: 616e 7366 6572 5f61 3130 3931 6363 372d  ansfer_a1091cc7-
-0005ae30: 3933 3634 2d34 6237 342d 3864 6531 2d31  9364-4b74-8de1-1
-0005ae40: 3866 3032 6336 6632 6435 6322 2c0a 2020  8f02c6f2d5c",.  
-0005ae50: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0005ae60: 2020 2020 2020 2020 2020 2020 2263 6f69              "coi
-0005ae70: 6e22 3a20 2255 5344 5422 2c0a 2020 2020  n": "USDT",.    
-0005ae80: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0005ae90: 2020 2020 2020 2020 2020 2261 6d6f 756e            "amoun
-0005aea0: 7422 3a20 2235 3030 3022 2c0a 2020 2020  t": "5000",.    
-0005aeb0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0005aec0: 2020 2020 2020 2020 2020 2266 726f 6d41            "fromA
-0005aed0: 6363 6f75 6e74 5479 7065 223a 2022 5350  ccountType": "SP
-0005aee0: 4f54 222c 0a20 2020 2020 2020 2023 2020  OT",.        #  
-0005aef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005af00: 2020 2022 746f 4163 636f 756e 7454 7970     "toAccountTyp
-0005af10: 6522 3a20 2255 4e49 4649 4544 222c 0a20  e": "UNIFIED",. 
-0005af20: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0005af30: 2020 2020 2020 2020 2020 2020 2022 7469               "ti
-0005af40: 6d65 7374 616d 7022 3a20 2231 3636 3732  mestamp": "16672
-0005af50: 3833 3236 3330 3030 222c 0a20 2020 2020  83263000",.     
-0005af60: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0005af70: 2020 2020 2020 2020 2022 7374 6174 7573           "status
-0005af80: 223a 2022 5355 4343 4553 5322 0a20 2020  ": "SUCCESS".   
-0005af90: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0005afa0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-0005afb0: 2023 2020 2020 2020 2020 2020 2020 205d   #             ]
-0005afc0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0005afd0: 2020 2020 2020 2020 226e 6578 7450 6167          "nextPag
-0005afe0: 6543 7572 736f 7222 3a20 2265 794a 7461  eCursor": "eyJta
-0005aff0: 5735 4a52 4349 364d 544d 314f 4451 324f  W5JRCI6MTM1ODQ2O
-0005b000: 4377 6962 5746 3453 5551 694f 6a45 7a4e  CwibWF4SUQiOjEzN
-0005b010: 5467 304e 6a68 3922 0a20 2020 2020 2020  Tg0Njh9".       
-0005b020: 2023 2020 2020 2020 2020 207d 2c0a 2020   #         },.  
-0005b030: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0005b040: 2272 6574 4578 7449 6e66 6f22 3a20 7b7d  "retExtInfo": {}
-0005b050: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0005b060: 2020 2020 2274 696d 6522 3a20 3136 3730      "time": 1670
-0005b070: 3938 3832 3731 3637 370a 2020 2020 2020  988271677.      
-0005b080: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
-0005b090: 2020 230a 2020 2020 2020 2020 6461 7461    #.        data
-0005b0a0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
-0005b0b0: 7565 2872 6573 706f 6e73 652c 2027 7265  ue(response, 're
-0005b0c0: 7375 6c74 272c 207b 7d29 0a20 2020 2020  sult', {}).     
-0005b0d0: 2020 2074 7261 6e73 6665 7273 203d 2073     transfers = s
-0005b0e0: 656c 662e 7361 6665 5f76 616c 7565 2864  elf.safe_value(d
-0005b0f0: 6174 612c 2027 6c69 7374 272c 205b 5d29  ata, 'list', [])
-0005b100: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0005b110: 7365 6c66 2e70 6172 7365 5f74 7261 6e73  self.parse_trans
-0005b120: 6665 7273 2874 7261 6e73 6665 7273 2c20  fers(transfers, 
-0005b130: 6375 7272 656e 6379 2c20 7369 6e63 652c  currency, since,
-0005b140: 206c 696d 6974 290a 0a20 2020 2064 6566   limit)..    def
-0005b150: 2062 6f72 726f 775f 6d61 7267 696e 2873   borrow_margin(s
-0005b160: 656c 662c 2063 6f64 653a 2073 7472 2c20  elf, code: str, 
-0005b170: 616d 6f75 6e74 2c20 7379 6d62 6f6c 3a20  amount, symbol: 
-0005b180: 4f70 7469 6f6e 616c 5b73 7472 5d20 3d20  Optional[str] = 
-0005b190: 4e6f 6e65 2c20 7061 7261 6d73 3d7b 7d29  None, params={})
-0005b1a0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-0005b1b0: 2020 2020 2020 6372 6561 7465 2061 206c        create a l
-0005b1c0: 6f61 6e20 746f 2062 6f72 726f 7720 6d61  oan to borrow ma
-0005b1d0: 7267 696e 0a20 2020 2020 2020 2073 6565  rgin.        see
-0005b1e0: 2068 7474 7073 3a2f 2f62 7962 6974 2d65   https://bybit-e
-0005b1f0: 7863 6861 6e67 652e 6769 7468 7562 2e69  xchange.github.i
-0005b200: 6f2f 646f 6373 2f73 706f 742f 7633 2f23  o/docs/spot/v3/#
-0005b210: 742d 626f 7272 6f77 6d61 7267 696e 6c6f  t-borrowmarginlo
-0005b220: 616e 0a20 2020 2020 2020 203a 7061 7261  an.        :para
-0005b230: 6d20 7374 7220 636f 6465 3a20 756e 6966  m str code: unif
-0005b240: 6965 6420 6375 7272 656e 6379 2063 6f64  ied currency cod
-0005b250: 6520 6f66 2074 6865 2063 7572 7265 6e63  e of the currenc
-0005b260: 7920 746f 2062 6f72 726f 770a 2020 2020  y to borrow.    
-0005b270: 2020 2020 3a70 6172 616d 2066 6c6f 6174      :param float
-0005b280: 2061 6d6f 756e 743a 2074 6865 2061 6d6f   amount: the amo
-0005b290: 756e 7420 746f 2062 6f72 726f 770a 2020  unt to borrow.  
-0005b2a0: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
-0005b2b0: 7c4e 6f6e 6520 7379 6d62 6f6c 3a20 6e6f  |None symbol: no
-0005b2c0: 7420 7573 6564 2062 7920 6279 6269 742e  t used by bybit.
-0005b2d0: 626f 7272 6f77 4d61 7267 696e 2829 0a20  borrowMargin(). 
-0005b2e0: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
-0005b2f0: 6374 2070 6172 616d 733a 2065 7874 7261  ct params: extra
-0005b300: 2070 6172 616d 6574 6572 7320 7370 6563   parameters spec
-0005b310: 6966 6963 2074 6f20 7468 6520 6279 6269  ific to the bybi
-0005b320: 7420 6170 6920 656e 6470 6f69 6e74 0a20  t api endpoint. 
-0005b330: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
-0005b340: 6469 6374 3a20 6120 606d 6172 6769 6e20  dict: a `margin 
-0005b350: 6c6f 616e 2073 7472 7563 7475 7265 203c  loan structure <
-0005b360: 6874 7470 733a 2f2f 646f 6373 2e63 6378  https://docs.ccx
-0005b370: 742e 636f 6d2f 232f 3f69 643d 6d61 7267  t.com/#/?id=marg
-0005b380: 696e 2d6c 6f61 6e2d 7374 7275 6374 7572  in-loan-structur
-0005b390: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
-0005b3a0: 2020 2020 2020 2020 7365 6c66 2e6c 6f61          self.loa
-0005b3b0: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
-0005b3c0: 2020 2020 6375 7272 656e 6379 203d 2073      currency = s
-0005b3d0: 656c 662e 6375 7272 656e 6379 2863 6f64  elf.currency(cod
-0005b3e0: 6529 0a20 2020 2020 2020 206d 6172 6769  e).        margi
-0005b3f0: 6e4d 6f64 652c 2071 7565 7279 203d 2073  nMode, query = s
-0005b400: 656c 662e 6861 6e64 6c65 5f6d 6172 6769  elf.handle_margi
-0005b410: 6e5f 6d6f 6465 5f61 6e64 5f70 6172 616d  n_mode_and_param
-0005b420: 7328 2762 6f72 726f 774d 6172 6769 6e27  s('borrowMargin'
-0005b430: 2c20 7061 7261 6d73 290a 2020 2020 2020  , params).      
-0005b440: 2020 6966 206d 6172 6769 6e4d 6f64 6520    if marginMode 
-0005b450: 3d3d 2027 6973 6f6c 6174 6564 273a 0a20  == 'isolated':. 
-0005b460: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-0005b470: 204e 6f74 5375 7070 6f72 7465 6428 7365   NotSupported(se
-0005b480: 6c66 2e69 6420 2b20 2720 626f 7272 6f77  lf.id + ' borrow
-0005b490: 4d61 7267 696e 2829 2063 616e 6e6f 7420  Margin() cannot 
-0005b4a0: 7573 6520 6973 6f6c 6174 6564 206d 6172  use isolated mar
-0005b4b0: 6769 6e27 290a 2020 2020 2020 2020 7265  gin').        re
-0005b4c0: 7175 6573 7420 3d20 7b0a 2020 2020 2020  quest = {.      
-0005b4d0: 2020 2020 2020 2763 6f69 6e27 3a20 6375        'coin': cu
-0005b4e0: 7272 656e 6379 5b27 6964 275d 2c0a 2020  rrency['id'],.  
-0005b4f0: 2020 2020 2020 2020 2020 2771 7479 273a            'qty':
-0005b500: 2073 656c 662e 6375 7272 656e 6379 5f74   self.currency_t
-0005b510: 6f5f 7072 6563 6973 696f 6e28 636f 6465  o_precision(code
-0005b520: 2c20 616d 6f75 6e74 292c 0a20 2020 2020  , amount),.     
-0005b530: 2020 207d 0a20 2020 2020 2020 2072 6573     }.        res
-0005b540: 706f 6e73 6520 3d20 7365 6c66 2e70 7269  ponse = self.pri
-0005b550: 7661 7465 506f 7374 5370 6f74 5633 5072  vatePostSpotV3Pr
-0005b560: 6976 6174 6543 726f 7373 4d61 7267 696e  ivateCrossMargin
-0005b570: 4c6f 616e 2873 656c 662e 6578 7465 6e64  Loan(self.extend
-0005b580: 2872 6571 7565 7374 2c20 7175 6572 7929  (request, query)
-0005b590: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
-0005b5a0: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-0005b5b0: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-0005b5c0: 6574 436f 6465 223a 2030 2c0a 2020 2020  etCode": 0,.    
-0005b5d0: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-0005b5e0: 6574 4d73 6722 3a20 2273 7563 6365 7373  etMsg": "success
-0005b5f0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0005b600: 2020 2020 2022 7265 7375 6c74 223a 207b       "result": {
-0005b610: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0005b620: 2020 2020 2020 2022 7472 616e 7361 6374         "transact
-0005b630: 4964 223a 2022 3134 3134 3322 0a20 2020  Id": "14143".   
-0005b640: 2020 2020 2023 2020 2020 2020 2020 207d       #         }
-0005b650: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0005b660: 2020 2020 2272 6574 4578 7449 6e66 6f22      "retExtInfo"
-0005b670: 3a20 6e75 6c6c 2c0a 2020 2020 2020 2020  : null,.        
-0005b680: 2320 2020 2020 2020 2020 2274 696d 6522  #         "time"
-0005b690: 3a20 3136 3632 3631 3738 3438 3937 300a  : 1662617848970.
-0005b6a0: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-0005b6b0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0005b6c0: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
-0005b6d0: 7361 6665 5f76 616c 7565 2872 6573 706f  safe_value(respo
-0005b6e0: 6e73 652c 2027 7265 7375 6c74 272c 207b  nse, 'result', {
-0005b6f0: 7d29 0a20 2020 2020 2020 2074 7261 6e73  }).        trans
-0005b700: 6163 7469 6f6e 203d 2073 656c 662e 7061  action = self.pa
-0005b710: 7273 655f 6d61 7267 696e 5f6c 6f61 6e28  rse_margin_loan(
-0005b720: 7265 7375 6c74 2c20 6375 7272 656e 6379  result, currency
-0005b730: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-0005b740: 2073 656c 662e 6578 7465 6e64 2874 7261   self.extend(tra
-0005b750: 6e73 6163 7469 6f6e 2c20 7b0a 2020 2020  nsaction, {.    
-0005b760: 2020 2020 2020 2020 2773 796d 626f 6c27          'symbol'
-0005b770: 3a20 7379 6d62 6f6c 2c0a 2020 2020 2020  : symbol,.      
-0005b780: 2020 2020 2020 2761 6d6f 756e 7427 3a20        'amount': 
-0005b790: 616d 6f75 6e74 2c0a 2020 2020 2020 2020  amount,.        
-0005b7a0: 7d29 0a0a 2020 2020 6465 6620 7265 7061  })..    def repa
-0005b7b0: 795f 6d61 7267 696e 2873 656c 662c 2063  y_margin(self, c
-0005b7c0: 6f64 653a 2073 7472 2c20 616d 6f75 6e74  ode: str, amount
-0005b7d0: 2c20 7379 6d62 6f6c 3a20 4f70 7469 6f6e  , symbol: Option
-0005b7e0: 616c 5b73 7472 5d20 3d20 4e6f 6e65 2c20  al[str] = None, 
-0005b7f0: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
-0005b800: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-0005b810: 7265 7061 7920 626f 7272 6f77 6564 206d  repay borrowed m
-0005b820: 6172 6769 6e20 616e 6420 696e 7465 7265  argin and intere
-0005b830: 7374 0a20 2020 2020 2020 2073 6565 2068  st.        see h
-0005b840: 7474 7073 3a2f 2f62 7962 6974 2d65 7863  ttps://bybit-exc
-0005b850: 6861 6e67 652e 6769 7468 7562 2e69 6f2f  hange.github.io/
-0005b860: 646f 6373 2f73 706f 742f 7633 2f23 742d  docs/spot/v3/#t-
-0005b870: 7265 7061 796d 6172 6769 6e6c 6f61 6e0a  repaymarginloan.
-0005b880: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-0005b890: 7472 2063 6f64 653a 2075 6e69 6669 6564  tr code: unified
-0005b8a0: 2063 7572 7265 6e63 7920 636f 6465 206f   currency code o
-0005b8b0: 6620 7468 6520 6375 7272 656e 6379 2074  f the currency t
-0005b8c0: 6f20 7265 7061 790a 2020 2020 2020 2020  o repay.        
-0005b8d0: 3a70 6172 616d 2066 6c6f 6174 2061 6d6f  :param float amo
-0005b8e0: 756e 743a 2074 6865 2061 6d6f 756e 7420  unt: the amount 
-0005b8f0: 746f 2072 6570 6179 0a20 2020 2020 2020  to repay.       
-0005b900: 203a 7061 7261 6d20 7374 727c 4e6f 6e65   :param str|None
-0005b910: 2073 796d 626f 6c3a 206e 6f74 2075 7365   symbol: not use
-0005b920: 6420 6279 2062 7962 6974 2e72 6570 6179  d by bybit.repay
-0005b930: 4d61 7267 696e 2829 0a20 2020 2020 2020  Margin().       
-0005b940: 203a 7061 7261 6d20 6469 6374 2070 6172   :param dict par
-0005b950: 616d 733a 2065 7874 7261 2070 6172 616d  ams: extra param
-0005b960: 6574 6572 7320 7370 6563 6966 6963 2074  eters specific t
-0005b970: 6f20 7468 6520 6279 6269 7420 6170 6920  o the bybit api 
-0005b980: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
-0005b990: 203a 7265 7475 726e 7320 6469 6374 3a20   :returns dict: 
-0005b9a0: 6120 606d 6172 6769 6e20 6c6f 616e 2073  a `margin loan s
-0005b9b0: 7472 7563 7475 7265 203c 6874 7470 733a  tructure <https:
-0005b9c0: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
-0005b9d0: 232f 3f69 643d 6d61 7267 696e 2d6c 6f61  #/?id=margin-loa
-0005b9e0: 6e2d 7374 7275 6374 7572 653e 600a 2020  n-structure>`.  
-0005b9f0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0005ba00: 2020 7365 6c66 2e6c 6f61 645f 6d61 726b    self.load_mark
-0005ba10: 6574 7328 290a 2020 2020 2020 2020 6375  ets().        cu
-0005ba20: 7272 656e 6379 203d 2073 656c 662e 6375  rrency = self.cu
-0005ba30: 7272 656e 6379 2863 6f64 6529 0a20 2020  rrency(code).   
-0005ba40: 2020 2020 206d 6172 6769 6e4d 6f64 652c       marginMode,
-0005ba50: 2071 7565 7279 203d 2073 656c 662e 6861   query = self.ha
-0005ba60: 6e64 6c65 5f6d 6172 6769 6e5f 6d6f 6465  ndle_margin_mode
-0005ba70: 5f61 6e64 5f70 6172 616d 7328 2772 6570  _and_params('rep
-0005ba80: 6179 4d61 7267 696e 272c 2070 6172 616d  ayMargin', param
-0005ba90: 7329 0a20 2020 2020 2020 2069 6620 6d61  s).        if ma
-0005baa0: 7267 696e 4d6f 6465 203d 3d20 2769 736f  rginMode == 'iso
-0005bab0: 6c61 7465 6427 3a0a 2020 2020 2020 2020  lated':.        
-0005bac0: 2020 2020 7261 6973 6520 4e6f 7453 7570      raise NotSup
-0005bad0: 706f 7274 6564 2873 656c 662e 6964 202b  ported(self.id +
-0005bae0: 2027 2072 6570 6179 4d61 7267 696e 2829   ' repayMargin()
-0005baf0: 2063 616e 6e6f 7420 7573 6520 6973 6f6c   cannot use isol
-0005bb00: 6174 6564 206d 6172 6769 6e27 290a 2020  ated margin').  
-0005bb10: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-0005bb20: 7b0a 2020 2020 2020 2020 2020 2020 2763  {.            'c
-0005bb30: 6f69 6e27 3a20 6375 7272 656e 6379 5b27  oin': currency['
-0005bb40: 6964 275d 2c0a 2020 2020 2020 2020 2020  id'],.          
-0005bb50: 2020 2771 7479 273a 2073 656c 662e 6e75    'qty': self.nu
-0005bb60: 6d62 6572 5f74 6f5f 7374 7269 6e67 2861  mber_to_string(a
-0005bb70: 6d6f 756e 7429 2c0a 2020 2020 2020 2020  mount),.        
-0005bb80: 7d0a 2020 2020 2020 2020 7265 7370 6f6e  }.        respon
-0005bb90: 7365 203d 2073 656c 662e 7072 6976 6174  se = self.privat
-0005bba0: 6550 6f73 7453 706f 7456 3350 7269 7661  ePostSpotV3Priva
-0005bbb0: 7465 4372 6f73 734d 6172 6769 6e52 6570  teCrossMarginRep
-0005bbc0: 6179 2873 656c 662e 6578 7465 6e64 2872  ay(self.extend(r
-0005bbd0: 6571 7565 7374 2c20 7175 6572 7929 290a  equest, query)).
-0005bbe0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0005bbf0: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
-0005bc00: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
-0005bc10: 436f 6465 223a 2030 2c0a 2020 2020 2020  Code": 0,.      
-0005bc20: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
-0005bc30: 4d73 6722 3a20 2273 7563 6365 7373 222c  Msg": "success",
-0005bc40: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0005bc50: 2020 2022 7265 7375 6c74 223a 207b 0a20     "result": {. 
-0005bc60: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0005bc70: 2020 2020 2272 6570 6179 4964 223a 2022      "repayId": "
-0005bc80: 3132 3132 3822 0a20 2020 2020 2020 2023  12128".        #
-0005bc90: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
-0005bca0: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-0005bcb0: 6574 4578 7449 6e66 6f22 3a20 6e75 6c6c  etExtInfo": null
-0005bcc0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0005bcd0: 2020 2020 2274 696d 6522 3a20 3136 3632      "time": 1662
-0005bce0: 3631 3832 3938 3435 320a 2020 2020 2020  618298452.      
-0005bcf0: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
-0005bd00: 2020 230a 2020 2020 2020 2020 7265 7375    #.        resu
-0005bd10: 6c74 203d 2073 656c 662e 7361 6665 5f76  lt = self.safe_v
-0005bd20: 616c 7565 2872 6573 706f 6e73 652c 2027  alue(response, '
-0005bd30: 7265 7375 6c74 272c 207b 7d29 0a20 2020  result', {}).   
-0005bd40: 2020 2020 2074 7261 6e73 6163 7469 6f6e       transaction
-0005bd50: 203d 2073 656c 662e 7061 7273 655f 6d61   = self.parse_ma
-0005bd60: 7267 696e 5f6c 6f61 6e28 7265 7375 6c74  rgin_loan(result
-0005bd70: 2c20 6375 7272 656e 6379 290a 2020 2020  , currency).    
-0005bd80: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-0005bd90: 6578 7465 6e64 2874 7261 6e73 6163 7469  extend(transacti
-0005bda0: 6f6e 2c20 7b0a 2020 2020 2020 2020 2020  on, {.          
-0005bdb0: 2020 2773 796d 626f 6c27 3a20 7379 6d62    'symbol': symb
-0005bdc0: 6f6c 2c0a 2020 2020 2020 2020 2020 2020  ol,.            
-0005bdd0: 2761 6d6f 756e 7427 3a20 616d 6f75 6e74  'amount': amount
-0005bde0: 2c0a 2020 2020 2020 2020 7d29 0a0a 2020  ,.        })..  
-0005bdf0: 2020 6465 6620 7061 7273 655f 6d61 7267    def parse_marg
-0005be00: 696e 5f6c 6f61 6e28 7365 6c66 2c20 696e  in_loan(self, in
-0005be10: 666f 2c20 6375 7272 656e 6379 3d4e 6f6e  fo, currency=Non
-0005be20: 6529 3a0a 2020 2020 2020 2020 230a 2020  e):.        #.  
-0005be30: 2020 2020 2020 2320 626f 7272 6f77 4d61        # borrowMa
-0005be40: 7267 696e 0a20 2020 2020 2020 2023 0a20  rgin.        #. 
-0005be50: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
-0005be60: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0005be70: 2022 7472 616e 7361 6374 4964 223a 2022   "transactId": "
-0005be80: 3134 3134 3322 0a20 2020 2020 2020 2023  14143".        #
-0005be90: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
-0005bea0: 0a20 2020 2020 2020 2023 2072 6570 6179  .        # repay
-0005beb0: 4d61 7267 696e 0a20 2020 2020 2020 2023  Margin.        #
-0005bec0: 0a20 2020 2020 2020 2023 2020 2020 207b  .        #     {
-0005bed0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0005bee0: 2020 2022 7265 7061 7949 6422 3a20 2231     "repayId": "1
-0005bef0: 3231 3238 220a 2020 2020 2020 2020 2320  2128".        # 
-0005bf00: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
-0005bf10: 2020 2020 2020 2020 7265 7475 726e 207b          return {
-0005bf20: 0a20 2020 2020 2020 2020 2020 2027 6964  .            'id
-0005bf30: 273a 2073 656c 662e 7361 6665 5f73 7472  ': self.safe_str
-0005bf40: 696e 675f 3228 696e 666f 2c20 2774 7261  ing_2(info, 'tra
-0005bf50: 6e73 6163 7449 6427 2c20 2772 6570 6179  nsactId', 'repay
-0005bf60: 4964 2729 2c0a 2020 2020 2020 2020 2020  Id'),.          
-0005bf70: 2020 2763 7572 7265 6e63 7927 3a20 7365    'currency': se
-0005bf80: 6c66 2e73 6166 655f 7374 7269 6e67 2863  lf.safe_string(c
-0005bf90: 7572 7265 6e63 792c 2027 636f 6465 2729  urrency, 'code')
-0005bfa0: 2c0a 2020 2020 2020 2020 2020 2020 2761  ,.            'a
-0005bfb0: 6d6f 756e 7427 3a20 4e6f 6e65 2c0a 2020  mount': None,.  
-0005bfc0: 2020 2020 2020 2020 2020 2773 796d 626f            'symbo
-0005bfd0: 6c27 3a20 4e6f 6e65 2c0a 2020 2020 2020  l': None,.      
-0005bfe0: 2020 2020 2020 2774 696d 6573 7461 6d70        'timestamp
-0005bff0: 273a 204e 6f6e 652c 0a20 2020 2020 2020  ': None,.       
-0005c000: 2020 2020 2027 6461 7465 7469 6d65 273a       'datetime':
-0005c010: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
-0005c020: 2020 2027 696e 666f 273a 2069 6e66 6f2c     'info': info,
-0005c030: 0a20 2020 2020 2020 207d 0a0a 2020 2020  .        }..    
-0005c040: 6465 6620 7061 7273 655f 7472 616e 7366  def parse_transf
-0005c050: 6572 5f73 7461 7475 7328 7365 6c66 2c20  er_status(self, 
-0005c060: 7374 6174 7573 293a 0a20 2020 2020 2020  status):.       
-0005c070: 2073 7461 7475 7365 7320 3d20 7b0a 2020   statuses = {.  
-0005c080: 2020 2020 2020 2020 2020 2730 273a 2027            '0': '
-0005c090: 6f6b 272c 0a20 2020 2020 2020 2020 2020  ok',.           
-0005c0a0: 2027 4f4b 273a 2027 6f6b 272c 0a20 2020   'OK': 'ok',.   
-0005c0b0: 2020 2020 2020 2020 2027 5355 4343 4553           'SUCCES
-0005c0c0: 5327 3a20 276f 6b27 2c0a 2020 2020 2020  S': 'ok',.      
-0005c0d0: 2020 7d0a 2020 2020 2020 2020 7265 7475    }.        retu
-0005c0e0: 726e 2073 656c 662e 7361 6665 5f73 7472  rn self.safe_str
-0005c0f0: 696e 6728 7374 6174 7573 6573 2c20 7374  ing(statuses, st
-0005c100: 6174 7573 2c20 7374 6174 7573 290a 0a20  atus, status).. 
-0005c110: 2020 2064 6566 2070 6172 7365 5f74 7261     def parse_tra
-0005c120: 6e73 6665 7228 7365 6c66 2c20 7472 616e  nsfer(self, tran
-0005c130: 7366 6572 2c20 6375 7272 656e 6379 3d4e  sfer, currency=N
-0005c140: 6f6e 6529 3a0a 2020 2020 2020 2020 230a  one):.        #.
-0005c150: 2020 2020 2020 2020 2320 7472 616e 7366          # transf
-0005c160: 6572 0a20 2020 2020 2020 2023 0a20 2020  er.        #.   
-0005c170: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
-0005c180: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0005c190: 7472 616e 7366 6572 4964 223a 2022 3232  transferId": "22
-0005c1a0: 6332 6263 3131 2d65 6435 622d 3439 6134  c2bc11-ed5b-49a4
-0005c1b0: 2d38 3634 372d 6334 6530 6635 6636 6632  -8647-c4e0f5f6f2
-0005c1c0: 6232 2220 2023 2074 7261 6e73 6665 725f  b2"  # transfer_
-0005c1d0: 6964 2069 6e20 7631 0a20 2020 2020 2020  id in v1.       
-0005c1e0: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
-0005c1f0: 2023 0a20 2020 2020 2020 2023 2066 6574   #.        # fet
-0005c200: 6368 5472 616e 7366 6572 730a 2020 2020  chTransfers.    
-0005c210: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-0005c220: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-0005c230: 2020 2020 2020 2020 2274 7261 6e73 6665          "transfe
-0005c240: 7249 6422 3a20 2265 3963 3432 3163 342d  rId": "e9c421c4-
-0005c250: 6230 3130 2d34 6231 362d 6162 6436 2d31  b010-4b16-abd6-1
-0005c260: 3036 3137 3966 3237 3730 3222 2c20 2023  06179f27702",  #
-0005c270: 2074 7261 6e73 6665 725f 6964 2069 6e20   transfer_id in 
-0005c280: 7631 0a20 2020 2020 2020 2023 2020 2020  v1.        #    
-0005c290: 2020 2020 2022 636f 696e 223a 2022 5553       "coin": "US
-0005c2a0: 4454 222c 0a20 2020 2020 2020 2023 2020  DT",.        #  
-0005c2b0: 2020 2020 2020 2022 616d 6f75 6e74 223a         "amount":
-0005c2c0: 2022 3822 2c0a 2020 2020 2020 2020 2320   "8",.        # 
-0005c2d0: 2020 2020 2020 2020 2266 726f 6d41 6363          "fromAcc
-0005c2e0: 6f75 6e74 5479 7065 223a 2022 4655 4e44  ountType": "FUND
-0005c2f0: 222c 2020 2320 6672 6f6d 5f61 6363 6f75  ",  # from_accou
-0005c300: 6e74 5f74 7970 6520 696e 2076 310a 2020  nt_type in v1.  
-0005c310: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0005c320: 2274 6f41 6363 6f75 6e74 5479 7065 223a  "toAccountType":
-0005c330: 2022 5350 4f54 222c 2020 2320 746f 5f61   "SPOT",  # to_a
-0005c340: 6363 6f75 6e74 5f74 7970 6520 696e 2076  ccount_type in v
-0005c350: 310a 2020 2020 2020 2020 2320 2020 2020  1.        #     
-0005c360: 2020 2020 2274 696d 6573 7461 6d70 223a      "timestamp":
-0005c370: 2022 3136 3636 3837 3934 3236 3030 3022   "1666879426000"
-0005c380: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0005c390: 2020 2020 2273 7461 7475 7322 3a20 2253      "status": "S
-0005c3a0: 5543 4345 5353 220a 2020 2020 2020 2020  UCCESS".        
-0005c3b0: 2320 2020 2020 207d 0a20 2020 2020 2020  #      }.       
-0005c3c0: 2023 0a20 2020 2020 2020 2063 7572 7265   #.        curre
-0005c3d0: 6e63 7949 6420 3d20 7365 6c66 2e73 6166  ncyId = self.saf
-0005c3e0: 655f 7374 7269 6e67 2874 7261 6e73 6665  e_string(transfe
-0005c3f0: 722c 2027 636f 696e 2729 0a20 2020 2020  r, 'coin').     
-0005c400: 2020 2074 696d 6573 7461 6d70 203d 2073     timestamp = s
-0005c410: 656c 662e 7361 6665 5f69 6e74 6567 6572  elf.safe_integer
-0005c420: 2874 7261 6e73 6665 722c 2027 7469 6d65  (transfer, 'time
-0005c430: 7374 616d 7027 290a 2020 2020 2020 2020  stamp').        
-0005c440: 6672 6f6d 4163 636f 756e 7449 6420 3d20  fromAccountId = 
-0005c450: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0005c460: 5f32 2874 7261 6e73 6665 722c 2027 6672  _2(transfer, 'fr
-0005c470: 6f6d 4163 636f 756e 7454 7970 6527 2c20  omAccountType', 
-0005c480: 2766 726f 6d5f 6163 636f 756e 745f 7479  'from_account_ty
-0005c490: 7065 2729 0a20 2020 2020 2020 2074 6f41  pe').        toA
-0005c4a0: 6363 6f75 6e74 4964 203d 2073 656c 662e  ccountId = self.
-0005c4b0: 7361 6665 5f73 7472 696e 675f 3228 7472  safe_string_2(tr
-0005c4c0: 616e 7366 6572 2c20 2774 6f41 6363 6f75  ansfer, 'toAccou
-0005c4d0: 6e74 5479 7065 272c 2027 746f 5f61 6363  ntType', 'to_acc
-0005c4e0: 6f75 6e74 5f74 7970 6527 290a 2020 2020  ount_type').    
-0005c4f0: 2020 2020 6163 636f 756e 7449 6473 203d      accountIds =
-0005c500: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-0005c510: 2873 656c 662e 6f70 7469 6f6e 732c 2027  (self.options, '
-0005c520: 6163 636f 756e 7473 4279 4964 272c 207b  accountsById', {
-0005c530: 7d29 0a20 2020 2020 2020 2066 726f 6d41  }).        fromA
-0005c540: 6363 6f75 6e74 203d 2073 656c 662e 7361  ccount = self.sa
-0005c550: 6665 5f73 7472 696e 6728 6163 636f 756e  fe_string(accoun
-0005c560: 7449 6473 2c20 6672 6f6d 4163 636f 756e  tIds, fromAccoun
-0005c570: 7449 642c 2066 726f 6d41 6363 6f75 6e74  tId, fromAccount
-0005c580: 4964 290a 2020 2020 2020 2020 746f 4163  Id).        toAc
-0005c590: 636f 756e 7420 3d20 7365 6c66 2e73 6166  count = self.saf
-0005c5a0: 655f 7374 7269 6e67 2861 6363 6f75 6e74  e_string(account
-0005c5b0: 4964 732c 2074 6f41 6363 6f75 6e74 4964  Ids, toAccountId
-0005c5c0: 2c20 746f 4163 636f 756e 7449 6429 0a20  , toAccountId). 
-0005c5d0: 2020 2020 2020 2072 6574 7572 6e20 7b0a         return {.
-0005c5e0: 2020 2020 2020 2020 2020 2020 2769 6e66              'inf
-0005c5f0: 6f27 3a20 7472 616e 7366 6572 2c0a 2020  o': transfer,.  
-0005c600: 2020 2020 2020 2020 2020 2769 6427 3a20            'id': 
-0005c610: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0005c620: 5f32 2874 7261 6e73 6665 722c 2027 7472  _2(transfer, 'tr
-0005c630: 616e 7366 6572 4964 272c 2027 7472 616e  ansferId', 'tran
-0005c640: 7366 6572 5f69 6427 292c 0a20 2020 2020  sfer_id'),.     
-0005c650: 2020 2020 2020 2027 7469 6d65 7374 616d         'timestam
-0005c660: 7027 3a20 7469 6d65 7374 616d 702c 0a20  p': timestamp,. 
-0005c670: 2020 2020 2020 2020 2020 2027 6461 7465             'date
-0005c680: 7469 6d65 273a 2073 656c 662e 6973 6f38  time': self.iso8
-0005c690: 3630 3128 7469 6d65 7374 616d 7029 2c0a  601(timestamp),.
-0005c6a0: 2020 2020 2020 2020 2020 2020 2763 7572              'cur
-0005c6b0: 7265 6e63 7927 3a20 7365 6c66 2e73 6166  rency': self.saf
-0005c6c0: 655f 6375 7272 656e 6379 5f63 6f64 6528  e_currency_code(
-0005c6d0: 6375 7272 656e 6379 4964 2c20 6375 7272  currencyId, curr
-0005c6e0: 656e 6379 292c 0a20 2020 2020 2020 2020  ency),.         
-0005c6f0: 2020 2027 616d 6f75 6e74 273a 2073 656c     'amount': sel
-0005c700: 662e 7361 6665 5f6e 756d 6265 7228 7472  f.safe_number(tr
-0005c710: 616e 7366 6572 2c20 2761 6d6f 756e 7427  ansfer, 'amount'
-0005c720: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
-0005c730: 6672 6f6d 4163 636f 756e 7427 3a20 6672  fromAccount': fr
-0005c740: 6f6d 4163 636f 756e 742c 0a20 2020 2020  omAccount,.     
-0005c750: 2020 2020 2020 2027 746f 4163 636f 756e         'toAccoun
-0005c760: 7427 3a20 746f 4163 636f 756e 742c 0a20  t': toAccount,. 
-0005c770: 2020 2020 2020 2020 2020 2027 7374 6174             'stat
-0005c780: 7573 273a 2073 656c 662e 7061 7273 655f  us': self.parse_
-0005c790: 7472 616e 7366 6572 5f73 7461 7475 7328  transfer_status(
-0005c7a0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0005c7b0: 2874 7261 6e73 6665 722c 2027 7374 6174  (transfer, 'stat
-0005c7c0: 7573 2729 292c 0a20 2020 2020 2020 207d  us')),.        }
-0005c7d0: 0a0a 2020 2020 6465 6620 6665 7463 685f  ..    def fetch_
-0005c7e0: 6465 7269 7661 7469 7665 735f 6d61 726b  derivatives_mark
-0005c7f0: 6574 5f6c 6576 6572 6167 655f 7469 6572  et_leverage_tier
-0005c800: 7328 7365 6c66 2c20 7379 6d62 6f6c 3a20  s(self, symbol: 
-0005c810: 7374 722c 2070 6172 616d 733d 7b7d 293a  str, params={}):
-0005c820: 0a20 2020 2020 2020 2073 656c 662e 6c6f  .        self.lo
-0005c830: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
-0005c840: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
-0005c850: 6c66 2e6d 6172 6b65 7428 7379 6d62 6f6c  lf.market(symbol
-0005c860: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
-0005c870: 7420 3d20 7b0a 2020 2020 2020 2020 2020  t = {.          
-0005c880: 2020 2773 796d 626f 6c27 3a20 6d61 726b    'symbol': mark
-0005c890: 6574 5b27 6964 275d 2c0a 2020 2020 2020  et['id'],.      
-0005c8a0: 2020 7d0a 2020 2020 2020 2020 6966 206d    }.        if m
-0005c8b0: 6172 6b65 745b 276c 696e 6561 7227 5d3a  arket['linear']:
-0005c8c0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-0005c8d0: 7565 7374 5b27 6361 7465 676f 7279 275d  uest['category']
-0005c8e0: 203d 2027 6c69 6e65 6172 270a 2020 2020   = 'linear'.    
-0005c8f0: 2020 2020 656c 6966 206d 6172 6b65 745b      elif market[
-0005c900: 2769 6e76 6572 7365 275d 3a0a 2020 2020  'inverse']:.    
-0005c910: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-0005c920: 2763 6174 6567 6f72 7927 5d20 3d20 2769  'category'] = 'i
-0005c930: 6e76 6572 7365 270a 2020 2020 2020 2020  nverse'.        
-0005c940: 7265 7370 6f6e 7365 203d 2073 656c 662e  response = self.
-0005c950: 7075 626c 6963 4765 7456 354d 6172 6b65  publicGetV5Marke
-0005c960: 7452 6973 6b4c 696d 6974 2873 656c 662e  tRiskLimit(self.
-0005c970: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
-0005c980: 7061 7261 6d73 2929 0a20 2020 2020 2020  params)).       
-0005c990: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
-0005c9a0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-0005c9b0: 2020 2020 2022 7265 7443 6f64 6522 3a20       "retCode": 
-0005c9c0: 302c 0a20 2020 2020 2020 2023 2020 2020  0,.        #    
-0005c9d0: 2020 2020 2022 7265 744d 7367 223a 2022       "retMsg": "
-0005c9e0: 4f4b 222c 0a20 2020 2020 2020 2023 2020  OK",.        #  
-0005c9f0: 2020 2020 2020 2022 7265 7375 6c74 223a         "result":
-0005ca00: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-0005ca10: 2020 2020 2020 2020 2022 6361 7465 676f           "catego
-0005ca20: 7279 223a 2022 696e 7665 7273 6522 2c0a  ry": "inverse",.
-0005ca30: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0005ca40: 2020 2020 2020 226c 6973 7422 3a20 5b0a        "list": [.
-0005ca50: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0005ca60: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
-0005ca70: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0005ca80: 2020 2020 2020 2020 2020 2269 6422 3a20            "id": 
-0005ca90: 312c 0a20 2020 2020 2020 2023 2020 2020  1,.        #    
-0005caa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005cab0: 2022 7379 6d62 6f6c 223a 2022 4254 4355   "symbol": "BTCU
-0005cac0: 5344 222c 0a20 2020 2020 2020 2023 2020  SD",.        #  
-0005cad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005cae0: 2020 2022 7269 736b 4c69 6d69 7456 616c     "riskLimitVal
-0005caf0: 7565 223a 2022 3135 3022 2c0a 2020 2020  ue": "150",.    
-0005cb00: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0005cb10: 2020 2020 2020 2020 2020 226d 6169 6e74            "maint
-0005cb20: 656e 616e 6365 4d61 7267 696e 223a 2022  enanceMargin": "
-0005cb30: 302e 3522 2c0a 2020 2020 2020 2020 2320  0.5",.        # 
-0005cb40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005cb50: 2020 2020 2269 6e69 7469 616c 4d61 7267      "initialMarg
-0005cb60: 696e 223a 2022 3122 2c0a 2020 2020 2020  in": "1",.      
-0005cb70: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0005cb80: 2020 2020 2020 2020 2269 734c 6f77 6573          "isLowes
-0005cb90: 7452 6973 6b22 3a20 312c 0a20 2020 2020  tRisk": 1,.     
-0005cba0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0005cbb0: 2020 2020 2020 2020 2022 6d61 784c 6576           "maxLev
-0005cbc0: 6572 6167 6522 3a20 2231 3030 2e30 3022  erage": "100.00"
-0005cbd0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0005cbe0: 2020 2020 2020 2020 2020 207d 2c0a 2020             },.  
-0005cbf0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0005cc00: 2020 2020 2e2e 2e2e 0a20 2020 2020 2020      .....       
-0005cc10: 2023 2020 2020 2020 2020 2020 2020 205d   #             ]
-0005cc20: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0005cc30: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
-0005cc40: 2020 2020 2020 2020 2272 6574 4578 7449          "retExtI
-0005cc50: 6e66 6f22 3a20 7b7d 2c0a 2020 2020 2020  nfo": {},.      
-0005cc60: 2020 2320 2020 2020 2020 2020 2274 696d    #         "tim
-0005cc70: 6522 3a20 3136 3732 3035 3434 3838 3031  e": 167205448801
-0005cc80: 300a 2020 2020 2020 2020 2320 2020 2020  0.        #     
-0005cc90: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
-0005cca0: 2020 2020 7265 7375 6c74 203d 2073 656c      result = sel
-0005ccb0: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
-0005ccc0: 706f 6e73 652c 2027 7265 7375 6c74 2729  ponse, 'result')
-0005ccd0: 0a20 2020 2020 2020 2074 6965 7273 203d  .        tiers =
-0005cce0: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-0005ccf0: 2872 6573 756c 742c 2027 6c69 7374 2729  (result, 'list')
-0005cd00: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0005cd10: 7365 6c66 2e70 6172 7365 5f6d 6172 6b65  self.parse_marke
-0005cd20: 745f 6c65 7665 7261 6765 5f74 6965 7273  t_leverage_tiers
-0005cd30: 2874 6965 7273 2c20 6d61 726b 6574 290a  (tiers, market).
-0005cd40: 0a20 2020 2064 6566 2066 6574 6368 5f6d  .    def fetch_m
-0005cd50: 6172 6b65 745f 6c65 7665 7261 6765 5f74  arket_leverage_t
-0005cd60: 6965 7273 2873 656c 662c 2073 796d 626f  iers(self, symbo
-0005cd70: 6c3a 2073 7472 2c20 7061 7261 6d73 3d7b  l: str, params={
-0005cd80: 7d29 3a0a 2020 2020 2020 2020 2222 220a  }):.        """.
-0005cd90: 2020 2020 2020 2020 7265 7472 6965 7665          retrieve
-0005cda0: 2069 6e66 6f72 6d61 7469 6f6e 206f 6e20   information on 
-0005cdb0: 7468 6520 6d61 7869 6d75 6d20 6c65 7665  the maximum leve
-0005cdc0: 7261 6765 2c20 616e 6420 6d61 696e 7465  rage, and mainte
-0005cdd0: 6e61 6e63 6520 6d61 7267 696e 2066 6f72  nance margin for
-0005cde0: 2074 7261 6465 7320 6f66 2076 6172 7969   trades of varyi
-0005cdf0: 6e67 2074 7261 6465 2073 697a 6573 2066  ng trade sizes f
-0005ce00: 6f72 2061 2073 696e 676c 6520 6d61 726b  or a single mark
-0005ce10: 6574 0a20 2020 2020 2020 2073 6565 2068  et.        see h
-0005ce20: 7474 7073 3a2f 2f62 7962 6974 2d65 7863  ttps://bybit-exc
-0005ce30: 6861 6e67 652e 6769 7468 7562 2e69 6f2f  hange.github.io/
-0005ce40: 646f 6373 2f76 352f 6d61 726b 6574 2f72  docs/v5/market/r
-0005ce50: 6973 6b2d 6c69 6d69 740a 2020 2020 2020  isk-limit.      
-0005ce60: 2020 3a70 6172 616d 2073 7472 2073 796d    :param str sym
-0005ce70: 626f 6c3a 2075 6e69 6669 6564 206d 6172  bol: unified mar
-0005ce80: 6b65 7420 7379 6d62 6f6c 0a20 2020 2020  ket symbol.     
-0005ce90: 2020 203a 7061 7261 6d20 6469 6374 2070     :param dict p
-0005cea0: 6172 616d 733a 2065 7874 7261 2070 6172  arams: extra par
-0005ceb0: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
-0005cec0: 2074 6f20 7468 6520 6279 6269 7420 6170   to the bybit ap
-0005ced0: 6920 656e 6470 6f69 6e74 0a20 2020 2020  i endpoint.     
-0005cee0: 2020 203a 7265 7475 726e 7320 6469 6374     :returns dict
-0005cef0: 3a20 6120 606c 6576 6572 6167 6520 7469  : a `leverage ti
-0005cf00: 6572 7320 7374 7275 6374 7572 6520 3c68  ers structure <h
-0005cf10: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
-0005cf20: 2e63 6f6d 2f23 2f3f 6964 3d6c 6576 6572  .com/#/?id=lever
-0005cf30: 6167 652d 7469 6572 732d 7374 7275 6374  age-tiers-struct
-0005cf40: 7572 653e 600a 2020 2020 2020 2020 2222  ure>`.        ""
-0005cf50: 220a 2020 2020 2020 2020 7365 6c66 2e6c  ".        self.l
-0005cf60: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
-0005cf70: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-0005cf80: 7b7d 0a20 2020 2020 2020 206d 6172 6b65  {}.        marke
-0005cf90: 7420 3d20 4e6f 6e65 0a20 2020 2020 2020  t = None.       
-0005cfa0: 206d 6172 6b65 7420 3d20 7365 6c66 2e6d   market = self.m
-0005cfb0: 6172 6b65 7428 7379 6d62 6f6c 290a 2020  arket(symbol).  
-0005cfc0: 2020 2020 2020 6966 206d 6172 6b65 745b        if market[
-0005cfd0: 2773 706f 7427 5d20 6f72 206d 6172 6b65  'spot'] or marke
-0005cfe0: 745b 276f 7074 696f 6e27 5d3a 0a20 2020  t['option']:.   
-0005cff0: 2020 2020 2020 2020 2072 6169 7365 2042           raise B
-0005d000: 6164 5265 7175 6573 7428 7365 6c66 2e69  adRequest(self.i
-0005d010: 6420 2b20 2720 6665 7463 684d 6172 6b65  d + ' fetchMarke
-0005d020: 744c 6576 6572 6167 6554 6965 7273 2829  tLeverageTiers()
-0005d030: 2073 796d 626f 6c20 646f 6573 206e 6f74   symbol does not
-0005d040: 2073 7570 706f 7274 206d 6172 6b65 7420   support market 
-0005d050: 2720 2b20 7379 6d62 6f6c 290a 2020 2020  ' + symbol).    
-0005d060: 2020 2020 7265 7175 6573 745b 2773 796d      request['sym
-0005d070: 626f 6c27 5d20 3d20 6d61 726b 6574 5b27  bol'] = market['
-0005d080: 6964 275d 0a20 2020 2020 2020 2072 6574  id'].        ret
-0005d090: 7572 6e20 7365 6c66 2e66 6574 6368 5f64  urn self.fetch_d
-0005d0a0: 6572 6976 6174 6976 6573 5f6d 6172 6b65  erivatives_marke
-0005d0b0: 745f 6c65 7665 7261 6765 5f74 6965 7273  t_leverage_tiers
-0005d0c0: 2873 796d 626f 6c2c 2070 6172 616d 7329  (symbol, params)
-0005d0d0: 0a0a 2020 2020 6465 6620 7061 7273 655f  ..    def parse_
-0005d0e0: 6d61 726b 6574 5f6c 6576 6572 6167 655f  market_leverage_
-0005d0f0: 7469 6572 7328 7365 6c66 2c20 696e 666f  tiers(self, info
-0005d100: 2c20 6d61 726b 6574 3d4e 6f6e 6529 3a0a  , market=None):.
-0005d110: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0005d120: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
-0005d130: 2020 2320 2020 2020 2020 2020 2269 6422    #         "id"
-0005d140: 3a20 312c 0a20 2020 2020 2020 2023 2020  : 1,.        #  
-0005d150: 2020 2020 2020 2022 7379 6d62 6f6c 223a         "symbol":
-0005d160: 2022 4254 4355 5344 222c 0a20 2020 2020   "BTCUSD",.     
-0005d170: 2020 2023 2020 2020 2020 2020 2022 7269     #         "ri
-0005d180: 736b 4c69 6d69 7456 616c 7565 223a 2022  skLimitValue": "
-0005d190: 3135 3022 2c0a 2020 2020 2020 2020 2320  150",.        # 
-0005d1a0: 2020 2020 2020 2020 226d 6169 6e74 656e          "mainten
-0005d1b0: 616e 6365 4d61 7267 696e 223a 2022 302e  anceMargin": "0.
-0005d1c0: 3522 2c0a 2020 2020 2020 2020 2320 2020  5",.        #   
-0005d1d0: 2020 2020 2020 2269 6e69 7469 616c 4d61        "initialMa
-0005d1e0: 7267 696e 223a 2022 3122 2c0a 2020 2020  rgin": "1",.    
-0005d1f0: 2020 2020 2320 2020 2020 2020 2020 2269      #         "i
-0005d200: 734c 6f77 6573 7452 6973 6b22 3a20 312c  sLowestRisk": 1,
-0005d210: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0005d220: 2020 2022 6d61 784c 6576 6572 6167 6522     "maxLeverage"
-0005d230: 3a20 2231 3030 2e30 3022 0a20 2020 2020  : "100.00".     
-0005d240: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
-0005d250: 2020 2023 0a20 2020 2020 2020 206d 696e     #.        min
-0005d260: 4e6f 7469 6f6e 616c 203d 2030 0a20 2020  Notional = 0.   
-0005d270: 2020 2020 2074 6965 7273 203d 205b 5d0a       tiers = [].
-0005d280: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-0005d290: 2072 616e 6765 2830 2c20 6c65 6e28 696e   range(0, len(in
-0005d2a0: 666f 2929 3a0a 2020 2020 2020 2020 2020  fo)):.          
-0005d2b0: 2020 6974 656d 203d 2069 6e66 6f5b 695d    item = info[i]
-0005d2c0: 0a20 2020 2020 2020 2020 2020 206d 6178  .            max
-0005d2d0: 4e6f 7469 6f6e 616c 203d 2073 656c 662e  Notional = self.
-0005d2e0: 7361 6665 5f6e 756d 6265 7228 6974 656d  safe_number(item
-0005d2f0: 2c20 2772 6973 6b4c 696d 6974 5661 6c75  , 'riskLimitValu
-0005d300: 6527 290a 2020 2020 2020 2020 2020 2020  e').            
-0005d310: 7469 6572 732e 6170 7065 6e64 287b 0a20  tiers.append({. 
-0005d320: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-0005d330: 7469 6572 273a 2073 656c 662e 7375 6d28  tier': self.sum(
-0005d340: 692c 2031 292c 0a20 2020 2020 2020 2020  i, 1),.         
-0005d350: 2020 2020 2020 2027 6375 7272 656e 6379         'currency
-0005d360: 273a 206d 6172 6b65 745b 2762 6173 6527  ': market['base'
-0005d370: 5d2c 0a20 2020 2020 2020 2020 2020 2020  ],.             
-0005d380: 2020 2027 6d69 6e4e 6f74 696f 6e61 6c27     'minNotional'
-0005d390: 3a20 6d69 6e4e 6f74 696f 6e61 6c2c 0a20  : minNotional,. 
-0005d3a0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-0005d3b0: 6d61 784e 6f74 696f 6e61 6c27 3a20 6d61  maxNotional': ma
-0005d3c0: 784e 6f74 696f 6e61 6c2c 0a20 2020 2020  xNotional,.     
-0005d3d0: 2020 2020 2020 2020 2020 2027 6d61 696e             'main
-0005d3e0: 7465 6e61 6e63 654d 6172 6769 6e52 6174  tenanceMarginRat
-0005d3f0: 6527 3a20 7365 6c66 2e73 6166 655f 6e75  e': self.safe_nu
-0005d400: 6d62 6572 2869 7465 6d2c 2027 6d61 696e  mber(item, 'main
-0005d410: 7465 6e61 6e63 654d 6172 6769 6e27 292c  tenanceMargin'),
-0005d420: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0005d430: 2027 6d61 784c 6576 6572 6167 6527 3a20   'maxLeverage': 
-0005d440: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
-0005d450: 2869 7465 6d2c 2027 6d61 784c 6576 6572  (item, 'maxLever
-0005d460: 6167 6527 292c 0a20 2020 2020 2020 2020  age'),.         
-0005d470: 2020 2020 2020 2027 696e 666f 273a 2069         'info': i
-0005d480: 7465 6d2c 0a20 2020 2020 2020 2020 2020  tem,.           
-0005d490: 207d 290a 2020 2020 2020 2020 2020 2020   }).            
-0005d4a0: 6d69 6e4e 6f74 696f 6e61 6c20 3d20 6d61  minNotional = ma
-0005d4b0: 784e 6f74 696f 6e61 6c0a 2020 2020 2020  xNotional.      
-0005d4c0: 2020 7265 7475 726e 2074 6965 7273 0a0a    return tiers..
-0005d4d0: 2020 2020 6465 6620 7061 7273 655f 7472      def parse_tr
-0005d4e0: 6164 696e 675f 6665 6528 7365 6c66 2c20  ading_fee(self, 
-0005d4f0: 6665 652c 206d 6172 6b65 743d 4e6f 6e65  fee, market=None
-0005d500: 293a 0a20 2020 2020 2020 2023 0a20 2020  ):.        #.   
-0005d510: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
-0005d520: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0005d530: 7379 6d62 6f6c 223a 2022 4554 4855 5344  symbol": "ETHUSD
-0005d540: 5422 2c0a 2020 2020 2020 2020 2320 2020  T",.        #   
-0005d550: 2020 2020 2020 226d 616b 6572 4665 6552        "makerFeeR
-0005d560: 6174 6522 3a20 302e 3030 312c 0a20 2020  ate": 0.001,.   
-0005d570: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0005d580: 7461 6b65 7246 6565 5261 7465 223a 2030  takerFeeRate": 0
-0005d590: 2e30 3031 0a20 2020 2020 2020 2023 2020  .001.        #  
-0005d5a0: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
-0005d5b0: 2020 2020 2020 206d 6172 6b65 7449 6420         marketId 
-0005d5c0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-0005d5d0: 6e67 2866 6565 2c20 2773 796d 626f 6c27  ng(fee, 'symbol'
-0005d5e0: 290a 2020 2020 2020 2020 7379 6d62 6f6c  ).        symbol
-0005d5f0: 203d 2073 656c 662e 7361 6665 5f73 796d   = self.safe_sym
-0005d600: 626f 6c28 6d61 726b 6574 4964 2c20 4e6f  bol(marketId, No
-0005d610: 6e65 2c20 4e6f 6e65 2c20 2763 6f6e 7472  ne, None, 'contr
-0005d620: 6163 7427 290a 2020 2020 2020 2020 7265  act').        re
-0005d630: 7475 726e 207b 0a20 2020 2020 2020 2020  turn {.         
-0005d640: 2020 2027 696e 666f 273a 2066 6565 2c0a     'info': fee,.
-0005d650: 2020 2020 2020 2020 2020 2020 2773 796d              'sym
-0005d660: 626f 6c27 3a20 7379 6d62 6f6c 2c0a 2020  bol': symbol,.  
-0005d670: 2020 2020 2020 2020 2020 276d 616b 6572            'maker
-0005d680: 273a 2073 656c 662e 7361 6665 5f6e 756d  ': self.safe_num
-0005d690: 6265 7228 6665 652c 2027 6d61 6b65 7246  ber(fee, 'makerF
-0005d6a0: 6565 5261 7465 2729 2c0a 2020 2020 2020  eeRate'),.      
-0005d6b0: 2020 2020 2020 2774 616b 6572 273a 2073        'taker': s
-0005d6c0: 656c 662e 7361 6665 5f6e 756d 6265 7228  elf.safe_number(
-0005d6d0: 6665 652c 2027 7461 6b65 7246 6565 5261  fee, 'takerFeeRa
-0005d6e0: 7465 2729 2c0a 2020 2020 2020 2020 7d0a  te'),.        }.
-0005d6f0: 0a20 2020 2064 6566 2066 6574 6368 5f74  .    def fetch_t
-0005d700: 7261 6469 6e67 5f66 6565 2873 656c 662c  rading_fee(self,
-0005d710: 2073 796d 626f 6c3a 2073 7472 2c20 7061   symbol: str, pa
-0005d720: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
-0005d730: 2020 2222 220a 2020 2020 2020 2020 6665    """.        fe
-0005d740: 7463 6820 7468 6520 7472 6164 696e 6720  tch the trading 
-0005d750: 6665 6573 2066 6f72 2061 206d 6172 6b65  fees for a marke
-0005d760: 740a 2020 2020 2020 2020 7365 6520 6874  t.        see ht
-0005d770: 7470 733a 2f2f 6279 6269 742d 6578 6368  tps://bybit-exch
-0005d780: 616e 6765 2e67 6974 6875 622e 696f 2f64  ange.github.io/d
-0005d790: 6f63 732f 7635 2f61 6363 6f75 6e74 2f66  ocs/v5/account/f
-0005d7a0: 6565 2d72 6174 650a 2020 2020 2020 2020  ee-rate.        
-0005d7b0: 3a70 6172 616d 2073 7472 2073 796d 626f  :param str symbo
-0005d7c0: 6c3a 2075 6e69 6669 6564 206d 6172 6b65  l: unified marke
-0005d7d0: 7420 7379 6d62 6f6c 0a20 2020 2020 2020  t symbol.       
-0005d7e0: 203a 7061 7261 6d20 6469 6374 2070 6172   :param dict par
-0005d7f0: 616d 733a 2065 7874 7261 2070 6172 616d  ams: extra param
-0005d800: 6574 6572 7320 7370 6563 6966 6963 2074  eters specific t
-0005d810: 6f20 7468 6520 6279 6269 7420 6170 6920  o the bybit api 
-0005d820: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
-0005d830: 203a 7265 7475 726e 7320 6469 6374 3a20   :returns dict: 
-0005d840: 6120 6066 6565 2073 7472 7563 7475 7265  a `fee structure
-0005d850: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
-0005d860: 6378 742e 636f 6d2f 232f 3f69 643d 6665  cxt.com/#/?id=fe
-0005d870: 652d 7374 7275 6374 7572 653e 600a 2020  e-structure>`.  
-0005d880: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0005d890: 2020 7365 6c66 2e6c 6f61 645f 6d61 726b    self.load_mark
-0005d8a0: 6574 7328 290a 2020 2020 2020 2020 6d61  ets().        ma
-0005d8b0: 726b 6574 203d 2073 656c 662e 6d61 726b  rket = self.mark
-0005d8c0: 6574 2873 796d 626f 6c29 0a20 2020 2020  et(symbol).     
-0005d8d0: 2020 2069 6620 6d61 726b 6574 5b27 7370     if market['sp
-0005d8e0: 6f74 275d 3a0a 2020 2020 2020 2020 2020  ot']:.          
-0005d8f0: 2020 7261 6973 6520 4e6f 7453 7570 706f    raise NotSuppo
-0005d900: 7274 6564 2873 656c 662e 6964 202b 2027  rted(self.id + '
-0005d910: 2066 6574 6368 5472 6164 696e 6746 6565   fetchTradingFee
-0005d920: 2829 2069 7320 6e6f 7420 7375 7070 6f72  () is not suppor
-0005d930: 7465 6420 666f 7220 7370 6f74 206d 6172  ted for spot mar
-0005d940: 6b65 7427 290a 2020 2020 2020 2020 7265  ket').        re
-0005d950: 7175 6573 7420 3d20 7b0a 2020 2020 2020  quest = {.      
-0005d960: 2020 2020 2020 2773 796d 626f 6c27 3a20        'symbol': 
-0005d970: 6d61 726b 6574 5b27 6964 275d 2c0a 2020  market['id'],.  
-0005d980: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-0005d990: 7265 7370 6f6e 7365 203d 2073 656c 662e  response = self.
-0005d9a0: 7072 6976 6174 6547 6574 5635 4163 636f  privateGetV5Acco
-0005d9b0: 756e 7446 6565 5261 7465 2873 656c 662e  untFeeRate(self.
-0005d9c0: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
-0005d9d0: 7061 7261 6d73 2929 0a20 2020 2020 2020  params)).       
-0005d9e0: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
-0005d9f0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-0005da00: 2020 2020 2022 7265 7443 6f64 6522 3a20       "retCode": 
-0005da10: 302c 0a20 2020 2020 2020 2023 2020 2020  0,.        #    
-0005da20: 2020 2020 2022 7265 744d 7367 223a 2022       "retMsg": "
-0005da30: 4f4b 222c 0a20 2020 2020 2020 2023 2020  OK",.        #  
-0005da40: 2020 2020 2020 2022 7265 7375 6c74 223a         "result":
-0005da50: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-0005da60: 2020 2020 2020 2020 2022 6c69 7374 223a           "list":
-0005da70: 205b 0a20 2020 2020 2020 2023 2020 2020   [.        #    
-0005da80: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
-0005da90: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0005daa0: 2020 2020 2020 2020 2020 2020 2022 7379               "sy
-0005dab0: 6d62 6f6c 223a 2022 4554 4855 5344 5422  mbol": "ETHUSDT"
-0005dac0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0005dad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005dae0: 2274 616b 6572 4665 6552 6174 6522 3a20  "takerFeeRate": 
-0005daf0: 2230 2e30 3030 3622 2c0a 2020 2020 2020  "0.0006",.      
-0005db00: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0005db10: 2020 2020 2020 2020 226d 616b 6572 4665          "makerFe
-0005db20: 6552 6174 6522 3a20 2230 2e30 3030 3122  eRate": "0.0001"
-0005db30: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0005db40: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
-0005db50: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0005db60: 2020 205d 0a20 2020 2020 2020 2023 2020     ].        #  
-0005db70: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
-0005db80: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
-0005db90: 4578 7449 6e66 6f22 3a20 7b7d 2c0a 2020  ExtInfo": {},.  
-0005dba0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0005dbb0: 2274 696d 6522 3a20 3136 3736 3336 3034  "time": 16763604
-0005dbc0: 3132 3537 360a 2020 2020 2020 2020 2320  12576.        # 
-0005dbd0: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
-0005dbe0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-0005dbf0: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-0005dc00: 2872 6573 706f 6e73 652c 2027 7265 7375  (response, 'resu
-0005dc10: 6c74 272c 207b 7d29 0a20 2020 2020 2020  lt', {}).       
-0005dc20: 2066 6565 7320 3d20 7365 6c66 2e73 6166   fees = self.saf
-0005dc30: 655f 7661 6c75 6528 7265 7375 6c74 2c20  e_value(result, 
-0005dc40: 276c 6973 7427 2c20 5b5d 290a 2020 2020  'list', []).    
-0005dc50: 2020 2020 6669 7273 7420 3d20 7365 6c66      first = self
-0005dc60: 2e73 6166 655f 7661 6c75 6528 6665 6573  .safe_value(fees
-0005dc70: 2c20 302c 207b 7d29 0a20 2020 2020 2020  , 0, {}).       
-0005dc80: 2072 6574 7572 6e20 7365 6c66 2e70 6172   return self.par
-0005dc90: 7365 5f74 7261 6469 6e67 5f66 6565 2866  se_trading_fee(f
-0005dca0: 6972 7374 290a 0a20 2020 2064 6566 2066  irst)..    def f
-0005dcb0: 6574 6368 5f74 7261 6469 6e67 5f66 6565  etch_trading_fee
-0005dcc0: 7328 7365 6c66 2c20 7061 7261 6d73 3d7b  s(self, params={
-0005dcd0: 7d29 3a0a 2020 2020 2020 2020 2222 220a  }):.        """.
-0005dce0: 2020 2020 2020 2020 6665 7463 6820 7468          fetch th
-0005dcf0: 6520 7472 6164 696e 6720 6665 6573 2066  e trading fees f
-0005dd00: 6f72 206d 756c 7469 706c 6520 6d61 726b  or multiple mark
-0005dd10: 6574 730a 2020 2020 2020 2020 7365 6520  ets.        see 
-0005dd20: 6874 7470 733a 2f2f 6279 6269 742d 6578  https://bybit-ex
-0005dd30: 6368 616e 6765 2e67 6974 6875 622e 696f  change.github.io
-0005dd40: 2f64 6f63 732f 7635 2f61 6363 6f75 6e74  /docs/v5/account
-0005dd50: 2f66 6565 2d72 6174 650a 2020 2020 2020  /fee-rate.      
-0005dd60: 2020 3a70 6172 616d 2064 6963 7420 7061    :param dict pa
-0005dd70: 7261 6d73 3a20 6578 7472 6120 7061 7261  rams: extra para
-0005dd80: 6d65 7465 7273 2073 7065 6369 6669 6320  meters specific 
-0005dd90: 746f 2074 6865 2062 7962 6974 2061 7069  to the bybit api
-0005dda0: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
-0005ddb0: 2020 3a72 6574 7572 6e73 2064 6963 743a    :returns dict:
-0005ddc0: 2061 2064 6963 7469 6f6e 6172 7920 6f66   a dictionary of
-0005ddd0: 2060 6665 6520 7374 7275 6374 7572 6573   `fee structures
-0005dde0: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
-0005ddf0: 6378 742e 636f 6d2f 232f 3f69 643d 6665  cxt.com/#/?id=fe
-0005de00: 652d 7374 7275 6374 7572 653e 6020 696e  e-structure>` in
-0005de10: 6465 7865 6420 6279 206d 6172 6b65 7420  dexed by market 
-0005de20: 7379 6d62 6f6c 730a 2020 2020 2020 2020  symbols.        
-0005de30: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
-0005de40: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
-0005de50: 2020 2020 2020 2020 7479 7065 203d 204e          type = N
-0005de60: 6f6e 650a 2020 2020 2020 2020 7479 7065  one.        type
-0005de70: 2c20 7061 7261 6d73 203d 2073 656c 662e  , params = self.
-0005de80: 6861 6e64 6c65 5f6f 7074 696f 6e5f 616e  handle_option_an
-0005de90: 645f 7061 7261 6d73 2870 6172 616d 732c  d_params(params,
-0005dea0: 2027 6665 7463 6854 7261 6469 6e67 4665   'fetchTradingFe
-0005deb0: 6573 272c 2027 7479 7065 272c 2027 6675  es', 'type', 'fu
-0005dec0: 7475 7265 2729 0a20 2020 2020 2020 2069  ture').        i
-0005ded0: 6620 7479 7065 203d 3d20 2773 706f 7427  f type == 'spot'
-0005dee0: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-0005def0: 6973 6520 4e6f 7453 7570 706f 7274 6564  ise NotSupported
-0005df00: 2873 656c 662e 6964 202b 2027 2066 6574  (self.id + ' fet
-0005df10: 6368 5472 6164 696e 6746 6565 7328 2920  chTradingFees() 
-0005df20: 6973 206e 6f74 2073 7570 706f 7274 6564  is not supported
-0005df30: 2066 6f72 2073 706f 7420 6d61 726b 6574   for spot market
-0005df40: 2729 0a20 2020 2020 2020 2072 6573 706f  ').        respo
-0005df50: 6e73 6520 3d20 7365 6c66 2e70 7269 7661  nse = self.priva
-0005df60: 7465 4765 7456 3541 6363 6f75 6e74 4665  teGetV5AccountFe
-0005df70: 6552 6174 6528 7061 7261 6d73 290a 2020  eRate(params).  
-0005df80: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-0005df90: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
-0005dfa0: 2320 2020 2020 2020 2020 2272 6574 436f  #         "retCo
-0005dfb0: 6465 223a 2030 2c0a 2020 2020 2020 2020  de": 0,.        
-0005dfc0: 2320 2020 2020 2020 2020 2272 6574 4d73  #         "retMs
-0005dfd0: 6722 3a20 224f 4b22 2c0a 2020 2020 2020  g": "OK",.      
-0005dfe0: 2020 2320 2020 2020 2020 2020 2272 6573    #         "res
-0005dff0: 756c 7422 3a20 7b0a 2020 2020 2020 2020  ult": {.        
-0005e000: 2320 2020 2020 2020 2020 2020 2020 226c  #             "l
-0005e010: 6973 7422 3a20 5b0a 2020 2020 2020 2020  ist": [.        
-0005e020: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0005e030: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-0005e040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005e050: 2020 2273 796d 626f 6c22 3a20 2245 5448    "symbol": "ETH
-0005e060: 5553 4454 222c 0a20 2020 2020 2020 2023  USDT",.        #
-0005e070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005e080: 2020 2020 2022 7461 6b65 7246 6565 5261       "takerFeeRa
-0005e090: 7465 223a 2022 302e 3030 3036 222c 0a20  te": "0.0006",. 
-0005e0a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0005e0b0: 2020 2020 2020 2020 2020 2020 2022 6d61               "ma
-0005e0c0: 6b65 7246 6565 5261 7465 223a 2022 302e  kerFeeRate": "0.
-0005e0d0: 3030 3031 220a 2020 2020 2020 2020 2320  0001".        # 
-0005e0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005e0f0: 7d0a 2020 2020 2020 2020 2320 2020 2020  }.        #     
-0005e100: 2020 2020 2020 2020 5d0a 2020 2020 2020          ].      
-0005e110: 2020 2320 2020 2020 2020 2020 7d2c 0a20    #         },. 
-0005e120: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0005e130: 2022 7265 7445 7874 496e 666f 223a 207b   "retExtInfo": {
-0005e140: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
-0005e150: 2020 2020 2022 7469 6d65 223a 2031 3637       "time": 167
-0005e160: 3633 3630 3431 3235 3736 0a20 2020 2020  6360412576.     
-0005e170: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
-0005e180: 2020 2023 0a20 2020 2020 2020 2066 6565     #.        fee
-0005e190: 7320 3d20 7365 6c66 2e73 6166 655f 7661  s = self.safe_va
-0005e1a0: 6c75 6528 7265 7370 6f6e 7365 2c20 2772  lue(response, 'r
-0005e1b0: 6573 756c 7427 2c20 7b7d 290a 2020 2020  esult', {}).    
-0005e1c0: 2020 2020 6665 6573 203d 2073 656c 662e      fees = self.
-0005e1d0: 7361 6665 5f76 616c 7565 2866 6565 732c  safe_value(fees,
-0005e1e0: 2027 6c69 7374 272c 205b 5d29 0a20 2020   'list', []).   
-0005e1f0: 2020 2020 2072 6573 756c 7420 3d20 7b7d       result = {}
-0005e200: 0a20 2020 2020 2020 2066 6f72 2069 2069  .        for i i
-0005e210: 6e20 7261 6e67 6528 302c 206c 656e 2866  n range(0, len(f
-0005e220: 6565 7329 293a 0a20 2020 2020 2020 2020  ees)):.         
-0005e230: 2020 2066 6565 203d 2073 656c 662e 7061     fee = self.pa
-0005e240: 7273 655f 7472 6164 696e 675f 6665 6528  rse_trading_fee(
-0005e250: 6665 6573 5b69 5d29 0a20 2020 2020 2020  fees[i]).       
-0005e260: 2020 2020 2073 796d 626f 6c20 3d20 6665       symbol = fe
-0005e270: 655b 2773 796d 626f 6c27 5d0a 2020 2020  e['symbol'].    
-0005e280: 2020 2020 2020 2020 7265 7375 6c74 5b73          result[s
-0005e290: 796d 626f 6c5d 203d 2066 6565 0a20 2020  ymbol] = fee.   
-0005e2a0: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
-0005e2b0: 6c74 0a0a 2020 2020 6465 6620 7369 676e  lt..    def sign
-0005e2c0: 2873 656c 662c 2070 6174 682c 2061 7069  (self, path, api
-0005e2d0: 3d27 7075 626c 6963 272c 206d 6574 686f  ='public', metho
-0005e2e0: 643d 2747 4554 272c 2070 6172 616d 733d  d='GET', params=
-0005e2f0: 7b7d 2c20 6865 6164 6572 733d 4e6f 6e65  {}, headers=None
-0005e300: 2c20 626f 6479 3d4e 6f6e 6529 3a0a 2020  , body=None):.  
-0005e310: 2020 2020 2020 7572 6c20 3d20 7365 6c66        url = self
-0005e320: 2e69 6d70 6c6f 6465 5f68 6f73 746e 616d  .implode_hostnam
-0005e330: 6528 7365 6c66 2e75 726c 735b 2761 7069  e(self.urls['api
-0005e340: 275d 5b61 7069 5d29 202b 2027 2f27 202b  '][api]) + '/' +
-0005e350: 2070 6174 680a 2020 2020 2020 2020 6966   path.        if
-0005e360: 2061 7069 203d 3d20 2770 7562 6c69 6327   api == 'public'
-0005e370: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-0005e380: 2070 6172 616d 733a 0a20 2020 2020 2020   params:.       
-0005e390: 2020 2020 2020 2020 2075 726c 202b 3d20           url += 
-0005e3a0: 273f 2720 2b20 7365 6c66 2e72 6177 656e  '?' + self.rawen
-0005e3b0: 636f 6465 2870 6172 616d 7329 0a20 2020  code(params).   
-0005e3c0: 2020 2020 2065 6c69 6620 6170 6920 3d3d       elif api ==
-0005e3d0: 2027 7072 6976 6174 6527 3a0a 2020 2020   'private':.    
-0005e3e0: 2020 2020 2020 2020 7365 6c66 2e63 6865          self.che
-0005e3f0: 636b 5f72 6571 7569 7265 645f 6372 6564  ck_required_cred
-0005e400: 656e 7469 616c 7328 290a 2020 2020 2020  entials().      
-0005e410: 2020 2020 2020 6973 4f70 656e 6170 6920        isOpenapi 
-0005e420: 3d20 7572 6c2e 6669 6e64 2827 6f70 656e  = url.find('open
-0005e430: 6170 6927 2920 3e3d 2030 0a20 2020 2020  api') >= 0.     
-0005e440: 2020 2020 2020 2069 7356 3355 6e69 6669         isV3Unifi
-0005e450: 6564 4d61 7267 696e 203d 2075 726c 2e66  edMargin = url.f
-0005e460: 696e 6428 2775 6e69 6669 6564 2f76 3327  ind('unified/v3'
-0005e470: 2920 3e3d 2030 0a20 2020 2020 2020 2020  ) >= 0.         
-0005e480: 2020 2069 7356 3343 6f6e 7472 6163 7420     isV3Contract 
-0005e490: 3d20 7572 6c2e 6669 6e64 2827 636f 6e74  = url.find('cont
-0005e4a0: 7261 6374 2f76 3327 2920 3e3d 2030 0a20  ract/v3') >= 0. 
-0005e4b0: 2020 2020 2020 2020 2020 2069 7356 3555             isV5U
-0005e4c0: 6e69 6669 6564 4163 636f 756e 7420 3d20  nifiedAccount = 
-0005e4d0: 7572 6c2e 6669 6e64 2827 7635 2729 203e  url.find('v5') >
-0005e4e0: 3d20 300a 2020 2020 2020 2020 2020 2020  = 0.            
-0005e4f0: 7469 6d65 7374 616d 7020 3d20 7374 7228  timestamp = str(
-0005e500: 7365 6c66 2e6e 6f6e 6365 2829 290a 2020  self.nonce()).  
-0005e510: 2020 2020 2020 2020 2020 6966 2069 734f            if isO
-0005e520: 7065 6e61 7069 3a0a 2020 2020 2020 2020  penapi:.        
-0005e530: 2020 2020 2020 2020 6966 2070 6172 616d          if param
-0005e540: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
-0005e550: 2020 2020 2020 2062 6f64 7920 3d20 7365         body = se
-0005e560: 6c66 2e6a 736f 6e28 7061 7261 6d73 290a  lf.json(params).
-0005e570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005e580: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0005e590: 2020 2020 2020 2020 2020 2320 7365 6c66            # self
-0005e5a0: 2066 6978 2066 6f72 2050 4850 2069 7320   fix for PHP is 
-0005e5b0: 7265 7175 6972 6564 206f 7468 6572 7769  required otherwi
-0005e5c0: 7365 2069 7420 6765 6e65 7261 7465 730a  se it generates.
-0005e5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005e5e0: 2020 2020 2320 275b 5d27 206f 6e20 656d      # '[]' on em
-0005e5f0: 7074 7920 6172 7261 7973 2065 7665 6e20  pty arrays even 
-0005e600: 7768 656e 2066 6f72 6365 6420 746f 2075  when forced to u
-0005e610: 7365 206f 626a 6563 7473 0a20 2020 2020  se objects.     
-0005e620: 2020 2020 2020 2020 2020 2020 2020 2062                 b
-0005e630: 6f64 7920 3d20 277b 7d27 0a20 2020 2020  ody = '{}'.     
-0005e640: 2020 2020 2020 2020 2020 2070 6179 6c6f             paylo
-0005e650: 6164 203d 2074 696d 6573 7461 6d70 202b  ad = timestamp +
-0005e660: 2073 656c 662e 6170 694b 6579 202b 2062   self.apiKey + b
-0005e670: 6f64 790a 2020 2020 2020 2020 2020 2020  ody.            
-0005e680: 2020 2020 7369 676e 6174 7572 6520 3d20      signature = 
-0005e690: 7365 6c66 2e68 6d61 6328 7365 6c66 2e65  self.hmac(self.e
-0005e6a0: 6e63 6f64 6528 7061 796c 6f61 6429 2c20  ncode(payload), 
-0005e6b0: 7365 6c66 2e65 6e63 6f64 6528 7365 6c66  self.encode(self
-0005e6c0: 2e73 6563 7265 7429 2c20 6861 7368 6c69  .secret), hashli
-0005e6d0: 622e 7368 6132 3536 2c20 2768 6578 2729  b.sha256, 'hex')
-0005e6e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0005e6f0: 2068 6561 6465 7273 203d 207b 0a20 2020   headers = {.   
-0005e700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005e710: 2027 436f 6e74 656e 742d 5479 7065 273a   'Content-Type':
-0005e720: 2027 6170 706c 6963 6174 696f 6e2f 6a73   'application/js
-0005e730: 6f6e 272c 0a20 2020 2020 2020 2020 2020  on',.           
-0005e740: 2020 2020 2020 2020 2027 582d 4241 5049           'X-BAPI
-0005e750: 2d41 5049 2d4b 4559 273a 2073 656c 662e  -API-KEY': self.
-0005e760: 6170 694b 6579 2c0a 2020 2020 2020 2020  apiKey,.        
-0005e770: 2020 2020 2020 2020 2020 2020 2758 2d42              'X-B
-0005e780: 4150 492d 5449 4d45 5354 414d 5027 3a20  API-TIMESTAMP': 
-0005e790: 7469 6d65 7374 616d 702c 0a20 2020 2020  timestamp,.     
-0005e7a0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-0005e7b0: 582d 4241 5049 2d53 4947 4e27 3a20 7369  X-BAPI-SIGN': si
-0005e7c0: 676e 6174 7572 652c 0a20 2020 2020 2020  gnature,.       
-0005e7d0: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
-0005e7e0: 2020 2020 2020 2065 6c69 6620 6973 5633         elif isV3
-0005e7f0: 556e 6966 6965 644d 6172 6769 6e20 6f72  UnifiedMargin or
-0005e800: 2069 7356 3343 6f6e 7472 6163 7420 6f72   isV3Contract or
-0005e810: 2069 7356 3555 6e69 6669 6564 4163 636f   isV5UnifiedAcco
-0005e820: 756e 743a 0a20 2020 2020 2020 2020 2020  unt:.           
-0005e830: 2020 2020 2068 6561 6465 7273 203d 207b       headers = {
-0005e840: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0005e850: 2020 2020 2027 436f 6e74 656e 742d 5479       'Content-Ty
-0005e860: 7065 273a 2027 6170 706c 6963 6174 696f  pe': 'applicatio
-0005e870: 6e2f 6a73 6f6e 272c 0a20 2020 2020 2020  n/json',.       
-0005e880: 2020 2020 2020 2020 2020 2020 2027 582d               'X-
-0005e890: 4241 5049 2d41 5049 2d4b 4559 273a 2073  BAPI-API-KEY': s
-0005e8a0: 656c 662e 6170 694b 6579 2c0a 2020 2020  elf.apiKey,.    
-0005e8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005e8c0: 2758 2d42 4150 492d 5449 4d45 5354 414d  'X-BAPI-TIMESTAM
-0005e8d0: 5027 3a20 7469 6d65 7374 616d 702c 0a20  P': timestamp,. 
-0005e8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005e8f0: 2020 2027 582d 4241 5049 2d52 4543 562d     'X-BAPI-RECV-
-0005e900: 5749 4e44 4f57 273a 2073 7472 2873 656c  WINDOW': str(sel
-0005e910: 662e 6f70 7469 6f6e 735b 2772 6563 7657  f.options['recvW
-0005e920: 696e 646f 7727 5d29 2c0a 2020 2020 2020  indow']),.      
-0005e930: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-0005e940: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-0005e950: 7356 3355 6e69 6669 6564 4d61 7267 696e  sV3UnifiedMargin
-0005e960: 206f 7220 6973 5633 436f 6e74 7261 6374   or isV3Contract
-0005e970: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0005e980: 2020 2020 2020 6865 6164 6572 735b 2758        headers['X
-0005e990: 2d42 4150 492d 5349 474e 2d54 5950 4527  -BAPI-SIGN-TYPE'
-0005e9a0: 5d20 3d20 2732 270a 2020 2020 2020 2020  ] = '2'.        
-0005e9b0: 2020 2020 2020 2020 7175 6572 7920 3d20          query = 
-0005e9c0: 7365 6c66 2e65 7874 656e 6428 7b7d 2c20  self.extend({}, 
-0005e9d0: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
-0005e9e0: 2020 2020 2020 2020 7175 6572 7945 6e63          queryEnc
-0005e9f0: 6f64 6564 203d 2073 656c 662e 7261 7765  oded = self.rawe
-0005ea00: 6e63 6f64 6528 7175 6572 7929 0a20 2020  ncode(query).   
-0005ea10: 2020 2020 2020 2020 2020 2020 2061 7574               aut
-0005ea20: 685f 6261 7365 203d 2073 7472 2874 696d  h_base = str(tim
-0005ea30: 6573 7461 6d70 2920 2b20 7365 6c66 2e61  estamp) + self.a
-0005ea40: 7069 4b65 7920 2b20 7374 7228 7365 6c66  piKey + str(self
-0005ea50: 2e6f 7074 696f 6e73 5b27 7265 6376 5769  .options['recvWi
-0005ea60: 6e64 6f77 275d 290a 2020 2020 2020 2020  ndow']).        
-0005ea70: 2020 2020 2020 2020 6175 7468 4675 6c6c          authFull
-0005ea80: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-0005ea90: 2020 2020 2020 2020 6966 206d 6574 686f          if metho
-0005eaa0: 6420 3d3d 2027 504f 5354 273a 0a20 2020  d == 'POST':.   
-0005eab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005eac0: 2062 6f64 7920 3d20 7365 6c66 2e6a 736f   body = self.jso
-0005ead0: 6e28 7175 6572 7929 0a20 2020 2020 2020  n(query).       
-0005eae0: 2020 2020 2020 2020 2020 2020 2061 7574               aut
-0005eaf0: 6846 756c 6c20 3d20 6175 7468 5f62 6173  hFull = auth_bas
-0005eb00: 6520 2b20 626f 6479 0a20 2020 2020 2020  e + body.       
-0005eb10: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-0005eb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005eb30: 2020 2061 7574 6846 756c 6c20 3d20 6175     authFull = au
-0005eb40: 7468 5f62 6173 6520 2b20 7175 6572 7945  th_base + queryE
-0005eb50: 6e63 6f64 6564 0a20 2020 2020 2020 2020  ncoded.         
-0005eb60: 2020 2020 2020 2020 2020 2075 726c 202b             url +
-0005eb70: 3d20 273f 2720 2b20 7365 6c66 2e72 6177  = '?' + self.raw
-0005eb80: 656e 636f 6465 2871 7565 7279 290a 2020  encode(query).  
-0005eb90: 2020 2020 2020 2020 2020 2020 2020 7369                si
-0005eba0: 676e 6174 7572 6520 3d20 4e6f 6e65 0a20  gnature = None. 
-0005ebb0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0005ebc0: 6620 7365 6c66 2e73 6563 7265 742e 6669  f self.secret.fi
-0005ebd0: 6e64 2827 5052 4956 4154 4520 4b45 5927  nd('PRIVATE KEY'
-0005ebe0: 2920 3e20 2d31 3a0a 2020 2020 2020 2020  ) > -1:.        
-0005ebf0: 2020 2020 2020 2020 2020 2020 7369 676e              sign
-0005ec00: 6174 7572 6520 3d20 7365 6c66 2e72 7361  ature = self.rsa
-0005ec10: 2861 7574 6846 756c 6c2c 2073 656c 662e  (authFull, self.
-0005ec20: 7365 6372 6574 2c20 2773 6861 3235 3627  secret, 'sha256'
-0005ec30: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0005ec40: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0005ec50: 2020 2020 2020 2020 2020 2020 7369 676e              sign
-0005ec60: 6174 7572 6520 3d20 7365 6c66 2e68 6d61  ature = self.hma
-0005ec70: 6328 7365 6c66 2e65 6e63 6f64 6528 6175  c(self.encode(au
-0005ec80: 7468 4675 6c6c 292c 2073 656c 662e 656e  thFull), self.en
-0005ec90: 636f 6465 2873 656c 662e 7365 6372 6574  code(self.secret
-0005eca0: 292c 2068 6173 686c 6962 2e73 6861 3235  ), hashlib.sha25
-0005ecb0: 3629 0a20 2020 2020 2020 2020 2020 2020  6).             
-0005ecc0: 2020 2068 6561 6465 7273 5b27 582d 4241     headers['X-BA
-0005ecd0: 5049 2d53 4947 4e27 5d20 3d20 7369 676e  PI-SIGN'] = sign
-0005ece0: 6174 7572 650a 2020 2020 2020 2020 2020  ature.          
-0005ecf0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0005ed00: 2020 2020 2020 2020 7175 6572 7920 3d20          query = 
-0005ed10: 7365 6c66 2e65 7874 656e 6428 7061 7261  self.extend(para
-0005ed20: 6d73 2c20 7b0a 2020 2020 2020 2020 2020  ms, {.          
-0005ed30: 2020 2020 2020 2020 2020 2761 7069 5f6b            'api_k
-0005ed40: 6579 273a 2073 656c 662e 6170 694b 6579  ey': self.apiKey
-0005ed50: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0005ed60: 2020 2020 2020 2772 6563 765f 7769 6e64        'recv_wind
-0005ed70: 6f77 273a 2073 656c 662e 6f70 7469 6f6e  ow': self.option
-0005ed80: 735b 2772 6563 7657 696e 646f 7727 5d2c  s['recvWindow'],
-0005ed90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0005eda0: 2020 2020 2027 7469 6d65 7374 616d 7027       'timestamp'
-0005edb0: 3a20 7469 6d65 7374 616d 702c 0a20 2020  : timestamp,.   
-0005edc0: 2020 2020 2020 2020 2020 2020 207d 290a               }).
-0005edd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005ede0: 736f 7274 6564 5175 6572 7920 3d20 7365  sortedQuery = se
-0005edf0: 6c66 2e6b 6579 736f 7274 2871 7565 7279  lf.keysort(query
-0005ee00: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0005ee10: 2020 6175 7468 203d 2073 656c 662e 7261    auth = self.ra
-0005ee20: 7765 6e63 6f64 6528 736f 7274 6564 5175  wencode(sortedQu
-0005ee30: 6572 7929 0a20 2020 2020 2020 2020 2020  ery).           
-0005ee40: 2020 2020 2073 6967 6e61 7475 7265 203d       signature =
-0005ee50: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
-0005ee60: 2020 2020 2020 6966 2073 656c 662e 7365        if self.se
-0005ee70: 6372 6574 2e66 696e 6428 2750 5249 5641  cret.find('PRIVA
-0005ee80: 5445 204b 4559 2729 203e 202d 313a 0a20  TE KEY') > -1:. 
-0005ee90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005eea0: 2020 2073 6967 6e61 7475 7265 203d 2073     signature = s
-0005eeb0: 656c 662e 7273 6128 6175 7468 2c20 7365  elf.rsa(auth, se
-0005eec0: 6c66 2e73 6563 7265 742c 2027 7368 6132  lf.secret, 'sha2
-0005eed0: 3536 2729 0a20 2020 2020 2020 2020 2020  56').           
-0005eee0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0005eef0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0005ef00: 6967 6e61 7475 7265 203d 2073 656c 662e  ignature = self.
-0005ef10: 686d 6163 2873 656c 662e 656e 636f 6465  hmac(self.encode
-0005ef20: 2861 7574 6829 2c20 7365 6c66 2e65 6e63  (auth), self.enc
-0005ef30: 6f64 6528 7365 6c66 2e73 6563 7265 7429  ode(self.secret)
-0005ef40: 2c20 6861 7368 6c69 622e 7368 6132 3536  , hashlib.sha256
-0005ef50: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0005ef60: 2020 6966 206d 6574 686f 6420 3d3d 2027    if method == '
-0005ef70: 504f 5354 273a 0a20 2020 2020 2020 2020  POST':.         
-0005ef80: 2020 2020 2020 2020 2020 2069 7353 706f             isSpo
-0005ef90: 7420 3d20 7572 6c2e 6669 6e64 2827 7370  t = url.find('sp
-0005efa0: 6f74 2729 203e 3d20 300a 2020 2020 2020  ot') >= 0.      
-0005efb0: 2020 2020 2020 2020 2020 2020 2020 6578                ex
-0005efc0: 7465 6e64 6564 5175 6572 7920 3d20 7365  tendedQuery = se
-0005efd0: 6c66 2e65 7874 656e 6428 7175 6572 792c  lf.extend(query,
-0005efe0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
-0005eff0: 2020 2020 2020 2020 2020 2027 7369 676e             'sign
-0005f000: 273a 2073 6967 6e61 7475 7265 2c0a 2020  ': signature,.  
-0005f010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005f020: 2020 7d29 0a20 2020 2020 2020 2020 2020    }).           
-0005f030: 2020 2020 2020 2020 2069 6620 6973 5370           if isSp
-0005f040: 6f74 3a0a 2020 2020 2020 2020 2020 2020  ot:.            
-0005f050: 2020 2020 2020 2020 2020 2020 626f 6479              body
-0005f060: 203d 2073 656c 662e 7572 6c65 6e63 6f64   = self.urlencod
-0005f070: 6528 6578 7465 6e64 6564 5175 6572 7929  e(extendedQuery)
-0005f080: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0005f090: 2020 2020 2020 2020 2068 6561 6465 7273           headers
-0005f0a0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-0005f0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005f0c0: 2027 436f 6e74 656e 742d 5479 7065 273a   'Content-Type':
-0005f0d0: 2027 6170 706c 6963 6174 696f 6e2f 782d   'application/x-
-0005f0e0: 7777 772d 666f 726d 2d75 726c 656e 636f  www-form-urlenco
-0005f0f0: 6465 6427 2c0a 2020 2020 2020 2020 2020  ded',.          
-0005f100: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
-0005f110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005f120: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0005f130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005f140: 2020 626f 6479 203d 2073 656c 662e 6a73    body = self.js
-0005f150: 6f6e 2865 7874 656e 6465 6451 7565 7279  on(extendedQuery
-0005f160: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0005f170: 2020 2020 2020 2020 2020 6865 6164 6572            header
-0005f180: 7320 3d20 7b0a 2020 2020 2020 2020 2020  s = {.          
-0005f190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005f1a0: 2020 2743 6f6e 7465 6e74 2d54 7970 6527    'Content-Type'
-0005f1b0: 3a20 2761 7070 6c69 6361 7469 6f6e 2f6a  : 'application/j
-0005f1c0: 736f 6e27 2c0a 2020 2020 2020 2020 2020  son',.          
-0005f1d0: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
-0005f1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005f1f0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0005f200: 2020 2020 2020 2020 2020 7572 6c20 2b3d            url +=
-0005f210: 2027 3f27 202b 2073 656c 662e 7261 7765   '?' + self.rawe
-0005f220: 6e63 6f64 6528 736f 7274 6564 5175 6572  ncode(sortedQuer
-0005f230: 7929 0a20 2020 2020 2020 2020 2020 2020  y).             
-0005f240: 2020 2020 2020 2075 726c 202b 3d20 2726         url += '&
-0005f250: 7369 676e 3d27 202b 2073 6967 6e61 7475  sign=' + signatu
-0005f260: 7265 0a20 2020 2020 2020 2069 6620 6d65  re.        if me
-0005f270: 7468 6f64 203d 3d20 2750 4f53 5427 3a0a  thod == 'POST':.
-0005f280: 2020 2020 2020 2020 2020 2020 6272 6f6b              brok
-0005f290: 6572 4964 203d 2073 656c 662e 7361 6665  erId = self.safe
-0005f2a0: 5f73 7472 696e 6728 7365 6c66 2e6f 7074  _string(self.opt
-0005f2b0: 696f 6e73 2c20 2762 726f 6b65 7249 6427  ions, 'brokerId'
-0005f2c0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-0005f2d0: 2062 726f 6b65 7249 6420 6973 206e 6f74   brokerId is not
-0005f2e0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-0005f2f0: 2020 2020 2020 2068 6561 6465 7273 5b27         headers['
-0005f300: 5265 6665 7265 7227 5d20 3d20 6272 6f6b  Referer'] = brok
-0005f310: 6572 4964 0a20 2020 2020 2020 2072 6574  erId.        ret
-0005f320: 7572 6e20 7b27 7572 6c27 3a20 7572 6c2c  urn {'url': url,
-0005f330: 2027 6d65 7468 6f64 273a 206d 6574 686f   'method': metho
-0005f340: 642c 2027 626f 6479 273a 2062 6f64 792c  d, 'body': body,
-0005f350: 2027 6865 6164 6572 7327 3a20 6865 6164   'headers': head
-0005f360: 6572 737d 0a0a 2020 2020 6465 6620 6861  ers}..    def ha
-0005f370: 6e64 6c65 5f65 7272 6f72 7328 7365 6c66  ndle_errors(self
-0005f380: 2c20 6874 7470 436f 6465 2c20 7265 6173  , httpCode, reas
-0005f390: 6f6e 2c20 7572 6c2c 206d 6574 686f 642c  on, url, method,
-0005f3a0: 2068 6561 6465 7273 2c20 626f 6479 2c20   headers, body, 
-0005f3b0: 7265 7370 6f6e 7365 2c20 7265 7175 6573  response, reques
-0005f3c0: 7448 6561 6465 7273 2c20 7265 7175 6573  tHeaders, reques
-0005f3d0: 7442 6f64 7929 3a0a 2020 2020 2020 2020  tBody):.        
-0005f3e0: 6966 206e 6f74 2072 6573 706f 6e73 653a  if not response:
-0005f3f0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0005f400: 7572 6e20 4e6f 6e65 2020 2320 6661 6c6c  urn None  # fall
-0005f410: 6261 636b 2074 6f20 6465 6661 756c 7420  back to default 
-0005f420: 6572 726f 7220 6861 6e64 6c65 720a 2020  error handler.  
-0005f430: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-0005f440: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
-0005f450: 2320 2020 2020 2020 2020 7265 745f 636f  #         ret_co
-0005f460: 6465 3a20 3130 3030 312c 0a20 2020 2020  de: 10001,.     
-0005f470: 2020 2023 2020 2020 2020 2020 2072 6574     #         ret
-0005f480: 5f6d 7367 3a20 2752 6561 644d 6170 4342  _msg: 'ReadMapCB
-0005f490: 3a20 6578 7065 6374 207b 6f72 206e 2c20  : expect {or n, 
-0005f4a0: 6275 7420 666f 756e 6420 5c75 3030 3030  but found \u0000
-0005f4b0: 2c20 6572 726f 7220 2720 2b0a 2020 2020  , error ' +.    
-0005f4c0: 2020 2020 2320 2020 2020 2020 2020 2766      #         'f
-0005f4d0: 6f75 6e64 2069 6e20 2023 3020 6279 7465  ound in  #0 byte
-0005f4e0: 206f 6620 2e2e 2e7c 7c2e 2e2e 2c20 6269   of ...||..., bi
-0005f4f0: 6767 6572 2063 6f6e 7465 7874 2027 202b  gger context ' +
-0005f500: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0005f510: 2020 2027 2e2e 2e7c 7c2e 2e2e 272c 0a20     '...||...',. 
-0005f520: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0005f530: 2065 7874 5f63 6f64 653a 2027 272c 0a20   ext_code: '',. 
-0005f540: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0005f550: 2065 7874 5f69 6e66 6f3a 2027 272c 0a20   ext_info: '',. 
-0005f560: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0005f570: 2072 6573 756c 743a 206e 756c 6c2c 0a20   result: null,. 
-0005f580: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0005f590: 2074 696d 655f 6e6f 773a 2027 3135 3833   time_now: '1583
-0005f5a0: 3933 3431 3036 2e35 3930 3433 3627 0a20  934106.590436'. 
-0005f5b0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
-0005f5c0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-0005f5d0: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
-0005f5e0: 2023 2020 2020 2020 2020 2022 7265 7443   #         "retC
-0005f5f0: 6f64 6522 3a31 3030 3031 2c0a 2020 2020  ode":10001,.    
-0005f600: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-0005f610: 6574 4d73 6722 3a22 7379 6d62 6f6c 2070  etMsg":"symbol p
-0005f620: 6172 616d 7320 6572 7222 2c0a 2020 2020  arams err",.    
-0005f630: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-0005f640: 6573 756c 7422 3a7b 2273 796d 626f 6c22  esult":{"symbol"
-0005f650: 3a22 222c 2262 6964 223a 2222 2c22 6269  :"","bid":"","bi
-0005f660: 6449 7622 3a22 222c 2262 6964 5369 7a65  dIv":"","bidSize
-0005f670: 223a 2222 2c22 6173 6b22 3a22 222c 2261  ":"","ask":"","a
-0005f680: 736b 4976 223a 2222 2c22 6173 6b53 697a  skIv":"","askSiz
-0005f690: 6522 3a22 222c 226c 6173 7450 7269 6365  e":"","lastPrice
-0005f6a0: 223a 2222 2c22 6f70 656e 496e 7465 7265  ":"","openIntere
-0005f6b0: 7374 223a 2222 2c22 696e 6465 7850 7269  st":"","indexPri
-0005f6c0: 6365 223a 2222 2c22 6d61 726b 5072 6963  ce":"","markPric
-0005f6d0: 6522 3a22 222c 226d 6172 6b50 7269 6365  e":"","markPrice
-0005f6e0: 4976 223a 2222 2c22 6368 616e 6765 3234  Iv":"","change24
-0005f6f0: 6822 3a22 222c 2268 6967 6832 3468 223a  h":"","high24h":
-0005f700: 2222 2c22 6c6f 7732 3468 223a 2222 2c22  "","low24h":"","
-0005f710: 766f 6c75 6d65 3234 6822 3a22 222c 2274  volume24h":"","t
-0005f720: 7572 6e6f 7665 7232 3468 223a 2222 2c22  urnover24h":"","
-0005f730: 746f 7461 6c56 6f6c 756d 6522 3a22 222c  totalVolume":"",
-0005f740: 2274 6f74 616c 5475 726e 6f76 6572 223a  "totalTurnover":
-0005f750: 2222 2c22 6675 6e64 696e 6752 6174 6522  "","fundingRate"
-0005f760: 3a22 222c 2270 7265 6469 6374 6564 4675  :"","predictedFu
-0005f770: 6e64 696e 6752 6174 6522 3a22 222c 226e  ndingRate":"","n
-0005f780: 6578 7446 756e 6469 6e67 5469 6d65 223a  extFundingTime":
-0005f790: 2222 2c22 636f 756e 7464 6f77 6e48 6f75  "","countdownHou
-0005f7a0: 7222 3a22 3022 2c22 7072 6564 6963 7465  r":"0","predicte
-0005f7b0: 6444 656c 6976 6572 7950 7269 6365 223a  dDeliveryPrice":
-0005f7c0: 2222 2c22 756e 6465 726c 7969 6e67 5072  "","underlyingPr
-0005f7d0: 6963 6522 3a22 222c 2264 656c 7461 223a  ice":"","delta":
-0005f7e0: 2222 2c22 6761 6d6d 6122 3a22 222c 2276  "","gamma":"","v
-0005f7f0: 6567 6122 3a22 222c 2274 6865 7461 223a  ega":"","theta":
-0005f800: 2222 7d0a 2020 2020 2020 2020 2320 2020  ""}.        #   
-0005f810: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-0005f820: 2020 2020 2020 6572 726f 7243 6f64 6520        errorCode 
-0005f830: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-0005f840: 6e67 5f32 2872 6573 706f 6e73 652c 2027  ng_2(response, '
-0005f850: 7265 745f 636f 6465 272c 2027 7265 7443  ret_code', 'retC
-0005f860: 6f64 6527 290a 2020 2020 2020 2020 6966  ode').        if
-0005f870: 2065 7272 6f72 436f 6465 2021 3d20 2730   errorCode != '0
-0005f880: 273a 0a20 2020 2020 2020 2020 2020 2069  ':.            i
-0005f890: 6620 6572 726f 7243 6f64 6520 3d3d 2027  f errorCode == '
-0005f8a0: 3330 3038 3427 3a0a 2020 2020 2020 2020  30084':.        
-0005f8b0: 2020 2020 2020 2020 2320 6e6f 7420 616e          # not an
-0005f8c0: 2065 7272 6f72 0a20 2020 2020 2020 2020   error.         
-0005f8d0: 2020 2020 2020 2023 2068 7474 7073 3a2f         # https:/
-0005f8e0: 2f67 6974 6875 622e 636f 6d2f 6363 7874  /github.com/ccxt
-0005f8f0: 2f63 6378 742f 6973 7375 6573 2f31 3132  /ccxt/issues/112
-0005f900: 3638 0a20 2020 2020 2020 2020 2020 2020  68.             
-0005f910: 2020 2023 2068 7474 7073 3a2f 2f67 6974     # https://git
-0005f920: 6875 622e 636f 6d2f 6363 7874 2f63 6378  hub.com/ccxt/ccx
-0005f930: 742f 7075 6c6c 2f31 3136 3234 0a20 2020  t/pull/11624.   
-0005f940: 2020 2020 2020 2020 2020 2020 2023 2050               # P
-0005f950: 4f53 5420 6874 7470 733a 2f2f 6170 692e  OST https://api.
-0005f960: 6279 6269 742e 636f 6d2f 7632 2f70 7269  bybit.com/v2/pri
-0005f970: 7661 7465 2f70 6f73 6974 696f 6e2f 7377  vate/position/sw
-0005f980: 6974 6368 2d69 736f 6c61 7465 6420 3230  itch-isolated 20
-0005f990: 3020 4f4b 0a20 2020 2020 2020 2020 2020  0 OK.           
-0005f9a0: 2020 2020 2023 207b 2272 6574 5f63 6f64       # {"ret_cod
-0005f9b0: 6522 3a33 3030 3834 2c22 7265 745f 6d73  e":30084,"ret_ms
-0005f9c0: 6722 3a22 4973 6f6c 6174 6564 206e 6f74  g":"Isolated not
-0005f9d0: 206d 6f64 6966 6965 6422 2c22 6578 745f   modified","ext_
-0005f9e0: 636f 6465 223a 2222 2c22 6578 745f 696e  code":"","ext_in
-0005f9f0: 666f 223a 2222 2c22 7265 7375 6c74 223a  fo":"","result":
-0005fa00: 6e75 6c6c 2c22 7469 6d65 5f6e 6f77 223a  null,"time_now":
-0005fa10: 2231 3634 3230 3035 3231 392e 3933 3739  "1642005219.9379
-0005fa20: 3838 222c 2272 6174 655f 6c69 6d69 745f  88","rate_limit_
-0005fa30: 7374 6174 7573 223a 3733 2c22 7261 7465  status":73,"rate
-0005fa40: 5f6c 696d 6974 5f72 6573 6574 5f6d 7322  _limit_reset_ms"
-0005fa50: 3a31 3634 3230 3035 3231 3938 3934 2c22  :1642005219894,"
-0005fa60: 7261 7465 5f6c 696d 6974 223a 3735 7d0a  rate_limit":75}.
-0005fa70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005fa80: 7265 7475 726e 204e 6f6e 650a 2020 2020  return None.    
-0005fa90: 2020 2020 2020 2020 6665 6564 6261 636b          feedback
-0005faa0: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-0005fab0: 2020 2020 6966 2065 7272 6f72 436f 6465      if errorCode
-0005fac0: 203d 3d20 2731 3030 3035 273a 0a20 2020   == '10005':.   
-0005fad0: 2020 2020 2020 2020 2020 2020 2066 6565               fee
-0005fae0: 6462 6163 6b20 3d20 7365 6c66 2e69 6420  dback = self.id 
-0005faf0: 2b20 2720 7072 6976 6174 6520 6170 6920  + ' private api 
-0005fb00: 7573 6573 202f 7573 6572 2f76 332f 7072  uses /user/v3/pr
-0005fb10: 6976 6174 652f 7175 6572 792d 6170 6920  ivate/query-api 
-0005fb20: 746f 2063 6865 636b 2069 6620 796f 7520  to check if you 
-0005fb30: 6861 7665 2061 2075 6e69 6669 6564 2061  have a unified a
-0005fb40: 6363 6f75 6e74 2e20 5468 6520 4150 4920  ccount. The API 
-0005fb50: 6b65 7920 6f66 2075 7365 7220 6964 206d  key of user id m
-0005fb60: 7573 7420 6f77 6e20 6f6e 6520 6f66 2070  ust own one of p
-0005fb70: 6572 6d69 7373 696f 6e73 3a20 2241 6363  ermissions: "Acc
-0005fb80: 6f75 6e74 2054 7261 6e73 6665 7222 2c20  ount Transfer", 
-0005fb90: 2253 7562 6163 636f 756e 7420 5472 616e  "Subaccount Tran
-0005fba0: 7366 6572 222c 2022 5769 7468 6472 6177  sfer", "Withdraw
-0005fbb0: 616c 2220 2720 2b20 626f 6479 0a20 2020  al" ' + body.   
-0005fbc0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-0005fbd0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0005fbe0: 6565 6462 6163 6b20 3d20 7365 6c66 2e69  eedback = self.i
-0005fbf0: 6420 2b20 2720 2720 2b20 626f 6479 0a20  d + ' ' + body. 
-0005fc00: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0005fc10: 7468 726f 775f 6272 6f61 646c 795f 6d61  throw_broadly_ma
-0005fc20: 7463 6865 645f 6578 6365 7074 696f 6e28  tched_exception(
-0005fc30: 7365 6c66 2e65 7863 6570 7469 6f6e 735b  self.exceptions[
-0005fc40: 2762 726f 6164 275d 2c20 626f 6479 2c20  'broad'], body, 
-0005fc50: 6665 6564 6261 636b 290a 2020 2020 2020  feedback).      
-0005fc60: 2020 2020 2020 7365 6c66 2e74 6872 6f77        self.throw
-0005fc70: 5f65 7861 6374 6c79 5f6d 6174 6368 6564  _exactly_matched
-0005fc80: 5f65 7863 6570 7469 6f6e 2873 656c 662e  _exception(self.
-0005fc90: 6578 6365 7074 696f 6e73 5b27 6578 6163  exceptions['exac
-0005fca0: 7427 5d2c 2065 7272 6f72 436f 6465 2c20  t'], errorCode, 
-0005fcb0: 6665 6564 6261 636b 290a 2020 2020 2020  feedback).      
-0005fcc0: 2020 2020 2020 7261 6973 6520 4578 6368        raise Exch
-0005fcd0: 616e 6765 4572 726f 7228 6665 6564 6261  angeError(feedba
-0005fce0: 636b 2920 2023 2075 6e6b 6e6f 776e 206d  ck)  # unknown m
-0005fcf0: 6573 7361 6765 0a20 2020 2020 2020 2072  essage.        r
-0005fd00: 6574 7572 6e20 4e6f 6e65 0a              eturn None.
+00054270: 7374 6f70 4c6f 7373 223a 2022 222c 0a20  stopLoss": "",. 
+00054280: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00054290: 2022 6375 6d52 6561 6c69 7365 6450 6e6c   "cumRealisedPnl
+000542a0: 223a 2022 2d30 2e33 3232 3135 3530 3022  ": "-0.32215500"
+000542b0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000542c0: 2020 2020 2270 6f73 6974 696f 6e4d 4d22      "positionMM"
+000542d0: 3a20 2232 2e39 3734 3536 3435 3022 2c0a  : "2.97456450",.
+000542e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000542f0: 2020 2263 7265 6174 6564 5469 6d65 223a    "createdTime":
+00054300: 2031 3635 3737 3131 3934 3939 3238 2c0a   1657711949928,.
+00054310: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00054320: 2020 2270 6f73 6974 696f 6e49 6478 223a    "positionIdx":
+00054330: 2030 2c0a 2020 2020 2020 2020 2320 2020   0,.        #   
+00054340: 2020 2020 2020 2270 6f73 6974 696f 6e49        "positionI
+00054350: 4d22 3a20 2235 332e 3938 3234 3339 3530  M": "53.98243950
+00054360: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
+00054370: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
+00054380: 2020 2020 2320 756e 6966 6965 6420 6163      # unified ac
+00054390: 636f 756e 740a 2020 2020 2020 2020 230a  count.        #.
+000543a0: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+000543b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000543c0: 2020 2273 796d 626f 6c22 3a20 2258 5250    "symbol": "XRP
+000543d0: 5553 4454 222c 0a20 2020 2020 2020 2023  USDT",.        #
+000543e0: 2020 2020 2020 2020 2022 6c65 7665 7261           "levera
+000543f0: 6765 223a 2022 3130 222c 0a20 2020 2020  ge": "10",.     
+00054400: 2020 2023 2020 2020 2020 2020 2022 6176     #         "av
+00054410: 6750 7269 6365 223a 2022 302e 3336 3135  gPrice": "0.3615
+00054420: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00054430: 2020 2020 2022 6c69 7150 7269 6365 223a       "liqPrice":
+00054440: 2022 302e 3030 3031 222c 0a20 2020 2020   "0.0001",.     
+00054450: 2020 2023 2020 2020 2020 2020 2022 7269     #         "ri
+00054460: 736b 4c69 6d69 7456 616c 7565 223a 2022  skLimitValue": "
+00054470: 3230 3030 3030 222c 0a20 2020 2020 2020  200000",.       
+00054480: 2023 2020 2020 2020 2020 2022 7461 6b65   #         "take
+00054490: 5072 6f66 6974 223a 2022 222c 0a20 2020  Profit": "",.   
+000544a0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+000544b0: 706f 7369 7469 6f6e 5661 6c75 6522 3a20  positionValue": 
+000544c0: 2233 362e 3135 222c 0a20 2020 2020 2020  "36.15",.       
+000544d0: 2023 2020 2020 2020 2020 2022 7470 736c   #         "tpsl
+000544e0: 4d6f 6465 223a 2022 4675 6c6c 222c 0a20  Mode": "Full",. 
+000544f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00054500: 2022 7269 736b 4964 223a 2034 312c 0a20   "riskId": 41,. 
+00054510: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00054520: 2022 7472 6169 6c69 6e67 5374 6f70 223a   "trailingStop":
+00054530: 2022 3022 2c0a 2020 2020 2020 2020 2320   "0",.        # 
+00054540: 2020 2020 2020 2020 2275 6e72 6561 6c69          "unreali
+00054550: 7365 6450 6e6c 223a 2022 2d31 2e38 3322  sedPnl": "-1.83"
+00054560: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00054570: 2020 2020 226d 6172 6b50 7269 6365 223a      "markPrice":
+00054580: 2022 302e 3334 3332 222c 0a20 2020 2020   "0.3432",.     
+00054590: 2020 2023 2020 2020 2020 2020 2022 6375     #         "cu
+000545a0: 6d52 6561 6c69 7365 6450 6e6c 223a 2022  mRealisedPnl": "
+000545b0: 302e 3438 3830 3538 3736 222c 0a20 2020  0.48805876",.   
+000545c0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+000545d0: 706f 7369 7469 6f6e 4d4d 223a 2022 302e  positionMM": "0.
+000545e0: 3338 3130 3231 222c 0a20 2020 2020 2020  381021",.       
+000545f0: 2023 2020 2020 2020 2020 2022 6372 6561   #         "crea
+00054600: 7465 6454 696d 6522 3a20 2231 3637 3231  tedTime": "16721
+00054610: 3231 3138 3232 3136 222c 0a20 2020 2020  21182216",.     
+00054620: 2020 2023 2020 2020 2020 2020 2022 706f     #         "po
+00054630: 7369 7469 6f6e 4964 7822 3a20 302c 0a20  sitionIdx": 0,. 
+00054640: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00054650: 2022 706f 7369 7469 6f6e 494d 223a 2022   "positionIM": "
+00054660: 332e 3633 3435 3231 222c 0a20 2020 2020  3.634521",.     
+00054670: 2020 2023 2020 2020 2020 2020 2022 7570     #         "up
+00054680: 6461 7465 6454 696d 6522 3a20 2231 3637  datedTime": "167
+00054690: 3232 3739 3332 3236 3638 222c 0a20 2020  2279322668",.   
+000546a0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+000546b0: 7369 6465 223a 2022 4275 7922 2c0a 2020  side": "Buy",.  
+000546c0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000546d0: 2262 7573 7450 7269 6365 223a 2022 222c  "bustPrice": "",
+000546e0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000546f0: 2020 2022 7369 7a65 223a 2022 3130 3022     "size": "100"
+00054700: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00054710: 2020 2020 2270 6f73 6974 696f 6e53 7461      "positionSta
+00054720: 7475 7322 3a20 224e 6f72 6d61 6c22 2c0a  tus": "Normal",.
+00054730: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00054740: 2020 2273 746f 704c 6f73 7322 3a20 2222    "stopLoss": ""
+00054750: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00054760: 2020 2020 2274 7261 6465 4d6f 6465 223a      "tradeMode":
+00054770: 2030 0a20 2020 2020 2020 2023 2020 2020   0.        #    
+00054780: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
+00054790: 2020 2020 2063 6f6e 7472 6163 7420 3d20       contract = 
+000547a0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+000547b0: 2870 6f73 6974 696f 6e2c 2027 7379 6d62  (position, 'symb
+000547c0: 6f6c 2729 0a20 2020 2020 2020 206d 6172  ol').        mar
+000547d0: 6b65 7420 3d20 7365 6c66 2e73 6166 655f  ket = self.safe_
+000547e0: 6d61 726b 6574 2863 6f6e 7472 6163 742c  market(contract,
+000547f0: 206d 6172 6b65 742c 204e 6f6e 652c 2027   market, None, '
+00054800: 636f 6e74 7261 6374 2729 0a20 2020 2020  contract').     
+00054810: 2020 2073 697a 6520 3d20 5072 6563 6973     size = Precis
+00054820: 652e 7374 7269 6e67 5f61 6273 2873 656c  e.string_abs(sel
+00054830: 662e 7361 6665 5f73 7472 696e 6728 706f  f.safe_string(po
+00054840: 7369 7469 6f6e 2c20 2773 697a 6527 2929  sition, 'size'))
+00054850: 0a20 2020 2020 2020 2073 6964 6520 3d20  .        side = 
+00054860: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+00054870: 2870 6f73 6974 696f 6e2c 2027 7369 6465  (position, 'side
+00054880: 2729 0a20 2020 2020 2020 2069 6620 7369  ').        if si
+00054890: 6465 2069 7320 6e6f 7420 4e6f 6e65 3a0a  de is not None:.
+000548a0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+000548b0: 6964 6520 3d3d 2027 4275 7927 3a0a 2020  ide == 'Buy':.  
+000548c0: 2020 2020 2020 2020 2020 2020 2020 7369                si
+000548d0: 6465 203d 2027 6c6f 6e67 270a 2020 2020  de = 'long'.    
+000548e0: 2020 2020 2020 2020 656c 6966 2073 6964          elif sid
+000548f0: 6520 3d3d 2027 5365 6c6c 273a 0a20 2020  e == 'Sell':.   
+00054900: 2020 2020 2020 2020 2020 2020 2073 6964               sid
+00054910: 6520 3d20 2773 686f 7274 270a 2020 2020  e = 'short'.    
+00054920: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00054930: 2020 2020 2020 2020 2020 2020 2020 7369                si
+00054940: 6465 203d 204e 6f6e 650a 2020 2020 2020  de = None.      
+00054950: 2020 6e6f 7469 6f6e 616c 203d 2073 656c    notional = sel
+00054960: 662e 7361 6665 5f73 7472 696e 6728 706f  f.safe_string(po
+00054970: 7369 7469 6f6e 2c20 2770 6f73 6974 696f  sition, 'positio
+00054980: 6e56 616c 7565 2729 0a20 2020 2020 2020  nValue').       
+00054990: 2075 6e72 6561 6c69 7365 6450 6e6c 203d   unrealisedPnl =
+000549a0: 2073 656c 662e 6f6d 6974 5f7a 6572 6f28   self.omit_zero(
+000549b0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+000549c0: 2870 6f73 6974 696f 6e2c 2027 756e 7265  (position, 'unre
+000549d0: 616c 6973 6564 506e 6c27 2929 0a20 2020  alisedPnl')).   
+000549e0: 2020 2020 2069 6e69 7469 616c 4d61 7267       initialMarg
+000549f0: 696e 5374 7269 6e67 203d 2073 656c 662e  inString = self.
+00054a00: 7361 6665 5f73 7472 696e 6728 706f 7369  safe_string(posi
+00054a10: 7469 6f6e 2c20 2770 6f73 6974 696f 6e49  tion, 'positionI
+00054a20: 4d27 290a 2020 2020 2020 2020 6d61 696e  M').        main
+00054a30: 7465 6e61 6e63 654d 6172 6769 6e53 7472  tenanceMarginStr
+00054a40: 696e 6720 3d20 7365 6c66 2e73 6166 655f  ing = self.safe_
+00054a50: 7374 7269 6e67 2870 6f73 6974 696f 6e2c  string(position,
+00054a60: 2027 706f 7369 7469 6f6e 4d4d 2729 0a20   'positionMM'). 
+00054a70: 2020 2020 2020 2074 696d 6573 7461 6d70         timestamp
+00054a80: 203d 2073 656c 662e 7061 7273 6538 3630   = self.parse860
+00054a90: 3128 7365 6c66 2e73 6166 655f 7374 7269  1(self.safe_stri
+00054aa0: 6e67 2870 6f73 6974 696f 6e2c 2027 7570  ng(position, 'up
+00054ab0: 6461 7465 645f 6174 2729 290a 2020 2020  dated_at')).    
+00054ac0: 2020 2020 6966 2074 696d 6573 7461 6d70      if timestamp
+00054ad0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+00054ae0: 2020 2020 2020 7469 6d65 7374 616d 7020        timestamp 
+00054af0: 3d20 7365 6c66 2e73 6166 655f 696e 7465  = self.safe_inte
+00054b00: 6765 725f 6e28 706f 7369 7469 6f6e 2c20  ger_n(position, 
+00054b10: 5b27 7570 6461 7465 6454 696d 6527 2c20  ['updatedTime', 
+00054b20: 2775 7064 6174 6564 4174 275d 290a 2020  'updatedAt']).  
+00054b30: 2020 2020 2020 2320 6465 6661 756c 7420        # default 
+00054b40: 746f 2063 726f 7373 206f 6620 5553 4443  to cross of USDC
+00054b50: 206d 6172 6769 6e65 6420 706f 7369 7469   margined positi
+00054b60: 6f6e 730a 2020 2020 2020 2020 7472 6164  ons.        trad
+00054b70: 654d 6f64 6520 3d20 7365 6c66 2e73 6166  eMode = self.saf
+00054b80: 655f 696e 7465 6765 7228 706f 7369 7469  e_integer(positi
+00054b90: 6f6e 2c20 2774 7261 6465 4d6f 6465 272c  on, 'tradeMode',
+00054ba0: 2030 290a 2020 2020 2020 2020 6d61 7267   0).        marg
+00054bb0: 696e 4d6f 6465 203d 2027 6973 6f6c 6174  inMode = 'isolat
+00054bc0: 6564 2720 6966 2074 7261 6465 4d6f 6465  ed' if tradeMode
+00054bd0: 2065 6c73 6520 2763 726f 7373 270a 2020   else 'cross'.  
+00054be0: 2020 2020 2020 636f 6c6c 6174 6572 616c        collateral
+00054bf0: 5374 7269 6e67 203d 2073 656c 662e 7361  String = self.sa
+00054c00: 6665 5f73 7472 696e 6728 706f 7369 7469  fe_string(positi
+00054c10: 6f6e 2c20 2770 6f73 6974 696f 6e42 616c  on, 'positionBal
+00054c20: 616e 6365 2729 0a20 2020 2020 2020 2065  ance').        e
+00054c30: 6e74 7279 5072 6963 6520 3d20 7365 6c66  ntryPrice = self
+00054c40: 2e6f 6d69 745f 7a65 726f 2873 656c 662e  .omit_zero(self.
+00054c50: 7361 6665 5f73 7472 696e 675f 3228 706f  safe_string_2(po
+00054c60: 7369 7469 6f6e 2c20 2765 6e74 7279 5072  sition, 'entryPr
+00054c70: 6963 6527 2c20 2761 7667 5072 6963 6527  ice', 'avgPrice'
+00054c80: 2929 0a20 2020 2020 2020 206c 6971 7569  )).        liqui
+00054c90: 6461 7469 6f6e 5072 6963 6520 3d20 7365  dationPrice = se
+00054ca0: 6c66 2e6f 6d69 745f 7a65 726f 2873 656c  lf.omit_zero(sel
+00054cb0: 662e 7361 6665 5f73 7472 696e 6728 706f  f.safe_string(po
+00054cc0: 7369 7469 6f6e 2c20 276c 6971 5072 6963  sition, 'liqPric
+00054cd0: 6527 2929 0a20 2020 2020 2020 206c 6576  e')).        lev
+00054ce0: 6572 6167 6520 3d20 7365 6c66 2e73 6166  erage = self.saf
+00054cf0: 655f 7374 7269 6e67 2870 6f73 6974 696f  e_string(positio
+00054d00: 6e2c 2027 6c65 7665 7261 6765 2729 0a20  n, 'leverage'). 
+00054d10: 2020 2020 2020 2069 6620 6c69 7175 6964         if liquid
+00054d20: 6174 696f 6e50 7269 6365 2069 7320 6e6f  ationPrice is no
+00054d30: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00054d40: 2020 2020 6966 206d 6172 6b65 745b 2773      if market['s
+00054d50: 6574 746c 6527 5d20 3d3d 2027 5553 4443  ettle'] == 'USDC
+00054d60: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
+00054d70: 2020 2023 2020 2845 6e74 7279 2070 7269     #  (Entry pri
+00054d80: 6365 202d 204c 6971 2070 7269 6365 2920  ce - Liq price) 
+00054d90: 2a20 436f 6e74 7261 6374 7320 2b20 4d61  * Contracts + Ma
+00054da0: 696e 7465 6e61 6e63 6520 4d61 7267 696e  intenance Margin
+00054db0: 202b 2028 756e 7265 616c 6973 6564 2070   + (unrealised p
+00054dc0: 6e6c 2920 3d20 436f 6c6c 6174 6572 616c  nl) = Collateral
+00054dd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00054de0: 2064 6966 6665 7265 6e63 6520 3d20 5072   difference = Pr
+00054df0: 6563 6973 652e 7374 7269 6e67 5f61 6273  ecise.string_abs
+00054e00: 2850 7265 6369 7365 2e73 7472 696e 675f  (Precise.string_
+00054e10: 7375 6228 656e 7472 7950 7269 6365 2c20  sub(entryPrice, 
+00054e20: 6c69 7175 6964 6174 696f 6e50 7269 6365  liquidationPrice
+00054e30: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
+00054e40: 2020 2063 6f6c 6c61 7465 7261 6c53 7472     collateralStr
+00054e50: 696e 6720 3d20 5072 6563 6973 652e 7374  ing = Precise.st
+00054e60: 7269 6e67 5f61 6464 2850 7265 6369 7365  ring_add(Precise
+00054e70: 2e73 7472 696e 675f 6164 6428 5072 6563  .string_add(Prec
+00054e80: 6973 652e 7374 7269 6e67 5f6d 756c 2864  ise.string_mul(d
+00054e90: 6966 6665 7265 6e63 652c 2073 697a 6529  ifference, size)
+00054ea0: 2c20 6d61 696e 7465 6e61 6e63 654d 6172  , maintenanceMar
+00054eb0: 6769 6e53 7472 696e 6729 2c20 756e 7265  ginString), unre
+00054ec0: 616c 6973 6564 506e 6c29 0a20 2020 2020  alisedPnl).     
+00054ed0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00054ee0: 2020 2020 2020 2020 2020 2020 2062 7573               bus
+00054ef0: 7450 7269 6365 203d 2073 656c 662e 7361  tPrice = self.sa
+00054f00: 6665 5f73 7472 696e 6728 706f 7369 7469  fe_string(positi
+00054f10: 6f6e 2c20 2762 7573 7450 7269 6365 2729  on, 'bustPrice')
+00054f20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00054f30: 2069 6620 6d61 726b 6574 5b27 6c69 6e65   if market['line
+00054f40: 6172 275d 3a0a 2020 2020 2020 2020 2020  ar']:.          
+00054f50: 2020 2020 2020 2020 2020 2320 6465 7269            # deri
+00054f60: 7665 6420 6672 6f6d 2074 6865 2066 6f6c  ved from the fol
+00054f70: 6c6f 7769 6e67 2066 6f72 6d75 6c61 730a  lowing formulas.
+00054f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00054f90: 2020 2020 2320 2028 456e 7472 7920 7072      #  (Entry pr
+00054fa0: 6963 6520 2d20 4275 7374 2070 7269 6365  ice - Bust price
+00054fb0: 2920 2a20 436f 6e74 7261 6374 7320 3d20  ) * Contracts = 
+00054fc0: 436f 6c6c 6174 6572 616c 0a20 2020 2020  Collateral.     
+00054fd0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00054fe0: 2020 2845 6e74 7279 2070 7269 6365 202d    (Entry price -
+00054ff0: 204c 6971 2070 7269 6365 2920 2a20 436f   Liq price) * Co
+00055000: 6e74 7261 6374 7320 3d20 436f 6c6c 6174  ntracts = Collat
+00055010: 6572 616c 202d 204d 6169 6e74 656e 616e  eral - Maintenan
+00055020: 6365 204d 6172 6769 6e0a 2020 2020 2020  ce Margin.      
+00055030: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00055040: 4d61 696e 7465 6e61 6e63 6520 4d61 7267  Maintenance Marg
+00055050: 696e 203d 2028 4275 7374 2070 7269 6365  in = (Bust price
+00055060: 202d 204c 6971 2070 7269 6365 2920 7820   - Liq price) x 
+00055070: 436f 6e74 7261 6374 730a 2020 2020 2020  Contracts.      
+00055080: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
+00055090: 696e 7465 6e61 6e63 654d 6172 6769 6e50  intenanceMarginP
+000550a0: 7269 6365 4469 6666 6572 656e 6365 203d  riceDifference =
+000550b0: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
+000550c0: 6162 7328 5072 6563 6973 652e 7374 7269  abs(Precise.stri
+000550d0: 6e67 5f73 7562 286c 6971 7569 6461 7469  ng_sub(liquidati
+000550e0: 6f6e 5072 6963 652c 2062 7573 7450 7269  onPrice, bustPri
+000550f0: 6365 2929 0a20 2020 2020 2020 2020 2020  ce)).           
+00055100: 2020 2020 2020 2020 206d 6169 6e74 656e           mainten
+00055110: 616e 6365 4d61 7267 696e 5374 7269 6e67  anceMarginString
+00055120: 203d 2050 7265 6369 7365 2e73 7472 696e   = Precise.strin
+00055130: 675f 6d75 6c28 6d61 696e 7465 6e61 6e63  g_mul(maintenanc
+00055140: 654d 6172 6769 6e50 7269 6365 4469 6666  eMarginPriceDiff
+00055150: 6572 656e 6365 2c20 7369 7a65 290a 2020  erence, size).  
+00055160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00055170: 2020 2320 496e 6974 6961 6c20 4d61 7267    # Initial Marg
+00055180: 696e 203d 2043 6f6e 7472 6163 7473 2078  in = Contracts x
+00055190: 2045 6e74 7279 2050 7269 6365 202f 204c   Entry Price / L
+000551a0: 6576 6572 6167 650a 2020 2020 2020 2020  everage.        
+000551b0: 2020 2020 2020 2020 2020 2020 6966 2065              if e
+000551c0: 6e74 7279 5072 6963 6520 6973 206e 6f74  ntryPrice is not
+000551d0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+000551e0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000551f0: 6e69 7469 616c 4d61 7267 696e 5374 7269  nitialMarginStri
+00055200: 6e67 203d 2050 7265 6369 7365 2e73 7472  ng = Precise.str
+00055210: 696e 675f 6469 7628 5072 6563 6973 652e  ing_div(Precise.
+00055220: 7374 7269 6e67 5f6d 756c 2873 697a 652c  string_mul(size,
+00055230: 2065 6e74 7279 5072 6963 6529 2c20 6c65   entryPrice), le
+00055240: 7665 7261 6765 290a 2020 2020 2020 2020  verage).        
+00055250: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00055260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00055270: 2020 2320 436f 6e74 7261 6374 7320 2a20    # Contracts * 
+00055280: 2831 202f 2045 6e74 7279 2070 7269 6365  (1 / Entry price
+00055290: 202d 2031 202f 2042 7573 7420 7072 6963   - 1 / Bust pric
+000552a0: 6529 203d 2043 6f6c 6c61 7465 7261 6c0a  e) = Collateral.
+000552b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000552c0: 2020 2020 2320 436f 6e74 7261 6374 7320      # Contracts 
+000552d0: 2a20 2831 202f 2045 6e74 7279 2070 7269  * (1 / Entry pri
+000552e0: 6365 202d 2031 202f 204c 6971 2070 7269  ce - 1 / Liq pri
+000552f0: 6365 2920 3d20 436f 6c6c 6174 6572 616c  ce) = Collateral
+00055300: 202d 204d 6169 6e74 656e 616e 6365 204d   - Maintenance M
+00055310: 6172 6769 6e0a 2020 2020 2020 2020 2020  argin.          
+00055320: 2020 2020 2020 2020 2020 2320 4d61 696e            # Main
+00055330: 7465 6e61 6e63 6520 4d61 7267 696e 203d  tenance Margin =
+00055340: 2043 6f6e 7472 6163 7473 202a 2028 3120   Contracts * (1 
+00055350: 2f20 4c69 7120 7072 6963 6520 2d20 3120  / Liq price - 1 
+00055360: 2f20 4275 7374 2070 7269 6365 290a 2020  / Bust price).  
+00055370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00055380: 2020 2320 4d61 696e 7465 6e61 6e63 6520    # Maintenance 
+00055390: 4d61 7267 696e 203d 2043 6f6e 7472 6163  Margin = Contrac
+000553a0: 7473 202a 2028 4275 7374 2070 7269 6365  ts * (Bust price
+000553b0: 202d 204c 6971 2070 7269 6365 2920 2f20   - Liq price) / 
+000553c0: 284c 6971 2070 7269 6365 2078 2042 7573  (Liq price x Bus
+000553d0: 7420 7072 6963 6529 0a20 2020 2020 2020  t price).       
+000553e0: 2020 2020 2020 2020 2020 2020 2064 6966               dif
+000553f0: 6665 7265 6e63 6520 3d20 5072 6563 6973  ference = Precis
+00055400: 652e 7374 7269 6e67 5f61 6273 2850 7265  e.string_abs(Pre
+00055410: 6369 7365 2e73 7472 696e 675f 7375 6228  cise.string_sub(
+00055420: 6275 7374 5072 6963 652c 206c 6971 7569  bustPrice, liqui
+00055430: 6461 7469 6f6e 5072 6963 6529 290a 2020  dationPrice)).  
+00055440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00055450: 2020 6d75 6c74 6970 6c79 203d 2050 7265    multiply = Pre
+00055460: 6369 7365 2e73 7472 696e 675f 6d75 6c28  cise.string_mul(
+00055470: 6275 7374 5072 6963 652c 206c 6971 7569  bustPrice, liqui
+00055480: 6461 7469 6f6e 5072 6963 6529 0a20 2020  dationPrice).   
+00055490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000554a0: 206d 6169 6e74 656e 616e 6365 4d61 7267   maintenanceMarg
+000554b0: 696e 5374 7269 6e67 203d 2050 7265 6369  inString = Preci
+000554c0: 7365 2e73 7472 696e 675f 6469 7628 5072  se.string_div(Pr
+000554d0: 6563 6973 652e 7374 7269 6e67 5f6d 756c  ecise.string_mul
+000554e0: 2873 697a 652c 2064 6966 6665 7265 6e63  (size, differenc
+000554f0: 6529 2c20 6d75 6c74 6970 6c79 290a 2020  e), multiply).  
+00055500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00055510: 2020 2320 496e 6974 6961 6c20 4d61 7267    # Initial Marg
+00055520: 696e 203d 204c 6576 6572 6167 6520 7820  in = Leverage x 
+00055530: 436f 6e74 7261 6374 7320 2f20 456e 7472  Contracts / Entr
+00055540: 7950 7269 6365 0a20 2020 2020 2020 2020  yPrice.         
+00055550: 2020 2020 2020 2020 2020 2069 6620 656e             if en
+00055560: 7472 7950 7269 6365 2069 7320 6e6f 7420  tryPrice is not 
+00055570: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00055580: 2020 2020 2020 2020 2020 2020 2020 696e                in
+00055590: 6974 6961 6c4d 6172 6769 6e53 7472 696e  itialMarginStrin
+000555a0: 6720 3d20 5072 6563 6973 652e 7374 7269  g = Precise.stri
+000555b0: 6e67 5f64 6976 2873 697a 652c 2050 7265  ng_div(size, Pre
+000555c0: 6369 7365 2e73 7472 696e 675f 6d75 6c28  cise.string_mul(
+000555d0: 656e 7472 7950 7269 6365 2c20 6c65 7665  entryPrice, leve
+000555e0: 7261 6765 2929 0a20 2020 2020 2020 206d  rage)).        m
+000555f0: 6169 6e74 656e 616e 6365 4d61 7267 696e  aintenanceMargin
+00055600: 5065 7263 656e 7461 6765 203d 2050 7265  Percentage = Pre
+00055610: 6369 7365 2e73 7472 696e 675f 6469 7628  cise.string_div(
+00055620: 6d61 696e 7465 6e61 6e63 654d 6172 6769  maintenanceMargi
+00055630: 6e53 7472 696e 672c 206e 6f74 696f 6e61  nString, notiona
+00055640: 6c29 0a20 2020 2020 2020 206d 6172 6769  l).        margi
+00055650: 6e52 6174 696f 203d 2050 7265 6369 7365  nRatio = Precise
+00055660: 2e73 7472 696e 675f 6469 7628 6d61 696e  .string_div(main
+00055670: 7465 6e61 6e63 654d 6172 6769 6e53 7472  tenanceMarginStr
+00055680: 696e 672c 2063 6f6c 6c61 7465 7261 6c53  ing, collateralS
+00055690: 7472 696e 672c 2034 290a 2020 2020 2020  tring, 4).      
+000556a0: 2020 7265 7475 726e 2073 656c 662e 7361    return self.sa
+000556b0: 6665 5f70 6f73 6974 696f 6e28 7b0a 2020  fe_position({.  
+000556c0: 2020 2020 2020 2020 2020 2769 6e66 6f27            'info'
+000556d0: 3a20 706f 7369 7469 6f6e 2c0a 2020 2020  : position,.    
+000556e0: 2020 2020 2020 2020 2769 6427 3a20 4e6f          'id': No
+000556f0: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
+00055700: 2773 796d 626f 6c27 3a20 6d61 726b 6574  'symbol': market
+00055710: 5b27 7379 6d62 6f6c 275d 2c0a 2020 2020  ['symbol'],.    
+00055720: 2020 2020 2020 2020 2774 696d 6573 7461          'timesta
+00055730: 6d70 273a 2074 696d 6573 7461 6d70 2c0a  mp': timestamp,.
+00055740: 2020 2020 2020 2020 2020 2020 2764 6174              'dat
+00055750: 6574 696d 6527 3a20 7365 6c66 2e69 736f  etime': self.iso
+00055760: 3836 3031 2874 696d 6573 7461 6d70 292c  8601(timestamp),
+00055770: 0a20 2020 2020 2020 2020 2020 2027 6c61  .            'la
+00055780: 7374 5570 6461 7465 5469 6d65 7374 616d  stUpdateTimestam
+00055790: 7027 3a20 4e6f 6e65 2c0a 2020 2020 2020  p': None,.      
+000557a0: 2020 2020 2020 2769 6e69 7469 616c 4d61        'initialMa
+000557b0: 7267 696e 273a 2073 656c 662e 7061 7273  rgin': self.pars
+000557c0: 655f 6e75 6d62 6572 2869 6e69 7469 616c  e_number(initial
+000557d0: 4d61 7267 696e 5374 7269 6e67 292c 0a20  MarginString),. 
+000557e0: 2020 2020 2020 2020 2020 2027 696e 6974             'init
+000557f0: 6961 6c4d 6172 6769 6e50 6572 6365 6e74  ialMarginPercent
+00055800: 6167 6527 3a20 7365 6c66 2e70 6172 7365  age': self.parse
+00055810: 5f6e 756d 6265 7228 5072 6563 6973 652e  _number(Precise.
+00055820: 7374 7269 6e67 5f64 6976 2869 6e69 7469  string_div(initi
+00055830: 616c 4d61 7267 696e 5374 7269 6e67 2c20  alMarginString, 
+00055840: 6e6f 7469 6f6e 616c 2929 2c0a 2020 2020  notional)),.    
+00055850: 2020 2020 2020 2020 276d 6169 6e74 656e          'mainten
+00055860: 616e 6365 4d61 7267 696e 273a 2073 656c  anceMargin': sel
+00055870: 662e 7061 7273 655f 6e75 6d62 6572 286d  f.parse_number(m
+00055880: 6169 6e74 656e 616e 6365 4d61 7267 696e  aintenanceMargin
+00055890: 5374 7269 6e67 292c 0a20 2020 2020 2020  String),.       
+000558a0: 2020 2020 2027 6d61 696e 7465 6e61 6e63       'maintenanc
+000558b0: 654d 6172 6769 6e50 6572 6365 6e74 6167  eMarginPercentag
+000558c0: 6527 3a20 7365 6c66 2e70 6172 7365 5f6e  e': self.parse_n
+000558d0: 756d 6265 7228 6d61 696e 7465 6e61 6e63  umber(maintenanc
+000558e0: 654d 6172 6769 6e50 6572 6365 6e74 6167  eMarginPercentag
+000558f0: 6529 2c0a 2020 2020 2020 2020 2020 2020  e),.            
+00055900: 2765 6e74 7279 5072 6963 6527 3a20 7365  'entryPrice': se
+00055910: 6c66 2e70 6172 7365 5f6e 756d 6265 7228  lf.parse_number(
+00055920: 656e 7472 7950 7269 6365 292c 0a20 2020  entryPrice),.   
+00055930: 2020 2020 2020 2020 2027 6e6f 7469 6f6e           'notion
+00055940: 616c 273a 2073 656c 662e 7061 7273 655f  al': self.parse_
+00055950: 6e75 6d62 6572 286e 6f74 696f 6e61 6c29  number(notional)
+00055960: 2c0a 2020 2020 2020 2020 2020 2020 276c  ,.            'l
+00055970: 6576 6572 6167 6527 3a20 7365 6c66 2e70  everage': self.p
+00055980: 6172 7365 5f6e 756d 6265 7228 6c65 7665  arse_number(leve
+00055990: 7261 6765 292c 0a20 2020 2020 2020 2020  rage),.         
+000559a0: 2020 2027 756e 7265 616c 697a 6564 506e     'unrealizedPn
+000559b0: 6c27 3a20 7365 6c66 2e70 6172 7365 5f6e  l': self.parse_n
+000559c0: 756d 6265 7228 756e 7265 616c 6973 6564  umber(unrealised
+000559d0: 506e 6c29 2c0a 2020 2020 2020 2020 2020  Pnl),.          
+000559e0: 2020 2763 6f6e 7472 6163 7473 273a 2073    'contracts': s
+000559f0: 656c 662e 7061 7273 655f 6e75 6d62 6572  elf.parse_number
+00055a00: 2873 697a 6529 2c20 2023 2069 6e20 5553  (size),  # in US
+00055a10: 4420 666f 7220 696e 7665 7273 6520 7377  D for inverse sw
+00055a20: 6170 730a 2020 2020 2020 2020 2020 2020  aps.            
+00055a30: 2763 6f6e 7472 6163 7453 697a 6527 3a20  'contractSize': 
+00055a40: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
+00055a50: 286d 6172 6b65 742c 2027 636f 6e74 7261  (market, 'contra
+00055a60: 6374 5369 7a65 2729 2c0a 2020 2020 2020  ctSize'),.      
+00055a70: 2020 2020 2020 276d 6172 6769 6e52 6174        'marginRat
+00055a80: 696f 273a 2073 656c 662e 7061 7273 655f  io': self.parse_
+00055a90: 6e75 6d62 6572 286d 6172 6769 6e52 6174  number(marginRat
+00055aa0: 696f 292c 0a20 2020 2020 2020 2020 2020  io),.           
+00055ab0: 2027 6c69 7175 6964 6174 696f 6e50 7269   'liquidationPri
+00055ac0: 6365 273a 2073 656c 662e 7061 7273 655f  ce': self.parse_
+00055ad0: 6e75 6d62 6572 286c 6971 7569 6461 7469  number(liquidati
+00055ae0: 6f6e 5072 6963 6529 2c0a 2020 2020 2020  onPrice),.      
+00055af0: 2020 2020 2020 276d 6172 6b50 7269 6365        'markPrice
+00055b00: 273a 2073 656c 662e 7361 6665 5f6e 756d  ': self.safe_num
+00055b10: 6265 7228 706f 7369 7469 6f6e 2c20 276d  ber(position, 'm
+00055b20: 6172 6b50 7269 6365 2729 2c0a 2020 2020  arkPrice'),.    
+00055b30: 2020 2020 2020 2020 276c 6173 7450 7269          'lastPri
+00055b40: 6365 273a 204e 6f6e 652c 0a20 2020 2020  ce': None,.     
+00055b50: 2020 2020 2020 2027 636f 6c6c 6174 6572         'collater
+00055b60: 616c 273a 2073 656c 662e 7061 7273 655f  al': self.parse_
+00055b70: 6e75 6d62 6572 2863 6f6c 6c61 7465 7261  number(collatera
+00055b80: 6c53 7472 696e 6729 2c0a 2020 2020 2020  lString),.      
+00055b90: 2020 2020 2020 276d 6172 6769 6e4d 6f64        'marginMod
+00055ba0: 6527 3a20 6d61 7267 696e 4d6f 6465 2c0a  e': marginMode,.
+00055bb0: 2020 2020 2020 2020 2020 2020 2773 6964              'sid
+00055bc0: 6527 3a20 7369 6465 2c0a 2020 2020 2020  e': side,.      
+00055bd0: 2020 2020 2020 2770 6572 6365 6e74 6167        'percentag
+00055be0: 6527 3a20 4e6f 6e65 2c0a 2020 2020 2020  e': None,.      
+00055bf0: 2020 7d29 0a0a 2020 2020 6465 6620 7365    })..    def se
+00055c00: 745f 6d61 7267 696e 5f6d 6f64 6528 7365  t_margin_mode(se
+00055c10: 6c66 2c20 6d61 7267 696e 4d6f 6465 2c20  lf, marginMode, 
+00055c20: 7379 6d62 6f6c 3a20 4f70 7469 6f6e 616c  symbol: Optional
+00055c30: 5b73 7472 5d20 3d20 4e6f 6e65 2c20 7061  [str] = None, pa
+00055c40: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
+00055c50: 2020 7365 6c66 2e6c 6f61 645f 6d61 726b    self.load_mark
+00055c60: 6574 7328 290a 2020 2020 2020 2020 7661  ets().        va
+00055c70: 6c75 6573 203d 2073 656c 662e 6973 5f75  lues = self.is_u
+00055c80: 6e69 6669 6564 5f65 6e61 626c 6564 2829  nified_enabled()
+00055c90: 0a20 2020 2020 2020 2069 7355 6e69 6669  .        isUnifi
+00055ca0: 6564 4163 636f 756e 7420 3d20 7365 6c66  edAccount = self
+00055cb0: 2e73 6166 655f 7661 6c75 6528 7661 6c75  .safe_value(valu
+00055cc0: 6573 2c20 3129 0a20 2020 2020 2020 2069  es, 1).        i
+00055cd0: 6620 6973 556e 6966 6965 6441 6363 6f75  f isUnifiedAccou
+00055ce0: 6e74 3a0a 2020 2020 2020 2020 2020 2020  nt:.            
+00055cf0: 7265 7475 726e 2073 656c 662e 7365 745f  return self.set_
+00055d00: 756e 6966 6965 645f 6d61 7267 696e 5f6d  unified_margin_m
+00055d10: 6f64 6528 6d61 7267 696e 4d6f 6465 2c20  ode(marginMode, 
+00055d20: 7379 6d62 6f6c 2c20 7061 7261 6d73 290a  symbol, params).
+00055d30: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00055d40: 656c 662e 7365 745f 6465 7269 7661 7469  elf.set_derivati
+00055d50: 7665 735f 6d61 7267 696e 5f6d 6f64 6528  ves_margin_mode(
+00055d60: 6d61 7267 696e 4d6f 6465 2c20 7379 6d62  marginMode, symb
+00055d70: 6f6c 2c20 7061 7261 6d73 290a 0a20 2020  ol, params)..   
+00055d80: 2064 6566 2073 6574 5f75 6e69 6669 6564   def set_unified
+00055d90: 5f6d 6172 6769 6e5f 6d6f 6465 2873 656c  _margin_mode(sel
+00055da0: 662c 206d 6172 6769 6e4d 6f64 652c 2073  f, marginMode, s
+00055db0: 796d 626f 6c3a 204f 7074 696f 6e61 6c5b  ymbol: Optional[
+00055dc0: 7374 725d 203d 204e 6f6e 652c 2070 6172  str] = None, par
+00055dd0: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
+00055de0: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
+00055df0: 7473 2829 0a20 2020 2020 2020 2069 6620  ts().        if 
+00055e00: 286d 6172 6769 6e4d 6f64 6520 213d 2027  (marginMode != '
+00055e10: 5245 4755 4c41 525f 4d41 5247 494e 2729  REGULAR_MARGIN')
+00055e20: 2061 6e64 2028 6d61 7267 696e 4d6f 6465   and (marginMode
+00055e30: 2021 3d20 2750 4f52 5446 4f4c 494f 5f4d   != 'PORTFOLIO_M
+00055e40: 4152 4749 4e27 293a 0a20 2020 2020 2020  ARGIN'):.       
+00055e50: 2020 2020 2072 6169 7365 2042 6164 5265       raise BadRe
+00055e60: 7175 6573 7428 7365 6c66 2e69 6420 2b20  quest(self.id + 
+00055e70: 2720 7365 744d 6172 6769 6e4d 6f64 6528  ' setMarginMode(
+00055e80: 2920 6d61 7267 696e 4d6f 6465 206d 7573  ) marginMode mus
+00055e90: 7420 6265 2065 6974 6865 7220 5245 4755  t be either REGU
+00055ea0: 4c41 525f 4d41 5247 494e 206f 7220 504f  LAR_MARGIN or PO
+00055eb0: 5254 464f 4c49 4f5f 4d41 5247 494e 2729  RTFOLIO_MARGIN')
+00055ec0: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
+00055ed0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+00055ee0: 2027 7365 744d 6172 6769 6e4d 6f64 6527   'setMarginMode'
+00055ef0: 3a20 6d61 7267 696e 4d6f 6465 2c0a 2020  : marginMode,.  
+00055f00: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00055f10: 7265 7370 6f6e 7365 203d 2073 656c 662e  response = self.
+00055f20: 7072 6976 6174 6550 6f73 7456 3541 6363  privatePostV5Acc
+00055f30: 6f75 6e74 5365 744d 6172 6769 6e4d 6f64  ountSetMarginMod
+00055f40: 6528 7365 6c66 2e65 7874 656e 6428 7265  e(self.extend(re
+00055f50: 7175 6573 742c 2070 6172 616d 7329 290a  quest, params)).
+00055f60: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+00055f70: 2020 2320 207b 0a20 2020 2020 2020 2023    #  {.        #
+00055f80: 2020 2020 2020 2273 6574 4d61 7267 696e        "setMargin
+00055f90: 4d6f 6465 223a 2022 504f 5254 464f 4c49  Mode": "PORTFOLI
+00055fa0: 4f5f 4d41 5247 494e 220a 2020 2020 2020  O_MARGIN".      
+00055fb0: 2020 2320 207d 0a20 2020 2020 2020 2023    #  }.        #
+00055fc0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00055fd0: 7265 7370 6f6e 7365 0a0a 2020 2020 6465  response..    de
+00055fe0: 6620 7365 745f 6465 7269 7661 7469 7665  f set_derivative
+00055ff0: 735f 6d61 7267 696e 5f6d 6f64 6528 7365  s_margin_mode(se
+00056000: 6c66 2c20 6d61 7267 696e 4d6f 6465 2c20  lf, marginMode, 
+00056010: 7379 6d62 6f6c 3a20 4f70 7469 6f6e 616c  symbol: Optional
+00056020: 5b73 7472 5d20 3d20 4e6f 6e65 2c20 7061  [str] = None, pa
+00056030: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
+00056040: 2020 7365 6c66 2e63 6865 636b 5f72 6571    self.check_req
+00056050: 7569 7265 645f 7379 6d62 6f6c 2827 7365  uired_symbol('se
+00056060: 744d 6172 6769 6e4d 6f64 6527 2c20 7379  tMarginMode', sy
+00056070: 6d62 6f6c 290a 2020 2020 2020 2020 7365  mbol).        se
+00056080: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
+00056090: 290a 2020 2020 2020 2020 6d61 726b 6574  ).        market
+000560a0: 203d 2073 656c 662e 6d61 726b 6574 2873   = self.market(s
+000560b0: 796d 626f 6c29 0a20 2020 2020 2020 2069  ymbol).        i
+000560c0: 6620 6d61 726b 6574 5b27 7365 7474 6c65  f market['settle
+000560d0: 275d 203d 3d20 2755 5344 4327 3a0a 2020  '] == 'USDC':.  
+000560e0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+000560f0: 4e6f 7453 7570 706f 7274 6564 2873 656c  NotSupported(sel
+00056100: 662e 6964 202b 2027 2073 6574 4d61 7267  f.id + ' setMarg
+00056110: 696e 4d6f 6465 2829 2064 6f65 7320 6e6f  inMode() does no
+00056120: 7420 7375 7070 6f72 7420 6d61 726b 6574  t support market
+00056130: 2027 202b 2073 796d 626f 6c20 2b20 2727   ' + symbol + ''
+00056140: 290a 2020 2020 2020 2020 6d61 7267 696e  ).        margin
+00056150: 4d6f 6465 203d 206d 6172 6769 6e4d 6f64  Mode = marginMod
+00056160: 652e 7570 7065 7228 290a 2020 2020 2020  e.upper().      
+00056170: 2020 6966 2028 6d61 7267 696e 4d6f 6465    if (marginMode
+00056180: 2021 3d20 2749 534f 4c41 5445 4427 2920   != 'ISOLATED') 
+00056190: 616e 6420 286d 6172 6769 6e4d 6f64 6520  and (marginMode 
+000561a0: 213d 2027 4352 4f53 5327 293a 0a20 2020  != 'CROSS'):.   
+000561b0: 2020 2020 2020 2020 2072 6169 7365 2042           raise B
+000561c0: 6164 5265 7175 6573 7428 7365 6c66 2e69  adRequest(self.i
+000561d0: 6420 2b20 2720 7365 744d 6172 6769 6e4d  d + ' setMarginM
+000561e0: 6f64 6528 2920 6d61 7267 696e 4d6f 6465  ode() marginMode
+000561f0: 206d 7573 7420 6265 2065 6974 6865 7220   must be either 
+00056200: 6973 6f6c 6174 6564 206f 7220 6372 6f73  isolated or cros
+00056210: 7327 290a 2020 2020 2020 2020 6c65 7665  s').        leve
+00056220: 7261 6765 203d 2073 656c 662e 7361 6665  rage = self.safe
+00056230: 5f73 7472 696e 6728 7061 7261 6d73 2c20  _string(params, 
+00056240: 276c 6576 6572 6167 6527 290a 2020 2020  'leverage').    
+00056250: 2020 2020 7365 6c6c 4c65 7665 7261 6765      sellLeverage
+00056260: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+00056270: 6275 794c 6576 6572 6167 6520 3d20 4e6f  buyLeverage = No
+00056280: 6e65 0a20 2020 2020 2020 2069 6620 6c65  ne.        if le
+00056290: 7665 7261 6765 2069 7320 4e6f 6e65 3a0a  verage is None:.
+000562a0: 2020 2020 2020 2020 2020 2020 7365 6c6c              sell
+000562b0: 4c65 7665 7261 6765 203d 2073 656c 662e  Leverage = self.
+000562c0: 7361 6665 5f73 7472 696e 675f 3228 7061  safe_string_2(pa
+000562d0: 7261 6d73 2c20 2773 656c 6c5f 6c65 7665  rams, 'sell_leve
+000562e0: 7261 6765 272c 2027 7365 6c6c 4c65 7665  rage', 'sellLeve
+000562f0: 7261 6765 2729 0a20 2020 2020 2020 2020  rage').         
+00056300: 2020 2062 7579 4c65 7665 7261 6765 203d     buyLeverage =
+00056310: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+00056320: 675f 3228 7061 7261 6d73 2c20 2762 7579  g_2(params, 'buy
+00056330: 5f6c 6576 6572 6167 6527 2c20 2762 7579  _leverage', 'buy
+00056340: 4c65 7665 7261 6765 2729 0a20 2020 2020  Leverage').     
+00056350: 2020 2020 2020 2069 6620 7365 6c6c 4c65         if sellLe
+00056360: 7665 7261 6765 2069 7320 4e6f 6e65 2061  verage is None a
+00056370: 6e64 2062 7579 4c65 7665 7261 6765 2069  nd buyLeverage i
+00056380: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+00056390: 2020 2020 2020 2020 7261 6973 6520 4172          raise Ar
+000563a0: 6775 6d65 6e74 7352 6571 7569 7265 6428  gumentsRequired(
+000563b0: 7365 6c66 2e69 6420 2b20 2720 7365 744d  self.id + ' setM
+000563c0: 6172 6769 6e4d 6f64 6528 2920 7265 7175  arginMode() requ
+000563d0: 6972 6573 2061 206c 6576 6572 6167 6520  ires a leverage 
+000563e0: 7061 7261 6d65 7465 7220 6f72 2073 656c  parameter or sel
+000563f0: 6c5f 6c65 7665 7261 6765 2061 6e64 2062  l_leverage and b
+00056400: 7579 5f6c 6576 6572 6167 6520 7061 7261  uy_leverage para
+00056410: 6d65 7465 7273 2729 0a20 2020 2020 2020  meters').       
+00056420: 2020 2020 2069 6620 6275 794c 6576 6572       if buyLever
+00056430: 6167 6520 6973 204e 6f6e 653a 0a20 2020  age is None:.   
+00056440: 2020 2020 2020 2020 2020 2020 2062 7579               buy
+00056450: 4c65 7665 7261 6765 203d 2073 656c 6c4c  Leverage = sellL
+00056460: 6576 6572 6167 650a 2020 2020 2020 2020  everage.        
+00056470: 2020 2020 6966 2073 656c 6c4c 6576 6572      if sellLever
+00056480: 6167 6520 6973 204e 6f6e 653a 0a20 2020  age is None:.   
+00056490: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+000564a0: 6c4c 6576 6572 6167 6520 3d20 6275 794c  lLeverage = buyL
+000564b0: 6576 6572 6167 650a 2020 2020 2020 2020  everage.        
+000564c0: 2020 2020 7061 7261 6d73 203d 2073 656c      params = sel
+000564d0: 662e 6f6d 6974 2870 6172 616d 732c 205b  f.omit(params, [
+000564e0: 2762 7579 5f6c 6576 6572 6167 6527 2c20  'buy_leverage', 
+000564f0: 2773 656c 6c5f 6c65 7665 7261 6765 272c  'sell_leverage',
+00056500: 2027 7365 6c6c 4c65 7665 7261 6765 272c   'sellLeverage',
+00056510: 2027 6275 794c 6576 6572 6167 6527 5d29   'buyLeverage'])
+00056520: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00056530: 2020 2020 2020 2020 2020 2070 6172 616d             param
+00056540: 7320 3d20 7365 6c66 2e6f 6d69 7428 7061  s = self.omit(pa
+00056550: 7261 6d73 2c20 276c 6576 6572 6167 6527  rams, 'leverage'
+00056560: 290a 2020 2020 2020 2020 2020 2020 7365  ).            se
+00056570: 6c6c 4c65 7665 7261 6765 203d 206c 6576  llLeverage = lev
+00056580: 6572 6167 650a 2020 2020 2020 2020 2020  erage.          
+00056590: 2020 6275 794c 6576 6572 6167 6520 3d20    buyLeverage = 
+000565a0: 6c65 7665 7261 6765 0a20 2020 2020 2020  leverage.       
+000565b0: 2074 7261 6465 4d6f 6465 203d 2031 2069   tradeMode = 1 i
+000565c0: 6620 286d 6172 6769 6e4d 6f64 6520 3d3d  f (marginMode ==
+000565d0: 2027 4953 4f4c 4154 4544 2729 2065 6c73   'ISOLATED') els
+000565e0: 6520 300a 2020 2020 2020 2020 7265 7175  e 0.        requ
+000565f0: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
+00056600: 2020 2020 2773 796d 626f 6c27 3a20 6d61      'symbol': ma
+00056610: 726b 6574 5b27 6964 275d 2c0a 2020 2020  rket['id'],.    
+00056620: 2020 2020 2020 2020 2774 7261 6465 4d6f          'tradeMo
+00056630: 6465 273a 2074 7261 6465 4d6f 6465 2c0a  de': tradeMode,.
+00056640: 2020 2020 2020 2020 2020 2020 2762 7579              'buy
+00056650: 4c65 7665 7261 6765 273a 2062 7579 4c65  Leverage': buyLe
+00056660: 7665 7261 6765 2c0a 2020 2020 2020 2020  verage,.        
+00056670: 2020 2020 2773 656c 6c4c 6576 6572 6167      'sellLeverag
+00056680: 6527 3a20 7365 6c6c 4c65 7665 7261 6765  e': sellLeverage
+00056690: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
+000566a0: 2020 2020 7265 7370 6f6e 7365 203d 2073      response = s
+000566b0: 656c 662e 7072 6976 6174 6550 6f73 7443  elf.privatePostC
+000566c0: 6f6e 7472 6163 7456 3350 7269 7661 7465  ontractV3Private
+000566d0: 506f 7369 7469 6f6e 5377 6974 6368 4973  PositionSwitchIs
+000566e0: 6f6c 6174 6564 2873 656c 662e 6578 7465  olated(self.exte
+000566f0: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
+00056700: 6d73 2929 0a20 2020 2020 2020 2023 0a20  ms)).        #. 
+00056710: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
+00056720: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00056730: 2022 7265 7443 6f64 6522 3a20 302c 0a20   "retCode": 0,. 
+00056740: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00056750: 2022 7265 744d 7367 223a 2022 4f4b 222c   "retMsg": "OK",
+00056760: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00056770: 2020 2022 7265 7375 6c74 223a 207b 7d2c     "result": {},
+00056780: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00056790: 2020 2022 7265 7445 7874 496e 666f 223a     "retExtInfo":
+000567a0: 206e 756c 6c2c 0a20 2020 2020 2020 2023   null,.        #
+000567b0: 2020 2020 2020 2020 2022 7469 6d65 223a           "time":
+000567c0: 2031 3635 3839 3038 3533 3235 3830 0a20   1658908532580. 
+000567d0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+000567e0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+000567f0: 2072 6574 7572 6e20 7265 7370 6f6e 7365   return response
+00056800: 0a0a 2020 2020 6465 6620 7365 745f 6c65  ..    def set_le
+00056810: 7665 7261 6765 2873 656c 662c 206c 6576  verage(self, lev
+00056820: 6572 6167 652c 2073 796d 626f 6c3a 204f  erage, symbol: O
+00056830: 7074 696f 6e61 6c5b 7374 725d 203d 204e  ptional[str] = N
+00056840: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
+00056850: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00056860: 2020 2020 2073 6574 2074 6865 206c 6576       set the lev
+00056870: 656c 206f 6620 6c65 7665 7261 6765 2066  el of leverage f
+00056880: 6f72 2061 206d 6172 6b65 740a 2020 2020  or a market.    
+00056890: 2020 2020 3a70 6172 616d 2066 6c6f 6174      :param float
+000568a0: 206c 6576 6572 6167 653a 2074 6865 2072   leverage: the r
+000568b0: 6174 6520 6f66 206c 6576 6572 6167 650a  ate of leverage.
+000568c0: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+000568d0: 7472 2073 796d 626f 6c3a 2075 6e69 6669  tr symbol: unifi
+000568e0: 6564 206d 6172 6b65 7420 7379 6d62 6f6c  ed market symbol
+000568f0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00056900: 6469 6374 2070 6172 616d 733a 2065 7874  dict params: ext
+00056910: 7261 2070 6172 616d 6574 6572 7320 7370  ra parameters sp
+00056920: 6563 6966 6963 2074 6f20 7468 6520 6279  ecific to the by
+00056930: 6269 7420 6170 6920 656e 6470 6f69 6e74  bit api endpoint
+00056940: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
+00056950: 7320 6469 6374 3a20 7265 7370 6f6e 7365  s dict: response
+00056960: 2066 726f 6d20 7468 6520 6578 6368 616e   from the exchan
+00056970: 6765 0a20 2020 2020 2020 2022 2222 0a20  ge.        """. 
+00056980: 2020 2020 2020 2073 656c 662e 6368 6563         self.chec
+00056990: 6b5f 7265 7175 6972 6564 5f73 796d 626f  k_required_symbo
+000569a0: 6c28 2773 6574 4c65 7665 7261 6765 272c  l('setLeverage',
+000569b0: 2073 796d 626f 6c29 0a20 2020 2020 2020   symbol).       
+000569c0: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
+000569d0: 7473 2829 0a20 2020 2020 2020 206d 6172  ts().        mar
+000569e0: 6b65 7420 3d20 7365 6c66 2e6d 6172 6b65  ket = self.marke
+000569f0: 7428 7379 6d62 6f6c 290a 2020 2020 2020  t(symbol).      
+00056a00: 2020 2320 5741 524e 494e 473a 2054 4849    # WARNING: THI
+00056a10: 5320 5749 4c4c 2049 4e43 5245 4153 4520  S WILL INCREASE 
+00056a20: 4c49 5155 4944 4154 494f 4e20 5052 4943  LIQUIDATION PRIC
+00056a30: 4520 464f 5220 4f50 454e 2049 534f 4c41  E FOR OPEN ISOLA
+00056a40: 5445 4420 4c4f 4e47 2050 4f53 4954 494f  TED LONG POSITIO
+00056a50: 4e53 0a20 2020 2020 2020 2023 2041 4e44  NS.        # AND
+00056a60: 2044 4543 5245 4153 4520 4c49 5155 4944   DECREASE LIQUID
+00056a70: 4154 494f 4e20 5052 4943 4520 464f 5220  ATION PRICE FOR 
+00056a80: 4f50 454e 2049 534f 4c41 5445 4420 5348  OPEN ISOLATED SH
+00056a90: 4f52 5420 504f 5349 5449 4f4e 530a 2020  ORT POSITIONS.  
+00056aa0: 2020 2020 2020 6973 5573 6463 5365 7474        isUsdcSett
+00056ab0: 6c65 6420 3d20 6d61 726b 6574 5b27 7365  led = market['se
+00056ac0: 7474 6c65 275d 203d 3d20 2755 5344 4327  ttle'] == 'USDC'
+00056ad0: 0a20 2020 2020 2020 2065 6e61 626c 6555  .        enableU
+00056ae0: 6e69 6669 6564 4d61 7267 696e 2c20 656e  nifiedMargin, en
+00056af0: 6162 6c65 556e 6966 6965 6441 6363 6f75  ableUnifiedAccou
+00056b00: 6e74 203d 2073 656c 662e 6973 5f75 6e69  nt = self.is_uni
+00056b10: 6669 6564 5f65 6e61 626c 6564 2829 0a20  fied_enabled(). 
+00056b20: 2020 2020 2020 2023 2065 6e67 6167 6520         # engage 
+00056b30: 696e 206c 6576 6572 6167 6520 7365 7474  in leverage sett
+00056b40: 696e 670a 2020 2020 2020 2020 2320 7765  ing.        # we
+00056b50: 2072 6575 7365 2074 6865 2063 6f64 6520   reuse the code 
+00056b60: 6865 7265 2069 6e73 7465 6164 206f 6620  here instead of 
+00056b70: 6861 7669 6e67 2074 776f 206d 6574 686f  having two metho
+00056b80: 6473 0a20 2020 2020 2020 206c 6576 6572  ds.        lever
+00056b90: 6167 6520 3d20 7365 6c66 2e6e 756d 6265  age = self.numbe
+00056ba0: 725f 746f 5f73 7472 696e 6728 6c65 7665  r_to_string(leve
+00056bb0: 7261 6765 290a 2020 2020 2020 2020 6d65  rage).        me
+00056bc0: 7468 6f64 203d 204e 6f6e 650a 2020 2020  thod = None.    
+00056bd0: 2020 2020 7265 7175 6573 7420 3d20 4e6f      request = No
+00056be0: 6e65 0a20 2020 2020 2020 2069 6620 656e  ne.        if en
+00056bf0: 6162 6c65 556e 6966 6965 644d 6172 6769  ableUnifiedMargi
+00056c00: 6e20 6f72 2065 6e61 626c 6555 6e69 6669  n or enableUnifi
+00056c10: 6564 4163 636f 756e 7420 6f72 206e 6f74  edAccount or not
+00056c20: 2069 7355 7364 6353 6574 746c 6564 3a0a   isUsdcSettled:.
+00056c30: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+00056c40: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
+00056c50: 2020 2020 2020 2020 2773 796d 626f 6c27          'symbol'
+00056c60: 3a20 6d61 726b 6574 5b27 6964 275d 2c0a  : market['id'],.
+00056c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00056c80: 2762 7579 4c65 7665 7261 6765 273a 206c  'buyLeverage': l
+00056c90: 6576 6572 6167 652c 0a20 2020 2020 2020  everage,.       
+00056ca0: 2020 2020 2020 2020 2027 7365 6c6c 4c65           'sellLe
+00056cb0: 7665 7261 6765 273a 206c 6576 6572 6167  verage': leverag
+00056cc0: 652c 0a20 2020 2020 2020 2020 2020 207d  e,.            }
+00056cd0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00056ce0: 656e 6162 6c65 556e 6966 6965 6441 6363  enableUnifiedAcc
+00056cf0: 6f75 6e74 3a0a 2020 2020 2020 2020 2020  ount:.          
+00056d00: 2020 2020 2020 6966 206d 6172 6b65 745b        if market[
+00056d10: 276c 696e 6561 7227 5d3a 0a20 2020 2020  'linear']:.     
+00056d20: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00056d30: 6571 7565 7374 5b27 6361 7465 676f 7279  equest['category
+00056d40: 275d 203d 2027 6c69 6e65 6172 270a 2020  '] = 'linear'.  
+00056d50: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00056d60: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00056d70: 2020 2020 2020 2020 7261 6973 6520 4e6f          raise No
+00056d80: 7453 7570 706f 7274 6564 2873 656c 662e  tSupported(self.
+00056d90: 6964 202b 2027 2073 6574 556e 6966 6965  id + ' setUnifie
+00056da0: 644d 6172 6769 6e4c 6576 6572 6167 6528  dMarginLeverage(
+00056db0: 2920 6c65 7665 7261 6765 2064 6f65 736e  ) leverage doesn
+00056dc0: 5c27 7420 7375 7070 6f72 7420 696e 7665  \'t support inve
+00056dd0: 7273 6520 616e 6420 6f70 7469 6f6e 206d  rse and option m
+00056de0: 6172 6b65 7420 696e 2075 6e69 6669 6564  arket in unified
+00056df0: 2061 6363 6f75 6e74 2729 0a20 2020 2020   account').     
+00056e00: 2020 2020 2020 2020 2020 206d 6574 686f             metho
+00056e10: 6420 3d20 2770 7269 7661 7465 506f 7374  d = 'privatePost
+00056e20: 5635 506f 7369 7469 6f6e 5365 744c 6576  V5PositionSetLev
+00056e30: 6572 6167 6527 0a20 2020 2020 2020 2020  erage'.         
+00056e40: 2020 2065 6c69 6620 656e 6162 6c65 556e     elif enableUn
+00056e50: 6966 6965 644d 6172 6769 6e3a 0a20 2020  ifiedMargin:.   
+00056e60: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00056e70: 6d61 726b 6574 5b27 6f70 7469 6f6e 275d  market['option']
+00056e80: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00056e90: 2020 2020 2020 7265 7175 6573 745b 2763        request['c
+00056ea0: 6174 6567 6f72 7927 5d20 3d20 276f 7074  ategory'] = 'opt
+00056eb0: 696f 6e27 0a20 2020 2020 2020 2020 2020  ion'.           
+00056ec0: 2020 2020 2065 6c69 6620 6d61 726b 6574       elif market
+00056ed0: 5b27 6c69 6e65 6172 275d 3a0a 2020 2020  ['linear']:.    
+00056ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00056ef0: 7265 7175 6573 745b 2763 6174 6567 6f72  request['categor
+00056f00: 7927 5d20 3d20 276c 696e 6561 7227 0a20  y'] = 'linear'. 
+00056f10: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00056f20: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00056f30: 2020 2020 2020 2020 2072 6169 7365 204e           raise N
+00056f40: 6f74 5375 7070 6f72 7465 6428 7365 6c66  otSupported(self
+00056f50: 2e69 6420 2b20 2720 7365 7455 6e69 6669  .id + ' setUnifi
+00056f60: 6564 4d61 7267 696e 4c65 7665 7261 6765  edMarginLeverage
+00056f70: 2829 206c 6576 6572 6167 6520 646f 6573  () leverage does
+00056f80: 6e5c 2774 2073 7570 706f 7274 2069 6e76  n\'t support inv
+00056f90: 6572 7365 206d 6172 6b65 7420 696e 2075  erse market in u
+00056fa0: 6e69 6669 6564 206d 6172 6769 6e27 290a  nified margin').
+00056fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00056fc0: 6d65 7468 6f64 203d 2027 7072 6976 6174  method = 'privat
+00056fd0: 6550 6f73 7455 6e69 6669 6564 5633 5072  ePostUnifiedV3Pr
+00056fe0: 6976 6174 6550 6f73 6974 696f 6e53 6574  ivatePositionSet
+00056ff0: 4c65 7665 7261 6765 270a 2020 2020 2020  Leverage'.      
+00057000: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00057010: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
+00057020: 6f64 203d 2027 7072 6976 6174 6550 6f73  od = 'privatePos
+00057030: 7443 6f6e 7472 6163 7456 3350 7269 7661  tContractV3Priva
+00057040: 7465 506f 7369 7469 6f6e 5365 744c 6576  tePositionSetLev
+00057050: 6572 6167 6527 0a20 2020 2020 2020 2065  erage'.        e
+00057060: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00057070: 2072 6571 7565 7374 203d 207b 0a20 2020   request = {.   
+00057080: 2020 2020 2020 2020 2020 2020 2027 7379               'sy
+00057090: 6d62 6f6c 273a 206d 6172 6b65 745b 2769  mbol': market['i
+000570a0: 6427 5d2c 0a20 2020 2020 2020 2020 2020  d'],.           
+000570b0: 2020 2020 2027 6c65 7665 7261 6765 273a       'leverage':
+000570c0: 206c 6576 6572 6167 652c 0a20 2020 2020   leverage,.     
+000570d0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+000570e0: 2020 2020 206d 6574 686f 6420 3d20 2770       method = 'p
+000570f0: 7269 7661 7465 506f 7374 5065 7270 6574  rivatePostPerpet
+00057100: 7561 6c55 7364 634f 7065 6e61 7069 5072  ualUsdcOpenapiPr
+00057110: 6976 6174 6556 3150 6f73 6974 696f 6e4c  ivateV1PositionL
+00057120: 6576 6572 6167 6553 6176 6527 0a20 2020  everageSave'.   
+00057130: 2020 2020 2072 6574 7572 6e20 6765 7461       return geta
+00057140: 7474 7228 7365 6c66 2c20 6d65 7468 6f64  ttr(self, method
+00057150: 2928 7365 6c66 2e65 7874 656e 6428 7265  )(self.extend(re
+00057160: 7175 6573 742c 2070 6172 616d 7329 290a  quest, params)).
+00057170: 0a20 2020 2064 6566 2073 6574 5f70 6f73  .    def set_pos
+00057180: 6974 696f 6e5f 6d6f 6465 2873 656c 662c  ition_mode(self,
+00057190: 2068 6564 6765 642c 2073 796d 626f 6c3a   hedged, symbol:
+000571a0: 204f 7074 696f 6e61 6c5b 7374 725d 203d   Optional[str] =
+000571b0: 204e 6f6e 652c 2070 6172 616d 733d 7b7d   None, params={}
+000571c0: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
+000571d0: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
+000571e0: 2020 2020 2020 206d 6f64 6520 3d20 4e6f         mode = No
+000571f0: 6e65 0a20 2020 2020 2020 2069 6620 6865  ne.        if he
+00057200: 6467 6564 3a0a 2020 2020 2020 2020 2020  dged:.          
+00057210: 2020 6d6f 6465 203d 2033 0a20 2020 2020    mode = 3.     
+00057220: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00057230: 2020 2020 206d 6f64 6520 3d20 300a 2020       mode = 0.  
+00057240: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
+00057250: 7b0a 2020 2020 2020 2020 2020 2020 276d  {.            'm
+00057260: 6f64 6527 3a20 6d6f 6465 2c0a 2020 2020  ode': mode,.    
+00057270: 2020 2020 7d0a 2020 2020 2020 2020 6966      }.        if
+00057280: 2073 796d 626f 6c20 6973 204e 6f6e 653a   symbol is None:
+00057290: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+000572a0: 7565 7374 5b27 636f 696e 275d 203d 2027  uest['coin'] = '
+000572b0: 5553 4454 270a 2020 2020 2020 2020 656c  USDT'.        el
+000572c0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+000572d0: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
+000572e0: 726b 6574 2873 796d 626f 6c29 0a20 2020  rket(symbol).   
+000572f0: 2020 2020 2020 2020 2072 6571 7565 7374           request
+00057300: 5b27 7379 6d62 6f6c 275d 203d 206d 6172  ['symbol'] = mar
+00057310: 6b65 745b 2769 6427 5d0a 2020 2020 2020  ket['id'].      
+00057320: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
+00057330: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+00057340: 2020 2020 2020 2272 6574 5f63 6f64 6522        "ret_code"
+00057350: 3a20 302c 0a20 2020 2020 2020 2023 2020  : 0,.        #  
+00057360: 2020 2020 2020 2022 7265 745f 6d73 6722         "ret_msg"
+00057370: 3a20 226f 6b22 2c0a 2020 2020 2020 2020  : "ok",.        
+00057380: 2320 2020 2020 2020 2020 2265 7874 5f63  #         "ext_c
+00057390: 6f64 6522 3a20 2222 2c0a 2020 2020 2020  ode": "",.      
+000573a0: 2020 2320 2020 2020 2020 2020 2272 6573    #         "res
+000573b0: 756c 7422 3a20 6e75 6c6c 2c0a 2020 2020  ult": null,.    
+000573c0: 2020 2020 2320 2020 2020 2020 2020 2265      #         "e
+000573d0: 7874 5f69 6e66 6f22 3a20 6e75 6c6c 2c0a  xt_info": null,.
+000573e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000573f0: 2020 2274 696d 655f 6e6f 7722 3a20 2231    "time_now": "1
+00057400: 3537 3734 3737 3936 382e 3137 3530 3133  577477968.175013
+00057410: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00057420: 2020 2020 2022 7261 7465 5f6c 696d 6974       "rate_limit
+00057430: 5f73 7461 7475 7322 3a20 3734 2c0a 2020  _status": 74,.  
+00057440: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00057450: 2272 6174 655f 6c69 6d69 745f 7265 7365  "rate_limit_rese
+00057460: 745f 6d73 223a 2031 3537 3734 3737 3936  t_ms": 157747796
+00057470: 3831 3833 2c0a 2020 2020 2020 2020 2320  8183,.        # 
+00057480: 2020 2020 2020 2020 2272 6174 655f 6c69          "rate_li
+00057490: 6d69 7422 3a20 3735 0a20 2020 2020 2020  mit": 75.       
+000574a0: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
+000574b0: 2023 0a20 2020 2020 2020 2072 6574 7572   #.        retur
+000574c0: 6e20 7365 6c66 2e70 7269 7661 7465 506f  n self.privatePo
+000574d0: 7374 436f 6e74 7261 6374 5633 5072 6976  stContractV3Priv
+000574e0: 6174 6550 6f73 6974 696f 6e53 7769 7463  atePositionSwitc
+000574f0: 684d 6f64 6528 7365 6c66 2e65 7874 656e  hMode(self.exten
+00057500: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
+00057510: 7329 290a 0a20 2020 2064 6566 2066 6574  s))..    def fet
+00057520: 6368 5f64 6572 6976 6174 6976 6573 5f6f  ch_derivatives_o
+00057530: 7065 6e5f 696e 7465 7265 7374 5f68 6973  pen_interest_his
+00057540: 746f 7279 2873 656c 662c 2073 796d 626f  tory(self, symbo
+00057550: 6c3a 2073 7472 2c20 7469 6d65 6672 616d  l: str, timefram
+00057560: 653d 2731 6827 2c20 7369 6e63 653a 204f  e='1h', since: O
+00057570: 7074 696f 6e61 6c5b 696e 745d 203d 204e  ptional[int] = N
+00057580: 6f6e 652c 206c 696d 6974 3a20 4f70 7469  one, limit: Opti
+00057590: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
+000575a0: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
+000575b0: 2020 2020 2020 7365 6c66 2e6c 6f61 645f        self.load_
+000575c0: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
+000575d0: 2020 6d61 726b 6574 203d 2073 656c 662e    market = self.
+000575e0: 6d61 726b 6574 2873 796d 626f 6c29 0a20  market(symbol). 
+000575f0: 2020 2020 2020 2073 7562 5479 7065 203d         subType =
+00057600: 2027 6c69 6e65 6172 2720 6966 206d 6172   'linear' if mar
+00057610: 6b65 745b 276c 696e 6561 7227 5d20 656c  ket['linear'] el
+00057620: 7365 2027 696e 7665 7273 6527 0a20 2020  se 'inverse'.   
+00057630: 2020 2020 2063 6174 6567 6f72 7920 3d20       category = 
+00057640: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+00057650: 2870 6172 616d 732c 2027 6361 7465 676f  (params, 'catego
+00057660: 7279 272c 2073 7562 5479 7065 290a 2020  ry', subType).  
+00057670: 2020 2020 2020 696e 7465 7276 616c 7320        intervals 
+00057680: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+00057690: 6528 7365 6c66 2e6f 7074 696f 6e73 2c20  e(self.options, 
+000576a0: 2769 6e74 6572 7661 6c73 2729 0a20 2020  'intervals').   
+000576b0: 2020 2020 2069 6e74 6572 7661 6c20 3d20       interval = 
+000576c0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+000576d0: 2869 6e74 6572 7661 6c73 2c20 7469 6d65  (intervals, time
+000576e0: 6672 616d 6529 2020 2320 356d 696e 2c31  frame)  # 5min,1
+000576f0: 356d 696e 2c33 306d 696e 2c31 682c 3468  5min,30min,1h,4h
+00057700: 2c31 640a 2020 2020 2020 2020 6966 2069  ,1d.        if i
+00057710: 6e74 6572 7661 6c20 6973 204e 6f6e 653a  nterval is None:
+00057720: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+00057730: 7365 2042 6164 5265 7175 6573 7428 7365  se BadRequest(se
+00057740: 6c66 2e69 6420 2b20 2720 6665 7463 684f  lf.id + ' fetchO
+00057750: 7065 6e49 6e74 6572 6573 7448 6973 746f  penInterestHisto
+00057760: 7279 2829 2063 616e 6e6f 7420 7573 6520  ry() cannot use 
+00057770: 7468 6520 2720 2b20 7469 6d65 6672 616d  the ' + timefram
+00057780: 6520 2b20 2720 7469 6d65 6672 616d 6527  e + ' timeframe'
+00057790: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
+000577a0: 7420 3d20 7b0a 2020 2020 2020 2020 2020  t = {.          
+000577b0: 2020 2773 796d 626f 6c27 3a20 6d61 726b    'symbol': mark
+000577c0: 6574 5b27 6964 275d 2c0a 2020 2020 2020  et['id'],.      
+000577d0: 2020 2020 2020 2769 6e74 6572 7661 6c54        'intervalT
+000577e0: 696d 6527 3a20 696e 7465 7276 616c 2c0a  ime': interval,.
+000577f0: 2020 2020 2020 2020 2020 2020 2763 6174              'cat
+00057800: 6567 6f72 7927 3a20 6361 7465 676f 7279  egory': category
+00057810: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
+00057820: 2020 2020 6966 2073 696e 6365 2069 7320      if since is 
+00057830: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00057840: 2020 2020 2020 7265 7175 6573 745b 2773        request['s
+00057850: 7461 7274 5469 6d65 275d 203d 2073 696e  tartTime'] = sin
+00057860: 6365 0a20 2020 2020 2020 2069 6620 6c69  ce.        if li
+00057870: 6d69 7420 6973 206e 6f74 204e 6f6e 653a  mit is not None:
+00057880: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+00057890: 7565 7374 5b27 6c69 6d69 7427 5d20 3d20  uest['limit'] = 
+000578a0: 6c69 6d69 740a 2020 2020 2020 2020 7265  limit.        re
+000578b0: 7370 6f6e 7365 203d 2073 656c 662e 7075  sponse = self.pu
+000578c0: 626c 6963 4765 7456 354d 6172 6b65 744f  blicGetV5MarketO
+000578d0: 7065 6e49 6e74 6572 6573 7428 7365 6c66  penInterest(self
+000578e0: 2e65 7874 656e 6428 7265 7175 6573 742c  .extend(request,
+000578f0: 2070 6172 616d 7329 290a 2020 2020 2020   params)).      
+00057900: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
+00057910: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+00057920: 2020 2020 2020 2272 6574 436f 6465 223a        "retCode":
+00057930: 2030 2c0a 2020 2020 2020 2020 2320 2020   0,.        #   
+00057940: 2020 2020 2020 2272 6574 4d73 6722 3a20        "retMsg": 
+00057950: 224f 4b22 2c0a 2020 2020 2020 2020 2320  "OK",.        # 
+00057960: 2020 2020 2020 2020 2272 6573 756c 7422          "result"
+00057970: 3a20 7b0a 2020 2020 2020 2020 2320 2020  : {.        #   
+00057980: 2020 2020 2020 2020 2020 2273 796d 626f            "symbo
+00057990: 6c22 3a20 2242 5443 5553 4422 2c0a 2020  l": "BTCUSD",.  
+000579a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000579b0: 2020 2020 2263 6174 6567 6f72 7922 3a20      "category": 
+000579c0: 2269 6e76 6572 7365 222c 0a20 2020 2020  "inverse",.     
+000579d0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+000579e0: 2022 6c69 7374 223a 205b 0a20 2020 2020   "list": [.     
+000579f0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00057a00: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+00057a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00057a20: 2020 2020 2022 6f70 656e 496e 7465 7265       "openIntere
+00057a30: 7374 223a 2022 3436 3131 3334 3338 342e  st": "461134384.
+00057a40: 3030 3030 3030 3030 222c 0a20 2020 2020  00000000",.     
+00057a50: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00057a60: 2020 2020 2020 2020 2022 7469 6d65 7374           "timest
+00057a70: 616d 7022 3a20 2231 3636 3935 3731 3430  amp": "166957140
+00057a80: 3030 3030 220a 2020 2020 2020 2020 2320  0000".        # 
+00057a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00057aa0: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
+00057ab0: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
+00057ac0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00057ad0: 2020 2020 2020 2020 2020 2020 2022 6f70               "op
+00057ae0: 656e 496e 7465 7265 7374 223a 2022 3436  enInterest": "46
+00057af0: 3131 3334 3239 322e 3030 3030 3030 3030  1134292.00000000
+00057b00: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00057b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00057b20: 2022 7469 6d65 7374 616d 7022 3a20 2231   "timestamp": "1
+00057b30: 3636 3935 3731 3130 3030 3030 220a 2020  669571100000".  
+00057b40: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00057b50: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00057b60: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00057b70: 5d2c 0a20 2020 2020 2020 2023 2020 2020  ],.        #    
+00057b80: 2020 2020 2020 2020 2022 6e65 7874 5061           "nextPa
+00057b90: 6765 4375 7273 6f72 223a 2022 220a 2020  geCursor": "".  
+00057ba0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00057bb0: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
+00057bc0: 2020 2020 2022 7265 7445 7874 496e 666f       "retExtInfo
+00057bd0: 223a 207b 7d2c 0a20 2020 2020 2020 2023  ": {},.        #
+00057be0: 2020 2020 2020 2020 2022 7469 6d65 223a           "time":
+00057bf0: 2031 3637 3230 3533 3534 3835 3739 0a20   1672053548579. 
+00057c00: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+00057c10: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+00057c20: 2072 6573 756c 7420 3d20 7365 6c66 2e73   result = self.s
+00057c30: 6166 655f 7661 6c75 6528 7265 7370 6f6e  afe_value(respon
+00057c40: 7365 2c20 2772 6573 756c 7427 2c20 7b7d  se, 'result', {}
+00057c50: 290a 2020 2020 2020 2020 6964 203d 2073  ).        id = s
+00057c60: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+00057c70: 7265 7375 6c74 2c20 2773 796d 626f 6c27  result, 'symbol'
+00057c80: 290a 2020 2020 2020 2020 6d61 726b 6574  ).        market
+00057c90: 203d 2073 656c 662e 7361 6665 5f6d 6172   = self.safe_mar
+00057ca0: 6b65 7428 6964 2c20 6d61 726b 6574 2c20  ket(id, market, 
+00057cb0: 4e6f 6e65 2c20 2763 6f6e 7472 6163 7427  None, 'contract'
+00057cc0: 290a 2020 2020 2020 2020 6461 7461 203d  ).        data =
+00057cd0: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+00057ce0: 2872 6573 756c 742c 2027 6c69 7374 272c  (result, 'list',
+00057cf0: 205b 5d29 0a20 2020 2020 2020 2072 6574   []).        ret
+00057d00: 7572 6e20 7365 6c66 2e70 6172 7365 5f6f  urn self.parse_o
+00057d10: 7065 6e5f 696e 7465 7265 7374 7328 6461  pen_interests(da
+00057d20: 7461 2c20 6d61 726b 6574 2c20 7369 6e63  ta, market, sinc
+00057d30: 652c 206c 696d 6974 290a 0a20 2020 2064  e, limit)..    d
+00057d40: 6566 2066 6574 6368 5f6f 7065 6e5f 696e  ef fetch_open_in
+00057d50: 7465 7265 7374 2873 656c 662c 2073 796d  terest(self, sym
+00057d60: 626f 6c3a 2073 7472 2c20 7061 7261 6d73  bol: str, params
+00057d70: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
+00057d80: 220a 2020 2020 2020 2020 5265 7472 6965  ".        Retrie
+00057d90: 7665 7320 7468 6520 6f70 656e 2069 6e74  ves the open int
+00057da0: 6572 6573 7420 6f66 2061 2064 6572 6976  erest of a deriv
+00057db0: 6174 6976 6520 7472 6164 696e 6720 7061  ative trading pa
+00057dc0: 6972 0a20 2020 2020 2020 2073 6565 2068  ir.        see h
+00057dd0: 7474 7073 3a2f 2f62 7962 6974 2d65 7863  ttps://bybit-exc
+00057de0: 6861 6e67 652e 6769 7468 7562 2e69 6f2f  hange.github.io/
+00057df0: 646f 6373 2f76 352f 6d61 726b 6574 2f6f  docs/v5/market/o
+00057e00: 7065 6e2d 696e 7465 7265 7374 0a20 2020  pen-interest.   
+00057e10: 2020 2020 203a 7061 7261 6d20 7374 7220       :param str 
+00057e20: 7379 6d62 6f6c 3a20 556e 6966 6965 6420  symbol: Unified 
+00057e30: 4343 5854 206d 6172 6b65 7420 7379 6d62  CCXT market symb
+00057e40: 6f6c 0a20 2020 2020 2020 203a 7061 7261  ol.        :para
+00057e50: 6d20 6469 6374 2070 6172 616d 733a 2065  m dict params: e
+00057e60: 7863 6861 6e67 6520 7370 6563 6966 6963  xchange specific
+00057e70: 2070 6172 616d 6574 6572 730a 2020 2020   parameters.    
+00057e80: 2020 2020 3a70 6172 616d 2073 7472 7c4e      :param str|N
+00057e90: 6f6e 6520 7061 7261 6d73 5b27 696e 7465  one params['inte
+00057ea0: 7276 616c 275d 3a20 356d 2c20 3135 6d2c  rval']: 5m, 15m,
+00057eb0: 2033 306d 2c20 3168 2c20 3468 2c20 3164   30m, 1h, 4h, 1d
+00057ec0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00057ed0: 7374 727c 4e6f 6e65 2070 6172 616d 735b  str|None params[
+00057ee0: 2763 6174 6567 6f72 7927 5d3a 2022 6c69  'category']: "li
+00057ef0: 6e65 6172 2220 6f72 2022 696e 7665 7273  near" or "invers
+00057f00: 6522 0a20 2020 2020 2020 203a 7265 7475  e".        :retu
+00057f10: 726e 7320 6469 6374 7d20 616e 206f 7065  rns dict} an ope
+00057f20: 6e20 696e 7465 7265 7374 2073 7472 7563  n interest struc
+00057f30: 7475 7265 7b40 6c69 6e6b 2068 7474 7073  ture{@link https
+00057f40: 3a2f 2f64 6f63 732e 6363 7874 2e63 6f6d  ://docs.ccxt.com
+00057f50: 2f23 2f3f 6964 3d69 6e74 6572 6573 742d  /#/?id=interest-
+00057f60: 6869 7374 6f72 792d 7374 7275 6374 7572  history-structur
+00057f70: 653a 0a20 2020 2020 2020 2022 2222 0a20  e:.        """. 
+00057f80: 2020 2020 2020 2073 656c 662e 6c6f 6164         self.load
+00057f90: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
+00057fa0: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
+00057fb0: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
+00057fc0: 2020 2020 2020 2020 6966 206e 6f74 206d          if not m
+00057fd0: 6172 6b65 745b 2763 6f6e 7472 6163 7427  arket['contract'
+00057fe0: 5d3a 0a20 2020 2020 2020 2020 2020 2072  ]:.            r
+00057ff0: 6169 7365 2042 6164 5265 7175 6573 7428  aise BadRequest(
+00058000: 7365 6c66 2e69 6420 2b20 2720 6665 7463  self.id + ' fetc
+00058010: 684f 7065 6e49 6e74 6572 6573 7428 2920  hOpenInterest() 
+00058020: 7375 7070 6f72 7473 2063 6f6e 7472 6163  supports contrac
+00058030: 7420 6d61 726b 6574 7320 6f6e 6c79 2729  t markets only')
+00058040: 0a20 2020 2020 2020 2074 696d 6566 7261  .        timefra
+00058050: 6d65 203d 2073 656c 662e 7361 6665 5f73  me = self.safe_s
+00058060: 7472 696e 6728 7061 7261 6d73 2c20 2769  tring(params, 'i
+00058070: 6e74 6572 7661 6c27 2c20 2731 6827 290a  nterval', '1h').
+00058080: 2020 2020 2020 2020 696e 7465 7276 616c          interval
+00058090: 7320 3d20 7365 6c66 2e73 6166 655f 7661  s = self.safe_va
+000580a0: 6c75 6528 7365 6c66 2e6f 7074 696f 6e73  lue(self.options
+000580b0: 2c20 2769 6e74 6572 7661 6c73 2729 0a20  , 'intervals'). 
+000580c0: 2020 2020 2020 2069 6e74 6572 7661 6c20         interval 
+000580d0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+000580e0: 6e67 2869 6e74 6572 7661 6c73 2c20 7469  ng(intervals, ti
+000580f0: 6d65 6672 616d 6529 2020 2320 356d 696e  meframe)  # 5min
+00058100: 2c31 356d 696e 2c33 306d 696e 2c31 682c  ,15min,30min,1h,
+00058110: 3468 2c31 640a 2020 2020 2020 2020 6966  4h,1d.        if
+00058120: 2069 6e74 6572 7661 6c20 6973 204e 6f6e   interval is Non
+00058130: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+00058140: 6169 7365 2042 6164 5265 7175 6573 7428  aise BadRequest(
+00058150: 7365 6c66 2e69 6420 2b20 2720 6665 7463  self.id + ' fetc
+00058160: 684f 7065 6e49 6e74 6572 6573 7428 2920  hOpenInterest() 
+00058170: 6361 6e6e 6f74 2075 7365 2074 6865 2027  cannot use the '
+00058180: 202b 2074 696d 6566 7261 6d65 202b 2027   + timeframe + '
+00058190: 2074 696d 6566 7261 6d65 2729 0a20 2020   timeframe').   
+000581a0: 2020 2020 2073 7562 5479 7065 203d 2027       subType = '
+000581b0: 6c69 6e65 6172 2720 6966 206d 6172 6b65  linear' if marke
+000581c0: 745b 276c 696e 6561 7227 5d20 656c 7365  t['linear'] else
+000581d0: 2027 696e 7665 7273 6527 0a20 2020 2020   'inverse'.     
+000581e0: 2020 2063 6174 6567 6f72 7920 3d20 7365     category = se
+000581f0: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
+00058200: 6172 616d 732c 2027 6361 7465 676f 7279  arams, 'category
+00058210: 272c 2073 7562 5479 7065 290a 2020 2020  ', subType).    
+00058220: 2020 2020 7265 7175 6573 7420 3d20 7b0a      request = {.
+00058230: 2020 2020 2020 2020 2020 2020 2773 796d              'sym
+00058240: 626f 6c27 3a20 6d61 726b 6574 5b27 6964  bol': market['id
+00058250: 275d 2c0a 2020 2020 2020 2020 2020 2020  '],.            
+00058260: 2769 6e74 6572 7661 6c54 696d 6527 3a20  'intervalTime': 
+00058270: 696e 7465 7276 616c 2c0a 2020 2020 2020  interval,.      
+00058280: 2020 2020 2020 2763 6174 6567 6f72 7927        'category'
+00058290: 3a20 6361 7465 676f 7279 2c0a 2020 2020  : category,.    
+000582a0: 2020 2020 7d0a 2020 2020 2020 2020 7265      }.        re
+000582b0: 7370 6f6e 7365 203d 2073 656c 662e 7075  sponse = self.pu
+000582c0: 626c 6963 4765 7456 354d 6172 6b65 744f  blicGetV5MarketO
+000582d0: 7065 6e49 6e74 6572 6573 7428 7365 6c66  penInterest(self
+000582e0: 2e65 7874 656e 6428 7265 7175 6573 742c  .extend(request,
+000582f0: 2070 6172 616d 7329 290a 2020 2020 2020   params)).      
+00058300: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
+00058310: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+00058320: 2020 2020 2020 2272 6574 436f 6465 223a        "retCode":
+00058330: 2030 2c0a 2020 2020 2020 2020 2320 2020   0,.        #   
+00058340: 2020 2020 2020 2272 6574 4d73 6722 3a20        "retMsg": 
+00058350: 224f 4b22 2c0a 2020 2020 2020 2020 2320  "OK",.        # 
+00058360: 2020 2020 2020 2020 2272 6573 756c 7422          "result"
+00058370: 3a20 7b0a 2020 2020 2020 2020 2320 2020  : {.        #   
+00058380: 2020 2020 2020 2020 2020 2273 796d 626f            "symbo
+00058390: 6c22 3a20 2242 5443 5553 4422 2c0a 2020  l": "BTCUSD",.  
+000583a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000583b0: 2020 2020 2263 6174 6567 6f72 7922 3a20      "category": 
+000583c0: 2269 6e76 6572 7365 222c 0a20 2020 2020  "inverse",.     
+000583d0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+000583e0: 2022 6c69 7374 223a 205b 0a20 2020 2020   "list": [.     
+000583f0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00058400: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+00058410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00058420: 2020 2020 2022 6f70 656e 496e 7465 7265       "openIntere
+00058430: 7374 223a 2022 3436 3131 3334 3338 342e  st": "461134384.
+00058440: 3030 3030 3030 3030 222c 0a20 2020 2020  00000000",.     
+00058450: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00058460: 2020 2020 2020 2020 2022 7469 6d65 7374           "timest
+00058470: 616d 7022 3a20 2231 3636 3935 3731 3430  amp": "166957140
+00058480: 3030 3030 220a 2020 2020 2020 2020 2320  0000".        # 
+00058490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000584a0: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
+000584b0: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
+000584c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000584d0: 2020 2020 2020 2020 2020 2020 2022 6f70               "op
+000584e0: 656e 496e 7465 7265 7374 223a 2022 3436  enInterest": "46
+000584f0: 3131 3334 3239 322e 3030 3030 3030 3030  1134292.00000000
+00058500: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00058510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00058520: 2022 7469 6d65 7374 616d 7022 3a20 2231   "timestamp": "1
+00058530: 3636 3935 3731 3130 3030 3030 220a 2020  669571100000".  
+00058540: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00058550: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00058560: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00058570: 5d2c 0a20 2020 2020 2020 2023 2020 2020  ],.        #    
+00058580: 2020 2020 2020 2020 2022 6e65 7874 5061           "nextPa
+00058590: 6765 4375 7273 6f72 223a 2022 220a 2020  geCursor": "".  
+000585a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000585b0: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
+000585c0: 2020 2020 2022 7265 7445 7874 496e 666f       "retExtInfo
+000585d0: 223a 207b 7d2c 0a20 2020 2020 2020 2023  ": {},.        #
+000585e0: 2020 2020 2020 2020 2022 7469 6d65 223a           "time":
+000585f0: 2031 3637 3230 3533 3534 3835 3739 0a20   1672053548579. 
+00058600: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+00058610: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+00058620: 2072 6573 756c 7420 3d20 7365 6c66 2e73   result = self.s
+00058630: 6166 655f 7661 6c75 6528 7265 7370 6f6e  afe_value(respon
+00058640: 7365 2c20 2772 6573 756c 7427 2c20 7b7d  se, 'result', {}
+00058650: 290a 2020 2020 2020 2020 6964 203d 2073  ).        id = s
+00058660: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+00058670: 7265 7375 6c74 2c20 2773 796d 626f 6c27  result, 'symbol'
+00058680: 290a 2020 2020 2020 2020 6d61 726b 6574  ).        market
+00058690: 203d 2073 656c 662e 7361 6665 5f6d 6172   = self.safe_mar
+000586a0: 6b65 7428 6964 2c20 6d61 726b 6574 2c20  ket(id, market, 
+000586b0: 4e6f 6e65 2c20 2763 6f6e 7472 6163 7427  None, 'contract'
+000586c0: 290a 2020 2020 2020 2020 6461 7461 203d  ).        data =
+000586d0: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+000586e0: 2872 6573 756c 742c 2027 6c69 7374 272c  (result, 'list',
+000586f0: 205b 5d29 0a20 2020 2020 2020 2072 6574   []).        ret
+00058700: 7572 6e20 7365 6c66 2e70 6172 7365 5f6f  urn self.parse_o
+00058710: 7065 6e5f 696e 7465 7265 7374 2864 6174  pen_interest(dat
+00058720: 615b 305d 2c20 6d61 726b 6574 290a 0a20  a[0], market).. 
+00058730: 2020 2064 6566 2066 6574 6368 5f6f 7065     def fetch_ope
+00058740: 6e5f 696e 7465 7265 7374 5f68 6973 746f  n_interest_histo
+00058750: 7279 2873 656c 662c 2073 796d 626f 6c3a  ry(self, symbol:
+00058760: 2073 7472 2c20 7469 6d65 6672 616d 653d   str, timeframe=
+00058770: 2731 6827 2c20 7369 6e63 653a 204f 7074  '1h', since: Opt
+00058780: 696f 6e61 6c5b 696e 745d 203d 204e 6f6e  ional[int] = Non
+00058790: 652c 206c 696d 6974 3a20 4f70 7469 6f6e  e, limit: Option
+000587a0: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c20  al[int] = None, 
+000587b0: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
+000587c0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+000587d0: 4765 7473 2074 6865 2074 6f74 616c 2061  Gets the total a
+000587e0: 6d6f 756e 7420 6f66 2075 6e73 6574 746c  mount of unsettl
+000587f0: 6564 2063 6f6e 7472 6163 7473 2e20 496e  ed contracts. In
+00058800: 206f 7468 6572 2077 6f72 6473 2c20 7468   other words, th
+00058810: 6520 746f 7461 6c20 6e75 6d62 6572 206f  e total number o
+00058820: 6620 636f 6e74 7261 6374 7320 6865 6c64  f contracts held
+00058830: 2069 6e20 6f70 656e 2070 6f73 6974 696f   in open positio
+00058840: 6e73 0a20 2020 2020 2020 2073 6565 2068  ns.        see h
+00058850: 7474 7073 3a2f 2f62 7962 6974 2d65 7863  ttps://bybit-exc
+00058860: 6861 6e67 652e 6769 7468 7562 2e69 6f2f  hange.github.io/
+00058870: 646f 6373 2f76 352f 6d61 726b 6574 2f6f  docs/v5/market/o
+00058880: 7065 6e2d 696e 7465 7265 7374 0a20 2020  pen-interest.   
+00058890: 2020 2020 203a 7061 7261 6d20 7374 7220       :param str 
+000588a0: 7379 6d62 6f6c 3a20 556e 6966 6965 6420  symbol: Unified 
+000588b0: 6d61 726b 6574 2073 796d 626f 6c0a 2020  market symbol.  
+000588c0: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+000588d0: 2074 696d 6566 7261 6d65 3a20 2235 6d22   timeframe: "5m"
+000588e0: 2c20 3135 6d2c 2033 306d 2c20 3168 2c20  , 15m, 30m, 1h, 
+000588f0: 3468 2c20 3164 0a20 2020 2020 2020 203a  4h, 1d.        :
+00058900: 7061 7261 6d20 696e 7420 7369 6e63 653a  param int since:
+00058910: 204e 6f74 2075 7365 6420 6279 2042 7962   Not used by Byb
+00058920: 6974 0a20 2020 2020 2020 203a 7061 7261  it.        :para
+00058930: 6d20 696e 7420 6c69 6d69 743a 2054 6865  m int limit: The
+00058940: 206e 756d 6265 7220 6f66 206f 7065 6e20   number of open 
+00058950: 696e 7465 7265 7374 2073 7472 7563 7475  interest structu
+00058960: 7265 7320 746f 2072 6574 7572 6e2e 204d  res to return. M
+00058970: 6178 2032 3030 2c20 6465 6661 756c 7420  ax 200, default 
+00058980: 3530 0a20 2020 2020 2020 203a 7061 7261  50.        :para
+00058990: 6d20 6469 6374 2070 6172 616d 733a 2045  m dict params: E
+000589a0: 7863 6861 6e67 6520 7370 6563 6966 6963  xchange specific
+000589b0: 2070 6172 616d 6574 6572 730a 2020 2020   parameters.    
+000589c0: 2020 2020 3a72 6574 7572 6e73 3a20 416e      :returns: An
+000589d0: 2061 7272 6179 206f 6620 6f70 656e 2069   array of open i
+000589e0: 6e74 6572 6573 7420 7374 7275 6374 7572  nterest structur
+000589f0: 6573 0a20 2020 2020 2020 2022 2222 0a20  es.        """. 
+00058a00: 2020 2020 2020 2069 6620 7469 6d65 6672         if timefr
+00058a10: 616d 6520 3d3d 2027 316d 273a 0a20 2020  ame == '1m':.   
+00058a20: 2020 2020 2020 2020 2072 6169 7365 2042           raise B
+00058a30: 6164 5265 7175 6573 7428 7365 6c66 2e69  adRequest(self.i
+00058a40: 6420 2b20 2766 6574 6368 4f70 656e 496e  d + 'fetchOpenIn
+00058a50: 7465 7265 7374 4869 7374 6f72 7920 6361  terestHistory ca
+00058a60: 6e6e 6f74 2075 7365 2074 6865 2031 6d20  nnot use the 1m 
+00058a70: 7469 6d65 6672 616d 6527 290a 2020 2020  timeframe').    
+00058a80: 2020 2020 7365 6c66 2e6c 6f61 645f 6d61      self.load_ma
+00058a90: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
+00058aa0: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
+00058ab0: 726b 6574 2873 796d 626f 6c29 0a20 2020  rket(symbol).   
+00058ac0: 2020 2020 2069 6620 6d61 726b 6574 5b27       if market['
+00058ad0: 7370 6f74 275d 206f 7220 6d61 726b 6574  spot'] or market
+00058ae0: 5b27 6f70 7469 6f6e 275d 3a0a 2020 2020  ['option']:.    
+00058af0: 2020 2020 2020 2020 7261 6973 6520 4261          raise Ba
+00058b00: 6452 6571 7565 7374 2873 656c 662e 6964  dRequest(self.id
+00058b10: 202b 2027 2066 6574 6368 4f70 656e 496e   + ' fetchOpenIn
+00058b20: 7465 7265 7374 4869 7374 6f72 7928 2920  terestHistory() 
+00058b30: 7379 6d62 6f6c 2064 6f65 7320 6e6f 7420  symbol does not 
+00058b40: 7375 7070 6f72 7420 6d61 726b 6574 2027  support market '
+00058b50: 202b 2073 796d 626f 6c29 0a20 2020 2020   + symbol).     
+00058b60: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
+00058b70: 2020 2020 2020 2020 2020 2027 7379 6d62             'symb
+00058b80: 6f6c 273a 206d 6172 6b65 745b 2769 6427  ol': market['id'
+00058b90: 5d2c 0a20 2020 2020 2020 207d 0a20 2020  ],.        }.   
+00058ba0: 2020 2020 2069 6620 6c69 6d69 7420 6973       if limit is
+00058bb0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00058bc0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+00058bd0: 6c69 6d69 7427 5d20 3d20 6c69 6d69 740a  limit'] = limit.
+00058be0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00058bf0: 656c 662e 6665 7463 685f 6465 7269 7661  elf.fetch_deriva
+00058c00: 7469 7665 735f 6f70 656e 5f69 6e74 6572  tives_open_inter
+00058c10: 6573 745f 6869 7374 6f72 7928 7379 6d62  est_history(symb
+00058c20: 6f6c 2c20 7469 6d65 6672 616d 652c 2073  ol, timeframe, s
+00058c30: 696e 6365 2c20 6c69 6d69 742c 2070 6172  ince, limit, par
+00058c40: 616d 7329 0a0a 2020 2020 6465 6620 7061  ams)..    def pa
+00058c50: 7273 655f 6f70 656e 5f69 6e74 6572 6573  rse_open_interes
+00058c60: 7428 7365 6c66 2c20 696e 7465 7265 7374  t(self, interest
+00058c70: 2c20 6d61 726b 6574 3d4e 6f6e 6529 3a0a  , market=None):.
+00058c80: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+00058c90: 2020 2320 2020 207b 0a20 2020 2020 2020    #    {.       
+00058ca0: 2023 2020 2020 2020 2020 226f 7065 6e49   #        "openI
+00058cb0: 6e74 6572 6573 7422 3a20 3634 3735 372e  nterest": 64757.
+00058cc0: 3632 3430 3030 3030 2c0a 2020 2020 2020  62400000,.      
+00058cd0: 2020 2320 2020 2020 2020 2022 7469 6d65    #        "time
+00058ce0: 7374 616d 7022 3a20 3136 3635 3738 3438  stamp": 16657848
+00058cf0: 3030 3030 302c 0a20 2020 2020 2020 2023  00000,.        #
+00058d00: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
+00058d10: 2020 2020 2020 2020 7469 6d65 7374 616d          timestam
+00058d20: 7020 3d20 7365 6c66 2e73 6166 655f 696e  p = self.safe_in
+00058d30: 7465 6765 7228 696e 7465 7265 7374 2c20  teger(interest, 
+00058d40: 2774 696d 6573 7461 6d70 2729 0a20 2020  'timestamp').   
+00058d50: 2020 2020 2076 616c 7565 203d 2073 656c       value = sel
+00058d60: 662e 7361 6665 5f6e 756d 6265 725f 3228  f.safe_number_2(
+00058d70: 696e 7465 7265 7374 2c20 276f 7065 6e5f  interest, 'open_
+00058d80: 696e 7465 7265 7374 272c 2027 6f70 656e  interest', 'open
+00058d90: 496e 7465 7265 7374 2729 0a20 2020 2020  Interest').     
+00058da0: 2020 2072 6574 7572 6e20 7b0a 2020 2020     return {.    
+00058db0: 2020 2020 2020 2020 2773 796d 626f 6c27          'symbol'
+00058dc0: 3a20 6d61 726b 6574 5b27 7379 6d62 6f6c  : market['symbol
+00058dd0: 275d 2c0a 2020 2020 2020 2020 2020 2020  '],.            
+00058de0: 276f 7065 6e49 6e74 6572 6573 7441 6d6f  'openInterestAmo
+00058df0: 756e 7427 3a20 4e6f 6e65 2c0a 2020 2020  unt': None,.    
+00058e00: 2020 2020 2020 2020 276f 7065 6e49 6e74          'openInt
+00058e10: 6572 6573 7456 616c 7565 273a 2076 616c  erestValue': val
+00058e20: 7565 2c0a 2020 2020 2020 2020 2020 2020  ue,.            
+00058e30: 2774 696d 6573 7461 6d70 273a 2074 696d  'timestamp': tim
+00058e40: 6573 7461 6d70 2c0a 2020 2020 2020 2020  estamp,.        
+00058e50: 2020 2020 2764 6174 6574 696d 6527 3a20      'datetime': 
+00058e60: 7365 6c66 2e69 736f 3836 3031 2874 696d  self.iso8601(tim
+00058e70: 6573 7461 6d70 292c 0a20 2020 2020 2020  estamp),.       
+00058e80: 2020 2020 2027 696e 666f 273a 2069 6e74       'info': int
+00058e90: 6572 6573 742c 0a20 2020 2020 2020 207d  erest,.        }
+00058ea0: 0a0a 2020 2020 6465 6620 6665 7463 685f  ..    def fetch_
+00058eb0: 626f 7272 6f77 5f72 6174 6528 7365 6c66  borrow_rate(self
+00058ec0: 2c20 636f 6465 3a20 7374 722c 2070 6172  , code: str, par
+00058ed0: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
+00058ee0: 2022 2222 0a20 2020 2020 2020 2066 6574   """.        fet
+00058ef0: 6368 2074 6865 2072 6174 6520 6f66 2069  ch the rate of i
+00058f00: 6e74 6572 6573 7420 746f 2062 6f72 726f  nterest to borro
+00058f10: 7720 6120 6375 7272 656e 6379 2066 6f72  w a currency for
+00058f20: 206d 6172 6769 6e20 7472 6164 696e 670a   margin trading.
+00058f30: 2020 2020 2020 2020 7365 6520 6874 7470          see http
+00058f40: 733a 2f2f 6279 6269 742d 6578 6368 616e  s://bybit-exchan
+00058f50: 6765 2e67 6974 6875 622e 696f 2f64 6f63  ge.github.io/doc
+00058f60: 732f 7370 6f74 2f76 332f 2374 2d71 7565  s/spot/v3/#t-que
+00058f70: 7279 696e 7465 7265 7374 7175 6f74 610a  ryinterestquota.
+00058f80: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+00058f90: 7472 2063 6f64 653a 2075 6e69 6669 6564  tr code: unified
+00058fa0: 2063 7572 7265 6e63 7920 636f 6465 0a20   currency code. 
+00058fb0: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
+00058fc0: 6374 2070 6172 616d 733a 2065 7874 7261  ct params: extra
+00058fd0: 2070 6172 616d 6574 6572 7320 7370 6563   parameters spec
+00058fe0: 6966 6963 2074 6f20 7468 6520 6279 6269  ific to the bybi
+00058ff0: 7420 6170 6920 656e 6470 6f69 6e74 0a20  t api endpoint. 
+00059000: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
+00059010: 6469 6374 3a20 6120 6062 6f72 726f 7720  dict: a `borrow 
+00059020: 7261 7465 2073 7472 7563 7475 7265 203c  rate structure <
+00059030: 6874 7470 733a 2f2f 646f 6373 2e63 6378  https://docs.ccx
+00059040: 742e 636f 6d2f 232f 3f69 643d 626f 7272  t.com/#/?id=borr
+00059050: 6f77 2d72 6174 652d 7374 7275 6374 7572  ow-rate-structur
+00059060: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
+00059070: 2020 2020 2020 2020 7365 6c66 2e6c 6f61          self.loa
+00059080: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
+00059090: 2020 2020 6375 7272 656e 6379 203d 2073      currency = s
+000590a0: 656c 662e 6375 7272 656e 6379 2863 6f64  elf.currency(cod
+000590b0: 6529 0a20 2020 2020 2020 2072 6571 7565  e).        reque
+000590c0: 7374 203d 207b 0a20 2020 2020 2020 2020  st = {.         
+000590d0: 2020 2027 636f 696e 273a 2063 7572 7265     'coin': curre
+000590e0: 6e63 795b 2769 6427 5d2c 0a20 2020 2020  ncy['id'],.     
+000590f0: 2020 207d 0a20 2020 2020 2020 2072 6573     }.        res
+00059100: 706f 6e73 6520 3d20 7365 6c66 2e70 7269  ponse = self.pri
+00059110: 7661 7465 4765 7453 706f 7456 3350 7269  vateGetSpotV3Pri
+00059120: 7661 7465 4372 6f73 734d 6172 6769 6e4c  vateCrossMarginL
+00059130: 6f61 6e49 6e66 6f28 7365 6c66 2e65 7874  oanInfo(self.ext
+00059140: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
+00059150: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
+00059160: 2020 2020 2020 2020 2320 2020 207b 0a20          #    {. 
+00059170: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00059180: 2022 7265 7443 6f64 6522 3a20 2230 222c   "retCode": "0",
+00059190: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000591a0: 2020 2022 7265 744d 7367 223a 2022 7375     "retMsg": "su
+000591b0: 6363 6573 7322 2c0a 2020 2020 2020 2020  ccess",.        
+000591c0: 2320 2020 2020 2020 2020 2272 6573 756c  #         "resul
+000591d0: 7422 3a20 7b0a 2020 2020 2020 2020 2320  t": {.        # 
+000591e0: 2020 2020 2020 2020 2020 2020 2263 6f69              "coi
+000591f0: 6e22 3a20 2255 5344 5422 2c0a 2020 2020  n": "USDT",.    
+00059200: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00059210: 2020 2269 6e74 6572 6573 7452 6174 6522    "interestRate"
+00059220: 3a20 2230 2e30 3030 3130 3730 3030 3030  : "0.00010700000
+00059230: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00059240: 2020 2020 2020 2020 2020 226c 6f61 6e41            "loanA
+00059250: 626c 6541 6d6f 756e 7422 3a20 2222 2c0a  bleAmount": "",.
+00059260: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00059270: 2020 2020 2020 226d 6178 4c6f 616e 416d        "maxLoanAm
+00059280: 6f75 6e74 223a 2022 3739 3939 392e 3939  ount": "79999.99
+00059290: 3922 0a20 2020 2020 2020 2023 2020 2020  9".        #    
+000592a0: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
+000592b0: 2320 2020 2020 2020 2020 2272 6574 4578  #         "retEx
+000592c0: 7449 6e66 6f22 3a20 6e75 6c6c 2c0a 2020  tInfo": null,.  
+000592d0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000592e0: 2274 696d 6522 3a20 2231 3636 3637 3334  "time": "1666734
+000592f0: 3439 3037 3738 220a 2020 2020 2020 2020  490778".        
+00059300: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
+00059310: 230a 2020 2020 2020 2020 6461 7461 203d  #.        data =
+00059320: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+00059330: 2872 6573 706f 6e73 652c 2027 7265 7375  (response, 'resu
+00059340: 6c74 272c 207b 7d29 0a20 2020 2020 2020  lt', {}).       
+00059350: 2072 6574 7572 6e20 7365 6c66 2e70 6172   return self.par
+00059360: 7365 5f62 6f72 726f 775f 7261 7465 2864  se_borrow_rate(d
+00059370: 6174 612c 2063 7572 7265 6e63 7929 0a0a  ata, currency)..
+00059380: 2020 2020 6465 6620 7061 7273 655f 626f      def parse_bo
+00059390: 7272 6f77 5f72 6174 6528 7365 6c66 2c20  rrow_rate(self, 
+000593a0: 696e 666f 2c20 6375 7272 656e 6379 3d4e  info, currency=N
+000593b0: 6f6e 6529 3a0a 2020 2020 2020 2020 230a  one):.        #.
+000593c0: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+000593d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000593e0: 2020 2263 6f69 6e22 3a20 2255 5344 5422    "coin": "USDT"
+000593f0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00059400: 2020 2020 2269 6e74 6572 6573 7452 6174      "interestRat
+00059410: 6522 3a20 2230 2e30 3030 3130 3730 3030  e": "0.000107000
+00059420: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
+00059430: 2020 2020 2020 2020 226c 6f61 6e41 626c          "loanAbl
+00059440: 6541 6d6f 756e 7422 3a20 2222 2c0a 2020  eAmount": "",.  
+00059450: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00059460: 226d 6178 4c6f 616e 416d 6f75 6e74 223a  "maxLoanAmount":
+00059470: 2022 3739 3939 392e 3939 3922 0a20 2020   "79999.999".   
+00059480: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
+00059490: 2020 2020 2023 0a20 2020 2020 2020 2074       #.        t
+000594a0: 696d 6573 7461 6d70 203d 2073 656c 662e  imestamp = self.
+000594b0: 6d69 6c6c 6973 6563 6f6e 6473 2829 0a20  milliseconds(). 
+000594c0: 2020 2020 2020 2063 7572 7265 6e63 7949         currencyI
+000594d0: 6420 3d20 7365 6c66 2e73 6166 655f 7374  d = self.safe_st
+000594e0: 7269 6e67 2869 6e66 6f2c 2027 636f 696e  ring(info, 'coin
+000594f0: 2729 0a20 2020 2020 2020 2072 6574 7572  ').        retur
+00059500: 6e20 7b0a 2020 2020 2020 2020 2020 2020  n {.            
+00059510: 2763 7572 7265 6e63 7927 3a20 7365 6c66  'currency': self
+00059520: 2e73 6166 655f 6375 7272 656e 6379 5f63  .safe_currency_c
+00059530: 6f64 6528 6375 7272 656e 6379 4964 2c20  ode(currencyId, 
+00059540: 6375 7272 656e 6379 292c 0a20 2020 2020  currency),.     
+00059550: 2020 2020 2020 2027 7261 7465 273a 2073         'rate': s
+00059560: 656c 662e 7361 6665 5f6e 756d 6265 7228  elf.safe_number(
+00059570: 696e 666f 2c20 2769 6e74 6572 6573 7452  info, 'interestR
+00059580: 6174 6527 292c 0a20 2020 2020 2020 2020  ate'),.         
+00059590: 2020 2027 7065 7269 6f64 273a 2038 3634     'period': 864
+000595a0: 3030 3030 302c 2020 2320 4461 696c 790a  00000,  # Daily.
+000595b0: 2020 2020 2020 2020 2020 2020 2774 696d              'tim
+000595c0: 6573 7461 6d70 273a 2074 696d 6573 7461  estamp': timesta
+000595d0: 6d70 2c0a 2020 2020 2020 2020 2020 2020  mp,.            
+000595e0: 2764 6174 6574 696d 6527 3a20 7365 6c66  'datetime': self
+000595f0: 2e69 736f 3836 3031 2874 696d 6573 7461  .iso8601(timesta
+00059600: 6d70 292c 0a20 2020 2020 2020 2020 2020  mp),.           
+00059610: 2027 696e 666f 273a 2069 6e66 6f2c 0a20   'info': info,. 
+00059620: 2020 2020 2020 207d 0a0a 2020 2020 6465         }..    de
+00059630: 6620 6665 7463 685f 626f 7272 6f77 5f69  f fetch_borrow_i
+00059640: 6e74 6572 6573 7428 7365 6c66 2c20 636f  nterest(self, co
+00059650: 6465 3a20 4f70 7469 6f6e 616c 5b73 7472  de: Optional[str
+00059660: 5d20 3d20 4e6f 6e65 2c20 7379 6d62 6f6c  ] = None, symbol
+00059670: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
+00059680: 3d20 4e6f 6e65 2c20 7369 6e63 653a 204f  = None, since: O
+00059690: 7074 696f 6e61 6c5b 696e 745d 203d 204e  ptional[int] = N
+000596a0: 6f6e 652c 206c 696d 6974 3a20 4f70 7469  one, limit: Opti
+000596b0: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
+000596c0: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
+000596d0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+000596e0: 2020 6665 7463 6820 7468 6520 696e 7465    fetch the inte
+000596f0: 7265 7374 206f 7765 6420 6279 2074 6865  rest owed by the
+00059700: 2075 7365 7220 666f 7220 626f 7272 6f77   user for borrow
+00059710: 696e 6720 6375 7272 656e 6379 2066 6f72  ing currency for
+00059720: 206d 6172 6769 6e20 7472 6164 696e 670a   margin trading.
+00059730: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+00059740: 7472 7c4e 6f6e 6520 636f 6465 3a20 756e  tr|None code: un
+00059750: 6966 6965 6420 6375 7272 656e 6379 2063  ified currency c
+00059760: 6f64 650a 2020 2020 2020 2020 3a70 6172  ode.        :par
+00059770: 616d 2073 7472 7c4e 6f6e 6520 7379 6d62  am str|None symb
+00059780: 6f6c 3a20 756e 6966 6965 6420 6d61 726b  ol: unified mark
+00059790: 6574 2073 796d 626f 6c20 7768 656e 2066  et symbol when f
+000597a0: 6574 6368 2069 6e74 6572 6573 7420 696e  etch interest in
+000597b0: 2069 736f 6c61 7465 6420 6d61 726b 6574   isolated market
+000597c0: 730a 2020 2020 2020 2020 3a70 6172 616d  s.        :param
+000597d0: 206e 756d 6265 727c 4e6f 6e65 2073 696e   number|None sin
+000597e0: 6365 3a20 7468 6520 6561 726c 6965 7374  ce: the earliest
+000597f0: 2074 696d 6520 696e 206d 7320 746f 2066   time in ms to f
+00059800: 6574 6368 2062 6f72 7272 6f77 2069 6e74  etch borrrow int
+00059810: 6572 6573 7420 666f 720a 2020 2020 2020  erest for.      
+00059820: 2020 3a70 6172 616d 206e 756d 6265 727c    :param number|
+00059830: 4e6f 6e65 206c 696d 6974 3a20 7468 6520  None limit: the 
+00059840: 6d61 7869 6d75 6d20 6e75 6d62 6572 206f  maximum number o
+00059850: 6620 7374 7275 6374 7572 6573 2074 6f20  f structures to 
+00059860: 7265 7472 6965 7665 0a20 2020 2020 2020  retrieve.       
+00059870: 203a 7061 7261 6d20 6469 6374 2070 6172   :param dict par
+00059880: 616d 733a 2065 7874 7261 2070 6172 616d  ams: extra param
+00059890: 6574 6572 7320 7370 6563 6966 6963 2074  eters specific t
+000598a0: 6f20 7468 6520 6279 6269 7420 6170 6920  o the bybit api 
+000598b0: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
+000598c0: 203a 7265 7475 726e 7320 5b64 6963 745d   :returns [dict]
+000598d0: 3a20 6120 6c69 7374 206f 6620 6062 6f72  : a list of `bor
+000598e0: 726f 7720 696e 7465 7265 7374 2073 7472  row interest str
+000598f0: 7563 7475 7265 7320 3c68 7474 7073 3a2f  uctures <https:/
+00059900: 2f64 6f63 732e 6363 7874 2e63 6f6d 2f23  /docs.ccxt.com/#
+00059910: 2f3f 6964 3d62 6f72 726f 772d 696e 7465  /?id=borrow-inte
+00059920: 7265 7374 2d73 7472 7563 7475 7265 3e60  rest-structure>`
+00059930: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00059940: 2020 2020 2073 656c 662e 6c6f 6164 5f6d       self.load_m
+00059950: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
+00059960: 2072 6571 7565 7374 203d 207b 7d0a 2020   request = {}.  
+00059970: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+00059980: 2073 656c 662e 7072 6976 6174 6547 6574   self.privateGet
+00059990: 5370 6f74 5633 5072 6976 6174 6543 726f  SpotV3PrivateCro
+000599a0: 7373 4d61 7267 696e 4163 636f 756e 7428  ssMarginAccount(
+000599b0: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
+000599c0: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
+000599d0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+000599e0: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
+000599f0: 2320 2020 2020 2020 2020 2272 6574 5f63  #         "ret_c
+00059a00: 6f64 6522 3a20 302c 0a20 2020 2020 2020  ode": 0,.       
+00059a10: 2023 2020 2020 2020 2020 2022 7265 745f   #         "ret_
+00059a20: 6d73 6722 3a20 2222 2c0a 2020 2020 2020  msg": "",.      
+00059a30: 2020 2320 2020 2020 2020 2020 2265 7874    #         "ext
+00059a40: 5f63 6f64 6522 3a20 6e75 6c6c 2c0a 2020  _code": null,.  
+00059a50: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00059a60: 2265 7874 5f69 6e66 6f22 3a20 6e75 6c6c  "ext_info": null
+00059a70: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00059a80: 2020 2020 2272 6573 756c 7422 3a20 7b0a      "result": {.
+00059a90: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00059aa0: 2020 2020 2020 2273 7461 7475 7322 3a20        "status": 
+00059ab0: 2231 222c 0a20 2020 2020 2020 2023 2020  "1",.        #  
+00059ac0: 2020 2020 2020 2020 2020 2022 7269 736b             "risk
+00059ad0: 5261 7465 223a 2022 3022 2c0a 2020 2020  Rate": "0",.    
+00059ae0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00059af0: 2020 2261 6363 7442 616c 616e 6365 5375    "acctBalanceSu
+00059b00: 6d22 3a20 2230 2e30 3030 3438 3632 3133  m": "0.000486213
+00059b10: 3831 3736 3830 3835 3722 2c0a 2020 2020  817680857",.    
+00059b20: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00059b30: 2020 2264 6562 7442 616c 616e 6365 5375    "debtBalanceSu
+00059b40: 6d22 3a20 2230 222c 0a20 2020 2020 2020  m": "0",.       
+00059b50: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00059b60: 6c6f 616e 4163 636f 756e 744c 6973 7422  loanAccountList"
+00059b70: 3a20 5b0a 2020 2020 2020 2020 2320 2020  : [.        #   
+00059b80: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
+00059b90: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00059ba0: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+00059bb0: 6f6b 656e 4964 223a 2022 4254 4322 2c0a  okenId": "BTC",.
+00059bc0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00059bd0: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+00059be0: 6f74 616c 223a 2022 302e 3030 3034 3836  otal": "0.000486
+00059bf0: 3231 222c 0a20 2020 2020 2020 2023 2020  21",.        #  
+00059c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00059c10: 2020 2022 6c6f 636b 6564 223a 2022 3022     "locked": "0"
+00059c20: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00059c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00059c40: 226c 6f61 6e22 3a20 2230 222c 0a20 2020  "loan": "0",.   
+00059c50: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00059c60: 2020 2020 2020 2020 2020 2022 696e 7465             "inte
+00059c70: 7265 7374 223a 2022 3022 2c0a 2020 2020  rest": "0",.    
+00059c80: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00059c90: 2020 2020 2020 2020 2020 2266 7265 6522            "free"
+00059ca0: 3a20 2230 2e30 3030 3438 3632 3122 0a20  : "0.00048621". 
+00059cb0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00059cc0: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
+00059cd0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00059ce0: 2020 2020 2020 2e2e 2e0a 2020 2020 2020        ....      
+00059cf0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00059d00: 5d0a 2020 2020 2020 2020 2320 2020 2020  ].        #     
+00059d10: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
+00059d20: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
+00059d30: 2020 2020 2020 2020 6461 7461 203d 2073          data = s
+00059d40: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
+00059d50: 6573 706f 6e73 652c 2027 7265 7375 6c74  esponse, 'result
+00059d60: 272c 207b 7d29 0a20 2020 2020 2020 2072  ', {}).        r
+00059d70: 6f77 7320 3d20 7365 6c66 2e73 6166 655f  ows = self.safe_
+00059d80: 7661 6c75 6528 6461 7461 2c20 276c 6f61  value(data, 'loa
+00059d90: 6e41 6363 6f75 6e74 4c69 7374 272c 205b  nAccountList', [
+00059da0: 5d29 0a20 2020 2020 2020 2069 6e74 6572  ]).        inter
+00059db0: 6573 7420 3d20 7365 6c66 2e70 6172 7365  est = self.parse
+00059dc0: 5f62 6f72 726f 775f 696e 7465 7265 7374  _borrow_interest
+00059dd0: 7328 726f 7773 2c20 4e6f 6e65 290a 2020  s(rows, None).  
+00059de0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00059df0: 662e 6669 6c74 6572 5f62 795f 6375 7272  f.filter_by_curr
+00059e00: 656e 6379 5f73 696e 6365 5f6c 696d 6974  ency_since_limit
+00059e10: 2869 6e74 6572 6573 742c 2063 6f64 652c  (interest, code,
+00059e20: 2073 696e 6365 2c20 6c69 6d69 7429 0a0a   since, limit)..
+00059e30: 2020 2020 6465 6620 7061 7273 655f 626f      def parse_bo
+00059e40: 7272 6f77 5f69 6e74 6572 6573 7428 7365  rrow_interest(se
+00059e50: 6c66 2c20 696e 666f 2c20 6d61 726b 6574  lf, info, market
+00059e60: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
+00059e70: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+00059e80: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+00059e90: 2020 2020 2274 6f6b 656e 4964 223a 2022      "tokenId": "
+00059ea0: 4254 4322 2c0a 2020 2020 2020 2020 2320  BTC",.        # 
+00059eb0: 2020 2020 2020 2020 2274 6f74 616c 223a          "total":
+00059ec0: 2022 302e 3030 3034 3836 3231 222c 0a20   "0.00048621",. 
+00059ed0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00059ee0: 2022 6c6f 636b 6564 223a 2022 3022 2c0a   "locked": "0",.
+00059ef0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00059f00: 2020 226c 6f61 6e22 3a20 2230 222c 0a20    "loan": "0",. 
+00059f10: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00059f20: 2022 696e 7465 7265 7374 223a 2022 3022   "interest": "0"
+00059f30: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00059f40: 2020 2020 2266 7265 6522 3a20 2230 2e30      "free": "0.0
+00059f50: 3030 3438 3632 3122 0a20 2020 2020 2020  0048621".       
+00059f60: 2023 2020 2020 207d 2c0a 2020 2020 2020   #     },.      
+00059f70: 2020 230a 2020 2020 2020 2020 7265 7475    #.        retu
+00059f80: 726e 207b 0a20 2020 2020 2020 2020 2020  rn {.           
+00059f90: 2027 7379 6d62 6f6c 273a 204e 6f6e 652c   'symbol': None,
+00059fa0: 0a20 2020 2020 2020 2020 2020 2027 6d61  .            'ma
+00059fb0: 7267 696e 4d6f 6465 273a 2027 6372 6f73  rginMode': 'cros
+00059fc0: 7327 2c0a 2020 2020 2020 2020 2020 2020  s',.            
+00059fd0: 2763 7572 7265 6e63 7927 3a20 7365 6c66  'currency': self
+00059fe0: 2e73 6166 655f 6375 7272 656e 6379 5f63  .safe_currency_c
+00059ff0: 6f64 6528 7365 6c66 2e73 6166 655f 7374  ode(self.safe_st
+0005a000: 7269 6e67 2869 6e66 6f2c 2027 746f 6b65  ring(info, 'toke
+0005a010: 6e49 6427 2929 2c0a 2020 2020 2020 2020  nId')),.        
+0005a020: 2020 2020 2769 6e74 6572 6573 7427 3a20      'interest': 
+0005a030: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
+0005a040: 2869 6e66 6f2c 2027 696e 7465 7265 7374  (info, 'interest
+0005a050: 2729 2c0a 2020 2020 2020 2020 2020 2020  '),.            
+0005a060: 2769 6e74 6572 6573 7452 6174 6527 3a20  'interestRate': 
+0005a070: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
+0005a080: 2020 2761 6d6f 756e 7442 6f72 726f 7765    'amountBorrowe
+0005a090: 6427 3a20 7365 6c66 2e73 6166 655f 6e75  d': self.safe_nu
+0005a0a0: 6d62 6572 2869 6e66 6f2c 2027 6c6f 616e  mber(info, 'loan
+0005a0b0: 2729 2c0a 2020 2020 2020 2020 2020 2020  '),.            
+0005a0c0: 2774 696d 6573 7461 6d70 273a 204e 6f6e  'timestamp': Non
+0005a0d0: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
+0005a0e0: 6461 7465 7469 6d65 273a 204e 6f6e 652c  datetime': None,
+0005a0f0: 0a20 2020 2020 2020 2020 2020 2027 696e  .            'in
+0005a100: 666f 273a 2069 6e66 6f2c 0a20 2020 2020  fo': info,.     
+0005a110: 2020 207d 0a0a 2020 2020 6465 6620 7472     }..    def tr
+0005a120: 616e 7366 6572 2873 656c 662c 2063 6f64  ansfer(self, cod
+0005a130: 653a 2073 7472 2c20 616d 6f75 6e74 2c20  e: str, amount, 
+0005a140: 6672 6f6d 4163 636f 756e 742c 2074 6f41  fromAccount, toA
+0005a150: 6363 6f75 6e74 2c20 7061 7261 6d73 3d7b  ccount, params={
+0005a160: 7d29 3a0a 2020 2020 2020 2020 2222 220a  }):.        """.
+0005a170: 2020 2020 2020 2020 7472 616e 7366 6572          transfer
+0005a180: 2063 7572 7265 6e63 7920 696e 7465 726e   currency intern
+0005a190: 616c 6c79 2062 6574 7765 656e 2077 616c  ally between wal
+0005a1a0: 6c65 7473 206f 6e20 7468 6520 7361 6d65  lets on the same
+0005a1b0: 2061 6363 6f75 6e74 0a20 2020 2020 2020   account.       
+0005a1c0: 2073 6565 2068 7474 7073 3a2f 2f62 7962   see https://byb
+0005a1d0: 6974 2d65 7863 6861 6e67 652e 6769 7468  it-exchange.gith
+0005a1e0: 7562 2e69 6f2f 646f 6373 2f61 6363 6f75  ub.io/docs/accou
+0005a1f0: 6e74 5f61 7373 6574 2f23 742d 6372 6561  nt_asset/#t-crea
+0005a200: 7465 696e 7465 726e 616c 7472 616e 7366  teinternaltransf
+0005a210: 6572 0a20 2020 2020 2020 2073 6565 2068  er.        see h
+0005a220: 7474 7073 3a2f 2f62 7962 6974 2d65 7863  ttps://bybit-exc
+0005a230: 6861 6e67 652e 6769 7468 7562 2e69 6f2f  hange.github.io/
+0005a240: 646f 6373 2f61 6363 6f75 6e74 5f61 7373  docs/account_ass
+0005a250: 6574 2f76 332f 2374 2d63 7265 6174 6569  et/v3/#t-createi
+0005a260: 6e74 6572 6e61 6c74 7261 6e73 6665 720a  nternaltransfer.
+0005a270: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+0005a280: 7472 2063 6f64 653a 2075 6e69 6669 6564  tr code: unified
+0005a290: 2063 7572 7265 6e63 7920 636f 6465 0a20   currency code. 
+0005a2a0: 2020 2020 2020 203a 7061 7261 6d20 666c         :param fl
+0005a2b0: 6f61 7420 616d 6f75 6e74 3a20 616d 6f75  oat amount: amou
+0005a2c0: 6e74 2074 6f20 7472 616e 7366 6572 0a20  nt to transfer. 
+0005a2d0: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
+0005a2e0: 7220 6672 6f6d 4163 636f 756e 743a 2061  r fromAccount: a
+0005a2f0: 6363 6f75 6e74 2074 6f20 7472 616e 7366  ccount to transf
+0005a300: 6572 2066 726f 6d0a 2020 2020 2020 2020  er from.        
+0005a310: 3a70 6172 616d 2073 7472 2074 6f41 6363  :param str toAcc
+0005a320: 6f75 6e74 3a20 6163 636f 756e 7420 746f  ount: account to
+0005a330: 2074 7261 6e73 6665 7220 746f 0a20 2020   transfer to.   
+0005a340: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
+0005a350: 2070 6172 616d 733a 2065 7874 7261 2070   params: extra p
+0005a360: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
+0005a370: 6963 2074 6f20 7468 6520 6279 6269 7420  ic to the bybit 
+0005a380: 6170 6920 656e 6470 6f69 6e74 0a20 2020  api endpoint.   
+0005a390: 2020 2020 203a 7061 7261 6d20 7374 7220       :param str 
+0005a3a0: 7061 7261 6d73 5b27 7472 616e 7366 6572  params['transfer
+0005a3b0: 4964 275d 3a20 5555 4944 2c20 7768 6963  Id']: UUID, whic
+0005a3c0: 6820 6973 2075 6e69 7175 6520 6163 726f  h is unique acro
+0005a3d0: 7373 2074 6865 2070 6c61 7466 6f72 6d0a  ss the platform.
+0005a3e0: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
+0005a3f0: 2064 6963 743a 2061 2060 7472 616e 7366   dict: a `transf
+0005a400: 6572 2073 7472 7563 7475 7265 203c 6874  er structure <ht
+0005a410: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
+0005a420: 636f 6d2f 232f 3f69 643d 7472 616e 7366  com/#/?id=transf
+0005a430: 6572 2d73 7472 7563 7475 7265 3e60 0a20  er-structure>`. 
+0005a440: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0005a450: 2020 2073 656c 662e 6c6f 6164 5f6d 6172     self.load_mar
+0005a460: 6b65 7473 2829 0a20 2020 2020 2020 2074  kets().        t
+0005a470: 7261 6e73 6665 7249 6420 3d20 7365 6c66  ransferId = self
+0005a480: 2e73 6166 655f 7374 7269 6e67 2870 6172  .safe_string(par
+0005a490: 616d 732c 2027 7472 616e 7366 6572 4964  ams, 'transferId
+0005a4a0: 272c 2073 656c 662e 7575 6964 2829 290a  ', self.uuid()).
+0005a4b0: 2020 2020 2020 2020 6163 636f 756e 7454          accountT
+0005a4c0: 7970 6573 203d 2073 656c 662e 7361 6665  ypes = self.safe
+0005a4d0: 5f76 616c 7565 2873 656c 662e 6f70 7469  _value(self.opti
+0005a4e0: 6f6e 732c 2027 6163 636f 756e 7473 4279  ons, 'accountsBy
+0005a4f0: 5479 7065 272c 207b 7d29 0a20 2020 2020  Type', {}).     
+0005a500: 2020 2066 726f 6d49 6420 3d20 7365 6c66     fromId = self
+0005a510: 2e73 6166 655f 7374 7269 6e67 2861 6363  .safe_string(acc
+0005a520: 6f75 6e74 5479 7065 732c 2066 726f 6d41  ountTypes, fromA
+0005a530: 6363 6f75 6e74 2c20 6672 6f6d 4163 636f  ccount, fromAcco
+0005a540: 756e 7429 0a20 2020 2020 2020 2074 6f49  unt).        toI
+0005a550: 6420 3d20 7365 6c66 2e73 6166 655f 7374  d = self.safe_st
+0005a560: 7269 6e67 2861 6363 6f75 6e74 5479 7065  ring(accountType
+0005a570: 732c 2074 6f41 6363 6f75 6e74 2c20 746f  s, toAccount, to
+0005a580: 4163 636f 756e 7429 0a20 2020 2020 2020  Account).       
+0005a590: 2063 7572 7265 6e63 7920 3d20 7365 6c66   currency = self
+0005a5a0: 2e63 7572 7265 6e63 7928 636f 6465 290a  .currency(code).
+0005a5b0: 2020 2020 2020 2020 616d 6f75 6e74 546f          amountTo
+0005a5c0: 5072 6563 6973 696f 6e20 3d20 7365 6c66  Precision = self
+0005a5d0: 2e63 7572 7265 6e63 795f 746f 5f70 7265  .currency_to_pre
+0005a5e0: 6369 7369 6f6e 2863 6f64 652c 2061 6d6f  cision(code, amo
+0005a5f0: 756e 7429 0a20 2020 2020 2020 206d 6574  unt).        met
+0005a600: 686f 6420 3d20 4e6f 6e65 0a20 2020 2020  hod = None.     
+0005a610: 2020 206d 6574 686f 642c 2070 6172 616d     method, param
+0005a620: 7320 3d20 7365 6c66 2e68 616e 646c 655f  s = self.handle_
+0005a630: 6f70 7469 6f6e 5f61 6e64 5f70 6172 616d  option_and_param
+0005a640: 7328 7061 7261 6d73 2c20 2774 7261 6e73  s(params, 'trans
+0005a650: 6665 7227 2c20 276d 6574 686f 6427 2c20  fer', 'method', 
+0005a660: 2770 7269 7661 7465 506f 7374 4173 7365  'privatePostAsse
+0005a670: 7456 3150 7269 7661 7465 5472 616e 7366  tV1PrivateTransf
+0005a680: 6572 2729 2020 2320 7631 2070 7265 6665  er')  # v1 prefe
+0005a690: 7272 6564 2061 746d 2c20 6265 6361 7573  rred atm, becaus
+0005a6a0: 6520 6974 2073 7570 706f 7274 7320 6675  e it supports fu
+0005a6b0: 6e64 696e 670a 2020 2020 2020 2020 7265  nding.        re
+0005a6c0: 7175 6573 7420 3d20 4e6f 6e65 0a20 2020  quest = None.   
+0005a6d0: 2020 2020 2069 6620 6d65 7468 6f64 203d       if method =
+0005a6e0: 3d20 2770 7269 7661 7465 506f 7374 4173  = 'privatePostAs
+0005a6f0: 7365 7456 3350 7269 7661 7465 5472 616e  setV3PrivateTran
+0005a700: 7366 6572 496e 7465 7254 7261 6e73 6665  sferInterTransfe
+0005a710: 7227 206f 7220 6d65 7468 6f64 203d 3d20  r' or method == 
+0005a720: 2770 7269 7661 7465 506f 7374 5635 4173  'privatePostV5As
+0005a730: 7365 7454 7261 6e73 6665 7249 6e74 6572  setTransferInter
+0005a740: 5472 616e 7366 6572 273a 0a20 2020 2020  Transfer':.     
+0005a750: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+0005a760: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+0005a770: 2020 2027 7472 616e 7366 6572 4964 273a     'transferId':
+0005a780: 2074 7261 6e73 6665 7249 642c 0a20 2020   transferId,.   
+0005a790: 2020 2020 2020 2020 2020 2020 2027 6672               'fr
+0005a7a0: 6f6d 4163 636f 756e 7454 7970 6527 3a20  omAccountType': 
+0005a7b0: 6672 6f6d 4964 2c0a 2020 2020 2020 2020  fromId,.        
+0005a7c0: 2020 2020 2020 2020 2774 6f41 6363 6f75          'toAccou
+0005a7d0: 6e74 5479 7065 273a 2074 6f49 642c 0a20  ntType': toId,. 
+0005a7e0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+0005a7f0: 636f 696e 273a 2063 7572 7265 6e63 795b  coin': currency[
+0005a800: 2769 6427 5d2c 0a20 2020 2020 2020 2020  'id'],.         
+0005a810: 2020 2020 2020 2027 616d 6f75 6e74 273a         'amount':
+0005a820: 2061 6d6f 756e 7454 6f50 7265 6369 7369   amountToPrecisi
+0005a830: 6f6e 2c0a 2020 2020 2020 2020 2020 2020  on,.            
+0005a840: 7d0a 2020 2020 2020 2020 656c 7365 3a0a  }.        else:.
+0005a850: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0005a860: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
+0005a870: 2020 2020 2020 2020 2774 7261 6e73 6665          'transfe
+0005a880: 725f 6964 273a 2074 7261 6e73 6665 7249  r_id': transferI
+0005a890: 642c 0a20 2020 2020 2020 2020 2020 2020  d,.             
+0005a8a0: 2020 2027 6672 6f6d 5f61 6363 6f75 6e74     'from_account
+0005a8b0: 5f74 7970 6527 3a20 6672 6f6d 4964 2c0a  _type': fromId,.
+0005a8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005a8d0: 2774 6f5f 6163 636f 756e 745f 7479 7065  'to_account_type
+0005a8e0: 273a 2074 6f49 642c 0a20 2020 2020 2020  ': toId,.       
+0005a8f0: 2020 2020 2020 2020 2027 636f 696e 273a           'coin':
+0005a900: 2063 7572 7265 6e63 795b 2769 6427 5d2c   currency['id'],
+0005a910: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0005a920: 2027 616d 6f75 6e74 273a 2061 6d6f 756e   'amount': amoun
+0005a930: 7454 6f50 7265 6369 7369 6f6e 2c0a 2020  tToPrecision,.  
+0005a940: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
+0005a950: 2020 2020 7265 7370 6f6e 7365 203d 2067      response = g
+0005a960: 6574 6174 7472 2873 656c 662c 206d 6574  etattr(self, met
+0005a970: 686f 6429 2873 656c 662e 6578 7465 6e64  hod)(self.extend
+0005a980: 2872 6571 7565 7374 2c20 7061 7261 6d73  (request, params
+0005a990: 2929 0a20 2020 2020 2020 2023 0a20 2020  )).        #.   
+0005a9a0: 2020 2020 2023 207b 0a20 2020 2020 2020       # {.       
+0005a9b0: 2023 2020 2020 2022 7265 7443 6f64 6522   #     "retCode"
+0005a9c0: 3a20 302c 0a20 2020 2020 2020 2023 2020  : 0,.        #  
+0005a9d0: 2020 2022 7265 744d 7367 223a 2022 7375     "retMsg": "su
+0005a9e0: 6363 6573 7322 2c0a 2020 2020 2020 2020  ccess",.        
+0005a9f0: 2320 2020 2020 2272 6573 756c 7422 3a20  #     "result": 
+0005aa00: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0005aa10: 2020 2020 2274 7261 6e73 6665 7249 6422      "transferId"
+0005aa20: 3a20 2234 3234 3461 6634 342d 6633 6230  : "4244af44-f3b0
+0005aa30: 2d34 6366 362d 6137 3433 2d62 3536 3536  -4cf6-a743-b5656
+0005aa40: 3065 3938 3762 6322 2020 2320 7472 616e  0e987bc"  # tran
+0005aa50: 7366 6572 5f69 6420 696e 2076 310a 2020  sfer_id in v1.  
+0005aa60: 2020 2020 2020 2320 2020 2020 7d2c 0a20        #     },. 
+0005aa70: 2020 2020 2020 2023 2020 2020 2022 7265         #     "re
+0005aa80: 7445 7874 496e 666f 223a 207b 7d2c 0a20  tExtInfo": {},. 
+0005aa90: 2020 2020 2020 2023 2020 2020 2022 7469         #     "ti
+0005aaa0: 6d65 223a 2031 3636 3638 3735 3835 3732  me": 16668758572
+0005aab0: 3035 0a20 2020 2020 2020 2023 207d 0a20  05.        # }. 
+0005aac0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+0005aad0: 2074 696d 6573 7461 6d70 203d 2073 656c   timestamp = sel
+0005aae0: 662e 7361 6665 5f69 6e74 6567 6572 5f32  f.safe_integer_2
+0005aaf0: 2872 6573 706f 6e73 652c 2027 7469 6d65  (response, 'time
+0005ab00: 272c 2027 7469 6d65 5f6e 6f77 2729 0a20  ', 'time_now'). 
+0005ab10: 2020 2020 2020 2074 7261 6e73 6665 7220         transfer 
+0005ab20: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+0005ab30: 6528 7265 7370 6f6e 7365 2c20 2772 6573  e(response, 'res
+0005ab40: 756c 7427 2c20 7b7d 290a 2020 2020 2020  ult', {}).      
+0005ab50: 2020 7374 6174 7573 5261 7720 3d20 7365    statusRaw = se
+0005ab60: 6c66 2e73 6166 655f 7374 7269 6e67 5f6e  lf.safe_string_n
+0005ab70: 2872 6573 706f 6e73 652c 205b 2772 6574  (response, ['ret
+0005ab80: 436f 6465 272c 2027 7265 744d 7367 272c  Code', 'retMsg',
+0005ab90: 2027 7265 745f 636f 6465 272c 2027 7265   'ret_code', 're
+0005aba0: 745f 6d73 6727 5d29 0a20 2020 2020 2020  t_msg']).       
+0005abb0: 2073 7461 7475 7320 3d20 7365 6c66 2e70   status = self.p
+0005abc0: 6172 7365 5f74 7261 6e73 6665 725f 7374  arse_transfer_st
+0005abd0: 6174 7573 2873 7461 7475 7352 6177 290a  atus(statusRaw).
+0005abe0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0005abf0: 656c 662e 6578 7465 6e64 2873 656c 662e  elf.extend(self.
+0005ac00: 7061 7273 655f 7472 616e 7366 6572 2874  parse_transfer(t
+0005ac10: 7261 6e73 6665 722c 2063 7572 7265 6e63  ransfer, currenc
+0005ac20: 7929 2c20 7b0a 2020 2020 2020 2020 2020  y), {.          
+0005ac30: 2020 2774 696d 6573 7461 6d70 273a 2074    'timestamp': t
+0005ac40: 696d 6573 7461 6d70 2c0a 2020 2020 2020  imestamp,.      
+0005ac50: 2020 2020 2020 2764 6174 6574 696d 6527        'datetime'
+0005ac60: 3a20 7365 6c66 2e69 736f 3836 3031 2874  : self.iso8601(t
+0005ac70: 696d 6573 7461 6d70 292c 0a20 2020 2020  imestamp),.     
+0005ac80: 2020 2020 2020 2027 616d 6f75 6e74 273a         'amount':
+0005ac90: 2073 656c 662e 7061 7273 655f 6e75 6d62   self.parse_numb
+0005aca0: 6572 2861 6d6f 756e 7454 6f50 7265 6369  er(amountToPreci
+0005acb0: 7369 6f6e 292c 0a20 2020 2020 2020 2020  sion),.         
+0005acc0: 2020 2027 6672 6f6d 4163 636f 756e 7427     'fromAccount'
+0005acd0: 3a20 6672 6f6d 4163 636f 756e 742c 0a20  : fromAccount,. 
+0005ace0: 2020 2020 2020 2020 2020 2027 746f 4163             'toAc
+0005acf0: 636f 756e 7427 3a20 746f 4163 636f 756e  count': toAccoun
+0005ad00: 742c 0a20 2020 2020 2020 2020 2020 2027  t,.            '
+0005ad10: 7374 6174 7573 273a 2073 7461 7475 732c  status': status,
+0005ad20: 0a20 2020 2020 2020 207d 290a 0a20 2020  .        })..   
+0005ad30: 2064 6566 2066 6574 6368 5f74 7261 6e73   def fetch_trans
+0005ad40: 6665 7273 2873 656c 662c 2063 6f64 653a  fers(self, code:
+0005ad50: 204f 7074 696f 6e61 6c5b 7374 725d 203d   Optional[str] =
+0005ad60: 204e 6f6e 652c 2073 696e 6365 3a20 4f70   None, since: Op
+0005ad70: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
+0005ad80: 6e65 2c20 6c69 6d69 743a 204f 7074 696f  ne, limit: Optio
+0005ad90: 6e61 6c5b 696e 745d 203d 204e 6f6e 652c  nal[int] = None,
+0005ada0: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
+0005adb0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0005adc0: 2066 6574 6368 2061 2068 6973 746f 7279   fetch a history
+0005add0: 206f 6620 696e 7465 726e 616c 2074 7261   of internal tra
+0005ade0: 6e73 6665 7273 206d 6164 6520 6f6e 2061  nsfers made on a
+0005adf0: 6e20 6163 636f 756e 740a 2020 2020 2020  n account.      
+0005ae00: 2020 7365 6520 6874 7470 733a 2f2f 6279    see https://by
+0005ae10: 6269 742d 6578 6368 616e 6765 2e67 6974  bit-exchange.git
+0005ae20: 6875 622e 696f 2f64 6f63 732f 7635 2f61  hub.io/docs/v5/a
+0005ae30: 7373 6574 2f69 6e74 6572 2d74 7261 6e73  sset/inter-trans
+0005ae40: 6665 722d 6c69 7374 0a20 2020 2020 2020  fer-list.       
+0005ae50: 203a 7061 7261 6d20 7374 727c 4e6f 6e65   :param str|None
+0005ae60: 2063 6f64 653a 2075 6e69 6669 6564 2063   code: unified c
+0005ae70: 7572 7265 6e63 7920 636f 6465 206f 6620  urrency code of 
+0005ae80: 7468 6520 6375 7272 656e 6379 2074 7261  the currency tra
+0005ae90: 6e73 6665 7272 6564 0a20 2020 2020 2020  nsferred.       
+0005aea0: 203a 7061 7261 6d20 696e 747c 4e6f 6e65   :param int|None
+0005aeb0: 2073 696e 6365 3a20 7468 6520 6561 726c   since: the earl
+0005aec0: 6965 7374 2074 696d 6520 696e 206d 7320  iest time in ms 
+0005aed0: 746f 2066 6574 6368 2074 7261 6e73 6665  to fetch transfe
+0005aee0: 7273 2066 6f72 0a20 2020 2020 2020 203a  rs for.        :
+0005aef0: 7061 7261 6d20 696e 747c 4e6f 6e65 206c  param int|None l
+0005af00: 696d 6974 3a20 7468 6520 6d61 7869 6d75  imit: the maximu
+0005af10: 6d20 6e75 6d62 6572 206f 6620 2074 7261  m number of  tra
+0005af20: 6e73 6665 7273 2073 7472 7563 7475 7265  nsfers structure
+0005af30: 7320 746f 2072 6574 7269 6576 650a 2020  s to retrieve.  
+0005af40: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
+0005af50: 7420 7061 7261 6d73 3a20 6578 7472 6120  t params: extra 
+0005af60: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
+0005af70: 6669 6320 746f 2074 6865 2062 7962 6974  fic to the bybit
+0005af80: 2061 7069 2065 6e64 706f 696e 740a 2020   api endpoint.  
+0005af90: 2020 2020 2020 3a72 6574 7572 6e73 205b        :returns [
+0005afa0: 6469 6374 5d3a 2061 206c 6973 7420 6f66  dict]: a list of
+0005afb0: 2060 7472 616e 7366 6572 2073 7472 7563   `transfer struc
+0005afc0: 7475 7265 7320 3c68 7474 7073 3a2f 2f64  tures <https://d
+0005afd0: 6f63 732e 6363 7874 2e63 6f6d 2f23 2f3f  ocs.ccxt.com/#/?
+0005afe0: 6964 3d74 7261 6e73 6665 722d 7374 7275  id=transfer-stru
+0005aff0: 6374 7572 653e 600a 2020 2020 2020 2020  cture>`.        
+0005b000: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
+0005b010: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
+0005b020: 2020 2020 2020 2020 6375 7272 656e 6379          currency
+0005b030: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+0005b040: 7265 7175 6573 7420 3d20 7b7d 0a20 2020  request = {}.   
+0005b050: 2020 2020 2069 6620 636f 6465 2069 7320       if code is 
+0005b060: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+0005b070: 2020 2020 2020 6375 7272 656e 6379 203d        currency =
+0005b080: 2073 656c 662e 7361 6665 5f63 7572 7265   self.safe_curre
+0005b090: 6e63 795f 636f 6465 2863 6f64 6529 0a20  ncy_code(code). 
+0005b0a0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+0005b0b0: 7374 5b27 636f 696e 275d 203d 2063 7572  st['coin'] = cur
+0005b0c0: 7265 6e63 790a 2020 2020 2020 2020 6966  rency.        if
+0005b0d0: 2073 696e 6365 2069 7320 6e6f 7420 4e6f   since is not No
+0005b0e0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+0005b0f0: 7265 7175 6573 745b 2773 7461 7274 5469  request['startTi
+0005b100: 6d65 275d 203d 2073 696e 6365 0a20 2020  me'] = since.   
+0005b110: 2020 2020 2069 6620 6c69 6d69 7420 6973       if limit is
+0005b120: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+0005b130: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+0005b140: 6c69 6d69 7427 5d20 3d20 6c69 6d69 740a  limit'] = limit.
+0005b150: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
+0005b160: 203d 2073 656c 662e 7072 6976 6174 6547   = self.privateG
+0005b170: 6574 5635 4173 7365 7454 7261 6e73 6665  etV5AssetTransfe
+0005b180: 7251 7565 7279 496e 7465 7254 7261 6e73  rQueryInterTrans
+0005b190: 6665 724c 6973 7428 7365 6c66 2e65 7874  ferList(self.ext
+0005b1a0: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
+0005b1b0: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
+0005b1c0: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+0005b1d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005b1e0: 2020 2272 6574 436f 6465 223a 2030 2c0a    "retCode": 0,.
+0005b1f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005b200: 2020 2272 6574 4d73 6722 3a20 2273 7563    "retMsg": "suc
+0005b210: 6365 7373 222c 0a20 2020 2020 2020 2023  cess",.        #
+0005b220: 2020 2020 2020 2020 2022 7265 7375 6c74           "result
+0005b230: 223a 207b 0a20 2020 2020 2020 2023 2020  ": {.        #  
+0005b240: 2020 2020 2020 2020 2020 2022 6c69 7374             "list
+0005b250: 223a 205b 0a20 2020 2020 2020 2023 2020  ": [.        #  
+0005b260: 2020 2020 2020 2020 2020 2020 2020 207b                 {
+0005b270: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0005b280: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0005b290: 7472 616e 7366 6572 4964 223a 2022 7365  transferId": "se
+0005b2a0: 6c66 5472 616e 7366 6572 5f61 3130 3931  lfTransfer_a1091
+0005b2b0: 6363 372d 3933 3634 2d34 6237 342d 3864  cc7-9364-4b74-8d
+0005b2c0: 6531 2d31 3866 3032 6336 6632 6435 6322  e1-18f02c6f2d5c"
+0005b2d0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0005b2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005b2f0: 2263 6f69 6e22 3a20 2255 5344 5422 2c0a  "coin": "USDT",.
+0005b300: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005b310: 2020 2020 2020 2020 2020 2020 2020 2261                "a
+0005b320: 6d6f 756e 7422 3a20 2235 3030 3022 2c0a  mount": "5000",.
+0005b330: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005b340: 2020 2020 2020 2020 2020 2020 2020 2266                "f
+0005b350: 726f 6d41 6363 6f75 6e74 5479 7065 223a  romAccountType":
+0005b360: 2022 5350 4f54 222c 0a20 2020 2020 2020   "SPOT",.       
+0005b370: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0005b380: 2020 2020 2020 2022 746f 4163 636f 756e         "toAccoun
+0005b390: 7454 7970 6522 3a20 2255 4e49 4649 4544  tType": "UNIFIED
+0005b3a0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0005b3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005b3c0: 2022 7469 6d65 7374 616d 7022 3a20 2231   "timestamp": "1
+0005b3d0: 3636 3732 3833 3236 3330 3030 222c 0a20  667283263000",. 
+0005b3e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0005b3f0: 2020 2020 2020 2020 2020 2020 2022 7374               "st
+0005b400: 6174 7573 223a 2022 5355 4343 4553 5322  atus": "SUCCESS"
+0005b410: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0005b420: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
+0005b430: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0005b440: 2020 205d 2c0a 2020 2020 2020 2020 2320     ],.        # 
+0005b450: 2020 2020 2020 2020 2020 2020 226e 6578              "nex
+0005b460: 7450 6167 6543 7572 736f 7222 3a20 2265  tPageCursor": "e
+0005b470: 794a 7461 5735 4a52 4349 364d 544d 314f  yJtaW5JRCI6MTM1O
+0005b480: 4451 324f 4377 6962 5746 3453 5551 694f  DQ2OCwibWF4SUQiO
+0005b490: 6a45 7a4e 5467 304e 6a68 3922 0a20 2020  jEzNTg0Njh9".   
+0005b4a0: 2020 2020 2023 2020 2020 2020 2020 207d       #         }
+0005b4b0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0005b4c0: 2020 2020 2272 6574 4578 7449 6e66 6f22      "retExtInfo"
+0005b4d0: 3a20 7b7d 2c0a 2020 2020 2020 2020 2320  : {},.        # 
+0005b4e0: 2020 2020 2020 2020 2274 696d 6522 3a20          "time": 
+0005b4f0: 3136 3730 3938 3832 3731 3637 370a 2020  1670988271677.  
+0005b500: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
+0005b510: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+0005b520: 6461 7461 203d 2073 656c 662e 7361 6665  data = self.safe
+0005b530: 5f76 616c 7565 2872 6573 706f 6e73 652c  _value(response,
+0005b540: 2027 7265 7375 6c74 272c 207b 7d29 0a20   'result', {}). 
+0005b550: 2020 2020 2020 2074 7261 6e73 6665 7273         transfers
+0005b560: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+0005b570: 7565 2864 6174 612c 2027 6c69 7374 272c  ue(data, 'list',
+0005b580: 205b 5d29 0a20 2020 2020 2020 2072 6574   []).        ret
+0005b590: 7572 6e20 7365 6c66 2e70 6172 7365 5f74  urn self.parse_t
+0005b5a0: 7261 6e73 6665 7273 2874 7261 6e73 6665  ransfers(transfe
+0005b5b0: 7273 2c20 6375 7272 656e 6379 2c20 7369  rs, currency, si
+0005b5c0: 6e63 652c 206c 696d 6974 290a 0a20 2020  nce, limit)..   
+0005b5d0: 2064 6566 2062 6f72 726f 775f 6d61 7267   def borrow_marg
+0005b5e0: 696e 2873 656c 662c 2063 6f64 653a 2073  in(self, code: s
+0005b5f0: 7472 2c20 616d 6f75 6e74 2c20 7379 6d62  tr, amount, symb
+0005b600: 6f6c 3a20 4f70 7469 6f6e 616c 5b73 7472  ol: Optional[str
+0005b610: 5d20 3d20 4e6f 6e65 2c20 7061 7261 6d73  ] = None, params
+0005b620: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
+0005b630: 220a 2020 2020 2020 2020 6372 6561 7465  ".        create
+0005b640: 2061 206c 6f61 6e20 746f 2062 6f72 726f   a loan to borro
+0005b650: 7720 6d61 7267 696e 0a20 2020 2020 2020  w margin.       
+0005b660: 2073 6565 2068 7474 7073 3a2f 2f62 7962   see https://byb
+0005b670: 6974 2d65 7863 6861 6e67 652e 6769 7468  it-exchange.gith
+0005b680: 7562 2e69 6f2f 646f 6373 2f73 706f 742f  ub.io/docs/spot/
+0005b690: 7633 2f23 742d 626f 7272 6f77 6d61 7267  v3/#t-borrowmarg
+0005b6a0: 696e 6c6f 616e 0a20 2020 2020 2020 203a  inloan.        :
+0005b6b0: 7061 7261 6d20 7374 7220 636f 6465 3a20  param str code: 
+0005b6c0: 756e 6966 6965 6420 6375 7272 656e 6379  unified currency
+0005b6d0: 2063 6f64 6520 6f66 2074 6865 2063 7572   code of the cur
+0005b6e0: 7265 6e63 7920 746f 2062 6f72 726f 770a  rency to borrow.
+0005b6f0: 2020 2020 2020 2020 3a70 6172 616d 2066          :param f
+0005b700: 6c6f 6174 2061 6d6f 756e 743a 2074 6865  loat amount: the
+0005b710: 2061 6d6f 756e 7420 746f 2062 6f72 726f   amount to borro
+0005b720: 770a 2020 2020 2020 2020 3a70 6172 616d  w.        :param
+0005b730: 2073 7472 7c4e 6f6e 6520 7379 6d62 6f6c   str|None symbol
+0005b740: 3a20 6e6f 7420 7573 6564 2062 7920 6279  : not used by by
+0005b750: 6269 742e 626f 7272 6f77 4d61 7267 696e  bit.borrowMargin
+0005b760: 2829 0a20 2020 2020 2020 203a 7061 7261  ().        :para
+0005b770: 6d20 6469 6374 2070 6172 616d 733a 2065  m dict params: e
+0005b780: 7874 7261 2070 6172 616d 6574 6572 7320  xtra parameters 
+0005b790: 7370 6563 6966 6963 2074 6f20 7468 6520  specific to the 
+0005b7a0: 6279 6269 7420 6170 6920 656e 6470 6f69  bybit api endpoi
+0005b7b0: 6e74 0a20 2020 2020 2020 203a 7265 7475  nt.        :retu
+0005b7c0: 726e 7320 6469 6374 3a20 6120 606d 6172  rns dict: a `mar
+0005b7d0: 6769 6e20 6c6f 616e 2073 7472 7563 7475  gin loan structu
+0005b7e0: 7265 203c 6874 7470 733a 2f2f 646f 6373  re <https://docs
+0005b7f0: 2e63 6378 742e 636f 6d2f 232f 3f69 643d  .ccxt.com/#/?id=
+0005b800: 6d61 7267 696e 2d6c 6f61 6e2d 7374 7275  margin-loan-stru
+0005b810: 6374 7572 653e 600a 2020 2020 2020 2020  cture>`.        
+0005b820: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
+0005b830: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
+0005b840: 2020 2020 2020 2020 6375 7272 656e 6379          currency
+0005b850: 203d 2073 656c 662e 6375 7272 656e 6379   = self.currency
+0005b860: 2863 6f64 6529 0a20 2020 2020 2020 206d  (code).        m
+0005b870: 6172 6769 6e4d 6f64 652c 2071 7565 7279  arginMode, query
+0005b880: 203d 2073 656c 662e 6861 6e64 6c65 5f6d   = self.handle_m
+0005b890: 6172 6769 6e5f 6d6f 6465 5f61 6e64 5f70  argin_mode_and_p
+0005b8a0: 6172 616d 7328 2762 6f72 726f 774d 6172  arams('borrowMar
+0005b8b0: 6769 6e27 2c20 7061 7261 6d73 290a 2020  gin', params).  
+0005b8c0: 2020 2020 2020 6966 206d 6172 6769 6e4d        if marginM
+0005b8d0: 6f64 6520 3d3d 2027 6973 6f6c 6174 6564  ode == 'isolated
+0005b8e0: 273a 0a20 2020 2020 2020 2020 2020 2072  ':.            r
+0005b8f0: 6169 7365 204e 6f74 5375 7070 6f72 7465  aise NotSupporte
+0005b900: 6428 7365 6c66 2e69 6420 2b20 2720 626f  d(self.id + ' bo
+0005b910: 7272 6f77 4d61 7267 696e 2829 2063 616e  rrowMargin() can
+0005b920: 6e6f 7420 7573 6520 6973 6f6c 6174 6564  not use isolated
+0005b930: 206d 6172 6769 6e27 290a 2020 2020 2020   margin').      
+0005b940: 2020 7265 7175 6573 7420 3d20 7b0a 2020    request = {.  
+0005b950: 2020 2020 2020 2020 2020 2763 6f69 6e27            'coin'
+0005b960: 3a20 6375 7272 656e 6379 5b27 6964 275d  : currency['id']
+0005b970: 2c0a 2020 2020 2020 2020 2020 2020 2771  ,.            'q
+0005b980: 7479 273a 2073 656c 662e 6375 7272 656e  ty': self.curren
+0005b990: 6379 5f74 6f5f 7072 6563 6973 696f 6e28  cy_to_precision(
+0005b9a0: 636f 6465 2c20 616d 6f75 6e74 292c 0a20  code, amount),. 
+0005b9b0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+0005b9c0: 2072 6573 706f 6e73 6520 3d20 7365 6c66   response = self
+0005b9d0: 2e70 7269 7661 7465 506f 7374 5370 6f74  .privatePostSpot
+0005b9e0: 5633 5072 6976 6174 6543 726f 7373 4d61  V3PrivateCrossMa
+0005b9f0: 7267 696e 4c6f 616e 2873 656c 662e 6578  rginLoan(self.ex
+0005ba00: 7465 6e64 2872 6571 7565 7374 2c20 7175  tend(request, qu
+0005ba10: 6572 7929 290a 2020 2020 2020 2020 230a  ery)).        #.
+0005ba20: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+0005ba30: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005ba40: 2020 2272 6574 436f 6465 223a 2030 2c0a    "retCode": 0,.
+0005ba50: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005ba60: 2020 2272 6574 4d73 6722 3a20 2273 7563    "retMsg": "suc
+0005ba70: 6365 7373 222c 0a20 2020 2020 2020 2023  cess",.        #
+0005ba80: 2020 2020 2020 2020 2022 7265 7375 6c74           "result
+0005ba90: 223a 207b 0a20 2020 2020 2020 2023 2020  ": {.        #  
+0005baa0: 2020 2020 2020 2020 2020 2022 7472 616e             "tran
+0005bab0: 7361 6374 4964 223a 2022 3134 3134 3322  sactId": "14143"
+0005bac0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0005bad0: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
+0005bae0: 2020 2020 2020 2020 2272 6574 4578 7449          "retExtI
+0005baf0: 6e66 6f22 3a20 6e75 6c6c 2c0a 2020 2020  nfo": null,.    
+0005bb00: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
+0005bb10: 696d 6522 3a20 3136 3632 3631 3738 3438  ime": 1662617848
+0005bb20: 3937 300a 2020 2020 2020 2020 2320 2020  970.        #   
+0005bb30: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
+0005bb40: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
+0005bb50: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
+0005bb60: 6573 706f 6e73 652c 2027 7265 7375 6c74  esponse, 'result
+0005bb70: 272c 207b 7d29 0a20 2020 2020 2020 2074  ', {}).        t
+0005bb80: 7261 6e73 6163 7469 6f6e 203d 2073 656c  ransaction = sel
+0005bb90: 662e 7061 7273 655f 6d61 7267 696e 5f6c  f.parse_margin_l
+0005bba0: 6f61 6e28 7265 7375 6c74 2c20 6375 7272  oan(result, curr
+0005bbb0: 656e 6379 290a 2020 2020 2020 2020 7265  ency).        re
+0005bbc0: 7475 726e 2073 656c 662e 6578 7465 6e64  turn self.extend
+0005bbd0: 2874 7261 6e73 6163 7469 6f6e 2c20 7b0a  (transaction, {.
+0005bbe0: 2020 2020 2020 2020 2020 2020 2773 796d              'sym
+0005bbf0: 626f 6c27 3a20 7379 6d62 6f6c 2c0a 2020  bol': symbol,.  
+0005bc00: 2020 2020 2020 2020 2020 2761 6d6f 756e            'amoun
+0005bc10: 7427 3a20 616d 6f75 6e74 2c0a 2020 2020  t': amount,.    
+0005bc20: 2020 2020 7d29 0a0a 2020 2020 6465 6620      })..    def 
+0005bc30: 7265 7061 795f 6d61 7267 696e 2873 656c  repay_margin(sel
+0005bc40: 662c 2063 6f64 653a 2073 7472 2c20 616d  f, code: str, am
+0005bc50: 6f75 6e74 2c20 7379 6d62 6f6c 3a20 4f70  ount, symbol: Op
+0005bc60: 7469 6f6e 616c 5b73 7472 5d20 3d20 4e6f  tional[str] = No
+0005bc70: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
+0005bc80: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0005bc90: 2020 2020 7265 7061 7920 626f 7272 6f77      repay borrow
+0005bca0: 6564 206d 6172 6769 6e20 616e 6420 696e  ed margin and in
+0005bcb0: 7465 7265 7374 0a20 2020 2020 2020 2073  terest.        s
+0005bcc0: 6565 2068 7474 7073 3a2f 2f62 7962 6974  ee https://bybit
+0005bcd0: 2d65 7863 6861 6e67 652e 6769 7468 7562  -exchange.github
+0005bce0: 2e69 6f2f 646f 6373 2f73 706f 742f 7633  .io/docs/spot/v3
+0005bcf0: 2f23 742d 7265 7061 796d 6172 6769 6e6c  /#t-repaymarginl
+0005bd00: 6f61 6e0a 2020 2020 2020 2020 3a70 6172  oan.        :par
+0005bd10: 616d 2073 7472 2063 6f64 653a 2075 6e69  am str code: uni
+0005bd20: 6669 6564 2063 7572 7265 6e63 7920 636f  fied currency co
+0005bd30: 6465 206f 6620 7468 6520 6375 7272 656e  de of the curren
+0005bd40: 6379 2074 6f20 7265 7061 790a 2020 2020  cy to repay.    
+0005bd50: 2020 2020 3a70 6172 616d 2066 6c6f 6174      :param float
+0005bd60: 2061 6d6f 756e 743a 2074 6865 2061 6d6f   amount: the amo
+0005bd70: 756e 7420 746f 2072 6570 6179 0a20 2020  unt to repay.   
+0005bd80: 2020 2020 203a 7061 7261 6d20 7374 727c       :param str|
+0005bd90: 4e6f 6e65 2073 796d 626f 6c3a 206e 6f74  None symbol: not
+0005bda0: 2075 7365 6420 6279 2062 7962 6974 2e72   used by bybit.r
+0005bdb0: 6570 6179 4d61 7267 696e 2829 0a20 2020  epayMargin().   
+0005bdc0: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
+0005bdd0: 2070 6172 616d 733a 2065 7874 7261 2070   params: extra p
+0005bde0: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
+0005bdf0: 6963 2074 6f20 7468 6520 6279 6269 7420  ic to the bybit 
+0005be00: 6170 6920 656e 6470 6f69 6e74 0a20 2020  api endpoint.   
+0005be10: 2020 2020 203a 7265 7475 726e 7320 6469       :returns di
+0005be20: 6374 3a20 6120 606d 6172 6769 6e20 6c6f  ct: a `margin lo
+0005be30: 616e 2073 7472 7563 7475 7265 203c 6874  an structure <ht
+0005be40: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
+0005be50: 636f 6d2f 232f 3f69 643d 6d61 7267 696e  com/#/?id=margin
+0005be60: 2d6c 6f61 6e2d 7374 7275 6374 7572 653e  -loan-structure>
+0005be70: 600a 2020 2020 2020 2020 2222 220a 2020  `.        """.  
+0005be80: 2020 2020 2020 7365 6c66 2e6c 6f61 645f        self.load_
+0005be90: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
+0005bea0: 2020 6375 7272 656e 6379 203d 2073 656c    currency = sel
+0005beb0: 662e 6375 7272 656e 6379 2863 6f64 6529  f.currency(code)
+0005bec0: 0a20 2020 2020 2020 206d 6172 6769 6e4d  .        marginM
+0005bed0: 6f64 652c 2071 7565 7279 203d 2073 656c  ode, query = sel
+0005bee0: 662e 6861 6e64 6c65 5f6d 6172 6769 6e5f  f.handle_margin_
+0005bef0: 6d6f 6465 5f61 6e64 5f70 6172 616d 7328  mode_and_params(
+0005bf00: 2772 6570 6179 4d61 7267 696e 272c 2070  'repayMargin', p
+0005bf10: 6172 616d 7329 0a20 2020 2020 2020 2069  arams).        i
+0005bf20: 6620 6d61 7267 696e 4d6f 6465 203d 3d20  f marginMode == 
+0005bf30: 2769 736f 6c61 7465 6427 3a0a 2020 2020  'isolated':.    
+0005bf40: 2020 2020 2020 2020 7261 6973 6520 4e6f          raise No
+0005bf50: 7453 7570 706f 7274 6564 2873 656c 662e  tSupported(self.
+0005bf60: 6964 202b 2027 2072 6570 6179 4d61 7267  id + ' repayMarg
+0005bf70: 696e 2829 2063 616e 6e6f 7420 7573 6520  in() cannot use 
+0005bf80: 6973 6f6c 6174 6564 206d 6172 6769 6e27  isolated margin'
+0005bf90: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
+0005bfa0: 7420 3d20 7b0a 2020 2020 2020 2020 2020  t = {.          
+0005bfb0: 2020 2763 6f69 6e27 3a20 6375 7272 656e    'coin': curren
+0005bfc0: 6379 5b27 6964 275d 2c0a 2020 2020 2020  cy['id'],.      
+0005bfd0: 2020 2020 2020 2771 7479 273a 2073 656c        'qty': sel
+0005bfe0: 662e 6e75 6d62 6572 5f74 6f5f 7374 7269  f.number_to_stri
+0005bff0: 6e67 2861 6d6f 756e 7429 2c0a 2020 2020  ng(amount),.    
+0005c000: 2020 2020 7d0a 2020 2020 2020 2020 7265      }.        re
+0005c010: 7370 6f6e 7365 203d 2073 656c 662e 7072  sponse = self.pr
+0005c020: 6976 6174 6550 6f73 7453 706f 7456 3350  ivatePostSpotV3P
+0005c030: 7269 7661 7465 4372 6f73 734d 6172 6769  rivateCrossMargi
+0005c040: 6e52 6570 6179 2873 656c 662e 6578 7465  nRepay(self.exte
+0005c050: 6e64 2872 6571 7565 7374 2c20 7175 6572  nd(request, quer
+0005c060: 7929 290a 2020 2020 2020 2020 230a 2020  y)).        #.  
+0005c070: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
+0005c080: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0005c090: 2272 6574 436f 6465 223a 2030 2c0a 2020  "retCode": 0,.  
+0005c0a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0005c0b0: 2272 6574 4d73 6722 3a20 2273 7563 6365  "retMsg": "succe
+0005c0c0: 7373 222c 0a20 2020 2020 2020 2023 2020  ss",.        #  
+0005c0d0: 2020 2020 2020 2022 7265 7375 6c74 223a         "result":
+0005c0e0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+0005c0f0: 2020 2020 2020 2020 2272 6570 6179 4964          "repayId
+0005c100: 223a 2022 3132 3132 3822 0a20 2020 2020  ": "12128".     
+0005c110: 2020 2023 2020 2020 2020 2020 207d 2c0a     #         },.
+0005c120: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005c130: 2020 2272 6574 4578 7449 6e66 6f22 3a20    "retExtInfo": 
+0005c140: 6e75 6c6c 2c0a 2020 2020 2020 2020 2320  null,.        # 
+0005c150: 2020 2020 2020 2020 2274 696d 6522 3a20          "time": 
+0005c160: 3136 3632 3631 3832 3938 3435 320a 2020  1662618298452.  
+0005c170: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
+0005c180: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+0005c190: 7265 7375 6c74 203d 2073 656c 662e 7361  result = self.sa
+0005c1a0: 6665 5f76 616c 7565 2872 6573 706f 6e73  fe_value(respons
+0005c1b0: 652c 2027 7265 7375 6c74 272c 207b 7d29  e, 'result', {})
+0005c1c0: 0a20 2020 2020 2020 2074 7261 6e73 6163  .        transac
+0005c1d0: 7469 6f6e 203d 2073 656c 662e 7061 7273  tion = self.pars
+0005c1e0: 655f 6d61 7267 696e 5f6c 6f61 6e28 7265  e_margin_loan(re
+0005c1f0: 7375 6c74 2c20 6375 7272 656e 6379 290a  sult, currency).
+0005c200: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0005c210: 656c 662e 6578 7465 6e64 2874 7261 6e73  elf.extend(trans
+0005c220: 6163 7469 6f6e 2c20 7b0a 2020 2020 2020  action, {.      
+0005c230: 2020 2020 2020 2773 796d 626f 6c27 3a20        'symbol': 
+0005c240: 7379 6d62 6f6c 2c0a 2020 2020 2020 2020  symbol,.        
+0005c250: 2020 2020 2761 6d6f 756e 7427 3a20 616d      'amount': am
+0005c260: 6f75 6e74 2c0a 2020 2020 2020 2020 7d29  ount,.        })
+0005c270: 0a0a 2020 2020 6465 6620 7061 7273 655f  ..    def parse_
+0005c280: 6d61 7267 696e 5f6c 6f61 6e28 7365 6c66  margin_loan(self
+0005c290: 2c20 696e 666f 2c20 6375 7272 656e 6379  , info, currency
+0005c2a0: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
+0005c2b0: 230a 2020 2020 2020 2020 2320 626f 7272  #.        # borr
+0005c2c0: 6f77 4d61 7267 696e 0a20 2020 2020 2020  owMargin.       
+0005c2d0: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
+0005c2e0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+0005c2f0: 2020 2020 2022 7472 616e 7361 6374 4964       "transactId
+0005c300: 223a 2022 3134 3134 3322 0a20 2020 2020  ": "14143".     
+0005c310: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
+0005c320: 2020 2023 0a20 2020 2020 2020 2023 2072     #.        # r
+0005c330: 6570 6179 4d61 7267 696e 0a20 2020 2020  epayMargin.     
+0005c340: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
+0005c350: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
+0005c360: 2020 2020 2020 2022 7265 7061 7949 6422         "repayId"
+0005c370: 3a20 2231 3231 3238 220a 2020 2020 2020  : "12128".      
+0005c380: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
+0005c390: 2020 230a 2020 2020 2020 2020 7265 7475    #.        retu
+0005c3a0: 726e 207b 0a20 2020 2020 2020 2020 2020  rn {.           
+0005c3b0: 2027 6964 273a 2073 656c 662e 7361 6665   'id': self.safe
+0005c3c0: 5f73 7472 696e 675f 3228 696e 666f 2c20  _string_2(info, 
+0005c3d0: 2774 7261 6e73 6163 7449 6427 2c20 2772  'transactId', 'r
+0005c3e0: 6570 6179 4964 2729 2c0a 2020 2020 2020  epayId'),.      
+0005c3f0: 2020 2020 2020 2763 7572 7265 6e63 7927        'currency'
+0005c400: 3a20 7365 6c66 2e73 6166 655f 7374 7269  : self.safe_stri
+0005c410: 6e67 2863 7572 7265 6e63 792c 2027 636f  ng(currency, 'co
+0005c420: 6465 2729 2c0a 2020 2020 2020 2020 2020  de'),.          
+0005c430: 2020 2761 6d6f 756e 7427 3a20 4e6f 6e65    'amount': None
+0005c440: 2c0a 2020 2020 2020 2020 2020 2020 2773  ,.            's
+0005c450: 796d 626f 6c27 3a20 4e6f 6e65 2c0a 2020  ymbol': None,.  
+0005c460: 2020 2020 2020 2020 2020 2774 696d 6573            'times
+0005c470: 7461 6d70 273a 204e 6f6e 652c 0a20 2020  tamp': None,.   
+0005c480: 2020 2020 2020 2020 2027 6461 7465 7469           'dateti
+0005c490: 6d65 273a 204e 6f6e 652c 0a20 2020 2020  me': None,.     
+0005c4a0: 2020 2020 2020 2027 696e 666f 273a 2069         'info': i
+0005c4b0: 6e66 6f2c 0a20 2020 2020 2020 207d 0a0a  nfo,.        }..
+0005c4c0: 2020 2020 6465 6620 7061 7273 655f 7472      def parse_tr
+0005c4d0: 616e 7366 6572 5f73 7461 7475 7328 7365  ansfer_status(se
+0005c4e0: 6c66 2c20 7374 6174 7573 293a 0a20 2020  lf, status):.   
+0005c4f0: 2020 2020 2073 7461 7475 7365 7320 3d20       statuses = 
+0005c500: 7b0a 2020 2020 2020 2020 2020 2020 2730  {.            '0
+0005c510: 273a 2027 6f6b 272c 0a20 2020 2020 2020  ': 'ok',.       
+0005c520: 2020 2020 2027 4f4b 273a 2027 6f6b 272c       'OK': 'ok',
+0005c530: 0a20 2020 2020 2020 2020 2020 2027 5355  .            'SU
+0005c540: 4343 4553 5327 3a20 276f 6b27 2c0a 2020  CCESS': 'ok',.  
+0005c550: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+0005c560: 7265 7475 726e 2073 656c 662e 7361 6665  return self.safe
+0005c570: 5f73 7472 696e 6728 7374 6174 7573 6573  _string(statuses
+0005c580: 2c20 7374 6174 7573 2c20 7374 6174 7573  , status, status
+0005c590: 290a 0a20 2020 2064 6566 2070 6172 7365  )..    def parse
+0005c5a0: 5f74 7261 6e73 6665 7228 7365 6c66 2c20  _transfer(self, 
+0005c5b0: 7472 616e 7366 6572 2c20 6375 7272 656e  transfer, curren
+0005c5c0: 6379 3d4e 6f6e 6529 3a0a 2020 2020 2020  cy=None):.      
+0005c5d0: 2020 230a 2020 2020 2020 2020 2320 7472    #.        # tr
+0005c5e0: 616e 7366 6572 0a20 2020 2020 2020 2023  ansfer.        #
+0005c5f0: 0a20 2020 2020 2020 2023 2020 2020 207b  .        #     {
+0005c600: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0005c610: 2020 2022 7472 616e 7366 6572 4964 223a     "transferId":
+0005c620: 2022 3232 6332 6263 3131 2d65 6435 622d   "22c2bc11-ed5b-
+0005c630: 3439 6134 2d38 3634 372d 6334 6530 6635  49a4-8647-c4e0f5
+0005c640: 6636 6632 6232 2220 2023 2074 7261 6e73  f6f2b2"  # trans
+0005c650: 6665 725f 6964 2069 6e20 7631 0a20 2020  fer_id in v1.   
+0005c660: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
+0005c670: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+0005c680: 2066 6574 6368 5472 616e 7366 6572 730a   fetchTransfers.
+0005c690: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+0005c6a0: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
+0005c6b0: 2020 2320 2020 2020 2020 2020 2274 7261    #         "tra
+0005c6c0: 6e73 6665 7249 6422 3a20 2265 3963 3432  nsferId": "e9c42
+0005c6d0: 3163 342d 6230 3130 2d34 6231 362d 6162  1c4-b010-4b16-ab
+0005c6e0: 6436 2d31 3036 3137 3966 3237 3730 3222  d6-106179f27702"
+0005c6f0: 2c20 2023 2074 7261 6e73 6665 725f 6964  ,  # transfer_id
+0005c700: 2069 6e20 7631 0a20 2020 2020 2020 2023   in v1.        #
+0005c710: 2020 2020 2020 2020 2022 636f 696e 223a           "coin":
+0005c720: 2022 5553 4454 222c 0a20 2020 2020 2020   "USDT",.       
+0005c730: 2023 2020 2020 2020 2020 2022 616d 6f75   #         "amou
+0005c740: 6e74 223a 2022 3822 2c0a 2020 2020 2020  nt": "8",.      
+0005c750: 2020 2320 2020 2020 2020 2020 2266 726f    #         "fro
+0005c760: 6d41 6363 6f75 6e74 5479 7065 223a 2022  mAccountType": "
+0005c770: 4655 4e44 222c 2020 2320 6672 6f6d 5f61  FUND",  # from_a
+0005c780: 6363 6f75 6e74 5f74 7970 6520 696e 2076  ccount_type in v
+0005c790: 310a 2020 2020 2020 2020 2320 2020 2020  1.        #     
+0005c7a0: 2020 2020 2274 6f41 6363 6f75 6e74 5479      "toAccountTy
+0005c7b0: 7065 223a 2022 5350 4f54 222c 2020 2320  pe": "SPOT",  # 
+0005c7c0: 746f 5f61 6363 6f75 6e74 5f74 7970 6520  to_account_type 
+0005c7d0: 696e 2076 310a 2020 2020 2020 2020 2320  in v1.        # 
+0005c7e0: 2020 2020 2020 2020 2274 696d 6573 7461          "timesta
+0005c7f0: 6d70 223a 2022 3136 3636 3837 3934 3236  mp": "1666879426
+0005c800: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
+0005c810: 2020 2020 2020 2020 2273 7461 7475 7322          "status"
+0005c820: 3a20 2253 5543 4345 5353 220a 2020 2020  : "SUCCESS".    
+0005c830: 2020 2020 2320 2020 2020 207d 0a20 2020      #      }.   
+0005c840: 2020 2020 2023 0a20 2020 2020 2020 2063       #.        c
+0005c850: 7572 7265 6e63 7949 6420 3d20 7365 6c66  urrencyId = self
+0005c860: 2e73 6166 655f 7374 7269 6e67 2874 7261  .safe_string(tra
+0005c870: 6e73 6665 722c 2027 636f 696e 2729 0a20  nsfer, 'coin'). 
+0005c880: 2020 2020 2020 2074 696d 6573 7461 6d70         timestamp
+0005c890: 203d 2073 656c 662e 7361 6665 5f69 6e74   = self.safe_int
+0005c8a0: 6567 6572 2874 7261 6e73 6665 722c 2027  eger(transfer, '
+0005c8b0: 7469 6d65 7374 616d 7027 290a 2020 2020  timestamp').    
+0005c8c0: 2020 2020 6672 6f6d 4163 636f 756e 7449      fromAccountI
+0005c8d0: 6420 3d20 7365 6c66 2e73 6166 655f 7374  d = self.safe_st
+0005c8e0: 7269 6e67 5f32 2874 7261 6e73 6665 722c  ring_2(transfer,
+0005c8f0: 2027 6672 6f6d 4163 636f 756e 7454 7970   'fromAccountTyp
+0005c900: 6527 2c20 2766 726f 6d5f 6163 636f 756e  e', 'from_accoun
+0005c910: 745f 7479 7065 2729 0a20 2020 2020 2020  t_type').       
+0005c920: 2074 6f41 6363 6f75 6e74 4964 203d 2073   toAccountId = s
+0005c930: 656c 662e 7361 6665 5f73 7472 696e 675f  elf.safe_string_
+0005c940: 3228 7472 616e 7366 6572 2c20 2774 6f41  2(transfer, 'toA
+0005c950: 6363 6f75 6e74 5479 7065 272c 2027 746f  ccountType', 'to
+0005c960: 5f61 6363 6f75 6e74 5f74 7970 6527 290a  _account_type').
+0005c970: 2020 2020 2020 2020 6163 636f 756e 7449          accountI
+0005c980: 6473 203d 2073 656c 662e 7361 6665 5f76  ds = self.safe_v
+0005c990: 616c 7565 2873 656c 662e 6f70 7469 6f6e  alue(self.option
+0005c9a0: 732c 2027 6163 636f 756e 7473 4279 4964  s, 'accountsById
+0005c9b0: 272c 207b 7d29 0a20 2020 2020 2020 2066  ', {}).        f
+0005c9c0: 726f 6d41 6363 6f75 6e74 203d 2073 656c  romAccount = sel
+0005c9d0: 662e 7361 6665 5f73 7472 696e 6728 6163  f.safe_string(ac
+0005c9e0: 636f 756e 7449 6473 2c20 6672 6f6d 4163  countIds, fromAc
+0005c9f0: 636f 756e 7449 642c 2066 726f 6d41 6363  countId, fromAcc
+0005ca00: 6f75 6e74 4964 290a 2020 2020 2020 2020  ountId).        
+0005ca10: 746f 4163 636f 756e 7420 3d20 7365 6c66  toAccount = self
+0005ca20: 2e73 6166 655f 7374 7269 6e67 2861 6363  .safe_string(acc
+0005ca30: 6f75 6e74 4964 732c 2074 6f41 6363 6f75  ountIds, toAccou
+0005ca40: 6e74 4964 2c20 746f 4163 636f 756e 7449  ntId, toAccountI
+0005ca50: 6429 0a20 2020 2020 2020 2072 6574 7572  d).        retur
+0005ca60: 6e20 7b0a 2020 2020 2020 2020 2020 2020  n {.            
+0005ca70: 2769 6e66 6f27 3a20 7472 616e 7366 6572  'info': transfer
+0005ca80: 2c0a 2020 2020 2020 2020 2020 2020 2769  ,.            'i
+0005ca90: 6427 3a20 7365 6c66 2e73 6166 655f 7374  d': self.safe_st
+0005caa0: 7269 6e67 5f32 2874 7261 6e73 6665 722c  ring_2(transfer,
+0005cab0: 2027 7472 616e 7366 6572 4964 272c 2027   'transferId', '
+0005cac0: 7472 616e 7366 6572 5f69 6427 292c 0a20  transfer_id'),. 
+0005cad0: 2020 2020 2020 2020 2020 2027 7469 6d65             'time
+0005cae0: 7374 616d 7027 3a20 7469 6d65 7374 616d  stamp': timestam
+0005caf0: 702c 0a20 2020 2020 2020 2020 2020 2027  p,.            '
+0005cb00: 6461 7465 7469 6d65 273a 2073 656c 662e  datetime': self.
+0005cb10: 6973 6f38 3630 3128 7469 6d65 7374 616d  iso8601(timestam
+0005cb20: 7029 2c0a 2020 2020 2020 2020 2020 2020  p),.            
+0005cb30: 2763 7572 7265 6e63 7927 3a20 7365 6c66  'currency': self
+0005cb40: 2e73 6166 655f 6375 7272 656e 6379 5f63  .safe_currency_c
+0005cb50: 6f64 6528 6375 7272 656e 6379 4964 2c20  ode(currencyId, 
+0005cb60: 6375 7272 656e 6379 292c 0a20 2020 2020  currency),.     
+0005cb70: 2020 2020 2020 2027 616d 6f75 6e74 273a         'amount':
+0005cb80: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
+0005cb90: 7228 7472 616e 7366 6572 2c20 2761 6d6f  r(transfer, 'amo
+0005cba0: 756e 7427 292c 0a20 2020 2020 2020 2020  unt'),.         
+0005cbb0: 2020 2027 6672 6f6d 4163 636f 756e 7427     'fromAccount'
+0005cbc0: 3a20 6672 6f6d 4163 636f 756e 742c 0a20  : fromAccount,. 
+0005cbd0: 2020 2020 2020 2020 2020 2027 746f 4163             'toAc
+0005cbe0: 636f 756e 7427 3a20 746f 4163 636f 756e  count': toAccoun
+0005cbf0: 742c 0a20 2020 2020 2020 2020 2020 2027  t,.            '
+0005cc00: 7374 6174 7573 273a 2073 656c 662e 7061  status': self.pa
+0005cc10: 7273 655f 7472 616e 7366 6572 5f73 7461  rse_transfer_sta
+0005cc20: 7475 7328 7365 6c66 2e73 6166 655f 7374  tus(self.safe_st
+0005cc30: 7269 6e67 2874 7261 6e73 6665 722c 2027  ring(transfer, '
+0005cc40: 7374 6174 7573 2729 292c 0a20 2020 2020  status')),.     
+0005cc50: 2020 207d 0a0a 2020 2020 6465 6620 6665     }..    def fe
+0005cc60: 7463 685f 6465 7269 7661 7469 7665 735f  tch_derivatives_
+0005cc70: 6d61 726b 6574 5f6c 6576 6572 6167 655f  market_leverage_
+0005cc80: 7469 6572 7328 7365 6c66 2c20 7379 6d62  tiers(self, symb
+0005cc90: 6f6c 3a20 7374 722c 2070 6172 616d 733d  ol: str, params=
+0005cca0: 7b7d 293a 0a20 2020 2020 2020 2073 656c  {}):.        sel
+0005ccb0: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
+0005ccc0: 0a20 2020 2020 2020 206d 6172 6b65 7420  .        market 
+0005ccd0: 3d20 7365 6c66 2e6d 6172 6b65 7428 7379  = self.market(sy
+0005cce0: 6d62 6f6c 290a 2020 2020 2020 2020 7265  mbol).        re
+0005ccf0: 7175 6573 7420 3d20 7b0a 2020 2020 2020  quest = {.      
+0005cd00: 2020 2020 2020 2773 796d 626f 6c27 3a20        'symbol': 
+0005cd10: 6d61 726b 6574 5b27 6964 275d 2c0a 2020  market['id'],.  
+0005cd20: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+0005cd30: 6966 206d 6172 6b65 745b 276c 696e 6561  if market['linea
+0005cd40: 7227 5d3a 0a20 2020 2020 2020 2020 2020  r']:.           
+0005cd50: 2072 6571 7565 7374 5b27 6361 7465 676f   request['catego
+0005cd60: 7279 275d 203d 2027 6c69 6e65 6172 270a  ry'] = 'linear'.
+0005cd70: 2020 2020 2020 2020 656c 6966 206d 6172          elif mar
+0005cd80: 6b65 745b 2769 6e76 6572 7365 275d 3a0a  ket['inverse']:.
+0005cd90: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0005cda0: 6573 745b 2763 6174 6567 6f72 7927 5d20  est['category'] 
+0005cdb0: 3d20 2769 6e76 6572 7365 270a 2020 2020  = 'inverse'.    
+0005cdc0: 2020 2020 7265 7370 6f6e 7365 203d 2073      response = s
+0005cdd0: 656c 662e 7075 626c 6963 4765 7456 354d  elf.publicGetV5M
+0005cde0: 6172 6b65 7452 6973 6b4c 696d 6974 2873  arketRiskLimit(s
+0005cdf0: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
+0005ce00: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
+0005ce10: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+0005ce20: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+0005ce30: 2020 2020 2020 2020 2022 7265 7443 6f64           "retCod
+0005ce40: 6522 3a20 302c 0a20 2020 2020 2020 2023  e": 0,.        #
+0005ce50: 2020 2020 2020 2020 2022 7265 744d 7367           "retMsg
+0005ce60: 223a 2022 4f4b 222c 0a20 2020 2020 2020  ": "OK",.       
+0005ce70: 2023 2020 2020 2020 2020 2022 7265 7375   #         "resu
+0005ce80: 6c74 223a 207b 0a20 2020 2020 2020 2023  lt": {.        #
+0005ce90: 2020 2020 2020 2020 2020 2020 2022 6361               "ca
+0005cea0: 7465 676f 7279 223a 2022 696e 7665 7273  tegory": "invers
+0005ceb0: 6522 2c0a 2020 2020 2020 2020 2320 2020  e",.        #   
+0005cec0: 2020 2020 2020 2020 2020 226c 6973 7422            "list"
+0005ced0: 3a20 5b0a 2020 2020 2020 2020 2320 2020  : [.        #   
+0005cee0: 2020 2020 2020 2020 2020 2020 2020 7b0a                {.
+0005cef0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005cf00: 2020 2020 2020 2020 2020 2020 2020 2269                "i
+0005cf10: 6422 3a20 312c 0a20 2020 2020 2020 2023  d": 1,.        #
+0005cf20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005cf30: 2020 2020 2022 7379 6d62 6f6c 223a 2022       "symbol": "
+0005cf40: 4254 4355 5344 222c 0a20 2020 2020 2020  BTCUSD",.       
+0005cf50: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0005cf60: 2020 2020 2020 2022 7269 736b 4c69 6d69         "riskLimi
+0005cf70: 7456 616c 7565 223a 2022 3135 3022 2c0a  tValue": "150",.
+0005cf80: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005cf90: 2020 2020 2020 2020 2020 2020 2020 226d                "m
+0005cfa0: 6169 6e74 656e 616e 6365 4d61 7267 696e  aintenanceMargin
+0005cfb0: 223a 2022 302e 3522 2c0a 2020 2020 2020  ": "0.5",.      
+0005cfc0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0005cfd0: 2020 2020 2020 2020 2269 6e69 7469 616c          "initial
+0005cfe0: 4d61 7267 696e 223a 2022 3122 2c0a 2020  Margin": "1",.  
+0005cff0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0005d000: 2020 2020 2020 2020 2020 2020 2269 734c              "isL
+0005d010: 6f77 6573 7452 6973 6b22 3a20 312c 0a20  owestRisk": 1,. 
+0005d020: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0005d030: 2020 2020 2020 2020 2020 2020 2022 6d61               "ma
+0005d040: 784c 6576 6572 6167 6522 3a20 2231 3030  xLeverage": "100
+0005d050: 2e30 3022 0a20 2020 2020 2020 2023 2020  .00".        #  
+0005d060: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+0005d070: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0005d080: 2020 2020 2020 2020 2e2e 2e2e 0a20 2020          .....   
+0005d090: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0005d0a0: 2020 205d 0a20 2020 2020 2020 2023 2020     ].        #  
+0005d0b0: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
+0005d0c0: 2020 2320 2020 2020 2020 2020 2272 6574    #         "ret
+0005d0d0: 4578 7449 6e66 6f22 3a20 7b7d 2c0a 2020  ExtInfo": {},.  
+0005d0e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0005d0f0: 2274 696d 6522 3a20 3136 3732 3035 3434  "time": 16720544
+0005d100: 3838 3031 300a 2020 2020 2020 2020 2320  88010.        # 
+0005d110: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
+0005d120: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+0005d130: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+0005d140: 2872 6573 706f 6e73 652c 2027 7265 7375  (response, 'resu
+0005d150: 6c74 2729 0a20 2020 2020 2020 2074 6965  lt').        tie
+0005d160: 7273 203d 2073 656c 662e 7361 6665 5f76  rs = self.safe_v
+0005d170: 616c 7565 2872 6573 756c 742c 2027 6c69  alue(result, 'li
+0005d180: 7374 2729 0a20 2020 2020 2020 2072 6574  st').        ret
+0005d190: 7572 6e20 7365 6c66 2e70 6172 7365 5f6d  urn self.parse_m
+0005d1a0: 6172 6b65 745f 6c65 7665 7261 6765 5f74  arket_leverage_t
+0005d1b0: 6965 7273 2874 6965 7273 2c20 6d61 726b  iers(tiers, mark
+0005d1c0: 6574 290a 0a20 2020 2064 6566 2066 6574  et)..    def fet
+0005d1d0: 6368 5f6d 6172 6b65 745f 6c65 7665 7261  ch_market_levera
+0005d1e0: 6765 5f74 6965 7273 2873 656c 662c 2073  ge_tiers(self, s
+0005d1f0: 796d 626f 6c3a 2073 7472 2c20 7061 7261  ymbol: str, para
+0005d200: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
+0005d210: 2222 220a 2020 2020 2020 2020 7265 7472  """.        retr
+0005d220: 6965 7665 2069 6e66 6f72 6d61 7469 6f6e  ieve information
+0005d230: 206f 6e20 7468 6520 6d61 7869 6d75 6d20   on the maximum 
+0005d240: 6c65 7665 7261 6765 2c20 616e 6420 6d61  leverage, and ma
+0005d250: 696e 7465 6e61 6e63 6520 6d61 7267 696e  intenance margin
+0005d260: 2066 6f72 2074 7261 6465 7320 6f66 2076   for trades of v
+0005d270: 6172 7969 6e67 2074 7261 6465 2073 697a  arying trade siz
+0005d280: 6573 2066 6f72 2061 2073 696e 676c 6520  es for a single 
+0005d290: 6d61 726b 6574 0a20 2020 2020 2020 2073  market.        s
+0005d2a0: 6565 2068 7474 7073 3a2f 2f62 7962 6974  ee https://bybit
+0005d2b0: 2d65 7863 6861 6e67 652e 6769 7468 7562  -exchange.github
+0005d2c0: 2e69 6f2f 646f 6373 2f76 352f 6d61 726b  .io/docs/v5/mark
+0005d2d0: 6574 2f72 6973 6b2d 6c69 6d69 740a 2020  et/risk-limit.  
+0005d2e0: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+0005d2f0: 2073 796d 626f 6c3a 2075 6e69 6669 6564   symbol: unified
+0005d300: 206d 6172 6b65 7420 7379 6d62 6f6c 0a20   market symbol. 
+0005d310: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
+0005d320: 6374 2070 6172 616d 733a 2065 7874 7261  ct params: extra
+0005d330: 2070 6172 616d 6574 6572 7320 7370 6563   parameters spec
+0005d340: 6966 6963 2074 6f20 7468 6520 6279 6269  ific to the bybi
+0005d350: 7420 6170 6920 656e 6470 6f69 6e74 0a20  t api endpoint. 
+0005d360: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
+0005d370: 6469 6374 3a20 6120 606c 6576 6572 6167  dict: a `leverag
+0005d380: 6520 7469 6572 7320 7374 7275 6374 7572  e tiers structur
+0005d390: 6520 3c68 7474 7073 3a2f 2f64 6f63 732e  e <https://docs.
+0005d3a0: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d6c  ccxt.com/#/?id=l
+0005d3b0: 6576 6572 6167 652d 7469 6572 732d 7374  everage-tiers-st
+0005d3c0: 7275 6374 7572 653e 600a 2020 2020 2020  ructure>`.      
+0005d3d0: 2020 2222 220a 2020 2020 2020 2020 7365    """.        se
+0005d3e0: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
+0005d3f0: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
+0005d400: 7420 3d20 7b7d 0a20 2020 2020 2020 206d  t = {}.        m
+0005d410: 6172 6b65 7420 3d20 4e6f 6e65 0a20 2020  arket = None.   
+0005d420: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
+0005d430: 6c66 2e6d 6172 6b65 7428 7379 6d62 6f6c  lf.market(symbol
+0005d440: 290a 2020 2020 2020 2020 6966 206d 6172  ).        if mar
+0005d450: 6b65 745b 2773 706f 7427 5d20 6f72 206d  ket['spot'] or m
+0005d460: 6172 6b65 745b 276f 7074 696f 6e27 5d3a  arket['option']:
+0005d470: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+0005d480: 7365 2042 6164 5265 7175 6573 7428 7365  se BadRequest(se
+0005d490: 6c66 2e69 6420 2b20 2720 6665 7463 684d  lf.id + ' fetchM
+0005d4a0: 6172 6b65 744c 6576 6572 6167 6554 6965  arketLeverageTie
+0005d4b0: 7273 2829 2073 796d 626f 6c20 646f 6573  rs() symbol does
+0005d4c0: 206e 6f74 2073 7570 706f 7274 206d 6172   not support mar
+0005d4d0: 6b65 7420 2720 2b20 7379 6d62 6f6c 290a  ket ' + symbol).
+0005d4e0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+0005d4f0: 2773 796d 626f 6c27 5d20 3d20 6d61 726b  'symbol'] = mark
+0005d500: 6574 5b27 6964 275d 0a20 2020 2020 2020  et['id'].       
+0005d510: 2072 6574 7572 6e20 7365 6c66 2e66 6574   return self.fet
+0005d520: 6368 5f64 6572 6976 6174 6976 6573 5f6d  ch_derivatives_m
+0005d530: 6172 6b65 745f 6c65 7665 7261 6765 5f74  arket_leverage_t
+0005d540: 6965 7273 2873 796d 626f 6c2c 2070 6172  iers(symbol, par
+0005d550: 616d 7329 0a0a 2020 2020 6465 6620 7061  ams)..    def pa
+0005d560: 7273 655f 6d61 726b 6574 5f6c 6576 6572  rse_market_lever
+0005d570: 6167 655f 7469 6572 7328 7365 6c66 2c20  age_tiers(self, 
+0005d580: 696e 666f 2c20 6d61 726b 6574 3d4e 6f6e  info, market=Non
+0005d590: 6529 3a0a 2020 2020 2020 2020 230a 2020  e):.        #.  
+0005d5a0: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
+0005d5b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0005d5c0: 2269 6422 3a20 312c 0a20 2020 2020 2020  "id": 1,.       
+0005d5d0: 2023 2020 2020 2020 2020 2022 7379 6d62   #         "symb
+0005d5e0: 6f6c 223a 2022 4254 4355 5344 222c 0a20  ol": "BTCUSD",. 
+0005d5f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0005d600: 2022 7269 736b 4c69 6d69 7456 616c 7565   "riskLimitValue
+0005d610: 223a 2022 3135 3022 2c0a 2020 2020 2020  ": "150",.      
+0005d620: 2020 2320 2020 2020 2020 2020 226d 6169    #         "mai
+0005d630: 6e74 656e 616e 6365 4d61 7267 696e 223a  ntenanceMargin":
+0005d640: 2022 302e 3522 2c0a 2020 2020 2020 2020   "0.5",.        
+0005d650: 2320 2020 2020 2020 2020 2269 6e69 7469  #         "initi
+0005d660: 616c 4d61 7267 696e 223a 2022 3122 2c0a  alMargin": "1",.
+0005d670: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005d680: 2020 2269 734c 6f77 6573 7452 6973 6b22    "isLowestRisk"
+0005d690: 3a20 312c 0a20 2020 2020 2020 2023 2020  : 1,.        #  
+0005d6a0: 2020 2020 2020 2022 6d61 784c 6576 6572         "maxLever
+0005d6b0: 6167 6522 3a20 2231 3030 2e30 3022 0a20  age": "100.00". 
+0005d6c0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+0005d6d0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+0005d6e0: 206d 696e 4e6f 7469 6f6e 616c 203d 2030   minNotional = 0
+0005d6f0: 0a20 2020 2020 2020 2074 6965 7273 203d  .        tiers =
+0005d700: 205b 5d0a 2020 2020 2020 2020 666f 7220   [].        for 
+0005d710: 6920 696e 2072 616e 6765 2830 2c20 6c65  i in range(0, le
+0005d720: 6e28 696e 666f 2929 3a0a 2020 2020 2020  n(info)):.      
+0005d730: 2020 2020 2020 6974 656d 203d 2069 6e66        item = inf
+0005d740: 6f5b 695d 0a20 2020 2020 2020 2020 2020  o[i].           
+0005d750: 206d 6178 4e6f 7469 6f6e 616c 203d 2073   maxNotional = s
+0005d760: 656c 662e 7361 6665 5f6e 756d 6265 7228  elf.safe_number(
+0005d770: 6974 656d 2c20 2772 6973 6b4c 696d 6974  item, 'riskLimit
+0005d780: 5661 6c75 6527 290a 2020 2020 2020 2020  Value').        
+0005d790: 2020 2020 7469 6572 732e 6170 7065 6e64      tiers.append
+0005d7a0: 287b 0a20 2020 2020 2020 2020 2020 2020  ({.             
+0005d7b0: 2020 2027 7469 6572 273a 2073 656c 662e     'tier': self.
+0005d7c0: 7375 6d28 692c 2031 292c 0a20 2020 2020  sum(i, 1),.     
+0005d7d0: 2020 2020 2020 2020 2020 2027 6375 7272             'curr
+0005d7e0: 656e 6379 273a 206d 6172 6b65 745b 2762  ency': market['b
+0005d7f0: 6173 6527 5d2c 0a20 2020 2020 2020 2020  ase'],.         
+0005d800: 2020 2020 2020 2027 6d69 6e4e 6f74 696f         'minNotio
+0005d810: 6e61 6c27 3a20 6d69 6e4e 6f74 696f 6e61  nal': minNotiona
+0005d820: 6c2c 0a20 2020 2020 2020 2020 2020 2020  l,.             
+0005d830: 2020 2027 6d61 784e 6f74 696f 6e61 6c27     'maxNotional'
+0005d840: 3a20 6d61 784e 6f74 696f 6e61 6c2c 0a20  : maxNotional,. 
+0005d850: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+0005d860: 6d61 696e 7465 6e61 6e63 654d 6172 6769  maintenanceMargi
+0005d870: 6e52 6174 6527 3a20 7365 6c66 2e73 6166  nRate': self.saf
+0005d880: 655f 6e75 6d62 6572 2869 7465 6d2c 2027  e_number(item, '
+0005d890: 6d61 696e 7465 6e61 6e63 654d 6172 6769  maintenanceMargi
+0005d8a0: 6e27 292c 0a20 2020 2020 2020 2020 2020  n'),.           
+0005d8b0: 2020 2020 2027 6d61 784c 6576 6572 6167       'maxLeverag
+0005d8c0: 6527 3a20 7365 6c66 2e73 6166 655f 6e75  e': self.safe_nu
+0005d8d0: 6d62 6572 2869 7465 6d2c 2027 6d61 784c  mber(item, 'maxL
+0005d8e0: 6576 6572 6167 6527 292c 0a20 2020 2020  everage'),.     
+0005d8f0: 2020 2020 2020 2020 2020 2027 696e 666f             'info
+0005d900: 273a 2069 7465 6d2c 0a20 2020 2020 2020  ': item,.       
+0005d910: 2020 2020 207d 290a 2020 2020 2020 2020       }).        
+0005d920: 2020 2020 6d69 6e4e 6f74 696f 6e61 6c20      minNotional 
+0005d930: 3d20 6d61 784e 6f74 696f 6e61 6c0a 2020  = maxNotional.  
+0005d940: 2020 2020 2020 7265 7475 726e 2074 6965        return tie
+0005d950: 7273 0a0a 2020 2020 6465 6620 7061 7273  rs..    def pars
+0005d960: 655f 7472 6164 696e 675f 6665 6528 7365  e_trading_fee(se
+0005d970: 6c66 2c20 6665 652c 206d 6172 6b65 743d  lf, fee, market=
+0005d980: 4e6f 6e65 293a 0a20 2020 2020 2020 2023  None):.        #
+0005d990: 0a20 2020 2020 2020 2023 2020 2020 207b  .        #     {
+0005d9a0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0005d9b0: 2020 2022 7379 6d62 6f6c 223a 2022 4554     "symbol": "ET
+0005d9c0: 4855 5344 5422 2c0a 2020 2020 2020 2020  HUSDT",.        
+0005d9d0: 2320 2020 2020 2020 2020 226d 616b 6572  #         "maker
+0005d9e0: 4665 6552 6174 6522 3a20 302e 3030 312c  FeeRate": 0.001,
+0005d9f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0005da00: 2020 2022 7461 6b65 7246 6565 5261 7465     "takerFeeRate
+0005da10: 223a 2030 2e30 3031 0a20 2020 2020 2020  ": 0.001.       
+0005da20: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
+0005da30: 2023 0a20 2020 2020 2020 206d 6172 6b65   #.        marke
+0005da40: 7449 6420 3d20 7365 6c66 2e73 6166 655f  tId = self.safe_
+0005da50: 7374 7269 6e67 2866 6565 2c20 2773 796d  string(fee, 'sym
+0005da60: 626f 6c27 290a 2020 2020 2020 2020 7379  bol').        sy
+0005da70: 6d62 6f6c 203d 2073 656c 662e 7361 6665  mbol = self.safe
+0005da80: 5f73 796d 626f 6c28 6d61 726b 6574 4964  _symbol(marketId
+0005da90: 2c20 4e6f 6e65 2c20 4e6f 6e65 2c20 2763  , None, None, 'c
+0005daa0: 6f6e 7472 6163 7427 290a 2020 2020 2020  ontract').      
+0005dab0: 2020 7265 7475 726e 207b 0a20 2020 2020    return {.     
+0005dac0: 2020 2020 2020 2027 696e 666f 273a 2066         'info': f
+0005dad0: 6565 2c0a 2020 2020 2020 2020 2020 2020  ee,.            
+0005dae0: 2773 796d 626f 6c27 3a20 7379 6d62 6f6c  'symbol': symbol
+0005daf0: 2c0a 2020 2020 2020 2020 2020 2020 276d  ,.            'm
+0005db00: 616b 6572 273a 2073 656c 662e 7361 6665  aker': self.safe
+0005db10: 5f6e 756d 6265 7228 6665 652c 2027 6d61  _number(fee, 'ma
+0005db20: 6b65 7246 6565 5261 7465 2729 2c0a 2020  kerFeeRate'),.  
+0005db30: 2020 2020 2020 2020 2020 2774 616b 6572            'taker
+0005db40: 273a 2073 656c 662e 7361 6665 5f6e 756d  ': self.safe_num
+0005db50: 6265 7228 6665 652c 2027 7461 6b65 7246  ber(fee, 'takerF
+0005db60: 6565 5261 7465 2729 2c0a 2020 2020 2020  eeRate'),.      
+0005db70: 2020 7d0a 0a20 2020 2064 6566 2066 6574    }..    def fet
+0005db80: 6368 5f74 7261 6469 6e67 5f66 6565 2873  ch_trading_fee(s
+0005db90: 656c 662c 2073 796d 626f 6c3a 2073 7472  elf, symbol: str
+0005dba0: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
+0005dbb0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+0005dbc0: 2020 6665 7463 6820 7468 6520 7472 6164    fetch the trad
+0005dbd0: 696e 6720 6665 6573 2066 6f72 2061 206d  ing fees for a m
+0005dbe0: 6172 6b65 740a 2020 2020 2020 2020 7365  arket.        se
+0005dbf0: 6520 6874 7470 733a 2f2f 6279 6269 742d  e https://bybit-
+0005dc00: 6578 6368 616e 6765 2e67 6974 6875 622e  exchange.github.
+0005dc10: 696f 2f64 6f63 732f 7635 2f61 6363 6f75  io/docs/v5/accou
+0005dc20: 6e74 2f66 6565 2d72 6174 650a 2020 2020  nt/fee-rate.    
+0005dc30: 2020 2020 3a70 6172 616d 2073 7472 2073      :param str s
+0005dc40: 796d 626f 6c3a 2075 6e69 6669 6564 206d  ymbol: unified m
+0005dc50: 6172 6b65 7420 7379 6d62 6f6c 0a20 2020  arket symbol.   
+0005dc60: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
+0005dc70: 2070 6172 616d 733a 2065 7874 7261 2070   params: extra p
+0005dc80: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
+0005dc90: 6963 2074 6f20 7468 6520 6279 6269 7420  ic to the bybit 
+0005dca0: 6170 6920 656e 6470 6f69 6e74 0a20 2020  api endpoint.   
+0005dcb0: 2020 2020 203a 7265 7475 726e 7320 6469       :returns di
+0005dcc0: 6374 3a20 6120 6066 6565 2073 7472 7563  ct: a `fee struc
+0005dcd0: 7475 7265 203c 6874 7470 733a 2f2f 646f  ture <https://do
+0005dce0: 6373 2e63 6378 742e 636f 6d2f 232f 3f69  cs.ccxt.com/#/?i
+0005dcf0: 643d 6665 652d 7374 7275 6374 7572 653e  d=fee-structure>
+0005dd00: 600a 2020 2020 2020 2020 2222 220a 2020  `.        """.  
+0005dd10: 2020 2020 2020 7365 6c66 2e6c 6f61 645f        self.load_
+0005dd20: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
+0005dd30: 2020 6d61 726b 6574 203d 2073 656c 662e    market = self.
+0005dd40: 6d61 726b 6574 2873 796d 626f 6c29 0a20  market(symbol). 
+0005dd50: 2020 2020 2020 2069 6620 6d61 726b 6574         if market
+0005dd60: 5b27 7370 6f74 275d 3a0a 2020 2020 2020  ['spot']:.      
+0005dd70: 2020 2020 2020 7261 6973 6520 4e6f 7453        raise NotS
+0005dd80: 7570 706f 7274 6564 2873 656c 662e 6964  upported(self.id
+0005dd90: 202b 2027 2066 6574 6368 5472 6164 696e   + ' fetchTradin
+0005dda0: 6746 6565 2829 2069 7320 6e6f 7420 7375  gFee() is not su
+0005ddb0: 7070 6f72 7465 6420 666f 7220 7370 6f74  pported for spot
+0005ddc0: 206d 6172 6b65 7427 290a 2020 2020 2020   market').      
+0005ddd0: 2020 7265 7175 6573 7420 3d20 7b0a 2020    request = {.  
+0005dde0: 2020 2020 2020 2020 2020 2773 796d 626f            'symbo
+0005ddf0: 6c27 3a20 6d61 726b 6574 5b27 6964 275d  l': market['id']
+0005de00: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
+0005de10: 2020 2020 7265 7370 6f6e 7365 203d 2073      response = s
+0005de20: 656c 662e 7072 6976 6174 6547 6574 5635  elf.privateGetV5
+0005de30: 4163 636f 756e 7446 6565 5261 7465 2873  AccountFeeRate(s
+0005de40: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
+0005de50: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
+0005de60: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+0005de70: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+0005de80: 2020 2020 2020 2020 2022 7265 7443 6f64           "retCod
+0005de90: 6522 3a20 302c 0a20 2020 2020 2020 2023  e": 0,.        #
+0005dea0: 2020 2020 2020 2020 2022 7265 744d 7367           "retMsg
+0005deb0: 223a 2022 4f4b 222c 0a20 2020 2020 2020  ": "OK",.       
+0005dec0: 2023 2020 2020 2020 2020 2022 7265 7375   #         "resu
+0005ded0: 6c74 223a 207b 0a20 2020 2020 2020 2023  lt": {.        #
+0005dee0: 2020 2020 2020 2020 2020 2020 2022 6c69               "li
+0005def0: 7374 223a 205b 0a20 2020 2020 2020 2023  st": [.        #
+0005df00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005df10: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+0005df20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005df30: 2022 7379 6d62 6f6c 223a 2022 4554 4855   "symbol": "ETHU
+0005df40: 5344 5422 2c0a 2020 2020 2020 2020 2320  SDT",.        # 
+0005df50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005df60: 2020 2020 2274 616b 6572 4665 6552 6174      "takerFeeRat
+0005df70: 6522 3a20 2230 2e30 3030 3622 2c0a 2020  e": "0.0006",.  
+0005df80: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0005df90: 2020 2020 2020 2020 2020 2020 226d 616b              "mak
+0005dfa0: 6572 4665 6552 6174 6522 3a20 2230 2e30  erFeeRate": "0.0
+0005dfb0: 3030 3122 0a20 2020 2020 2020 2023 2020  001".        #  
+0005dfc0: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+0005dfd0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0005dfe0: 2020 2020 2020 205d 0a20 2020 2020 2020         ].       
+0005dff0: 2023 2020 2020 2020 2020 207d 2c0a 2020   #         },.  
+0005e000: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0005e010: 2272 6574 4578 7449 6e66 6f22 3a20 7b7d  "retExtInfo": {}
+0005e020: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0005e030: 2020 2020 2274 696d 6522 3a20 3136 3736      "time": 1676
+0005e040: 3336 3034 3132 3537 360a 2020 2020 2020  360412576.      
+0005e050: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
+0005e060: 2020 230a 2020 2020 2020 2020 7265 7375    #.        resu
+0005e070: 6c74 203d 2073 656c 662e 7361 6665 5f76  lt = self.safe_v
+0005e080: 616c 7565 2872 6573 706f 6e73 652c 2027  alue(response, '
+0005e090: 7265 7375 6c74 272c 207b 7d29 0a20 2020  result', {}).   
+0005e0a0: 2020 2020 2066 6565 7320 3d20 7365 6c66       fees = self
+0005e0b0: 2e73 6166 655f 7661 6c75 6528 7265 7375  .safe_value(resu
+0005e0c0: 6c74 2c20 276c 6973 7427 2c20 5b5d 290a  lt, 'list', []).
+0005e0d0: 2020 2020 2020 2020 6669 7273 7420 3d20          first = 
+0005e0e0: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
+0005e0f0: 6665 6573 2c20 302c 207b 7d29 0a20 2020  fees, 0, {}).   
+0005e100: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+0005e110: 2e70 6172 7365 5f74 7261 6469 6e67 5f66  .parse_trading_f
+0005e120: 6565 2866 6972 7374 290a 0a20 2020 2064  ee(first)..    d
+0005e130: 6566 2066 6574 6368 5f74 7261 6469 6e67  ef fetch_trading
+0005e140: 5f66 6565 7328 7365 6c66 2c20 7061 7261  _fees(self, para
+0005e150: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
+0005e160: 2222 220a 2020 2020 2020 2020 6665 7463  """.        fetc
+0005e170: 6820 7468 6520 7472 6164 696e 6720 6665  h the trading fe
+0005e180: 6573 2066 6f72 206d 756c 7469 706c 6520  es for multiple 
+0005e190: 6d61 726b 6574 730a 2020 2020 2020 2020  markets.        
+0005e1a0: 7365 6520 6874 7470 733a 2f2f 6279 6269  see https://bybi
+0005e1b0: 742d 6578 6368 616e 6765 2e67 6974 6875  t-exchange.githu
+0005e1c0: 622e 696f 2f64 6f63 732f 7635 2f61 6363  b.io/docs/v5/acc
+0005e1d0: 6f75 6e74 2f66 6565 2d72 6174 650a 2020  ount/fee-rate.  
+0005e1e0: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
+0005e1f0: 7420 7061 7261 6d73 3a20 6578 7472 6120  t params: extra 
+0005e200: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
+0005e210: 6669 6320 746f 2074 6865 2062 7962 6974  fic to the bybit
+0005e220: 2061 7069 2065 6e64 706f 696e 740a 2020   api endpoint.  
+0005e230: 2020 2020 2020 3a72 6574 7572 6e73 2064        :returns d
+0005e240: 6963 743a 2061 2064 6963 7469 6f6e 6172  ict: a dictionar
+0005e250: 7920 6f66 2060 6665 6520 7374 7275 6374  y of `fee struct
+0005e260: 7572 6573 203c 6874 7470 733a 2f2f 646f  ures <https://do
+0005e270: 6373 2e63 6378 742e 636f 6d2f 232f 3f69  cs.ccxt.com/#/?i
+0005e280: 643d 6665 652d 7374 7275 6374 7572 653e  d=fee-structure>
+0005e290: 6020 696e 6465 7865 6420 6279 206d 6172  ` indexed by mar
+0005e2a0: 6b65 7420 7379 6d62 6f6c 730a 2020 2020  ket symbols.    
+0005e2b0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+0005e2c0: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
+0005e2d0: 7328 290a 2020 2020 2020 2020 7479 7065  s().        type
+0005e2e0: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+0005e2f0: 7479 7065 2c20 7061 7261 6d73 203d 2073  type, params = s
+0005e300: 656c 662e 6861 6e64 6c65 5f6f 7074 696f  elf.handle_optio
+0005e310: 6e5f 616e 645f 7061 7261 6d73 2870 6172  n_and_params(par
+0005e320: 616d 732c 2027 6665 7463 6854 7261 6469  ams, 'fetchTradi
+0005e330: 6e67 4665 6573 272c 2027 7479 7065 272c  ngFees', 'type',
+0005e340: 2027 6675 7475 7265 2729 0a20 2020 2020   'future').     
+0005e350: 2020 2069 6620 7479 7065 203d 3d20 2773     if type == 's
+0005e360: 706f 7427 3a0a 2020 2020 2020 2020 2020  pot':.          
+0005e370: 2020 7261 6973 6520 4e6f 7453 7570 706f    raise NotSuppo
+0005e380: 7274 6564 2873 656c 662e 6964 202b 2027  rted(self.id + '
+0005e390: 2066 6574 6368 5472 6164 696e 6746 6565   fetchTradingFee
+0005e3a0: 7328 2920 6973 206e 6f74 2073 7570 706f  s() is not suppo
+0005e3b0: 7274 6564 2066 6f72 2073 706f 7420 6d61  rted for spot ma
+0005e3c0: 726b 6574 2729 0a20 2020 2020 2020 2072  rket').        r
+0005e3d0: 6573 706f 6e73 6520 3d20 7365 6c66 2e70  esponse = self.p
+0005e3e0: 7269 7661 7465 4765 7456 3541 6363 6f75  rivateGetV5Accou
+0005e3f0: 6e74 4665 6552 6174 6528 7061 7261 6d73  ntFeeRate(params
+0005e400: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
+0005e410: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
+0005e420: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
+0005e430: 6574 436f 6465 223a 2030 2c0a 2020 2020  etCode": 0,.    
+0005e440: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
+0005e450: 6574 4d73 6722 3a20 224f 4b22 2c0a 2020  etMsg": "OK",.  
+0005e460: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0005e470: 2272 6573 756c 7422 3a20 7b0a 2020 2020  "result": {.    
+0005e480: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0005e490: 2020 226c 6973 7422 3a20 5b0a 2020 2020    "list": [.    
+0005e4a0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0005e4b0: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
+0005e4c0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0005e4d0: 2020 2020 2020 2273 796d 626f 6c22 3a20        "symbol": 
+0005e4e0: 2245 5448 5553 4454 222c 0a20 2020 2020  "ETHUSDT",.     
+0005e4f0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0005e500: 2020 2020 2020 2020 2022 7461 6b65 7246           "takerF
+0005e510: 6565 5261 7465 223a 2022 302e 3030 3036  eeRate": "0.0006
+0005e520: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0005e530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005e540: 2022 6d61 6b65 7246 6565 5261 7465 223a   "makerFeeRate":
+0005e550: 2022 302e 3030 3031 220a 2020 2020 2020   "0.0001".      
+0005e560: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0005e570: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
+0005e580: 2020 2020 2020 2020 2020 2020 5d0a 2020              ].  
+0005e590: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0005e5a0: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
+0005e5b0: 2020 2020 2022 7265 7445 7874 496e 666f       "retExtInfo
+0005e5c0: 223a 207b 7d2c 0a20 2020 2020 2020 2023  ": {},.        #
+0005e5d0: 2020 2020 2020 2020 2022 7469 6d65 223a           "time":
+0005e5e0: 2031 3637 3633 3630 3431 3235 3736 0a20   1676360412576. 
+0005e5f0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+0005e600: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+0005e610: 2066 6565 7320 3d20 7365 6c66 2e73 6166   fees = self.saf
+0005e620: 655f 7661 6c75 6528 7265 7370 6f6e 7365  e_value(response
+0005e630: 2c20 2772 6573 756c 7427 2c20 7b7d 290a  , 'result', {}).
+0005e640: 2020 2020 2020 2020 6665 6573 203d 2073          fees = s
+0005e650: 656c 662e 7361 6665 5f76 616c 7565 2866  elf.safe_value(f
+0005e660: 6565 732c 2027 6c69 7374 272c 205b 5d29  ees, 'list', [])
+0005e670: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
+0005e680: 3d20 7b7d 0a20 2020 2020 2020 2066 6f72  = {}.        for
+0005e690: 2069 2069 6e20 7261 6e67 6528 302c 206c   i in range(0, l
+0005e6a0: 656e 2866 6565 7329 293a 0a20 2020 2020  en(fees)):.     
+0005e6b0: 2020 2020 2020 2066 6565 203d 2073 656c         fee = sel
+0005e6c0: 662e 7061 7273 655f 7472 6164 696e 675f  f.parse_trading_
+0005e6d0: 6665 6528 6665 6573 5b69 5d29 0a20 2020  fee(fees[i]).   
+0005e6e0: 2020 2020 2020 2020 2073 796d 626f 6c20           symbol 
+0005e6f0: 3d20 6665 655b 2773 796d 626f 6c27 5d0a  = fee['symbol'].
+0005e700: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+0005e710: 6c74 5b73 796d 626f 6c5d 203d 2066 6565  lt[symbol] = fee
+0005e720: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0005e730: 7265 7375 6c74 0a0a 2020 2020 6465 6620  result..    def 
+0005e740: 7369 676e 2873 656c 662c 2070 6174 682c  sign(self, path,
+0005e750: 2061 7069 3d27 7075 626c 6963 272c 206d   api='public', m
+0005e760: 6574 686f 643d 2747 4554 272c 2070 6172  ethod='GET', par
+0005e770: 616d 733d 7b7d 2c20 6865 6164 6572 733d  ams={}, headers=
+0005e780: 4e6f 6e65 2c20 626f 6479 3d4e 6f6e 6529  None, body=None)
+0005e790: 3a0a 2020 2020 2020 2020 7572 6c20 3d20  :.        url = 
+0005e7a0: 7365 6c66 2e69 6d70 6c6f 6465 5f68 6f73  self.implode_hos
+0005e7b0: 746e 616d 6528 7365 6c66 2e75 726c 735b  tname(self.urls[
+0005e7c0: 2761 7069 275d 5b61 7069 5d29 202b 2027  'api'][api]) + '
+0005e7d0: 2f27 202b 2070 6174 680a 2020 2020 2020  /' + path.      
+0005e7e0: 2020 6966 2061 7069 203d 3d20 2770 7562    if api == 'pub
+0005e7f0: 6c69 6327 3a0a 2020 2020 2020 2020 2020  lic':.          
+0005e800: 2020 6966 2070 6172 616d 733a 0a20 2020    if params:.   
+0005e810: 2020 2020 2020 2020 2020 2020 2075 726c               url
+0005e820: 202b 3d20 273f 2720 2b20 7365 6c66 2e72   += '?' + self.r
+0005e830: 6177 656e 636f 6465 2870 6172 616d 7329  awencode(params)
+0005e840: 0a20 2020 2020 2020 2065 6c69 6620 6170  .        elif ap
+0005e850: 6920 3d3d 2027 7072 6976 6174 6527 3a0a  i == 'private':.
+0005e860: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0005e870: 2e63 6865 636b 5f72 6571 7569 7265 645f  .check_required_
+0005e880: 6372 6564 656e 7469 616c 7328 290a 2020  credentials().  
+0005e890: 2020 2020 2020 2020 2020 6973 4f70 656e            isOpen
+0005e8a0: 6170 6920 3d20 7572 6c2e 6669 6e64 2827  api = url.find('
+0005e8b0: 6f70 656e 6170 6927 2920 3e3d 2030 0a20  openapi') >= 0. 
+0005e8c0: 2020 2020 2020 2020 2020 2069 7356 3355             isV3U
+0005e8d0: 6e69 6669 6564 4d61 7267 696e 203d 2075  nifiedMargin = u
+0005e8e0: 726c 2e66 696e 6428 2775 6e69 6669 6564  rl.find('unified
+0005e8f0: 2f76 3327 2920 3e3d 2030 0a20 2020 2020  /v3') >= 0.     
+0005e900: 2020 2020 2020 2069 7356 3343 6f6e 7472         isV3Contr
+0005e910: 6163 7420 3d20 7572 6c2e 6669 6e64 2827  act = url.find('
+0005e920: 636f 6e74 7261 6374 2f76 3327 2920 3e3d  contract/v3') >=
+0005e930: 2030 0a20 2020 2020 2020 2020 2020 2069   0.            i
+0005e940: 7356 3555 6e69 6669 6564 4163 636f 756e  sV5UnifiedAccoun
+0005e950: 7420 3d20 7572 6c2e 6669 6e64 2827 7635  t = url.find('v5
+0005e960: 2729 203e 3d20 300a 2020 2020 2020 2020  ') >= 0.        
+0005e970: 2020 2020 7469 6d65 7374 616d 7020 3d20      timestamp = 
+0005e980: 7374 7228 7365 6c66 2e6e 6f6e 6365 2829  str(self.nonce()
+0005e990: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+0005e9a0: 2069 734f 7065 6e61 7069 3a0a 2020 2020   isOpenapi:.    
+0005e9b0: 2020 2020 2020 2020 2020 2020 6966 2070              if p
+0005e9c0: 6172 616d 733a 0a20 2020 2020 2020 2020  arams:.         
+0005e9d0: 2020 2020 2020 2020 2020 2062 6f64 7920             body 
+0005e9e0: 3d20 7365 6c66 2e6a 736f 6e28 7061 7261  = self.json(para
+0005e9f0: 6d73 290a 2020 2020 2020 2020 2020 2020  ms).            
+0005ea00: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0005ea10: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0005ea20: 7365 6c66 2066 6978 2066 6f72 2050 4850  self fix for PHP
+0005ea30: 2069 7320 7265 7175 6972 6564 206f 7468   is required oth
+0005ea40: 6572 7769 7365 2069 7420 6765 6e65 7261  erwise it genera
+0005ea50: 7465 730a 2020 2020 2020 2020 2020 2020  tes.            
+0005ea60: 2020 2020 2020 2020 2320 275b 5d27 206f          # '[]' o
+0005ea70: 6e20 656d 7074 7920 6172 7261 7973 2065  n empty arrays e
+0005ea80: 7665 6e20 7768 656e 2066 6f72 6365 6420  ven when forced 
+0005ea90: 746f 2075 7365 206f 626a 6563 7473 0a20  to use objects. 
+0005eaa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005eab0: 2020 2062 6f64 7920 3d20 277b 7d27 0a20     body = '{}'. 
+0005eac0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+0005ead0: 6179 6c6f 6164 203d 2074 696d 6573 7461  ayload = timesta
+0005eae0: 6d70 202b 2073 656c 662e 6170 694b 6579  mp + self.apiKey
+0005eaf0: 202b 2062 6f64 790a 2020 2020 2020 2020   + body.        
+0005eb00: 2020 2020 2020 2020 7369 676e 6174 7572          signatur
+0005eb10: 6520 3d20 7365 6c66 2e68 6d61 6328 7365  e = self.hmac(se
+0005eb20: 6c66 2e65 6e63 6f64 6528 7061 796c 6f61  lf.encode(payloa
+0005eb30: 6429 2c20 7365 6c66 2e65 6e63 6f64 6528  d), self.encode(
+0005eb40: 7365 6c66 2e73 6563 7265 7429 2c20 6861  self.secret), ha
+0005eb50: 7368 6c69 622e 7368 6132 3536 2c20 2768  shlib.sha256, 'h
+0005eb60: 6578 2729 0a20 2020 2020 2020 2020 2020  ex').           
+0005eb70: 2020 2020 2068 6561 6465 7273 203d 207b       headers = {
+0005eb80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0005eb90: 2020 2020 2027 436f 6e74 656e 742d 5479       'Content-Ty
+0005eba0: 7065 273a 2027 6170 706c 6963 6174 696f  pe': 'applicatio
+0005ebb0: 6e2f 6a73 6f6e 272c 0a20 2020 2020 2020  n/json',.       
+0005ebc0: 2020 2020 2020 2020 2020 2020 2027 582d               'X-
+0005ebd0: 4241 5049 2d41 5049 2d4b 4559 273a 2073  BAPI-API-KEY': s
+0005ebe0: 656c 662e 6170 694b 6579 2c0a 2020 2020  elf.apiKey,.    
+0005ebf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005ec00: 2758 2d42 4150 492d 5449 4d45 5354 414d  'X-BAPI-TIMESTAM
+0005ec10: 5027 3a20 7469 6d65 7374 616d 702c 0a20  P': timestamp,. 
+0005ec20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005ec30: 2020 2027 582d 4241 5049 2d53 4947 4e27     'X-BAPI-SIGN'
+0005ec40: 3a20 7369 676e 6174 7572 652c 0a20 2020  : signature,.   
+0005ec50: 2020 2020 2020 2020 2020 2020 207d 0a20               }. 
+0005ec60: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+0005ec70: 6973 5633 556e 6966 6965 644d 6172 6769  isV3UnifiedMargi
+0005ec80: 6e20 6f72 2069 7356 3343 6f6e 7472 6163  n or isV3Contrac
+0005ec90: 7420 6f72 2069 7356 3555 6e69 6669 6564  t or isV5Unified
+0005eca0: 4163 636f 756e 743a 0a20 2020 2020 2020  Account:.       
+0005ecb0: 2020 2020 2020 2020 2068 6561 6465 7273           headers
+0005ecc0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+0005ecd0: 2020 2020 2020 2020 2027 436f 6e74 656e           'Conten
+0005ece0: 742d 5479 7065 273a 2027 6170 706c 6963  t-Type': 'applic
+0005ecf0: 6174 696f 6e2f 6a73 6f6e 272c 0a20 2020  ation/json',.   
+0005ed00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005ed10: 2027 582d 4241 5049 2d41 5049 2d4b 4559   'X-BAPI-API-KEY
+0005ed20: 273a 2073 656c 662e 6170 694b 6579 2c0a  ': self.apiKey,.
+0005ed30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005ed40: 2020 2020 2758 2d42 4150 492d 5449 4d45      'X-BAPI-TIME
+0005ed50: 5354 414d 5027 3a20 7469 6d65 7374 616d  STAMP': timestam
+0005ed60: 702c 0a20 2020 2020 2020 2020 2020 2020  p,.             
+0005ed70: 2020 2020 2020 2027 582d 4241 5049 2d52         'X-BAPI-R
+0005ed80: 4543 562d 5749 4e44 4f57 273a 2073 7472  ECV-WINDOW': str
+0005ed90: 2873 656c 662e 6f70 7469 6f6e 735b 2772  (self.options['r
+0005eda0: 6563 7657 696e 646f 7727 5d29 2c0a 2020  ecvWindow']),.  
+0005edb0: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
+0005edc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005edd0: 6966 2069 7356 3355 6e69 6669 6564 4d61  if isV3UnifiedMa
+0005ede0: 7267 696e 206f 7220 6973 5633 436f 6e74  rgin or isV3Cont
+0005edf0: 7261 6374 3a0a 2020 2020 2020 2020 2020  ract:.          
+0005ee00: 2020 2020 2020 2020 2020 6865 6164 6572            header
+0005ee10: 735b 2758 2d42 4150 492d 5349 474e 2d54  s['X-BAPI-SIGN-T
+0005ee20: 5950 4527 5d20 3d20 2732 270a 2020 2020  YPE'] = '2'.    
+0005ee30: 2020 2020 2020 2020 2020 2020 7175 6572              quer
+0005ee40: 7920 3d20 7365 6c66 2e65 7874 656e 6428  y = self.extend(
+0005ee50: 7b7d 2c20 7061 7261 6d73 290a 2020 2020  {}, params).    
+0005ee60: 2020 2020 2020 2020 2020 2020 7175 6572              quer
+0005ee70: 7945 6e63 6f64 6564 203d 2073 656c 662e  yEncoded = self.
+0005ee80: 7261 7765 6e63 6f64 6528 7175 6572 7929  rawencode(query)
+0005ee90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0005eea0: 2061 7574 685f 6261 7365 203d 2073 7472   auth_base = str
+0005eeb0: 2874 696d 6573 7461 6d70 2920 2b20 7365  (timestamp) + se
+0005eec0: 6c66 2e61 7069 4b65 7920 2b20 7374 7228  lf.apiKey + str(
+0005eed0: 7365 6c66 2e6f 7074 696f 6e73 5b27 7265  self.options['re
+0005eee0: 6376 5769 6e64 6f77 275d 290a 2020 2020  cvWindow']).    
+0005eef0: 2020 2020 2020 2020 2020 2020 6175 7468              auth
+0005ef00: 4675 6c6c 203d 204e 6f6e 650a 2020 2020  Full = None.    
+0005ef10: 2020 2020 2020 2020 2020 2020 6966 206d              if m
+0005ef20: 6574 686f 6420 3d3d 2027 504f 5354 273a  ethod == 'POST':
+0005ef30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0005ef40: 2020 2020 2062 6f64 7920 3d20 7365 6c66       body = self
+0005ef50: 2e6a 736f 6e28 7175 6572 7929 0a20 2020  .json(query).   
+0005ef60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005ef70: 2061 7574 6846 756c 6c20 3d20 6175 7468   authFull = auth
+0005ef80: 5f62 6173 6520 2b20 626f 6479 0a20 2020  _base + body.   
+0005ef90: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0005efa0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0005efb0: 2020 2020 2020 2061 7574 6846 756c 6c20         authFull 
+0005efc0: 3d20 6175 7468 5f62 6173 6520 2b20 7175  = auth_base + qu
+0005efd0: 6572 7945 6e63 6f64 6564 0a20 2020 2020  eryEncoded.     
+0005efe0: 2020 2020 2020 2020 2020 2020 2020 2075                 u
+0005eff0: 726c 202b 3d20 273f 2720 2b20 7365 6c66  rl += '?' + self
+0005f000: 2e72 6177 656e 636f 6465 2871 7565 7279  .rawencode(query
+0005f010: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0005f020: 2020 7369 676e 6174 7572 6520 3d20 4e6f    signature = No
+0005f030: 6e65 0a20 2020 2020 2020 2020 2020 2020  ne.             
+0005f040: 2020 2069 6620 7365 6c66 2e73 6563 7265     if self.secre
+0005f050: 742e 6669 6e64 2827 5052 4956 4154 4520  t.find('PRIVATE 
+0005f060: 4b45 5927 2920 3e20 2d31 3a0a 2020 2020  KEY') > -1:.    
+0005f070: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005f080: 7369 676e 6174 7572 6520 3d20 7365 6c66  signature = self
+0005f090: 2e72 7361 2861 7574 6846 756c 6c2c 2073  .rsa(authFull, s
+0005f0a0: 656c 662e 7365 6372 6574 2c20 2773 6861  elf.secret, 'sha
+0005f0b0: 3235 3627 290a 2020 2020 2020 2020 2020  256').          
+0005f0c0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0005f0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005f0e0: 7369 676e 6174 7572 6520 3d20 7365 6c66  signature = self
+0005f0f0: 2e68 6d61 6328 7365 6c66 2e65 6e63 6f64  .hmac(self.encod
+0005f100: 6528 6175 7468 4675 6c6c 292c 2073 656c  e(authFull), sel
+0005f110: 662e 656e 636f 6465 2873 656c 662e 7365  f.encode(self.se
+0005f120: 6372 6574 292c 2068 6173 686c 6962 2e73  cret), hashlib.s
+0005f130: 6861 3235 3629 0a20 2020 2020 2020 2020  ha256).         
+0005f140: 2020 2020 2020 2068 6561 6465 7273 5b27         headers['
+0005f150: 582d 4241 5049 2d53 4947 4e27 5d20 3d20  X-BAPI-SIGN'] = 
+0005f160: 7369 676e 6174 7572 650a 2020 2020 2020  signature.      
+0005f170: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0005f180: 2020 2020 2020 2020 2020 2020 7175 6572              quer
+0005f190: 7920 3d20 7365 6c66 2e65 7874 656e 6428  y = self.extend(
+0005f1a0: 7061 7261 6d73 2c20 7b0a 2020 2020 2020  params, {.      
+0005f1b0: 2020 2020 2020 2020 2020 2020 2020 2761                'a
+0005f1c0: 7069 5f6b 6579 273a 2073 656c 662e 6170  pi_key': self.ap
+0005f1d0: 694b 6579 2c0a 2020 2020 2020 2020 2020  iKey,.          
+0005f1e0: 2020 2020 2020 2020 2020 2772 6563 765f            'recv_
+0005f1f0: 7769 6e64 6f77 273a 2073 656c 662e 6f70  window': self.op
+0005f200: 7469 6f6e 735b 2772 6563 7657 696e 646f  tions['recvWindo
+0005f210: 7727 5d2c 0a20 2020 2020 2020 2020 2020  w'],.           
+0005f220: 2020 2020 2020 2020 2027 7469 6d65 7374           'timest
+0005f230: 616d 7027 3a20 7469 6d65 7374 616d 702c  amp': timestamp,
+0005f240: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0005f250: 207d 290a 2020 2020 2020 2020 2020 2020   }).            
+0005f260: 2020 2020 736f 7274 6564 5175 6572 7920      sortedQuery 
+0005f270: 3d20 7365 6c66 2e6b 6579 736f 7274 2871  = self.keysort(q
+0005f280: 7565 7279 290a 2020 2020 2020 2020 2020  uery).          
+0005f290: 2020 2020 2020 6175 7468 203d 2073 656c        auth = sel
+0005f2a0: 662e 7261 7765 6e63 6f64 6528 736f 7274  f.rawencode(sort
+0005f2b0: 6564 5175 6572 7929 0a20 2020 2020 2020  edQuery).       
+0005f2c0: 2020 2020 2020 2020 2073 6967 6e61 7475           signatu
+0005f2d0: 7265 203d 204e 6f6e 650a 2020 2020 2020  re = None.      
+0005f2e0: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
+0005f2f0: 662e 7365 6372 6574 2e66 696e 6428 2750  f.secret.find('P
+0005f300: 5249 5641 5445 204b 4559 2729 203e 202d  RIVATE KEY') > -
+0005f310: 313a 0a20 2020 2020 2020 2020 2020 2020  1:.             
+0005f320: 2020 2020 2020 2073 6967 6e61 7475 7265         signature
+0005f330: 203d 2073 656c 662e 7273 6128 6175 7468   = self.rsa(auth
+0005f340: 2c20 7365 6c66 2e73 6563 7265 742c 2027  , self.secret, '
+0005f350: 7368 6132 3536 2729 0a20 2020 2020 2020  sha256').       
+0005f360: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+0005f370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005f380: 2020 2073 6967 6e61 7475 7265 203d 2073     signature = s
+0005f390: 656c 662e 686d 6163 2873 656c 662e 656e  elf.hmac(self.en
+0005f3a0: 636f 6465 2861 7574 6829 2c20 7365 6c66  code(auth), self
+0005f3b0: 2e65 6e63 6f64 6528 7365 6c66 2e73 6563  .encode(self.sec
+0005f3c0: 7265 7429 2c20 6861 7368 6c69 622e 7368  ret), hashlib.sh
+0005f3d0: 6132 3536 290a 2020 2020 2020 2020 2020  a256).          
+0005f3e0: 2020 2020 2020 6966 206d 6574 686f 6420        if method 
+0005f3f0: 3d3d 2027 504f 5354 273a 0a20 2020 2020  == 'POST':.     
+0005f400: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0005f410: 7353 706f 7420 3d20 7572 6c2e 6669 6e64  sSpot = url.find
+0005f420: 2827 7370 6f74 2729 203e 3d20 300a 2020  ('spot') >= 0.  
+0005f430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005f440: 2020 6578 7465 6e64 6564 5175 6572 7920    extendedQuery 
+0005f450: 3d20 7365 6c66 2e65 7874 656e 6428 7175  = self.extend(qu
+0005f460: 6572 792c 207b 0a20 2020 2020 2020 2020  ery, {.         
+0005f470: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+0005f480: 7369 676e 273a 2073 6967 6e61 7475 7265  sign': signature
+0005f490: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0005f4a0: 2020 2020 2020 7d29 0a20 2020 2020 2020        }).       
+0005f4b0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0005f4c0: 6973 5370 6f74 3a0a 2020 2020 2020 2020  isSpot:.        
+0005f4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005f4e0: 626f 6479 203d 2073 656c 662e 7572 6c65  body = self.urle
+0005f4f0: 6e63 6f64 6528 6578 7465 6e64 6564 5175  ncode(extendedQu
+0005f500: 6572 7929 0a20 2020 2020 2020 2020 2020  ery).           
+0005f510: 2020 2020 2020 2020 2020 2020 2068 6561               hea
+0005f520: 6465 7273 203d 207b 0a20 2020 2020 2020  ders = {.       
+0005f530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005f540: 2020 2020 2027 436f 6e74 656e 742d 5479       'Content-Ty
+0005f550: 7065 273a 2027 6170 706c 6963 6174 696f  pe': 'applicatio
+0005f560: 6e2f 782d 7777 772d 666f 726d 2d75 726c  n/x-www-form-url
+0005f570: 656e 636f 6465 6427 2c0a 2020 2020 2020  encoded',.      
+0005f580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005f590: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
+0005f5a0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0005f5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005f5c0: 2020 2020 2020 626f 6479 203d 2073 656c        body = sel
+0005f5d0: 662e 6a73 6f6e 2865 7874 656e 6465 6451  f.json(extendedQ
+0005f5e0: 7565 7279 290a 2020 2020 2020 2020 2020  uery).          
+0005f5f0: 2020 2020 2020 2020 2020 2020 2020 6865                he
+0005f600: 6164 6572 7320 3d20 7b0a 2020 2020 2020  aders = {.      
+0005f610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005f620: 2020 2020 2020 2743 6f6e 7465 6e74 2d54        'Content-T
+0005f630: 7970 6527 3a20 2761 7070 6c69 6361 7469  ype': 'applicati
+0005f640: 6f6e 2f6a 736f 6e27 2c0a 2020 2020 2020  on/json',.      
+0005f650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005f660: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
+0005f670: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0005f680: 2020 2020 2020 2020 2020 2020 2020 7572                ur
+0005f690: 6c20 2b3d 2027 3f27 202b 2073 656c 662e  l += '?' + self.
+0005f6a0: 7261 7765 6e63 6f64 6528 736f 7274 6564  rawencode(sorted
+0005f6b0: 5175 6572 7929 0a20 2020 2020 2020 2020  Query).         
+0005f6c0: 2020 2020 2020 2020 2020 2075 726c 202b             url +
+0005f6d0: 3d20 2726 7369 676e 3d27 202b 2073 6967  = '&sign=' + sig
+0005f6e0: 6e61 7475 7265 0a20 2020 2020 2020 2069  nature.        i
+0005f6f0: 6620 6d65 7468 6f64 203d 3d20 2750 4f53  f method == 'POS
+0005f700: 5427 3a0a 2020 2020 2020 2020 2020 2020  T':.            
+0005f710: 6272 6f6b 6572 4964 203d 2073 656c 662e  brokerId = self.
+0005f720: 7361 6665 5f73 7472 696e 6728 7365 6c66  safe_string(self
+0005f730: 2e6f 7074 696f 6e73 2c20 2762 726f 6b65  .options, 'broke
+0005f740: 7249 6427 290a 2020 2020 2020 2020 2020  rId').          
+0005f750: 2020 6966 2062 726f 6b65 7249 6420 6973    if brokerId is
+0005f760: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+0005f770: 2020 2020 2020 2020 2020 2068 6561 6465             heade
+0005f780: 7273 5b27 5265 6665 7265 7227 5d20 3d20  rs['Referer'] = 
+0005f790: 6272 6f6b 6572 4964 0a20 2020 2020 2020  brokerId.       
+0005f7a0: 2072 6574 7572 6e20 7b27 7572 6c27 3a20   return {'url': 
+0005f7b0: 7572 6c2c 2027 6d65 7468 6f64 273a 206d  url, 'method': m
+0005f7c0: 6574 686f 642c 2027 626f 6479 273a 2062  ethod, 'body': b
+0005f7d0: 6f64 792c 2027 6865 6164 6572 7327 3a20  ody, 'headers': 
+0005f7e0: 6865 6164 6572 737d 0a0a 2020 2020 6465  headers}..    de
+0005f7f0: 6620 6861 6e64 6c65 5f65 7272 6f72 7328  f handle_errors(
+0005f800: 7365 6c66 2c20 6874 7470 436f 6465 2c20  self, httpCode, 
+0005f810: 7265 6173 6f6e 2c20 7572 6c2c 206d 6574  reason, url, met
+0005f820: 686f 642c 2068 6561 6465 7273 2c20 626f  hod, headers, bo
+0005f830: 6479 2c20 7265 7370 6f6e 7365 2c20 7265  dy, response, re
+0005f840: 7175 6573 7448 6561 6465 7273 2c20 7265  questHeaders, re
+0005f850: 7175 6573 7442 6f64 7929 3a0a 2020 2020  questBody):.    
+0005f860: 2020 2020 6966 206e 6f74 2072 6573 706f      if not respo
+0005f870: 6e73 653a 0a20 2020 2020 2020 2020 2020  nse:.           
+0005f880: 2072 6574 7572 6e20 4e6f 6e65 2020 2320   return None  # 
+0005f890: 6661 6c6c 6261 636b 2074 6f20 6465 6661  fallback to defa
+0005f8a0: 756c 7420 6572 726f 7220 6861 6e64 6c65  ult error handle
+0005f8b0: 720a 2020 2020 2020 2020 230a 2020 2020  r.        #.    
+0005f8c0: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
+0005f8d0: 2020 2020 2320 2020 2020 2020 2020 7265      #         re
+0005f8e0: 745f 636f 6465 3a20 3130 3030 312c 0a20  t_code: 10001,. 
+0005f8f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0005f900: 2072 6574 5f6d 7367 3a20 2752 6561 644d   ret_msg: 'ReadM
+0005f910: 6170 4342 3a20 6578 7065 6374 207b 6f72  apCB: expect {or
+0005f920: 206e 2c20 6275 7420 666f 756e 6420 5c75   n, but found \u
+0005f930: 3030 3030 2c20 6572 726f 7220 2720 2b0a  0000, error ' +.
+0005f940: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005f950: 2020 2766 6f75 6e64 2069 6e20 2023 3020    'found in  #0 
+0005f960: 6279 7465 206f 6620 2e2e 2e7c 7c2e 2e2e  byte of ...||...
+0005f970: 2c20 6269 6767 6572 2063 6f6e 7465 7874  , bigger context
+0005f980: 2027 202b 0a20 2020 2020 2020 2023 2020   ' +.        #  
+0005f990: 2020 2020 2020 2027 2e2e 2e7c 7c2e 2e2e         '...||...
+0005f9a0: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
+0005f9b0: 2020 2020 2065 7874 5f63 6f64 653a 2027       ext_code: '
+0005f9c0: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
+0005f9d0: 2020 2020 2065 7874 5f69 6e66 6f3a 2027       ext_info: '
+0005f9e0: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
+0005f9f0: 2020 2020 2072 6573 756c 743a 206e 756c       result: nul
+0005fa00: 6c2c 0a20 2020 2020 2020 2023 2020 2020  l,.        #    
+0005fa10: 2020 2020 2074 696d 655f 6e6f 773a 2027       time_now: '
+0005fa20: 3135 3833 3933 3431 3036 2e35 3930 3433  1583934106.59043
+0005fa30: 3627 0a20 2020 2020 2020 2023 2020 2020  6'.        #    
+0005fa40: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
+0005fa50: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
+0005fa60: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0005fa70: 7265 7443 6f64 6522 3a31 3030 3031 2c0a  retCode":10001,.
+0005fa80: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005fa90: 2020 2272 6574 4d73 6722 3a22 7379 6d62    "retMsg":"symb
+0005faa0: 6f6c 2070 6172 616d 7320 6572 7222 2c0a  ol params err",.
+0005fab0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0005fac0: 2020 2272 6573 756c 7422 3a7b 2273 796d    "result":{"sym
+0005fad0: 626f 6c22 3a22 222c 2262 6964 223a 2222  bol":"","bid":""
+0005fae0: 2c22 6269 6449 7622 3a22 222c 2262 6964  ,"bidIv":"","bid
+0005faf0: 5369 7a65 223a 2222 2c22 6173 6b22 3a22  Size":"","ask":"
+0005fb00: 222c 2261 736b 4976 223a 2222 2c22 6173  ","askIv":"","as
+0005fb10: 6b53 697a 6522 3a22 222c 226c 6173 7450  kSize":"","lastP
+0005fb20: 7269 6365 223a 2222 2c22 6f70 656e 496e  rice":"","openIn
+0005fb30: 7465 7265 7374 223a 2222 2c22 696e 6465  terest":"","inde
+0005fb40: 7850 7269 6365 223a 2222 2c22 6d61 726b  xPrice":"","mark
+0005fb50: 5072 6963 6522 3a22 222c 226d 6172 6b50  Price":"","markP
+0005fb60: 7269 6365 4976 223a 2222 2c22 6368 616e  riceIv":"","chan
+0005fb70: 6765 3234 6822 3a22 222c 2268 6967 6832  ge24h":"","high2
+0005fb80: 3468 223a 2222 2c22 6c6f 7732 3468 223a  4h":"","low24h":
+0005fb90: 2222 2c22 766f 6c75 6d65 3234 6822 3a22  "","volume24h":"
+0005fba0: 222c 2274 7572 6e6f 7665 7232 3468 223a  ","turnover24h":
+0005fbb0: 2222 2c22 746f 7461 6c56 6f6c 756d 6522  "","totalVolume"
+0005fbc0: 3a22 222c 2274 6f74 616c 5475 726e 6f76  :"","totalTurnov
+0005fbd0: 6572 223a 2222 2c22 6675 6e64 696e 6752  er":"","fundingR
+0005fbe0: 6174 6522 3a22 222c 2270 7265 6469 6374  ate":"","predict
+0005fbf0: 6564 4675 6e64 696e 6752 6174 6522 3a22  edFundingRate":"
+0005fc00: 222c 226e 6578 7446 756e 6469 6e67 5469  ","nextFundingTi
+0005fc10: 6d65 223a 2222 2c22 636f 756e 7464 6f77  me":"","countdow
+0005fc20: 6e48 6f75 7222 3a22 3022 2c22 7072 6564  nHour":"0","pred
+0005fc30: 6963 7465 6444 656c 6976 6572 7950 7269  ictedDeliveryPri
+0005fc40: 6365 223a 2222 2c22 756e 6465 726c 7969  ce":"","underlyi
+0005fc50: 6e67 5072 6963 6522 3a22 222c 2264 656c  ngPrice":"","del
+0005fc60: 7461 223a 2222 2c22 6761 6d6d 6122 3a22  ta":"","gamma":"
+0005fc70: 222c 2276 6567 6122 3a22 222c 2274 6865  ","vega":"","the
+0005fc80: 7461 223a 2222 7d0a 2020 2020 2020 2020  ta":""}.        
+0005fc90: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
+0005fca0: 230a 2020 2020 2020 2020 6572 726f 7243  #.        errorC
+0005fcb0: 6f64 6520 3d20 7365 6c66 2e73 6166 655f  ode = self.safe_
+0005fcc0: 7374 7269 6e67 5f32 2872 6573 706f 6e73  string_2(respons
+0005fcd0: 652c 2027 7265 745f 636f 6465 272c 2027  e, 'ret_code', '
+0005fce0: 7265 7443 6f64 6527 290a 2020 2020 2020  retCode').      
+0005fcf0: 2020 6966 2065 7272 6f72 436f 6465 2021    if errorCode !
+0005fd00: 3d20 2730 273a 0a20 2020 2020 2020 2020  = '0':.         
+0005fd10: 2020 2069 6620 6572 726f 7243 6f64 6520     if errorCode 
+0005fd20: 3d3d 2027 3330 3038 3427 3a0a 2020 2020  == '30084':.    
+0005fd30: 2020 2020 2020 2020 2020 2020 2320 6e6f              # no
+0005fd40: 7420 616e 2065 7272 6f72 0a20 2020 2020  t an error.     
+0005fd50: 2020 2020 2020 2020 2020 2023 2068 7474             # htt
+0005fd60: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
+0005fd70: 6363 7874 2f63 6378 742f 6973 7375 6573  ccxt/ccxt/issues
+0005fd80: 2f31 3132 3638 0a20 2020 2020 2020 2020  /11268.         
+0005fd90: 2020 2020 2020 2023 2068 7474 7073 3a2f         # https:/
+0005fda0: 2f67 6974 6875 622e 636f 6d2f 6363 7874  /github.com/ccxt
+0005fdb0: 2f63 6378 742f 7075 6c6c 2f31 3136 3234  /ccxt/pull/11624
+0005fdc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0005fdd0: 2023 2050 4f53 5420 6874 7470 733a 2f2f   # POST https://
+0005fde0: 6170 692e 6279 6269 742e 636f 6d2f 7632  api.bybit.com/v2
+0005fdf0: 2f70 7269 7661 7465 2f70 6f73 6974 696f  /private/positio
+0005fe00: 6e2f 7377 6974 6368 2d69 736f 6c61 7465  n/switch-isolate
+0005fe10: 6420 3230 3020 4f4b 0a20 2020 2020 2020  d 200 OK.       
+0005fe20: 2020 2020 2020 2020 2023 207b 2272 6574           # {"ret
+0005fe30: 5f63 6f64 6522 3a33 3030 3834 2c22 7265  _code":30084,"re
+0005fe40: 745f 6d73 6722 3a22 4973 6f6c 6174 6564  t_msg":"Isolated
+0005fe50: 206e 6f74 206d 6f64 6966 6965 6422 2c22   not modified","
+0005fe60: 6578 745f 636f 6465 223a 2222 2c22 6578  ext_code":"","ex
+0005fe70: 745f 696e 666f 223a 2222 2c22 7265 7375  t_info":"","resu
+0005fe80: 6c74 223a 6e75 6c6c 2c22 7469 6d65 5f6e  lt":null,"time_n
+0005fe90: 6f77 223a 2231 3634 3230 3035 3231 392e  ow":"1642005219.
+0005fea0: 3933 3739 3838 222c 2272 6174 655f 6c69  937988","rate_li
+0005feb0: 6d69 745f 7374 6174 7573 223a 3733 2c22  mit_status":73,"
+0005fec0: 7261 7465 5f6c 696d 6974 5f72 6573 6574  rate_limit_reset
+0005fed0: 5f6d 7322 3a31 3634 3230 3035 3231 3938  _ms":16420052198
+0005fee0: 3934 2c22 7261 7465 5f6c 696d 6974 223a  94,"rate_limit":
+0005fef0: 3735 7d0a 2020 2020 2020 2020 2020 2020  75}.            
+0005ff00: 2020 2020 7265 7475 726e 204e 6f6e 650a      return None.
+0005ff10: 2020 2020 2020 2020 2020 2020 6665 6564              feed
+0005ff20: 6261 636b 203d 204e 6f6e 650a 2020 2020  back = None.    
+0005ff30: 2020 2020 2020 2020 6966 2065 7272 6f72          if error
+0005ff40: 436f 6465 203d 3d20 2731 3030 3035 273a  Code == '10005':
+0005ff50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0005ff60: 2066 6565 6462 6163 6b20 3d20 7365 6c66   feedback = self
+0005ff70: 2e69 6420 2b20 2720 7072 6976 6174 6520  .id + ' private 
+0005ff80: 6170 6920 7573 6573 202f 7573 6572 2f76  api uses /user/v
+0005ff90: 332f 7072 6976 6174 652f 7175 6572 792d  3/private/query-
+0005ffa0: 6170 6920 746f 2063 6865 636b 2069 6620  api to check if 
+0005ffb0: 796f 7520 6861 7665 2061 2075 6e69 6669  you have a unifi
+0005ffc0: 6564 2061 6363 6f75 6e74 2e20 5468 6520  ed account. The 
+0005ffd0: 4150 4920 6b65 7920 6f66 2075 7365 7220  API key of user 
+0005ffe0: 6964 206d 7573 7420 6f77 6e20 6f6e 6520  id must own one 
+0005fff0: 6f66 2070 6572 6d69 7373 696f 6e73 3a20  of permissions: 
+00060000: 2241 6363 6f75 6e74 2054 7261 6e73 6665  "Account Transfe
+00060010: 7222 2c20 2253 7562 6163 636f 756e 7420  r", "Subaccount 
+00060020: 5472 616e 7366 6572 222c 2022 5769 7468  Transfer", "With
+00060030: 6472 6177 616c 2220 2720 2b20 626f 6479  drawal" ' + body
+00060040: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+00060050: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00060060: 2020 2066 6565 6462 6163 6b20 3d20 7365     feedback = se
+00060070: 6c66 2e69 6420 2b20 2720 2720 2b20 626f  lf.id + ' ' + bo
+00060080: 6479 0a20 2020 2020 2020 2020 2020 2073  dy.            s
+00060090: 656c 662e 7468 726f 775f 6272 6f61 646c  elf.throw_broadl
+000600a0: 795f 6d61 7463 6865 645f 6578 6365 7074  y_matched_except
+000600b0: 696f 6e28 7365 6c66 2e65 7863 6570 7469  ion(self.excepti
+000600c0: 6f6e 735b 2762 726f 6164 275d 2c20 626f  ons['broad'], bo
+000600d0: 6479 2c20 6665 6564 6261 636b 290a 2020  dy, feedback).  
+000600e0: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
+000600f0: 6872 6f77 5f65 7861 6374 6c79 5f6d 6174  hrow_exactly_mat
+00060100: 6368 6564 5f65 7863 6570 7469 6f6e 2873  ched_exception(s
+00060110: 656c 662e 6578 6365 7074 696f 6e73 5b27  elf.exceptions['
+00060120: 6578 6163 7427 5d2c 2065 7272 6f72 436f  exact'], errorCo
+00060130: 6465 2c20 6665 6564 6261 636b 290a 2020  de, feedback).  
+00060140: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00060150: 4578 6368 616e 6765 4572 726f 7228 6665  ExchangeError(fe
+00060160: 6564 6261 636b 2920 2023 2075 6e6b 6e6f  edback)  # unkno
+00060170: 776e 206d 6573 7361 6765 0a20 2020 2020  wn message.     
+00060180: 2020 2072 6574 7572 6e20 4e6f 6e65 0a       return None.
```

### Comparing `ccxt-3.0.95/ccxt/cex.py` & `ccxt-3.0.96/ccxt/cex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/coinbase.py` & `ccxt-3.0.96/ccxt/coinbase.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/coinbaseprime.py` & `ccxt-3.0.96/ccxt/coinbaseprime.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/coinbasepro.py` & `ccxt-3.0.96/ccxt/coinbasepro.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/coincheck.py` & `ccxt-3.0.96/ccxt/coincheck.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/coinex.py` & `ccxt-3.0.96/ccxt/coinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/coinfalcon.py` & `ccxt-3.0.96/ccxt/coinfalcon.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/coinmate.py` & `ccxt-3.0.96/ccxt/coinmate.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/coinone.py` & `ccxt-3.0.96/ccxt/coinone.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/coinsph.py` & `ccxt-3.0.96/ccxt/coinsph.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/coinspot.py` & `ccxt-3.0.96/ccxt/coinspot.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/cryptocom.py` & `ccxt-3.0.96/ccxt/cryptocom.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/currencycom.py` & `ccxt-3.0.96/ccxt/currencycom.py`

 * *Files 0% similar despite different names*

```diff
@@ -457,15 +457,15 @@
             quote = self.safe_currency_code(quoteId)
             symbol = base + '/' + quote
             typeRaw = self.safe_string(market, 'marketType')
             spot = (typeRaw == 'SPOT')
             futures = False
             swap = (typeRaw == 'LEVERAGE')
             type = 'swap' if swap else 'spot'
-            margin = swap  # decided to set
+            margin = None
             if swap:
                 symbol = symbol.replace(self.options['leverage_markets_suffix'], '')
                 symbol += ':' + quote
             active = self.safe_string(market, 'status') == 'TRADING'
             # to set taker & maker fees, we use one from the below data - pairs either have 'exchangeFee' or 'tradingFee', if none of them(rare cases), then they should have 'takerFee & makerFee'
             exchangeFee = self.safe_string_2(market, 'exchangeFee', 'tradingFee')
             makerFee = self.safe_string(market, 'makerFee', exchangeFee)
```

### Comparing `ccxt-3.0.95/ccxt/delta.py` & `ccxt-3.0.96/ccxt/delta.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/deribit.py` & `ccxt-3.0.96/ccxt/deribit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/digifinex.py` & `ccxt-3.0.96/ccxt/digifinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/exmo.py` & `ccxt-3.0.96/ccxt/exmo.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/flowbtc.py` & `ccxt-3.0.96/ccxt/flowbtc.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/fmfwio.py` & `ccxt-3.0.96/ccxt/fmfwio.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/gate.py` & `ccxt-3.0.96/ccxt/gate.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/gemini.py` & `ccxt-3.0.96/ccxt/gemini.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/hitbtc.py` & `ccxt-3.0.96/ccxt/hitbtc.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/hitbtc3.py` & `ccxt-3.0.96/ccxt/hitbtc3.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/hollaex.py` & `ccxt-3.0.96/ccxt/hollaex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/huobi.py` & `ccxt-3.0.96/ccxt/huobi.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/huobijp.py` & `ccxt-3.0.96/ccxt/huobijp.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/huobipro.py` & `ccxt-3.0.96/ccxt/huobipro.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/idex.py` & `ccxt-3.0.96/ccxt/idex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/independentreserve.py` & `ccxt-3.0.96/ccxt/independentreserve.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/indodax.py` & `ccxt-3.0.96/ccxt/indodax.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/itbit.py` & `ccxt-3.0.96/ccxt/itbit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/kraken.py` & `ccxt-3.0.96/ccxt/kraken.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/krakenfutures.py` & `ccxt-3.0.96/ccxt/krakenfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/kucoin.py` & `ccxt-3.0.96/ccxt/kucoin.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/kucoinfutures.py` & `ccxt-3.0.96/ccxt/kucoinfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/kuna.py` & `ccxt-3.0.96/ccxt/kuna.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/latoken.py` & `ccxt-3.0.96/ccxt/latoken.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/lbank.py` & `ccxt-3.0.96/ccxt/lbank.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/lbank2.py` & `ccxt-3.0.96/ccxt/lbank2.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/luno.py` & `ccxt-3.0.96/ccxt/luno.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/lykke.py` & `ccxt-3.0.96/ccxt/lykke.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/mercado.py` & `ccxt-3.0.96/ccxt/mercado.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/mexc.py` & `ccxt-3.0.96/ccxt/mexc.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/ndax.py` & `ccxt-3.0.96/ccxt/ndax.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/novadax.py` & `ccxt-3.0.96/ccxt/novadax.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/oceanex.py` & `ccxt-3.0.96/ccxt/oceanex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/okcoin.py` & `ccxt-3.0.96/ccxt/okcoin.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/okx.py` & `ccxt-3.0.96/ccxt/okx.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/paymium.py` & `ccxt-3.0.96/ccxt/paymium.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/phemex.py` & `ccxt-3.0.96/ccxt/phemex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/poloniex.py` & `ccxt-3.0.96/ccxt/poloniex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/poloniexfutures.py` & `ccxt-3.0.96/ccxt/poloniexfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/__init__.py` & `ccxt-3.0.96/ccxt/pro/__init__.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 # -*- coding: utf-8 -*-
 
 """CCXT: CryptoCurrency eXchange Trading Library (Async)"""
 
 # ----------------------------------------------------------------------------
 
-__version__ = '3.0.95'
+__version__ = '3.0.96'
 
 # ----------------------------------------------------------------------------
 
 from ccxt.base.exchange import Exchange  # noqa: F401
 
 # CCXT Pro exchanges (now this is mainly used for importing exchanges in WS tests)
```

### Comparing `ccxt-3.0.95/ccxt/pro/alpaca.py` & `ccxt-3.0.96/ccxt/pro/alpaca.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/ascendex.py` & `ccxt-3.0.96/ccxt/pro/ascendex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/bequant.py` & `ccxt-3.0.96/ccxt/pro/bequant.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/binance.py` & `ccxt-3.0.96/ccxt/pro/binance.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/binancecoinm.py` & `ccxt-3.0.96/ccxt/pro/binancecoinm.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/binanceus.py` & `ccxt-3.0.96/ccxt/pro/binanceus.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/binanceusdm.py` & `ccxt-3.0.96/ccxt/pro/binanceusdm.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/bitcoincom.py` & `ccxt-3.0.96/ccxt/pro/bitcoincom.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/bitfinex.py` & `ccxt-3.0.96/ccxt/pro/bitfinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/bitfinex2.py` & `ccxt-3.0.96/ccxt/pro/bitfinex2.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/bitget.py` & `ccxt-3.0.96/ccxt/pro/bitget.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/bitmart.py` & `ccxt-3.0.96/ccxt/pro/bitmart.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/bitmex.py` & `ccxt-3.0.96/ccxt/pro/bitmex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/bitopro.py` & `ccxt-3.0.96/ccxt/pro/bitopro.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/bitrue.py` & `ccxt-3.0.96/ccxt/pro/bitrue.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/bitstamp.py` & `ccxt-3.0.96/ccxt/pro/bitstamp.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/bittrex.py` & `ccxt-3.0.96/ccxt/pro/bittrex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/bitvavo.py` & `ccxt-3.0.96/ccxt/pro/bitvavo.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/btcex.py` & `ccxt-3.0.96/ccxt/pro/btcex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/bybit.py` & `ccxt-3.0.96/ccxt/pro/bybit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/cex.py` & `ccxt-3.0.96/ccxt/pro/cex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/coinbaseprime.py` & `ccxt-3.0.96/ccxt/pro/coinbaseprime.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/coinbasepro.py` & `ccxt-3.0.96/ccxt/pro/coinbasepro.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/coinex.py` & `ccxt-3.0.96/ccxt/pro/coinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/cryptocom.py` & `ccxt-3.0.96/ccxt/pro/cryptocom.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/currencycom.py` & `ccxt-3.0.96/ccxt/pro/currencycom.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/deribit.py` & `ccxt-3.0.96/ccxt/pro/deribit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/exmo.py` & `ccxt-3.0.96/ccxt/pro/exmo.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/gate.py` & `ccxt-3.0.96/ccxt/pro/gate.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/gemini.py` & `ccxt-3.0.96/ccxt/pro/gemini.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/hitbtc.py` & `ccxt-3.0.96/ccxt/pro/hitbtc.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/hollaex.py` & `ccxt-3.0.96/ccxt/pro/hollaex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/huobi.py` & `ccxt-3.0.96/ccxt/pro/huobi.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/huobijp.py` & `ccxt-3.0.96/ccxt/pro/huobijp.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/idex.py` & `ccxt-3.0.96/ccxt/pro/idex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/independentreserve.py` & `ccxt-3.0.96/ccxt/pro/independentreserve.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/kraken.py` & `ccxt-3.0.96/ccxt/pro/kraken.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/krakenfutures.py` & `ccxt-3.0.96/ccxt/pro/krakenfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/kucoin.py` & `ccxt-3.0.96/ccxt/pro/kucoin.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/kucoinfutures.py` & `ccxt-3.0.96/ccxt/pro/kucoinfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/luno.py` & `ccxt-3.0.96/ccxt/pro/luno.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/mexc.py` & `ccxt-3.0.96/ccxt/pro/mexc.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/ndax.py` & `ccxt-3.0.96/ccxt/pro/ndax.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/okcoin.py` & `ccxt-3.0.96/ccxt/pro/okcoin.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/okx.py` & `ccxt-3.0.96/ccxt/pro/okx.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/phemex.py` & `ccxt-3.0.96/ccxt/pro/phemex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/probit.py` & `ccxt-3.0.96/ccxt/pro/probit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/ripio.py` & `ccxt-3.0.96/ccxt/pro/ripio.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/upbit.py` & `ccxt-3.0.96/ccxt/pro/upbit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/wazirx.py` & `ccxt-3.0.96/ccxt/pro/wazirx.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/whitebit.py` & `ccxt-3.0.96/ccxt/pro/whitebit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/woo.py` & `ccxt-3.0.96/ccxt/pro/woo.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/pro/zb.py` & `ccxt-3.0.96/ccxt/pro/zb.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/probit.py` & `ccxt-3.0.96/ccxt/probit.py`

 * *Files 3% similar despite different names*

```diff
@@ -252,14 +252,15 @@
                 'UNI': 'UNICORN Token',
                 'UNISWAP': 'UNI',
             },
         })
 
     def fetch_markets(self, params={}):
         """
+        see https://docs-en.probit.com/reference/market
         retrieves data on all markets for probit
         :param dict params: extra parameters specific to the exchange api endpoint
         :returns [dict]: an array of objects representing market data
         """
         response = self.publicGetMarket(params)
         #
         #     {
@@ -350,14 +351,15 @@
                 },
                 'info': market,
             })
         return result
 
     def fetch_currencies(self, params={}):
         """
+        see https://docs-en.probit.com/reference/currency
         fetches all available currencies on an exchange
         :param dict params: extra parameters specific to the probit api endpoint
         :returns dict: an associative dictionary of currencies
         """
         response = self.publicGetCurrencyWithPlatform(params)
         #
         #     {
@@ -524,14 +526,15 @@
             account['total'] = self.safe_string(balance, 'total')
             account['free'] = self.safe_string(balance, 'available')
             result[code] = account
         return self.safe_balance(result)
 
     def fetch_balance(self, params={}):
         """
+        see https://docs-en.probit.com/reference/balance
         query for balance and get the amount of funds available for trading or funds locked in orders
         :param dict params: extra parameters specific to the probit api endpoint
         :returns dict: a `balance structure <https://docs.ccxt.com/en/latest/manual.html?#balance-structure>`
         """
         self.load_markets()
         response = self.privateGetBalance(params)
         #
@@ -545,14 +548,15 @@
         #         ]
         #     }
         #
         return self.parse_balance(response)
 
     def fetch_order_book(self, symbol: str, limit: Optional[int] = None, params={}):
         """
+        see https://docs-en.probit.com/reference/order_book
         fetches information on open orders with bid(buy) and ask(sell) prices, volumes and other data
         :param str symbol: unified symbol of the market to fetch the order book for
         :param int|None limit: the maximum amount of order book entries to return
         :param dict params: extra parameters specific to the probit api endpoint
         :returns dict: A dictionary of `order book structures <https://docs.ccxt.com/#/?id=order-book-structure>` indexed by market symbols
         """
         self.load_markets()
@@ -572,14 +576,15 @@
         #
         data = self.safe_value(response, 'data', [])
         dataBySide = self.group_by(data, 'side')
         return self.parse_order_book(dataBySide, market['symbol'], None, 'buy', 'sell', 'price', 'quantity')
 
     def fetch_tickers(self, symbols: Optional[List[str]] = None, params={}):
         """
+        see https://docs-en.probit.com/reference/ticker
         fetches price tickers for multiple markets, statistical calculations with the information calculated over the past 24 hours each market
         :param [str]|None symbols: unified symbols of the markets to fetch the ticker for, all market tickers are returned if not assigned
         :param dict params: extra parameters specific to the probit api endpoint
         :returns dict: a dictionary of `ticker structures <https://docs.ccxt.com/#/?id=ticker-structure>`
         """
         self.load_markets()
         request = {}
@@ -604,14 +609,15 @@
         #     }
         #
         data = self.safe_value(response, 'data', [])
         return self.parse_tickers(data, symbols)
 
     def fetch_ticker(self, symbol: str, params={}):
         """
+        see https://docs-en.probit.com/reference/ticker
         fetches a price ticker, a statistical calculation with the information calculated over the past 24 hours for a specific market
         :param str symbol: unified symbol of the market to fetch the ticker for
         :param dict params: extra parameters specific to the probit api endpoint
         :returns dict: a `ticker structure <https://docs.ccxt.com/#/?id=ticker-structure>`
         """
         self.load_markets()
         market = self.market(symbol)
@@ -682,14 +688,15 @@
             'baseVolume': baseVolume,
             'quoteVolume': quoteVolume,
             'info': ticker,
         }, market)
 
     def fetch_my_trades(self, symbol: Optional[str] = None, since: Optional[int] = None, limit: Optional[int] = None, params={}):
         """
+        see https://docs-en.probit.com/reference/trade
         fetch all trades made by the user
         :param str|None symbol: unified market symbol
         :param int|None since: the earliest time in ms to fetch trades for
         :param int|None limit: the maximum number of trades structures to retrieve
         :param dict params: extra parameters specific to the probit api endpoint
         :returns [dict]: a list of `trade structures <https://docs.ccxt.com/#/?id=trade-structure>`
         """
@@ -728,14 +735,15 @@
         #     }
         #
         data = self.safe_value(response, 'data', [])
         return self.parse_trades(data, market, since, limit)
 
     def fetch_trades(self, symbol: str, since: Optional[int] = None, limit: Optional[int] = None, params={}):
         """
+        see https://docs-en.probit.com/reference/trade-1
         get the list of most recent trades for a particular symbol
         :param str symbol: unified symbol of the market to fetch trades for
         :param int|None since: timestamp in ms of the earliest trade to fetch
         :param int|None limit: the maximum amount of trades to fetch
         :param dict params: extra parameters specific to the probit api endpoint
         :returns [dict]: a list of `trade structures <https://docs.ccxt.com/en/latest/manual.html?#public-trades>`
         """
@@ -841,14 +849,15 @@
             'amount': amountString,
             'cost': None,
             'fee': fee,
         }, market)
 
     def fetch_time(self, params={}):
         """
+        see https://docs-en.probit.com/reference/time
         fetches the current integer timestamp in milliseconds from the exchange server
         :param dict params: extra parameters specific to the probit api endpoint
         :returns int: the current integer timestamp in milliseconds from the exchange server
         """
         response = self.publicGetTime(params)
         #
         #     {"data":"2020-04-12T18:54:25.390Z"}
@@ -883,14 +892,15 @@
             timestamp = duration * self.parse_to_int(timestamp / duration)
             if after:
                 timestamp = self.sum(timestamp, duration)
             return self.iso8601(timestamp * 1000)
 
     def fetch_ohlcv(self, symbol: str, timeframe='1m', since: Optional[int] = None, limit: Optional[int] = None, params={}):
         """
+        see https://docs-en.probit.com/reference/candle
         fetches historical candlestick data containing the open, high, low, and close price, and the volume of a market
         :param str symbol: unified symbol of the market to fetch OHLCV data for
         :param str timeframe: the length of time each candle represents
         :param int|None since: timestamp in ms of the earliest candle to fetch
         :param int|None limit: the maximum amount of candles to fetch
         :param dict params: extra parameters specific to the probit api endpoint
         :returns [[int]]: A list of candles ordered, open, high, low, close, volume
@@ -966,14 +976,15 @@
             self.safe_number(ohlcv, 'low'),
             self.safe_number(ohlcv, 'close'),
             self.safe_number(ohlcv, 'base_volume'),
         ]
 
     def fetch_open_orders(self, symbol: Optional[str] = None, since: Optional[int] = None, limit: Optional[int] = None, params={}):
         """
+        see https://docs-en.probit.com/reference/open_order-1
         fetch all unfilled currently open orders
         :param str|None symbol: unified market symbol
         :param int|None since: the earliest time in ms to fetch open orders for
         :param int|None limit: the maximum number of  open orders structures to retrieve
         :param dict params: extra parameters specific to the probit api endpoint
         :returns [dict]: a list of `order structures <https://docs.ccxt.com/#/?id=order-structure>`
         """
@@ -986,14 +997,15 @@
             request['market_id'] = market['id']
         response = self.privateGetOpenOrder(self.extend(request, params))
         data = self.safe_value(response, 'data')
         return self.parse_orders(data, market, since, limit)
 
     def fetch_closed_orders(self, symbol: Optional[str] = None, since: Optional[int] = None, limit: Optional[int] = None, params={}):
         """
+        see https://docs-en.probit.com/reference/order
         fetches information on multiple closed orders made by the user
         :param str|None symbol: unified market symbol of the market orders were made in
         :param int|None since: the earliest time in ms to fetch orders for
         :param int|None limit: the maximum number of  orde structures to retrieve
         :param dict params: extra parameters specific to the probit api endpoint
         :returns [dict]: a list of `order structures <https://docs.ccxt.com/#/?id=order-structure>`
         """
@@ -1013,14 +1025,15 @@
             request['limit'] = limit
         response = self.privateGetOrderHistory(self.extend(request, params))
         data = self.safe_value(response, 'data')
         return self.parse_orders(data, market, since, limit)
 
     def fetch_order(self, id: str, symbol: Optional[str] = None, params={}):
         """
+        see https://docs-en.probit.com/reference/order-3
         fetches information on an order made by the user
         :param str symbol: unified symbol of the market the order was made in
         :param dict params: extra parameters specific to the probit api endpoint
         :returns dict: An `order structure <https://docs.ccxt.com/#/?id=order-structure>`
         """
         if symbol is None:
             raise ArgumentsRequired(self.id + ' fetchOrder() requires a symbol argument')
@@ -1112,14 +1125,15 @@
         }, market)
 
     def cost_to_precision(self, symbol, cost):
         return self.decimal_to_precision(cost, TRUNCATE, self.markets[symbol]['precision']['cost'], self.precisionMode)
 
     def create_order(self, symbol: str, type, side: OrderSide, amount, price=None, params={}):
         """
+        see https://docs-en.probit.com/reference/order-1
         create a trade order
         :param str symbol: unified symbol of the market to create an order in
         :param str type: 'market' or 'limit'
         :param str side: 'buy' or 'sell'
         :param float amount: how much of currency you want to trade in units of base currency
         :param float|None price: the price at which the order is to be fullfilled, in units of the quote currency, ignored in market orders
         :param dict params: extra parameters specific to the probit api endpoint
@@ -1191,14 +1205,15 @@
             order['amount'] = None
             order['cost'] = self.parse_number(costToPrecision)
             order['remaining'] = None
         return order
 
     def cancel_order(self, id: str, symbol: Optional[str] = None, params={}):
         """
+        see https://docs-en.probit.com/reference/order-2
         cancels an open order
         :param str id: order id
         :param str symbol: unified symbol of the market the order was made in
         :param dict params: extra parameters specific to the probit api endpoint
         :returns dict: An `order structure <https://docs.ccxt.com/#/?id=order-structure>`
         """
         if symbol is None:
@@ -1227,14 +1242,15 @@
             'tag': tag,
             'network': network,
             'info': depositAddress,
         }
 
     def fetch_deposit_address(self, code: str, params={}):
         """
+        see https://docs-en.probit.com/reference/deposit_address
         fetch the deposit address for a currency associated with self account
         :param str code: unified currency code
         :param dict params: extra parameters specific to the probit api endpoint
         :returns dict: an `address structure <https://docs.ccxt.com/#/?id=address-structure>`
         """
         self.load_markets()
         currency = self.currency(code)
@@ -1276,14 +1292,15 @@
         firstAddress = self.safe_value(data, 0)
         if firstAddress is None:
             raise InvalidAddress(self.id + ' fetchDepositAddress() returned an empty response')
         return self.parse_deposit_address(firstAddress, currency)
 
     def fetch_deposit_addresses(self, codes=None, params={}):
         """
+        see https://docs-en.probit.com/reference/deposit_address
         fetch deposit addresses for multiple currencies and chain types
         :param [str]|None codes: list of unified currency codes, default is None
         :param dict params: extra parameters specific to the probit api endpoint
         :returns dict: a list of `address structures <https://docs.ccxt.com/#/?id=address-structure>`
         """
         self.load_markets()
         request = {}
@@ -1295,14 +1312,15 @@
             request['currency_id'] = ','.join(codes)
         response = self.privateGetDepositAddress(self.extend(request, params))
         data = self.safe_value(response, 'data', [])
         return self.parse_deposit_addresses(data, codes)
 
     def withdraw(self, code: str, amount, address, tag=None, params={}):
         """
+        see https://docs-en.probit.com/reference/withdrawal
         make a withdrawal
         :param str code: unified currency code
         :param float amount: the amount to withdraw
         :param str address: the address to withdraw to
         :param str|None tag:
         :param dict params: extra parameters specific to the probit api endpoint
         :returns dict: a `transaction structure <https://docs.ccxt.com/#/?id=transaction-structure>`
@@ -1389,14 +1407,15 @@
             'cancelled': 'canceled',
             'cancelling': 'canceled',
         }
         return self.safe_string(statuses, status, status)
 
     def fetch_deposit_withdraw_fees(self, codes=None, params={}):
         """
+        see https://docs-en.probit.com/reference/currency
         fetch deposit and withdraw fees
         see https://docs.poloniex.com/#public-endpoints-reference-data-currency-information
         :param [str]|None codes: list of unified currency codes
         :param dict params: extra parameters specific to the poloniex api endpoint
         :returns [dict]: a list of `fees structures <https://docs.ccxt.com/#/?id=fee-structure>`
         """
         self.load_markets()
@@ -1560,14 +1579,15 @@
                 elif query:
                     body = self.json(query)
                     headers['Content-Type'] = 'application/json'
         return {'url': url, 'method': method, 'body': body, 'headers': headers}
 
     def sign_in(self, params={}):
         """
+        see https://docs-en.probit.com/reference/token
         sign in, must be called prior to using other authenticated methods
         :param dict params: extra parameters specific to the probit api endpoint
         :returns: response from exchange
         """
         self.check_required_credentials()
         request = {
             'grant_type': 'client_credentials',  # the only supported value
```

### Comparing `ccxt-3.0.95/ccxt/ripio.py` & `ccxt-3.0.96/ccxt/ripio.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/static_dependencies/ecdsa/__init__.py` & `ccxt-3.0.96/ccxt/static_dependencies/ecdsa/__init__.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/static_dependencies/ecdsa/_version.py` & `ccxt-3.0.96/ccxt/static_dependencies/ecdsa/_version.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/static_dependencies/ecdsa/curves.py` & `ccxt-3.0.96/ccxt/static_dependencies/ecdsa/curves.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/static_dependencies/ecdsa/der.py` & `ccxt-3.0.96/ccxt/static_dependencies/ecdsa/der.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/static_dependencies/ecdsa/ecdsa.py` & `ccxt-3.0.96/ccxt/static_dependencies/ecdsa/ecdsa.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/static_dependencies/ecdsa/ellipticcurve.py` & `ccxt-3.0.96/ccxt/static_dependencies/ecdsa/ellipticcurve.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/static_dependencies/ecdsa/keys.py` & `ccxt-3.0.96/ccxt/static_dependencies/ecdsa/keys.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/static_dependencies/ecdsa/numbertheory.py` & `ccxt-3.0.96/ccxt/static_dependencies/ecdsa/numbertheory.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/static_dependencies/ecdsa/rfc6979.py` & `ccxt-3.0.96/ccxt/static_dependencies/ecdsa/rfc6979.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/static_dependencies/ecdsa/util.py` & `ccxt-3.0.96/ccxt/static_dependencies/ecdsa/util.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/static_dependencies/keccak/keccak.py` & `ccxt-3.0.96/ccxt/static_dependencies/keccak/keccak.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/stex.py` & `ccxt-3.0.96/ccxt/stex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/__init__.py` & `ccxt-3.0.96/ccxt/test/base/__init__.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_account.py` & `ccxt-3.0.96/ccxt/test/base/test_account.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_balance.py` & `ccxt-3.0.96/ccxt/test/base/test_balance.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_borrow_interest.py` & `ccxt-3.0.96/ccxt/test/base/test_borrow_interest.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_borrow_rate.py` & `ccxt-3.0.96/ccxt/test/base/test_borrow_rate.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_calculate_fee.py` & `ccxt-3.0.96/ccxt/test/base/test_calculate_fee.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_crypto.py` & `ccxt-3.0.96/ccxt/test/base/test_crypto.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_currency.py` & `ccxt-3.0.96/ccxt/test/base/test_currency.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_datetime.py` & `ccxt-3.0.96/ccxt/test/base/test_datetime.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_decimal_to_precision.py` & `ccxt-3.0.96/ccxt/test/base/test_decimal_to_precision.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_deep_extend.py` & `ccxt-3.0.96/ccxt/test/base/test_deep_extend.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_deposit_withdrawal.py` & `ccxt-3.0.96/ccxt/test/base/test_deposit_withdrawal.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_exchange_datetime_functions.py` & `ccxt-3.0.96/ccxt/test/base/test_exchange_datetime_functions.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_funding_rate_history.py` & `ccxt-3.0.96/ccxt/test/base/test_funding_rate_history.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_ledger_entry.py` & `ccxt-3.0.96/ccxt/test/base/test_ledger_entry.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_ledger_item.py` & `ccxt-3.0.96/ccxt/test/base/test_ledger_item.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_leverage_tier.py` & `ccxt-3.0.96/ccxt/test/base/test_leverage_tier.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_margin_modification.py` & `ccxt-3.0.96/ccxt/test/base/test_margin_modification.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_market.py` & `ccxt-3.0.96/ccxt/test/base/test_market.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_number.py` & `ccxt-3.0.96/ccxt/test/base/test_number.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_ohlcv.py` & `ccxt-3.0.96/ccxt/test/base/test_ohlcv.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_open_interest.py` & `ccxt-3.0.96/ccxt/test/base/test_open_interest.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_order.py` & `ccxt-3.0.96/ccxt/test/base/test_order.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_order_book.py` & `ccxt-3.0.96/ccxt/test/base/test_order_book.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_position.py` & `ccxt-3.0.96/ccxt/test/base/test_position.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_shared_methods.py` & `ccxt-3.0.96/ccxt/test/base/test_shared_methods.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_status.py` & `ccxt-3.0.96/ccxt/test/base/test_status.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_throttle.py` & `ccxt-3.0.96/ccxt/test/base/test_throttle.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_ticker.py` & `ccxt-3.0.96/ccxt/test/base/test_ticker.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_trade.py` & `ccxt-3.0.96/ccxt/test/base/test_trade.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_trading_fee.py` & `ccxt-3.0.96/ccxt/test/base/test_trading_fee.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/base/test_transaction.py` & `ccxt-3.0.96/ccxt/test/base/test_transaction.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/test_async.py` & `ccxt-3.0.96/ccxt/test/test_async.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/test/test_sync.py` & `ccxt-3.0.96/ccxt/test/test_sync.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/tidex.py` & `ccxt-3.0.96/ccxt/tidex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/timex.py` & `ccxt-3.0.96/ccxt/timex.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/tokocrypto.py` & `ccxt-3.0.96/ccxt/tokocrypto.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/upbit.py` & `ccxt-3.0.96/ccxt/upbit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/wavesexchange.py` & `ccxt-3.0.96/ccxt/wavesexchange.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/wazirx.py` & `ccxt-3.0.96/ccxt/wazirx.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/whitebit.py` & `ccxt-3.0.96/ccxt/whitebit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/woo.py` & `ccxt-3.0.96/ccxt/woo.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/xt.py` & `ccxt-3.0.96/ccxt/xt.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/yobit.py` & `ccxt-3.0.96/ccxt/yobit.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/zaif.py` & `ccxt-3.0.96/ccxt/zaif.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/zb.py` & `ccxt-3.0.96/ccxt/zb.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt/zonda.py` & `ccxt-3.0.96/ccxt/zonda.py`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/ccxt.egg-info/PKG-INFO` & `ccxt-3.0.96/ccxt.egg-info/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: ccxt
-Version: 3.0.95
+Version: 3.0.96
 Summary: A JavaScript / Python / PHP cryptocurrency trading library with support for 130+ exchanges
 Home-page: https://ccxt.com
 Author: Igor Kroitor
 Author-email: igor.kroitor@gmail.com
 License: MIT
 Project-URL: Homepage, https://ccxt.com
 Project-URL: Documentation, https://docs.ccxt.com
@@ -227,21 +227,21 @@
         console.log(version, Object.keys(exchanges));
         ```
         
         ### JavaScript (for use with the `<script>` tag):
         
         All-in-one browser bundle (dependencies included), served from a CDN of your choice:
         
-        * jsDelivr: https://cdn.jsdelivr.net/npm/ccxt@3.0.95/dist/ccxt.browser.js
-        * unpkg: https://unpkg.com/ccxt@3.0.95/dist/ccxt.browser.js
+        * jsDelivr: https://cdn.jsdelivr.net/npm/ccxt@3.0.96/dist/ccxt.browser.js
+        * unpkg: https://unpkg.com/ccxt@3.0.96/dist/ccxt.browser.js
         
         CDNs are not updated in real-time and may have delays. Defaulting to the most recent version without specifying the version number is not recommended. Please, keep in mind that we are not responsible for the correct operation of those CDN servers.
         
         ```HTML
-        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/ccxt@3.0.95/dist/ccxt.browser.js"></script>
+        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/ccxt@3.0.96/dist/ccxt.browser.js"></script>
         ```
         
         Creates a global `ccxt` object:
         
         ```JavaScript
         console.log (ccxt.exchanges) // print all available exchanges
         ```
```

### Comparing `ccxt-3.0.95/ccxt.egg-info/SOURCES.txt` & `ccxt-3.0.96/ccxt.egg-info/SOURCES.txt`

 * *Files identical despite different names*

### Comparing `ccxt-3.0.95/package.json` & `ccxt-3.0.96/package.json`

 * *Files 1% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9761904761904762%*

 * *Differences: {"'version'": "'3.0.96'"}*

```diff
@@ -217,9 +217,9 @@
         "update-badges": "node build/update-badges",
         "update-links": "node build/update-links",
         "vss": "node build/vss"
     },
     "type": "module",
     "types": "./js/ccxt.d.ts",
     "unpkg": "dist/ccxt.browser.js",
-    "version": "3.0.95"
+    "version": "3.0.96"
 }
```

### Comparing `ccxt-3.0.95/setup.py` & `ccxt-3.0.96/setup.py`

 * *Files identical despite different names*

