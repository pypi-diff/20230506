# Comparing `tmp/jarvis_ui-0.8-py3-none-any.whl.zip` & `tmp/jarvis_ui-1.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,37 +1,39 @@
-Zip file size: 932209 bytes, number of entries: 35
--rw-r--r--  2.0 unx      689 b- defN 23-Apr-20 03:02 jarvis_ui/__init__.py
--rw-r--r--  2.0 unx     3592 b- defN 23-Apr-20 03:02 jarvis_ui/main.py
--rw-r--r--  2.0 unx     2144 b- defN 23-Apr-20 03:02 jarvis_ui/test_listener.py
--rw-r--r--  2.0 unx     2754 b- defN 23-Apr-20 03:02 jarvis_ui/executables/api_handler.py
--rw-r--r--  2.0 unx     2377 b- defN 23-Apr-20 03:02 jarvis_ui/executables/helper.py
--rw-r--r--  2.0 unx     1961 b- defN 23-Apr-20 03:02 jarvis_ui/executables/listener.py
--rw-r--r--  2.0 unx      567 b- defN 23-Apr-20 03:02 jarvis_ui/executables/speaker.py
--rw-r--r--  2.0 unx     7886 b- defN 23-Apr-20 03:02 jarvis_ui/executables/starter.py
--rw-r--r--  2.0 unx   103102 b- defN 23-Apr-20 03:02 jarvis_ui/indicators/acknowledgement.wav
--rw-r--r--  2.0 unx   132024 b- defN 23-Apr-20 03:02 jarvis_ui/indicators/connection_failed.wav
--rw-r--r--  2.0 unx   121160 b- defN 23-Apr-20 03:02 jarvis_ui/indicators/connection_failed_ss.wav
--rw-r--r--  2.0 unx   102534 b- defN 23-Apr-20 03:02 jarvis_ui/indicators/failed.wav
--rw-r--r--  2.0 unx    99372 b- defN 23-Apr-20 03:02 jarvis_ui/indicators/failed_ss.wav
--rw-r--r--  2.0 unx    50518 b- defN 23-Apr-20 03:02 jarvis_ui/indicators/processing.wav
--rw-r--r--  2.0 unx    42028 b- defN 23-Apr-20 03:02 jarvis_ui/indicators/processing_ss.wav
--rw-r--r--  2.0 unx    39160 b- defN 23-Apr-20 03:02 jarvis_ui/indicators/restart.wav
--rw-r--r--  2.0 unx    48172 b- defN 23-Apr-20 03:02 jarvis_ui/indicators/restart_ss.wav
--rw-r--r--  2.0 unx    57668 b- defN 23-Apr-20 03:02 jarvis_ui/indicators/shutdown.wav
--rw-r--r--  2.0 unx    50220 b- defN 23-Apr-20 03:02 jarvis_ui/indicators/shutdown_ss.wav
--rw-r--r--  2.0 unx   149740 b- defN 23-Apr-20 03:02 jarvis_ui/indicators/unprocessable.wav
--rw-r--r--  2.0 unx   148524 b- defN 23-Apr-20 03:02 jarvis_ui/indicators/unprocessable_ss.wav
--rw-r--r--  2.0 unx     4083 b- defN 23-Apr-20 03:02 jarvis_ui/lib/install.sh
--rw-r--r--  2.0 unx      197 b- defN 23-Apr-20 03:02 jarvis_ui/lib/requirements.txt
--rw-r--r--  2.0 unx     6975 b- defN 23-Apr-20 03:02 jarvis_ui/modules/config.py
--rw-r--r--  2.0 unx     2534 b- defN 23-Apr-20 03:02 jarvis_ui/modules/exceptions.py
--rw-r--r--  2.0 unx     1454 b- defN 23-Apr-20 03:02 jarvis_ui/modules/logger.py
--rw-r--r--  2.0 unx     8692 b- defN 23-Apr-20 03:02 jarvis_ui/modules/models.py
--rw-r--r--  2.0 unx     1469 b- defN 23-Apr-20 03:02 jarvis_ui/modules/peripherals.py
--rw-r--r--  2.0 unx     3679 b- defN 23-Apr-20 03:02 jarvis_ui/modules/playsound.py
--rwxr-xr-x  2.0 unx     4083 b- defN 23-Apr-20 03:02 jarvis_ui-0.8.data/scripts/install.sh
--rw-r--r--  2.0 unx     1079 b- defN 23-Apr-20 03:02 jarvis_ui-0.8.dist-info/LICENSE
--rw-r--r--  2.0 unx     9591 b- defN 23-Apr-20 03:02 jarvis_ui-0.8.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Apr-20 03:02 jarvis_ui-0.8.dist-info/WHEEL
--rw-r--r--  2.0 unx       10 b- defN 23-Apr-20 03:02 jarvis_ui-0.8.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     3085 b- defN 23-Apr-20 03:02 jarvis_ui-0.8.dist-info/RECORD
-35 files, 1213215 bytes uncompressed, 927263 bytes compressed:  23.6%
+Zip file size: 1256764 bytes, number of entries: 37
+-rw-r--r--  2.0 unx      689 b- defN 23-May-06 06:01 jarvis_ui/__init__.py
+-rw-r--r--  2.0 unx     2381 b- defN 23-May-06 06:01 jarvis_ui/main.py
+-rw-r--r--  2.0 unx     2144 b- defN 23-May-06 06:01 jarvis_ui/test_listener.py
+-rw-r--r--  2.0 unx     2670 b- defN 23-May-06 06:01 jarvis_ui/executables/api_handler.py
+-rw-r--r--  2.0 unx      640 b- defN 23-May-06 06:01 jarvis_ui/executables/display.py
+-rw-r--r--  2.0 unx     1928 b- defN 23-May-06 06:01 jarvis_ui/executables/listener.py
+-rw-r--r--  2.0 unx      567 b- defN 23-May-06 06:01 jarvis_ui/executables/speaker.py
+-rw-r--r--  2.0 unx     6991 b- defN 23-May-06 06:01 jarvis_ui/executables/starter.py
+-rw-r--r--  2.0 unx   103102 b- defN 23-May-06 06:01 jarvis_ui/indicators/acknowledgement.wav
+-rw-r--r--  2.0 unx   132024 b- defN 23-May-06 06:01 jarvis_ui/indicators/connection_failed.wav
+-rw-r--r--  2.0 unx   121160 b- defN 23-May-06 06:01 jarvis_ui/indicators/connection_failed_ss.wav
+-rw-r--r--  2.0 unx   162060 b- defN 23-May-06 06:01 jarvis_ui/indicators/connection_restart.wav
+-rw-r--r--  2.0 unx   226348 b- defN 23-May-06 06:01 jarvis_ui/indicators/connection_restart_ss.wav
+-rw-r--r--  2.0 unx   102534 b- defN 23-May-06 06:01 jarvis_ui/indicators/failed.wav
+-rw-r--r--  2.0 unx    99372 b- defN 23-May-06 06:01 jarvis_ui/indicators/failed_ss.wav
+-rw-r--r--  2.0 unx    50518 b- defN 23-May-06 06:01 jarvis_ui/indicators/processing.wav
+-rw-r--r--  2.0 unx    42028 b- defN 23-May-06 06:01 jarvis_ui/indicators/processing_ss.wav
+-rw-r--r--  2.0 unx    39160 b- defN 23-May-06 06:01 jarvis_ui/indicators/restart.wav
+-rw-r--r--  2.0 unx    48172 b- defN 23-May-06 06:01 jarvis_ui/indicators/restart_ss.wav
+-rw-r--r--  2.0 unx    57668 b- defN 23-May-06 06:01 jarvis_ui/indicators/shutdown.wav
+-rw-r--r--  2.0 unx    50220 b- defN 23-May-06 06:01 jarvis_ui/indicators/shutdown_ss.wav
+-rw-r--r--  2.0 unx   149740 b- defN 23-May-06 06:01 jarvis_ui/indicators/unprocessable.wav
+-rw-r--r--  2.0 unx   148524 b- defN 23-May-06 06:01 jarvis_ui/indicators/unprocessable_ss.wav
+-rw-r--r--  2.0 unx     4083 b- defN 23-May-06 06:01 jarvis_ui/lib/install.sh
+-rw-r--r--  2.0 unx      174 b- defN 23-May-06 06:01 jarvis_ui/lib/requirements.txt
+-rw-r--r--  2.0 unx     5745 b- defN 23-May-06 06:01 jarvis_ui/modules/config.py
+-rw-r--r--  2.0 unx     2534 b- defN 23-May-06 06:01 jarvis_ui/modules/exceptions.py
+-rw-r--r--  2.0 unx     1454 b- defN 23-May-06 06:01 jarvis_ui/modules/logger.py
+-rw-r--r--  2.0 unx     8406 b- defN 23-May-06 06:01 jarvis_ui/modules/models.py
+-rw-r--r--  2.0 unx     1469 b- defN 23-May-06 06:01 jarvis_ui/modules/peripherals.py
+-rw-r--r--  2.0 unx     3605 b- defN 23-May-06 06:01 jarvis_ui/modules/playsound.py
+-rwxr-xr-x  2.0 unx     4083 b- defN 23-May-06 06:01 jarvis_ui-1.0.data/scripts/install.sh
+-rw-r--r--  2.0 unx     1079 b- defN 23-May-06 06:01 jarvis_ui-1.0.dist-info/LICENSE
+-rw-r--r--  2.0 unx     9107 b- defN 23-May-06 06:01 jarvis_ui-1.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-May-06 06:01 jarvis_ui-1.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx       10 b- defN 23-May-06 06:01 jarvis_ui-1.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     3292 b- defN 23-May-06 06:01 jarvis_ui-1.0.dist-info/RECORD
+37 files, 1595773 bytes uncompressed, 1251486 bytes compressed:  21.6%
```

## zipnote {}

```diff
@@ -6,15 +6,15 @@
 
 Filename: jarvis_ui/test_listener.py
 Comment: 
 
 Filename: jarvis_ui/executables/api_handler.py
 Comment: 
 
-Filename: jarvis_ui/executables/helper.py
+Filename: jarvis_ui/executables/display.py
 Comment: 
 
 Filename: jarvis_ui/executables/listener.py
 Comment: 
 
 Filename: jarvis_ui/executables/speaker.py
 Comment: 
@@ -27,14 +27,20 @@
 
 Filename: jarvis_ui/indicators/connection_failed.wav
 Comment: 
 
 Filename: jarvis_ui/indicators/connection_failed_ss.wav
 Comment: 
 
+Filename: jarvis_ui/indicators/connection_restart.wav
+Comment: 
+
+Filename: jarvis_ui/indicators/connection_restart_ss.wav
+Comment: 
+
 Filename: jarvis_ui/indicators/failed.wav
 Comment: 
 
 Filename: jarvis_ui/indicators/failed_ss.wav
 Comment: 
 
 Filename: jarvis_ui/indicators/processing.wav
@@ -81,26 +87,26 @@
 
 Filename: jarvis_ui/modules/peripherals.py
 Comment: 
 
 Filename: jarvis_ui/modules/playsound.py
 Comment: 
 
-Filename: jarvis_ui-0.8.data/scripts/install.sh
+Filename: jarvis_ui-1.0.data/scripts/install.sh
 Comment: 
 
-Filename: jarvis_ui-0.8.dist-info/LICENSE
+Filename: jarvis_ui-1.0.dist-info/LICENSE
 Comment: 
 
-Filename: jarvis_ui-0.8.dist-info/METADATA
+Filename: jarvis_ui-1.0.dist-info/METADATA
 Comment: 
 
-Filename: jarvis_ui-0.8.dist-info/WHEEL
+Filename: jarvis_ui-1.0.dist-info/WHEEL
 Comment: 
 
-Filename: jarvis_ui-0.8.dist-info/top_level.txt
+Filename: jarvis_ui-1.0.dist-info/top_level.txt
 Comment: 
 
-Filename: jarvis_ui-0.8.dist-info/RECORD
+Filename: jarvis_ui-1.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## jarvis_ui/__init__.py

```diff
@@ -1,10 +1,10 @@
 import os
 
-version = "0.8"
+version = "1.0"
 
 install_script = os.path.join(os.path.dirname(__file__), 'lib', 'install.sh')
 
 try:
     import pvporcupine  # noqa: F401
     import pyaudio  # noqa: F401
     import pynotification  # noqa: F401
```

## jarvis_ui/main.py

```diff
@@ -1,48 +1,39 @@
 import pathlib
 import time
-import warnings
 from multiprocessing import Manager, Process
 from multiprocessing.managers import DictProxy  # noqa
 
-from jarvis_ui.executables.helper import time_converter, word_engine
-from jarvis_ui.modules.exceptions import APIError
 from jarvis_ui.modules.logger import logger
 
 
 def initiator(status_manager: DictProxy) -> None:
     """Starts main process to activate Jarvis and process requests via API calls."""
+    from jarvis_ui.executables.starter import Activator
     try:
-        # Import within a function to catch startup errors
-        from jarvis_ui.executables.starter import Activator
-    except APIError as error:
-        logger.error(error)
-        status_manager["LOCKED"] = "RESTART"
-    else:
-        try:
-            status_manager["LOCKED"] = False
-            Activator().start(status_manager=status_manager)
-        except KeyboardInterrupt:
-            return
+        status_manager["LOCKED"] = False
+        Activator().start(status_manager=status_manager)
+    except KeyboardInterrupt:
+        return
 
 
 def terminator(process: Process):
     """Terminates the process.
 
     Args:
         process: Takes the process object as an argument.
     """
-    logger.info(f"Terminating {process.name}[{process.pid}]")
+    logger.info(f"Terminating {process.name} [{process.pid}]")
     process.terminate()
     if process.is_alive():
-        logger.warning(f"Process {process.name}[{process.pid}] is still alive. Killing it.")
+        logger.warning(f"Process {process.name} [{process.pid}] is still alive. Killing it.")
         process.kill()
         process.join(timeout=1e-01)
         try:
-            logger.info(f"Closing process: {process.name}[{process.pid}]")
+            logger.info(f"Closing process: {process.name} [{process.pid}]")
             process.close()  # Close immediately instead of waiting to be garbage collected
         except ValueError as error:
             # Expected when join timeout is insufficient. The resources will be released eventually but not immediately.
             logger.error(error)
 
 
 def start():
@@ -50,45 +41,27 @@
 
     See Also:
         - Swaps the public URL every time it restarts.
         - Reloads env variables upon restart.
         - Avoids memory overload.
     """
     # Import within a function to be called repeatedly
-    from jarvis_ui.modules.models import env
-    logger.info(f"Restart timer set to {time_converter(second=env.restart_timer)}")
+    from jarvis_ui.modules.models import env  # noqa: F401
     status_manager = Manager().dict()
     status_manager["LOCKED"] = False  # Instantiate DictProxy
     process = Process(target=initiator, args=(status_manager,))
     process.name = pathlib.Path(__file__).stem
     process.start()
     logger.info(f"Initiating as {process.name} [{process.pid}]")
-    start_time = time.time()
     while True:
-        if start_time + env.restart_timer <= time.time():
-            if status_manager["LOCKED"] is True:
-                continue  # Wait for the existing task to complete
-            logger.info(f"Time to restart {process.name}[{process.pid}]")
-            terminator(process=process)
-            break
-        if not process.is_alive():
-            if start.count > env.restart_attempts:
-                warnings.warn(
-                    "Retry limit exceeded after consecutive start up errors."
-                )
-                logger.critical("Retry limit exceeded.")
-                return
-            if status_manager["LOCKED"] == "RESTART":  # Called only when restart fails during initial connect
-                start.count += 1
-                logger.warning(f"{word_engine.ordinal(start.count)} restart because of a problem.")
-                break
+        if not process.is_alive():  # Terminated
             logger.info(f"Process {process.name}[{process.pid}] died. Ending loop.")
             return
-        if status_manager["LOCKED"] is None:
+        if status_manager["LOCKED"] is None:  # Neither locked nor unlocked, so restart
             logger.info("Lock status was set to None")
             terminator(process=process)
             break
-        time.sleep(0.5)
+        time.sleep(1)
     start()
 
 
 start.count = 0
```

## jarvis_ui/executables/api_handler.py

```diff
@@ -48,35 +48,34 @@
 
 
 session = requests.Session()
 session.auth = BearerAuth(token=env.token)
 session.headers['Accept'] = 'application/json'
 
 
-def make_request(path: str, timeout: Union[int, float], data: dict = None, method: str = 'POST') -> Union[dict, bool]:
+def make_request(path: str, data: dict = None, method: str = 'POST') -> Union[dict, bool]:
     """Makes a requests call to the API running on the backend to execute a said task.
 
     Args:
         data: Takes the command to be executed as an argument.
         path: Path to make the api call.
-        timeout: Timeout for a specific call.
         method: HTTP methods, GET/POST.
 
     See Also:
         - Makes session calls using a fixed connect timeout for ``3 seconds`` and variable read timeout.
 
     Returns:
         dict:
         Returns the JSON response if request was successful.
     """
     try:
         if method == 'POST':
-            response = session.post(url=env.request_url + path, json=data, timeout=(3, timeout))
+            response = session.post(url=env.request_url + path, json=data, timeout=(3, 30))
         else:
-            response = session.get(url=env.request_url + path, json=data, timeout=(3, timeout))
+            response = session.get(url=env.request_url + path, json=data, timeout=(3, 30))
     except requests.RequestException as error:
         logger.error(error)
         return False
     if not response.ok:
         logger.error(f"{response.status_code} - {response.reason}")
         return False
     if response.headers.get("Content-Type", "NO MATCH") == "application/octet-stream":
```

## jarvis_ui/executables/listener.py

```diff
@@ -1,22 +1,21 @@
 # noinspection PyUnresolvedReferences
 """Module for listener and speech recognition.
 
 >>> Listener
 
 """
 
-import sys
 from typing import Union
 
 import requests
 from speech_recognition import (Microphone, Recognizer, RequestError,
                                 UnknownValueError, WaitTimeoutError)
 
-from jarvis_ui.executables import helper
+from jarvis_ui.executables import display
 from jarvis_ui.modules.logger import logger
 from jarvis_ui.modules.models import env
 
 recognizer = Recognizer()  # initiates recognizer object
 microphone = Microphone()  # initiates microphone object
 
 if env.recognizer_settings:
@@ -31,21 +30,20 @@
 def listen() -> Union[str, None]:
     """Function to activate listener, this function will be called by most upcoming functions to listen to user input.
 
     Returns:
         str:
          - Returns recognized statement from the microphone.
     """
-    helper.flush_screen()
     return_val = None
     with microphone as source:
-        sys.stdout.write("\rListener activated..")
+        display.write_screen("Listener activated..")
         try:
             listened = recognizer.listen(source=source, timeout=env.voice_timeout,
                                          phrase_time_limit=env.voice_phrase_limit)
             return_val = recognizer.recognize_google(audio_data=listened)
         except (UnknownValueError, WaitTimeoutError, RequestError) as error:
             logger.debug(error)
         except requests.exceptions.RequestException as error:
             logger.error(error)
-        helper.flush_screen()
+        display.flush_screen()
         return return_val
```

## jarvis_ui/executables/starter.py

```diff
@@ -4,80 +4,70 @@
 >>> Starter
 
 """
 
 import os
 import string
 import struct
-import sys
 from datetime import datetime
 from multiprocessing.managers import DictProxy  # noqa
 from typing import NoReturn, Union
 
 import pvporcupine
 from pyaudio import PyAudio, Stream, paInt16
 
-from jarvis_ui.executables import helper, listener, speaker
+from jarvis_ui.executables import display, listener, speaker
 from jarvis_ui.executables.api_handler import make_request
 from jarvis_ui.modules.config import config
 from jarvis_ui.modules.logger import logger
-from jarvis_ui.modules.models import env, fileio, flag, settings
+from jarvis_ui.modules.models import env, fileio, settings
 from jarvis_ui.modules.playsound import playsound
 
 
 def processor() -> Union[str, None]:
     """Processes the request after wake word is detected.
 
     Returns:
         bool:
         Returns a ``True`` flag if a manual stop is requested.
     """
-    helper.flush_screen()
     if phrase := listener.listen():
         logger.info(f"Request: {phrase}")
-        sys.stdout.write(f"\rRequest: {phrase}")
+        display.write_screen(f"Request: {phrase}")
         if "restart" in phrase.lower():
             logger.info("User requested to restart.")
             playsound(sound=fileio.restart)
-            return flag.restart
+            display.write_screen("Restarting...")
+            return "RESTART"
         if "stop running" in phrase.lower():
             logger.info("User requested to stop.")
             playsound(sound=fileio.shutdown)
-            return flag.stop
-        if not any(word in phrase.lower() for word in config.keywords + config.conversation):
-            logger.warning(f"'{phrase}' is not a part of recognized keywords or conversation.")
-            return
-        if not any(word in phrase.lower() for word in config.api_compatible['compatible']):
-            logger.warning(f"'{phrase}' is not a part of API compatible request.")
-            playsound(sound=fileio.unprocessable)
-            return
-        if any(word in phrase.lower() for word in config.delay_with_ack + config.delay_without_ack):
-            logger.info(f"Increasing timeout for: {phrase}")
-            timeout = 30
-            if any(word in phrase.lower() for word in config.delay_with_ack):
-                playsound(sound=fileio.processing, block=False)
-        else:
-            timeout = env.request_timeout
-        if response := make_request(path='offline-communicator', timeout=timeout,
+            display.write_screen("Shutting down")
+            return "STOP"
+        if not config.keywords:
+            logger.warning("keywords are not loaded yet, restarting")
+            playsound(sound=fileio.connection_restart)
+            display.write_screen("Trying to re-establish connection with Server...")
+            return "RESTART"
+        if response := make_request(path='offline-communicator',
                                     data={'command': phrase, 'native_audio': env.native_audio,
                                           'speech_timeout': env.speech_timeout}):
-            helper.flush_screen()
             if response is True:
                 logger.info("Response received as audio.")
-                sys.stdout.write("\rResponse received as audio.")
+                display.write_screen("Response received as audio.")
                 playsound(sound=fileio.speech_wav_file)
                 os.remove(fileio.speech_wav_file)
                 return
             response = response.get('detail', '')
             logger.info(f"Response: {response}")
-            sys.stdout.write(f"\rResponse: {response}")
+            display.write_screen(f"Response: {response}")
             speaker.speak(text=response)
         else:
             playsound(sound=fileio.failed)
-            return flag.restart
+            return "RESTART"
 
 
 class Activator:
     """Awaits for the keyword ``Jarvis`` and triggers ``initiator`` when heard.
 
     >>> Activator
 
@@ -152,38 +142,31 @@
         """Closes the audio stream and calls the processor."""
         logger.debug(f"Detected {settings.bot} at {datetime.now()}")
         status_manager["LOCKED"] = True
         logger.debug("Restart locked")
         playsound(sound=fileio.acknowledgement, block=False)
         self.py_audio.close(stream=self.audio_stream)
         processed = processor()
-        if processed == flag.stop:
+        if processed == "STOP":
             self.audio_stream = None
             raise KeyboardInterrupt
-        if processed == flag.restart:
+        if processed == "RESTART":
             status_manager["LOCKED"] = None
-        else:
-            status_manager["LOCKED"] = False
+            while True:
+                pass  # To ensure the listener doesn't end so that, the main process can kill and restart
+        status_manager["LOCKED"] = False
         logger.debug("Restart released")
         self.audio_stream = self.open_stream()
-        helper.flush_screen()
+        display.flush_screen()
 
     def start(self, status_manager: DictProxy) -> NoReturn:
         """Runs ``audio_stream`` in a forever loop and calls ``initiator`` when the phrase ``Jarvis`` is heard."""
         logger.info(f"Starting wake word detector with sensitivity: {env.sensitivity}")
         while True:
-            sys.stdout.write(f"\r{self.label}")
+            display.write_screen(self.label)
             pcm = struct.unpack_from("h" * self.detector.frame_length,
                                      self.audio_stream.read(num_frames=self.detector.frame_length,
                                                             exception_on_overflow=False))
             result = self.detector.process(pcm=pcm)
-            if settings.legacy:
-                if len(env.wake_words) == 1 and result:
-                    settings.bot = env.wake_words[0]
-                    self.executor(status_manager=status_manager)
-                elif len(env.wake_words) > 1 and result >= 0:
-                    settings.bot = env.wake_words[result]
-                    self.executor(status_manager=status_manager)
-            else:
-                if result >= 0:
-                    settings.bot = env.wake_words[result]
-                    self.executor(status_manager=status_manager)
+            if result is False or result < 0:
+                continue
+            self.executor(status_manager=status_manager)
```

## jarvis_ui/lib/requirements.txt

```diff
@@ -1,8 +1,7 @@
-packaging==23.0
+packaging==23.1
 SpeechRecognition==3.8.1  # Do not upgrade, no functional upgrade in latest version
 py3-tts==3.1
-inflect==6.0.4
-requests>=2.28.2
 pydantic[dotenv,email]==1.10.7
+requests
 PyYAML
 pynotification
```

## jarvis_ui/modules/config.py

```diff
@@ -23,26 +23,26 @@
 
 def swapper() -> NoReturn:
     """Swaps any request URL with the public URL if returned by Jarvis.
 
     Notes:
         Avoid making calls via load balancers or reverse proxy (if one is in place) such as CloudFront or Nginx.
     """
-    if (public_url := make_request(path='offline-communicator', timeout=env.request_timeout,
+    if (public_url := make_request(path='offline-communicator',
                                    data={'command': 'ngrok public url'})) and public_url.get('detail'):
         if public_url['detail'][-1] != "/":
             public_url['detail'] += "/"
         if public_url['detail'] == env.request_url:
             return
         logger.info(f"Switching {env.request_url} to {public_url['detail']}")
         env.request_url = public_url['detail']
 
 
 class Config(BaseConfig):
-    """Gets keywords, conversation and api-compatibles during start up. Runs custom validations on env-vars.
+    """Gets keywords during start up. Runs custom validations on env-vars.
 
     >>> Config
 
     Raises:
         APIError:
         If the UI is unable to connect to the API server.
 
@@ -58,40 +58,30 @@
         env.request_url += "/"
 
     swapper()
 
     if isinstance(env.sensitivity, float) or isinstance(env.sensitivity, PositiveInt):
         env.sensitivity = [env.sensitivity] * len(env.wake_words)
     EXCEPTION = APIError(f"Unable to connect to the API via {env.request_url}")
-    if not (keywords := make_request(path='keywords', timeout=env.request_timeout, method='GET')):
-        raise EXCEPTION
-    if not (conversation := make_request(path='conversation', timeout=env.request_timeout, method='GET')):
-        raise EXCEPTION
-    if not (api_compatible := make_request(path='api-compatible', timeout=env.request_timeout, method='GET')):
-        raise EXCEPTION
-    if detail := keywords.get("detail", conversation.get("detail", api_compatible.get("detail"))):
-        raise APIError(detail)
-
-    # delay_keywords = list(filter(lambda v: v is not None, delay_keywords))  # If 0 is to be included
-    delay_with_ack = list(filter(None, keywords.get('car', []) + keywords.get('speed_test', []) +
-                                 keywords.get('google_home', []) + keywords.get('garage', [])))
-    delay_without_ack = list(filter(None, keywords.get('television', [])))  # Since delay is only on initial turn on
-    keywords = sum([v for _, v in keywords.items()], [])
-    conversation = sum([v for _, v in conversation.items()], [])
+    if keywords := make_request(path='keywords', method='GET'):
+        logger.info("keywords have been loaded")
+
+    if keywords:
+        keywords = sum([v for _, v in keywords.items()], [])
 
     if env.speech_timeout and env.native_audio:
         warnings.warn(
             "Both `speech-synthesis` and `native-audio` cannot be enabled simultaneously.\n"
             "Speech synthesis uses third-party tts service where as `native_audio` preserves the audio from server.\n"
             "Disabling speech synthesis!!"
         )
         env.speech_timeout = 0
 
-    if settings.operating_system != "Darwin" and not env.native_audio and env.speech_timeout < env.request_timeout:
-        env.speech_timeout = env.request_timeout
+    if settings.operating_system != "Darwin" and not env.native_audio:
+        env.speech_timeout = 10
 
     if env.speech_timeout and not env.native_audio:
         fileio.failed = add_ss_extn(fileio.failed)
         fileio.restart = add_ss_extn(fileio.restart)
         fileio.shutdown = add_ss_extn(fileio.shutdown)
         fileio.processing = add_ss_extn(fileio.processing)
         fileio.unprocessable = add_ss_extn(fileio.unprocessable)
@@ -143,11 +133,7 @@
 
 
 logger.info(f"Current Process: {current_process().name}")
 if current_process().name != "MainProcess":
     config = Config()  # Run validations only on SyncManager and child process
 else:
     config = None
-
-# Needs to be set for all processes but should happen after main process validations are done
-# Because keyword paths are changed for legacy macOS during main process validations
-settings.wake_words = list(pvporcupine.KEYWORD_PATHS.keys())
```

## jarvis_ui/modules/models.py

```diff
@@ -9,15 +9,15 @@
 import subprocess
 import sys
 from collections import ChainMap
 from datetime import datetime
 from enum import Enum
 from multiprocessing import current_process
 from threading import Thread
-from typing import Dict, List, NoReturn, Optional, Union
+from typing import Dict, List, NoReturn, Union
 
 import pyttsx3
 from packaging.version import parse as parser
 from pydantic import (BaseSettings, Field, FilePath, HttpUrl, PositiveFloat,
                       PositiveInt, validator)
 
 from jarvis_ui import indicators
@@ -27,28 +27,14 @@
 module: Dict[str, pyttsx3.Engine] = {}
 if os.getcwd().endswith("doc_generator"):
     os.chdir(os.path.dirname(os.getcwd()))
 
 UNICODE_PREFIX = base64.b64decode(b'XA==').decode(encoding="ascii") + string.ascii_letters[20] + string.digits[:1] * 2
 
 
-class Flag(str, Enum):
-    """Enum flags for restart and stop.
-
-    >>> Flag
-
-    """
-
-    stop: str = "STOP"
-    restart: str = "RESTART"
-
-
-flag = Flag
-
-
 class Settings(BaseSettings):
     """Loads most common system values.
 
     >>> Settings
 
     Raises:
         UnsupportedOS:
@@ -62,15 +48,14 @@
             "Unsupported Operating System. Currently Jarvis can run only on Mac and Windows OS.\n\n"
             "To raise an issue: https://github.com/thevickypedia/Jarvis/issues/new\n"
             "To reach out: https://vigneshrao.com/contact\n"
             f"\n{''.join('*' for _ in range(80))}\n"
         )
     legacy: bool = True if os == "Darwin" and parser(platform.mac_ver()[0]) < parser('10.14') else False
     bot: str = "jarvis"
-    wake_words: Optional[List[str]]
     if sys.stdin.isatty():
         interactive = True
     else:
         interactive = False
 
 
 settings = Settings()
@@ -173,16 +158,14 @@
     request_url: HttpUrl = Field(default=..., env="REQUEST_URL")
     token: str = Field(default=..., env="TOKEN")
 
     # Speech recognition settings
     recognizer_settings: RecognizerSettings = Field(default=None, env="RECOGNIZER_SETTINGS")
     recognizer_settings_default: RecognizerSettings = RecognizerSettings()
 
-    restart_timer: RestartTimer = Field(default=86_400, le=172_800, ge=1_800, env="RESTART_TIMER")
-    restart_attempts: int = Field(default=5, gt=1, le=1000, env="RESTART_ATTEMPTS")
     debug: bool = Field(default=False, env="DEBUG")
     microphone_index: Union[int, PositiveInt] = Field(default=None, ge=0, env='MICROPHONE_INDEX')
 
     request_timeout: Union[float, PositiveInt] = Field(default=5, env="REQUEST_TIMEOUT")
     speech_timeout: Union[float, PositiveInt] = Field(default=0, env="SPEECH_TIMEOUT")
     sensitivity: Union[Sensitivity, List[Sensitivity]] = Field(default=0.5, le=1, ge=0, env="SENSITIVITY")
 
@@ -228,14 +211,15 @@
 
     failed: FilePath = os.path.join(indicators.__path__[0], 'failed.wav')
     restart: FilePath = os.path.join(indicators.__path__[0], 'restart.wav')
     shutdown: FilePath = os.path.join(indicators.__path__[0], 'shutdown.wav')
     processing: FilePath = os.path.join(indicators.__path__[0], 'processing.wav')
     unprocessable: FilePath = os.path.join(indicators.__path__[0], 'unprocessable.wav')
     acknowledgement: FilePath = os.path.join(indicators.__path__[0], 'acknowledgement.wav')
+    connection_restart: FilePath = os.path.join(indicators.__path__[0], 'connection_restart.wav')
 
     speech_wav_file: Union[FilePath, str] = os.path.join(indicators.__path__[0], 'speech-synthesis.wav')
     base_log_file: Union[FilePath, str] = datetime.now().strftime(os.path.join('logs', 'jarvis_%d-%m-%Y.log'))
 
 
 env = EnvConfig()
 fileio = FileIO()
```

## jarvis_ui/modules/playsound.py

```diff
@@ -92,15 +92,15 @@
     Args:
         filepath: Filename or filepath of the wav file.
         samplerate: Sample rate of the audio file.
     """
     try:
         import librosa  # noqa: PyPackageRequirements
     except ImportError:
-        raise ImportError("install librosa using python -m pip install librosa==0.9.2")
+        raise ImportError("install librosa==0.9.2")
     try:
         import soundfile  # noqa: PyPackageRequirements
     except ImportError:
-        raise ImportError("install soundfile using python -m pip install soundfile==0.11.0")
+        raise ImportError("install soundfile==0.11.0")
     data, _ = librosa.load(path=filepath, sr=samplerate)
     soundfile.write(file=filepath, data=data, samplerate=samplerate)
     wave.open(f=filepath, mode='r')
```

## Comparing `jarvis_ui-0.8.data/scripts/install.sh` & `jarvis_ui-1.0.data/scripts/install.sh`

 * *Files identical despite different names*

## Comparing `jarvis_ui-0.8.dist-info/LICENSE` & `jarvis_ui-1.0.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `jarvis_ui-0.8.dist-info/METADATA` & `jarvis_ui-1.0.dist-info/METADATA`

 * *Files 10% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: jarvis-ui
-Version: 0.8
+Version: 1.0
 Summary: Jarvis UI to perform voice commands via API calls
 Author-email: Vignesh Sivanandha Rao <svignesh1793@gmail.com>
 License: MIT License
         
         Copyright (c) 2020 Vignesh Sivanandha Rao
         
         Permission is hereby granted, free of charge, to any person obtaining a copy
@@ -57,20 +57,19 @@
 Classifier: Framework :: AsyncIO
 Classifier: Framework :: Sphinx
 Classifier: Framework :: aiohttp
 Classifier: Natural Language :: English
 Requires-Python: >=3.8
 Description-Content-Type: text/markdown
 License-File: LICENSE
-Requires-Dist: packaging (==23.0)
+Requires-Dist: packaging (==23.1)
 Requires-Dist: SpeechRecognition (==3.8.1)
 Requires-Dist: py3-tts (==3.1)
-Requires-Dist: inflect (==6.0.4)
-Requires-Dist: requests (>=2.28.2)
 Requires-Dist: pydantic[dotenv,email] (==1.10.7)
+Requires-Dist: requests
 Requires-Dist: PyYAML
 Requires-Dist: pynotification
 Provides-Extra: dev
 Requires-Dist: pytest ; extra == 'dev'
 Requires-Dist: pre-commit ; extra == 'dev'
 
 ![Python](https://img.shields.io/badge/python-3.8%20%7C%203.9%20%7C%203.10%20%7C%203.11-blue)
@@ -102,33 +101,26 @@
 ### Mandatory Env Vars
 - **REQUEST_URL**: URL to which the API call has to be made. Can be `localhost` or a `tunneled` URL behind a reverse proxy/CDN.
 - **TOKEN**: Authentication token.
 
 ### Optional Env Vars
 - **DEBUG**: Defaults to `False` - _Enable debug level logging_
 <br><br>
-- **REQUEST_TIMEOUT**: Defaults to `5` - _Timeout for API calls_
-- **SPEECH_TIMEOUT**: Defaults to `0` for macOS, `5` for Windows - _Timeout for speech synthesis_
+- **SPEECH_TIMEOUT**: Defaults to `0` for macOS, `10` for Windows - _Timeout for speech synthesis_
 <br><br>
 - **NATIVE_AUDIO**: Defaults to `False` - _If set to `True`, the response is generated in the server's default voice_
 - **WAKE_WORDS**: Defaults to `jarvis` (Defaults to `alexa` in macOS older than `10.14`) - _Wake words to initiate Jarvis_
 - **SENSITIVITY**: Defaults to `0.5` - _Sensitivity of wake word detection_
 <br><br>
 - **MICROPHONE_INDEX**: Defaults to `None` - _Use [peripherals.py](https://github.com/thevickypedia/Jarvis_UI/blob/main/modules/peripherals.py) to get the index values_
 - **VOICE_NAME**: Defaults to the author's favorite per the OS. _Name of the voice supported by the OperatingSystem_
 - **VOICE_RATE**: Defaults to the value from `pyttsx3` module - _Speed/rate at which the text should be spoken_
 <br><br>
 - **VOICE_TIMEOUT**: Defaults to `3` - _Timeout for listener once wake word is detected - Awaits for a speech to begin until this limit_
 - **VOICE_PHRASE_LIMIT**: Defaults to `None` - _Timeout for phrase once listener is activated - Listener will be deactivated after this limit_
-<br><br>
-- **RESTART_TIMER**: Defaults to 24 hours.
-  - I have a proxy tunneling my `localhost` from Jarvis server.
-  - I have a CDN setup that's allowing me to access the tunnel with a custom domain.
-  - Since I don't want my CDN to take the hit, and the tunnel origin changes often, I'm swapping the URL upon startup.
-  - This requires restarting the UI every now and then.
 
 **Custom settings for speech recognition**
 
 These are customized according to the author's voice pitch.
 Please use [test_listener.py](https://github.com/thevickypedia/Jarvis_UI/blob/main/test_listener.py) to figure out the suitable values in a trial and error method.
 
 > These settings are added (optionally), to avoid the hard coded `VOICE_PHRASE_LIMIT`
```

## Comparing `jarvis_ui-0.8.dist-info/RECORD` & `jarvis_ui-1.0.dist-info/RECORD`

 * *Files 10% similar despite different names*

```diff
@@ -1,35 +1,37 @@
-jarvis_ui/__init__.py,sha256=-00rTEGz86OogTVsc7ZWrNaoM9bI9hKiWjQugPZIRFE,689
-jarvis_ui/main.py,sha256=-ow_1F6GKxAbGu_b1g9oaPnkGnSmC5ksVKsNaxdO_6Y,3592
+jarvis_ui/__init__.py,sha256=jpkzZ4Hj6ys_M3t9r9tYDHV7yCypnSpzSFeaIP8RD8E,689
+jarvis_ui/main.py,sha256=ZxsHutP7B7TEOA31SdGHg1F8-SvOs9zFtuV-GSQFTlc,2381
 jarvis_ui/test_listener.py,sha256=Hd-hfeqgmy9s9YNqFSnsnSK9DoqJH7-sgapCpyUYn7s,2144
-jarvis_ui/executables/api_handler.py,sha256=ya-aOf1GnR4C8KBIwl5CohMzjYOTSl-HVrDyJV-yApw,2754
-jarvis_ui/executables/helper.py,sha256=_85hgUcUfLlbWgLrYkqVWDaRE0qBP37zc3vehLJsr3o,2377
-jarvis_ui/executables/listener.py,sha256=yj4HUIg-whzAZGtg0JI5VffZ9Y_VGRICdRgEXQTVDtk,1961
+jarvis_ui/executables/api_handler.py,sha256=P0K36ZOwdXM6ExTkSa8c5STIv2JdfSXvdWo8rs5nvVc,2670
+jarvis_ui/executables/display.py,sha256=u6zkSe1diJTZoqoqOMxHVtvk12Neym9IGPqx0_Fa8d8,640
+jarvis_ui/executables/listener.py,sha256=hCc2DOVvdfSzWQVtnTyD382FHBB_aAspB4v1545Zf7k,1928
 jarvis_ui/executables/speaker.py,sha256=Ofz5Bz8U50tmLjNUKcjkPPP-rmAg2l-D4MniIF7HIdk,567
-jarvis_ui/executables/starter.py,sha256=eF6DNU-9vXJkpxkrcJW3xvNt56If4AP_cIvlGnOknqU,7886
+jarvis_ui/executables/starter.py,sha256=KIgU21JxquyzmQcSETfroVD8z88ttLAUCMPUP6gkQxo,6991
 jarvis_ui/indicators/acknowledgement.wav,sha256=_KvA_KY5Cs1WcOWkmxwzJrvEt75113g4qQCKbeA6LYA,103102
 jarvis_ui/indicators/connection_failed.wav,sha256=NJbk_4ONub992VQVI8DiHyZKgSjOXlAEzsl2DPXd6VQ,132024
 jarvis_ui/indicators/connection_failed_ss.wav,sha256=s2IEk6MuKe__MQrhEpewSsJpKKLojFWEdKtVOSpy_14,121160
+jarvis_ui/indicators/connection_restart.wav,sha256=aYQwGN96L95__twmCjjVWoi_c5OMqQv3D_KUAAeiPag,162060
+jarvis_ui/indicators/connection_restart_ss.wav,sha256=upeuedV1GNSreDeMOLBtcpxcwmrhptL2xt36qooS4Ic,226348
 jarvis_ui/indicators/failed.wav,sha256=23VYfWCToqK15RNn1z2ZRKHZMBMGavRO1oYCyOLGP7I,102534
 jarvis_ui/indicators/failed_ss.wav,sha256=B9Gro32SnMc2WxEuaD238CUtk2v61CgD26Mt7brOTsE,99372
 jarvis_ui/indicators/processing.wav,sha256=CDd6mUJhL-cSLGDcRcMl6oMhfkuclTQO75fkAb7CgkM,50518
 jarvis_ui/indicators/processing_ss.wav,sha256=uguIchslQ9XScuCk7BUaGvAZtwHpFTX_N0FNAUaG__g,42028
 jarvis_ui/indicators/restart.wav,sha256=lwdKrXBfL71H6fM0bAajiu2go07LCKBK7Wnj6qsgsfI,39160
 jarvis_ui/indicators/restart_ss.wav,sha256=i0f7_NLYh2gyT3ui30E5TMmWD1JuOFzZJloChtyixIo,48172
 jarvis_ui/indicators/shutdown.wav,sha256=oWlUNm1N6tF1T2IAufDejocEFoBTAEVFyeyamyXOQvQ,57668
 jarvis_ui/indicators/shutdown_ss.wav,sha256=BvZ6FAoB_Qy8fTPmHhzhLkBQFREFUb2Kp0QOMPJ8os0,50220
 jarvis_ui/indicators/unprocessable.wav,sha256=9LvgT6DdM92g4PdQAFijeC5kpGkEgAmOw6pdz6cjK5M,149740
 jarvis_ui/indicators/unprocessable_ss.wav,sha256=sDHf76tehS6XaO9VeR765un1QVJld8VcnZoO9AMSK9w,148524
 jarvis_ui/lib/install.sh,sha256=JHBt_69n9xFyVw1DsKx4mlegfgOOLDr6a9RfsatWi_Q,4083
-jarvis_ui/lib/requirements.txt,sha256=0ylcrWj1QqGlcc2RBlTvTE7Z5ICgvhFYzOKSJG67hnc,197
-jarvis_ui/modules/config.py,sha256=q7MnwuhEcpLHSSEYTLPsVydluyajpfsQ9Tr41wOMfmc,6975
+jarvis_ui/lib/requirements.txt,sha256=56cOnVYbLANppQp_Y8jfqVkapNruWqD_6KlMr693goA,174
+jarvis_ui/modules/config.py,sha256=2QhmX957dwIMLh_p3P8KBHgPjRP1KcJ993uVrO7KBJs,5745
 jarvis_ui/modules/exceptions.py,sha256=u3U3LxhOiVcgIMNGg3SfUlRhHmjq0qs3I5DsC0muplw,2534
 jarvis_ui/modules/logger.py,sha256=FvF80SNXQOFL4S7T7H2DM_YfmAYkdThwNqYIES6TMuU,1454
-jarvis_ui/modules/models.py,sha256=g-qdZY2sFpMhe2blm2trl8DJFqG-Y7oaV2ll_FPmoH8,8692
+jarvis_ui/modules/models.py,sha256=p5yo0M2D_YjOYbjnvLgMv-L6c1Rxjjwtac7yVf2oQvQ,8406
 jarvis_ui/modules/peripherals.py,sha256=rXM5MfZJHjuCLiAKMlh9HFqIx3VBAYpFisjTBodPUnc,1469
-jarvis_ui/modules/playsound.py,sha256=4ghVXTT9rI5Um4Mgly8AVHxIzLJd1L7nEO0m7fxdkLE,3679
-jarvis_ui-0.8.data/scripts/install.sh,sha256=JHBt_69n9xFyVw1DsKx4mlegfgOOLDr6a9RfsatWi_Q,4083
-jarvis_ui-0.8.dist-info/LICENSE,sha256=gg8ZJZhenP19y9coBRHWLMCEVEKnQzkobEMpVhE7eDg,1079
-jarvis_ui-0.8.dist-info/METADATA,sha256=1c2YUOJ2Ns_beH4XpUq3ChQJH_yjothJL7QGCm7FoxQ,9591
-jarvis_ui-0.8.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-jarvis_ui-0.8.dist-info/top_level.txt,sha256=jSppTuWThuyhlfMRex4uG68JfFzX13ElLcV9ZUaaTBE,10
-jarvis_ui-0.8.dist-info/RECORD,,
+jarvis_ui/modules/playsound.py,sha256=Lq5gZuCdH4_a3jsDHTaF0aIULNqqK8A7tgRn11qLzbQ,3605
+jarvis_ui-1.0.data/scripts/install.sh,sha256=JHBt_69n9xFyVw1DsKx4mlegfgOOLDr6a9RfsatWi_Q,4083
+jarvis_ui-1.0.dist-info/LICENSE,sha256=gg8ZJZhenP19y9coBRHWLMCEVEKnQzkobEMpVhE7eDg,1079
+jarvis_ui-1.0.dist-info/METADATA,sha256=rzRsW7_BdziEzNLUGPha6lAfvhsRSOycV6AY-U4u2DI,9107
+jarvis_ui-1.0.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+jarvis_ui-1.0.dist-info/top_level.txt,sha256=jSppTuWThuyhlfMRex4uG68JfFzX13ElLcV9ZUaaTBE,10
+jarvis_ui-1.0.dist-info/RECORD,,
```

